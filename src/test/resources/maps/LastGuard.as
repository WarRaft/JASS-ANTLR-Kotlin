nothing InitGlobals() {
	integer i = 0;
	while (true) {
		if ((i > 1)) break;
	}
}
nothing InitSounds() {
	SetSoundParamsFromLabel(gg_snd_HeroFirelordYesAttack1, "HeroFireLordYesAttack");
	SetSoundDuration(gg_snd_HeroFirelordYesAttack1, $984);
	SetSoundParamsFromLabel(gg_snd_HeroFirelordYesAttack2, "HeroFireLordYesAttack");
	SetSoundDuration(gg_snd_HeroFirelordYesAttack2, $DAF);
	SetSoundParamsFromLabel(gg_snd_HeroFirelordYesAttack3, "HeroFireLordYesAttack");
	SetSoundDuration(gg_snd_HeroFirelordYesAttack3, $AD1);
	SetSoundParamsFromLabel(gg_snd_HeroFirelordWarcry1, "HeroFireLordWarcry");
	SetSoundDuration(gg_snd_HeroFirelordWarcry1, 5072);
	SetSoundParamsFromLabel(gg_snd_HeroLichReady1, "HeroLichReady");
	SetSoundDuration(gg_snd_HeroLichReady1, 4337);
	SetSoundParamsFromLabel(gg_snd_HeroLichYesAttack1, "HeroLichYesAttack");
	SetSoundDuration(gg_snd_HeroLichYesAttack1, $A4C);
	SetSoundParamsFromLabel(gg_snd_HeroLichYesAttack2, "HeroLichYesAttack");
	SetSoundDuration(gg_snd_HeroLichYesAttack2, $9D4);
	SetSoundParamsFromLabel(gg_snd_HeroLichYesAttack3, "HeroLichYesAttack");
	SetSoundDuration(gg_snd_HeroLichYesAttack3, $872);
	SetSoundParamsFromLabel(gg_snd_DeathSound1, "BanditYesAttack");
	SetSoundDuration(gg_snd_DeathSound1, $4EE);
	SetSoundParamsFromLabel(gg_snd_KnightNoGold1, "NoGoldHuman");
	SetSoundDuration(gg_snd_KnightNoGold1, $57D);
	SetSoundParamsFromLabel(gg_snd_KnightInventoryFull1, "InventoryFullHuman");
	SetSoundDuration(gg_snd_KnightInventoryFull1, $3E8);
	SetSoundParamsFromLabel(gg_snd_HeroStep1, "HeroCinematicStep");
	SetSoundDuration(gg_snd_HeroStep1, 947);
	SetSoundParamsFromLabel(gg_snd_HeroStep2, "HeroCinematicStep");
	SetSoundDuration(gg_snd_HeroStep2, 697);
	SetSoundParamsFromLabel(gg_snd_HeroStep3, "HeroCinematicStep");
	SetSoundDuration(gg_snd_HeroStep3, 599);
	SetSoundParamsFromLabel(gg_snd_HeroStep4, "HeroCinematicStep");
	SetSoundDuration(gg_snd_HeroStep4, $E5);
	SetSoundParamsFromLabel(gg_snd_HuntressYesAttack4, "HuntressYesAttack");
	SetSoundDuration(gg_snd_HuntressYesAttack4, $55E);
	SetSoundChannel(gg_snd_HuntressYesAttack4, 0);
	SetSoundParamsFromLabel(gg_snd_WardenAttackEffort1, "WardenAttack");
	SetSoundDuration(gg_snd_WardenAttackEffort1, $54E);
	SetSoundParamsFromLabel(gg_snd_AlchemistChemicalBurst1, "GoblinAlchemistMorph");
	SetSoundDuration(gg_snd_AlchemistChemicalBurst1, $801);
	SetSoundChannel(gg_snd_AlchemistChemicalBurst1, 0);
	SetSoundParamsFromLabel(gg_snd_AlchemistMorph1, "GoblinAlchemistMorphAlternate");
	SetSoundDuration(gg_snd_AlchemistMorph1, $67F);
	SetSoundChannel(gg_snd_AlchemistMorph1, 0);
	SetSoundParamsFromLabel(gg_snd_HeroAlchemistYesAttack1, "HEROGoblinALCHEMISTYesAttack");
	SetSoundDuration(gg_snd_HeroAlchemistYesAttack1, $942);
	SetSoundChannel(gg_snd_HeroAlchemistYesAttack1, 0);
}
nothing CreateNeutralPassiveBuildings() {
	player p = Player($F);
	unit u;
	integer unitID;
	trigger t;
	real life;
	SetUnitColor(u, ConvertPlayerColor(6));
	SetUnitColor(u, ConvertPlayerColor(0));
	SetUnitColor(u, ConvertPlayerColor(1));
}
nothing CreateNeutralPassive() {
	player p = Player($F);
	unit u;
	integer unitID;
	trigger t;
	real life;
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	SetUnitState(gg_unit_n00Y_0101, UNIT_STATE_MANA, 0);
	SetUnitState(gg_unit_n00Y_0102, UNIT_STATE_MANA, 0);
	SetUnitState(gg_unit_e002_0106, UNIT_STATE_MANA, 0);
	SetUnitState(gg_unit_e002_0108, UNIT_STATE_MANA, 0);
}
nothing CreatePlayerBuildings() {
}
nothing CreatePlayerUnits() {
}
nothing CreateAllUnits() {
	CreateNeutralPassiveBuildings();
	CreatePlayerBuildings();
	CreateNeutralPassive();
	CreatePlayerUnits();
}
nothing CreateRegions() {
	weathereffect we;
	EnableWeatherEffect(we, true);
}
nothing CreateCameras() {
	CameraSetupSetField(gg_cam_Kamera_na_taverni, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Kamera_na_taverni, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Kamera_na_taverni, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Kamera_na_taverni, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Kamera_na_taverni, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Kamera_na_taverni, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Kamera_na_taverni, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Kamera_na_taverni, 4928.7, 3881.5, .0);
	CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Kamera_glavnoi_bazi, 1240., -6378.1, .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Eiti_Arena, 4255.9, 866.9, .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Eiti_Arena_Top_Portal, 4394.2, 1237.5, .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Eiti_Arena_Bot_Portal, 4465.7, 342.3, .0);
	CameraSetupSetField(gg_cam_Camera_miners_arena, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_miners_arena, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Camera_miners_arena, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Camera_miners_arena, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Camera_miners_arena, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_miners_arena, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_miners_arena, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_miners_arena, -3311.2, 2967.9, .0);
	CameraSetupSetField(gg_cam_Camera_BossFightStart, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_BossFightStart, CAMERA_FIELD_ROTATION, 180.9, .0);
	CameraSetupSetField(gg_cam_Camera_BossFightStart, CAMERA_FIELD_ANGLE_OF_ATTACK, 336.5, .0);
	CameraSetupSetField(gg_cam_Camera_BossFightStart, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Camera_BossFightStart, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_BossFightStart, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_BossFightStart, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_BossFightStart, -608.2, 2881., .0);
	CameraSetupSetField(gg_cam_Camera_Duel_Arena, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Duel_Arena, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Camera_Duel_Arena, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Camera_Duel_Arena, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Camera_Duel_Arena, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Duel_Arena, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Duel_Arena, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Duel_Arena, 2139.4, 2853.8, .0);
	CameraSetupSetField(gg_cam_Kamera_cast_magi, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Kamera_cast_magi, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Kamera_cast_magi, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Kamera_cast_magi, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Kamera_cast_magi, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Kamera_cast_magi, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Kamera_cast_magi, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Kamera_cast_magi, 1268., -5714.3, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den1, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den1, CAMERA_FIELD_ROTATION, 233.6, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den1, CAMERA_FIELD_ANGLE_OF_ATTACK, 299.3, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den1, CAMERA_FIELD_TARGET_DISTANCE, 1363.6, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den1, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den1, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den1, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Beorn_Den1, 1384., -9577.2, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den2, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den2, CAMERA_FIELD_ROTATION, 297.9, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den2, CAMERA_FIELD_ANGLE_OF_ATTACK, 300.3, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den2, CAMERA_FIELD_TARGET_DISTANCE, 1363.6, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den2, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den2, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den2, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Beorn_Den2, 1240.7, -9620.8, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den3, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den3, CAMERA_FIELD_ROTATION, 110.6, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den3, CAMERA_FIELD_ANGLE_OF_ATTACK, 300.4, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den3, CAMERA_FIELD_TARGET_DISTANCE, 1127., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den3, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den3, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den3, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Beorn_Den3, 562.8, -8241.1, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den4, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den4, CAMERA_FIELD_ROTATION, 110.6, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den4, CAMERA_FIELD_ANGLE_OF_ATTACK, 300.4, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den4, CAMERA_FIELD_TARGET_DISTANCE, 1127., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den4, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den4, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den4, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Beorn_Den4, -15.3, -9035.4, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den5, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den5, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den5, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den5, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den5, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den5, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den5, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Beorn_Den5, 2191., -8224.1, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den6, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den6, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den6, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den6, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den6, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den6, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den6, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Beorn_Den6, 1474.8, -9613.2, .0);
}
group CopyGroup(group g) {
	ForGroup(g, GroupAddGroupEnum);
	return bj_groupAddGroupDest;
}
nothing DamageGroupOfUnit(unit u, real x, real y, real radius, real damage, boolean dbuilds, boolean dmagicimmune, boolean dally) {
	group g = CreateGroup();
	unit target;
	GroupEnumUnitsInRange(g, x, y, radius, null);
	while (true) {
		if (target == null) break;
		if ((dally && dbuilds) || (dally && !dbuilds && !IsUnitType(u, UNIT_TYPE_STRUCTURE)) || (IsUnitEnemy(target, GetOwningPlayer(u)) && dbuilds) || (IsUnitEnemy(target, GetOwningPlayer(u)) && !dbuilds && !IsUnitType(u, UNIT_TYPE_STRUCTURE))) {
			UnitDamageTarget(u, target, damage, true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS);
		}
		GroupRemoveUnit(g, target);
	}
	GroupClear(g);
	DestroyGroup(g);
}
nothing KillSummonsAndIllusions(group g) {
	unit Picked;
	integer id;
	while (true) {
		if (Picked == null) break;
		if (((IsUnitIllusion(Picked) || IsUnitType(Picked, UNIT_TYPE_SUMMONED)) || ((id == 'h017') || (id == 'h01D') || (id == 'h01E') || (id == 'h01F') || (id == 'h01G') || (id == 'h01G'))) && id != 'h00C') {
			KillUnit(Picked);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
}
nothing FilterMostNearUnit(group g, unit Unit) {
	unit ufil;
	real xu;
	real yu;
	real duU;
	real x1U;
	real y1U;
	real d1UUF;
	real X = GetUnitX(Unit);
	real Y = GetUnitY(Unit);
	while (true) {
		if (ufil == null) break;
		if (GetUnitState(ufil, UNIT_STATE_LIFE) > .405 && ufil != Unit && (IsUnitType(ufil, UNIT_TYPE_STRUCTURE) == false) && GetOwningPlayer(ufil) != GetOwningPlayer(Unit)) {
			if (udg_Unit_FilterMostNearUnit == null) {
			else
				if (duU < d1UUF) {
				}
			}
		}
		GroupRemoveUnit(g, ufil);
	}
	GroupClear(g);
	DestroyGroup(g);
}
nothing AbilityPreload(integer id, integer level) {
	UnitAddAbility(udg_preloader, id);
	SetUnitAbilityLevel(udg_preloader, id, level);
	UnitRemoveAbility(udg_preloader, id);
}
nothing EffectPreload(string s) {
	Preload(s);
}
nothing UnitPreload(integer id) {
	KillUnit(CreateUnit(Player($F), id, -3000., -3000., .0));
}
nothing ItemPreload(integer id) {
	RemoveItem(CreateItem(id, .0, .0));
}
nothing DestroyEffectWithWaitActions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	effect ef = LoadEffectHandle(udg_hash, h, 1);
	DestroyEffect(ef);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing DestroyEffectWithWait(effect ef, real time) {
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	SaveEffectHandle(udg_hash, h, 1, ef);
	TimerStart(t, time, false, DestroyEffectWithWaitActions);
}
nothing SetAttackAbilityLevel(unit target, integer damage) {
	integer a100;
	integer a10;
	integer a1;
	integer una100;
	integer una10;
	integer una1;
	integer a;
	integer una;
	integer itog100 = 0;
	integer itog10 = 0;
	integer itog1 = 0;
	integer itog;
	if (GetUnitAbilityLevel(target, 'A07F') <= 0) {
		UnitAddAbility(target, 'A07F');
		UnitAddAbility(target, 'A07G');
		UnitAddAbility(target, 'A07I');
		UnitAddAbility(target, 'A09D');
		UnitAddAbility(target, 'A0E6');
		UnitAddAbility(target, 'A0E7');
		UnitMakeAbilityPermanent(target, true, 'A07F');
		UnitMakeAbilityPermanent(target, true, 'A07G');
		UnitMakeAbilityPermanent(target, true, 'A07I');
		UnitMakeAbilityPermanent(target, true, 'A09D');
		UnitMakeAbilityPermanent(target, true, 'A0E6');
		UnitMakeAbilityPermanent(target, true, 'A0E7');
	}
	if (itog + damage < $3E8 && itog + damage > -$3E8) {
		if (itog100 >= 0) {
			SetUnitAbilityLevel(target, 'A07I', itog100 + 1);
			SetUnitAbilityLevel(target, 'A0E7', 1);
		else
			SetUnitAbilityLevel(target, 'A0E7', -itog100 + 1);
			SetUnitAbilityLevel(target, 'A07I', 1);
		}
		if (itog10 >= 0) {
			SetUnitAbilityLevel(target, 'A07G', itog10 + 1);
			SetUnitAbilityLevel(target, 'A0E6', 1);
		else
			SetUnitAbilityLevel(target, 'A0E6', -itog10 + 1);
			SetUnitAbilityLevel(target, 'A07G', 1);
		}
		if (itog1 >= 0) {
			SetUnitAbilityLevel(target, 'A07F', itog1 + 1);
			SetUnitAbilityLevel(target, 'A09D', 1);
		else
			SetUnitAbilityLevel(target, 'A09D', -itog1 + 1);
			SetUnitAbilityLevel(target, 'A07F', 1);
		}
	else
		if (itog + damage >= $3E8) {
			SetUnitAbilityLevel(target, 'A07I', $A);
			SetUnitAbilityLevel(target, 'A07G', $A);
			SetUnitAbilityLevel(target, 'A07F', $A);
			SetUnitAbilityLevel(target, 'A0E7', 1);
			SetUnitAbilityLevel(target, 'A0E6', 1);
			SetUnitAbilityLevel(target, 'A09D', 1);
		}
		if (itog + damage <= -$3E8) {
			SetUnitAbilityLevel(target, 'A07I', 1);
			SetUnitAbilityLevel(target, 'A07G', 1);
			SetUnitAbilityLevel(target, 'A07F', 1);
			SetUnitAbilityLevel(target, 'A0E7', $A);
			SetUnitAbilityLevel(target, 'A0E6', $A);
			SetUnitAbilityLevel(target, 'A09D', $A);
		}
	}
}
nothing SetArmorAbilityLevel(unit target, integer armor) {
	integer d100;
	integer d10;
	integer d1;
	integer und100;
	integer und10;
	integer und1;
	integer def;
	integer undef;
	integer itog100 = 0;
	integer itog10 = 0;
	integer itog1 = 0;
	integer itog;
	if (GetUnitAbilityLevel(target, 'A0AG') <= 0) {
		UnitAddAbility(target, 'A0AG');
		UnitAddAbility(target, 'A0AH');
		UnitAddAbility(target, 'A087');
		UnitAddAbility(target, 'A0AS');
		UnitAddAbility(target, 'A0AT');
		UnitAddAbility(target, 'A0D8');
		UnitMakeAbilityPermanent(target, true, 'A0AG');
		UnitMakeAbilityPermanent(target, true, 'A0AH');
		UnitMakeAbilityPermanent(target, true, 'A087');
		UnitMakeAbilityPermanent(target, true, 'A0AS');
		UnitMakeAbilityPermanent(target, true, 'A0AT');
		UnitMakeAbilityPermanent(target, true, 'A0D8');
	}
	if (itog + armor < $3E8 && itog + armor > -$3E8) {
		if (itog100 >= 0) {
			SetUnitAbilityLevel(target, 'A087', itog100 + 1);
			SetUnitAbilityLevel(target, 'A0D8', 1);
		else
			SetUnitAbilityLevel(target, 'A0D8', -itog100 + 1);
			SetUnitAbilityLevel(target, 'A087', 1);
		}
		if (itog10 >= 0) {
			SetUnitAbilityLevel(target, 'A0AH', itog10 + 1);
			SetUnitAbilityLevel(target, 'A0AT', 1);
		else
			SetUnitAbilityLevel(target, 'A0AT', -itog10 + 1);
			SetUnitAbilityLevel(target, 'A0AH', 1);
		}
		if (itog1 >= 0) {
			SetUnitAbilityLevel(target, 'A0AG', itog1 + 1);
			SetUnitAbilityLevel(target, 'A0AS', 1);
		else
			SetUnitAbilityLevel(target, 'A0AS', -itog1 + 1);
			SetUnitAbilityLevel(target, 'A0AG', 1);
		}
	else
		if (itog + armor >= $3E8) {
			SetUnitAbilityLevel(target, 'A087', $A);
			SetUnitAbilityLevel(target, 'A0AH', $A);
			SetUnitAbilityLevel(target, 'A0AG', $A);
			SetUnitAbilityLevel(target, 'A0D8', 1);
			SetUnitAbilityLevel(target, 'A0AT', 1);
			SetUnitAbilityLevel(target, 'A0AS', 1);
		}
		if (itog + armor <= -$3E8) {
			SetUnitAbilityLevel(target, 'A087', 1);
			SetUnitAbilityLevel(target, 'A0AH', 1);
			SetUnitAbilityLevel(target, 'A0AG', 1);
			SetUnitAbilityLevel(target, 'A0D8', $A);
			SetUnitAbilityLevel(target, 'A0AT', $A);
			SetUnitAbilityLevel(target, 'A0AS', $A);
		}
	}
}
nothing SetAttackSpeedAbilityLevel(unit target, integer attackspeed) {
	integer as100;
	integer as10;
	integer as1;
	integer unas100;
	integer unas10;
	integer unas1;
	integer as;
	integer unas;
	integer itog100 = 0;
	integer itog10 = 0;
	integer itog1 = 0;
	integer itog;
	if (GetUnitAbilityLevel(target, 'A0B3') <= 0) {
		UnitAddAbility(target, 'A0B3');
		UnitAddAbility(target, 'A0B4');
		UnitAddAbility(target, 'A0B5');
		UnitAddAbility(target, 'A0E9');
		UnitAddAbility(target, 'A0EA');
		UnitAddAbility(target, 'A0EB');
		UnitMakeAbilityPermanent(target, true, 'A0B3');
		UnitMakeAbilityPermanent(target, true, 'A0B4');
		UnitMakeAbilityPermanent(target, true, 'A0B5');
		UnitMakeAbilityPermanent(target, true, 'A0E9');
		UnitMakeAbilityPermanent(target, true, 'A0EA');
		UnitMakeAbilityPermanent(target, true, 'A0EB');
	}
	if (itog + attackspeed < $3E8 && itog + attackspeed > -$3E8) {
		if (itog100 >= 0) {
			SetUnitAbilityLevel(target, 'A0B5', itog100 + 1);
			SetUnitAbilityLevel(target, 'A0EB', 1);
		else
			SetUnitAbilityLevel(target, 'A0EB', -itog100 + 1);
			SetUnitAbilityLevel(target, 'A0B5', 1);
		}
		if (itog10 >= 0) {
			SetUnitAbilityLevel(target, 'A0B4', itog10 + 1);
			SetUnitAbilityLevel(target, 'A0EA', 1);
		else
			SetUnitAbilityLevel(target, 'A0EA', -itog10 + 1);
			SetUnitAbilityLevel(target, 'A0B4', 1);
		}
		if (itog1 >= 0) {
			SetUnitAbilityLevel(target, 'A0B3', itog1 + 1);
			SetUnitAbilityLevel(target, 'A0E9', 1);
		else
			SetUnitAbilityLevel(target, 'A0E9', -itog1 + 1);
			SetUnitAbilityLevel(target, 'A0B3', 1);
		}
	else
		if (itog + attackspeed >= $3E8) {
			SetUnitAbilityLevel(target, 'A0B5', $A);
			SetUnitAbilityLevel(target, 'A0B4', $A);
			SetUnitAbilityLevel(target, 'A0B3', $A);
			SetUnitAbilityLevel(target, 'A0EB', 1);
			SetUnitAbilityLevel(target, 'A0EA', 1);
			SetUnitAbilityLevel(target, 'A0E9', 1);
		}
		if (itog + attackspeed <= -$3E8) {
			SetUnitAbilityLevel(target, 'A0B5', 1);
			SetUnitAbilityLevel(target, 'A0B4', 1);
			SetUnitAbilityLevel(target, 'A0B3', 1);
			SetUnitAbilityLevel(target, 'A0EB', $A);
			SetUnitAbilityLevel(target, 'A0EA', $A);
			SetUnitAbilityLevel(target, 'A0E9', $A);
		}
	}
}
integer MaxStateModifierID(unitstate u) {
	if (u == UNIT_STATE_MAX_LIFE) {
		return 'A07A';
	elseif u == UNIT_STATE_MAX_MANA then
		return 'A07E';
	}
	return 0;
}
nothing SetUnitMaxState(unit u, unitstate us, integer val) {
	integer i = MaxStateModifierID(us);
	integer c = val;
	if (i == 0) {
		return
	}
	if (c > 0) {
		while (true) {
			if (c == 0) break;
			UnitAddAbility(u, i);
			if (c >= 'd') {
				SetUnitAbilityLevel(u, i, 4);
			elseif c >= $A then
				SetUnitAbilityLevel(u, i, 3);
			else
				SetUnitAbilityLevel(u, i, 2);
			}
			UnitRemoveAbility(u, i);
		}
	elseif c < 0 then
		while (true) {
			if (c == 0) break;
			UnitAddAbility(u, i);
			if (c >= 'd') {
				SetUnitAbilityLevel(u, i, 7);
			elseif c >= $A then
				SetUnitAbilityLevel(u, i, 6);
			else
				SetUnitAbilityLevel(u, i, 5);
			}
			UnitRemoveAbility(u, i);
		}
	}
}
nothing SetUnitLifeAndManaRegenerationActions() {
	timer t = GetExpiredTimer();
	integer ht = GetHandleId(t);
	unit target = LoadUnitHandle(udg_hash, ht, 1);
	integer life = LoadInteger(udg_hash, ht, 2);
	integer mana = LoadInteger(udg_hash, ht, 3);
	real uslife = GetUnitState(target, UNIT_STATE_LIFE);
	if (uslife > .405 && (life != 0 || mana != 0)) {
		SetUnitState(target, UNIT_STATE_LIFE, uslife + (I2R(life) / $A));
		SetUnitState(target, UNIT_STATE_MANA, GetUnitState(target, UNIT_STATE_MANA) + (I2R(mana) / $A));
	elseif IsUnitType(target, UNIT_TYPE_HERO) == false then
		FlushChildHashtable(udg_hash, ht);
		DestroyTimer(t);
	}
}
nothing SetUnitLifeAndManaRegeneration(unit target, string s, integer regen) {
	integer hunit = GetHandleId(target);
	timer t = LoadTimerHandle(udg_hash, hunit, 50);
	integer ht;
	integer life = 0;
	integer mana = 0;
	if (t == null) {
		SaveTimerHandle(udg_hash, hunit, 50, t);
		SaveUnitHandle(udg_hash, ht, 1, target);
	}
	if (s == "life") {
		SaveInteger(udg_hash, ht, 2, life);
	}
	if (s == "mana") {
		SaveInteger(udg_hash, ht, 3, mana);
	}
	TimerStart(t, .1, true, SetUnitLifeAndManaRegenerationActions);
}
nothing RandomUnitFromGroup(integer count, group g) {
	array<unit> u;
	array<integer> irand;
	unit first = null;
	unit random = null;
	integer howunits = 0;
	integer howunits2;
	integer intran;
	integer schetchik = 0;
	GroupClear(udg_GroupRandomUnitFromGroup);
	while (true) {
		if (first == null) break;
		if (first != null && GetUnitState(first, UNIT_STATE_LIFE) > .405) {
		}
		GroupRemoveUnit(g, first);
	}
	while (true) {
		if (howunits <= 0 || count <= schetchik) break;
		GroupAddUnit(udg_GroupRandomUnitFromGroup, random);
	}
	while (true) {
		if (howunits2 <= 0) break;
	}
	GroupClear(g);
	DestroyGroup(g);
}
nothing MoveUnit_Timer() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit u = LoadUnitHandle(udg_hash, h, 1);
	real speed = LoadReal(udg_hash, h, 2);
	real speedreduction = LoadReal(udg_hash, h, 3);
	real angle = LoadReal(udg_hash, h, 4);
	integer wait = LoadInteger(udg_hash, h, 7);
	integer wait2 = LoadInteger(udg_hash, h, 8);
	boolean pause = LoadBoolean(udg_hash, h, 9);
	real dist = speed - (speedreduction * (wait2 * 2 - wait));
	real x = GetUnitX(u) + dist * Cos(angle * bj_DEGTORAD);
	real y = GetUnitY(u) + dist * Sin(angle * bj_DEGTORAD);
	if (IsTerrainPathable(x, y, PATHING_TYPE_FLYABILITY) == false && (GetUnitState(u, UNIT_STATE_LIFE) > .405 || LoadReal(udg_hash, h, 5) != .0)) {
		if (pause) {
			SetUnitPosition(u, x, y);
		else
			SetUnitX(u, x);
			SetUnitY(u, y);
		}
	}
	if (wait == wait2 && LoadReal(udg_hash, h, 5) > .0) {
		SetUnitFlyHeight(u, -(LoadReal(udg_hash, h, 5)), LoadReal(udg_hash, h, 6));
	}
	if (wait <= 0) {
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	else
		SaveInteger(udg_hash, h, 7, wait);
	}
}
nothing MoveUnit(unit u, real time, real speed, real speedreduction, real angle, real height, boolean pause) {
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	integer wait = R2I(time / .03);
	SaveUnitHandle(udg_hash, h, 1, u);
	SaveReal(udg_hash, h, 2, speed / 33.33);
	if (speedreduction != .0) {
		SaveReal(udg_hash, h, 3, (speedreduction / 33.33) / 33.33);
	}
	SaveReal(udg_hash, h, 4, angle);
	if (height != .0) {
		UnitAddAbility(u, 'Amrf');
		UnitRemoveAbility(u, 'Amrf');
		SetUnitFlyHeight(u, height, height / (time / 2));
		SaveReal(udg_hash, h, 5, height);
		SaveReal(udg_hash, h, 6, height / (time / 2));
	}
	SaveInteger(udg_hash, h, 7, wait);
	SaveInteger(udg_hash, h, 8, wait / 2);
	SaveBoolean(udg_hash, h, 9, pause);
	TimerStart(t, .03, true, MoveUnit_Timer);
}
nothing SimError(player ForPlayer, string msg) {
	if (udg_SimError == null) {
	}
	if ((GetLocalPlayer() == ForPlayer)) {
		ClearTextMessages();
		DisplayTimedTextToPlayer(ForPlayer, .52, -1., 3., "|cffffcc00" + msg + "|r");
		StartSound(udg_SimError);
	}
}
nothing CreateTexttag(string s, real size, integer alpha, real x, real y, real offset, real velx, real vely, real lifespain) {
	texttag txt = CreateTextTag();
	SetTextTagText(txt, s, size);
	SetTextTagColor(txt, $FF, $FF, $FF, alpha);
	SetTextTagPos(txt, x, y, offset);
	SetTextTagVelocity(txt, velx, vely);
	SetTextTagPermanent(txt, false);
	if (lifespain > .0) {
		SetTextTagLifespan(txt, lifespain);
		SetTextTagFadepoint(txt, lifespain / 2);
	}
}
integer CountItemOfTypeOnUnit(unit u, integer itemId) {
	integer index = 0;
	integer count = 0;
	item indexItem;
	while (true) {
		if ((indexItem != null) && (GetItemTypeId(indexItem) == itemId)) {
		}
		if (index >= 6) break;
	}
	return count;
}
nothing SoundForPlayer(player ForPlayer, integer number) {
	if ((GetLocalPlayer() == ForPlayer)) {
		StartSound(udg_Game_Sound[number]);
	}
}
nothing LinkItems(integer count1, integer id1, integer count2, integer id2, integer count3, integer id3, integer count4, integer id4, integer count5, integer id5, integer id, string sef, boolean remove) {
	array<integer> count;
	array<integer> itemid;
	array<item> iteminslot;
	unit hero = GetTriggerUnit();
	player p = GetOwningPlayer(hero);
	item manipulateditem = GetManipulatedItem();
	integer i = 0;
	integer lopa = 1;
	integer index;
	item indexItem;
	integer counter = 0;
	integer numerator = 0;
	boolean bol = true;
	item finalitem;
	integer charges = 0;
	integer buysumm = 0;
	integer finalcost;
	integer costdifference;
	array<item> fastpurchaseitem;
	boolean fullinv = true;
	boolean stoppurchase = false;
	while (true) {
		if (lopa > 5) break;
		if (count[lopa] > 0) {
			while (true) {
				if (index > 5) break;
				if ((indexItem != null) && (GetItemTypeId(indexItem) == itemid[lopa]) && count[lopa] > numerator) {
					if (GetItemCharges(indexItem) > 0 && GetItemCharges(indexItem) > charges) {
					}
					if (udg_Boolean_Player_Fast_Purchase[GetPlayerId(p) + 1]) {
					}
				}
			}
			if (numerator < count[lopa]) {
			}
		}
	}
	if (LoadStr(udg_hash, GetUnitTypeId(hero), 91) != "ranged" && GetItemTypeId(manipulateditem) == 'I041') {
		SimError(p, "Этот предмет предназначен только для героев дальнего боя!!!");
		SetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) + R2I(GetWidgetLife(manipulateditem)));
	}
	if (LoadStr(udg_hash, GetUnitTypeId(hero), 91) != "melee" && (GetItemTypeId(manipulateditem) == 'I01R' || GetItemTypeId(manipulateditem) == 'I02M')) {
		SimError(p, "Этот предмет предназначен только для героев ближнего боя!!!");
		SetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) + R2I(GetWidgetLife(manipulateditem)));
	else
		if ((GetItemTypeId(manipulateditem) == 'I01R' || GetItemTypeId(manipulateditem) == 'I02M')) {
			if ((GetItemTypeId(manipulateditem) == 'I01R' && (CountItemOfTypeOnUnit(hero, 'I02E') + CountItemOfTypeOnUnit(hero, 'I02N')) >= 1) || (GetItemTypeId(manipulateditem) == 'I02M' && CountItemOfTypeOnUnit(hero, 'I02N') >= 1)) {
				SimError(p, "У вашего героя уже есть Топор Вождя Орков или Крушитель!!!");
				SetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) + R2I(GetWidgetLife(manipulateditem)));
			}
		}
	}
	if (bol) {
		while (true) {
			if (counter <= 0) break;
			RemoveItem(iteminslot[counter]);
		}
		UnitAddItem(hero, finalitem);
		SetItemUserData(finalitem, GetPlayerId(GetOwningPlayer(hero)) + 1);
		if (IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS) && udg_System_ShowAbil_And_Items_Hint[GetPlayerId(GetLocalPlayer()) + 1]) {
			DisplayTextToPlayer(GetLocalPlayer(), .0, .0, udg_ColorString[GetPlayerId(p) + 1] + GetPlayerName(p) + "|r приобрел предмет |cff99ccff" + GetItemName(finalitem) + "|r");
		}
		if ((id == 'I055' || id == 'I056' || id == 'I057' || id == 'I058')) {
			SetItemCharges(finalitem, 1);
		}
		if (charges != 0) {
			SetItemCharges(finalitem, charges);
		}
		if (sef == "") {
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIam\\AIamTarget.mdl", hero, "origin"));
		else
			DestroyEffect(AddSpecialEffectTarget(sef, hero, "origin"));
		}
	else
		if (udg_Boolean_Player_Fast_Purchase[GetPlayerId(p) + 1] && GetItemType(manipulateditem) == ITEM_TYPE_POWERUP && stoppurchase == false && LoadInteger(udg_hash, id, 'y') <= 0) {
			if (costdifference >= 0) {
				while (true) {
					if (lopa > 5) break;
					if (fastpurchaseitem[lopa] != null) {
						RemoveItem(fastpurchaseitem[lopa]);
					}
				}
				while (true) {
					if (lopa > 5) break;
					if (UnitItemInSlot(hero, lopa) == null) {
					}
				}
				if (fullinv == false) {
					UnitAddItem(hero, finalitem);
					SetItemUserData(finalitem, GetPlayerId(GetOwningPlayer(hero)) + 1);
					SetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) + R2I(GetWidgetLife(manipulateditem)) - finalcost + buysumm);
					if (IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS) && udg_System_ShowAbil_And_Items_Hint[GetPlayerId(GetLocalPlayer()) + 1]) {
						DisplayTextToPlayer(GetLocalPlayer(), .0, .0, udg_ColorString[GetPlayerId(p) + 1] + GetPlayerName(p) + "|r приобрел предмет |cff99ccff" + GetItemName(finalitem) + "|r");
					}
					if ((id == 'I055' || id == 'I056' || id == 'I057' || id == 'I058')) {
						SetItemCharges(finalitem, 1);
					}
					if (charges != 0) {
						SetItemCharges(finalitem, charges);
					}
					if (sef == "") {
						DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIam\\AIamTarget.mdl", hero, "origin"));
					else
						DestroyEffect(AddSpecialEffectTarget(sef, hero, "origin"));
					}
				else
					SoundForPlayer(p, $C);
					SimError(p, "Недостаточно места в инвентаре.");
				}
			else
				SoundForPlayer(p, $D);
				SimError(p, "Недостаточно золота для быстрой покупки!!!");
			}
		}
	}
	if (GetItemType(manipulateditem) == ITEM_TYPE_POWERUP) {
		if (bol == false) {
		}
		if (udg_Integer_Item_Recipe_Level < 0 && udg_Show_Item_Link_Text) {
			if (udg_Boolean_Player_Fast_Purchase[GetPlayerId(p) + 1] && LoadInteger(udg_hash, id, 0) <= 0) {
				if (fullinv == false) {
					SoundForPlayer(p, $D);
					SimError(p, "Недостаточно золота для быстрой покупки!!!");
				}
			else
				SimError(p, "Для того, чтобы собрать предмет, требуются все компоненты!!!");
			}
			SetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) + R2I(GetWidgetLife(manipulateditem)));
		}
		if (udg_Integer_Item_Recipe_Level < 0) {
			RemoveItem(manipulateditem);
		}
	}
}
nothing ProgressBarMove() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	texttag txt = LoadTextTagHandle(udg_hash, h, 1);
	unit u = LoadUnitHandle(udg_hash, h, 4);
	integer counter = LoadInteger(udg_hash, h, 5);
	string color = LoadStr(udg_hash, h, 6);
	integer orderId = LoadInteger(udg_hash, h, 7);
	integer length = LoadInteger(udg_hash, h, 8);
	integer orderunit;
	boolean orderbool = false;
	boolean display = true;
	string scolor;
	string swhite;
	string s;
	if (counter > 0) {
		SaveInteger(udg_hash, h, 5, counter);
		if (orderId != 0) {
		}
		if (orderbool) {
			if (orderunit == orderId) {
			else
			}
		}
		if (display) {
			SetTextTagText(txt, s, .0115);
		else
			SaveInteger(udg_hash, h, 5, counter);
		}
	else
		DestroyTextTag(txt);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
}
nothing AddProgressBarfake(unit u, real size, string color, string order, real time) {
	texttag txt = CreateTextTag();
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	real x = GetUnitX(u) + (125. * size) * Cos(180. * bj_DEGTORAD);
	real y = GetUnitY(u) + (125. * size) * Sin(180. * bj_DEGTORAD);
	integer counter = R2I('d' * size);
	real periodic = time / counter;
	integer orderId;
	SetTextTagText(txt, SubString("llllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllll", 0, R2I('d' * size)), .0115);
	SetTextTagPos(txt, x, y, 200.);
	SetTextTagPermanent(txt, false);
	SaveTextTagHandle(udg_hash, h, 1, txt);
	SaveUnitHandle(udg_hash, h, 4, u);
	SaveInteger(udg_hash, h, 5, counter);
	SaveStr(udg_hash, h, 6, color);
	if (order != "") {
		if ((orderId != 0)) {
		else
			if ((orderId != 0)) {
			}
		}
		SaveInteger(udg_hash, h, 7, orderId);
	else
		SaveInteger(udg_hash, h, 7, 0);
	}
	SaveInteger(udg_hash, h, 8, counter);
	TimerStart(t, periodic, true, ProgressBarMove);
}
boolean IsPointInRect(real px, real py, real cx, real cy, real ax, real ay, real bx, real by) {
	real dot1 = (px - cx) * (ax - cx) + (py - cy) * (ay - cy);
	real dot2 = (ax - cx) * (ax - cx) + (ay - cy) * (ay - cy);
	real dot3 = (px - cx) * (bx - cx) + (py - cy) * (by - cy);
	real dot4 = (bx - cx) * (bx - cx) + (by - cy) * (by - cy);
	return dot1 >= 0 && dot1 <= dot2 && dot3 >= 0 && dot3 <= dot4;
}
nothing UnitPeriodicPostionMovePeriodic() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit target = LoadUnitHandle(udg_hash, h, 1);
	integer wait = LoadInteger(udg_hash, h, 2);
	SetUnitX(target, GetUnitX(target));
	SetUnitY(target, GetUnitY(target));
	IssueImmediateOrderById(target, $D0004);
	if (wait <= 0) {
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	else
		SaveInteger(udg_hash, h, 2, wait - 1);
	}
}
nothing UnitPeriodicPostionMove(unit target, real periodic, real time) {
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	SaveUnitHandle(udg_hash, h, 1, target);
	SaveInteger(udg_hash, h, 2, R2I(time / periodic));
	TimerStart(t, periodic, true, UnitPeriodicPostionMovePeriodic);
}
nothing StunUnitTimed_Periodic() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit dammi = LoadUnitHandle(udg_hash, h, 1);
	unit target = LoadUnitHandle(udg_hash, h, 2);
	integer stun100 = LoadInteger(udg_hash, h, 3);
	integer stun10 = LoadInteger(udg_hash, h, 4);
	integer stun1 = LoadInteger(udg_hash, h, 5);
	integer stunstage = LoadInteger(udg_hash, h, 6);
	SaveInteger(udg_hash, h, 6, stunstage);
	if (stunstage == 1) {
		if (GetUnitAbilityLevel(dammi, 'A0H4') > 0) {
			IssueTargetOrderById(dammi, $D007F, target);
		}
		TimerStart(t, stun100 * 1., false, StunUnitTimed_Periodic);
	}
	if (stunstage == 2) {
		if (GetUnitAbilityLevel(dammi, 'A0H5') > 0) {
			IssueTargetOrderById(dammi, $D0107, target);
		}
		TimerStart(t, stun10 * .1, false, StunUnitTimed_Periodic);
	}
	if (stunstage == 3) {
		if (GetUnitAbilityLevel(dammi, 'A0H6') > 0) {
			IssueTargetOrderById(dammi, $D011C, target);
		}
		TimerStart(t, stun1 * .01, false, StunUnitTimed_Periodic);
	}
	if (stunstage >= 4) {
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
}
nothing StunUnitTimed(unit target, real time) {
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	unit dammi = CreateUnit(Player($F), 'h00U', GetUnitX(target), GetUnitY(target), .0);
	integer stun100;
	integer stun10;
	integer stun1;
	integer stunstage = 0;
	if (time >= 10.) {
	}
	if (stun100 > 0) {
		UnitAddAbility(dammi, 'A0H4');
		SetUnitAbilityLevel(dammi, 'A0H4', stun100);
	}
	if (stun10 > 0) {
		UnitAddAbility(dammi, 'A0H5');
		SetUnitAbilityLevel(dammi, 'A0H5', stun10);
	}
	if (stun1 > 0) {
		UnitAddAbility(dammi, 'A0H6');
		SetUnitAbilityLevel(dammi, 'A0H6', stun1);
	}
	UnitApplyTimedLife(dammi, 'BTLF', I2R(stun100) + 2.);
	SaveUnitHandle(udg_hash, h, 1, dammi);
	SaveUnitHandle(udg_hash, h, 2, target);
	SaveInteger(udg_hash, h, 3, stun100);
	SaveInteger(udg_hash, h, 4, stun10);
	SaveInteger(udg_hash, h, 5, stun1);
	SaveInteger(udg_hash, h, 6, stunstage);
	TimerStart(t, .0, false, StunUnitTimed_Periodic);
}
nothing RemovePotionAfterMinute() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit dammi = LoadUnitHandle(udg_hash, h, 1);
	effect ef = LoadEffectHandle(udg_hash, h, 2);
	region reg = LoadRegionHandle(udg_hash, h, 3);
	rect rct = LoadRectHandle(udg_hash, h, 4);
	KillUnit(dammi);
	DestroyEffect(ef);
	FlushChildHashtable(udg_hash, GetHandleId(reg));
	FlushChildHashtable(udg_hash, GetHandleId(dammi));
	RemoveRect(rct);
	RemoveRegion(reg);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing CreatePotion(real x, real y, integer potionmin, integer potionmax) {
	integer potionindex = GetRandomInt(potionmin, potionmax);
	unit dammi = CreateUnit(Player($F), 'h00U', x, y, GetRandomReal(.0, 360.));
	effect ef = AddSpecialEffectTarget(udg_Potion_Effect[potionindex], dammi, "origin");
	string healtype = udg_Potion_Type[potionindex];
	integer heal = udg_Potion_Heal_Amount[potionindex];
	real size = udg_Potion_Size[potionindex];
	group g = CreateGroup();
	unit Picked;
	boolean destroy = false;
	texttag txt;
	real vel = .0221875;
	real angle = 45. + GetRandomReal(.0, 90.);
	real xvel = vel * Cos(angle * bj_DEGTORAD);
	real yvel = vel * Sin(angle * bj_DEGTORAD);
	real state;
	rect rct;
	region reg;
	timer t;
	integer h;
	SetUnitScale(dammi, size, size, size);
	GroupEnumUnitsInRange(g, x, y, 150., null);
	while (true) {
		if (Picked == null || destroy) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && GetPlayerId(GetOwningPlayer(Picked)) <= 8 && IsUnitType(Picked, UNIT_TYPE_HERO) && GetUnitTypeId(Picked) != 'h00U') {
			if (healtype == "life" && (state < GetUnitState(Picked, UNIT_STATE_MAX_LIFE))) {
				SetUnitState(Picked, UNIT_STATE_LIFE, state + heal);
				DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", Picked, "origin"), 2.);
				SetTextTagText(txt, "|cFF00DC00+" + I2S(heal) + "|r", .03);
				SetTextTagPos(txt, x, y, .0);
				SetTextTagColor(txt, 0, 0, 0, $C8);
				SetTextTagVelocity(txt, xvel, yvel);
				SetTextTagLifespan(txt, 3.);
				SetTextTagFadepoint(txt, .0);
				SetTextTagPermanent(txt, false);
			}
			if (healtype == "mana" && (state < GetUnitState(Picked, UNIT_STATE_MAX_MANA))) {
				SetUnitState(Picked, UNIT_STATE_MANA, state + heal);
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIma\\AImaTarget.mdl", Picked, "origin"));
				SetTextTagText(txt, "|c000347FC+" + I2S(heal) + "|r", .03);
				SetTextTagPos(txt, x, y, .0);
				SetTextTagColor(txt, 0, 0, 0, $C8);
				SetTextTagVelocity(txt, xvel, yvel);
				SetTextTagLifespan(txt, 3.);
				SetTextTagFadepoint(txt, .0);
				SetTextTagPermanent(txt, false);
			}
		}
		GroupRemoveUnit(g, Picked);
	}
	if (destroy) {
		KillUnit(dammi);
		DestroyEffect(ef);
	else
		RegionAddRect(reg, rct);
		SaveUnitHandle(udg_hash, GetHandleId(reg), 1, dammi);
		SaveRectHandle(udg_hash, GetHandleId(reg), 2, rct);
		SaveInteger(udg_hash, GetHandleId(dammi), 1, potionindex);
		SaveEffectHandle(udg_hash, GetHandleId(dammi), 2, ef);
		TriggerRegisterEnterRegion(gg_trg_Check_Potion_Picked_Up, reg, null);
		SaveUnitHandle(udg_hash, h, 1, dammi);
		SaveEffectHandle(udg_hash, h, 2, ef);
		SaveRegionHandle(udg_hash, h, 3, reg);
		SaveRectHandle(udg_hash, h, 4, rct);
		TimerStart(t, 60., false, RemovePotionAfterMinute);
	}
	GroupClear(g);
	DestroyGroup(g);
}
nothing TimerToFunctionDestroy() {
	timer t2 = GetExpiredTimer();
	integer h2 = GetHandleId(t2);
	timer t = LoadTimerHandle(udg_hash, h2, 1);
	timerdialog td = LoadTimerDialogHandle(udg_hash, h2, 2);
	DestroyTimer(t);
	DestroyTimer(t2);
	DestroyTimerDialog(td);
	FlushChildHashtable(udg_hash, h2);
}
nothing TimerToFunction(real time, string s, code funcname) {
	timer t = CreateTimer();
	timerdialog td;
	timer t2 = CreateTimer();
	integer h2 = GetHandleId(t2);
	if (s != "") {
		TimerDialogSetTitle(td, s);
		TimerDialogDisplay(td, true);
		TimerDialogSetTimeColor(td, $FF, 45, 45, 20);
		SaveTimerDialogHandle(udg_hash, h2, 2, td);
	}
	TimerStart(t, time, false, funcname);
	TimerStart(t2, time + 1., false, TimerToFunctionDestroy);
	SaveTimerHandle(udg_hash, h2, 1, t);
}
nothing HintsToPlayerWithDelay_ShowHint() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	integer count = LoadInteger(udg_hash, h, $A);
	player p = LoadPlayerHandle(udg_hash, h, $B);
	string s;
	if (count > 0) {
		DisplayTimedTextToPlayer(p, .0, .0, 10., "|cff32cd32ПОДСКАЗКА:|r");
		DisplayTimedTextToPlayer(p, .0, .0, 10., s);
		SoundForPlayer(p, 1);
		SaveInteger(udg_hash, h, $A, count);
	else
		DestroyTimer(t);
		FlushChildHashtable(udg_hash, h);
	}
}
nothing HintsToPlayerWithDelay(player p) {
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	integer count = 5;
	array<string> s;
	TimerStart(t, 15., true, HintsToPlayerWithDelay_ShowHint);
	SaveStr(udg_hash, h, 1, s[1]);
	SaveStr(udg_hash, h, 2, s[2]);
	SaveStr(udg_hash, h, 3, s[3]);
	SaveStr(udg_hash, h, 4, s[4]);
	SaveStr(udg_hash, h, 5, s[5]);
	SaveInteger(udg_hash, h, $A, count);
	SavePlayerHandle(udg_hash, h, $B, p);
}
nothing ProgressBarAddPercentComplete_Stop_Animation() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit dammi = LoadUnitHandle(udg_hash, h, 1);
	real sum = LoadReal(udg_hash, GetHandleId(dammi), 1);
	integer count = LoadInteger(udg_hash, GetHandleId(dammi), 2);
	real tsum = LoadReal(udg_hash, h, 2);
	integer tcount = LoadInteger(udg_hash, h, 3);
	SaveInteger(udg_hash, GetHandleId(dammi), 2, count);
	SaveInteger(udg_hash, h, 3, tcount);
	SaveReal(udg_hash, GetHandleId(dammi), 1, sum);
	SaveReal(udg_hash, h, 2, tsum);
	if (count <= 0) {
		SetUnitTimeScale(dammi, .0);
		DestroyTimer(t);
		FlushChildHashtable(udg_hash, h);
	else
		SaveReal(udg_hash, h, 2, tsum);
		SaveInteger(udg_hash, h, 3, tcount);
		SaveUnitHandle(udg_hash, h, 1, dammi);
		SetUnitTimeScale(dammi, (.1 * tsum));
		TimerStart(t, .1, false, ProgressBarAddPercentComplete_Stop_Animation);
	}
}
nothing ProgressBarAddPercentComplete(unit dammi, real percent) {
	timer t;
	integer h;
	real sum = LoadReal(udg_hash, GetHandleId(dammi), 1);
	integer count = LoadInteger(udg_hash, GetHandleId(dammi), 2);
	SaveReal(udg_hash, GetHandleId(dammi), 1, sum);
	SaveInteger(udg_hash, GetHandleId(dammi), 2, count);
	if (count <= 1) {
		SaveUnitHandle(udg_hash, h, 1, dammi);
		SaveReal(udg_hash, h, 2, percent);
		SaveInteger(udg_hash, h, 3, 1);
		SetUnitTimeScale(dammi, (.1 * percent));
		TimerStart(t, .1, false, ProgressBarAddPercentComplete_Stop_Animation);
	}
}
nothing AddProgressBarMovingPeriodic() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit target = LoadUnitHandle(udg_hash, h, 1);
	unit dammi = LoadUnitHandle(udg_hash, h, 2);
	boolean dead;
	if (GetUnitState(dammi, UNIT_STATE_LIFE) > .405 && dammi != null) {
		if (GetUnitState(target, UNIT_STATE_LIFE) > .405) {
			SetUnitPosition(dammi, GetUnitX(target), GetUnitY(target));
			if (dead) {
				SetUnitVertexColor(dammi, LoadInteger(udg_hash, h, 4), LoadInteger(udg_hash, h, 5), LoadInteger(udg_hash, h, 6), $FF);
				SaveBoolean(udg_hash, h, 3, false);
			}
		else
			if (dead == false) {
				SetUnitVertexColor(dammi, LoadInteger(udg_hash, h, 4), LoadInteger(udg_hash, h, 5), LoadInteger(udg_hash, h, 6), 0);
				SaveBoolean(udg_hash, h, 3, true);
			}
		}
	else
		DestroyTimer(t);
		FlushChildHashtable(udg_hash, h);
	}
}
nothing AddProgressBar(unit target, real height, real size, real time, boolean move, boolean auto, integer hand, integer red, integer green, integer blue) {
	unit dammi = CreateUnit(GetOwningPlayer(target), 'h00B', GetUnitX(target), GetUnitY(target), 270.);
	timer t;
	integer h;
	SetUnitX(dammi, GetUnitX(target));
	SetUnitY(dammi, GetUnitY(target));
	UnitAddAbility(dammi, 'Amrf');
	UnitRemoveAbility(dammi, 'Amrf');
	SetUnitFlyHeight(dammi, height, .0);
	SetUnitScale(dammi, size, size, size);
	SetUnitVertexColor(dammi, red, green, blue, $FF);
	SetUnitAnimation(dammi, "birth");
	SaveUnitHandle(udg_hash, GetHandleId(target), hand, dammi);
	if (auto) {
		SetUnitTimeScale(dammi, (1. / time));
		UnitApplyTimedLife(dammi, 'BTLF', time);
	else
		SetUnitTimeScale(dammi, .0);
	}
	if (move) {
		SaveUnitHandle(udg_hash, h, 1, target);
		SaveUnitHandle(udg_hash, h, 2, dammi);
		SaveBoolean(udg_hash, h, 3, false);
		SaveInteger(udg_hash, h, 4, red);
		SaveInteger(udg_hash, h, 5, green);
		SaveInteger(udg_hash, h, 6, blue);
		TimerStart(t, .03, true, AddProgressBarMovingPeriodic);
	}
}
nothing HeroStepsPeriodicSound() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit target = LoadUnitHandle(udg_hash, h, 1);
	real x = LoadReal(udg_hash, h, 2);
	real y = LoadReal(udg_hash, h, 3);
	real xnew = GetUnitX(target);
	real ynew = GetUnitY(target);
	integer random = GetRandomInt(1, 4);
	player p;
	if (GetUnitState(target, UNIT_STATE_LIFE) > .405 && (x != xnew && y != ynew)) {
		if (random == 1) {
			SoundForPlayer(p, 8);
			BJDebugMsg("1");
		}
		if (random == 2) {
			SoundForPlayer(p, 9);
			BJDebugMsg("2");
		}
		if (random == 3) {
			SoundForPlayer(p, $A);
			BJDebugMsg("3");
		}
		if (random == 4) {
			SoundForPlayer(p, $B);
			BJDebugMsg("4");
		}
		SaveReal(udg_hash, h, 2, xnew);
		SaveReal(udg_hash, h, 3, ynew);
	}
}
nothing HeroStepsSound(unit target) {
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	real x = GetUnitX(target);
	real y = GetUnitY(target);
	SaveUnitHandle(udg_hash, h, 1, target);
	SaveReal(udg_hash, h, 2, x);
	SaveReal(udg_hash, h, 3, y);
	TimerStart(t, 1., true, HeroStepsPeriodicSound);
}
nothing ShowAndFlushAllPlayerDamage(boolean flushonly) {
	string s;
	real maxtakendamage = .0;
	real maxreciveddamage = .0;
	real ptakendamage = .0;
	real preceiveddamage = .0;
	player pmaxtakedamage = Player(0);
	player pmaxreceiveddamage = Player(0);
	integer lopa = 0;
	real alltakendamage = .0;
	real allreceiveddamage = .0;
	player p;
	integer id;
	real percent = .0;
	string spercent;
	real time = .0;
	if (flushonly == false) {
		while (true) {
			if (lopa > 8) break;
			if (udg_Player_Taken_Damage_Current[lopa] > maxtakendamage) {
			}
			if (udg_Player_Received_Damage_Current[lopa] > maxreciveddamage) {
			}
			PauseTimer(udg_TimerShowAndFlushAllPlayerDmg);
		}
		if ((IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS))) {
			DisplayTimedTextToPlayer(p, .0, .0, 20., " ");
			DisplayTimedTextToPlayer(p, .0, .0, 20., "Затраченное Время: |cff00CD00" + (SubString(R2S(time), 0, StringLength(R2S(time)) - 2)) + "|r секунд");
			DisplayTimedTextToPlayer(p, .0, .0, 20., "Всего урона нанесено: |cff99ccff" + I2S(R2I(alltakendamage)) + "|r урона");
			DisplayTimedTextToPlayer(p, .0, .0, 20., "Всего урона получено: |cff99ccff" + I2S(R2I(allreceiveddamage)) + "|r урона");
			DisplayTimedTextToPlayer(p, .0, .0, 20., "Больше всего нанесено урона: " + udg_ColorString[GetPlayerId(pmaxtakedamage) + 1] + GetPlayerName(pmaxtakedamage) + "|r (|cff99ccff" + I2S(R2I(maxtakendamage)) + "|r урона - |cff99ccff" + (SubString(R2S(percent), 0, StringLength(R2S(percent)) - 2)) + "%|r )");
			DisplayTimedTextToPlayer(p, .0, .0, 20., "Больше всего урона получено: " + udg_ColorString[GetPlayerId(pmaxreceiveddamage) + 1] + GetPlayerName(pmaxreceiveddamage) + "|r (|cff99ccff" + I2S(R2I(maxreciveddamage)) + "|r урона - |cff99ccff" + (SubString(R2S(percent), 0, StringLength(R2S(percent)) - 2)) + "%|r )");
			if (p != pmaxtakedamage) {
				DisplayTimedTextToPlayer(p, .0, .0, 20., "Ваш нанесенный урон: ( |cff99ccff" + I2S(R2I(udg_Player_Taken_Damage_Current[GetPlayerId(p)])) + "|r урона - |cff99ccff" + (SubString(R2S(percent), 0, StringLength(R2S(percent)) - 2)) + "%|r )");
			}
			if (p != pmaxreceiveddamage) {
				DisplayTimedTextToPlayer(p, .0, .0, 20., "Ваш полученный урон: ( |cff99ccff" + I2S(R2I(udg_Player_Received_Damage_Current[GetPlayerId(p)])) + "|r урона - |cff99ccff" + (SubString(R2S(percent), 0, StringLength(R2S(percent)) - 2)) + "%|r )");
			}
		}
	}
	while (true) {
		if (lopa > 8) break;
	}
}
nothing MoveDammiReferencePanel_Timer() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit hero = LoadUnitHandle(udg_hash, h, 1);
	unit dammi = LoadUnitHandle(udg_hash, h, 2);
	real x = GetUnitX(hero);
	real y = GetUnitY(hero);
	boolean alife = LoadBoolean(udg_hash, h, 3);
	if ((GetUnitState(hero, UNIT_STATE_LIFE) < .405 && alife)) {
		ShowUnit(dammi, false);
		SaveBoolean(udg_hash, h, 3, alife);
	else
		if ((GetUnitState(hero, UNIT_STATE_LIFE) > .405 && alife == false)) {
			ShowUnit(dammi, true);
			SaveBoolean(udg_hash, h, 3, alife);
		}
		SetUnitX(dammi, x);
		SetUnitY(dammi, y);
	}
}
nothing MoveDammiReferencePanel(unit hero) {
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	unit dammi = CreateUnit(GetOwningPlayer(hero), 'h00C', GetUnitX(hero), GetUnitY(hero), .0);
	SaveUnitHandle(udg_hash, h, 1, hero);
	SaveUnitHandle(udg_hash, h, 2, dammi);
	SaveBoolean(udg_hash, h, 3, true);
	IssueImmediateOrderById(dammi, $D0057);
	TimerStart(t, 1., true, MoveDammiReferencePanel_Timer);
}
boolean IsUnitInvulnerable(unit Unit) {
	real Health_Current = GetWidgetLife(Unit);
	real Mana_Current = GetUnitState(Unit, UNIT_STATE_MANA);
	boolean Check_Health;
	SetWidgetLife(Unit, Health_Current + .001);
	if (Health_Current != GetWidgetLife(Unit)) {
		UnitDamageTarget(Unit, Unit, .001, false, true, null, null, null);
	else
		UnitDamageTarget(Unit, Unit, .001, false, true, null, null, null);
		SetWidgetLife(Unit, Health_Current);
	}
	if (Check_Health) {
		return !(GetUnitState(Unit, UNIT_STATE_MANA) != Mana_Current);
	}
	return Check_Health;
}
nothing GroupToGroupUnitMoving() {
	GroupAddUnit(udg_Temp_Group[1], GetEnumUnit());
}
nothing GroupToGroup(group gold, group gnew) {
	ForGroup(gold, GroupToGroupUnitMoving);
}
nothing CreateEnergyWall(integer start, integer end) {
	integer lopa = start;
	integer lopb;
	while (true) {
		if (lopa > end) break;
		while (true) {
			if (lopb > 7) break;
		}
	}
}
real ConvertMagicAndChaosDamageInClear(unit target, real magicdamage, real chaosdamage) {
	real itog = magicdamage;
	if (IsUnitType(target, UNIT_TYPE_MAGIC_IMMUNE) == false) {
		if (IsUnitType(target, UNIT_TYPE_HERO)) {
		}
		if (GetUnitAbilityLevel(target, 'A0HD') > 0) {
		}
		if (GetUnitAbilityLevel(target, 'A0CZ') > 0) {
		}
		if (GetUnitAbilityLevel(target, 'A017') > 0) {
		}
		if (GetUnitAbilityLevel(target, 'A01C') > 0) {
		}
		if (GetUnitAbilityLevel(target, 'A09T') > 0) {
		}
	else
	}
	return itog;
}
nothing RemoveUnitAttack_End() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit target = LoadUnitHandle(udg_hash, h, 1);
	effect ef = LoadEffectHandle(udg_hash, h, 2);
	UnitRemoveAbility(target, 'A0PL');
	DestroyEffect(ef);
	DestroyTimer(t);
	FlushChildHashtable(udg_hash, h);
}
nothing RemoveUnitAttack(unit target, real time) {
	timer t;
	integer h;
	effect ef;
	real newtime;
	if (LoadTimerHandle(udg_hash, GetHandleId(target), $A4) == null) {
		UnitAddAbility(target, 'A0PL');
		SaveUnitHandle(udg_hash, h, 1, target);
		SaveEffectHandle(udg_hash, h, 2, ef);
		SaveTimerHandle(udg_hash, GetHandleId(target), $A4, t);
	else
		if (time > TimerGetRemaining(t)) {
		else
		}
	}
	TimerStart(t, newtime, false, RemoveUnitAttack_End);
}
real HaveAnyTimeTalisman() {
	real respawn = .0;
	group grp = CreateGroup();
	unit Picked;
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, grp);
	while (true) {
		if (Picked == null) break;
		if (IsUnitType(Picked, UNIT_TYPE_HERO) && GetPlayerId(GetOwningPlayer(Picked)) <= 8) {
			if (CountItemOfTypeOnUnit(Picked, 'I02R') > 0 && (.1 > respawn)) {
			}
			if (CountItemOfTypeOnUnit(Picked, 'I02S') > 0 && (.15 > respawn)) {
			}
			if (CountItemOfTypeOnUnit(Picked, 'I02W') > 0 && (.2 > respawn)) {
			}
			if (CountItemOfTypeOnUnit(Picked, 'I02X') > 0 && (.25 > respawn)) {
			}
			if (CountItemOfTypeOnUnit(Picked, 'I02Y') > 0 && (.3 > respawn)) {
			}
		}
		GroupRemoveUnit(grp, Picked);
	}
	GroupClear(grp);
	DestroyGroup(grp);
	return respawn;
}
nothing Trig_Players_Start_Script_Func034A() {
	SetPlayerFlagBJ(PLAYER_STATE_GIVES_BOUNTY, true, GetEnumPlayer());
	SetPlayerColorBJ(GetEnumPlayer(), PLAYER_COLOR_BROWN, true);
}
nothing Trig_Players_Start_Script_Actions() {
	AbilityPreload('A0J2', 30);
	AbilityPreload('A0J4', 25);
	SetPlayerName(Player(9), "TRIGSTR_858");
	SetPlayerName(Player($A), "Армия Тьмы");
	SetPlayerName(Player($B), "Армия Тьмы");
	SetPlayerColorBJ(Player($F), PLAYER_COLOR_LIGHT_BLUE, false);
	ForceAddPlayer(udg_Players_Enemy_Group, Player(9));
	ForceAddPlayer(udg_Players_Enemy_Group, Player($A));
	ForceAddPlayer(udg_Players_Enemy_Group, Player($B));
	SetForceAllianceStateBJ(udg_Players_Enemy_Group, udg_Players_Enemy_Group, 3);
	SetForceAllianceStateBJ(udg_Players_Enemy_Group, bj_FORCE_PLAYER[$C], 3);
	SetForceAllianceStateBJ(bj_FORCE_PLAYER[$C], udg_Players_Enemy_Group, 3);
	SetForceAllianceStateBJ(udg_Players_Enemy_Group, bj_FORCE_PLAYER[$F], 0);
	SetForceAllianceStateBJ(bj_FORCE_PLAYER[$F], udg_Players_Enemy_Group, 0);
	ForForce(udg_Players_Enemy_Group, Trig_Players_Start_Script_Func034A);
}
nothing InitTrig_Players_Start_Script() {
	TriggerRegisterTimerEventSingle(gg_trg_Players_Start_Script, 2.);
	TriggerAddAction(gg_trg_Players_Start_Script, Trig_Players_Start_Script_Actions);
}
nothing Trig_InitMap_Func009A() {
	CreateFogModifierRectBJ(true, GetEnumPlayer(), FOG_OF_WAR_VISIBLE, gg_rct_PlayableAreaVisionDeBag);
	FogModifierStart(bj_lastCreatedFogModifier);
	DestroyFogModifier(bj_lastCreatedFogModifier);
	CreateFogModifierRectBJ(true, GetEnumPlayer(), FOG_OF_WAR_MASKED, gg_rct_MinusVision1);
	FogModifierStart(bj_lastCreatedFogModifier);
	CameraSetupApplyForPlayer(true, gg_cam_Kamera_na_taverni, GetEnumPlayer(), 0);
	CinematicFadeBJ(1, .0, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0);
}
nothing Trig_InitMap_Actions() {
	SetTimeOfDay(5.45);
	SetMapFlag(MAP_RESOURCE_TRADING_ALLIES_ONLY, true);
	ShowInterfaceForceOff(bj_FORCE_ALL_PLAYERS, .0);
	StartTimerBJ(udg_InitMapTimer, false, 10.);
	DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 12., "|cff99ccffДобро пожаловать на альфа версию карты|r |Cfffed312Последние Стражи|r (|Cfffed312Last Guards|r)|cff99ccff!|r");
	DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 12., "|cff99ccffЦель игры: выстоять против 10 разнообразнейших волн врагов, защищая стражей-заклинателей. По ходу прохождения вы также поучавствуете во множестве различных игровых событий, сражений, битв с боссами и многое другое...|r");
	DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 12., "|cff99ccffА теперь - выберете своего героя, и отправляйтесь в бой!|r");
	ForForce(bj_FORCE_ALL_PLAYERS, Trig_InitMap_Func009A);
}
nothing InitTrig_InitMap() {
	TriggerRegisterTimerEventSingle(gg_trg_InitMap, .0);
	TriggerAddAction(gg_trg_InitMap, Trig_InitMap_Actions);
}
nothing Trig_InitMapStage2_Func002A() {
	CameraSetupApplyForPlayer(true, gg_cam_Kamera_na_taverni, GetEnumPlayer(), 0);
	CinematicFadeBJ(0, 5., "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0);
}
nothing Trig_InitMapStage2_Actions() {
	ShowInterfaceForceOn(bj_FORCE_ALL_PLAYERS, 5.);
	ForForce(bj_FORCE_ALL_PLAYERS, Trig_InitMapStage2_Func002A);
}
nothing InitTrig_InitMapStage2() {
	TriggerRegisterTimerExpireEvent(gg_trg_InitMapStage2, udg_InitMapTimer);
	TriggerAddAction(gg_trg_InitMapStage2, Trig_InitMapStage2_Actions);
}
nothing Trig_System_Spells_Load_Periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	integer i = LoadInteger(udg_hash, h, 0);
	if (LoadInteger(udg_hash, h, i) != 0) {
		AbilityPreload(LoadInteger(udg_hash, h, i), LoadInteger(udg_hash, h, i + 1));
		SaveInteger(udg_hash, h, 0, i);
	else
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
}
nothing Trig_System_Spells_Load_Actions() {
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	integer i = 1;
	SaveInteger(udg_hash, h, 0, i);
	SaveInteger(udg_hash, h, 1, 'A07F');
	SaveInteger(udg_hash, h, 2, $A);
	SaveInteger(udg_hash, h, 3, 'A07G');
	SaveInteger(udg_hash, h, 4, $A);
	SaveInteger(udg_hash, h, 5, 'A07I');
	SaveInteger(udg_hash, h, 6, $A);
	SaveInteger(udg_hash, h, 7, 'A09D');
	SaveInteger(udg_hash, h, 8, $A);
	SaveInteger(udg_hash, h, 9, 'A0E6');
	SaveInteger(udg_hash, h, $A, $A);
	SaveInteger(udg_hash, h, $B, 'A0E7');
	SaveInteger(udg_hash, h, $C, $A);
	SaveInteger(udg_hash, h, $D, 'A0B3');
	SaveInteger(udg_hash, h, $E, $A);
	SaveInteger(udg_hash, h, $F, 'A0B4');
	SaveInteger(udg_hash, h, 16, $A);
	SaveInteger(udg_hash, h, 17, 'A0B5');
	SaveInteger(udg_hash, h, 18, $A);
	SaveInteger(udg_hash, h, 19, 'A0E9');
	SaveInteger(udg_hash, h, 20, $A);
	SaveInteger(udg_hash, h, 21, 'A0EA');
	SaveInteger(udg_hash, h, 22, $A);
	SaveInteger(udg_hash, h, 23, 'A0EB');
	SaveInteger(udg_hash, h, 24, $A);
	SaveInteger(udg_hash, h, 25, 'A0AG');
	SaveInteger(udg_hash, h, 26, $A);
	SaveInteger(udg_hash, h, 27, 'A0AH');
	SaveInteger(udg_hash, h, 28, $A);
	SaveInteger(udg_hash, h, 29, 'A087');
	SaveInteger(udg_hash, h, 30, $A);
	SaveInteger(udg_hash, h, 31, 'A0AS');
	SaveInteger(udg_hash, h, 32, $A);
	SaveInteger(udg_hash, h, 33, 'A0AT');
	SaveInteger(udg_hash, h, 34, $A);
	SaveInteger(udg_hash, h, 35, 'A0D8');
	SaveInteger(udg_hash, h, 36, $A);
	SaveInteger(udg_hash, h, 37, 'A07A');
	SaveInteger(udg_hash, h, 38, 7);
	SaveInteger(udg_hash, h, 39, 'A07E');
	SaveInteger(udg_hash, h, 40, 7);
	SaveInteger(udg_hash, h, 41, 'A0H6');
	SaveInteger(udg_hash, h, 42, $A);
	SaveInteger(udg_hash, h, 43, 'A0H5');
	SaveInteger(udg_hash, h, 44, $A);
	SaveInteger(udg_hash, h, 45, 'A0H4');
	SaveInteger(udg_hash, h, 46, $A);
	TimerStart(t, .2, true, Trig_System_Spells_Load_Periodic_Actions);
}
nothing InitTrig_System_Spells_Load() {
	TriggerRegisterTimerEvent(gg_trg_System_Spells_Load, 2., false);
	TriggerAddAction(gg_trg_System_Spells_Load, Trig_System_Spells_Load_Actions);
}
nothing Trig_Items_Preload_Periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	integer i = LoadInteger(udg_hash, h, 0);
	if (LoadInteger(udg_hash, h, i) != 0) {
		ItemPreload(LoadInteger(udg_hash, h, i));
		SaveInteger(udg_hash, h, 0, i);
	else
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
}
nothing Trig_Items_Preload_Actions() {
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	integer i = 1;
	SaveInteger(udg_hash, h, 0, i);
	SaveInteger(udg_hash, h, 1, 'I00I');
	SaveInteger(udg_hash, h, 2, 'I01G');
	SaveInteger(udg_hash, h, 3, 'I03W');
	SaveInteger(udg_hash, h, 4, 'I036');
	SaveInteger(udg_hash, h, 5, 'I05A');
	SaveInteger(udg_hash, h, 6, 'I04Z');
	SaveInteger(udg_hash, h, 7, 'I01U');
	SaveInteger(udg_hash, h, 8, 'I03U');
	SaveInteger(udg_hash, h, 9, 'I02J');
	SaveInteger(udg_hash, h, $A, 'I01B');
	SaveInteger(udg_hash, h, $B, 'I01X');
	SaveInteger(udg_hash, h, $C, 'I052');
	SaveInteger(udg_hash, h, $D, 'I053');
	SaveInteger(udg_hash, h, $E, 'I051');
	SaveInteger(udg_hash, h, $F, 'I03Q');
	SaveInteger(udg_hash, h, 16, 'I048');
	SaveInteger(udg_hash, h, 17, 'I01P');
	SaveInteger(udg_hash, h, 18, 'I00G');
	SaveInteger(udg_hash, h, 19, 'I01Q');
	SaveInteger(udg_hash, h, 20, 'I01V');
	SaveInteger(udg_hash, h, 21, 'I02N');
	SaveInteger(udg_hash, h, 22, 'I03N');
	SaveInteger(udg_hash, h, 23, 'I042');
	SaveInteger(udg_hash, h, 24, 'I03S');
	SaveInteger(udg_hash, h, 25, 'I02U');
	SaveInteger(udg_hash, h, 26, 'I00C');
	SaveInteger(udg_hash, h, 27, 'I00A');
	SaveInteger(udg_hash, h, 28, 'I04V');
	SaveInteger(udg_hash, h, 29, 'I044');
	SaveInteger(udg_hash, h, 30, 'I00J');
	SaveInteger(udg_hash, h, 31, 'I03G');
	SaveInteger(udg_hash, h, 32, 'I04L');
	SaveInteger(udg_hash, h, 33, 'I02I');
	SaveInteger(udg_hash, h, 34, 'I02T');
	SaveInteger(udg_hash, h, 35, 'I04U');
	SaveInteger(udg_hash, h, 36, 'I03K');
	SaveInteger(udg_hash, h, 37, 'I03L');
	SaveInteger(udg_hash, h, 38, 'I03M');
	SaveInteger(udg_hash, h, 39, 'I04X');
	SaveInteger(udg_hash, h, 40, 'I055');
	SaveInteger(udg_hash, h, 41, 'I056');
	SaveInteger(udg_hash, h, 42, 'I057');
	SaveInteger(udg_hash, h, 43, 'I058');
	SaveInteger(udg_hash, h, 44, 'I02E');
	SaveInteger(udg_hash, h, 45, 'I02F');
	SaveInteger(udg_hash, h, 46, 'I01S');
	SaveInteger(udg_hash, h, 47, 'I03Y');
	SaveInteger(udg_hash, h, 48, 'I02G');
	SaveInteger(udg_hash, h, 49, 'I00S');
	SaveInteger(udg_hash, h, 50, 'I00T');
	SaveInteger(udg_hash, h, 51, 'I00V');
	SaveInteger(udg_hash, h, 52, 'I00X');
	SaveInteger(udg_hash, h, 53, 'I012');
	SaveInteger(udg_hash, h, 54, 'I01W');
	TimerStart(t, .05, true, Trig_Items_Preload_Periodic_Actions);
}
nothing InitTrig_Items_Preload() {
	TriggerRegisterTimerEvent(gg_trg_Items_Preload, 17., false);
	TriggerAddAction(gg_trg_Items_Preload, Trig_Items_Preload_Actions);
}
boolean Trig_Igrok_Massiv_Save_Func005Func001C() {
	return (GetPlayerSlotState(Player(-1 + (bj_forLoopAIndex))) == PLAYER_SLOT_STATE_PLAYING) && (GetPlayerController(Player(-1 + (bj_forLoopAIndex))) != MAP_CONTROL_COMPUTER);
}
nothing Trig_Igrok_Massiv_Save_Func006002() {
	SetPlayerStateBJ(GetEnumPlayer(), PLAYER_STATE_RESOURCE_FOOD_CAP, 1);
}
boolean Trig_Igrok_Massiv_Save_Func007C() {
	return (CountPlayersInForceBJ(udg_IGRAET) <= 0);
}
nothing Trig_Igrok_Massiv_Save_Actions() {
	RemoveAllGuardPositions(Player(9));
	RemoveAllGuardPositions(Player($A));
	RemoveAllGuardPositions(Player($B));
	while (true) {
		if (bj_forLoopAIndex > bj_forLoopAIndexEnd) break;
		if ((Trig_Igrok_Massiv_Save_Func005Func001C())) {
			ForceAddPlayer(udg_IGRAET, Player(-1 + (bj_forLoopAIndex)));
		else
		}
	}
	ForForce(udg_IGRAET, Trig_Igrok_Massiv_Save_Func006002);
	if ((Trig_Igrok_Massiv_Save_Func007C())) {
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "Игра одному пока что запрещена!!!");
		CustomVictoryBJ(ForcePickRandomPlayer(udg_IGRAET), true, false);
	}
}
nothing InitTrig_Igrok_Massiv_Save() {
	TriggerRegisterTimerEventSingle(gg_trg_Igrok_Massiv_Save, .0);
	TriggerAddAction(gg_trg_Igrok_Massiv_Save, Trig_Igrok_Massiv_Save_Actions);
}
boolean Trig_Load_Vsiakoe_Func004Func001Func003C() {
	return (GetUnitTypeId(GetEnumUnit()) == 'e002') || (GetUnitTypeId(GetEnumUnit()) == 'h01K') || (GetUnitTypeId(GetEnumUnit()) == 'n00Y') || (GetUnitTypeId(GetEnumUnit()) == 'o003');
}
boolean Trig_Load_Vsiakoe_Func004Func001C() {
	return (Trig_Load_Vsiakoe_Func004Func001Func003C());
}
nothing Trig_Load_Vsiakoe_Func004A() {
	if ((Trig_Load_Vsiakoe_Func004Func001C())) {
		UnitAddType(GetEnumUnit(), UNIT_TYPE_PEON);
		GroupAddUnit(udg_PortalCastersMagi, GetEnumUnit());
	}
}
nothing Trig_Load_Vsiakoe_Func007A() {
	SetPlayerStateBJ(GetEnumPlayer(), PLAYER_STATE_RESOURCE_GOLD, 500);
	SetPlayerStateBJ(GetEnumPlayer(), PLAYER_STATE_RESOURCE_LUMBER, 8);
	SetPlayerAbilityAvailableBJ(false, 'A04F', GetEnumPlayer());
	SetPlayerAbilityAvailableBJ(false, 'A0EF', GetEnumPlayer());
}
nothing Trig_Load_Vsiakoe_Actions() {
	CreateNUnitsAtLoc(1, 'h00U', Player($F), GetRectCenter(bj_mapInitialPlayableArea), bj_UNIT_FACING);
	ForGroupBJ(GetUnitsInRectAll(gg_rct_cast_magi), Trig_Load_Vsiakoe_Func004A);
	CreateQuestBJ(0, "Авторы", "Создатели Карты (|Cfffed312Последние Стражи|r/|Cfffed312Last Guards|r)|n|cff99ccfflluo_OHEP (Derarius/Sladkoegka)|nCosonic5|r", "CommandButton\\Map_Autor's.blp");
	CreateQuestBJ(2, "Игровые Команды", "TRIGSTR_5336", "CommandButton\\Game_Commands.blp");
	ForForce(bj_FORCE_ALL_PLAYERS, Trig_Load_Vsiakoe_Func007A);
}
nothing InitTrig_Load_Vsiakoe() {
	TriggerRegisterTimerEventSingle(gg_trg_Load_Vsiakoe, 2.);
	TriggerAddAction(gg_trg_Load_Vsiakoe, Trig_Load_Vsiakoe_Actions);
}
boolean Trig_Igrok_Massiv_Liver_Func004Func001C() {
	return (IsUnitType(GetEnumUnit(), UNIT_TYPE_HERO)) != null;
}
nothing Trig_Igrok_Massiv_Liver_Func004A() {
	if ((Trig_Igrok_Massiv_Liver_Func004Func001C())) {
		while (true) {
			if (bj_forLoopAIndex > bj_forLoopAIndexEnd) break;
			RemoveItem(UnitItemInSlotBJ(GetEnumUnit(), bj_forLoopAIndex));
		}
	}
	KillUnit(GetEnumUnit());
	RemoveUnit(GetEnumUnit());
}
boolean Trig_Igrok_Massiv_Liver_Func012Func001C() {
	return (udg_Is_Player_Fast_Wave_Start[(1 + GetPlayerId(GetTriggerPlayer()))]);
}
boolean Trig_Igrok_Massiv_Liver_Func012Func002C() {
	return (udg_Count_Players_Fast_Wave_Start >= CountPlayersInForceBJ(udg_IGRAET));
}
boolean Trig_Igrok_Massiv_Liver_Func012C() {
	return (udg_Is_Fast_Wave_Start_On_Off);
}
boolean Trig_Igrok_Massiv_Liver_Func013Func001C() {
	return (GetRandomInt(1, 2) == 1);
}
boolean Trig_Igrok_Massiv_Liver_Func013Func002C() {
	return (GetRandomInt(1, 2) == 1);
}
boolean Trig_Igrok_Massiv_Liver_Func013C() {
	return (GetRandomInt(1, 2) == 1);
}
nothing Trig_Igrok_Massiv_Liver_Actions() {
	ForceRemovePlayer(udg_IGRAET, GetTriggerPlayer());
	ForGroupBJ(GetUnitsOfPlayerAll(GetTriggerPlayer()), Trig_Igrok_Massiv_Liver_Func004A);
	DestroyEffect(udg_Rune_On_Base_Effect[(CountPlayersInForceBJ(udg_IGRAET) + 1)]);
	RemoveUnit(udg_Rune_On_Base_Dummy[(CountPlayersInForceBJ(udg_IGRAET) + 1)]);
	MultiboardSetItemValueBJ(udg_MultiBoard, 2, udg_PlayerNumberInMB[(1 + GetPlayerId(GetTriggerPlayer()))], ("|cFF969696" + (GetPlayerName(GetTriggerPlayer()) + "|r")));
	if ((Trig_Igrok_Massiv_Liver_Func012C())) {
		if ((Trig_Igrok_Massiv_Liver_Func012Func001C())) {
		}
		if ((Trig_Igrok_Massiv_Liver_Func012Func002C())) {
			StartTimerBJ(udg_Timer_Nomera_Volni, false, 1.);
		}
	}
	if ((Trig_Igrok_Massiv_Liver_Func013C())) {
		if ((Trig_Igrok_Massiv_Liver_Func013Func002C())) {
			DisplayTextToForce(bj_FORCE_ALL_PLAYERS, (udg_ColorString[(1 + GetPlayerId(GetTriggerPlayer()))] + (GetPlayerName(GetTriggerPlayer()) + "|r по непонятным причинам решил ливнуть!")));
		else
			DisplayTextToForce(bj_FORCE_ALL_PLAYERS, (udg_ColorString[(1 + GetPlayerId(GetTriggerPlayer()))] + (GetPlayerName(GetTriggerPlayer()) + "|r вышел из игры! Ну почему всегда найдется тот, кто запорет всю игру?!")));
		}
	else
		if ((Trig_Igrok_Massiv_Liver_Func013Func001C())) {
			DisplayTextToForce(bj_FORCE_ALL_PLAYERS, (udg_ColorString[(1 + GetPlayerId(GetTriggerPlayer()))] + (GetPlayerName(GetTriggerPlayer()) + "|r сбежал с поля боя...Чтож‚ придется подолжать без него!")));
		else
			DisplayTextToForce(bj_FORCE_ALL_PLAYERS, (udg_ColorString[(1 + GetPlayerId(GetTriggerPlayer()))] + (GetPlayerName(GetTriggerPlayer()) + "|r специально (а может случайно?) покинул игру!")));
		}
	}
}
nothing InitTrig_Igrok_Massiv_Liver() {
	TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver, Player(0));
	TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver, Player(1));
	TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver, Player(2));
	TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver, Player(3));
	TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver, Player(4));
	TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver, Player(5));
	TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver, Player(6));
	TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver, Player(7));
	TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver, Player(8));
	TriggerAddAction(gg_trg_Igrok_Massiv_Liver, Trig_Igrok_Massiv_Liver_Actions);
}
nothing Trig_Messager_Actions() {
	ConditionalTriggerExecute(gg_trg_Start_game);
	CreateNUnitsAtLoc(1, 'h009', Player($B), GetRectCenter(gg_rct_Portal_Attack_Dummy_Left), bj_UNIT_FACING);
	SetUnitFlyHeight(udg_Dammy_Portal[1], 150., 1200.);
	CreateNUnitsAtLoc(1, 'h009', Player($B), GetRectCenter(gg_rct_Portal_Attack_Dummy_Right), bj_UNIT_FACING);
	SetUnitFlyHeight(udg_Dammy_Portal[2], 150., 1200.);
	CreateNUnitsAtLoc(1, 'h009', Player($B), GetRectCenter(gg_rct_Portal_Attack_Dummy_Top), bj_UNIT_FACING);
	SetUnitFlyHeight(udg_Dammy_Portal[3], 150., 1200.);
	while (true) {
		if (bj_forLoopAIndex > bj_forLoopAIndexEnd) break;
		CreateNUnitsAtLoc(1, 'h00U', Player($F), Location(I2R(udg_Arrow_Pointer_Guide_X[bj_forLoopAIndex]), I2R(udg_Arrow_Pointer_Guide_Y[bj_forLoopAIndex])), I2R(udg_Arrow_Pointer_Guide_Angle[bj_forLoopAIndex]));
		AddSpecialEffectTargetUnitBJ("origin", bj_lastCreatedUnit, "Effects\\Arrow - Chapter Browse - Rotated.mdx");
	}
	AddSpecialEffectLocBJ(Location(I2R(udg_Rune_Position_X[1]), I2R(udg_Rune_Position_Y[1])), "Effects\\MistAura.mdx");
	AddSpecialEffectLocBJ(Location(I2R(udg_Rune_Position_X[2]), I2R(udg_Rune_Position_Y[2])), "Effects\\MistAura.mdx");
	AddSpecialEffectLocBJ(Location(I2R(udg_Rune_Position_X[3]), I2R(udg_Rune_Position_Y[3])), "Effects\\MistAura.mdx");
	AddSpecialEffectLocBJ(Location(I2R(udg_Rune_Position_X[1]), I2R(udg_Rune_Position_Y[1])), "Effects\\GreenRing.mdx");
	while (true) {
		if (bj_forLoopAIndex > bj_forLoopAIndexEnd) break;
		CreateNUnitsAtLoc(1, 'h00E', Player($F), Location(udg_Rune_On_Base_Dummy_X[bj_forLoopAIndex], udg_Rune_On_Base_Dummy_Y[bj_forLoopAIndex]), bj_UNIT_FACING);
		AddSpecialEffectTargetUnitBJ("origin", bj_lastCreatedUnit, udg_Rune_On_Base_Effect_String[bj_forLoopAIndex]);
		SetUnitFlyHeight(bj_lastCreatedUnit, -50., .0);
	}
}
nothing InitTrig_Messager() {
	TriggerRegisterTimerEventSingle(gg_trg_Messager, 8.);
	TriggerAddAction(gg_trg_Messager, Trig_Messager_Actions);
}
nothing Trig_Create_TExttags_about_Shops_Actions() {
	CreateTexttag("|cFF00C850Барахолка|r", .03, $FF, 2050., -5100., .0, .0, .0, 9999999.);
	CreateTexttag("|cFF00C850Экипировка|r", .03, $FF, 2050., -5250., .0, .0, .0, 99999999.);
	CreateTexttag("|cFFFF8C00Броня и Доспехи|r", .03, $FF, 2050., -5400., .0, .0, .0, 99999999.);
	CreateTexttag("|cFF9600FFВооружение|r", .03, $FF, 2050., -5660., .0, .0, .0, 99999999.);
	CreateTexttag("|cFF6464FAТайник Странника|r", .03, $FF, 2050., -5900., .0, .0, .0, 9999999.);
	CreateTexttag("|cFF6464FAМагические Артефакты|r", .03, $FF, 2050., -6130., .0, .0, .0, 999999.);
}
nothing InitTrig_Create_TExttags_about_Shops() {
	TriggerRegisterTimerEventSingle(gg_trg_Create_TExttags_about_Shops, 9.);
	TriggerAddAction(gg_trg_Create_TExttags_about_Shops, Trig_Create_TExttags_about_Shops_Actions);
}
nothing Trig_InitHashtable_Actions() {
}
nothing InitTrig_InitHashtable() {
	TriggerAddAction(gg_trg_InitHashtable, Trig_InitHashtable_Actions);
}
nothing Trig_Save_Sounds_Actions() {
}
nothing InitTrig_Save_Sounds() {
	TriggerRegisterTimerEvent(gg_trg_Save_Sounds, 5., false);
	TriggerAddAction(gg_trg_Save_Sounds, Trig_Save_Sounds_Actions);
}
nothing HandleCounter_Update() {
	integer i = 0;
	integer id;
	array<location> P;
	real result = 0;
	while (true) {
		if (i >= 50) break;
	}
	while (true) {
		RemoveLocation(P[i]);
		if (i <= 1) break;
	}
	LeaderboardSetItemValue(udg_HandleBoard, 0, R2I(result));
}
nothing HandleCounter_Actions() {
	LeaderboardSetLabel(udg_HandleBoard, "Handle Counter");
	PlayerSetLeaderboard(GetLocalPlayer(), udg_HandleBoard);
	LeaderboardDisplay(udg_HandleBoard, false);
	if (GetPlayerName(GetLocalPlayer()) == "Derarius" || GetPlayerName(GetLocalPlayer()) == "WorldEdit") {
		LeaderboardDisplay(udg_HandleBoard, true);
	}
	LeaderboardAddItem(udg_HandleBoard, "Handles", 0, Player(0));
	LeaderboardSetSizeByItemCount(udg_HandleBoard, 1);
	HandleCounter_Update();
	TimerStart(GetExpiredTimer(), .05, true, HandleCounter_Update);
}
nothing InitTrig_HandleCounter() {
	TimerStart(CreateTimer(), 0, false, HandleCounter_Actions);
}
nothing Trig_Set_Chlenix_Actions() {
	DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFFFF0000CHLENIX|r АКТИВИРОВАН");
}
nothing InitTrig_Set_Chlenix() {
	TriggerRegisterPlayerChatEvent(gg_trg_Set_Chlenix, Player(0), "-chlenix", false);
	TriggerAddAction(gg_trg_Set_Chlenix, Trig_Set_Chlenix_Actions);
}
nothing Trig_Set_Energy_Walls_Func003A() {
	RemoveUnit(GetEnumUnit());
}
nothing Trig_Set_Energy_Walls_Actions() {
	ForGroupBJ(GetUnitsOfPlayerAndTypeId(Player($F), 'h00I'), Trig_Set_Energy_Walls_Func003A);
}
nothing InitTrig_Set_Energy_Walls() {
	TriggerRegisterTimerEventSingle(gg_trg_Set_Energy_Walls, 5.);
	TriggerAddAction(gg_trg_Set_Energy_Walls, Trig_Set_Energy_Walls_Actions);
}
nothing Trig_EitiArenaRemovesAllItems_Actions() {
	RemoveItem(GetEnumItem());
}
nothing Trig_TimerEitiAreniTheEnd3_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	timerdialog td = LoadTimerDialogHandle(udg_hash, GetHandleId(gg_rct_Event_Bonus_Etei_arena_1), $B);
	group gruppa = CreateGroup();
	unit Picked;
	real xc = GetRectCenterX(gg_rct_Respawn_Heroes);
	real yc = GetRectCenterY(gg_rct_Respawn_Heroes);
	real perekluchatel = .0;
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
	while (true) {
		if (Picked == null) break;
		DestroyFogModifier(LoadFogModifierHandle(udg_hash, GetHandleId(Picked), $AB));
		if (perekluchatel >= 0) {
		else
		}
		SetUnitPosition(Picked, xc, yc);
		SetUnitFacing(Picked, 270.);
		SetUnitState(Picked, UNIT_STATE_LIFE, $540BE3FF);
		SetUnitState(Picked, UNIT_STATE_MANA, $540BE3FF);
		ShowUnit(Picked, true);
		PauseUnit(Picked, false);
		if ((GetLocalPlayer() == GetOwningPlayer(Picked))) {
			ResetToGameCamera(.0);
			PanCameraToTimed(xc, yc, .0);
			ClearSelection();
			SelectUnit(Picked, true);
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	EnumItemsInRect(gg_rct_Event_Bonus_Etei_arena_1, null, Trig_EitiArenaRemovesAllItems_Actions);
	StartTimerBJ(udg_Timer_Nomera_Volni, false, 75.);
	CreateTimerDialogBJ(udg_Timer_Nomera_Volni, ("Волна № |cFFFF0000" + (I2S(udg_Nomer_samoi_volni) + "|r")));
	TimerDialogSetTimeColorBJ(udg_TimerDialog_Nomera_Volni, 'd', 90., 30., 20.);
	KillUnit(LoadUnitHandle(udg_hash, GetHandleId(gg_rct_Event_Bonus_Etei_arena_1), $C));
	KillUnit(LoadUnitHandle(udg_hash, GetHandleId(gg_rct_Event_Bonus_Etei_arena_1), $D));
	EnableTrigger(gg_trg_Hero_Dead);
	DestroyTimerDialog(td);
	DestroyTimer(t);
	FlushChildHashtable(udg_hash, h);
}
nothing Trig_TimerEitiAreniTheEnd2_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	timer t2 = CreateTimer();
	integer h2 = GetHandleId(t2);
	TimerStart(t2, 1.25, false, Trig_TimerEitiAreniTheEnd3_Actions);
}
nothing Trig_TimerEitiAreniTheEnd_ForForce() {
	while (true) {
		if (bj_forLoopAIndex > 9) break;
		SetPlayerAllianceStateBJ(GetEnumPlayer(), Player(bj_forLoopAIndex - 1), 3);
	}
}
nothing Trig_TimerEitiAreniTheEnd_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit Picked;
	group gruppa = CreateGroup();
	real angle = 0;
	real x = GetRectCenterX(gg_rct_Event_Bonus_Etei_arena_1);
	real y = GetRectCenterY(gg_rct_Event_Bonus_Etei_arena_1);
	real xc = GetRectCenterX(gg_rct_Respawn_Heroes);
	real yc = GetRectCenterY(gg_rct_Respawn_Heroes);
	real xu;
	real yu;
	integer play = 0;
	integer hhero = 0;
	texttag txt = CreateTextTag();
	real vel = .0221875;
	real angletxt = 45. + GetRandomReal(.0, 90.);
	real xvel = vel * Cos(angle * bj_DEGTORAD);
	real yvel = vel * Sin(angle * bj_DEGTORAD);
	timer t2 = CreateTimer();
	integer h2 = GetHandleId(t2);
	real timeRemaining = 0;
	real anglestep = (360. / CountPlayersInForceBJ(udg_IGRAET));
	ForForce(udg_IGRAET, Trig_TimerEitiAreniTheEnd_ForForce);
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
	TimerStart(t2, 4., false, Trig_TimerEitiAreniTheEnd2_Actions);
	while (true) {
		if (Picked == null) break;
		SetUnitPosition(Picked, (x + 400 * Cos(angle * bj_DEGTORAD)), (y + 400 * Sin(angle * bj_DEGTORAD)));
		ReviveHero(Picked, (x + 400 * Cos(angle * bj_DEGTORAD)), (y + 400 * Sin(angle * bj_DEGTORAD)), true);
		SetUnitFacing(Picked, bj_RADTODEG * Atan2(y - GetUnitY(Picked), x - GetUnitX(Picked)));
		SetUnitState(Picked, UNIT_STATE_LIFE, $540BE3FF);
		SetUnitState(Picked, UNIT_STATE_MANA, $540BE3FF);
		if ((GetLocalPlayer() == GetOwningPlayer(Picked))) {
			PanCameraToTimed(x, y, .0);
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	GroupEnumUnitsInRect(gruppa, gg_rct_Event_Bonus_Etei_arena_1, null);
	KillSummonsAndIllusions(gruppa);
	GroupEnumUnitsInRect(gruppa, gg_rct_Event_Bonus_Etei_arena_1, null);
	while (true) {
		if (Picked == null) break;
		if (GetUnitTypeId(Picked) != 'h00C' && GetUnitTypeId(Picked) != 'h00B') {
			PauseUnit(Picked, true);
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
	while (true) {
		if (Picked == null) break;
		if (play == 2 || play == 1 || play == 0) {
			SetTextTagText(txt, "|cFFFFFF00+650|r", .045);
			SetTextTagPos(txt, xu, yu, .0);
			SetTextTagColor(txt, 0, 0, 0, 50);
			SetTextTagVelocity(txt, xvel, yvel);
			SetTextTagPermanent(txt, false);
			SetTextTagLifespan(txt, 4.);
			SetTextTagFadepoint(txt, .0);
			SetPlayerState(GetOwningPlayer(Picked), PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(GetOwningPlayer(Picked), PLAYER_STATE_RESOURCE_GOLD) + 650);
			if (GetLocalPlayer() == GetOwningPlayer(Picked)) {
				DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Вы получили " + udg_ColorString[23] + I2S(650) + " золота|r!!!");
			}
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	GroupClear(gruppa);
	DestroyGroup(gruppa);
}
nothing Trig_Nachalo_Eiti_aren_Actions_Periodic() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	integer timeout = LoadInteger(udg_hash, h, 3);
	integer lvl = LoadInteger(udg_hash, h, 4);
	integer I = LoadInteger(udg_hash, h, 5);
	rect rct = gg_rct_Event_Bonus_Etei_arena_1;
	real minx = GetRectMinX(rct);
	real maxx = GetRectMaxX(rct);
	real miny = GetRectMinY(rct);
	real maxy = GetRectMaxY(rct);
	real x = GetRandomReal(minx, maxx);
	real y = GetRandomReal(miny, maxy);
	player p = Player($C);
	integer random = R2I($F + 5 * CountPlayersInForceBJ(udg_IGRAET));
	integer randomgold = GetRandomInt(1, R2I(30 - 3 * CountPlayersInForceBJ(udg_IGRAET)));
	integer o = GetHandleId(udg_Gruppa_HeroUnitov_Geroev);
	integer ff = 0;
	timer t2 = LoadTimerHandle(udg_hash, h, 8);
	group gruppa = CreateGroup();
	unit Picked;
	real xt;
	real yt;
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
	while (true) {
		if (Picked == null) break;
		if (!((GetRectMinX(gg_rct_Event_Bonus_Etei_arena_1) <= xt) && (xt <= GetRectMaxX(gg_rct_Event_Bonus_Etei_arena_1)) && (GetRectMinY(gg_rct_Event_Bonus_Etei_arena_1) <= yt) && (yt <= GetRectMaxY(gg_rct_Event_Bonus_Etei_arena_1)))) {
			SetUnitPosition(Picked, 4250., 800.);
			if ((GetLocalPlayer() == GetOwningPlayer(Picked))) {
				PanCameraToTimed(4250., 800., .0);
			}
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl", 4250., 800.));
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	if (randomgold <= 3) {
		CreateItem('I03B', x, y);
	}
	if (randomgold == 4) {
		CreateItem('I03A', x, y);
	}
	SaveInteger(udg_hash, h, 3, timeout - 1);
	if (GetRandomInt(1, 'd') <= random) {
		CreatePotion(x, y, 1, 6);
	}
	if (timeout <= 0) {
		DestroyTimer(t);
		FlushChildHashtable(udg_hash, h);
	}
	if (ff == 1) {
		TimerStart(t2, .05, false, Trig_TimerEitiAreniTheEnd_Actions);
	}
	GroupClear(gruppa);
	DestroyGroup(gruppa);
}
nothing Trig_Nachalo_Eiti_aren2_Actions() {
	timer t3 = GetExpiredTimer();
	integer h = GetHandleId(t3);
	unit Picked;
	group gruppa = CreateGroup();
	real xtop = GetRectCenterX(gg_rct_Oblast_Teleporta_Arena_Top);
	real ytop = GetRectCenterY(gg_rct_Oblast_Teleporta_Arena_Top);
	real xbot = GetRectCenterX(gg_rct_Oblast_Teleporta_Arena_Bot);
	real ybot = GetRectCenterY(gg_rct_Oblast_Teleporta_Arena_Bot);
	timer t = LoadTimerHandle(udg_hash, h, 1);
	timer t2 = LoadTimerHandle(udg_hash, h, 2);
	timerdialog td = LoadTimerDialogHandle(udg_hash, h, 3);
	unit portal;
	GroupEnumUnitsInRect(gruppa, gg_rct_Event_Bonus_Etei_arena_1, null);
	while (true) {
		if (Picked == null) break;
		PauseUnit(Picked, false);
		GroupRemoveUnit(gruppa, Picked);
	}
	SaveUnitHandle(udg_hash, GetHandleId(gg_rct_Event_Bonus_Etei_arena_1), $C, portal);
	SaveUnitHandle(udg_hash, GetHandleId(gg_rct_Event_Bonus_Etei_arena_1), $D, portal);
	TimerStart(t2, 90., false, Trig_TimerEitiAreniTheEnd_Actions);
	TimerDialogSetTitle(td, "Time Remaining:");
	TimerDialogDisplay(td, true);
	TimerDialogSetTimeColor(td, $FF, 30, 30, $A);
	SaveTimerDialogHandle(udg_hash, GetHandleId(gg_rct_Event_Bonus_Etei_arena_1), $B, td);
	TimerStart(t, .5, true, Trig_Nachalo_Eiti_aren_Actions_Periodic);
	GroupClear(gruppa);
	DestroyGroup(gruppa);
}
nothing Trig_Nachalo_Eiti_aren_FuncForGroup() {
	while (true) {
		if (bj_forLoopAIndex > 9) break;
		if (GetEnumPlayer() != Player(bj_forLoopAIndex - 1)) {
			SetPlayerAllianceStateBJ(GetEnumPlayer(), Player(bj_forLoopAIndex - 1), 0);
		}
	}
}
nothing Trig_Nachalo_Eiti_aren_Actions() {
	real angle = 0;
	real x = GetRectCenterX(gg_rct_Event_Bonus_Etei_arena_1);
	real y = GetRectCenterY(gg_rct_Event_Bonus_Etei_arena_1);
	real xtop = GetRectCenterX(gg_rct_Oblast_Teleporta_Arena_Top);
	real ytop = GetRectCenterY(gg_rct_Oblast_Teleporta_Arena_Top);
	real xbot = GetRectCenterX(gg_rct_Oblast_Teleporta_Arena_Bot);
	real ybot = GetRectCenterY(gg_rct_Oblast_Teleporta_Arena_Bot);
	unit Picked;
	timer t2 = CreateTimer();
	timerdialog td = CreateTimerDialog(t2);
	integer h2 = GetHandleId(t2);
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	timer t3 = CreateTimer();
	integer h3 = GetHandleId(t3);
	group gruppa = CreateGroup();
	group grupa = CreateGroup();
	integer I = 0;
	integer lvl = 0;
	integer hhero;
	real anglestep = (360. / CountPlayersInForceBJ(udg_IGRAET));
	integer o = GetHandleId(udg_Gruppa_HeroUnitov_Geroev);
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, grupa);
	SaveInteger(udg_hash, h, 3, $B4);
	SaveInteger(udg_hash, h, 4, lvl);
	SaveInteger(udg_hash, h, 5, I);
	SaveReal(udg_hash, h, 6, x);
	SaveReal(udg_hash, h, 7, y);
	SaveTimerHandle(udg_hash, h, 8, t);
	SaveGroupHandle(udg_hash, o, 1, grupa);
	DisableTrigger(gg_trg_Hero_Dead);
	ForForce(udg_IGRAET, Trig_Nachalo_Eiti_aren_FuncForGroup);
	if ((IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS))) {
		DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Добро Пожаловать на |cFFFFDC00Золотую Поляну|r!!!");
		DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Здесь каждый играет сам за себя. Постарайтесь выжить указанное время и собрать как можно больше золотых монеток. Удачи!");
	}
	while (true) {
		if (Picked == null) break;
		SaveInteger(udg_hash, hhero, 1, 0);
		SetUnitPosition(Picked, (x + 400 * Cos(angle * bj_DEGTORAD)), (y + 400 * Sin(angle * bj_DEGTORAD)));
		SetUnitFacing(Picked, bj_RADTODEG * Atan2(y - GetUnitY(Picked), x - GetUnitX(Picked)));
		FogModifierStart(bj_lastCreatedFogModifier);
		SaveFogModifierHandle(udg_hash, GetHandleId(Picked), $AB, bj_lastCreatedFogModifier);
		if ((GetLocalPlayer() == GetOwningPlayer(Picked))) {
			SoundForPlayer(GetOwningPlayer(Picked), 7);
			ClearSelection();
			SelectUnit(Picked, true);
			PanCameraToTimed(x, y, .0);
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	GroupEnumUnitsInRange(gruppa, 0, 0, 99999, null);
	KillSummonsAndIllusions(gruppa);
	GroupEnumUnitsInRect(gruppa, gg_rct_Event_Bonus_Etei_arena_1, null);
	while (true) {
		if (Picked == null) break;
		PauseUnit(Picked, true);
		GroupRemoveUnit(gruppa, Picked);
	}
	SaveTimerHandle(udg_hash, h3, 1, t);
	SaveTimerHandle(udg_hash, h3, 2, t2);
	SaveTimerDialogHandle(udg_hash, h3, 3, td);
	TimerStart(t3, 5., false, Trig_Nachalo_Eiti_aren2_Actions);
	GroupClear(gruppa);
	DestroyGroup(gruppa);
}
nothing InitTrig_Nachalo_Eiti_aren() {
	TriggerAddAction(gg_trg_Nachalo_Eiti_aren, Trig_Nachalo_Eiti_aren_Actions);
}
nothing Trig_Hero_Deadd_Timer2_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit u = LoadUnitHandle(udg_hash, h, 1);
	effect ef = LoadEffectHandle(udg_hash, h, 4);
	DestroyEffect(ef);
	UnitRemoveAbility(u, 'Avul');
	DestroyTimer(t);
	FlushChildHashtable(udg_hash, h);
}
nothing Trig_Hero_Deadd_Timer_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit u = LoadUnitHandle(udg_hash, h, 1);
	real x = LoadReal(udg_hash, h, 2);
	real y = LoadReal(udg_hash, h, 3);
	effect ef = AddSpecialEffectTarget("Abilities\\Spells\\Human\\DivineShield\\DivineShieldTarget.mdl", u, "origin");
	SaveEffectHandle(udg_hash, h, 4, ef);
	TimerStart(t, 3., false, Trig_Hero_Deadd_Timer2_Actions);
	ReviveHero(u, x, y, true);
	SetUnitState(u, UNIT_STATE_MANA, GetUnitState(u, UNIT_STATE_MAX_MANA));
	SetUnitState(u, UNIT_STATE_LIFE, GetUnitState(u, UNIT_STATE_MAX_LIFE));
	UnitAddAbility(u, 'Avul');
	if ((GetLocalPlayer() == GetOwningPlayer(u))) {
		DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFFF00Ваш Герой Получил Второй Шанс!!!|r");
		PanCameraToTimed(x, y, .0);
		ClearSelection();
		SelectUnit(u, true);
	}
}
nothing Trig_HeroDeadonEitiArena_Actions() {
	unit u = GetDyingUnit();
	integer hhero = GetHandleId(u);
	player p = GetOwningPlayer(u);
	integer play = GetPlayerId(p) + 1;
	array<integer> heroint;
	unit killer = GetKillingUnit();
	player pk = GetOwningPlayer(killer);
	integer random = GetRandomInt(1, 3);
	integer o = GetHandleId(udg_Gruppa_HeroUnitov_Geroev);
	group g = LoadGroupHandle(udg_hash, o, 1);
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	real xu = GetUnitX(u);
	real yu = GetUnitY(u);
	string stext = "";
	integer ff = 0;
	integer gold = 0;
	integer xp = 0;
	SaveUnitHandle(udg_hash, h, 1, u);
	SaveReal(udg_hash, h, 2, xu);
	SaveReal(udg_hash, h, 3, yu);
	SaveInteger(udg_hash, hhero, 1, heroint[play]);
	if (heroint[play] == 1) {
		TimerStart(t, 4., false, Trig_Hero_Deadd_Timer_Actions);
	}
	if (heroint[play] == 2) {
		TimerStart(t, 4., false, Trig_Hero_Deadd_Timer_Actions);
	}
	if (heroint[play] == 3) {
	}
	if (GetPlayerId(pk) <= 8 && heroint[play] <= 3) {
		if (random == 1) {
		}
		if (random == 2) {
		}
		if (random == 3) {
		}
		SetPlayerState(pk, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(pk, PLAYER_STATE_RESOURCE_GOLD) + gold);
		AddHeroXP(killer, xp, true);
	}
	if (stext != null && stext != "") {
		if (IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS)) {
			DisplayTimedTextToPlayer(GetLocalPlayer(), 0, 0, 7., stext);
		}
	}
	if (heroint[play] == 3) {
		GroupRemoveUnit(g, u);
	}
	if (CountUnitsInGroup(g) <= 0) {
		SaveInteger(udg_hash, o, 2, ff);
	}
	SaveGroupHandle(udg_hash, o, 1, g);
}
boolean Trig_HeroDeadonEitiArena_Conditions() {
	return (IsUnitType(GetDyingUnit(), UNIT_TYPE_HERO) && IsUnitIllusion(GetDyingUnit()) == false && GetPlayerId(GetOwningPlayer(GetDyingUnit())) <= 8 && (udg_Is_Eiti_Arena_Already_Go)) != null;
}
nothing InitTrig_HeroDeadonEitiArena() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_HeroDeadonEitiArena, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_HeroDeadonEitiArena, Condition(Trig_HeroDeadonEitiArena_Conditions));
	TriggerAddAction(gg_trg_HeroDeadonEitiArena, Trig_HeroDeadonEitiArena_Actions);
}
boolean Trig__PortalCheckTop_Conditions() {
	return (IsUnitType(GetEnteringUnit(), UNIT_TYPE_HERO) && IsUnitIllusion(GetTriggerUnit()) == false) != null;
}
nothing Trig__PortalCheckTop_Actions() {
	unit u = GetEnteringUnit();
	real x = GetRectCenterX(gg_rct_Oblast_Teleporta_Arena_Bot);
	real y = GetRectCenterY(gg_rct_Oblast_Teleporta_Arena_Bot);
	if (IsUnitInGroup(u, udg_OtriadPortalUnitsEitiArena)) {
		GroupRemoveUnit(udg_OtriadPortalUnitsEitiArena, u);
	else
		GroupAddUnit(udg_OtriadPortalUnitsEitiArena, u);
		SetUnitPosition(u, x, y);
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl", x, y));
		if (GetLocalPlayer() == GetOwningPlayer(u)) {
			CameraSetupApplyForceDuration(gg_cam_Camera_Eiti_Arena_Bot_Portal, true, .0);
		}
	}
}
nothing InitTrig__PortalCheckTop() {
	region rectRegion = CreateRegion();
	RegionAddRect(rectRegion, gg_rct_Oblast_Teleporta_Arena_Top);
	TriggerRegisterEnterRegion(gg_trg__PortalCheckTop, rectRegion, null);
	TriggerAddCondition(gg_trg__PortalCheckTop, Condition(Trig__PortalCheckTop_Conditions));
	TriggerAddAction(gg_trg__PortalCheckTop, Trig__PortalCheckTop_Actions);
}
boolean Trig__PortalCheckBot_Conditions() {
	return (IsUnitType(GetEnteringUnit(), UNIT_TYPE_HERO) && IsUnitIllusion(GetTriggerUnit()) == false) != null;
}
nothing Trig__PortalCheckBot_Actions() {
	unit u = GetEnteringUnit();
	real x = GetRectCenterX(gg_rct_Oblast_Teleporta_Arena_Top);
	real y = GetRectCenterY(gg_rct_Oblast_Teleporta_Arena_Top);
	if (IsUnitInGroup(u, udg_OtriadPortalUnitsEitiArena)) {
		GroupRemoveUnit(udg_OtriadPortalUnitsEitiArena, u);
	else
		GroupAddUnit(udg_OtriadPortalUnitsEitiArena, u);
		SetUnitPosition(u, x, y);
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl", x, y));
		if (GetLocalPlayer() == GetOwningPlayer(u)) {
			CameraSetupApplyForceDuration(gg_cam_Camera_Eiti_Arena_Top_Portal, true, .0);
		}
	}
}
nothing InitTrig__PortalCheckBot() {
	region rectRegion = CreateRegion();
	RegionAddRect(rectRegion, gg_rct_Oblast_Teleporta_Arena_Bot);
	TriggerRegisterEnterRegion(gg_trg__PortalCheckBot, rectRegion, null);
	TriggerAddCondition(gg_trg__PortalCheckBot, Condition(Trig__PortalCheckBot_Conditions));
	TriggerAddAction(gg_trg__PortalCheckBot, Trig__PortalCheckBot_Actions);
}
nothing Trig_LinkItemsInitAddItemToSystem_Actions(integer count1, integer id1, integer count2, integer id2, integer count3, integer id3, integer count4, integer id4, integer count5, integer id5, integer itemlevel, integer idfinal, integer idrecipe, string sef) {
	integer h = ($C * itemlevel);
	SaveInteger(udg_hash, idrecipe, h + 1, count1);
	SaveInteger(udg_hash, idrecipe, h + 2, id1);
	SaveInteger(udg_hash, idrecipe, h + 3, count2);
	SaveInteger(udg_hash, idrecipe, h + 4, id2);
	SaveInteger(udg_hash, idrecipe, h + 5, count3);
	SaveInteger(udg_hash, idrecipe, h + 6, id3);
	SaveInteger(udg_hash, idrecipe, h + 7, count4);
	SaveInteger(udg_hash, idrecipe, h + 8, id4);
	SaveInteger(udg_hash, idrecipe, h + 9, count5);
	SaveInteger(udg_hash, idrecipe, h + $A, id5);
	SaveInteger(udg_hash, idrecipe, h + $B, idfinal);
	SaveStr(udg_hash, idrecipe, h + $C, sef);
	SaveInteger(udg_hash, idfinal, 'y', itemlevel);
}
nothing Trig_LinkItemsInit_Actions() {
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I004', 1, 'I00D', 0, 0, 0, 0, 0, 0, 0, 'I027', 'I02T', "Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00M', 0, 0, 0, 0, 0, 0, 0, 0, 0, 'I02Y', 'I030', "Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I02Y', 0, 0, 0, 0, 0, 0, 0, 0, 1, 'I02Z', 'I030', "Abilities\\Spells\\Human\\Resurrect\\ResurrectCaster.mdl");
	SaveInteger(udg_hash, 'I030', 0, 1);
	Trig_LinkItemsInitAddItemToSystem_Actions(2, 'I01T', 1, 'I021', 0, 0, 0, 0, 0, 0, 0, 'I036', 'I037', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I003', 1, 'I004', 1, 'I01T', 0, 0, 0, 0, 0, 'I02J', 'I01D', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I02J', 0, 0, 0, 0, 0, 0, 0, 0, 1, 'I01B', 'I01D', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I01B', 0, 0, 0, 0, 0, 0, 0, 0, 2, 'I01X', 'I01D', "");
	SaveInteger(udg_hash, 'I01D', 0, 2);
	Trig_LinkItemsInitAddItemToSystem_Actions(2, 'I01T', 1, 'I001', 0, 0, 0, 0, 0, 0, 0, 'I01U', 'I01M', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(2, 'I003', 1, 'I01U', 0, 0, 0, 0, 0, 0, 0, 'I01G', 'I018', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00Z', 1, 'I00D', 0, 0, 0, 0, 0, 0, 0, 'I00A', 'I000', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00D', 1, 'I00E', 0, 0, 0, 0, 0, 0, 0, 'I00I', 'I01N', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00A', 1, 'I00I', 0, 0, 0, 0, 0, 0, 0, 'I00C', 'I00O', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00J', 1, 'I00E', 1, 'I00N', 0, 0, 0, 0, 0, 'I00G', 'I00K', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00G', 0, 0, 0, 0, 0, 0, 0, 0, 1, 'I01Q', 'I00K', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I01Q', 0, 0, 0, 0, 0, 0, 0, 0, 2, 'I01V', 'I00K', "");
	SaveInteger(udg_hash, 'I00K', 0, 2);
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00Z', 2, 'I027', 0, 0, 0, 0, 0, 0, 0, 'I03G', 'I02K', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I027', 1, 'I022', 1, 'I021', 1, 'I026', 0, 0, 0, 'I03K', 'I03J', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I03K', 0, 0, 0, 0, 0, 0, 0, 0, 1, 'I03L', 'I03J', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I03L', 0, 0, 0, 0, 0, 0, 0, 0, 2, 'I03M', 'I03J', "");
	SaveInteger(udg_hash, 'I03J', 0, 2);
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00Z', 2, 'I026', 0, 0, 0, 0, 0, 0, 0, 'I02U', 'I03I', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(2, 'I00N', 1, 'I00Y', 0, 0, 0, 0, 0, 0, 0, 'I03Q', 'I02V', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(2, 'I015', 1, 'I00D', 0, 0, 0, 0, 0, 0, 0, 'I03S', 'I03R', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00F', 1, 'I001', 2, 'I00E', 0, 0, 0, 0, 0, 'I03U', 'I03T', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00J', 1, 'I021', 1, 'I026', 1, 'I00F', 0, 0, 0, 'I03W', 'I03V', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I02C', 1, 'I001', 1, 'I004', 0, 0, 0, 0, 0, 'I03Y', 'I03X', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I01X', 1, 'I01S', 0, 0, 0, 0, 0, 0, 0, 'I02G', 'I03Z', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I023', 1, 'I001', 0, 0, 0, 0, 0, 0, 0, 'I02I', 'I02O', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I036', 1, 'I00B', 1, 'I02A', 0, 0, 0, 0, 0, 'I02F', 'I040', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I022', 1, 'I00Z', 1, 'I026', 1, 'I00F', 0, 0, 0, 'I042', 'I041', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00J', 1, 'I01A', 1, 'I015', 0, 0, 0, 0, 0, 'I044', 'I043', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I02G', 1, 'I01X', 1, 'I01U', 0, 0, 0, 0, 0, 'I048', 'I047', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I023', 1, 'I00Z', 0, 0, 0, 0, 0, 0, 0, 'I04L', 'I04K', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I03U', 1, 'I00I', 1, 'I00J', 0, 0, 0, 0, 0, 'I04U', 'I04M', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00J', 1, 'I00I', 1, 'I006', 0, 0, 0, 0, 0, 'I04V', 'I00Q', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(2, 'I01K', 0, 0, 0, 0, 0, 0, 0, 0, 0, 'I04X', 'I04W', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I01G', 1, 'I01S', 1, 'I04X', 0, 0, 0, 0, 0, 'I04Z', 'I04Y', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00B', 1, 'I02A', 2, 'I001', 0, 0, 0, 0, 0, 'I02E', 'I01R', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I02E', 1, 'I03N', 1, 'I02A', 0, 0, 0, 0, 0, 'I02N', 'I02M', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I03M', 1, 'I02U', 1, 'I03G', 0, 0, 0, 0, 0, 'I051', 'I050', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I02F', 1, 'I03Q', 1, 'I00B', 0, 0, 0, 0, 0, 'I02T', 'I02D', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I01T', 2, 'I00N', 1, 'I015', 0, 0, 0, 0, 0, 'I052', 'I03H', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I052', 0, 0, 0, 0, 0, 0, 0, 0, 1, 'I053', 'I03H', "");
	SaveInteger(udg_hash, 'I03H', 0, 1);
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I015', 1, 'I001', 1, 'I00E', 0, 0, 0, 0, 0, 'I055', 'I054', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I055', 0, 0, 0, 0, 0, 0, 0, 0, 1, 'I056', 'I054', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I056', 0, 0, 0, 0, 0, 0, 0, 0, 2, 'I057', 'I054', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I057', 0, 0, 0, 0, 0, 0, 0, 0, 3, 'I058', 'I054', "");
	SaveInteger(udg_hash, 'I054', 0, 3);
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I04X', 1, 'I03S', 1, 'I00I', 0, 0, 0, 0, 0, 'I05A', 'I059', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(2, 'I00D', 1, 'I00F', 0, 0, 0, 0, 0, 0, 0, 'I006', 'I005', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I036', 1, 'I006', 1, 'I026', 0, 0, 0, 0, 0, 'I008', 'I007', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I008', 0, 0, 0, 0, 0, 0, 0, 0, 1, 'I009', 'I007', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I009', 0, 0, 0, 0, 0, 0, 0, 0, 2, 'I00L', 'I007', "");
	SaveInteger(udg_hash, 'I007', 0, 2);
	Trig_LinkItemsInitAddItemToSystem_Actions(2, 'I022', 1, 'I00F', 0, 0, 0, 0, 0, 0, 0, 'I00S', 'I00R', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I044', 1, 'I00S', 1, 'I01A', 0, 0, 0, 0, 0, 'I00T', 'I00M', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I004', 0, 0, 0, 0, 0, 0, 0, 0, 0, 'I00V', 'I00U', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I01T', 1, 'I00D', 1, 'I001', 1, 'I00E', 0, 0, 0, 'I00X', 'I00W', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I042', 1, 'I03Q', 1, 'I022', 0, 0, 0, 0, 0, 'I012', 'I011', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I003', 1, 'I001', 0, 0, 0, 0, 0, 0, 0, 'I01C', 'I019', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00S', 1, 'I03G', 1, 'I006', 0, 0, 0, 0, 0, 'I01W', 'I01P', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I02U', 1, 'I03Y', 0, 0, 0, 0, 0, 0, 0, 'I02H', 'I029', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I01G', 1, 'I03U', 0, 0, 0, 0, 0, 0, 0, 'I02P', 'I02L', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(2, 'I00E', 1, 'I01T', 0, 0, 0, 0, 0, 0, 0, 'I02R', 'I02Q', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I02R', 0, 0, 0, 0, 0, 0, 0, 0, 1, 'I02S', 'I02Q', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I02S', 0, 0, 0, 0, 0, 0, 0, 0, 2, 'I02W', 'I02Q', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I02W', 0, 0, 0, 0, 0, 0, 0, 0, 3, 'I02X', 'I02Q', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I02X', 0, 0, 0, 0, 0, 0, 0, 0, 4, 'I02Y', 'I02Q', "");
	SaveInteger(udg_hash, 'I02Q', 0, 4);
}
nothing InitTrig_LinkItemsInit() {
	TriggerRegisterTimerEvent(gg_trg_LinkItemsInit, 6., false);
	TriggerAddAction(gg_trg_LinkItemsInit, Trig_LinkItemsInit_Actions);
}
nothing Trig_ItemPickedUp_Actions() {
	item it = GetManipulatedItem();
	integer id = GetItemTypeId(it);
	integer itemlevel;
	integer h;
	integer lopa;
	if (GetItemType(it) == ITEM_TYPE_POWERUP && id != 'I03A' && id != 'I03B' && id != 'I013' && id != 'I014' && id != 'I016' && id != 'I017') {
		if ((id == 'I035') || (id == 'I00P') || (id == 'I03O')) {
			RemoveItem(it);
			SimError(GetOwningPlayer(GetTriggerUnit()), "Для покупки это предмета не нужен рецепт!");
		else
			while (true) {
				if ((itemlevel < lopa) || (udg_Integer_Item_Recipe_Level < 0)) break;
				LinkItems(LoadInteger(udg_hash, id, h + 1), LoadInteger(udg_hash, id, h + 2), LoadInteger(udg_hash, id, h + 3), LoadInteger(udg_hash, id, h + 4), LoadInteger(udg_hash, id, h + 5), LoadInteger(udg_hash, id, h + 6), LoadInteger(udg_hash, id, h + 7), LoadInteger(udg_hash, id, h + 8), LoadInteger(udg_hash, id, h + 9), LoadInteger(udg_hash, id, h + $A), LoadInteger(udg_hash, id, h + $B), LoadStr(udg_hash, id, h + $C), true);
			}
		}
	else
		if (id != 'I03A' && id != 'I03B' && id != 'I013' && id != 'I014' && id != 'I016' && id != 'I017' && id != 'I01Y') {
			LinkItems(1, 'I01U', 1, 'I01K', 1, 'I004', 0, 0, 0, 0, 'I01S', "", false);
			LinkItems(2, 'I00F', 1, 'I00E', 0, 0, 0, 0, 0, 0, 'I00J', "", false);
			LinkItems(1, 'I02A', 1, 'I00H', 1, 'I021', 0, 0, 0, 0, 'I03N', "", false);
		}
	}
}
nothing InitTrig_ItemPickedUp() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_ItemPickedUp, Player(index), EVENT_PLAYER_UNIT_PICKUP_ITEM, null);
		if (index == 16) break;
	}
	TriggerAddAction(gg_trg_ItemPickedUp, Trig_ItemPickedUp_Actions);
}
boolean Trig_ChargesConnecting_Func002C() {
	return (GetItemTypeId(GetManipulatedItem()) != 'I055') && (GetItemTypeId(GetManipulatedItem()) != 'I056') && (GetItemTypeId(GetManipulatedItem()) != 'I057') && (GetItemTypeId(GetManipulatedItem()) != 'I058');
}
boolean Trig_ChargesConnecting_Conditions() {
	return (GetItemCharges(GetManipulatedItem()) > 0) && (Trig_ChargesConnecting_Func002C());
}
boolean Trig_ChargesConnecting_Func005C() {
	return (UnitHasItemOfTypeBJ(GetManipulatingUnit(), GetItemTypeId(GetManipulatedItem())) == false);
}
nothing Trig_ChargesConnecting_Actions() {
	UnitRemoveItemSwapped(GetManipulatedItem(), GetManipulatingUnit());
	if ((Trig_ChargesConnecting_Func005C())) {
		CreateItemLoc(GetItemTypeId(GetManipulatedItem()), GetUnitLoc(GetManipulatingUnit()));
		DisableTrigger(GetTriggeringTrigger());
		UnitAddItem(GetManipulatingUnit(), bj_lastCreatedItem);
		EnableTrigger(GetTriggeringTrigger());
		SetItemCharges(bj_lastCreatedItem, GetItemCharges(GetManipulatedItem()));
	else
		SetItemCharges(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(), GetItemTypeId(GetManipulatedItem())), (GetItemCharges(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(), GetItemTypeId(GetManipulatedItem()))) + GetItemCharges(GetManipulatedItem())));
	}
	RemoveItem(GetManipulatedItem());
}
nothing InitTrig_ChargesConnecting() {
	TriggerRegisterAnyUnitEventBJ(gg_trg_ChargesConnecting, EVENT_PLAYER_UNIT_PICKUP_ITEM);
	TriggerAddCondition(gg_trg_ChargesConnecting, Condition(Trig_ChargesConnecting_Conditions));
	TriggerAddAction(gg_trg_ChargesConnecting, Trig_ChargesConnecting_Actions);
}
boolean Trig_Remove_Dammi_Items_Func003C() {
	return (GetItemTypeId(GetManipulatedItem()) == 'I035');
}
boolean Trig_Remove_Dammi_Items_Conditions() {
	return (Trig_Remove_Dammi_Items_Func003C());
}
nothing Trig_Remove_Dammi_Items_Actions() {
	RemoveItem(GetManipulatedItem());
	SimError(GetOwningPlayer(GetTriggerUnit()), "Для покупки это предмета не нужен рецепт!");
}
nothing InitTrig_Remove_Dammi_Items() {
	DisableTrigger(gg_trg_Remove_Dammi_Items);
	TriggerRegisterAnyUnitEventBJ(gg_trg_Remove_Dammi_Items, EVENT_PLAYER_UNIT_PICKUP_ITEM);
	TriggerAddCondition(gg_trg_Remove_Dammi_Items, Condition(Trig_Remove_Dammi_Items_Conditions));
	TriggerAddAction(gg_trg_Remove_Dammi_Items, Trig_Remove_Dammi_Items_Actions);
}
nothing Trig_Save_Items_Cost_Actions() {
	SaveInteger(udg_hash, 'I00I', 'x', $3ED);
	SaveInteger(udg_hash, 'I01G', 'x', $D0C);
	SaveInteger(udg_hash, 'I03W', 'x', $D70);
	SaveInteger(udg_hash, 'I036', 'x', $546);
	SaveInteger(udg_hash, 'I05A', 'x', 5150);
	SaveInteger(udg_hash, 'I04Z', 'x', 8100);
	SaveInteger(udg_hash, 'I01U', 'x', $67C);
	SaveInteger(udg_hash, 'I03U', 'x', $7DF);
	SaveInteger(udg_hash, 'I02J', 'x', $4E2);
	SaveInteger(udg_hash, 'I01B', 'x', $60E);
	SaveInteger(udg_hash, 'I01X', 'x', $73A);
	SaveInteger(udg_hash, 'I052', 'x', $596);
	SaveInteger(udg_hash, 'I053', 'x', $6C2);
	SaveInteger(udg_hash, 'I051', 'x', 8710);
	SaveInteger(udg_hash, 'I03Q', 'x', $654);
	SaveInteger(udg_hash, 'I048', 'x', 9815);
	SaveInteger(udg_hash, 'I00G', 'x', $7A8);
	SaveInteger(udg_hash, 'I01Q', 'x', $9CE);
	SaveInteger(udg_hash, 'I01V', 'x', $BF4);
	SaveInteger(udg_hash, 'I02N', 'x', 4900);
	SaveInteger(udg_hash, 'I03N', 'x', $465);
	SaveInteger(udg_hash, 'I042', 'x', $979);
	SaveInteger(udg_hash, 'I03S', 'x', $712);
	SaveInteger(udg_hash, 'I02U', 'x', $6AE);
	SaveInteger(udg_hash, 'I00C', 'x', $D5C);
	SaveInteger(udg_hash, 'I00A', 'x', $5C3);
	SaveInteger(udg_hash, 'I04V', 'x', 4100);
	SaveInteger(udg_hash, 'I044', 'x', $AB4);
	SaveInteger(udg_hash, 'I00J', 'x', 980);
	SaveInteger(udg_hash, 'I03G', 'x', $5AA);
	SaveInteger(udg_hash, 'I04L', 'x', 925);
	SaveInteger(udg_hash, 'I02I', 'x', 765);
	SaveInteger(udg_hash, 'I02T', 'x', 7000);
	SaveInteger(udg_hash, 'I04U', 'x', 5250);
	SaveInteger(udg_hash, 'I03K', 'x', $A2D);
	SaveInteger(udg_hash, 'I03L', 'x', $E01);
	SaveInteger(udg_hash, 'I03M', 'x', $4FB);
	SaveInteger(udg_hash, 'I04X', 'x', $4FB);
	SaveInteger(udg_hash, 'I055', 'x', $4F6);
	SaveInteger(udg_hash, 'I056', 'x', $686);
	SaveInteger(udg_hash, 'I057', 'x', $816);
	SaveInteger(udg_hash, 'I058', 'x', $9A6);
	SaveInteger(udg_hash, 'I02E', 'x', $834);
	SaveInteger(udg_hash, 'I02F', 'x', $AB9);
	SaveInteger(udg_hash, 'I01S', 'x', $875);
	SaveInteger(udg_hash, 'I03Y', 'x', 955);
	SaveInteger(udg_hash, 'I02G', 'x', 4805);
	SaveInteger(udg_hash, 'I00D', 'x', 275);
	SaveInteger(udg_hash, 'I022', 'x', 350);
	SaveInteger(udg_hash, 'I00N', 'x', $C8);
	SaveInteger(udg_hash, 'I027', 'x', 450);
	SaveInteger(udg_hash, 'I003', 'x', 475);
	SaveInteger(udg_hash, 'I026', 'x', 425);
	SaveInteger(udg_hash, 'I004', 'x', '}');
	SaveInteger(udg_hash, 'I001', 'x', 260);
	SaveInteger(udg_hash, 'I01K', 'x', 380);
	SaveInteger(udg_hash, 'I00H', 'x', 375);
	SaveInteger(udg_hash, 'I00Y', 'x', 650);
	SaveInteger(udg_hash, 'I00E', 'x', $E6);
	SaveInteger(udg_hash, 'I02C', 'x', 360);
	SaveInteger(udg_hash, 'I01A', 'x', 500);
	SaveInteger(udg_hash, 'I02A', 'x', 350);
	SaveInteger(udg_hash, 'I015', 'x', 380);
	SaveInteger(udg_hash, 'I00Z', 'x', 300);
	SaveInteger(udg_hash, 'I00F', 'x', 375);
	SaveInteger(udg_hash, 'I021', 'x', 400);
	SaveInteger(udg_hash, 'I023', 'x', $E1);
	SaveInteger(udg_hash, 'I00B', 'x', 600);
	SaveInteger(udg_hash, 'I01T', 'x', 350);
	SaveInteger(udg_hash, 'I006', 'x', $465);
	SaveInteger(udg_hash, 'I008', 'x', $ED8);
	SaveInteger(udg_hash, 'I009', 'x', 4700);
	SaveInteger(udg_hash, 'I00L', 'x', 5600);
	SaveInteger(udg_hash, 'I00S', 'x', $555);
	SaveInteger(udg_hash, 'I00T', 'x', 5655);
	SaveInteger(udg_hash, 'I00V', 'x', 475);
	SaveInteger(udg_hash, 'I00X', 'x', $514);
	SaveInteger(udg_hash, 'I012', 'x', 5595);
	SaveInteger(udg_hash, 'I01C', 'x', 860);
	SaveInteger(udg_hash, 'I01W', 'x', 4500);
	SaveInteger(udg_hash, 'I02H', 'x', $C1C);
	SaveInteger(udg_hash, 'I02P', 'x', 6300);
	SaveInteger(udg_hash, 'I02R', 'x', $51E);
	SaveInteger(udg_hash, 'I02S', 'x', $712);
	SaveInteger(udg_hash, 'I02W', 'x', $906);
	SaveInteger(udg_hash, 'I02X', 'x', $AFA);
	SaveInteger(udg_hash, 'I02Y', 'x', $CEE);
	SaveInteger(udg_hash, 'I030', 'x', $708);
}
nothing InitTrig_Save_Items_Cost() {
	TriggerRegisterTimerEvent(gg_trg_Save_Items_Cost, 10., false);
	TriggerAddAction(gg_trg_Save_Items_Cost, Trig_Save_Items_Cost_Actions);
}
nothing Trig_IceBoss_onbase_Actions() {
	timer tonbase = GetExpiredTimer();
	integer honbase = GetHandleId(tonbase);
	integer ishod = LoadInteger(udg_hash, honbase, 3);
	unit boss = LoadUnitHandle(udg_hash, honbase, 1);
	group gruppa = CreateGroup();
	unit Picked;
	real xc = GetRectCenterX(gg_rct_Respawn_Heroes);
	real yc = GetRectCenterY(gg_rct_Respawn_Heroes);
	fogmodifier fm = LoadFogModifierHandle(udg_hash, honbase, 2);
	texttag txt;
	real vel = .0221875;
	real angle = 45. + GetRandomReal(.0, 90.);
	real xvel = vel * Cos(angle * bj_DEGTORAD);
	real yvel = vel * Sin(angle * bj_DEGTORAD);
	integer dead = 0;
	real perekluchatel = .1;
	ShowAndFlushAllPlayerDamage(false);
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
	CinematicModeExBJ(false, bj_FORCE_ALL_PLAYERS, bj_CINEMODE_INTERFACEFADE);
	CinematicFadeBJ(0, 5., "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0);
	while (true) {
		if (Picked == null) break;
		if (perekluchatel >= 0) {
		else
		}
		ReviveHero(Picked, xc, yc, true);
		SetUnitPosition(Picked, xc, yc);
		SetUnitFacing(Picked, 270.);
		SetUnitState(Picked, UNIT_STATE_LIFE, $540BE3FF);
		SetUnitState(Picked, UNIT_STATE_MANA, $540BE3FF);
		if (ishod == 0) {
			if (dead == 1) {
				SetTextTagText(txt, "|cFFFFFF00+850|r", .035);
				AddHeroXP(Picked, $6A4, true);
				SetPlayerState(GetOwningPlayer(Picked), PLAYER_STATE_RESOURCE_GOLD, (GetPlayerState(GetOwningPlayer(Picked), PLAYER_STATE_RESOURCE_GOLD) + 750));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl", Picked, "overhead"));
				if (GetLocalPlayer() == GetOwningPlayer(Picked)) {
					DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Вы получили " + udg_ColorString[23] + I2S(850) + " золота|r!!!");
				}
			else
				SetTextTagText(txt, "|cFFFFFF00+2600|r", .045);
				AddHeroXP(Picked, 5500, true);
				SetPlayerState(GetOwningPlayer(Picked), PLAYER_STATE_RESOURCE_GOLD, (GetPlayerState(GetOwningPlayer(Picked), PLAYER_STATE_RESOURCE_GOLD) + $708));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl", Picked, "overhead"));
				if (GetLocalPlayer() == GetOwningPlayer(Picked)) {
					DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Вы получили " + udg_ColorString[23] + I2S($A28) + " золота|r!!!");
				}
			}
			SetTextTagPos(txt, GetUnitX(Picked), GetUnitY(Picked), .0);
			SetTextTagColor(txt, 0, 0, 0, 50);
			SetTextTagVelocity(txt, xvel, yvel);
			SetTextTagPermanent(txt, false);
			SetTextTagLifespan(txt, 4.);
			SetTextTagFadepoint(txt, .0);
		}
		if ((GetLocalPlayer() == GetOwningPlayer(Picked))) {
			ResetToGameCamera(.0);
			if (ishod == 1) {
				DisplayTextToPlayer(GetOwningPlayer(Picked), 0, 0, "|cFFFF0000ВЫ ПРОИГРАЛИ БИТВУ С БОССОМ!!!|r");
			else
				DisplayTextToPlayer(GetOwningPlayer(Picked), 0, 0, "|cFFFFFF00ВЫ ПОБЕДИЛИ В БИТВЕ С БОССОМ!!!|r");
			}
			ResetToGameCamera(.0);
			PanCameraToTimed(xc, yc, .0);
			SelectUnit(Picked, true);
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	EnableTrigger(gg_trg_Hero_Dead);
	GroupEnumUnitsInRect(gruppa, gg_rct_6, null);
	while (true) {
		if (Picked == null) break;
		if (GetUnitTypeId(Picked) != 'h00C' && GetUnitTypeId(Picked) != 'h00B' && GetUnitTypeId(Picked) != 'h00U') {
			RemoveUnit(Picked);
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	if (TriggerEvaluate(gg_trg_GameEndWin)) {
		TriggerExecute(gg_trg_GameEndWin);
	}
	RemoveWeatherEffect(udg_BossFightWeather);
	FlushChildHashtable(udg_hash, GetHandleId(boss));
	RemoveUnit(boss);
	DestroyFogModifier(fm);
	DestroyGroup(gruppa);
	FlushChildHashtable(udg_hash, honbase);
	DestroyTimer(tonbase);
}
nothing Trig_IceBoss_end_Actions() {
	timer tend = GetExpiredTimer();
	integer hend = GetHandleId(tend);
	unit boss = LoadUnitHandle(udg_hash, hend, 1);
	fogmodifier fm = CreateFogModifierRect(Player(0), FOG_OF_WAR_VISIBLE, gg_rct_6, true, true);
	integer lop = 0;
	integer ishod = LoadInteger(udg_hash, hend, 2);
	timer tonbase = CreateTimer();
	integer honbase = GetHandleId(tonbase);
	group g = CreateGroup();
	unit Picked;
	SaveUnitHandle(udg_hash, honbase, 1, boss);
	SaveFogModifierHandle(udg_hash, honbase, 2, fm);
	SaveInteger(udg_hash, honbase, 3, ishod);
	GroupEnumUnitsInRect(g, gg_rct_6, null);
	while (true) {
		if (lop > 9) break;
		if ((GetLocalPlayer() == Player(lop))) {
			CameraSetupApplyForceDuration(gg_cam_Camera_BossFightStart, true, .0);
			SetCameraRotateMode(GetRectCenterX(gg_rct_6), GetRectCenterY(gg_rct_6), bj_DEGTORAD * 360., 6.);
		}
	}
	TimerStart(tonbase, 6., false, Trig_IceBoss_onbase_Actions);
	if (ishod == 1) {
		IssuePointOrderById(boss, $D0012, GetRectCenterX(gg_rct_6), GetRectCenterY(gg_rct_6));
	else
		while (true) {
			if (Picked == null) break;
			if (GetOwningPlayer(Picked) == Player($B)) {
				KillUnit(Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
	}
	CinematicModeExBJ(true, bj_FORCE_ALL_PLAYERS, bj_CINEMODE_INTERFACEFADE);
	CinematicFadeBJ(1, 6., "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1);
	FlushChildHashtable(udg_hash, hend);
	DestroyTimer(tend);
	DestroyGroup(g);
}
nothing Trig_IceBoss_ActionWithWait_Actions() {
	timer twact = GetExpiredTimer();
	integer hwact = GetHandleId(twact);
	unit boss = LoadUnitHandle(udg_hash, hwact, 1);
	IssueImmediateOrderById(boss, $D00FC);
	DestroyTimer(twact);
	FlushChildHashtable(udg_hash, hwact);
}
nothing Trig_IceBoss_No_zaniat_Actions() {
	timer t = GetExpiredTimer();
	unit boss = LoadUnitHandle(udg_hash, GetHandleId(t), 1);
	boolean zaniat = LoadBoolean(udg_hash, GetHandleId(boss), $A);
	SaveBoolean(udg_hash, GetHandleId(boss), $A, zaniat);
	FlushChildHashtable(udg_hash, GetHandleId(t));
}
nothing Trig_IceBoss_hpcheck_Actions() {
	real xc = GetRectCenterX(gg_rct_6);
	real yc = GetRectCenterY(gg_rct_6);
	timer thpcheck = GetExpiredTimer();
	integer hhpcheck = GetHandleId(thpcheck);
	unit boss = LoadUnitHandle(udg_hash, hhpcheck, 1);
	integer stage = LoadInteger(udg_hash, hhpcheck, 2);
	integer dammicheck = LoadInteger(udg_hash, hhpcheck, 4);
	real dx = GetUnitX(boss) - xc;
	real dy = GetUnitY(boss) - yc;
	timer twact = CreateTimer();
	integer hwact = GetHandleId(twact);
	timer taltars;
	boolean zaniat = LoadBoolean(udg_hash, GetHandleId(boss), $A);
	integer cdwall = LoadInteger(udg_hash, GetHandleId(boss), 41);
	integer cdstorm = LoadInteger(udg_hash, GetHandleId(boss), 42);
	integer cdrain = LoadInteger(udg_hash, GetHandleId(boss), 43);
	integer cdpunishment = LoadInteger(udg_hash, GetHandleId(boss), 44);
	integer cdblink = LoadInteger(udg_hash, GetHandleId(boss), 45);
	group grp = CreateGroup();
	timer tcd;
	timer tgol;
	group heroes = CreateGroup();
	unit Picked;
	integer kolvo = 0;
	integer random = GetRandomInt(1, 4);
	real dist;
	timer tend;
	integer hend;
	integer ishod = 0;
	effect ef;
	player p = Player($C);
	integer itemrand = R2I($F + 5 * CountPlayersInForceBJ(udg_IGRAET));
	real itemx = (GetRandomReal(-1350., 100.));
	real itemy = (GetRandomReal(1900., 3450.));
	unit dammi;
	group geroi = CreateGroup();
	if (GetRandomInt(1, 'd') <= itemrand) {
		CreatePotion(itemx, itemy, 3, 6);
	}
	if ((zaniat == false && stage == 0 && GetUnitState(boss, UNIT_STATE_LIFE) > 140000. && GetUnitState(boss, UNIT_STATE_LIFE) < 120000.) || (stage == 1 && GetUnitState(boss, UNIT_STATE_LIFE) > 100000. && GetUnitState(boss, UNIT_STATE_LIFE) < 75000.) || (stage == 2 && GetUnitState(boss, UNIT_STATE_LIFE) > 30000. && GetUnitState(boss, UNIT_STATE_LIFE) < 5000.)) {
		SaveBoolean(udg_hash, GetHandleId(boss), $A, zaniat);
		SaveInteger(udg_hash, hhpcheck, 2, stage);
		SaveUnitHandle(udg_hash, hwact, 1, boss);
		if (SquareRoot(dx * dx + dy * dy) > 500) {
			IssuePointOrderById(boss, $D0012, xc + GetRandomReal(-250., 250.), yc + GetRandomReal(-250., 250.));
			SetUnitPathing(boss, false);
			TimerStart(twact, 4., false, Trig_IceBoss_ActionWithWait_Actions);
		else
			TimerStart(twact, .25, false, Trig_IceBoss_ActionWithWait_Actions);
		}
	}
	if (cdwall > 0) {
		SaveInteger(udg_hash, GetHandleId(boss), 41, cdwall - 1);
	}
	if (cdstorm > 0) {
		SaveInteger(udg_hash, GetHandleId(boss), 42, cdstorm - 1);
	}
	if (cdrain > 0) {
		SaveInteger(udg_hash, GetHandleId(boss), 43, cdrain - 1);
	}
	if (cdpunishment > 0) {
		SaveInteger(udg_hash, GetHandleId(boss), 44, cdpunishment - 1);
	}
	if (cdblink > 0) {
		SaveInteger(udg_hash, GetHandleId(boss), 45, cdblink - 1);
	}
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, geroi);
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, grp);
	while (true) {
		if (Picked == null) break;
		if (IsUnitType(Picked, UNIT_TYPE_HERO) && Picked != boss && GetUnitState(Picked, UNIT_STATE_LIFE) > .405) {
			GroupAddUnit(heroes, Picked);
		}
		GroupRemoveUnit(grp, Picked);
	}
	FilterMostNearUnit(heroes, boss);
	AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodSorceress.mdl", udg_Unit_FilterMostNearUnit, "chest");
	if (dammicheck == 8 || dammicheck == 16) {
		UnitApplyTimedLife(dammi, 'BTLF', 7.);
		UnitAddAbility(dammi, 'A04H');
		IssuePointOrderById(dammi, $D0079, GetUnitX(udg_Unit_FilterMostNearUnit), GetUnitY(udg_Unit_FilterMostNearUnit));
	}
	if (dammicheck == 18) {
	}
	SaveInteger(udg_hash, hhpcheck, 4, dammicheck);
	if (zaniat == false) {
		if (random == 1 && cdwall <= 0 && udg_Unit_FilterMostNearUnit != null) {
			IssuePointOrderById(boss, $D027A, GetUnitX(udg_Unit_FilterMostNearUnit), GetUnitY(udg_Unit_FilterMostNearUnit));
			SaveInteger(udg_hash, GetHandleId(boss), 41, 16);
		}
		if (random == 2 && SquareRoot(dx * dx + dy * dy) < 700 && cdstorm <= 0) {
			IssueImmediateOrderById(boss, $D0278);
			SaveInteger(udg_hash, GetHandleId(boss), 42, 19);
			SaveBoolean(udg_hash, GetHandleId(boss), $A, zaniat);
			SaveInteger(udg_hash, GetHandleId(boss), $C, 20);
			SaveUnitHandle(udg_hash, GetHandleId(tcd), 1, boss);
			TimerStart(tcd, 3.5, false, Trig_IceBoss_No_zaniat_Actions);
		}
		if (random == 3 && SquareRoot(dx * dx + dy * dy) < 700 && cdrain <= 0) {
			IssuePointOrderById(boss, $D010D, GetUnitX(boss) + $A * Cos(GetUnitFacing(boss) * bj_DEGTORAD), GetUnitY(boss) + $A * Sin(GetUnitFacing(boss) * bj_DEGTORAD));
			SaveInteger(udg_hash, GetHandleId(boss), 43, 22);
			SaveBoolean(udg_hash, GetHandleId(boss), $A, zaniat);
			SaveInteger(udg_hash, GetHandleId(boss), $C, 20);
			SaveUnitHandle(udg_hash, GetHandleId(tcd), 1, boss);
			TimerStart(tcd, 6., false, Trig_IceBoss_No_zaniat_Actions);
		}
		if (random == 4 && cdpunishment <= 0 && udg_Unit_FilterMostNearUnit != null) {
			TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS, boss, "FrostLich the Freezing in Ice", gg_snd_HeroLichYesAttack1, udg_ColorString[GetPlayerId(GetOwningPlayer(udg_Unit_FilterMostNearUnit)) + 1] + GetPlayerName(GetOwningPlayer(udg_Unit_FilterMostNearUnit)) + "|r, |cFFAFE6FFПочувствуй Зов Могилы!!!...|r", 0, 2.2, false);
			SaveInteger(udg_hash, GetHandleId(boss), 44, $C);
			IssueTargetOrderById(boss, $D00DD, udg_Unit_FilterMostNearUnit);
		}
	}
	if (cdblink <= 0 && zaniat == false) {
		SaveInteger(udg_hash, GetHandleId(boss), 45, 25);
		IssuePointOrderById(boss, $D022D, GetUnitX(boss) + dist * Cos(bj_RADTODEG * Atan2(dx, dy) * bj_DEGTORAD), GetUnitY(boss) + dist * Sin(bj_RADTODEG * Atan2(dx, dy) * bj_DEGTORAD));
		DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Shiva'sWrath.mdl", boss, "origin"));
	}
	if (SquareRoot(dx * dx + dy * dy) > $4B0 && zaniat == false) {
		SetUnitPosition(boss, xc, yc);
	}
	GroupClear(heroes);
	if (GetUnitState(boss, UNIT_STATE_LIFE) < .405) {
		SaveInteger(udg_hash, hend, 2, ishod);
		SaveUnitHandle(udg_hash, hend, 1, boss);
		TimerStart(tend, 3., false, Trig_IceBoss_end_Actions);
		FlushChildHashtable(udg_hash, GetHandleId(taltars));
		DestroyTimer(taltars);
		GroupEnumUnitsInRect(heroes, gg_rct_6, null);
		DestroyTimer(thpcheck);
		FlushChildHashtable(udg_hash, hhpcheck);
	}
	GroupClear(heroes);
	while (true) {
		if (Picked == null) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) < .405) {
			SaveInteger(udg_hash, GetHandleId(Picked), 1, 1);
		}
		GroupRemoveUnit(geroi, Picked);
	}
	if (kolvo >= CountUnitsInGroup(udg_Gruppa_HeroUnitov_Geroev)) {
		SaveInteger(udg_hash, hend, 2, ishod + 1);
		SaveUnitHandle(udg_hash, hend, 1, boss);
		FlushChildHashtable(udg_hash, GetHandleId(taltars));
		DestroyTimer(taltars);
		TimerStart(tend, 3., false, Trig_IceBoss_end_Actions);
		DestroyTimer(thpcheck);
		FlushChildHashtable(udg_hash, hhpcheck);
	}
	GroupClear(grp);
	DestroyGroup(grp);
	GroupClear(heroes);
	DestroyGroup(heroes);
	GroupClear(geroi);
	DestroyGroup(geroi);
}
nothing Trig_IceBoss_frasa_Actions() {
	timer tfrasa = GetExpiredTimer();
	integer hfrasa = GetHandleId(tfrasa);
	unit boss = LoadUnitHandle(udg_hash, hfrasa, 1);
	integer random = GetRandomInt(1, 3);
	if (GetUnitState(boss, UNIT_STATE_LIFE) > .405) {
		if (random == 1) {
			TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS, boss, "FrostLich the Freezing in Ice", gg_snd_HeroLichReady1, "|cFFAFE6FFДревнее Зло... Непобедимо!!!|r", 0, 4.37, false);
		}
		if (random == 2) {
			TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS, boss, "FrostLich the Freezing in Ice", gg_snd_HeroLichYesAttack2, "|cFFAFE6FFВо Славу Тьмы!!!..|r", 0, 2.7, false);
		}
		if (random == 3) {
			TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS, boss, "FrostLich the Freezing in Ice", gg_snd_HeroLichYesAttack3, "|cFFAFE6FFИх Ждет Смерть!!!...|r", 0, 2.4, false);
		}
	else
		FlushChildHashtable(udg_hash, hfrasa);
		DestroyTimer(tfrasa);
	}
}
nothing Trig_IceBoss_5sec_Actions() {
	timer t5sec = GetExpiredTimer();
	integer h5sec = GetHandleId(t5sec);
	unit boss = LoadUnitHandle(udg_hash, h5sec, 1);
	group gruppa = CreateGroup();
	unit Picked;
	timer tfrasa = CreateTimer();
	integer hfrasa = GetHandleId(tfrasa);
	timer thpcheck = CreateTimer();
	integer hhpcheck = GetHandleId(thpcheck);
	integer stage = 0;
	timer taltars = CreateTimer();
	boolean zaniat = false;
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
	CinematicModeExBJ(false, bj_FORCE_ALL_PLAYERS, bj_CINEMODE_INTERFACEFADE);
	while (true) {
		if (Picked == null) break;
		PauseUnit(Picked, false);
		IssueTargetOrderById(Picked, $D000F, boss);
		if ((GetLocalPlayer() == GetOwningPlayer(Picked))) {
			ClearSelection();
			SelectUnit(Picked, true);
			ResetToGameCamera(.0);
			PanCameraToTimed(GetRectCenterX(gg_rct_6), GetRectCenterY(gg_rct_6), .0);
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	PauseUnit(boss, false);
	IssuePointOrderById(boss, $D0012, GetRectCenterX(gg_rct_6), GetRectCenterY(gg_rct_6));
	SaveUnitHandle(udg_hash, hfrasa, 1, boss);
	TimerStart(tfrasa, 13., true, Trig_IceBoss_frasa_Actions);
	SaveUnitHandle(udg_hash, hhpcheck, 1, boss);
	SaveInteger(udg_hash, hhpcheck, 2, stage);
	SaveTimerHandle(udg_hash, hhpcheck, 3, taltars);
	SaveBoolean(udg_hash, GetHandleId(boss), $A, zaniat);
	SaveInteger(udg_hash, GetHandleId(boss), 41, 0);
	SaveInteger(udg_hash, GetHandleId(boss), 42, 0);
	SaveInteger(udg_hash, GetHandleId(boss), 43, 0);
	SaveInteger(udg_hash, GetHandleId(boss), 44, 0);
	SaveInteger(udg_hash, GetHandleId(boss), 45, 20);
	SaveInteger(udg_hash, hhpcheck, 4, 0);
	TimerStart(thpcheck, 1., true, Trig_IceBoss_hpcheck_Actions);
	DestroyTimer(t5sec);
	FlushChildHashtable(udg_hash, h5sec);
	GroupClear(gruppa);
	DestroyGroup(gruppa);
}
nothing Trig_IceBoss_3sec_Actions() {
	timer t3sec = GetExpiredTimer();
	integer h3sec = GetHandleId(t3sec);
	timer t5sec = CreateTimer();
	integer h5sec = GetHandleId(t5sec);
	unit boss = LoadUnitHandle(udg_hash, h3sec, 1);
	SaveUnitHandle(udg_hash, h5sec, 1, boss);
	TimerStart(t5sec, 5., false, Trig_IceBoss_5sec_Actions);
	ForceCinematicSubtitles(true);
	TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS, boss, "FrostLich the Freezing in Ice", gg_snd_HeroLichReady1, "|cFFAFE6FFДревнее Зло... Непобедимо!!!|r", 0, 4.75, false);
	DestroyTimer(t3sec);
	FlushChildHashtable(udg_hash, h3sec);
}
nothing Trig_IceBoss_Actions() {
	real xc = GetRectCenterX(gg_rct_6);
	real yc = GetRectCenterY(gg_rct_6);
	real xp = xc - 1216.;
	real yp = yc + 1088.;
	integer random;
	integer end = 1;
	group gruppa = CreateGroup();
	unit Picked;
	real dist = -350;
	unit boss = CreateUnit(Player($B), 'N000', (xc - 500), yc, .0);
	timer t3sec = CreateTimer();
	integer h3sec = GetHandleId(t3sec);
	EnableWeatherEffect(udg_BossFightWeather, true);
	EnableWeatherEffect(udg_BossFightWeather2, true);
	DisableTrigger(gg_trg_Hero_Dead);
	EnableTrigger(gg_trg_Ice_Wall);
	EnableTrigger(gg_trg_Ice_Storm);
	EnableTrigger(gg_trg_Ice_Rain);
	EnableTrigger(gg_trg_Ice_Restoration);
	EnableTrigger(gg_trg_Cold_Punishment);
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
	SetAttackSpeedAbilityLevel(boss, 20 * CountPlayersInForceBJ(udg_IGRAET));
	SetAttackAbilityLevel(boss, 'd' * CountPlayersInForceBJ(udg_IGRAET));
	SetArmorAbilityLevel(boss, $A * CountPlayersInForceBJ(udg_IGRAET));
	CinematicModeExBJ(true, bj_FORCE_ALL_PLAYERS, bj_CINEMODE_INTERFACEFADE);
	CinematicFadeBJ(1, .0, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1);
	CinematicFadeBJ(0, 8.25, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1);
	while (true) {
		if (Picked == null) break;
		SetUnitPosition(Picked, (xc + 500), (yc + dist));
		SetUnitFacing(Picked, bj_RADTODEG * Atan2(yc - GetUnitY(Picked), xc - GetUnitX(Picked)));
		PauseUnit(Picked, true);
		ClearSelection();
		if ((GetLocalPlayer() == GetOwningPlayer(Picked))) {
			CameraSetupApplyForceDuration(gg_cam_Camera_BossFightStart, true, .0);
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	SetHeroLevel(boss, 50, false);
	UnitAddAbility(boss, 'A00K');
	UnitAddAbility(boss, 'A03K');
	UnitAddAbility(boss, 'A03P');
	UnitAddAbility(boss, 'A043');
	UnitAddAbility(boss, 'A04B');
	UnitAddAbility(boss, 'A04D');
	PauseUnit(boss, true);
	SaveUnitHandle(udg_hash, h3sec, 1, boss);
	TimerStart(t3sec, 3., false, Trig_IceBoss_3sec_Actions);
	ShowAndFlushAllPlayerDamage(true);
	TimerStart(udg_TimerShowAndFlushAllPlayerDmg, 10000., false, null);
	while (true) {
		if (end > 16) break;
		while (true) {
			if (bj_forLoopAIndex > 20) break;
			if (random >= 1 && random <= 3) {
				SetTerrainType(xp, yp, 'Idki', -1, 2, 1);
			else
				if (random >= 4 && random <= 7) {
					SetTerrainType(xp, yp, 'Iice', -1, 2, 1);
				else
					SetTerrainType(xp, yp, 'Nice', -1, 2, 1);
				}
			}
		}
	}
	GroupClear(gruppa);
	DestroyGroup(gruppa);
}
nothing InitTrig_Ice_Boss() {
	TriggerAddAction(gg_trg_Ice_Boss, Trig_IceBoss_Actions);
}
nothing Trig_Ice_Wall_Periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	integer wait = LoadInteger(udg_hash, h, 2);
	real damage = LoadReal(udg_hash, h, 3);
	group gdamage = CreateGroup();
	group gdamage2 = CreateGroup();
	unit Picked;
	player p = GetOwningPlayer(caster);
	effect ef;
	integer lopa = 1;
	unit dammi;
	if (wait > 0) {
		SaveInteger(udg_hash, h, 2, wait);
		while (true) {
			if (lopa > 20) break;
			GroupEnumUnitsInRange(gdamage, GetUnitX(dammi), GetUnitY(dammi), 140., null);
			GroupAddGroup(gdamage, gdamage2);
		}
		while (true) {
			if (Picked == null) break;
			if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, p) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				UnitDamageTarget(caster, Picked, (damage / 10.), false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				if ((wait - (wait / $A) * $A) == 0) {
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIob\\AIobSpecialArt.mdl", Picked, "origin"));
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratFrostMissile\\ZigguratFrostMissile.mdl", Picked, "chest"));
				}
				if (GetUnitAbilityLevel(Picked, 'B008') <= 0) {
					UnitApplyTimedLife(dammi, 'BTLF', 2.);
					UnitAddAbility(dammi, 'A03M');
					IssueTargetOrderById(dammi, $D006B, Picked);
				}
			}
			if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitType(Picked, UNIT_TYPE_HERO) == false && IsUnitAlly(Picked, p) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				if (GetUnitAbilityLevel(Picked, 'B009') <= 0) {
					UnitApplyTimedLife(dammi, 'BTLF', 2.);
					UnitAddAbility(dammi, 'A03I');
					SetUnitAbilityLevel(dammi, 'A03I', 1);
					IssueTargetOrderById(dammi, $D0101, Picked);
				}
			}
			GroupRemoveUnit(gdamage2, Picked);
		}
	else
		while (true) {
			if (lopa > 20) break;
			KillUnit(dammi);
			DestroyEffect(ef);
		}
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	GroupClear(gdamage);
	DestroyGroup(gdamage);
	GroupClear(gdamage2);
	DestroyGroup(gdamage2);
}
nothing Trig_Ice_Wall_Actions() {
	unit caster = GetSpellAbilityUnit();
	location loc;
	real xt;
	real yt;
	unit target = GetSpellTargetUnit();
	real angle;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	integer wait = 'x';
	real damage = 150.;
	integer lopa = 1;
	integer lopb = 1;
	unit dammi;
	effect ef;
	player p = GetOwningPlayer(caster);
	real random;
	if (target != null) {
	else
	}
	while (true) {
		if (lopb > 2) break;
		while (true) {
			if (lopa > $A) break;
			SetUnitScale(dammi, random, random, random);
			SaveUnitHandle(udg_hash, h, $A + lopa + ($A * (lopb - 1)), dammi);
			SaveEffectHandle(udg_hash, h, 40 + lopa + ($A * (lopb - 1)), ef);
		}
	}
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveInteger(udg_hash, h, 2, wait);
	SaveReal(udg_hash, h, 3, damage);
	TimerStart(t, .1, true, Trig_Ice_Wall_Periodic_Actions);
	RemoveLocation(loc);
}
boolean Trig_Ice_Wall_Conditions() {
	return GetSpellAbilityId() == 'A03K';
}
nothing InitTrig_Ice_Wall() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Ice_Wall, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Ice_Wall, Condition(Trig_Ice_Wall_Conditions));
	TriggerAddAction(gg_trg_Ice_Wall, Trig_Ice_Wall_Actions);
}
nothing Trig_Ice_Storm_Periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	real x = LoadReal(udg_hash, h, 2);
	real y = LoadReal(udg_hash, h, 3);
	integer wait = LoadInteger(udg_hash, h, 4);
	real damage = LoadReal(udg_hash, h, 5);
	real angle = LoadReal(udg_hash, h, 6);
	group gdamage = CreateGroup();
	unit Picked;
	player p = GetOwningPlayer(caster);
	unit dammi;
	integer order = GetUnitCurrentOrder(caster);
	integer orderId;
	real dist;
	real xt;
	real yt;
	if ((orderId != 0)) {
	else
		if ((orderId != 0)) {
		}
	}
	if (order == orderId && wait > 0) {
		SaveInteger(udg_hash, h, 4, wait);
		SaveReal(udg_hash, h, 6, angle);
		GroupEnumUnitsInRange(gdamage, xt, yt, 200., null);
		DestroyEffect(AddSpecialEffect("war3mapImported\\Shiva'sWrath.mdl", xt, yt));
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl", dammi, "origin"));
		while (true) {
			if (Picked == null) break;
			if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, p) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				UnitApplyTimedLife(dammi, 'BTLF', 2.);
				UnitAddAbility(dammi, 'A039');
				SetUnitAbilityLevel(dammi, 'A039', 1);
				IssueTargetOrderById(dammi, $D00CB, Picked);
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl", Picked, "origin"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIob\\AIobSpecialArt.mdl", Picked, "origin"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratFrostMissile\\ZigguratFrostMissile.mdl", Picked, "chest"));
			}
			GroupRemoveUnit(gdamage, Picked);
		}
	else
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	GroupClear(gdamage);
	DestroyGroup(gdamage);
}
nothing Trig_Ice_Storm_Actions() {
	unit caster = GetSpellAbilityUnit();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	integer wait = 6;
	real damage = 350;
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 2, x);
	SaveReal(udg_hash, h, 3, y);
	SaveInteger(udg_hash, h, 4, wait);
	SaveReal(udg_hash, h, 5, damage);
	SaveReal(udg_hash, h, 6, GetUnitFacing(caster));
	TimerStart(t, .5, true, Trig_Ice_Storm_Periodic_Actions);
}
boolean Trig_Ice_Storm_Conditions() {
	return GetSpellAbilityId() == 'A03P';
}
nothing InitTrig_Ice_Storm() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Ice_Storm, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Ice_Storm, Condition(Trig_Ice_Storm_Conditions));
	TriggerAddAction(gg_trg_Ice_Storm, Trig_Ice_Storm_Actions);
}
boolean Trig_Ice_Rain_Filter_Actions() {
	return (GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405 && IsUnitEnemy(GetFilterUnit(), udg_Temp_Player[1]) && IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) == false && IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(GetFilterUnit()) != 'h00U') != null;
}
nothing Trig_Ice_Rain_Periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	integer wait = LoadInteger(udg_hash, h, 2);
	real damage = LoadReal(udg_hash, h, 3);
	real xt = LoadReal(udg_hash, h, 4);
	real yt = LoadReal(udg_hash, h, 5);
	real angle = LoadReal(udg_hash, h, 6);
	group gmissile = LoadGroupHandle(udg_hash, h, 7);
	integer waitcreate = LoadInteger(udg_hash, h, 8);
	group gmissile2 = CreateGroup();
	group gdamage;
	group gdamage2 = CreateGroup();
	unit Picked;
	unit Picked2;
	unit missile;
	real xmissile;
	real ymissile;
	integer hmissile;
	integer missileflywait;
	real anglemissile;
	player p = GetOwningPlayer(caster);
	effect ef;
	boolean stop;
	integer order = GetUnitCurrentOrder(caster);
	integer orderId;
	if ((orderId != 0)) {
	else
		if ((orderId != 0)) {
		}
	}
	if (order == orderId && wait > 0) {
		SaveInteger(udg_hash, h, 2, wait);
		if (waitcreate > 0) {
			SaveInteger(udg_hash, h, 8, waitcreate);
			UnitAddAbility(missile, 'Amrf');
			UnitRemoveAbility(missile, 'Amrf');
			SetUnitFlyHeight(missile, 50., .0);
			SaveInteger(udg_hash, hmissile, 1, 0);
			SaveEffectHandle(udg_hash, hmissile, 2, ef);
			SaveStr(udg_hash, hmissile, 3, "Im missile");
			GroupAddUnit(gmissile, missile);
			SaveGroupHandle(udg_hash, h, 7, gmissile);
		}
		GroupAddGroup(gmissile, gmissile2);
		while (true) {
			if (missile == null) break;
			GroupEnumUnitsInRange(gdamage, xmissile, ymissile, 100., Filter(Trig_Ice_Rain_Filter_Actions));
			GroupAddGroup(gdamage, gdamage2);
			GroupClear(gdamage);
			DestroyGroup(gdamage);
			if (IsTerrainPathable(xmissile, ymissile, PATHING_TYPE_FLYABILITY) == false) {
				SetUnitPosition(missile, xmissile, ymissile);
			}
			if (missileflywait >= 30) {
				KillUnit(missile);
				GroupRemoveUnit(gmissile, missile);
				SaveGroupHandle(udg_hash, h, 7, gmissile);
				DestroyEffect(ef);
				FlushChildHashtable(udg_hash, hmissile);
			else
				SaveInteger(udg_hash, hmissile, 1, missileflywait + 1);
			}
			GroupRemoveUnit(gmissile2, missile);
		}
		while (true) {
			if (Picked == null) break;
			GroupEnumUnitsInRange(gdamage, GetUnitX(Picked), GetUnitY(Picked), 100., null);
			while (true) {
				if (Picked2 == null || stop) break;
				if (GetUnitState(Picked2, UNIT_STATE_LIFE) > .405 && GetOwningPlayer(Picked2) == p && GetUnitTypeId(Picked2) == 'h00U' && LoadStr(udg_hash, GetHandleId(Picked2), 3) == "Im missile") {
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIob\\AIobSpecialArt.mdl", Picked, "origin"));
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratFrostMissile\\ZigguratFrostMissile.mdl", Picked, "chest"));
					UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
					StunUnitTimed(Picked, .66);
					KillUnit(missile);
					GroupRemoveUnit(gmissile, missile);
					SaveGroupHandle(udg_hash, h, 7, gmissile);
					DestroyEffect(ef);
					FlushChildHashtable(udg_hash, hmissile);
				}
				GroupRemoveUnit(gdamage, Picked2);
			}
			GroupClear(gdamage);
			DestroyGroup(gdamage);
			GroupRemoveUnit(gdamage2, Picked);
		}
	else
		if (wait > 0) {
			while (true) {
				if (missile == null) break;
				KillUnit(missile);
				DestroyEffect(ef);
				FlushChildHashtable(udg_hash, hmissile);
				GroupRemoveUnit(gmissile, missile);
			}
		}
		GroupClear(gmissile);
		DestroyGroup(gmissile);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	GroupClear(gmissile2);
	DestroyGroup(gmissile2);
	GroupClear(gdamage2);
	DestroyGroup(gdamage2);
}
nothing Trig_Ice_Rain_Actions() {
	unit caster = GetSpellAbilityUnit();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	location loc;
	real xt;
	real yt;
	real xpoint;
	real ypoint;
	unit target = GetSpellTargetUnit();
	real angle;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	integer wait = $AF;
	integer waitcreate = $91;
	real damage = 150.;
	group gmissile = CreateGroup();
	if (target != null) {
	else
	}
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveInteger(udg_hash, h, 2, wait);
	SaveReal(udg_hash, h, 3, damage);
	SaveReal(udg_hash, h, 4, xpoint);
	SaveReal(udg_hash, h, 5, ypoint);
	SaveReal(udg_hash, h, 6, angle);
	SaveGroupHandle(udg_hash, h, 7, gmissile);
	SaveInteger(udg_hash, h, 8, waitcreate);
	TimerStart(t, .04, true, Trig_Ice_Rain_Periodic_Actions);
	RemoveLocation(loc);
}
boolean Trig_Ice_Rain_Conditions() {
	return GetSpellAbilityId() == 'A043';
}
nothing InitTrig_Ice_Rain() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Ice_Rain, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Ice_Rain, Condition(Trig_Ice_Rain_Conditions));
	TriggerAddAction(gg_trg_Ice_Rain, Trig_Ice_Rain_Actions);
}
nothing Trig_Cold_Punishment_RefreshGroup_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit Picked = LoadUnitHandle(udg_hash, h, 1);
	group gdamage = LoadGroupHandle(udg_hash, h, 2);
	GroupRemoveUnit(gdamage, Picked);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_Cold_Punishment_Periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	unit target = LoadUnitHandle(udg_hash, h, 2);
	integer wait = LoadInteger(udg_hash, h, 3);
	real damage = LoadReal(udg_hash, h, 4);
	real x = LoadReal(udg_hash, h, 5);
	real y = LoadReal(udg_hash, h, 6);
	group gdamage = LoadGroupHandle(udg_hash, h, 7);
	real xt;
	real yt;
	real angle;
	group g;
	unit Picked;
	player p;
	integer lopa = 1;
	unit dammi;
	effect ef;
	boolean destroy = false;
	integer abilitylevel;
	timer tPicked;
	integer htPicked;
	real time;
	if (GetUnitState(target, UNIT_STATE_LIFE) > .405 && wait > 0) {
		SaveInteger(udg_hash, h, 3, wait);
		SaveReal(udg_hash, h, 5, x);
		SaveReal(udg_hash, h, 6, y);
		while (true) {
			if (lopa > 5) break;
			SetUnitPosition(dammi, x + 75. * Cos((lopa * 72) * bj_DEGTORAD), y + 75. * Sin((lopa * 72) * bj_DEGTORAD));
		}
		GroupEnumUnitsInRange(g, x, y, 150., null);
		while (true) {
			if (Picked == null) break;
			if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, p) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U' && IsUnitInGroup(Picked, gdamage) == false) {
				if (Picked == target) {
					UnitDamageTarget(caster, Picked, GetUnitState(target, UNIT_STATE_MAX_LIFE) / 2.5 + damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				}
				if (GetUnitAbilityLevel(Picked, 'B005') <= 0 || Picked == target) {
					UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
					UnitApplyTimedLife(dammi, 'BTLF', 2.);
					UnitAddAbility(dammi, 'A039');
					SetUnitAbilityLevel(dammi, 'A039', abilitylevel);
					IssueTargetOrderById(dammi, $D00CB, Picked);
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl", Picked, "origin"));
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIob\\AIobSpecialArt.mdl", Picked, "origin"));
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratFrostMissile\\ZigguratFrostMissile.mdl", Picked, "chest"));
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl", Picked, "chest"));
					GroupAddUnit(gdamage, Picked);
					SaveUnitHandle(udg_hash, htPicked, 1, Picked);
					SaveGroupHandle(udg_hash, htPicked, 2, gdamage);
					if (IsUnitType(Picked, UNIT_TYPE_HERO) == false) {
					}
					TimerStart(tPicked, time, false, Trig_Cold_Punishment_RefreshGroup_Actions);
				}
			}
			GroupRemoveUnit(g, Picked);
		}
		SaveGroupHandle(udg_hash, h, 7, gdamage);
	else
	}
	if (destroy) {
		while (true) {
			if (lopa > 5) break;
			KillUnit(dammi);
			DestroyEffect(ef);
		}
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	GroupClear(g);
	DestroyGroup(g);
}
nothing Trig_Cold_Punishment_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	real xt = GetUnitX(target);
	real yt = GetUnitY(target);
	real angle = bj_RADTODEG * Atan2(yt - GetUnitY(caster), xt - GetUnitX(caster));
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	integer wait = 500;
	real damage = 300.;
	integer lopa = 1;
	unit dammi;
	effect ef;
	player p = GetOwningPlayer(caster);
	real xnew = x + 200. * Cos(angle * bj_DEGTORAD);
	real ynew = y + 200. * Sin(angle * bj_DEGTORAD);
	group gdamage = CreateGroup();
	while (true) {
		if (lopa > 5) break;
		UnitAddAbility(dammi, 'Amrf');
		UnitRemoveAbility(dammi, 'Amrf');
		SetUnitFlyHeight(dammi, 100., .0);
		SaveUnitHandle(udg_hash, h, 9 + lopa, dammi);
		SaveEffectHandle(udg_hash, h, $E + lopa, ef);
	}
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveUnitHandle(udg_hash, h, 2, target);
	SaveInteger(udg_hash, h, 3, wait);
	SaveReal(udg_hash, h, 4, damage);
	SaveReal(udg_hash, h, 5, xnew);
	SaveReal(udg_hash, h, 6, ynew);
	SaveGroupHandle(udg_hash, h, 7, gdamage);
	TimerStart(t, .03, true, Trig_Cold_Punishment_Periodic_Actions);
}
boolean Trig_Cold_Punishment_Conditions() {
	return GetSpellAbilityId() == 'A04B';
}
nothing InitTrig_Cold_Punishment() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Cold_Punishment, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Cold_Punishment, Condition(Trig_Cold_Punishment_Conditions));
	TriggerAddAction(gg_trg_Cold_Punishment, Trig_Cold_Punishment_Actions);
}
nothing Trig_Ice_Restoration_Periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, $D);
	integer wait = LoadInteger(udg_hash, h, $E);
	real xprestore = LoadReal(udg_hash, h, $F);
	texttag txtxp = LoadTextTagHandle(udg_hash, h, 16);
	texttag txt;
	texttag txttime = LoadTextTagHandle(udg_hash, h, 17);
	integer lop = 0;
	unit dammi;
	lightning l;
	integer schetchik = 0;
	effect ef;
	real angle;
	unit Picked;
	unit dammi2;
	group gdamage;
	real xt;
	real yt;
	player p = GetOwningPlayer(caster);
	SaveInteger(udg_hash, h, $E, wait);
	SetTextTagText(txttime, "|cFFAFE6FF " + I2S(R2I(wait / 5)) + "|r", .065);
	while (true) {
		if (lop > 3) break;
		if (GetUnitState(dammi, UNIT_STATE_LIFE) > .405 && wait > 0) {
		else
			if (dammi != null) {
				UnitApplyTimedLife(dammi2, 'BTLF', 2.);
				SetUnitScale(dammi2, 2., 2., 2.);
				DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Shiva'sWrath.mdl", dammi2, "origin"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl", dammi2, "origin"));
				GroupEnumUnitsInRange(gdamage, GetUnitX(dammi), GetUnitY(dammi), 250., null);
				while (true) {
					if (Picked == null) break;
					if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, p) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
						UnitDamageTarget(caster, Picked, 100., false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
						UnitApplyTimedLife(dammi2, 'BTLF', 2.);
						UnitAddAbility(dammi2, 'A039');
						SetUnitAbilityLevel(dammi2, 'A039', 2);
						IssueTargetOrderById(dammi2, $D00CB, Picked);
						DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl", Picked, "origin"));
						DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIob\\AIobSpecialArt.mdl", Picked, "origin"));
						DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratFrostMissile\\ZigguratFrostMissile.mdl", Picked, "chest"));
					}
					GroupRemoveUnit(gdamage, Picked);
				}
				GroupClear(gdamage);
				DestroyGroup(gdamage);
				RemoveUnit(dammi);
				DestroyLightning(l);
				FlushChildHashtable(udg_hash, GetHandleId(dammi));
			}
		}
	}
	if (schetchik <= 0 || wait <= 0) {
		if (wait <= 0) {
			SetUnitState(caster, UNIT_STATE_LIFE, GetUnitState(caster, UNIT_STATE_LIFE) + $3A98);
		}
		SetTextTagText(txt, "|cFFAFE6FF +" + I2S(R2I(xprestore)) + "!|r", .045);
		SetTextTagPos(txt, xt + $96 * Cos(90. * bj_DEGTORAD), yt + $96 * Sin(90. * bj_DEGTORAD), .0);
		SetTextTagVelocity(txt, .0101875 * Cos(angle * bj_DEGTORAD), .0301875 * Sin(angle * bj_DEGTORAD));
		SetTextTagPermanent(txt, false);
		SetTextTagColor(txt, $FF, $FF, $FF, $C8);
		SetTextTagLifespan(txt, 4.);
		SetTextTagFadepoint(txt, 2.);
		DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Shiva'sWrath.mdl", caster, "origin"));
		DestroyTextTag(txtxp);
		DestroyTextTag(txttime);
		UnitRemoveAbility(caster, 'Avul');
		PauseUnit(caster, false);
		SetUnitAnimation(caster, "stand");
		DestroyEffect(ef);
		DestroyTimer(t);
		FlushChildHashtable(udg_hash, h);
		SaveBoolean(udg_hash, GetHandleId(caster), $A, false);
	else
		SetTextTagText(txtxp, "|cFFAFE6FF +" + I2S(R2I(xprestore)) + "|r", .045);
		SaveReal(udg_hash, h, $F, xprestore);
		SetUnitState(caster, UNIT_STATE_LIFE, GetUnitState(caster, UNIT_STATE_LIFE) + schetchik * 50);
	}
}
nothing Trig_Ice_Restoration_Actions() {
	unit caster = GetSpellAbilityUnit();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	real angle = 45.;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	integer wait = '}';
	integer lop = 0;
	unit dammi;
	effect ef;
	player p = GetOwningPlayer(caster);
	real xc = GetRectCenterX(gg_rct_6);
	real yc = GetRectCenterY(gg_rct_6);
	lightning l;
	real xprestore = .0;
	texttag txtxp = CreateTextTag();
	texttag txttime = CreateTextTag();
	real xnew;
	real ynew;
	unit dammi2;
	SetTextTagText(txtxp, "|cFFAFE6FF +" + I2S(R2I(.0)) + "|r", .045);
	SetTextTagPos(txtxp, xnew, ynew, .0);
	SetTextTagPos(txtxp, xnew + $96 * Cos(90. * bj_DEGTORAD), ynew + $96 * Sin(90. * bj_DEGTORAD), .0);
	SetTextTagPermanent(txtxp, false);
	SetTextTagColor(txtxp, $FF, $FF, $FF, $C8);
	SetTextTagText(txttime, "|cFFAFE6FF " + I2S(R2I(wait / 25)) + "|r", .065);
	SetTextTagPos(txttime, xnew, ynew, .0);
	SetTextTagPos(txttime, xnew + 50 * Cos(90. * bj_DEGTORAD), ynew + 50 * Sin(90. * bj_DEGTORAD), .0);
	SetTextTagPermanent(txttime, false);
	SetTextTagColor(txttime, $FF, $FF, $FF, $C8);
	UnitAddAbility(caster, 'Avul');
	SaveEffectHandle(udg_hash, h, 18, ef);
	PauseUnit(caster, true);
	SetUnitAnimation(caster, "Stand Channel");
	SetUnitFacing(caster, 270.);
	while (true) {
		if (lop > 3) break;
		UnitApplyTimedLife(dammi2, 'BTLF', 2.);
		SetUnitScale(dammi2, 2., 2., 2.);
		DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Shiva'sWrath.mdl", dammi2, "origin"));
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl", dammi2, "origin"));
		SetUnitAnimation(dammi, "Stand Work");
		SaveUnitHandle(udg_hash, h, lop, dammi);
		SaveEffectHandle(udg_hash, h, lop + 4, ef);
		SaveLightningHandle(udg_hash, GetHandleId(dammi), 1, l);
	}
	SaveUnitHandle(udg_hash, h, $D, caster);
	SaveInteger(udg_hash, h, $E, wait);
	SaveReal(udg_hash, h, $F, xprestore);
	SaveTextTagHandle(udg_hash, h, 16, txtxp);
	SaveTextTagHandle(udg_hash, h, 17, txttime);
	TimerStart(t, .2, true, Trig_Ice_Restoration_Periodic_Actions);
}
boolean Trig_Ice_Restoration_Conditions() {
	return GetSpellAbilityId() == 'A04D';
}
nothing InitTrig_Ice_Restoration() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Ice_Restoration, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Ice_Restoration, Condition(Trig_Ice_Restoration_Conditions));
	TriggerAddAction(gg_trg_Ice_Restoration, Trig_Ice_Restoration_Actions);
}
nothing Trig_BossStart_onbase_Actions() {
	timer tonbase = GetExpiredTimer();
	integer honbase = GetHandleId(tonbase);
	integer ishod = LoadInteger(udg_hash, honbase, 3);
	unit boss = LoadUnitHandle(udg_hash, honbase, 1);
	group gruppa = CreateGroup();
	unit Picked;
	real xc = GetRectCenterX(gg_rct_Respawn_Heroes);
	real yc = GetRectCenterY(gg_rct_Respawn_Heroes);
	fogmodifier fm = LoadFogModifierHandle(udg_hash, honbase, 2);
	texttag txt;
	real vel = .0221875;
	real angle = 45. + GetRandomReal(.0, 90.);
	real xvel = vel * Cos(angle * bj_DEGTORAD);
	real yvel = vel * Sin(angle * bj_DEGTORAD);
	integer dead = 0;
	real perekluchatel = .1;
	ShowAndFlushAllPlayerDamage(false);
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
	CinematicModeExBJ(false, bj_FORCE_ALL_PLAYERS, bj_CINEMODE_INTERFACEFADE);
	CinematicFadeBJ(0, 5., "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0);
	while (true) {
		if (Picked == null) break;
		if (perekluchatel >= 0) {
		else
		}
		ReviveHero(Picked, xc, yc, true);
		SetUnitPosition(Picked, xc, yc);
		SetUnitFacing(Picked, 270.);
		SetUnitState(Picked, UNIT_STATE_LIFE, $540BE3FF);
		SetUnitState(Picked, UNIT_STATE_MANA, $540BE3FF);
		if (ishod == 0) {
			if (dead == 1) {
				SetTextTagText(txt, "|cFFFFFF00+500|r", .035);
				AddHeroXP(Picked, $3E8, true);
				SetPlayerState(GetOwningPlayer(Picked), PLAYER_STATE_RESOURCE_GOLD, (GetPlayerState(GetOwningPlayer(Picked), PLAYER_STATE_RESOURCE_GOLD) + 500));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl", Picked, "overhead"));
				if (GetLocalPlayer() == GetOwningPlayer(Picked)) {
					DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Вы получили " + udg_ColorString[23] + I2S(500) + " золота|r!!!");
				}
			else
				SetTextTagText(txt, "|cFFFFFF00+1200|r", .045);
				AddHeroXP(Picked, $BB8, true);
				SetPlayerState(GetOwningPlayer(Picked), PLAYER_STATE_RESOURCE_GOLD, (GetPlayerState(GetOwningPlayer(Picked), PLAYER_STATE_RESOURCE_GOLD) + $4B0));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl", Picked, "overhead"));
				if (GetLocalPlayer() == GetOwningPlayer(Picked)) {
					DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Вы получили " + udg_ColorString[23] + I2S($4B0) + " золота|r!!!");
				}
			}
			SetTextTagPos(txt, GetUnitX(Picked), GetUnitY(Picked), .0);
			SetTextTagColor(txt, 0, 0, 0, 50);
			SetTextTagVelocity(txt, xvel, yvel);
			SetTextTagPermanent(txt, false);
			SetTextTagLifespan(txt, 4.);
			SetTextTagFadepoint(txt, .0);
		}
		if ((GetLocalPlayer() == GetOwningPlayer(Picked))) {
			ResetToGameCamera(.0);
			if (ishod == 1) {
				DisplayTextToPlayer(GetOwningPlayer(Picked), 0, 0, "|cFFFF0000ВЫ ПРОИГРАЛИ БИТВУ С БОССОМ!!!|r");
			else
				DisplayTextToPlayer(GetOwningPlayer(Picked), 0, 0, "|cFFFFFF00ВЫ ПОБЕДИЛИ В БИТВЕ С БОССОМ!!!|r");
			}
			ResetToGameCamera(.0);
			PanCameraToTimed(xc, yc, .0);
			SelectUnit(Picked, true);
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	EnableTrigger(gg_trg_Hero_Dead);
	DisableTrigger(gg_trg_FlameSpells);
	DisableTrigger(gg_trg_Upgrade_Summons);
	GroupEnumUnitsInRect(gruppa, gg_rct_6, null);
	while (true) {
		if (Picked == null) break;
		if (GetUnitTypeId(Picked) != 'h00C' && GetUnitTypeId(Picked) != 'h00B' && GetUnitTypeId(Picked) != 'h00U') {
			RemoveUnit(Picked);
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	StartTimerBJ(udg_Timer_Nomera_Volni, false, 75.);
	CreateTimerDialogBJ(udg_Timer_Nomera_Volni, ("Волна № |cFFFF0000" + (I2S(udg_Nomer_samoi_volni) + "|r")));
	TimerDialogSetTimeColorBJ(udg_TimerDialog_Nomera_Volni, 'd', 90., 30., 20.);
	RemoveWeatherEffect(udg_BossFightWeather);
	FlushChildHashtable(udg_hash, GetHandleId(boss));
	RemoveUnit(boss);
	DestroyFogModifier(fm);
	DestroyGroup(gruppa);
	FlushChildHashtable(udg_hash, honbase);
	DestroyTimer(tonbase);
}
nothing Trig_BossStart_end_Actions() {
	timer tend = GetExpiredTimer();
	integer hend = GetHandleId(tend);
	unit boss = LoadUnitHandle(udg_hash, hend, 1);
	fogmodifier fm = CreateFogModifierRect(Player(0), FOG_OF_WAR_VISIBLE, gg_rct_6, true, true);
	integer lop = 0;
	integer ishod = LoadInteger(udg_hash, hend, 2);
	timer tonbase = CreateTimer();
	integer honbase = GetHandleId(tonbase);
	group g = CreateGroup();
	unit Picked;
	SaveUnitHandle(udg_hash, honbase, 1, boss);
	SaveFogModifierHandle(udg_hash, honbase, 2, fm);
	SaveInteger(udg_hash, honbase, 3, ishod);
	GroupEnumUnitsInRect(g, gg_rct_6, null);
	while (true) {
		if (lop > 9) break;
		if ((GetLocalPlayer() == Player(lop))) {
			CameraSetupApplyForceDuration(gg_cam_Camera_BossFightStart, true, .0);
			SetCameraRotateMode(GetRectCenterX(gg_rct_6), GetRectCenterY(gg_rct_6), bj_DEGTORAD * 360., 6.);
		}
	}
	TimerStart(tonbase, 6., false, Trig_BossStart_onbase_Actions);
	if (ishod == 1) {
		IssuePointOrderById(boss, $D0012, GetRectCenterX(gg_rct_6), GetRectCenterY(gg_rct_6));
	else
		while (true) {
			if (Picked == null) break;
			if (GetOwningPlayer(Picked) == Player($B)) {
				KillUnit(Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
	}
	CinematicModeExBJ(true, bj_FORCE_ALL_PLAYERS, bj_CINEMODE_INTERFACEFADE);
	CinematicFadeBJ(1, 6., "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1);
	FlushChildHashtable(udg_hash, hend);
	DestroyTimer(tend);
	DestroyGroup(g);
}
nothing Trig_BossStart_altars_periodic_Actions() {
	timer taltarsper = GetExpiredTimer();
	integer haltarsper = GetHandleId(taltarsper);
	real x = GetRectCenterX(gg_rct_6) + GetRandomReal(-1000., 1000.);
	real y = GetRectCenterY(gg_rct_6) + GetRandomReal(-800., 800.);
	integer number = LoadInteger(udg_hash, haltarsper, 5);
	integer end = LoadInteger(udg_hash, haltarsper, 6);
	unit altar = LoadUnitHandle(udg_hash, haltarsper, number);
	integer lop = 0;
	effect ef;
	if (number >= 5) {
	}
	SaveInteger(udg_hash, haltarsper, 5, number);
	if (GetUnitState(altar, UNIT_STATE_LIFE) > .405) {
		IssuePointOrderById(altar, $D0208, x, y);
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl", GetUnitX(altar), GetUnitY(altar)));
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl", GetUnitX(altar), GetUnitY(altar)));
	else
		DestroyEffect(ef);
		FlushChildHashtable(udg_hash, GetHandleId(altar));
	}
	SaveInteger(udg_hash, haltarsper, 6, end);
	if (end <= 0) {
		while (true) {
			if (lop > 4) break;
			KillUnit(altar);
			FlushChildHashtable(udg_hash, GetHandleId(altar));
		}
		DestroyTimer(taltarsper);
		FlushChildHashtable(udg_hash, haltarsper);
	}
}
nothing Trig_BossStart_altars_Actions() {
	timer taltars = GetExpiredTimer();
	real xc = GetRectCenterX(gg_rct_6);
	real yc = GetRectCenterY(gg_rct_6);
	unit Picked;
	integer number = 0;
	integer end = 40;
	integer lop = 0;
	real angle = 45.;
	timer taltarsper = CreateTimer();
	integer haltarsper = GetHandleId(taltarsper);
	effect ef;
	while (true) {
		if (lop > 3) break;
		UnitApplyTimedLife(Picked, 'BTLF', 60.01);
		SaveUnitHandle(udg_hash, haltarsper, lop, Picked);
		SaveEffectHandle(udg_hash, GetHandleId(Picked), 1, ef);
	}
	SaveInteger(udg_hash, haltarsper, 5, number);
	SaveInteger(udg_hash, haltarsper, 6, end);
	TimerStart(taltarsper, 1.5, true, Trig_BossStart_altars_periodic_Actions);
}
nothing Trig_BossStart_hprestore_Actions() {
	timer thprestore = GetExpiredTimer();
	integer hhprestore = GetHandleId(thprestore);
	unit boss = LoadUnitHandle(udg_hash, hhprestore, 1);
	integer lop = 0;
	array<unit> u;
	lightning l;
	integer schetchik = 0;
	integer end = LoadInteger(udg_hash, hhprestore, $A);
	texttag txt;
	integer endtxt = end - (end / 5) * 5;
	boolean zaniat = LoadBoolean(udg_hash, GetHandleId(boss), $A);
	effect ef;
	real angle;
	real hpforsolo = (GetUnitState(boss, UNIT_STATE_MAX_LIFE) / $BB8);
	integer hpforall = R2I((GetUnitState(boss, UNIT_STATE_MAX_LIFE) / $A));
	if ((endtxt < 0)) {
	}
	SaveInteger(udg_hash, hhprestore, $A, end);
	if (endtxt == 0) {
		SetTextTagText(txt, "|cFFFF0000" + I2S(20 - (end / 5)) + "|r", .055);
		SetTextTagPos(txt, GetUnitX(boss), GetUnitY(boss), .0);
		SetTextTagPermanent(txt, false);
		SetTextTagColor(txt, 0, 0, 0, $C8);
		SetTextTagVelocity(txt, .0501875 * Cos(angle * bj_DEGTORAD), .0501875 * Cos(angle * bj_DEGTORAD));
		SetTextTagLifespan(txt, 3.5);
		SetTextTagFadepoint(txt, .0);
	}
	while (true) {
		if (lop > 4) break;
		if (GetUnitState(u[lop], UNIT_STATE_LIFE) > .405 && end < 'd') {
			MoveLightningEx(l, true, GetUnitX(boss), GetUnitY(boss), 100., GetUnitX(u[lop]), GetUnitY(u[lop]), 5.);
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomTarget.mdl", GetUnitX(u[lop]), GetUnitY(u[lop])));
		else
			if (end >= 'd') {
				KillUnit(u[lop]);
			}
			if (GetUnitState(u[lop], UNIT_STATE_LIFE) < .405) {
			}
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl", GetUnitX(u[lop]), GetUnitY(u[lop])));
			DestroyLightning(l);
			FlushChildHashtable(udg_hash, GetHandleId(u[lop]));
		}
	}
	if (schetchik <= 0 || end >= 'd') {
		if (end >= 'd') {
			SetUnitState(boss, UNIT_STATE_LIFE, GetUnitState(boss, UNIT_STATE_LIFE) + hpforall);
			SetTextTagText(txt, "|cFFFF0000 +" + I2S(hpforall) + "!|r", .055);
			SetTextTagPos(txt, GetUnitX(boss), GetUnitY(boss), .0);
			SetTextTagPermanent(txt, false);
			SetTextTagColor(txt, 0, 0, 0, $C8);
			SetTextTagVelocity(txt, .0101875 * Cos(GetRandomReal(.0, 360.) * bj_DEGTORAD), .0301875 * Sin(GetRandomReal(.0, 360.) * bj_DEGTORAD));
			SetTextTagLifespan(txt, 3.5);
			SetTextTagFadepoint(txt, .0);
		}
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl", GetUnitX(boss), GetUnitY(boss)));
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl", GetUnitX(boss), GetUnitY(boss)));
		UnitRemoveAbility(boss, 'Avul');
		DestroyEffect(ef);
		DestroyTimer(thprestore);
		FlushChildHashtable(udg_hash, hhprestore);
		PauseUnit(boss, false);
		SetUnitAnimation(boss, "stand");
		SaveBoolean(udg_hash, GetHandleId(boss), $A, zaniat);
	else
		SetUnitState(boss, UNIT_STATE_LIFE, GetUnitState(boss, UNIT_STATE_LIFE) + (schetchik * hpforsolo));
	}
}
nothing Trig_BossStart_ActionWithWait_Actions() {
	timer twact = GetExpiredTimer();
	integer hwact = GetHandleId(twact);
	unit boss = LoadUnitHandle(udg_hash, hwact, 1);
	effect ef = LoadEffectHandle(udg_hash, hwact, 2);
	integer lop = 0;
	real xboss = GetUnitX(boss);
	real yboss = GetUnitY(boss);
	real angle = 0;
	array<unit> u;
	timer thprestore = CreateTimer();
	integer hhprestore = GetHandleId(thprestore);
	integer end = 0;
	TimerStart(thprestore, .2, true, Trig_BossStart_hprestore_Actions);
	PauseUnit(boss, true);
	SetUnitPathing(boss, true);
	SetUnitAnimationByIndex(boss, 7);
	SaveUnitHandle(udg_hash, hhprestore, 1, boss);
	SaveInteger(udg_hash, hhprestore, $A, end);
	while (true) {
		if (lop > 4) break;
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl", xboss + 500 * Cos(angle * bj_DEGTORAD), yboss + 500 * Sin(angle * bj_DEGTORAD)));
		UnitApplyTimedLife(u[lop], 'BTLF', 20.);
		UnitAddAbility(u[lop], 'Abun');
		UnitAddType(u[lop], UNIT_TYPE_PEON);
		PauseUnit(u[lop], true);
		SetUnitAnimationByIndex(u[lop], 2);
		SetUnitMoveSpeed(u[lop], 0);
		SaveUnitHandle(udg_hash, hhprestore, 1 + lop, u[lop]);
		SaveLightningHandle(udg_hash, GetHandleId(u[lop]), 1 + lop, bj_lastCreatedLightning);
	}
	DestroyTimer(twact);
	FlushChildHashtable(udg_hash, hwact);
	DestroyEffect(ef);
}
nothing Trig_BossStart_vulcano_Actions() {
	timer tvul = GetExpiredTimer();
	unit boss = LoadUnitHandle(udg_hash, GetHandleId(tvul), 1);
	boolean zaniat = LoadBoolean(udg_hash, GetHandleId(boss), $A);
	effect ef = LoadEffectHandle(udg_hash, GetHandleId(boss), $F);
	SaveBoolean(udg_hash, GetHandleId(boss), $A, zaniat);
	DestroyEffect(ef);
	UnitRemoveAbility(boss, 'Avul');
	FlushChildHashtable(udg_hash, GetHandleId(tvul));
}
nothing Trig_BossStart_golems_Actions() {
	timer tgol = GetExpiredTimer();
	unit boss = LoadUnitHandle(udg_hash, GetHandleId(tgol), 1);
	boolean zaniat = LoadBoolean(udg_hash, GetHandleId(boss), $A);
	SaveBoolean(udg_hash, GetHandleId(boss), $A, zaniat);
	FlushChildHashtable(udg_hash, GetHandleId(tgol));
}
nothing Trig_BossStart_hpcheck_Actions() {
	real xc = GetRectCenterX(gg_rct_6);
	real yc = GetRectCenterY(gg_rct_6);
	timer thpcheck = GetExpiredTimer();
	integer hhpcheck = GetHandleId(thpcheck);
	unit boss = LoadUnitHandle(udg_hash, hhpcheck, 1);
	integer stage = LoadInteger(udg_hash, hhpcheck, 2);
	integer dammicheck = LoadInteger(udg_hash, hhpcheck, 4);
	real dx = GetUnitX(boss) - xc;
	real dy = GetUnitY(boss) - yc;
	timer twact = CreateTimer();
	integer hwact = GetHandleId(twact);
	timer taltars;
	boolean zaniat = LoadBoolean(udg_hash, GetHandleId(boss), $A);
	integer cdvul = LoadInteger(udg_hash, GetHandleId(boss), $B);
	integer cdgol = LoadInteger(udg_hash, GetHandleId(boss), $C);
	group grp = CreateGroup();
	timer tvul;
	timer tgol;
	group heroes = CreateGroup();
	group heroes2;
	unit targethero;
	group heroes2dummi;
	unit Picked;
	integer kolvo = 0;
	integer random = GetRandomInt(1, 4);
	timer tend;
	integer hend;
	integer ishod = 0;
	effect ef;
	player p = Player($C);
	integer itemrand = R2I($F + 5 * CountPlayersInForceBJ(udg_IGRAET));
	real itemx = (GetRandomReal(-1350., 100.));
	real itemy = (GetRandomReal(1900., 3450.));
	unit dammi;
	group geroi = CreateGroup();
	real maxhp = GetUnitState(boss, UNIT_STATE_MAX_LIFE);
	if (GetRandomInt(1, 'd') <= itemrand) {
		CreatePotion(itemx, itemy, 3, 6);
	}
	if ((zaniat == false && stage == 0 && GetUnitState(boss, UNIT_STATE_LIFE) > (maxhp * .566) && GetUnitState(boss, UNIT_STATE_LIFE) < (maxhp * .733)) || (stage == 1 && GetUnitState(boss, UNIT_STATE_LIFE) > (maxhp * .3) && GetUnitState(boss, UNIT_STATE_LIFE) < (maxhp * .466)) || (stage == 2 && GetUnitState(boss, UNIT_STATE_LIFE) > (maxhp * .03) && GetUnitState(boss, UNIT_STATE_LIFE) < (maxhp * .2))) {
		SaveBoolean(udg_hash, GetHandleId(boss), $A, zaniat);
		SaveInteger(udg_hash, hhpcheck, 2, stage);
		SaveUnitHandle(udg_hash, hwact, 1, boss);
		if (SquareRoot(dx * dx + dy * dy) > 500) {
			IssuePointOrderById(boss, $D0012, xc + GetRandomReal(-250., 250.), yc + GetRandomReal(-250., 250.));
			SetUnitPathing(boss, false);
			TimerStart(twact, 4., false, Trig_BossStart_ActionWithWait_Actions);
		else
			TimerStart(twact, .25, false, Trig_BossStart_ActionWithWait_Actions);
		}
		UnitAddAbility(boss, 'Avul');
		SaveEffectHandle(udg_hash, GetHandleId(boss), $F, ef);
	}
	if (cdgol > 0) {
		SaveInteger(udg_hash, GetHandleId(boss), $C, cdgol - 1);
	}
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, geroi);
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, grp);
	while (true) {
		if (Picked == null) break;
		if (IsUnitType(Picked, UNIT_TYPE_HERO) && GetPlayerId(GetOwningPlayer(Picked)) <= 8 && Picked != boss) {
			GroupAddUnit(heroes, Picked);
		}
		GroupRemoveUnit(grp, Picked);
	}
	FilterMostNearUnit(heroes, boss);
	AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodSorceress.mdl", udg_Unit_FilterMostNearUnit, "chest");
	if (dammicheck == 7 || dammicheck == $E || dammicheck == 21) {
		GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, heroes2dummi);
		RandomUnitFromGroup(1, heroes2dummi);
		GroupAddGroup(udg_GroupRandomUnitFromGroup, heroes2);
		UnitApplyTimedLife(dammi, 'BTLF', 2.);
		UnitAddAbility(dammi, 'A0O4');
		IssuePointOrderById(dammi, $D0201, GetUnitX(targethero), GetUnitY(targethero));
		GroupClear(heroes2dummi);
		DestroyGroup(heroes2dummi);
		GroupClear(heroes2);
		DestroyGroup(heroes2);
	}
	if (dammicheck == $A || dammicheck == 20) {
		UnitApplyTimedLife(dammi, 'BTLF', 2.);
		UnitAddAbility(dammi, 'A06J');
		IssueTargetOrderById(dammi, $D02BC, udg_Unit_FilterMostNearUnit);
	}
	if (dammicheck == 21) {
	}
	SaveInteger(udg_hash, hhpcheck, 4, dammicheck);
	if (zaniat == false && GetRandomInt(2, 4) <= 2) {
		if (random == 1) {
			if (udg_Unit_FilterMostNearUnit != null) {
				IssuePointOrderById(boss, $D009D, GetUnitX(udg_Unit_FilterMostNearUnit), GetUnitY(udg_Unit_FilterMostNearUnit));
			}
		}
		if (random == 2 && SquareRoot(dx * dx + dy * dy) < 700 && cdgol <= 0) {
			IssueImmediateOrderById(boss, $D0080);
			SaveBoolean(udg_hash, GetHandleId(boss), $A, zaniat);
			SaveInteger(udg_hash, GetHandleId(boss), $C, 20);
			SaveUnitHandle(udg_hash, GetHandleId(tgol), 1, boss);
			TimerStart(tgol, 4., false, Trig_BossStart_golems_Actions);
		}
		if (random == 4 && SquareRoot(dx * dx + dy * dy) < 700) {
			IssueImmediateOrderById(boss, $D00B1);
		}
	}
	if (SquareRoot(dx * dx + dy * dy) > $4B0 && zaniat == false) {
		SetUnitPosition(boss, xc, yc);
	}
	GroupClear(heroes);
	if (GetUnitState(boss, UNIT_STATE_LIFE) < .405) {
		SaveInteger(udg_hash, hend, 2, ishod);
		SaveUnitHandle(udg_hash, hend, 1, boss);
		TimerStart(tend, 3., false, Trig_BossStart_end_Actions);
		FlushChildHashtable(udg_hash, GetHandleId(taltars));
		DestroyTimer(taltars);
		GroupEnumUnitsInRect(heroes, gg_rct_6, null);
		DestroyTimer(thpcheck);
		FlushChildHashtable(udg_hash, hhpcheck);
	}
	GroupClear(heroes);
	while (true) {
		if (Picked == null) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) < .405) {
			SaveInteger(udg_hash, GetHandleId(Picked), 1, 1);
		}
		GroupRemoveUnit(geroi, Picked);
	}
	if (kolvo >= CountUnitsInGroup(udg_Gruppa_HeroUnitov_Geroev)) {
		SaveInteger(udg_hash, hend, 2, ishod + 1);
		SaveUnitHandle(udg_hash, hend, 1, boss);
		FlushChildHashtable(udg_hash, GetHandleId(taltars));
		DestroyTimer(taltars);
		TimerStart(tend, 3., false, Trig_BossStart_end_Actions);
		DestroyTimer(thpcheck);
		FlushChildHashtable(udg_hash, hhpcheck);
	}
	GroupClear(grp);
	DestroyGroup(grp);
	GroupClear(heroes);
	DestroyGroup(heroes);
	GroupClear(geroi);
	DestroyGroup(geroi);
}
nothing Trig_BossStart_frasa_Actions() {
	timer tfrasa = GetExpiredTimer();
	integer hfrasa = GetHandleId(tfrasa);
	unit boss = LoadUnitHandle(udg_hash, hfrasa, 1);
	integer random = GetRandomInt(1, 4);
	if (GetUnitState(boss, UNIT_STATE_LIFE) > .405) {
		if (random == 1) {
			TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS, boss, "Pyrovulcanous the Sunderer", gg_snd_HeroFirelordWarcry1, "|cFFFF0000Всех сожгу!!!......Один останусь!!!|r", 0, 4.77, false);
		}
		if (random == 2) {
			TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS, boss, "Pyrovulcanous the Sunderer", gg_snd_HeroFirelordYesAttack1, "|cFFFF0000Сожгу!!!......|r", 0, 2.13, false);
		}
		if (random == 3) {
			TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS, boss, "Pyrovulcanous the Sunderer", gg_snd_HeroFirelordYesAttack2, "|cFFFF0000Всё поглотит огонь!!!...|r", 0, 3.2, false);
		}
		if (random == 4) {
			TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS, boss, "Pyrovulcanous the Sunderer", gg_snd_HeroFirelordYesAttack3, "|cFFFF0000Испепелю!!!...|r", 0, 2.49, false);
		}
	else
		FlushChildHashtable(udg_hash, hfrasa);
		DestroyTimer(tfrasa);
	}
}
nothing Trig_BossStart_5sec_Actions() {
	timer t5sec = GetExpiredTimer();
	integer h5sec = GetHandleId(t5sec);
	unit boss = LoadUnitHandle(udg_hash, h5sec, 1);
	group gruppa = CreateGroup();
	unit Picked;
	timer tfrasa = CreateTimer();
	integer hfrasa = GetHandleId(tfrasa);
	timer thpcheck = CreateTimer();
	integer hhpcheck = GetHandleId(thpcheck);
	integer stage = 0;
	timer taltars = CreateTimer();
	boolean zaniat = false;
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
	CinematicModeExBJ(false, bj_FORCE_ALL_PLAYERS, bj_CINEMODE_INTERFACEFADE);
	while (true) {
		if (Picked == null) break;
		PauseUnit(Picked, false);
		IssueTargetOrderById(Picked, $D000F, boss);
		if ((GetLocalPlayer() == GetOwningPlayer(Picked))) {
			ClearSelection();
			SelectUnit(Picked, true);
			ResetToGameCamera(.0);
			PanCameraToTimed(GetRectCenterX(gg_rct_6), GetRectCenterY(gg_rct_6), .0);
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	PauseUnit(boss, false);
	IssuePointOrderById(boss, $D0012, GetRectCenterX(gg_rct_6), GetRectCenterY(gg_rct_6));
	SaveUnitHandle(udg_hash, hfrasa, 1, boss);
	TimerStart(tfrasa, 14., true, Trig_BossStart_frasa_Actions);
	SaveUnitHandle(udg_hash, hhpcheck, 1, boss);
	SaveInteger(udg_hash, hhpcheck, 2, stage);
	SaveTimerHandle(udg_hash, hhpcheck, 3, taltars);
	SaveBoolean(udg_hash, GetHandleId(boss), $A, zaniat);
	SaveInteger(udg_hash, GetHandleId(boss), $B, 0);
	SaveInteger(udg_hash, GetHandleId(boss), $C, 0);
	SaveInteger(udg_hash, hhpcheck, 4, 0);
	TimerStart(thpcheck, 1., true, Trig_BossStart_hpcheck_Actions);
	TimerStart(taltars, 61., true, Trig_BossStart_altars_Actions);
	DestroyTimer(t5sec);
	FlushChildHashtable(udg_hash, h5sec);
	GroupClear(gruppa);
	DestroyGroup(gruppa);
}
nothing Trig_BossStart_3sec_Actions() {
	timer t3sec = GetExpiredTimer();
	integer h3sec = GetHandleId(t3sec);
	timer t5sec = CreateTimer();
	integer h5sec = GetHandleId(t5sec);
	unit boss = LoadUnitHandle(udg_hash, h3sec, 1);
	SaveUnitHandle(udg_hash, h5sec, 1, boss);
	TimerStart(t5sec, 5.25, false, Trig_BossStart_5sec_Actions);
	ForceCinematicSubtitles(true);
	TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS, boss, "Pyrovulcanous the Sunderer", gg_snd_HeroFirelordWarcry1, "|cFFFF0000Всех сожгу!!!......Один останусь!!!|r", 0, 5.07, false);
	DestroyTimer(t3sec);
	FlushChildHashtable(udg_hash, h3sec);
}
nothing Trig_BossStart_Actions() {
	real xc = GetRectCenterX(gg_rct_6);
	real yc = GetRectCenterY(gg_rct_6);
	real xp = xc - 1216.;
	real yp = yc + 1088.;
	integer random;
	integer end = 1;
	group gruppa = CreateGroup();
	unit Picked;
	real dist = -350;
	unit boss = CreateUnit(Player($B), 'N00J', (xc - 500), yc, .0);
	timer t3sec = CreateTimer();
	integer h3sec = GetHandleId(t3sec);
	EnableWeatherEffect(udg_BossFightWeather, true);
	DisableTrigger(gg_trg_Hero_Dead);
	EnableTrigger(gg_trg_FlameSpells);
	EnableTrigger(gg_trg_Upgrade_Summons);
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
	CinematicModeExBJ(true, bj_FORCE_ALL_PLAYERS, bj_CINEMODE_INTERFACEFADE);
	CinematicFadeBJ(1, .0, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1);
	CinematicFadeBJ(0, 8.25, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1);
	SetAttackSpeedAbilityLevel(boss, $F * CountPlayersInForceBJ(udg_IGRAET));
	SetAttackAbilityLevel(boss, 30 * CountPlayersInForceBJ(udg_IGRAET));
	SetArmorAbilityLevel(boss, 5 * CountPlayersInForceBJ(udg_IGRAET));
	SetUnitMaxState(boss, UNIT_STATE_MAX_LIFE, R2I(3000. * CountPlayersInForceBJ(udg_IGRAET)));
	while (true) {
		if (Picked == null) break;
		SetUnitPosition(Picked, (xc + 500), (yc + dist));
		SetUnitFacing(Picked, bj_RADTODEG * Atan2(yc - GetUnitY(Picked), xc - GetUnitX(Picked)));
		PauseUnit(Picked, true);
		ClearSelection();
		if ((GetLocalPlayer() == GetOwningPlayer(Picked))) {
			CameraSetupApplyForceDuration(gg_cam_Camera_BossFightStart, true, .0);
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	SetHeroLevel(boss, 30, false);
	AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl", boss, "chest");
	AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl", boss, "hand,right");
	AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl", boss, "hand,left");
	AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire2.mdl", boss, "head");
	UnitAddAbility(boss, 'A05T');
	UnitAddAbility(boss, 'A051');
	UnitAddAbility(boss, 'A05U');
	UnitAddAbility(boss, 'A004');
	PauseUnit(boss, true);
	SaveUnitHandle(udg_hash, h3sec, 1, boss);
	TimerStart(t3sec, 3., false, Trig_BossStart_3sec_Actions);
	ShowAndFlushAllPlayerDamage(true);
	TimerStart(udg_TimerShowAndFlushAllPlayerDmg, 10000., false, null);
	while (true) {
		if (end > 16) break;
		while (true) {
			if (bj_forLoopAIndex > 20) break;
			if (random >= 1 && random <= 3) {
				SetTerrainType(xp, yp, 'Ddrt', -1, 2, 1);
			else
				if (random >= 4 && random <= 7) {
					SetTerrainType(xp, yp, 'Dlvc', -1, 2, 1);
				else
					SetTerrainType(xp, yp, 'Dlav', -1, 2, 1);
				}
			}
		}
	}
	GroupClear(gruppa);
	DestroyGroup(gruppa);
}
nothing InitTrig_BossStart() {
	TriggerAddAction(gg_trg_BossStart, Trig_BossStart_Actions);
}
boolean Trig_FlameSpells_Conditions() {
	return GetSpellAbilityId() == 'A05T' || GetSpellAbilityId() == 'A05U';
}
nothing Trig_FlameSpells_Periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	real xu = LoadReal(udg_hash, h, 1);
	real yu = LoadReal(udg_hash, h, 2);
	real angle = LoadReal(udg_hash, h, 3);
	integer i = LoadInteger(udg_hash, h, 4);
	unit caster = LoadUnitHandle(udg_hash, h, 5);
	real x = xu + 400 * Cos((angle + i * 'x') * bj_DEGTORAD);
	real y = yu + 400 * Sin((angle + i * 'x') * bj_DEGTORAD);
	unit u;
	unit un;
	boolean zaniat = LoadBoolean(udg_hash, GetHandleId(caster), $A);
	effect ef = LoadEffectHandle(udg_hash, GetHandleId(caster), $F);
	SaveInteger(udg_hash, h, 4, i);
	if (i < 4) {
		UnitApplyTimedLife(u, 'BTLF', 2.);
		UnitAddAbility(u, 'A055');
		UnitAddAbility(un, 'A05A');
		SetUnitAbilityLevel(u, 'A055', 1);
		IssuePointOrderById(u, $D0100, x, y);
		IssuePointOrderById(un, $D0208, x, y);
	else
		SaveBoolean(udg_hash, GetHandleId(caster), $A, zaniat);
		DestroyTimer(t);
		FlushChildHashtable(udg_hash, h);
		PauseUnit(caster, false);
		UnitRemoveAbility(caster, 'Avul');
		SetUnitAnimation(caster, "stand");
		DestroyEffect(ef);
	}
}
nothing Trig_FlameSpells_Actions() {
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	real x;
	real y;
	real angle = 0;
	integer lop = 0;
	location loc;
	unit u = GetSpellAbilityUnit();
	effect ef;
	if (GetSpellAbilityId() == 'A05T') {
		PauseUnit(u, true);
		UnitAddAbility(u, 'Avul');
		SaveEffectHandle(udg_hash, GetHandleId(u), $F, ef);
		SetUnitAnimationByIndex(u, 7);
		SaveReal(udg_hash, h, 1, GetUnitX(u));
		SaveReal(udg_hash, h, 2, GetUnitY(u));
		SaveReal(udg_hash, h, 3, GetUnitFacing(u));
		SaveInteger(udg_hash, h, 4, 0);
		SaveUnitHandle(udg_hash, h, 5, u);
		TimerStart(t, 1., true, Trig_FlameSpells_Periodic_Actions);
	}
	if (GetSpellAbilityId() == 'A05U') {
		while (true) {
			if (lop > 4) break;
			CreateUnit(GetOwningPlayer(u), 'n00L', x + $96 * Cos(angle * bj_DEGTORAD), y + $96 * Sin(angle * bj_DEGTORAD), GetUnitFacing(u));
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl", x + $96 * Cos(angle * bj_DEGTORAD), y + $96 * Sin(angle * bj_DEGTORAD)));
			UnitApplyTimedLife(bj_lastCreatedUnit, 'BTLF', GetRandomReal(40., 60.));
		}
		RemoveLocation(loc);
	}
}
nothing InitTrig_FlameSpells() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_FlameSpells, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_FlameSpells, Condition(Trig_FlameSpells_Conditions));
	TriggerAddAction(gg_trg_FlameSpells, Trig_FlameSpells_Actions);
}
nothing Trig_Fire_Circle_Periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	real x = LoadReal(udg_hash, h, 2);
	real y = LoadReal(udg_hash, h, 3);
	real angle = LoadReal(udg_hash, h, 4);
	integer waitcreate = LoadInteger(udg_hash, h, 6);
	integer wait = LoadInteger(udg_hash, h, 7);
	real damage = LoadReal(udg_hash, h, 8);
	integer counter = LoadInteger(udg_hash, h, 9);
	group gdamage = CreateGroup();
	group gdamage2 = CreateGroup();
	unit Picked;
	player p = GetOwningPlayer(caster);
	effect ef;
	integer lopa;
	real xnew;
	real ynew;
	real xcheck;
	real ycheck;
	if (waitcreate > 0) {
		SaveInteger(udg_hash, h, 6, waitcreate);
		if ((waitcreate - (waitcreate / 2) * 2) == 0 && IsTerrainPathable(xcheck, ycheck, PATHING_TYPE_FLYABILITY) == false) {
			SaveEffectHandle(udg_hash, h, counter, ef);
			SaveInteger(udg_hash, h, 9, counter);
		}
	}
	if (wait > 0) {
		SaveInteger(udg_hash, h, 7, wait);
		while (true) {
			if (lopa > counter) break;
			GroupEnumUnitsInRange(gdamage, xnew, ynew, 150., null);
			GroupAddGroup(gdamage, gdamage2);
		}
		while (true) {
			if (Picked == null) break;
			if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, p) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				UnitDamageTarget(caster, Picked, (damage / 25.), false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				if ((wait - (wait / $F) * $F) == 0) {
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\FlameStrike\\FlameStrikeEmbers.mdl", Picked, "origin"));
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\FlameStrike\\FlameStrikeEmbers.mdl", Picked, "chest"));
				}
			}
			GroupRemoveUnit(gdamage2, Picked);
		}
	else
		while (true) {
			if (lopa > counter) break;
			DestroyEffect(ef);
		}
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	GroupClear(gdamage);
	DestroyGroup(gdamage);
	GroupClear(gdamage2);
	DestroyGroup(gdamage2);
}
nothing Trig_Fire_Circle_Actions() {
	unit caster = GetSpellAbilityUnit();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	real angle = GetUnitFacing(caster);
	real xt = x + 500. * Cos(angle * bj_DEGTORAD);
	real yt = y + 500. * Sin(angle * bj_DEGTORAD);
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	integer waitcreate = 20 * 2;
	integer wait = 390;
	integer counter = 9;
	real damage = 40. + 20. * CountPlayersInForceBJ(udg_IGRAET);
	TimerStart(t, .04, true, Trig_Fire_Circle_Periodic_Actions);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 2, x);
	SaveReal(udg_hash, h, 3, y);
	SaveReal(udg_hash, h, 4, angle);
	SaveInteger(udg_hash, h, 6, waitcreate);
	SaveInteger(udg_hash, h, 7, wait);
	SaveReal(udg_hash, h, 8, damage);
	SaveInteger(udg_hash, h, 9, counter);
}
boolean Trig_Fire_Circle_Conditions() {
	return GetSpellAbilityId() == 'A004';
}
nothing InitTrig_Fire_Circle() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Fire_Circle, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Fire_Circle, Condition(Trig_Fire_Circle_Conditions));
	TriggerAddAction(gg_trg_Fire_Circle, Trig_Fire_Circle_Actions);
}
nothing Trig_Fire_Meteor_Move_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster;
	real damage;
	real stuntime;
	integer wait = LoadInteger(udg_hash, h, 4);
	unit circle;
	effect ef;
	real xt;
	real yt;
	player p;
	group g;
	unit Picked;
	unit dammi;
	if (wait > 0) {
		SaveInteger(udg_hash, h, 4, wait);
		if (wait == 24) {
			DestroyEffect(AddSpecialEffect("Effects\\MeteorStrike.mdl", xt, yt));
		}
	else
		DestroyEffect(ef);
		RemoveUnit(circle);
		GroupEnumUnitsInRange(g, xt, yt, 200., null);
		UnitApplyTimedLife(dammi, 'BTLF', 2.);
		UnitAddAbility(dammi, 'A0O5');
		IssuePointOrderById(dammi, $D0208, xt, yt);
		while (true) {
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				StunUnitTimed(Picked, stuntime);
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Effects\\FireBall.mdl", Picked, "chest"));
			}
			GroupRemoveUnit(g, Picked);
		}
		DestroyEffect(ef);
		GroupClear(g);
		DestroyGroup(g);
		DestroyTimer(t);
		FlushChildHashtable(udg_hash, h);
	}
}
nothing Trig_Fire_Meteor_Actions() {
	unit caster = GetSpellAbilityUnit();
	location loc = GetSpellTargetLoc();
	real xt = GetLocationX(loc);
	real yt = GetLocationY(loc);
	real damage = 200. + 40. * CountPlayersInForceBJ(udg_IGRAET);
	real stuntime = 4.;
	real time = 3.;
	unit circle = CreateUnit(GetOwningPlayer(caster), 'h00U', xt, yt, 270.);
	effect ef = AddSpecialEffectTarget("Abilities\\Spells\\Orc\\CommandAura\\CommandAuraTarget.mdl", circle, "origin");
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	SetUnitScale(circle, 4., 4., 4.);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 2, damage);
	SaveReal(udg_hash, h, 3, stuntime);
	SaveInteger(udg_hash, h, 4, R2I(time / .03));
	SaveUnitHandle(udg_hash, h, 6, circle);
	SaveEffectHandle(udg_hash, h, 7, ef);
	SaveReal(udg_hash, h, $B, xt);
	SaveReal(udg_hash, h, $C, yt);
	TimerStart(t, .03, true, Trig_Fire_Meteor_Move_Actions);
	RemoveLocation(loc);
}
boolean Trig_Fire_Meteor_Conditions() {
	return GetSpellAbilityId() == 'A0O4';
}
nothing InitTrig_Fire_Meteor() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Fire_Meteor, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Fire_Meteor, Condition(Trig_Fire_Meteor_Conditions));
	TriggerAddAction(gg_trg_Fire_Meteor, Trig_Fire_Meteor_Actions);
}
nothing Trig_Upgrade_Summons_Actions() {
	unit summon = GetEnteringUnit();
	integer h = GetUnitTypeId(summon);
	if (h == 'n00L') {
		SetAttackAbilityLevel(summon, 5 * CountPlayersInForceBJ(udg_IGRAET));
		SetUnitMaxState(summon, UNIT_STATE_MAX_LIFE, R2I(75. * CountPlayersInForceBJ(udg_IGRAET)));
	}
	if (h == 'n00M') {
		SetAttackAbilityLevel(summon, 3 * CountPlayersInForceBJ(udg_IGRAET));
		SetUnitMaxState(summon, UNIT_STATE_MAX_LIFE, R2I(30. * CountPlayersInForceBJ(udg_IGRAET)));
	}
	if (h == 'n00N') {
		SetAttackAbilityLevel(summon, $C * CountPlayersInForceBJ(udg_IGRAET));
		SetUnitMaxState(summon, UNIT_STATE_MAX_LIFE, R2I(100. * CountPlayersInForceBJ(udg_IGRAET)));
	}
}
boolean Trig_Upgrade_Summons_Conditions() {
	return GetOwningPlayer(GetEnteringUnit()) == Player($B);
}
nothing InitTrig_Upgrade_Summons() {
	region rectRegion = CreateRegion();
	RegionAddRect(rectRegion, gg_rct_6);
	TriggerRegisterEnterRegion(gg_trg_Upgrade_Summons, rectRegion, null);
	TriggerAddCondition(gg_trg_Upgrade_Summons, Condition(Trig_Upgrade_Summons_Conditions));
	TriggerAddAction(gg_trg_Upgrade_Summons, Trig_Upgrade_Summons_Actions);
}
boolean Trig_UseBeornSpells_Is_Enemy_Condition() {
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405) && (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) && (IsPlayerEnemy(udg_Temp_Player[1], GetOwningPlayer(GetFilterUnit())))) != null;
}
boolean Trig_UseBeornSpells_Is_Ally_Condition() {
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405) && (GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) < GetUnitState(GetFilterUnit(), UNIT_STATE_MAX_LIFE) * .6) && (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) && (IsPlayerAlly(udg_Temp_Player[1], GetOwningPlayer(GetFilterUnit())))) != null;
}
boolean Trig_UseBeornSpells_Condition() {
	return (IsPlayerInForce(GetOwningPlayer(GetFilterUnit()), udg_Players_Enemy_Group));
}
nothing Trig_UseBeornSpells_Actions() {
	group gall = CreateGroup();
	group g;
	group g2;
	unit Picked;
	unit target;
	real x;
	real y;
	real dist;
	real angle;
	GroupEnumUnitsInRect(gall, bj_mapInitialPlayableArea, Condition(Trig_UseBeornSpells_Condition));
	GroupToGroup(gall, g);
	while (true) {
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A0OD') > 0) && GetRandomInt(1, 2) == 1) {
			GroupEnumUnitsInRange(g2, x, y, 600., Condition(Trig_UseBeornSpells_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D00CB, target);
			}
			GroupClear(g2);
			DestroyGroup(g2);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	GroupToGroup(gall, g);
	while (true) {
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A0OC') > 0) && GetRandomInt(1, 2) == 1) {
			GroupEnumUnitsInRange(g2, x, y, 575., Condition(Trig_UseBeornSpells_Is_Ally_Condition));
			RandomUnitFromGroup(1, g2);
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D00C0, target);
			}
			GroupClear(g2);
			DestroyGroup(g2);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	GroupToGroup(gall, g);
	while (true) {
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A0OF') > 0) && GetRandomInt(1, 3) <= 2) {
			GroupEnumUnitsInRange(g2, x, y, 300., Condition(Trig_UseBeornSpells_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D00BD, target);
			}
			GroupClear(g2);
			DestroyGroup(g2);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	GroupClear(gall);
	DestroyGroup(gall);
}
nothing InitTrig_UseBeornSpells() {
	TriggerRegisterTimerEvent(gg_trg_UseBeornSpells, 1., true);
	TriggerAddAction(gg_trg_UseBeornSpells, Trig_UseBeornSpells_Actions);
}
nothing Trig_Beorn_Den_onbase_Actions() {
	timer tonbase = GetExpiredTimer();
	integer honbase = GetHandleId(tonbase);
	integer ishod = LoadInteger(udg_hash, honbase, 3);
	unit boss = udg_BeornBoss;
	group gruppa = CreateGroup();
	unit Picked;
	real xc = GetRectCenterX(gg_rct_Respawn_Heroes);
	real yc = GetRectCenterY(gg_rct_Respawn_Heroes);
	texttag txt;
	real vel = .0221875;
	real angle = 45. + GetRandomReal(.0, 90.);
	real xvel = vel * Cos(angle * bj_DEGTORAD);
	real yvel = vel * Sin(angle * bj_DEGTORAD);
	integer dead = 0;
	real perekluchatel = .1;
	group g1 = CreateGroup();
	group g2 = CreateGroup();
	group g3 = CreateGroup();
	group g4 = CreateGroup();
	group g = CreateGroup();
	group grp = CreateGroup();
	integer lopb = 0;
	integer lopa = 0;
	RemoveUnit(udg_EnergyWallUnit[$A]);
	RemoveUnit(udg_EnergyWallUnit[$B]);
	while (true) {
		if (lopb > $B) break;
		RemoveUnit(udg_EnergyWallUnit[lopb]);
	}
	while (true) {
		if (lopa > $B) break;
		while (true) {
			if (lopb > 7) break;
			RemoveDestructable(udg_EnergyWallBlock[lopa * 7 + lopb]);
		}
	}
	GroupEnumUnitsInRange(grp, 0, 0, 99999, null);
	KillSummonsAndIllusions(grp);
	DisableTrigger(gg_trg_UseBeornSpells);
	ShowAndFlushAllPlayerDamage(false);
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
	CinematicModeExBJ(false, bj_FORCE_ALL_PLAYERS, bj_CINEMODE_INTERFACEFADE);
	CinematicFadeBJ(0, 5., "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0);
	while (true) {
		if (Picked == null) break;
		if (perekluchatel >= 0) {
		else
		}
		ReviveHero(Picked, xc, yc, true);
		SetUnitPosition(Picked, xc, yc);
		SetUnitFacing(Picked, 270.);
		SetUnitState(Picked, UNIT_STATE_LIFE, $540BE3FF);
		SetUnitState(Picked, UNIT_STATE_MANA, $540BE3FF);
		if (ishod == 2) {
			SetTextTagText(txt, "|cFFFFFF00+800|r", .045);
			SetTextTagPos(txt, GetUnitX(Picked), GetUnitY(Picked), .0);
			SetTextTagColor(txt, 0, 0, 0, 50);
			SetTextTagVelocity(txt, xvel, yvel);
			SetTextTagPermanent(txt, false);
			SetTextTagLifespan(txt, 4.);
			SetTextTagFadepoint(txt, .0);
			SetHeroStr(Picked, GetHeroStr(Picked, false) + 8, true);
			SetHeroAgi(Picked, GetHeroAgi(Picked, false) + 8, true);
			SetHeroInt(Picked, GetHeroInt(Picked, false) + 8, true);
			SetPlayerState(GetOwningPlayer(Picked), PLAYER_STATE_RESOURCE_GOLD, (GetPlayerState(GetOwningPlayer(Picked), PLAYER_STATE_RESOURCE_GOLD) + 800));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl", Picked, "overhead"));
			if (GetLocalPlayer() == GetOwningPlayer(Picked)) {
				DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Вы получили " + udg_ColorString[23] + I2S(800) + " золота|r!!!");
				DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Все характеристики вашего героя повышены на |cff99ccff8!|r");
			}
		}
		if ((GetLocalPlayer() == GetOwningPlayer(Picked))) {
			ResetToGameCamera(.0);
		}
		if (ishod == 1) {
			DisplayTextToPlayer(GetOwningPlayer(Picked), 0, 0, "|cFFFF0000ВЫ ПРОИГРАЛИ БИТВУ С БЕОРНАМИ!!!|r");
		else
			DisplayTextToPlayer(GetOwningPlayer(Picked), 0, 0, "|cFFFFFF00ВЫ ПОБЕДИЛИ В БИТВЕ С БЕОРНАМИ!!!|r");
		}
		if ((GetLocalPlayer() == GetOwningPlayer(Picked))) {
			ResetToGameCamera(.0);
			PanCameraToTimed(xc, yc, .0);
			SelectUnit(Picked, true);
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	EnableTrigger(gg_trg_Hero_Dead);
	GroupEnumUnitsInRect(g1, gg_rct_Les_1, null);
	GroupEnumUnitsInRect(g2, gg_rct_Les1_Dop1, null);
	GroupEnumUnitsInRect(g3, gg_rct_Les1_Dop2, null);
	GroupAddGroup(g1, g);
	GroupAddGroup(g2, g);
	GroupAddGroup(g3, g);
	GroupEnumUnitsInRange(g4, .0, .0, 999999., null);
	while (true) {
		if (Picked == null) break;
		if (GetUnitTypeId(Picked) == 'n01N' || GetUnitTypeId(Picked) == 'n01R' || GetUnitTypeId(Picked) == 'n01P') {
			GroupAddUnit(g, Picked);
		}
		GroupRemoveUnit(g4, Picked);
	}
	DestroyGroup(g4);
	while (true) {
		if (Picked == null) break;
		if (GetUnitTypeId(Picked) != 'h00C' && GetUnitTypeId(Picked) != 'h00B' && GetUnitTypeId(Picked) != 'h00U') {
			RemoveUnit(Picked);
		}
		GroupRemoveUnit(g, Picked);
	}
	StartTimerBJ(udg_Timer_Nomera_Volni, false, 50.);
	CreateTimerDialogBJ(udg_Timer_Nomera_Volni, ("Волна № |cFFFF0000" + (I2S(udg_Nomer_samoi_volni) + "|r")));
	TimerDialogSetTimeColorBJ(udg_TimerDialog_Nomera_Volni, 'd', 90., 30., 20.);
	RemoveUnit(boss);
	DestroyGroup(gruppa);
	FlushChildHashtable(udg_hash, honbase);
	DestroyTimer(tonbase);
	DisableTrigger(gg_trg_Start_Beorn_Den);
}
nothing Trig_Beorn_Den_end_Actions() {
	timer tend = GetExpiredTimer();
	integer hend = GetHandleId(tend);
	unit boss = udg_BeornBoss;
	integer lop = 0;
	integer ishod = udg_Ishod_S_Beornami;
	timer tonbase = CreateTimer();
	integer honbase = GetHandleId(tonbase);
	group g1 = CreateGroup();
	group g2 = CreateGroup();
	group g22 = CreateGroup();
	group g3 = CreateGroup();
	group g = CreateGroup();
	group gg;
	unit Picked;
	DestroyEffect(LoadEffectHandle(udg_hash, GetHandleId(boss), $87));
	SaveUnitHandle(udg_hash, honbase, 1, boss);
	SaveInteger(udg_hash, honbase, 3, ishod);
	GroupEnumUnitsInRect(g1, gg_rct_Les_1, null);
	GroupEnumUnitsInRect(g2, gg_rct_Les1_Dop1, null);
	GroupEnumUnitsInRect(g3, gg_rct_Les1_Dop2, null);
	GroupAddGroup(g1, g);
	GroupAddGroup(g2, g);
	GroupAddGroup(g3, g);
	while (true) {
		if (lop > 9) break;
		if ((GetLocalPlayer() == Player(lop))) {
			CameraSetupApplyForceDuration(gg_cam_Camera_Beorn_Den1, true, .0);
			SetCameraRotateMode(GetRectCenterX(gg_rct_Beorn_Boss_Area), GetRectCenterY(gg_rct_Beorn_Boss_Area), bj_DEGTORAD * 360., 5.);
		}
	}
	TimerStart(tonbase, 5., false, Trig_Beorn_Den_onbase_Actions);
	if (ishod == 1) {
		IssuePointOrderById(boss, $D0012, GetRectCenterX(gg_rct_Beorn_Boss_Area), GetRectCenterY(gg_rct_Beorn_Boss_Area));
	else
		GroupAddGroup(udg_PortalCastersMagi, gg);
		while (true) {
			if (Picked == null) break;
			UnitAddAbility(Picked, 'A0OL');
			GroupRemoveUnit(gg, Picked);
		}
		DestroyGroup(gg);
		while (true) {
			if (Picked == null) break;
			if (GetOwningPlayer(Picked) == Player($B)) {
				KillUnit(Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
	}
	GroupEnumUnitsInRange(g22, 0, 0, 99999, null);
	KillSummonsAndIllusions(g22);
	CinematicModeExBJ(true, bj_FORCE_ALL_PLAYERS, bj_CINEMODE_INTERFACEFADE);
	CinematicFadeBJ(1, 5., "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1);
	FlushChildHashtable(udg_hash, hend);
	DestroyTimer(tend);
	DestroyGroup(g);
}
nothing Trig_Beorn_Den_Boss_hpcheck_Actions() {
	unit boss = udg_BeornBoss;
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	integer maxwait = LoadInteger(udg_hash, h, 1);
	integer wait = LoadInteger(udg_hash, h, 2);
	integer cdskill = LoadInteger(udg_hash, h, 3);
	integer itemrand = R2I($A + 5 * CountPlayersInForceBJ(udg_IGRAET));
	real itemx = (GetRandomReal(1000., 1650.));
	real itemy = (GetRandomReal(-9800., -10200.));
	unit beorn;
	if (GetUnitState(boss, UNIT_STATE_LIFE) > .405 && udg_BeornBossFightEnd == false) {
		if (GetRandomInt(1, 'd') <= itemrand) {
			CreatePotion(itemx, itemy, 1, 4);
		}
		if (cdskill < 8) {
			SaveInteger(udg_hash, h, 3, cdskill + 1);
		}
		if (cdskill >= 8) {
			IssueImmediateOrderById(boss, $D0105);
			SaveInteger(udg_hash, h, 3, 0);
		}
		if (wait < maxwait) {
			SaveInteger(udg_hash, h, 2, wait + 1);
		}
		if (wait >= maxwait) {
			SaveInteger(udg_hash, h, 2, 0);
			UnitApplyTimedLife(beorn, 'BTLF', 60.);
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl", itemx, itemy));
		}
	else
		DestroyTimer(t);
	}
}
nothing Trig_Beorn_Den_HeroInHeroArea_Check_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	integer lopb;
	group gruppa = CreateGroup();
	group g2;
	unit Picked;
	real x;
	real y;
	integer countrct = 0;
	real dist = 1.;
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
	while (true) {
		if (Picked == null) break;
		if ((GetRectMinX(gg_rct_Beorn_Boss_Area) <= x) && (x <= GetRectMaxX(gg_rct_Beorn_Boss_Area)) && (GetRectMinY(gg_rct_Beorn_Boss_Area) <= y) && (y <= GetRectMaxY(gg_rct_Beorn_Boss_Area))) {
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	if (countrct == 1) {
		CreateEnergyWall($A, $B);
		GroupClear(gruppa);
		DestroyGroup(gruppa);
		GroupEnumUnitsInRange(g2, 0, 0, 99999, null);
		KillSummonsAndIllusions(g2);
		GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
		while (true) {
			if (Picked == null) break;
			SetUnitPosition(Picked, 1320. + dist, -9540.);
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl", 1320. + dist, -9540.));
			if (dist > .0) {
			else
			}
			SetUnitFacing(Picked, 270.);
			if ((GetLocalPlayer() == GetOwningPlayer(Picked))) {
				CameraSetupApplyForceDuration(gg_cam_Camera_Beorn_Den6, true, 1.);
				ClearSelection();
				SelectUnit(Picked, true);
			}
			GroupRemoveUnit(gruppa, Picked);
		}
		SetAttackAbilityLevel(udg_BeornBoss, $F * CountPlayersInForceBJ(udg_IGRAET));
		SetArmorAbilityLevel(udg_BeornBoss, 3 * CountPlayersInForceBJ(udg_IGRAET));
		SetUnitMaxState(udg_BeornBoss, UNIT_STATE_MAX_LIFE, R2I(800. * CountPlayersInForceBJ(udg_IGRAET)));
		SetUnitInvulnerable(udg_BeornBoss, false);
		IssueImmediateOrderById(udg_BeornBoss, $D0004);
		DestroyTimer(t);
		SaveInteger(udg_hash, h, 1, R2I(22. - CountPlayersInForceBJ(udg_IGRAET) * 2.));
		SaveInteger(udg_hash, h, 2, 0);
		SaveInteger(udg_hash, h, 3, 0);
		TimerStart(t, 1., true, Trig_Beorn_Den_Boss_hpcheck_Actions);
	}
	GroupClear(gruppa);
	DestroyGroup(gruppa);
}
nothing Trig_Beorn_Den_Shamans_HP_Check_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit sh1 = LoadUnitHandle(udg_hash, h, 1);
	unit sh2 = LoadUnitHandle(udg_hash, h, 2);
	unit sh3 = LoadUnitHandle(udg_hash, h, 3);
	integer lopb;
	if ((GetUnitState(sh1, UNIT_STATE_LIFE) < .0 || sh1 == null) && (GetUnitState(sh2, UNIT_STATE_LIFE) < .0 || sh2 == null) && (GetUnitState(sh3, UNIT_STATE_LIFE) < .0 || sh3 == null)) {
		DestroyTimer(t);
		RemoveUnit(udg_EnergyWallUnit[$A]);
		RemoveUnit(udg_EnergyWallUnit[$B]);
		while (true) {
			if (lopb > 7) break;
			RemoveDestructable(udg_EnergyWallBlock[63 + lopb]);
			RemoveDestructable(udg_EnergyWallBlock[70 + lopb]);
		}
		TimerStart(t, 1., true, Trig_Beorn_Den_HeroInHeroArea_Check_Actions);
	}
}
nothing Trig_Beorn_Shamans_Animation_Check_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit sh1 = LoadUnitHandle(udg_hash, h, 1);
	if (GetUnitState(sh1, UNIT_STATE_LIFE) > .405) {
		SetUnitAnimationByIndex(sh1, 3);
	else
		DestroyTimer(t);
		FlushChildHashtable(udg_hash, h);
	}
}
nothing Trig_Beorn_Den_HP_Check_Actions() {
	timer t = GetExpiredTimer();
	integer players = CountPlayersInForceBJ(udg_IGRAET);
	integer lopa = 1;
	integer countmelee = 1 + R2I(players / 4);
	real dist = 1.;
	integer h;
	unit u;
	timer t1;
	integer h1;
	if (GetUnitState(udg_BeornDenHouse[1], UNIT_STATE_LIFE) < .405 && GetUnitState(udg_BeornDenHouse[2], UNIT_STATE_LIFE) < .405) {
		DestroyTimer(t);
		UnitAddAbility(u, 'Abun');
		UnitAddType(u, UNIT_TYPE_PEON);
		PauseUnit(u, true);
		SetUnitAnimationByIndex(u, 3);
		SetUnitMoveSpeed(u, 0);
		SaveUnitHandle(udg_hash, h1, 1, u);
		TimerStart(t1, 1., true, Trig_Beorn_Shamans_Animation_Check_Actions);
		SaveUnitHandle(udg_hash, h, 1, u);
		while (true) {
			if (lopa > countmelee) break;
			CreateUnit(Player($B), 'n01R', 1900. + dist, -8000., 270.);
			if (dist > .0) {
			else
			}
		}
		UnitAddAbility(u, 'Abun');
		UnitAddType(u, UNIT_TYPE_PEON);
		PauseUnit(u, true);
		SetUnitAnimationByIndex(u, 3);
		SetUnitMoveSpeed(u, 0);
		SaveUnitHandle(udg_hash, h1, 1, u);
		TimerStart(t1, 1., true, Trig_Beorn_Shamans_Animation_Check_Actions);
		SaveUnitHandle(udg_hash, h, 2, u);
		while (true) {
			if (lopa > countmelee) break;
			CreateUnit(Player($B), 'n01R', 2400. + dist, -8600., 90.);
			if (dist > .0) {
			else
			}
		}
		UnitAddAbility(u, 'Abun');
		UnitAddType(u, UNIT_TYPE_PEON);
		PauseUnit(u, true);
		SetUnitAnimationByIndex(u, 3);
		SetUnitMoveSpeed(u, 0);
		SaveUnitHandle(udg_hash, h, 3, u);
		SaveUnitHandle(udg_hash, h1, 1, u);
		TimerStart(t1, 1., true, Trig_Beorn_Shamans_Animation_Check_Actions);
		while (true) {
			if (lopa > countmelee) break;
			CreateUnit(Player($B), 'n01R', 850. + dist, -8700., .0);
			if (dist > .0) {
			else
			}
		}
		TimerStart(t, 1., true, Trig_Beorn_Den_Shamans_HP_Check_Actions);
	}
}
nothing Trig_Beorn_Den_Create_Beorns2_Actions() {
	timer t = GetExpiredTimer();
	integer players = CountPlayersInForceBJ(udg_IGRAET);
	integer countmelee = 1 + R2I(players / 3);
	integer countrange = 1 + R2I(players / 3);
	integer lopa = 1;
	real dist = 1.;
	unit u;
	unit hero;
	group g = CreateGroup();
	if (GetUnitState(udg_BeornDenHouse[2], UNIT_STATE_LIFE) > .0) {
		GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, g);
		while (true) {
			if (lopa > countmelee) break;
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl", GetUnitX(u), GetUnitY(u)));
			RandomUnitFromGroup(1, g);
			IssuePointOrderById(u, $D000F, GetUnitX(hero), GetUnitY(hero));
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl", GetUnitX(u), GetUnitY(u)));
			IssuePointOrderById(u, $D000F, GetUnitX(hero), GetUnitY(hero));
			GroupClear(g);
			DestroyGroup(g);
			if (dist > .0) {
			else
			}
		}
		TimerStart(t, 30., false, Trig_Beorn_Den_Create_Beorns2_Actions);
	else
		DestroyTimer(t);
	}
}
nothing Trig_Beorn_Den_Create_Beorns_Actions() {
	timer t = GetExpiredTimer();
	integer players = CountPlayersInForceBJ(udg_IGRAET);
	integer countmelee = 1 + R2I(players / 3);
	integer countrange = 1 + R2I(players / 3);
	integer lopa = 1;
	real dist = 1.;
	unit u;
	unit hero;
	group g = CreateGroup();
	if (GetUnitState(udg_BeornDenHouse[1], UNIT_STATE_LIFE) > .0) {
		GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, g);
		while (true) {
			if (lopa > countmelee) break;
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl", GetUnitX(u), GetUnitY(u)));
			RandomUnitFromGroup(1, g);
			IssuePointOrderById(u, $D000F, GetUnitX(hero), GetUnitY(hero));
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl", GetUnitX(u), GetUnitY(u)));
			IssuePointOrderById(u, $D000F, GetUnitX(hero), GetUnitY(hero));
			GroupClear(g);
			DestroyGroup(g);
			if (dist > .0) {
			else
			}
		}
		TimerStart(t, 35., false, Trig_Beorn_Den_Create_Beorns_Actions);
	else
		DestroyTimer(t);
	}
}
nothing Trig_Start_Beorn_Den_5sec_Actions() {
	timer t5sec = GetExpiredTimer();
	integer h5sec = GetHandleId(t5sec);
	unit boss = LoadUnitHandle(udg_hash, h5sec, 1);
	group gruppa = CreateGroup();
	unit Picked;
	timer tfrasa = CreateTimer();
	integer hfrasa = GetHandleId(tfrasa);
	timer thpcheck = CreateTimer();
	integer stage = 0;
	boolean zaniat = false;
	timer tbeorn = CreateTimer();
	timer tbeorn2 = CreateTimer();
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
	CinematicModeExBJ(false, bj_FORCE_ALL_PLAYERS, bj_CINEMODE_INTERFACEFADE);
	while (true) {
		if (Picked == null) break;
		PauseUnit(Picked, false);
		if ((GetLocalPlayer() == GetOwningPlayer(Picked))) {
			ClearSelection();
			SelectUnit(Picked, true);
			ResetToGameCamera(.0);
			PanCameraToTimed(2090., -8300., .0);
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	TimerStart(thpcheck, 1., true, Trig_Beorn_Den_HP_Check_Actions);
	TimerStart(tbeorn, 2., false, Trig_Beorn_Den_Create_Beorns_Actions);
	TimerStart(tbeorn2, 17., false, Trig_Beorn_Den_Create_Beorns2_Actions);
	DestroyTimer(t5sec);
	FlushChildHashtable(udg_hash, h5sec);
	GroupClear(gruppa);
	DestroyGroup(gruppa);
}
nothing Trig_Start_Beorn_Den_6sec_Actions() {
	timer t3sec = GetExpiredTimer();
	integer h3sec = GetHandleId(t3sec);
	timer t5sec = CreateTimer();
	integer h5sec = GetHandleId(t5sec);
	unit boss = LoadUnitHandle(udg_hash, h3sec, 1);
	group gruppa = CreateGroup();
	unit Picked;
	unit support = CreateUnit(Player($F), 'h00J', .0, .0, .0);
	UnitApplyTimedLife(support, 'BTLF', 20.);
	SaveUnitHandle(udg_hash, h5sec, 1, boss);
	TimerStart(t5sec, 7., false, Trig_Start_Beorn_Den_5sec_Actions);
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
	while (true) {
		if (Picked == null) break;
		if ((GetLocalPlayer() == GetOwningPlayer(Picked))) {
			CameraSetupApplyForceDuration(gg_cam_Camera_Beorn_Den3, true, .0);
			CameraSetupApplyForceDuration(gg_cam_Camera_Beorn_Den4, true, 7.);
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS, support, "Помощник", null, "|cff99ccffДля этого уничтожьте две Хижины Беорнов, а затем... Ну, как-нибудь уберите магическую защиту и войдите в логово Старейшины Беорнов. Удачи...|r", 0, 7., false);
	DestroyTimer(t3sec);
	FlushChildHashtable(udg_hash, h3sec);
}
nothing Trig_Start_Beorn_Den_4sec_Actions() {
	timer t3sec = GetExpiredTimer();
	integer h3sec = GetHandleId(t3sec);
	timer t6sec = CreateTimer();
	integer h6sec = GetHandleId(t6sec);
	unit boss = LoadUnitHandle(udg_hash, h3sec, 1);
	unit support = CreateUnit(Player($F), 'h00J', .0, .0, .0);
	UnitApplyTimedLife(support, 'BTLF', 20.);
	SaveUnitHandle(udg_hash, h6sec, 1, boss);
	TimerStart(t6sec, 8., false, Trig_Start_Beorn_Den_6sec_Actions);
	TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS, support, "Помощник", null, "|cff99ccffУничтожьте Старейшину Беорнов, для того чтобы получить награду золотом, бонусы для своего героя и усилить стражей-заклинателей на базе|r", 0, 8., false);
	DestroyTimer(t3sec);
	FlushChildHashtable(udg_hash, h3sec);
}
nothing Trig_Start_Beorn_Den_Check_Rects_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit boss = LoadUnitHandle(udg_hash, h, 1);
	group gruppa = CreateGroup();
	unit Picked;
	real x;
	real y;
	integer countrct;
	if (GetUnitState(boss, UNIT_STATE_LIFE) > .0) {
		if ((GetRectMinX(gg_rct_Beorn_Boss_Area2) <= x) && (x <= GetRectMaxX(gg_rct_Beorn_Boss_Area2)) && (GetRectMinY(gg_rct_Beorn_Boss_Area2) <= y) && (y <= GetRectMaxY(gg_rct_Beorn_Boss_Area2))) {
		else
			SetUnitPosition(boss, 1400., -9900.);
			SetUnitFacing(boss, 90.);
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl", 1400., -9900.));
		}
		GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
		while (true) {
			if (Picked == null) break;
			if ((GetRectMinX(gg_rct_Les_1) <= x) && (x <= GetRectMaxX(gg_rct_Les_1)) && (GetRectMinY(gg_rct_Les_1) <= y) && (y <= GetRectMaxY(gg_rct_Les_1))) {
			}
			if ((GetRectMinX(gg_rct_Les1_Dop1) <= x) && (x <= GetRectMaxX(gg_rct_Les1_Dop1)) && (GetRectMinY(gg_rct_Les1_Dop1) <= y) && (y <= GetRectMaxY(gg_rct_Les1_Dop1))) {
			}
			if ((GetRectMinX(gg_rct_Les1_Dop2) <= x) && (x <= GetRectMaxX(gg_rct_Les1_Dop2)) && (GetRectMinY(gg_rct_Les1_Dop2) <= y) && (y <= GetRectMaxY(gg_rct_Les1_Dop2))) {
			}
			if (countrct == 0) {
				if ((GetLocalPlayer() == GetOwningPlayer(Picked))) {
					ClearSelection();
					SelectUnit(Picked, true);
					CameraSetupApplyForceDuration(gg_cam_Camera_Beorn_Den5, true, .0);
				}
				SetUnitPosition(Picked, 2090., -8300.);
				SetUnitFacing(Picked, 180.);
			}
			GroupRemoveUnit(gruppa, Picked);
		}
	else
		DestroyTimer(t);
		FlushChildHashtable(udg_hash, h);
	}
	GroupClear(gruppa);
	DestroyGroup(gruppa);
}
nothing Trig_Start_Beorn_Den_Check_Alive_Units_Actions() {
	timer t = GetExpiredTimer();
	group gruppa = CreateGroup();
	unit Picked;
	integer ishod = 0;
	boolean alive = false;
	boolean start = false;
	if (GetUnitState(udg_BeornBoss, UNIT_STATE_LIFE) < .405) {
	}
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
	while (true) {
		if (Picked == null) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405) {
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	if (alive == false) {
	}
	if (start) {
		DestroyTimer(t);
		TimerStart(t, 1., false, Trig_Beorn_Den_end_Actions);
	}
	GroupClear(gruppa);
	DestroyGroup(gruppa);
}
nothing Trig_Start_Beorn_Den_Actions() {
	integer random;
	integer end = 1;
	group gruppa = CreateGroup();
	unit Picked;
	real dist = 1.;
	unit boss = CreateUnit(Player($B), 'n01S', 1400., -9950., 90.);
	timer t3sec = CreateTimer();
	integer h3sec = GetHandleId(t3sec);
	timer tobl = CreateTimer();
	integer hobl = GetHandleId(tobl);
	timer talive = CreateTimer();
	group grp = CreateGroup();
	GroupEnumUnitsInRange(grp, 0, 0, 99999, null);
	KillSummonsAndIllusions(grp);
	CreateEnergyWall(1, $B);
	SetUnitInvulnerable(boss, true);
	CreateUnit(Player($B), 'n01R', 1200., -9900., 90.);
	IssueImmediateOrderById(bj_lastCreatedUnit, $D0019);
	CreateUnit(Player($B), 'n01R', 1600., -9900., 90.);
	IssueImmediateOrderById(bj_lastCreatedUnit, $D0019);
	DisableTrigger(gg_trg_Hero_Dead);
	IssueImmediateOrderById(udg_BeornBoss, $D0019);
	EnableTrigger(gg_trg_UseBeornSpells);
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
	CinematicModeExBJ(true, bj_FORCE_ALL_PLAYERS, bj_CINEMODE_INTERFACEFADE);
	CinematicFadeBJ(1, .0, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1);
	CinematicFadeBJ(0, 4., "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1);
	while (true) {
		if (Picked == null) break;
		SetUnitPosition(Picked, 2090., (-8300. + dist));
		if (dist > .0) {
		else
		}
		SetUnitFacing(Picked, 180.);
		PauseUnit(Picked, true);
		ClearSelection();
		if ((GetLocalPlayer() == GetOwningPlayer(Picked))) {
			CameraSetupApplyForceDuration(gg_cam_Camera_Beorn_Den1, true, .0);
			CameraSetupApplyForceDuration(gg_cam_Camera_Beorn_Den2, true, 12.);
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	SaveUnitHandle(udg_hash, h3sec, 1, boss);
	TimerStart(t3sec, 4., false, Trig_Start_Beorn_Den_4sec_Actions);
	ShowAndFlushAllPlayerDamage(true);
	TimerStart(udg_TimerShowAndFlushAllPlayerDmg, 10000., false, null);
	SaveUnitHandle(udg_hash, hobl, 1, boss);
	TimerStart(tobl, 1., true, Trig_Start_Beorn_Den_Check_Rects_Actions);
	TimerStart(talive, 1., true, Trig_Start_Beorn_Den_Check_Alive_Units_Actions);
	GroupClear(gruppa);
	DestroyGroup(gruppa);
}
nothing InitTrig_Start_Beorn_Den() {
	TriggerAddAction(gg_trg_Start_Beorn_Den, Trig_Start_Beorn_Den_Actions);
}
nothing Trig_Beorn_Push_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	real xt = GetUnitX(target);
	real yt = GetUnitY(target);
	real angle = bj_RADTODEG * Atan2((yt - y), (xt - x));
	unit dammi;
	UnitDamageTarget(caster, target, 65. + 15. * CountPlayersInForceBJ(udg_IGRAET), false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
	MoveUnit(target, .5, 800., 1200., angle, .0, true);
	UnitApplyTimedLife(dammi, 'BTLF', 1.);
	UnitAddAbility(dammi, 'A0OG');
	IssueTargetOrderById(dammi, $D006B, target);
}
boolean Trig_Beorn_Push_Conditions() {
	return GetSpellAbilityId() == 'A0OF';
}
nothing InitTrig_Beorn_Push() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Beorn_Push, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Beorn_Push, Condition(Trig_Beorn_Push_Conditions));
	TriggerAddAction(gg_trg_Beorn_Push, Trig_Beorn_Push_Actions);
}
nothing Trig_Beorn_Stomp_Actions() {
	unit caster = GetSpellAbilityUnit();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	real radius = 300.;
	real damage = 75. + 25. * CountPlayersInForceBJ(udg_IGRAET);
	player p = GetOwningPlayer(caster);
	group g = CreateGroup();
	unit Picked;
	real dist;
	real angle;
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", x, y));
	GroupEnumUnitsInRange(g, x, y, radius, null);
	while (true) {
		if (Picked == null) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, p) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			StunUnitTimed(Picked, 1.5);
			MoveUnit(Picked, (300. - dist) / 300. + .25, (600. - dist), .0, angle, .0, true);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", Picked, "origin"));
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
}
boolean Trig_Beorn_Stomp_Conditions() {
	return GetSpellAbilityId() == 'A0OH';
}
nothing InitTrig_Beorn_Stomp() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Beorn_Stomp, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Beorn_Stomp, Condition(Trig_Beorn_Stomp_Conditions));
	TriggerAddAction(gg_trg_Beorn_Stomp, Trig_Beorn_Stomp_Actions);
}
boolean Trig_HeroUnitGameSave_Func001C() {
	return (IsUnitType(GetEnteringUnit(), UNIT_TYPE_HERO)) != null;
}
nothing Trig_HeroUnitGameSave_Actions() {
	if ((Trig_HeroUnitGameSave_Func001C())) {
		GroupAddUnit(udg_Gruppa_HeroUnitov_Geroev, GetEnteringUnit());
	}
}
nothing InitTrig_HeroUnitGameSave() {
	TriggerRegisterEnterRectSimple(gg_trg_HeroUnitGameSave, gg_rct_Oblstb_Tavern);
	TriggerAddAction(gg_trg_HeroUnitGameSave, Trig_HeroUnitGameSave_Actions);
}
boolean Trig_INIT_Func001Func001C() {
	return ((IsUnitType(GetEnumUnit(), UNIT_TYPE_STRUCTURE) == false) && (GetUnitTypeId(GetEnumUnit()) != 'h00A')) != null;
}
nothing Trig_INIT_Func001A() {
	if ((Trig_INIT_Func001Func001C())) {
		GroupAddUnit(udg_Gruppa_HeroUnitov_Geroev, GetEnumUnit());
		ForceAddPlayer(udg_IGRAET, GetOwningPlayer(GetEnumUnit()));
	}
}
nothing Trig_INIT_Func002A() {
	ForceAddPlayer(udg_Gruppa_Igrokov_Vibor_Heroev, GetEnumPlayer());
	CameraSetupApplyForPlayer(true, gg_cam_Kamera_na_taverni, GetEnumPlayer(), 0);
	CreateNUnitsAtLoc(1, 'h00A', GetEnumPlayer(), PolarProjectionBJ(GetRectCenter(gg_rct_Oblstb_Tavern), 50., (I2R((1 + GetPlayerId(GetEnumPlayer()))) * 40.)), bj_UNIT_FACING);
}
nothing Trig_INIT_Actions() {
	ForGroupBJ(GetUnitsInRectAll(gg_rct_Oblstb_Tavern), Trig_INIT_Func001A);
	ForForce(udg_IGRAET, Trig_INIT_Func002A);
	SaveInteger(udg_hash, 'H01M', 84, 1);
	SaveInteger(udg_hash, 'O005', 84, 2);
	SaveInteger(udg_hash, 'N012', 84, 3);
	SaveInteger(udg_hash, 'E004', 84, 4);
	SaveInteger(udg_hash, 'H01L', 84, 5);
	SaveInteger(udg_hash, 'E001', 84, 6);
	SaveInteger(udg_hash, 'H01I', 84, 7);
	SaveInteger(udg_hash, 'N00W', 84, 8);
	SaveInteger(udg_hash, 'O000', 84, 9);
	SaveInteger(udg_hash, 'E005', 84, $A);
	SaveInteger(udg_hash, 'E003', 84, $B);
	SaveInteger(udg_hash, 'E007', 84, $C);
	SaveInteger(udg_hash, 'O001', 84, $D);
	SaveInteger(udg_hash, 'E008', 84, $E);
	SaveInteger(udg_hash, 'H00O', 84, $F);
	SaveInteger(udg_hash, 'H00Q', 84, 16);
	SaveInteger(udg_hash, 'N01T', 84, 17);
	SaveInteger(udg_hash, 'H00R', 84, 18);
	while (true) {
		if (bj_forLoopAIndex > bj_forLoopAIndexEnd) break;
	}
}
nothing InitTrig_INIT() {
	TriggerRegisterTimerEventSingle(gg_trg_INIT, 1.);
	TriggerAddAction(gg_trg_INIT, Trig_INIT_Actions);
}
nothing Trig_Pick_Hero_Upgrade_Func006A() {
	SetPlayerTechMaxAllowed(GetEnumPlayer(), GetUnitTypeId(udg_Temp_Unit), 0);
}
nothing Trig_Pick_Hero_Upgrade_Actions() {
	unit hero;
	player p;
	integer heroid;
	integer pid;
	boolean randomed = false;
	integer i;
	if (udg_Hero_Randomed != null) {
	else
	}
	MultiboardSetItemIconBJ(udg_MultiBoard, 1, udg_PlayerNumberInMB[pid], udg_MutliBoardHeroIcon[udg_Temp_Integer[1]]);
	MultiboardSetItemValueBJ(udg_MultiBoard, 6, udg_PlayerNumberInMB[pid], (udg_ColorString[22] + ("1|r")));
	SetPlayerTechMaxAllowed(p, 'HERO', 0);
	ForForce(bj_FORCE_ALL_PLAYERS, Trig_Pick_Hero_Upgrade_Func006A);
	ForceRemovePlayer(udg_Gruppa_Igrokov_Vibor_Heroev, p);
	if ((GetLocalPlayer() == p)) {
		ClearSelection();
		SelectUnit(hero, true);
		CameraSetupApplyForceDuration(gg_cam_Kamera_glavnoi_bazi, true, .0);
	}
	UnitAddItem(hero, bj_lastCreatedItem);
	SetUnitPosition(hero, 1232., -6368.);
	RemoveUnit(udg_DummyHeroPick[pid]);
	FogModifierStart(bj_lastCreatedFogModifier);
	MoveDammiReferencePanel(hero);
	if (heroid == 'H01M') {
		SetUnitColor(hero, PLAYER_COLOR_RED);
		SaveStr(udg_hash, heroid, 91, "melee");
		SaveStr(udg_hash, heroid, 70, "str");
		if (TriggerEvaluate(gg_trg_Guardsman_Load)) {
			TriggerExecute(gg_trg_Guardsman_Load);
		}
	}
	if (heroid == 'O005') {
		SetUnitColor(hero, ConvertPlayerColor($C));
		SaveStr(udg_hash, heroid, 91, "melee");
		SaveStr(udg_hash, heroid, 70, "str");
		ForceAddPlayer(udg_Drenor_Bull_Hint_Player_Group, p);
		if (TriggerEvaluate(gg_trg_Drenor_Bull_Load)) {
			TriggerExecute(gg_trg_Drenor_Bull_Load);
		}
	}
	if (heroid == 'O000') {
		SetUnitColor(hero, PLAYER_COLOR_ORANGE);
		SaveStr(udg_hash, heroid, 91, "melee");
		SaveStr(udg_hash, heroid, 70, "str");
		if (TriggerEvaluate(gg_trg_Paladin_Load)) {
			TriggerExecute(gg_trg_Paladin_Load);
		}
	}
	if (heroid == 'E005') {
		SetUnitColor(hero, PLAYER_COLOR_LIGHT_GRAY);
		SaveStr(udg_hash, heroid, 91, "melee");
		SaveStr(udg_hash, heroid, 70, "str");
		SetUnitAnimation(hero, "stand");
		if (TriggerEvaluate(gg_trg_Stone_Guard_Load)) {
			TriggerExecute(gg_trg_Stone_Guard_Load);
		}
	}
	if (heroid == 'N012') {
		SetUnitColor(hero, PLAYER_COLOR_RED);
		SaveStr(udg_hash, heroid, 91, "melee");
		SaveStr(udg_hash, heroid, 70, "agi");
		if (TriggerEvaluate(gg_trg_BladeMaster_Load)) {
			TriggerExecute(gg_trg_BladeMaster_Load);
		}
	}
	if (heroid == 'E004') {
		SetUnitColor(hero, PLAYER_COLOR_PINK);
		SaveStr(udg_hash, heroid, 91, "melee");
		SaveStr(udg_hash, heroid, 70, "agi");
		if (TriggerEvaluate(gg_trg_Illusionist_Load)) {
			TriggerExecute(gg_trg_Illusionist_Load);
		}
	}
	if (heroid == 'H01L') {
		SetUnitColor(hero, PLAYER_COLOR_BLUE);
		SaveStr(udg_hash, heroid, 91, "ranged");
		SaveStr(udg_hash, heroid, 70, "agi");
		if (TriggerEvaluate(gg_trg_Ranger_Load)) {
			TriggerExecute(gg_trg_Ranger_Load);
		}
	}
	if (heroid == 'E007') {
		SetUnitColor(hero, PLAYER_COLOR_PURPLE);
		SaveStr(udg_hash, heroid, 91, "ranged");
		SaveStr(udg_hash, heroid, 70, "agi");
		if (TriggerEvaluate(gg_trg_MoonWarrior_Load)) {
			TriggerExecute(gg_trg_MoonWarrior_Load);
		}
	}
	if (heroid == 'E001') {
		SetUnitColor(hero, PLAYER_COLOR_YELLOW);
		SaveStr(udg_hash, heroid, 91, "ranged");
		SaveStr(udg_hash, heroid, 70, "int");
		if (TriggerEvaluate(gg_trg_Healer_Load)) {
			TriggerExecute(gg_trg_Healer_Load);
		}
	}
	if (heroid == 'H01I') {
		SetUnitColor(hero, PLAYER_COLOR_CYAN);
		SaveStr(udg_hash, heroid, 91, "ranged");
		SaveStr(udg_hash, heroid, 70, "int");
		if (TriggerEvaluate(gg_trg_Water_Elemental_Load)) {
			TriggerExecute(gg_trg_Water_Elemental_Load);
		}
	}
	if (heroid == 'N00W') {
		SetUnitColor(hero, PLAYER_COLOR_LIGHT_GRAY);
		SaveStr(udg_hash, heroid, 91, "ranged");
		SaveStr(udg_hash, heroid, 70, "int");
		if (TriggerEvaluate(gg_trg_Master_of_Lightnings_Load)) {
			TriggerExecute(gg_trg_Master_of_Lightnings_Load);
		}
	}
	if (heroid == 'E003') {
		SetUnitColor(hero, PLAYER_COLOR_GREEN);
		SaveStr(udg_hash, heroid, 91, "ranged");
		SaveStr(udg_hash, heroid, 70, "int");
		if (TriggerEvaluate(gg_trg_Archdruid_Load)) {
			TriggerExecute(gg_trg_Archdruid_Load);
		}
	}
	if (heroid == 'O001') {
		SetUnitColor(hero, PLAYER_COLOR_ORANGE);
		SaveStr(udg_hash, heroid, 91, "ranged");
		SaveStr(udg_hash, heroid, 70, "int");
		if (TriggerEvaluate(gg_trg_SpiritBreaker_Load)) {
			TriggerExecute(gg_trg_SpiritBreaker_Load);
		}
	}
	if (heroid == 'E008') {
		SetUnitColor(hero, PLAYER_COLOR_LIGHT_BLUE);
		SaveStr(udg_hash, heroid, 91, "melee");
		SaveStr(udg_hash, heroid, 70, "agi");
		if (TriggerEvaluate(gg_trg_Warden_Load)) {
			TriggerExecute(gg_trg_Warden_Load);
		}
	}
	if (heroid == 'H00O') {
		SetUnitColor(hero, PLAYER_COLOR_YELLOW);
		SaveStr(udg_hash, heroid, 91, "melee");
		SaveStr(udg_hash, heroid, 70, "str");
		if (TriggerEvaluate(gg_trg_Marshal_Load)) {
			TriggerExecute(gg_trg_Marshal_Load);
		}
	}
	if (heroid == 'H00Q') {
		SetUnitColor(hero, PLAYER_COLOR_BLUE);
		SaveStr(udg_hash, heroid, 70, "int");
		SaveStr(udg_hash, heroid, 91, "ranged");
		if (TriggerEvaluate(gg_trg_Load_ArchMage)) {
			TriggerExecute(gg_trg_Load_ArchMage);
		}
	}
	if (heroid == 'N01T') {
		SetUnitColor(hero, PLAYER_COLOR_AQUA);
		SaveStr(udg_hash, heroid, 70, "str");
		SaveStr(udg_hash, heroid, 91, "melee");
		if (TriggerEvaluate(gg_trg_Load_Alchemist)) {
			TriggerExecute(gg_trg_Load_Alchemist);
		}
	}
	if (heroid == 'H00R') {
		SetUnitColor(hero, PLAYER_COLOR_LIGHT_BLUE);
		SaveStr(udg_hash, heroid, 91, "ranged");
		SaveStr(udg_hash, heroid, 70, "agi");
		if (TriggerEvaluate(gg_trg_Load_Sniper)) {
			TriggerExecute(gg_trg_Load_Sniper);
		}
	}
	if (randomed == false && IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS)) {
		DisplayTextToPlayer(GetLocalPlayer(), 0, 0, udg_ColorString[pid] + GetPlayerName(p) + "|r выбрал героя: " + udg_Hero_Player_Color_String[pid] + GetUnitName(hero) + "|r");
	}
	if (randomed && IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS)) {
		DisplayTextToPlayer(GetLocalPlayer(), 0, 0, udg_ColorString[pid] + GetPlayerName(p) + "|r наугад выбрал героя: " + udg_Hero_Player_Color_String[pid] + GetUnitName(hero) + "|r");
	}
	if (randomed) {
		SetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) + $FA);
		if ((GetLocalPlayer() == p)) {
			DisplayTimedTextToPlayer(GetLocalPlayer(), 0, 0, 10., "За случайный выбор героя вы получили |cFFFFFF00+250|r золота!");
		}
	}
}
boolean Trig_Pick_Hero_Upgrade_Conditions() {
	return (IsUnitType(GetSoldUnit(), UNIT_TYPE_HERO) && IsPlayerInForce(GetOwningPlayer(GetSoldUnit()), udg_Gruppa_Igrokov_Vibor_Heroev)) != null;
}
nothing InitTrig_Pick_Hero_Upgrade() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Pick_Hero_Upgrade, Player(index), EVENT_PLAYER_UNIT_SELL, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Pick_Hero_Upgrade, Condition(Trig_Pick_Hero_Upgrade_Conditions));
	TriggerAddAction(gg_trg_Pick_Hero_Upgrade, Trig_Pick_Hero_Upgrade_Actions);
}
nothing Trig_Hero_Dead_MultiBoard_Check_Actions() {
	timer tmb = GetExpiredTimer();
	integer htmb = GetHandleId(tmb);
	real time = LoadReal(udg_hash, htmb, 1);
	integer pnumber = LoadInteger(udg_hash, htmb, 2);
	if (time > 0) {
		SaveReal(udg_hash, htmb, 1, time);
		MultiboardSetItemValueBJ(udg_MultiBoard, 2, udg_PlayerNumberInMB[pnumber], (udg_ColorString[pnumber] + GetPlayerName(Player(pnumber - 1)) + "|r (" + udg_ColorString[pnumber] + I2S((R2I(time))) + "|r)"));
	else
		MultiboardSetItemValueBJ(udg_MultiBoard, 2, udg_PlayerNumberInMB[pnumber], (udg_ColorString[pnumber] + GetPlayerName(Player(pnumber - 1)) + "|r"));
		FlushChildHashtable(udg_hash, htmb);
		DestroyTimer(tmb);
	}
}
nothing Trig_Hero_Dead_Timer2_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit u = LoadUnitHandle(udg_hash, h, 1);
	UnitRemoveAbility(u, 'Avul');
	DestroyTimer(t);
	FlushChildHashtable(udg_hash, h);
}
nothing Trig_Hero_Dead_Timer_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit u = LoadUnitHandle(udg_hash, h, 1);
	real x = GetRectCenterX(gg_rct_Respawn_Heroes);
	real y = GetRectCenterY(gg_rct_Respawn_Heroes);
	timerdialog td = LoadTimerDialogHandle(udg_hash, h, 2);
	camerasetup theCam = CreateCameraSetup();
	TimerStart(t, 4., false, Trig_Hero_Dead_Timer2_Actions);
	ReviveHero(u, x, y, true);
	SetUnitState(u, UNIT_STATE_MANA, GetUnitState(u, UNIT_STATE_MAX_MANA));
	SetUnitState(u, UNIT_STATE_LIFE, GetUnitState(u, UNIT_STATE_MAX_LIFE));
	UnitAddAbility(u, 'Avul');
	DisplayTextToPlayer(GetOwningPlayer(u), 500., 500, "|cFFFFFF00Ваш Герой Воскрешен!!!|r");
	if ((GetLocalPlayer() == GetOwningPlayer(u)) && udg_IsGameEnd == false) {
		CameraSetupSetField(theCam, CAMERA_FIELD_TARGET_DISTANCE, GetCameraField(CAMERA_FIELD_TARGET_DISTANCE), 0);
		CameraSetupSetField(theCam, CAMERA_FIELD_FARZ, GetCameraField(CAMERA_FIELD_FARZ), 0);
		CameraSetupSetField(theCam, CAMERA_FIELD_ZOFFSET, GetCameraField(CAMERA_FIELD_ZOFFSET), 0);
		CameraSetupSetField(theCam, CAMERA_FIELD_ANGLE_OF_ATTACK, bj_RADTODEG * GetCameraField(CAMERA_FIELD_ANGLE_OF_ATTACK), 0);
		CameraSetupSetField(theCam, CAMERA_FIELD_FIELD_OF_VIEW, bj_RADTODEG * GetCameraField(CAMERA_FIELD_FIELD_OF_VIEW), 0);
		CameraSetupSetField(theCam, CAMERA_FIELD_ROLL, bj_RADTODEG * GetCameraField(CAMERA_FIELD_ROLL), 0);
		CameraSetupSetField(theCam, CAMERA_FIELD_ROTATION, bj_RADTODEG * GetCameraField(CAMERA_FIELD_ROTATION), 0);
		CameraSetupSetDestPosition(theCam, GetUnitX(u), GetUnitY(u), 0);
		CameraSetupApplyForceDuration(theCam, true, 0);
		ClearSelection();
		SelectUnit(u, true);
	}
	DestroyTimerDialog(td);
}
boolean Trig_Hero_Dead_Conditions() {
	return (IsUnitType(GetDyingUnit(), UNIT_TYPE_HERO) && IsUnitIllusion(GetDyingUnit()) == false && GetPlayerId(GetOwningPlayer(GetDyingUnit())) <= 8 && GetOwningPlayer(GetDyingUnit()) != Player($F) && GetOwningPlayer(GetDyingUnit()) != Player($B)) != null;
}
nothing Trig_Hero_Dead_Actions() {
	timer t = CreateTimer();
	timerdialog td = CreateTimerDialog(t);
	integer h = GetHandleId(t);
	unit u = GetDyingUnit();
	player p = GetOwningPlayer(u);
	integer pnumber = GetPlayerId(p) + 1;
	timer tmb = CreateTimer();
	integer htmb = GetHandleId(tmb);
	real time = 5. + (2. * GetHeroLevel(u));
	if (LoadReal(udg_hash, GetHandleId(u), 't') > .0) {
		SaveReal(udg_hash, GetHandleId(u), 't', .0);
	}
	SaveUnitHandle(udg_hash, h, 1, u);
	SaveTimerDialogHandle(udg_hash, h, 2, td);
	if (pnumber <= 9) {
		MultiboardSetItemValueBJ(udg_MultiBoard, 4, udg_PlayerNumberInMB[pnumber], udg_ColorString[21] + I2S(udg_MultiBoard_Player_Deaths_Count[pnumber]) + "|r");
	}
	TimerStart(t, time, false, Trig_Hero_Dead_Timer_Actions);
	TimerDialogDisplay(td, false);
	TimerDialogSetTitle(td, "Respawn in:");
	if ((GetLocalPlayer() == p)) {
		TimerDialogDisplay(td, true);
		TimerDialogSetTitleColor(td, $FF, $E6, 80, 65);
		TimerDialogSetTimeColor(td, $FF, 45, 45, 20);
	}
	if ((IsPlayerInForce(GetLocalPlayer(), udg_IGRAET))) {
		DisplayTimedTextToPlayer(GetLocalPlayer(), .0, .0, 10., "Герой " + udg_Hero_Player_Color_String[pnumber] + GetUnitName(u) + "|r (" + udg_ColorString[pnumber] + GetPlayerName(p) + "|r) погибает!!!");
	}
	SaveReal(udg_hash, htmb, 1, time);
	SaveInteger(udg_hash, htmb, 2, pnumber);
	TimerStart(tmb, 1., true, Trig_Hero_Dead_MultiBoard_Check_Actions);
}
nothing InitTrig_Hero_Dead() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Hero_Dead, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Hero_Dead, Condition(Trig_Hero_Dead_Conditions));
	TriggerAddAction(gg_trg_Hero_Dead, Trig_Hero_Dead_Actions);
}
nothing Trig_Duel_Checking_On_HighGround_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit hero1 = LoadUnitHandle(udg_hash, h, 1);
	unit hero2 = LoadUnitHandle(udg_hash, h, 2);
	real x1 = GetUnitX(hero1);
	real y1 = GetUnitY(hero1);
	real x2 = GetUnitX(hero2);
	real y2 = GetUnitY(hero2);
	integer h2 = LoadInteger(udg_hash, h, 3);
	if (LoadBoolean(udg_hash, h2, $D) == false) {
		if (!((GetRectMinX(gg_rct_Hero_Arena) <= x1) && (x1 <= GetRectMaxX(gg_rct_Hero_Arena)) && (GetRectMinY(gg_rct_Hero_Arena) <= y1) && (y1 <= GetRectMaxY(gg_rct_Hero_Arena)))) {
			SetUnitPosition(hero1, 2000., 2950.);
			if ((GetLocalPlayer() == GetOwningPlayer(hero1))) {
				PanCameraToTimed(2000., 2950., .0);
			}
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl", 2000., 2950.));
		}
		if (!((GetRectMinX(gg_rct_Hero_Arena) <= x2) && (x2 <= GetRectMaxX(gg_rct_Hero_Arena)) && (GetRectMinY(gg_rct_Hero_Arena) <= y2) && (y2 <= GetRectMaxY(gg_rct_Hero_Arena)))) {
			SetUnitPosition(hero2, 2000., 2950.);
			if ((GetLocalPlayer() == GetOwningPlayer(hero2))) {
				PanCameraToTimed(2000., 2950., .0);
			}
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl", 2000., 2950.));
		}
	else
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
}
nothing Trig_Duel_Timer_Dialog_Destroy_2sec_wait_Actions() {
	timer t2secwait = GetExpiredTimer();
	ExecuteFunc("Trig_Hero_Death_On_Duel_2secwait_Actions");
	DestroyTimer(t2secwait);
}
nothing Trig_Duel_Timer_Dialog_Destroy_Actions() {
	rect rct = gg_rct_Hero_Arena;
	integer h = GetHandleId(rct);
	timer t = GetExpiredTimer();
	integer ht = GetHandleId(t);
	timerdialog td = LoadTimerDialogHandle(udg_hash, ht, 1);
	timer t2secwait = CreateTimer();
	integer counterduel = LoadInteger(udg_hash, h, $A);
	unit hero1 = udg_herounit[LoadInteger(udg_hash, h, counterduel)];
	unit hero2 = udg_herounit[LoadInteger(udg_hash, h, counterduel + 1)];
	player pw = GetOwningPlayer(hero1);
	player pd = GetOwningPlayer(hero2);
	integer gold = $96 + (udg_Nomer_samoi_volni * 60);
	integer xp = 300 + (udg_Nomer_samoi_volni * 'd');
	if (LoadBoolean(udg_hash, h, $D) == false) {
		SaveBoolean(udg_hash, h, $D, true);
		DestroyTimerDialog(td);
		CinematicFadeBJ(1, 2.5, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1);
		TimerStart(t2secwait, 2.5, false, Trig_Duel_Timer_Dialog_Destroy_2sec_wait_Actions);
		SetUnitInvulnerable(hero1, true);
		SetUnitInvulnerable(hero2, true);
		if (IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS)) {
			DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Дуэль закончилась вничью");
		}
		if ((GetLocalPlayer() == pw)) {
			DisplayTextToPlayer(pw, .0, .0, "Дуэль закончилась вничью, ваш герой получaeт |cFFFFFF00" + I2S(xp) + " опыта|r и |cFFFFFF00" + I2S(gold) + " золота|r");
		}
		AddHeroXP(hero1, xp, false);
		SetPlayerState(pw, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(pw, PLAYER_STATE_RESOURCE_GOLD) + gold);
		if ((GetLocalPlayer() == pd)) {
			DisplayTextToPlayer(pw, .0, .0, "Дуэль закончилась вничью, ваш герой получaeт |cFFFFFF00" + I2S(xp) + " опыта|r и |cFFFFFF00" + I2S(gold) + " золота|r");
		}
		AddHeroXP(hero2, xp, false);
		SetPlayerState(pd, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(pd, PLAYER_STATE_RESOURCE_GOLD) + gold);
	}
	DestroyTimer(t);
	FlushChildHashtable(udg_hash, ht);
}
nothing Trig_Duel_Start_Fight_Actions() {
	rect rct = gg_rct_Hero_Arena;
	integer h = GetHandleId(rct);
	integer counterduel = LoadInteger(udg_hash, h, $A);
	unit hero1 = udg_herounit[LoadInteger(udg_hash, h, counterduel)];
	unit hero2 = udg_herounit[LoadInteger(udg_hash, h, counterduel + 1)];
	timer t = CreateTimer();
	timerdialog td = CreateTimerDialog(t);
	integer ht = GetHandleId(t);
	timer t2;
	integer h2;
	SoundForPlayer(GetOwningPlayer(hero1), 4);
	SoundForPlayer(GetOwningPlayer(hero2), 4);
	TimerDialogSetTitle(td, "Дуэль:");
	TimerDialogDisplay(td, true);
	TimerDialogSetTitleColor(td, $FF, $E6, 80, 65);
	TimerDialogSetTimeColor(td, $FF, 0, 0, 20);
	SaveTimerDialogHandle(udg_hash, ht, 1, td);
	SaveTimerHandle(udg_hash, h, $D, t);
	SaveTimerDialogHandle(udg_hash, h, $E, td);
	if (hero1 != null && hero2 != null) {
		PauseUnit(hero1, false);
		PauseUnit(hero2, false);
		IssueTargetOrderById(hero1, $D000F, hero2);
		IssueTargetOrderById(hero2, $D000F, hero1);
		SaveUnitHandle(udg_hash, h2, 1, hero1);
		SaveUnitHandle(udg_hash, h2, 2, hero2);
		SaveInteger(udg_hash, h2, 3, h);
		TimerStart(t2, .5, true, Trig_Duel_Checking_On_HighGround_Actions);
		TimerStart(t, 120., false, Trig_Duel_Timer_Dialog_Destroy_Actions);
	}
	DestroyTimer(GetExpiredTimer());
}
nothing Trig_Duel_TextTag_Size_Increase_Actions() {
	timer ttxt = GetExpiredTimer();
	integer httxt = GetHandleId(ttxt);
	rect rct = gg_rct_Hero_Arena;
	texttag txt = LoadTextTagHandle(udg_hash, httxt, 1);
	integer count = LoadInteger(udg_hash, httxt, 2);
	if (count <= 2) {
		if (count == 0) {
			SetTextTagText(txt, "2", .05);
		}
		if (count == 1) {
			SetTextTagText(txt, "1", .05);
		}
		if (count == 2) {
			SetTextTagText(txt, "FIGHT!", .05);
			SetTextTagPos(txt, GetRectCenterX(rct) - 80., GetRectCenterY(rct), .0);
		}
		SaveInteger(udg_hash, httxt, 2, count);
	else
		DestroyTextTag(txt);
		DestroyTimer(ttxt);
		FlushChildHashtable(udg_hash, httxt);
	}
}
nothing Trig_Duel_Round_Actions() {
	rect rct = gg_rct_Hero_Arena;
	real x = GetRectCenterX(rct);
	real y = GetRectCenterY(rct);
	integer h = GetHandleId(rct);
	integer counterduel = LoadInteger(udg_hash, h, $A);
	integer maxplayers = LoadInteger(udg_hash, h, $B);
	boolean endduels = LoadBoolean(udg_hash, h, $C);
	timer t = CreateTimer();
	integer ht = GetHandleId(t);
	integer number1;
	integer number2;
	unit hero1;
	unit hero2;
	integer i = 1;
	real xc;
	real yc;
	texttag txt;
	timer ttxt;
	real perekluchatel = 0;
	player p1;
	player p2;
	group gruppa;
	if (maxplayers >= counterduel + 1) {
		SaveBoolean(udg_hash, h, $D, false);
		SetTextTagText(txt, "3", .05);
		SetTextTagColor(txt, $FF, 0, 0, 0);
		SetTextTagPos(txt, x, y, .0);
		SetTextTagPermanent(txt, false);
		SetTextTagLifespan(txt, 1215752191.);
		SetTextTagFadepoint(txt, .0);
		SaveTextTagHandle(udg_hash, GetHandleId(ttxt), 1, txt);
		SaveInteger(udg_hash, GetHandleId(ttxt), 2, 0);
		TimerStart(ttxt, 1., true, Trig_Duel_TextTag_Size_Increase_Actions);
		if ((IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS))) {
			DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Дуэль №" + udg_ColorString[20] + I2S(R2I((counterduel / 2) + 1)) + "|r: " + udg_ColorString[GetPlayerId(p1) + 1] + GetPlayerName(p1) + "|r против " + udg_ColorString[GetPlayerId(p2) + 1] + GetPlayerName(p2) + "|r");
		}
		ShowUnit(hero1, true);
		ShowUnit(hero2, true);
		SetUnitPosition(hero1, x + 500. * Cos(180. * bj_DEGTORAD), y);
		SetUnitPosition(hero2, x + 500. * Cos(.0 * bj_DEGTORAD), y);
		PauseUnit(hero1, true);
		PauseUnit(hero2, true);
		SetUnitFacing(hero1, .0);
		SetUnitFacing(hero2, 180.);
		SetUnitState(hero1, UNIT_STATE_LIFE, $540BE3FF);
		SetUnitState(hero1, UNIT_STATE_MANA, $540BE3FF);
		SetUnitState(hero2, UNIT_STATE_LIFE, $540BE3FF);
		SetUnitState(hero2, UNIT_STATE_MANA, $540BE3FF);
		if ((GetLocalPlayer() == GetOwningPlayer(hero1))) {
			ClearSelection();
			SelectUnit(hero1, true);
			PanCameraToTimed(x, y, .0);
		}
		if ((GetLocalPlayer() == GetOwningPlayer(hero2))) {
			ClearSelection();
			SelectUnit(hero2, true);
			PanCameraToTimed(x, y, .0);
		}
		GroupEnumUnitsInRect(gruppa, gg_rct_Hero_Arena, null);
		KillSummonsAndIllusions(gruppa);
		SetPlayerAllianceStateBJ(Player(number1 - 1), Player(number2 - 1), 0);
		SetPlayerAllianceStateBJ(Player(number2 - 1), Player(number1 - 1), 0);
		TimerStart(t, 4., false, Trig_Duel_Start_Fight_Actions);
	else
		DisableTrigger(gg_trg_Hero_Death_On_Duel);
		if (IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS)) {
			DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Все дуэли завершены, спасибо героям за участие!!!");
		}
		while (true) {
			if (i > 9) break;
			if (perekluchatel >= 0) {
			else
			}
			SetUnitPosition(hero1, xc, yc);
			SetUnitFacing(hero1, 270.);
			SetUnitState(hero1, UNIT_STATE_LIFE, $540BE3FF);
			SetUnitState(hero1, UNIT_STATE_MANA, $540BE3FF);
			ShowUnit(hero1, true);
			DestroyFogModifier(LoadFogModifierHandle(udg_hash, h, 20 + i));
			if ((GetLocalPlayer() == GetOwningPlayer(hero1))) {
				ResetToGameCamera(.0);
				PanCameraToTimed(xc, yc, .0);
				ClearSelection();
				SelectUnit(hero1, true);
			}
		}
		StartTimerBJ(udg_Timer_Nomera_Volni, false, 75.);
		CreateTimerDialogBJ(udg_Timer_Nomera_Volni, ("Волна № |cFFFF0000" + (I2S(udg_Nomer_samoi_volni) + "|r")));
		TimerDialogSetTimeColorBJ(udg_TimerDialog_Nomera_Volni, 'd', 90., 30., 20.);
		FlushChildHashtable(udg_hash, h);
		EnableTrigger(gg_trg_Hero_Dead);
	}
}
nothing Trig_Duel_WaitBeforeActions_Actions() {
	rect rct = gg_rct_Hero_Arena;
	real x = GetRectCenterX(rct);
	real y = GetRectCenterY(rct);
	integer i = 0;
	while (true) {
		if (i > 8) break;
		if ((GetLocalPlayer() == Player(i))) {
			ResetToGameCamera(.0);
			PanCameraToTimed(x, y, .0);
		}
	}
	ExecuteFunc("Trig_Duel_Round_Actions");
	DestroyTimer(GetExpiredTimer());
}
nothing Trig_Start_Duel_Actions() {
	integer i = 1;
	integer schetchik = 0;
	array<integer> number;
	integer random = 0;
	integer maksint;
	array<integer> playernumber;
	group g = CreateGroup();
	timer t = CreateTimer();
	player p1;
	player p2;
	integer emptyplayernumber;
	rect rct = gg_rct_Hero_Arena;
	real x = GetRectCenterX(rct);
	real y = GetRectCenterY(rct);
	integer h = GetHandleId(rct);
	GroupEnumUnitsInRange(g, .0, .0, 9999999., null);
	KillSummonsAndIllusions(g);
	while (true) {
		if (i > 9) break;
		if (udg_herounit[i] != null) {
			ReviveHero(udg_herounit[i], .0, .0, false);
			ShowUnit(udg_herounit[i], false);
		}
	}
	while (true) {
		if (schetchik <= 0) break;
		if (number[random] == random) {
			SaveInteger(udg_hash, h, random, playernumber[schetchik]);
			FogModifierStart(bj_lastCreatedFogModifier);
			SaveFogModifierHandle(udg_hash, h, 20 + random, bj_lastCreatedFogModifier);
			if ((GetLocalPlayer() == Player(playernumber[schetchik] - 1))) {
				PanCameraToTimed(x, y, .0);
			}
			if (random == maksint && (emptyplayernumber != 2 && emptyplayernumber != 4 && emptyplayernumber != 6 && emptyplayernumber != 8)) {
				if ((GetLocalPlayer() == Player(playernumber[schetchik] - 1))) {
					DisplayTextToPlayer(Player(playernumber[schetchik] - 1), .0, .0, "К сожалению, вы не поучавствуете в дуэли, так как вам не хватило противника, но вы все равно получаете |cFFFFFF00" + I2S($C8 + (udg_Nomer_samoi_volni * 'x')) + " опыта|r и |cFFFFFF00" + I2S('d' + (udg_Nomer_samoi_volni * 60)) + " золота|r");
				}
				AddHeroXP(udg_herounit[playernumber[schetchik]], $C8 + (udg_Nomer_samoi_volni * 'x'), false);
				SetPlayerState(Player(playernumber[schetchik] - 1), PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(Player(playernumber[schetchik] - 1), PLAYER_STATE_RESOURCE_GOLD) + 'd' + (udg_Nomer_samoi_volni * 60));
			}
		}
	}
	if ((IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS))) {
		DisplayTimedTextToPlayer(GetLocalPlayer(), 0, 0, 10., "Список Дуэлей:");
		SoundForPlayer(GetLocalPlayer(), 5);
	}
	while (true) {
		if (LoadInteger(udg_hash, h, schetchik) == 0 || LoadInteger(udg_hash, h, schetchik + 1) == 0) break;
		if ((IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS))) {
			DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Дуэль №" + udg_ColorString[20] + I2S(R2I((schetchik / 2) + 1)) + "|r: " + udg_ColorString[GetPlayerId(p1) + 1] + GetPlayerName(p1) + "|r против " + udg_ColorString[GetPlayerId(p2) + 1] + GetPlayerName(p2) + "|r");
		}
	}
	CinematicFadeBJ(1, .0, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1);
	CinematicFadeBJ(0, 3., "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1);
	DisableTrigger(gg_trg_Hero_Dead);
	SaveInteger(udg_hash, h, $A, 1);
	SaveInteger(udg_hash, h, $B, maksint);
	SaveBoolean(udg_hash, h, $C, false);
	SaveBoolean(udg_hash, h, $D, false);
	EnableTrigger(gg_trg_Hero_Death_On_Duel);
	TimerStart(t, 3., false, Trig_Duel_WaitBeforeActions_Actions);
}
nothing InitTrig_Start_Duel() {
	TriggerAddAction(gg_trg_Start_Duel, Trig_Start_Duel_Actions);
}
nothing Trig_Hero_Death_On_Duel_2secwait_Actions() {
	rect rct = gg_rct_Hero_Arena;
	integer h = GetHandleId(rct);
	timer t = GetExpiredTimer();
	integer ht = GetHandleId(t);
	integer counterduel = LoadInteger(udg_hash, h, $A);
	unit winner = LoadUnitHandle(udg_hash, ht, 1);
	unit defeater = LoadUnitHandle(udg_hash, ht, 2);
	unit hero1 = udg_herounit[LoadInteger(udg_hash, h, counterduel)];
	unit hero2 = udg_herounit[LoadInteger(udg_hash, h, counterduel + 1)];
	real x = GetRectCenterX(gg_rct_Respawn_Heroes);
	real y = GetRectCenterY(gg_rct_Respawn_Heroes);
	timer tdialog = LoadTimerHandle(udg_hash, h, $D);
	integer htdialog = GetHandleId(tdialog);
	timerdialog td = LoadTimerDialogHandle(udg_hash, h, $E);
	group g = CreateGroup();
	SetUnitInvulnerable(hero1, false);
	SetUnitInvulnerable(hero2, false);
	ReviveHero(defeater, x, y, false);
	SetUnitPosition(winner, x, y);
	ShowUnit(hero1, false);
	ShowUnit(hero2, false);
	SetPlayerAllianceStateBJ(GetOwningPlayer(hero1), GetOwningPlayer(hero2), 3);
	SetPlayerAllianceStateBJ(GetOwningPlayer(hero2), GetOwningPlayer(hero1), 3);
	CinematicFadeBJ(0, 1.5, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1);
	GroupEnumUnitsInRange(g, GetRectCenterX(gg_rct_Hero_Arena), GetRectCenterY(gg_rct_Hero_Arena), 1500., null);
	KillSummonsAndIllusions(g);
	SaveInteger(udg_hash, h, $A, counterduel);
	ExecuteFunc("Trig_Duel_Round_Actions");
	DestroyTimerDialog(td);
	DestroyTimer(tdialog);
	DestroyTimer(t);
	FlushChildHashtable(udg_hash, ht);
}
nothing Trig_Hero_Death_On_Duel_Actions() {
	rect rct = gg_rct_Hero_Arena;
	integer h = GetHandleId(rct);
	integer counterduel = LoadInteger(udg_hash, h, $A);
	timer t = CreateTimer();
	integer ht = GetHandleId(t);
	player pw = GetOwningPlayer(GetKillingUnit());
	unit winner = udg_herounit[GetPlayerId(pw) + 1];
	player pd = GetOwningPlayer(GetDyingUnit());
	unit defeater = udg_herounit[GetPlayerId(pd) + 1];
	integer gold;
	integer xp;
	if (pw != null) {
		if (LoadBoolean(udg_hash, h, $D) == false) {
			SaveBoolean(udg_hash, h, $D, true);
			SetUnitInvulnerable(GetKillingUnit(), true);
			SaveUnitHandle(udg_hash, ht, 1, winner);
			SaveUnitHandle(udg_hash, ht, 2, defeater);
			CinematicFadeBJ(1, 2.5, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1);
			TimerStart(t, 2.5, false, Trig_Hero_Death_On_Duel_2secwait_Actions);
			if (IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS)) {
				DisplayTextToPlayer(GetLocalPlayer(), .0, .0, udg_ColorString[GetPlayerId(pw) + 1] + GetPlayerName(pw) + "|r Победил в дуэле " + udg_ColorString[GetPlayerId(pd) + 1] + GetPlayerName(pd) + "|r");
			}
			if ((GetLocalPlayer() == pw)) {
				DisplayTextToPlayer(pw, .0, .0, "За победу в дуэле ваш герой получает |cFFFFFF00" + I2S(xp) + " опыта|r и |cFFFFFF00" + I2S(gold) + " золота|r");
			}
			AddHeroXP(winner, xp, true);
			SetPlayerState(pw, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(pw, PLAYER_STATE_RESOURCE_GOLD) + gold);
			if ((GetLocalPlayer() == pd)) {
				DisplayTextToPlayer(pw, .0, .0, "За участие в дуэле ваш герой получает |cFFFFFF00" + I2S(xp) + " опыта|r и |cFFFFFF00" + I2S(gold) + " золота|r");
			}
			AddHeroXP(defeater, xp, false);
			SetPlayerState(pd, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(pd, PLAYER_STATE_RESOURCE_GOLD) + gold);
		}
	}
}
boolean Trig_Hero_Death_On_Duel_Conditions() {
	return (IsUnitType(GetDyingUnit(), UNIT_TYPE_HERO) && IsUnitIllusion(GetTriggerUnit()) == false && GetPlayerId(GetOwningPlayer(GetKillingUnit())) <= 8 && GetPlayerId(GetOwningPlayer(GetDyingUnit())) <= 8 && LoadInteger(udg_hash, GetHandleId(gg_rct_Hero_Arena), $A) > 0) != null;
}
nothing InitTrig_Hero_Death_On_Duel() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Hero_Death_On_Duel, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Hero_Death_On_Duel, Condition(Trig_Hero_Death_On_Duel_Conditions));
	TriggerAddAction(gg_trg_Hero_Death_On_Duel, Trig_Hero_Death_On_Duel_Actions);
}
boolean Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func002001001001002() {
	return (GetUnitTypeId(GetFilterUnit()) != 'h00U');
}
boolean Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func002001() {
	return (IsUnitGroupDeadBJ(GetUnitsOfPlayerMatching(Player(9), Condition(Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func002001001001002))));
}
boolean Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func003001001001002() {
	return (GetUnitTypeId(GetFilterUnit()) != 'h00U');
}
boolean Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func003001() {
	return (IsUnitGroupDeadBJ(GetUnitsOfPlayerMatching(Player($A), Condition(Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func003001001001002))));
}
boolean Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func004001001001002001() {
	return (GetUnitTypeId(GetFilterUnit()) != 'h00U');
}
boolean Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func004001001001002002() {
	return (GetUnitTypeId(GetFilterUnit()) != 'h009');
}
boolean Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func004001001001002() {
	return GetBooleanAnd(Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func004001001001002001(), Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func004001001001002002());
}
boolean Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func004001() {
	return (IsUnitGroupDeadBJ(GetUnitsOfPlayerMatching(Player($B), Condition(Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func004001001001002))));
}
boolean Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func034Func005Func002C() {
	return (udg_Bonus_Gold_ChestGold[(1 + GetPlayerId(GetEnumPlayer()))] == 0);
}
boolean Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func034Func005C() {
	return (1 == 0) && (UnitHasItemOfTypeBJ(udg_herounit[(1 + GetPlayerId(GetEnumPlayer()))], 'I00V'));
}
nothing Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func034A() {
	AddHeroXPSwapped((80 + ('x' * udg_Nomer_samoi_volni)), udg_herounit[(1 + GetPlayerId(GetEnumPlayer()))], true);
	SetPlayerStateBJ(GetEnumPlayer(), PLAYER_STATE_RESOURCE_GOLD, (GetPlayerState(GetEnumPlayer(), PLAYER_STATE_RESOURCE_GOLD) + ('x' + (80 * udg_Nomer_samoi_volni))));
	SoundForPlayer(GetEnumPlayer(), 2);
	if ((Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func034Func005C())) {
		if ((Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func034Func005Func002C())) {
			SetPlayerStateBJ(GetEnumPlayer(), PLAYER_STATE_RESOURCE_GOLD, (GetPlayerState(GetEnumPlayer(), PLAYER_STATE_RESOURCE_GOLD) + udg_Bonus_Gold_ChestGold[(1 + GetPlayerId(GetEnumPlayer()))]));
		else
			SetPlayerStateBJ(GetEnumPlayer(), PLAYER_STATE_RESOURCE_GOLD, (GetPlayerState(GetEnumPlayer(), PLAYER_STATE_RESOURCE_GOLD) + udg_Bonus_Gold_ChestGold[(1 + GetPlayerId(GetEnumPlayer()))]));
		}
		CreateTexttag(udg_ColorString[23] + "+" + I2S(udg_Bonus_Gold_ChestGold[GetPlayerId(GetEnumPlayer()) + 1]) + "|r", .031, $FF, GetUnitX(udg_herounit[GetPlayerId(GetEnumPlayer()) + 1]) - 15., GetUnitY(udg_herounit[GetPlayerId(GetEnumPlayer()) + 1]), .0, .0, .04, 4.5);
	}
}
nothing Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func036A() {
	SetUnitMaxState(GetEnumUnit(), UNIT_STATE_MAX_LIFE, $AF);
	SetWidgetLife(GetEnumUnit(), udg_Temp_Real[1]);
	SetWidgetLife(GetEnumUnit(), (GetUnitStateSwap(UNIT_STATE_LIFE, GetEnumUnit()) + (130. + (25. * I2R(udg_Nomer_samoi_volni)))));
	SetArmorAbilityLevel(GetEnumUnit(), 4);
}
boolean Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001Func001Func001Func001Func003Func001Func003C() {
	return (udg_Nomer_samoi_volni == 6) && (udg_Fire_Boss_Turn_On == false);
}
boolean Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001Func001Func001Func001Func003Func001C() {
	return (udg_Nomer_samoi_volni == 2) || (udg_Nomer_samoi_volni == 7) || (Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001Func001Func001Func001Func003Func001Func003C());
}
boolean Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001Func001Func001Func001Func003C() {
	return (Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001Func001Func001Func001Func003Func001C());
}
boolean Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001Func001Func001Func001C() {
	return (udg_Nomer_samoi_volni == 3);
}
boolean Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001Func001Func001C() {
	return (udg_Nomer_samoi_volni == $B);
}
boolean Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001Func001C() {
	return (udg_Nomer_samoi_volni == 6);
}
boolean Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001C() {
	return (udg_Nomer_samoi_volni == 5);
}
boolean Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func002C() {
	return (udg_Nomer_samoi_volni == 4) || (udg_Nomer_samoi_volni == 8) || (udg_Nomer_samoi_volni == $A);
}
boolean Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045C() {
	return (Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func002C());
}
boolean Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001C() {
	return (udg_Integer_kreeps_system_check == 7);
}
boolean Trig_Timer_Check_Func002Func001Func001Func001Func001Func001C() {
	return (udg_Integer_kreeps_system_check == 6);
}
boolean Trig_Timer_Check_Func002Func001Func001Func001Func001C() {
	return (udg_Integer_kreeps_system_check == 5);
}
boolean Trig_Timer_Check_Func002Func001Func001Func001C() {
	return (udg_Integer_kreeps_system_check == 4);
}
boolean Trig_Timer_Check_Func002Func001Func001C() {
	return (udg_Integer_kreeps_system_check == 3);
}
boolean Trig_Timer_Check_Func002Func001C() {
	return (udg_Integer_kreeps_system_check == 2);
}
boolean Trig_Timer_Check_Func002C() {
	return (udg_Integer_kreeps_system_check == 1);
}
nothing Trig_Timer_Check_Actions() {
	if ((Trig_Timer_Check_Func002C())) {
		StartTimerBJ(udg_Timer_Check_Forkreep_system, false, (udg_Time_Before_Creeps_Spawn * 2.));
	else
		if ((Trig_Timer_Check_Func002Func001C())) {
			StartTimerBJ(udg_Timer_Check_Forkreep_system, false, (udg_Time_Before_Creeps_Spawn * 1.));
		else
			if ((Trig_Timer_Check_Func002Func001Func001C())) {
				StartTimerBJ(udg_Timer_Check_Forkreep_system, false, (udg_Time_Before_Creeps_Spawn * 2.));
			else
				if ((Trig_Timer_Check_Func002Func001Func001Func001C())) {
					StartTimerBJ(udg_Timer_Check_Forkreep_system, false, (udg_Time_Before_Creeps_Spawn * 1.));
				else
					if ((Trig_Timer_Check_Func002Func001Func001Func001Func001C())) {
						StartTimerBJ(udg_Timer_Check_Forkreep_system, false, (udg_Time_Before_Creeps_Spawn * 2.));
					else
						if ((Trig_Timer_Check_Func002Func001Func001Func001Func001Func001C())) {
							StartTimerBJ(udg_Timer_Check_Forkreep_system, false, (udg_Time_Before_Creeps_Spawn * 1.));
						else
							if ((Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001C())) {
								PauseTimerBJ(true, udg_TimerMobsAttackBase);
								while (true) {
									if ((Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func002001())) break;
									TriggerSleepAction(RMaxBJ(bj_WAIT_FOR_COND_MIN_INTERVAL, 1));
								}
								while (true) {
									if ((Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func003001())) break;
									TriggerSleepAction(RMaxBJ(bj_WAIT_FOR_COND_MIN_INTERVAL, 1));
								}
								while (true) {
									if ((Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func004001())) break;
									TriggerSleepAction(RMaxBJ(bj_WAIT_FOR_COND_MIN_INTERVAL, 1));
								}
								PlaySoundAtPointBJ(udg_Game_Sound[$F], 100., udg_Temp_Location[1], .0);
								RemoveLocation(udg_Temp_Location[1]);
								PlaySoundAtPointBJ(udg_Game_Sound[$F], 100., udg_Temp_Location[1], .0);
								RemoveLocation(udg_Temp_Location[1]);
								PlaySoundAtPointBJ(udg_Game_Sound[$F], 100., udg_Temp_Location[1], .0);
								RemoveLocation(udg_Temp_Location[1]);
								SetAttackAbilityLevel(udg_Dammy_Portal[1], 50);
								SetAttackAbilityLevel(udg_Dammy_Portal[2], 50);
								SetAttackAbilityLevel(udg_Dammy_Portal[3], 50);
								DisableTrigger(gg_trg_TeleportStuckedCreeps);
								DisableTrigger(gg_trg_go_mochiytb_portal);
								DisableTrigger(gg_trg_Periodic_Rune_Creation);
								while (true) {
									if (bj_forLoopAIndex > bj_forLoopAIndexEnd) break;
									CreateNUnitsAtLoc(1, 'h00U', Player($F), Location(I2R(udg_Arrow_Pointer_Guide_X[bj_forLoopAIndex]), I2R(udg_Arrow_Pointer_Guide_Y[bj_forLoopAIndex])), I2R(udg_Arrow_Pointer_Guide_Angle[bj_forLoopAIndex]));
									AddSpecialEffectTargetUnitBJ("origin", bj_lastCreatedUnit, "Effects\\Arrow - Chapter Browse - Rotated.mdx");
								}
								while (true) {
									if (bj_forLoopAIndex > bj_forLoopAIndexEnd) break;
									SetWidgetLife(udg_herounit[bj_forLoopAIndex], GetUnitStateSwap(UNIT_STATE_MAX_LIFE, udg_herounit[bj_forLoopAIndex]));
									SetUnitManaBJ(udg_herounit[bj_forLoopAIndex], GetUnitStateSwap(UNIT_STATE_MAX_MANA, udg_herounit[bj_forLoopAIndex]));
								}
								DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff99ccffВНИМАНИЕ!|r");
								DisplayTextToForce(bj_FORCE_ALL_PLAYERS, ("За успешное прохождение волны герои получают |cFFFFDC00" + (I2S(('x' + (80 * udg_Nomer_samoi_volni))) + (" золота|r и |cFFFFDC00" + (I2S((80 + ('x' * udg_Nomer_samoi_volni))) + " опыта|r!!!")))));
								ForForce(udg_IGRAET, Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func034A);
								DisplayTextToForce(bj_FORCE_ALL_PLAYERS, ("Стражам-заклинателям восстановлено|cff99ccff " + (I2S(($82 + (25 * udg_Nomer_samoi_volni))) + " |rздоровья. А их защита и максимальный запас здоровье повышены на |cff99ccff4|r и |cff99ccff175|r соответсвенно.")));
								ForGroupBJ(udg_PortalCastersMagi, Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func036A);
								ShowAndFlushAllPlayerDamage(false);
								SetDoodadAnimationRect(bj_mapInitialPlayableArea, 'D01A', "Stand", false);
								if ((Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045C())) {
									TimerToFunction(50., "Дуэли Героев", Trig_Start_Duel_Actions);
								else
									if ((Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001C())) {
										TimerToFunction(70., "Золотая Поляна", Trig_Nachalo_Eiti_aren_Actions);
									else
										if ((Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001Func001C())) {
											TimerToFunction(50., "Битва с Боссом", Trig_BossStart_Actions);
										else
											if ((Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001Func001Func001C())) {
												TimerToFunction(90., "Битва с Боссом", Trig_IceBoss_Actions);
											else
												if ((Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001Func001Func001Func001C())) {
													TimerToFunction(40., "Битва с Беорнами", Trig_Start_Beorn_Den_Actions);
												else
													StartTimerBJ(udg_Timer_Nomera_Volni, false, 60.);
													if ((Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001Func001Func001Func001Func003C())) {
														StartTimerBJ(udg_Timer_Hint_About_Fast_Start, false, 15.);
													}
													CreateTimerDialogBJ(udg_Timer_Nomera_Volni, ("Волна № |cFFFF0000" + (I2S(udg_Nomer_samoi_volni) + "|r")));
													TimerDialogSetTimeColorBJ(udg_TimerDialog_Nomera_Volni, 'd', 90., 30., 20.);
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}
nothing InitTrig_Timer_Check() {
	TriggerRegisterTimerExpireEvent(gg_trg_Timer_Check, udg_Timer_Check_Forkreep_system);
	TriggerAddAction(gg_trg_Timer_Check, Trig_Timer_Check_Actions);
}
boolean Trig_go_mochiytb_portal_Filter() {
	return ((GetOwningPlayer(GetFilterUnit()) == Player(9)) || (GetOwningPlayer(GetFilterUnit()) == Player($A)) || (GetOwningPlayer(GetFilterUnit()) == Player($B)));
}
nothing Trig_go_mochiytb_portal_Actions() {
	group g = CreateGroup();
	group g2;
	unit Picked;
	rect rct = gg_rct_Portal_baza;
	real x = GetRectCenterX(rct);
	real y = GetRectCenterY(rct);
	integer order;
	integer orderId;
	if ((orderId != 0)) {
	else
		if ((orderId != 0)) {
		}
	}
	GroupEnumUnitsInRect(g2, rct, null);
	GroupEnumUnitsInRect(g, bj_mapInitialPlayableArea, Condition(Trig_go_mochiytb_portal_Filter));
	while (true) {
		if (Picked == null) break;
		if ((IsUnitInGroup(Picked, g2) == false)) {
			if ((order == orderId) || order == 0) {
				IssuePointOrderById(Picked, $D000F, x, y);
			}
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g2);
	DestroyGroup(g2);
	GroupClear(g);
	DestroyGroup(g);
}
nothing InitTrig_go_mochiytb_portal() {
	DisableTrigger(gg_trg_go_mochiytb_portal);
	TriggerRegisterTimerEvent(gg_trg_go_mochiytb_portal, 2., true);
	TriggerAddAction(gg_trg_go_mochiytb_portal, Trig_go_mochiytb_portal_Actions);
}
nothing Trig_Start_game_Actions() {
	RemoveAllGuardPositions(Player($B));
	StartTimerBJ(udg_Timer_Nomera_Volni, false, 180.);
	CreateTimerDialogBJ(bj_lastStartedTimer, ("Волна № |cFFFF0000" + (I2S(udg_Nomer_samoi_volni) + "|r")));
	TimerDialogSetTimeColorBJ(udg_TimerDialog_Nomera_Volni, 'd', 90., 30., 20.);
	TriggerExecute(gg_trg_Init_System_Receiving_Experience_for_Creeps);
	TriggerExecute(gg_trg_Init_System_Receiving_Gold_for_Creeps);
}
nothing InitTrig_Start_game() {
	TriggerAddAction(gg_trg_Start_game, Trig_Start_game_Actions);
}
nothing Trig_StartWave_Func007A() {
	SoundForPlayer(GetEnumPlayer(), 3);
}
nothing Trig_StartWave_Actions() {
	DestroyTimerDialog(udg_TimerDialog_Nomera_Volni);
	while (true) {
		if (bj_forLoopAIndex > bj_forLoopAIndexEnd) break;
	}
	DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 5., ("Волна №|cFFFF0000" + (I2S(udg_Nomer_samoi_volni) + " |rначалась!!!")));
	ForForce(udg_IGRAET, Trig_StartWave_Func007A);
	EnableTrigger(gg_trg_go_mochiytb_portal);
	EnableTrigger(gg_trg_Periodic_Rune_Creation);
	StartTimerBJ(udg_Timer_Check_Forkreep_system, false, .0);
	StartTimerBJ(udg_TimerMobsAttackBase, false, .1);
	EnableTrigger(gg_trg_TeleportStuckedCreeps);
	MultiboardSetItemValueBJ(udg_MultiBoard, 3, (udg_CountPlayers + 3), "|Cfffed3120|r|cFF969696/|r|Cfffed3129|r");
	MultiboardSetTitleText(udg_MultiBoard, ("Последние Стражи" + (" (Волна " + (udg_ColorString[20] + (I2S(udg_Nomer_samoi_volni) + ("|r из " + (udg_ColorString[20] + "10|r)")))))));
	SetDoodadAnimationRect(bj_mapInitialPlayableArea, 'D01A', "Stand Work", false);
	ShowAndFlushAllPlayerDamage(true);
	PlaySoundAtPointBJ(udg_Game_Sound[$E], 100., udg_Temp_Location[1], .0);
	RemoveLocation(udg_Temp_Location[1]);
	PlaySoundAtPointBJ(udg_Game_Sound[$E], 100., udg_Temp_Location[1], .0);
	RemoveLocation(udg_Temp_Location[1]);
	PlaySoundAtPointBJ(udg_Game_Sound[$E], 100., udg_Temp_Location[1], .0);
	RemoveLocation(udg_Temp_Location[1]);
	while (true) {
		if (bj_forLoopAIndex > bj_forLoopAIndexEnd) break;
		SetUnitAnimation(udg_Rune_On_Base_Dummy[bj_forLoopAIndex], "Stand Alternate");
	}
	while (true) {
		if (bj_forLoopAIndex > bj_forLoopAIndexEnd) break;
		DestroyEffect(udg_Arrow_Pointer_Guide_Effect[bj_forLoopAIndex]);
		KillUnit(udg_Arrow_Pointer_Guide_Unit[bj_forLoopAIndex]);
	}
	StartTimerBJ(udg_TimerShowAndFlushAllPlayerDmg, false, 10000.);
}
nothing InitTrig_StartWave() {
	TriggerRegisterTimerExpireEvent(gg_trg_StartWave, udg_Timer_Nomera_Volni);
	TriggerAddAction(gg_trg_StartWave, Trig_StartWave_Actions);
}
nothing Trig_MobsAttackBase_Actions() {
	integer wavenumber = udg_Nomer_samoi_volni;
	integer players = CountPlayersInForceBJ(udg_IGRAET);
	integer count = 2;
	integer count2 = 1;
	integer count3 = 3;
	array<integer> mobscount;
	array<integer> mobscount2;
	array<integer> mobscount3;
	integer numbergroup = udg_number_of_otriad_mobs;
	integer difficultlevel;
	real xc = GetRectCenterX(gg_rct_cast_magi);
	real yc = GetRectCenterY(gg_rct_cast_magi);
	array<rect> rct;
	array<real> x;
	array<real> y;
	array<real> x1type;
	array<real> y1type;
	array<real> x2type;
	array<real> y2type;
	array<real> x3type;
	array<real> y3type;
	array<real> angle;
	unit mob;
	integer lopa = 1;
	integer lopb = 1;
	integer id1 = udg_Wave_Unit_tape[(4 * wavenumber) - 3];
	integer id2 = udg_Wave_Unit_tape[(4 * wavenumber) - 2];
	integer id3 = udg_Wave_Unit_tape[(4 * wavenumber) - 1];
	integer mobsrandom;
	array<integer> multiplayers;
	real dist = .0;
	integer perekluchatel = 1;
	array<player> p;
	unit dammi;
	if (numbergroup == 3) {
	}
	if (players >= 1 && players <= 2) {
	}
	if (players >= 3 && players <= 4) {
	}
	if (players >= 5 && players <= 9) {
	}
	if (players >= 2 && players <= 3) {
	}
	if (players >= 4 && players <= 5) {
	}
	if (players >= 6 && players <= 9) {
	}
	if (players >= 7 && players <= 9) {
	}
	if ((udg_Integer_Creep_On_Line_Spawn[1] != 0) || (udg_Integer_Creep_On_Line_Spawn[2] != 0) || (udg_Integer_Creep_On_Line_Spawn[3] != 0)) {
	}
	if (count * multiplayers[1] > 0) {
		PlaySoundAtPointBJ(udg_Game_Sound[16], 100., udg_Temp_Location[1], .0);
		RemoveLocation(udg_Temp_Location[1]);
	}
	if (count * multiplayers[2] > 0) {
		PlaySoundAtPointBJ(udg_Game_Sound[16], 100., udg_Temp_Location[1], .0);
		RemoveLocation(udg_Temp_Location[1]);
	}
	if (count * multiplayers[3] > 0) {
		PlaySoundAtPointBJ(udg_Game_Sound[16], 100., udg_Temp_Location[1], .0);
		RemoveLocation(udg_Temp_Location[1]);
	}
	if (wavenumber == 'd') {
	}
	if (wavenumber == 'd') {
	}
	while (true) {
		if (lopa > 3) break;
		if (mobscount[lopa] > 0) {
			UnitApplyTimedLife(dammi, 'BTLF', 2.);
			SetUnitScale(dammi, 2., 2., 2.);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl", dammi, "origin"));
			while (true) {
				if (lopb > mobscount[lopa]) break;
				if (perekluchatel == 1) {
				else
					if (perekluchatel == -1) {
					}
				}
				IssuePointOrderById(mob, $D000F, xc, yc);
				SaveBoolean(udg_hash, GetHandleId(mob), 83, true);
			}
		}
	}
	if (numbergroup >= 1) {
		while (true) {
			if (lopa > 3) break;
			while (true) {
				if (lopb > mobscount2[lopa]) break;
				if (perekluchatel == 1) {
				else
					if (perekluchatel == -1) {
					}
				}
				SaveBoolean(udg_hash, GetHandleId(mob), 83, true);
				IssuePointOrderById(mob, $D000F, xc, yc);
			}
		}
	}
	if (numbergroup == 2) {
		while (true) {
			if (lopa > 3) break;
			while (true) {
				if (lopb > mobscount3[lopa]) break;
				IssuePointOrderById(mob, $D000F, xc, yc);
				SaveBoolean(udg_hash, GetHandleId(mob), 83, true);
			}
		}
	}
	if (numbergroup == 3) {
		if ((IsPlayerInForce(GetLocalPlayer(), udg_IGRAET))) {
			DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "|cFFFF0000БОСС!!!|r");
			SoundForPlayer(GetLocalPlayer(), 6);
		}
		while (true) {
			if (lopa > 3) break;
			if (mobscount[lopa] > 0) {
				IssuePointOrderById(mob, $D000F, xc, yc);
				SaveBoolean(udg_hash, GetHandleId(mob), 83, true);
			}
		}
	}
	MultiboardSetItemValueBJ(udg_MultiBoard, 3, (udg_CountPlayers + 3), (("|Cfffed312" + I2S(udg_Wave_Progress_for_MultiBoard)) + "|r|cFF969696/|r|Cfffed3129|r"));
	StartTimerBJ(udg_TimerMobsAttackBase, false, udg_Time_Before_Creeps_Spawn);
}
nothing InitTrig_MobsAttackBase() {
	TriggerRegisterTimerExpireEvent(gg_trg_MobsAttackBase, udg_TimerMobsAttackBase);
	TriggerAddAction(gg_trg_MobsAttackBase, Trig_MobsAttackBase_Actions);
}
boolean Trig_Filter_TeleportStuckedCreeps_Actions() {
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405 && IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(GetFilterUnit()) != 'h00U' && GetUnitTypeId(GetFilterUnit()) != 'n01M' && GetUnitTypeId(GetFilterUnit()) != 'h00C') && (GetOwningPlayer(GetFilterUnit()) == Player(9) || GetOwningPlayer(GetFilterUnit()) == Player($A) || GetOwningPlayer(GetFilterUnit()) == Player($B))) != null;
}
nothing Trig_TeleportStuckedCreeps_Actions() {
	group g = CreateGroup();
	unit Picked;
	integer h;
	real x;
	real y;
	real dist1 = .0;
	real dist2 = .0;
	real dist3 = .0;
	real x1 = GetRectCenterX(gg_rct_Portal_3_up_Start);
	real y1 = GetRectCenterY(gg_rct_Portal_3_up_Start);
	real x2 = GetRectCenterX(gg_rct_Portal_2_down_right_Start);
	real y2 = GetRectCenterY(gg_rct_Portal_2_down_right_Start);
	real x3 = GetRectCenterX(gg_rct_Portal_1_down_left_Start);
	real y3 = GetRectCenterY(gg_rct_Portal_1_down_left_Start);
	real xt;
	real yt;
	real xload = .0;
	real yload = .0;
	integer i = 0;
	GroupEnumUnitsInRect(g, bj_mapInitialPlayableArea, Filter(Trig_Filter_TeleportStuckedCreeps_Actions));
	while (true) {
		if (Picked == null) break;
		SaveInteger(udg_hash, h, 'k', i);
		if (i >= 20 && udg_IsGameEnd == false) {
			if ((dist1 < dist2) && (dist1 < dist3)) {
			else
				if ((dist2 < dist3)) {
				else
				}
			}
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl", x, y));
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl", xt, yt));
			SetUnitPosition(Picked, xt, yt);
			SaveInteger(udg_hash, h, 'k', 0);
		}
		if (dist1 > 500.) {
			SaveReal(udg_hash, h, 'l', x);
			SaveReal(udg_hash, h, 'm', y);
			SaveInteger(udg_hash, h, 'k', 0);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
}
nothing InitTrig_TeleportStuckedCreeps() {
	DisableTrigger(gg_trg_TeleportStuckedCreeps);
	TriggerRegisterTimerEvent(gg_trg_TeleportStuckedCreeps, 2., true);
	TriggerAddAction(gg_trg_TeleportStuckedCreeps, Trig_TeleportStuckedCreeps_Actions);
}
nothing Trig_vhodit_v_zony_Actions() {
	IssueImmediateOrderById(GetEnteringUnit(), $D0004);
}
boolean Trig_vhodit_v_zony_Conditions() {
	return GetOwningPlayer(GetEnteringUnit()) == Player($B);
}
nothing InitTrig_vhodit_v_zony() {
	region rectRegion = CreateRegion();
	RegionAddRect(rectRegion, gg_rct_cast_magi);
	TriggerRegisterEnterRegion(gg_trg_vhodit_v_zony, rectRegion, null);
	TriggerAddCondition(gg_trg_vhodit_v_zony, Condition(Trig_vhodit_v_zony_Conditions));
	TriggerAddAction(gg_trg_vhodit_v_zony, Trig_vhodit_v_zony_Actions);
}
nothing Trig_Add_Gold_System_Receiving_Gold_for_Creeps_AddGoldAssists_Actions() {
	player p = GetEnumPlayer();
	integer pnumber = GetPlayerId(p) + 1;
	integer goldassist = udg_Temp_Integer[1];
	real angle = udg_Temp_Real[3];
	real x = udg_Temp_Real[1];
	real y = udg_Temp_Real[2];
	texttag txt = CreateTextTag();
	if (CountItemOfTypeOnUnit(udg_herounit[pnumber], 'I00V') > 0) {
	}
	SetTextTagText(txt, udg_ColorString[23] + "+" + I2S(goldassist) + "|r", .023);
	SetTextTagColor(txt, $FF, $FF, $FF, $FF);
	SetTextTagPos(txt, x - 15., y, .0);
	SetTextTagVelocity(txt, .0, .035);
	SetTextTagPermanent(txt, false);
	SetTextTagLifespan(txt, 2.75);
	SetTextTagFadepoint(txt, 2.75);
	if (GetLocalPlayer() == p) {
		SetTextTagVisibility(txt, true);
	else
		SetTextTagVisibility(txt, false);
	}
	SetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) + goldassist);
	if (pnumber <= 9) {
		MultiboardSetItemValueBJ(udg_MultiBoard, 5, udg_PlayerNumberInMB[pnumber], udg_ColorString[24] + I2S(udg_MultiBoard_Player_Assist_Count[pnumber]) + "|r");
	}
}
nothing Trig_Add_Gold_System_Receiving_Gold_for_Creeps_Actions() {
	unit creep = GetDyingUnit();
	unit killer = GetKillingUnit();
	player p = GetOwningPlayer(killer);
	integer pnumber = GetPlayerId(p) + 1;
	integer mingold = LoadInteger(udg_hash, GetUnitTypeId(creep), 70);
	integer maxgold = LoadInteger(udg_hash, GetUnitTypeId(creep), 71);
	integer gold = GetRandomInt(mingold, maxgold);
	force players = LoadForceHandle(udg_hash, GetHandleId(creep), 72);
	real angle = .0;
	integer countplayers = 0;
	integer assistgold = 0;
	real x = GetUnitX(creep);
	real y = GetUnitY(creep);
	boolean normalmob = LoadBoolean(udg_hash, GetHandleId(creep), 83);
	texttag txt = CreateTextTag();
	if (gold > 0 && LoadBoolean(udg_hash, GetHandleId(creep), 85) == false) {
		if (normalmob == false) {
		}
		ForceRemovePlayer(players, p);
		if (countplayers != 0) {
		}
		if (countplayers != 0) {
		}
		if (assistgold <= 0) {
		}
		SetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) + gold);
		SetTextTagText(txt, udg_ColorString[23] + "+" + I2S(gold) + "|r", .025);
		SetTextTagColor(txt, $FF, $FF, $FF, $FF);
		SetTextTagPos(txt, x - 15., y, .0);
		SetTextTagVelocity(txt, .0, .035);
		SetTextTagPermanent(txt, false);
		SetTextTagLifespan(txt, 3.5);
		SetTextTagFadepoint(txt, 3.5 / 2);
		if ((GetLocalPlayer() == p)) {
			SetTextTagVisibility(txt, true);
		else
			SetTextTagVisibility(txt, false);
		}
		if (pnumber <= 9) {
			MultiboardSetItemValueBJ(udg_MultiBoard, 3, udg_PlayerNumberInMB[pnumber], udg_ColorString[20] + I2S(udg_MultiBoard_Player_Kills_Count[pnumber]) + "|r");
		}
		ForForce(players, Trig_Add_Gold_System_Receiving_Gold_for_Creeps_AddGoldAssists_Actions);
	}
	ForceClear(players);
	DestroyForce(players);
}
boolean Trig_Add_Gold_System_Receiving_Gold_for_Creeps_Conditions() {
	return IsUnitIllusion(GetDyingUnit()) == false && GetUnitAbilityLevel(GetDyingUnit(), 'Aloc') <= 0 && GetUnitTypeId(GetDyingUnit()) != 'h00U' && (GetOwningPlayer(GetDyingUnit()) == Player(9) || GetOwningPlayer(GetDyingUnit()) == Player($A) || GetOwningPlayer(GetDyingUnit()) == Player($B));
}
nothing InitTrig_Add_Gold_System_Receiving_Gold_for_Creeps() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Add_Gold_System_Receiving_Gold_for_Creeps, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Add_Gold_System_Receiving_Gold_for_Creeps, Condition(Trig_Add_Gold_System_Receiving_Gold_for_Creeps_Conditions));
	TriggerAddAction(gg_trg_Add_Gold_System_Receiving_Gold_for_Creeps, Trig_Add_Gold_System_Receiving_Gold_for_Creeps_Actions);
}
nothing Trig_Init_System_Receiving_Gold_for_Creeps_Actions() {
	real factor = .25;
	real factorwave;
	integer wavenumber;
	array<integer> goldconstmin;
	array<integer> goldconstmax;
	array<integer> goldmin;
	array<integer> goldmax;
	SaveInteger(udg_hash, 'n01D', 70, 20);
	SaveInteger(udg_hash, 'n01D', 71, 24);
	SaveInteger(udg_hash, 'u00F', 70, 19);
	SaveInteger(udg_hash, 'u00F', 71, 26);
	SaveInteger(udg_hash, 'u00H', 70, 54);
	SaveInteger(udg_hash, 'u00H', 71, 70);
	SaveInteger(udg_hash, 'n011', 70, 20);
	SaveInteger(udg_hash, 'n011', 71, 24);
	SaveInteger(udg_hash, 'n00T', 70, $D);
	SaveInteger(udg_hash, 'n00T', 71, $F);
	SaveInteger(udg_hash, 'n00X', 70, 6);
	SaveInteger(udg_hash, 'n00X', 71, 7);
	SaveInteger(udg_hash, 'n00Z', 70, $D);
	SaveInteger(udg_hash, 'n00Z', 71, 19);
	SaveInteger(udg_hash, 'u00G', 70, 30);
	SaveInteger(udg_hash, 'u00G', 71, 35);
	SaveInteger(udg_hash, 'n00L', 70, 30);
	SaveInteger(udg_hash, 'n00L', 71, 35);
	SaveInteger(udg_hash, 'n00M', 70, $C);
	SaveInteger(udg_hash, 'n00M', 71, 16);
	SaveInteger(udg_hash, 'n00N', 70, 50);
	SaveInteger(udg_hash, 'n00N', 71, 60);
	SaveInteger(udg_hash, 'n00A', 70, 40);
	SaveInteger(udg_hash, 'n00A', 71, 50);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[1], 70, goldmin[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[1], 71, goldmax[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[2], 70, goldmin[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[2], 71, goldmax[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[3], 70, goldmin[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[3], 71, goldmax[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[4], 70, goldmin[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[4], 71, goldmax[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[5], 70, goldmin[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[5], 71, goldmax[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[6], 70, goldmin[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[6], 71, goldmax[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[7], 70, goldmin[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[7], 71, goldmax[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[8], 70, goldmin[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[8], 71, goldmax[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[9], 70, goldmin[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[9], 71, goldmax[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[$A], 70, goldmin[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[$A], 71, goldmax[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[$B], 70, goldmin[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[$B], 71, goldmax[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[$C], 70, goldmin[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[$C], 71, goldmax[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[$D], 70, goldmin[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[$D], 71, goldmax[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[$E], 70, goldmin[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[$E], 71, goldmax[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[$F], 70, goldmin[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[$F], 71, goldmax[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[16], 70, goldmin[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[16], 71, goldmax[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[17], 70, goldmin[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[17], 71, goldmax[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[18], 70, goldmin[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[18], 71, goldmax[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[19], 70, goldmin[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[19], 71, goldmax[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[20], 70, goldmin[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[20], 71, goldmax[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[21], 70, goldmin[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[21], 71, goldmax[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[22], 70, goldmin[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[22], 71, goldmax[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[23], 70, goldmin[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[23], 71, goldmax[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[24], 70, goldmin[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[24], 71, goldmax[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[25], 70, goldmin[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[25], 71, goldmax[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[26], 70, goldmin[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[26], 71, goldmax[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[27], 70, goldmin[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[27], 71, goldmax[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[28], 70, goldmin[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[28], 71, goldmax[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[29], 70, goldmin[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[29], 71, goldmax[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[30], 70, goldmin[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[30], 71, goldmax[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[31], 70, goldmin[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[31], 71, goldmax[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[32], 70, goldmin[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[32], 71, goldmax[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[33], 70, goldmin[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[33], 71, goldmax[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[34], 70, goldmin[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[34], 71, goldmax[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[35], 70, goldmin[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[35], 71, goldmax[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[36], 70, goldmin[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[36], 71, goldmax[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[37], 70, goldmin[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[37], 71, goldmax[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[38], 70, goldmin[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[38], 71, goldmax[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[39], 70, goldmin[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[39], 71, goldmax[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[40], 70, goldmin[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[40], 71, goldmax[4]);
}
nothing InitTrig_Init_System_Receiving_Gold_for_Creeps() {
	TriggerRegisterTimerEvent(gg_trg_Init_System_Receiving_Gold_for_Creeps, 3., false);
	TriggerAddAction(gg_trg_Init_System_Receiving_Gold_for_Creeps, Trig_Init_System_Receiving_Gold_for_Creeps_Actions);
}
nothing Trig_Init_System_Receiving_Experience_for_Creeps_Actions() {
	real factor = .75;
	real factorwave;
	integer wavenumber;
	array<integer> xpconst;
	array<integer> xp;
	SaveInteger(udg_hash, 'n01D', 82, 50);
	SaveInteger(udg_hash, 'u00F', 82, 35);
	SaveInteger(udg_hash, 'u00H', 82, 'h');
	SaveInteger(udg_hash, 'n011', 82, 30);
	SaveInteger(udg_hash, 'n00T', 82, 24);
	SaveInteger(udg_hash, 'n00X', 82, 8);
	SaveInteger(udg_hash, 'n00Z', 82, 40);
	SaveInteger(udg_hash, 'u00G', 82, 52);
	SaveInteger(udg_hash, 'n00A', 82, 70);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[1], 82, xp[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[2], 82, xp[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[3], 82, xp[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[4], 82, xp[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[5], 82, xp[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[6], 82, xp[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[7], 82, xp[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[8], 82, xp[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[9], 82, xp[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[$A], 82, xp[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[$B], 82, xp[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[$C], 82, xp[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[$D], 82, xp[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[$E], 82, xp[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[$F], 82, xp[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[16], 82, xp[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[17], 82, xp[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[18], 82, xp[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[19], 82, xp[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[20], 82, xp[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[21], 82, xp[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[22], 82, xp[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[23], 82, xp[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[24], 82, xp[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[25], 82, xp[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[26], 82, xp[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[27], 82, xp[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[28], 82, xp[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[29], 82, xp[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[30], 82, xp[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[31], 82, xp[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[32], 82, xp[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[33], 82, xp[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[34], 82, xp[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[35], 82, xp[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[36], 82, xp[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[37], 82, xp[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[38], 82, xp[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[39], 82, xp[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[40], 82, xp[4]);
}
nothing InitTrig_Init_System_Receiving_Experience_for_Creeps() {
	TriggerAddAction(gg_trg_Init_System_Receiving_Experience_for_Creeps, Trig_Init_System_Receiving_Experience_for_Creeps_Actions);
}
boolean Trig_Add_Experience_System_Receiving_Experience_for_Creeps_Condition_Actions() {
	return (GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405 && IsUnitIllusion(GetFilterUnit()) == false && IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) && IsUnitEnemy(GetFilterUnit(), udg_Temp_Player[1])) != null;
}
nothing Trig_Add_Experience_System_Receiving_Experience_for_Creeps_Actions() {
	unit creep = GetDyingUnit();
	integer xp = LoadInteger(udg_hash, GetUnitTypeId(creep), 82);
	group g = CreateGroup();
	integer count;
	unit Picked;
	boolean normalmob = LoadBoolean(udg_hash, GetHandleId(creep), 83);
	if (xp > 0) {
		GroupEnumUnitsInRange(g, GetUnitX(creep), GetUnitY(creep), 1200., Filter(Trig_Add_Experience_System_Receiving_Experience_for_Creeps_Condition_Actions));
		if (normalmob == false) {
		}
		while (true) {
			if (Picked == null) break;
			AddHeroXP(Picked, R2I((xp / count) + .5), true);
			GroupRemoveUnit(g, Picked);
		}
	}
	GroupClear(g);
	DestroyGroup(g);
}
boolean Trig_Add_Experience_System_Receiving_Experience_for_Creeps_Conditions() {
	return IsUnitIllusion(GetDyingUnit()) == false && GetUnitAbilityLevel(GetDyingUnit(), 'Aloc') <= 0 && GetUnitTypeId(GetDyingUnit()) != 'h00U' && (GetOwningPlayer(GetDyingUnit()) == Player(9) || GetOwningPlayer(GetDyingUnit()) == Player($A) || GetOwningPlayer(GetDyingUnit()) == Player($B));
}
nothing InitTrig_Add_Experience_System_Receiving_Experience_for_Creeps() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Add_Experience_System_Receiving_Experience_for_Creeps, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Add_Experience_System_Receiving_Experience_for_Creeps, Condition(Trig_Add_Experience_System_Receiving_Experience_for_Creeps_Conditions));
	TriggerAddAction(gg_trg_Add_Experience_System_Receiving_Experience_for_Creeps, Trig_Add_Experience_System_Receiving_Experience_for_Creeps_Actions);
}
nothing Trig_Init_Potion_System_Actions() {
}
nothing InitTrig_Init_Potion_System() {
	TriggerRegisterTimerEvent(gg_trg_Init_Potion_System, 1., false);
	TriggerAddAction(gg_trg_Init_Potion_System, Trig_Init_Potion_System_Actions);
}
boolean Trig_Mob_Dead_Create_Potion_Conditions() {
	return ((GetOwningPlayer(GetDyingUnit()) == Player($B) || GetOwningPlayer(GetDyingUnit()) == Player($A) || GetOwningPlayer(GetDyingUnit()) == Player(9)) && GetRandomInt(1, 'd') <= 8 && IsUnitType(GetDyingUnit(), UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(GetDyingUnit()) != 'h00U' && IsUnitIllusion(GetDyingUnit()) == false && IsUnitType(GetDyingUnit(), UNIT_TYPE_SUMMONED) == false) != null;
}
nothing Trig_Mob_Dead_Create_Potion_Actions() {
	integer minint;
	integer maxint;
	integer numberwave = udg_Nomer_samoi_volni;
	if (numberwave >= 1 && numberwave <= 3) {
	}
	if (numberwave >= 4 && numberwave <= 6) {
	}
	if (numberwave >= 7 && numberwave <= 9) {
	}
	if (numberwave >= $A) {
	}
	if (numberwave == 1) {
	}
	if (numberwave >= 2 && numberwave <= 4) {
	}
	if (numberwave >= 5 && numberwave <= 7) {
	}
	if (numberwave >= 8) {
	}
	CreatePotion(GetUnitX(GetDyingUnit()), GetUnitY(GetDyingUnit()), minint, maxint);
}
nothing InitTrig_Mob_Dead_Create_Potion() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Mob_Dead_Create_Potion, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Mob_Dead_Create_Potion, Condition(Trig_Mob_Dead_Create_Potion_Conditions));
	TriggerAddAction(gg_trg_Mob_Dead_Create_Potion, Trig_Mob_Dead_Create_Potion_Actions);
}
boolean Trig_Check_Potion_Picked_Up_Conditions() {
	return (GetUnitState(GetEnteringUnit(), UNIT_STATE_LIFE) > .405 && IsUnitType(GetEnteringUnit(), UNIT_TYPE_HERO) && GetPlayerId(GetOwningPlayer(GetEnteringUnit())) <= 8) != null;
}
nothing Trig_Check_Potion_Picked_Up_Actions() {
	region reg = GetTriggeringRegion();
	unit hero = GetEnteringUnit();
	unit dammi = LoadUnitHandle(udg_hash, GetHandleId(reg), 1);
	rect rct = LoadRectHandle(udg_hash, GetHandleId(reg), 2);
	integer potionindex = LoadInteger(udg_hash, GetHandleId(dammi), 1);
	effect ef = LoadEffectHandle(udg_hash, GetHandleId(dammi), 2);
	string healtype = udg_Potion_Type[potionindex];
	integer heal = udg_Potion_Heal_Amount[potionindex];
	real x = GetUnitX(hero);
	real y = GetUnitY(hero);
	real xp = GetUnitState(hero, UNIT_STATE_LIFE);
	real xpmax = GetUnitState(hero, UNIT_STATE_MAX_LIFE);
	real mp = GetUnitState(hero, UNIT_STATE_MANA);
	real mpmax = GetUnitState(hero, UNIT_STATE_MAX_MANA);
	texttag txt;
	real vel = .0221875;
	real angle = 45. + GetRandomReal(.0, 90.);
	real xvel = vel * Cos(angle * bj_DEGTORAD);
	real yvel = vel * Sin(angle * bj_DEGTORAD);
	boolean hil = false;
	if (healtype == "life" && (xp < xpmax)) {
		SetUnitState(hero, UNIT_STATE_LIFE, xp + heal);
		DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", hero, "origin"), 2.);
		SetTextTagText(txt, "|cFF00DC00+" + I2S(heal) + "|r", .03);
	}
	if (healtype == "mana" && (mp < mpmax)) {
		SetUnitState(hero, UNIT_STATE_MANA, mp + heal);
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIma\\AImaTarget.mdl", hero, "origin"));
		SetTextTagText(txt, "|c000347FC+" + I2S(heal) + "|r", .03);
	}
	if (hil) {
		KillUnit(dammi);
		DestroyEffect(ef);
		SetTextTagPos(txt, x, y, .0);
		SetTextTagColor(txt, 0, 0, 0, $C8);
		SetTextTagVelocity(txt, xvel, yvel);
		SetTextTagLifespan(txt, 3.);
		SetTextTagFadepoint(txt, .0);
		SetTextTagPermanent(txt, false);
		FlushChildHashtable(udg_hash, GetHandleId(reg));
		FlushChildHashtable(udg_hash, GetHandleId(dammi));
		RemoveRect(rct);
		RemoveRegion(reg);
	}
}
nothing InitTrig_Check_Potion_Picked_Up() {
	TriggerAddCondition(gg_trg_Check_Potion_Picked_Up, Condition(Trig_Check_Potion_Picked_Up_Conditions));
	TriggerAddAction(gg_trg_Check_Potion_Picked_Up, Trig_Check_Potion_Picked_Up_Actions);
}
nothing Trig_InitSystem_ForGroup() {
	SetPlayerAbilityAvailable(GetEnumPlayer(), 'A66B', false);
}
nothing Trig_InitSystem_Actions() {
	group g = CreateGroup();
	unit Picked;
	ForForce(bj_FORCE_ALL_PLAYERS, Trig_InitSystem_ForGroup);
	GroupEnumUnitsInRect(g, bj_mapInitialPlayableArea, null);
	while (true) {
		if (Picked == null) break;
		if (IsUnitType(Picked, UNIT_TYPE_STRUCTURE) != true) {
			GroupAddUnit(udg_DamageGroup, Picked);
			UnitAddAbility(Picked, 'A66B');
			UnitMakeAbilityPermanent(Picked, true, 'A66B');
			UnitMakeAbilityPermanent(Picked, true, 'A666');
			TriggerRegisterUnitEvent(gg_trg_AddDamage, Picked, EVENT_UNIT_DAMAGED);
		}
		GroupRemoveUnit(g, Picked);
	}
	DestroyGroup(g);
}
nothing InitTrig_InitSystem() {
	TriggerRegisterTimerEvent(gg_trg_InitSystem, .01, false);
	TriggerAddAction(gg_trg_InitSystem, Trig_InitSystem_Actions);
}
boolean Trig_EnterUnit_Conditions() {
	return IsUnitInGroup(GetEnteringUnit(), udg_DamageGroup) == false;
}
nothing Trig_EnterUnit_Actions() {
	unit u = GetEnteringUnit();
	if (GetUnitTypeId(u) != 'h00U' && IsUnitType(u, UNIT_TYPE_STRUCTURE) != true && GetUnitTypeId(u) != 'h00C') {
		GroupAddUnit(udg_DamageGroup, u);
		UnitAddAbility(u, 'A66B');
		UnitMakeAbilityPermanent(u, true, 'A66B');
		UnitMakeAbilityPermanent(u, true, 'A666');
		TriggerRegisterUnitEvent(gg_trg_AddDamage, u, EVENT_UNIT_DAMAGED);
	}
}
nothing InitTrig_EnterUnit() {
	region rectRegion = CreateRegion();
	RegionAddRect(rectRegion, GetWorldBounds());
	TriggerRegisterEnterRegion(gg_trg_EnterUnit, rectRegion, null);
	TriggerAddCondition(gg_trg_EnterUnit, Condition(Trig_EnterUnit_Conditions));
	TriggerAddAction(gg_trg_EnterUnit, Trig_EnterUnit_Actions);
}
nothing Trig_Remove_Bonus_Marshal_Armor_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit damaged = LoadUnitHandle(udg_hash, h, 1);
	SetUnitLifeAndManaRegeneration(damaged, "life", -1);
	SetArmorAbilityLevel(damaged, -1);
	SaveInteger(udg_hash, GetHandleId(damaged), $99, LoadInteger(udg_hash, GetHandleId(damaged), $99) - 1);
	SaveUnitHandle(udg_hash, h, 1, damaged);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_Remove_ASBonus_Double_Attack_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit damager = LoadUnitHandle(udg_hash, h, 1);
	DestroyEffect(LoadEffectHandle(udg_hash, h, 2));
	DestroyEffect(LoadEffectHandle(udg_hash, h, 3));
	UnitRemoveAbility(damager, 'A0P4');
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_Remove_Lightning_From_Staff_Of_Lightning_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit Picked = LoadUnitHandle(udg_hash, h, 1);
	integer wait = LoadInteger(udg_hash, h, 2);
	unit damaged = LoadUnitHandle(udg_hash, h, 3);
	lightning l = LoadLightningHandle(udg_hash, h, 4);
	location locr = GetUnitLoc(damaged);
	location locd = GetUnitLoc(Picked);
	SaveInteger(udg_hash, h, 2, wait);
	MoveLightningEx(l, true, GetUnitX(damaged), GetUnitY(damaged), GetUnitFlyHeight(damaged) + 25. + GetLocationZ(locr), GetUnitX(Picked), GetUnitY(Picked), GetUnitFlyHeight(Picked) + 25. + GetLocationZ(locd));
	if (wait <= 0) {
		DestroyLightning(l);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	RemoveLocation(locr);
	RemoveLocation(locd);
}
nothing Trig_Beorn_Rage_Remove_Effects_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit damaged = LoadUnitHandle(udg_hash, h, 1);
	effect ef;
	DestroyEffect(ef);
	DestroyEffect(ef);
	SaveBoolean(udg_hash, GetHandleId(damaged), $84, false);
	SetAttackSpeedAbilityLevel(damaged, -50);
	SetAttackAbilityLevel(damaged, -$A);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_Blood_Bow_Remove_Effects_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	integer attackspeed = LoadInteger(udg_hash, h, 1);
	unit damager = LoadUnitHandle(udg_hash, h, 2);
	effect ef = LoadEffectHandle(udg_hash, h, 3);
	DestroyEffect(ef);
	DestroyEffect(ef);
	SetAttackSpeedAbilityLevel(damager, -attackspeed);
	SetAttackAbilityLevel(damager, -R2I(attackspeed / 2));
	SaveInteger(udg_hash, GetHandleId(damager), $82, 0);
	SaveTimerHandle(udg_hash, GetHandleId(damager), $81, null);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_Moon_Chackrum_Periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit damager = LoadUnitHandle(udg_hash, h, 1);
	unit target = LoadUnitHandle(udg_hash, h, $C);
	integer count = LoadInteger(udg_hash, h, 3);
	unit glaive = LoadUnitHandle(udg_hash, h, $A);
	unit target2;
	real damage;
	real damagemagic;
	group gdamage;
	real height;
	effect ef;
	real x = GetUnitX(glaive);
	real y = GetUnitY(glaive);
	real xt = GetUnitX(target);
	real yt = GetUnitY(target);
	real xorb;
	real yorb;
	real angle = bj_RADTODEG * Atan2((yt - y), (xt - x));
	real dist = SquareRoot(((xt - x) * (xt - x)) + ((yt - y) * (yt - y)));
	player p;
	group g;
	group grup;
	unit Picked;
	boolean remove = false;
	boolean reselect = false;
	unit orb2;
	effect ef2;
	boolean night;
	string str;
	real resist;
	if (GetUnitState(target, UNIT_STATE_LIFE) > .405) {
		SetUnitPosition(glaive, xorb, yorb);
		SetUnitFacing(glaive, angle);
		if (dist < 21.) {
			SetUnitPosition(glaive, xt, yt);
			SetUnitPosition(glaive, xt, yt);
			if (GetUnitState(target, UNIT_STATE_LIFE) > .0 && IsUnitType(target, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(target) != 'h00U' && GetUnitTypeId(target) != 'uplg') {
				SaveReal(udg_hash, h, 2, damage);
				SaveReal(udg_hash, h, 20, damagemagic);
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl", target, "chest"));
				UnitDamageTarget(damager, target, ConvertMagicAndChaosDamageInClear(target, damagemagic, damage), false, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				if (night) {
					DestroyEffect(AddSpecialEffectTarget("Effects\\SoundTrauma.mdl", target, "chest"));
				}
				GroupAddUnit(gdamage, target);
			}
			SaveInteger(udg_hash, h, 3, count);
			SaveGroupHandle(udg_hash, h, 9, gdamage);
		}
	}
	if (count > 0 && reselect) {
		GroupEnumUnitsInRange(g, xt, yt, 350., null);
		while (true) {
			if (Picked == null) break;
			if (IsUnitInGroup(Picked, gdamage) == false && IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U' && GetUnitTypeId(Picked) != 'uplg') {
				GroupAddUnit(grup, Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
		RandomUnitFromGroup(1, grup);
		GroupClear(g);
		DestroyGroup(g);
		if (target2 != null) {
			DestroyEffect(ef);
			RemoveUnit(glaive);
			if (night) {
				SetUnitScale(orb2, .6, .6, .6);
			else
			}
			DestroyEffect(AddSpecialEffectTarget(str, target2, "chest"));
			UnitAddAbility(orb2, 'Amrf');
			UnitRemoveAbility(orb2, 'Amrf');
			SetUnitFlyHeight(orb2, 45., .0);
			SaveUnitHandle(udg_hash, h, $A, orb2);
			SaveEffectHandle(udg_hash, h, $B, ef2);
			SaveUnitHandle(udg_hash, h, $C, target2);
		else
		}
	}
	if (count <= 0 || (GetUnitState(target, UNIT_STATE_LIFE) < .405)) {
	}
	if (remove) {
		RemoveUnit(glaive);
		DestroyEffect(ef);
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		DestroyTimer(t);
		FlushChildHashtable(udg_hash, h);
	}
}
nothing Trig_Stone_Armor_Periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster;
	unit dammi = LoadUnitHandle(udg_hash, h, 2);
	integer wait2 = LoadInteger(udg_hash, h, 3);
	unit target = LoadUnitHandle(udg_hash, h, 4);
	real damage;
	real height;
	effect ef;
	real x = GetUnitX(dammi);
	real y = GetUnitY(dammi);
	real xt = GetUnitX(target);
	real yt = GetUnitY(target);
	real angle = bj_RADTODEG * Atan2(yt - y, xt - x);
	real dist;
	boolean destroy = false;
	if (GetUnitState(target, UNIT_STATE_LIFE) > .405) {
		SaveInteger(udg_hash, h, 3, wait2);
		if (wait2 == 0) {
			SetUnitFlyHeight(dammi, .0, height * 3.33);
		}
		SetUnitFacing(dammi, GetUnitFacing(dammi) + 30.);
		if (IsTerrainPathable(x, y, PATHING_TYPE_FLYABILITY) == false) {
			SetUnitPosition(dammi, x, y);
		}
		if (dist < 25.) {
			SetUnitFlyHeight(dammi, GetUnitFlyHeight(target) + 50., .0);
			SetUnitPosition(dammi, xt, yt);
			UnitDamageTarget(caster, target, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", target, "chest"));
			DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", GetUnitX(target), GetUnitY(target)));
			MoveUnit(target, .3, 600., 900., angle, .0, true);
		}
	else
	}
	if (destroy) {
		RemoveUnit(dammi);
		DestroyEffect(ef);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
}
nothing Trig_IsMinimapPingGuardsAttacked_Refresh_Actions() {
	timer t = GetExpiredTimer();
	DestroyTimer(t);
}
nothing Trig_Archimagus_Armor_Timer_Death_Denial_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit damaged = LoadUnitHandle(udg_hash, h, 1);
	integer hd = GetHandleId(damaged);
	effect ef;
	if (LoadBoolean(udg_hash, hd, 'f')) {
		SaveEffectHandle(udg_hash, hd, 'g', ef);
		SaveReal(udg_hash, hd, 'i', (500. + (GetHeroInt(damaged, true) * 3.)));
	}
	SaveReal(udg_hash, hd, 'h', .0);
	SaveBoolean(udg_hash, hd, 'j', false);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_Cuirass_of_Invulnerable_Timer_Death_Denial_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit damaged = LoadUnitHandle(udg_hash, h, 1);
	integer hd = GetHandleId(damaged);
	effect ef;
	if (LoadBoolean(udg_hash, hd, 94)) {
		SaveEffectHandle(udg_hash, hd, 95, ef);
	}
	SaveBoolean(udg_hash, hd, $A2, false);
	SaveReal(udg_hash, hd, 96, .0);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_Wind_Bow_Remove_Attack_Speed_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	integer attackspeed = LoadInteger(udg_hash, h, 1);
	unit damager = LoadUnitHandle(udg_hash, h, 2);
	effect ef = LoadEffectHandle(udg_hash, h, 3);
	DestroyEffect(ef);
	DestroyEffect(ef);
	SetAttackSpeedAbilityLevel(damager, -attackspeed);
	SaveTimerHandle(udg_hash, GetHandleId(damager), 92, null);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_Pancir_Iachera_Periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit damaged = LoadUnitHandle(udg_hash, h, 1);
	unit dammi = LoadUnitHandle(udg_hash, h, 2);
	integer wait = LoadInteger(udg_hash, h, 3);
	real angle = LoadReal(udg_hash, h, 4);
	real damage;
	real stuntime;
	effect ef;
	real x = GetUnitX(dammi);
	real y = GetUnitY(dammi);
	real xnew = x + 24. * Cos(angle * bj_DEGTORAD);
	real ynew = y + 24. * Sin(angle * bj_DEGTORAD);
	player p = GetOwningPlayer(damaged);
	unit Picked;
	group g = CreateGroup();
	boolean destroy = false;
	SaveInteger(udg_hash, h, 3, wait);
	if (wait > 0) {
		if (IsTerrainPathable(xnew, ynew, PATHING_TYPE_FLYABILITY) == false) {
			SetUnitPosition(dammi, xnew, ynew);
		}
		GroupEnumUnitsInRange(g, xnew, ynew, 100., null);
		while (true) {
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl", Picked, "chest"));
				UnitDamageTarget(damaged, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				StunUnitTimed(Picked, stuntime);
			}
			GroupRemoveUnit(g, Picked);
		}
	else
	}
	if (destroy) {
		DestroyEffect(ef);
		KillUnit(dammi);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	GroupClear(g);
	DestroyGroup(g);
}
nothing Trig_Pancir_Iachera_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit damager = LoadUnitHandle(udg_hash, h, 1);
	SetAttackAbilityLevel(damager, $E);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_Spirit_of_Absorption_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit damager = LoadUnitHandle(udg_hash, h, 1);
	real damage = LoadReal(udg_hash, h, 2);
	real manaburn = LoadReal(udg_hash, h, 3);
	integer wait = LoadInteger(udg_hash, h, 4);
	unit dammi = LoadUnitHandle(udg_hash, h, 5);
	group gdamage = LoadGroupHandle(udg_hash, h, 6);
	effect ef;
	real x = GetUnitX(dammi);
	real y = GetUnitY(dammi);
	player p = GetOwningPlayer(damager);
	unit Picked;
	group g = CreateGroup();
	SaveInteger(udg_hash, h, 4, wait);
	if (wait > 0) {
		GroupEnumUnitsInRange(g, x, y, 100., null);
		while (true) {
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && (IsUnitInGroup(Picked, udg_PortalCastersMagi) == false) && IsUnitInGroup(Picked, gdamage) == false && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Feedback\\ArcaneTowerAttack.mdl", Picked, "origin"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\OrbOfDeath\\OrbOfDeathMissile.mdl", Picked, "chest"));
				UnitDamageTarget(damager, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				SetUnitState(Picked, UNIT_STATE_MANA, GetUnitState(Picked, UNIT_STATE_MANA) - manaburn);
				GroupAddUnit(gdamage, Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
		SaveGroupHandle(udg_hash, h, 6, gdamage);
	else
		SetUnitTimeScale(dammi, 1.);
		DestroyEffect(ef);
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\OrbOfDeath\\OrbOfDeathMissile.mdl", x, y));
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\OrbOfDeath\\AnnihilationMissile.mdl", x, y));
		RemoveUnit(dammi);
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	GroupClear(g);
	DestroyGroup(g);
}
nothing Trig_Triple_Strike_Move_And_Attack_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit damager = LoadUnitHandle(udg_hash, h, 1);
	unit damaged = LoadUnitHandle(udg_hash, h, 2);
	real damage = LoadReal(udg_hash, h, 3);
	integer wait = LoadInteger(udg_hash, h, 4);
	integer lvl = LoadInteger(udg_hash, h, $A);
	real xdr = GetUnitX(damager);
	real ydr = GetUnitY(damager);
	real xdd = GetUnitX(damaged);
	real ydd = GetUnitY(damaged);
	real angle = (LoadReal(udg_hash, h, 5)) + 120.;
	real x = xdd + 100. * Cos(angle * bj_DEGTORAD);
	real y = ydd + 100. * Sin(angle * bj_DEGTORAD);
	group g;
	unit Picked;
	player p;
	SaveReal(udg_hash, h, 5, angle);
	SaveInteger(udg_hash, h, 4, wait);
	if (wait <= 4) {
		if (wait == 3) {
			SetUnitX(damager, x);
			SetUnitY(damager, y);
			SetUnitFacing(damager, angle + 180.);
			SaveReal(udg_hash, h, 8, xdd);
			SaveReal(udg_hash, h, 9, ydd);
			SetUnitTimeScale(damager, 1.4);
			SetUnitAnimationByIndex(damager, 3);
			TimerStart(t, .6, false, Trig_Triple_Strike_Move_And_Attack_Actions);
		}
		if (wait == 4) {
			GroupEnumUnitsInRange(g, LoadReal(udg_hash, h, 8), LoadReal(udg_hash, h, 9), 200., null);
			while (true) {
				if (Picked == null) break;
				if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
					UnitDamageTarget(damager, Picked, damage + (30 * lvl), false, false, ATTACK_TYPE_MELEE, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", Picked, "chest"));
				}
				GroupRemoveUnit(g, Picked);
			}
			DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile.mdl", LoadReal(udg_hash, h, 8), LoadReal(udg_hash, h, 9)));
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl", LoadReal(udg_hash, h, 8), LoadReal(udg_hash, h, 9)));
			TimerStart(t, .0, false, Trig_Triple_Strike_Move_And_Attack_Actions);
		}
		if (wait < 3) {
			if (GetRandomInt(1, 2) == 1) {
				SetUnitAnimationByIndex(damager, 8);
			else
				SetUnitAnimationByIndex(damager, 2);
			}
			SetUnitX(damager, x);
			SetUnitY(damager, y);
			SetUnitFacing(damager, angle + 180.);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Blink\\BlinkCaster.mdl", damager, "chest"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", damaged, "chest"));
			UnitDamageTarget(damager, damaged, damage, true, false, ATTACK_TYPE_MELEE, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
		}
	else
		SaveBoolean(udg_hash, GetHandleId(damager), 61, false);
		DestroyEffect(LoadEffectHandle(udg_hash, h, 6));
		DestroyEffect(LoadEffectHandle(udg_hash, h, 7));
		SetUnitInvulnerable(damager, false);
		SetUnitPathing(damager, true);
		SetUnitAnimation(damager, "Stand");
		SetUnitTimeScale(damager, 1.);
		SetUnitTurnSpeed(damager, GetUnitDefaultTurnSpeed(damager));
		IssueImmediateOrderById(damager, $D0004);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	GroupClear(g);
	DestroyGroup(g);
}
nothing Trig_Damage_Unit_With_Wait_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit damaged = LoadUnitHandle(udg_hash, h, 1);
	unit damager = LoadUnitHandle(udg_hash, h, 2);
	real damage = LoadReal(udg_hash, h, 3);
	string str = LoadStr(udg_hash, h, 4);
	if (str == "phys") {
		UnitDamageTarget(damager, damaged, damage, false, false, ATTACK_TYPE_MELEE, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS);
	}
	if (str == "magic") {
		UnitDamageTarget(damager, damaged, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
	}
	if (str == "clear") {
		UnitDamageTarget(damager, damaged, damage, false, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
	}
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_Make_Unit_UnInvulnerable_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit damaged = LoadUnitHandle(udg_hash, h, 1);
	SetUnitInvulnerable(damaged, false);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_Hil_Unit_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit damaged = LoadUnitHandle(udg_hash, h, 1);
	real hil = LoadReal(udg_hash, h, 2);
	SetUnitState(damaged, UNIT_STATE_LIFE, GetUnitState(damaged, UNIT_STATE_LIFE) + hil);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_Trolls_Evasion_Salto_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit damaged = LoadUnitHandle(udg_hash, h, 1);
	integer i = LoadInteger(udg_hash, h, 2);
	if (i == 0) {
		SaveInteger(udg_hash, h, 2, 1);
		TimerStart(t, .5, false, Trig_Trolls_Evasion_Salto_Actions);
		SetUnitTimeScale(damaged, 1.75);
	else
		PauseUnit(damaged, false);
		SetUnitTimeScale(damaged, 1.);
		if (GetUnitState(damaged, UNIT_STATE_LIFE) > .405) {
			SetUnitAnimation(damaged, "Stand");
		}
		SetUnitInvulnerable(damaged, false);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
}
nothing Trig_Dark_Crypt_Fiend_Attack_Unbuff_Dispel_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit damaged = LoadUnitHandle(udg_hash, h, 1);
	SetArmorAbilityLevel(damaged, 2);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_Varmosar_Lightning_Destroy_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	lightning l = LoadLightningHandle(udg_hash, h, 1);
	DestroyLightning(l);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_AddDamage_Refresh_Creep_Assists_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	player pr = LoadPlayerHandle(udg_hash, h, 1);
	force players = LoadForceHandle(udg_hash, h, 2);
	integer hdd = LoadInteger(udg_hash, h, 3);
	ForceRemovePlayer(players, pr);
	SaveForceHandle(udg_hash, hdd, 72, players);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_AddDamage_Refresh_Magic_Damage_Handle_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	integer hdd = LoadInteger(udg_hash, h, 1);
	SaveBoolean(udg_hash, hdd, $9D, false);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_AddDamage_Refresh_Handle_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	integer hdd = LoadInteger(udg_hash, h, 2);
	SaveInteger(udg_hash, hdd, $AA, 0);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_AddDamage_Actions() {
	unit damager = GetEventDamageSource();
	unit damaged = GetTriggerUnit();
	real damage = GetEventDamage();
	integer hdr = GetHandleId(damager);
	integer hdd = GetHandleId(damaged);
	real xr = GetUnitX(damager);
	real yr = GetUnitY(damager);
	real xd = GetUnitX(damaged);
	real yd = GetUnitY(damaged);
	player pr = GetOwningPlayer(damager);
	player pd = GetOwningPlayer(damaged);
	location locr;
	location locd;
	unit dammi;
	unit Picked;
	unit u;
	lightning l;
	timer t;
	integer h;
	timer t2;
	integer h2;
	timer t3;
	integer h3;
	texttag txt;
	integer i;
	integer lvl;
	integer count;
	effect ef;
	real angle;
	real r1;
	real r2;
	real r3;
	real r4;
	string str;
	group g;
	group g2;
	force players;
	boolean bool;
	real dist;
	boolean b;
	player p;
	group gdamagefromdamager;
	group gdamagefromdamaged;
	integer random;
	boolean melee;
	boolean physical = false;
	boolean loadphysical = false;
	if (1 == 2) {
		SaveInteger(udg_hash, h, 2, hdd);
		TimerStart(t, .0, false, Trig_AddDamage_Refresh_Handle_Actions);
	}
	if ((GetUnitAbilityLevel(damaged, 'B00M') > 0 || GetUnitAbilityLevel(damaged, 'B00L') > 0)) {
		if (GetUnitAbilityLevel(GetTriggerUnit(), 'B00M') > 0) {
		else
		}
		UnitRemoveAbility(GetTriggerUnit(), 'B00M');
		UnitRemoveAbility(GetTriggerUnit(), 'B00L');
	}
	if (damage >= .01 && physical) {
		if (GetUnitTypeId(damager) == 'N00W') {
			SaveLightningHandle(udg_hash, h, 1, l);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", damaged, "origin"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\ChimaeraLightningMissile\\ChimaeraLightningMissile.mdl", damaged, "chest"));
			DestroyEffect(AddSpecialEffectTarget("Effects\\OrbOfLightning.mdx", damaged, "origin"));
			TimerStart(t, .3, false, Trig_Varmosar_Lightning_Destroy_Actions);
			RemoveLocation(locr);
			RemoveLocation(locd);
		}
		if (GetUnitAbilityLevel(damager, 'A051') > 0 && GetRandomInt(1, 4) == 1) {
			GroupEnumUnitsInRange(g, xd, yd, 250., null);
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl", xd, yd));
			while (true) {
				if (Picked == null) break;
				if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, pr) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
					UnitDamageTarget(damager, Picked, 100. + 25 * CountPlayersInForceBJ(udg_IGRAET), false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
					StunUnitTimed(Picked, 1.);
				}
				GroupRemoveUnit(g, Picked);
			}
			GroupClear(g);
			DestroyGroup(g);
		}
		if (GetUnitAbilityLevel(damager, 'A06Z') > 0 && GetRandomInt(1, 'd') <= 8 && LoadInteger(udg_hash, GetHandleId(damager), 64) < (GetUnitAbilityLevel(damager, 'A06Z') + 2)) {
			SaveUnitHandle(udg_hash, GetHandleId(dammi), 63, damager);
			SaveInteger(udg_hash, GetHandleId(damager), 64, LoadInteger(udg_hash, GetHandleId(damager), 64) + 1);
		}
		if (GetUnitAbilityLevel(damager, 'A07J') > 0 && GetRandomInt(1, 'd') <= $A && LoadInteger(udg_hash, hdr, 'z') <= $E) {
			SetAttackAbilityLevel(damager, 2);
			SetUnitMaxState(damager, UNIT_STATE_MAX_LIFE, 20);
			SaveInteger(udg_hash, hdr, 'z', LoadInteger(udg_hash, hdr, 'z') + 1);
			if (LoadInteger(udg_hash, hdr, 'z') == $F) {
				SaveEffectHandle(udg_hash, hdr, '{', ef);
			}
		}
		if (GetUnitTypeId(damager) == 'u00D' && IsUnitType(damaged, UNIT_TYPE_MAGIC_IMMUNE) == false && IsUnitIllusion(damager) == false && GetRandomInt(1, $A) == 1) {
			UnitApplyTimedLife(dammi, 'BTLF', 2.);
			UnitAddAbility(dammi, 'A08R');
			IssuePointOrderById(dammi, $D00FA, xd, yd);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AvengerMissile\\AvengerMissile.mdl", damaged, "chest"));
			if (GetUnitAbilityLevel(damaged, 'A087') <= 0) {
				UnitAddAbility(damaged, 'A087');
				UnitAddAbility(damaged, 'A0AH');
				UnitAddAbility(damaged, 'A0AG');
				UnitAddAbility(damaged, 'A0D8');
				UnitAddAbility(damaged, 'A0AT');
				UnitAddAbility(damaged, 'A0AS');
			}
			SetArmorAbilityLevel(damaged, -2);
			SaveUnitHandle(udg_hash, h, 1, damaged);
			TimerStart(t, 10., false, Trig_Dark_Crypt_Fiend_Attack_Unbuff_Dispel_Actions);
		}
		if (GetUnitAbilityLevel(damager, 'A0EO') > 0) {
			if (lvl + i <= 30 * GetUnitAbilityLevel(damager, 'A0EN') - 5) {
				SetHeroAgi(damager, GetHeroAgi(damager, false) + i, true);
				ProgressBarAddPercentComplete(LoadUnitHandle(udg_hash, GetHandleId(damager), 'u'), (i * 100. / (30 * GetUnitAbilityLevel(damager, 'A0EN') - 5)));
				SaveInteger(udg_hash, h, 52, lvl);
			else
				SetHeroAgi(damager, GetHeroAgi(damager, false) - lvl + (30 * GetUnitAbilityLevel(damager, 'A0EN')) - 5, true);
				SaveInteger(udg_hash, h, 52, lvl);
			}
		}
		if (GetUnitTypeId(damaged) == 'n00U' && IsUnitType(damager, UNIT_TYPE_MAGIC_IMMUNE) == false && GetRandomInt(1, 4) == 1) {
			UnitApplyTimedLife(dammi, 'BTLF', 2.);
			UnitAddAbility(dammi, 'A0E0');
			IssueTargetOrderById(dammi, $D007F, damager);
		}
		if (GetUnitAbilityLevel(damager, 'A08V') > 0 && IsUnitType(damaged, UNIT_TYPE_MAGIC_IMMUNE) == false && GetRandomInt(1, 'd') <= 6) {
			UnitApplyTimedLife(dammi, 'BTLF', 2.);
			UnitAddAbility(dammi, 'A08Z');
			IssueTargetOrderById(dammi, $D00CB, damaged);
		}
		if (GetUnitAbilityLevel(damager, 'A0E4') > 0 && IsUnitType(damaged, UNIT_TYPE_MAGIC_IMMUNE) == false && GetRandomInt(1, 'd') <= $F) {
			UnitApplyTimedLife(dammi, 'BTLF', 2.);
			UnitAddAbility(dammi, 'A092');
			IssueTargetOrderById(dammi, $D006B, damaged);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathCoil\\DeathCoilSpecialArt.mdl", damaged, "chest"));
		}
		if (GetUnitAbilityLevel(damaged, 'A0E5') > 0 && GetRandomInt(1, 5) == 1 && 1 == 2) {
			SaveUnitHandle(udg_hash, h, 1, damaged);
			SaveInteger(udg_hash, h, 2, 0);
			if (IsTerrainPathable(xd + 50. * Cos((180. + bj_RADTODEG * Atan2(yr - yd, xr - xd)) * bj_DEGTORAD), yd + 50. * Sin((180. + bj_RADTODEG * Atan2(yr - yd, xr - xd)) * bj_DEGTORAD), PATHING_TYPE_WALKABILITY) == false) {
				SetUnitX(damaged, xd + 50. * Cos((180. + bj_RADTODEG * Atan2(yr - yd, xr - xd)) * bj_DEGTORAD));
				SetUnitY(damaged, yd + 50. * Sin((180. + bj_RADTODEG * Atan2(yr - yd, xr - xd)) * bj_DEGTORAD));
			}
			DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl", xd + 50. * Cos((180. + bj_RADTODEG * Atan2(yr - yd, xr - xd)) * bj_DEGTORAD), yd + 50. * Sin((180. + bj_RADTODEG * Atan2(yr - yd, xr - xd)) * bj_DEGTORAD)));
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\CarrionSwarm\\CarrionSwarmDamage.mdl", xd + 50. * Cos((180. + bj_RADTODEG * Atan2(yr - yd, xr - xd)) * bj_DEGTORAD), yd + 50. * Sin((180. + bj_RADTODEG * Atan2(yr - yd, xr - xd)) * bj_DEGTORAD)));
			SetUnitFacing(damaged, bj_RADTODEG * Atan2(yr - yd, xr - xd));
			PauseUnit(damaged, true);
			SetUnitTimeScale(damaged, 10.);
			SetUnitAnimationByIndex(damaged, 2);
			SetTextTagText(txt, "|cFFFF0000miss!|r", .0275);
			SetTextTagPos(txt, xd, yd, .0);
			SetTextTagColor(txt, 0, 0, 0, $C8);
			SetTextTagVelocity(txt, .0221875 * Cos(45. + GetRandomReal(.0, 90.) * bj_DEGTORAD), .0221875 * Sin(45. + GetRandomReal(.0, 90.) * bj_DEGTORAD));
			SetTextTagLifespan(txt, 3.);
			SetTextTagFadepoint(txt, .0);
			SetTextTagPermanent(txt, false);
			TimerStart(t, .04, false, Trig_Trolls_Evasion_Salto_Actions);
			SaveUnitHandle(udg_hash, h, 1, damaged);
			SaveReal(udg_hash, h, 2, damage);
			if (GetUnitState(damaged, UNIT_STATE_LIFE) < damage) {
				SetUnitInvulnerable(damaged, true);
			else
				TimerStart(t, .0, false, Trig_Hil_Unit_Actions);
			}
		}
		if (GetUnitAbilityLevel(damager, 'A09E') > 0 && GetRandomInt(1, 2) == 1) {
			if (i <= 0) {
				SaveEffectHandle(udg_hash, h, 55, ef);
				SaveEffectHandle(udg_hash, h, 56, ef);
			}
			if (i <= 8 && i > 0) {
				SaveInteger(udg_hash, h, 54, i);
				SetAttackAbilityLevel(damager, 6);
			}
			if (i == 8) {
				SaveInteger(udg_hash, h, 54, i);
				SaveEffectHandle(udg_hash, h, 57, ef);
				IssueImmediateOrderById(damager, $D0084);
			}
		}
		if (GetUnitAbilityLevel(damaged, 'A0ET') > 0 && LoadBoolean(udg_hash, GetHandleId(damaged), 1)) {
			if ((angle <= (r2 + 240.) && angle >= (r2 + 120.))) {
				if (lvl > 0 && GetRandomReal(0, 'd') <= ($B + lvl * 4)) {
					CreateTexttag("" + SubString(R2S(r3), 0, StringLength(R2S(r3)) - 2), .023, 'x', xd, yd, .0, .0, .035, 3.5);
					GroupAddUnit(gdamagefromdamaged, damager);
					SaveReal(udg_hash, hdr, $A0, LoadReal(udg_hash, hdr, $A0) + r3);
					UnitApplyTimedLife(dammi, 'BTLF', 2.);
					UnitAddAbility(dammi, 'A0EV');
					IssueTargetOrderById(dammi, $D007F, damager);
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Defend\\DefendCaster.mdl", damaged, "origin"));
				}
			}
			SetUnitState(damaged, UNIT_STATE_LIFE, GetUnitState(damaged, UNIT_STATE_LIFE) + damage * r1);
		}
		if (GetUnitAbilityLevel(damager, 'A0F3') > 0) {
			if (LoadInteger(udg_hash, GetHandleId(u), 60) < GetUnitAbilityLevel(damager, 'A0F3') + 1 && GetUnitAbilityLevel(damager, 'Aloc') <= 0 && ((GetRandomInt(1, 'd') < 3 + (2 * GetUnitAbilityLevel(damager, 'A0F3')) && IsUnitIllusion(damager) == false) || ((GetRandomInt(1, 'd') < 2 + GetUnitAbilityLevel(damager, 'A0F3') && IsUnitIllusion(damager))))) {
				UnitApplyTimedLife(dammi, 'BTLF', 1.);
				UnitAddAbility(dammi, 'A0AY');
				SetUnitAbilityLevel(dammi, 'A0AY', 1 + GetUnitAbilityLevel(u, 'A0F2'));
				IssueTargetOrderById(dammi, $D0132, damager);
				SaveBoolean(udg_hash, GetHandleId(dammi), 3, false);
			}
		}
		if (GetUnitAbilityLevel(damager, 'B01P') >= 1) {
			UnitRemoveAbility(damager, 'B01P');
			UnitRemoveAbility(damager, 'A0GY');
		}
		if (GetUnitAbilityLevel(damaged, 'B01P') >= 1 && GetUnitAbilityLevel(damaged, 'A0GY') < 1) {
			UnitAddAbility(damaged, 'A0GY');
		}
		if (GetUnitAbilityLevel(damaged, 'A09Y') == 1) {
			PauseUnit(damaged, false);
			UnitRemoveAbility(damaged, 'A09Y');
			UnitAddAbility(dammi, 'A0HF');
			SetUnitAbilityLevel(dammi, 'A0HF', GetUnitAbilityLevel(damaged, 'A0GZ'));
			IssueTargetOrderById(dammi, $D02B6, damager);
			UnitApplyTimedLife(dammi, 'BTLF', .5);
		}
		if (GetUnitAbilityLevel(damager, 'B03I') > 0 && GetRandomInt(1, 'd') <= 20) {
			UnitAddAbility(dammi, 'A0HK');
			IssueTargetOrderById(dammi, $D0062, damaged);
			UnitApplyTimedLife(dammi, 'BTLF', 1.5);
			UnitRemoveAbility(damager, 'B03I');
		}
		if (GetUnitAbilityLevel(damager, 'A0FF') > 0 && GetRandomInt(1, 'd') <= (8 + 2 * GetUnitAbilityLevel(damager, 'A0FF')) && IsUnitIllusion(damager) == false && LoadBoolean(udg_hash, hdr, 61) == false && GetUnitState(damaged, UNIT_STATE_LIFE) > .405) {
			SaveUnitHandle(udg_hash, h, 1, damager);
			SaveUnitHandle(udg_hash, h, 2, damaged);
			SaveReal(udg_hash, h, 3, damage);
			SaveInteger(udg_hash, h, 4, 0);
			SaveReal(udg_hash, h, 5, bj_RADTODEG * Atan2(yr - yd, xr - xd));
			SaveBoolean(udg_hash, hdr, 61, true);
			SaveInteger(udg_hash, h, $A, GetUnitAbilityLevel(damager, 'A0FF'));
			UnitPeriodicPostionMove(damager, .02, 1.2);
			SetUnitInvulnerable(damager, true);
			SetUnitPathing(damager, false);
			SetUnitAnimationByIndex(damager, 2);
			SetUnitTimeScale(damager, 4.);
			SetUnitTurnSpeed(damager, 3.);
			if (GetRandomInt(1, 2) == 1) {
				SetUnitAnimationByIndex(damager, 8);
			else
				SetUnitAnimationByIndex(damager, 2);
			}
			SaveEffectHandle(udg_hash, h, 6, ef);
			SaveEffectHandle(udg_hash, h, 7, ef);
			TimerStart(t, .2, true, Trig_Triple_Strike_Move_And_Attack_Actions);
		}
		if (GetUnitAbilityLevel(damager, 'A0GH') > 0 && GetRandomInt(1, 'd') <= 40 && IsUnitIllusion(damager) == false) {
			SetUnitVertexColor(dammi, $DC, $DC, $DC, 'd');
			SetUnitAnimation(dammi, "stand");
			SetUnitTimeScale(dammi, 1.5);
			SetUnitAnimationByIndex(dammi, 1);
			SaveUnitHandle(udg_hash, h, 1, damager);
			SaveReal(udg_hash, h, 2, r1);
			SaveReal(udg_hash, h, 3, r2);
			SaveInteger(udg_hash, h, 4, 66);
			SaveUnitHandle(udg_hash, h, 5, dammi);
			SaveGroupHandle(udg_hash, h, 6, g);
			SaveEffectHandle(udg_hash, h, 7, ef);
			MoveUnit(dammi, 2., 400., .0, angle, .0, true);
			TimerStart(t, .03, true, Trig_Spirit_of_Absorption_Actions);
		}
		if (GetUnitAbilityLevel(damager, 'A09O') > 0 && IsUnitType(damaged, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitState(damaged, UNIT_STATE_MAX_MANA) > .0) {
			GroupAddUnit(gdamagefromdamager, damaged);
			SaveReal(udg_hash, hdd, $9E, LoadReal(udg_hash, hdd, $9E) + 15.);
			SetUnitState(damaged, UNIT_STATE_MANA, GetUnitState(damaged, UNIT_STATE_MANA) - 15.);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Feedback\\ArcaneTowerAttack.mdl", damaged, "origin"));
		}
		if (GetUnitAbilityLevel(damager, 'A0H2') > 0 && r1 > 0) {
			SaveReal(udg_hash, hdr, 68, r2);
			if (r2 < .0) {
				UnitRemoveAbility(damager, 'A0H2');
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DevourMagic\\DevourMagicBirthMissile.mdl", damager, "hand,right"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DevourMagic\\DevourMagicBirthMissile.mdl", damager, "hand,left"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DevourMagic\\DevourMagicBirthMissile.mdl", damager, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DevourMagic\\DevourMagicBirthMissile.mdl", damager, "weapon"));
			}
			SaveUnitHandle(udg_hash, h, 1, damaged);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayDamage.mdl", damaged, "chest"));
			if (damage >= r3) {
				SetUnitInvulnerable(damaged, true);
				TimerStart(t, .0, false, Trig_Make_Unit_UnInvulnerable_Actions);
			else
				SaveReal(udg_hash, h, 2, damage);
				TimerStart(t, .0, false, Trig_Hil_Unit_Actions);
			}
		}
		if (GetUnitAbilityLevel(damaged, 'A0HN') > 0 && GetRandomInt(1, 'd') <= 40) {
			if (damage >= r2 && r1 < r2) {
				SaveUnitHandle(udg_hash, h, 1, damaged);
				SetUnitInvulnerable(damaged, true);
				TimerStart(t, .0, false, Trig_Make_Unit_UnInvulnerable_Actions);
				GroupAddUnit(gdamagefromdamager, damaged);
				SaveReal(udg_hash, hdd, $9E, LoadReal(udg_hash, hdd, $9E) + r1);
			}
			if (damage < r2) {
				SaveUnitHandle(udg_hash, h, 1, damaged);
				SaveReal(udg_hash, h, 2, r1);
				TimerStart(t, .0, false, Trig_Hil_Unit_Actions);
			}
			if (r3 <= 225.) {
				GroupAddUnit(gdamagefromdamaged, damager);
				SaveReal(udg_hash, hdr, $A0, LoadReal(udg_hash, hdr, $A0) + 50.);
				SaveUnitHandle(udg_hash, h, 1, damager);
				SetAttackAbilityLevel(damager, -$E);
				TimerStart(t, 10., false, Trig_Pancir_Iachera_Actions);
				StunUnitTimed(damager, 1.45);
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SearingArrow\\SearingArrowMissile.mdl", damager, "weapon"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SearingArrow\\SearingArrowMissile.mdl", damager, "hand,right"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SearingArrow\\SearingArrowMissile.mdl", damager, "hand,left"));
			else
				SetUnitFlyHeight(dammi, 50., .0);
				SetUnitFacing(dammi, angle);
				SaveUnitHandle(udg_hash, h, 1, damaged);
				SaveUnitHandle(udg_hash, h, 2, dammi);
				SaveInteger(udg_hash, h, 3, 50);
				SaveReal(udg_hash, h, 4, angle);
				SaveReal(udg_hash, h, 5, 250.);
				SaveReal(udg_hash, h, 6, 1.45);
				SaveEffectHandle(udg_hash, h, 7, ef);
				TimerStart(t, .03, true, Trig_Pancir_Iachera_Periodic_Actions);
			}
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl", damager, "chest"));
		}
		if (GetUnitAbilityLevel(damager, 'A00K') > 0 && IsUnitType(damaged, UNIT_TYPE_MAGIC_IMMUNE) == false) {
			UnitApplyTimedLife(dammi, 'BTLF', 2.);
			UnitAddAbility(dammi, 'A01T');
			IssueTargetOrderById(dammi, $D0102, damaged);
		}
		if (GetUnitAbilityLevel(damager, 'A0AW') > 0 && IsUnitType(damaged, UNIT_TYPE_MAGIC_IMMUNE) == false && ($B + (3 * GetUnitAbilityLevel(damager, 'A0AW'))) >= GetRandomInt(1, 'd')) {
			GroupAddUnit(gdamagefromdamager, damaged);
			SaveReal(udg_hash, hdd, $9E, LoadReal(udg_hash, hdd, $9E) + (15. + ($A * GetUnitAbilityLevel(damager, 'A0AW'))));
			StunUnitTimed(damaged, .4 + (.2 * GetUnitAbilityLevel(damager, 'A0AW')));
		}
		if (GetUnitAbilityLevel(damager, 'A0HV') > 0 && GetRandomInt(1, 'd') <= 18) {
			GroupAddUnit(gdamagefromdamager, damaged);
			SaveReal(udg_hash, hdd, $9E, LoadReal(udg_hash, hdd, $9E) + r1);
			CreateTexttag(udg_ColorString[1] + I2S(R2I(r1 + damage)) + "!|r", .025, $FF, xd - 18., yd + 15., .0, .0, .035, 3.5);
		}
		if (GetUnitAbilityLevel(damager, 'A0K0') > 0 && GetRandomInt(1, 'd') <= $F) {
			UnitDamageTarget(damager, damaged, r1, false, false, ATTACK_TYPE_MELEE, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			CreateTexttag(udg_ColorString[1] + I2S(R2I(r1 + damage)) + "!|r", .025, $FF, xd - 18., yd + 15., .0, .0, .035, 3.5);
		}
		if ((GetUnitAbilityLevel(damager, 'A0I1') > 0 && (r2 * .3) > r1) || (GetUnitAbilityLevel(damager, 'A0I3') > 0 && (r2 * .4) > r1) || (GetUnitAbilityLevel(damager, 'A0I2') > 0 && (r2 * .5) > r1)) {
			if ((GetUnitAbilityLevel(damager, 'A0I1')) > 0) {
			}
			if ((GetUnitAbilityLevel(damager, 'A0I3')) > 0) {
			}
			if ((GetUnitAbilityLevel(damager, 'A0I2')) > 0) {
			}
			DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl", damaged, "chest"));
			GroupAddUnit(gdamagefromdamager, damaged);
			SaveReal(udg_hash, hdd, $9E, LoadReal(udg_hash, hdd, $9E) + r3);
		}
		if ((GetUnitAbilityLevel(damager, 'A0I5') > 0 && GetRandomInt(1, 'd') <= 20) || (GetUnitAbilityLevel(damager, 'A0I4') > 0 && GetRandomInt(1, 'd') <= 25) || (GetUnitAbilityLevel(damager, 'A0I6') > 0 && GetRandomInt(1, 'd') <= 30)) {
			if ((GetUnitAbilityLevel(damager, 'A0I6')) > 0) {
			}
			if ((GetUnitAbilityLevel(damager, 'A0I4')) > 0) {
			}
			if ((GetUnitAbilityLevel(damager, 'A0I5')) > 0) {
			}
			UnitApplyTimedLife(dammi, 'BTLF', 2.);
			UnitAddAbility(dammi, 'A0HX');
			SetUnitAbilityLevel(dammi, 'A0HX', lvl);
			IssueTargetOrderById(dammi, $D006B, damaged);
			DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl", damaged, "origin"));
			DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPriest.mdl", damaged, "origin"));
		}
		if ((GetUnitAbilityLevel(damager, 'A0IA') > 0 && GetRandomInt(1, 'd') <= 22)) {
			GroupAddUnit(gdamagefromdamager, damaged);
			SaveReal(udg_hash, hdd, $9E, LoadReal(udg_hash, hdd, $9E) + (25. + (.3 * GetHeroStr(damager, true))));
			StunUnitTimed(damaged, 1.25);
		}
		if (GetUnitAbilityLevel(damager, 'A0J2') >= 1) {
			GroupAddUnit(gdamagefromdamager, damaged);
			SaveReal(udg_hash, hdd, $9E, LoadReal(udg_hash, hdd, $9E) + (.5 * GetHeroStr(damager, true)));
			DestroyEffect(AddSpecialEffectTarget("Effects\\AxeEffect.mdl", damaged, "chest"));
			DestroyEffect(AddSpecialEffectTarget("Effects\\AxeEffect.mdl", damaged, "origin"));
			DestroyEffect(AddSpecialEffect("Effects\\AxeEffect.mdl", xd, yd));
		}
		if (GetUnitAbilityLevel(damager, 'A0JH') >= 1) {
			UnitApplyTimedLife(dammi, 'BTLF', 1.);
			UnitAddAbility(dammi, 'A0J3');
			IssueTargetOrderById(dammi, $D006B, damaged);
		}
		if (GetUnitAbilityLevel(damager, 'A0JI') >= 1) {
			if (t != null) {
				if (i <= 58) {
					SetAttackSpeedAbilityLevel(damager, 2);
					SaveInteger(udg_hash, GetHandleId(t), 1, i);
				else
					if (ef == null) {
						SaveEffectHandle(udg_hash, GetHandleId(t), 3, ef);
						SaveEffectHandle(udg_hash, GetHandleId(t), 4, ef);
					}
				}
			else
				SaveTimerHandle(udg_hash, hdr, 92, t);
				SetAttackSpeedAbilityLevel(damager, 2);
				SaveInteger(udg_hash, GetHandleId(t), 1, 2);
				SaveUnitHandle(udg_hash, GetHandleId(t), 2, damager);
			}
			TimerStart(t, 15., false, Trig_Wind_Bow_Remove_Attack_Speed_Actions);
		}
		if (GetUnitAbilityLevel(damager, 'A0LE') >= 1) {
			if (str == "str") {
			}
			if (str == "agi") {
			}
			if (str == "int") {
			}
			GroupEnumUnitsInRange(g, xd, yd, r3, null);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Cleave\\CleaveDamageTarget.mdl", damaged, "chest"));
			while (true) {
				if (Picked == null) break;
				if (IsUnitEnemy(Picked, pr) && Picked != damaged && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
					GroupAddUnit(gdamagefromdamager, Picked);
					SaveReal(udg_hash, GetHandleId(Picked), $9F, LoadReal(udg_hash, GetHandleId(Picked), $9F) + r1);
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Cleave\\CleaveDamageTarget.mdl", Picked, "chest"));
				}
				GroupRemoveUnit(g, Picked);
			}
			GroupClear(g);
			DestroyGroup(g);
		}
		if (GetUnitAbilityLevel(damager, 'A0LI') >= 1) {
			if (str == "str") {
			}
			if (str == "agi") {
			}
			if (str == "int") {
			}
			GroupEnumUnitsInRange(g, xd, yd, r3, null);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Cleave\\CleaveDamageTarget.mdl", damaged, "chest"));
			while (true) {
				if (Picked == null) break;
				if (IsUnitEnemy(Picked, pr) && Picked != damaged && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
					GroupAddUnit(gdamagefromdamager, Picked);
					SaveReal(udg_hash, GetHandleId(Picked), $9F, LoadReal(udg_hash, GetHandleId(Picked), $9F) + r1);
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Cleave\\CleaveDamageTarget.mdl", Picked, "chest"));
				}
				GroupRemoveUnit(g, Picked);
			}
			GroupClear(g);
			DestroyGroup(g);
		}
		if (GetUnitAbilityLevel(damager, 'A0LJ') >= 1 && GetRandomInt(1, 'd') <= 30) {
			GroupEnumUnitsInRange(g, xd, yd, 150., null);
			while (true) {
				if (IsUnitEnemy(Picked, pr) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
					GroupAddUnit(gdamagefromdamager, Picked);
					SaveReal(udg_hash, GetHandleId(Picked), $9E, LoadReal(udg_hash, GetHandleId(Picked), $9E) + r1);
					DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGhoul.mdl", Picked, "origin"));
					StunUnitTimed(Picked, .75);
				}
				GroupRemoveUnit(g, Picked);
			}
			GroupClear(g);
			DestroyGroup(g);
		}
		if ((GetUnitAbilityLevel(damager, 'A0LP') > 0 && GetRandomInt(1, 'd') <= 25)) {
			if (GetUnitState(damaged, UNIT_STATE_LIFE) < GetUnitState(damaged, UNIT_STATE_MAX_LIFE) * .5) {
				CreateTexttag(udg_ColorString[1] + I2S(R2I(r1 + damage)) + "!|r", .03, $FF, xd - 18., yd + 15., .0, .0, .035, 3.5);
			else
				CreateTexttag(udg_ColorString[1] + I2S(R2I(r1 + damage)) + "!|r", .025, $FF, xd - 18., yd + 15., .0, .0, .035, 3.5);
			}
			GroupAddUnit(gdamagefromdamager, damaged);
			SaveReal(udg_hash, hdd, $9F, LoadReal(udg_hash, hdd, $9F) + r1);
			UnitApplyTimedLife(dammi, 'BTLF', 2.);
			UnitAddAbility(dammi, 'A0LQ');
			IssueTargetOrderById(dammi, $D006B, damaged);
			DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodSorceress.mdl", damaged, "origin"));
			DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Other\\HumanBloodCinematicEffect\\HumanBloodCinematicEffect.mdl", damaged, "origin"));
			DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl", damaged, "origin"));
			DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPeasant.mdl", damaged, "origin"));
		}
		if (LoadBoolean(udg_hash, hdr, 99)) {
			if (r1 < 0) {
			}
			if (r1 > 150.) {
			}
			GroupAddUnit(gdamagefromdamager, damaged);
			SaveReal(udg_hash, hdd, $9E, LoadReal(udg_hash, hdd, $9E) + r1);
			DestroyEffectWithWait(AddSpecialEffectTarget("Effects\\BloodBreathDamage.mdx", damaged, "origin"), .35);
			DestroyEffectWithWait(AddSpecialEffectTarget("Effects\\BloodElementalMisile.mdx", damaged, "origin"), .35);
		}
		if (GetUnitAbilityLevel(damager, 'A0M8') > 0) {
			if (LoadBoolean(udg_hash, hdr, 'q') == false) {
				ProgressBarAddPercentComplete(LoadUnitHandle(udg_hash, GetHandleId(damager), 'v'), (damage * 100. / r2));
				if (r1 >= r2) {
					SaveBoolean(udg_hash, hdr, 'q', true);
					SaveReal(udg_hash, hdr, 'p', .0);
					SaveEffectHandle(udg_hash, hdr, 'r', ef);
					SaveEffectHandle(udg_hash, hdr, 's', ef);
				else
					SaveReal(udg_hash, hdr, 'p', r1);
				}
			else
				RemoveUnit(LoadUnitHandle(udg_hash, GetHandleId(damager), 'v'));
				AddProgressBar(damager, 235. + (3. * GetUnitAbilityLevel(damager, 'A0M8')), (.9 + .05 * GetUnitAbilityLevel(damager, 'A0M8')), 1., true, false, 'v', $F8, $9A, 0);
				GroupEnumUnitsInRange(g, xd, yd, 250., null);
				GroupAddUnit(gdamagefromdamager, damaged);
				SaveReal(udg_hash, hdd, $9E, LoadReal(udg_hash, hdd, $9E) + r3);
				UnitApplyTimedLife(dammi, 'BTLF', 3.);
				SetUnitScale(dammi, .5, .5, .5);
				SetUnitPathing(dammi, false);
				SetUnitX(dammi, xd);
				SetUnitY(dammi, yd);
				DestroyEffect(AddSpecialEffectTarget("Effects\\LightNova.mdl", dammi, "origin"));
				DestroyEffect(AddSpecialEffectTarget("Effects\\DivineRage.mdx", damager, "weapon"));
				DestroyEffect(ef);
				DestroyEffect(ef);
				SaveBoolean(udg_hash, hdr, 'q', false);
				while (true) {
					if (Picked == null) break;
					if (IsUnitEnemy(Picked, pr) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
						GroupAddUnit(gdamagefromdamager, Picked);
						SaveReal(udg_hash, GetHandleId(Picked), $9E, LoadReal(udg_hash, GetHandleId(Picked), $9E) + r1);
						DestroyEffect(AddSpecialEffectTarget("Effects\\DivineRage.mdx", Picked, "origin"));
						UnitApplyTimedLife(dammi, 'BTLF', 1.);
						UnitAddAbility(dammi, 'A0M9');
						IssueTargetOrderById(dammi, $D006B, Picked);
					}
					if (IsUnitAlly(Picked, pr) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
						SetUnitState(Picked, UNIT_STATE_LIFE, GetUnitState(Picked, UNIT_STATE_LIFE) + r2);
						DestroyEffect(AddSpecialEffectTarget("Effects\\MegaHeal.mdx", Picked, "origin"));
						DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", Picked, "origin"), 2.);
					}
					GroupRemoveUnit(g, Picked);
				}
			}
			GroupClear(g);
			DestroyGroup(g);
		}
		if (GetUnitAbilityLevel(damager, 'A0JA') >= 1 && GetRandomInt(1, 'd') <= 20 && GetUnitAbilityLevel(damaged, 'A0JC') < 1) {
			UnitApplyTimedLife(dammi, 'BTLF', 1.5);
			UnitAddAbility(dammi, 'A0JD');
			IssueTargetOrderById(dammi, $D006B, damaged);
		}
		if (GetUnitAbilityLevel(damager, 'A0K3') > 0 && GetRandomInt(1, 'd') <= $F && IsUnitIllusion(damager) == false) {
			GroupEnumUnitsInRange(g, xr, yr, 250., null);
			while (true) {
				if (Picked == null) break;
				if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, pr) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false) {
					GroupAddUnit(gdamagefromdamager, Picked);
					SaveReal(udg_hash, GetHandleId(Picked), $9E, LoadReal(udg_hash, GetHandleId(Picked), $9E) + r1);
				}
				GroupRemoveUnit(g, Picked);
			}
			GroupClear(g);
			DestroyGroup(g);
		}
		if (GetUnitAbilityLevel(damager, 'A0K4') > 0 && GetRandomInt(1, 'd') <= 30 && IsUnitIllusion(damager) == false) {
			GroupEnumUnitsInRange(g, xr, yr, 300., null);
			while (true) {
				if (Picked == null) break;
				if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, pr) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false) {
					GroupAddUnit(gdamagefromdamager, Picked);
					SaveReal(udg_hash, GetHandleId(Picked), $9E, LoadReal(udg_hash, GetHandleId(Picked), $9E) + r1);
				}
				GroupRemoveUnit(g, Picked);
			}
			GroupClear(g);
			DestroyGroup(g);
		}
		if (GetUnitAbilityLevel(damager, 'A0K4') > 0 && GetRandomInt(1, 'd') <= $F && IsUnitIllusion(damager) == false) {
			GroupEnumUnitsInRange(g, xr, yr, 270., null);
			while (true) {
				if (Picked == null) break;
				if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, pr) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false) {
					StunUnitTimed(Picked, 1.);
				}
				GroupRemoveUnit(g, Picked);
			}
			GroupClear(g);
			DestroyGroup(g);
		}
		if (GetUnitAbilityLevel(damaged, 'A0MK') > 0 && IsUnitType(damager, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitState(damaged, UNIT_STATE_LIFE) > .405 && damage > .0 && GetRandomInt(1, 'd') <= ($C + (3 * GetUnitAbilityLevel(damaged, 'A0MK')))) {
			SaveUnitHandle(udg_hash, h, 1, damaged);
			SaveReal(udg_hash, h, 2, (r3 * damage));
			TimerStart(t, .0, false, Trig_Hil_Unit_Actions);
			SetUnitFlyHeight(dammi, 50., .0);
			SetUnitFlyHeight(dammi, 200., r1);
			SetUnitFacing(dammi, angle);
			SetUnitScale(dammi, 1.5, 1.5, 1.5);
			SaveUnitHandle(udg_hash, h, 1, damaged);
			SaveUnitHandle(udg_hash, h, 2, dammi);
			SaveInteger(udg_hash, h, 3, R2I(r1 / 40));
			SaveUnitHandle(udg_hash, h, 4, damager);
			SaveReal(udg_hash, h, 5, r2);
			SaveReal(udg_hash, h, 6, (r1 / 3));
			SaveEffectHandle(udg_hash, h, 7, ef);
			TimerStart(t, .03, true, Trig_Stone_Armor_Periodic_Actions);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", damaged, "chest"));
		}
		if (GetUnitAbilityLevel(damager, 'A0N7') > 0 && IsUnitIllusion(damager) == false && IsUnitType(damaged, UNIT_TYPE_MAGIC_IMMUNE) == false) {
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SpiritOfVengeanceMissile\\SpiritOfVengeanceMissile.mdl", damaged, "chest"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl", damaged, "chest"));
			GroupAddUnit(gdamagefromdamager, damaged);
			SaveReal(udg_hash, hdd, $9E, LoadReal(udg_hash, hdd, $9E) + r1);
		}
		if (GetUnitAbilityLevel(damager, 'A0ND') > 0 && IsUnitIllusion(damager) == false) {
			GroupEnumUnitsInRange(g, xd, yd, 150., null);
			GroupRemoveUnit(g, damaged);
			while (true) {
				if (Picked == null) break;
				if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, pr) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false) {
					GroupAddUnit(g2, Picked);
				}
				GroupRemoveUnit(g, Picked);
			}
			GroupClear(g);
			DestroyGroup(g);
			RandomUnitFromGroup(2, g2);
			GroupAddGroup(udg_GroupRandomUnitFromGroup, g);
			while (true) {
				if (Picked == null) break;
				GroupAddUnit(gdamagefromdamager, Picked);
				SaveReal(udg_hash, GetHandleId(Picked), $9E, LoadReal(udg_hash, GetHandleId(Picked), $9E) + r1);
				DestroyEffect(AddSpecialEffectTarget("Effects\\FlameBomb.mdx", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIfb\\AIfbSpecialArt.mdl", Picked, "chest"));
				GroupRemoveUnit(g, Picked);
			}
			GroupClear(g);
			DestroyGroup(g);
			GroupClear(g2);
			DestroyGroup(g2);
		}
		if ((GetUnitAbilityLevel(damaged, 'A0NJ') > 0 || GetUnitAbilityLevel(damaged, 'A0NK') > 0 || GetUnitAbilityLevel(damaged, 'A0NL') > 0) && (GetUnitAbilityLevel(damaged, 'A0IT') <= 0 && GetUnitAbilityLevel(damaged, 'A0J8') <= 0) && IsUnitType(damager, UNIT_TYPE_MAGIC_IMMUNE) == false) {
			if (GetUnitAbilityLevel(damaged, 'A0NJ') > 0) {
			}
			if (GetUnitAbilityLevel(damaged, 'A0NK') > 0) {
			}
			if (GetUnitAbilityLevel(damaged, 'A0NL') > 0) {
			}
			GroupAddUnit(gdamagefromdamaged, damager);
			SaveReal(udg_hash, hdr, $A1, LoadReal(udg_hash, hdr, $A1) + r1);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\ThornsAura\\ThornsAuraDamage.mdl", damager, "overhead"));
		}
		if (GetUnitAbilityLevel(damager, 'A08G') > 0 && GetRandomInt(1, 'd') <= 20) {
			GroupAddUnit(gdamagefromdamager, damaged);
			SaveReal(udg_hash, hdd, $9F, LoadReal(udg_hash, hdd, $9F) + r1 + 10.);
			CreateTexttag(udg_ColorString[1] + I2S(R2I(r1 + damage)) + "!|r", .022, $FF, xd - 18., yd + 15., .0, .0, .035, 3.5);
		}
		if (GetUnitAbilityLevel(damager, 'A0NI') > 0 && IsUnitIllusion(damager) == false && IsUnitType(damaged, UNIT_TYPE_MAGIC_IMMUNE) == false) {
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIfb\\AIfbSpecialArt.mdl", damaged, "chest"));
		}
		if (GetUnitAbilityLevel(damager, 'A0NS') > 0) {
			if (lvl == 1 || lvl == 2) {
			}
			if (lvl == 3 || lvl == 4) {
			}
			if (lvl == 5 || lvl == 6) {
			}
			if (GetFloatGameState(GAME_STATE_TIME_OF_DAY) < 6. || GetFloatGameState(GAME_STATE_TIME_OF_DAY) > 18.) {
			else
			}
			SaveReal(udg_hash, h, 21, .6);
			if (LoadBoolean(udg_hash, hdr, $7F)) {
			}
			if (LoadBoolean(udg_hash, hdr, $80)) {
				SaveReal(udg_hash, h, 21, .8);
			}
			SaveUnitHandle(udg_hash, h, 1, damager);
			SaveReal(udg_hash, h, 2, r1);
			SaveReal(udg_hash, h, 20, r2);
			SaveInteger(udg_hash, h, 3, i);
			SaveBoolean(udg_hash, h, 4, b);
			if (b) {
				DestroyEffect(AddSpecialEffectTarget("Effects\\SoundTrauma.mdl", damaged, "chest"));
				GroupAddUnit(gdamagefromdamager, damaged);
				SaveReal(udg_hash, hdd, $9E, LoadReal(udg_hash, hdd, $9E) + r2);
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl", damaged, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Effects\\BlueGlaivie.mdl", damaged, "chest"));
			}
			GroupEnumUnitsInRange(g, xd, yd, 350., null);
			while (true) {
				if (Picked == null) break;
				if (damaged != Picked && IsUnitEnemy(Picked, pr) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U' && GetUnitTypeId(Picked) != 'uplg') {
					GroupAddUnit(g2, Picked);
				}
				GroupRemoveUnit(g, Picked);
			}
			RandomUnitFromGroup(1, g2);
			GroupClear(g);
			DestroyGroup(g);
			if (u != null) {
				SetUnitScale(dammi, r4, r4, r4);
				UnitAddAbility(dammi, 'Amrf');
				UnitRemoveAbility(dammi, 'Amrf');
				SetUnitFlyHeight(dammi, 45., .0);
				GroupAddUnit(g, damaged);
				SaveGroupHandle(udg_hash, h, 9, g);
				SaveUnitHandle(udg_hash, h, $A, dammi);
				SaveEffectHandle(udg_hash, h, $B, ef);
				SaveUnitHandle(udg_hash, h, $C, u);
				TimerStart(t, .03, true, Trig_Moon_Chackrum_Periodic_Actions);
			else
				DestroyTimer(t);
				FlushChildHashtable(udg_hash, h);
			}
		}
		if (GetUnitAbilityLevel(damager, 'A0O0') >= 1) {
			UnitApplyTimedLife(dammi, 'BTLF', 1.);
			UnitAddAbility(dammi, 'A0O2');
			IssueTargetOrderById(dammi, $D006B, damaged);
		}
		if (GetUnitAbilityLevel(damager, 'A0OE') >= 1 && GetRandomInt(1, 'd') <= 20) {
			StunUnitTimed(damaged, 1.);
			GroupAddUnit(gdamagefromdamager, damaged);
			SaveReal(udg_hash, hdd, $9E, LoadReal(udg_hash, hdd, $9E) + 15.);
		}
		if (GetUnitAbilityLevel(damager, 'A0O1') >= 1) {
			if (t != null) {
				if (i <= 58) {
					SetAttackSpeedAbilityLevel(damager, 2);
					SetAttackAbilityLevel(damager, 1);
					SaveInteger(udg_hash, GetHandleId(t), 1, i);
					SaveInteger(udg_hash, hdr, $82, i);
				else
					if (ef == null) {
						SaveEffectHandle(udg_hash, GetHandleId(t), 3, ef);
						SaveEffectHandle(udg_hash, GetHandleId(t), 4, ef);
					}
				}
			else
				SaveTimerHandle(udg_hash, hdr, $81, t);
				SetAttackSpeedAbilityLevel(damager, 2);
				SetAttackAbilityLevel(damager, 1);
				SaveInteger(udg_hash, hdr, $82, 2);
				SaveInteger(udg_hash, GetHandleId(t), 1, 2);
				SaveUnitHandle(udg_hash, GetHandleId(t), 2, damager);
			}
			TimerStart(t, 15., false, Trig_Blood_Bow_Remove_Effects_Actions);
		}
		if (LoadBoolean(udg_hash, hdd, $84) == false && GetUnitAbilityLevel(damaged, 'A0OB') >= 1 && (GetUnitState(damaged, UNIT_STATE_LIFE) <= GetUnitState(damaged, UNIT_STATE_MAX_LIFE) * .5)) {
			SaveBoolean(udg_hash, hdd, $84, true);
			SetAttackSpeedAbilityLevel(damaged, 50);
			SetAttackAbilityLevel(damaged, $A);
			SaveEffectHandle(udg_hash, GetHandleId(t), 2, ef);
			SaveEffectHandle(udg_hash, GetHandleId(t), 3, ef);
			SaveUnitHandle(udg_hash, GetHandleId(t), 1, damaged);
			TimerStart(t, 7., false, Trig_Beorn_Rage_Remove_Effects_Actions);
		}
		if (GetUnitAbilityLevel(damager, 'A0OJ') >= 1) {
			if (u == null) {
				SaveEffectHandle(udg_hash, hdr, $87, ef);
			}
			if (damaged == u) {
				if (i < $A) {
				}
			else
				if (i >= 4) {
					if (i == $A) {
					}
					SetAttackSpeedAbilityLevel(damager, -20 * (i - 3));
				}
				DestroyEffect(ef);
				SaveEffectHandle(udg_hash, hdr, $87, ef);
			}
			if (i > 3 && i < $A) {
				SetAttackSpeedAbilityLevel(damager, 20);
			}
			SaveUnitHandle(udg_hash, hdr, $85, damaged);
			SaveInteger(udg_hash, hdr, $86, i);
		}
		if (GetUnitAbilityLevel(damager, 'A0O1') >= 1) {
			SetUnitState(damager, UNIT_STATE_LIFE, GetUnitState(damager, UNIT_STATE_LIFE) + r1);
		}
		if (GetUnitAbilityLevel(damager, 'A0OZ') > 0 && IsUnitIllusion(damager) == false) {
			if (i == 3) {
				SaveEffectHandle(udg_hash, hdr, $90, ef);
			}
			if (i == 4) {
			}
			SaveInteger(udg_hash, hdr, $8F, i);
			if (b) {
				DestroyEffect(LoadEffectHandle(udg_hash, hdr, $90));
				GroupAddUnit(gdamagefromdamager, damaged);
				SaveReal(udg_hash, hdd, $9E, LoadReal(udg_hash, hdd, $9E) + GetHeroInt(damager, true));
				SaveReal(udg_hash, hdd, $9F, LoadReal(udg_hash, hdd, $9F) + (damage * 1.));
				CreateTexttag(udg_ColorString[2] + I2S(R2I(r1 + damage)) + "!|r", .025, $FF, xd - 18., yd + 15., .0, .0, .035, 3.5);
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", damaged, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningBolt\\LightningBoltMissile.mdl", damaged, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", damaged, "origin"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningShield\\LightningShieldBuff.mdl", damaged, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Purge\\PurgeBuffTarget.mdl", damaged, "chest"));
				GroupEnumUnitsInRange(g, xd, yd, 300., null);
				GroupRemoveUnit(g, damaged);
				while (true) {
					if (Picked == null) break;
					if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, pr) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false) {
						GroupAddUnit(g2, Picked);
					}
					GroupRemoveUnit(g, Picked);
				}
				GroupClear(g);
				DestroyGroup(g);
				RandomUnitFromGroup(3, g2);
				GroupAddGroup(udg_GroupRandomUnitFromGroup, g);
				while (true) {
					if (Picked == null) break;
					SaveUnitHandle(udg_hash, h, 1, Picked);
					SaveInteger(udg_hash, h, 2, $F);
					SaveUnitHandle(udg_hash, h, 3, damaged);
					SaveLightningHandle(udg_hash, h, 4, l);
					RemoveLocation(locr);
					RemoveLocation(locd);
					TimerStart(t, .04, true, Trig_Remove_Lightning_From_Staff_Of_Lightning_Actions);
					GroupAddUnit(gdamagefromdamager, Picked);
					SaveReal(udg_hash, GetHandleId(Picked), $9E, LoadReal(udg_hash, GetHandleId(Picked), $9E) + r1);
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", Picked, "chest"));
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningBolt\\LightningBoltMissile.mdl", Picked, "chest"));
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", Picked, "origin"));
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningShield\\LightningShieldBuff.mdl", Picked, "chest"));
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Purge\\PurgeBuffTarget.mdl", Picked, "chest"));
					GroupRemoveUnit(g, Picked);
				}
				GroupClear(g);
				DestroyGroup(g);
				GroupClear(g2);
				DestroyGroup(g2);
			}
		}
		if (GetUnitAbilityLevel(damager, 'A0P3') > 0 && LoadTimerHandle(udg_hash, hdr, $92) != null && IsUnitIllusion(damager) == false) {
			DestroyEffect(LoadEffectHandle(udg_hash, GetHandleId(LoadTimerHandle(udg_hash, hdr, $92)), 2));
			DestroyEffect(LoadEffectHandle(udg_hash, GetHandleId(LoadTimerHandle(udg_hash, hdr, $92)), 3));
			UnitRemoveAbility(damager, 'A0P4');
			GroupEnumUnitsInRange(g, xd, yd, 150., null);
			GroupRemoveUnit(g, damaged);
			while (true) {
				if (Picked == null) break;
				if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, pr) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false) {
					GroupAddUnit(gdamagefromdamager, Picked);
					SaveReal(udg_hash, GetHandleId(Picked), $9F, LoadReal(udg_hash, GetHandleId(Picked), $9F) + r1);
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl", Picked, "chest"));
					DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPeasant.mdl", Picked, "origin"));
					DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl", Picked, "origin"));
				}
				GroupRemoveUnit(g, Picked);
			}
			GroupClear(g);
			DestroyGroup(g);
			FlushChildHashtable(udg_hash, GetHandleId(LoadTimerHandle(udg_hash, hdr, $92)));
			DestroyTimer(LoadTimerHandle(udg_hash, hdr, $92));
		}
		if (GetUnitAbilityLevel(damager, 'A0P3') > 0 && GetRandomInt(1, 'd') <= ($A + 5 * GetUnitAbilityLevel(damager, 'A0P3')) && IsUnitIllusion(damager) == false) {
			SaveInteger(udg_hash, hdr, $91, 1);
			if (t == null) {
				SaveTimerHandle(udg_hash, hdr, $92, t);
				UnitAddAbility(damager, 'A0P4');
				SaveUnitHandle(udg_hash, h, 1, damager);
				SaveEffectHandle(udg_hash, h, 2, AddSpecialEffectTarget("Effects\\CosmicTouch.MDX", damager, "weapon"));
				SaveEffectHandle(udg_hash, h, 3, AddSpecialEffectTarget("Effects\\CosmicTouch.MDX", damager, "overhead"));
			}
			TimerStart(t, 1., false, Trig_Remove_ASBonus_Double_Attack_Actions);
		}
		if (GetUnitAbilityLevel(damaged, 'A0P9') > 0 && IsUnitIllusion(damaged) == false) {
			if (lvl > 0 && (IsUnitType(damager, UNIT_TYPE_MAGIC_IMMUNE) == false)) {
				GroupAddUnit(gdamagefromdamaged, damager);
				SaveReal(udg_hash, hdr, $A0, LoadReal(udg_hash, hdr, $A0) + I2R(lvl));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl", damager, "chest"));
			}
			if (i == 5) {
				if (lvl < GetUnitAbilityLevel(damaged, 'A0P9') * 5) {
					SaveInteger(udg_hash, hdd, $99, lvl);
					SaveUnitHandle(udg_hash, h, 1, damaged);
					SetUnitLifeAndManaRegeneration(damaged, "life", 1);
					SetArmorAbilityLevel(damaged, 1);
					TimerStart(t, 5. * GetUnitAbilityLevel(damaged, 'A0P9'), false, Trig_Remove_Bonus_Marshal_Armor_Actions);
				}
			}
			SaveInteger(udg_hash, hdd, $98, i);
		}
		if (GetUnitAbilityLevel(damager, 'A09L') > 0) {
			if (i == 2) {
				SaveEffectHandle(udg_hash, hdr, $A8, ef);
				SaveEffectHandle(udg_hash, hdr, $A9, ef);
			}
			if (i == 3) {
			}
			SaveInteger(udg_hash, hdr, $A7, i);
			if (b) {
				DestroyEffect(LoadEffectHandle(udg_hash, hdr, $A8));
				DestroyEffect(LoadEffectHandle(udg_hash, hdr, $A9));
				DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HeroBloodElfBlood.mdl", damaged, "origin"));
				DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl", damaged, "origin"));
				GroupAddUnit(gdamagefromdamager, damaged);
				SaveReal(udg_hash, hdd, $9F, LoadReal(udg_hash, hdd, $9F) + r1);
				CreateTexttag(udg_ColorString[1] + I2S(R2I(r1 + damage)) + "!|r", .031, $FF, xd - 18., yd + 15., .0, .0, .035, 3.5);
				UnitApplyTimedLife(dammi, 'BTLF', 2.);
				UnitAddAbility(dammi, 'A0F8');
				IssueTargetOrderById(dammi, $D006B, damaged);
			}
		}
		if (GetUnitAbilityLevel(damager, 'A0GS') > 0) {
			if (((r1 < r2 + 60.) && (r1 > r2 - 60.)) || ((r1 < r3 + 60.) && (r1 > r3 - 60.)) && dist <= 175.) {
				UnitDamageTarget(damager, damaged, GetHeroAgi(damager, true) * .6, false, false, ATTACK_TYPE_MELEE, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS);
				DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl", damaged, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GargoyleMissile\\GargoyleMissile.mdl", damaged, "chest"));
			}
		}
		if (GetUnitAbilityLevel(damager, 'A0QT') >= 1 && GetRandomInt(0, 'd') <= (7 + GetUnitAbilityLevel(damager, 'A0QT') * 3)) {
			StunUnitTimed(damaged, 1.5);
			if (LoadBoolean(udg_hash, hdr, $B3) == false) {
				GroupEnumUnitsInRange(g, xd, yd, 150., null);
			else
				GroupEnumUnitsInRange(g, xd, yd, 225., null);
			}
			GroupRemoveUnit(g, damaged);
			DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\SteamTank\\SteamTankImpact.mdl", xd, yd));
			while (true) {
				if (Picked == null) break;
				if (IsUnitEnemy(Picked, pr) && Picked != damaged && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GyroCopter\\GyroCopterMissile.mdl", Picked, "origin"));
					StunUnitTimed(Picked, .25);
					GroupAddUnit(gdamagefromdamager, Picked);
					SaveReal(udg_hash, GetHandleId(Picked), $9F, LoadReal(udg_hash, GetHandleId(Picked), $9F) + r1);
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GyroCopter\\GyroCopterImpact.mdl", Picked, "chest"));
				}
				GroupRemoveUnit(g, Picked);
			}
			GroupClear(g);
			DestroyGroup(g);
		}
		if (GetUnitAbilityLevel(damaged, 'A0OW') > 0) {
			if (damage > 7) {
			}
			if (damage <= 7) {
			}
			SaveUnitHandle(udg_hash, h, 1, damaged);
			SaveReal(udg_hash, h, 2, r1);
			TimerStart(t, .0, false, Trig_Hil_Unit_Actions);
		}
		if (GetUnitAbilityLevel(damaged, 'A0K7') > 0 && GetRandomInt(1, 'd') <= 20 && GetUnitAbilityLevel(damaged, 'A0K9') < 1) {
			UnitApplyTimedLife(dammi, 'BTLF', 1.);
			UnitAddAbility(dammi, 'A0K8');
			IssueTargetOrderById(dammi, $D006B, damaged);
		}
		if (GetUnitAbilityLevel(damaged, 'B03P') > 0) {
			UnitDamageTarget(damaged, damager, (GetRandomReal(20., 50.)), false, false, ATTACK_TYPE_MELEE, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Immolation\\ImmolationDamage.mdl", damager, "chest"));
		}
	}
	if (damage >= .01) {
		if (LoadReal(udg_hash, hdd, 65) > .0 && LoadEffectHandle(udg_hash, hdd, 66) != null) {
			if ((r1 - damage) > .0) {
			else
				DestroyEffect(ef);
			}
			SaveUnitHandle(udg_hash, h, 1, damaged);
			SaveReal(udg_hash, h, 2, r2);
			TimerStart(t, .0, false, Trig_Hil_Unit_Actions);
			SaveReal(udg_hash, hdd, 65, r1 - damage);
		}
		if (GetUnitAbilityLevel(damaged, 'A07U') > 0 && GetRandomInt(1, 'd') <= 30) {
			SaveUnitHandle(udg_hash, h, 1, damaged);
			if (GetUnitState(damaged, UNIT_STATE_LIFE) <= damage) {
				SetUnitInvulnerable(damaged, true);
				TimerStart(t, .0, false, Trig_Make_Unit_UnInvulnerable_Actions);
			else
				SaveReal(udg_hash, h, 2, damage);
				TimerStart(t, .0, false, Trig_Hil_Unit_Actions);
			}
			UnitApplyTimedLife(dammi, 'BTLF', 2.);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SpiritOfVengeanceMissile\\SpiritOfVengeanceMissile.mdl", damager, "chest"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\SpellShieldAmulet\\SpellShieldCaster.mdl", dammi, "origin"));
			if (IsUnitType(damager, UNIT_TYPE_MAGIC_IMMUNE) == false) {
				GroupAddUnit(gdamagefromdamaged, damager);
				SaveReal(udg_hash, hdr, $A0, LoadReal(udg_hash, hdr, $A0) + r2);
			}
		}
		if (damage > .0 && (pd == Player(9) || pd == Player($A) || pd == Player($B))) {
			if (players == null) {
			}
			if (IsPlayerInForce(pr, players) == false) {
				ForceAddPlayer(players, pr);
			}
			if (t == null) {
			}
			SaveTimerHandle(udg_hash, hdd, 73 + GetPlayerId(pr), t);
			SavePlayerHandle(udg_hash, h, 1, pr);
			SaveForceHandle(udg_hash, h, 2, players);
			SaveInteger(udg_hash, h, 3, hdd);
			TimerStart(t, 7., false, Trig_AddDamage_Refresh_Creep_Assists_Actions);
			SaveForceHandle(udg_hash, hdd, 72, players);
		}
		if (damage > 5. && GetUnitAbilityLevel(damaged, 'A09G') > 0 && GetRandomInt(1, 'd') <= 25) {
			SetUnitState(damaged, UNIT_STATE_LIFE, GetUnitState(damaged, UNIT_STATE_LIFE) + 25.);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayDamage.mdl", damaged, "chest"));
		}
		if (damage > 10. && GetUnitAbilityLevel(damaged, 'A09K') > 0 && GetRandomInt(1, 'd') <= 40) {
			SetUnitState(damaged, UNIT_STATE_LIFE, GetUnitState(damaged, UNIT_STATE_LIFE) + 25. + (damage / 3));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\SpellSteal\\SpellStealMissile.mdl", damaged, "chest"));
		}
		if (LoadReal(udg_hash, hdd, 86) > .0 && LoadEffectHandle(udg_hash, hdd, 87) != null) {
			SaveUnitHandle(udg_hash, h, 1, damaged);
			if ((r1 - damage) > .0) {
			else
				DestroyEffect(ef);
				SaveEffectHandle(udg_hash, hdd, 87, null);
			}
			if (r3 <= damage && (r1 + r3 - damage) > .0) {
				SetUnitInvulnerable(damaged, true);
				TimerStart(t, .0, false, Trig_Make_Unit_UnInvulnerable_Actions);
				if (r1 <= damage) {
					SaveUnitHandle(udg_hash, h2, 1, damaged);
					SaveUnitHandle(udg_hash, h2, 2, damager);
					SaveReal(udg_hash, h2, 3, (damage - r1));
					SaveStr(udg_hash, h2, 4, "clear");
					TimerStart(t2, .0, false, Trig_Damage_Unit_With_Wait_Actions);
				}
			}
			if (r3 > damage) {
				SaveReal(udg_hash, h, 2, r2);
				TimerStart(t, .0, false, Trig_Hil_Unit_Actions);
			}
			SaveReal(udg_hash, hdd, 86, r1 - damage);
		}
		if ((GetUnitAbilityLevel(damaged, 'A0IT') > 0 || GetUnitAbilityLevel(damaged, 'A0J8') > 0) && IsUnitType(damager, UNIT_TYPE_MAGIC_IMMUNE) == false) {
			if (GetUnitAbilityLevel(damaged, 'A0IT') > 0) {
			}
			if (GetUnitAbilityLevel(damaged, 'A0J8') > 0) {
			}
			GroupAddUnit(gdamagefromdamaged, damager);
			SaveReal(udg_hash, hdr, $A1, LoadReal(udg_hash, hdr, $A1) + r1);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\ThornsAura\\ThornsAuraDamage.mdl", damager, "overhead"));
		}
		if (LoadBoolean(udg_hash, hdd, 94) && LoadBoolean(udg_hash, hdd, $A2) == false && LoadEffectHandle(udg_hash, hdd, 95) != null && (GetUnitState(damaged, UNIT_STATE_LIFE) <= damage || GetUnitState(damaged, UNIT_STATE_LIFE) <= GetUnitState(damaged, UNIT_STATE_MAX_LIFE) * .02)) {
			DestroyEffect(ef);
			SaveUnitHandle(udg_hash, h, 1, damaged);
			SetUnitInvulnerable(damaged, true);
			TimerStart(t, .0, false, Trig_Make_Unit_UnInvulnerable_Actions);
			SetUnitState(damaged, UNIT_STATE_LIFE, GetUnitState(damaged, UNIT_STATE_MAX_LIFE) * .5);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl", damaged, "origin"));
			SaveEffectHandle(udg_hash, hdd, 95, null);
			SaveReal(udg_hash, hdd, 96, 60.);
			SaveBoolean(udg_hash, hdd, $A2, true);
			SaveUnitHandle(udg_hash, h2, 1, damaged);
			TimerStart(t2, 60., false, Trig_Cuirass_of_Invulnerable_Timer_Death_Denial_Actions);
		}
		if (LoadReal(udg_hash, hdd, 'i') > .0 && LoadBoolean(udg_hash, hdd, 'f')) {
			SaveUnitHandle(udg_hash, h, 1, damaged);
			SaveBoolean(udg_hash, hdd, 'j', true);
			if ((r1 - damage) > .0) {
			else
				DestroyEffect(ef);
				SaveEffectHandle(udg_hash, hdd, 'g', null);
				SaveUnitHandle(udg_hash, h3, 1, damaged);
				SaveReal(udg_hash, hdd, 'h', 45.);
				TimerStart(t3, 45., false, Trig_Archimagus_Armor_Timer_Death_Denial_Actions);
				GroupEnumUnitsInRange(g, xd, yd, 500., null);
				SetUnitState(damaged, UNIT_STATE_MANA, GetUnitState(damaged, UNIT_STATE_MANA) + ((50 + GetHeroInt(damaged, true) * .5)));
				while (true) {
					if (Picked == null) break;
					if (IsUnitAlly(Picked, pd) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
						SetUnitState(Picked, UNIT_STATE_MANA, GetUnitState(Picked, UNIT_STATE_MANA) + ((50 + GetHeroInt(damaged, true) * .5)));
						DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIma\\AImaTarget.mdl", Picked, "origin"));
					}
					GroupRemoveUnit(g, Picked);
				}
				GroupClear(g);
				DestroyGroup(g);
			}
			if (r3 <= damage && (r1 + r3 - damage) > .0) {
				SetUnitInvulnerable(damaged, true);
				TimerStart(t, .0, false, Trig_Make_Unit_UnInvulnerable_Actions);
				if (r1 <= damage) {
					SaveUnitHandle(udg_hash, h2, 1, damaged);
					SaveUnitHandle(udg_hash, h2, 2, damager);
					SaveReal(udg_hash, h2, 3, (damage - r1));
					SaveStr(udg_hash, h2, 4, "clear");
					TimerStart(t2, .0, false, Trig_Damage_Unit_With_Wait_Actions);
				}
			}
			if (r3 > damage) {
				SaveReal(udg_hash, h, 2, r2);
				TimerStart(t, .0, false, Trig_Hil_Unit_Actions);
			}
			SaveReal(udg_hash, hdd, 'i', r1 - damage);
		}
		if (LoadReal(udg_hash, hdd, 'n') > .0 && LoadUnitHandle(udg_hash, hdd, 'o') != null) {
			SaveUnitHandle(udg_hash, h, 1, damaged);
			GroupAddUnit(gdamagefromdamager, LoadUnitHandle(udg_hash, hdd, 'o'));
			SaveReal(udg_hash, GetHandleId(LoadUnitHandle(udg_hash, hdd, 'o')), $9E, LoadReal(udg_hash, GetHandleId(LoadUnitHandle(udg_hash, hdd, 'o')), $9E) + (r2) / 2);
			if ((r3 <= damage) && (r2 + r3 - damage) > .0) {
				SetUnitInvulnerable(damaged, true);
				TimerStart(t, .0, false, Trig_Make_Unit_UnInvulnerable_Actions);
			}
			if (r3 > damage) {
				SaveReal(udg_hash, h, 2, r2);
				TimerStart(t, .0, false, Trig_Hil_Unit_Actions);
			}
		}
		if (LoadReal(udg_hash, hdd, $93) > .0 && LoadTimerHandle(udg_hash, hdd, $95) != null) {
			if ((r1 - damage) > .0) {
			else
				DestroyEffect(AddSpecialEffect("Effects\\LightNova.mdl", GetUnitX(damaged), GetUnitY(damaged)));
				DestroyEffect(AddSpecialEffectTarget("Effects\\DivineRage.mdx", damaged, "origin"));
				GroupEnumUnitsInRange(g, GetUnitX(damaged), GetUnitY(damaged), 500., null);
				while (true) {
					if (Picked == null) break;
					if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
						DestroyEffect(AddSpecialEffectTarget("Effects\\DivineRage.mdx", Picked, "origin"));
						UnitDamageTarget(u, Picked, r3, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
					}
					GroupRemoveUnit(g, Picked);
				}
				DestroyEffect(ef);
				DestroyEffect(ef);
				DestroyEffect(ef);
				SetAttackSpeedAbilityLevel(damaged, -LoadInteger(udg_hash, GetHandleId(damaged), $94));
				FlushChildHashtable(udg_hash, h2);
				DestroyTimer(t2);
				DestroyGroup(g);
			}
			SaveUnitHandle(udg_hash, h, 1, damaged);
			SaveReal(udg_hash, h, 2, r2);
			TimerStart(t, .0, false, Trig_Hil_Unit_Actions);
			SaveReal(udg_hash, hdd, $93, r1 - damage);
		}
		if (LoadBoolean(udg_hash, hdd, $A5) && LoadTimerHandle(udg_hash, hdd, $A6) != null) {
			SaveUnitHandle(udg_hash, h, 1, damaged);
			if (GetUnitState(damaged, UNIT_STATE_LIFE) > damage) {
				SaveReal(udg_hash, h, 2, damage);
				TimerStart(t, .0, false, Trig_Hil_Unit_Actions);
			}
			if (GetUnitState(damaged, UNIT_STATE_LIFE) <= damage) {
				SetUnitInvulnerable(damaged, true);
				TimerStart(t, .0, false, Trig_Make_Unit_UnInvulnerable_Actions);
			}
		}
		if (udg_IsBeronsFightWin && (GetUnitTypeId(damaged) == 'h01K' || GetUnitTypeId(damaged) == 'e002' || GetUnitTypeId(damaged) == 'n00Y' || GetUnitTypeId(damaged) == 'o003')) {
			SaveUnitHandle(udg_hash, h, 1, damaged);
			if ((r3 <= damage)) {
				SetUnitInvulnerable(damaged, true);
				TimerStart(t, .0, false, Trig_Make_Unit_UnInvulnerable_Actions);
			}
			if (r3 > damage) {
				SaveReal(udg_hash, h, 2, r2 * .3);
				TimerStart(t, .0, false, Trig_Hil_Unit_Actions);
			}
		}
		if (IsUnitAlly(damaged, Player($B)) || IsUnitAlly(damager, Player($B))) {
			if (IsUnitAlly(damaged, Player($B))) {
			else
			}
			if (IsUnitIllusion(dammi) == false && GetUnitState(dammi, UNIT_STATE_LIFE) > .405 && GetUnitTypeId(dammi) != 'h00U') {
				SaveInteger(udg_hash, GetHandleId(dammi), 'k', 0);
			}
		}
		if (pd == Player($F) && damage > .0 && IsUnitIllusion(damaged) == false && udg_IsMinimapPingGuardsAttacked == false && (GetUnitTypeId(damaged) == 'h01K' || GetUnitTypeId(damaged) == 'e002' || GetUnitTypeId(damaged) == 'n00Y' || GetUnitTypeId(damaged) == 'o003')) {
			if ((IsPlayerInForce(GetLocalPlayer(), udg_IGRAET))) {
				DisplayTextToPlayer(GetLocalPlayer(), .0, .0, "|cff99ccffВНИМАНИЕ!!!|r");
				DisplayTextToPlayer(GetLocalPlayer(), .0, .0, "|cffff0000Стражи-Чародеи атакованы!!!|r");
				PingMinimapEx(xd, yd, 3., $FE, 0, 0, true);
			}
			TimerStart(t, 6., false, Trig_IsMinimapPingGuardsAttacked_Refresh_Actions);
		}
		if (damage > .0) {
			if (GetPlayerId(pr) <= 8) {
			}
			if (GetPlayerId(pd) <= 8) {
			}
		}
	}
	while (true) {
		if (Picked == null) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
			UnitDamageTarget(damaged, Picked, ConvertMagicAndChaosDamageInClear(Picked, LoadReal(udg_hash, GetHandleId(Picked), $A0), LoadReal(udg_hash, GetHandleId(Picked), $A1)), false, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			SaveReal(udg_hash, GetHandleId(Picked), $A0, .0);
			SaveReal(udg_hash, GetHandleId(Picked), $A1, .0);
		}
		GroupRemoveUnit(gdamagefromdamaged, Picked);
	}
	GroupClear(gdamagefromdamaged);
	DestroyGroup(gdamagefromdamaged);
	while (true) {
		if (Picked == null) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
			UnitDamageTarget(damager, Picked, ConvertMagicAndChaosDamageInClear(Picked, LoadReal(udg_hash, GetHandleId(Picked), $9E), LoadReal(udg_hash, GetHandleId(Picked), $9F)), false, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			SaveReal(udg_hash, GetHandleId(Picked), $9E, .0);
			SaveReal(udg_hash, GetHandleId(Picked), $9F, .0);
		}
		GroupRemoveUnit(gdamagefromdamager, Picked);
	}
	GroupClear(gdamagefromdamager);
	DestroyGroup(gdamagefromdamager);
}
boolean Trig_Del_Conditions() {
	return GetEventDamage() > .0;
}
nothing InitTrig_AddDamage() {
	TriggerAddCondition(gg_trg_AddDamage, Condition(Trig_Del_Conditions));
	TriggerAddAction(gg_trg_AddDamage, Trig_AddDamage_Actions);
}
nothing Trig_TimeTalisman_Remove_Bonuses_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit target = LoadUnitHandle(udg_hash, h, 1);
	integer as = LoadInteger(udg_hash, h, 2);
	effect ef = LoadEffectHandle(udg_hash, h, 5);
	SetAttackSpeedAbilityLevel(target, -as);
	SaveBoolean(udg_hash, GetHandleId(target), $B1, false);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	DestroyEffect(ef);
}
nothing Trig_TimeTalisman_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	integer id = GetSpellAbilityId();
	effect ef;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	integer as;
	unit dammi;
	UnitApplyTimedLife(dammi, 'BTLF', 1.);
	UnitAddAbility(dammi, 'A0QQ');
	IssueTargetOrderById(dammi, $D0085, target);
	if (id == 'A0QI') {
	}
	if (id == 'A0QM') {
	}
	if (id == 'A0QN') {
	}
	if (id == 'A0QO') {
	}
	if (id == 'A0QP') {
	}
	if (LoadBoolean(udg_hash, GetHandleId(target), $B1) == false) {
		SaveBoolean(udg_hash, GetHandleId(target), $B1, true);
		SetAttackSpeedAbilityLevel(target, as);
		SaveUnitHandle(udg_hash, h, 1, target);
		SaveInteger(udg_hash, h, 2, as);
		SaveEffectHandle(udg_hash, h, 5, ef);
		TimerStart(t, 10., false, Trig_TimeTalisman_Remove_Bonuses_Actions);
	else
		SimError(GetOwningPlayer(caster), "На этого воина уже наложено заклинание: 'Обгоняя Время'.");
	}
}
boolean Trig_TimeTalisman_Conditions() {
	return (GetSpellAbilityId() == 'A0QI' || GetSpellAbilityId() == 'A0QM' || GetSpellAbilityId() == 'A0QN' || GetSpellAbilityId() == 'A0QO' || GetSpellAbilityId() == 'A0QP');
}
nothing InitTrig_TimeTalisman() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_TimeTalisman, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_TimeTalisman, Condition(Trig_TimeTalisman_Conditions));
	TriggerAddAction(gg_trg_TimeTalisman, Trig_TimeTalisman_Actions);
}
nothing Trig_Take_Paladin_Armor_Periodic_Wave_Move_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit target = LoadUnitHandle(udg_hash, h, 1);
	unit dammi = LoadUnitHandle(udg_hash, h, 4);
	real x;
	real y;
	real xt;
	real yt;
	real angle;
	real dist;
	real heal;
	effect ef;
	SetUnitPosition(dammi, x, y);
	if (dist < 23. || GetUnitState(target, UNIT_STATE_LIFE) < .405) {
		SetUnitScale(dammi, .6, .6, .6);
		DestroyEffect(ef);
		if (GetUnitState(target, UNIT_STATE_LIFE) > .405) {
			SetUnitState(target, UNIT_STATE_LIFE, GetUnitState(target, UNIT_STATE_LIFE) + heal);
			DestroyEffect(AddSpecialEffectTarget("Effects\\MegaHeal.mdx", target, "origin"));
			DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", target, "origin"), 2.);
		else
			DestroyEffect(AddSpecialEffect("Effects\\HolyPhoenixMissle.mdx", x, y));
		}
		RemoveUnit(dammi);
		DestroyTimer(t);
		FlushChildHashtable(udg_hash, h);
	}
}
nothing Trig_Take_Paladin_Armor_Periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit hero = LoadUnitHandle(udg_hash, h, 1);
	integer regen = LoadInteger(udg_hash, h, 2);
	item armor = LoadItemHandle(udg_hash, h, 3);
	integer newregen = R2I(GetUnitState(hero, UNIT_STATE_MAX_LIFE) * .01);
	real heal;
	timer t2;
	integer h2;
	unit target;
	group g;
	group grup;
	unit Picked;
	unit dammi;
	effect ef;
	if (armor != LoadItemHandle(udg_hash, GetHandleId(hero), $AD) || UnitHasItem(hero, armor) == false) {
		SetUnitLifeAndManaRegeneration(hero, "life", -LoadInteger(udg_hash, h, 2));
		SaveInteger(udg_hash, h, 2, 0);
	}
	if (UnitHasItem(hero, armor) == false) {
		SaveItemHandle(udg_hash, GetHandleId(hero), $AD, GetItemOfTypeFromUnitBJ(hero, 'I02P'));
	}
	if (GetUnitState(hero, UNIT_STATE_LIFE) > .405 && CountItemOfTypeOnUnit(hero, 'I02P') > 0 && armor == LoadItemHandle(udg_hash, GetHandleId(hero), $AD)) {
		if (regen != newregen) {
			SetUnitLifeAndManaRegeneration(hero, "life", -regen);
			SetUnitLifeAndManaRegeneration(hero, "life", newregen);
			SaveInteger(udg_hash, h, 2, newregen);
		}
		GroupEnumUnitsInRange(g, GetUnitX(hero), GetUnitY(hero), 750., null);
		GroupRemoveUnit(g, hero);
		while (true) {
			if (Picked == null) break;
			if (IsUnitAlly(Picked, GetOwningPlayer(hero)) && (GetUnitState(Picked, UNIT_STATE_LIFE) < .99 * GetUnitState(Picked, UNIT_STATE_MAX_LIFE)) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				GroupAddUnit(grup, Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
		RandomUnitFromGroup(1, grup);
		GroupAddGroup(udg_GroupRandomUnitFromGroup, g);
		if (target == null) {
		}
		if (target != null) {
			UnitAddAbility(dammi, 'Amrf');
			UnitRemoveAbility(dammi, 'Amrf');
			SetUnitFlyHeight(dammi, 50., .0);
			SaveUnitHandle(udg_hash, h2, 1, target);
			SaveReal(udg_hash, h2, 2, heal);
			SaveEffectHandle(udg_hash, h2, 3, ef);
			SaveUnitHandle(udg_hash, h2, 4, dammi);
			TimerStart(t2, .03, true, Trig_Take_Paladin_Armor_Periodic_Wave_Move_Actions);
		}
		GroupClear(g);
		DestroyGroup(g);
	}
	if (CountItemOfTypeOnUnit(hero, 'I02P') <= 0) {
		DestroyTimer(t);
		FlushChildHashtable(udg_hash, h);
	}
}
nothing Trig_Take_Paladin_Armor_Actions() {
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	integer regen = 0;
	unit hero = GetTriggerUnit();
	SaveUnitHandle(udg_hash, h, 1, hero);
	SaveInteger(udg_hash, h, 2, regen);
	SaveItemHandle(udg_hash, h, 3, GetManipulatedItem());
	SaveItemHandle(udg_hash, GetHandleId(hero), $AD, GetManipulatedItem());
	TimerStart(t, 5., true, Trig_Take_Paladin_Armor_Periodic_Actions);
}
boolean Trig_Take_Paladin_Armor_Conditions() {
	return (GetItemTypeId(GetManipulatedItem()) == 'I02P');
}
nothing InitTrig_Take_Paladin_Armor() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Take_Paladin_Armor, Player(index), EVENT_PLAYER_UNIT_PICKUP_ITEM, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Take_Paladin_Armor, Condition(Trig_Take_Paladin_Armor_Conditions));
	TriggerAddAction(gg_trg_Take_Paladin_Armor, Trig_Take_Paladin_Armor_Actions);
}
boolean Trig_Take_Archimagus_Staff_Conditions() {
	return GetItemTypeId(GetManipulatedItem()) == 'I04V';
}
nothing Trig_Take_Archimagus_Staff_Remove_Recipe_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	item it = LoadItemHandle(udg_hash, h, 1);
	item staff = LoadItemHandle(udg_hash, h, 2);
	if (staff != null) {
		UnitAddItem(LoadUnitHandle(udg_hash, h, 3), staff);
	}
	RemoveItem(it);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_Take_Archimagus_Staff_Actions() {
	item it = GetManipulatedItem();
	integer id = GetItemTypeId(it);
	unit hero = GetManipulatingUnit();
	integer heroid = GetUnitTypeId(hero);
	item staff;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	if (heroid == 'H00Q') {
		UnitAddItem(hero, staff);
		SetItemUserData(staff, GetPlayerId(GetOwningPlayer(hero)) + 1);
	}
	if (heroid == 'O001') {
		UnitAddItem(hero, staff);
		SetItemUserData(staff, GetPlayerId(GetOwningPlayer(hero)) + 1);
	}
	if (heroid == 'E003') {
		UnitAddItem(hero, staff);
		SetItemUserData(staff, GetPlayerId(GetOwningPlayer(hero)) + 1);
	}
	if (heroid == 'E001') {
		UnitAddItem(hero, staff);
		SetItemUserData(staff, GetPlayerId(GetOwningPlayer(hero)) + 1);
	}
	if (heroid == 'N00W') {
		UnitAddItem(hero, staff);
		SetItemUserData(staff, GetPlayerId(GetOwningPlayer(hero)) + 1);
	}
	if (heroid == 'H01I') {
		UnitAddItem(hero, staff);
		SetItemUserData(staff, GetPlayerId(GetOwningPlayer(hero)) + 1);
	}
	SaveItemHandle(udg_hash, h, 1, it);
	if (staff != null) {
		SaveItemHandle(udg_hash, h, 2, staff);
		SaveUnitHandle(udg_hash, h, 3, hero);
	}
	TimerStart(t, .01, false, Trig_Take_Archimagus_Staff_Remove_Recipe_Actions);
}
nothing InitTrig_Take_Archimagus_Staff() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Take_Archimagus_Staff, Player(index), EVENT_PLAYER_UNIT_PICKUP_ITEM, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Take_Archimagus_Staff, Condition(Trig_Take_Archimagus_Staff_Conditions));
	TriggerAddAction(gg_trg_Take_Archimagus_Staff, Trig_Take_Archimagus_Staff_Actions);
}
nothing Trig_Lost_Charged_Staff_of_Lightning_Actions() {
	unit hero = GetTriggerUnit();
	integer h = GetHandleId(hero);
	integer i = LoadInteger(udg_hash, h, $8F);
	if (i == 3) {
		DestroyEffect(LoadEffectHandle(udg_hash, h, $90));
	}
	SaveInteger(udg_hash, h, $8F, 0);
}
boolean Trig_Lost_Charged_Staff_of_Lightning_Conditions() {
	return (GetItemTypeId(GetManipulatedItem()) == 'I01W' && IsUnitType(GetManipulatingUnit(), UNIT_TYPE_HERO)) != null;
}
nothing InitTrig_Lost_Charged_Staff_of_Lightning() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Lost_Charged_Staff_of_Lightning, Player(index), EVENT_PLAYER_UNIT_DROP_ITEM, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Lost_Charged_Staff_of_Lightning, Condition(Trig_Lost_Charged_Staff_of_Lightning_Conditions));
	TriggerAddAction(gg_trg_Lost_Charged_Staff_of_Lightning, Trig_Lost_Charged_Staff_of_Lightning_Actions);
}
nothing Trig_Blood_Bow_Actions() {
	unit killer = GetKillingUnit();
	SetUnitState(killer, UNIT_STATE_LIFE, GetUnitState(killer, UNIT_STATE_LIFE) + (GetUnitState(GetDyingUnit(), UNIT_STATE_MAX_LIFE) * .1));
	DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPriest.mdl", killer, "chest"));
}
boolean Trig_Blood_Bow_Conditions() {
	return GetUnitAbilityLevel(GetKillingUnit(), 'A0O0') >= 1;
}
nothing InitTrig_Blood_Bow() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Blood_Bow, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Blood_Bow, Condition(Trig_Blood_Bow_Conditions));
	TriggerAddAction(gg_trg_Blood_Bow, Trig_Blood_Bow_Actions);
}
nothing Trig_Balance_Ring_Actions() {
	unit caster = GetSpellAbilityUnit();
	real hp = GetUnitState(caster, UNIT_STATE_LIFE);
	real hp2;
	real removehp = 200.;
	real healmp = 150.;
	if ((GetUnitState(caster, UNIT_STATE_MANA) < (GetUnitState(caster, UNIT_STATE_MAX_MANA) * .5))) {
		if (hp > removehp) {
		else
		}
		SetUnitState(caster, UNIT_STATE_LIFE, hp - hp2);
		SetUnitState(caster, UNIT_STATE_MANA, GetUnitState(caster, UNIT_STATE_MANA) + 250.);
	else
		if (hp > removehp) {
		else
		}
		SetUnitState(caster, UNIT_STATE_LIFE, hp - hp2);
		SetUnitState(caster, UNIT_STATE_MANA, GetUnitState(caster, UNIT_STATE_MANA) + 150.);
	}
	DestroyEffect(AddSpecialEffectTarget("Effects\\RefreshingSurge.mdl", caster, "origin"));
}
boolean Trig_Balance_Ring_Conditions() {
	return GetSpellAbilityId() == 'A0NQ';
}
nothing InitTrig_Balance_Ring() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Balance_Ring, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Balance_Ring, Condition(Trig_Balance_Ring_Conditions));
	TriggerAddAction(gg_trg_Balance_Ring, Trig_Balance_Ring_Actions);
}
nothing Trig_Armageddon_Staff_Periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 37);
	real damage = LoadReal(udg_hash, h, 38);
	integer wait = LoadInteger(udg_hash, h, 39);
	real angle = LoadReal(udg_hash, h, 40);
	group gdamage = LoadGroupHandle(udg_hash, h, 41);
	player p = GetOwningPlayer(caster);
	group gdammi = CreateGroup();
	group g = CreateGroup();
	real dammiangle;
	real xdammi;
	real ydammi;
	unit Picked;
	unit dammi;
	integer lopa = 1;
	effect ef;
	real anglestep;
	if (wait > 0) {
		SaveInteger(udg_hash, h, 39, wait);
		while (true) {
			if (lopa > $A) break;
			if (dammiangle < -45.) {
				SaveReal(udg_hash, h, lopa + 50, anglestep);
			}
			if (dammiangle > 45.) {
				SaveReal(udg_hash, h, lopa + 50, anglestep);
			}
			SetUnitPosition(dammi, xdammi, ydammi);
			SetUnitFacing(dammi, angle + dammiangle);
			GroupEnumUnitsInRange(gdammi, xdammi, ydammi, 125., null);
			GroupAddGroup(gdammi, g);
			SaveReal(udg_hash, h, lopa + 20, dammiangle);
		}
		while (true) {
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitInGroup(Picked, gdamage) == false && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				UnitApplyTimedLife(dammi, 'BTLF', 1.);
				UnitAddAbility(dammi, 'A0NE');
				IssueTargetOrderById(dammi, $D02B6, Picked);
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIfb\\AIfbSpecialArt.mdl", Picked, "chest"));
				GroupAddUnit(gdamage, Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
		SaveGroupHandle(udg_hash, h, 41, gdamage);
	else
		while (true) {
			if (lopa > $A) break;
			KillUnit(dammi);
			DestroyEffect(ef);
		}
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
		GroupClear(gdamage);
		DestroyGroup(gdamage);
	}
	GroupClear(gdammi);
	DestroyGroup(gdammi);
	GroupClear(g);
	DestroyGroup(g);
}
nothing Trig_Armageddon_Staff_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	location loc;
	real xt;
	real yt;
	unit dammi;
	effect ef;
	real xdammi;
	real ydammi;
	integer lopa = 1;
	group gdamage = CreateGroup();
	real angle;
	integer count = $A;
	real damage = 335. + GetHeroInt(caster, true);
	integer wait = 50;
	real dammidist = -300.;
	real dammiangle;
	if (GetSpellTargetUnit() == null) {
		RemoveLocation(loc);
	else
	}
	while (true) {
		if (lopa > count) break;
		UnitAddAbility(dammi, 'Amrf');
		UnitRemoveAbility(dammi, 'Amrf');
		SetUnitFlyHeight(dammi, 50., .0);
		SaveUnitHandle(udg_hash, h, lopa, dammi);
		SaveEffectHandle(udg_hash, h, lopa + $A, ef);
		SaveReal(udg_hash, h, lopa + 20, dammiangle);
		SaveReal(udg_hash, h, lopa + 50, 3.6);
	}
	SaveUnitHandle(udg_hash, h, 37, caster);
	SaveReal(udg_hash, h, 38, damage);
	SaveInteger(udg_hash, h, 39, wait);
	SaveReal(udg_hash, h, 40, angle);
	SaveGroupHandle(udg_hash, h, 41, gdamage);
	TimerStart(t, .03, true, Trig_Armageddon_Staff_Periodic_Actions);
}
boolean Trig_Armageddon_Staff_Conditions() {
	return GetSpellAbilityId() == 'A0NC';
}
nothing InitTrig_Armageddon_Staff() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Armageddon_Staff, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Armageddon_Staff, Condition(Trig_Armageddon_Staff_Conditions));
	TriggerAddAction(gg_trg_Armageddon_Staff, Trig_Armageddon_Staff_Actions);
}
nothing Trig_Sargeras_Crown_Remove_Bonuses_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit target = LoadUnitHandle(udg_hash, h, 1);
	integer bonusstr = LoadInteger(udg_hash, h, 2);
	integer bonusagi = LoadInteger(udg_hash, h, 3);
	integer bonusint = LoadInteger(udg_hash, h, 4);
	effect ef = LoadEffectHandle(udg_hash, h, 5);
	SetHeroStr(target, GetHeroStr(target, false) - bonusstr, true);
	SetHeroAgi(target, GetHeroAgi(target, false) - bonusagi, true);
	SetHeroInt(target, GetHeroInt(target, false) - bonusint, true);
	SaveBoolean(udg_hash, GetHandleId(target), '}', false);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	DestroyEffect(ef);
}
nothing Trig_Sargeras_Crown_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	integer agi = GetHeroAgi(target, true);
	integer id = GetSpellAbilityId();
	real bonus = .0;
	real time = .0;
	effect ef;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	integer bonusstr;
	integer bonusagi;
	integer bonusint;
	if (id == 'A0N2') {
	}
	if (id == 'A0N3') {
	}
	if (id == 'A0N4') {
	}
	if (LoadBoolean(udg_hash, GetHandleId(target), '}') == false) {
		SaveBoolean(udg_hash, GetHandleId(target), '}', true);
		SetHeroStr(target, GetHeroStr(target, false) + bonusstr, true);
		SetHeroAgi(target, GetHeroAgi(target, false) + bonusagi, true);
		SetHeroInt(target, GetHeroInt(target, false) + bonusint, true);
		SaveUnitHandle(udg_hash, h, 1, target);
		SaveInteger(udg_hash, h, 2, bonusstr);
		SaveInteger(udg_hash, h, 3, bonusagi);
		SaveInteger(udg_hash, h, 4, bonusint);
		SaveEffectHandle(udg_hash, h, 5, ef);
		TimerStart(t, time, false, Trig_Sargeras_Crown_Remove_Bonuses_Actions);
	else
		SimError(GetOwningPlayer(caster), "На этого героя уже наложено Благославление Саргераса.");
	}
}
boolean Trig_Sargeras_Crown_Conditions() {
	return (GetSpellAbilityId() == 'A0N2' || GetSpellAbilityId() == 'A0N3' || GetSpellAbilityId() == 'A0N4');
}
nothing InitTrig_Sargeras_Crown() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Sargeras_Crown, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Sargeras_Crown, Condition(Trig_Sargeras_Crown_Conditions));
	TriggerAddAction(gg_trg_Sargeras_Crown, Trig_Sargeras_Crown_Actions);
}
nothing Trig_Lost_Sargeras_Crown_Actions() {
	unit hero = GetTriggerUnit();
	integer h = GetHandleId(hero);
	integer id = GetItemTypeId(GetManipulatedItem());
	integer bonus = 0;
	string smainstat = LoadStr(udg_hash, GetUnitTypeId(hero), 70);
	if (id == 'I008') {
	}
	if (id == 'I009') {
	}
	if (id == 'I00L') {
	}
	if (smainstat == "str") {
		SetHeroStr(hero, GetHeroStr(hero, false) - bonus, true);
	}
	if (smainstat == "agi") {
		SetHeroAgi(hero, GetHeroAgi(hero, false) - bonus, true);
	}
	if (smainstat == "int") {
		SetHeroInt(hero, GetHeroInt(hero, false) - bonus, true);
	}
}
boolean Trig_Lost_Sargeras_Crown_Conditions() {
	return ((GetItemTypeId(GetManipulatedItem()) == 'I008' || GetItemTypeId(GetManipulatedItem()) == 'I009' || GetItemTypeId(GetManipulatedItem()) == 'I00L') && IsUnitType(GetManipulatingUnit(), UNIT_TYPE_HERO)) != null;
}
nothing InitTrig_Lost_Sargeras_Crown() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Lost_Sargeras_Crown, Player(index), EVENT_PLAYER_UNIT_DROP_ITEM, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Lost_Sargeras_Crown, Condition(Trig_Lost_Sargeras_Crown_Conditions));
	TriggerAddAction(gg_trg_Lost_Sargeras_Crown, Trig_Lost_Sargeras_Crown_Actions);
}
nothing Trig_Take_Sargeras_Crown_Actions() {
	unit hero = GetTriggerUnit();
	integer h = GetHandleId(hero);
	integer id = GetItemTypeId(GetManipulatedItem());
	integer bonus = 0;
	string smainstat = LoadStr(udg_hash, GetUnitTypeId(hero), 70);
	if (id == 'I008') {
	}
	if (id == 'I009') {
	}
	if (id == 'I00L') {
	}
	if (smainstat == "str") {
		SetHeroStr(hero, GetHeroStr(hero, false) + bonus, true);
	}
	if (smainstat == "agi") {
		SetHeroAgi(hero, GetHeroAgi(hero, false) + bonus, true);
	}
	if (smainstat == "int") {
		SetHeroInt(hero, GetHeroInt(hero, false) + bonus, true);
	}
}
boolean Trig_Take_Sargeras_Crown_Conditions() {
	return ((GetItemTypeId(GetManipulatedItem()) == 'I008' || GetItemTypeId(GetManipulatedItem()) == 'I009' || GetItemTypeId(GetManipulatedItem()) == 'I00L') && IsUnitType(GetManipulatingUnit(), UNIT_TYPE_HERO)) != null;
}
nothing InitTrig_Take_Sargeras_Crown() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Take_Sargeras_Crown, Player(index), EVENT_PLAYER_UNIT_PICKUP_ITEM, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Take_Sargeras_Crown, Condition(Trig_Take_Sargeras_Crown_Conditions));
	TriggerAddAction(gg_trg_Take_Sargeras_Crown, Trig_Take_Sargeras_Crown_Actions);
}
nothing Trig_Lost_Archimagus_Armor_Actions() {
	unit hero = GetTriggerUnit();
	integer h = GetHandleId(hero);
	effect ef = LoadEffectHandle(udg_hash, h, 'g');
	DestroyEffect(ef);
	SaveBoolean(udg_hash, h, 'f', false);
	SaveEffectHandle(udg_hash, h, 'g', null);
}
boolean Trig_Lost_Archimagus_Armor_Conditions() {
	return GetItemTypeId(GetManipulatedItem()) == 'I05A' && CountItemOfTypeOnUnit(GetTriggerUnit(), 'I05A') == 1;
}
nothing InitTrig_Lost_Archimagus_Armor() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Lost_Archimagus_Armor, Player(index), EVENT_PLAYER_UNIT_DROP_ITEM, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Lost_Archimagus_Armor, Condition(Trig_Lost_Archimagus_Armor_Conditions));
	TriggerAddAction(gg_trg_Lost_Archimagus_Armor, Trig_Lost_Archimagus_Armor_Actions);
}
nothing Trig_Take_Archimagus_Armor_Actions() {
	unit hero = GetTriggerUnit();
	integer h = GetHandleId(hero);
	effect ef;
	if (LoadReal(udg_hash, h, 'h') < 1.) {
		SaveBoolean(udg_hash, h, 'f', true);
		SaveEffectHandle(udg_hash, h, 'g', ef);
		if (LoadBoolean(udg_hash, h, 'j') == false) {
			SaveReal(udg_hash, GetHandleId(hero), 'i', (500. + (GetHeroInt(hero, true) * 3.)));
		}
	}
}
boolean Trig_Take_Archimagus_Armor_Conditions() {
	return GetItemTypeId(GetManipulatedItem()) == 'I05A' && CountItemOfTypeOnUnit(GetTriggerUnit(), 'I05A') == 1;
}
nothing InitTrig_Take_Archimagus_Armor() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Take_Archimagus_Armor, Player(index), EVENT_PLAYER_UNIT_PICKUP_ITEM, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Take_Archimagus_Armor, Condition(Trig_Take_Archimagus_Armor_Conditions));
	TriggerAddAction(gg_trg_Take_Archimagus_Armor, Trig_Take_Archimagus_Armor_Actions);
}
nothing Trig_Sorcerers_Talisman_Cast_Actions() {
}
boolean Trig_Sorcerers_Talisman_Cast_Conditions() {
	return GetSpellAbilityId() == 'A0LW' || GetSpellAbilityId() == 'A0LZ' || GetSpellAbilityId() == 'A0M0' || GetSpellAbilityId() == 'A0M1';
}
nothing InitTrig_Sorcerers_Talisman_Cast() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Sorcerers_Talisman_Cast, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Sorcerers_Talisman_Cast, Condition(Trig_Sorcerers_Talisman_Cast_Conditions));
	TriggerAddAction(gg_trg_Sorcerers_Talisman_Cast, Trig_Sorcerers_Talisman_Cast_Actions);
}
nothing Trig_Sorcerers_Talisman_Periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	unit target = LoadUnitHandle(udg_hash, h, 2);
	effect ef;
	boolean ally = LoadBoolean(udg_hash, h, 4);
	real heal = LoadReal(udg_hash, h, 5);
	real damage = LoadReal(udg_hash, h, 6);
	integer wait = LoadInteger(udg_hash, h, 7);
	if (wait > 0) {
		SaveInteger(udg_hash, h, 7, wait);
		if (ally && GetUnitState(target, UNIT_STATE_LIFE) > .405) {
			SetUnitState(target, UNIT_STATE_LIFE, GetUnitState(target, UNIT_STATE_LIFE) + heal);
		else
			if (IsUnitType(target, UNIT_TYPE_MAGIC_IMMUNE) == false) {
				UnitDamageTarget(caster, target, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			}
		}
	else
		DestroyTimer(t);
		DestroyEffect(ef);
		FlushChildHashtable(udg_hash, h);
	}
}
nothing Trig_Sorcerers_Talisman_Actions() {
	unit caster = GetManipulatingUnit();
	unit target = udg_Temp_Unit;
	player p = GetOwningPlayer(caster);
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	integer lvl;
	item it = GetManipulatedItem();
	integer charges = GetItemCharges(it);
	integer id = GetItemTypeId(it);
	effect ef;
	boolean ally;
	real heal;
	real damage;
	integer wait;
	if (charges != 0) {
		SetItemCharges(it, charges + 1);
	}
	if (charges == 0) {
		SetItemCharges(it, 1);
	}
	if (GetItemCharges(it) <= 7) {
		SimError(p, "Для Применения необходимо минимум 8 душ.");
	else
		if (id == 'I055') {
		}
		if (id == 'I056') {
		}
		if (id == 'I057') {
		}
		if (id == 'I058') {
		}
		SetItemCharges(it, GetItemCharges(it) - 8);
		if (IsUnitEnemy(target, p) && IsUnitType(target, UNIT_TYPE_STRUCTURE) == false && IsUnitType(target, UNIT_TYPE_MAGIC_IMMUNE) == false) {
		}
		if (IsUnitAlly(target, p) && IsUnitType(target, UNIT_TYPE_STRUCTURE) == false && IsUnitType(target, UNIT_TYPE_MAGIC_IMMUNE) == false) {
		}
		DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\EtherealForm\\SpiritWalkerChange.mdl", caster, "origin"), 2.5);
		DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\EtherealForm\\SpiritWalkerChange.mdl", target, "origin"), 3.);
		SaveUnitHandle(udg_hash, h, 1, caster);
		SaveUnitHandle(udg_hash, h, 2, target);
		SaveEffectHandle(udg_hash, h, 3, ef);
		SaveBoolean(udg_hash, h, 4, ally);
		SaveReal(udg_hash, h, 5, heal);
		SaveReal(udg_hash, h, 6, damage);
		SaveInteger(udg_hash, h, 7, wait);
		TimerStart(t, 1., true, Trig_Sorcerers_Talisman_Periodic_Actions);
	}
}
boolean Trig_Sorcerers_Talisman_Conditions() {
	return GetItemTypeId(GetManipulatedItem()) == 'I055' || GetItemTypeId(GetManipulatedItem()) == 'I056' || GetItemTypeId(GetManipulatedItem()) == 'I057' || GetItemTypeId(GetManipulatedItem()) == 'I058';
}
nothing InitTrig_Sorcerers_Talisman() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Sorcerers_Talisman, Player(index), EVENT_PLAYER_UNIT_USE_ITEM, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Sorcerers_Talisman, Condition(Trig_Sorcerers_Talisman_Conditions));
	TriggerAddAction(gg_trg_Sorcerers_Talisman, Trig_Sorcerers_Talisman_Actions);
}
boolean Trig_Sorcerers_Talisman_Dead_Unit_Condition_Actions() {
	return GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405 && GetUnitTypeId(GetFilterUnit()) != 'h00U' && IsUnitEnemy(udg_Temp_Unit, GetOwningPlayer(GetFilterUnit())) && (CountItemOfTypeOnUnit(GetFilterUnit(), 'I055') >= 1 || CountItemOfTypeOnUnit(GetFilterUnit(), 'I056') >= 1 || CountItemOfTypeOnUnit(GetFilterUnit(), 'I057') >= 1 || CountItemOfTypeOnUnit(GetFilterUnit(), 'I058') >= 1);
}
nothing Trig_Sorcerers_Talisman_Dead_Unit_Actions() {
	unit enemy = GetDyingUnit();
	real x = GetUnitX(enemy);
	real y = GetUnitY(enemy);
	group g = CreateGroup();
	unit dammi = CreateUnit(GetOwningPlayer(enemy), 'h00U', x, y, .0);
	item talisman;
	integer lop = 1;
	UnitApplyTimedLife(dammi, 'BTLF', 2.);
	GroupEnumUnitsInRange(g, x, y, 1200., Filter(Trig_Sorcerers_Talisman_Dead_Unit_Condition_Actions));
	FilterMostNearUnit(g, dammi);
	if (udg_Unit_FilterMostNearUnit != null && SquareRoot(((GetUnitX(udg_Unit_FilterMostNearUnit) - x) * (GetUnitX(udg_Unit_FilterMostNearUnit) - x)) + ((GetUnitY(udg_Unit_FilterMostNearUnit) - y) * (GetUnitY(udg_Unit_FilterMostNearUnit) - y))) <= 1200.) {
		while (true) {
			if (lop > 5) break;
			if (((GetItemTypeId(talisman) == 'I055' && GetItemCharges(talisman) < 24) || (GetItemTypeId(talisman) == 'I056' && GetItemCharges(talisman) < 32) || (GetItemTypeId(talisman) == 'I057' && GetItemCharges(talisman) < 40) || (GetItemTypeId(talisman) == 'I058' && GetItemCharges(talisman) < 48))) {
				SetItemCharges(talisman, GetItemCharges(talisman) + 1);
			else
			}
		}
	}
	GroupClear(g);
	DestroyGroup(g);
}
boolean Trig_Sorcerers_Talisman_Dead_Unit_Condition() {
	return GetUnitTypeId(GetDyingUnit()) != 'h00U';
}
nothing InitTrig_Sorcerers_Talisman_Dead_Unit() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Sorcerers_Talisman_Dead_Unit, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Sorcerers_Talisman_Dead_Unit, Condition(Trig_Sorcerers_Talisman_Dead_Unit_Condition));
	TriggerAddAction(gg_trg_Sorcerers_Talisman_Dead_Unit, Trig_Sorcerers_Talisman_Dead_Unit_Actions);
}
nothing Trig_Orc_Banner_Periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit hero = LoadUnitHandle(udg_hash, h, 1);
	group gmain = LoadGroupHandle(udg_hash, h, 2);
	integer bonushp = LoadInteger(udg_hash, h, 3);
	integer bonusa = LoadInteger(udg_hash, h, 4);
	integer bonusstat = LoadInteger(udg_hash, h, 5);
	integer lvl = LoadInteger(udg_hash, h, 6);
	item it = LoadItemHandle(udg_hash, h, 7);
	group g = CreateGroup();
	group g2 = CreateGroup();
	player p = GetOwningPlayer(hero);
	unit Picked;
	string s;
	real x = GetUnitX(hero);
	real y = GetUnitY(hero);
	boolean dest = false;
	boolean tdest = false;
	if (UnitHasItem(hero, it)) {
		if (GetItemTypeId(it) == 'I052' && LoadInteger(udg_hash, GetHandleId(hero), 'e') == 2) {
		}
		if (dest == false) {
			GroupEnumUnitsInRange(g, GetUnitX(hero), GetUnitY(hero), 800., null);
			while (true) {
				if (Picked == null) break;
				if (IsUnitAlly(Picked, p) && IsUnitInGroup(Picked, gmain) == false && (LoadInteger(udg_hash, GetHandleId(Picked), 'e') == 0 || (LoadInteger(udg_hash, GetHandleId(Picked), 'e') == 1 && lvl == 2)) && IsUnitType(Picked, UNIT_TYPE_HERO) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
					SetAttackAbilityLevel(Picked, bonusa);
					SetUnitMaxState(Picked, UNIT_STATE_MAX_LIFE, bonushp);
					if (s == "str") {
						SetHeroStr(Picked, GetHeroStr(Picked, false) + bonusstat, true);
					}
					if (s == "agi") {
						SetHeroAgi(Picked, GetHeroAgi(Picked, false) + bonusstat, true);
					}
					if (s == "int") {
						SetHeroInt(Picked, GetHeroInt(Picked, false) + bonusstat, true);
					}
					SaveInteger(udg_hash, GetHandleId(Picked), 'e', lvl);
					GroupAddUnit(gmain, Picked);
				}
				GroupRemoveUnit(g, Picked);
			}
			GroupAddGroup(gmain, g2);
			while (true) {
				if (Picked == null) break;
				if (SquareRoot((x - GetUnitX(Picked)) * (x - GetUnitX(Picked)) + (y - GetUnitY(Picked)) * (y - GetUnitY(Picked))) > 800.) {
					SetAttackAbilityLevel(Picked, -bonusa);
					SetUnitMaxState(Picked, UNIT_STATE_MAX_LIFE, -bonushp);
					if (s == "str") {
						SetHeroStr(Picked, GetHeroStr(Picked, false) - bonusstat, true);
					}
					if (s == "agi") {
						SetHeroAgi(Picked, GetHeroAgi(Picked, false) - bonusstat, true);
					}
					if (s == "int") {
						SetHeroInt(Picked, GetHeroInt(Picked, false) - bonusstat, true);
					}
					if (LoadInteger(udg_hash, GetHandleId(Picked), 'e') == lvl) {
						SaveInteger(udg_hash, GetHandleId(Picked), 'e', 0);
					}
					GroupRemoveUnit(gmain, Picked);
				}
				GroupRemoveUnit(g2, Picked);
			}
		}
		SaveGroupHandle(udg_hash, h, 2, gmain);
	else
	}
	if (dest) {
		while (true) {
			if (Picked == null) break;
			SetAttackAbilityLevel(Picked, -bonusa);
			SetUnitMaxState(Picked, UNIT_STATE_MAX_LIFE, -bonushp);
			if (s == "str") {
				SetHeroStr(Picked, GetHeroStr(Picked, false) - bonusstat, true);
			}
			if (s == "agi") {
				SetHeroAgi(Picked, GetHeroAgi(Picked, false) - bonusstat, true);
			}
			if (s == "int") {
				SetHeroInt(Picked, GetHeroInt(Picked, false) - bonusstat, true);
			}
			if (LoadInteger(udg_hash, GetHandleId(Picked), 'e') == lvl) {
				SaveInteger(udg_hash, GetHandleId(Picked), 'e', 0);
			}
			GroupRemoveUnit(gmain, Picked);
		}
	}
	if (UnitHasItem(hero, it) == false) {
		GroupClear(gmain);
		DestroyGroup(gmain);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	else
		SaveGroupHandle(udg_hash, h, 2, gmain);
	}
	GroupClear(g);
	DestroyGroup(g);
	GroupClear(g2);
	DestroyGroup(g2);
}
nothing Trig_Orc_Banner_Actions() {
	unit hero = GetTriggerUnit();
	group g = CreateGroup();
	group gmain = CreateGroup();
	player p = GetOwningPlayer(hero);
	unit Picked;
	integer bonushp;
	integer bonusa;
	integer bonusstat;
	integer lvl;
	item it = GetManipulatedItem();
	string s;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	if (GetItemTypeId(it) == 'I052') {
	else
	}
	GroupEnumUnitsInRange(g, GetUnitX(hero), GetUnitY(hero), 800., null);
	while (true) {
		if (Picked == null) break;
		if (IsUnitAlly(Picked, p) && (LoadInteger(udg_hash, GetHandleId(Picked), 'e') == 0 || (LoadInteger(udg_hash, GetHandleId(Picked), 'e') == 1 && lvl == 2)) && IsUnitType(Picked, UNIT_TYPE_HERO) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
			SetAttackAbilityLevel(Picked, bonusa);
			SetUnitMaxState(Picked, UNIT_STATE_MAX_LIFE, bonushp);
			if (s == "str") {
				SetHeroStr(Picked, GetHeroStr(Picked, false) + bonusstat, true);
			}
			if (s == "agi") {
				SetHeroAgi(Picked, GetHeroAgi(Picked, false) + bonusstat, true);
			}
			if (s == "int") {
				SetHeroInt(Picked, GetHeroInt(Picked, false) + bonusstat, true);
			}
			SaveInteger(udg_hash, GetHandleId(Picked), 'e', lvl);
			GroupAddUnit(gmain, Picked);
		}
		GroupRemoveUnit(g, Picked);
	}
	SaveUnitHandle(udg_hash, h, 1, hero);
	SaveGroupHandle(udg_hash, h, 2, gmain);
	SaveInteger(udg_hash, h, 3, bonushp);
	SaveInteger(udg_hash, h, 4, bonusa);
	SaveInteger(udg_hash, h, 5, bonusstat);
	SaveInteger(udg_hash, h, 6, lvl);
	SaveItemHandle(udg_hash, h, 7, it);
	TimerStart(t, .3, true, Trig_Orc_Banner_Periodic_Actions);
	GroupClear(g);
	DestroyGroup(g);
}
boolean Trig_Orc_Banner_Conditions() {
	return (GetItemTypeId(GetManipulatedItem()) == 'I052' || (GetItemTypeId(GetManipulatedItem()) == 'I053'));
}
nothing InitTrig_Orc_Banner() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Orc_Banner, Player(index), EVENT_PLAYER_UNIT_PICKUP_ITEM, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Orc_Banner, Condition(Trig_Orc_Banner_Conditions));
	TriggerAddAction(gg_trg_Orc_Banner, Trig_Orc_Banner_Actions);
}
nothing Trig_Devil_Axe_Remove_Stregnth_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	integer strenght = LoadInteger(udg_hash, GetHandleId(caster), 'd');
	effect ef;
	SetHeroStr(caster, GetHeroStr(caster, false) - strenght, true);
	DestroyEffect(ef);
	DestroyEffect(ef);
	SaveBoolean(udg_hash, GetHandleId(caster), 99, false);
	SaveInteger(udg_hash, GetHandleId(caster), 'd', 0);
	DestroyTimer(t);
	FlushChildHashtable(udg_hash, h);
}
nothing Trig_Devil_Axe_Actions() {
	unit caster = GetSpellAbilityUnit();
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	unit dammi = CreateUnit(GetOwningPlayer(caster), 'h00U', GetUnitX(caster), GetUnitY(caster), .0);
	effect ef;
	UnitApplyTimedLife(dammi, 'BTLF', 1.);
	UnitAddAbility(dammi, 'A0LT');
	IssueTargetOrderById(dammi, $D00F1, caster);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveEffectHandle(udg_hash, h, 2, ef);
	SaveEffectHandle(udg_hash, h, 3, ef);
	SaveBoolean(udg_hash, GetHandleId(caster), 99, true);
	TimerStart(t, 30., false, Trig_Devil_Axe_Remove_Stregnth_Actions);
}
boolean Trig_Devil_Axe_Conditions() {
	return GetSpellAbilityId() == 'A0LS';
}
nothing InitTrig_Devil_Axe() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Devil_Axe, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Devil_Axe, Condition(Trig_Devil_Axe_Conditions));
	TriggerAddAction(gg_trg_Devil_Axe, Trig_Devil_Axe_Actions);
}
nothing Trig_Devil_Axe_Kill_Unit_Actions() {
	SetHeroStr(GetKillingUnit(), GetHeroStr(GetKillingUnit(), false) + 3, true);
	SetUnitState(GetKillingUnit(), UNIT_STATE_LIFE, GetUnitState(GetKillingUnit(), UNIT_STATE_LIFE) + (GetUnitState(GetDyingUnit(), UNIT_STATE_MAX_LIFE) * .15));
	DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPeasant.mdl", GetUnitX(GetDyingUnit()), GetUnitY(GetDyingUnit())));
	DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodSorceress.mdl", GetUnitX(GetDyingUnit()), GetUnitY(GetDyingUnit())));
	DestroyEffectWithWait(AddSpecialEffectTarget("Effects\\BloodBreathDamage.mdx", GetKillingUnit(), "origin"), 2.);
	SaveInteger(udg_hash, GetHandleId(GetKillingUnit()), 'd', LoadInteger(udg_hash, GetHandleId(GetKillingUnit()), 'd') + 3);
}
boolean Trig_Devil_Axe_Kill_Unit_Conditions() {
	return LoadBoolean(udg_hash, GetHandleId(GetKillingUnit()), 99);
}
nothing InitTrig_Devil_Axe_Kill_Unit() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Devil_Axe_Kill_Unit, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Devil_Axe_Kill_Unit, Condition(Trig_Devil_Axe_Kill_Unit_Conditions));
	TriggerAddAction(gg_trg_Devil_Axe_Kill_Unit, Trig_Devil_Axe_Kill_Unit_Actions);
}
nothing Trig_Tokugawas_Katan_Kill_Unit_Actions() {
	SetHeroAgi(GetKillingUnit(), GetHeroAgi(GetKillingUnit(), false) + 1, true);
}
boolean Trig_Tokugawas_Katan_Kill_Unit_Conditions() {
	return LoadBoolean(udg_hash, GetHandleId(GetKillingUnit()), 98) && GetRandomInt(1, 'd') <= 20;
}
nothing InitTrig_Tokugawas_Katan_Kill_Unit() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Tokugawas_Katan_Kill_Unit, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Tokugawas_Katan_Kill_Unit, Condition(Trig_Tokugawas_Katan_Kill_Unit_Conditions));
	TriggerAddAction(gg_trg_Tokugawas_Katan_Kill_Unit, Trig_Tokugawas_Katan_Kill_Unit_Actions);
}
nothing Trig_Tokugawas_Katan_Remove_Agi_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	integer bonus = LoadInteger(udg_hash, h, 2);
	effect ef = LoadEffectHandle(udg_hash, h, 3);
	effect ef2 = LoadEffectHandle(udg_hash, h, 4);
	integer clearagi = GetHeroAgi(caster, false);
	SetHeroAgi(caster, clearagi - bonus, true);
	SaveBoolean(udg_hash, GetHandleId(caster), 98, false);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	DestroyEffect(ef);
	DestroyEffect(ef2);
}
nothing Trig_Tokugawas_Katan_Actions() {
	unit caster = GetSpellAbilityUnit();
	integer agi = GetHeroAgi(caster, true);
	integer clearagi = GetHeroAgi(caster, false);
	integer bonus = R2I(agi * .7);
	effect ef = AddSpecialEffectTarget("Abilities\\Spells\\Other\\AcidBomb\\BottleImpact.mdl", caster, "weapon");
	effect ef2 = AddSpecialEffectTarget("Abilities\\Spells\\Other\\Drain\\DrainCaster.mdl", caster, "head");
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	SetHeroAgi(caster, clearagi + bonus, true);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveInteger(udg_hash, h, 2, bonus);
	SaveEffectHandle(udg_hash, h, 3, ef);
	SaveEffectHandle(udg_hash, h, 4, ef2);
	SaveBoolean(udg_hash, GetHandleId(caster), 98, true);
	TimerStart(t, 8., false, Trig_Tokugawas_Katan_Remove_Agi_Actions);
}
boolean Trig_Tokugawas_Katan_Conditions() {
	return GetSpellAbilityId() == 'A0LO';
}
nothing InitTrig_Tokugawas_Katan() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Tokugawas_Katan, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Tokugawas_Katan, Condition(Trig_Tokugawas_Katan_Conditions));
	TriggerAddAction(gg_trg_Tokugawas_Katan, Trig_Tokugawas_Katan_Actions);
}
nothing Trig_Kings_Armor_Remove_Buffs_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	group g = LoadGroupHandle(udg_hash, h, 2);
	integer count = LoadInteger(udg_hash, h, 3);
	effect ef;
	unit Picked;
	while (true) {
		if (Picked == null) break;
		SetArmorAbilityLevel(Picked, -$F);
		SetAttackSpeedAbilityLevel(Picked, -(20 + LoadInteger(udg_hash, GetHandleId(Picked), 97)));
		SetUnitLifeAndManaRegeneration(Picked, "life", -25);
		DestroyEffect(ef);
		GroupRemoveUnit(g, Picked);
	}
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	GroupClear(g);
	DestroyGroup(g);
}
nothing Trig_Kings_Armor_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	integer armor = $F;
	integer hpregen = 25;
	integer as = 20;
	integer asbonus;
	group g = CreateGroup();
	group g2 = CreateGroup();
	unit Picked;
	effect ef;
	unit dammi;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	integer count = $A;
	DestroyEffect(AddSpecialEffectTarget("Effects\\BattleCryCaster.mdl", caster, "origin"));
	GroupEnumUnitsInRange(g, x, y, 750., null);
	while (true) {
		if (Picked == null) break;
		if (IsUnitAlly(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			UnitApplyTimedLife(dammi, 'BTLF', 2.);
			UnitAddAbility(dammi, 'A0LD');
			IssueTargetOrderById(dammi, $D0062, Picked);
			SetArmorAbilityLevel(Picked, armor);
			SetAttackSpeedAbilityLevel(Picked, as + asbonus);
			SetUnitLifeAndManaRegeneration(Picked, "life", hpregen);
			SaveEffectHandle(udg_hash, h, count, ef);
			SaveInteger(udg_hash, GetHandleId(Picked), 97, asbonus);
			GroupAddUnit(g2, Picked);
		}
		GroupRemoveUnit(g, Picked);
	}
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveGroupHandle(udg_hash, h, 2, g2);
	SaveInteger(udg_hash, h, 3, count);
	TimerStart(t, 10., false, Trig_Kings_Armor_Remove_Buffs_Actions);
	GroupClear(g);
	DestroyGroup(g);
}
boolean Trig_Kings_Armor_Conditions() {
	return GetSpellAbilityId() == 'A0LC';
}
nothing InitTrig_Kings_Armor() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Kings_Armor, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Kings_Armor, Condition(Trig_Kings_Armor_Conditions));
	TriggerAddAction(gg_trg_Kings_Armor, Trig_Kings_Armor_Actions);
}
nothing Trig_Steel_Bib_Remove_Buffs_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Defend\\DefendCaster.mdl", caster, "origin"));
	SetArmorAbilityLevel(caster, -20);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_Steel_Bib_Actions() {
	unit caster = GetSpellAbilityUnit();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	unit dammi = CreateUnit(GetOwningPlayer(caster), 'h00U', x, y, .0);
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	UnitApplyTimedLife(dammi, 'BTLF', 1.);
	UnitAddAbility(dammi, 'A0L5');
	IssueTargetOrderById(dammi, $D006B, caster);
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Defend\\DefendCaster.mdl", caster, "origin"));
	SetArmorAbilityLevel(caster, 20);
	SaveUnitHandle(udg_hash, h, 1, caster);
	TimerStart(t, 7., false, Trig_Steel_Bib_Remove_Buffs_Actions);
}
boolean Trig_Steel_Bib_Conditions() {
	return GetSpellAbilityId() == 'A0L4';
}
nothing InitTrig_Steel_Bib() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Steel_Bib, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Steel_Bib, Condition(Trig_Steel_Bib_Conditions));
	TriggerAddAction(gg_trg_Steel_Bib, Trig_Steel_Bib_Actions);
}
nothing Trig_Archimagus_Staff_Periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 20);
	real damage = LoadReal(udg_hash, h, 21);
	integer wait = LoadInteger(udg_hash, h, 22);
	real angle = LoadReal(udg_hash, h, 23);
	group gdamage = LoadGroupHandle(udg_hash, h, 24);
	real dammiangle = LoadReal(udg_hash, h, 25);
	real dist = LoadReal(udg_hash, h, 27);
	real xt = LoadReal(udg_hash, h, 28);
	real yt = LoadReal(udg_hash, h, 29);
	player p = GetOwningPlayer(caster);
	group gdammi = CreateGroup();
	group g = CreateGroup();
	real xdammi;
	real ydammi;
	unit Picked;
	unit dammi;
	integer lopa = 1;
	effect ef;
	if (wait > 0) {
		SaveInteger(udg_hash, h, 22, wait);
		SaveReal(udg_hash, h, 25, dammiangle);
		SaveReal(udg_hash, h, 27, dist);
		while (true) {
			if (lopa > 5) break;
			SetUnitPosition(dammi, xdammi, ydammi);
			SetUnitFacing(dammi, dammiangle + (72. * (lopa - 1)));
			GroupEnumUnitsInRange(gdammi, xdammi, ydammi, 100., null);
			GroupAddGroup(gdammi, g);
		}
		while (true) {
			if (Picked == null) break;
			if (IsUnitAlly(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitInGroup(Picked, gdamage) == false && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
				SetUnitState(Picked, UNIT_STATE_MANA, GetUnitState(Picked, UNIT_STATE_MANA) + 125.);
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\ReplenishManaCaster.mdl", Picked, "origin"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIma\\AImaTarget.mdl", Picked, "origin"));
				GroupAddUnit(gdamage, Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
		SaveGroupHandle(udg_hash, h, 24, gdamage);
	else
		while (true) {
			if (lopa > 5) break;
			KillUnit(dammi);
			DestroyEffect(ef);
		}
		GroupEnumUnitsInRange(g, xt, yt, 275., null);
		SetUnitScale(dammi, 4., 4., 1.);
		DestroyEffect(AddSpecialEffectTarget("Effects\\Fireworksblue.mdl", dammi, "chest"));
		DestroyEffect(AddSpecialEffectTarget("Effects\\Fireworksblue.mdl", dammi, "chest"));
		DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NEDeathMedium\\NEDeath.mdl", xt, yt));
		DestroyEffect(AddSpecialEffect("Effects\\MagicStomp.mdl", xt, yt));
		while (true) {
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				DestroyEffect(AddSpecialEffectTarget("Effects\\Fireworksblue.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl", Picked, "origin"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl", Picked, "chest"));
			}
			GroupRemoveUnit(g, Picked);
		}
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
		GroupClear(gdamage);
		DestroyGroup(gdamage);
	}
	GroupClear(gdammi);
	DestroyGroup(gdammi);
	GroupClear(g);
	DestroyGroup(g);
}
nothing Trig_Archimagus_Staff_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	location loc = GetSpellTargetLoc();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	real xt = GetLocationX(loc);
	real yt = GetLocationY(loc);
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	unit dammi;
	effect ef;
	real xdammi;
	real ydammi;
	integer lopa = 1;
	group gdamage = CreateGroup();
	real angle;
	real dammiangle = -72.;
	real damage = 100. + GetHeroInt(caster, true) * 1.75;
	integer wait = 50;
	while (true) {
		if (lopa > 5) break;
		UnitAddAbility(dammi, 'Amrf');
		UnitRemoveAbility(dammi, 'Amrf');
		SetUnitFlyHeight(dammi, 50., .0);
		SaveUnitHandle(udg_hash, h, lopa, dammi);
		SaveEffectHandle(udg_hash, h, lopa + 5, ef);
	}
	SaveUnitHandle(udg_hash, h, 20, caster);
	SaveReal(udg_hash, h, 21, damage);
	SaveInteger(udg_hash, h, 22, wait);
	SaveReal(udg_hash, h, 23, angle);
	SaveGroupHandle(udg_hash, h, 24, gdamage);
	SaveReal(udg_hash, h, 25, .0);
	SaveReal(udg_hash, h, 27, 275.);
	SaveReal(udg_hash, h, 28, xt);
	SaveReal(udg_hash, h, 29, yt);
	TimerStart(t, .03, true, Trig_Archimagus_Staff_Periodic_Actions);
	RemoveLocation(loc);
}
boolean Trig_Archimagus_Staff_Conditions() {
	return GetSpellAbilityId() == 'A0L1';
}
nothing InitTrig_Archimagus_Staff() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Archimagus_Staff, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Archimagus_Staff, Condition(Trig_Archimagus_Staff_Conditions));
	TriggerAddAction(gg_trg_Archimagus_Staff, Trig_Archimagus_Staff_Actions);
}
nothing Trig_Isidors_Scepter_Add_Mana_Caster_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	SetUnitState(caster, UNIT_STATE_MANA, GetUnitState(caster, UNIT_STATE_MANA) + 175.);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_Isidors_Scepter_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	location loc = GetSpellTargetLoc();
	real x = GetLocationX(loc);
	real y = GetLocationY(loc);
	real heal = 200. + (GetHeroInt(caster, true) * 3.);
	real mana = 175.;
	group g = CreateGroup();
	unit Picked;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl", x, y));
	GroupEnumUnitsInRange(g, x, y, 350., null);
	while (true) {
		if (Picked == null) break;
		if (IsUnitAlly(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			SetUnitState(Picked, UNIT_STATE_LIFE, GetUnitState(Picked, UNIT_STATE_LIFE) + heal);
			if (Picked != caster) {
				SetUnitState(Picked, UNIT_STATE_MANA, GetUnitState(Picked, UNIT_STATE_MANA) + mana);
			}
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl", Picked, "origin"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIma\\AImaTarget.mdl", Picked, "origin"));
			DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", Picked, "origin"), 2.);
		}
		GroupRemoveUnit(g, Picked);
	}
	SaveUnitHandle(udg_hash, h, 1, caster);
	TimerStart(t, .0, false, Trig_Isidors_Scepter_Add_Mana_Caster_Actions);
	RemoveLocation(loc);
	GroupClear(g);
	DestroyGroup(g);
}
boolean Trig_Isidors_Scepter_Conditions() {
	return GetSpellAbilityId() == 'A0L0';
}
nothing InitTrig_Isidors_Scepter() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Isidors_Scepter, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Isidors_Scepter, Condition(Trig_Isidors_Scepter_Conditions));
	TriggerAddAction(gg_trg_Isidors_Scepter, Trig_Isidors_Scepter_Actions);
}
nothing Trig_Detached_Shield_Use_Remove_Agr_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	group g = LoadGroupHandle(udg_hash, h, 2);
	integer damage = LoadInteger(udg_hash, h, 4);
	integer armor = LoadInteger(udg_hash, h, 5);
	effect ef;
	unit Picked;
	SetUnitLifeAndManaRegeneration(caster, "life", -35);
	while (true) {
		if (Picked == null) break;
		SetAttackAbilityLevel(Picked, damage);
		SetArmorAbilityLevel(Picked, armor);
		DestroyEffect(ef);
		SaveEffectHandle(udg_hash, GetHandleId(Picked), 89, null);
		GroupRemoveUnit(g, Picked);
	}
	DestroyEffect(ef);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	DestroyGroup(g);
	GroupClear(g);
}
nothing Trig_Detached_Shield_Use_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	group g = CreateGroup();
	group g2 = CreateGroup();
	unit Picked;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	effect ef;
	integer damage = 20;
	integer armor = 8;
	SetUnitLifeAndManaRegeneration(caster, "life", 35);
	GroupEnumUnitsInRange(g, x, y, 450., null);
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\NightElf\\BattleRoar\\RoarCaster.mdl", x, y));
	while (true) {
		if (Picked == null) break;
		if (ef == null && GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && IsUnitEnemy(Picked, p) && GetUnitTypeId(Picked) != 'h00U') {
			GroupAddUnit(g2, Picked);
			IssueTargetOrderById(Picked, $D000F, caster);
			SetAttackAbilityLevel(Picked, -damage);
			SetArmorAbilityLevel(Picked, -armor);
			SaveEffectHandle(udg_hash, GetHandleId(Picked), 89, ef);
		}
		GroupRemoveUnit(g, Picked);
	}
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveGroupHandle(udg_hash, h, 2, g2);
	SaveEffectHandle(udg_hash, h, 3, ef);
	SaveInteger(udg_hash, h, 4, damage);
	SaveInteger(udg_hash, h, 5, armor);
	TimerStart(t, 7., false, Trig_Detached_Shield_Use_Remove_Agr_Actions);
	DestroyGroup(g);
	GroupClear(g);
}
boolean Trig_Detached_Shield_Use_Conditions() {
	return GetSpellAbilityId() == 'A0IV';
}
nothing InitTrig_Detached_Shield_Use() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Detached_Shield_Use, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Detached_Shield_Use, Condition(Trig_Detached_Shield_Use_Conditions));
	TriggerAddAction(gg_trg_Detached_Shield_Use, Trig_Detached_Shield_Use_Actions);
}
nothing Trig_Cuirass_of_Invulnerable_Use2_Remove_Agr_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	group g = LoadGroupHandle(udg_hash, h, 2);
	integer damage = LoadInteger(udg_hash, h, 4);
	integer armor = LoadInteger(udg_hash, h, 5);
	effect ef;
	unit Picked;
	SetUnitLifeAndManaRegeneration(caster, "life", -75);
	while (true) {
		if (Picked == null) break;
		SetAttackAbilityLevel(Picked, damage);
		SetArmorAbilityLevel(Picked, armor);
		DestroyEffect(ef);
		SaveEffectHandle(udg_hash, GetHandleId(Picked), 89, null);
		GroupRemoveUnit(g, Picked);
	}
	DestroyEffect(ef);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	DestroyGroup(g);
	GroupClear(g);
}
nothing Trig_Cuirass_of_Invulnerable_Use2_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	group g = CreateGroup();
	group g2 = CreateGroup();
	unit Picked;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	effect ef;
	integer damage = 30;
	integer armor = $D;
	SetUnitLifeAndManaRegeneration(caster, "life", 75);
	GroupEnumUnitsInRange(g, x, y, 500., null);
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\NightElf\\BattleRoar\\RoarCaster.mdl", x, y));
	while (true) {
		if (Picked == null) break;
		if (ef == null && GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && IsUnitEnemy(Picked, p) && GetUnitTypeId(Picked) != 'h00U') {
			GroupAddUnit(g2, Picked);
			IssueTargetOrderById(Picked, $D000F, caster);
			SetAttackAbilityLevel(Picked, -damage);
			SetArmorAbilityLevel(Picked, -armor);
			SaveEffectHandle(udg_hash, GetHandleId(Picked), 89, ef);
		}
		GroupRemoveUnit(g, Picked);
	}
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveGroupHandle(udg_hash, h, 2, g2);
	SaveEffectHandle(udg_hash, h, 3, ef);
	SaveInteger(udg_hash, h, 4, damage);
	SaveInteger(udg_hash, h, 5, armor);
	TimerStart(t, 8., false, Trig_Cuirass_of_Invulnerable_Use2_Remove_Agr_Actions);
	DestroyGroup(g);
	GroupClear(g);
}
boolean Trig_Cuirass_of_Invulnerable_Use2_Conditions() {
	return GetSpellAbilityId() == 'A0JT';
}
nothing InitTrig_Cuirass_of_Invulnerable_Use2() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Cuirass_of_Invulnerable_Use2, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Cuirass_of_Invulnerable_Use2, Condition(Trig_Cuirass_of_Invulnerable_Use2_Conditions));
	TriggerAddAction(gg_trg_Cuirass_of_Invulnerable_Use2, Trig_Cuirass_of_Invulnerable_Use2_Actions);
}
nothing Trig_Lost_Cuirass_of_Invulnerable_Actions() {
	unit hero = GetTriggerUnit();
	integer h = GetHandleId(hero);
	effect ef = LoadEffectHandle(udg_hash, h, 95);
	DestroyEffect(ef);
	SaveBoolean(udg_hash, h, 94, true);
	SaveEffectHandle(udg_hash, h, 95, null);
}
boolean Trig_Lost_Cuirass_of_Invulnerable_Conditions() {
	return GetItemTypeId(GetManipulatedItem()) == 'I048' && CountItemOfTypeOnUnit(GetTriggerUnit(), 'I048') == 1;
}
nothing InitTrig_Lost_Cuirass_of_Invulnerable() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Lost_Cuirass_of_Invulnerable, Player(index), EVENT_PLAYER_UNIT_DROP_ITEM, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Lost_Cuirass_of_Invulnerable, Condition(Trig_Lost_Cuirass_of_Invulnerable_Conditions));
	TriggerAddAction(gg_trg_Lost_Cuirass_of_Invulnerable, Trig_Lost_Cuirass_of_Invulnerable_Actions);
}
nothing Trig_Take_Cuirass_of_Invulnerable_Actions() {
	unit hero = GetTriggerUnit();
	integer h = GetHandleId(hero);
	effect ef;
	if (LoadReal(udg_hash, h, 96) < 1.) {
		SaveBoolean(udg_hash, h, 94, true);
		SaveEffectHandle(udg_hash, h, 95, ef);
	}
}
boolean Trig_Take_Cuirass_of_Invulnerable_Conditions() {
	return GetItemTypeId(GetManipulatedItem()) == 'I048' && CountItemOfTypeOnUnit(GetTriggerUnit(), 'I048') == 1;
}
nothing InitTrig_Take_Cuirass_of_Invulnerable() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Take_Cuirass_of_Invulnerable, Player(index), EVENT_PLAYER_UNIT_PICKUP_ITEM, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Take_Cuirass_of_Invulnerable, Condition(Trig_Take_Cuirass_of_Invulnerable_Conditions));
	TriggerAddAction(gg_trg_Take_Cuirass_of_Invulnerable, Trig_Take_Cuirass_of_Invulnerable_Actions);
}
nothing Trig_Fire_Staff_Periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 7);
	real damage = LoadReal(udg_hash, h, 8);
	integer wait = LoadInteger(udg_hash, h, 9);
	real angle = LoadReal(udg_hash, h, $A);
	group gdamage = LoadGroupHandle(udg_hash, h, $B);
	real dammiangle = LoadReal(udg_hash, h, $C);
	real anglestep = LoadReal(udg_hash, h, $D);
	player p = GetOwningPlayer(caster);
	group gdammi = CreateGroup();
	group g = CreateGroup();
	real xdammi;
	real ydammi;
	unit Picked;
	unit dammi;
	integer lopa = 1;
	effect ef;
	if (wait > 0) {
		SaveInteger(udg_hash, h, 9, wait);
		if (dammiangle < -45.) {
			SaveReal(udg_hash, h, $D, anglestep);
		}
		if (dammiangle > 45.) {
			SaveReal(udg_hash, h, $D, anglestep);
		}
		SaveReal(udg_hash, h, $C, dammiangle);
		SetUnitPosition(dammi, xdammi, ydammi);
		GroupEnumUnitsInRange(gdammi, xdammi, ydammi, 125., null);
		GroupAddGroup(gdammi, g);
		SetUnitPosition(dammi, xdammi, ydammi);
		GroupEnumUnitsInRange(gdammi, xdammi, ydammi, 125., null);
		GroupAddGroup(gdammi, g);
		SetUnitPosition(dammi, xdammi, ydammi);
		GroupEnumUnitsInRange(gdammi, xdammi, ydammi, 125., null);
		GroupAddGroup(gdammi, g);
		while (true) {
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitInGroup(Picked, gdamage) == false && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				UnitApplyTimedLife(dammi, 'BTLF', 1.);
				UnitAddAbility(dammi, 'A0JK');
				IssueTargetOrderById(dammi, $D02B6, Picked);
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIfb\\AIfbSpecialArt.mdl", Picked, "chest"));
				GroupAddUnit(gdamage, Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
		SaveGroupHandle(udg_hash, h, $B, gdamage);
	else
		while (true) {
			if (lopa > 3) break;
			KillUnit(dammi);
			DestroyEffect(ef);
		}
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
		GroupClear(gdamage);
		DestroyGroup(gdamage);
	}
	GroupClear(gdammi);
	DestroyGroup(gdammi);
	GroupClear(g);
	DestroyGroup(g);
}
nothing Trig_Fire_Staff_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	location loc;
	real xt;
	real yt;
	unit dammi;
	effect ef;
	real xdammi;
	real ydammi;
	integer lopa = 1;
	group gdamage = CreateGroup();
	real angle;
	real dammiangle = -90.;
	real damage = 170.;
	integer wait = 50;
	if (GetSpellTargetUnit() == null) {
		RemoveLocation(loc);
	else
	}
	while (true) {
		if (lopa > 3) break;
		UnitAddAbility(dammi, 'Amrf');
		UnitRemoveAbility(dammi, 'Amrf');
		SetUnitFlyHeight(dammi, 50., .0);
		SaveUnitHandle(udg_hash, h, lopa, dammi);
		SaveEffectHandle(udg_hash, h, lopa + 3, ef);
	}
	SaveUnitHandle(udg_hash, h, 7, caster);
	SaveReal(udg_hash, h, 8, damage);
	SaveInteger(udg_hash, h, 9, wait);
	SaveReal(udg_hash, h, $A, angle);
	SaveGroupHandle(udg_hash, h, $B, gdamage);
	SaveReal(udg_hash, h, $C, 45.);
	SaveReal(udg_hash, h, $D, 3.6);
	TimerStart(t, .03, true, Trig_Fire_Staff_Periodic_Actions);
}
boolean Trig_Fire_Staff_Conditions() {
	return GetSpellAbilityId() == 'A0JJ';
}
nothing InitTrig_Fire_Staff() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Fire_Staff, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Fire_Staff, Condition(Trig_Fire_Staff_Conditions));
	TriggerAddAction(gg_trg_Fire_Staff, Trig_Fire_Staff_Actions);
}
nothing Trig_Demon_Axe_Remove_Stregnth_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	UnitRemoveAbility(caster, 'A0J2');
	DestroyTimer(t);
	FlushChildHashtable(udg_hash, h);
}
nothing Trig_Demon_Axe_Actions() {
	unit caster = GetSpellAbilityUnit();
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	unit dammi = CreateUnit(GetOwningPlayer(caster), 'h00U', GetUnitX(caster), GetUnitY(caster), .0);
	UnitApplyTimedLife(dammi, 'BTLF', 1.);
	UnitAddAbility(dammi, 'A0IW');
	IssueTargetOrderById(dammi, $D00F1, caster);
	UnitAddAbility(caster, 'A0J2');
	SaveUnitHandle(udg_hash, h, 1, caster);
	TimerStart(t, 35., false, Trig_Demon_Axe_Remove_Stregnth_Actions);
}
boolean Trig_Demon_Axe_Conditions() {
	return GetSpellAbilityId() == 'A0J1';
}
nothing InitTrig_Demon_Axe() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Demon_Axe, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Demon_Axe, Condition(Trig_Demon_Axe_Conditions));
	TriggerAddAction(gg_trg_Demon_Axe, Trig_Demon_Axe_Actions);
}
nothing Trig_Demon_Axe_Kill_Unit_Actions() {
	unit killer = GetKillingUnit();
	SetUnitAbilityLevel(killer, 'A0J2', (GetUnitAbilityLevel(killer, 'A0J2') + 1));
}
boolean Trig_Demon_Axe_Kill_Unit_Conditions() {
	return GetUnitAbilityLevel(GetKillingUnit(), 'A0J2') > 0;
}
nothing InitTrig_Demon_Axe_Kill_Unit() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Demon_Axe_Kill_Unit, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Demon_Axe_Kill_Unit, Condition(Trig_Demon_Axe_Kill_Unit_Conditions));
	TriggerAddAction(gg_trg_Demon_Axe_Kill_Unit, Trig_Demon_Axe_Kill_Unit_Actions);
}
nothing Trig_Boots_Rescue_Remove_Effects_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	unit target = LoadUnitHandle(udg_hash, h, 2);
	SetUnitLifeAndManaRegeneration(caster, "life", -25);
	SetUnitLifeAndManaRegeneration(target, "life", -25);
	DestroyTimer(t);
	FlushChildHashtable(udg_hash, h);
}
nothing Trig_Boots_Rescue_Destroy_Lightning_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	lightning l = LoadLightningHandle(udg_hash, h, 1);
	DestroyLightning(l);
	DestroyTimer(t);
	FlushChildHashtable(udg_hash, h);
}
nothing Trig_Boots_Rescue_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	real xc = GetUnitX(caster);
	real yc = GetUnitY(caster);
	real xt = GetUnitX(target);
	real yt = GetUnitY(target);
	player p = GetOwningPlayer(caster);
	unit dammi = CreateUnit(p, 'h00U', xc, yc, .0);
	unit dammi2 = CreateUnit(p, 'h00U', xc, yc, .0);
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	lightning l = AddLightningEx("MBUR", true, xc, yc, 50., xt, yt, 50.);
	timer t2 = CreateTimer();
	integer h2 = GetHandleId(t2);
	SetUnitX(caster, xt);
	SetUnitY(caster, yt);
	SetUnitX(target, xc);
	SetUnitY(target, yc);
	SetUnitLifeAndManaRegeneration(caster, "life", 25);
	SetUnitLifeAndManaRegeneration(target, "life", 25);
	UnitApplyTimedLife(dammi, 'BTLF', 1.);
	UnitApplyTimedLife(dammi2, 'BTLF', 1.);
	UnitAddAbility(dammi, 'A0IY');
	UnitAddAbility(dammi2, 'A0IY');
	IssueTargetOrderById(dammi, $D008E, caster);
	IssueTargetOrderById(dammi2, $D008E, target);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveUnitHandle(udg_hash, h, 2, target);
	SaveLightningHandle(udg_hash, h2, 1, l);
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\ManaBurn\\ManaBurnTarget.mdl", caster, "origin"));
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\ManaBurn\\ManaBurnTarget.mdl", target, "origin"));
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageCaster.mdl", caster, "origin"));
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageCaster.mdl", target, "origin"));
	TimerStart(t, 6., false, Trig_Boots_Rescue_Remove_Effects_Actions);
	TimerStart(t2, .5, false, Trig_Boots_Rescue_Destroy_Lightning_Actions);
}
boolean Trig_Boots_Rescue_Conditions() {
	return GetSpellAbilityId() == 'A0JE';
}
nothing InitTrig_Boots_Rescue() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Boots_Rescue, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Boots_Rescue, Condition(Trig_Boots_Rescue_Conditions));
	TriggerAddAction(gg_trg_Boots_Rescue, Trig_Boots_Rescue_Actions);
}
nothing Trig_Astral_Staff_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	location loc = GetSpellTargetLoc();
	real x = GetLocationX(loc);
	real y = GetLocationY(loc);
	real radius = 300.;
	group g = CreateGroup();
	unit Picked;
	unit dammi;
	GroupEnumUnitsInRange(g, x, y, radius, null);
	while (true) {
		if (Picked == null) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, p) && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			UnitApplyTimedLife(dammi, 'BTLF', 2.);
			UnitAddAbility(dammi, 'A0IQ');
			IssueTargetOrderById(dammi, $D0206, Picked);
		}
		GroupRemoveUnit(g, Picked);
	}
	RemoveLocation(loc);
	DestroyGroup(g);
	GroupClear(g);
}
boolean Trig_Astral_Staff_Conditions() {
	return GetSpellAbilityId() == 'A0IP';
}
nothing InitTrig_Astral_Staff() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Astral_Staff, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Astral_Staff, Condition(Trig_Astral_Staff_Conditions));
	TriggerAddAction(gg_trg_Astral_Staff, Trig_Astral_Staff_Actions);
}
nothing Trig_Healer_Staff_Actions() {
	unit target = GetSpellTargetUnit();
	SetUnitState(target, UNIT_STATE_LIFE, GetUnitState(target, UNIT_STATE_LIFE) + 150. + (2. * GetHeroInt(GetSpellAbilityUnit(), true)));
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl", target, "origin"));
	DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", target, "origin"), 2.);
}
boolean Trig_Healer_Staff_Conditions() {
	return GetSpellAbilityId() == 'A0IM';
}
nothing InitTrig_Healer_Staff() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Healer_Staff, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Healer_Staff, Condition(Trig_Healer_Staff_Conditions));
	TriggerAddAction(gg_trg_Healer_Staff, Trig_Healer_Staff_Actions);
}
nothing Trig_Magic_Amulet_Remove_Shield_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	effect ef = LoadEffectHandle(udg_hash, h, 2);
	SaveReal(udg_hash, GetHandleId(caster), 86, .0);
	SaveEffectHandle(udg_hash, GetHandleId(caster), 87, null);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	DestroyEffect(ef);
}
nothing Trig_Magic_Amulet_Actions() {
	unit caster = GetSpellAbilityUnit();
	real shield = 200.;
	effect ef = AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaShield\\ManaShieldCaster.mdl", caster, "origin");
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	SaveReal(udg_hash, GetHandleId(caster), 86, shield);
	SaveEffectHandle(udg_hash, GetHandleId(caster), 87, ef);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveEffectHandle(udg_hash, h, 2, ef);
	TimerStart(t, 20., false, Trig_Magic_Amulet_Remove_Shield_Actions);
}
boolean Trig_Magic_Amulet_Conditions() {
	return GetSpellAbilityId() == 'A0IH';
}
nothing InitTrig_Magic_Amulet() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Magic_Amulet, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Magic_Amulet, Condition(Trig_Magic_Amulet_Conditions));
	TriggerAddAction(gg_trg_Magic_Amulet, Trig_Magic_Amulet_Actions);
}
nothing Trig_Blood_Dagger_Actions() {
	unit killer = GetKillingUnit();
	SetUnitState(killer, UNIT_STATE_LIFE, GetUnitState(killer, UNIT_STATE_LIFE) + (GetUnitState(GetDyingUnit(), UNIT_STATE_MAX_LIFE) * .1));
	DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPriest.mdl", killer, "chest"));
}
boolean Trig_Blood_Dagger_Conditions() {
	return GetUnitAbilityLevel(GetKillingUnit(), 'A0IG') >= 1;
}
nothing InitTrig_Blood_Dagger() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Blood_Dagger, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Blood_Dagger, Condition(Trig_Blood_Dagger_Conditions));
	TriggerAddAction(gg_trg_Blood_Dagger, Trig_Blood_Dagger_Actions);
}
nothing Trig_Agility_Blade_Remove_Agi_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	integer bonus = LoadInteger(udg_hash, h, 2);
	effect ef = LoadEffectHandle(udg_hash, h, 3);
	effect ef2 = LoadEffectHandle(udg_hash, h, 4);
	integer clearagi = GetHeroAgi(caster, false);
	SetHeroAgi(caster, clearagi - bonus, true);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	DestroyEffect(ef);
	DestroyEffect(ef2);
}
nothing Trig_Agility_Blade_Actions() {
	unit caster = GetSpellAbilityUnit();
	integer agi = GetHeroAgi(caster, true);
	integer clearagi = GetHeroAgi(caster, false);
	integer bonus = R2I(agi / 2);
	effect ef = AddSpecialEffectTarget("Abilities\\Spells\\Other\\AcidBomb\\BottleImpact.mdl", caster, "weapon");
	effect ef2 = AddSpecialEffectTarget("Abilities\\Spells\\Other\\Drain\\DrainCaster.mdl", caster, "head");
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	SetHeroAgi(caster, clearagi + bonus, true);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveInteger(udg_hash, h, 2, bonus);
	SaveEffectHandle(udg_hash, h, 3, ef);
	SaveEffectHandle(udg_hash, h, 4, ef2);
	TimerStart(t, 7., false, Trig_Agility_Blade_Remove_Agi_Actions);
}
boolean Trig_Agility_Blade_Conditions() {
	return GetSpellAbilityId() == 'A0IE';
}
nothing InitTrig_Agility_Blade() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Agility_Blade, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Agility_Blade, Condition(Trig_Agility_Blade_Conditions));
	TriggerAddAction(gg_trg_Agility_Blade, Trig_Agility_Blade_Actions);
}
boolean Trig_Bone_Staff_Set_Summon_Ability_Level_Func003C() {
	return (GetUnitTypeId(GetSummonedUnit()) == 'n01K') || (GetUnitTypeId(GetSummonedUnit()) == 'n01L');
}
boolean Trig_Bone_Staff_Set_Summon_Ability_Level_Conditions() {
	return (Trig_Bone_Staff_Set_Summon_Ability_Level_Func003C());
}
boolean Trig_Bone_Staff_Set_Summon_Ability_Level_Func001C() {
	return (GetUnitTypeId(GetSummonedUnit()) == 'n01K');
}
boolean Trig_Bone_Staff_Set_Summon_Ability_Level_Func002C() {
	return (GetUnitTypeId(GetSummonedUnit()) == 'n01L');
}
nothing Trig_Bone_Staff_Set_Summon_Ability_Level_Actions() {
	if ((Trig_Bone_Staff_Set_Summon_Ability_Level_Func001C())) {
		SetUnitAbilityLevelSwapped('A0B6', GetSummonedUnit(), 2);
		SetUnitAbilityLevelSwapped('A0AW', GetSummonedUnit(), 2);
		SetUnitAbilityLevelSwapped('A0AX', GetSummonedUnit(), 2);
	}
	if ((Trig_Bone_Staff_Set_Summon_Ability_Level_Func002C())) {
		SetUnitAbilityLevelSwapped('A0B6', GetSummonedUnit(), 3);
		SetUnitAbilityLevelSwapped('A0AW', GetSummonedUnit(), 3);
		SetUnitAbilityLevelSwapped('A0AX', GetSummonedUnit(), 3);
	}
}
nothing InitTrig_Bone_Staff_Set_Summon_Ability_Level() {
	TriggerRegisterAnyUnitEventBJ(gg_trg_Bone_Staff_Set_Summon_Ability_Level, EVENT_PLAYER_UNIT_SUMMON);
	TriggerAddCondition(gg_trg_Bone_Staff_Set_Summon_Ability_Level, Condition(Trig_Bone_Staff_Set_Summon_Ability_Level_Conditions));
	TriggerAddAction(gg_trg_Bone_Staff_Set_Summon_Ability_Level, Trig_Bone_Staff_Set_Summon_Ability_Level_Actions);
}
boolean Trig_Novice_Amulet_Conditions() {
	return (GetSpellAbilityId() == 'A0AI');
}
nothing Trig_Novice_Amulet_Actions() {
	SetUnitManaBJ(GetSpellAbilityUnit(), (GetUnitStateSwap(UNIT_STATE_MANA, GetSpellAbilityUnit()) + 75.));
}
nothing InitTrig_Novice_Amulet() {
	TriggerRegisterAnyUnitEventBJ(gg_trg_Novice_Amulet, EVENT_PLAYER_UNIT_SPELL_EFFECT);
	TriggerAddCondition(gg_trg_Novice_Amulet, Condition(Trig_Novice_Amulet_Conditions));
	TriggerAddAction(gg_trg_Novice_Amulet, Trig_Novice_Amulet_Actions);
}
nothing Trig_Glove_of_Andromat_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	real xt = GetUnitX(target);
	real yt = GetUnitY(target);
	player p = GetOwningPlayer(caster);
	integer pnumber = GetPlayerId(p) + 1;
	integer id = GetUnitTypeId(target);
	integer gold = R2I(GetRandomInt(LoadInteger(udg_hash, id, 70), LoadInteger(udg_hash, id, 71)) * 10.) + 60;
	integer xp = R2I(LoadInteger(udg_hash, id, 82) * 7.);
	real mana = 75. + (GetUnitState(target, UNIT_STATE_MAX_LIFE) / 2);
	SetUnitState(caster, UNIT_STATE_MANA, GetUnitState(caster, UNIT_STATE_MANA) + mana);
	AddHeroXP(caster, R2I(xp + .5), true);
	SetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) + gold);
	CreateTexttag(udg_ColorString[23] + "+" + I2S(gold) + "|r", .025, $FF, xt - 15., yt, .0, .0, .035, 3.5);
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Transmute\\PileofGold.mdl", xt, yt));
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Items\\AIlm\\AIlmTarget.mdl", xt, yt));
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\DarkRitual\\DarkRitualTarget.mdl", xt, yt));
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIma\\AImaTarget.mdl", caster, "origin"));
	if (pnumber <= 9) {
		MultiboardSetItemValueBJ(udg_MultiBoard, 3, udg_PlayerNumberInMB[pnumber], udg_ColorString[20] + I2S(udg_MultiBoard_Player_Kills_Count[pnumber]) + "|r");
	}
	SaveBoolean(udg_hash, GetHandleId(target), 85, true);
	SetUnitExploded(target, true);
	KillUnit(target);
	SetUnitVertexColor(target, 0, 0, 0, 0);
	PauseUnit(target, true);
}
boolean Trig_Glove_of_Andromat_Conditions() {
	return GetSpellAbilityId() == 'A0AN';
}
nothing InitTrig_Glove_of_Andromat() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Glove_of_Andromat, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Glove_of_Andromat, Condition(Trig_Glove_of_Andromat_Conditions));
	TriggerAddAction(gg_trg_Glove_of_Andromat, Trig_Glove_of_Andromat_Actions);
}
nothing Trig_Glove_of_Midas_Periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	unit target = LoadUnitHandle(udg_hash, h, 2);
	unit dammi = LoadUnitHandle(udg_hash, h, 3);
	integer wait2 = LoadInteger(udg_hash, h, 5);
	real height = LoadReal(udg_hash, h, 6);
	effect ef;
	integer gold;
	integer xp;
	player p;
	integer pnumber;
	integer id;
	real x = GetUnitX(dammi);
	real y = GetUnitY(dammi);
	real xt = GetUnitX(target);
	real yt = GetUnitY(target);
	real angle = bj_RADTODEG * Atan2(yt - y, xt - x);
	real dist;
	boolean destroy = false;
	if (GetUnitState(target, UNIT_STATE_LIFE) > .405) {
		SaveInteger(udg_hash, h, 5, wait2);
		if (wait2 == 0) {
			SetUnitFlyHeight(dammi, .0, height * 2.25);
		}
		SetUnitPosition(dammi, x, y);
		if (dist < 21.) {
			SetUnitPosition(dammi, xt, yt);
			AddHeroXP(caster, R2I(xp + .5), true);
			SetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) + gold);
			CreateTexttag(udg_ColorString[23] + "+" + I2S(gold) + "|r", .025, $FF, xt - 15., y, .0, .0, .035, 3.5);
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Transmute\\PileofGold.mdl", xt, yt));
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Items\\AIlm\\AIlmTarget.mdl", xt, yt));
			if (pnumber <= 9) {
				MultiboardSetItemValueBJ(udg_MultiBoard, 3, udg_PlayerNumberInMB[pnumber], udg_ColorString[20] + I2S(udg_MultiBoard_Player_Kills_Count[pnumber]) + "|r");
			}
			SaveBoolean(udg_hash, GetHandleId(target), 85, true);
			SetUnitExploded(target, true);
			KillUnit(target);
			SetUnitVertexColor(target, 0, 0, 0, 0);
			PauseUnit(target, true);
		}
	else
	}
	if (destroy) {
		KillUnit(dammi);
		DestroyEffect(ef);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
}
nothing Trig_Glove_of_Midas_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	real xt = GetUnitX(target);
	real yt = GetUnitY(target);
	real angle = bj_RADTODEG * Atan2(yt - y, xt - x);
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	unit dammi;
	effect ef;
	real dist = SquareRoot((xt - x) * (xt - x) + (yt - y) * (yt - y));
	real height = dist / 3;
	integer wait2 = R2I(dist / 40);
	UnitAddAbility(dammi, 'Amrf');
	UnitRemoveAbility(dammi, 'Amrf');
	SetUnitFlyHeight(dammi, .0, .0);
	SetUnitFlyHeight(dammi, height, height * 2.25);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveUnitHandle(udg_hash, h, 2, target);
	SaveUnitHandle(udg_hash, h, 3, dammi);
	SaveEffectHandle(udg_hash, h, 4, ef);
	SaveInteger(udg_hash, h, 5, wait2);
	SaveReal(udg_hash, h, 6, height);
	TimerStart(t, .03, true, Trig_Glove_of_Midas_Periodic_Actions);
}
boolean Trig_Glove_of_Midas_Conditions() {
	return GetSpellAbilityId() == 'A0A2';
}
nothing InitTrig_Glove_of_Midas() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Glove_of_Midas, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Glove_of_Midas, Condition(Trig_Glove_of_Midas_Conditions));
	TriggerAddAction(gg_trg_Glove_of_Midas, Trig_Glove_of_Midas_Actions);
}
boolean Trig_Heroes_more_attacked_priority_when_guards_Group_Filter() {
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) >= .45) && IsUnitInvulnerable(GetFilterUnit()) == false && (GetPlayerId(GetOwningPlayer(GetFilterUnit())) <= 8 && (IsPlayerEnemy(GetOwningPlayer(GetAttacker()), GetOwningPlayer(GetFilterUnit())))));
}
nothing Trig_Heroes_more_attacked_priority_when_guards_Actions() {
	group g = CreateGroup();
	unit attacked = GetTriggerUnit();
	unit attacker = GetAttacker();
	unit ally;
	GroupEnumUnitsInRange(g, GetUnitX(attacked), GetUnitY(attacked), 500., Filter(Trig_Heroes_more_attacked_priority_when_guards_Group_Filter));
	if (CountUnitsInGroup(g) > 1) {
		FilterMostNearUnit(g, attacked);
	}
	if (ally != null) {
		IssueTargetOrderById(attacker, $D000F, ally);
	}
}
boolean Trig_Heroes_more_attacked_priority_when_guards_Conditions() {
	return ((GetUnitState(GetTriggerUnit(), UNIT_STATE_LIFE) >= .405) && (IsUnitIllusion(GetTriggerUnit()) == false) && (GetPlayerId(GetOwningPlayer(GetAttacker())) >= 9)) && (GetUnitTypeId(GetTriggerUnit()) == 'e002' || GetUnitTypeId(GetTriggerUnit()) == 'h01K' || GetUnitTypeId(GetTriggerUnit()) == 'n00Y' || GetUnitTypeId(GetTriggerUnit()) == 'o003');
}
nothing InitTrig_Heroes_more_attacked_priority_when_guards() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Heroes_more_attacked_priority_when_guards, Player(index), EVENT_PLAYER_UNIT_ATTACKED, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Heroes_more_attacked_priority_when_guards, Condition(Trig_Heroes_more_attacked_priority_when_guards_Conditions));
	TriggerAddAction(gg_trg_Heroes_more_attacked_priority_when_guards, Trig_Heroes_more_attacked_priority_when_guards_Actions);
}
nothing Trig_Player_Fast_Purchase_System_Actions() {
	unit caster = GetTriggerUnit();
	integer pid = GetPlayerId(GetOwningPlayer(caster)) + 1;
	if ((GetIssuedOrderId() == $D0057)) {
	}
	if ((GetIssuedOrderId() == $D0058)) {
	}
}
boolean Trig_Player_Fast_Purchase_System_Conditions() {
	return GetUnitAbilityLevel(GetTriggerUnit(), 'A0MG') > 0;
}
nothing InitTrig_Player_Fast_Purchase_System() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Player_Fast_Purchase_System, Player(index), EVENT_PLAYER_UNIT_ISSUED_ORDER, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Player_Fast_Purchase_System, Condition(Trig_Player_Fast_Purchase_System_Conditions));
	TriggerAddAction(gg_trg_Player_Fast_Purchase_System, Trig_Player_Fast_Purchase_System_Actions);
}
nothing Trig_Show_hint_abount_hints_Actions() {
	DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "Советуем просмотреть все игровые команды в меню Инфо (|Cfffed312F9|r)");
}
nothing InitTrig_Show_hint_abount_hints() {
	TriggerRegisterTimerEventSingle(gg_trg_Show_hint_abount_hints, 120.);
	TriggerRegisterTimerEventSingle(gg_trg_Show_hint_abount_hints, 600.);
	TriggerAddAction(gg_trg_Show_hint_abount_hints, Trig_Show_hint_abount_hints_Actions);
}
nothing Trig_Show_Hint_Abount_Items_Actions() {
	DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "|cff32cd32Подсказка:|r");
	DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "По умолчанию, если вы покупаете рецепт на предмет, то при достаточном количестве золота, вы получите его сразу. В сумму требуемого золота входят ваши предметы, необходимые для сборки!!!");
}
nothing InitTrig_Show_Hint_Abount_Items() {
	TriggerRegisterTimerEventPeriodic(gg_trg_Show_Hint_Abount_Items, 600.);
	TriggerAddAction(gg_trg_Show_Hint_Abount_Items, Trig_Show_Hint_Abount_Items_Actions);
}
nothing Trig_Hint_About_Random_Actions() {
	DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "Вы можете выбрать случайного героя, написав в чат |cff99ccff-r/-random/-р/-рандом|r, и получить дополнительно |cFFFFFF00+250|r золота.");
}
nothing InitTrig_Hint_About_Random() {
	TriggerRegisterTimerEventSingle(gg_trg_Hint_About_Random, 13.);
	TriggerAddAction(gg_trg_Hint_About_Random, Trig_Hint_About_Random_Actions);
}
nothing Trig_Show_hint_abount_reference_panel_Actions() {
	DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "Вы можете воспользоваться дополнительной информацией в Панели Справки (|Cfffed312F8|r)");
}
nothing InitTrig_Show_hint_abount_reference_panel() {
	TriggerRegisterTimerEventSingle(gg_trg_Show_hint_abount_reference_panel, 200.);
	TriggerRegisterTimerEventSingle(gg_trg_Show_hint_abount_reference_panel, 1200.);
	TriggerAddAction(gg_trg_Show_hint_abount_reference_panel, Trig_Show_hint_abount_reference_panel_Actions);
}
nothing Trig_Show_Ability_Learn_Actions() {
	unit hero = GetLearningUnit();
	player p = GetOwningPlayer(hero);
	integer id = GetLearnedSkill();
	if (IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS) && udg_System_ShowAbil_And_Items_Hint[GetPlayerId(GetLocalPlayer()) + 1]) {
		DisplayTextToPlayer(GetLocalPlayer(), .0, .0, udg_ColorString[GetPlayerId(p) + 1] + GetPlayerName(p) + "|r изучил способность |cff99ccff" + GetObjectName(id) + "|r ( |cFF969696" + I2S(GetUnitAbilityLevel(hero, id) - 1) + "|r»»|cff99ccff" + I2S(GetUnitAbilityLevel(hero, id)) + "|r )");
	}
}
boolean Trig_Show_Ability_Learn_Conditions() {
	return ((IsUnitType(GetLearningUnit(), UNIT_TYPE_HERO)) && (GetPlayerId(GetOwningPlayer(GetLearningUnit())) <= 8)) != null;
}
nothing InitTrig_Show_Ability_Learn() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Show_Ability_Learn, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Show_Ability_Learn, Condition(Trig_Show_Ability_Learn_Conditions));
	TriggerAddAction(gg_trg_Show_Ability_Learn, Trig_Show_Ability_Learn_Actions);
}
nothing Trig_System_Personal_Items_Buy_Item_Actions() {
	item it = GetSoldItem();
	string name = GetItemName(it);
	player p;
	if (GetItemType(GetSoldItem()) == ITEM_TYPE_UNKNOWN) {
		SetItemUserData(it, GetPlayerId(GetOwningPlayer(GetBuyingUnit())) + 1);
		if (IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS) && udg_System_ShowAbil_And_Items_Hint[GetPlayerId(GetLocalPlayer()) + 1] && GetItemType(GetSoldItem()) == ITEM_TYPE_PERMANENT) {
			DisplayTextToPlayer(GetLocalPlayer(), .0, .0, udg_ColorString[GetPlayerId(p) + 1] + GetPlayerName(p) + "|r приобрел предмет |cff99ccff" + name + "|r");
		}
		if (IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS) && GetLocalPlayer() == p && udg_Count_Item_Tips_Message[GetPlayerId(p) + 1] <= 2) {
			DisplayTextToPlayer(GetLocalPlayer(), .0, .0, "|cff99ccffВНИМАНИЕ|r: ЛЮБОЙ предмет (даже сборный) вы можете купить |cFFFF0000Одним Нажатием|r (при достаточном количестве золота и места).");
		}
	}
}
nothing InitTrig_System_Personal_Items_Buy_Item() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_System_Personal_Items_Buy_Item, Player(index), EVENT_PLAYER_UNIT_SELL_ITEM, null);
		if (index == 16) break;
	}
	TriggerAddAction(gg_trg_System_Personal_Items_Buy_Item, Trig_System_Personal_Items_Buy_Item_Actions);
}
nothing Trig_System_Personal_Items_Pick_Up_Item_Actions() {
	item it = GetManipulatedItem();
	integer id = GetItemTypeId(it);
	integer cv = GetItemUserData(it);
	real x = GetUnitX(GetManipulatingUnit());
	real y = GetUnitY(GetManipulatingUnit());
	if (GetItemType(it) != ITEM_TYPE_CHARGED && GetItemType(it) != ITEM_TYPE_POWERUP) {
		if ((cv == 0) || (cv == (GetPlayerId(GetOwningPlayer(GetManipulatingUnit())) + 1))) {
		else
			SetItemPosition(it, x, y);
			SimError(GetOwningPlayer(GetManipulatingUnit()), "Вы не можете подбирать чужие предметы");
		}
	}
}
nothing InitTrig_System_Personal_Items_Pick_Up_Item() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_System_Personal_Items_Pick_Up_Item, Player(index), EVENT_PLAYER_UNIT_PICKUP_ITEM, null);
		if (index == 16) break;
	}
	TriggerAddAction(gg_trg_System_Personal_Items_Pick_Up_Item, Trig_System_Personal_Items_Pick_Up_Item_Actions);
}
boolean Trig_no_attack_Conditions() {
	return (IsUnitAlly(GetTriggerUnit(), GetOwningPlayer(GetAttacker())));
}
nothing Trig_no_attack_Actions() {
	IssueImmediateOrderById(GetAttacker(), $D0004);
}
nothing InitTrig_no_attack() {
	TriggerRegisterAnyUnitEventBJ(gg_trg_no_attack, EVENT_PLAYER_UNIT_ATTACKED);
	TriggerAddCondition(gg_trg_no_attack, Condition(Trig_no_attack_Conditions));
	TriggerAddAction(gg_trg_no_attack, Trig_no_attack_Actions);
}
nothing Trig_Select_Refrence_Panel_Actions() {
	if ((GetLocalPlayer() == GetTriggerPlayer())) {
		ClearSelection();
	}
}
boolean Trig_Select_Refrence_Panel_Conditions() {
	return GetUnitTypeId(GetTriggerUnit()) == 'h00C' && GetTriggerPlayer() != GetOwningPlayer(GetTriggerUnit());
}
nothing InitTrig_Select_Refrence_Panel() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Select_Refrence_Panel, Player(index), EVENT_PLAYER_UNIT_SELECTED, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Select_Refrence_Panel, Condition(Trig_Select_Refrence_Panel_Conditions));
	TriggerAddAction(gg_trg_Select_Refrence_Panel, Trig_Select_Refrence_Panel_Actions);
}
nothing Trig_ShopAnimation_Actions() {
	unit shop = GetTriggerUnit();
	integer id = GetUnitTypeId(shop);
	player p = GetTriggerPlayer();
	string s;
	boolean select = false;
	if (((id == 'h00D') || (id == 'h000') || (id == 'h002')) && GetLocalPlayer() == p) {
		SetUnitAnimation(shop, "Stand Work");
	}
	if ((id == 'h001') && GetLocalPlayer() == p) {
		SetUnitAnimation(shop, "Stand Victory");
	}
	if ((id == 'h00S') && GetLocalPlayer() == p) {
		SetUnitAnimation(shop, "Stand Work");
	}
	if ((id == 'h003')) {
		if (GetLocalPlayer() == p) {
		}
	}
	if ((id == 'h00Y')) {
		if (GetLocalPlayer() == p) {
		}
	}
}
boolean Trig_ShopAnimation_Conditions() {
	return ((IsUnitType(GetTriggerUnit(), UNIT_TYPE_STRUCTURE)) && (udg_ShopSelectedForPlayer[GetPlayerId(GetTriggerPlayer())] != GetTriggerUnit())) != null;
}
nothing InitTrig_ShopAnimation() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_ShopAnimation, Player(index), EVENT_PLAYER_UNIT_SELECTED, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_ShopAnimation, Condition(Trig_ShopAnimation_Conditions));
	TriggerAddAction(gg_trg_ShopAnimation, Trig_ShopAnimation_Actions);
}
nothing Trig_ShopStopAnimation_Actions() {
	unit shop = GetTriggerUnit();
	integer id = GetUnitTypeId(shop);
	player p = GetTriggerPlayer();
	if (((id == 'h00D') || (id == 'h000') || (id == 'h002') || (id == 'h00S') || (id == 'h001')) && GetLocalPlayer() == p) {
		SetUnitAnimation(shop, "Stand");
	}
	if ((id == 'h003') || (id == 'h00Y')) {
		DestroyEffect(udg_ShopEffectSelectedForPlayer[GetPlayerId(p)]);
	}
}
boolean Trig_ShopStopAnimation_Conditions() {
	return (IsUnitType(GetTriggerUnit(), UNIT_TYPE_STRUCTURE)) != null;
}
nothing InitTrig_ShopStopAnimation() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_ShopStopAnimation, Player(index), EVENT_PLAYER_UNIT_DESELECTED, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_ShopStopAnimation, Condition(Trig_ShopStopAnimation_Conditions));
	TriggerAddAction(gg_trg_ShopStopAnimation, Trig_ShopStopAnimation_Actions);
}
nothing Trig_RedMarkToUnit_Periodic_Move_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit u = LoadUnitHandle(udg_hash, h, 1);
	unit mark = LoadUnitHandle(udg_hash, h, 2);
	if (GetUnitState(u, UNIT_STATE_LIFE) > .405) {
		SetUnitX(mark, GetUnitX(u));
		SetUnitY(mark, GetUnitY(u));
	else
		RemoveUnit(mark);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
}
nothing Trig_RedMarkToUnit_Actions() {
	unit u = GetEnteringUnit();
	integer id = GetUnitTypeId(u);
	unit mark;
	timer t;
	integer h;
	if (IsUnitIllusion(u) == false && ((id == 'n00K') || (id == 'n00O') || (id == 'u008') || (id == 'n00V') || (id == 'u00C') || (id == 'n015') || (id == 'n019') || (id == 'n01C') || (id == 'n009') || (id == 'n00E') || (id == 'N000') || (id == 'N00J'))) {
		SetUnitPathing(mark, false);
		SaveUnitHandle(udg_hash, h, 1, u);
		SaveUnitHandle(udg_hash, h, 2, mark);
		TimerStart(t, .1, true, Trig_RedMarkToUnit_Periodic_Move_Actions);
	}
}
nothing InitTrig_RedMarkToUnit() {
	region rectRegion = CreateRegion();
	RegionAddRect(rectRegion, bj_mapInitialPlayableArea);
	TriggerRegisterEnterRegion(gg_trg_RedMarkToUnit, rectRegion, null);
	TriggerAddAction(gg_trg_RedMarkToUnit, Trig_RedMarkToUnit_Actions);
}
nothing Trig_UnSelectedDummyRedMark_Actions() {
	if ((GetLocalPlayer() == GetTriggerPlayer())) {
		ClearSelection();
	}
}
boolean Trig_UnSelectedDummyRedMark_Conditions() {
	return GetUnitTypeId(GetTriggerUnit()) == 'n01M';
}
nothing InitTrig_UnSelectedDummyRedMark() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_UnSelectedDummyRedMark, Player(index), EVENT_PLAYER_UNIT_SELECTED, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_UnSelectedDummyRedMark, Condition(Trig_UnSelectedDummyRedMark_Conditions));
	TriggerAddAction(gg_trg_UnSelectedDummyRedMark, Trig_UnSelectedDummyRedMark_Actions);
}
nothing Trig_SpecEffect_on_Casters_Animation_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster1 = LoadUnitHandle(udg_hash, h, 1);
	unit caster2 = LoadUnitHandle(udg_hash, h, 2);
	if (GetUnitState(caster1, UNIT_STATE_LIFE) > .405 || GetUnitState(caster2, UNIT_STATE_LIFE) > .405) {
		if (GetUnitState(caster1, UNIT_STATE_LIFE) > .405) {
			SetUnitAnimation(caster1, "spell");
		else
			RemoveSavedHandle(udg_hash, h, 1);
		}
		if (GetUnitState(caster2, UNIT_STATE_LIFE) > .405) {
			SetUnitAnimation(caster2, "spell");
		else
			RemoveSavedHandle(udg_hash, h, 2);
		}
	else
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
}
nothing Trig_SpecEffect_on_Casters_Actions() {
	array<unit> u;
	array<timer> t;
	array<integer> h;
	array<real> time;
	SaveUnitHandle(udg_hash, h[1], 1, u[1]);
	SaveUnitHandle(udg_hash, h[1], 2, u[5]);
	SaveReal(udg_hash, h[1], 3, time[1]);
	SaveUnitHandle(udg_hash, h[2], 1, u[2]);
	SaveUnitHandle(udg_hash, h[2], 2, u[6]);
	SaveReal(udg_hash, h[2], 3, time[2]);
	SaveUnitHandle(udg_hash, h[3], 1, u[3]);
	SaveUnitHandle(udg_hash, h[3], 2, u[7]);
	SaveReal(udg_hash, h[3], 3, time[3]);
	SaveUnitHandle(udg_hash, h[4], 1, u[4]);
	SaveUnitHandle(udg_hash, h[4], 2, u[8]);
	SaveReal(udg_hash, h[4], 3, time[4]);
	TimerStart(t[1], time[1], true, Trig_SpecEffect_on_Casters_Animation_Actions);
	TimerStart(t[2], time[2], true, Trig_SpecEffect_on_Casters_Animation_Actions);
	TimerStart(t[3], time[3], true, Trig_SpecEffect_on_Casters_Animation_Actions);
	TimerStart(t[4], time[4], true, Trig_SpecEffect_on_Casters_Animation_Actions);
}
nothing InitTrig_SpecEffect_on_Casters() {
	TriggerRegisterTimerEvent(gg_trg_SpecEffect_on_Casters, .0, false);
	TriggerAddAction(gg_trg_SpecEffect_on_Casters, Trig_SpecEffect_on_Casters_Actions);
}
nothing Trig_PortalSpecEffects_Peridoic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit dummi = LoadUnitHandle(udg_hash, h, 1);
	unit missile = LoadUnitHandle(udg_hash, h, 2);
	real angle = LoadReal(udg_hash, h, 3);
	integer wait = LoadInteger(udg_hash, h, 4);
	real x = GetRectCenterX(gg_rct_cast_magi) + 310. * Cos(angle * bj_DEGTORAD);
	real y = GetRectCenterY(gg_rct_cast_magi) + 310. * Sin(angle * bj_DEGTORAD);
	if (wait < 50) {
		SaveInteger(udg_hash, h, 4, wait);
	else
		SaveInteger(udg_hash, h, 4, wait);
		DestroyEffect(AddSpecialEffectTarget("s_ShadowEruption_Rain.mdl", dummi, "origin"));
	}
	SetUnitPosition(missile, x, y);
	SetUnitFacing(missile, angle + 90.);
	SaveReal(udg_hash, h, 3, angle);
}
nothing Trig_PortalSpecEffects_Actions() {
	unit dummi = CreateUnit(Player($F), 'h00U', GetRectCenterX(gg_rct_cast_magi) + 20., GetRectCenterY(gg_rct_cast_magi) + 30., .0);
	unit missile = CreateUnit(Player($F), 'h00U', GetRectCenterX(gg_rct_cast_magi), GetRectCenterY(gg_rct_cast_magi), .0);
	effect ef = AddSpecialEffectTarget("Abilities\\Spells\\Undead\\OrbOfDeath\\OrbOfDeathMissile.mdl", missile, "origin");
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	SetUnitScale(dummi, 2., 2., 2.);
	UnitAddAbility(missile, 'Amrf');
	UnitRemoveAbility(missile, 'Amrf');
	SetUnitFlyHeight(missile, 150., .0);
	SaveUnitHandle(udg_hash, h, 1, dummi);
	SaveUnitHandle(udg_hash, h, 2, missile);
	SaveReal(udg_hash, h, 3, .0);
	SaveInteger(udg_hash, h, 4, 0);
	TimerStart(t, .04, true, Trig_PortalSpecEffects_Peridoic_Actions);
}
nothing InitTrig_PortalSpecEffects() {
	TriggerRegisterTimerEvent(gg_trg_PortalSpecEffects, 2., false);
	TriggerAddAction(gg_trg_PortalSpecEffects, Trig_PortalSpecEffects_Actions);
}
nothing Trig_Gates_Start_Animation_Actions() {
	SetDoodadAnimationRect(bj_mapInitialPlayableArea, 'D01A', "stand alternate", false);
}
nothing InitTrig_Gates_Start_Animation() {
	TriggerRegisterTimerEventSingle(gg_trg_Gates_Start_Animation, 2.);
	TriggerAddAction(gg_trg_Gates_Start_Animation, Trig_Gates_Start_Animation_Actions);
}
nothing Trig_Unstuck_15sec_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit hero = LoadUnitHandle(udg_hash, h, 1);
	real x = GetRectCenterX(gg_rct_Respawn_Heroes);
	real y = GetRectCenterY(gg_rct_Respawn_Heroes);
	camerasetup theCam = CreateCameraSetup();
	PauseUnit(hero, false);
	SetUnitPosition(hero, x, y);
	if (GetLocalPlayer() == GetOwningPlayer(hero)) {
		DisplayTextToPlayer(GetOwningPlayer(hero), 0, 0, "|cff99ccffВНИМАНИЕ!!!|r|nВаш герой отморозился и был перемещен в центр базы.");
		CameraSetupSetField(theCam, CAMERA_FIELD_TARGET_DISTANCE, GetCameraField(CAMERA_FIELD_TARGET_DISTANCE), 0);
		CameraSetupSetField(theCam, CAMERA_FIELD_FARZ, GetCameraField(CAMERA_FIELD_FARZ), 0);
		CameraSetupSetField(theCam, CAMERA_FIELD_ZOFFSET, GetCameraField(CAMERA_FIELD_ZOFFSET), 0);
		CameraSetupSetField(theCam, CAMERA_FIELD_ANGLE_OF_ATTACK, bj_RADTODEG * GetCameraField(CAMERA_FIELD_ANGLE_OF_ATTACK), 0);
		CameraSetupSetField(theCam, CAMERA_FIELD_FIELD_OF_VIEW, bj_RADTODEG * GetCameraField(CAMERA_FIELD_FIELD_OF_VIEW), 0);
		CameraSetupSetField(theCam, CAMERA_FIELD_ROLL, bj_RADTODEG * GetCameraField(CAMERA_FIELD_ROLL), 0);
		CameraSetupSetField(theCam, CAMERA_FIELD_ROTATION, bj_RADTODEG * GetCameraField(CAMERA_FIELD_ROTATION), 0);
		CameraSetupSetDestPosition(theCam, x, y, 0);
		CameraSetupApplyForceDuration(theCam, true, 0);
		ClearSelection();
		SelectUnit(hero, true);
	}
	DestroyTimer(t);
	FlushChildHashtable(udg_hash, h);
}
nothing Trig_PlayerEnterGameCommand_Actions() {
	player p = GetTriggerPlayer();
	string s = GetEventPlayerChatString();
	unit hero;
	timer t;
	boolean end;
	integer random;
	if (((s == "-r") || (s == "-random") || (s == "-р") || (s == "-рандом")) && udg_Is_Player_Got_Randomed[GetPlayerId(p) + 1] == false) {
		TriggerExecute(gg_trg_Pick_Hero_Upgrade);
	}
	if (((s == "-ms") || (s == "-ск") || (s == "-movespeed") || (s == "-скорость")) && udg_herounit[GetPlayerId(p) + 1] != null) {
		DisplayTimedTextToPlayer(p, .0, .0, 5., GetUnitName(udg_herounit[GetPlayerId(p) + 1]) + " перемещается со скоростью = |cff99ccff" + I2S(R2I(GetUnitMoveSpeed(udg_herounit[GetPlayerId(p) + 1]))) + "|r");
	}
	if ((s == "-c") || (s == "-о") || (s == "-clear") || (s == "-очистить")) {
		if ((GetLocalPlayer() == p)) {
			ClearTextMessages();
		}
	}
	if ((s == "-us") || (s == "-unstuck")) {
		if ((GetLocalPlayer() == p)) {
			DisplayTextToPlayer(p, .0, .0, "|cff99ccffВНИМАНИЕ!!!|r");
			DisplayTextToPlayer(p, .0, .0, "Ваш герой заморожен, через 15 секунд он будет перемещен в центр базы.");
		}
		PauseUnit(hero, true);
		SaveUnitHandle(udg_hash, GetHandleId(t), 1, hero);
		TimerStart(t, 15., false, Trig_Unstuck_15sec_Actions);
	}
	if ((s == "-shh") || (s == "-show hero hints")) {
		if (udg_System_ShowAbil_And_Items_Hint[GetPlayerId(p) + 1]) {
			if (GetLocalPlayer() == p) {
				DisplayTextToPlayer(GetLocalPlayer(), .0, .0, "Подсказки о покупке предметов и изучении способностей отключены.");
			}
		}
		if (udg_System_ShowAbil_And_Items_Hint[GetPlayerId(p) + 1] == false && end == false) {
			if (GetLocalPlayer() == p) {
				DisplayTextToPlayer(GetLocalPlayer(), .0, .0, "Подсказки о покупке предметов и изучении способностей включены.");
			}
		}
	}
	if ((s == "-fast start") || (s == "-fs") || (s == "+")) {
		if ((udg_Is_Player_Fast_Wave_Start[GetPlayerId(p) + 1] == false) && (udg_Is_Fast_Wave_Start_On_Off)) {
			DisplayTextToForce(bj_FORCE_ALL_PLAYERS, (udg_ColorString[GetPlayerId(p) + 1] + (GetPlayerName(p) + ("|r |cFF969696хочет немедленно начать волну!|r (|Cfffed312" + (I2S(udg_Count_Players_Fast_Wave_Start) + ("|r|cFF969696/|r|Cfffed312" + (I2S(CountPlayersInForceBJ(udg_IGRAET)) + "|r )")))))));
			if (udg_Count_Players_Fast_Wave_Start >= CountPlayersInForceBJ(udg_IGRAET)) {
				StartTimerBJ(udg_Timer_Nomera_Volni, false, 1.);
			}
		}
	}
}
nothing InitTrig_PlayerEnterGameCommand() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerChatEvent(gg_trg_PlayerEnterGameCommand, Player(index), "-", false);
		TriggerRegisterPlayerChatEvent(gg_trg_PlayerEnterGameCommand, Player(index), "+", true);
		if (index == 16) break;
	}
	TriggerAddAction(gg_trg_PlayerEnterGameCommand, Trig_PlayerEnterGameCommand_Actions);
}
nothing Trig_Unstuck_Ability_15sec_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit hero = LoadUnitHandle(udg_hash, h, 1);
	real x = GetRectCenterX(gg_rct_Respawn_Heroes);
	real y = GetRectCenterY(gg_rct_Respawn_Heroes);
	camerasetup theCam = CreateCameraSetup();
	PauseUnit(hero, false);
	SetUnitPosition(hero, x, y);
	if (GetLocalPlayer() == GetOwningPlayer(hero)) {
		DisplayTextToPlayer(GetOwningPlayer(hero), 0, 0, "|cff99ccffВНИМАНИЕ!!!|r|nВаш герой отморозился и был перемещен в центр базы.");
		CameraSetupSetField(theCam, CAMERA_FIELD_TARGET_DISTANCE, GetCameraField(CAMERA_FIELD_TARGET_DISTANCE), 0);
		CameraSetupSetField(theCam, CAMERA_FIELD_FARZ, GetCameraField(CAMERA_FIELD_FARZ), 0);
		CameraSetupSetField(theCam, CAMERA_FIELD_ZOFFSET, GetCameraField(CAMERA_FIELD_ZOFFSET), 0);
		CameraSetupSetField(theCam, CAMERA_FIELD_ANGLE_OF_ATTACK, bj_RADTODEG * GetCameraField(CAMERA_FIELD_ANGLE_OF_ATTACK), 0);
		CameraSetupSetField(theCam, CAMERA_FIELD_FIELD_OF_VIEW, bj_RADTODEG * GetCameraField(CAMERA_FIELD_FIELD_OF_VIEW), 0);
		CameraSetupSetField(theCam, CAMERA_FIELD_ROLL, bj_RADTODEG * GetCameraField(CAMERA_FIELD_ROLL), 0);
		CameraSetupSetField(theCam, CAMERA_FIELD_ROTATION, bj_RADTODEG * GetCameraField(CAMERA_FIELD_ROTATION), 0);
		CameraSetupSetDestPosition(theCam, x, y, 0);
		CameraSetupApplyForceDuration(theCam, true, 0);
		ClearSelection();
		SelectUnit(hero, true);
	}
	DestroyTimer(t);
	FlushChildHashtable(udg_hash, h);
}
nothing Trig_PlayerUseSpellGameCommand_Actions() {
	player p = GetOwningPlayer(GetSpellAbilityUnit());
	integer id = GetSpellAbilityId();
	unit hero;
	timer t;
	boolean end;
	if ((id == 'A0MD') && udg_herounit[GetPlayerId(p) + 1] != null) {
		DisplayTimedTextToPlayer(p, .0, .0, 5., GetUnitName(udg_herounit[GetPlayerId(p) + 1]) + " перемещается со скоростью = |cff99ccff" + I2S(R2I(GetUnitMoveSpeed(udg_herounit[GetPlayerId(p) + 1]))) + "|r");
	}
	if ((id == 'A0MB')) {
		if ((GetLocalPlayer() == p)) {
			ClearTextMessages();
		}
	}
	if ((id == 'A0ME')) {
		if ((GetLocalPlayer() == p)) {
			DisplayTextToPlayer(p, .0, .0, "|cff99ccffВНИМАНИЕ!!!|r");
			DisplayTextToPlayer(p, .0, .0, "Ваш герой заморожен, через 15 секунд он будет перемещен в центр базы.");
		}
		PauseUnit(hero, true);
		SaveUnitHandle(udg_hash, GetHandleId(t), 1, hero);
		TimerStart(t, 15., false, Trig_Unstuck_Ability_15sec_Actions);
	}
	if ((id == 'A0MF')) {
		if (udg_System_ShowAbil_And_Items_Hint[GetPlayerId(p) + 1]) {
			if (GetLocalPlayer() == p) {
				DisplayTextToPlayer(GetLocalPlayer(), .0, .0, "Подсказки о покупке предметов и изучении способностей отключены.");
			}
		}
		if (udg_System_ShowAbil_And_Items_Hint[GetPlayerId(p) + 1] == false && end == false) {
			if (GetLocalPlayer() == p) {
				DisplayTextToPlayer(GetLocalPlayer(), .0, .0, "Подсказки о покупке предметов и изучении способностей включены.");
			}
		}
	}
	if ((id == 'A0MH')) {
		if ((udg_Is_Player_Fast_Wave_Start[GetPlayerId(p) + 1] == false) && (udg_Is_Fast_Wave_Start_On_Off)) {
			DisplayTextToForce(bj_FORCE_ALL_PLAYERS, (udg_ColorString[GetPlayerId(p) + 1] + (GetPlayerName(p) + ("|r |cFF969696хочет немедленно начать волну!|r (|Cfffed312" + (I2S(udg_Count_Players_Fast_Wave_Start) + ("|r|cFF969696/|r|Cfffed312" + (I2S(CountPlayersInForceBJ(udg_IGRAET)) + "|r )")))))));
			if (udg_Count_Players_Fast_Wave_Start >= CountPlayersInForceBJ(udg_IGRAET)) {
				StartTimerBJ(udg_Timer_Nomera_Volni, false, 1.);
			}
		}
	}
}
boolean Trig_PlayerUseSpellGameCommand_Conditions() {
	return GetSpellAbilityId() == 'A0MD' || GetSpellAbilityId() == 'A0MB' || GetSpellAbilityId() == 'A0ME' || GetSpellAbilityId() == 'A0MF' || GetSpellAbilityId() == 'A0MH';
}
nothing InitTrig_PlayerUseSpellGameCommand() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_PlayerUseSpellGameCommand, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_PlayerUseSpellGameCommand, Condition(Trig_PlayerUseSpellGameCommand_Conditions));
	TriggerAddAction(gg_trg_PlayerUseSpellGameCommand, Trig_PlayerUseSpellGameCommand_Actions);
}
nothing Trig_GuardsExorcistDead_Removes_Buffs_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	group g = LoadGroupHandle(udg_hash, h, 1);
	unit Picked;
	while (true) {
		if (Picked == null) break;
		DestroyEffect(LoadEffectHandle(udg_hash, GetHandleId(Picked), $83));
		SetUnitLifeAndManaRegeneration(Picked, "life", -70);
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_GuardsExorcistDead_2and5sec_wait_Actions() {
	timer t = GetExpiredTimer();
	integer lopa = 0;
	while (true) {
		if (lopa > 8) break;
		if ((GetLocalPlayer() == Player(lopa))) {
			DisplayTimedTextToPlayer(GetLocalPlayer(), .0, .0, 99999., "|cff99ccffИгрa завершена. Всем игрокам огромное спасибо за участие!!!!|r");
			CreateFogModifierRadiusLocBJ(true, GetLocalPlayer(), FOG_OF_WAR_VISIBLE, GetRectCenter(gg_rct_Center_Vision), 650.);
		}
		DestroyFogModifier(udg_BaseVisionFogModifier[GetPlayerId(Player(lopa)) + 1]);
	}
}
nothing Trig_GuardsExorcistDead_3sec_wait_Actions() {
	timer t = GetExpiredTimer();
	integer lopa = 0;
	unit dammi = CreateUnit(Player($F), 'h00U', GetRectCenterX(gg_rct_cast_magi), GetRectCenterY(gg_rct_cast_magi), .0);
	group g = CreateGroup();
	unit Picked;
	GroupEnumUnitsInRect(g, bj_mapInitialPlayableArea, null);
	while (true) {
		if (Picked == null) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && GetPlayerId(GetOwningPlayer(Picked)) <= 8 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
			KillUnit(Picked);
		}
		GroupRemoveUnit(g, Picked);
	}
	while (true) {
		if (lopa > 8) break;
		if ((GetLocalPlayer() == Player(lopa))) {
			ClearTextMessages();
			DisplayTimedTextToPlayer(GetLocalPlayer(), .0, .0, 99999., "|cffff0000Все стражи-чародеи погибли, вы проиграли!!!|r");
			SetCameraTargetController(dammi, .0, .0, false);
		}
	}
	TimerStart(t, 2.5, false, Trig_GuardsExorcistDead_2and5sec_wait_Actions);
}
nothing Trig_GuardsExorcistDead_Actions() {
	timer t;
	integer lopa = 0;
	group g;
	group g2;
	unit Picked;
	unit dammi;
	timer t1;
	integer h1;
	if ((IsPlayerInForce(GetLocalPlayer(), udg_IGRAET))) {
		DisplayTextToPlayer(GetLocalPlayer(), .0, .0, "|cff99ccffВНИМАНИЕ!!!|r");
		DisplayTextToPlayer(GetLocalPlayer(), .0, .0, "|cffff0000Один Из Стражей-Чародеев погиб!!!|r В живых осталось: |cff99ccff" + I2S(udg_CountGuardsExorcist) + "|r");
		PingMinimapEx(GetUnitX(GetDyingUnit()), GetUnitY(GetDyingUnit()), 5., $FE, 0, 0, true);
	}
	while (true) {
		if (lopa > 8) break;
		SetPlayerState(Player(lopa), PLAYER_STATE_RESOURCE_LUMBER, GetPlayerState(Player(lopa), PLAYER_STATE_RESOURCE_LUMBER) - 1);
	}
	if (udg_CountGuardsExorcist == 4 || udg_CountGuardsExorcist == 1) {
		UnitApplyTimedLife(dammi, 'BTLF', 5.);
		SetUnitScale(dammi, 3., 3., 3.);
		DestroyEffect(AddSpecialEffect("Effects\\TheHolyBomb.mdl", 1255., -5700.));
		DestroyEffect(AddSpecialEffect("Effects\\LightNova.mdl", 1255., -5700.));
		GroupEnumUnitsInRange(g, 1255., -5700., 3000., null);
		while (true) {
			if (Picked == null) break;
			if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && Picked != null && GetPlayerId(GetOwningPlayer(Picked)) >= 9 && GetPlayerId(GetOwningPlayer(Picked)) != $F && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
				StunUnitTimed(Picked, 10.);
				DestroyEffect(AddSpecialEffectTarget("Effects\\TheHolyBomb.mdl", Picked, "origin"));
				DestroyEffect(AddSpecialEffectTarget("Effects\\DivineRage.mdl", Picked, "origin"));
				SetUnitState(Picked, UNIT_STATE_LIFE, GetUnitState(Picked, UNIT_STATE_LIFE) * .5);
			}
			GroupRemoveUnit(g, Picked);
		}
		GroupClear(g);
		DestroyGroup(g);
		GroupAddGroup(udg_PortalCastersMagi, g2);
		while (true) {
			if (Picked == null) break;
			if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && Picked != null) {
				SetUnitLifeAndManaRegeneration(Picked, "life", 70);
				SaveEffectHandle(udg_hash, GetHandleId(Picked), $83, AddSpecialEffectTarget("Effects\\DivineBarrier.mdl", Picked, "origin"));
				GroupAddUnit(g, Picked);
			}
			GroupRemoveUnit(g2, Picked);
		}
		SaveGroupHandle(udg_hash, h1, 1, g);
		TimerStart(t1, 10., false, Trig_GuardsExorcistDead_Removes_Buffs_Actions);
		GroupClear(g2);
		DestroyGroup(g2);
	}
	if (udg_CountGuardsExorcist <= 0) {
		DisableTrigger(gg_trg_Hero_Dead);
		EnableTrigger(gg_trg_PauseUnitWhenDefeat);
		while (true) {
			if (lopa > 8) break;
			if ((GetLocalPlayer() == Player(lopa))) {
				PanCameraToTimed(GetRectCenterX(gg_rct_cast_magi), GetRectCenterY(gg_rct_cast_magi), 3.);
			}
		}
		GroupEnumUnitsInRect(g, bj_mapInitialPlayableArea, null);
		while (true) {
			if (Picked == null) break;
			if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && GetPlayerId(GetOwningPlayer(Picked)) <= 8 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
				SetUnitPosition(Picked, GetRandomReal((GetRectCenterX(gg_rct_cast_magi) - 500.), (GetRectCenterX(gg_rct_cast_magi) + 500.)), GetRandomReal((GetRectCenterY(gg_rct_cast_magi) - 500.), (GetRectCenterY(gg_rct_cast_magi) + 500.)));
				DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl", GetUnitX(Picked), GetUnitY(Picked)));
				PauseUnit(Picked, true);
			}
			GroupRemoveUnit(g, Picked);
		}
		TimerStart(t, 3., false, Trig_GuardsExorcistDead_3sec_wait_Actions);
	}
}
boolean Trig_GuardsExorcistDead_Conditions() {
	return (GetUnitTypeId(GetDyingUnit()) == 'h01K') || (GetUnitTypeId(GetDyingUnit()) == 'e002') || (GetUnitTypeId(GetDyingUnit()) == 'n00Y') || (GetUnitTypeId(GetDyingUnit()) == 'o003');
}
nothing InitTrig_GuardsExorcistDead() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_GuardsExorcistDead, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_GuardsExorcistDead, Condition(Trig_GuardsExorcistDead_Conditions));
	TriggerAddAction(gg_trg_GuardsExorcistDead, Trig_GuardsExorcistDead_Actions);
}
boolean Trig_PauseUnitWhenDefeat_Func001Func001C() {
	return ((1 + GetPlayerId(GetOwningPlayer(GetEnumUnit()))) <= 9);
}
nothing Trig_PauseUnitWhenDefeat_Func001A() {
	if ((Trig_PauseUnitWhenDefeat_Func001Func001C())) {
		KillUnit(GetEnumUnit());
	}
}
nothing Trig_PauseUnitWhenDefeat_Actions() {
	ForGroupBJ(GetUnitsInRectAll(bj_mapInitialPlayableArea), Trig_PauseUnitWhenDefeat_Func001A);
}
nothing InitTrig_PauseUnitWhenDefeat() {
	DisableTrigger(gg_trg_PauseUnitWhenDefeat);
	TriggerRegisterTimerEventPeriodic(gg_trg_PauseUnitWhenDefeat, .05);
	TriggerAddAction(gg_trg_PauseUnitWhenDefeat, Trig_PauseUnitWhenDefeat_Actions);
}
boolean Trig_PauseUnitWhenWin_Func001C() {
	return ((1 + GetPlayerId(GetOwningPlayer(GetEnteringUnit()))) >= $A) && ((1 + GetPlayerId(GetOwningPlayer(GetEnteringUnit()))) <= $F);
}
boolean Trig_PauseUnitWhenWin_Func002C() {
	return ((1 + GetPlayerId(GetOwningPlayer(GetEnteringUnit()))) <= 9);
}
nothing Trig_PauseUnitWhenWin_Actions() {
	if ((Trig_PauseUnitWhenWin_Func001C())) {
		KillUnit(GetEnteringUnit());
	}
	if ((Trig_PauseUnitWhenWin_Func002C())) {
		PauseUnit(GetEnteringUnit(), true);
	}
}
nothing InitTrig_PauseUnitWhenWin() {
	DisableTrigger(gg_trg_PauseUnitWhenWin);
	TriggerRegisterEnterRectSimple(gg_trg_PauseUnitWhenWin, bj_mapInitialPlayableArea);
	TriggerAddAction(gg_trg_PauseUnitWhenWin, Trig_PauseUnitWhenWin_Actions);
}
nothing Trig_GameEndWin_Effects_Actions() {
	timer t = GetExpiredTimer();
	real x = GetRandomReal((GetRectCenterX(gg_rct_cast_magi) - 500.), (GetRectCenterX(gg_rct_cast_magi) + 500.));
	real y = GetRandomReal((GetRectCenterY(gg_rct_cast_magi) - 500.), (GetRectCenterY(gg_rct_cast_magi) + 500.));
	unit dammi = CreateUnit(Player($F), 'h00U', x, y, .0);
	unit dammi2 = CreateUnit(Player($F), 'h00U', x, y, .0);
	UnitApplyTimedLife(dammi, 'BTLF', 11.2);
	AddSpecialEffectTarget("Effects\\Win_Fireworks.mdx", dammi, "origin");
	SetUnitScale(dammi2, 3., 3., 3.);
	DestroyEffect(AddSpecialEffectTarget("Effects\\Fireworksblue.mdl", dammi2, "origin"));
}
nothing Trig_GameEndWin_1and5sec_wait_Actions() {
	timer t = GetExpiredTimer();
	integer lopa = 0;
	while (true) {
		if (lopa > 8) break;
		if ((GetLocalPlayer() == Player(lopa))) {
			DisplayTimedTextToPlayer(GetLocalPlayer(), .0, .0, 99999., "|cff99ccffНа этом моменте альфа версия карты заканчивается!!! Игрa завершена. Всем игрокам огромное спасибо за участие!!!!|r");
		}
	}
	DestroyTimer(t);
	TimerStart(t, .25, true, Trig_GameEndWin_Effects_Actions);
}
nothing Trig_GameEndWin_2sec_wait_Actions() {
	timer t = GetExpiredTimer();
	integer lopa = 0;
	unit dammi = CreateUnit(Player($F), 'h00U', GetRectCenterX(gg_rct_cast_magi), GetRectCenterY(gg_rct_cast_magi), .0);
	group g = CreateGroup();
	unit Picked;
	GroupEnumUnitsInRect(g, bj_mapInitialPlayableArea, null);
	while (true) {
		if (Picked == null) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && GetPlayerId(GetOwningPlayer(Picked)) <= 8 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
			SetUnitInvulnerable(Picked, true);
			if (GetUnitTypeId(Picked) == 'E004' || GetUnitTypeId(Picked) == 'H01I' || GetUnitTypeId(Picked) == 'N00W' || GetUnitTypeId(Picked) == 'E001') {
				SetUnitAnimation(Picked, "Stand");
			else
				SetUnitAnimation(Picked, "Stand Victory");
			}
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	while (true) {
		if (lopa > 8) break;
		if ((GetLocalPlayer() == Player(lopa))) {
			ClearTextMessages();
			DisplayTimedTextToPlayer(GetLocalPlayer(), .0, .0, 99999., "|cff00CD00Армия Тьмы уничтожена, чародеи живы и портал открыт...Вы победили!!!!!!|r");
			SetCameraTargetController(dammi, .0, .0, false);
		}
	}
	TimerStart(t, 1.5, false, Trig_GameEndWin_1and5sec_wait_Actions);
}
nothing Trig_GameEndWin_6and0sec_wait_Actions() {
	timer t;
	integer lopa;
	group g;
	unit Picked;
	EnableTrigger(gg_trg_PauseUnitWhenWin);
	while (true) {
		if (lopa > 8) break;
		if ((GetLocalPlayer() == Player(lopa))) {
			PanCameraToTimed(GetRectCenterX(gg_rct_cast_magi), GetRectCenterY(gg_rct_cast_magi), 2.);
		}
	}
	GroupEnumUnitsInRect(g, bj_mapInitialPlayableArea, null);
	while (true) {
		if (Picked == null) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && GetPlayerId(GetOwningPlayer(Picked)) <= 8 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
			SetUnitPosition(Picked, GetRandomReal((GetRectCenterX(gg_rct_cast_magi) - 500.), (GetRectCenterX(gg_rct_cast_magi) + 500.)), GetRandomReal((GetRectCenterY(gg_rct_cast_magi) - 500.), (GetRectCenterY(gg_rct_cast_magi) + 500.)));
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl", GetUnitX(Picked), GetUnitY(Picked)));
			PauseUnit(Picked, true);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	GroupEnumUnitsInRect(g, bj_mapInitialPlayableArea, null);
	while (true) {
		if (Picked == null) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && GetPlayerId(GetOwningPlayer(Picked)) >= 9 && GetPlayerId(GetOwningPlayer(Picked)) < $F && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
			KillUnit(Picked);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	TimerStart(t, 2., false, Trig_GameEndWin_2sec_wait_Actions);
}
nothing Trig_GameEndWin_Actions() {
	timer t;
	TimerStart(t, 6., false, Trig_GameEndWin_6and0sec_wait_Actions);
}
nothing InitTrig_GameEndWin() {
	DisableTrigger(gg_trg_GameEndWin);
	TriggerAddAction(gg_trg_GameEndWin, Trig_GameEndWin_Actions);
}
nothing Trig_Respawn_trees_Init_AddTree() {
	if (GetDestructableTypeId(GetEnumDestructable()) == 'ATtr' || GetDestructableTypeId(GetEnumDestructable()) == 'ATtc' || GetDestructableTypeId(GetEnumDestructable()) == 'ZTtw' || GetDestructableTypeId(GetEnumDestructable()) == 'NTtw' || GetDestructableTypeId(GetEnumDestructable()) == 'WTst' || GetDestructableTypeId(GetEnumDestructable()) == 'CTtr') {
		TriggerRegisterDeathEvent(gg_trg_Respawn_trees, GetEnumDestructable());
	}
}
nothing Trig_Respawn_trees_Init_Actions() {
	EnumDestructablesInRect(GetWorldBounds(), null, Trig_Respawn_trees_Init_AddTree);
}
nothing InitTrig_Respawn_trees_Init() {
	TriggerRegisterTimerEvent(gg_trg_Respawn_trees_Init, 5., false);
	TriggerAddAction(gg_trg_Respawn_trees_Init, Trig_Respawn_trees_Init_Actions);
}
nothing Trig_Respawn_trees_With_Wait_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	destructable tree = LoadDestructableHandle(udg_hash, h, 1);
	DestructableRestoreLife(tree, GetDestructableMaxLife(tree), true);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_Respawn_trees_Actions() {
	destructable tree = GetTriggerDestructable();
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	SaveDestructableHandle(udg_hash, h, 1, tree);
	TimerStart(t, 120., false, Trig_Respawn_trees_With_Wait_Actions);
}
nothing InitTrig_Respawn_trees() {
	TriggerAddAction(gg_trg_Respawn_trees, Trig_Respawn_trees_Actions);
}
boolean Trig_Day_Weather_Func003Func005C() {
	return (true == false);
}
boolean Trig_Day_Weather_Func003C() {
	return (udg_Temp_Integer[1] == 1);
}
boolean Trig_Day_Weather_Func004Func004C() {
	return (true == false);
}
boolean Trig_Day_Weather_Func004C() {
	return (udg_Temp_Integer[1] == 2);
}
boolean Trig_Day_Weather_Func005Func001C() {
	return (udg_Temp_Integer[1] == 3) || (udg_Temp_Integer[1] == 4) || (udg_Temp_Integer[1] == 5);
}
boolean Trig_Day_Weather_Func005C() {
	return (Trig_Day_Weather_Func005Func001C());
}
nothing Trig_Day_Weather_Actions() {
	RemoveWeatherEffect(udg_Weather[1]);
	if ((Trig_Day_Weather_Func003C())) {
		AddWeatherEffectSaveLast(bj_mapInitialPlayableArea, 'RAhr');
		if ((Trig_Day_Weather_Func003Func005C())) {
			StartTimerBJ(udg_Timer_Lightning_Strike_Weather, false, (17. + GetRandomReal(0, 25.)));
		}
	}
	if ((Trig_Day_Weather_Func004C())) {
		AddWeatherEffectSaveLast(bj_mapInitialPlayableArea, 'RAlr');
		if ((Trig_Day_Weather_Func004Func004C())) {
			StartTimerBJ(udg_Timer_Lightning_Strike_Weather, false, (17. + GetRandomReal(0, 25.)));
		}
	}
	if ((Trig_Day_Weather_Func005C())) {
		AddWeatherEffectSaveLast(bj_mapInitialPlayableArea, 'LRaa');
	}
	EnableWeatherEffect(udg_Weather[1], true);
}
nothing InitTrig_Day_Weather() {
	TriggerRegisterGameStateEventTimeOfDay(gg_trg_Day_Weather, EQUAL, 6.);
	TriggerRegisterGameStateEventTimeOfDay(gg_trg_Day_Weather, EQUAL, 12.);
	TriggerAddAction(gg_trg_Day_Weather, Trig_Day_Weather_Actions);
}
nothing Trig_Sky_Morning_Actions() {
	SetSkyModel("Environment\\Sky\\LordaeronWinterSkyPink\\LordaeronWinterSkyPink.mdl");
}
nothing InitTrig_Sky_Morning() {
	TriggerRegisterGameStateEventTimeOfDay(gg_trg_Sky_Morning, EQUAL, 6.);
	TriggerAddAction(gg_trg_Sky_Morning, Trig_Sky_Morning_Actions);
}
nothing Trig_Sky_Day_Actions() {
	SetSkyModel("Environment\\Sky\\LordaeronSummerSky\\LordaeronSummerSky.mdl");
}
nothing InitTrig_Sky_Day() {
	TriggerRegisterGameStateEventTimeOfDay(gg_trg_Sky_Day, EQUAL, 12.);
	TriggerAddAction(gg_trg_Sky_Day, Trig_Sky_Day_Actions);
}
boolean Trig_Night_Weather_Func003Func004C() {
	return (true == false);
}
boolean Trig_Night_Weather_Func003C() {
	return (udg_Temp_Integer[1] == 1);
}
boolean Trig_Night_Weather_Func004Func004C() {
	return (true == false);
}
boolean Trig_Night_Weather_Func004C() {
	return (udg_Temp_Integer[1] == 2);
}
boolean Trig_Night_Weather_Func005Func001C() {
	return (udg_Temp_Integer[1] == 3) || (udg_Temp_Integer[1] == 4) || (udg_Temp_Integer[1] == 5);
}
boolean Trig_Night_Weather_Func005C() {
	return (Trig_Night_Weather_Func005Func001C());
}
nothing Trig_Night_Weather_Actions() {
	RemoveWeatherEffect(udg_Weather[1]);
	if ((Trig_Night_Weather_Func003C())) {
		AddWeatherEffectSaveLast(bj_mapInitialPlayableArea, 'RAhr');
		if ((Trig_Night_Weather_Func003Func004C())) {
			StartTimerBJ(udg_Timer_Lightning_Strike_Weather, false, (17. + GetRandomReal(0, 25.)));
		}
	}
	if ((Trig_Night_Weather_Func004C())) {
		AddWeatherEffectSaveLast(bj_mapInitialPlayableArea, 'RAlr');
		if ((Trig_Night_Weather_Func004Func004C())) {
			StartTimerBJ(udg_Timer_Lightning_Strike_Weather, false, (17. + GetRandomReal(0, 25.)));
		}
	}
	if ((Trig_Night_Weather_Func005C())) {
		AddWeatherEffectSaveLast(bj_mapInitialPlayableArea, 'LRma');
	}
	EnableWeatherEffect(udg_Weather[1], true);
}
nothing InitTrig_Night_Weather() {
	TriggerRegisterGameStateEventTimeOfDay(gg_trg_Night_Weather, EQUAL, 18.);
	TriggerRegisterGameStateEventTimeOfDay(gg_trg_Night_Weather, EQUAL, .0);
	TriggerAddAction(gg_trg_Night_Weather, Trig_Night_Weather_Actions);
}
nothing Trig_Sky_Evening_Actions() {
	SetSkyModel("Environment\\Sky\\LordaeronFallSky\\LordaeronFallSky.mdl");
}
nothing InitTrig_Sky_Evening() {
	TriggerRegisterGameStateEventTimeOfDay(gg_trg_Sky_Evening, EQUAL, 18.);
	TriggerAddAction(gg_trg_Sky_Evening, Trig_Sky_Evening_Actions);
}
nothing Trig_Sky_Night_Actions() {
	SetSkyModel("Environment\\Sky\\FelwoodSky\\FelwoodSky.mdl");
}
nothing InitTrig_Sky_Night() {
	TriggerRegisterGameStateEventTimeOfDay(gg_trg_Sky_Night, EQUAL, .0);
	TriggerAddAction(gg_trg_Sky_Night, Trig_Sky_Night_Actions);
}
boolean Trig_Lightnings_Weather_Effect_Rainy_Conditions() {
	return (udg_Boolean_Is_Rain);
}
nothing Trig_Lightnings_Weather_Effect_Rainy_Func003A() {
	SoundForPlayer(GetEnumPlayer(), 17);
}
nothing Trig_Lightnings_Weather_Effect_Rainy_Actions() {
	CinematicFadeBJ(1, 1., "ReplaceableTextures\\CameraMasks\\Black_mask.blp", 60., 60., 65., 15.);
	CinematicFadeBJ(0, 2., "ReplaceableTextures\\CameraMasks\\White_mask.blp", 60., 60., 65., 15.);
	ForForce(bj_FORCE_ALL_PLAYERS, Trig_Lightnings_Weather_Effect_Rainy_Func003A);
	StartTimerBJ(udg_Timer_Lightning_Strike_Weather, false, (10. + GetRandomReal(20., 40.)));
}
nothing InitTrig_Lightnings_Weather_Effect_Rainy() {
	TriggerRegisterTimerExpireEvent(gg_trg_Lightnings_Weather_Effect_Rainy, udg_Timer_Lightning_Strike_Weather);
	TriggerAddCondition(gg_trg_Lightnings_Weather_Effect_Rainy, Condition(Trig_Lightnings_Weather_Effect_Rainy_Conditions));
	TriggerAddAction(gg_trg_Lightnings_Weather_Effect_Rainy, Trig_Lightnings_Weather_Effect_Rainy_Actions);
}
boolean Trig_Periodic_Rune_Creation_Func001Func002Func002C() {
	return (CountPlayersInForceBJ(udg_IGRAET) >= 1);
}
boolean Trig_Periodic_Rune_Creation_Func001Func002C() {
	return (CountPlayersInForceBJ(udg_IGRAET) >= 2);
}
boolean Trig_Periodic_Rune_Creation_Func001C() {
	return (CountPlayersInForceBJ(udg_IGRAET) >= 3);
}
boolean Trig_Periodic_Rune_Creation_Func002Func002Func001Func002C() {
	return (udg_Temp_Integer[2] == 1);
}
boolean Trig_Periodic_Rune_Creation_Func002Func002Func001Func003C() {
	return (udg_Temp_Integer[2] == 2);
}
boolean Trig_Periodic_Rune_Creation_Func002Func002Func001Func004C() {
	return (udg_Temp_Integer[2] == 3);
}
boolean Trig_Periodic_Rune_Creation_Func002Func002Func001Func005C() {
	return (udg_Temp_Integer[2] == 4);
}
boolean Trig_Periodic_Rune_Creation_Func002Func002Func001C() {
	return (udg_Is_Rune_On_Position[bj_forLoopAIndex] == false);
}
boolean Trig_Periodic_Rune_Creation_Func002Func003C() {
	return (udg_Is_Rune_On_Position[bj_forLoopAIndex] == false);
}
boolean Trig_Periodic_Rune_Creation_Func002C() {
	return (Trig_Periodic_Rune_Creation_Func002Func003C());
}
nothing Trig_Periodic_Rune_Creation_Actions() {
	if ((Trig_Periodic_Rune_Creation_Func001C())) {
	else
		if ((Trig_Periodic_Rune_Creation_Func001Func002C())) {
		else
			if ((Trig_Periodic_Rune_Creation_Func001Func002Func002C())) {
			}
		}
	}
	if ((Trig_Periodic_Rune_Creation_Func002C())) {
		while (true) {
			if (bj_forLoopAIndex > bj_forLoopAIndexEnd) break;
			if ((Trig_Periodic_Rune_Creation_Func002Func002Func001C())) {
				if ((Trig_Periodic_Rune_Creation_Func002Func002Func001Func002C())) {
					CreateItemLoc('I013', Location(I2R(udg_Rune_Position_X[bj_forLoopAIndex]), I2R(udg_Rune_Position_Y[bj_forLoopAIndex])));
				}
				if ((Trig_Periodic_Rune_Creation_Func002Func002Func001Func003C())) {
					CreateItemLoc('I014', Location(I2R(udg_Rune_Position_X[bj_forLoopAIndex]), I2R(udg_Rune_Position_Y[bj_forLoopAIndex])));
				}
				if ((Trig_Periodic_Rune_Creation_Func002Func002Func001Func004C())) {
					CreateItemLoc('I016', Location(I2R(udg_Rune_Position_X[bj_forLoopAIndex]), I2R(udg_Rune_Position_Y[bj_forLoopAIndex])));
				}
				if ((Trig_Periodic_Rune_Creation_Func002Func002Func001Func005C())) {
					CreateItemLoc('I017', Location(I2R(udg_Rune_Position_X[bj_forLoopAIndex]), I2R(udg_Rune_Position_Y[bj_forLoopAIndex])));
				}
				AddSpecialEffectLocBJ(Location(I2R(udg_Rune_Position_X[bj_forLoopAIndex]), I2R(udg_Rune_Position_Y[bj_forLoopAIndex])), "Effects\\ShadowAssault.mdx");
				DestroyEffectWithWait(bj_lastCreatedEffect, 3.);
			}
		}
	}
}
nothing InitTrig_Periodic_Rune_Creation() {
	DisableTrigger(gg_trg_Periodic_Rune_Creation);
	TriggerRegisterTimerEventPeriodic(gg_trg_Periodic_Rune_Creation, 60.1);
	TriggerAddAction(gg_trg_Periodic_Rune_Creation, Trig_Periodic_Rune_Creation_Actions);
}
nothing Trig_Rune_PickedUp_End_Immunity_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit hero = LoadUnitHandle(udg_hash, h, 1);
	SetArmorAbilityLevel(hero, -50);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_Rune_PickedUp_End_Damage_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit hero = LoadUnitHandle(udg_hash, h, 1);
	integer damage = LoadInteger(udg_hash, h, 6);
	effect ef;
	SetAttackAbilityLevel(hero, -damage);
	DestroyEffect(ef);
	DestroyEffect(ef);
	DestroyEffect(ef);
	DestroyEffect(ef);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_Rune_PickedUp_End_Regeneration_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit hero = LoadUnitHandle(udg_hash, h, 1);
	real hp = LoadReal(udg_hash, h, 2);
	real mp = LoadReal(udg_hash, h, 3);
	SetUnitLifeAndManaRegeneration(hero, "life", R2I(-hp / 20));
	SetUnitLifeAndManaRegeneration(hero, "mana", R2I(-mp / 20));
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_Rune_PickedUp_Actions() {
	item rune = GetManipulatedItem();
	unit hero = GetManipulatingUnit();
	integer id = GetItemTypeId(rune);
	unit dammi;
	real hp;
	real mp;
	timer t;
	integer h;
	effect ef;
	integer damage;
	real x = GetUnitX(hero);
	real y = GetUnitY(hero);
	real dist1 = SquareRoot((x - udg_Rune_Position_X[1]) * (x - udg_Rune_Position_X[1]) + (y - udg_Rune_Position_Y[1]) * (y - udg_Rune_Position_Y[1]));
	real dist2 = SquareRoot((x - udg_Rune_Position_X[2]) * (x - udg_Rune_Position_X[2]) + (y - udg_Rune_Position_Y[2]) * (y - udg_Rune_Position_Y[2]));
	real dist3 = SquareRoot((x - udg_Rune_Position_X[3]) * (x - udg_Rune_Position_X[3]) + (y - udg_Rune_Position_Y[3]) * (y - udg_Rune_Position_Y[3]));
	integer runepos = 0;
	if (dist1 < 500.) {
	}
	if (dist2 < 500.) {
	}
	if (dist3 < 500.) {
	}
	if (id == 'I013') {
		UnitApplyTimedLife(dammi, 'BTLF', 1.);
		UnitAddAbility(dammi, 'A0O6');
		IssueTargetOrderById(dammi, $D00C0, hero);
		SetUnitLifeAndManaRegeneration(hero, "life", R2I(hp / 20));
		SetUnitLifeAndManaRegeneration(hero, "mana", R2I(mp / 20));
		SaveUnitHandle(udg_hash, h, 1, hero);
		SaveReal(udg_hash, h, 2, hp);
		SaveReal(udg_hash, h, 3, mp);
		TimerStart(t, 10., false, Trig_Rune_PickedUp_End_Regeneration_Actions);
	}
	if (id == 'I014') {
		SetAttackAbilityLevel(hero, damage);
		SaveUnitHandle(udg_hash, h, 1, hero);
		SaveEffectHandle(udg_hash, h, 2, ef);
		SaveEffectHandle(udg_hash, h, 3, ef);
		SaveEffectHandle(udg_hash, h, 4, ef);
		SaveEffectHandle(udg_hash, h, 5, ef);
		SaveInteger(udg_hash, h, 6, damage);
		TimerStart(t, 20., false, Trig_Rune_PickedUp_End_Damage_Actions);
	}
	if (id == 'I016') {
		UnitApplyTimedLife(dammi, 'BTLF', 1.);
		UnitAddAbility(dammi, 'A0O7');
		IssueTargetOrderById(dammi, $D0132, hero);
	}
	if (id == 'I017') {
		UnitApplyTimedLife(dammi, 'BTLF', 1.);
		UnitAddAbility(dammi, 'A0O8');
		IssueTargetOrderById(dammi, $D00DA, hero);
		SetArmorAbilityLevel(hero, 50);
		SaveUnitHandle(udg_hash, h, 1, hero);
		TimerStart(t, 12., false, Trig_Rune_PickedUp_End_Immunity_Actions);
	}
	RemoveItem(rune);
}
boolean Trig_Rune_PickedUp_Conditions() {
	return GetItemTypeId(GetManipulatedItem()) == 'I013' || GetItemTypeId(GetManipulatedItem()) == 'I014' || GetItemTypeId(GetManipulatedItem()) == 'I016' || GetItemTypeId(GetManipulatedItem()) == 'I017';
}
nothing InitTrig_Rune_PickedUp() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Rune_PickedUp, Player(index), EVENT_PLAYER_UNIT_PICKUP_ITEM, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Rune_PickedUp, Condition(Trig_Rune_PickedUp_Conditions));
	TriggerAddAction(gg_trg_Rune_PickedUp, Trig_Rune_PickedUp_Actions);
}
boolean Trig_Initialization_MultiBoard_Func002Func001C() {
	return (GetPlayerSlotState(Player(-1 + (bj_forLoopAIndex))) == PLAYER_SLOT_STATE_PLAYING);
}
nothing Trig_Initialization_MultiBoard_Func029A() {
	MultiboardSetItemValueBJ(udg_MultiBoard, 2, udg_PlayerNumberInMB[(1 + GetPlayerId(GetEnumPlayer()))], (udg_ColorString[(1 + GetPlayerId(GetEnumPlayer()))] + (GetPlayerName(GetEnumPlayer()) + "|r")));
	MultiboardSetItemValueBJ(udg_MultiBoard, 3, udg_PlayerNumberInMB[(1 + GetPlayerId(GetEnumPlayer()))], (udg_ColorString[20] + ("0|r")));
	MultiboardSetItemValueBJ(udg_MultiBoard, 4, udg_PlayerNumberInMB[(1 + GetPlayerId(GetEnumPlayer()))], (udg_ColorString[21] + ("0|r")));
	MultiboardSetItemValueBJ(udg_MultiBoard, 5, udg_PlayerNumberInMB[(1 + GetPlayerId(GetEnumPlayer()))], (udg_ColorString[24] + ("0|r")));
	MultiboardSetItemValueBJ(udg_MultiBoard, 6, udg_PlayerNumberInMB[(1 + GetPlayerId(GetEnumPlayer()))], (udg_ColorString[22] + ("0|r")));
	MultiboardSetItemValueBJ(udg_MultiBoard, 7, udg_PlayerNumberInMB[(1 + GetPlayerId(GetEnumPlayer()))], (udg_ColorString[23] + ("0|r")));
}
nothing Trig_Initialization_MultiBoard_Actions() {
	while (true) {
		if (bj_forLoopAIndex > bj_forLoopAIndexEnd) break;
		if ((Trig_Initialization_MultiBoard_Func002Func001C())) {
			ForceAddPlayer(udg_Players_Ally_Group, Player(-1 + (bj_forLoopAIndex)));
		}
	}
	CreateMultiboardBJ(7, (udg_CountPlayers + 3), "Последние Стражи");
	MultiboardSetItemValueBJ(udg_MultiBoard, 1, 1, "");
	MultiboardSetItemStyleBJ(udg_MultiBoard, 1, 1, false, false);
	MultiboardSetItemValueBJ(udg_MultiBoard, 2, 1, "Игрок");
	MultiboardSetItemValueBJ(udg_MultiBoard, 3, 1, (udg_ColorString[20] + ("Убийств|r")));
	MultiboardSetItemValueBJ(udg_MultiBoard, 4, 1, (udg_ColorString[21] + ("Cмертей|r")));
	MultiboardSetItemValueBJ(udg_MultiBoard, 5, 1, (udg_ColorString[24] + ("Помощи|r")));
	MultiboardSetItemValueBJ(udg_MultiBoard, 6, 1, (udg_ColorString[22] + ("Уровень|r")));
	MultiboardSetItemIconBJ(udg_MultiBoard, 7, 1, "UI\\Feedback\\Resources\\ResourceGold.blp");
	while (true) {
		if (bj_forLoopAIndex > bj_forLoopAIndexEnd) break;
		MultiboardSetItemWidthBJ(udg_MultiBoard, 1, bj_forLoopAIndex, 2.);
		MultiboardSetItemWidthBJ(udg_MultiBoard, 2, bj_forLoopAIndex, 10.);
		MultiboardSetItemWidthBJ(udg_MultiBoard, 3, bj_forLoopAIndex, 6.);
		MultiboardSetItemWidthBJ(udg_MultiBoard, 4, bj_forLoopAIndex, 6.);
		MultiboardSetItemWidthBJ(udg_MultiBoard, 5, bj_forLoopAIndex, 6.);
		MultiboardSetItemWidthBJ(udg_MultiBoard, 6, bj_forLoopAIndex, 6.);
		MultiboardSetItemWidthBJ(udg_MultiBoard, 7, bj_forLoopAIndex, 4.);
		MultiboardSetItemStyleBJ(udg_MultiBoard, 1, bj_forLoopAIndex, false, true);
		MultiboardSetItemStyleBJ(udg_MultiBoard, 2, bj_forLoopAIndex, true, false);
		MultiboardSetItemStyleBJ(udg_MultiBoard, 3, bj_forLoopAIndex, true, false);
		MultiboardSetItemStyleBJ(udg_MultiBoard, 4, bj_forLoopAIndex, true, false);
		MultiboardSetItemStyleBJ(udg_MultiBoard, 5, bj_forLoopAIndex, true, false);
		MultiboardSetItemStyleBJ(udg_MultiBoard, 6, bj_forLoopAIndex, true, false);
		MultiboardSetItemStyleBJ(udg_MultiBoard, 7, bj_forLoopAIndex, true, false);
		MultiboardSetItemIconBJ(udg_MultiBoard, 1, bj_forLoopAIndex, "ReplaceableTextures\\CommandButtons\\BTNSelectHeroOn.blp");
	}
	MultiboardSetItemStyleBJ(udg_MultiBoard, 7, 1, false, true);
	MultiboardSetItemStyleBJ(udg_MultiBoard, 1, 1, false, false);
	MultiboardSetItemStyleBJ(udg_MultiBoard, 1, (udg_CountPlayers + 2), false, true);
	MultiboardSetItemStyleBJ(udg_MultiBoard, 2, (udg_CountPlayers + 2), true, false);
	MultiboardSetItemIconBJ(udg_MultiBoard, 1, (udg_CountPlayers + 2), "ReplaceableTextures\\CommandButtons\\ClockTime.blp");
	MultiboardSetItemValueBJ(udg_MultiBoard, 2, (udg_CountPlayers + 2), "|cff00CD00Время Игры|r");
	MultiboardSetItemStyleBJ(udg_MultiBoard, 1, (udg_CountPlayers + 3), false, false);
	MultiboardSetItemStyleBJ(udg_MultiBoard, 2, (udg_CountPlayers + 3), true, false);
	MultiboardSetItemIconBJ(udg_MultiBoard, 1, (udg_CountPlayers + 2), "ReplaceableTextures\\CommandButtons\\ClockTime.blp");
	MultiboardSetItemValueBJ(udg_MultiBoard, 2, (udg_CountPlayers + 3), "|cff99ccffПрогресс волны:|r");
	MultiboardSetItemValueBJ(udg_MultiBoard, 3, (udg_CountPlayers + 3), "|Cfffed3120|r|cFF969696/|r|Cfffed3129|r");
	ForForce(udg_Players_Ally_Group, Trig_Initialization_MultiBoard_Func029A);
	MultiboardDisplay(udg_MultiBoard, false);
	MultiboardDisplay(udg_MultiBoard, true);
	MultiboardMinimize(udg_MultiBoard, true);
}
nothing InitTrig_Initialization_MultiBoard() {
	TriggerRegisterTimerEventSingle(gg_trg_Initialization_MultiBoard, 3.);
	TriggerAddAction(gg_trg_Initialization_MultiBoard, Trig_Initialization_MultiBoard_Actions);
}
boolean Trig_Hero_MultiBoard_LvlUp_Conditions() {
	return ((IsUnitType(GetLevelingUnit(), UNIT_TYPE_HERO)) && (IsUnitIllusion(GetLevelingUnit()) == false) && ((1 + GetPlayerId(GetOwningPlayer(GetLevelingUnit()))) <= 9)) != null;
}
nothing Trig_Hero_MultiBoard_LvlUp_Actions() {
	MultiboardSetItemValueBJ(udg_MultiBoard, 6, udg_PlayerNumberInMB[(1 + GetPlayerId(GetOwningPlayer(GetLevelingUnit())))], (udg_ColorString[22] + (I2S(GetUnitLevel(GetLevelingUnit())) + "|r")));
}
nothing InitTrig_Hero_MultiBoard_LvlUp() {
	TriggerRegisterAnyUnitEventBJ(gg_trg_Hero_MultiBoard_LvlUp, EVENT_PLAYER_HERO_LEVEL);
	TriggerAddCondition(gg_trg_Hero_MultiBoard_LvlUp, Condition(Trig_Hero_MultiBoard_LvlUp_Conditions));
	TriggerAddAction(gg_trg_Hero_MultiBoard_LvlUp, Trig_Hero_MultiBoard_LvlUp_Actions);
}
boolean Trig_Time_Check_and_Player_Gold_for_MultiBoard_Func002C() {
	return (udg_Time_second >= 60);
}
boolean Trig_Time_Check_and_Player_Gold_for_MultiBoard_Func003C() {
	return (udg_Time_minuts >= 60);
}
boolean Trig_Time_Check_and_Player_Gold_for_MultiBoard_Func004C() {
	return (udg_Time_hours > 0);
}
nothing Trig_Time_Check_and_Player_Gold_for_MultiBoard_Func005A() {
	MultiboardSetItemValueBJ(udg_MultiBoard, 7, udg_PlayerNumberInMB[(1 + GetPlayerId(GetEnumPlayer()))], (udg_ColorString[23] + (I2S(GetPlayerState(GetEnumPlayer(), PLAYER_STATE_RESOURCE_GOLD)) + "|r")));
}
nothing Trig_Time_Check_and_Player_Gold_for_MultiBoard_Actions() {
	if ((Trig_Time_Check_and_Player_Gold_for_MultiBoard_Func002C())) {
	}
	if ((Trig_Time_Check_and_Player_Gold_for_MultiBoard_Func003C())) {
	}
	if ((Trig_Time_Check_and_Player_Gold_for_MultiBoard_Func004C())) {
		MultiboardSetItemValueBJ(udg_MultiBoard, 3, (udg_CountPlayers + 2), (("|cff00CD00" + (I2S(udg_Time_hours) + ":")) + (I2S(udg_Time_minuts) + (":" + (I2S(udg_Time_second) + "|r")))));
	else
		MultiboardSetItemValueBJ(udg_MultiBoard, 3, (udg_CountPlayers + 2), ("|cff00CD00" + (I2S(udg_Time_minuts) + (":" + (I2S(udg_Time_second) + "|r")))));
	}
	ForForce(udg_Players_Ally_Group, Trig_Time_Check_and_Player_Gold_for_MultiBoard_Func005A);
}
nothing InitTrig_Time_Check_and_Player_Gold_for_MultiBoard() {
	TriggerRegisterTimerEventPeriodic(gg_trg_Time_Check_and_Player_Gold_for_MultiBoard, 1.);
	TriggerAddAction(gg_trg_Time_Check_and_Player_Gold_for_MultiBoard, Trig_Time_Check_and_Player_Gold_for_MultiBoard_Actions);
}
boolean Trig_Reincarnation_Skeletons_Conditions() {
	integer id = GetUnitTypeId(GetDyingUnit());
	return IsUnitIllusion(GetDyingUnit()) == false && GetRandomInt(1, 7) == 1 && (id == 'u001' || id == 'u002' || id == 'u003');
}
nothing Trig_Reincarnation_Skeletons_2sec_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit u = LoadUnitHandle(udg_hash, h, 6);
	PauseUnit(u, false);
	if (GetUnitState(u, UNIT_STATE_LIFE) >= .405) {
		SetUnitAnimation(u, "stand");
		IssuePointOrderById(u, $D000F, GetRectCenterX(gg_rct_cast_magi), GetRectCenterY(gg_rct_cast_magi));
	}
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_Reincarnation_Skeletons_3sec_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	integer id = LoadInteger(udg_hash, h, 1);
	real x = LoadReal(udg_hash, h, 2);
	real y = LoadReal(udg_hash, h, 3);
	player p = LoadPlayerHandle(udg_hash, h, 4);
	real face = LoadReal(udg_hash, h, 5);
	unit u = CreateUnit(p, id, x, y, face);
	SaveUnitHandle(udg_hash, h, 6, u);
	PauseUnit(u, true);
	SetUnitAnimation(u, "Birth");
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl", GetUnitX(u), GetUnitY(u)));
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl", GetUnitX(u), GetUnitY(u)));
	TimerStart(t, 2.33, false, Trig_Reincarnation_Skeletons_2sec_Actions);
}
nothing Trig_Reincarnation_Skeletons_Actions() {
	unit u = GetDyingUnit();
	integer id = GetUnitTypeId(u);
	real x = GetUnitX(u);
	real y = GetUnitY(u);
	player p = GetOwningPlayer(u);
	real face = GetUnitFacing(u);
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	SaveInteger(udg_hash, h, 1, id);
	SaveReal(udg_hash, h, 2, x);
	SaveReal(udg_hash, h, 3, y);
	SavePlayerHandle(udg_hash, h, 4, p);
	SaveReal(udg_hash, h, 5, face);
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl", x, y));
	TimerStart(t, 3., false, Trig_Reincarnation_Skeletons_3sec_Actions);
}
nothing InitTrig_Reincarnation_Skeletons() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Reincarnation_Skeletons, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Reincarnation_Skeletons, Condition(Trig_Reincarnation_Skeletons_Conditions));
	TriggerAddAction(gg_trg_Reincarnation_Skeletons, Trig_Reincarnation_Skeletons_Actions);
}
nothing Trig_BossSkeletRaise2sec_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 20);
	unit skelet;
	integer lop = 0;
	real xr = GetRectCenterX(gg_rct_cast_magi);
	real yr = GetRectCenterY(gg_rct_cast_magi);
	PauseUnit(caster, false);
	SetUnitTimeScale(caster, 1.);
	if (GetUnitState(caster, UNIT_STATE_LIFE) >= .405) {
		SetUnitAnimation(caster, "stand");
		IssuePointOrderById(caster, $D000F, xr, yr);
	}
	while (true) {
		if (lop > $F) break;
		PauseUnit(skelet, false);
		if (GetUnitState(skelet, UNIT_STATE_LIFE) >= .405) {
			SetUnitAnimation(skelet, "stand");
			IssuePointOrderById(skelet, $D000F, xr, yr);
		}
	}
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_BossSkeletRaiseMiniWait_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 20);
	player p = GetOwningPlayer(caster);
	unit target = LoadUnitHandle(udg_hash, h, 21);
	real x = GetUnitX(target);
	real y = GetUnitY(target);
	integer lop = 0;
	unit skelet;
	SetUnitAnimationByIndex(caster, 3);
	SetUnitTimeScale(caster, 3.25);
	PauseUnit(caster, true);
	while (true) {
		if (lop > $F) break;
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl", x + 250. * Cos((lop * 22.5) * bj_DEGTORAD), y + 250. * Sin((lop * 22.5) * bj_DEGTORAD)));
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl", x + 250. * Cos((lop * 22.5) * bj_DEGTORAD), y + 250. * Sin((lop * 22.5) * bj_DEGTORAD)));
		SetUnitAnimation(skelet, "Birth");
		PauseUnit(skelet, true);
		SaveUnitHandle(udg_hash, h, lop, skelet);
	}
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl", x, y));
	TimerStart(t, 2.33, false, Trig_BossSkeletRaise2sec_Actions);
}
nothing Trig_BossSkeletRaise_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	SaveUnitHandle(udg_hash, h, 20, caster);
	SaveUnitHandle(udg_hash, h, 21, target);
	TimerStart(t, .3, false, Trig_BossSkeletRaiseMiniWait_Actions);
}
boolean Trig_BossSkeletRaise_Conditions() {
	return GetSpellAbilityId() == 'A07M';
}
nothing InitTrig_BossSkeletRaise() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_BossSkeletRaise, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_BossSkeletRaise, Condition(Trig_BossSkeletRaise_Conditions));
	TriggerAddAction(gg_trg_BossSkeletRaise, Trig_BossSkeletRaise_Actions);
}
boolean Trig_BossSkeletSkillActiv_Conditions() {
	return GetUnitTypeId(GetTriggerUnit()) == 'n00K';
}
nothing Trig_BossSkeletSkillActiv_Actions() {
	IssueTargetOrderById(GetTriggerUnit(), $D007F, GetAttacker());
}
nothing InitTrig_BossSkeletSkillActiv() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_BossSkeletSkillActiv, Player(index), EVENT_PLAYER_UNIT_ATTACKED, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_BossSkeletSkillActiv, Condition(Trig_BossSkeletSkillActiv_Conditions));
	TriggerAddAction(gg_trg_BossSkeletSkillActiv, Trig_BossSkeletSkillActiv_Actions);
}
nothing Trig_Fire_Arrow_Move_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	unit target = LoadUnitHandle(udg_hash, h, 5);
	unit orb = LoadUnitHandle(udg_hash, h, 3);
	effect ef;
	real x = GetUnitX(orb);
	real y = GetUnitY(orb);
	real xt = GetUnitX(target);
	real yt = GetUnitY(target);
	real xorb;
	real yorb;
	real angle = bj_RADTODEG * Atan2((yt - y), (xt - x));
	real dist = SquareRoot(((xt - x) * (xt - x)) + ((yt - y) * (yt - y)));
	player p;
	real damage;
	unit dammi;
	boolean destroy = false;
	SetUnitPosition(orb, xorb, yorb);
	SetUnitFacing(orb, angle);
	if (GetUnitState(target, UNIT_STATE_LIFE) < .405) {
	}
	if (dist < 20. && GetUnitState(target, UNIT_STATE_LIFE) > .405) {
		SetUnitPosition(orb, xt, yt);
		if (GetUnitState(target, UNIT_STATE_LIFE) > .0 && IsUnitType(target, UNIT_TYPE_STRUCTURE) == false && IsUnitType(target, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(target) != 'h00U') {
			UnitDamageTarget(caster, target, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl", target, "chest"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIfb\\AIfbSpecialArt.mdl", target, "chest"));
			UnitApplyTimedLife(dammi, 'BTLF', 1.);
			UnitAddAbility(dammi, 'A0NG');
			IssueTargetOrderById(dammi, $D02B6, target);
		}
	}
	if (destroy) {
		KillUnit(orb);
		DestroyEffect(ef);
		DestroyTimer(t);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
}
nothing Trig_Fire_Arrow_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	unit target = GetSpellTargetUnit();
	real xt = GetUnitX(target);
	real yt = GetUnitY(target);
	real angle = bj_RADTODEG * Atan2((yt - y), (xt - x));
	real damage = 25.;
	unit orb = CreateUnit(p, 'h00U', x, y, angle);
	effect ef = AddSpecialEffectTarget("Abilities\\Weapons\\SearingArrow\\SearingArrowMissile.mdl", orb, "origin");
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	SetUnitX(orb, x + 30. * Cos((angle) * bj_DEGTORAD));
	SetUnitY(orb, y + 30. * Sin((angle) * bj_DEGTORAD));
	SetUnitFlyHeight(orb, 60., .0);
	SetUnitScale(orb, 1.2, 1.2, 1.2);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 2, damage);
	SaveUnitHandle(udg_hash, h, 3, orb);
	SaveEffectHandle(udg_hash, h, 4, ef);
	SaveUnitHandle(udg_hash, h, 5, target);
	TimerStart(t, .03, true, Trig_Fire_Arrow_Move_Actions);
}
boolean Trig_Fire_Arrow_Conditions() {
	return GetSpellAbilityId() == 'A0NF';
}
nothing InitTrig_Fire_Arrow() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Fire_Arrow, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Fire_Arrow, Condition(Trig_Fire_Arrow_Conditions));
	TriggerAddAction(gg_trg_Fire_Arrow, Trig_Fire_Arrow_Actions);
}
boolean Trig_Use_UnholyFrenzy_and_Fire_Arrow_Loop_Is_Enemy_Condition() {
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405) && (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) && (IsPlayerEnemy(udg_Temp_Player[1], GetOwningPlayer(GetFilterUnit())))) != null;
}
boolean Trig_Use_UnholyFrenzy_and_Fire_Arrow_Loop_Is_Ally_Condition() {
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405) && (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) && (IsPlayerAlly(udg_Temp_Player[1], GetOwningPlayer(GetFilterUnit())))) != null;
}
boolean Trig_Use_UnholyFrenzy_and_Fire_Arrow_All_Condition() {
	return (IsPlayerInForce(GetOwningPlayer(GetFilterUnit()), udg_Players_Enemy_Group));
}
nothing Trig_Use_UnholyFrenzy_and_Fire_Arrow_Actions() {
	group gall = CreateGroup();
	group g;
	group g2;
	unit Picked;
	unit target;
	real x;
	real y;
	GroupEnumUnitsInRect(gall, bj_mapInitialPlayableArea, Condition(Trig_Use_UnholyFrenzy_and_Fire_Arrow_All_Condition));
	GroupToGroup(gall, g);
	while (true) {
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A08S') > 0) && GetRandomInt(1, 2) == 1) {
			GroupEnumUnitsInRange(g2, x, y, 600., Condition(Trig_Use_UnholyFrenzy_and_Fire_Arrow_Loop_Is_Ally_Condition));
			RandomUnitFromGroup(1, g2);
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D0085, target);
			}
			GroupClear(g2);
			DestroyGroup(g2);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	GroupToGroup(gall, g);
	while (true) {
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A0NF') > 0) && GetRandomInt(1, 2) == 1) {
			GroupEnumUnitsInRange(g2, x, y, 575., Condition(Trig_Use_UnholyFrenzy_and_Fire_Arrow_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D00C1, target);
			}
			GroupClear(g2);
			DestroyGroup(g2);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	GroupClear(gall);
	DestroyGroup(gall);
}
boolean Trig_Use_UnholyFrenzy_and_Fire_Arrow_Conditions() {
	return (udg_Nomer_samoi_volni == 1);
}
nothing InitTrig_Use_UnholyFrenzy_and_Fire_Arrow() {
	TriggerRegisterTimerEvent(gg_trg_Use_UnholyFrenzy_and_Fire_Arrow, 1., true);
	TriggerAddCondition(gg_trg_Use_UnholyFrenzy_and_Fire_Arrow, Condition(Trig_Use_UnholyFrenzy_and_Fire_Arrow_Conditions));
	TriggerAddAction(gg_trg_Use_UnholyFrenzy_and_Fire_Arrow, Trig_Use_UnholyFrenzy_and_Fire_Arrow_Actions);
}
nothing Trig_Create_Tombstone_Wait_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit tomb = LoadUnitHandle(udg_hash, h, 1);
	effect ef = LoadEffectHandle(udg_hash, h, 2);
	real angle = LoadReal(udg_hash, h, 3);
	real x = GetUnitX(tomb);
	real y = GetUnitY(tomb);
	unit zombie = CreateUnit(GetOwningPlayer(tomb), 'n00H', x, y, angle);
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl", x, y));
	IssuePointOrderById(zombie, $D000F, GetRectCenterX(gg_rct_cast_magi), GetRectCenterY(gg_rct_cast_magi));
	KillUnit(tomb);
	DestroyEffect(ef);
	DestroyTimer(t);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_Create_Tombstone_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	location loc = GetSpellTargetLoc();
	real xt = GetLocationX(loc);
	real yt = GetLocationY(loc);
	real angle = GetRandomReal(-45., 45.) + 270.;
	unit tomb = CreateUnit(p, 'h00E', xt, yt, angle);
	effect ef = AddSpecialEffectTarget("Abilities\\Spells\\Undead\\Graveyard\\GraveMarker.mdl", tomb, "origin");
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	SaveUnitHandle(udg_hash, h, 1, tomb);
	SaveEffectHandle(udg_hash, h, 2, ef);
	SaveReal(udg_hash, h, 3, angle);
	TimerStart(t, 4., false, Trig_Create_Tombstone_Wait_Actions);
	RemoveLocation(loc);
}
boolean Trig_Create_Tombstone_Conditions() {
	return GetSpellAbilityId() == 'A0O3';
}
nothing InitTrig_Create_Tombstone() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Create_Tombstone, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Create_Tombstone, Condition(Trig_Create_Tombstone_Conditions));
	TriggerAddAction(gg_trg_Create_Tombstone, Trig_Create_Tombstone_Actions);
}
nothing Trig_ZombieExploadDeathMove_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit meat = LoadUnitHandle(udg_hash, h, 1);
	unit target = LoadUnitHandle(udg_hash, h, 2);
	effect ef;
	real xm = GetUnitX(meat);
	real ym = GetUnitY(meat);
	real xt = GetUnitX(target);
	real yt = GetUnitY(target);
	real angle = bj_RADTODEG * Atan2(yt - ym, xt - xm);
	real dist = SquareRoot((xt - xm) * (xt - xm) + (yt - ym) * (yt - ym));
	if (dist < 20. || GetUnitState(target, UNIT_STATE_LIFE) < .405) {
		if (GetOwningPlayer(meat) == GetOwningPlayer(target)) {
			SetUnitState(target, UNIT_STATE_LIFE, GetUnitState(target, UNIT_STATE_LIFE) + 60.);
		else
			SetUnitState(target, UNIT_STATE_LIFE, GetUnitState(target, UNIT_STATE_LIFE) - 25.);
		}
		DestroyEffect(ef);
		KillUnit(meat);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	else
		if (IsTerrainPathable(xm + 20. * Cos(angle * bj_DEGTORAD), ym + 20. * Sin(angle * bj_DEGTORAD), PATHING_TYPE_FLYABILITY) == false) {
			SetUnitPosition(meat, xm + 20. * Cos(angle * bj_DEGTORAD), ym + 20. * Sin(angle * bj_DEGTORAD));
		}
	}
}
nothing Trig_ZombieExploadDeath_Actions() {
	unit zomb = GetDyingUnit();
	real x = GetUnitX(zomb);
	real y = GetUnitY(zomb);
	player p = GetOwningPlayer(zomb);
	timer t;
	integer h;
	group g = CreateGroup();
	group grup = CreateGroup();
	unit Picked;
	integer count = 0;
	unit meat;
	effect ef;
	DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Demon\\DemonLargeDeathExplode\\DemonLargeDeathExplode.mdl", x, y));
	GroupEnumUnitsInRange(g, x, y, 325., null);
	while (true) {
		if (Picked == null || count > 3) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			GroupAddUnit(grup, Picked);
		}
		GroupRemoveUnit(g, Picked);
	}
	RandomUnitFromGroup(3, grup);
	GroupClear(g);
	GroupAddGroup(udg_GroupRandomUnitFromGroup, g);
	while (true) {
		if (Picked == null) break;
		SetUnitTimeScale(meat, 2.);
		SaveUnitHandle(udg_hash, h, 1, meat);
		SaveUnitHandle(udg_hash, h, 2, Picked);
		SaveEffectHandle(udg_hash, h, 3, ef);
		TimerStart(t, .04, true, Trig_ZombieExploadDeathMove_Actions);
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	GroupClear(grup);
	DestroyGroup(grup);
}
boolean Trig_ZombieExploadDeath_Conditions() {
	return GetUnitTypeId(GetDyingUnit()) == 'n00H' && GetRandomInt(1, $A) <= 5;
}
nothing InitTrig_ZombieExploadDeath() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_ZombieExploadDeath, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_ZombieExploadDeath, Condition(Trig_ZombieExploadDeath_Conditions));
	TriggerAddAction(gg_trg_ZombieExploadDeath, Trig_ZombieExploadDeath_Actions);
}
nothing Trig_Damned_Soul_move_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit soul = LoadUnitHandle(udg_hash, h, 1);
	group g = LoadGroupHandle(udg_hash, h, 2);
	real damage = LoadReal(udg_hash, h, 3);
	real angle = LoadReal(udg_hash, h, 4);
	integer wait = LoadInteger(udg_hash, h, 5);
	unit caster = LoadUnitHandle(udg_hash, h, 6);
	player p = GetOwningPlayer(caster);
	real x = GetUnitX(soul) + 14. * Cos(angle * bj_DEGTORAD);
	real y = GetUnitY(soul) + 14. * Sin(angle * bj_DEGTORAD);
	effect ef;
	group grup = CreateGroup();
	unit Picked;
	unit dammi;
	if (wait > 0) {
		SaveInteger(udg_hash, h, 5, wait);
		if (IsTerrainPathable(x, y, PATHING_TYPE_FLYABILITY) == false) {
			SetUnitPosition(soul, x, y);
		}
		GroupEnumUnitsInRange(grup, x, y, 125., null);
		while (true) {
			if (Picked == null) break;
			if ((IsUnitInGroup(Picked, udg_PortalCastersMagi) == false) && IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitInGroup(Picked, g) == false && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				UnitApplyTimedLife(dammi, 'BTLF', .5);
				UnitAddAbility(dammi, 'A0OA');
				IssueTargetOrderById(dammi, $D02BC, Picked);
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GargoyleMissile\\GargoyleMissile.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathCoil\\DeathCoilSpecialArt.mdl", Picked, "origin"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\CarrionSwarm\\CarrionSwarmDamage.mdl", Picked, "chest"));
				GroupAddUnit(g, Picked);
			}
			GroupRemoveUnit(grup, Picked);
		}
		SaveGroupHandle(udg_hash, h, 2, g);
	else
		UnitApplyTimedLife(dammi, 'BTLF', 2.5);
		UnitAddAbility(dammi, 'Amrf');
		UnitRemoveAbility(dammi, 'Amrf');
		SetUnitScale(dammi, 1.2, 1.2, 1.2);
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\Possession\\PossessionMissile.mdl", dammi, "origin"));
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\DeathCoil\\DeathCoilSpecialArt.mdl", x, y));
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
		DestroyEffect(ef);
		KillUnit(soul);
		RemoveUnit(soul);
		GroupClear(g);
		DestroyGroup(g);
	}
	GroupClear(grup);
	DestroyGroup(grup);
}
nothing Trig_Damned_Soul_Actions() {
	unit caster = GetSpellAbilityUnit();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	location loc;
	real xt;
	real yt;
	unit soul;
	group g = CreateGroup();
	real damage = 50.;
	integer wait = 50;
	effect ef;
	real angle;
	if (GetSpellTargetUnit() == null) {
		RemoveLocation(loc);
	else
	}
	UnitAddAbility(soul, 'Amrf');
	UnitRemoveAbility(soul, 'Amrf');
	SetUnitScale(soul, 1.2, 1.2, 1.2);
	SetUnitFlyHeight(soul, 80, .0);
	SaveUnitHandle(udg_hash, h, 1, soul);
	SaveGroupHandle(udg_hash, h, 2, g);
	SaveReal(udg_hash, h, 3, damage);
	SaveReal(udg_hash, h, 4, angle);
	SaveInteger(udg_hash, h, 5, wait);
	SaveUnitHandle(udg_hash, h, 6, caster);
	SaveEffectHandle(udg_hash, h, 7, ef);
	TimerStart(t, .03, true, Trig_Damned_Soul_move_Actions);
}
boolean Trig_Damned_Soul_Conditions() {
	return GetSpellAbilityId() == 'A0O9';
}
nothing InitTrig_Damned_Soul() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Damned_Soul, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Damned_Soul, Condition(Trig_Damned_Soul_Conditions));
	TriggerAddAction(gg_trg_Damned_Soul, Trig_Damned_Soul_Actions);
}
boolean Trig_Use_PowerofHorror_and_Curse_and_Slam_Loop_Is_Enemy_Condition() {
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405) && (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) && (IsPlayerEnemy(udg_Temp_Player[1], GetOwningPlayer(GetFilterUnit())))) != null;
}
boolean Trig_Use_PowerofHorror_and_Curse_and_Slam_Loop_Is_Ally_Condition() {
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405) && (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) && (IsPlayerAlly(udg_Temp_Player[1], GetOwningPlayer(GetFilterUnit())))) != null;
}
boolean Trig_Use_PowerofHorror_and_Curse_and_Slam_All_Condition() {
	return (IsPlayerInForce(GetOwningPlayer(GetFilterUnit()), udg_Players_Enemy_Group));
}
nothing Trig_Use_PowerofHorror_and_Curse_and_Slam_Actions() {
	group gall = CreateGroup();
	group g;
	group g2;
	unit Picked;
	unit target;
	real x;
	real y;
	real dist;
	real angle;
	GroupEnumUnitsInRect(gall, bj_mapInitialPlayableArea, Condition(Trig_Use_PowerofHorror_and_Curse_and_Slam_All_Condition));
	GroupToGroup(gall, g);
	while (true) {
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A07X') > 0) && GetRandomInt(1, 2) == 1) {
			GroupEnumUnitsInRange(g2, x, y, 600., Condition(Trig_Use_PowerofHorror_and_Curse_and_Slam_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D00DE, target);
			}
			GroupClear(g2);
			DestroyGroup(g2);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	GroupToGroup(gall, g);
	while (true) {
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A08B') > 0) && GetRandomInt(1, 2) == 1) {
			GroupEnumUnitsInRange(g2, x, y, 575., Condition(Trig_Use_PowerofHorror_and_Curse_and_Slam_Loop_Is_Ally_Condition));
			RandomUnitFromGroup(1, g2);
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D0062, target);
			}
			GroupClear(g2);
			DestroyGroup(g2);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	GroupToGroup(gall, g);
	while (true) {
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A08C') > 0) && GetRandomInt(1, 2) == 1) {
			GroupEnumUnitsInRange(g2, x, y, 600., Condition(Trig_Use_PowerofHorror_and_Curse_and_Slam_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D0062, target);
			}
			GroupClear(g2);
			DestroyGroup(g2);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	GroupToGroup(gall, g);
	while (true) {
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A08F') > 0) && GetRandomInt(1, 2) == 1) {
			GroupEnumUnitsInRange(g2, x, y, 300., Condition(Trig_Use_PowerofHorror_and_Curse_and_Slam_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			if ((target != null)) {
				IssueImmediateOrderById(Picked, $D011D);
			}
			GroupClear(g2);
			DestroyGroup(g2);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	GroupToGroup(gall, g);
	while (true) {
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A08S') > 0) && GetRandomInt(1, 2) == 1) {
			GroupEnumUnitsInRange(g2, x, y, 600., Condition(Trig_Use_PowerofHorror_and_Curse_and_Slam_Loop_Is_Ally_Condition));
			RandomUnitFromGroup(1, g2);
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D00F1, target);
			}
			GroupClear(g2);
			DestroyGroup(g2);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	if (GetRandomInt(1, 40) == 1 && (udg_Is_Fast_Wave_Start_On_Off == false)) {
		GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, g2);
		while (true) {
			if (Picked == null) break;
			UnitAddAbility(target, 'A0O3');
			UnitApplyTimedLife(target, 'BTLF', 2.);
			IssuePointOrderById(target, $D00FA, GetUnitX(Picked) + dist * Cos(angle * bj_DEGTORAD), GetUnitY(Picked) + dist * Sin(angle * bj_DEGTORAD));
			GroupRemoveUnit(g2, Picked);
		}
		GroupClear(g2);
		DestroyGroup(g2);
	}
	GroupToGroup(gall, g);
	while (true) {
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A0O9') > 0) && GetRandomInt(1, 2) == 1) {
			GroupEnumUnitsInRange(g2, x, y, 600., Condition(Trig_Use_PowerofHorror_and_Curse_and_Slam_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D00FA, target);
			}
			GroupClear(g2);
			DestroyGroup(g2);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	GroupToGroup(gall, g);
	while (true) {
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A0PI') > 0) && GetRandomInt(1, 2) == 1) {
			GroupEnumUnitsInRange(g2, x, y, 700., Condition(Trig_Use_PowerofHorror_and_Curse_and_Slam_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D021B, target);
			}
			GroupClear(g2);
			DestroyGroup(g2);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	GroupToGroup(gall, g);
	while (true) {
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A08F') > 0) && GetRandomInt(1, 2) == 1) {
			GroupEnumUnitsInRange(g2, x, y, 200., Condition(Trig_Use_PowerofHorror_and_Curse_and_Slam_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			if ((target != null)) {
				IssueImmediateOrderById(Picked, $D00FB);
			}
			GroupClear(g2);
			DestroyGroup(g2);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	GroupClear(gall);
	DestroyGroup(gall);
}
boolean Trig_Use_PowerofHorror_and_Curse_and_Slam_Conditions() {
	return (udg_Nomer_samoi_volni == 2);
}
nothing InitTrig_Use_PowerofHorror_and_Curse_and_Slam_and_Dumned_Soul() {
	TriggerRegisterTimerEvent(gg_trg_Use_PowerofHorror_and_Curse_and_Slam_and_Dumned_Soul, 1., true);
	TriggerAddCondition(gg_trg_Use_PowerofHorror_and_Curse_and_Slam_and_Dumned_Soul, Condition(Trig_Use_PowerofHorror_and_Curse_and_Slam_Conditions));
	TriggerAddAction(gg_trg_Use_PowerofHorror_and_Curse_and_Slam_and_Dumned_Soul, Trig_Use_PowerofHorror_and_Curse_and_Slam_Actions);
}
nothing Trig_Throw_Meat_Move2_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit u = LoadUnitHandle(udg_hash, h, 1);
	PauseUnit(u, false);
	if (GetUnitState(u, UNIT_STATE_LIFE) >= .405) {
		SetUnitAnimation(u, "stand");
		IssuePointOrderById(u, $D000F, GetRectCenterX(gg_rct_cast_magi), GetRectCenterY(gg_rct_cast_magi));
	}
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_Throw_Meat_Move_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster;
	unit target = LoadUnitHandle(udg_hash, h, 4);
	real damage;
	real stuntime;
	real angle;
	unit dagger = LoadUnitHandle(udg_hash, h, 7);
	real x = GetUnitX(dagger);
	real y = GetUnitY(dagger);
	real xt = GetUnitX(target);
	real yt = GetUnitY(target);
	real dist;
	unit zombie;
	integer h2;
	timer t2;
	SetUnitPosition(dagger, x + 21. * Cos((angle) * bj_DEGTORAD), y + 21. * Sin((angle) * bj_DEGTORAD));
	if (dist < 50. || GetUnitState(target, UNIT_STATE_LIFE) < .405) {
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\MeatwagonMissile\\MeatwagonMissile.mdl", target, "chest"));
		UnitDamageTarget(caster, target, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
		StunUnitTimed(target, stuntime);
		DestroyEffect(LoadEffectHandle(udg_hash, h, 8));
		PauseUnit(zombie, true);
		SetUnitAnimation(zombie, "Birth");
		SaveUnitHandle(udg_hash, h2, 1, zombie);
		TimerStart(t2, 2.33, false, Trig_Throw_Meat_Move2_Actions);
		RemoveUnit(dagger);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
}
nothing Trig_Throw_Meat_Actions() {
	unit caster = GetSpellAbilityUnit();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	unit target = GetSpellTargetUnit();
	real tx = GetUnitX(target);
	real ty = GetUnitY(target);
	real damage = 100.;
	real stuntime = 2.;
	real angle;
	real dist;
	unit dagger;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	effect ef;
	SetUnitX(dagger, x + 150. * Cos((angle + 90.) * bj_DEGTORAD));
	SetUnitY(dagger, y + 150. * Sin((angle + 90.) * bj_DEGTORAD));
	UnitAddAbility(dagger, 'Amrf');
	UnitRemoveAbility(dagger, 'Amrf');
	SetUnitScale(dagger, 1.5, 1.5, 1.5);
	SetUnitPathing(dagger, false);
	SetUnitFlyHeight(dagger, 200., .0);
	SetUnitFlyHeight(dagger, 25., (($AF * 700) / dist));
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 2, damage);
	SaveReal(udg_hash, h, 3, stuntime);
	SaveUnitHandle(udg_hash, h, 4, target);
	SaveUnitHandle(udg_hash, h, 7, dagger);
	SaveEffectHandle(udg_hash, h, 8, ef);
	TimerStart(t, .03, true, Trig_Throw_Meat_Move_Actions);
}
boolean Trig_Throw_Meat_Conditions() {
	return GetSpellAbilityId() == 'A0PI';
}
nothing InitTrig_Throw_Meat() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Throw_Meat, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Throw_Meat, Condition(Trig_Throw_Meat_Conditions));
	TriggerAddAction(gg_trg_Throw_Meat, Trig_Throw_Meat_Actions);
}
nothing Trig_Earth_Clap_WAIT_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	unit dammi;
	real xc = GetUnitX(caster);
	real yc = GetUnitY(caster);
	player p = GetOwningPlayer(caster);
	real damage = 100.;
	group g = CreateGroup();
	unit Picked;
	GroupEnumUnitsInRange(g, xc, yc, 200., null);
	while (true) {
		if (Picked == null) break;
		if ((IsUnitInGroup(Picked, udg_PortalCastersMagi) == false) && IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			UnitApplyTimedLife(dammi, 'BTLF', 1.);
			UnitAddAbility(dammi, 'A0FE');
			IssueTargetOrderById(dammi, $D006B, Picked);
			UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
		}
		GroupRemoveUnit(g, Picked);
	}
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", xc, yc));
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	GroupClear(g);
	DestroyGroup(g);
}
nothing Trig_Earth_Clap_Actions() {
	unit caster = GetSpellAbilityUnit();
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	SaveUnitHandle(udg_hash, h, 1, caster);
	TimerStart(t, .5, false, Trig_Earth_Clap_WAIT_Actions);
}
boolean Trig_Earth_Clap_Conditions() {
	return GetSpellAbilityId() == 'A08F';
}
nothing InitTrig_Earth_Clap() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Earth_Clap, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Earth_Clap, Condition(Trig_Earth_Clap_Conditions));
	TriggerAddAction(gg_trg_Earth_Clap, Trig_Earth_Clap_Actions);
}
nothing Trig_Ghoul_Jump_Move_Dest_Actions() {
	KillDestructable(GetEnumDestructable());
}
nothing Trig_Ghoul_Jump_Move_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	integer wait = LoadInteger(udg_hash, h, 5);
	real face = LoadReal(udg_hash, h, 6);
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	rect r;
	if (wait > 0 && GetUnitState(caster, UNIT_STATE_LIFE) > .405) {
		SaveInteger(udg_hash, h, 5, wait);
		SetUnitFacing(caster, face);
	else
		SetUnitAnimation(caster, "stand");
		EnumDestructablesInRect(r, null, Trig_Ghoul_Jump_Move_Dest_Actions);
		SetUnitPathing(caster, true);
		SetUnitTimeScale(caster, 1.);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
		RemoveRect(r);
	}
}
nothing Trig_Ghoul_Jump_Actions() {
	unit caster = GetSpellAbilityUnit();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	unit target = GetSpellTargetUnit();
	real angle;
	location loc;
	real tx;
	real ty;
	real dist;
	real time;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	SetUnitAnimation(caster, "stand");
	SetUnitPathing(caster, false);
	SetUnitAnimationByIndex(caster, $A);
	if (target == null) {
	else
	}
	SetUnitTimeScale(caster, (1 / time));
	MoveUnit(caster, time, 500., .0, angle, (dist / 3), true);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveInteger(udg_hash, h, 5, R2I(dist / 15.));
	SaveReal(udg_hash, h, 6, angle);
	TimerStart(t, .03, true, Trig_Ghoul_Jump_Move_Actions);
	RemoveLocation(loc);
}
boolean Trig_Ghoul_Jump_Conditions() {
	return GetSpellAbilityId() == 'A0NH';
}
nothing InitTrig_Ghoul_Jump() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Ghoul_Jump, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Ghoul_Jump, Condition(Trig_Ghoul_Jump_Conditions));
	TriggerAddAction(gg_trg_Ghoul_Jump, Trig_Ghoul_Jump_Actions);
}
nothing Trig_BurrowStrike_Move_Dest_Actions() {
	KillDestructable(GetEnumDestructable());
}
nothing Trig_BurrowStrike_Move_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	group gdamage = LoadGroupHandle(udg_hash, h, 2);
	integer wait3 = LoadInteger(udg_hash, h, 3);
	integer wait2 = LoadInteger(udg_hash, h, 4);
	integer wait = LoadInteger(udg_hash, h, 5);
	real face = LoadReal(udg_hash, h, 6);
	real time = LoadReal(udg_hash, h, 7);
	integer rewait = LoadInteger(udg_hash, h, 8);
	integer impale = LoadInteger(udg_hash, h, 9);
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	player p = GetOwningPlayer(caster);
	group g;
	unit Picked;
	real angle;
	real angle2;
	unit dammi;
	boolean alife = true;
	rect r;
	unit dammief;
	if (GetUnitState(caster, UNIT_STATE_LIFE) < .405) {
	}
	if (wait3 > 0) {
		SaveInteger(udg_hash, h, 3, wait3);
	}
	if (wait3 <= 0 && wait > 0) {
		if (wait == rewait) {
			MoveUnit(caster, time, 400., .0, face, .0, true);
			PauseUnit(caster, true);
		}
		SaveInteger(udg_hash, h, 5, wait);
		if (impale < 5) {
		else
			UnitApplyTimedLife(dammief, 'BTLF', 1.);
			SetUnitScale(dammief, 2., 2., 2.5);
			DestroyEffect(AddSpecialEffectTarget("Effects\\ImpaleMissTarget.mdl", dammief, "origin"));
		}
		SaveInteger(udg_hash, h, 9, impale);
		EnumDestructablesInRect(r, null, Trig_BurrowStrike_Move_Dest_Actions);
		GroupEnumUnitsInRange(g, x, y, 125., null);
		while (true) {
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && IsUnitInGroup(Picked, gdamage) == false && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				GroupAddUnit(gdamage, Picked);
				DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", Picked, "chest"));
				UnitApplyTimedLife(dammi, 'BTLF', 1.);
				UnitAddAbility(dammi, 'A01U');
				IssueTargetOrderById(dammi, $D007F, Picked);
				if (GetOwningPlayer(Picked) != Player($F)) {
					if ((angle2 <= (GetUnitFacing(caster) + 210.) && angle2 >= (GetUnitFacing(caster) + 180.))) {
					}
					if ((angle2 <= (GetUnitFacing(caster) + 180.) && angle2 >= (GetUnitFacing(caster) + 150.))) {
					}
					MoveUnit(Picked, 1., 400., 400., angle, 200., false);
				}
			}
			GroupRemoveUnit(g, Picked);
		}
		GroupClear(g);
		DestroyGroup(g);
		RemoveRect(r);
		SaveGroupHandle(udg_hash, h, 2, gdamage);
	}
	if (wait <= 0 && wait2 > 0) {
		if (wait2 == $F) {
			SetUnitAnimationByIndex(caster, $A);
		}
		SaveInteger(udg_hash, h, 4, wait2);
	}
	if (wait2 <= 0 || alife == false) {
		if (alife) {
			SetUnitAnimation(caster, "stand");
		}
		PauseUnit(caster, false);
		SetUnitPathing(caster, true);
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
}
nothing Trig_BurrowStrike_Actions() {
	unit caster = GetSpellAbilityUnit();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	unit target = GetSpellTargetUnit();
	real angle;
	group gdamage = CreateGroup();
	location loc;
	real tx;
	real ty;
	real dist;
	real time;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	integer wait;
	integer wait2 = 27;
	integer wait3 = 30;
	integer impale = 0;
	SetUnitAnimation(caster, "stand");
	SetUnitPathing(caster, false);
	SetUnitAnimationByIndex(caster, 8);
	SetUnitTimeScale(caster, 1.);
	UnitPeriodicPostionMove(caster, .03, .5);
	if (target == null) {
	else
	}
	if (target == caster) {
	}
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveGroupHandle(udg_hash, h, 2, gdamage);
	SaveInteger(udg_hash, h, 3, wait3);
	SaveInteger(udg_hash, h, 4, wait2);
	SaveInteger(udg_hash, h, 5, wait);
	SaveReal(udg_hash, h, 6, angle);
	SaveReal(udg_hash, h, 7, time);
	SaveInteger(udg_hash, h, 8, wait);
	SaveInteger(udg_hash, h, 9, impale);
	TimerStart(t, .03, true, Trig_BurrowStrike_Move_Actions);
	SetUnitAnimationByIndex(caster, 8);
	PauseUnit(caster, true);
	SetUnitAnimationByIndex(caster, 8);
	RemoveLocation(loc);
}
boolean Trig_BurrowStrike_Conditions() {
	return GetSpellAbilityId() == 'A0NO';
}
nothing InitTrig_BurrowStrike() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_BurrowStrike, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_BurrowStrike, Condition(Trig_BurrowStrike_Conditions));
	TriggerAddAction(gg_trg_BurrowStrike, Trig_BurrowStrike_Actions);
}
boolean Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Loop_Raise_Dead_Condition() {
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) < .405) && (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) && (GetUnitTypeId(GetFilterUnit()) != 'h00U')) != null;
}
boolean Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Loop_Is_Enemy_Condition() {
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405) && (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) && (IsPlayerEnemy(udg_Temp_Player[1], GetOwningPlayer(GetFilterUnit())))) != null;
}
boolean Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Loop_Is_Ally_Condition() {
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405) && (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) && (IsPlayerAlly(udg_Temp_Player[1], GetOwningPlayer(GetFilterUnit())))) != null;
}
boolean Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_All_Condition() {
	return (IsPlayerInForce(GetOwningPlayer(GetFilterUnit()), udg_Players_Enemy_Group));
}
nothing Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Actions() {
	group gall = CreateGroup();
	group g;
	group g2;
	unit Picked;
	unit target;
	real x;
	real y;
	real angle;
	GroupEnumUnitsInRect(gall, bj_mapInitialPlayableArea, Condition(Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_All_Condition));
	GroupToGroup(gall, g);
	while (true) {
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A086') > 0) && GetRandomInt(1, 2) == 1) {
			GroupEnumUnitsInRange(g2, x, y, 600., Condition(Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Loop_Raise_Dead_Condition));
			RandomUnitFromGroup(1, g2);
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			if ((target != null)) {
				IssueImmediateOrderById(Picked, $D00E5);
			}
			GroupClear(g2);
			DestroyGroup(g2);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	GroupToGroup(gall, g);
	while (true) {
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A08K') > 0) && GetRandomInt(1, 2) == 1) {
			GroupEnumUnitsInRange(g2, x, y, 800., Condition(Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D00FE, target);
			}
			GroupClear(g2);
			DestroyGroup(g2);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	GroupToGroup(gall, g);
	while (true) {
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A08K') > 0) && GetRandomInt(1, 2) == 1) {
			GroupEnumUnitsInRange(g2, x, y, 800., Condition(Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Loop_Is_Ally_Condition));
			RandomUnitFromGroup(1, g2);
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D00FE, target);
			}
			GroupClear(g2);
			DestroyGroup(g2);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	GroupToGroup(gall, g);
	while (true) {
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A08M') > 0) && GetRandomInt(1, 2) == 1) {
			GroupEnumUnitsInRange(g2, x, y, 600., Condition(Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			if ((target != null)) {
				IssueImmediateOrderById(Picked, $D009E);
			}
			GroupClear(g2);
			DestroyGroup(g2);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	GroupToGroup(gall, g);
	while (true) {
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A0NO') > 0) && GetRandomInt(1, 2) == 1) {
			GroupEnumUnitsInRange(g2, x, y, 900., Condition(Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			if ((target != null)) {
				IssuePointOrderById(Picked, $D00FA, GetUnitX(target) + 175. * Cos(angle * bj_DEGTORAD), GetUnitY(target) + 175. * Sin(angle * bj_DEGTORAD));
			}
			GroupClear(g2);
			DestroyGroup(g2);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	GroupToGroup(gall, g);
	while (true) {
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A0NH') > 0) && GetRandomInt(1, 2) == 1) {
			GroupEnumUnitsInRange(g2, x, y, 800., Condition(Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D00FA, target);
			}
			GroupClear(g2);
			DestroyGroup(g2);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	GroupClear(gall);
	DestroyGroup(gall);
}
boolean Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Conditions() {
	return (udg_Nomer_samoi_volni == 3);
}
nothing InitTrig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump() {
	TriggerRegisterTimerEvent(gg_trg_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump, 1., true);
	TriggerAddCondition(gg_trg_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump, Condition(Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Conditions));
	TriggerAddAction(gg_trg_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump, Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Actions);
}
nothing Trig_BeetleCorpseBurrowCast_Actions() {
	IssueImmediateOrderById(GetTriggerUnit(), $D0235);
}
boolean Trig_BeetleCorpseBurrowCast_Conditions() {
	return (GetUnitTypeId(GetTriggerUnit()) == 'u004' || GetUnitTypeId(GetTriggerUnit()) == 'u00D') && 50. > (GetUnitState(GetTriggerUnit(), UNIT_STATE_LIFE) / GetUnitState(GetTriggerUnit(), UNIT_STATE_MAX_LIFE) * 'd');
}
nothing InitTrig_BeetleCorpseBurrowCast() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_BeetleCorpseBurrowCast, Player(index), EVENT_PLAYER_UNIT_ATTACKED, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_BeetleCorpseBurrowCast, Condition(Trig_BeetleCorpseBurrowCast_Conditions));
	TriggerAddAction(gg_trg_BeetleCorpseBurrowCast, Trig_BeetleCorpseBurrowCast_Actions);
}
nothing Trig_BeetleCorpseBurrowAttackBase_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit beetle = LoadUnitHandle(udg_hash, h, 1);
	IssuePointOrderById(beetle, $D000F, GetRectCenterX(gg_rct_cast_magi), GetRectCenterY(gg_rct_cast_magi));
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_BeetleCorpseBurrowPeriodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit beetle = LoadUnitHandle(udg_hash, h, 1);
	SetUnitState(beetle, UNIT_STATE_MANA, GetUnitState(beetle, UNIT_STATE_MANA) + 60.);
	IssueImmediateOrderById(beetle, $D0236);
	DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl", GetUnitX(beetle), GetUnitY(beetle)));
	TimerStart(t, 1.75, false, Trig_BeetleCorpseBurrowAttackBase_Actions);
}
nothing Trig_BeetleCorpseBurrow_Actions() {
	unit beetle = GetSpellAbilityUnit();
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	SaveUnitHandle(udg_hash, h, 1, beetle);
	DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl", GetUnitX(beetle), GetUnitY(beetle)));
	TimerStart(t, GetRandomReal(3.5, 7.5), false, Trig_BeetleCorpseBurrowPeriodic_Actions);
}
boolean Trig_BeetleCorpseBurrow_Conditions() {
	return (GetSpellAbilityId() == 'A07Z' && GetUnitTypeId(GetSpellAbilityUnit()) == 'u004') || (GetSpellAbilityId() == 'A081' && GetUnitTypeId(GetSpellAbilityUnit()) == 'u00D');
}
nothing InitTrig_BeetleCorpseBurrow() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_BeetleCorpseBurrow, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_BeetleCorpseBurrow, Condition(Trig_BeetleCorpseBurrow_Conditions));
	TriggerAddAction(gg_trg_BeetleCorpseBurrow, Trig_BeetleCorpseBurrow_Actions);
}
nothing Trig_Cocoon_periodic_Creation_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit cocoon = LoadUnitHandle(udg_hash, h, 1);
	integer check = LoadInteger(udg_hash, h, 2);
	real scale = .75 + (check * .0375);
	unit spider;
	if (check < 20 && GetUnitState(cocoon, UNIT_STATE_LIFE) > .405) {
		SaveInteger(udg_hash, h, 2, check);
		SetUnitScale(cocoon, scale, scale, scale);
	else
		if (check >= 20) {
			IssuePointOrderById(spider, $D000F, GetRectCenterX(gg_rct_cast_magi), GetRectCenterY(gg_rct_cast_magi));
			DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Demon\\DemonLargeDeathExplode\\DemonLargeDeathExplode.mdl", GetUnitX(cocoon), GetUnitY(cocoon)));
		}
		KillUnit(cocoon);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
}
nothing Trig_Cocoon_Creation_Actions() {
	unit spider = GetDyingUnit();
	real x = GetUnitX(spider);
	real y = GetUnitY(spider);
	unit cocoon = CreateUnit(GetOwningPlayer(spider), 'n011', x, y, GetRandomReal(.0, 360.));
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	integer check = 0;
	DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Demon\\DemonLargeDeathExplode\\DemonLargeDeathExplode.mdl", x, y));
	SaveUnitHandle(udg_hash, h, 1, cocoon);
	SaveInteger(udg_hash, h, 2, check);
	TimerStart(t, .5, true, Trig_Cocoon_periodic_Creation_Actions);
}
boolean Trig_Cocoon_Creation_Conditions() {
	return GetUnitTypeId(GetDyingUnit()) == 'n00R' && GetRandomInt(1, 3) == 1;
}
nothing InitTrig_Cocoon_Creation() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Cocoon_Creation, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Cocoon_Creation, Condition(Trig_Cocoon_Creation_Conditions));
	TriggerAddAction(gg_trg_Cocoon_Creation, Trig_Cocoon_Creation_Actions);
}
boolean Trig_Poisonous_Spittle_Cast_Conditions() {
	return GetUnitTypeId(GetAttacker()) == 'n00R' && GetRandomInt(1, 6) == 1;
}
nothing Trig_Poisonous_Spittle_Cast_Actions() {
	IssueTargetOrderById(GetAttacker(), $D02B6, GetTriggerUnit());
}
nothing InitTrig_Poisonous_Spittle_Cast() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Poisonous_Spittle_Cast, Player(index), EVENT_PLAYER_UNIT_ATTACKED, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Poisonous_Spittle_Cast, Condition(Trig_Poisonous_Spittle_Cast_Conditions));
	TriggerAddAction(gg_trg_Poisonous_Spittle_Cast, Trig_Poisonous_Spittle_Cast_Actions);
}
nothing Trig_Holes_Of_Grave_Diggers_Debug_Kill_Actions() {
	RemoveUnit(GetDyingUnit());
	FlushChildHashtable(udg_hash, GetHandleId(GetDyingUnit()));
}
boolean Trig_Holes_Of_Grave_Diggers_Debug_Kill_Conditions() {
	return GetUnitTypeId(GetDyingUnit()) == 'u00H';
}
nothing InitTrig_Holes_Of_Grave_Diggers_Debug_Kill() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Holes_Of_Grave_Diggers_Debug_Kill, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Holes_Of_Grave_Diggers_Debug_Kill, Condition(Trig_Holes_Of_Grave_Diggers_Debug_Kill_Conditions));
	TriggerAddAction(gg_trg_Holes_Of_Grave_Diggers_Debug_Kill, Trig_Holes_Of_Grave_Diggers_Debug_Kill_Actions);
}
nothing Trig_Holes_Of_Grave_Diggers_AttackBase_Actions() {
	timer tsp = GetExpiredTimer();
	integer hsp = GetHandleId(tsp);
	unit spider = LoadUnitHandle(udg_hash, hsp, 1);
	SetUnitAnimation(spider, "stand");
	SetUnitMoveSpeed(spider, GetUnitDefaultMoveSpeed(spider));
	IssuePointOrderById(spider, $D000F, GetRectCenterX(gg_rct_cast_magi), GetRectCenterY(gg_rct_cast_magi));
	FlushChildHashtable(udg_hash, hsp);
	DestroyTimer(tsp);
}
nothing Trig_Holes_Of_Grave_Diggers_periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	real x = LoadReal(udg_hash, h, 1);
	real y = LoadReal(udg_hash, h, 2);
	unit hole = LoadUnitHandle(udg_hash, h, 3);
	unit dammi;
	effect ef;
	integer check = LoadInteger(udg_hash, h, 6);
	player p = LoadPlayerHandle(udg_hash, h, 7);
	unit spider;
	timer tsp;
	integer hsp;
	if (GetUnitState(hole, UNIT_STATE_LIFE) > .405 && check > 0) {
		SaveInteger(udg_hash, h, 6, check);
		SetUnitAnimationByIndex(spider, 9);
		SetUnitMoveSpeed(spider, .0);
		SaveUnitHandle(udg_hash, hsp, 1, spider);
		TimerStart(tsp, 1., false, Trig_Holes_Of_Grave_Diggers_AttackBase_Actions);
	else
		DestroyEffect(ef);
		KillUnit(dammi);
		KillUnit(hole);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
}
nothing Trig_Holes_Of_Grave_Diggers_Cast_Actions() {
	unit caster = GetSpellAbilityUnit();
	location loc = GetSpellTargetLoc();
	real x = GetLocationX(loc);
	real y = GetLocationY(loc);
	unit hole = CreateUnit(GetOwningPlayer(caster), 'u00H', x, y, GetRandomReal(.0, 360.));
	unit dammi = CreateUnit(GetOwningPlayer(caster), 'h00U', x, y, .0);
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	effect ef;
	integer check = $A;
	SetUnitAnimationByIndex(hole, 8);
	SetUnitScale(dammi, 2., 2., 2.);
	SetUnitVertexColor(dammi, $C8, $C8, $C8, $AF);
	SaveReal(udg_hash, h, 1, x);
	SaveReal(udg_hash, h, 2, y);
	SaveUnitHandle(udg_hash, h, 3, hole);
	SaveUnitHandle(udg_hash, h, 4, dammi);
	SaveEffectHandle(udg_hash, h, 5, ef);
	SaveInteger(udg_hash, h, 6, check);
	SavePlayerHandle(udg_hash, h, 7, GetOwningPlayer(caster));
	TimerStart(t, 1.5, true, Trig_Holes_Of_Grave_Diggers_periodic_Actions);
	RemoveLocation(loc);
}
boolean Trig_Holes_Of_Grave_Diggers_Cast_Conditions() {
	return GetSpellAbilityId() == 'A0E2';
}
nothing InitTrig_Holes_Of_Grave_Diggers_Cast() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Holes_Of_Grave_Diggers_Cast, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Holes_Of_Grave_Diggers_Cast, Condition(Trig_Holes_Of_Grave_Diggers_Cast_Conditions));
	TriggerAddAction(gg_trg_Holes_Of_Grave_Diggers_Cast, Trig_Holes_Of_Grave_Diggers_Cast_Actions);
}
nothing Trig_Nerub_Spider_Actions() {
	unit caster = GetSpellAbilityUnit();
	real xt;
	player p = GetOwningPlayer(caster);
	real yt;
	location loc;
	unit target = GetSpellTargetUnit();
	unit dammi;
	if (target != null) {
	else
	}
	IssuePointOrderById(dammi, $D000F, GetRectCenterX(gg_rct_cast_magi), GetRectCenterY(gg_rct_cast_magi));
	IssuePointOrderById(dammi, $D000F, GetRectCenterX(gg_rct_cast_magi), GetRectCenterY(gg_rct_cast_magi));
	RemoveLocation(loc);
}
boolean Trig_Nerub_Spider_Conditions() {
	return GetSpellAbilityId() == 'A08U';
}
nothing InitTrig_Nerub_Spider() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Nerub_Spider, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Nerub_Spider, Condition(Trig_Nerub_Spider_Conditions));
	TriggerAddAction(gg_trg_Nerub_Spider, Trig_Nerub_Spider_Actions);
}
boolean Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Dead_Condition() {
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) < .405) && (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) && (GetUnitTypeId(GetFilterUnit()) != 'h00U')) != null;
}
boolean Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Loop_Is_Enemy_Condition() {
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405) && (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) && (IsPlayerEnemy(udg_Temp_Player[1], GetOwningPlayer(GetFilterUnit())))) != null;
}
boolean Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Loop_Is_Ally_Condition() {
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405) && (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) && (IsPlayerAlly(udg_Temp_Player[1], GetOwningPlayer(GetFilterUnit())))) != null;
}
boolean Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_All_Condition() {
	return (IsPlayerInForce(GetOwningPlayer(GetFilterUnit()), udg_Players_Enemy_Group));
}
nothing Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Actions() {
	group gall = CreateGroup();
	group g;
	group g2;
	unit Picked;
	unit target;
	real x;
	real y;
	real angle;
	GroupEnumUnitsInRect(gall, bj_mapInitialPlayableArea, Condition(Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_All_Condition));
	GroupToGroup(gall, g);
	while (true) {
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A0DY') > 0) && GetRandomInt(1, 2) == 1) {
			GroupEnumUnitsInRange(g2, x, y, 600., Condition(Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Loop_Is_Ally_Condition));
			RandomUnitFromGroup(1, g2);
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D0062, target);
			}
			GroupClear(g2);
			DestroyGroup(g2);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	GroupToGroup(gall, g);
	while (true) {
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A0E2') > 0) && GetRandomInt(1, 2) == 1) {
			GroupEnumUnitsInRange(g2, x, y, 700., Condition(Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			if ((target != null)) {
				IssuePointOrderById(Picked, $D009D, GetUnitX(target), GetUnitY(target));
			}
			GroupClear(g2);
			DestroyGroup(g2);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	GroupToGroup(gall, g);
	while (true) {
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A08U') > 0) && GetRandomInt(1, 2) == 1) {
			GroupEnumUnitsInRange(g2, x, y, 900., Condition(Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			if ((target != null)) {
				IssuePointOrderById(Picked, $D0278, GetUnitX(target), GetUnitY(target));
			}
			GroupClear(g2);
			DestroyGroup(g2);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	GroupToGroup(gall, g);
	while (true) {
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A082') > 0) && GetRandomInt(1, 2) == 1) {
			GroupEnumUnitsInRange(g2, x, y, 250., Condition(Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D022F, target);
			}
			GroupClear(g2);
			DestroyGroup(g2);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	GroupToGroup(gall, g);
	while (true) {
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A08Q') > 0) && GetRandomInt(1, 2) == 1) {
			GroupEnumUnitsInRange(g2, x, y, 500., Condition(Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D00F3, target);
			}
			GroupClear(g2);
			DestroyGroup(g2);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	GroupToGroup(gall, g);
	while (true) {
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A08T') > 0) && GetRandomInt(1, 2) == 1) {
			GroupEnumUnitsInRange(g2, x, y, 650., Condition(Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D02B6, target);
			}
			GroupClear(g2);
			DestroyGroup(g2);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	GroupClear(gall);
	DestroyGroup(gall);
}
boolean Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Conditions() {
	return (udg_Nomer_samoi_volni == 4);
}
nothing InitTrig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger() {
	TriggerRegisterTimerEvent(gg_trg_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger, 1., true);
	TriggerAddCondition(gg_trg_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger, Condition(Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Conditions));
	TriggerAddAction(gg_trg_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger, Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Actions);
}
nothing Trig_Damned_Ents_Reincarnation_End_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit damnedent = LoadUnitHandle(udg_hash, h, 4);
	SetUnitTimeScale(damnedent, 1.);
	PauseUnit(damnedent, false);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_Damned_Ents_Reincarnation_Recovery_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit ent = LoadUnitHandle(udg_hash, h, 1);
	unit damnedent = LoadUnitHandle(udg_hash, h, 4);
	real x = LoadReal(udg_hash, h, 2);
	real y = LoadReal(udg_hash, h, 3);
	group g = CreateGroup();
	unit Picked;
	SetUnitVertexColor(damnedent, $FF, $FF, $FF, $FF);
	DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl", x, y));
	SetUnitTimeScale(damnedent, -.1);
	SetUnitAnimation(damnedent, "Death");
	GroupEnumUnitsInRange(g, x, y, 250., null);
	UnitRemoveAbility(damnedent, 'Avul');
	while (true) {
		if (Picked == null) break;
		if (IsUnitAlly(Picked, GetOwningPlayer(damnedent)) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
			SetUnitState(Picked, UNIT_STATE_LIFE, GetUnitState(Picked, UNIT_STATE_LIFE) + 125.);
		}
		if (IsUnitEnemy(Picked, GetOwningPlayer(damnedent)) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			UnitDamageTarget(damnedent, Picked, 80., false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
		}
		GroupRemoveUnit(g, Picked);
	}
	TimerStart(t, 1.5, false, Trig_Damned_Ents_Reincarnation_End_Actions);
	RemoveUnit(ent);
	GroupClear(g);
	DestroyGroup(g);
}
nothing Trig_Damned_Ents_Reincarnation_Actions() {
	unit ent = GetDyingUnit();
	real x = GetUnitX(ent);
	real y = GetUnitY(ent);
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	unit damnedent = CreateUnit(GetOwningPlayer(ent), GetUnitTypeId(ent), x, y, GetUnitFacing(ent));
	PauseUnit(damnedent, true);
	SetUnitAnimation(damnedent, "Death");
	UnitAddAbility(damnedent, 'Avul');
	SaveUnitHandle(udg_hash, h, 1, ent);
	SaveUnitHandle(udg_hash, h, 4, damnedent);
	SaveReal(udg_hash, h, 2, x);
	SaveReal(udg_hash, h, 3, y);
	SetUnitVertexColor(damnedent, $FF, $FF, $FF, 0);
	TimerStart(t, 1.75, false, Trig_Damned_Ents_Reincarnation_Recovery_Actions);
}
boolean Trig_Damned_Ents_Reincarnation_Conditions() {
	return GetUnitAbilityLevel(GetDyingUnit(), 'A0E1') > 0 && GetRandomInt(1, 4) == 1;
}
nothing InitTrig_Damned_Ents_Reincarnation() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Damned_Ents_Reincarnation, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Damned_Ents_Reincarnation, Condition(Trig_Damned_Ents_Reincarnation_Conditions));
	TriggerAddAction(gg_trg_Damned_Ents_Reincarnation, Trig_Damned_Ents_Reincarnation_Actions);
}
nothing Trig_Rage_of_Decay_ent_attack_base_Actions() {
	timer tsp = GetExpiredTimer();
	integer hsp = GetHandleId(tsp);
	unit ent = LoadUnitHandle(udg_hash, hsp, 1);
	if (ent != null) {
		SetUnitAnimation(ent, "Stand");
		PauseUnit(ent, false);
		IssuePointOrderById(ent, $D000F, GetRectCenterX(gg_rct_cast_magi), GetRectCenterY(gg_rct_cast_magi));
	}
	FlushChildHashtable(udg_hash, hsp);
	DestroyTimer(tsp);
}
nothing Trig_Rage_of_Decay_periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	player p = GetOwningPlayer(caster);
	real x = LoadReal(udg_hash, h, 2);
	real y = LoadReal(udg_hash, h, 3);
	integer order = GetUnitCurrentOrder(caster);
	unit dammi;
	group g;
	unit Picked;
	real rx = 0;
	real ry = 0;
	unit ent;
	integer entid = 0;
	integer random = GetRandomInt(1, $F);
	integer efrandom = GetRandomInt(2, 4);
	integer orderId;
	timer tsp;
	integer hsp;
	if ((orderId != 0)) {
	else
		if ((orderId != 0)) {
		}
	}
	if (order == orderId) {
		GroupEnumUnitsInRange(g, rx, ry, 125., null);
		if (random <= 8) {
		}
		if (random >= 9 && random <= $D) {
		}
		if (random >= $E) {
		}
		DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\NightElf\\EntBirthTarget\\EntBirthTarget.mdl", ent, "chest"));
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl", ent, "chest"));
		PauseUnit(ent, true);
		SetUnitAnimation(ent, "Attack Spell");
		SaveUnitHandle(udg_hash, hsp, 1, ent);
		TimerStart(tsp, 1.6, false, Trig_Rage_of_Decay_ent_attack_base_Actions);
		while (true) {
			if (efrandom < 0) break;
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\NightElf\\EntanglingRoots\\EntanglingRootsTarget.mdl", GetRandomReal(rx - GetRandomReal(20., 125.), rx + GetRandomReal(20., 125.)), GetRandomReal(ry - GetRandomReal(20., 125.), ry + GetRandomReal(20., 125.))));
		}
		while (true) {
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				UnitDamageTarget(caster, Picked, 150., false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GreenDragonMissile\\GreenDragonMissile.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl", Picked, "chest"));
				UnitApplyTimedLife(dammi, 'BTLF', 2.);
				UnitAddAbility(dammi, 'A08Z');
				IssueTargetOrderById(dammi, $D00CB, Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
	else
		SetUnitTimeScale(caster, 1.);
		DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl", x, y));
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	GroupClear(g);
	DestroyGroup(g);
}
nothing Trig_Rage_of_Decay_Actions() {
	unit caster = GetSpellAbilityUnit();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	SetUnitTimeScale(caster, 3.);
	DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl", GetUnitX(caster), GetUnitY(caster)));
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Tranquility\\Tranquility.mdl", caster, "chest"));
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 2, x);
	SaveReal(udg_hash, h, 3, y);
	TimerStart(t, .3, true, Trig_Rage_of_Decay_periodic_Actions);
}
boolean Trig_Rage_of_Decay_Conditions() {
	return GetSpellAbilityId() == 'A091';
}
nothing InitTrig_Rage_of_Decay() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Rage_of_Decay, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Rage_of_Decay, Condition(Trig_Rage_of_Decay_Conditions));
	TriggerAddAction(gg_trg_Rage_of_Decay, Trig_Rage_of_Decay_Actions);
}
boolean Trig_Use_ThrowStone_and_TurnIntoEnt_Conditions() {
	return (udg_Nomer_samoi_volni == 5);
}
boolean Trig_Use_ThrowStone_and_TurnIntoEnt_Func002C() {
	return (GetUnitAbilityLevelSwapped('A094', GetTriggerUnit()) > 0) && (GetRandomInt(1, 2) == 1) && (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group));
}
boolean Trig_Use_ThrowStone_and_TurnIntoEnt_Func003C() {
	return (GetUnitAbilityLevelSwapped('A094', GetAttacker()) > 0) && (GetRandomInt(1, 2) == 1) && (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group));
}
nothing Trig_Use_ThrowStone_and_TurnIntoEnt_Actions() {
	if ((Trig_Use_ThrowStone_and_TurnIntoEnt_Func002C())) {
		IssueTargetOrderById(GetTriggerUnit(), $D011C, GetAttacker());
	}
	if ((Trig_Use_ThrowStone_and_TurnIntoEnt_Func003C())) {
		IssueTargetOrderById(GetAttacker(), $D011C, GetTriggerUnit());
	}
}
nothing InitTrig_Use_ThrowStone_and_TurnIntoEnt() {
	TriggerRegisterAnyUnitEventBJ(gg_trg_Use_ThrowStone_and_TurnIntoEnt, EVENT_PLAYER_UNIT_ATTACKED);
	TriggerAddCondition(gg_trg_Use_ThrowStone_and_TurnIntoEnt, Condition(Trig_Use_ThrowStone_and_TurnIntoEnt_Conditions));
	TriggerAddAction(gg_trg_Use_ThrowStone_and_TurnIntoEnt, Trig_Use_ThrowStone_and_TurnIntoEnt_Actions);
}
boolean Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Conditions() {
	return (udg_Nomer_samoi_volni == 5);
}
boolean Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003001002() {
	return (IsPlayerInForce(GetOwningPlayer(GetFilterUnit()), udg_Players_Enemy_Group));
}
boolean Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001Func001002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
boolean Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001Func001002001003002001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
boolean Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001Func001002001003002002() {
	return (IsPlayerAlly(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
boolean Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001Func001002001003002() {
	return GetBooleanAnd(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001Func001002001003002001(), Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001Func001002001003002002());
}
boolean Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001Func001002001003() {
	return GetBooleanAnd(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001Func001002001003001(), Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001Func001002001003002());
}
boolean Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001Func002C() {
	return (udg_Temp_Unit != null);
}
boolean Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001C() {
	return (GetUnitAbilityLevelSwapped('A090', GetEnumUnit()) > 0) && (GetRandomInt(1, 2) == 3);
}
boolean Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
boolean Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003002001001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
boolean Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003002001002() {
	return (GetUnitStateSwap(UNIT_STATE_LIFE, GetFilterUnit()) < (GetUnitStateSwap(UNIT_STATE_MAX_LIFE, GetFilterUnit()) * .6));
}
boolean Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003002001() {
	return GetBooleanAnd(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003002001001(), Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003002001002());
}
boolean Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003002002() {
	return (IsPlayerAlly(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
boolean Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003002() {
	return GetBooleanAnd(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003002001(), Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003002002());
}
boolean Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003() {
	return GetBooleanAnd(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003001(), Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003002());
}
boolean Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func002C() {
	return (udg_Temp_Unit != null);
}
boolean Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002C() {
	return (GetUnitAbilityLevelSwapped('A08Y', GetEnumUnit()) > 0) && (GetRandomInt(1, 2) == 1);
}
boolean Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003Func001002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
boolean Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003Func001002001003002001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
boolean Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003Func001002001003002002() {
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
boolean Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003Func001002001003002() {
	return GetBooleanAnd(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003Func001002001003002001(), Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003Func001002001003002002());
}
boolean Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003Func001002001003() {
	return GetBooleanAnd(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003Func001002001003001(), Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003Func001002001003002());
}
boolean Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003Func002C() {
	return (udg_Temp_Unit != null);
}
boolean Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003C() {
	return (GetUnitAbilityLevelSwapped('S000', GetEnumUnit()) > 0) && (GetRandomInt(1, 2) == 1);
}
boolean Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004Func001002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
boolean Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004Func001002001003002001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
boolean Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004Func001002001003002002() {
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
boolean Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004Func001002001003002() {
	return GetBooleanAnd(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004Func001002001003002001(), Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004Func001002001003002002());
}
boolean Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004Func001002001003() {
	return GetBooleanAnd(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004Func001002001003001(), Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004Func001002001003002());
}
boolean Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004Func002C() {
	return (udg_Temp_Unit != null);
}
boolean Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004C() {
	return (GetUnitAbilityLevelSwapped('A091', GetEnumUnit()) > 0) && (GetRandomInt(1, 2) == 1);
}
nothing Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003A() {
	if ((Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001C())) {
		if ((Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001Func002C())) {
			IssueTargetOrderById(GetEnumUnit(), $D0213, udg_Temp_Unit);
		}
	}
	if ((Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002C())) {
		if ((Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func002C())) {
			IssueTargetOrderById(GetEnumUnit(), $D00C0, udg_Temp_Unit);
		}
	}
	if ((Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003C())) {
		if ((Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003Func002C())) {
			IssueTargetOrderById(GetEnumUnit(), $D00DD, udg_Temp_Unit);
		}
	}
	if ((Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004C())) {
		if ((Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004Func002C())) {
			IssueImmediateOrderById(GetEnumUnit(), $D0278);
		}
	}
}
nothing Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Actions() {
	ForGroupBJ(GetUnitsInRectMatching(bj_mapInitialPlayableArea, Condition(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003001002)), Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003A);
}
nothing InitTrig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay() {
	TriggerRegisterTimerEventPeriodic(gg_trg_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay, 1.);
	TriggerAddCondition(gg_trg_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay, Condition(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Conditions));
	TriggerAddAction(gg_trg_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay, Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Actions);
}
nothing Trig_Troll_Dead_Remove_Bugs_Actions() {
	integer h = GetHandleId(GetDyingUnit());
	effect ef = LoadEffectHandle(udg_hash, h, 55);
	DestroyEffect(ef);
	DestroyEffect(ef);
	DestroyEffect(ef);
}
boolean Trig_Troll_Dead_Remove_Bugs_Conditions() {
	return GetUnitAbilityLevel(GetDyingUnit(), 'A09E') > 0;
}
nothing InitTrig_Troll_Dead_Remove_Bugs() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Troll_Dead_Remove_Bugs, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Troll_Dead_Remove_Bugs, Condition(Trig_Troll_Dead_Remove_Bugs_Conditions));
	TriggerAddAction(gg_trg_Troll_Dead_Remove_Bugs, Trig_Troll_Dead_Remove_Bugs_Actions);
}
nothing Trig_Boss_Troll_Entangle_Throw_periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	real angle = LoadReal(udg_hash, h, 1);
	integer stage = LoadInteger(udg_hash, h, 2);
	unit entangle = LoadUnitHandle(udg_hash, h, 3);
	player p;
	real x = GetUnitX(entangle) + 40. * Cos(angle * bj_DEGTORAD);
	real y = GetUnitY(entangle) + 40. * Sin(angle * bj_DEGTORAD);
	effect ef;
	group g;
	unit Picked;
	unit dammi;
	if (stage > 0) {
		SaveInteger(udg_hash, h, 2, stage);
		if (IsTerrainPathable(x, y, PATHING_TYPE_FLYABILITY) == false) {
			SetUnitPosition(entangle, x, y);
		}
	else
		GroupEnumUnitsInRange(g, x, y, 250., null);
		while (true) {
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
				UnitApplyTimedLife(dammi, 'BTLF', 1.);
				UnitAddAbility(dammi, 'A096');
				IssueTargetOrderById(dammi, $D008A, Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
		GroupClear(g);
		DestroyGroup(g);
		DestroyEffect(ef);
		KillUnit(entangle);
		DestroyTimer(t);
	}
}
nothing Trig_Boss_Troll_Entangle_Throw_Actions() {
	unit caster = GetSpellAbilityUnit();
	location loc = GetSpellTargetLoc();
	real ux = GetUnitX(caster);
	real uy = GetUnitY(caster);
	real x = GetLocationX(loc);
	real y = GetLocationY(loc);
	real angle = bj_RADTODEG * Atan2(y - uy, x - ux);
	integer stage = R2I(SquareRoot((x - ux) * (x - ux) + (y - uy) * (y - uy)) / 40.);
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	unit entangle = CreateUnit(GetOwningPlayer(caster), 'h00U', ux + 25. * Cos(angle * bj_DEGTORAD), uy + 25. * Sin(angle * bj_DEGTORAD), angle);
	effect ef = AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Ensnare\\EnsnareMissile.mdl", entangle, "chest");
	SetUnitScale(entangle, 2., 2., 2.);
	UnitAddAbility(entangle, 'Amrf');
	UnitRemoveAbility(entangle, 'Amrf');
	SetUnitFlyHeight(entangle, 50., .0);
	SetUnitFlyHeight(entangle, .0, .04 * stage);
	SaveReal(udg_hash, h, 1, angle);
	SaveInteger(udg_hash, h, 2, stage);
	SaveUnitHandle(udg_hash, h, 3, entangle);
	SaveEffectHandle(udg_hash, h, 4, ef);
	TimerStart(t, .04, true, Trig_Boss_Troll_Entangle_Throw_periodic_Actions);
	RemoveLocation(loc);
}
boolean Trig_Boss_Troll_Entangle_Throw_Conditions() {
	return GetSpellAbilityId() == 'A0E8';
}
nothing InitTrig_Boss_Troll_Entangle_Throw() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Boss_Troll_Entangle_Throw, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Boss_Troll_Entangle_Throw, Condition(Trig_Boss_Troll_Entangle_Throw_Conditions));
	TriggerAddAction(gg_trg_Boss_Troll_Entangle_Throw, Trig_Boss_Troll_Entangle_Throw_Actions);
}
boolean Trig_Use_Berserk_and_BerserkBoss_Conditions() {
	return (udg_Nomer_samoi_volni == 6);
}
boolean Trig_Use_Berserk_and_BerserkBoss_Func002C() {
	return (GetUnitAbilityLevelSwapped('A098', GetTriggerUnit()) > 0) && (GetRandomInt(1, 2) == 1) && (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group));
}
boolean Trig_Use_Berserk_and_BerserkBoss_Func003C() {
	return (GetUnitAbilityLevelSwapped('A098', GetAttacker()) > 0) && (GetRandomInt(1, 2) == 1) && (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group));
}
boolean Trig_Use_Berserk_and_BerserkBoss_Func004C() {
	return (GetUnitAbilityLevelSwapped('A0EC', GetTriggerUnit()) > 0) && (GetRandomInt(1, 2) == 1) && (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group));
}
boolean Trig_Use_Berserk_and_BerserkBoss_Func005C() {
	return (GetUnitAbilityLevelSwapped('A0EC', GetAttacker()) > 0) && (GetRandomInt(1, 2) == 1) && (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group));
}
nothing Trig_Use_Berserk_and_BerserkBoss_Actions() {
	if ((Trig_Use_Berserk_and_BerserkBoss_Func002C())) {
		IssueImmediateOrderById(GetTriggerUnit(), $D0084);
	}
	if ((Trig_Use_Berserk_and_BerserkBoss_Func003C())) {
		IssueImmediateOrderById(GetAttacker(), $D0084);
	}
	if ((Trig_Use_Berserk_and_BerserkBoss_Func004C())) {
		IssueImmediateOrderById(GetTriggerUnit(), $D0084);
	}
	if ((Trig_Use_Berserk_and_BerserkBoss_Func005C())) {
		IssueImmediateOrderById(GetAttacker(), $D0084);
	}
}
nothing InitTrig_Use_Berserk_and_BerserkBoss() {
	TriggerRegisterAnyUnitEventBJ(gg_trg_Use_Berserk_and_BerserkBoss, EVENT_PLAYER_UNIT_ATTACKED);
	TriggerAddCondition(gg_trg_Use_Berserk_and_BerserkBoss, Condition(Trig_Use_Berserk_and_BerserkBoss_Conditions));
	TriggerAddAction(gg_trg_Use_Berserk_and_BerserkBoss, Trig_Use_Berserk_and_BerserkBoss_Actions);
}
boolean Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Conditions() {
	return (udg_Nomer_samoi_volni == 6);
}
boolean Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002001002() {
	return (IsPlayerInForce(GetOwningPlayer(GetFilterUnit()), udg_Players_Enemy_Group));
}
boolean Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
boolean Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003002001001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
boolean Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003002001002() {
	return (GetUnitStateSwap(UNIT_STATE_LIFE, GetFilterUnit()) < (GetUnitStateSwap(UNIT_STATE_MAX_LIFE, GetFilterUnit()) * .9));
}
boolean Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003002001() {
	return GetBooleanAnd(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003002001001(), Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003002001002());
}
boolean Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003002002() {
	return (IsPlayerAlly(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
boolean Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003002() {
	return GetBooleanAnd(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003002001(), Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003002002());
}
boolean Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003() {
	return GetBooleanAnd(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003001(), Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003002());
}
boolean Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func002C() {
	return (udg_Temp_Unit != null);
}
boolean Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001C() {
	return (GetUnitAbilityLevelSwapped('A097', GetEnumUnit()) > 0);
}
boolean Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
boolean Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003002001001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
boolean Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003002001002() {
	return (GetUnitStateSwap(UNIT_STATE_LIFE, GetFilterUnit()) < (GetUnitStateSwap(UNIT_STATE_MAX_LIFE, GetFilterUnit()) * .6));
}
boolean Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003002001() {
	return GetBooleanAnd(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003002001001(), Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003002001002());
}
boolean Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003002002() {
	return (IsPlayerAlly(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
boolean Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003002() {
	return GetBooleanAnd(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003002001(), Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003002002());
}
boolean Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003() {
	return GetBooleanAnd(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003001(), Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003002());
}
boolean Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func002C() {
	return (udg_Temp_Unit != null);
}
boolean Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002C() {
	return (GetUnitAbilityLevelSwapped('A099', GetEnumUnit()) > 0) && (GetRandomInt(1, 2) == 1);
}
boolean Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003Func001002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
boolean Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003Func001002001003002001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
boolean Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003Func001002001003002002() {
	return (IsPlayerAlly(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
boolean Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003Func001002001003002() {
	return GetBooleanAnd(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003Func001002001003002001(), Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003Func001002001003002002());
}
boolean Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003Func001002001003() {
	return GetBooleanAnd(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003Func001002001003001(), Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003Func001002001003002());
}
boolean Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003Func002C() {
	return (udg_Temp_Unit != null);
}
boolean Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003C() {
	return (GetUnitAbilityLevelSwapped('A09C', GetEnumUnit()) > 0) && (GetRandomInt(1, 2) == 1);
}
boolean Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004Func001002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
boolean Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004Func001002001003002001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
boolean Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004Func001002001003002002() {
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
boolean Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004Func001002001003002() {
	return GetBooleanAnd(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004Func001002001003002001(), Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004Func001002001003002002());
}
boolean Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004Func001002001003() {
	return GetBooleanAnd(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004Func001002001003001(), Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004Func001002001003002());
}
boolean Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004Func002C() {
	return (udg_Temp_Unit != null);
}
boolean Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004C() {
	return (GetUnitAbilityLevelSwapped('A0E8', GetEnumUnit()) > 0) && (GetRandomInt(1, 2) == 1);
}
nothing Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002A() {
	if ((Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001C())) {
		if ((Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func002C())) {
			IssueTargetOrderById(GetEnumUnit(), $D005F, udg_Temp_Unit);
		}
	}
	if ((Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002C())) {
		if ((Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func002C())) {
			IssueTargetOrderById(GetEnumUnit(), $D0215, udg_Temp_Unit);
		}
	}
	if ((Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003C())) {
		if ((Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003Func002C())) {
			IssueTargetOrderById(GetEnumUnit(), $D0062, udg_Temp_Unit);
		}
	}
	if ((Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004C())) {
		if ((Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004Func002C())) {
			IssuePointOrderById(GetEnumUnit(), $D0079, GetUnitX(udg_Temp_Unit), GetUnitY(udg_Temp_Unit));
		}
	}
}
nothing Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Actions() {
	ForGroupBJ(GetUnitsInRectMatching(bj_mapInitialPlayableArea, Condition(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002001002)), Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002A);
}
nothing InitTrig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle() {
	TriggerRegisterTimerEventPeriodic(gg_trg_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle, 1.);
	TriggerAddCondition(gg_trg_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle, Condition(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Conditions));
	TriggerAddAction(gg_trg_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle, Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Actions);
}
nothing Trig_Aspect_of_Magic_Protection_Move_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit target = LoadUnitHandle(udg_hash, GetHandleId(t), 1);
	SaveTimerHandle(udg_hash, GetHandleId(target), $A6, null);
	SaveBoolean(udg_hash, GetHandleId(target), $A5, false);
	DestroyEffect(LoadEffectHandle(udg_hash, h, 2));
	DestroyTimer(t);
	FlushChildHashtable(udg_hash, h);
}
nothing Trig_Aspect_of_Magic_Protection_Actions() {
	unit target = GetSpellTargetUnit();
	timer t = LoadTimerHandle(udg_hash, GetHandleId(target), $A6);
	integer h = GetHandleId(t);
	if (t == null) {
		SaveTimerHandle(udg_hash, GetHandleId(target), $A6, t);
		SaveBoolean(udg_hash, GetHandleId(target), $A5, true);
	else
		DestroyEffect(LoadEffectHandle(udg_hash, GetHandleId(t), 2));
	}
	SaveUnitHandle(udg_hash, h, 1, target);
	SaveEffectHandle(udg_hash, h, 2, AddSpecialEffectTarget("Effects\\MagicShieldBlue.mdx", target, "origin"));
	TimerStart(t, 6., false, Trig_Aspect_of_Magic_Protection_Move_Actions);
}
boolean Trig_Aspect_of_Magic_Protection_Conditions() {
	return GetSpellAbilityId() == 'A09J';
}
nothing InitTrig_Aspect_of_Magic_Protection() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Aspect_of_Magic_Protection, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Aspect_of_Magic_Protection, Condition(Trig_Aspect_of_Magic_Protection_Conditions));
	TriggerAddAction(gg_trg_Aspect_of_Magic_Protection, Trig_Aspect_of_Magic_Protection_Actions);
}
nothing Trig_Remove_Effects_From_Bosses_Actions() {
	integer h = GetHandleId(GetDyingUnit());
	if (LoadEffectHandle(udg_hash, h, $A8) != null) {
		DestroyEffect(LoadEffectHandle(udg_hash, h, $A8));
	}
	if (LoadEffectHandle(udg_hash, h, $A9) != null) {
		DestroyEffect(LoadEffectHandle(udg_hash, h, $A9));
	}
}
boolean Trig_Remove_Effects_From_Bosses_Conditions() {
	return GetUnitAbilityLevel(GetDyingUnit(), 'A09L') > 0;
}
nothing InitTrig_Remove_Effects_From_Bosses() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Remove_Effects_From_Bosses, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Remove_Effects_From_Bosses, Condition(Trig_Remove_Effects_From_Bosses_Conditions));
	TriggerAddAction(gg_trg_Remove_Effects_From_Bosses, Trig_Remove_Effects_From_Bosses_Actions);
}
nothing Trig_Metka_Dreneev_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	unit Picked;
	player p = GetOwningPlayer(caster);
	group g = CreateGroup();
	GroupEnumUnitsInRange(g, GetUnitX(target), GetUnitY(target), 1000., null);
	GroupRemoveUnit(g, caster);
	while (true) {
		if (Picked == null) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitAlly(Picked, p) && GetUnitTypeId(Picked) != 'h00U') {
			IssueTargetOrderById(Picked, $D000F, target);
			if (GetUnitAbilityLevel(Picked, 'A0FC') > 0) {
				IssueTargetOrderById(Picked, $D02B2, target);
			}
		}
		GroupRemoveUnit(g, Picked);
	}
	DestroyGroup(g);
}
boolean Trig_Metka_Dreneev_Conditions() {
	return GetSpellAbilityId() == 'A0FA';
}
nothing InitTrig_Metka_Dreneev() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Metka_Dreneev, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Metka_Dreneev, Condition(Trig_Metka_Dreneev_Conditions));
	TriggerAddAction(gg_trg_Metka_Dreneev, Trig_Metka_Dreneev_Actions);
}
nothing Trig_Fast_Attack_Move_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	unit target = LoadUnitHandle(udg_hash, h, 4);
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	real xt = GetUnitX(target);
	real yt = GetUnitY(target);
	real angle = bj_RADTODEG * Atan2(yt - y, xt - x);
	real dist = SquareRoot((xt - x) * (xt - x) + (yt - y) * (yt - y));
	integer wait = LoadInteger(udg_hash, h, 2);
	if (dist > 100. && GetUnitState(target, UNIT_STATE_LIFE) > .405 && GetUnitState(caster, UNIT_STATE_LIFE) > .405) {
		SetUnitPosition(caster, x + 20. * Cos((angle) * bj_DEGTORAD), y + 20. * Sin((angle) * bj_DEGTORAD));
		SaveInteger(udg_hash, h, 2, wait);
		if (wait == 1) {
			SetUnitAnimationByIndex(caster, 2);
		}
	else
		if (GetUnitState(caster, UNIT_STATE_LIFE) > .405) {
			if (GetUnitState(target, UNIT_STATE_LIFE) > .405) {
				IssueTargetOrderById(caster, $D000F, target);
			}
			SetUnitAnimation(caster, "stand");
		}
		SetUnitPathing(caster, true);
		SetUnitTimeScale(caster, 1.);
		DestroyEffect(LoadEffectHandle(udg_hash, h, 8));
		DestroyEffect(LoadEffectHandle(udg_hash, h, 9));
		DestroyEffect(LoadEffectHandle(udg_hash, h, $A));
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
}
nothing Trig_Fast_Attack_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	effect ef;
	SetUnitAnimation(caster, "stand");
	SetUnitPathing(caster, false);
	SetUnitAnimationByIndex(caster, 2);
	SetUnitTimeScale(caster, 2.);
	SaveEffectHandle(udg_hash, h, 8, ef);
	SaveEffectHandle(udg_hash, h, 9, ef);
	SaveEffectHandle(udg_hash, h, $A, ef);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveUnitHandle(udg_hash, h, 4, target);
	SaveInteger(udg_hash, h, 2, 0);
	TimerStart(t, .03, true, Trig_Fast_Attack_Move_Actions);
}
boolean Trig_Fast_Attack_Conditions() {
	return GetSpellAbilityId() == 'A0FC';
}
nothing InitTrig_Fast_Attack() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Fast_Attack, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Fast_Attack, Condition(Trig_Fast_Attack_Conditions));
	TriggerAddAction(gg_trg_Fast_Attack, Trig_Fast_Attack_Actions);
}
nothing Trig_Bash_Attack_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	effect ef;
	if (GetUnitTypeId(caster) == 'n016') {
		StunUnitTimed(target, 1.);
		UnitDamageTarget(caster, target, 75., false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
	}
	if (GetUnitTypeId(caster) == 'n018') {
		StunUnitTimed(target, 1.5);
		UnitDamageTarget(caster, target, 125., false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
	}
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\StormBolt\\StormBoltMissile.mdl", target, "chest"));
}
boolean Trig_Bash_Attack_Conditions() {
	return GetSpellAbilityId() == 'A0FD';
}
nothing InitTrig_Bash_Attack() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Bash_Attack, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Bash_Attack, Condition(Trig_Bash_Attack_Conditions));
	TriggerAddAction(gg_trg_Bash_Attack, Trig_Bash_Attack_Actions);
}
boolean Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Dead_Condition() {
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) < .405) && (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) && (GetUnitTypeId(GetFilterUnit()) != 'h00U')) != null;
}
boolean Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Loop_Is_Enemy_Condition() {
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405) && (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) && (IsPlayerEnemy(udg_Temp_Player[1], GetOwningPlayer(GetFilterUnit())))) != null;
}
boolean Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Loop_Is_Ally_Condition() {
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405) && (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) && (IsPlayerAlly(udg_Temp_Player[1], GetOwningPlayer(GetFilterUnit())))) != null;
}
boolean Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_All_Condition() {
	return (IsPlayerInForce(GetOwningPlayer(GetFilterUnit()), udg_Players_Enemy_Group));
}
nothing Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Actions() {
	group gall = CreateGroup();
	group g;
	group g2;
	unit Picked;
	unit target;
	real x;
	real y;
	real angle;
	GroupEnumUnitsInRect(gall, bj_mapInitialPlayableArea, Condition(Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_All_Condition));
	GroupToGroup(gall, g);
	while (true) {
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A09J') > 0) && GetRandomInt(1, 2) == 1) {
			GroupEnumUnitsInRange(g2, x, y, 700., Condition(Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Loop_Is_Ally_Condition));
			RandomUnitFromGroup(1, g2);
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D0113, target);
			}
			GroupClear(g2);
			DestroyGroup(g2);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	GroupToGroup(gall, g);
	while (true) {
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A09H') > 0) && GetRandomInt(1, 2) == 1) {
			GroupEnumUnitsInRange(g2, x, y, 600., Condition(Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Loop_Is_Ally_Condition));
			RandomUnitFromGroup(1, g2);
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D0085, target);
			}
			GroupClear(g2);
			DestroyGroup(g2);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	GroupToGroup(gall, g);
	while (true) {
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A0FA') > 0) && GetRandomInt(1, 2) == 1) {
			GroupEnumUnitsInRange(g2, x, y, 1000., Condition(Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D00B5, target);
			}
			GroupClear(g2);
			DestroyGroup(g2);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	GroupToGroup(gall, g);
	while (true) {
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A0FD') > 0) && GetRandomInt(1, 2) == 1) {
			GroupEnumUnitsInRange(g2, x, y, 250., Condition(Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D0077, target);
			}
			GroupClear(g2);
			DestroyGroup(g2);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	GroupToGroup(gall, g);
	while (true) {
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A0FC') > 0) && GetRandomInt(1, 2) == 1) {
			GroupEnumUnitsInRange(g2, x, y, 1200., Condition(Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D02B2, target);
			}
			GroupClear(g2);
			DestroyGroup(g2);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	GroupClear(gall);
	DestroyGroup(gall);
}
boolean Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Conditions() {
	return (udg_Nomer_samoi_volni == 7);
}
nothing InitTrig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack() {
	TriggerRegisterTimerEvent(gg_trg_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack, 1., true);
	TriggerAddCondition(gg_trg_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack, Condition(Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Conditions));
	TriggerAddAction(gg_trg_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack, Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Actions);
}
nothing Trig_Blink_Strike_Remove_Buff_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	effect ef;
	DestroyEffect(ef);
	DestroyEffect(ef);
	SetAttackSpeedAbilityLevel(caster, -$C8);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_Blink_Strike_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	real xt = GetUnitX(target);
	real yt = GetUnitY(target);
	real angle = bj_RADTODEG * Atan2((yt - y), (xt - x));
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	unit dammi = CreateUnit(GetOwningPlayer(caster), 'h00U', x, y, .0);
	effect ef;
	SetAttackSpeedAbilityLevel(caster, $C8);
	SetUnitPosition(caster, xt - 75. * Cos(angle * bj_DEGTORAD), yt - 75. * Sin(angle * bj_DEGTORAD));
	IssueTargetOrderById(caster, $D000F, target);
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayDamage.mdl", target, "origin"));
	SaveEffectHandle(udg_hash, h, 2, ef);
	SaveEffectHandle(udg_hash, h, 3, ef);
	SaveUnitHandle(udg_hash, h, 1, caster);
	TimerStart(t, 2., false, Trig_Blink_Strike_Remove_Buff_Actions);
}
boolean Trig_Blink_Strike_Conditions() {
	return GetSpellAbilityId() == 'A09P';
}
nothing InitTrig_Blink_Strike() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Blink_Strike, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Blink_Strike, Condition(Trig_Blink_Strike_Conditions));
	TriggerAddAction(gg_trg_Blink_Strike, Trig_Blink_Strike_Actions);
}
nothing Trig_Victim_Search_Stand2_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	integer addas = LoadInteger(udg_hash, h, 2);
	if (GetUnitState(caster, UNIT_STATE_LIFE) > .405 && caster != null) {
		SetAttackSpeedAbilityLevel(caster, -addas);
	}
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_Victim_Search_Stand_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	integer addas = LoadInteger(udg_hash, h, 2);
	unit dammi = CreateUnit(GetOwningPlayer(caster), 'h00U', GetUnitX(caster), GetUnitY(caster), 270.);
	real wait = 10.;
	if (GetUnitState(caster, UNIT_STATE_LIFE) > .405 && caster != null) {
		PauseUnit(caster, false);
	}
	if (GetUnitState(caster, UNIT_STATE_LIFE) > .405) {
		SetUnitAnimation(caster, "stand");
	else
		SetUnitAnimation(caster, "death");
	}
	UnitRemoveAbility(caster, 'A0HD');
	SetArmorAbilityLevel(caster, 30);
	SetAttackSpeedAbilityLevel(caster, addas);
	UnitApplyTimedLife(dammi, 'BTLF', 1.);
	UnitAddAbility(dammi, 'A0HE');
	IssueTargetOrderById(dammi, $D0085, caster);
	if (IsPlayerInForce(GetOwningPlayer(caster), udg_Players_Enemy_Group)) {
		IssuePointOrderById(caster, $D000F, GetRectCenterX(gg_rct_cast_magi), GetRectCenterY(gg_rct_cast_magi));
	}
	TimerStart(t, wait, false, Trig_Victim_Search_Stand2_Actions);
}
nothing Trig_Victim_Search_Actions() {
	unit caster = GetSpellAbilityUnit();
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	integer addas = 80;
	real wait = 2.4;
	PauseUnit(caster, true);
	SetUnitAnimation(caster, "stand");
	SetUnitAnimationByIndex(caster, 1);
	UnitAddAbility(caster, 'A0HD');
	SetArmorAbilityLevel(caster, -30);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveInteger(udg_hash, h, 2, addas);
	TimerStart(t, wait, false, Trig_Victim_Search_Stand_Actions);
}
boolean Trig_Victim_Search_Conditions() {
	return GetSpellAbilityId() == 'A0HC';
}
nothing InitTrig_Victim_Search() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Victim_Search, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Victim_Search, Condition(Trig_Victim_Search_Conditions));
	TriggerAddAction(gg_trg_Victim_Search, Trig_Victim_Search_Actions);
}
nothing Trig_Black_Hole_Periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	real damage = LoadReal(udg_hash, h, 2);
	unit dammi = LoadUnitHandle(udg_hash, h, 3);
	integer wait = LoadInteger(udg_hash, h, 5);
	group gdamage = LoadGroupHandle(udg_hash, h, 6);
	real angledammi = LoadReal(udg_hash, h, 7);
	real xstart = LoadReal(udg_hash, h, 8);
	real ystart = LoadReal(udg_hash, h, 9);
	real periodicdamage = LoadReal(udg_hash, h, 35);
	effect ef;
	group g = CreateGroup();
	real x = GetUnitX(dammi);
	real y = GetUnitY(dammi);
	real xt;
	real yt;
	real xt2;
	real yt2;
	real xdammi;
	real ydammi;
	real dist;
	real angle;
	player p = GetOwningPlayer(dammi);
	unit Picked;
	integer lopa = 0;
	unit dammief;
	if (wait >= 0) {
		SaveInteger(udg_hash, h, 5, wait);
		SaveReal(udg_hash, h, 7, angledammi);
		while (true) {
			if (lopa > $A) break;
			if (IsTerrainPathable(xstart + 500. * Cos((angledammi + 36. * lopa) * bj_DEGTORAD), ystart + 500. * Sin((angledammi + 36. * lopa) * bj_DEGTORAD), PATHING_TYPE_FLYABILITY) == false) {
				SetUnitPosition(dammief, xstart + 500. * Cos((angledammi + 36. * lopa) * bj_DEGTORAD), ystart + 500. * Sin((angledammi + 36. * lopa) * bj_DEGTORAD));
			}
			SetUnitFacing(dammief, angledammi + 90.);
		}
		if (IsTerrainPathable(xdammi, ydammi, PATHING_TYPE_FLYABILITY) == false) {
			SetUnitPosition(dammi, xdammi, ydammi);
		}
		GroupEnumUnitsInRange(g, x, y, 500., null);
		while (true) {
			if (Picked == null) break;
			if ((IsUnitInGroup(Picked, udg_PortalCastersMagi) == false) && GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, p) && IsUnitInGroup(Picked, udg_PortalCastersMagi) == false && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				if (IsTerrainPathable(xt2, yt2, PATHING_TYPE_FLYABILITY) == false && dist > 50) {
					SetUnitX(Picked, xt2);
					SetUnitY(Picked, yt2);
				}
				if (dist < 'd' && IsUnitInGroup(Picked, gdamage) == false) {
					UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
					StunUnitTimed(Picked, 3.25);
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathCoil\\DeathCoilSpecialArt.mdl", Picked, "chest"));
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\CarrionSwarm\\CarrionSwarmDamage.mdl", Picked, "chest"));
					GroupAddUnit(gdamage, Picked);
				}
				if (dist < 'd') {
					UnitDamageTarget(caster, Picked, periodicdamage * .03, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				}
			}
			GroupRemoveUnit(g, Picked);
		}
		SaveGroupHandle(udg_hash, h, 6, gdamage);
	else
		if (wait == -1) {
			DestroyEffect(ef);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathCoil\\DeathCoilSpecialArt.mdl", dammi, "origin"));
			while (true) {
				if (lopa > $A) break;
				DestroyEffect(ef);
				RemoveUnit(dammief);
			}
		}
		if (wait >= -66) {
			SaveInteger(udg_hash, h, 5, wait);
		else
			FlushChildHashtable(udg_hash, h);
			DestroyTimer(t);
			GroupClear(gdamage);
			DestroyGroup(gdamage);
			RemoveUnit(dammi);
		}
	}
	GroupClear(g);
	DestroyGroup(g);
}
nothing Trig_Black_Hole_Actions() {
	unit caster = GetSpellAbilityUnit();
	location loc = GetSpellTargetLoc();
	real x = GetLocationX(loc);
	real y = GetLocationY(loc);
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	real damage = 500.;
	real periodicdamage = 150.;
	integer wait = R2I($A / .03);
	unit dammi = CreateUnit(GetOwningPlayer(caster), 'h00U', x + 50., y + 50., 270.);
	real angledammi = 270.;
	effect ef = AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DarkSummoning\\DarkSummonMissile.mdl", dammi, "chest");
	group gdamage = CreateGroup();
	unit dammief;
	effect dammieffect;
	integer lopa = 0;
	while (true) {
		if (lopa > $A) break;
		SetUnitScale(dammief, 1.5, 1.5, 1.5);
		SaveUnitHandle(udg_hash, h, $A + lopa, dammief);
		SaveEffectHandle(udg_hash, h, 20 + lopa, dammieffect);
	}
	UnitAddAbility(dammi, 'Amrf');
	UnitRemoveAbility(dammi, 'Amrf');
	SetUnitFlyHeight(dammi, 200., .0);
	SetUnitScale(dammi, 2., 2., 2.);
	SetUnitTimeScale(dammi, 2.);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 2, damage);
	SaveUnitHandle(udg_hash, h, 3, dammi);
	SaveEffectHandle(udg_hash, h, 4, ef);
	SaveInteger(udg_hash, h, 5, wait);
	SaveGroupHandle(udg_hash, h, 6, gdamage);
	SaveReal(udg_hash, h, 7, angledammi);
	SaveReal(udg_hash, h, 8, x);
	SaveReal(udg_hash, h, 9, y);
	SaveReal(udg_hash, h, 35, periodicdamage);
	TimerStart(t, .03, true, Trig_Black_Hole_Periodic_Actions);
	RemoveLocation(loc);
}
boolean Trig_Black_Hole_Conditions() {
	return GetSpellAbilityId() == 'A0HA';
}
nothing InitTrig_Black_Hole() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Black_Hole, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Black_Hole, Condition(Trig_Black_Hole_Conditions));
	TriggerAddAction(gg_trg_Black_Hole, Trig_Black_Hole_Actions);
}
boolean Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Conditions() {
	return (udg_Nomer_samoi_volni == 8);
}
boolean Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func002C() {
	return (GetUnitAbilityLevelSwapped('A09N', GetTriggerUnit()) > 0) && (GetRandomInt(1, 2) == 3) && (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group)) && (false);
}
boolean Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func003C() {
	return (GetUnitAbilityLevelSwapped('A09N', GetAttacker()) > 0) && (GetRandomInt(1, 2) == 3) && (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group)) && (false);
}
boolean Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func004C() {
	return (GetUnitAbilityLevelSwapped('A0H0', GetTriggerUnit()) > 0) && (GetRandomInt(1, 3) == 4) && (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group));
}
boolean Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func005C() {
	return (GetUnitAbilityLevelSwapped('A0H0', GetAttacker()) > 0) && (GetRandomInt(1, 3) == 4) && (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group));
}
boolean Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func006C() {
	return (GetUnitAbilityLevelSwapped('A0H7', GetTriggerUnit()) > 0) && (GetRandomInt(1, 2) == 3) && (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group));
}
boolean Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func007C() {
	return (GetUnitAbilityLevelSwapped('A0H7', GetAttacker()) > 0) && (GetRandomInt(1, 2) == 3) && (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group));
}
boolean Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func008C() {
	return (GetUnitAbilityLevelSwapped('A0HB', GetTriggerUnit()) > 0) && (GetRandomInt(1, 2) == 1) && (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group));
}
boolean Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func009C() {
	return (GetUnitAbilityLevelSwapped('A0HB', GetAttacker()) > 0) && (GetRandomInt(1, 3) == 1) && (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group));
}
boolean Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func010C() {
	return (GetUnitAbilityLevelSwapped('A09R', GetTriggerUnit()) > 0) && (GetRandomInt(1, 2) == 1) && (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group));
}
boolean Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func011C() {
	return (GetUnitAbilityLevelSwapped('A09R', GetAttacker()) > 0) && (GetRandomInt(1, 2) == 1) && (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group));
}
nothing Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Actions() {
	if ((Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func002C())) {
		IssueTargetOrderById(GetTriggerUnit(), $D0201, GetAttacker());
	}
	if ((Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func003C())) {
		IssueTargetOrderById(GetAttacker(), $D0201, GetTriggerUnit());
	}
	if ((Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func004C())) {
		IssueTargetOrderById(GetTriggerUnit(), $D027C, GetAttacker());
	}
	if ((Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func005C())) {
		IssueTargetOrderById(GetAttacker(), $D027C, GetTriggerUnit());
	}
	if ((Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func006C())) {
		IssueTargetOrderById(GetTriggerUnit(), $D0244, GetAttacker());
	}
	if ((Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func007C())) {
		IssueTargetOrderById(GetAttacker(), $D0244, GetTriggerUnit());
	}
	if ((Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func008C())) {
		IssuePointOrderById(GetTriggerUnit(), $D00FD, GetUnitX(GetAttacker()), GetUnitY(GetAttacker()));
	}
	if ((Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func009C())) {
		IssuePointOrderById(GetAttacker(), $D00FD, GetUnitX(GetTriggerUnit()), GetUnitY(GetTriggerUnit()));
	}
	if ((Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func010C())) {
		IssueImmediateOrderById(GetTriggerUnit(), $D00C4);
	}
	if ((Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func011C())) {
		IssueImmediateOrderById(GetAttacker(), $D00C4);
	}
}
nothing InitTrig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar() {
	TriggerRegisterAnyUnitEventBJ(gg_trg_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar, EVENT_PLAYER_UNIT_ATTACKED);
	TriggerAddCondition(gg_trg_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar, Condition(Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Conditions));
	TriggerAddAction(gg_trg_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar, Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Actions);
}
boolean Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Conditions() {
	return (udg_Nomer_samoi_volni == 8);
}
boolean Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002001002() {
	return (IsPlayerInForce(GetOwningPlayer(GetFilterUnit()), udg_Players_Enemy_Group));
}
boolean Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001Func001002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
boolean Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001Func001002001003002001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
boolean Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001Func001002001003002002() {
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
boolean Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001Func001002001003002() {
	return GetBooleanAnd(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001Func001002001003002001(), Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001Func001002001003002002());
}
boolean Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001Func001002001003() {
	return GetBooleanAnd(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001Func001002001003001(), Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001Func001002001003002());
}
boolean Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001Func002C() {
	return (udg_Temp_Unit != null);
}
boolean Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001C() {
	return (GetUnitAbilityLevelSwapped('A09P', GetEnumUnit()) > 0);
}
boolean Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func002Func001002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
boolean Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func002Func001002001003002001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
boolean Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func002Func001002001003002002() {
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
boolean Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func002Func001002001003002() {
	return GetBooleanAnd(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func002Func001002001003002001(), Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func002Func001002001003002002());
}
boolean Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func002Func001002001003() {
	return GetBooleanAnd(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func002Func001002001003001(), Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func002Func001002001003002());
}
boolean Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func002C() {
	return (GetUnitAbilityLevelSwapped('A0H0', GetEnumUnit()) > 0) && (GetRandomInt(1, 3) == 4);
}
boolean Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func003Func001002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
boolean Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func003Func001002001003002001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
boolean Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func003Func001002001003002002() {
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
boolean Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func003Func001002001003002() {
	return GetBooleanAnd(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func003Func001002001003002001(), Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func003Func001002001003002002());
}
boolean Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func003Func001002001003() {
	return GetBooleanAnd(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func003Func001002001003001(), Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func003Func001002001003002());
}
boolean Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func003C() {
	return (GetUnitAbilityLevelSwapped('A0H1', GetEnumUnit()) > 0) && (GetRandomInt(1, 3) == 4);
}
boolean Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004Func002002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
boolean Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004Func002002001003002001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
boolean Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004Func002002001003002002() {
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
boolean Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004Func002002001003002() {
	return GetBooleanAnd(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004Func002002001003002001(), Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004Func002002001003002002());
}
boolean Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004Func002002001003() {
	return GetBooleanAnd(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004Func002002001003001(), Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004Func002002001003002());
}
boolean Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004Func003C() {
	return (udg_Temp_Unit != null);
}
boolean Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004C() {
	return (GetUnitAbilityLevelSwapped('A0HC', GetEnumUnit()) > 0) && (GetRandomInt(1, 2) == 1);
}
boolean Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003001001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
boolean Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003001002() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO)) != null;
}
boolean Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003001() {
	return GetBooleanAnd(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003001001(), Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003001002());
}
boolean Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003002001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
boolean Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003002002() {
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
boolean Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003002() {
	return GetBooleanAnd(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003002001(), Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003002002());
}
boolean Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003() {
	return GetBooleanAnd(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003001(), Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003002());
}
boolean Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func002C() {
	return (udg_Temp_Unit != null);
}
boolean Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005C() {
	return (GetUnitAbilityLevelSwapped('A0HA', GetEnumUnit()) > 0);
}
nothing Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002A() {
	if ((Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001C())) {
		if ((Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001Func002C())) {
			IssueTargetOrderById(GetEnumUnit(), $D0258, udg_Temp_Unit);
		}
	}
	if ((Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func002C())) {
		IssueTargetOrderById(GetEnumUnit(), $D027C, udg_Temp_Unit);
	}
	if ((Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func003C())) {
		IssueTargetOrderById(GetEnumUnit(), $D000C, udg_Temp_Unit);
	}
	if ((Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004C())) {
		if ((Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004Func003C())) {
			IssueImmediateOrderById(GetEnumUnit(), $D00F3);
		}
	}
	if ((Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005C())) {
		if ((Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func002C())) {
			IssueTargetOrderById(GetEnumUnit(), $D00E4, udg_Temp_Unit);
		}
	}
}
nothing Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Actions() {
	ForGroupBJ(GetUnitsInRectMatching(bj_mapInitialPlayableArea, Condition(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002001002)), Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002A);
}
nothing InitTrig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH() {
	TriggerRegisterTimerEventPeriodic(gg_trg_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH, 1.);
	TriggerAddCondition(gg_trg_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH, Condition(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Conditions));
	TriggerAddAction(gg_trg_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH, Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Actions);
}
nothing Trig_Weakness_10second_last_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit target = LoadUnitHandle(udg_hash, h, 1);
	string s = LoadStr(udg_hash, h, 2);
	if (s == "str") {
		SetUnitMaxState(target, UNIT_STATE_MAX_LIFE, 'd');
		SetUnitLifeAndManaRegeneration(target, "life", $A);
	}
	if (s == "agi") {
		SetAttackAbilityLevel(target, $F);
		SetAttackSpeedAbilityLevel(target, $A);
	}
	if (s == "int") {
		SetUnitMaxState(target, UNIT_STATE_MAX_MANA, 50);
		SetUnitLifeAndManaRegeneration(target, "mana", 5);
	}
	if (s == "mob") {
		SetArmorAbilityLevel(target, 7);
	}
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_Weakness_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	string smainstat;
	string s;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	if (IsUnitType(target, UNIT_TYPE_HERO)) {
		if (smainstat == "str") {
			SetUnitMaxState(target, UNIT_STATE_MAX_LIFE, -'d');
			SetUnitLifeAndManaRegeneration(target, "life", -$A);
		}
		if (smainstat == "agi") {
			SetAttackAbilityLevel(target, -$F);
			SetAttackSpeedAbilityLevel(target, -$A);
		}
		if (smainstat == "int") {
			SetUnitMaxState(target, UNIT_STATE_MAX_MANA, -50);
			SetUnitLifeAndManaRegeneration(target, "mana", -5);
		}
	else
		SetArmorAbilityLevel(target, -7);
	}
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\WingedSerpentMissile\\WingedSerpentMissile.mdl", target, "chest"));
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\WingedSerpentMissile\\WingedSerpentMissile.mdl", target, "hand,left"));
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\WingedSerpentMissile\\WingedSerpentMissile.mdl", target, "hand,right"));
	SaveUnitHandle(udg_hash, h, 1, target);
	SaveStr(udg_hash, h, 2, s);
	TimerStart(t, 12., false, Trig_Weakness_10second_last_Actions);
}
boolean Trig_Weakness_Conditions() {
	return GetSpellAbilityId() == 'A0ES';
}
nothing InitTrig_Weakness() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Weakness, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Weakness, Condition(Trig_Weakness_Conditions));
	TriggerAddAction(gg_trg_Weakness, Trig_Weakness_Actions);
}
nothing Trig_Astral_Dispersal_Periodic_Dest_Actions() {
	KillDestructable(GetEnumDestructable());
}
nothing Trig_Astral_Dispersal_Periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	real damage = LoadReal(udg_hash, h, 3);
	integer waitstand = LoadInteger(udg_hash, h, 4);
	integer wait = LoadInteger(udg_hash, h, 5);
	real face = LoadReal(udg_hash, h, 6);
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	player p = GetOwningPlayer(caster);
	group g = CreateGroup();
	unit Picked;
	real angle;
	unit dammi;
	boolean alife = true;
	boolean endgroupcheck = false;
	effect ef;
	rect r;
	if (waitstand > 0 && GetUnitState(caster, UNIT_STATE_LIFE) > .405) {
		SaveInteger(udg_hash, h, 4, waitstand);
	}
	if (waitstand <= 0 && wait > 0 && GetUnitState(caster, UNIT_STATE_LIFE) > .405) {
		SaveInteger(udg_hash, h, 5, wait);
		EnumDestructablesInRect(r, null, Trig_Astral_Dispersal_Periodic_Dest_Actions);
		if (IsTerrainPathable(x + 25. * Cos(face * bj_DEGTORAD), y + 25. * Sin(face * bj_DEGTORAD), PATHING_TYPE_FLYABILITY) == false) {
			SetUnitPosition(caster, x + 25. * Cos(face * bj_DEGTORAD), y + 25. * Sin(face * bj_DEGTORAD));
		}
		SetUnitFacing(caster, face);
		GroupEnumUnitsInRange(g, x + 50. * Cos(face * bj_DEGTORAD), y + 50. * Sin(face * bj_DEGTORAD), 125., null);
		while (true) {
			if (Picked == null || endgroupcheck) break;
			if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				SaveInteger(udg_hash, h, 5, wait);
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\OrbOfDeath\\AnnihilationMissile.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl", Picked, "chest"));
				UnitApplyTimedLife(dammi, 'BTLF', .5);
				UnitAddAbility(dammi, 'A0GG');
				IssueTargetOrderById(dammi, $D007F, Picked);
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			}
			GroupRemoveUnit(g, Picked);
		}
	}
	if (wait <= 0 || GetUnitState(caster, UNIT_STATE_LIFE) < .405) {
		SetUnitAnimation(caster, "stand");
		SetUnitPathing(caster, true);
		SetUnitTimeScale(caster, 1.);
		PauseUnit(caster, false);
		DestroyEffect(ef);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	GroupClear(g);
	DestroyGroup(g);
	RemoveRect(r);
}
nothing Trig_Astral_Dispersal_Actions() {
	unit caster = GetSpellAbilityUnit();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	unit target = GetSpellTargetUnit();
	real angle;
	real damage = 400.;
	location loc;
	real tx;
	real ty;
	real dist;
	real time;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	effect ef = AddSpecialEffectTarget("Abilities\\Weapons\\AvengerMissile\\AvengerMissile.mdl", caster, "chest");
	if (target == null) {
	else
	}
	SetUnitAnimation(caster, "stand");
	SetUnitPathing(caster, false);
	SetUnitTimeScale(caster, 4.);
	PauseUnit(caster, true);
	SetUnitAnimationByIndex(caster, 1);
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\OrbOfDeath\\AnnihilationMissile.mdl", tx, ty));
	SetUnitFacing(caster, angle);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 3, damage);
	SaveInteger(udg_hash, h, 4, 66);
	SaveInteger(udg_hash, h, 5, R2I(dist / 25.));
	SaveReal(udg_hash, h, 6, angle);
	SaveEffectHandle(udg_hash, h, 7, ef);
	TimerStart(t, .03, true, Trig_Astral_Dispersal_Periodic_Actions);
	RemoveLocation(loc);
}
boolean Trig_Astral_Dispersal_Conditions() {
	return GetSpellAbilityId() == 'A0GF';
}
nothing InitTrig_Astral_Dispersal() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Astral_Dispersal, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Astral_Dispersal, Condition(Trig_Astral_Dispersal_Conditions));
	TriggerAddAction(gg_trg_Astral_Dispersal, Trig_Astral_Dispersal_Actions);
}
nothing Trig_Infernal_Ram_Periodic_Dest_Actions() {
	KillDestructable(GetEnumDestructable());
}
nothing Trig_Infernal_Ram_Periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	real damage = LoadReal(udg_hash, h, 3);
	group gdamage = LoadGroupHandle(udg_hash, h, 4);
	integer wait = LoadInteger(udg_hash, h, 5);
	real face = LoadReal(udg_hash, h, 6);
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	real xzahvat = x + 50. * Cos(face * bj_DEGTORAD);
	real yzahvat = y + 50. * Sin(face * bj_DEGTORAD);
	player p = GetOwningPlayer(caster);
	group g = CreateGroup();
	unit Picked;
	real angle;
	unit dammi;
	boolean alife = true;
	effect ef;
	rect r;
	if (wait > 0 && GetUnitState(caster, UNIT_STATE_LIFE) > .405) {
		SaveInteger(udg_hash, h, 5, wait);
		EnumDestructablesInRect(r, null, Trig_Infernal_Ram_Periodic_Dest_Actions);
		if (IsTerrainPathable(x + 25. * Cos(face * bj_DEGTORAD), y + 25. * Sin(face * bj_DEGTORAD), PATHING_TYPE_FLYABILITY) == false) {
			SetUnitPosition(caster, x + 25. * Cos(face * bj_DEGTORAD), y + 25. * Sin(face * bj_DEGTORAD));
		}
		SetUnitFacing(caster, face);
		GroupEnumUnitsInRange(g, x + 75. * Cos(face * bj_DEGTORAD), y + 75. * Sin(face * bj_DEGTORAD), 110., null);
		while (true) {
			if (Picked == null) break;
			if ((IsUnitInGroup(Picked, udg_PortalCastersMagi) == false) && IsUnitEnemy(Picked, p) && IsUnitInGroup(Picked, gdamage) == false && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				UnitPeriodicPostionMove(Picked, .03, wait * .03);
				GroupAddUnit(gdamage, Picked);
				DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodNecromancer.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl", Picked, "chest"));
				SetUnitPathing(Picked, false);
				MoveUnit(Picked, wait * .03, 833.3, .0, face, .0, true);
			}
			GroupRemoveUnit(g, Picked);
		}
	}
	if (wait <= 0 || GetUnitState(caster, UNIT_STATE_LIFE) < .405) {
		while (true) {
			if (Picked == null) break;
			SetUnitPosition(Picked, GetUnitX(Picked), GetUnitY(Picked));
			UnitApplyTimedLife(dammi, 'BTLF', 1.);
			UnitAddAbility(dammi, 'A0GJ');
			IssueTargetOrderById(dammi, $D006B, Picked);
			UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			SetUnitPathing(Picked, true);
			GroupRemoveUnit(gdamage, Picked);
		}
		SetUnitAnimation(caster, "stand");
		SetUnitPathing(caster, true);
		SetUnitTimeScale(caster, 1.);
		PauseUnit(caster, false);
		DestroyEffect(ef);
		DestroyEffect(ef);
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
		IssuePointOrderById(caster, $D0079, x + 50. * Cos(face * bj_DEGTORAD), y + 50. * Sin(face * bj_DEGTORAD));
	}
	GroupClear(g);
	DestroyGroup(g);
	RemoveRect(r);
}
nothing Trig_Infernal_Ram_Actions() {
	unit caster = GetSpellAbilityUnit();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	unit target = GetSpellTargetUnit();
	real angle;
	real damage = 800.;
	location loc;
	real tx;
	real ty;
	real dist;
	real time;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	effect ef;
	group gdamage = CreateGroup();
	if (target == null) {
	else
	}
	SetUnitAnimation(caster, "stand");
	SetUnitPathing(caster, false);
	SetUnitTimeScale(caster, 3.25);
	PauseUnit(caster, true);
	SetUnitAnimationByIndex(caster, 1);
	SetUnitFacing(caster, angle);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 3, damage);
	SaveGroupHandle(udg_hash, h, 4, gdamage);
	SaveInteger(udg_hash, h, 5, R2I(dist / 25.));
	SaveReal(udg_hash, h, 6, angle);
	SaveEffectHandle(udg_hash, h, 7, ef);
	SaveEffectHandle(udg_hash, h, 8, ef);
	TimerStart(t, .03, true, Trig_Infernal_Ram_Periodic_Actions);
	RemoveLocation(loc);
}
boolean Trig_Infernal_Ram_Conditions() {
	return GetSpellAbilityId() == 'A0GI';
}
nothing InitTrig_Infernal_Ram() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Infernal_Ram, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Infernal_Ram, Condition(Trig_Infernal_Ram_Conditions));
	TriggerAddAction(gg_trg_Infernal_Ram, Trig_Infernal_Ram_Actions);
}
nothing Trig_Fiery_Blow_Actions() {
	unit caster = GetSpellAbilityUnit();
	location loc = GetSpellTargetLoc();
	real x = GetLocationX(loc);
	real y = GetLocationY(loc);
	real radius = 250.;
	real damage = 350.;
	unit dammi;
	unit Picked;
	group g = CreateGroup();
	player p = GetOwningPlayer(caster);
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", x, y));
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl", x, y));
	GroupEnumUnitsInRange(g, x, y, radius, null);
	while (true) {
		if (Picked == null) break;
		if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Incinerate\\FireLordDeathExplode.mdl", Picked, "origin"));
			UnitApplyTimedLife(dammi, 'BTLF', 1.);
			UnitAddAbility(dammi, 'A0GL');
			IssueTargetOrderById(dammi, $D007F, Picked);
			UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
		}
		GroupRemoveUnit(g, Picked);
	}
	RemoveLocation(loc);
	GroupClear(g);
	DestroyGroup(g);
}
boolean Trig_Fiery_Blow_Conditions() {
	return GetSpellAbilityId() == 'A0GK';
}
nothing InitTrig_Fiery_Blow() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Fiery_Blow, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Fiery_Blow, Condition(Trig_Fiery_Blow_Conditions));
	TriggerAddAction(gg_trg_Fiery_Blow, Trig_Fiery_Blow_Actions);
}
nothing Trig_Bloody_Jump_Delete_Dammi_Actions() {
	timer tvoid = GetExpiredTimer();
	integer hvoid = GetHandleId(tvoid);
	unit dammivoid = LoadUnitHandle(udg_hash, hvoid, 1);
	RemoveUnit(dammivoid);
	FlushChildHashtable(udg_hash, hvoid);
	DestroyTimer(tvoid);
}
nothing Trig_Bloody_Jump_Periodic_Dest_Actions() {
	KillDestructable(GetEnumDestructable());
}
nothing Trig_Bloody_Jump_Periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	integer waitef = LoadInteger(udg_hash, h, 2);
	integer wait = LoadInteger(udg_hash, h, 3);
	real face = LoadReal(udg_hash, h, 4);
	group gdamage = LoadGroupHandle(udg_hash, h, 5);
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	real xnew = x + 30. * Cos(face * bj_DEGTORAD);
	real ynew = y + 30. * Sin(face * bj_DEGTORAD);
	player p = GetOwningPlayer(caster);
	group g = CreateGroup();
	unit Picked;
	real angle;
	unit dammi;
	unit dammivoid;
	rect r;
	timer tvoid;
	integer hvoid;
	if (wait > 0 && GetUnitState(caster, UNIT_STATE_LIFE) > .405) {
		SaveInteger(udg_hash, h, 3, wait);
		EnumDestructablesInRect(r, null, Trig_Bloody_Jump_Periodic_Dest_Actions);
		if (IsTerrainPathable(x + 30. * Cos(face * bj_DEGTORAD), y + 30. * Sin(face * bj_DEGTORAD), PATHING_TYPE_FLYABILITY) == false) {
			SetUnitPosition(caster, x + 30. * Cos(face * bj_DEGTORAD), y + 30. * Sin(face * bj_DEGTORAD));
		}
		if (waitef == 7) {
			SetUnitAnimation(dammivoid, "stand");
			SetUnitPathing(dammivoid, false);
			SetUnitTimeScale(dammivoid, 2.);
			PauseUnit(dammivoid, true);
			SetUnitMoveSpeed(dammivoid, .0);
			UnitAddAbility(dammivoid, 'Aloc');
			SetUnitVertexColor(dammivoid, $9B, $FF, $FF, 75);
			SetUnitAnimationByIndex(dammivoid, 6);
			SaveUnitHandle(udg_hash, hvoid, 1, dammivoid);
			TimerStart(tvoid, .7, false, Trig_Bloody_Jump_Delete_Dammi_Actions);
			DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", dammivoid, "chest"));
			DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPeasant.mdl", GetUnitX(caster), GetUnitY(caster)));
		else
		}
		SaveInteger(udg_hash, h, 2, waitef);
		SetUnitFacing(caster, face);
		GroupEnumUnitsInRange(g, x + 50. * Cos(face * bj_DEGTORAD), y + 50. * Sin(face * bj_DEGTORAD), 200., null);
		while (true) {
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && IsUnitInGroup(Picked, gdamage) == false && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				GroupAddUnit(gdamage, Picked);
				DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodRifleman.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodSorceress.mdl", Picked, "chest"));
				UnitApplyTimedLife(dammi, 'BTLF', 1.);
				UnitAddAbility(dammi, 'A0GN');
				IssueTargetOrderById(dammi, $D006B, Picked);
				UnitApplyTimedLife(dammi, 'BTLF', 1.);
				UnitAddAbility(dammi, 'A0GO');
				IssueTargetOrderById(dammi, $D007F, Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
		SaveGroupHandle(udg_hash, h, 5, gdamage);
	}
	if (wait <= 0 || GetUnitState(caster, UNIT_STATE_LIFE) < .405) {
		SetUnitAnimation(caster, "stand");
		SetUnitPathing(caster, true);
		SetUnitTimeScale(caster, 1.);
		PauseUnit(caster, false);
		SetUnitVertexColor(caster, $9B, $FF, $FF, $FF);
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
		IssueImmediateOrderById(caster, $D0080);
	}
	GroupClear(g);
	DestroyGroup(g);
	RemoveRect(r);
}
nothing Trig_Bloody_Jump_Actions() {
	unit caster = GetSpellAbilityUnit();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	unit target = GetSpellTargetUnit();
	real angle;
	location loc;
	real tx;
	real ty;
	real dist;
	real time;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	group gdamage = CreateGroup();
	if (target == null) {
	else
	}
	SetUnitAnimation(caster, "stand");
	SetUnitPathing(caster, false);
	SetUnitTimeScale(caster, 3.);
	PauseUnit(caster, true);
	SetUnitVertexColor(caster, $9B, $FF, $FF, $96);
	SetUnitAnimationByIndex(caster, 0);
	SetUnitFacing(caster, angle);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveInteger(udg_hash, h, 2, 6);
	SaveInteger(udg_hash, h, 3, R2I(dist / 30.));
	SaveReal(udg_hash, h, 4, angle);
	SaveGroupHandle(udg_hash, h, 5, gdamage);
	TimerStart(t, .03, true, Trig_Bloody_Jump_Periodic_Actions);
	RemoveLocation(loc);
}
boolean Trig_Bloody_Jump_Conditions() {
	return GetSpellAbilityId() == 'A0GM';
}
nothing InitTrig_Bloody_Jump() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Bloody_Jump, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Bloody_Jump, Condition(Trig_Bloody_Jump_Conditions));
	TriggerAddAction(gg_trg_Bloody_Jump, Trig_Bloody_Jump_Actions);
}
nothing Trig_Blood_Absorption_Destroy_Effects_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	effect ef;
	DestroyEffect(ef);
	DestroyEffect(ef);
	DestroyEffect(ef);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_Blood_Absorption_Actions() {
	unit caster = GetSpellAbilityUnit();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	real radius = 200.;
	real damage = 200.;
	real heal = 300.;
	unit Picked;
	group g = CreateGroup();
	player p = GetOwningPlayer(caster);
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	effect ef;
	DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HeroBloodElfBlood.mdl", caster, "chest"));
	DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", caster, "chest"));
	SaveEffectHandle(udg_hash, h, 1, ef);
	SaveEffectHandle(udg_hash, h, 2, ef);
	SaveEffectHandle(udg_hash, h, 3, ef);
	TimerStart(t, 1.2, false, Trig_Blood_Absorption_Destroy_Effects_Actions);
	SetUnitState(caster, UNIT_STATE_LIFE, GetUnitState(caster, UNIT_STATE_LIFE) + heal);
	GroupEnumUnitsInRange(g, x, y, radius, null);
	while (true) {
		if (Picked == null) break;
		if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl", Picked, "chest"));
			DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodSorceress.mdl", Picked, "chest"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\VampiricPotion\\VampPotionCaster.mdl", Picked, "origin"));
			UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_MELEE, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			SetUnitState(caster, UNIT_STATE_LIFE, GetUnitState(caster, UNIT_STATE_LIFE) + damage / 2);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
}
boolean Trig_Blood_Absorption_Conditions() {
	return GetSpellAbilityId() == 'A0GQ';
}
nothing InitTrig_Blood_Absorption() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Blood_Absorption, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Blood_Absorption, Condition(Trig_Blood_Absorption_Conditions));
	TriggerAddAction(gg_trg_Blood_Absorption, Trig_Blood_Absorption_Actions);
}
boolean Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Conditions() {
	return (udg_Nomer_samoi_volni == 9);
}
boolean Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func002C() {
	return (GetUnitAbilityLevelSwapped('A0ES', GetTriggerUnit()) > 0) && (GetRandomInt(1, 3) == 1) && (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group));
}
boolean Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func003C() {
	return (GetUnitAbilityLevelSwapped('A0ES', GetAttacker()) > 0) && (GetRandomInt(1, 3) == 1) && (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group));
}
boolean Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func004C() {
	return (GetUnitAbilityLevelSwapped('A0FJ', GetTriggerUnit()) > 0) && (GetRandomInt(1, 3) == 4) && (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group));
}
boolean Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func005C() {
	return (GetUnitAbilityLevelSwapped('A0FJ', GetAttacker()) > 0) && (GetRandomInt(1, 3) == 4) && (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group));
}
boolean Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func006C() {
	return (GetUnitAbilityLevelSwapped('A0GK', GetTriggerUnit()) > 0) && (GetRandomInt(1, 5) == 1) && (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group));
}
boolean Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func007C() {
	return (GetUnitAbilityLevelSwapped('A0GK', GetAttacker()) > 0) && (GetRandomInt(1, 2) == 1) && (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group));
}
boolean Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func008C() {
	return (GetUnitAbilityLevelSwapped('A0GQ', GetTriggerUnit()) > 0) && (GetRandomInt(1, 3) == 1) && (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group));
}
boolean Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func009C() {
	return (GetUnitAbilityLevelSwapped('A0GQ', GetAttacker()) > 0) && (GetRandomInt(1, 3) == 1) && (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group));
}
nothing Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Actions() {
	if ((Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func002C())) {
		IssueTargetOrderById(GetTriggerUnit(), $D00DE, GetAttacker());
	}
	if ((Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func003C())) {
		IssueTargetOrderById(GetAttacker(), $D00DE, GetTriggerUnit());
	}
	if ((Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func004C())) {
		IssueTargetOrderById(GetTriggerUnit(), $D0079, GetAttacker());
	}
	if ((Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func005C())) {
		IssueTargetOrderById(GetAttacker(), $D0079, GetTriggerUnit());
	}
	if ((Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func006C())) {
		IssueTargetOrderById(GetTriggerUnit(), $D0079, GetAttacker());
	}
	if ((Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func007C())) {
		IssueTargetOrderById(GetAttacker(), $D0079, GetTriggerUnit());
	}
	if ((Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func008C())) {
		IssueImmediateOrderById(GetTriggerUnit(), $D0080);
	}
	if ((Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func009C())) {
		IssueImmediateOrderById(GetAttacker(), $D0080);
	}
}
nothing InitTrig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u() {
	TriggerRegisterAnyUnitEventBJ(gg_trg_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u, EVENT_PLAYER_UNIT_ATTACKED);
	TriggerAddCondition(gg_trg_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u, Condition(Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Conditions));
	TriggerAddAction(gg_trg_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u, Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Actions);
}
boolean Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Conditions() {
	return (udg_Nomer_samoi_volni == 9);
}
boolean Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002001002() {
	return (IsPlayerInForce(GetOwningPlayer(GetFilterUnit()), udg_Players_Enemy_Group));
}
boolean Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001Func001002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
boolean Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001Func001002001003002001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
boolean Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001Func001002001003002002() {
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
boolean Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001Func001002001003002() {
	return GetBooleanAnd(Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001Func001002001003002001(), Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001Func001002001003002002());
}
boolean Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001Func001002001003() {
	return GetBooleanAnd(Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001Func001002001003001(), Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001Func001002001003002());
}
boolean Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001Func002C() {
	return (udg_Temp_Unit != null);
}
boolean Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001C() {
	return (GetUnitAbilityLevelSwapped('A0GF', GetEnumUnit()) > 0) && (GetRandomInt(1, 1) == 1);
}
boolean Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003001001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
boolean Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003001002() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) == false) != null;
}
boolean Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003001() {
	return GetBooleanAnd(Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003001001(), Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003001002());
}
boolean Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003002001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
boolean Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003002002() {
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
boolean Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003002() {
	return GetBooleanAnd(Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003002001(), Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003002002());
}
boolean Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003() {
	return GetBooleanAnd(Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003001(), Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003002());
}
boolean Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func002C() {
	return (udg_Temp_Unit != null);
}
boolean Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002C() {
	return (GetUnitAbilityLevelSwapped('A0GM', GetEnumUnit()) > 0) && (GetRandomInt(1, 1) == 1);
}
boolean Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003001001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
boolean Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003001002() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) == false) != null;
}
boolean Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003001() {
	return GetBooleanAnd(Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003001001(), Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003001002());
}
boolean Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003002001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
boolean Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003002002() {
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
boolean Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003002() {
	return GetBooleanAnd(Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003002001(), Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003002002());
}
boolean Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003() {
	return GetBooleanAnd(Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003001(), Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003002());
}
boolean Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func002C() {
	return (udg_Temp_Unit != null);
}
boolean Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003C() {
	return (GetUnitAbilityLevelSwapped('A0GI', GetEnumUnit()) > 0) && (GetRandomInt(1, 1) == 1);
}
nothing Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002A() {
	if ((Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001C())) {
		if ((Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001Func002C())) {
			IssueTargetOrderById(GetEnumUnit(), $D0296, udg_Temp_Unit);
		}
	}
	if ((Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002C())) {
		if ((Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func002C())) {
			IssueTargetOrderById(GetEnumUnit(), $D010E, udg_Temp_Unit);
		}
	}
	if ((Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003C())) {
		if ((Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func002C())) {
			IssueTargetOrderById(GetEnumUnit(), $D007D, udg_Temp_Unit);
		}
	}
}
nothing Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Actions() {
	ForGroupBJ(GetUnitsInRectMatching(bj_mapInitialPlayableArea, Condition(Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002001002)), Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002A);
}
nothing InitTrig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4() {
	TriggerRegisterTimerEventPeriodic(gg_trg_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4, 1.);
	TriggerAddCondition(gg_trg_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4, Condition(Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Conditions));
	TriggerAddAction(gg_trg_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4, Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Actions);
}
boolean Trig_Hatred_of_fire_Conditions() {
	return (GetSpellAbilityId() == 'A0A0');
}
nothing timeout11() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit u = LoadUnitHandle(udg_hash, h, 40);
	UnitRemoveAbility(u, 'A0GY');
	DestroyTimer(t);
	FlushChildHashtable(udg_hash, h);
}
nothing Trig_Hatred_of_fire_Actions() {
	unit u = GetSpellAbilityUnit();
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	TimerStart(t, 12., false, timeout11);
	SaveUnitHandle(udg_hash, h, 40, u);
}
nothing InitTrig_Hatred_of_fire() {
	TriggerRegisterAnyUnitEventBJ(gg_trg_Hatred_of_fire, EVENT_PLAYER_UNIT_SPELL_EFFECT);
	TriggerAddCondition(gg_trg_Hatred_of_fire, Condition(Trig_Hatred_of_fire_Conditions));
	TriggerAddAction(gg_trg_Hatred_of_fire, Trig_Hatred_of_fire_Actions);
}
boolean firess() {
	return (GetSpellAbilityId() == 'A0GZ') && GetUnitAbilityLevel(GetSpellAbilityUnit(), 'A0GZ') == 1;
}
nothing timeout15() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	integer wait = LoadInteger(udg_hash, h, 42);
	unit u = LoadUnitHandle(udg_hash, h, 41);
	unit z = LoadUnitHandle(udg_hash, h, 43);
	texttag txt;
	if (wait > 0 && GetUnitAbilityLevel(u, 'A09Y') == 1) {
		SetTextTagPermanent(txt, false);
		SetTextTagVelocityBJ(txt, 64, 90);
		SetTextTagLifespan(txt, .6);
		SaveInteger(udg_hash, h, 42, wait);
		SetUnitAnimation(u, "Spell");
		SetUnitAbilityLevel(u, 'A0GZ', GetUnitAbilityLevel(u, 'A0GZ') + 1);
	else
		IssueTargetOrderById(u, $D02B6, z);
		UnitRemoveAbility(u, 'A09Y');
		PauseUnit(u, false);
		SetUnitAnimation(u, "stand");
		DestroyTimer(t);
		FlushChildHashtable(udg_hash, h);
	}
}
nothing fires() {
	unit u = GetSpellAbilityUnit();
	unit z = GetSpellTargetUnit();
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	integer wait = 4;
	PauseUnit(u, true);
	TimerStart(t, .9, true, timeout15);
	SaveInteger(udg_hash, h, 42, wait);
	SaveUnitHandle(udg_hash, h, 41, u);
	SaveUnitHandle(udg_hash, h, 43, z);
	UnitAddAbility(u, 'A09Y');
}
nothing InitTrig_set_fire() {
	TriggerRegisterAnyUnitEventBJ(gg_trg_set_fire, EVENT_PLAYER_UNIT_SPELL_EFFECT);
	TriggerAddCondition(gg_trg_set_fire, Condition(firess));
	TriggerAddAction(gg_trg_set_fire, fires);
}
boolean firess2() {
	return (GetSpellAbilityId() == 'A0GZ') && GetUnitAbilityLevel(GetSpellAbilityUnit(), 'A0GZ') > 1;
}
nothing timeout16() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit u = LoadUnitHandle(udg_hash, h, 43);
	SetUnitAbilityLevel(u, 'A0GZ', 1);
	DestroyTimer(t);
	FlushChildHashtable(udg_hash, h);
}
nothing fires2() {
	unit u = GetSpellAbilityUnit();
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	UnitRemoveAbility(u, 'A09Y');
	SaveUnitHandle(udg_hash, h, 43, u);
	TimerStart(t, .5, false, timeout16);
}
nothing InitTrig_set_fire_2() {
	TriggerRegisterAnyUnitEventBJ(gg_trg_set_fire_2, EVENT_PLAYER_UNIT_SPELL_EFFECT);
	TriggerAddCondition(gg_trg_set_fire_2, Condition(firess2));
	TriggerAddAction(gg_trg_set_fire_2, fires2);
}
boolean Trig_the_creation_of_the_image_Conditions() {
	return GetSpellAbilityId() == 'A0HG';
}
nothing timeout17() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit u = LoadUnitHandle(udg_hash, h, 46);
	unit dammi = LoadUnitHandle(udg_hash, h, 47);
	unit dammi2;
	real x = LoadReal(udg_hash, h, 44);
	real y = LoadReal(udg_hash, h, 45);
	group g = CreateGroup();
	unit Picked;
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl", dammi, "origin"));
	GroupEnumUnitsInRange(g, x, y, 380, null);
	while (true) {
		if (Picked == null) break;
		if (IsUnitEnemy(Picked, GetOwningPlayer(u)) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false) {
			UnitDamageTargetBJ(u, Picked, ($C8), ATTACK_TYPE_NORMAL, DAMAGE_TYPE_NORMAL);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl", Picked, "origin"));
		else
			if (IsUnitAlly(Picked, GetOwningPlayer(u)) && GetUnitTypeId(Picked) == 'n01D' && GetUnitState(Picked, UNIT_STATE_LIFE) > .0) {
				UnitAddAbility(dammi2, 'A0HI');
				UnitApplyTimedLife(dammi2, 'BTLF', 1.);
				IssueTargetOrderById(dammi2, $D0062, Picked);
			}
		}
		GroupRemoveUnit(g, Picked);
	}
	SetUnitTimeScalePercent(dammi, 'd');
	KillUnit(dammi);
	DestroyGroup(g);
	DestroyTimer(t);
	FlushChildHashtable(udg_hash, h);
}
nothing Trig_the_creation_of_the_image_Actions() {
	unit u = GetSpellAbilityUnit();
	location locs = GetSpellTargetLoc();
	real x = GetLocationX(locs);
	real y = GetLocationY(locs);
	unit dammi = CreateUnit(GetOwningPlayer(u), 'n00I', x, y, GetUnitFacing(u));
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	UnitAddAbility(dammi, 'Aloc');
	TimerStart(t, 2.07, false, timeout17);
	SaveReal(udg_hash, h, 44, x);
	SaveReal(udg_hash, h, 45, y);
	SaveUnitHandle(udg_hash, h, 46, u);
	SaveUnitHandle(udg_hash, h, 47, dammi);
	SetUnitVertexColor(dammi, $FF, $FF, $FF, 90);
	SetUnitTimeScalePercent(dammi, 80);
	PauseUnit(dammi, true);
	UnitApplyTimedLife(dammi, 'BTLF', 1.85);
	SetUnitAnimation(dammi, "Spell Slam");
	RemoveLocation(locs);
}
nothing InitTrig_the_creation_of_the_image() {
	TriggerRegisterAnyUnitEventBJ(gg_trg_the_creation_of_the_image, EVENT_PLAYER_UNIT_SPELL_EFFECT);
	TriggerAddCondition(gg_trg_the_creation_of_the_image, Condition(Trig_the_creation_of_the_image_Conditions));
	TriggerAddAction(gg_trg_the_creation_of_the_image, Trig_the_creation_of_the_image_Actions);
}
boolean Trig_fiery_explosions_Conditions() {
	return GetSpellAbilityId() == 'A0HK';
}
nothing timeout18() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	integer wait = LoadInteger(udg_hash, h, 50);
	unit u = LoadUnitHandle(udg_hash, h, 48);
	unit j = LoadUnitHandle(udg_hash, h, 49);
	real x = GetUnitX(j);
	real y = GetUnitY(j);
	group g = CreateGroup();
	unit Picked;
	if (GetUnitState(j, UNIT_STATE_LIFE) > .0) {
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Incinerate\\FireLordDeathExplode.mdl", x, y));
	}
	GroupEnumUnitsInRange(g, x, y, 300, null);
	while (true) {
		if (Picked == null) break;
		if (IsUnitEnemy(Picked, GetOwningPlayer(u)) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false) {
			UnitDamageTargetBJ(u, Picked, (80), ATTACK_TYPE_NORMAL, DAMAGE_TYPE_NORMAL);
		}
		GroupRemoveUnit(g, Picked);
	}
	DestroyGroup(g);
	if (wait < 0) {
		DestroyTimer(t);
		UnitRemoveAbility(j, 'B03J');
		FlushChildHashtable(udg_hash, h);
	else
		SaveInteger(udg_hash, h, 50, wait);
	}
}
nothing Trig_fiery_explosions_Actions() {
	unit u = GetSpellAbilityUnit();
	unit j = GetSpellTargetUnit();
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	integer wait = GetRandomInt(3, 8);
	TimerStart(t, 1., true, timeout18);
	SaveUnitHandle(udg_hash, h, 48, u);
	SaveUnitHandle(udg_hash, h, 49, j);
	SaveInteger(udg_hash, h, 50, wait);
}
nothing InitTrig_fiery_explosions() {
	TriggerRegisterAnyUnitEventBJ(gg_trg_fiery_explosions, EVENT_PLAYER_UNIT_SPELL_EFFECT);
	TriggerAddCondition(gg_trg_fiery_explosions, Condition(Trig_fiery_explosions_Conditions));
	TriggerAddAction(gg_trg_fiery_explosions, Trig_fiery_explosions_Actions);
}
nothing Trig_Breathoffire_Periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	unit dammi = LoadUnitHandle(udg_hash, h, 2);
	real xt = LoadReal(udg_hash, h, 3);
	real yt = LoadReal(udg_hash, h, 4);
	boolean first = LoadBoolean(udg_hash, h, 5);
	integer order = GetUnitCurrentOrder(caster);
	integer orderId;
	if ((orderId != 0)) {
	else
		if ((orderId != 0)) {
		}
	}
	if (order == orderId) {
		IssuePointOrderById(dammi, $D0264, xt, yt);
		if (first) {
			SaveBoolean(udg_hash, h, 5, first);
			TimerStart(t, 1., true, Trig_Breathoffire_Periodic_Actions);
		}
	else
		RemoveUnit(dammi);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
}
nothing Trig_Breathoffire_Actions() {
	unit caster = GetSpellAbilityUnit();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	location loc;
	real xt;
	real yt;
	unit target = GetSpellTargetUnit();
	real angle;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	unit dammi;
	boolean first = true;
	if (target != null) {
	else
	}
	SetUnitFacing(caster, angle);
	UnitAddAbility(dammi, 'A0HM');
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveUnitHandle(udg_hash, h, 2, dammi);
	SaveReal(udg_hash, h, 3, xt);
	SaveReal(udg_hash, h, 4, yt);
	SaveBoolean(udg_hash, h, 5, first);
	TimerStart(t, .04, true, Trig_Breathoffire_Periodic_Actions);
	RemoveLocation(loc);
}
boolean Trig_Breathoffire_Conditions() {
	return GetSpellAbilityId() == 'A0HL';
}
nothing InitTrig_Breathoffire() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Breathoffire, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Breathoffire, Condition(Trig_Breathoffire_Conditions));
	TriggerAddAction(gg_trg_Breathoffire, Trig_Breathoffire_Actions);
}
nothing Trig_Fire_Explosions_Periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	real xt = LoadReal(udg_hash, h, 2);
	real yt = LoadReal(udg_hash, h, 3);
	real damage = LoadReal(udg_hash, h, 4);
	integer order = GetUnitCurrentOrder(caster);
	player p = GetOwningPlayer(caster);
	real xnew;
	real ynew;
	unit dammi;
	integer orderId;
	group g;
	unit Picked;
	if ((orderId != 0)) {
	else
		if ((orderId != 0)) {
		}
	}
	if (order == orderId) {
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl", xnew, ynew));
		GroupEnumUnitsInRange(g, xnew, ynew, 200., null);
		while (true) {
			if (Picked == null) break;
			if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, p) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				StunUnitTimed(Picked, 1.5);
				UnitAddAbility(dammi, 'A0HR');
				UnitApplyTimedLife(dammi, 'BTLF', 1.5);
				IssueTargetOrderById(dammi, $D02B6, Picked);
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosDone.mdl ", Picked, "chest"));
			}
			GroupRemoveUnit(g, Picked);
		}
	else
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	GroupClear(g);
	DestroyGroup(g);
}
nothing Trig_Fire_Explosions_Actions() {
	unit caster = GetSpellAbilityUnit();
	location loc = GetSpellTargetLoc();
	real xt = GetLocationX(loc);
	real yt = GetLocationY(loc);
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	real damage = 225.;
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 2, xt);
	SaveReal(udg_hash, h, 3, yt);
	SaveReal(udg_hash, h, 4, damage);
	TimerStart(t, .2, true, Trig_Fire_Explosions_Periodic_Actions);
	RemoveLocation(loc);
}
boolean Trig_Fire_Explosions_Conditions() {
	return GetSpellAbilityId() == 'A0HQ';
}
nothing InitTrig_Fire_Explosions() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Fire_Explosions, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Fire_Explosions, Condition(Trig_Fire_Explosions_Conditions));
	TriggerAddAction(gg_trg_Fire_Explosions, Trig_Fire_Explosions_Actions);
}
nothing Trig_BossStomp_Remove_DisArmor_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	group gdamage = LoadGroupHandle(udg_hash, h, 1);
	unit Picked;
	while (true) {
		if (Picked == null) break;
		SetArmorAbilityLevel(Picked, 16);
		GroupRemoveUnit(gdamage, Picked);
	}
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	GroupClear(gdamage);
	DestroyGroup(gdamage);
}
nothing Trig_BossStomp_Actions() {
	unit caster = GetSpellAbilityUnit();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	real radius = 400.;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	real damage = 250.;
	player p = GetOwningPlayer(caster);
	group g = CreateGroup();
	group gdamage = CreateGroup();
	unit Picked;
	real dist;
	real angle;
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", x, y));
	GroupEnumUnitsInRange(g, x, y, radius, null);
	while (true) {
		if (Picked == null) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, p) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			StunUnitTimed(Picked, 1.75);
			MoveUnit(Picked, (400. - dist) / 400. + .25, (600. - dist), .0, angle, .0, false);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl", Picked, "head"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl", Picked, "origin"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl", Picked, "hand,left"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl", Picked, "hand,right"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Incinerate\\FireLordDeathExplode.mdl", Picked, "chest"));
			SetArmorAbilityLevel(Picked, -16);
			GroupAddUnit(gdamage, Picked);
		}
		GroupRemoveUnit(g, Picked);
	}
	SaveGroupHandle(udg_hash, h, 1, gdamage);
	TimerStart(t, 12., false, Trig_BossStomp_Remove_DisArmor_Actions);
	GroupClear(g);
	DestroyGroup(g);
}
boolean Trig_BossStomp_Conditions() {
	return GetSpellAbilityId() == 'A0HS';
}
nothing InitTrig_BossStomp() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_BossStomp, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_BossStomp, Condition(Trig_BossStomp_Conditions));
	TriggerAddAction(gg_trg_BossStomp, Trig_BossStomp_Actions);
}
nothing Trig_Mark_of_Fire_Periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	unit dammi = LoadUnitHandle(udg_hash, h, 2);
	effect ef;
	integer wait = LoadInteger(udg_hash, h, 4);
	group g;
	unit Picked;
	player p;
	real scale;
	real x;
	real y;
	if (wait > 0) {
		SaveInteger(udg_hash, h, 4, wait);
		SetUnitScale(dammi, scale, scale, 1.);
	else
		GroupEnumUnitsInRange(g, x, y, 250., null);
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl", x + 100. * Cos(120. * bj_DEGTORAD), y + 100. * Sin(120. * bj_DEGTORAD)));
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl", x + 100. * Cos(240. * bj_DEGTORAD), y + 100. * Sin(240. * bj_DEGTORAD)));
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl", x + 100. * Cos(360. * bj_DEGTORAD), y + 100. * Sin(360. * bj_DEGTORAD)));
		while (true) {
			if (Picked == null) break;
			if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, p) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				UnitDamageTarget(caster, Picked, GetUnitState(Picked, UNIT_STATE_MAX_LIFE) / 2, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosDone.mdl ", Picked, "chest"));
			}
			GroupRemoveUnit(g, Picked);
		}
		GroupClear(g);
		DestroyGroup(g);
		DestroyEffect(ef);
		DestroyEffect(ef);
		DestroyEffect(ef);
		RemoveUnit(dammi);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
}
nothing Trig_Mark_of_Fire_Actions() {
	unit caster = GetSpellAbilityUnit();
	location loc = GetSpellTargetLoc();
	real xt = GetLocationX(loc);
	real yt = GetLocationY(loc);
	unit dammi = CreateUnit(GetOwningPlayer(caster), 'h00U', xt, yt, 270.);
	effect ef;
	integer wait = $85;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveUnitHandle(udg_hash, h, 2, dammi);
	SaveInteger(udg_hash, h, 4, wait);
	SaveEffectHandle(udg_hash, h, 3, ef);
	SaveEffectHandle(udg_hash, h, 5, ef);
	SaveEffectHandle(udg_hash, h, 6, ef);
	TimerStart(t, .03, true, Trig_Mark_of_Fire_Periodic_Actions);
	RemoveLocation(loc);
}
boolean Trig_Mark_of_Fire_Conditions() {
	return GetSpellAbilityId() == 'A0HT';
}
nothing InitTrig_Mark_of_Fire() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Mark_of_Fire, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Mark_of_Fire, Condition(Trig_Mark_of_Fire_Conditions));
	TriggerAddAction(gg_trg_Mark_of_Fire, Trig_Mark_of_Fire_Actions);
}
boolean Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Conditions() {
	return (udg_Nomer_samoi_volni == $A);
}
boolean Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func002C() {
	return (GetUnitAbilityLevelSwapped('A0A0', GetTriggerUnit()) > 0) && (GetRandomInt(1, 2) == 1) && (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group));
}
boolean Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func003C() {
	return (GetUnitAbilityLevelSwapped('A0A0', GetAttacker()) > 0) && (GetRandomInt(1, 2) == 1) && (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group));
}
boolean Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func004C() {
	return (GetUnitAbilityLevelSwapped('A0HL', GetTriggerUnit()) > 0) && (GetRandomInt(1, 3) == 1) && (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group));
}
boolean Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func005C() {
	return (GetUnitAbilityLevelSwapped('A0HL', GetAttacker()) > 0) && (GetRandomInt(1, 2) == 1) && (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group));
}
boolean Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func006C() {
	return (GetUnitAbilityLevelSwapped('A0HP', GetTriggerUnit()) > 0) && (GetRandomInt(1, 2) == 1) && (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group));
}
boolean Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func007C() {
	return (GetUnitAbilityLevelSwapped('A0HP', GetAttacker()) > 0) && (GetRandomInt(1, 3) == 1) && (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group));
}
boolean Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func008C() {
	return (GetUnitAbilityLevelSwapped('A0HT', GetTriggerUnit()) > 0) && (GetRandomInt(1, 2) == 1) && (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group));
}
boolean Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func009C() {
	return (GetUnitAbilityLevelSwapped('A0HT', GetAttacker()) > 0) && (GetRandomInt(1, 2) == 1) && (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group));
}
nothing Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Actions() {
	if ((Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func002C())) {
		IssueImmediateOrderById(GetTriggerUnit(), $D00C4);
	}
	if ((Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func003C())) {
		IssueImmediateOrderById(GetAttacker(), $D00C4);
	}
	if ((Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func004C())) {
		IssueTargetOrderById(GetTriggerUnit(), $D0278, GetAttacker());
	}
	if ((Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func005C())) {
		IssueTargetOrderById(GetAttacker(), $D0278, GetTriggerUnit());
	}
	if ((Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func006C())) {
		IssueTargetOrderById(GetTriggerUnit(), $D02BC, GetAttacker());
	}
	if ((Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func007C())) {
		IssueTargetOrderById(GetAttacker(), $D02BC, GetTriggerUnit());
	}
	if ((Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func008C())) {
		IssuePointOrderById(GetTriggerUnit(), $D00EA, GetUnitX(GetAttacker()), GetUnitY(GetAttacker()));
	}
	if ((Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func009C())) {
		IssuePointOrderById(GetAttacker(), $D00EA, GetUnitX(GetTriggerUnit()), GetUnitY(GetTriggerUnit()));
	}
}
nothing InitTrig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire() {
	TriggerRegisterAnyUnitEventBJ(gg_trg_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire, EVENT_PLAYER_UNIT_ATTACKED);
	TriggerAddCondition(gg_trg_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire, Condition(Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Conditions));
	TriggerAddAction(gg_trg_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire, Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Actions);
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Conditions() {
	return (udg_Nomer_samoi_volni == $A);
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002001002() {
	return (IsPlayerInForce(GetOwningPlayer(GetFilterUnit()), udg_Players_Enemy_Group));
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func001Func001002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func001Func001002001003002001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func001Func001002001003002002() {
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func001Func001002001003002() {
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func001Func001002001003002001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func001Func001002001003002002());
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func001Func001002001003() {
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func001Func001002001003001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func001Func001002001003002());
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func001C() {
	return (GetUnitAbilityLevelSwapped('A0GZ', GetEnumUnit()) > 0) && (GetRandomInt(1, 2) == 3);
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002Func001002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002Func001002001003002001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002Func001002001003002002() {
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002Func001002001003002() {
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002Func001002001003002001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002Func001002001003002002());
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002Func001002001003() {
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002Func001002001003001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002Func001002001003002());
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002Func002C() {
	return (udg_Temp_Unit != null);
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002C() {
	return (GetUnitAbilityLevelSwapped('A0HH', GetEnumUnit()) > 0) && (GetRandomInt(1, 2) == 1);
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003Func003002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003Func003002001003002001() {
	return (GetUnitTypeId(GetFilterUnit()) == 'n01D');
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003Func003002001003002002() {
	return (IsPlayerAlly(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003Func003002001003002() {
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003Func003002001003002001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003Func003002001003002002());
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003Func003002001003() {
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003Func003002001003001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003Func003002001003002());
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003Func004C() {
	return (udg_Temp_Unit != null);
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003C() {
	return (GetUnitAbilityLevelSwapped('A0HG', GetEnumUnit()) > 0) && (GetRandomInt(1, 2) == 1);
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func004Func003002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func004Func003002001003002() {
	return (IsPlayerAlly(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func004Func003002001003() {
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func004Func003002001003001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func004Func003002001003002());
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func004Func004C() {
	return (udg_Temp_Unit != null);
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func004C() {
	return (GetUnitAbilityLevelSwapped('A0HJ', GetEnumUnit()) > 0) && (GetRandomInt(1, 2) == 1);
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func005Func001002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func005Func001002001003002001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func005Func001002001003002002() {
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func005Func001002001003002() {
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func005Func001002001003002001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func005Func001002001003002002());
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func005Func001002001003() {
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func005Func001002001003001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func005Func001002001003002());
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func005C() {
	return (GetUnitAbilityLevelSwapped('A0HO', GetEnumUnit()) > 0) && (GetRandomInt(1, 2) == 3);
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func006Func001002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func006Func001002001003002001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func006Func001002001003002002() {
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func006Func001002001003002() {
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func006Func001002001003002001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func006Func001002001003002002());
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func006Func001002001003() {
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func006Func001002001003001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func006Func001002001003002());
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func006C() {
	return (GetUnitAbilityLevelSwapped('A0HQ', GetEnumUnit()) > 0) && (GetRandomInt(1, 2) == 1);
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007Func001002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007Func001002001003002001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007Func001002001003002002() {
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007Func001002001003002() {
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007Func001002001003002001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007Func001002001003002002());
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007Func001002001003() {
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007Func001002001003001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007Func001002001003002());
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007Func002C() {
	return (udg_Temp_Unit != null);
}
boolean Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007C() {
	return (GetUnitAbilityLevelSwapped('A0HS', GetEnumUnit()) > 0) && (GetRandomInt(1, 2) == 1);
}
nothing Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002A() {
	if ((Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func001C())) {
		IssueTargetOrderById(GetEnumUnit(), $D02B6, udg_Temp_Unit);
	}
	if ((Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002C())) {
		if ((Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002Func002C())) {
			IssueImmediateOrderById(GetEnumUnit(), $D0081);
		}
	}
	if ((Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003C())) {
		if ((Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003Func004C())) {
			IssuePointOrderById(GetEnumUnit(), $D00FA, GetUnitX(udg_Temp_Unit), GetUnitY(udg_Temp_Unit));
		}
	}
	if ((Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func004C())) {
		if ((Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func004Func004C())) {
			IssueTargetOrderById(GetEnumUnit(), $D0062, udg_Temp_Unit);
		}
	}
	if ((Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func005C())) {
		IssueTargetOrderById(GetEnumUnit(), $D0255, udg_Temp_Unit);
	}
	if ((Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func006C())) {
		IssueTargetOrderById(GetEnumUnit(), $D0278, udg_Temp_Unit);
	}
	if ((Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007C())) {
		if ((Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007Func002C())) {
			IssueImmediateOrderById(GetEnumUnit(), $D0105);
		}
	}
}
nothing Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Actions() {
	ForGroupBJ(GetUnitsInRectMatching(bj_mapInitialPlayableArea, Condition(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002001002)), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002A);
}
nothing InitTrig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp() {
	TriggerRegisterTimerEventPeriodic(gg_trg_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp, 1.);
	TriggerAddCondition(gg_trg_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp, Condition(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Conditions));
	TriggerAddAction(gg_trg_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp, Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Actions);
}
nothing Trig_Power_of_Skeletons_Remove_Bonuses_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	integer damagebonus = LoadInteger(udg_hash, h, 1);
	integer asbonus = LoadInteger(udg_hash, h, 2);
	integer regenbonus = LoadInteger(udg_hash, h, 3);
	unit target = LoadUnitHandle(udg_hash, h, 4);
	SetAttackAbilityLevel(target, -damagebonus);
	SetAttackSpeedAbilityLevel(target, -asbonus);
	SetUnitLifeAndManaRegeneration(target, "life", -regenbonus);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_Power_of_Skeletons_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	integer lvl = GetUnitAbilityLevel(caster, 'A0B6');
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	real time = 14.;
	integer damagebonus = $A + 5 * lvl;
	integer asbonus = $F + 5 * lvl;
	integer regenbonus = 3 + 5 * lvl;
	if (IsUnitType(target, UNIT_TYPE_HERO)) {
	}
	SetAttackAbilityLevel(target, damagebonus);
	SetAttackSpeedAbilityLevel(target, asbonus);
	SetUnitLifeAndManaRegeneration(target, "life", regenbonus);
	SaveInteger(udg_hash, h, 1, damagebonus);
	SaveInteger(udg_hash, h, 2, asbonus);
	SaveInteger(udg_hash, h, 3, regenbonus);
	SaveUnitHandle(udg_hash, h, 4, target);
	TimerStart(t, time, false, Trig_Power_of_Skeletons_Remove_Bonuses_Actions);
}
boolean Trig_Power_of_Skeletons_Conditions() {
	return GetSpellAbilityId() == 'A0B6';
}
nothing InitTrig_Power_of_Skeletons() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Power_of_Skeletons, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Power_of_Skeletons, Condition(Trig_Power_of_Skeletons_Conditions));
	TriggerAddAction(gg_trg_Power_of_Skeletons, Trig_Power_of_Skeletons_Actions);
}
nothing Trig_Water_Elemental_Load_Actions() {
	AbilityPreload('A071', 6);
	AbilityPreload('A072', 6);
	AbilityPreload('A06Z', 6);
	AbilityPreload('A078', 3);
	AbilityPreload('A06V', 6);
	AbilityPreload('A06X', 1);
	AbilityPreload('A07L', 1);
	AbilityPreload('A07K', 1);
	AbilityPreload('A07J', 1);
	EffectPreload("war3mapImported\\s_WateryAura.mdx");
	EffectPreload("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl");
	EffectPreload("war3mapImported\\AquaSpike.mdx");
	EffectPreload("Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveDamage.mdl");
	EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodFootman.mdl");
	UnitPreload('h017');
	UnitPreload('h01D');
	UnitPreload('h01E');
	UnitPreload('h01F');
	UnitPreload('h01G');
	UnitPreload('h01H');
	EnableTrigger(gg_trg_spirits_of_water_dead);
	EnableTrigger(gg_trg_Skill_Gertva);
	EnableTrigger(gg_trg_Opening_Streams);
	EnableTrigger(gg_trg_Tsunami);
	EnableTrigger(gg_trg_Water_Explosion);
}
nothing InitTrig_Water_Elemental_Load() {
	TriggerAddAction(gg_trg_Water_Elemental_Load, Trig_Water_Elemental_Load_Actions);
}
nothing Trig_Init_kreeps_Actions() {
}
nothing InitTrig_Init_kreeps() {
	TriggerAddAction(gg_trg_Init_kreeps, Trig_Init_kreeps_Actions);
}
boolean Trig_spirits_of_water_dead_Conditions() {
	integer id = GetUnitTypeId(GetDyingUnit());
	return (id == 'h017' || id == 'h01D' || id == 'h01E' || id == 'h01F' || id == 'h01G' || id == 'h01H') && IsUnitIllusion(GetDyingUnit()) == false;
}
nothing Trig_spirits_of_water_dead_Actions() {
	unit elemental = GetDyingUnit();
	unit hero = LoadUnitHandle(udg_hash, GetHandleId(elemental), 63);
	SaveInteger(udg_hash, GetHandleId(hero), 64, LoadInteger(udg_hash, GetHandleId(hero), 64) - 1);
	DestroyEffect(LoadEffectHandle(udg_hash, GetHandleId(elemental), '{'));
	FlushChildHashtable(udg_hash, GetHandleId(elemental));
}
nothing InitTrig_spirits_of_water_dead() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_spirits_of_water_dead, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_spirits_of_water_dead, Condition(Trig_spirits_of_water_dead_Conditions));
	TriggerAddAction(gg_trg_spirits_of_water_dead, Trig_spirits_of_water_dead_Actions);
}
boolean Trig_Skill_Gertva_Conditions() {
	integer id = GetUnitTypeId(GetSpellTargetUnit());
	return GetSpellAbilityId() == 'A06X' && IsUnitIllusion(GetSpellTargetUnit()) == false && (id == 'H01I' || id == 'h017' || id == 'h01D' || id == 'h01E' || id == 'h01F' || id == 'h01G' || id == 'h01H');
}
nothing Trig_Skill_Gertva_Actions() {
	DestroyEffect(AddSpecialEffectTarget("units\\human\\WaterElemental\\WaterElemental.mdl", GetSpellTargetUnit(), "chest"));
	SetUnitState(GetSpellTargetUnit(), UNIT_STATE_LIFE, GetUnitState(GetSpellTargetUnit(), UNIT_STATE_LIFE) + (.66 * GetUnitState(GetSpellAbilityUnit(), UNIT_STATE_LIFE)) + .1 * GetUnitState(GetSpellTargetUnit(), UNIT_STATE_MAX_LIFE));
	KillUnit(GetSpellAbilityUnit());
}
nothing InitTrig_Skill_Gertva() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Skill_Gertva, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Skill_Gertva, Condition(Trig_Skill_Gertva_Conditions));
	TriggerAddAction(gg_trg_Skill_Gertva, Trig_Skill_Gertva_Actions);
}
nothing Trig_Opening_Streams_Destructables() {
	KillDestructable(GetEnumDestructable());
}
nothing Trig_Opening_Streams_unit_Actions() {
	timer tu = GetExpiredTimer();
	integer ht = GetHandleId(tu);
	unit pilot = LoadUnitHandle(udg_hash, ht, 1);
	real dist = LoadReal(udg_hash, ht, 2);
	real speed = LoadReal(udg_hash, ht, 3);
	real angleu = LoadReal(udg_hash, ht, 4);
	real waitu = LoadReal(udg_hash, ht, 5);
	real waitucheck = LoadReal(udg_hash, ht, 6);
	unit caster = LoadUnitHandle(udg_hash, ht, 7);
	real damage = LoadReal(udg_hash, ht, 8);
	real x = GetUnitX(pilot) + speed * Cos(angleu * bj_DEGTORAD);
	real y = GetUnitY(pilot) + speed * Sin(angleu * bj_DEGTORAD);
	rect r;
	if (waitu > 0) {
		SaveReal(udg_hash, ht, 5, waitu);
		if (IsTerrainPathable(x, y, PATHING_TYPE_FLYABILITY) == false && GetTerrainCliffLevel(x, y) == GetTerrainCliffLevel(GetUnitX(pilot), GetUnitY(pilot))) {
			SetUnitX(pilot, x);
			SetUnitY(pilot, y);
		}
		if (waitu <= waitucheck) {
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveDamage.mdl", pilot, "chest"));
			SetUnitFlyHeight(pilot, 0, 2 * (dist + 50));
		}
	else
		EnumDestructablesInRect(r, null, Trig_Opening_Streams_Destructables);
		UnitDamageTarget(caster, pilot, damage / 2, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
		DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodFootman.mdl", pilot, "origin"));
		SetUnitPathing(pilot, true);
		RemoveRect(r);
		FlushChildHashtable(udg_hash, ht);
		DestroyTimer(tu);
	}
}
nothing Trig_Opening_Streams_periodic_Actions() {
	timer tper = GetExpiredTimer();
	integer hper = GetHandleId(tper);
	unit caster = LoadUnitHandle(udg_hash, hper, 1);
	real xloc = LoadReal(udg_hash, hper, 2);
	real yloc = LoadReal(udg_hash, hper, 3);
	integer wait = LoadInteger(udg_hash, hper, 4);
	real damage = LoadReal(udg_hash, hper, 5);
	real angle = 10. * wait;
	array<unit> water;
	integer lop = 1;
	effect ef;
	real x;
	real y;
	timer tu;
	integer ht;
	group g;
	unit Picked;
	real dist;
	real angleu;
	real speed;
	real waitu;
	if (wait < 50) {
		while (true) {
			if (lop > 18) break;
			if (IsTerrainPathable(x, y, PATHING_TYPE_FLYABILITY) == false) {
				SetUnitPosition(water[lop], x, y);
			}
		}
		SaveInteger(udg_hash, hper, 4, wait);
	else
		while (true) {
			if (lop > 6) break;
			DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl", x, y));
			DestroyEffect(AddSpecialEffect("war3mapImported\\AquaSpike.mdx", x, y));
		}
		while (true) {
			if (lop > 18) break;
			DestroyEffect(ef);
			FlushChildHashtable(udg_hash, GetHandleId(water[lop]));
			UnitApplyTimedLife(water[lop], 'BTLF', .5);
			KillUnit(water[lop]);
		}
		GroupEnumUnitsInRange(g, xloc, yloc, 350., null);
		while (true) {
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, GetOwningPlayer(caster)) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_GROUND) && GetUnitTypeId(Picked) != 'h00U') {
				UnitAddAbility(Picked, 'Amrf');
				UnitRemoveAbility(Picked, 'Amrf');
				SetUnitPathing(Picked, false);
				SetUnitFlyHeight(Picked, dist + 50, 2 * (dist + 50));
				SaveUnitHandle(udg_hash, ht, 1, Picked);
				SaveReal(udg_hash, ht, 2, dist);
				SaveReal(udg_hash, ht, 3, speed);
				SaveReal(udg_hash, ht, 4, angleu);
				SaveReal(udg_hash, ht, 5, waitu);
				SaveReal(udg_hash, ht, 6, (waitu / 2));
				SaveUnitHandle(udg_hash, ht, 7, caster);
				SaveReal(udg_hash, ht, 8, damage);
				UnitDamageTarget(caster, Picked, damage / 2, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveDamage.mdl", Picked, "chest"));
				TimerStart(tu, .025, true, Trig_Opening_Streams_unit_Actions);
			}
			GroupRemoveUnit(g, Picked);
		}
		FlushChildHashtable(udg_hash, hper);
		DestroyTimer(tper);
	}
	SaveInteger(udg_hash, hper, 4, wait);
	DestroyGroup(g);
}
nothing Trig_Opening_Streams_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	location loc = GetSpellTargetLoc();
	real xloc = GetLocationX(loc);
	real yloc = GetLocationY(loc);
	real angle = .0;
	integer wait = 0;
	array<unit> water;
	integer lop = 1;
	real x;
	real y;
	timer tper = CreateTimer();
	integer hper = GetHandleId(tper);
	effect ef;
	integer lvl = GetUnitAbilityLevel(caster, 'A072');
	real damage = ($F * lvl) + (5 * lvl * lvl) + 20.;
	while (true) {
		if (lop > 18) break;
		if (IsTerrainPathable(x, y, PATHING_TYPE_FLYABILITY) == false) {
			SaveUnitHandle(udg_hash, hper, 5 + lop, water[lop]);
			SaveEffectHandle(udg_hash, GetHandleId(water[lop]), 1, ef);
		}
	}
	SaveUnitHandle(udg_hash, hper, 1, caster);
	SaveReal(udg_hash, hper, 2, xloc);
	SaveReal(udg_hash, hper, 3, yloc);
	SaveInteger(udg_hash, hper, 4, wait);
	SaveReal(udg_hash, hper, 5, damage);
	TimerStart(tper, .04, true, Trig_Opening_Streams_periodic_Actions);
	RemoveLocation(loc);
}
boolean Trig_Opening_Streams_Conditions() {
	return GetSpellAbilityId() == 'A072';
}
nothing InitTrig_Opening_Streams() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Opening_Streams, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Opening_Streams, Condition(Trig_Opening_Streams_Conditions));
	TriggerAddAction(gg_trg_Opening_Streams, Trig_Opening_Streams_Actions);
}
nothing Trig_water_explosion_Dest_Actions() {
	KillDestructable(GetEnumDestructable());
}
nothing Trig_water_explosion_periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	integer amount = LoadInteger(udg_hash, h, 1);
	unit caster = LoadUnitHandle(udg_hash, h, 2);
	real xloc = LoadReal(udg_hash, h, 3);
	real yloc = LoadReal(udg_hash, h, 4);
	real damage = LoadReal(udg_hash, h, 5);
	real stuntime = LoadReal(udg_hash, h, 6);
	unit u;
	real angle = 0;
	real angle2 = 0;
	real dist = 0;
	real x = 0;
	real y = 0;
	group g;
	group gmain = CreateGroup();
	player p = GetOwningPlayer(caster);
	unit Picked;
	rect r;
	if (amount == 7) {
	}
	if (amount == 1) {
	}
	if (amount == $D) {
	}
	while (true) {
		if (bj_forLoopAIndex > amount) break;
		EnumDestructablesInRect(r, null, Trig_water_explosion_Dest_Actions);
		RemoveRect(r);
		DestroyEffect(AddSpecialEffect("war3mapImported\\s_WateryAura.mdx", x, y));
		DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl", x, y));
		GroupEnumUnitsInRange(g, x, y, 100., null);
		GroupAddGroup(g, gmain);
		GroupClear(g);
		DestroyGroup(g);
	}
	while (true) {
		if (Picked == null) break;
		if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			StunUnitTimed(Picked, stuntime);
		}
		GroupRemoveUnit(gmain, Picked);
	}
	SaveInteger(udg_hash, h, 1, amount - 6);
	if (amount < -1) {
		DestroyTimer(t);
		FlushChildHashtable(udg_hash, h);
	else
		TimerStart(t, .75, false, Trig_water_explosion_periodic_Actions);
	}
	GroupClear(gmain);
	DestroyGroup(gmain);
}
nothing Trig_water_explosion_Actions() {
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	integer amount = $D;
	unit caster = GetSpellAbilityUnit();
	location loc = GetSpellTargetLoc();
	real xloc = GetLocationX(loc);
	real yloc = GetLocationY(loc);
	integer lvl = GetUnitAbilityLevel(caster, 'A071');
	real damage;
	real stuntime = 1.35 + (.15 * lvl);
	if (lvl == 1) {
	}
	if (lvl == 2) {
	}
	if (lvl == 3) {
	}
	if (lvl == 4) {
	}
	if (lvl == 5) {
	}
	if (lvl == 6) {
	}
	SaveInteger(udg_hash, h, 1, amount);
	SaveUnitHandle(udg_hash, h, 2, caster);
	SaveReal(udg_hash, h, 3, xloc);
	SaveReal(udg_hash, h, 4, yloc);
	SaveReal(udg_hash, h, 5, damage);
	SaveReal(udg_hash, h, 6, stuntime);
	TimerStart(t, .06, false, Trig_water_explosion_periodic_Actions);
	RemoveLocation(loc);
}
boolean Trig_water_explosion_Conditions() {
	return GetSpellAbilityId() == 'A071';
}
nothing InitTrig_Water_Explosion() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Water_Explosion, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Water_Explosion, Condition(Trig_water_explosion_Conditions));
	TriggerAddAction(gg_trg_Water_Explosion, Trig_water_explosion_Actions);
}
nothing Trig_Tsunami_periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	integer wait = LoadInteger(udg_hash, h, 2);
	real damage = LoadReal(udg_hash, h, 3);
	group g = LoadGroupHandle(udg_hash, h, 4);
	array<unit> water;
	integer lop = 1;
	group grup = CreateGroup();
	unit Picked;
	real x;
	real y;
	boolean create;
	integer count;
	integer lopa;
	unit dammi;
	if (wait > 0) {
		while (true) {
			if (lop > 60) break;
			if (IsTerrainPathable(x, y, PATHING_TYPE_FLYABILITY) == false) {
				SetUnitPosition(water[lop], x, y);
			}
			GroupEnumUnitsInRange(grup, x, y, '}', null);
			while (true) {
				if (Picked == null) break;
				if (IsUnitEnemy(Picked, GetOwningPlayer(caster)) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitInGroup(Picked, g) == false) {
					UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
					AddSpecialEffectTarget("Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveDamage.mdl", Picked, "chest");
					GroupAddUnit(g, Picked);
				}
				GroupRemoveUnit(grup, Picked);
			}
		}
		SaveInteger(udg_hash, h, 2, wait);
		SaveGroupHandle(udg_hash, h, 4, g);
	else
		if (create) {
			SaveInteger(udg_hash, GetHandleId(caster), 64, GetUnitAbilityLevel(caster, 'A06Z') + 2);
			while (true) {
				if (lopa > count) break;
				SaveUnitHandle(udg_hash, GetHandleId(dammi), 63, caster);
			}
		}
		while (true) {
			if (lop > 60) break;
			if (lop - (lop / 2) * 2 == 0) {
				AddSpecialEffect("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl", x, y);
			}
			if (lop - (lop / 4) * 4 == 0) {
				AddSpecialEffect("war3mapImported\\AquaSpike.mdx", x, y);
			}
			DestroyEffect(LoadEffectHandle(udg_hash, GetHandleId(water[lop]), 1));
			KillUnit(water[lop]);
			FlushChildHashtable(udg_hash, GetHandleId(water[lop]));
		}
		GroupClear(g);
		DestroyGroup(g);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	DestroyGroup(grup);
}
nothing Trig_Tsunami_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	location loc = GetSpellTargetLoc();
	real xloc = GetLocationX(loc);
	real yloc = GetLocationY(loc);
	real xc = GetUnitX(caster);
	real yc = GetUnitY(caster);
	array<unit> water;
	integer lopa = 1;
	integer lopb = 1;
	real anglecaster = bj_RADTODEG * Atan2(yloc - GetUnitY(caster), xloc - GetUnitX(caster));
	real xsmec = xc - 400. * Cos(anglecaster * bj_DEGTORAD);
	real ysmec = yc - 400. * Sin(anglecaster * bj_DEGTORAD);
	real anglesmec = .0;
	real xp = xsmec + 630. * Cos((anglecaster - 90.) * bj_DEGTORAD);
	real yp = ysmec + 630. * Sin((anglecaster - 90.) * bj_DEGTORAD);
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	integer wait = 40;
	integer lvl = GetUnitAbilityLevel(caster, 'A078');
	integer lvlup = GetUnitAbilityLevel(caster, 'A0Q9');
	boolean create;
	real damage;
	group g = CreateGroup();
	effect ef;
	if (lvl > 0) {
	}
	if (lvlup > 0) {
	}
	while (true) {
		if (lopa > 3) break;
		while (true) {
			if (lopb > 20) break;
			if (IsTerrainPathable(xp - (lopb * 60.) * Cos((anglecaster - 90.) * bj_DEGTORAD), yp - (lopb * 60.) * Sin((anglecaster - 90.) * bj_DEGTORAD), PATHING_TYPE_FLYABILITY) == false) {
				SaveUnitHandle(udg_hash, h, 5 + (20 * lopa) + lopb - 20, water[(20 * lopa) + lopb - 20]);
				SaveEffectHandle(udg_hash, GetHandleId(water[(20 * lopa) + lopb - 20]), 1, ef);
			}
		}
	}
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveInteger(udg_hash, h, 2, wait);
	SaveReal(udg_hash, h, 3, damage);
	SaveBoolean(udg_hash, h, 5, create);
	SaveGroupHandle(udg_hash, h, 4, g);
	TimerStart(t, .04, true, Trig_Tsunami_periodic_Actions);
	RemoveLocation(loc);
}
boolean Trig_Tsunami_Conditions() {
	return (GetSpellAbilityId() == 'A078' || GetSpellAbilityId() == 'A0Q9');
}
nothing InitTrig_Tsunami() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Tsunami, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Tsunami, Condition(Trig_Tsunami_Conditions));
	TriggerAddAction(gg_trg_Tsunami, Trig_Tsunami_Actions);
}
nothing Trig_Guardsman_Load_Actions() {
	AbilityPreload('A0EZ', 6);
	AbilityPreload('A0ET', 6);
	AbilityPreload('A0EU', 6);
	AbilityPreload('A0EY', 3);
	AbilityPreload('A0EV', 1);
	AbilityPreload('A0EX', 2);
	AbilityPreload('A0F0', 6);
	AbilityPreload('B02I', 1);
	AbilityPreload('B02J', 1);
	EffectPreload("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl");
	EffectPreload("Abilities\\Spells\\Human\\Defend\\DefendCaster.mdl");
	EffectPreload("Abilities\\Spells\\NightElf\\BattleRoar\\RoarCaster.mdl");
	EffectPreload("Abilities\\Spells\\Orc\\Bloodlust\\BloodlustTarget.mdl");
	EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl");
	EffectPreload("Abilities\\Spells\\Human\\StormBolt\\StormBoltMissile.mdl");
	EnableTrigger(gg_trg_Protective_Stand_Switch);
	EnableTrigger(gg_trg_Learn_Fighting_Skills);
	EnableTrigger(gg_trg_Ram_Board);
	EnableTrigger(gg_trg_Warcry);
}
nothing InitTrig_Guardsman_Load() {
	TriggerAddAction(gg_trg_Guardsman_Load, Trig_Guardsman_Load_Actions);
}
nothing Trig_Protective_Stand_Switch_Actions() {
	unit caster = GetTriggerUnit();
	integer h = GetHandleId(caster);
	integer bonus = 5 + 5 * GetUnitAbilityLevel(caster, 'A0EU');
	if (caster == GetDyingUnit()) {
		SaveBoolean(udg_hash, GetHandleId(caster), 3, true);
	else
		if (LoadBoolean(udg_hash, GetHandleId(caster), 3) == false) {
			if ((GetIssuedOrderId() == $D0057)) {
				if (GetUnitAbilityLevel(caster, 'A0EU') > 0) {
					SetAttackSpeedAbilityLevel(caster, -(bonus));
				}
				SaveBoolean(udg_hash, GetHandleId(caster), 1, true);
			}
			if ((GetIssuedOrderId() == $D0058)) {
				if (GetUnitAbilityLevel(caster, 'A0EU') > 0) {
					SetAttackSpeedAbilityLevel(caster, bonus);
				}
				SaveBoolean(udg_hash, GetHandleId(caster), 1, false);
			}
		else
			SaveBoolean(udg_hash, GetHandleId(caster), 3, false);
		}
	}
}
boolean Trig_Protective_Stand_Switch_Conditions() {
	return GetUnitAbilityLevel(GetTriggerUnit(), 'A0ET') > 0;
}
nothing InitTrig_Protective_Stand_Switch() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Protective_Stand_Switch, Player(index), EVENT_PLAYER_UNIT_ISSUED_ORDER, null);
		TriggerRegisterPlayerUnitEvent(gg_trg_Protective_Stand_Switch, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Protective_Stand_Switch, Condition(Trig_Protective_Stand_Switch_Conditions));
	TriggerAddAction(gg_trg_Protective_Stand_Switch, Trig_Protective_Stand_Switch_Actions);
}
nothing Trig_Learn_Fighting_Skills_Actions() {
	unit u = GetLearningUnit();
	integer h = GetHandleId(u);
	integer lvl = GetUnitAbilityLevel(u, 'A0EU');
	if (lvl == 1) {
		SaveInteger(udg_hash, h, 2, $A);
		SetAttackAbilityLevel(u, $A);
		SetArmorAbilityLevel(u, 2);
		if (LoadBoolean(udg_hash, h, 1) == false) {
			SetAttackSpeedAbilityLevel(u, $A);
		}
	else
		SetAttackAbilityLevel(u, 5);
		SetArmorAbilityLevel(u, 1);
		if (LoadBoolean(udg_hash, h, 1) == false) {
			SetAttackSpeedAbilityLevel(u, 5);
		}
	}
}
boolean Trig_Learn_Fighting_Skills_Conditions() {
	return GetLearnedSkill() == 'A0EU' && GetUnitTypeId(GetLearningUnit()) != 'h00U';
}
nothing InitTrig_Learn_Fighting_Skills() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Fighting_Skills, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Learn_Fighting_Skills, Condition(Trig_Learn_Fighting_Skills_Conditions));
	TriggerAddAction(gg_trg_Learn_Fighting_Skills, Trig_Learn_Fighting_Skills_Actions);
}
nothing Trig_Ram_Board_Move_Dest_Actions() {
	KillDestructable(GetEnumDestructable());
}
nothing Trig_Ram_Board_Move_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	group gdamage = LoadGroupHandle(udg_hash, h, 2);
	real damage = LoadReal(udg_hash, h, 3);
	integer lvlstun = LoadInteger(udg_hash, h, 4);
	integer wait = LoadInteger(udg_hash, h, 5);
	real face = LoadReal(udg_hash, h, 6);
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	player p = GetOwningPlayer(caster);
	group g = CreateGroup();
	unit Picked;
	real angle;
	real angle2;
	unit dammi;
	boolean alife = true;
	rect r = Rect(x - 100., y - 100., x + 100., y + 100.);
	EnumDestructablesInRect(r, null, Trig_Ram_Board_Move_Dest_Actions);
	if (GetUnitState(caster, UNIT_STATE_LIFE) < .405) {
	}
	if (wait > 0 && alife) {
		SaveInteger(udg_hash, h, 5, wait);
		SetUnitFacing(caster, face);
		SetUnitAnimationByIndex(caster, 8);
		GroupEnumUnitsInRange(g, x, y, 125., null);
		while (true) {
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && IsUnitInGroup(Picked, gdamage) == false && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				GroupAddUnit(gdamage, Picked);
				DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\StormBolt\\StormBoltMissile.mdl", Picked, "chest"));
				UnitApplyTimedLife(dammi, 'BTLF', .5);
				UnitAddAbility(dammi, 'A0EX');
				SetUnitAbilityLevel(dammi, 'A0EX', lvlstun);
				IssueTargetOrderById(dammi, $D007F, Picked);
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				if ((angle2 <= (GetUnitFacing(caster) + 210.) && angle2 >= (GetUnitFacing(caster) + 180.))) {
				}
				if ((angle2 <= (GetUnitFacing(caster) + 180.) && angle2 >= (GetUnitFacing(caster) + 150.))) {
				}
				MoveUnit(Picked, 1., 400., 400., angle, .0, false);
			}
			GroupRemoveUnit(g, Picked);
		}
		SaveGroupHandle(udg_hash, h, 2, gdamage);
	else
		if (alife) {
			if (LoadBoolean(udg_hash, GetHandleId(caster), 1)) {
				SetUnitAnimation(caster, "Stand Defend");
			else
				SetUnitAnimation(caster, "stand");
			}
		}
		SetUnitPathing(caster, true);
		SetUnitTimeScale(caster, 1.);
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	GroupClear(g);
	DestroyGroup(g);
	RemoveRect(r);
}
nothing Trig_Ram_Board_Actions() {
	unit caster = GetSpellAbilityUnit();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	unit target = GetSpellTargetUnit();
	real angle;
	group gdamage = CreateGroup();
	integer lvlstun = 1;
	integer lvl = GetUnitAbilityLevel(caster, 'A0EZ');
	integer stuck = 0;
	timer tstuck;
	real damage = (15. + (35. * lvl)) + (GetHeroStr(caster, true) * (.5 + .25 * lvl));
	location loc;
	real tx;
	real ty;
	real dist;
	real time;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	SetUnitAnimation(caster, "stand");
	SetUnitPathing(caster, false);
	SetUnitAnimationByIndex(caster, 8);
	SetUnitTimeScale(caster, 2.);
	if (target == null) {
	else
	}
	if (target == caster) {
	}
	MoveUnit(caster, time, 500., .0, angle, .0, true);
	if (GetUnitAbilityLevel(caster, 'A0ET') > 0) {
		if (LoadBoolean(udg_hash, GetHandleId(caster), 1) == false) {
		else
		}
	}
	if (HaveSavedHandle(udg_hash, GetHandleId(caster), 59)) {
		if (GetRandomInt(1, $A) <= stuck) {
			UnitRemoveAbility(caster, 'A0EZ');
			UnitAddAbility(caster, 'A0EZ');
			SetUnitAbilityLevel(caster, 'A0EZ', lvl);
			CreateTexttag("|cFFFF4B00Refresh Ability|r", .023, $FF, x - 75., y, .0, .0, .035, 3.5);
		}
	}
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveGroupHandle(udg_hash, h, 2, gdamage);
	SaveReal(udg_hash, h, 3, damage);
	SaveInteger(udg_hash, h, 4, lvlstun);
	SaveInteger(udg_hash, h, 5, R2I(dist / 15.));
	SaveReal(udg_hash, h, 6, angle);
	TimerStart(t, .03, true, Trig_Ram_Board_Move_Actions);
	RemoveLocation(loc);
}
boolean Trig_Ram_Board_Conditions() {
	return GetSpellAbilityId() == 'A0EZ';
}
nothing InitTrig_Ram_Board() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Ram_Board, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Ram_Board, Condition(Trig_Ram_Board_Conditions));
	TriggerAddAction(gg_trg_Ram_Board, Trig_Ram_Board_Actions);
}
nothing Trig_Warcry_Buff_Removes_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit target = LoadUnitHandle(udg_hash, h, 2);
	integer stuck = LoadInteger(udg_hash, h, 1);
	SetAttackSpeedAbilityLevel(target, (-stuck * $A));
	SetArmorAbilityLevel(target, (-stuck * 3));
	SetAttackAbilityLevel(target, (-stuck * 7));
	if (GetUnitAbilityLevel(target, 'A0EY') > 0) {
		SetUnitLifeAndManaRegeneration(target, "life", -(3 * stuck));
		SetHeroStr(target, GetHeroStr(target, false) - ($A * stuck), true);
	}
	SaveInteger(udg_hash, h, 1, 0);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_Warcry_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	integer lvl = GetUnitAbilityLevel(caster, 'A0EY') * 2;
	integer stuck = 0;
	group g = CreateGroup();
	unit Picked;
	unit dammi;
	timer t;
	integer h;
	GroupEnumUnitsInRange(g, x, y, 500., null);
	while (true) {
		if (Picked == null) break;
		if (IsUnitAlly(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			if (t == null) {
				SaveUnitHandle(udg_hash, GetHandleId(t), 2, Picked);
				SaveTimerHandle(udg_hash, GetHandleId(Picked), 59, t);
			}
			if (stuck < lvl) {
				if (Picked == caster) {
					SetHeroStr(caster, GetHeroStr(caster, false) + $A, true);
					SetUnitLifeAndManaRegeneration(caster, "life", 3);
				}
				SetAttackSpeedAbilityLevel(Picked, $A);
				SetArmorAbilityLevel(Picked, 3);
				SetAttackAbilityLevel(Picked, 7);
				SaveInteger(udg_hash, h, 1, stuck);
			}
			UnitApplyTimedLife(dammi, 'BTLF', 1.5);
			UnitAddAbility(dammi, 'A0F0');
			SetUnitAbilityLevel(dammi, 'A0F0', stuck);
			UnitRemoveAbility(Picked, 'B02J');
			IssueTargetOrderById(dammi, $D0085, Picked);
			TimerStart(t, 10., false, Trig_Warcry_Buff_Removes_Actions);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
}
boolean Trig_Warcry_Conditions() {
	return GetSpellAbilityId() == 'A0EY';
}
nothing InitTrig_Warcry() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Warcry, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Warcry, Condition(Trig_Warcry_Conditions));
	TriggerAddAction(gg_trg_Warcry, Trig_Warcry_Actions);
}
nothing Trig_Drenor_Bull_Load_Actions() {
	AbilityPreload('A0B1', 6);
	AbilityPreload('A0B0', 6);
	AbilityPreload('A0B2', 6);
	AbilityPreload('A0AZ', 3);
	AbilityPreload('A075', 1);
	AbilityPreload('A0AY', 1);
	EffectPreload("Abilities\\Spells\\Orc\\WarDrums\\DrumsCasterHeal.mdl");
	EffectPreload("Abilities\\Spells\\Orc\\StasisTrap\\StasisTotemTarget.mdl");
	EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPriest.mdl");
	EffectPreload("Abilities\\Spells\\NightElf\\BattleRoar\\RoarCaster.mdl");
	EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl");
	EffectPreload("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl");
	EnableTrigger(gg_trg_Axe_Throw);
	EnableTrigger(gg_trg_Violent_Roar);
	EnableTrigger(gg_trg_upgrade_Berserk);
	EnableTrigger(gg_trg_Learn_Spell_Rage);
	EnableTrigger(gg_trg_Drenor_Bull_Show_Hint);
	EnableTrigger(gg_trg_Drenor_Bull_Show_Rage);
}
nothing InitTrig_Drenor_Bull_Load() {
	TriggerAddAction(gg_trg_Drenor_Bull_Load, Trig_Drenor_Bull_Load_Actions);
}
nothing Trig_Drenor_Bull_Show_Hint_Actions() {
	DisplayTextToForce(udg_Drenor_Bull_Hint_Player_Group, "Чтобы узнать количество накопленной Грог'Таром ярости, введи в чат команду \"|cff99ccff-rage/-r|r\".");
}
nothing InitTrig_Drenor_Bull_Show_Hint() {
	DisableTrigger(gg_trg_Drenor_Bull_Show_Hint);
	TriggerRegisterTimerEventPeriodic(gg_trg_Drenor_Bull_Show_Hint, 120.);
	TriggerAddAction(gg_trg_Drenor_Bull_Show_Hint, Trig_Drenor_Bull_Show_Hint_Actions);
}
boolean Trig_Drenor_Bull_Show_Rage_Conditions() {
	return (IsPlayerInForce(GetTriggerPlayer(), udg_Drenor_Bull_Hint_Player_Group));
}
boolean Trig_Drenor_Bull_Show_Rage_Func001C() {
	return (udg_GrorTar != null) && (GetUnitAbilityLevelSwapped('A0B2', udg_GrorTar) > 0);
}
nothing Trig_Drenor_Bull_Show_Rage_Actions() {
	if ((Trig_Drenor_Bull_Show_Rage_Func001C())) {
		DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()), ("Ярость Грог'Тара: |cFFF0692D" + (I2S(udg_DrenorBugaiRage) + ("|r ( максимум: |cFFF0692D" + (I2S(((GetUnitAbilityLevelSwapped('A0B2', udg_GrorTar) * '}') + (GetUnitAbilityLevelSwapped('A0AZ', udg_GrorTar) * 75))) + "|r)")))));
	else
		DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()), ("Ярость Грог'Тара: |cFFF0692D" + ("0" + ("|r ( максимум: |cFFF0692D" + ("0|r)")))));
	}
}
nothing InitTrig_Drenor_Bull_Show_Rage() {
	integer index = 0;
	DisableTrigger(gg_trg_Drenor_Bull_Show_Rage);
	while (true) {
		TriggerRegisterPlayerChatEvent(gg_trg_Drenor_Bull_Show_Rage, Player(index), "-rage", true);
		TriggerRegisterPlayerChatEvent(gg_trg_Drenor_Bull_Show_Rage, Player(index), "-r", true);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Drenor_Bull_Show_Rage, Condition(Trig_Drenor_Bull_Show_Rage_Conditions));
	TriggerAddAction(gg_trg_Drenor_Bull_Show_Rage, Trig_Drenor_Bull_Show_Rage_Actions);
}
nothing Trig_Axe_Throw_move_2() {
	KillDestructable(GetEnumDestructable());
}
nothing Trig_Axe_Throw_move_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit axe = LoadUnitHandle(udg_hash, h, 1);
	group g = LoadGroupHandle(udg_hash, h, 2);
	real damage = LoadReal(udg_hash, h, 3);
	unit caster = LoadUnitHandle(udg_hash, h, 6);
	player p = GetOwningPlayer(caster);
	integer wait = LoadInteger(udg_hash, h, 5);
	real x = GetUnitX(axe) + 32. * Cos(GetUnitFacing(axe) * bj_DEGTORAD);
	real y = GetUnitY(axe) + 32. * Sin(GetUnitFacing(axe) * bj_DEGTORAD);
	rect r = Rect(x - 130., y - 130., x + 130., y + 130.);
	group grup = CreateGroup();
	unit Picked;
	unit dammi;
	if (wait > 0) {
		SaveInteger(udg_hash, h, 5, wait);
		EnumDestructablesInRect(r, null, Trig_Axe_Throw_move_2);
		if (IsTerrainPathable(x, y, PATHING_TYPE_FLYABILITY) == false) {
			SetUnitPosition(axe, x, y);
		}
		if (wait == 20 || wait == 16 || wait == $C || wait == 8 || wait == 4) {
			DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl", x, y));
		}
		GroupEnumUnitsInRange(grup, x, y, '}', null);
		while (true) {
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, GetOwningPlayer(axe)) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitInGroup(Picked, g) == false && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				UnitApplyTimedLife(dammi, 'BTLF', .5);
				UnitAddAbility(dammi, 'A0F1');
				IssueTargetOrderById(dammi, $D007F, Picked);
				DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPriest.mdl", Picked, "chest"));
				GroupAddUnit(g, Picked);
			}
			GroupRemoveUnit(grup, Picked);
		}
		SaveGroupHandle(udg_hash, h, 2, g);
	else
		DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", x, y));
		DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl", x, y));
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
		KillUnit(axe);
		RemoveUnit(dammi);
		GroupClear(g);
		DestroyGroup(g);
	}
	DestroyGroup(grup);
	RemoveRect(r);
}
nothing Trig_Axe_Throw_Actions() {
	unit caster = GetSpellAbilityUnit();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	location loc;
	real xt;
	real yt;
	unit axe;
	group g = CreateGroup();
	real damage3 = 10. + (50. * I2R(GetUnitAbilityLevel(caster, 'A0B1')));
	real damage2 = I2R(udg_DrenorBugaiRage) / 3.;
	real damage = (1. + (.2 * I2R(GetUnitAbilityLevel(caster, 'A0AZ')))) * (damage2 + damage3);
	integer wait = 20;
	if (GetSpellTargetUnit() == null) {
		RemoveLocation(loc);
	else
	}
	if ((udg_DrenorBugaiRage <= ((('}' * GetUnitAbilityLevel(caster, 'A0B2') + (75 * GetUnitAbilityLevel(caster, 'A0AZ'))) - 30)))) {
		SetAttackSpeedAbilityLevel(udg_GrorTar, 6);
	}
	DisableTrigger(gg_trg_Sniatie_Rage);
	TimerStart(udg_GrogTarRageTimer, 4., false, null);
	UnitAddAbility(axe, 'Amrf');
	UnitRemoveAbility(axe, 'Amrf');
	SetUnitTimeScale(axe, 2.5);
	SetUnitFlyHeight(axe, 15., 80.);
	SaveUnitHandle(udg_hash, h, 1, axe);
	SaveGroupHandle(udg_hash, h, 2, g);
	SaveReal(udg_hash, h, 3, damage);
	SaveInteger(udg_hash, h, 5, wait);
	SaveUnitHandle(udg_hash, h, 6, caster);
	TimerStart(t, .03, true, Trig_Axe_Throw_move_Actions);
}
boolean Trig_Axe_Throw_Conditions() {
	return GetSpellAbilityId() == 'A0B1';
}
nothing InitTrig_Axe_Throw() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Axe_Throw, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Axe_Throw, Condition(Trig_Axe_Throw_Conditions));
	TriggerAddAction(gg_trg_Axe_Throw, Trig_Axe_Throw_Actions);
}
nothing Trig_Violent_Roar_periodic() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	real xc = LoadReal(udg_hash, h, 2);
	real yc = LoadReal(udg_hash, h, 3);
	real damage = LoadReal(udg_hash, h, 4);
	integer wait = LoadInteger(udg_hash, h, 5);
	group g = CreateGroup();
	unit Picked;
	unit dammi;
	real angle;
	real x;
	real y;
	real dist;
	if (wait > 0) {
		SaveInteger(udg_hash, h, 5, wait);
		if (wait == $E) {
			GroupEnumUnitsInRange(g, xc, yc, 400., null);
			while (true) {
				if (Picked == null) break;
				if (IsUnitEnemy(Picked, GetOwningPlayer(caster)) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
					UnitApplyTimedLife(dammi, 'BTLF', 1.);
					UnitAddAbility(dammi, 'A075');
					IssueTargetOrderById(dammi, $D00DD, Picked);
				}
				GroupRemoveUnit(g, Picked);
			}
		}
		GroupEnumUnitsInRange(g, xc, yc, 400., null);
		while (true) {
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, GetOwningPlayer(caster)) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
				if (IsTerrainPathable(x, y, PATHING_TYPE_WALKABILITY) == false && GetTerrainCliffLevel(x, y) == GetTerrainCliffLevel(GetUnitX(Picked) - (21. - (dist / 20.)) * Cos(angle * bj_DEGTORAD), GetUnitY(Picked) - (21. - (dist / 20.)) * Sin(angle * bj_DEGTORAD))) {
					SetUnitX(Picked, x);
					SetUnitY(Picked, y);
				}
				if (wait == $E) {
					DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", Picked, "chest"));
				}
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			}
			GroupRemoveUnit(g, Picked);
		}
	else
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	DestroyGroup(g);
}
nothing Trig_Violent_Roar_Actions() {
	unit caster = GetSpellAbilityUnit();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	integer wait = $F;
	real ultalvl = 1. + (.2 * I2R(GetUnitAbilityLevel(caster, 'A0AZ')));
	real abilitylvl = 15. + (20. * I2R(GetUnitAbilityLevel(caster, 'A0B0')));
	real udgrage = I2R(udg_DrenorBugaiRage) / 20.;
	real herostr = I2R(GetUnitAbilityLevel(caster, 'A0B0')) * (.2 * GetHeroStr(caster, true));
	real damage = (ultalvl * (abilitylvl + udgrage + herostr)) / wait;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	if ((udg_DrenorBugaiRage <= ((('}' * GetUnitAbilityLevel(caster, 'A0B2') + (75 * GetUnitAbilityLevel(caster, 'A0AZ'))) - 30)))) {
		SetAttackSpeedAbilityLevel(udg_GrorTar, 6);
	}
	DisableTrigger(gg_trg_Sniatie_Rage);
	TimerStart(udg_GrogTarRageTimer, 4., false, null);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 2, x);
	SaveReal(udg_hash, h, 3, y);
	SaveReal(udg_hash, h, 4, damage);
	SaveInteger(udg_hash, h, 5, wait);
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\NightElf\\BattleRoar\\RoarCaster.mdl", x, y));
	TimerStart(t, .04, true, Trig_Violent_Roar_periodic);
}
boolean Trig_Violent_Roar_Conditions() {
	return GetSpellAbilityId() == 'A0B0';
}
nothing InitTrig_Violent_Roar() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Violent_Roar, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Violent_Roar, Condition(Trig_Violent_Roar_Conditions));
	TriggerAddAction(gg_trg_Violent_Roar, Trig_Violent_Roar_Actions);
}
boolean Trig_upgrade_Berserk_Conditions() {
	return GetLearnedSkill() == 'A0AZ';
}
nothing Trig_upgrade_Berserk_Actions() {
	SetPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()), 'R007', GetLearnedSkillLevel());
}
nothing InitTrig_upgrade_Berserk() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_upgrade_Berserk, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_upgrade_Berserk, Condition(Trig_upgrade_Berserk_Conditions));
	TriggerAddAction(gg_trg_upgrade_Berserk, Trig_upgrade_Berserk_Actions);
}
nothing Trig_Learn_Spell_Rage_Actions_Timer() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit hero = LoadUnitHandle(udg_hash, h, 1);
	texttag txt = LoadTextTagHandle(udg_hash, h, 2);
	real x = GetUnitX(hero);
	real y = GetUnitY(hero);
	boolean alife = LoadBoolean(udg_hash, h, 3);
	if ((GetUnitState(hero, UNIT_STATE_LIFE) < .405 && alife)) {
		SaveBoolean(udg_hash, h, 3, alife);
		SetTextTagVisibility(txt, false);
	}
	if ((GetUnitState(hero, UNIT_STATE_LIFE) > .405 && alife == false)) {
		SaveBoolean(udg_hash, h, 3, alife);
		SetTextTagVisibility(txt, true);
	}
	if ((GetUnitState(hero, UNIT_STATE_LIFE) > .405 && alife)) {
		SaveBoolean(udg_hash, h, 3, alife);
		SetTextTagText(txt, "|cFFF0692D" + I2S(udg_DrenorBugaiRage) + "|r|cFF969696/|r|cFFF0692D" + I2S(((('}' * GetUnitAbilityLevel(hero, 'A0B2') + (75 * GetUnitAbilityLevel(hero, 'A0AZ')))))) + "|r", .027);
		SetTextTagPos(txt, GetUnitX(hero) - 40., GetUnitY(hero) + 100., .0);
	}
}
nothing Trig_Learn_Spell_Rage_Actions() {
	integer lvl = GetUnitAbilityLevel(GetLearningUnit(), 'A0B2');
	timer t;
	integer h;
	texttag txt;
	unit hero;
	if (lvl == 1) {
		EnableTrigger(gg_trg_attack_hero_Rage);
		EnableTrigger(gg_trg_kill_hero_Rage);
		EnableTrigger(gg_trg_Timer_Rage);
		EnableTrigger(gg_trg_GrogTarDead);
		SetTextTagText(txt, "|cFFF0692D" + I2S(udg_DrenorBugaiRage) + "|r|cFF969696/|r|cFFF0692D" + I2S(((('}' * GetUnitAbilityLevel(hero, 'A0B2') + (75 * GetUnitAbilityLevel(hero, 'A0AZ')))))) + "|r", .027);
		SetTextTagColor(txt, $FF, $FF, $FF, $FF);
		SetTextTagPos(txt, GetUnitX(hero) - 40., GetUnitY(hero) + 50., .0);
		SetTextTagPermanent(txt, true);
		SaveUnitHandle(udg_hash, h, 1, hero);
		SaveTextTagHandle(udg_hash, h, 2, txt);
		SaveBoolean(udg_hash, h, 3, true);
		TimerStart(t, .03, true, Trig_Learn_Spell_Rage_Actions_Timer);
	}
}
boolean Trig_Learn_Spell_Rage_Conditions() {
	return GetUnitAbilityLevel(GetLearningUnit(), 'A0B2') >= 1 && GetUnitTypeId(GetLearningUnit()) != 'h00U' && GetLearnedSkill() == 'A0B2';
}
nothing InitTrig_Learn_Spell_Rage() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Spell_Rage, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Learn_Spell_Rage, Condition(Trig_Learn_Spell_Rage_Conditions));
	TriggerAddAction(gg_trg_Learn_Spell_Rage, Trig_Learn_Spell_Rage_Actions);
}
nothing Trig_GrogTarDead_Actions() {
	SetAttackSpeedAbilityLevel(udg_GrorTar, -udg_DrenorBugaiRage / 5);
	DisableTrigger(gg_trg_Sniatie_Rage);
}
boolean Trig_GrogTarDead_Conditions() {
	return GetDyingUnit() == udg_GrorTar;
}
nothing InitTrig_GrogTarDead() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_GrogTarDead, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_GrogTarDead, Condition(Trig_GrogTarDead_Conditions));
	TriggerAddAction(gg_trg_GrogTarDead, Trig_GrogTarDead_Actions);
}
boolean Trig_attack_hero_Rage_Conditions() {
	return IsUnitEnemy(GetAttacker(), GetOwningPlayer(GetTriggerUnit())) && (GetUnitAbilityLevel(GetTriggerUnit(), 'A0B2') >= 1);
}
nothing Trig_attack_hero_Rage_Actions() {
	integer addrage = 0;
	if ((GetRandomInt(1, 2) == 1)) {
		if (udg_DrenorBugaiRage <= ((('}' * (GetUnitAbilityLevel(GetTriggerUnit(), 'A0B2'))) + (75 * (GetUnitAbilityLevel(GetTriggerUnit(), 'A0AZ')))) - 1)) {
			if ((udg_DrenorBugaiRage / 5) * 5 >= udg_DrenorBugaiRage) {
				SetAttackSpeedAbilityLevel(udg_GrorTar, 1);
			}
		else
		}
	}
	DisableTrigger(gg_trg_Sniatie_Rage);
	TimerStart(udg_GrogTarRageTimer, 4., false, null);
}
nothing InitTrig_attack_hero_Rage() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_attack_hero_Rage, Player(index), EVENT_PLAYER_UNIT_ATTACKED, null);
		if (index == 16) break;
	}
	DisableTrigger(gg_trg_attack_hero_Rage);
	TriggerAddCondition(gg_trg_attack_hero_Rage, Condition(Trig_attack_hero_Rage_Conditions));
	TriggerAddAction(gg_trg_attack_hero_Rage, Trig_attack_hero_Rage_Actions);
}
boolean Trig_kill_hero_Rage_Conditions() {
	return (GetUnitAbilityLevel(GetKillingUnit(), 'A0B2') >= 1);
}
nothing Trig_kill_hero_Rage_Actions() {
	integer addrage = 0;
	if ((udg_DrenorBugaiRage <= ((('}' * GetUnitAbilityLevel(GetKillingUnit(), 'A0B2'))) + (75 * GetUnitAbilityLevel(GetKillingUnit(), 'A0AZ'))) - 5)) {
		SetAttackSpeedAbilityLevel(udg_GrorTar, 1);
		if ((IsUnitType(GetDyingUnit(), UNIT_TYPE_ANCIENT) || IsUnitType(GetDyingUnit(), UNIT_TYPE_HERO)) && (udg_DrenorBugaiRage <= ((('}' * GetUnitAbilityLevel(GetKillingUnit(), 'A0B2'))) + (75 * GetUnitAbilityLevel(GetKillingUnit(), 'A0AZ'))) - 85)) {
			SetAttackSpeedAbilityLevel(udg_GrorTar, 9);
		}
	}
	DisableTrigger(gg_trg_Sniatie_Rage);
	TimerStart(udg_GrogTarRageTimer, 4., false, null);
}
nothing InitTrig_kill_hero_Rage() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_kill_hero_Rage, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	DisableTrigger(gg_trg_kill_hero_Rage);
	TriggerAddCondition(gg_trg_kill_hero_Rage, Condition(Trig_kill_hero_Rage_Conditions));
	TriggerAddAction(gg_trg_kill_hero_Rage, Trig_kill_hero_Rage_Actions);
}
nothing Trig_Sniatie_Rage_Action() {
	if (udg_DrenorBugaiRage >= 20) {
		SetAttackSpeedAbilityLevel(udg_GrorTar, -4);
	else
		SetAttackSpeedAbilityLevel(udg_GrorTar, -udg_DrenorBugaiRage / 5);
	}
}
nothing InitTrig_Sniatie_Rage() {
	TriggerRegisterTimerEvent(gg_trg_Sniatie_Rage, 3., true);
	TriggerAddAction(gg_trg_Sniatie_Rage, Trig_Sniatie_Rage_Action);
	DisableTrigger(gg_trg_Sniatie_Rage);
}
nothing Trig_Timer_last_Actions() {
	EnableTrigger(gg_trg_Sniatie_Rage);
}
nothing InitTrig_Timer_Rage() {
	TriggerRegisterTimerExpireEvent(gg_trg_Timer_Rage, udg_GrogTarRageTimer);
	TriggerAddAction(gg_trg_Timer_Rage, Trig_Timer_last_Actions);
}
nothing Trig_Illusionist_Load_Actions() {
	AbilityPreload('A0F6', 6);
	AbilityPreload('A0F5', 6);
	AbilityPreload('A0F3', 6);
	AbilityPreload('A0F2', 3);
	AbilityPreload('A0F7', 6);
	AbilityPreload('A0AY', 4);
	AbilityPreload('A0F4', 6);
	AbilityPreload('B02L', 1);
	AbilityPreload('B02K', 1);
	AbilityPreload('B02M', 1);
	EffectPreload("Abilities\\Spells\\Orc\\Devour\\DevourEffectArt.mdl");
	EffectPreload("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageDeathCaster.mdl");
	EffectPreload("Abilities\\Spells\\Undead\\Curse\\CurseTarget.mdl");
	EffectPreload("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageMissile.mdl");
	EffectPreload("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageCaster.mdl");
	EffectPreload("Abilities\\Spells\\Other\\Levelup\\LevelupCaster.mdl");
	EffectPreload("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathMissile.mdl");
	EffectPreload("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayDamage.mdl");
	EffectPreload("Abilities\\Spells\\Undead\\DeathPact\\DeathPactCaster.mdl");
	EffectPreload("Abilities\\Spells\\Undead\\DeathPact\\DeathPactTarget.mdl");
	EnableTrigger(gg_trg_Reflection);
	EnableTrigger(gg_trg_Illusory_Attack);
	EnableTrigger(gg_trg_Summon_Illusions_with_Reflection);
	EnableTrigger(gg_trg_Illusions_with_Phantoms_Dead);
}
nothing InitTrig_Illusionist_Load() {
	TriggerAddAction(gg_trg_Illusionist_Load, Trig_Illusionist_Load_Actions);
}
nothing Trig_Reflection_perodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	rect r = LoadRectHandle(udg_hash, h, 2);
	real x = GetRectCenterX(r);
	real y = GetRectCenterY(r);
	real tx;
	real ty;
	integer wait = LoadInteger(udg_hash, h, 3);
	real damage = LoadReal(udg_hash, h, 4);
	player p = GetOwningPlayer(caster);
	integer order = GetUnitCurrentOrder(caster);
	group g = CreateGroup();
	group gdamage = CreateGroup();
	unit Picked;
	unit dammi;
	unit dammi2;
	unit target;
	integer orderId;
	if ((orderId != 0)) {
	else
		if ((orderId != 0)) {
		}
	}
	if (order == orderId && wait > 0) {
		SaveInteger(udg_hash, h, 3, wait);
		GroupEnumUnitsInRect(g, r, null);
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathPact\\DeathPactTarget.mdl", caster, "chest"));
		while (true) {
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && (GetPlayerId(GetOwningPlayer(Picked)) != $D) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				GroupAddUnit(gdamage, Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
		GroupClear(g);
		RandomUnitFromGroup(1, gdamage);
		GroupAddGroup(udg_GroupRandomUnitFromGroup, g);
		UnitApplyTimedLife(dammi2, 'BTLF', 1.);
		UnitAddAbility(dammi2, 'A0F4');
		SetUnitAbilityLevel(dammi2, 'A0F4', GetUnitAbilityLevel(caster, 'A0F6'));
		IssueTargetOrderById(dammi2, $D006B, target);
		SaveUnitHandle(udg_hash, GetHandleId(dammi), 2, target);
		SaveBoolean(udg_hash, GetHandleId(dammi), 3, true);
		UnitApplyTimedLife(dammi, 'BTLF', 1.);
		UnitAddAbility(dammi, 'A0AY');
		SetUnitAbilityLevel(dammi, 'A0AY', 1 + GetUnitAbilityLevel(caster, 'A0F2'));
		IssueTargetOrderById(dammi, $D0132, caster);
		GroupClear(gdamage);
		GroupEnumUnitsInRange(gdamage, tx, ty, 150., null);
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathPact\\DeathPactCaster.mdl", target, "origin"));
		while (true) {
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayDamage.mdl", Picked, "origin"));
			}
			GroupRemoveUnit(gdamage, Picked);
		}
	else
		SetUnitVertexColor(caster, $FF, $FF, $FF, $FF);
		RemoveRect(r);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
		RemoveUnit(LoadUnitHandle(udg_hash, GetHandleId(caster), 'u'));
	}
	GroupClear(g);
	DestroyGroup(g);
	GroupClear(gdamage);
	DestroyGroup(gdamage);
}
nothing Trig_Reflection_Actions() {
	unit caster = GetSpellAbilityUnit();
	integer lvl = GetUnitAbilityLevel(caster, 'A0F6');
	integer wait = lvl + 2;
	location loc = GetSpellTargetLoc();
	real x = GetLocationX(loc);
	real y = GetLocationY(loc);
	rect r = Rect(x - 350., y - 350., x + 350., y + 350.);
	real damage = $A + 5 * lvl + (.1 + (.05 * lvl)) * GetHeroAgi(caster, true);
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveRectHandle(udg_hash, h, 2, r);
	SaveInteger(udg_hash, h, 3, wait);
	SaveReal(udg_hash, h, 4, damage);
	AddProgressBar(caster, 215. + (1.5 * lvl), (.9 + .1 * lvl), (.3 * wait), false, true, 'u', $B4, $96, $AF);
	SetUnitVertexColor(caster, $C8, $C8, $C8, 'd');
	TimerStart(t, .3, true, Trig_Reflection_perodic_Actions);
	RemoveLocation(loc);
}
boolean Trig_Reflection_Conditions() {
	return GetSpellAbilityId() == 'A0F6';
}
nothing InitTrig_Reflection() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Reflection, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Reflection, Condition(Trig_Reflection_Conditions));
	TriggerAddAction(gg_trg_Reflection, Trig_Reflection_Actions);
}
nothing Trig_Illusory_Attack_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	real angle = GetRandomReal(.0, 360.);
	real x = GetUnitX(target) + 50. * Cos(angle * bj_DEGTORAD);
	real y = GetUnitY(target) + 50. * Sin(angle * bj_DEGTORAD);
	integer lvl = GetUnitAbilityLevel(caster, 'A0F5');
	real damage = (GetHeroAgi(caster, true) * (.25 * lvl + .5)) + (lvl * 25 + $F);
	unit dammi = CreateUnit(GetOwningPlayer(caster), 'h00U', x, y, .0);
	unit dammi2 = CreateUnit(GetOwningPlayer(caster), 'h00U', x, y, .0);
	SaveUnitHandle(udg_hash, GetHandleId(dammi), 4, target);
	SaveBoolean(udg_hash, GetHandleId(dammi), 5, true);
	SaveReal(udg_hash, GetHandleId(dammi), 6, (angle + 180.));
	SetUnitPosition(caster, x, y);
	UnitApplyTimedLife(dammi2, 'BTLF', 1.);
	UnitAddAbility(dammi2, 'A0F7');
	SetUnitAbilityLevel(dammi2, 'A0F7', lvl);
	IssueTargetOrderById(dammi2, $D007F, target);
	UnitApplyTimedLife(dammi, 'BTLF', 1.);
	UnitAddAbility(dammi, 'A0AY');
	SetUnitAbilityLevel(dammi, 'A0AY', 1 + GetUnitAbilityLevel(caster, 'A0F2'));
	IssueTargetOrderById(dammi, $D0132, caster);
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathMissile.mdl", target, "origin"));
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathMissile.mdl", target, "chest"));
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathMissile.mdl", target, "overhead"));
	UnitDamageTarget(caster, target, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS);
	IssueTargetOrderById(caster, $D000F, target);
}
boolean Trig_Illusory_Attack_Conditions() {
	return GetSpellAbilityId() == 'A0F5';
}
nothing InitTrig_Illusory_Attack() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Illusory_Attack, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Illusory_Attack, Condition(Trig_Illusory_Attack_Conditions));
	TriggerAddAction(gg_trg_Illusory_Attack, Trig_Illusory_Attack_Actions);
}
nothing Trig_Summon_Illusions_with_Reflection_Actions() {
	unit illusion = GetSummonedUnit();
	unit dammi = GetSummoningUnit();
	unit target;
	integer idhero = GetHandleId(udg_herounit[GetPlayerId(GetOwningPlayer(illusion)) + 1]);
	if (LoadBoolean(udg_hash, GetHandleId(dammi), 3)) {
		if (target != null) {
			SetUnitPosition(illusion, GetUnitX(target), GetUnitY(target));
			SetUnitPosition(illusion, GetUnitX(target) + 75. * Cos(GetRandomReal(.0, 360.) * bj_DEGTORAD), GetUnitY(target) + 75. * Sin(GetRandomReal(.0, 360.) * bj_DEGTORAD));
			UnitApplyTimedLife(illusion, 'BTLF', 5.);
			UnitAddAbility(illusion, 'Aloc');
			UnitRemoveAbility(illusion, 'A0F3');
			SetUnitVertexColor(illusion, $96, $96, $96, 'd');
			IssueTargetOrderById(illusion, $D000F, target);
		else
			RemoveUnit(illusion);
		}
	else
		if (LoadBoolean(udg_hash, GetHandleId(dammi), 5)) {
			SetUnitPosition(illusion, GetUnitX(target) + 50. * Cos(LoadReal(udg_hash, GetHandleId(dammi), 6) * bj_DEGTORAD), GetUnitY(target) + 50. * Sin(LoadReal(udg_hash, GetHandleId(dammi), 6) * bj_DEGTORAD));
			IssueTargetOrderById(illusion, $D000F, target);
		else
			SaveInteger(udg_hash, idhero, 60, LoadInteger(udg_hash, idhero, 60) + 1);
			SaveInteger(udg_hash, GetHandleId(illusion), 1, $A);
		}
	}
}
boolean Trig_Summon_Illusions_with_Reflection_Conditions() {
	return GetUnitTypeId(GetSummonedUnit()) == 'E004' && GetUnitAbilityLevel(GetSummoningUnit(), 'A0AY') > 0;
}
nothing InitTrig_Summon_Illusions_with_Reflection() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Summon_Illusions_with_Reflection, Player(index), EVENT_PLAYER_UNIT_SUMMON, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Summon_Illusions_with_Reflection, Condition(Trig_Summon_Illusions_with_Reflection_Conditions));
	TriggerAddAction(gg_trg_Summon_Illusions_with_Reflection, Trig_Summon_Illusions_with_Reflection_Actions);
}
nothing Trig_Illusions_with_Phantoms_Dead_Actions() {
	integer idhero = GetHandleId(udg_herounit[GetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1]);
	integer count = LoadInteger(udg_hash, idhero, 60);
	if (count > 0) {
		SaveInteger(udg_hash, idhero, 60, count - 1);
	}
}
boolean Trig_Illusions_with_Phantoms_Dead_Conditions() {
	return GetUnitTypeId(GetDyingUnit()) == 'E004' && IsUnitIllusion(GetDyingUnit()) && HaveSavedInteger(udg_hash, GetHandleId(GetDyingUnit()), 1);
}
nothing InitTrig_Illusions_with_Phantoms_Dead() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Illusions_with_Phantoms_Dead, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Illusions_with_Phantoms_Dead, Condition(Trig_Illusions_with_Phantoms_Dead_Conditions));
	TriggerAddAction(gg_trg_Illusions_with_Phantoms_Dead, Trig_Illusions_with_Phantoms_Dead_Actions);
}
nothing Trig_BladeMaster_Load_Actions() {
	AbilityPreload('A0FG', 6);
	AbilityPreload('A0FH', 6);
	AbilityPreload('A0FF', 6);
	AbilityPreload('A0G2', 3);
	AbilityPreload('A0G1', 4);
	AbilityPreload('A0G3', 1);
	AbilityPreload('A0GH', 1);
	AbilityPreload('B02W', 1);
	AbilityPreload('B02X', 1);
	EffectPreload("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl");
	EffectPreload("Abilities\\Weapons\\ZigguratMissile\\ZigguratMissile.mdl");
	EffectPreload("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl");
	EffectPreload("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl");
	EffectPreload("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile.mdl");
	EffectPreload("Abilities\\Spells\\NightElf\\Blink\\BlinkCaster.mdl");
	EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl");
	EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodMortarTeam.mdl");
	EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodFootman.mdl");
	EnableTrigger(gg_trg_Dissection);
	EnableTrigger(gg_trg_Whirlwind);
	EnableTrigger(gg_trg_Imboweling);
}
nothing InitTrig_BladeMaster_Load() {
	TriggerAddAction(gg_trg_BladeMaster_Load, Trig_BladeMaster_Load_Actions);
}
nothing Trig_Dissection_Periodic_Damage_Target_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit Picked = LoadUnitHandle(udg_hash, h, 1);
	unit caster = LoadUnitHandle(udg_hash, h, 2);
	real periodicdamage = LoadReal(udg_hash, h, 3);
	integer wait = LoadInteger(udg_hash, h, 4);
	if (wait > 0 && GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && GetUnitAbilityLevel(Picked, 'B02W') > 0) {
		SaveInteger(udg_hash, h, 4, wait);
		UnitDamageTarget(caster, Picked, (periodicdamage / 40), false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
		if (wait == 30 || wait == 20 || wait == $A) {
			DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodMortarTeam.mdl", Picked, "origin"));
		}
	else
		DestroyTimer(t);
		FlushChildHashtable(udg_hash, h);
	}
}
nothing Trig_Dissection_Periodic_Move_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	real xc = GetUnitX(caster);
	real yc = GetUnitY(caster);
	real xt = LoadReal(udg_hash, h, 2);
	real yt = LoadReal(udg_hash, h, 3);
	real angle = LoadReal(udg_hash, h, 4);
	real xnext = xc + 400. * Cos(angle * bj_DEGTORAD);
	real ynext = yc + 400. * Sin(angle * bj_DEGTORAD);
	real damage = LoadReal(udg_hash, h, 5);
	group gdamage = LoadGroupHandle(udg_hash, h, 6);
	boolean pravo = LoadBoolean(udg_hash, h, 9);
	boolean first = LoadBoolean(udg_hash, h, $A);
	integer jumps = LoadInteger(udg_hash, h, $B);
	real periodicdamage = LoadReal(udg_hash, h, $C);
	real xcenter = (xnext + xc) / 2;
	real ycenter = (ynext + yc) / 2;
	real radius;
	group g = CreateGroup();
	unit Picked;
	unit dammi;
	timer tPicked;
	integer hPicked;
	boolean lastslash;
	real cx;
	real cy;
	real ax;
	real ay;
	real bx;
	real by;
	player p = GetOwningPlayer(caster);
	SaveInteger(udg_hash, h, $B, jumps);
	if (first) {
		SaveBoolean(udg_hash, h, $A, first);
	}
	if (jumps <= 0) {
	}
	if (jumps > 0) {
		if (!((xnext > -5. && xnext < 5.) && (ynext > -5. && ynext < 5.))) {
			SetUnitPosition(caster, xnext, ynext);
		}
		if (GetRandomInt(1, 2) == 1) {
			SetUnitAnimationByIndex(caster, 8);
		else
			SetUnitAnimationByIndex(caster, 2);
		}
		if (pravo) {
			SaveBoolean(udg_hash, h, 9, false);
		else
			SaveBoolean(udg_hash, h, 9, true);
		}
		SaveReal(udg_hash, h, 4, angle);
		SaveGroupHandle(udg_hash, h, 6, gdamage);
	}
	if (lastslash) {
		GroupEnumUnitsInRange(g, xt, yt, 175., null);
	else
		GroupEnumUnitsInRange(g, xcenter, ycenter, radius, null);
	}
	while (true) {
		if (Picked == null) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, p) && IsUnitInGroup(Picked, gdamage) == false && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U' && IsPointInRect(GetUnitX(Picked), GetUnitY(Picked), cx, cy, ax, ay, bx, by)) {
			GroupAddUnit(gdamage, Picked);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", Picked, "chest"));
			DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", Picked, "chest"));
			UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			UnitApplyTimedLife(dammi, 'BTLF', 1.);
			UnitAddAbility(dammi, 'A0G1');
			SetUnitAbilityLevel(dammi, 'A0G1', R2I(5 - ((4 * GetUnitState(Picked, UNIT_STATE_LIFE) - .1) / GetUnitState(Picked, UNIT_STATE_MAX_LIFE))));
			IssueTargetOrderById(dammi, $D006B, Picked);
			if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405) {
				SaveUnitHandle(udg_hash, hPicked, 1, Picked);
				SaveUnitHandle(udg_hash, hPicked, 2, caster);
				SaveReal(udg_hash, hPicked, 3, periodicdamage * (.6 + .4 * GetUnitAbilityLevel(dammi, 'A0G1')));
				SaveInteger(udg_hash, hPicked, 4, 40);
				TimerStart(tPicked, .1, true, Trig_Dissection_Periodic_Damage_Target_Actions);
			}
		}
		GroupRemoveUnit(g, Picked);
	}
	if (jumps <= 0) {
		PauseUnit(caster, false);
		SetUnitInvulnerable(caster, false);
		SetUnitPathing(caster, true);
		SetUnitAnimation(caster, "stand");
		SetUnitTimeScale(caster, 1.);
		SetUnitTurnSpeed(caster, .6);
		SetUnitPosition(caster, xt, yt);
		DestroyEffect(LoadEffectHandle(udg_hash, h, 7));
		DestroyEffect(LoadEffectHandle(udg_hash, h, 8));
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	GroupClear(g);
	DestroyGroup(g);
}
nothing Trig_Dissection_Actions() {
	unit caster = GetSpellAbilityUnit();
	real xc = GetUnitX(caster);
	real yc = GetUnitY(caster);
	real xt;
	real yt;
	real dist;
	real angle;
	integer lvl = GetUnitAbilityLevel(caster, 'A0FG');
	real damage = -5. + 40. * lvl;
	real periodicdamage = 4. + 16. * lvl;
	group gdamage = CreateGroup();
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	unit target = GetSpellTargetUnit();
	location loc;
	effect ef;
	integer jumps;
	if (target != null) {
	else
	}
	SetUnitInvulnerable(caster, true);
	SetUnitPathing(caster, false);
	SetUnitAnimationByIndex(caster, 2);
	SetUnitTimeScale(caster, 13.33);
	SetUnitTurnSpeed(caster, 3.);
	if (GetRandomInt(1, 2) == 1) {
		SetUnitAnimationByIndex(caster, 8);
	else
		SetUnitAnimationByIndex(caster, 2);
	}
	SaveEffectHandle(udg_hash, h, 7, ef);
	SaveEffectHandle(udg_hash, h, 8, ef);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 2, xt);
	SaveReal(udg_hash, h, 3, yt);
	SaveReal(udg_hash, h, 4, angle);
	SaveReal(udg_hash, h, 5, damage);
	SaveGroupHandle(udg_hash, h, 6, gdamage);
	SaveBoolean(udg_hash, h, 9, true);
	SaveBoolean(udg_hash, h, $A, true);
	SaveInteger(udg_hash, h, $B, jumps + 1);
	SaveReal(udg_hash, h, $C, periodicdamage);
	UnitPeriodicPostionMove(caster, .02, jumps * .075);
	TimerStart(t, .075, true, Trig_Dissection_Periodic_Move_Actions);
	RemoveLocation(loc);
}
boolean Trig_Dissection_Conditions() {
	return GetSpellAbilityId() == 'A0FG';
}
nothing InitTrig_Dissection() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Dissection, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Dissection, Condition(Trig_Dissection_Conditions));
	TriggerAddAction(gg_trg_Dissection, Trig_Dissection_Actions);
}
nothing Trig_Whirlwind_Periodic_Damage_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	real damage = LoadReal(udg_hash, h, 2);
	integer wait = LoadInteger(udg_hash, h, 3);
	real xc = GetUnitX(caster);
	real yc = GetUnitY(caster);
	group g = CreateGroup();
	player p = GetOwningPlayer(caster);
	unit Picked;
	effect ef;
	if (wait > 0 && GetUnitState(caster, UNIT_STATE_LIFE) > .405) {
		SaveInteger(udg_hash, h, 3, wait);
		GroupEnumUnitsInRange(g, xc, yc, 200., null);
		while (true) {
			if (Picked == null) break;
			if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, p) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				if (wait - (wait / $A) * $A == 0) {
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", Picked, "chest"));
				}
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			}
			GroupRemoveUnit(g, Picked);
		}
	else
		DestroyEffect(ef);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	GroupClear(g);
	DestroyGroup(g);
}
nothing Trig_Whirlwind_Actions() {
	unit caster = GetSpellAbilityUnit();
	integer wait = 80;
	integer lvl = GetUnitAbilityLevel(caster, 'A0FH');
	real damage = ((20 * lvl) + ((-.4 + .4 * lvl) * GetHeroAgi(caster, true))) / 20.;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	effect ef = AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl", caster, "weapon");
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 2, damage);
	SaveInteger(udg_hash, h, 3, wait);
	SaveEffectHandle(udg_hash, h, 4, ef);
	TimerStart(t, .05, true, Trig_Whirlwind_Periodic_Damage_Actions);
}
boolean Trig_Whirlwind_Conditions() {
	return GetSpellAbilityId() == 'A0FH';
}
nothing InitTrig_Whirlwind() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Whirlwind, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Whirlwind, Condition(Trig_Whirlwind_Conditions));
	TriggerAddAction(gg_trg_Whirlwind, Trig_Whirlwind_Actions);
}
nothing Trig_Imboweling_Periodic_Damage_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	real xt = LoadReal(udg_hash, h, 2);
	real yt = LoadReal(udg_hash, h, 3);
	real angle = LoadReal(udg_hash, h, 4) + GetRandomReal(75., 285.);
	real damage = LoadReal(udg_hash, h, 5);
	group gdamage = LoadGroupHandle(udg_hash, h, 6);
	real anglejump = LoadReal(udg_hash, h, 7);
	real damagejump = LoadReal(udg_hash, h, 8);
	integer jumps = LoadInteger(udg_hash, h, 9);
	real xc = GetUnitX(caster);
	real yc = GetUnitY(caster);
	real x = xt + GetRandomReal(150., 250.) * Cos(angle * bj_DEGTORAD);
	real y = yt + GetRandomReal(150., 250.) * Sin(angle * bj_DEGTORAD);
	group g = CreateGroup();
	real dist = SquareRoot((xt - xc) * (xt - xc) + (yt - yc) * (yt - yc));
	integer lop = R2I(dist / 100.) + 1;
	unit Picked;
	unit dammi;
	player p = GetOwningPlayer(caster);
	SaveReal(udg_hash, h, 4, angle);
	SaveInteger(udg_hash, h, 9, jumps);
	if (jumps > 0) {
		if (jumps != 1 && jumps != $B && jumps != 21 && jumps != 2 && jumps != $C && jumps != 22) {
			SetUnitFacing(caster, angle);
			SetUnitTimeScale(caster, 7.5);
			if (GetRandomInt(1, 2) == 1) {
				SetUnitAnimationByIndex(caster, 8);
			else
				SetUnitAnimationByIndex(caster, 2);
			}
			if (IsTerrainPathable(x, y, PATHING_TYPE_FLYABILITY) == false) {
				SetUnitX(caster, x);
				SetUnitY(caster, y);
			}
			SetUnitFacing(caster, angle);
			while (true) {
				if (lop < 0) break;
				GroupEnumUnitsInRange(g, x + ((100. * lop) * Cos(angle * bj_DEGTORAD)), y + ((100. * lop) * Sin(angle * bj_DEGTORAD)), 175., null);
			}
			while (true) {
				if (Picked == null) break;
				if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitInGroup(Picked, gdamage) == false && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
					UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_MELEE, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", Picked, "chest"));
					UnitApplyTimedLife(dammi, 'BTLF', 1.);
					UnitAddAbility(dammi, 'A0G3');
					IssueTargetOrderById(dammi, $D006B, Picked);
				}
				GroupRemoveUnit(g, Picked);
			}
			TimerStart(t, .1, false, Trig_Imboweling_Periodic_Damage_Actions);
		}
		SaveGroupHandle(udg_hash, h, 6, gdamage);
		if (jumps == 2 || jumps == $C || jumps == 22) {
			SaveReal(udg_hash, h, 7, anglejump);
			if (IsTerrainPathable(x, y, PATHING_TYPE_FLYABILITY) == false) {
				SetUnitX(caster, x);
				SetUnitY(caster, y);
			}
			SetUnitFacing(caster, anglejump);
			SetUnitTimeScale(caster, 1.4);
			SetUnitAnimationByIndex(caster, 3);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Blink\\BlinkCaster.mdl", caster, "chest"));
			TimerStart(t, .6, false, Trig_Imboweling_Periodic_Damage_Actions);
		}
		if (jumps == 1 || jumps == $B || jumps == 21) {
			GroupEnumUnitsInRange(g, xc + 100. * Cos(anglejump * bj_DEGTORAD), yc + 100. * Sin(anglejump * bj_DEGTORAD), 225., null);
			while (true) {
				if (Picked == null) break;
				if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
					UnitDamageTarget(caster, Picked, damagejump, false, false, ATTACK_TYPE_MELEE, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", Picked, "chest"));
					DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", Picked, "chest"));
					UnitApplyTimedLife(dammi, 'BTLF', 1.);
					UnitAddAbility(dammi, 'A0G4');
					IssueTargetOrderById(dammi, $D007F, Picked);
				}
				GroupRemoveUnit(g, Picked);
			}
			DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile.mdl", xc + 100. * Cos(anglejump * bj_DEGTORAD), yc + 100. * Sin(anglejump * bj_DEGTORAD)));
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl", xc + 100. * Cos(anglejump * bj_DEGTORAD), yc + 100. * Sin(anglejump * bj_DEGTORAD)));
			TimerStart(t, .1, false, Trig_Imboweling_Periodic_Damage_Actions);
			GroupClear(gdamage);
			SaveGroupHandle(udg_hash, h, 6, gdamage);
		}
	else
		DestroyEffect(LoadEffectHandle(udg_hash, h, $A));
		DestroyEffect(LoadEffectHandle(udg_hash, h, $B));
		SetUnitInvulnerable(caster, false);
		SetUnitPathing(caster, true);
		SetUnitAnimation(caster, "Stand");
		SetUnitTimeScale(caster, 1.);
		SetUnitTurnSpeed(caster, GetUnitDefaultTurnSpeed(caster));
		IssueImmediateOrderById(caster, $D0004);
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	GroupClear(g);
	DestroyGroup(g);
}
nothing Trig_Imboweling_Actions() {
	unit caster = GetSpellAbilityUnit();
	real xc = GetUnitX(caster);
	real yc = GetUnitY(caster);
	location loc = GetSpellTargetLoc();
	real xt = GetLocationX(loc);
	real yt = GetLocationY(loc);
	real dist;
	real angle = .0;
	real anglejump = (bj_RADTODEG * Atan2(yt - yc, xt - xc));
	integer lvl = GetUnitAbilityLevel(caster, 'A0G2');
	real damage = 5. + (25. * lvl) + ((.1 + .1 * lvl) * GetHeroAgi(caster, true));
	real damagejump = (50 + GetHeroAgi(caster, true)) * 1.5 * lvl;
	group gdamage = CreateGroup();
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	effect ef;
	integer jumps = ($A * 3) + 1;
	SetUnitInvulnerable(caster, true);
	SetUnitPathing(caster, false);
	SetUnitAnimationByIndex(caster, 2);
	SetUnitTimeScale(caster, 20.);
	SetUnitTurnSpeed(caster, 3.);
	if (GetRandomInt(1, 2) == 1) {
		SetUnitAnimationByIndex(caster, 8);
	else
		SetUnitAnimationByIndex(caster, 2);
	}
	SaveEffectHandle(udg_hash, h, $A, ef);
	SaveEffectHandle(udg_hash, h, $B, ef);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 2, xt);
	SaveReal(udg_hash, h, 3, yt);
	SaveReal(udg_hash, h, 4, angle);
	SaveReal(udg_hash, h, 5, damage);
	SaveGroupHandle(udg_hash, h, 6, gdamage);
	SaveReal(udg_hash, h, 7, anglejump);
	SaveReal(udg_hash, h, 8, damagejump);
	SaveInteger(udg_hash, h, 9, jumps);
	UnitPeriodicPostionMove(caster, .02, jumps * .1 + 1.5);
	TimerStart(t, .1, false, Trig_Imboweling_Periodic_Damage_Actions);
	RemoveLocation(loc);
}
boolean Trig_Imboweling_Conditions() {
	return GetSpellAbilityId() == 'A0G2';
}
nothing InitTrig_Imboweling() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Imboweling, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Imboweling, Condition(Trig_Imboweling_Conditions));
	TriggerAddAction(gg_trg_Imboweling, Trig_Imboweling_Actions);
}
nothing Trig_Master_of_Lightnings_Load_Actions() {
	AbilityPreload('A07N', 6);
	AbilityPreload('A07O', 6);
	AbilityPreload('A07Q', 6);
	AbilityPreload('A07P', 3);
	AbilityPreload('A07S', 6);
	EffectPreload("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl");
	EffectPreload("Abilities\\Spells\\Orc\\LightningBolt\\LightningBoltMissile.mdl");
	EffectPreload("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl");
	EffectPreload("Abilities\\Spells\\Items\\AIlb\\AIlbTarget.mdl");
	EffectPreload("Abilities\\Weapons\\Bolt\\BoltImpact.mdl");
	EffectPreload("Abilities\\Spells\\Items\\AIlb\\AIlbSpecialArt.mdl");
	EffectPreload("Abilities\\Spells\\Orc\\LightningShield\\LightningShieldBuff.mdl");
	EffectPreload("war3mapImported\\OutlandStorm.mdx");
	EffectPreload("Abilities\\Spells\\Orc\\Purge\\PurgeBuffTarget.mdl");
	EffectPreload("Abilities\\Spells\\Orc\\LightningShield\\LightningShieldTarget.mdl");
	EnableTrigger(gg_trg_Thundercloud);
	EnableTrigger(gg_trg_Power_of_Lightnings);
	EnableTrigger(gg_trg_Electric_Field);
	EnableTrigger(gg_trg_Storm);
}
nothing InitTrig_Master_of_Lightnings_Load() {
	TriggerAddAction(gg_trg_Master_of_Lightnings_Load, Trig_Master_of_Lightnings_Load_Actions);
}
nothing Trig_Thundercloud_lightning_Actions() {
	timer tl = GetExpiredTimer();
	integer hl = GetHandleId(tl);
	integer lop = 0;
	lightning l;
	while (true) {
		if (lop > 5) break;
		DestroyLightning(l);
	}
	FlushChildHashtable(udg_hash, hl);
	DestroyTimer(tl);
}
nothing Trig_Thundercloud_move_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit cloud = LoadUnitHandle(udg_hash, h, 1);
	real x = LoadReal(udg_hash, h, 2);
	real y = LoadReal(udg_hash, h, 3);
	real angle = LoadReal(udg_hash, h, 4);
	integer stage = LoadInteger(udg_hash, h, 5);
	unit caster = LoadUnitHandle(udg_hash, h, 7);
	real xp = LoadReal(udg_hash, h, 8);
	real yp = LoadReal(udg_hash, h, 9);
	real damage = LoadReal(udg_hash, h, $A);
	player p = LoadPlayerHandle(udg_hash, h, $B);
	integer lop = 0;
	real xu = GetUnitX(cloud);
	real yu = GetUnitY(cloud);
	real distance = SquareRoot((xp - xu) * (xp - xu) + (yp - yu) * (yp - yu));
	real xt;
	real yt;
	unit slower;
	timer tl;
	integer hl;
	group g;
	unit Picked;
	lightning l;
	real between;
	effect efcloud;
	location locz;
	location loccloudz = GetUnitLoc(cloud);
	if (distance < 3.75) {
		SaveInteger(udg_hash, h, 5, stage);
		while (true) {
			if (lop > 4) break;
			DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", xt, yt));
			SaveLightningHandle(udg_hash, hl, lop, l);
			RemoveLocation(locz);
		}
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.mdl", xp, yp));
		DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", xp, yp));
		SaveLightningHandle(udg_hash, hl, 5, l);
		RemoveLocation(locz);
		GroupEnumUnitsInRange(g, xp, yp, $E1, null);
		while (true) {
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				UnitApplyTimedLife(slower, 'BTLF', .75);
				UnitAddAbility(slower, 'A07S');
				SetUnitAbilityLevel(slower, 'A07S', GetUnitAbilityLevel(caster, 'A07N'));
				IssueTargetOrderById(slower, $D006B, Picked);
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", Picked, "origin"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIlb\\AIlbSpecialArt.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningShield\\LightningShieldBuff.mdl", Picked, "origin"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", Picked, "chest"));
			}
			GroupRemoveUnit(g, Picked);
		}
		TimerStart(tl, .6, false, Trig_Thundercloud_lightning_Actions);
		SaveReal(udg_hash, h, 8, xp);
		SaveReal(udg_hash, h, 9, yp);
		DestroyGroup(g);
		if (stage >= 4) {
			DestroyEffect(efcloud);
			KillUnit(cloud);
			FlushChildHashtable(udg_hash, h);
			DestroyTimer(t);
		}
	else
		if (IsTerrainPathable(xu, yu, PATHING_TYPE_FLYABILITY) == false) {
			SetUnitPosition(cloud, xu, yu);
		else
			DestroyEffect(efcloud);
			KillUnit(cloud);
			FlushChildHashtable(udg_hash, h);
			DestroyTimer(t);
		}
	}
	RemoveLocation(loccloudz);
}
nothing Trig_Thundercloud_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit caster2;
	integer lvl = GetUnitAbilityLevel(caster, 'A07N');
	integer lvlult = GetUnitAbilityLevel(caster, 'A07P');
	integer lvlultup = GetUnitAbilityLevel(caster, 'A0Q6');
	location loc = GetSpellTargetLoc();
	real x = GetLocationX(loc);
	real y = GetLocationY(loc);
	integer stage = 0;
	unit cloud = CreateUnit(GetOwningPlayer(caster), 'h00U', x, y, .0);
	effect efcloud;
	real angle = GetRandomReal(.0, 360.);
	real damage = (.12 * GetUnitAbilityLevel(caster, 'A07P') + 1.) * ((5. + (25. * lvl) + ((.1 + .05 * lvl) * GetHeroInt(caster, true))));
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	player p;
	if (lvlult > 0) {
	}
	if (lvlultup > 0) {
	}
	if (GetOwningPlayer(caster) == Player($F)) {
		FlushChildHashtable(udg_hash, GetHandleId(caster));
	else
	}
	UnitAddAbility(cloud, 'Amrf');
	UnitRemoveAbility(cloud, 'Amrf');
	SetUnitFlyHeight(cloud, 350. + GetLocationZ(loc), .0);
	SetUnitScale(cloud, 1.35, 1.35, 1.35);
	SetUnitPosition(cloud, x, y);
	SaveUnitHandle(udg_hash, h, 1, cloud);
	SaveReal(udg_hash, h, 2, x);
	SaveReal(udg_hash, h, 3, y);
	SaveReal(udg_hash, h, 4, angle);
	SaveInteger(udg_hash, h, 5, stage);
	SaveEffectHandle(udg_hash, h, 6, efcloud);
	SaveUnitHandle(udg_hash, h, 7, caster2);
	SaveReal(udg_hash, h, 8, x);
	SaveReal(udg_hash, h, 9, y);
	SaveReal(udg_hash, h, $A, damage);
	SavePlayerHandle(udg_hash, h, $B, p);
	TimerStart(t, .04, true, Trig_Thundercloud_move_Actions);
	RemoveLocation(loc);
}
boolean Trig_Thundercloud_Conditions() {
	return GetSpellAbilityId() == 'A07N';
}
nothing InitTrig_Thundercloud() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Thundercloud, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Thundercloud, Condition(Trig_Thundercloud_Conditions));
	TriggerAddAction(gg_trg_Thundercloud, Trig_Thundercloud_Actions);
}
nothing Trig_Power_of_Lightnings_periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit ward = LoadUnitHandle(udg_hash, h, $A);
	real x = GetUnitX(ward);
	real y = GetUnitY(ward);
	integer stage = LoadInteger(udg_hash, h, $B);
	integer adddamage = LoadInteger(udg_hash, h, 18);
	integer addas = LoadInteger(udg_hash, h, 19);
	array<unit> target;
	array<effect> ef;
	real tx;
	real ty;
	array<lightning> l;
	integer second = LoadInteger(udg_hash, h, $D);
	integer bonus;
	integer lop = 1;
	effect wef;
	integer count = LoadInteger(udg_hash, h, $F);
	boolean destroy = false;
	location locwardz = GetUnitLoc(ward);
	location locz;
	while (true) {
		if (lop > count) break;
	}
	if (stage >= 25) {
		SaveInteger(udg_hash, h, $D, second);
		while (true) {
			if (lop > count) break;
			SetAttackAbilityLevel(target[lop], adddamage);
			SetAttackSpeedAbilityLevel(target[lop], addas);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", target[lop], "weapon"));
		}
	else
		while (true) {
			if (lop > count) break;
			if (target[lop] != null) {
				if (SquareRoot(tx * tx + ty * ty) < 500 && GetUnitState(target[lop], UNIT_STATE_LIFE) > .405 && second < $F) {
					MoveLightningEx(l[lop], true, x, y, 150. + GetLocationZ(locwardz), GetUnitX(target[lop]), GetUnitY(target[lop]), GetUnitFlyHeight(target[lop]) + 60. + GetLocationZ(locz));
					RemoveLocation(locz);
				else
				}
			}
		}
	}
	if (destroy) {
		DestroyEffect(wef);
		KillUnit(ward);
		while (true) {
			if (lop > count) break;
			SetAttackAbilityLevel(target[lop], -1 * adddamage * second);
			SetAttackSpeedAbilityLevel(target[lop], -second * addas);
			DestroyEffect(ef[lop]);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", target[lop], "weapon"));
			DestroyLightning(l[lop]);
		}
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	SaveInteger(udg_hash, h, $B, stage);
	while (true) {
		if (lop > count) break;
	}
	RemoveLocation(locwardz);
}
nothing Trig_Power_of_Lightnings_Actions() {
	unit caster = GetSpellAbilityUnit();
	location loc = GetSpellTargetLoc();
	real x = GetLocationX(loc);
	real y = GetLocationY(loc);
	unit ward = CreateUnit(GetOwningPlayer(caster), 'h00U', x, y, GetRandomReal(.0, 360.));
	array<unit> target;
	real xw = GetUnitX(ward);
	real yw = GetUnitY(ward);
	array<lightning> l;
	integer lop = 1;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	group g = CreateGroup();
	group grup = CreateGroup();
	unit Picked;
	integer stage = 0;
	integer second = 0;
	integer bonus = 2 + GetUnitAbilityLevel(caster, 'A07O');
	array<effect> ef;
	effect wef = AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", ward, "chest");
	integer count = R2I((I2R(GetUnitAbilityLevel(caster, 'A07O')) / 2) + .5);
	location locz;
	integer adddamage = 2 + GetUnitAbilityLevel(caster, 'A07O');
	integer addas = R2I(adddamage / 2);
	UnitAddAbility(ward, 'Amrf');
	UnitRemoveAbility(ward, 'Amrf');
	SetUnitFlyHeight(ward, 50., .0);
	SetUnitScale(ward, 2.5, 2.5, 2.5);
	GroupEnumUnitsInRange(g, x, y, 450., null);
	while (true) {
		if (Picked == null) break;
		if (IsUnitAlly(Picked, GetOwningPlayer(caster)) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
			GroupAddUnit(grup, Picked);
		}
		GroupRemoveUnit(g, Picked);
	}
	RandomUnitFromGroup(R2I((I2R(GetUnitAbilityLevel(caster, 'A07O')) / 2) + .5), grup);
	while (true) {
		if (lop > count) break;
		if (target[lop] != null) {
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", target[lop], "chest"));
			SaveUnitHandle(udg_hash, h, lop, target[lop]);
			SaveLightningHandle(udg_hash, h, lop + 3, l[lop]);
			SaveEffectHandle(udg_hash, h, lop + 6, ef[lop]);
			RemoveLocation(locz);
		}
		GroupRemoveUnit(udg_GroupRandomUnitFromGroup, target[lop]);
	}
	SaveUnitHandle(udg_hash, h, $A, ward);
	SaveInteger(udg_hash, h, $B, stage);
	SaveInteger(udg_hash, h, $C, bonus);
	SaveInteger(udg_hash, h, $D, second);
	SaveEffectHandle(udg_hash, h, $E, wef);
	SaveInteger(udg_hash, h, $F, count);
	SaveInteger(udg_hash, h, 18, adddamage);
	SaveInteger(udg_hash, h, 19, addas);
	TimerStart(t, .04, true, Trig_Power_of_Lightnings_periodic_Actions);
	while (true) {
		if (lop > count) break;
	}
	RemoveLocation(loc);
	GroupClear(g);
	DestroyGroup(g);
	GroupClear(grup);
	DestroyGroup(grup);
}
boolean Trig_Power_of_Lightnings_Conditions() {
	return GetSpellAbilityId() == 'A07O';
}
nothing InitTrig_Power_of_Lightnings() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Power_of_Lightnings, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Power_of_Lightnings, Condition(Trig_Power_of_Lightnings_Conditions));
	TriggerAddAction(gg_trg_Power_of_Lightnings, Trig_Power_of_Lightnings_Actions);
}
nothing Trig_Electric_Field_periodic_lightning_move_Actions() {
	timer tl = GetExpiredTimer();
	integer hl = GetHandleId(tl);
	integer check = LoadInteger(udg_hash, hl, 20);
	unit caster = LoadUnitHandle(udg_hash, hl, 21);
	integer lvl = GetUnitAbilityLevel(caster, 'A07Q');
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	location loccasterz = GetUnitLoc(caster);
	location locz;
	array<lightning> l;
	array<unit> target;
	integer lop = 0;
	integer count = LoadInteger(udg_hash, hl, 22);
	if (check < $F) {
		SaveInteger(udg_hash, hl, 20, check);
		while (true) {
			if (lop + 1 > count) break;
			if (GetUnitState(target[lop], UNIT_STATE_LIFE) > .405 && target[lop] != null) {
				MoveLightningEx(l[lop], true, x, y, GetUnitFlyHeight(caster) + 215. + GetLocationZ(loccasterz), GetUnitX(target[lop]), GetUnitY(target[lop]), GetUnitFlyHeight(target[lop]) + 25. + GetLocationZ(locz));
				RemoveLocation(locz);
			}
		}
	else
		while (true) {
			if (lop > count) break;
			DestroyLightning(l[lop]);
		}
		FlushChildHashtable(udg_hash, hl);
		DestroyTimer(tl);
	}
	RemoveLocation(loccasterz);
}
nothing Trig_Electric_Field_periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	integer lvl = GetUnitAbilityLevel(caster, 'A07Q');
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	group g;
	group grup;
	unit Picked;
	integer lop = 0;
	unit target;
	array<lightning> l;
	location loccasterz;
	location locz;
	timer tl;
	integer hl;
	integer check = 0;
	real damage;
	integer count = 0;
	if (GetUnitState(caster, UNIT_STATE_LIFE) > .405) {
		GroupEnumUnitsInRange(g, x, y, 500., null);
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", caster, "overhead"));
		while (true) {
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, GetOwningPlayer(caster)) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				GroupAddUnit(grup, Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
		RandomUnitFromGroup(1 + lvl, grup);
		GroupAddGroup(udg_GroupRandomUnitFromGroup, g);
		while (true) {
			if (lop > lvl + 1 || target == null) break;
			SaveLightningHandle(udg_hash, hl, lop, l[lop]);
			SaveUnitHandle(udg_hash, hl, lop + $A, target);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", target, "chest"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIlb\\AIlbSpecialArt.mdl", target, "chest"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", target, "origin"));
			UnitDamageTarget(caster, target, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			GroupRemoveUnit(g, target);
			RemoveLocation(locz);
		}
		SaveInteger(udg_hash, hl, 20, check);
		SaveUnitHandle(udg_hash, hl, 21, caster);
		SaveInteger(udg_hash, hl, 22, count);
		TimerStart(tl, .04, true, Trig_Electric_Field_periodic_lightning_move_Actions);
		RemoveLocation(loccasterz);
		GroupClear(g);
		DestroyGroup(g);
		GroupClear(grup);
		DestroyGroup(grup);
	}
}
nothing Trig_Learn_Skill_Electric_Field_Actions() {
	unit caster = GetLearningUnit();
	integer lvl = GetUnitAbilityLevel(caster, 'A07Q');
	timer t;
	integer h;
	if (lvl == 1) {
		SaveTimerHandle(udg_hash, GetHandleId(caster), $B, t);
	}
	SaveUnitHandle(udg_hash, h, 1, caster);
	TimerStart(t, 4. - (.25 * lvl), true, Trig_Electric_Field_periodic_Actions);
}
boolean Trig_Learn_Skill_Electric_Field_Conditions() {
	return GetLearnedSkill() == 'A07Q' && GetUnitTypeId(GetLearningUnit()) != 'h00U';
}
nothing InitTrig_Electric_Field() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Electric_Field, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Electric_Field, Condition(Trig_Learn_Skill_Electric_Field_Conditions));
	TriggerAddAction(gg_trg_Electric_Field, Trig_Learn_Skill_Electric_Field_Actions);
}
nothing Trig_Thundercloud_lightning2_Actions() {
	timer tl = GetExpiredTimer();
	integer hl = GetHandleId(tl);
	integer lop = 0;
	lightning l;
	while (true) {
		if (lop > 5) break;
		DestroyLightning(l);
	}
	FlushChildHashtable(udg_hash, hl);
	DestroyTimer(tl);
}
nothing Trig_Thundercloud2_move_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit cloud = LoadUnitHandle(udg_hash, h, 1);
	real x = LoadReal(udg_hash, h, 2);
	real y = LoadReal(udg_hash, h, 3);
	real angle = LoadReal(udg_hash, h, 4);
	integer stage = LoadInteger(udg_hash, h, 5);
	unit caster = LoadUnitHandle(udg_hash, h, 7);
	real xp = LoadReal(udg_hash, h, 8);
	real yp = LoadReal(udg_hash, h, 9);
	real damage = LoadReal(udg_hash, h, $A);
	player p = LoadPlayerHandle(udg_hash, h, $B);
	integer lop = 0;
	real xu = GetUnitX(cloud);
	real yu = GetUnitY(cloud);
	real distance = SquareRoot((xp - xu) * (xp - xu) + (yp - yu) * (yp - yu));
	real xt;
	real yt;
	unit slower;
	timer tl;
	integer hl;
	group g;
	unit Picked;
	lightning l;
	real between;
	effect efcloud;
	location locz;
	location loccloudz = GetUnitLoc(cloud);
	if (distance < 3.75) {
		SaveInteger(udg_hash, h, 5, stage);
		while (true) {
			if (lop > 4) break;
			DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", xt, yt));
			SaveLightningHandle(udg_hash, hl, lop, l);
			RemoveLocation(locz);
		}
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.mdl", xp, yp));
		DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", xp, yp));
		SaveLightningHandle(udg_hash, hl, 5, l);
		RemoveLocation(locz);
		GroupEnumUnitsInRange(g, xp, yp, $E1, null);
		while (true) {
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				UnitApplyTimedLife(slower, 'BTLF', .75);
				UnitAddAbility(slower, 'A07S');
				SetUnitAbilityLevel(slower, 'A07S', GetUnitAbilityLevel(caster, 'A07N'));
				IssueTargetOrderById(slower, $D006B, Picked);
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", Picked, "origin"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIlb\\AIlbSpecialArt.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningShield\\LightningShieldBuff.mdl", Picked, "origin"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", Picked, "chest"));
			}
			GroupRemoveUnit(g, Picked);
		}
		TimerStart(tl, .6, false, Trig_Thundercloud_lightning2_Actions);
		SaveReal(udg_hash, h, 8, xp);
		SaveReal(udg_hash, h, 9, yp);
		DestroyGroup(g);
		if (stage >= 4) {
			DestroyEffect(efcloud);
			KillUnit(cloud);
			FlushChildHashtable(udg_hash, h);
			DestroyTimer(t);
		}
	else
		if (IsTerrainPathable(xu, yu, PATHING_TYPE_FLYABILITY) == false) {
			SetUnitPosition(cloud, xu, yu);
		else
			DestroyEffect(efcloud);
			KillUnit(cloud);
			FlushChildHashtable(udg_hash, h);
			DestroyTimer(t);
		}
	}
	RemoveLocation(loccloudz);
}
nothing Trig_Storm_periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	real x = LoadReal(udg_hash, h, 2);
	real y = LoadReal(udg_hash, h, 3);
	integer lvl = LoadInteger(udg_hash, h, 5);
	integer order = GetUnitCurrentOrder(caster);
	integer lvlult = GetUnitAbilityLevel(caster, 'A07P');
	integer lvlultup = GetUnitAbilityLevel(caster, 'A0Q6');
	unit dammi;
	real px;
	real py;
	integer orderId;
	unit cloud;
	player p;
	real damage;
	real angle;
	effect efcloud;
	location loc;
	timer t2;
	integer h2;
	if ((orderId != 0)) {
	else
		if ((orderId != 0)) {
		}
	}
	if (order == orderId && (lvl > 0)) {
		if (lvlult > 0) {
		}
		if (lvlultup > 0) {
		}
		UnitAddAbility(cloud, 'Amrf');
		UnitRemoveAbility(cloud, 'Amrf');
		SetUnitFlyHeight(cloud, 350. + GetLocationZ(loc), .0);
		SetUnitScale(cloud, 1.35, 1.35, 1.35);
		SetUnitPosition(cloud, px, py);
		SaveUnitHandle(udg_hash, h2, 1, cloud);
		SaveReal(udg_hash, h2, 2, px);
		SaveReal(udg_hash, h2, 3, py);
		SaveReal(udg_hash, h2, 4, angle);
		SaveInteger(udg_hash, h2, 5, 0);
		SaveEffectHandle(udg_hash, h2, 6, efcloud);
		SaveUnitHandle(udg_hash, h2, 7, caster);
		SaveReal(udg_hash, h2, 8, px);
		SaveReal(udg_hash, h2, 9, py);
		SaveReal(udg_hash, h2, $A, damage);
		SavePlayerHandle(udg_hash, h2, $B, p);
		TimerStart(t2, .04, true, Trig_Thundercloud2_move_Actions);
		RemoveLocation(loc);
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Purge\\PurgeBuffTarget.mdl", caster, "origin"));
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", caster, "origin"));
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningBolt\\LightningBoltMissile.mdl", caster, "overhead"));
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningShield\\LightningShieldTarget.mdl", caster, "origin"));
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", caster, "chest"));
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", caster, "hand,right"));
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", caster, "weapon"));
	else
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
		RemoveUnit(LoadUnitHandle(udg_hash, GetHandleId(caster), 'u'));
	}
}
nothing Trig_Storm_Actions() {
	unit caster = GetSpellAbilityUnit();
	integer lvl = GetUnitAbilityLevel(caster, 'A07N');
	integer lvlult = GetUnitAbilityLevel(caster, 'A07P');
	integer lvlultup = GetUnitAbilityLevel(caster, 'A0Q6');
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 2, x);
	SaveReal(udg_hash, h, 3, y);
	SaveInteger(udg_hash, h, 5, lvl);
	if (lvlult > 0) {
		AddProgressBar(caster, 240. + (3. * lvlult), (.9 + .1 * lvl), (.5 * 3 * lvlult), false, true, 'u', $96, $96, $AF);
	}
	if (lvlultup > 0) {
		AddProgressBar(caster, 240. + (3. * lvlultup), (.9 + .1 * lvl), (.5 * 4 * lvlultup), false, true, 'u', $96, $96, $AF);
	}
	TimerStart(t, .5, true, Trig_Storm_periodic_Actions);
}
boolean Trig_Storm_Conditions() {
	return (GetSpellAbilityId() == 'A07P' || GetSpellAbilityId() == 'A0Q6');
}
nothing InitTrig_Storm() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Storm, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Storm, Condition(Trig_Storm_Conditions));
	TriggerAddAction(gg_trg_Storm, Trig_Storm_Actions);
}
nothing Trig_Respawnlol_Actions() {
	ConditionalTriggerExecute(gg_trg_Ranger_Load);
}
nothing InitTrig_Respawnlol() {
	TriggerRegisterTimerEventSingle(gg_trg_Respawnlol, 5);
	TriggerAddAction(gg_trg_Respawnlol, Trig_Respawnlol_Actions);
}
nothing Trig_Ranger_Load_Actions() {
	AbilityPreload('A0EE', 6);
	AbilityPreload('A0ED', 4);
	AbilityPreload('A0EF', 1);
	AbilityPreload('A0EH', 6);
	AbilityPreload('A0EK', 6);
	AbilityPreload('A0EL', 6);
	AbilityPreload('A0EG', 6);
	AbilityPreload('A0EN', 6);
	AbilityPreload('A0EO', 1);
	AbilityPreload('A0EP', 3);
	AbilityPreload('A0EM', 6);
	AbilityPreload('A0EI', 6);
	AbilityPreload('A0EJ', 6);
	EffectPreload("Abilities\\Spells\\Other\\BreathOfFire\\BreathOfFireDamage.mdl");
	EffectPreload("Abilities\\Spells\\Other\\FrostDamage\\FrostDamage.mdl");
	EffectPreload("Abilities\\Weapons\\ZigguratFrostMissile\\ZigguratFrostMissile.mdl");
	EffectPreload("Abilities\\Spells\\Undead\\Curse\\CurseTarget.mdl");
	EffectPreload("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl");
	EffectPreload("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl");
	EffectPreload("Abilities\\Spells\\Undead\\OrbOfDeath\\AnnihilationMissile.mdl");
	EffectPreload("Abilities\\Weapons\\SearingArrow\\SearingArrowMissile.mdl");
	EffectPreload("Abilities\\Weapons\\ColdArrow\\ColdArrowMissile.mdl");
	EffectPreload("Abilities\\Spells\\Other\\BlackArrow\\BlackArrowMissile.mdl");
	EffectPreload("Abilities\\Spells\\Other\\Drain\\ManaDrainCaster.mdl");
	EnableTrigger(gg_trg_MultiShotSwitch);
	EnableTrigger(gg_trg_Learn_Release_of_Arrows);
	EnableTrigger(gg_trg_Release_of_Arrows);
	EnableTrigger(gg_trg_Dexterity_of_the_Ranger);
}
nothing InitTrig_Ranger_Load() {
	TriggerAddAction(gg_trg_Ranger_Load, Trig_Ranger_Load_Actions);
}
nothing Trig_MultiShotSwitch_Actions() {
	unit caster = GetTriggerUnit();
	unit death = GetDyingUnit();
	integer id = 'A0EF';
	integer orderId;
	if (GetUnitAbilityLevel(death, id) > 0) {
		UnitRemoveAbility(death, id);
	}
	if ((GetIssuedOrderId() == orderId)) {
		UnitAddAbility(caster, id);
		SetUnitAbilityLevel(caster, 'A0ED', 1 + GetUnitAbilityLevel(caster, 'A0EP'));
		UnitMakeAbilityPermanent(caster, true, id);
		UnitMakeAbilityPermanent(caster, true, 'A0ED');
	}
	if ((GetIssuedOrderId() == orderId)) {
		UnitRemoveAbility(caster, id);
	}
}
boolean Trig_MultiShotSwitch_Conditions() {
	return GetUnitAbilityLevel(GetTriggerUnit(), 'A0EE') > 0 || GetUnitAbilityLevel(GetDyingUnit(), 'A0EE') > 0;
}
nothing InitTrig_MultiShotSwitch() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_MultiShotSwitch, Player(index), EVENT_PLAYER_UNIT_ISSUED_ORDER, null);
		TriggerRegisterPlayerUnitEvent(gg_trg_MultiShotSwitch, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_MultiShotSwitch, Condition(Trig_MultiShotSwitch_Conditions));
	TriggerAddAction(gg_trg_MultiShotSwitch, Trig_MultiShotSwitch_Actions);
}
nothing Trig_Learn_Release_of_Arrows_Actions() {
	unit u = GetLearningUnit();
	integer lvl = GetUnitAbilityLevel(u, 'A0EH');
	if (lvl == 1) {
		UnitAddAbility(u, 'A0EK');
		UnitAddAbility(u, 'A0EL');
		UnitAddAbility(u, 'A0EG');
		UnitMakeAbilityPermanent(u, true, 'A0EK');
		UnitMakeAbilityPermanent(u, true, 'A0EL');
		UnitMakeAbilityPermanent(u, true, 'A0EG');
	else
		SetUnitAbilityLevel(u, 'A0EK', lvl);
		SetUnitAbilityLevel(u, 'A0EL', lvl);
		SetUnitAbilityLevel(u, 'A0EG', lvl);
	}
}
boolean Trig_Learn_Release_of_Arrows_Conditions() {
	return GetLearnedSkill() == 'A0EH' && GetUnitTypeId(GetLearningUnit()) != 'h00U';
}
nothing InitTrig_Learn_Release_of_Arrows() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Release_of_Arrows, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Learn_Release_of_Arrows, Condition(Trig_Learn_Release_of_Arrows_Conditions));
	TriggerAddAction(gg_trg_Learn_Release_of_Arrows, Trig_Learn_Release_of_Arrows_Actions);
}
nothing Trig_Release_of_Arrows_periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 20);
	integer count = LoadInteger(udg_hash, h, 21);
	real damage = LoadReal(udg_hash, h, 22);
	integer check = LoadInteger(udg_hash, h, 23);
	integer abiltype = LoadInteger(udg_hash, h, 24);
	group gdamage = LoadGroupHandle(udg_hash, h, 25);
	player p = GetOwningPlayer(caster);
	integer lvl = GetUnitAbilityLevel(caster, 'A0EH');
	unit arrow;
	real ax;
	real ay;
	real face;
	integer lop = 0;
	effect ef;
	unit dammi;
	string sef;
	string order;
	integer rawcode;
	group g = CreateGroup();
	group gr = CreateGroup();
	unit Picked;
	if (check < 25) {
		SaveInteger(udg_hash, h, 23, check);
		if (abiltype == 1) {
		}
		if (abiltype == 2) {
		}
		if (abiltype == 3) {
		}
		while (true) {
			if (lop >= count) break;
			if (IsTerrainPathable(ax, ay, PATHING_TYPE_FLYABILITY) == false) {
				SetUnitPosition(arrow, ax, ay);
				GroupEnumUnitsInRange(g, ax, ay, 100., null);
				while (true) {
					if (Picked == null) break;
					if (IsUnitEnemy(Picked, p) && IsUnitInGroup(Picked, gdamage) == false && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
						GroupAddUnit(gdamage, Picked);
						GroupAddUnit(gr, Picked);
					}
					GroupRemoveUnit(g, Picked);
				}
			}
		}
		while (true) {
			if (Picked == null) break;
			UnitApplyTimedLife(dammi, 'BTLF', .34);
			UnitAddAbility(dammi, rawcode);
			SetUnitAbilityLevel(dammi, rawcode, lvl);
			IssueTargetOrder(dammi, order, Picked);
			UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			DestroyEffect(AddSpecialEffectTarget(sef, Picked, "chest"));
			GroupRemoveUnit(gr, Picked);
		}
	else
		while (true) {
			if (lop >= count) break;
			KillUnit(arrow);
			DestroyEffect(ef);
		}
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	GroupClear(g);
	DestroyGroup(g);
	GroupClear(gr);
	DestroyGroup(gr);
}
nothing Trig_Release_of_Arrows_Actions() {
	unit caster = GetSpellAbilityUnit();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	unit target = GetSpellTargetUnit();
	real tx;
	real ty;
	location loc;
	real angle;
	real angle1;
	player p = GetOwningPlayer(caster);
	integer abilityid = GetSpellAbilityId();
	integer abiltype;
	integer count = GetUnitAbilityLevel(caster, GetSpellAbilityId()) + 2;
	integer lop = 0;
	real damage = ((count * 25.) - 35.);
	integer lvlult = GetUnitAbilityLevel(caster, 'A0EP');
	unit arrow;
	integer check = 0;
	effect ef;
	string s;
	group gdamage = CreateGroup();
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	boolean perekluchatelangle = false;
	integer counterangle = 0;
	integer hcaster = GetHandleId(caster);
	integer agility;
	integer bonus;
	if (lvlult > 0) {
	}
	if (target == null) {
	else
	}
	if (target == caster) {
	}
	if (count - ((count / 2) * 2) == 0) {
	}
	if (abilityid == 'A0EK') {
	}
	if (abilityid == 'A0EL') {
	}
	if (abilityid == 'A0EG') {
	}
	while (true) {
		if (lop >= count) break;
		if (perekluchatelangle) {
		else
		}
		SetUnitScale(arrow, 1.2, 1.2, 1.2);
		SaveUnitHandle(udg_hash, h, lop, arrow);
		SaveEffectHandle(udg_hash, h, $A + lop, ef);
	}
	if (GetUnitAbilityLevel(caster, 'A0EO') > 0) {
		if (agility <= 30 * GetUnitAbilityLevel(caster, 'A0EN') - 5 - (count * bonus)) {
			SetHeroAgi(caster, GetHeroAgi(caster, false) + (count * bonus), true);
			SaveInteger(udg_hash, hcaster, 52, agility);
			ProgressBarAddPercentComplete(LoadUnitHandle(udg_hash, GetHandleId(caster), 'u'), (((count * bonus) * 100.) / (30 * GetUnitAbilityLevel(caster, 'A0EN') - 5 - (count * bonus))));
		else
			SetHeroAgi(caster, GetHeroAgi(caster, false) - agility + (30 * GetUnitAbilityLevel(caster, 'A0EN')) - 5, true);
			SaveInteger(udg_hash, hcaster, 52, agility);
		}
	}
	SaveUnitHandle(udg_hash, h, 20, caster);
	SaveInteger(udg_hash, h, 21, count);
	SaveReal(udg_hash, h, 22, damage);
	SaveInteger(udg_hash, h, 23, check);
	SaveInteger(udg_hash, h, 24, abiltype);
	SaveGroupHandle(udg_hash, h, 25, gdamage);
	TimerStart(t, .04, true, Trig_Release_of_Arrows_periodic_Actions);
	RemoveLocation(loc);
}
boolean Trig_Release_of_Arrows_Conditions() {
	return GetSpellAbilityId() == 'A0EK' || GetSpellAbilityId() == 'A0EL' || GetSpellAbilityId() == 'A0EG';
}
nothing InitTrig_Release_of_Arrows() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Release_of_Arrows, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Release_of_Arrows, Condition(Trig_Release_of_Arrows_Conditions));
	TriggerAddAction(gg_trg_Release_of_Arrows, Trig_Release_of_Arrows_Actions);
}
nothing Trig_Dexterity_of_the_Ranger_Remove_Agility_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	effect ef = LoadEffectHandle(udg_hash, h, 2);
	integer agility = LoadInteger(udg_hash, GetHandleId(caster), 52);
	SetHeroAgi(caster, GetHeroAgi(caster, false) - agility, true);
	UnitRemoveAbility(caster, 'A0EO');
	DestroyEffect(ef);
	RemoveUnit(LoadUnitHandle(udg_hash, GetHandleId(caster), 'u'));
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_Dexterity_of_the_Ranger_Actions() {
	unit caster = GetSpellAbilityUnit();
	real time = 10. + 2 * GetUnitAbilityLevel(caster, 'A0EP');
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	integer lvl = GetUnitAbilityLevel(caster, 'A0EN');
	integer agility = 6 + 4 * lvl;
	integer chetnost = ((lvl / 2) * 2) - lvl;
	integer bonus;
	effect ef = AddSpecialEffectTarget("Abilities\\Spells\\Other\\Drain\\ManaDrainCaster.mdl", caster, "overhead");
	if (chetnost == 0) {
	else
	}
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveEffectHandle(udg_hash, h, 2, ef);
	SaveInteger(udg_hash, GetHandleId(caster), 52, agility);
	SaveInteger(udg_hash, GetHandleId(caster), 53, bonus);
	SetHeroAgi(caster, GetHeroAgi(caster, false) + agility, true);
	UnitAddAbility(caster, 'A0EO');
	TimerStart(t, 10., false, Trig_Dexterity_of_the_Ranger_Remove_Agility_Actions);
	AddProgressBar(caster, 150. + (2. * lvl), (.9 + .05 * lvl), 1., true, false, 'u', 20, 'n', $E6);
	ProgressBarAddPercentComplete(LoadUnitHandle(udg_hash, GetHandleId(caster), 'u'), (agility * 100. / (30 * GetUnitAbilityLevel(caster, 'A0EN') - 5)));
}
boolean Trig_Dexterity_of_the_Ranger_Conditions() {
	return GetSpellAbilityId() == 'A0EN';
}
nothing InitTrig_Dexterity_of_the_Ranger() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Dexterity_of_the_Ranger, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Dexterity_of_the_Ranger, Condition(Trig_Dexterity_of_the_Ranger_Conditions));
	TriggerAddAction(gg_trg_Dexterity_of_the_Ranger, Trig_Dexterity_of_the_Ranger_Actions);
}
nothing Trig_Healer_Load_Actions() {
	AbilityPreload('A006', 6);
	AbilityPreload('A04P', 6);
	AbilityPreload('A0AC', 6);
	AbilityPreload('A0AE', 3);
	UnitPreload('h01O');
	AbilityPreload('A0EQ', 6);
	AbilityPreload('A0ER', 6);
	AbilityPreload('A032', 6);
	AbilityPreload('A0A8', 6);
	AbilityPreload('A0AD', 1);
	AbilityPreload('B020', 1);
	AbilityPreload('B022', 1);
	AbilityPreload('B023', 1);
	AbilityPreload('B025', 1);
	AbilityPreload('B028', 1);
	EffectPreload("Abilities\\Spells\\Items\\StaffOfSanctuary\\Staff_Sanctuary_Target.mdl");
	EffectPreload("Abilities\\Spells\\Items\\PotionOfOmniscience\\CrystalBallCaster.mdl");
	EffectPreload("Abilities\\Spells\\Human\\InnerFire\\InnerFireTarget.mdl");
	EffectPreload("Abilities\\Spells\\Other\\ANrm\\ANrmTarget.mdl");
	EffectPreload("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl");
	EffectPreload("Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl");
	EffectPreload("war3mapImported\\Curing_Light_Effect.mdx");
	EffectPreload("Abilities\\Spells\\Undead\\ReplenishHealth\\ReplenishHealthCasterOverhead.mdl");
	EffectPreload("Abilities\\Spells\\NightElf\\Tranquility\\Tranquility.mdl");
	EffectPreload("war3mapImported\\Retribution.mdx");
	EnableTrigger(gg_trg_Good_Healing);
	EnableTrigger(gg_trg_Spiritual_Communication);
	EnableTrigger(gg_trg_Curing_Light);
	EnableTrigger(gg_trg_Guardian_Angel);
}
nothing InitTrig_Healer_Load() {
	TriggerAddAction(gg_trg_Healer_Load, Trig_Healer_Load_Actions);
}
nothing Trig_Good_Healing_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	location loc = GetSpellTargetLoc();
	real x = GetLocationX(loc);
	real y = GetLocationY(loc);
	integer lvl = GetUnitAbilityLevel(caster, 'A006');
	real damage = ((5 * lvl * lvl) + 20) + (20. * lvl) + (GetHeroInt(caster, true) * .2 * lvl);
	real heal = (($A * lvl * lvl) + 40) + (40. * lvl) + (GetHeroInt(caster, true) * .4 * lvl);
	group g = CreateGroup();
	unit Picked;
	unit dammi;
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl", x, y));
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl", x, y));
	SetUnitX(dammi, x);
	SetUnitY(dammi, y);
	UnitApplyTimedLife(dammi, 'BTLF', 2.);
	UnitAddAbility(dammi, 'A0EQ');
	SetUnitAbilityLevel(dammi, 'A0EQ', lvl);
	IssueImmediateOrderById(dammi, $D00C4);
	GroupEnumUnitsInRange(g, x, y, 300. + 10., null);
	while (true) {
		if (Picked == null) break;
		if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl", Picked, "origin"));
		}
		if (IsUnitAlly(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			SetUnitState(Picked, UNIT_STATE_LIFE, GetUnitState(Picked, UNIT_STATE_LIFE) + heal);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl", Picked, "origin"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl", Picked, "origin"));
		}
		GroupRemoveUnit(g, Picked);
	}
	RemoveLocation(loc);
	GroupClear(g);
	DestroyGroup(g);
}
boolean Trig_Good_Healing_Conditions() {
	return GetSpellAbilityId() == 'A006';
}
nothing InitTrig_Good_Healing() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Good_Healing, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Good_Healing, Condition(Trig_Good_Healing_Conditions));
	TriggerAddAction(gg_trg_Good_Healing, Trig_Good_Healing_Actions);
}
nothing Trig_Spiritual_Communication_Ligtning_Move_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	unit target = LoadUnitHandle(udg_hash, h, 2);
	lightning l = LoadLightningHandle(udg_hash, h, 3);
	real time = LoadReal(udg_hash, h, 4);
	location locc = GetUnitLoc(caster);
	real xc = GetUnitX(caster);
	real yc = GetUnitY(caster);
	location loct = GetUnitLoc(target);
	real xt = GetUnitX(target);
	real yt = GetUnitY(target);
	real dx = xc - xt;
	real dy = yc - yt;
	real dist = SquareRoot(dx * dx + dy * dy);
	integer liferegen;
	integer manaregen;
	if (GetUnitState(caster, UNIT_STATE_LIFE) > .405 && GetUnitState(target, UNIT_STATE_LIFE) > .0 && dist <= 700. && time > .0) {
		SaveReal(udg_hash, h, 4, time);
		MoveLightningEx(l, true, xc, yc, 50. + GetLocationZ(locc), xt, yt, 50. + GetLocationZ(loct));
	else
		UnitRemoveAbility(caster, 'B022');
		UnitRemoveAbility(target, 'B022');
		UnitRemoveAbility(caster, 'B023');
		UnitRemoveAbility(target, 'B023');
		SetUnitLifeAndManaRegeneration(caster, "life", -1 * liferegen);
		SetUnitLifeAndManaRegeneration(target, "life", -1 * liferegen);
		SetUnitLifeAndManaRegeneration(caster, "mana", -1 * manaregen);
		SetUnitLifeAndManaRegeneration(target, "mana", -1 * manaregen);
		DestroyLightning(l);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	RemoveLocation(locc);
	RemoveLocation(loct);
}
nothing Trig_Spiritual_Communication_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	unit dammi;
	location locc = GetUnitLoc(caster);
	real xc = GetUnitX(caster);
	real yc = GetUnitY(caster);
	location loct = GetUnitLoc(target);
	real xt = GetUnitX(target);
	real yt = GetUnitY(target);
	lightning l = AddLightningEx("SPLK", true, xc, yc, 50. + GetLocationZ(locc), xt, yt, 50. + GetLocationZ(loct));
	player p = GetOwningPlayer(caster);
	integer lvl = GetUnitAbilityLevel(caster, 'A04P');
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	real time = 10. + (.05 * GetHeroInt(caster, true));
	integer liferegen = $A + ($A * lvl);
	integer manaregen = (5 * lvl);
	SetUnitLifeAndManaRegeneration(caster, "life", liferegen);
	SetUnitLifeAndManaRegeneration(target, "life", liferegen);
	SetUnitLifeAndManaRegeneration(caster, "mana", manaregen);
	SetUnitLifeAndManaRegeneration(target, "mana", manaregen);
	UnitApplyTimedLife(dammi, 'BTLF', 1.5);
	UnitAddAbility(dammi, 'A0ER');
	SetUnitAbilityLevel(dammi, 'A0ER', lvl);
	IssueTargetOrderById(dammi, $D0085, caster);
	if (GetOwningPlayer(target) != Player($D)) {
		UnitApplyTimedLife(dammi, 'BTLF', 1.5);
		UnitAddAbility(dammi, 'A0ER');
		SetUnitAbilityLevel(dammi, 'A0ER', lvl);
		IssueTargetOrderById(dammi, $D0085, target);
	}
	UnitApplyTimedLife(dammi, 'BTLF', 1.5);
	UnitAddAbility(dammi, 'A032');
	SetUnitAbilityLevel(dammi, 'A032', lvl);
	IssueTargetOrderById(dammi, $D0062, caster);
	UnitApplyTimedLife(dammi, 'BTLF', 1.5);
	UnitAddAbility(dammi, 'A032');
	SetUnitAbilityLevel(dammi, 'A032', lvl);
	IssueTargetOrderById(dammi, $D0062, target);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveUnitHandle(udg_hash, h, 2, target);
	SaveLightningHandle(udg_hash, h, 3, l);
	SaveReal(udg_hash, h, 4, time);
	SaveInteger(udg_hash, h, 5, liferegen);
	SaveInteger(udg_hash, h, 6, manaregen);
	TimerStart(t, .04, true, Trig_Spiritual_Communication_Ligtning_Move_Actions);
	RemoveLocation(locc);
	RemoveLocation(loct);
}
boolean Trig_Spiritual_Communication_Conditions() {
	return (GetSpellAbilityId() == 'A04P' && IsUnitType(GetSpellAbilityUnit(), UNIT_TYPE_HERO)) != null;
}
nothing InitTrig_Spiritual_Communication() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Spiritual_Communication, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Spiritual_Communication, Condition(Trig_Spiritual_Communication_Conditions));
	TriggerAddAction(gg_trg_Spiritual_Communication, Trig_Spiritual_Communication_Actions);
}
nothing Trig_Curing_Light_Heal_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	integer wait = LoadInteger(udg_hash, h, 1);
	group gheal = LoadGroupHandle(udg_hash, h, 2);
	unit sphere = LoadUnitHandle(udg_hash, h, 3);
	integer heal = LoadInteger(udg_hash, h, 4);
	integer lvl = LoadInteger(udg_hash, h, 5);
	effect ef = LoadEffectHandle(udg_hash, h, 6);
	player p = GetOwningPlayer(sphere);
	real x = GetUnitX(sphere);
	real y = GetUnitY(sphere);
	group maingroup = CreateGroup();
	group g = CreateGroup();
	group gcurrent = CreateGroup();
	group copygheal = CreateGroup();
	unit Picked;
	unit dammi;
	if (wait > 0) {
		SaveInteger(udg_hash, h, 1, wait);
		GroupEnumUnitsInRange(g, x, y, 300., null);
		while (true) {
			if (Picked == null) break;
			if ((IsUnitAlly(Picked, p) || GetOwningPlayer(Picked) == Player($D)) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				GroupAddUnit(gcurrent, Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
		GroupAddGroup(gheal, maingroup);
		GroupAddGroup(gcurrent, maingroup);
		while (true) {
			if (Picked == null) break;
			if (IsUnitInGroup(Picked, gheal) && IsUnitInGroup(Picked, gcurrent) == false) {
				GroupRemoveUnit(gheal, Picked);
				SetUnitLifeAndManaRegeneration(Picked, "life", -1 * heal);
			}
			if (IsUnitInGroup(Picked, gheal) == false && IsUnitInGroup(Picked, gcurrent)) {
				GroupAddUnit(gheal, Picked);
				SetUnitLifeAndManaRegeneration(Picked, "life", heal);
			}
			GroupRemoveUnit(maingroup, Picked);
		}
		SaveGroupHandle(udg_hash, h, 2, gheal);
		GroupAddGroup(gheal, copygheal);
		RandomUnitFromGroup(1, copygheal);
		SetUnitState(Picked, UNIT_STATE_LIFE, GetUnitState(Picked, UNIT_STATE_LIFE) + (lvl * .01) * GetUnitState(Picked, UNIT_STATE_MAX_LIFE));
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl", Picked, "origin"));
	else
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
		DestroyEffect(ef);
		SetUnitScale(dammi, 3.1, 3.1, 3.1);
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishHealth\\ReplenishHealthCasterOverhead.mdl", dammi, "chest"));
		RemoveUnit(sphere);
		while (true) {
			if (Picked == null) break;
			SetUnitLifeAndManaRegeneration(Picked, "life", -1 * heal);
			GroupRemoveUnit(gheal, Picked);
		}
	}
	GroupClear(maingroup);
	DestroyGroup(maingroup);
	GroupClear(g);
	DestroyGroup(g);
	GroupClear(gcurrent);
	DestroyGroup(gcurrent);
	GroupClear(copygheal);
	DestroyGroup(copygheal);
}
nothing Trig_Curing_Light_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	integer lvl = GetUnitAbilityLevel(caster, 'A0AC');
	location loc = GetSpellTargetLoc();
	real x = GetLocationX(loc);
	real y = GetLocationY(loc);
	unit sphere = CreateUnit(p, 'h01O', x, y, GetRandomReal(.0, 360.));
	group g = CreateGroup();
	group gheal = CreateGroup();
	unit Picked;
	integer constheal = 8 + (8 * lvl) + R2I((((.06 * lvl) + .06) * GetHeroInt(caster, true)));
	integer wait = $C;
	effect ef = AddSpecialEffectTarget("war3mapImported\\Curing_Light_Effect.mdx", sphere, "origin");
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	unit dammi = CreateUnit(p, 'h00U', x, y, GetRandomReal(.0, 360.));
	SetUnitScale(dammi, 3.1, 3.1, 3.1);
	UnitAddAbility(sphere, 'A0A8');
	SetUnitAbilityLevel(sphere, 'A0A8', lvl);
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishHealth\\ReplenishHealthCasterOverhead.mdl", dammi, "chest"));
	GroupEnumUnitsInRange(g, x, y, 300., null);
	while (true) {
		if (Picked == null) break;
		if ((IsUnitAlly(Picked, p) || GetOwningPlayer(Picked) == Player($D)) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			GroupAddUnit(gheal, Picked);
			SetUnitLifeAndManaRegeneration(Picked, "life", constheal);
		}
		GroupRemoveUnit(g, Picked);
	}
	SaveInteger(udg_hash, h, 1, wait);
	SaveGroupHandle(udg_hash, h, 2, gheal);
	SaveUnitHandle(udg_hash, h, 3, sphere);
	SaveInteger(udg_hash, h, 4, constheal);
	SaveInteger(udg_hash, h, 5, lvl);
	SaveEffectHandle(udg_hash, h, 6, ef);
	TimerStart(t, 1., true, Trig_Curing_Light_Heal_Actions);
	RemoveLocation(loc);
	GroupClear(g);
	DestroyGroup(g);
}
boolean Trig_Curing_Light_Conditions() {
	return GetSpellAbilityId() == 'A0AC';
}
nothing InitTrig_Curing_Light() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Curing_Light, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Curing_Light, Condition(Trig_Curing_Light_Conditions));
	TriggerAddAction(gg_trg_Curing_Light, Trig_Curing_Light_Actions);
}
nothing Trig_Guardian_Angel_10sec_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	group gheal = LoadGroupHandle(udg_hash, h, 1);
	integer adddamage = LoadInteger(udg_hash, h, 2);
	integer addarmor = LoadInteger(udg_hash, h, 3);
	effect ef = LoadEffectHandle(udg_hash, h, 4);
	integer liferegen = LoadInteger(udg_hash, h, 5);
	unit Picked;
	DestroyEffect(ef);
	while (true) {
		if (Picked == null) break;
		if (ef != null) {
			DestroyEffect(ef);
		}
		SetAttackAbilityLevel(Picked, -adddamage);
		SetArmorAbilityLevel(Picked, -addarmor);
		SetUnitLifeAndManaRegeneration(Picked, "life", -liferegen);
		UnitRemoveAbility(Picked, 'A0AD');
		GroupRemoveUnit(gheal, Picked);
		SaveEffectHandle(udg_hash, GetHandleId(Picked), 66, null);
		SaveReal(udg_hash, GetHandleId(Picked), 65, .0);
	}
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	GroupClear(gheal);
	DestroyGroup(gheal);
}
nothing Trig_Guardian_Angel_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	integer lvl = GetUnitAbilityLevel(caster, 'A0AE');
	integer lvlup = GetUnitAbilityLevel(caster, 'A0Q3');
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	group g = CreateGroup();
	group gheal = CreateGroup();
	unit Picked;
	integer adddamage;
	integer addarmor;
	real shield;
	integer liferegen;
	effect ef;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	real aoe;
	if (lvl > 0) {
	}
	if (lvlup > 0) {
	}
	SaveEffectHandle(udg_hash, h, 4, ef);
	GroupEnumUnitsInRange(g, x, y, aoe, null);
	while (true) {
		if (Picked == null) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitAlly(Picked, p) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			SaveEffectHandle(udg_hash, GetHandleId(Picked), 66, ef);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Resurrect\\ResurrectCaster.mdl", Picked, "origin"));
			GroupAddUnit(gheal, Picked);
			UnitAddAbility(Picked, 'A0AD');
			SetAttackAbilityLevel(Picked, adddamage);
			SetArmorAbilityLevel(Picked, addarmor);
			SetUnitLifeAndManaRegeneration(Picked, "life", liferegen);
			SaveReal(udg_hash, GetHandleId(Picked), 65, shield);
		}
		GroupRemoveUnit(g, Picked);
	}
	SaveGroupHandle(udg_hash, h, 1, gheal);
	SaveInteger(udg_hash, h, 2, adddamage);
	SaveInteger(udg_hash, h, 3, addarmor);
	SaveInteger(udg_hash, h, 5, liferegen);
	TimerStart(t, 12., false, Trig_Guardian_Angel_10sec_Actions);
	GroupClear(g);
	DestroyGroup(g);
}
boolean Trig_Guardian_Angel_Conditions() {
	return (GetSpellAbilityId() == 'A0AE' || GetSpellAbilityId() == 'A0Q3');
}
nothing InitTrig_Guardian_Angel() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Guardian_Angel, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Guardian_Angel, Condition(Trig_Guardian_Angel_Conditions));
	TriggerAddAction(gg_trg_Guardian_Angel, Trig_Guardian_Angel_Actions);
}
nothing Trig_Paladin_Load_Actions() {
	AbilityPreload('A0M6', 6);
	AbilityPreload('A0M7', 6);
	AbilityPreload('A0M8', 6);
	AbilityPreload('A0MA', 3);
	AbilityPreload('A0M9', 6);
	AbilityPreload('B04G', 1);
	AbilityPreload('B04H', 1);
	EffectPreload("Effects\\Consecrate.mdx");
	EffectPreload("Effects\\Holy Nova.mdx");
	EffectPreload("Effects\\HolyArmor.MDX");
	EffectPreload("Effects\\HolyAurora.MDX");
	EffectPreload("Effects\\HolyAwakening.mdx");
	EffectPreload("Effects\\HolyPhoenixMissle.mdx");
	EffectPreload("Effects\\DivineRage.mdx");
	EffectPreload("Effects\\HolySpiral.MDX");
	EffectPreload("Effects\\LifeHigh.mdx");
	EffectPreload("Effects\\LightNova.mdx");
	EffectPreload("Effects\\MegaHeal.mdx");
	EffectPreload("Effects\\OrbLightX.mdx");
	EffectPreload("Effects\\RunicShield.mdx");
	EnableTrigger(gg_trg_Spiral_of_Light);
	EnableTrigger(gg_trg_Keeper_Seal);
	EnableTrigger(gg_trg_Light_Hammer);
	EnableTrigger(gg_trg_God_Hand);
}
nothing InitTrig_Paladin_Load() {
	TriggerAddAction(gg_trg_Paladin_Load, Trig_Paladin_Load_Actions);
}
nothing Trig_Spiral_of_Light_Remove_Bonus_Armor_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit target = LoadUnitHandle(udg_hash, h, 1);
	integer armor = LoadInteger(udg_hash, h, 2);
	effect ef = LoadEffectHandle(udg_hash, h, 3);
	SetArmorAbilityLevel(target, -armor);
	DestroyEffect(ef);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_Spiral_of_Light_Periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	unit target;
	unit dammi;
	integer stage = LoadInteger(udg_hash, h, 5);
	effect ef;
	player p;
	group gdammi;
	group gdammi2;
	group g;
	unit Picked;
	unit dammi2;
	real x;
	real y;
	real xt;
	real yt;
	real angle;
	real angle2;
	real dist;
	real damage;
	real heal;
	boolean destroy1 = false;
	boolean destroy2 = false;
	boolean remove;
	integer armor;
	timer tarmor;
	integer harmor;
	real time;
	if (stage == 0) {
		if (GetUnitState(target, UNIT_STATE_LIFE) > .405) {
			SetUnitPosition(dammi, x, y);
			if (dist < 23.) {
				SetUnitPosition(dammi, xt, yt);
				DestroyEffect(AddSpecialEffect("Effects\\Holy Nova.mdl", xt, yt));
			}
		else
		}
	}
	if (destroy1) {
		KillUnit(dammi);
		DestroyEffect(ef);
		SaveInteger(udg_hash, h, 5, stage);
		SetUnitState(target, UNIT_STATE_LIFE, GetUnitState(target, UNIT_STATE_LIFE) + heal);
		DestroyEffect(AddSpecialEffectTarget("Effects\\MegaHeal.mdx", target, "origin"));
		DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", target, "origin"), 2.);
		SetArmorAbilityLevel(target, armor);
		SaveUnitHandle(udg_hash, harmor, 1, target);
		SaveInteger(udg_hash, harmor, 2, armor);
		SaveEffectHandle(udg_hash, harmor, 3, ef);
		TimerStart(tarmor, time, false, Trig_Spiral_of_Light_Remove_Bonus_Armor_Actions);
		GroupEnumUnitsInRange(g, xt, yt, 400., null);
		while (true) {
			if (Picked == null) break;
			if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				if (IsUnitEnemy(Picked, p)) {
					UnitAddAbility(dammi2, 'Amrf');
					UnitRemoveAbility(dammi2, 'Amrf');
					SetUnitFlyHeight(dammi2, 50., .0);
					GroupAddUnit(gdammi, dammi2);
					SaveUnitHandle(udg_hash, GetHandleId(dammi2), 1, Picked);
					SaveStr(udg_hash, GetHandleId(dammi2), 2, "damage");
					SaveEffectHandle(udg_hash, GetHandleId(dammi2), 3, ef);
				}
				if (IsUnitAlly(Picked, p) && Picked != target) {
					UnitAddAbility(dammi2, 'Amrf');
					UnitRemoveAbility(dammi2, 'Amrf');
					SetUnitFlyHeight(dammi2, 50., .0);
					GroupAddUnit(gdammi, dammi2);
					SaveUnitHandle(udg_hash, GetHandleId(dammi2), 1, Picked);
					SaveStr(udg_hash, GetHandleId(dammi2), 2, "heal");
					SaveEffectHandle(udg_hash, GetHandleId(dammi2), 3, ef);
				}
			}
			GroupRemoveUnit(g, Picked);
		}
		SaveGroupHandle(udg_hash, h, 9, gdammi);
		GroupClear(g);
		DestroyGroup(g);
	}
	if (stage == 1) {
		GroupAddGroup(gdammi, gdammi2);
		while (true) {
			if (dammi2 == null) break;
			SetUnitPosition(dammi2, x, y);
			if (dist < 23. || GetUnitState(target, UNIT_STATE_LIFE) < .405) {
				SetUnitScale(dammi2, .6, .6, .6);
				DestroyEffect(ef);
				if (GetUnitState(target, UNIT_STATE_LIFE) > .405) {
					if (LoadStr(udg_hash, GetHandleId(dammi2), 2) == "damage") {
						DestroyEffect(AddSpecialEffectTarget("Effects\\HolyPhoenixMissle.mdx", target, "origin"));
						UnitDamageTarget(caster, target, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
					else
						SetUnitState(target, UNIT_STATE_LIFE, GetUnitState(target, UNIT_STATE_LIFE) + heal);
						DestroyEffect(AddSpecialEffectTarget("Effects\\MegaHeal.mdx", target, "origin"));
						DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", target, "origin"), 2.);
					}
				else
					DestroyEffect(AddSpecialEffect("Effects\\HolyPhoenixMissle.mdx", x, y));
				}
				GroupRemoveUnit(gdammi, dammi2);
				FlushChildHashtable(udg_hash, GetHandleId(dammi2));
				if (remove) {
					RemoveUnit(dammi2);
				}
			}
			GroupRemoveUnit(gdammi2, dammi2);
		}
		SaveGroupHandle(udg_hash, h, 9, gdammi);
		if (CountUnitsInGroup(gdammi) == 0) {
			SaveInteger(udg_hash, h, 5, stage);
		}
		GroupClear(gdammi2);
		DestroyGroup(gdammi2);
	}
	if (stage == 2) {
		GroupClear(gdammi);
		DestroyGroup(gdammi);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
}
nothing Trig_Spiral_of_Light_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	real xt = GetUnitX(target);
	real yt = GetUnitY(target);
	real angle = bj_RADTODEG * Atan2(yt - y, xt - x);
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	unit dammi;
	effect ef;
	real dist = SquareRoot((xt - x) * (xt - x) + (yt - y) * (yt - y));
	integer lvl = GetUnitAbilityLevel(caster, 'A0M6');
	real healmain = 50 + (70 * lvl) + ((GetHeroStr(caster, true) + GetHeroInt(caster, true)) / 2);
	real heal = 30 + (50 * lvl);
	real damage = $A + (30 * lvl);
	real time = 2. + (1. * lvl);
	integer stage = 0;
	integer hcaster = GetHandleId(caster);
	effect hammeref;
	UnitAddAbility(dammi, 'Amrf');
	UnitRemoveAbility(dammi, 'Amrf');
	SetUnitScale(dammi, 1.25, 1.25, 1.25);
	if (GetRandomInt(1, 'd') <= (6 + (GetUnitAbilityLevel(caster, 'A0M8') * 4)) && GetUnitAbilityLevel(caster, 'A0M8') > 0 && LoadBoolean(udg_hash, hcaster, 'q') == false) {
		SaveReal(udg_hash, hcaster, 'p', .0);
		SaveBoolean(udg_hash, hcaster, 'q', true);
		SaveEffectHandle(udg_hash, hcaster, 'r', hammeref);
		SaveEffectHandle(udg_hash, hcaster, 's', hammeref);
	}
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveUnitHandle(udg_hash, h, 2, target);
	SaveUnitHandle(udg_hash, h, 3, dammi);
	SaveEffectHandle(udg_hash, h, 4, ef);
	SaveInteger(udg_hash, h, 5, stage);
	SaveReal(udg_hash, h, 6, healmain);
	SaveReal(udg_hash, h, 7, heal);
	SaveReal(udg_hash, h, 8, damage);
	SaveReal(udg_hash, h, $A, time);
	TimerStart(t, .03, true, Trig_Spiral_of_Light_Periodic_Actions);
}
boolean Trig_Spiral_of_Light_Conditions() {
	return GetSpellAbilityId() == 'A0M6';
}
nothing InitTrig_Spiral_of_Light() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Spiral_of_Light, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Spiral_of_Light, Condition(Trig_Spiral_of_Light_Conditions));
	TriggerAddAction(gg_trg_Spiral_of_Light, Trig_Spiral_of_Light_Actions);
}
nothing Trig_Keeper_Seal_Periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	unit target = LoadUnitHandle(udg_hash, h, 2);
	unit dammi = LoadUnitHandle(udg_hash, h, 3);
	effect ef;
	integer wait = LoadInteger(udg_hash, h, 7);
	real angle = LoadReal(udg_hash, h, 8);
	integer bonushp;
	integer bonusregen;
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	real xt = x + 125. * Cos(angle * bj_DEGTORAD);
	real yt = y + 125. * Sin(angle * bj_DEGTORAD);
	if (wait > 0 && GetUnitState(target, UNIT_STATE_LIFE) > .405 && GetUnitState(caster, UNIT_STATE_LIFE) > .405) {
		SaveInteger(udg_hash, h, 7, wait);
		SaveReal(udg_hash, h, 8, angle);
		SetUnitPosition(dammi, xt, yt);
	else
		SetUnitMaxState(caster, UNIT_STATE_MAX_LIFE, -bonushp);
		SetUnitLifeAndManaRegeneration(caster, "life", -bonusregen);
		SaveReal(udg_hash, GetHandleId(target), 'n', .0);
		SaveUnitHandle(udg_hash, GetHandleId(target), 'o', null);
		DestroyEffect(ef);
		DestroyEffect(ef);
		KillUnit(dammi);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
}
nothing Trig_Keeper_Seal_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	real x;
	real y;
	timer t;
	integer h;
	player p = GetOwningPlayer(caster);
	unit dammi;
	effect ef;
	integer lvl = GetUnitAbilityLevel(caster, 'A0M7');
	integer bonushp;
	integer bonusregen;
	real resist;
	integer wait;
	real angle;
	integer hcaster = GetHandleId(caster);
	effect hammeref;
	if (LoadReal(udg_hash, GetHandleId(target), 'n') > .0) {
		UnitRemoveAbility(caster, 'A0M7');
		UnitAddAbility(caster, 'A0M7');
		SetUnitAbilityLevel(caster, 'A0M7', lvl);
		SetUnitState(caster, UNIT_STATE_MANA, GetUnitState(caster, UNIT_STATE_MANA) + 120. + (5. * lvl));
		SimError(p, "На этого воина уже наложена печать хранителя.");
	else
		SetUnitMaxState(caster, UNIT_STATE_MAX_LIFE, bonushp);
		SetUnitLifeAndManaRegeneration(caster, "life", bonusregen);
		SaveReal(udg_hash, GetHandleId(target), 'n', resist);
		SaveUnitHandle(udg_hash, GetHandleId(target), 'o', caster);
		UnitAddAbility(dammi, 'Amrf');
		UnitRemoveAbility(dammi, 'Amrf');
		SaveEffectHandle(udg_hash, h, 4, ef);
		SaveEffectHandle(udg_hash, h, $B, ef);
		if (GetRandomInt(1, 'd') <= (6 + (GetUnitAbilityLevel(caster, 'A0M8') * 4)) && GetUnitAbilityLevel(caster, 'A0M8') > 0 && LoadBoolean(udg_hash, hcaster, 'q') == false) {
			SaveReal(udg_hash, hcaster, 'p', .0);
			SaveBoolean(udg_hash, hcaster, 'q', true);
			SaveEffectHandle(udg_hash, hcaster, 'r', hammeref);
			SaveEffectHandle(udg_hash, hcaster, 's', hammeref);
		}
		SaveUnitHandle(udg_hash, h, 1, caster);
		SaveUnitHandle(udg_hash, h, 2, target);
		SaveUnitHandle(udg_hash, h, 3, dammi);
		SaveInteger(udg_hash, h, 5, bonushp);
		SaveInteger(udg_hash, h, 6, bonusregen);
		SaveInteger(udg_hash, h, 7, wait);
		SaveReal(udg_hash, h, 8, angle);
		TimerStart(t, .03, true, Trig_Keeper_Seal_Periodic_Actions);
	}
}
boolean Trig_Keeper_Seal_Conditions() {
	return GetSpellAbilityId() == 'A0M7';
}
nothing InitTrig_Keeper_Seal() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Keeper_Seal, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Keeper_Seal, Condition(Trig_Keeper_Seal_Conditions));
	TriggerAddAction(gg_trg_Keeper_Seal, Trig_Keeper_Seal_Actions);
}
nothing Trig_Light_Hammer_Periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit hero = LoadUnitHandle(udg_hash, h, 1);
	integer damage = LoadInteger(udg_hash, h, 2);
	boolean first = LoadBoolean(udg_hash, h, 3);
	integer lvl = GetUnitAbilityLevel(hero, 'A0M8');
	integer newdamage = R2I(GetUnitState(hero, UNIT_STATE_MAX_LIFE) * .01 * lvl);
	if (first) {
		SaveBoolean(udg_hash, h, 3, first);
		TimerStart(t, 1., true, Trig_Light_Hammer_Periodic_Actions);
	}
	if (damage != newdamage) {
		SetAttackAbilityLevel(hero, -damage);
		SetAttackAbilityLevel(hero, newdamage);
		SaveInteger(udg_hash, h, 2, newdamage);
	}
}
nothing Trig_Light_Hammer_Actions() {
	unit hero = GetLearningUnit();
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	integer damage = 0;
	boolean first = true;
	SaveUnitHandle(udg_hash, h, 1, hero);
	SaveInteger(udg_hash, h, 2, damage);
	SaveBoolean(udg_hash, h, 3, first);
	TimerStart(t, .0, false, Trig_Light_Hammer_Periodic_Actions);
	AddProgressBar(hero, 235. + (3.), (.9 + .05), 1., true, false, 'v', $F8, $9A, 0);
}
boolean Trig_Light_Hammer_Conditions() {
	return GetLearnedSkill() == 'A0M8' && GetUnitAbilityLevel(GetLearningUnit(), 'A0M8') == 1 && GetUnitTypeId(GetLearningUnit()) != 'h00U';
}
nothing InitTrig_Light_Hammer() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Light_Hammer, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Light_Hammer, Condition(Trig_Light_Hammer_Conditions));
	TriggerAddAction(gg_trg_Light_Hammer, Trig_Light_Hammer_Actions);
}
nothing Trig_God_Hand_Remove_Bonus_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit target = LoadUnitHandle(udg_hash, h, 1);
	integer regen = LoadInteger(udg_hash, h, 2);
	effect ef = LoadEffectHandle(udg_hash, h, 3);
	integer stage = LoadInteger(udg_hash, h, 4);
	if (stage == 0) {
		SaveReal(udg_hash, GetHandleId(target), 't', .0);
		SetUnitLifeAndManaRegeneration(target, "life", -regen);
		DestroyEffect(AddSpecialEffectTarget("Effects\\DivineRage.mdl", target, "origin"));
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	else
		DestroyEffect(ef);
		SaveInteger(udg_hash, h, 4, 0);
		TimerStart(t, 4.5, false, Trig_God_Hand_Remove_Bonus_Actions);
	}
}
nothing Trig_God_Hand_periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	unit target = LoadUnitHandle(udg_hash, h, 2);
	real heal;
	real mana;
	integer wait = LoadInteger(udg_hash, h, 5);
	integer delay = LoadInteger(udg_hash, h, 6);
	real hpc = GetUnitState(caster, UNIT_STATE_LIFE);
	real hpt = GetUnitState(target, UNIT_STATE_LIFE);
	boolean alife;
	integer regen;
	integer order = GetUnitCurrentOrder(caster);
	integer orderId;
	timer tbonus;
	integer hbonus;
	effect ef;
	if ((orderId != 0)) {
	else
		if ((orderId != 0)) {
		}
	}
	if (hpc > .405 && hpt > .405) {
	else
	}
	if (order == orderId && wait > 0 && alife) {
		SaveInteger(udg_hash, h, 5, wait);
	else
		if (wait == 0 && delay == $A && alife) {
			DestroyEffect(AddSpecialEffectTarget("Effects\\HolyAwakening.mdl", target, "origin"));
		}
		if (wait <= 0 && delay > 0 && alife) {
			SaveInteger(udg_hash, h, 6, delay);
		}
		if (wait == 0 && delay == 0 && (hpt > .405)) {
			SetUnitState(target, UNIT_STATE_LIFE, GetUnitState(target, UNIT_STATE_LIFE) + heal);
			SetUnitState(target, UNIT_STATE_MANA, GetUnitState(target, UNIT_STATE_MANA) + mana);
			DestroyEffect(AddSpecialEffectTarget("Effects\\MegaHeal.mdx", target, "origin"));
			DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", target, "origin"), 2.);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIma\\AImaTarget.mdl", target, "origin"));
			SetUnitLifeAndManaRegeneration(target, "life", regen);
			SaveUnitHandle(udg_hash, hbonus, 1, target);
			SaveInteger(udg_hash, hbonus, 2, regen);
			SaveEffectHandle(udg_hash, hbonus, 3, ef);
			SaveInteger(udg_hash, hbonus, 4, 1);
			TimerStart(tbonus, 2.5, false, Trig_God_Hand_Remove_Bonus_Actions);
		}
		if ((order != orderId && wait > 0) || (wait <= 0 && delay <= 0)) {
			RemoveUnit(LoadUnitHandle(udg_hash, GetHandleId(caster), 'u'));
			FlushChildHashtable(udg_hash, h);
			DestroyTimer(t);
		}
	}
}
nothing Trig_God_Hand_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	integer lvl = GetUnitAbilityLevel(caster, 'A0MA');
	real heal = (GetUnitState(target, UNIT_STATE_MAX_LIFE) * (.1 + (.1 * lvl))) + (100. + (125. * lvl));
	real mana = (GetUnitState(target, UNIT_STATE_MAX_MANA) * (.1 + (.1 * lvl))) + (50. + (75. * lvl));
	integer regen;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	integer wait = 70 - (lvl * $A);
	integer delay = $A;
	real fastresp = .05 + (.15 * lvl);
	integer hcaster = GetHandleId(caster);
	effect hammeref;
	if (IsUnitType(target, UNIT_TYPE_HERO)) {
	else
	}
	if (GetRandomInt(1, 'd') <= (6 + (GetUnitAbilityLevel(caster, 'A0M8') * 4)) && GetUnitAbilityLevel(caster, 'A0M8') > 0 && LoadBoolean(udg_hash, hcaster, 'q') == false) {
		SaveReal(udg_hash, hcaster, 'p', .0);
		SaveBoolean(udg_hash, hcaster, 'q', true);
		SaveEffectHandle(udg_hash, hcaster, 'r', hammeref);
		SaveEffectHandle(udg_hash, hcaster, 's', hammeref);
	}
	SaveReal(udg_hash, GetHandleId(target), 't', fastresp);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveUnitHandle(udg_hash, h, 2, target);
	SaveReal(udg_hash, h, 3, heal);
	SaveReal(udg_hash, h, 4, mana);
	SaveInteger(udg_hash, h, 5, wait);
	SaveInteger(udg_hash, h, 6, delay);
	SaveInteger(udg_hash, h, 7, regen);
	DestroyEffect(AddSpecialEffectTarget("Effects\\Consecrate.mdl", caster, "origin"));
	DestroyEffect(AddSpecialEffectTarget("Effects\\Consecrate.mdl", target, "origin"));
	TimerStart(t, .05, true, Trig_God_Hand_periodic_Actions);
	AddProgressBar(caster, 185. + (3. * lvl), (.9 + .1 * lvl), (wait * .05), false, true, 'u', $F8, $9A, 0);
}
boolean Trig_God_Hand_Conditions() {
	return GetSpellAbilityId() == 'A0MA';
}
nothing InitTrig_God_Hand() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_God_Hand, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_God_Hand, Condition(Trig_God_Hand_Conditions));
	TriggerAddAction(gg_trg_God_Hand, Trig_God_Hand_Actions);
}
nothing Trig_Stone_Guard_Load_Actions() {
	AbilityPreload('A0MI', 6);
	AbilityPreload('A0ML', 6);
	AbilityPreload('A0MK', 6);
	AbilityPreload('A0MM', 3);
	AbilityPreload('A0MJ', 6);
	AbilityPreload('B04I', 1);
	AbilityPreload('B04J', 1);
	EffectPreload("Effects\\Stone Shield.mdx");
	EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl");
	EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodMortarTeam.mdl");
	EffectPreload("Effects\\RockV4.mdl");
	EffectPreload("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl");
	EffectPreload("Effects\\StoneSmall.mdl");
	EffectPreload("Abilities\\Weapons\\CannonTowerMissile\\CannonTowerMissile.mdl");
	EffectPreload("Effects\\Stonespear.mdl");
	EffectPreload("Abilities\\Spells\\Other\\Volcano\\VolcanoDeath.mdl");
	EffectPreload("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl");
	EffectPreload("Abilities\\Spells\\Orc\\EarthQuake\\EarthQuakeTarget.mdl");
	EnableTrigger(gg_trg_Boulder_Throw);
	EnableTrigger(gg_trg_Earth_Shiver);
	EnableTrigger(gg_trg_Learn_Stone_Armor);
	EnableTrigger(gg_trg_Rock_Strike);
}
nothing InitTrig_Stone_Guard_Load() {
	TriggerAddAction(gg_trg_Stone_Guard_Load, Trig_Stone_Guard_Load_Actions);
}
nothing Trig_Boulder_Throw_Move_Dest_Actions() {
	KillDestructable(GetEnumDestructable());
}
nothing Trig_Boulder_Throw_Move_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	real damage;
	real damage2;
	integer wait = LoadInteger(udg_hash, h, 4);
	real angle;
	unit stone;
	effect ef;
	integer anim = LoadInteger(udg_hash, h, 8);
	integer wait2 = LoadInteger(udg_hash, h, 9);
	real xt;
	real yt;
	integer lvl;
	real bangle;
	real speed;
	player p;
	group g;
	unit Picked;
	unit dammi;
	array<unit> boulder;
	integer i;
	real dist;
	unit dammief;
	rect r;
	if (wait > 0 && (wait2 == 33)) {
		SaveInteger(udg_hash, h, 4, wait);
		if (anim >= $AA) {
		}
		SaveInteger(udg_hash, h, 8, anim);
		SetUnitFacing(stone, GetUnitFacing(stone) + 30.);
		SetUnitAnimationByIndex(stone, anim);
		if (wait == 0 && wait2 == 33) {
			GroupEnumUnitsInRange(g, xt, yt, 250., null);
			SetUnitFlyHeight(dammief, 40., .0);
			SetUnitScale(dammief, 2., 2., 2.);
			UnitApplyTimedLife(dammief, 'BTLF', 2.);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", dammief, "chest"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\CannonTowerMissile\\CannonTowerMissile.mdl", dammief, "chest"));
			EnumDestructablesInRect(r, null, Trig_Boulder_Throw_Move_Dest_Actions);
			while (true) {
				if (Picked == null) break;
				if (IsUnitEnemy(Picked, p) && Picked != null && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", Picked, "chest"));
					UnitApplyTimedLife(dammi, 'BTLF', 1.);
					UnitAddAbility(dammi, 'A0MJ');
					SetUnitAbilityLevel(dammi, 'A0MJ', lvl);
					IssueTargetOrderById(dammi, $D006B, Picked);
					UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
					MoveUnit(Picked, .4, 500. - dist, 625., angle, .0, false);
				}
				GroupRemoveUnit(g, Picked);
			}
			RemoveUnit(stone);
			DestroyEffect(ef);
			GroupClear(g);
			DestroyGroup(g);
			RemoveRect(r);
		}
	}
	if (wait2 > 0 && wait <= 0) {
		SaveInteger(udg_hash, h, 9, wait2);
		if (anim >= $AA) {
		}
		SaveInteger(udg_hash, h, 8, anim);
		if (wait2 == 32) {
			while (true) {
				if (i >= $B) break;
				if (i >= 1 && i <= 7) {
				}
				if (i >= 8 && i <= $A) {
				}
				SetUnitScale(boulder[i], 1.5, 1.5, 1.5);
				UnitAddAbility(boulder[i], 'Amrf');
				UnitRemoveAbility(boulder[i], 'Amrf');
				MoveUnit(boulder[i], 1., speed, .0, bangle, 500., true);
				SaveUnitHandle(udg_hash, h, $F + i, boulder[i]);
				SaveEffectHandle(udg_hash, h, 30 + i, ef);
			}
		}
		while (true) {
			if (i >= $B) break;
			SetUnitFacing(boulder[i], GetUnitFacing(boulder[i]) + 30.);
		}
		if (wait2 <= 0) {
			while (true) {
				if (i >= $B) break;
				DestroyEffect(ef);
				DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", GetUnitX(boulder[i]), GetUnitY(boulder[i])));
				RemoveUnit(boulder[i]);
			}
			GroupEnumUnitsInRange(g, xt, yt, 250., null);
			EnumDestructablesInRect(r, null, Trig_Boulder_Throw_Move_Dest_Actions);
			while (true) {
				if (Picked == null) break;
				if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", Picked, "chest"));
					UnitDamageTarget(caster, Picked, damage2, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
					StunUnitTimed(Picked, .5);
				}
				GroupRemoveUnit(g, Picked);
			}
			GroupClear(g);
			DestroyGroup(g);
			RemoveRect(r);
			FlushChildHashtable(udg_hash, h);
			DestroyTimer(t);
		}
	}
}
nothing Trig_Boulder_Throw_Actions() {
	unit caster = GetSpellAbilityUnit();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	location loc = GetSpellTargetLoc();
	real xt = GetLocationX(loc);
	real yt = GetLocationY(loc);
	real angle = bj_RADTODEG * Atan2((yt - y), (xt - x));
	real dist = SquareRoot(((xt - x) * (xt - x)) + ((yt - y) * (yt - y)));
	integer lvl = GetUnitAbilityLevel(caster, 'A0MI');
	real damage = (35. * lvl) + (GetHeroStr(caster, true) * (.3 + .2 * lvl));
	real damage2 = 20. * lvl;
	real time = dist / 800.;
	integer time2 = 33;
	real height = dist / 2;
	unit stone = CreateUnit(GetOwningPlayer(caster), 'h00E', x, y, angle);
	effect ef = AddSpecialEffectTarget("Effects\\RockV4.mdl", stone, "chest");
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	if (dist < 50.) {
	}
	SetUnitX(stone, x + 50. * Cos((angle - 30.) * bj_DEGTORAD));
	SetUnitY(stone, y + 50. * Sin((angle - 30.) * bj_DEGTORAD));
	SetUnitScale(stone, 1.7, 1.7, 1.7);
	SetUnitFlyHeight(stone, 40., .0);
	MoveUnit(stone, time, 800., .0, angle, height, true);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 3, damage);
	SaveInteger(udg_hash, h, 4, R2I(time / .03));
	SaveReal(udg_hash, h, 5, angle);
	SaveUnitHandle(udg_hash, h, 6, stone);
	SaveEffectHandle(udg_hash, h, 7, ef);
	SaveInteger(udg_hash, h, 8, 1);
	SaveInteger(udg_hash, h, 9, time2);
	SaveReal(udg_hash, h, $A, damage2);
	SaveReal(udg_hash, h, $B, xt);
	SaveReal(udg_hash, h, $C, yt);
	TimerStart(t, .03, true, Trig_Boulder_Throw_Move_Actions);
	RemoveLocation(loc);
}
boolean Trig_Boulder_Throw_Conditions() {
	return GetSpellAbilityId() == 'A0MI';
}
nothing InitTrig_Boulder_Throw() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Boulder_Throw, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Boulder_Throw, Condition(Trig_Boulder_Throw_Conditions));
	TriggerAddAction(gg_trg_Boulder_Throw, Trig_Boulder_Throw_Actions);
}
nothing Trig_Boulder_Earth_Shiver_Dest_Actions() {
	KillDestructable(GetEnumDestructable());
}
nothing Trig_Boulder_Earth_Shiver_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	group gdamage = LoadGroupHandle(udg_hash, h, 2);
	real damage = LoadReal(udg_hash, h, 3);
	real xt = LoadReal(udg_hash, h, 4);
	real yt = LoadReal(udg_hash, h, 5);
	unit dammief = LoadUnitHandle(udg_hash, h, 6);
	unit Picked;
	rect r = Rect(xt - 325., yt - 325., xt + 325., yt + 325.);
	EnumDestructablesInRect(r, null, Trig_Boulder_Earth_Shiver_Dest_Actions);
	while (true) {
		if (Picked == null) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", Picked, "chest"));
			UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
		}
		GroupRemoveUnit(gdamage, Picked);
	}
	RemoveUnit(dammief);
	GroupClear(gdamage);
	DestroyGroup(gdamage);
	RemoveRect(r);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_Earth_Shiver_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	location loc = GetSpellTargetLoc();
	real xt = GetLocationX(loc);
	real yt = GetLocationY(loc);
	integer lvl = GetUnitAbilityLevel(caster, 'A0ML');
	real damage = ((30. * lvl) + GetUnitState(caster, UNIT_STATE_MAX_LIFE) * (.01 + .01 * lvl)) / 2;
	real time = 1.;
	real stuntime = time + .5;
	real height = 350.;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	group g = CreateGroup();
	group gdamage = CreateGroup();
	unit Picked;
	rect r = Rect(xt - 325., yt - 325., xt + 325., yt + 325.);
	unit dammief = CreateUnit(p, 'h00U', xt, yt, .0);
	SetUnitScale(dammief, 2., 2., 2.);
	DestroyEffect(AddSpecialEffectTarget("Effects\\Stonespear.mdl", dammief, "origin"));
	EnumDestructablesInRect(r, null, Trig_Boulder_Earth_Shiver_Dest_Actions);
	GroupEnumUnitsInRange(g, xt, yt, 325., null);
	while (true) {
		if (Picked == null) break;
		if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			DestroyEffect(AddSpecialEffect("Effects\\Stonespear.mdl", GetUnitX(Picked), GetUnitY(Picked)));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", Picked, "chest"));
			StunUnitTimed(Picked, stuntime);
			UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			MoveUnit(Picked, time, .0, .0, .0, height, false);
			GroupAddUnit(gdamage, Picked);
		}
		GroupRemoveUnit(g, Picked);
	}
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveGroupHandle(udg_hash, h, 2, gdamage);
	SaveReal(udg_hash, h, 3, damage);
	SaveReal(udg_hash, h, 4, xt);
	SaveReal(udg_hash, h, 5, yt);
	SaveUnitHandle(udg_hash, h, 6, dammief);
	TimerStart(t, time, false, Trig_Boulder_Earth_Shiver_Actions);
	RemoveLocation(loc);
	RemoveRect(r);
	GroupClear(g);
	DestroyGroup(g);
}
boolean Trig_Earth_Shiver_Conditions() {
	return GetSpellAbilityId() == 'A0ML';
}
nothing InitTrig_Earth_Shiver() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Earth_Shiver, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Earth_Shiver, Condition(Trig_Earth_Shiver_Conditions));
	TriggerAddAction(gg_trg_Earth_Shiver, Trig_Earth_Shiver_Actions);
}
nothing Trig_Learn_Stone_Armor_Actions() {
	unit u = GetLearningUnit();
	if (GetUnitAbilityLevel(u, 'A0MK') == 1) {
		SetArmorAbilityLevel(u, 3);
	else
		SetArmorAbilityLevel(u, 2);
	}
}
boolean Trig_Learn_Stone_Armor_Conditions() {
	return GetLearnedSkill() == 'A0MK' && GetUnitTypeId(GetLearningUnit()) != 'h00U';
}
nothing InitTrig_Learn_Stone_Armor() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Stone_Armor, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Learn_Stone_Armor, Condition(Trig_Learn_Stone_Armor_Conditions));
	TriggerAddAction(gg_trg_Learn_Stone_Armor, Trig_Learn_Stone_Armor_Actions);
}
nothing Trig_Rock_Strike_Move_Dest_Actions() {
	KillDestructable(GetEnumDestructable());
}
nothing Trig_Rock_Strike_Move_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	group gdamage = LoadGroupHandle(udg_hash, h, 2);
	integer wait = LoadInteger(udg_hash, h, 3);
	integer wait2 = LoadInteger(udg_hash, h, 4);
	integer anim = LoadInteger(udg_hash, h, 6);
	real damage;
	real damage2;
	real angle;
	real angle2;
	real angle3;
	unit stone;
	effect ef;
	real x;
	real y;
	real xt;
	real yt;
	player p;
	group g;
	unit Picked;
	real dist;
	unit dammief;
	rect r;
	real stuntime;
	if (wait > 0 && (wait2 == 44) && GetUnitState(caster, UNIT_STATE_LIFE) > .405) {
		SaveInteger(udg_hash, h, 3, wait);
		if (wait == 0 && wait2 == 44) {
			GroupEnumUnitsInRange(g, xt, yt, 175., null);
			SetUnitTimeScale(caster, 1.);
			SetUnitScale(dammief, 1.3, 1.3, 1.3);
			UnitApplyTimedLife(dammief, 'BTLF', 4.);
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", xt, yt));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", dammief, "chest"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\CannonTowerMissile\\CannonTowerMissile.mdl", dammief, "chest"));
			DestroyEffectWithWait(AddSpecialEffect("Abilities\\Spells\\Orc\\EarthQuake\\EarthQuakeTarget.mdl", xt, yt), 2.);
			EnumDestructablesInRect(r, null, Trig_Rock_Strike_Move_Dest_Actions);
			while (true) {
				if (Picked == null) break;
				if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", Picked, "chest"));
					UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
					StunUnitTimed(Picked, stuntime);
					MoveUnit(Picked, .5, (600. - (dist * 1.5)) / 2, 100., angle, .0, true);
				}
				GroupRemoveUnit(g, Picked);
			}
			SaveUnitHandle(udg_hash, h, $D, stone);
			SaveEffectHandle(udg_hash, h, $E, ef);
			SetUnitScale(stone, 2.2, 2.2, 2.2);
			SetUnitFlyHeight(stone, 50., .0);
			MoveUnit(stone, 1.32, 800., .0, angle, .0, true);
			GroupClear(g);
			DestroyGroup(g);
			RemoveRect(r);
		}
	}
	if (wait2 > 0 && wait <= 0) {
		SaveInteger(udg_hash, h, 4, wait2);
		if (anim >= $AA) {
		}
		SetUnitAnimationByIndex(stone, anim);
		SaveInteger(udg_hash, h, 6, anim);
		GroupEnumUnitsInRange(g, x, y, 175., null);
		DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", x, y));
		EnumDestructablesInRect(r, null, Trig_Rock_Strike_Move_Dest_Actions);
		while (true) {
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && IsUnitInGroup(Picked, gdamage) == false && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", Picked, "chest"));
				UnitDamageTarget(caster, Picked, damage2, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				StunUnitTimed(Picked, stuntime);
				if ((angle3 <= (angle + 210.) && angle3 >= (angle + 180.))) {
				}
				if ((angle3 <= (angle + 180.) && angle3 >= (angle + 150.))) {
				}
				MoveUnit(Picked, .5, (700. - dist), 100., angle2, .0, true);
				GroupAddUnit(gdamage, Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
		GroupClear(g);
		DestroyGroup(g);
		RemoveRect(r);
		SaveGroupHandle(udg_hash, h, 2, gdamage);
		if (wait2 <= 0) {
			DestroyEffect(ef);
			DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", x, y));
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Volcano\\VolcanoDeath.mdl", x, y));
			RemoveUnit(stone);
			FlushChildHashtable(udg_hash, h);
			DestroyTimer(t);
		}
		GroupClear(g);
		DestroyGroup(g);
		RemoveRect(r);
	}
}
nothing Trig_Rock_Strike_Actions() {
	unit caster = GetSpellAbilityUnit();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	location loc;
	real xt;
	real yt;
	unit target = GetSpellTargetUnit();
	real angle;
	real dist;
	integer lvl = GetUnitAbilityLevel(caster, 'A0MM');
	real damage = (5. + 135. * lvl);
	real damage2 = (15. + 115. * lvl);
	real stuntime = .75 + (.25 * lvl);
	integer wait = 6;
	integer wait2 = 44;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	group gdamage = CreateGroup();
	if (target != null) {
	else
		RemoveLocation(loc);
	}
	SetUnitTimeScale(caster, 2.);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveGroupHandle(udg_hash, h, 2, gdamage);
	SaveInteger(udg_hash, h, 3, wait);
	SaveInteger(udg_hash, h, 4, wait2);
	SaveReal(udg_hash, h, 5, angle);
	SaveInteger(udg_hash, h, 6, 0);
	SaveInteger(udg_hash, h, 8, 1);
	SaveReal(udg_hash, h, 9, damage);
	SaveReal(udg_hash, h, $A, damage2);
	SaveReal(udg_hash, h, $B, xt);
	SaveReal(udg_hash, h, $C, yt);
	SaveReal(udg_hash, h, $F, stuntime);
	TimerStart(t, .03, true, Trig_Rock_Strike_Move_Actions);
}
boolean Trig_Rock_Strike_Conditions() {
	return GetSpellAbilityId() == 'A0MM';
}
nothing InitTrig_Rock_Strike() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Rock_Strike, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Rock_Strike, Condition(Trig_Rock_Strike_Conditions));
	TriggerAddAction(gg_trg_Rock_Strike, Trig_Rock_Strike_Actions);
}
nothing Trig_Archdruid_Load_Actions() {
	AbilityPreload('A0MN', 6);
	AbilityPreload('A0MP', 6);
	AbilityPreload('A0MQ', 6);
	AbilityPreload('A0MS', 3);
	AbilityPreload('A0MT', 3);
	AbilityPreload('A0MO', 1);
	AbilityPreload('A0MR', 6);
	AbilityPreload('B04M', 1);
	AbilityPreload('B04K', 1);
	AbilityPreload('B04L', 1);
	UnitPreload('e006');
	EffectPreload("Abilities\\Spells\\NightElf\\EntanglingRoots\\EntanglingRootsTarget.mdl");
	EffectPreload("Effects\\Earth_Attach.mdx");
	EffectPreload("Abilities\\Spells\\Other\\Drain\\DrainTarget.mdl");
	EffectPreload("Effects\\Power_Orb.mdl");
	EffectPreload("Effects\\Healing Touch.mdl");
	EffectPreload("Effects\\SoulshotC-gradeTarget.mdl");
	EffectPreload("Effects\\naturebeam.mdl");
	EffectPreload("Effects\\AncientExplode.mdx");
	EffectPreload("Effects\\NatureBlessing.mdl");
	EffectPreload("Effects\\LifeWave.mdl");
	EffectPreload("Abilities\\Weapons\\GreenDragonMissile\\GreenDragonMissile.mdl");
	EffectPreload("Effects\\PlasmaMissileGreen.mdl");
	EffectPreload("Effects\\GreenHeal.mdl");
	EffectPreload("Abilities\\Spells\\NightElf\\Tranquility\\Tranquility.mdl");
	EffectPreload("Effects\\EarthNova.mdl");
	EnableTrigger(gg_trg_Energy_of_Nature);
	EnableTrigger(gg_trg_Life_Chain);
	EnableTrigger(gg_trg_Ent_Creation);
	EnableTrigger(gg_trg_Nature_Wrath);
}
nothing InitTrig_Archdruid_Load() {
	TriggerAddAction(gg_trg_Archdruid_Load, Trig_Archdruid_Load_Actions);
}
nothing Trig_Energy_of_Nature_Move_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	real damage;
	real heal;
	integer wait = LoadInteger(udg_hash, h, 4);
	unit orb = LoadUnitHandle(udg_hash, h, 6);
	effect ef;
	real xt;
	real yt;
	player p;
	group g;
	unit Picked;
	unit dammi;
	if (wait > 0) {
		SaveInteger(udg_hash, h, 4, wait);
	else
		GroupEnumUnitsInRange(g, xt, yt, 270., null);
		DestroyEffect(AddSpecialEffect("Effects\\AncientExplode.mdx", xt, yt));
		while (true) {
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				DestroyEffect(AddSpecialEffectTarget("Effects\\SoulshotC-gradeTarget.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Effects\\naturebeam.mdl", Picked, "chest"));
				UnitApplyTimedLife(dammi, 'BTLF', 1.);
				UnitAddAbility(dammi, 'A0MO');
				IssueTargetOrderById(dammi, $D00CB, Picked);
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			}
			if (IsUnitAlly(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				DestroyEffect(AddSpecialEffectTarget("Effects\\Healing Touch.mdl", Picked, "origin"));
				SetUnitState(Picked, UNIT_STATE_LIFE, GetUnitState(Picked, UNIT_STATE_LIFE) + heal);
			}
			GroupRemoveUnit(g, Picked);
		}
		SetUnitScale(orb, .1, .1, .1);
		KillUnit(orb);
		ShowUnit(orb, false);
		DestroyEffect(ef);
		GroupClear(g);
		DestroyGroup(g);
		DestroyTimer(t);
		FlushChildHashtable(udg_hash, h);
	}
}
nothing Trig_Energy_of_Nature_Actions() {
	unit caster = GetSpellAbilityUnit();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	location loc = GetSpellTargetLoc();
	real xt = GetLocationX(loc);
	real yt = GetLocationY(loc);
	real angle = bj_RADTODEG * Atan2((yt - y), (xt - x));
	real dist = SquareRoot(((xt - x) * (xt - x)) + ((yt - y) * (yt - y)));
	integer lvl = GetUnitAbilityLevel(caster, 'A0MN');
	real damage = ($A + 25 * lvl) + (GetHeroInt(caster, true) * (.2 + .3 * lvl));
	real heal = (75. + 50 * lvl);
	real time = dist / 600.;
	real height = dist / 4 + 75.;
	unit orb = CreateUnit(GetOwningPlayer(caster), 'h00E', x, y, angle);
	effect ef = AddSpecialEffectTarget("Effects\\Power_Orb.mdl", orb, "origin");
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	if (dist < 50.) {
	}
	SetUnitX(orb, x + 50. * Cos((angle) * bj_DEGTORAD));
	SetUnitY(orb, y + 50. * Sin((angle) * bj_DEGTORAD));
	SetUnitTimeScale(orb, 1.5);
	SetUnitFlyHeight(orb, 100., .0);
	MoveUnit(orb, time, 600., .0, angle, height, true);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 2, damage);
	SaveReal(udg_hash, h, 3, heal);
	SaveInteger(udg_hash, h, 4, R2I(time / .03));
	SaveUnitHandle(udg_hash, h, 6, orb);
	SaveEffectHandle(udg_hash, h, 7, ef);
	SaveReal(udg_hash, h, $B, xt);
	SaveReal(udg_hash, h, $C, yt);
	TimerStart(t, .03, true, Trig_Energy_of_Nature_Move_Actions);
	RemoveLocation(loc);
}
boolean Trig_Energy_of_Nature_Conditions() {
	return GetSpellAbilityId() == 'A0MN';
}
nothing InitTrig_Energy_of_Nature() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Energy_of_Nature, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Energy_of_Nature, Condition(Trig_Energy_of_Nature_Conditions));
	TriggerAddAction(gg_trg_Energy_of_Nature, Trig_Energy_of_Nature_Actions);
}
nothing Trig_Life_Chain_Remove_Effect_Actions() {
	timer tef = GetExpiredTimer();
	integer hef = GetHandleId(tef);
	effect ef = LoadEffectHandle(udg_hash, hef, 1);
	unit target = LoadUnitHandle(udg_hash, hef, 2);
	integer regen = LoadInteger(udg_hash, hef, 3);
	SetUnitLifeAndManaRegeneration(target, "life", -regen);
	FlushChildHashtable(udg_hash, hef);
	DestroyEffect(ef);
}
nothing Trig_Life_Chain_Move_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	unit target = LoadUnitHandle(udg_hash, h, 8);
	integer wait2 = LoadInteger(udg_hash, h, 4);
	integer count = LoadInteger(udg_hash, h, 5);
	unit orb = LoadUnitHandle(udg_hash, h, 6);
	unit target2;
	real damage;
	real heal;
	group gdamage;
	real height;
	effect ef;
	real x = GetUnitX(orb);
	real y = GetUnitY(orb);
	real xt = GetUnitX(target);
	real yt = GetUnitY(target);
	real xorb;
	real yorb;
	real angle = bj_RADTODEG * Atan2((yt - y), (xt - x));
	real dist = SquareRoot(((xt - x) * (xt - x)) + ((yt - y) * (yt - y)));
	player p;
	group g;
	group grup;
	unit Picked;
	timer tef;
	integer hef;
	integer regen;
	boolean remove = false;
	boolean reselect = false;
	unit orb2;
	effect ef2;
	if (GetUnitState(target, UNIT_STATE_LIFE) > .405) {
		SaveInteger(udg_hash, h, 4, wait2);
		SetUnitPosition(orb, xorb, yorb);
		SetUnitFacing(orb, angle);
		if (dist < 21.) {
			SetUnitPosition(orb, xt, yt);
			if (IsUnitEnemy(target, p) && IsUnitInGroup(target, gdamage) == false && GetUnitState(target, UNIT_STATE_LIFE) > .0 && IsUnitType(target, UNIT_TYPE_STRUCTURE) == false && IsUnitType(target, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(target) != 'h00U') {
				DestroyEffect(AddSpecialEffectTarget("Effects\\SoulshotC-gradeTarget.mdl", target, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Effects\\naturebeam.mdl", target, "chest"));
				UnitDamageTarget(caster, target, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				GroupAddUnit(gdamage, target);
				if (GetUnitState(target, UNIT_STATE_LIFE) < .5) {
					SaveInteger(udg_hash, h, 5, count);
				}
			}
			if (IsUnitAlly(target, p) && IsUnitInGroup(target, gdamage) == false && GetUnitState(target, UNIT_STATE_LIFE) > .0 && IsUnitType(target, UNIT_TYPE_STRUCTURE) == false && IsUnitType(target, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(target) != 'h00U') {
				DestroyEffect(AddSpecialEffectTarget("Effects\\Healing Touch.mdl", target, "origin"));
				SetUnitState(target, UNIT_STATE_LIFE, GetUnitState(target, UNIT_STATE_LIFE) + heal);
				SaveEffectHandle(udg_hash, hef, 1, ef);
				SaveUnitHandle(udg_hash, hef, 2, target);
				SaveInteger(udg_hash, hef, 3, regen);
				SetUnitLifeAndManaRegeneration(target, "life", regen);
				TimerStart(tef, 8., false, Trig_Life_Chain_Remove_Effect_Actions);
				GroupAddUnit(gdamage, target);
			}
			SaveGroupHandle(udg_hash, h, $E, gdamage);
			SaveInteger(udg_hash, h, 5, count);
		}
	}
	if ((count > 0 && GetUnitState(target, UNIT_STATE_LIFE) < .405) || reselect) {
		GroupEnumUnitsInRange(g, xt, yt, 600., null);
		while (true) {
			if (Picked == null) break;
			if (IsUnitInGroup(Picked, gdamage) == false && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				GroupAddUnit(grup, Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
		RandomUnitFromGroup(1, grup);
		GroupAddGroup(udg_GroupRandomUnitFromGroup, g);
		if (target2 != null) {
			KillUnit(orb);
			DestroyEffect(ef);
			SetUnitFlyHeight(orb2, 60., .0);
			SaveUnitHandle(udg_hash, h, 6, orb2);
			SaveEffectHandle(udg_hash, h, 7, ef2);
			SaveInteger(udg_hash, h, 4, R2I((dist / (1000. * 2))));
			SaveUnitHandle(udg_hash, h, 8, target2);
			SaveReal(udg_hash, h, 9, (dist / 3));
			SaveInteger(udg_hash, h, $A, R2I((dist / 2000.)));
		else
		}
		GroupClear(g);
		DestroyGroup(g);
		GroupClear(grup);
		DestroyGroup(grup);
	}
	if (count <= 0) {
	}
	if (remove) {
		KillUnit(orb);
		DestroyEffect(ef);
		GroupClear(g);
		DestroyGroup(g);
		DestroyTimer(t);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
}
nothing Trig_Life_Chain_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	unit target = GetSpellTargetUnit();
	real xt = GetUnitX(target);
	real yt = GetUnitY(target);
	real angle = bj_RADTODEG * Atan2((yt - y), (xt - x));
	real dist = SquareRoot(((xt - x) * (xt - x)) + ((yt - y) * (yt - y)));
	integer lvl = GetUnitAbilityLevel(caster, 'A0MP');
	real damage = ($F + $F * lvl) + (GetHeroInt(caster, true) * (.1 + .1 * lvl));
	real heal = (30 + 30 * lvl) + (GetHeroInt(caster, true) * (.2 + .2 * lvl));
	integer regen = (2 + 3 * lvl);
	real speed = 1000.;
	real time = dist / speed;
	real height = dist / 3;
	integer count = 3 + (lvl * 3);
	integer wait2 = R2I((time / 2));
	unit orb = CreateUnit(p, 'h00E', x, y, angle);
	effect ef = AddSpecialEffectTarget("Effects\\LifeWave.mdl", orb, "origin");
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	group gdamage = CreateGroup();
	SetUnitX(orb, x + 30. * Cos((angle) * bj_DEGTORAD));
	SetUnitY(orb, y + 30. * Sin((angle) * bj_DEGTORAD));
	SetUnitFlyHeight(orb, 60., .0);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 2, damage);
	SaveReal(udg_hash, h, 3, heal);
	SaveInteger(udg_hash, h, 4, wait2);
	SaveInteger(udg_hash, h, 5, count);
	SaveUnitHandle(udg_hash, h, 6, orb);
	SaveEffectHandle(udg_hash, h, 7, ef);
	SaveUnitHandle(udg_hash, h, 8, target);
	SaveReal(udg_hash, h, 9, height);
	SaveInteger(udg_hash, h, $D, regen);
	SaveGroupHandle(udg_hash, h, $E, gdamage);
	TimerStart(t, .03, true, Trig_Life_Chain_Move_Actions);
}
boolean Trig_Life_Chain_Conditions() {
	return GetSpellAbilityId() == 'A0MP';
}
nothing InitTrig_Life_Chain() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Life_Chain, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Life_Chain, Condition(Trig_Life_Chain_Conditions));
	TriggerAddAction(gg_trg_Life_Chain, Trig_Life_Chain_Actions);
}
nothing Trig_Ent_Creation_Move_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	unit target = LoadUnitHandle(udg_hash, h, 8);
	unit orb = LoadUnitHandle(udg_hash, h, 6);
	effect ef;
	real x = GetUnitX(orb);
	real y = GetUnitY(orb);
	real xt = GetUnitX(target);
	real yt = GetUnitY(target);
	real xorb;
	real yorb;
	real angle = bj_RADTODEG * Atan2((yt - y), (xt - x));
	real dist = SquareRoot(((xt - x) * (xt - x)) + ((yt - y) * (yt - y)));
	player p;
	integer hp;
	integer damage;
	real lifetime;
	integer lvl;
	unit dammi;
	SetUnitPosition(orb, xorb, yorb);
	SetUnitFacing(orb, angle);
	if (dist < 20.) {
		SetUnitPosition(orb, xt, yt);
		if (GetUnitState(target, UNIT_STATE_LIFE) > .0 && IsUnitType(target, UNIT_TYPE_STRUCTURE) == false && IsUnitType(target, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(target) != 'h00U') {
			DestroyEffect(AddSpecialEffectTarget("Effects\\SoulshotC-gradeTarget.mdl", target, "chest"));
			DestroyEffect(AddSpecialEffectTarget("Effects\\PlasmaMissileGreen.mdl", target, "chest"));
			UnitApplyTimedLife(dammi, 'BTLF', 1.);
			UnitAddAbility(dammi, 'A0MR');
			SetUnitAbilityLevel(dammi, 'A0MR', lvl);
			IssueTargetOrderById(dammi, $D006B, target);
		}
		UnitApplyTimedLife(dammi, 'BTLF', lifetime);
		SetUnitColor(dammi, PLAYER_COLOR_GREEN);
		SetUnitScale(dammi, (.75 + .05 * lvl), (.75 + .05 * lvl), (.75 + .05 * lvl));
		SetUnitMaxState(dammi, UNIT_STATE_MAX_LIFE, hp);
		SetAttackAbilityLevel(dammi, damage);
		KillUnit(orb);
		DestroyEffect(ef);
		DestroyTimer(t);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
}
nothing Trig_Ent_Creation_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	unit target = GetSpellTargetUnit();
	real xt = GetUnitX(target);
	real yt = GetUnitY(target);
	real angle = bj_RADTODEG * Atan2((yt - y), (xt - x));
	integer lvl = GetUnitAbilityLevel(caster, 'A0MQ');
	integer hp = (-75 + (75 * lvl)) + R2I(GetHeroInt(caster, true) * 2);
	integer damage = (-8 + (8 * lvl)) + R2I(GetHeroInt(caster, true) * .3);
	real lifetime = (12. + (3. * lvl)) + (GetUnitState(caster, UNIT_STATE_MAX_MANA) / 'd');
	unit orb = CreateUnit(p, 'h00E', x, y, angle);
	effect ef = AddSpecialEffectTarget("Abilities\\Weapons\\GreenDragonMissile\\GreenDragonMissile.mdl", orb, "origin");
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	SetUnitX(orb, x + 30. * Cos((angle) * bj_DEGTORAD));
	SetUnitY(orb, y + 30. * Sin((angle) * bj_DEGTORAD));
	SetUnitFlyHeight(orb, 60., .0);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveInteger(udg_hash, h, 2, hp);
	SaveInteger(udg_hash, h, 3, damage);
	SaveReal(udg_hash, h, 4, lifetime);
	SaveInteger(udg_hash, h, 5, lvl);
	SaveUnitHandle(udg_hash, h, 6, orb);
	SaveEffectHandle(udg_hash, h, 7, ef);
	SaveUnitHandle(udg_hash, h, 8, target);
	TimerStart(t, .03, true, Trig_Ent_Creation_Move_Actions);
}
boolean Trig_Ent_Creation_Conditions() {
	return GetSpellAbilityId() == 'A0MQ';
}
nothing InitTrig_Ent_Creation() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Ent_Creation, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Ent_Creation, Condition(Trig_Ent_Creation_Conditions));
	TriggerAddAction(gg_trg_Ent_Creation, Trig_Ent_Creation_Actions);
}
nothing Trig_Nature_Wrath_Periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	group gheal = LoadGroupHandle(udg_hash, h, 2);
	real damage = LoadReal(udg_hash, h, 3);
	integer addas = LoadInteger(udg_hash, h, 4);
	integer addarmor = LoadInteger(udg_hash, h, 5);
	integer addregen = LoadInteger(udg_hash, h, 6);
	integer addms = LoadInteger(udg_hash, h, 7);
	integer wait = LoadInteger(udg_hash, h, 9);
	integer wait2 = LoadInteger(udg_hash, h, $A);
	player p = GetOwningPlayer(caster);
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	group g = CreateGroup();
	group g2 = CreateGroup();
	group g3 = CreateGroup();
	unit Picked;
	unit dammi;
	effect ef;
	unit dammief;
	effect dammieffect;
	integer lopa = 0;
	integer lopb = 0;
	integer count;
	real angleef;
	real dist;
	integer dammicounter = $F;
	integer order = GetUnitCurrentOrder(caster);
	integer orderId;
	if ((orderId != 0)) {
	else
		if ((orderId != 0)) {
		}
	}
	if (wait > 0 && order == orderId) {
		if (wait2 == 26) {
			GroupEnumUnitsInRange(g, x, y, 700., null);
			DestroyEffect(AddSpecialEffect("Effects\\EarthNova.mdl", x, y));
			while (true) {
				if (Picked == null) break;
				if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
					DestroyEffect(AddSpecialEffectTarget("Effects\\SoulshotC-gradeTarget.mdl", Picked, "chest"));
					DestroyEffect(AddSpecialEffectTarget("Effects\\naturebeam.mdl", Picked, "chest"));
					UnitApplyTimedLife(dammi, 'BTLF', 1.);
					UnitAddAbility(dammi, 'A0MO');
					IssueTargetOrderById(dammi, $D00CB, Picked);
					UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				}
				GroupRemoveUnit(g, Picked);
			}
			GroupClear(g);
			DestroyGroup(g);
		}
		while (true) {
			if (lopa >= 4) break;
			while (true) {
				if (lopb > count) break;
				SetUnitPosition(dammief, x + dist * Cos(angleef * lopb * bj_DEGTORAD), y + dist * Sin(angleef * lopb * bj_DEGTORAD));
				SetUnitFacing(dammief, angleef + 90.);
			}
		}
		SaveInteger(udg_hash, h, 9, wait);
		SaveInteger(udg_hash, h, $A, wait2);
		GroupEnumUnitsInRange(g, x, y, 700., null);
		while (true) {
			if (Picked == null) break;
			if ((IsUnitAlly(Picked, p) || GetOwningPlayer(Picked) == Player($D)) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				GroupAddUnit(g2, Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
		GroupClear(g);
		DestroyGroup(g);
		GroupAddGroup(gheal, g3);
		while (true) {
			if (Picked == null) break;
			if (IsUnitInGroup(Picked, g2) == false) {
				GroupRemoveUnit(gheal, Picked);
				SetUnitLifeAndManaRegeneration(Picked, "life", -addregen);
				SetArmorAbilityLevel(Picked, -addarmor);
				SetAttackSpeedAbilityLevel(Picked, -addas);
			else
				if ((wait2 / 5) * 5 == wait2) {
					UnitApplyTimedLife(dammi, 'BTLF', 1.);
					UnitAddAbility(dammi, 'A0MT');
					SetUnitAbilityLevel(dammi, 'A0MT', addms);
					IssueTargetOrderById(dammi, $D0085, Picked);
				}
			}
			GroupRemoveUnit(g3, Picked);
		}
		GroupClear(g3);
		DestroyGroup(g3);
		while (true) {
			if (Picked == null) break;
			if (IsUnitInGroup(Picked, gheal) == false) {
				DestroyEffect(AddSpecialEffectTarget("Effects\\Healing Touch.mdl", Picked, "origin"));
				SetUnitLifeAndManaRegeneration(Picked, "life", addregen);
				SetArmorAbilityLevel(Picked, addarmor);
				SetAttackSpeedAbilityLevel(Picked, addas);
				GroupAddUnit(gheal, Picked);
			}
			if (GetUnitAbilityLevel(Picked, 'B04M') <= 0) {
				UnitApplyTimedLife(dammi, 'BTLF', 1.);
				UnitAddAbility(dammi, 'A0MT');
				SetUnitAbilityLevel(dammi, 'A0MT', addms);
				IssueTargetOrderById(dammi, $D0085, Picked);
			}
			GroupRemoveUnit(g2, Picked);
		}
		GroupClear(g2);
		DestroyGroup(g2);
		SaveGroupHandle(udg_hash, h, 2, gheal);
	else
		DestroyEffect(ef);
		while (true) {
			if (Picked == null) break;
			SetUnitLifeAndManaRegeneration(Picked, "life", -addregen);
			SetArmorAbilityLevel(Picked, -addarmor);
			SetAttackSpeedAbilityLevel(Picked, -addas);
			GroupRemoveUnit(gheal, Picked);
		}
		GroupClear(gheal);
		DestroyGroup(gheal);
		while (true) {
			if (lopa > 4) break;
			while (true) {
				if (lopb > count) break;
				KillUnit(dammief);
				DestroyEffect(dammieffect);
			}
		}
		SetUnitTimeScale(caster, 1.);
		RemoveUnit(LoadUnitHandle(udg_hash, GetHandleId(caster), 'u'));
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	GroupClear(g);
	DestroyGroup(g);
	GroupClear(g2);
	DestroyGroup(g2);
	GroupClear(g3);
	DestroyGroup(g3);
}
nothing Trig_Nature_Wrath_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	integer lvl = GetUnitAbilityLevel(caster, 'A0MS');
	integer lvlup = GetUnitAbilityLevel(caster, 'A0Q2');
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	group gheal = CreateGroup();
	integer addas;
	integer addarmor;
	integer addregen;
	integer addms;
	real damage;
	integer wait = 80;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	unit dammief;
	effect dammieffect;
	integer lopa = 0;
	integer lopb = 0;
	integer count;
	real angleef;
	real dist;
	integer dammicounter = $F;
	effect ef = AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Tranquility\\Tranquility.mdl", caster, "origin");
	if (lvl > 0) {
		AddProgressBar(caster, 195. + (15. * lvl), (1. + .15 * lvl), (wait * .1), false, true, 'u', 0, $FF, 0);
	}
	if (lvlup > 0) {
		AddProgressBar(caster, 195. + (15. * lvlup), (1. + .15 * lvlup), (wait * .1), false, true, 'u', 0, $FF, 0);
	}
	while (true) {
		if (lopa >= 4) break;
		while (true) {
			if (lopb > count) break;
			SaveUnitHandle(udg_hash, h, dammicounter, dammief);
			SaveEffectHandle(udg_hash, h, dammicounter + 75, dammieffect);
		}
	}
	SetUnitTimeScale(caster, 1.05);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveGroupHandle(udg_hash, h, 2, gheal);
	SaveReal(udg_hash, h, 3, damage);
	SaveInteger(udg_hash, h, 4, addas);
	SaveInteger(udg_hash, h, 5, addarmor);
	SaveInteger(udg_hash, h, 6, addregen);
	SaveInteger(udg_hash, h, 7, addms);
	SaveInteger(udg_hash, h, 9, wait);
	SaveInteger(udg_hash, h, $A, 0);
	SaveEffectHandle(udg_hash, h, $B, ef);
	TimerStart(t, .1, true, Trig_Nature_Wrath_Periodic_Actions);
}
boolean Trig_Nature_Wrath_Conditions() {
	return (GetSpellAbilityId() == 'A0MS' || GetSpellAbilityId() == 'A0Q2');
}
nothing InitTrig_Nature_Wrath() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Nature_Wrath, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Nature_Wrath, Condition(Trig_Nature_Wrath_Conditions));
	TriggerAddAction(gg_trg_Nature_Wrath, Trig_Nature_Wrath_Actions);
}
nothing Trig_Falling_Star_Move_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 7);
	integer count = LoadInteger(udg_hash, h, 8);
	player p = GetOwningPlayer(caster);
	real damage;
	unit orb;
	real stuntime;
	effect ef;
	real xt;
	real yt;
	group g;
	unit Picked;
	real angle2;
	real dist;
	integer lopa = 1;
	integer horb;
	real knock;
	group gdamage = CreateGroup();
	while (true) {
		if (lopa > count) break;
		GroupEnumUnitsInRange(g, xt, yt, 220., null);
		DestroyEffect(AddSpecialEffect("Effects\\Nebula.mdl", xt, yt));
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl", xt, yt));
		while (true) {
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && IsUnitInGroup(Picked, gdamage) == false && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayDamage.mdl", Picked, "origin"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayTarget.mdl", Picked, "origin"));
				StunUnitTimed(Picked, stuntime);
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				MoveUnit(Picked, .5, ($E6 - dist) * 2.5 * knock, ($DC - dist) * 2. * knock, angle2, .0, true);
				GroupAddUnit(gdamage, Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
		KillUnit(orb);
		DestroyEffect(ef);
		GroupClear(g);
		DestroyGroup(g);
	}
	GroupClear(gdamage);
	DestroyGroup(gdamage);
	DestroyTimer(t);
	FlushChildHashtable(udg_hash, h);
}
nothing Trig_Falling_Star_Actions() {
	unit caster = GetSpellAbilityUnit();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	location loc = GetSpellTargetLoc();
	real xt = GetLocationX(loc);
	real yt = GetLocationY(loc);
	real angle = bj_RADTODEG * Atan2((yt - y), (xt - x));
	real dist = SquareRoot(((xt - x) * (xt - x)) + ((yt - y) * (yt - y)));
	integer lvl = GetUnitAbilityLevel(caster, 'A0NR');
	real damage = (40. * lvl) + (GetHeroAgi(caster, true) * (.25 + .25 * lvl));
	real stuntime = .6 + (.15 * lvl);
	player p = GetOwningPlayer(caster);
	unit orb;
	effect ef;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	integer lopa = 1;
	real angle2 = GetRandomReal(.0, 360.);
	boolean isultimate = LoadBoolean(udg_hash, GetHandleId(caster), $7F);
	integer count = 1;
	if (isultimate) {
	}
	if (dist < 50.) {
	}
	if (GetFloatGameState(GAME_STATE_TIME_OF_DAY) * 1 < 6. || GetFloatGameState(GAME_STATE_TIME_OF_DAY) * 1 > 18.) {
	}
	while (true) {
		if (lopa > count) break;
		if (lopa == 1) {
			SetUnitScale(orb, 2.75, 2.75, 2.75);
			SaveReal(udg_hash, GetHandleId(orb), 1, damage);
			SaveReal(udg_hash, GetHandleId(orb), 2, stuntime);
			SaveReal(udg_hash, GetHandleId(orb), 3, 1.);
			SaveReal(udg_hash, GetHandleId(orb), 4, xt);
			SaveReal(udg_hash, GetHandleId(orb), 5, yt);
		else
			SetUnitScale(orb, 2., 2., 2.);
			SaveReal(udg_hash, GetHandleId(orb), 1, damage / 2);
			SaveReal(udg_hash, GetHandleId(orb), 2, stuntime / 2);
			SaveReal(udg_hash, GetHandleId(orb), 3, .5);
			SaveReal(udg_hash, GetHandleId(orb), 4, GetUnitX(orb) + dist * Cos(angle * bj_DEGTORAD));
			SaveReal(udg_hash, GetHandleId(orb), 5, GetUnitY(orb) + dist * Sin(angle * bj_DEGTORAD));
		}
		SetUnitAnimationByIndex(orb, 45);
		SetUnitTimeScale(orb, 2.5);
		UnitAddAbility(orb, 'Amrf');
		UnitRemoveAbility(orb, 'Amrf');
		SetUnitFlyHeight(orb, 800., .0);
		SetUnitFlyHeight(orb, .0, 1600.);
		MoveUnit(orb, .5, dist * 2, .0, angle, .0, true);
		SaveUnitHandle(udg_hash, h, lopa, orb);
		SaveEffectHandle(udg_hash, h, lopa + 3, ef);
	}
	DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Starfall\\StarfallCaster.mdl", caster, "origin"), 3.);
	SaveUnitHandle(udg_hash, h, 7, caster);
	SaveInteger(udg_hash, h, 8, count);
	TimerStart(t, .5, false, Trig_Falling_Star_Move_Actions);
	RemoveLocation(loc);
}
boolean Trig_Falling_Star_Conditions() {
	return GetSpellAbilityId() == 'A0NR';
}
nothing InitTrig_Falling_Star() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Falling_Star, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Falling_Star, Condition(Trig_Falling_Star_Conditions));
	TriggerAddAction(gg_trg_Falling_Star, Trig_Falling_Star_Actions);
}
nothing Trig_Moon_Chackram_Periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster;
	effect ef;
	if (LoadBoolean(udg_hash, h, 3)) {
		SaveBoolean(udg_hash, h, 3, false);
		DestroyEffect(ef);
		TimerStart(t, 5., false, Trig_Moon_Chackram_Periodic_Actions);
	else
		SaveBoolean(udg_hash, GetHandleId(caster), $80, false);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
}
nothing Trig_Moon_Chackram_Actions() {
	unit caster = GetSpellAbilityUnit();
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	effect ef = AddSpecialEffectTarget("Effects\\MoonSight_Buff.mdx", caster, "overhead");
	SaveBoolean(udg_hash, GetHandleId(caster), $80, true);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveEffectHandle(udg_hash, h, 2, ef);
	SaveBoolean(udg_hash, h, 3, true);
	TimerStart(t, 3., false, Trig_Moon_Chackram_Periodic_Actions);
}
boolean Trig_Moon_Chackram_Conditions() {
	return GetSpellAbilityId() == 'A0NS';
}
nothing InitTrig_Moon_Chackram() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Moon_Chackram, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Moon_Chackram, Condition(Trig_Moon_Chackram_Conditions));
	TriggerAddAction(gg_trg_Moon_Chackram, Trig_Moon_Chackram_Actions);
}
nothing Trig_Moon_Wind_Periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	group gheal = LoadGroupHandle(udg_hash, h, 2);
	integer adddamage;
	integer addas = LoadInteger(udg_hash, h, 4);
	integer addint = LoadInteger(udg_hash, h, 5);
	integer addagi = LoadInteger(udg_hash, h, 6);
	integer addregen = LoadInteger(udg_hash, h, 7);
	integer wait = LoadInteger(udg_hash, h, 9);
	real x = LoadReal(udg_hash, h, $C);
	real y = LoadReal(udg_hash, h, $D);
	player p = GetOwningPlayer(caster);
	group g = CreateGroup();
	group g2 = CreateGroup();
	group g3 = CreateGroup();
	unit Picked;
	unit dammi;
	unit dammief;
	effect dammieffect;
	integer lopa = 0;
	integer lopb = 0;
	integer count;
	real angleef;
	real dist;
	if (wait > 0) {
		SaveInteger(udg_hash, h, 9, wait);
		GroupEnumUnitsInRange(g, x, y, 450., null);
		while (true) {
			if (Picked == null) break;
			if ((IsUnitAlly(Picked, p) || GetOwningPlayer(Picked) == Player($D)) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				GroupAddUnit(g2, Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
		GroupClear(g);
		DestroyGroup(g);
		GroupAddGroup(gheal, g3);
		while (true) {
			if (Picked == null) break;
			if (IsUnitInGroup(Picked, g2) == false) {
				GroupRemoveUnit(gheal, Picked);
				SetUnitLifeAndManaRegeneration(Picked, "life", -addregen);
				SetAttackSpeedAbilityLevel(Picked, -addas);
				if (IsUnitType(Picked, UNIT_TYPE_HERO)) {
					SetHeroAgi(Picked, GetHeroAgi(Picked, false) - addagi, true);
					SetHeroInt(Picked, GetHeroInt(Picked, false) - addint, true);
				}
				if (Picked == caster && LoadBoolean(udg_hash, h, $E)) {
					SetUnitLifeAndManaRegeneration(Picked, "life", -R2I((addregen)) / 2);
					SetAttackSpeedAbilityLevel(Picked, -R2I((addas)) / 2);
					SetHeroAgi(Picked, GetHeroAgi(Picked, false) - R2I((addagi)) / 2, true);
					SetHeroInt(Picked, GetHeroInt(Picked, false) - R2I((addint)) / 2, true);
				}
				if (Picked == caster && LoadBoolean(udg_hash, h, $F)) {
					SetAttackAbilityLevel(Picked, -adddamage);
				}
			else
				UnitApplyTimedLife(dammi, 'BTLF', 1.);
				UnitAddAbility(dammi, 'A0NU');
				IssueTargetOrderById(dammi, $D0085, Picked);
			}
			GroupRemoveUnit(g3, Picked);
		}
		GroupClear(g3);
		DestroyGroup(g3);
		while (true) {
			if (Picked == null) break;
			if (IsUnitInGroup(Picked, gheal) == false) {
				GroupAddUnit(gheal, Picked);
				SetUnitLifeAndManaRegeneration(Picked, "life", addregen);
				SetAttackSpeedAbilityLevel(Picked, addas);
				if (IsUnitType(Picked, UNIT_TYPE_HERO)) {
					SetHeroAgi(Picked, GetHeroAgi(Picked, false) + addagi, true);
					SetHeroInt(Picked, GetHeroInt(Picked, false) + addint, true);
				}
				if (Picked == caster && LoadBoolean(udg_hash, h, $E)) {
					SetUnitLifeAndManaRegeneration(Picked, "life", R2I(addregen / 2));
					SetAttackSpeedAbilityLevel(Picked, R2I(addas / 2));
					SetHeroAgi(Picked, GetHeroAgi(Picked, false) + R2I((addagi) / 2), true);
					SetHeroInt(Picked, GetHeroInt(Picked, false) + R2I((addint)) / 2, true);
				}
				if (Picked == caster && LoadBoolean(udg_hash, h, $F)) {
					SetAttackAbilityLevel(Picked, adddamage);
				}
			}
			if (GetUnitAbilityLevel(Picked, 'B04M') <= 0) {
				UnitApplyTimedLife(dammi, 'BTLF', 1.);
				UnitAddAbility(dammi, 'A0NU');
				IssueTargetOrderById(dammi, $D0085, Picked);
			}
			GroupRemoveUnit(g2, Picked);
		}
		GroupClear(g2);
		DestroyGroup(g2);
		SaveGroupHandle(udg_hash, h, 2, gheal);
	else
		while (true) {
			if (Picked == null) break;
			SetUnitLifeAndManaRegeneration(Picked, "life", -addregen);
			SetAttackSpeedAbilityLevel(Picked, -addas);
			if (IsUnitType(Picked, UNIT_TYPE_HERO)) {
				SetHeroAgi(Picked, GetHeroAgi(Picked, false) - addagi, true);
				SetHeroInt(Picked, GetHeroInt(Picked, false) - addint, true);
			}
			if (Picked == caster && LoadBoolean(udg_hash, h, $E)) {
				SetUnitLifeAndManaRegeneration(Picked, "life", -R2I((addregen)) / 2);
				SetAttackSpeedAbilityLevel(Picked, -R2I((addas)) / 2);
				SetHeroAgi(Picked, GetHeroAgi(Picked, false) - R2I((addagi)) / 2, true);
				SetHeroInt(Picked, GetHeroInt(Picked, false) - R2I((addint)) / 2, true);
			}
			if (Picked == caster && LoadBoolean(udg_hash, h, $F)) {
				SetAttackAbilityLevel(Picked, -adddamage);
			}
			GroupRemoveUnit(gheal, Picked);
		}
		GroupClear(gheal);
		DestroyGroup(gheal);
		while (true) {
			if (lopa >= 7) break;
			KillUnit(dammief);
			DestroyEffect(dammieffect);
		}
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	GroupClear(g);
	DestroyGroup(g);
	GroupClear(g2);
	DestroyGroup(g2);
	GroupClear(g3);
	DestroyGroup(g3);
}
nothing Trig_Moon_Wind_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	integer lvl = GetUnitAbilityLevel(caster, 'A0NT');
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	location loc = GetSpellTargetLoc();
	real xt = GetLocationX(loc);
	real yt = GetLocationY(loc);
	real angle = bj_RADTODEG * Atan2((yt - y), (xt - x));
	real dist = SquareRoot(((xt - x) * (xt - x)) + ((yt - y) * (yt - y)));
	group gheal = CreateGroup();
	integer addagi = 6 + (4 * lvl);
	integer addint = 6 + (4 * lvl);
	integer addas = 8 + (6 * lvl);
	integer adddamage = R2I(GetHeroAgi(caster, true) * .4);
	integer addregen = $A + (6 * lvl);
	integer wait = 20;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	unit dammief;
	effect dammieffect;
	integer lopa = 1;
	integer lopb = 0;
	integer count;
	real angleef;
	integer dammicounter = 6;
	real smechenie = 400. + 133.;
	real angledummi = angle - 90.;
	real x2 = x - 400. * Cos(angle * bj_DEGTORAD);
	real y2 = y - 400. * Sin(angle * bj_DEGTORAD);
	boolean halfbonus = false;
	boolean isultimate = LoadBoolean(udg_hash, GetHandleId(caster), $7F);
	if (GetFloatGameState(GAME_STATE_TIME_OF_DAY) * 1 < 6. || GetFloatGameState(GAME_STATE_TIME_OF_DAY) * 1 > 18.) {
	}
	if (isultimate) {
	}
	while (true) {
		if (lopa >= 7) break;
		SetUnitAnimationByIndex(dammief, 45);
		SetUnitScale(dammief, 2., 2., 2.);
		SetUnitFlyHeight(dammief, 200., .0);
		SaveUnitHandle(udg_hash, h, lopa + 50, dammief);
		SaveEffectHandle(udg_hash, h, lopa + 60, dammieffect);
	}
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveGroupHandle(udg_hash, h, 2, gheal);
	SaveInteger(udg_hash, h, 3, adddamage);
	SaveInteger(udg_hash, h, 4, addas);
	SaveInteger(udg_hash, h, 5, addint);
	SaveInteger(udg_hash, h, 6, addagi);
	SaveInteger(udg_hash, h, 7, addregen);
	SaveInteger(udg_hash, h, 9, wait);
	SaveReal(udg_hash, h, $C, x);
	SaveReal(udg_hash, h, $D, y);
	SaveBoolean(udg_hash, h, $E, halfbonus);
	SaveBoolean(udg_hash, h, $F, isultimate);
	TimerStart(t, .5, true, Trig_Moon_Wind_Periodic_Actions);
	RemoveLocation(loc);
}
boolean Trig_Moon_Wind_Conditions() {
	return GetSpellAbilityId() == 'A0NT';
}
nothing InitTrig_Moon_Wind() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Moon_Wind, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Moon_Wind, Condition(Trig_Moon_Wind_Conditions));
	TriggerAddAction(gg_trg_Moon_Wind, Trig_Moon_Wind_Actions);
}
nothing Trig_Night_Heart_Periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	effect ef = LoadEffectHandle(udg_hash, h, 2);
	integer bonus = LoadInteger(udg_hash, h, 3);
	SetHeroAgi(caster, GetHeroAgi(caster, false) - bonus, true);
	SaveBoolean(udg_hash, GetHandleId(caster), $7F, false);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	DestroyEffect(ef);
}
nothing Trig_Night_Heart_Actions() {
	unit caster = GetSpellAbilityUnit();
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	effect ef = AddSpecialEffectTarget("Effects\\StarfallCaster.mdl", caster, "origin");
	integer bonus = $F + ($F * GetUnitAbilityLevel(caster, 'A0NV'));
	unit dammi = CreateUnit(GetOwningPlayer(caster), 'h00H', .0, .0, .0);
	item it = CreateItem('I010', .0, .0);
	UnitApplyTimedLife(dammi, 'BTLF', 10.);
	UnitAddItem(dammi, it);
	UnitUseItem(dammi, GetItemOfTypeFromUnitBJ(dammi, 'I010'));
	PlaySoundBJ(gg_snd_HuntressYesAttack4);
	SetHeroAgi(caster, GetHeroAgi(caster, false) + bonus, true);
	SaveBoolean(udg_hash, GetHandleId(caster), $7F, true);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveEffectHandle(udg_hash, h, 2, ef);
	SaveInteger(udg_hash, h, 3, bonus);
	TimerStart(t, 20., false, Trig_Night_Heart_Periodic_Actions);
}
boolean Trig_Night_Heart_Conditions() {
	return GetSpellAbilityId() == 'A0NV';
}
nothing InitTrig_Night_Heart() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Night_Heart, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Night_Heart, Condition(Trig_Night_Heart_Conditions));
	TriggerAddAction(gg_trg_Night_Heart, Trig_Night_Heart_Actions);
}
nothing Trig_MoonWarrior_Load_Actions() {
	AbilityPreload('A0NR', 6);
	AbilityPreload('A0NS', 6);
	AbilityPreload('A0NT', 6);
	AbilityPreload('A0NV', 3);
	AbilityPreload('A0NU', 1);
	AbilityPreload('B04R', 1);
	UnitPreload('h00H');
	UnitPreload('I010');
	EffectPreload("Effects\\CosmicTouch.MDX");
	EffectPreload("Effects\\BlueGlaivie.mdl");
	EffectPreload("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl");
	EffectPreload("Effects\\SoundTrauma.mdl");
	EffectPreload("Effects\\StarfallCaster.mdl");
	EffectPreload("Effects\\StarfallTarget2.mdl");
	EffectPreload("Abilities\\Spells\\NightElf\\Starfall\\StarfallCaster.mdl");
	EffectPreload("Effects\\Nebula.mdl");
	EffectPreload("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl");
	EffectPreload("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayDamage.mdl");
	EffectPreload("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayTarget.mdl");
	EffectPreload("Effects\\MoonSight_Buff.mdx");
	EffectPreload("Effects\\HolyBlessing.mdl");
	EnableTrigger(gg_trg_Falling_Star);
	EnableTrigger(gg_trg_Moon_Chackram);
	EnableTrigger(gg_trg_Moon_Wind);
	EnableTrigger(gg_trg_Night_Heart);
}
nothing InitTrig_MoonWarrior_Load() {
	TriggerAddAction(gg_trg_MoonWarrior_Load, Trig_MoonWarrior_Load_Actions);
}
nothing Trig_Ancient_Communication_Ligtning_Move_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	unit target = LoadUnitHandle(udg_hash, h, 2);
	lightning l = LoadLightningHandle(udg_hash, h, 3);
	real time = LoadReal(udg_hash, h, 4);
	location locc = GetUnitLoc(caster);
	real xc = GetUnitX(caster);
	real yc = GetUnitY(caster);
	location loct = GetUnitLoc(target);
	real xt = GetUnitX(target);
	real yt = GetUnitY(target);
	real dx = xc - xt;
	real dy = yc - yt;
	real dist = SquareRoot(dx * dx + dy * dy);
	integer damage;
	group g;
	unit Picked;
	group g2;
	group g3;
	integer attackspeed;
	effect ef;
	integer hpregen;
	integer armor;
	if (GetUnitState(caster, UNIT_STATE_LIFE) > .405 && GetUnitState(target, UNIT_STATE_LIFE) > .0 && dist <= 725. && time > .0) {
		SaveReal(udg_hash, h, 4, time);
		MoveLightningEx(l, true, xc, yc, 50. + GetLocationZ(locc), xt, yt, 50. + GetLocationZ(loct));
	else
		if (GetUnitAbilityLevel(caster, 'A0OO') > 0) {
			DestroyEffect(ef);
			SaveEffectHandle(udg_hash, GetHandleId(target), $89, null);
			SetAttackSpeedAbilityLevel(target, -LoadInteger(udg_hash, GetHandleId(target), $8C));
		}
		if (GetUnitAbilityLevel(caster, 'A0OT') > 0) {
			DestroyEffect(ef);
			SaveEffectHandle(udg_hash, GetHandleId(target), $89, null);
			SetUnitLifeAndManaRegeneration(target, "life", -LoadInteger(udg_hash, GetHandleId(target), $8D));
			SetArmorAbilityLevel(target, -LoadInteger(udg_hash, GetHandleId(target), $8E));
		}
		UnitRemoveAbility(target, 'B04Z');
		GroupRemoveUnit(g, target);
		if (Picked == null) {
			UnitRemoveAbility(caster, 'B04Z');
		}
		SaveGroupHandle(udg_hash, GetHandleId(caster), $88, g);
		SetAttackAbilityLevel(caster, -damage);
		SetAttackAbilityLevel(target, -damage);
		DestroyLightning(l);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	RemoveLocation(locc);
	RemoveLocation(loct);
}
nothing Trig_Ancient_Communication_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	unit dammi;
	location locc = GetUnitLoc(caster);
	real xc = GetUnitX(caster);
	real yc = GetUnitY(caster);
	location loct = GetUnitLoc(target);
	real xt = GetUnitX(target);
	real yt = GetUnitY(target);
	lightning l;
	player p = GetOwningPlayer(caster);
	integer lvl = GetUnitAbilityLevel(caster, 'A0OM');
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	real time = 11. + lvl;
	integer damage = 7 + (8 * lvl);
	group g = LoadGroupHandle(udg_hash, GetHandleId(caster), $88);
	effect ef;
	integer attackspeed;
	integer hpregen;
	integer armor;
	if (g == null) {
	}
	if (IsUnitInGroup(target, g)) {
		SimError(GetOwningPlayer(caster), "На этого героя уже наложена Связь Предков.");
		UnitRemoveAbility(caster, 'A0OM');
		UnitAddAbility(caster, 'A0OM');
		SetUnitAbilityLevel(caster, 'A0OM', lvl);
		SetUnitState(caster, UNIT_STATE_MANA, GetUnitState(caster, UNIT_STATE_MANA) + 120. + (5. * lvl));
	else
		GroupAddUnit(g, target);
		SaveGroupHandle(udg_hash, GetHandleId(caster), $88, g);
		SetAttackAbilityLevel(caster, damage);
		SetAttackAbilityLevel(target, damage);
		UnitApplyTimedLife(dammi, 'BTLF', 1.5);
		UnitAddAbility(dammi, 'A0ON');
		IssueTargetOrderById(dammi, $D0085, caster);
		UnitApplyTimedLife(dammi, 'BTLF', 1.5);
		UnitAddAbility(dammi, 'A0ON');
		IssueTargetOrderById(dammi, $D0085, target);
		if (GetUnitAbilityLevel(caster, 'A0OO') > 0) {
			SaveEffectHandle(udg_hash, GetHandleId(target), $89, ef);
			SetAttackSpeedAbilityLevel(target, attackspeed);
			SaveInteger(udg_hash, GetHandleId(target), $8C, attackspeed);
		}
		if (GetUnitAbilityLevel(caster, 'A0OT') > 0) {
			SaveEffectHandle(udg_hash, GetHandleId(target), $89, ef);
			SetUnitLifeAndManaRegeneration(target, "life", hpregen);
			SetArmorAbilityLevel(target, armor);
			SaveInteger(udg_hash, GetHandleId(target), $8D, hpregen);
			SaveInteger(udg_hash, GetHandleId(target), $8E, armor);
		}
		SaveUnitHandle(udg_hash, h, 1, caster);
		SaveUnitHandle(udg_hash, h, 2, target);
		SaveLightningHandle(udg_hash, h, 3, l);
		SaveReal(udg_hash, h, 4, time);
		SaveInteger(udg_hash, h, 5, damage);
		TimerStart(t, .04, true, Trig_Ancient_Communication_Ligtning_Move_Actions);
	}
	RemoveLocation(locc);
	RemoveLocation(loct);
}
boolean Trig_Ancient_Communication_Conditions() {
	return GetSpellAbilityId() == 'A0OM';
}
nothing InitTrig_Ancient_Communication() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Ancient_Communication, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Ancient_Communication, Condition(Trig_Ancient_Communication_Conditions));
	TriggerAddAction(gg_trg_Ancient_Communication, Trig_Ancient_Communication_Actions);
}
nothing Trig_Learn_Power_of_Ancestors_Actions() {
	unit u = GetLearningUnit();
	integer lvl = GetUnitAbilityLevel(u, 'A0OP');
	if (lvl == 1) {
		UnitAddAbility(u, 'A0OS');
		UnitAddAbility(u, 'A0OR');
		UnitMakeAbilityPermanent(u, true, 'A0OS');
		UnitMakeAbilityPermanent(u, true, 'A0OR');
	else
		SetUnitAbilityLevel(u, 'A0OS', lvl);
		SetUnitAbilityLevel(u, 'A0OR', lvl);
		SetUnitAbilityLevel(u, 'A0OT', lvl);
		SetUnitAbilityLevel(u, 'A0OO', lvl);
	}
}
boolean Trig_Learn_Power_of_Ancestors_Conditions() {
	return GetLearnedSkill() == 'A0OP' && GetUnitTypeId(GetLearningUnit()) != 'h00U';
}
nothing InitTrig_Learn_Power_of_Ancestors() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Power_of_Ancestors, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Learn_Power_of_Ancestors, Condition(Trig_Learn_Power_of_Ancestors_Conditions));
	TriggerAddAction(gg_trg_Learn_Power_of_Ancestors, Trig_Learn_Power_of_Ancestors_Actions);
}
nothing Trig_Switch_Power_of_Ancestors_Move_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	boolean nodestroy = LoadBoolean(udg_hash, h, 2);
	real mana = GetUnitState(caster, UNIT_STATE_MANA);
	group g;
	group g2;
	unit Picked;
	integer lvl;
	integer h2;
	integer mana2;
	effect ef;
	if (mana > 5. && GetUnitState(caster, UNIT_STATE_LIFE) > .0 && nodestroy) {
	else
		if (nodestroy) {
			GroupAddUnit(g2, caster);
			GroupAddGroup(g, g2);
			while (true) {
				if (Picked == null) break;
				DestroyEffect(ef);
				SaveEffectHandle(udg_hash, GetHandleId(Picked), $89, null);
				if (GetUnitAbilityLevel(caster, 'A0OO') > 0) {
					SetAttackSpeedAbilityLevel(Picked, -LoadInteger(udg_hash, GetHandleId(Picked), $8C));
				}
				if (GetUnitAbilityLevel(caster, 'A0OT') > 0) {
					SetUnitLifeAndManaRegeneration(Picked, "life", -LoadInteger(udg_hash, GetHandleId(Picked), $8D));
					SetArmorAbilityLevel(Picked, -LoadInteger(udg_hash, GetHandleId(Picked), $8E));
				}
				GroupRemoveUnit(g2, Picked);
			}
			if (GetUnitAbilityLevel(caster, 'A0OO') > 0) {
				SetUnitLifeAndManaRegeneration(caster, "mana", mana2);
				UnitRemoveAbility(caster, 'A0OO');
				UnitAddAbility(caster, 'A0OS');
				SetUnitAbilityLevel(caster, 'A0OS', lvl);
				UnitMakeAbilityPermanent(caster, true, 'A0OS');
			}
			if (GetUnitAbilityLevel(caster, 'A0OT') > 0) {
				SetUnitLifeAndManaRegeneration(caster, "mana", mana2);
				UnitRemoveAbility(caster, 'A0OT');
				UnitAddAbility(caster, 'A0OR');
				SetUnitAbilityLevel(caster, 'A0OR', lvl);
				UnitMakeAbilityPermanent(caster, true, 'A0OR');
			}
			DestroyGroup(g2);
		}
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
}
nothing Trig_Switch_Power_of_Ancestors_Actions() {
	unit caster = GetSpellAbilityUnit();
	integer id = GetSpellAbilityId();
	integer lvl = GetUnitAbilityLevel(caster, id);
	effect ef;
	integer h = GetHandleId(caster);
	group g = LoadGroupHandle(udg_hash, h, $88);
	group g2 = CreateGroup();
	unit Picked;
	integer mana = LoadInteger(udg_hash, h, $8A);
	integer nowmana = 3 + lvl * 2;
	timer t;
	integer attackspeed = $A + $A * lvl;
	integer hpregen = 5 + $A * lvl;
	integer armor = 3 + 3 * lvl;
	boolean switch = false;
	boolean switch2 = false;
	GroupAddUnit(g2, caster);
	GroupAddGroup(g, g2);
	if (id == 'A0OS') {
		UnitRemoveAbility(caster, 'A0OS');
		UnitAddAbility(caster, 'A0OO');
		SetUnitAbilityLevel(caster, 'A0OO', lvl);
		UnitMakeAbilityPermanent(caster, true, 'A0OO');
		if (GetUnitAbilityLevel(caster, 'A0OT') > 0) {
			SetUnitLifeAndManaRegeneration(caster, "mana", mana);
			UnitRemoveAbility(caster, 'A0OT');
			UnitAddAbility(caster, 'A0OR');
			SetUnitAbilityLevel(caster, 'A0OR', lvl);
			UnitMakeAbilityPermanent(caster, true, 'A0OR');
		}
		SetUnitLifeAndManaRegeneration(caster, "mana", -nowmana);
		SaveInteger(udg_hash, h, $8A, nowmana);
		SaveUnitHandle(udg_hash, GetHandleId(t), 1, caster);
		SaveBoolean(udg_hash, GetHandleId(t), 2, true);
		TimerStart(t, .04, true, Trig_Switch_Power_of_Ancestors_Move_Actions);
		if (LoadTimerHandle(udg_hash, h, $8B) != null) {
			FlushChildHashtable(udg_hash, GetHandleId(LoadTimerHandle(udg_hash, h, $8B)));
			DestroyTimer(LoadTimerHandle(udg_hash, h, $8B));
		}
		SaveTimerHandle(udg_hash, h, $8B, t);
		while (true) {
			if (Picked == null) break;
			DestroyEffect(ef);
			SaveEffectHandle(udg_hash, GetHandleId(Picked), $89, ef);
			if (switch2) {
				SetUnitLifeAndManaRegeneration(Picked, "life", -LoadInteger(udg_hash, GetHandleId(Picked), $8D));
				SetArmorAbilityLevel(Picked, -LoadInteger(udg_hash, GetHandleId(Picked), $8E));
			}
			SetAttackSpeedAbilityLevel(Picked, attackspeed);
			SaveInteger(udg_hash, GetHandleId(Picked), $8C, attackspeed);
			GroupRemoveUnit(g2, Picked);
		}
	}
	if (id == 'A0OO') {
		UnitRemoveAbility(caster, 'A0OO');
		UnitAddAbility(caster, 'A0OS');
		SetUnitAbilityLevel(caster, 'A0OS', lvl);
		UnitMakeAbilityPermanent(caster, true, 'A0OS');
		SetUnitLifeAndManaRegeneration(caster, "mana", mana);
		while (true) {
			if (Picked == null) break;
			DestroyEffect(ef);
			SaveEffectHandle(udg_hash, GetHandleId(Picked), $89, null);
			SetAttackSpeedAbilityLevel(Picked, -LoadInteger(udg_hash, GetHandleId(Picked), $8C));
			GroupRemoveUnit(g2, Picked);
		}
	}
	if (id == 'A0OR') {
		UnitRemoveAbility(caster, 'A0OR');
		UnitAddAbility(caster, 'A0OT');
		SetUnitAbilityLevel(caster, 'A0OT', lvl);
		UnitMakeAbilityPermanent(caster, true, 'A0OT');
		SetUnitLifeAndManaRegeneration(caster, "mana", -nowmana);
		SaveInteger(udg_hash, h, $8A, nowmana);
		if (GetUnitAbilityLevel(caster, 'A0OO') > 0) {
			SetUnitLifeAndManaRegeneration(caster, "mana", mana);
			UnitRemoveAbility(caster, 'A0OO');
			UnitAddAbility(caster, 'A0OS');
			SetUnitAbilityLevel(caster, 'A0OS', lvl);
			UnitMakeAbilityPermanent(caster, true, 'A0OS');
		}
		SaveUnitHandle(udg_hash, GetHandleId(t), 1, caster);
		SaveBoolean(udg_hash, GetHandleId(t), 2, true);
		TimerStart(t, .04, true, Trig_Switch_Power_of_Ancestors_Move_Actions);
		if (LoadTimerHandle(udg_hash, h, $8B) != null) {
			FlushChildHashtable(udg_hash, GetHandleId(LoadTimerHandle(udg_hash, h, $8B)));
			DestroyTimer(LoadTimerHandle(udg_hash, h, $8B));
		}
		SaveTimerHandle(udg_hash, h, $8B, t);
		while (true) {
			if (Picked == null) break;
			DestroyEffect(ef);
			if (switch) {
				SetAttackSpeedAbilityLevel(Picked, -LoadInteger(udg_hash, GetHandleId(Picked), $8C));
			}
			SetUnitLifeAndManaRegeneration(Picked, "life", hpregen);
			SetArmorAbilityLevel(Picked, armor);
			SaveInteger(udg_hash, GetHandleId(Picked), $8D, hpregen);
			SaveInteger(udg_hash, GetHandleId(Picked), $8E, armor);
			SaveEffectHandle(udg_hash, GetHandleId(Picked), $89, ef);
			GroupRemoveUnit(g2, Picked);
		}
	}
	if (id == 'A0OT') {
		UnitRemoveAbility(caster, 'A0OT');
		UnitAddAbility(caster, 'A0OR');
		SetUnitAbilityLevel(caster, 'A0OR', lvl);
		UnitMakeAbilityPermanent(caster, true, 'A0OR');
		SetUnitLifeAndManaRegeneration(caster, "mana", mana);
		while (true) {
			if (Picked == null) break;
			DestroyEffect(ef);
			SaveEffectHandle(udg_hash, GetHandleId(Picked), $89, null);
			SetUnitLifeAndManaRegeneration(Picked, "life", -LoadInteger(udg_hash, GetHandleId(Picked), $8D));
			SetArmorAbilityLevel(Picked, -LoadInteger(udg_hash, GetHandleId(Picked), $8E));
			GroupRemoveUnit(g2, Picked);
		}
	}
	DestroyGroup(g2);
}
boolean Trig_Switch_Power_of_Ancestors_Conditions() {
	return GetSpellAbilityId() == 'A0OR' || GetSpellAbilityId() == 'A0OS' || GetSpellAbilityId() == 'A0OO' || GetSpellAbilityId() == 'A0OT';
}
nothing InitTrig_Switch_Power_of_Ancestors() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Switch_Power_of_Ancestors, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Switch_Power_of_Ancestors, Condition(Trig_Switch_Power_of_Ancestors_Conditions));
	TriggerAddAction(gg_trg_Switch_Power_of_Ancestors, Trig_Switch_Power_of_Ancestors_Actions);
}
nothing Trig_Earth_Split_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	unit dammi;
	real xc = GetUnitX(caster);
	real yc = GetUnitY(caster);
	player p = GetOwningPlayer(caster);
	integer lvl = GetUnitAbilityLevel(caster, 'A0OQ');
	integer damage = $A + (35 * lvl);
	group g = LoadGroupHandle(udg_hash, GetHandleId(caster), $88);
	group g2 = CreateGroup();
	group g3 = CreateGroup();
	group g4 = CreateGroup();
	unit Picked;
	unit Picked2;
	GroupAddUnit(g2, caster);
	GroupAddGroup(g, g2);
	while (true) {
		if (Picked2 == null) break;
		GroupEnumUnitsInRange(g3, GetUnitX(Picked2), GetUnitY(Picked2), 225., null);
		while (true) {
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				UnitApplyTimedLife(dammi, 'BTLF', 1.);
				UnitAddAbility(dammi, 'A0OU');
				IssueTargetOrderById(dammi, $D006B, Picked);
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			}
			GroupRemoveUnit(g3, Picked);
		}
		DestroyEffect(AddSpecialEffect("Effects\\RedAftershock.mdl", GetUnitX(Picked2), GetUnitY(Picked2)));
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", GetUnitX(Picked2), GetUnitY(Picked2)));
		GroupRemoveUnit(g2, Picked2);
	}
	DestroyGroup(g2);
	DestroyGroup(g3);
	DestroyGroup(g4);
}
boolean Trig_Earth_Split_Conditions() {
	return GetSpellAbilityId() == 'A0OQ';
}
nothing InitTrig_Earth_Split() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Earth_Split, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Earth_Split, Condition(Trig_Earth_Split_Conditions));
	TriggerAddAction(gg_trg_Earth_Split, Trig_Earth_Split_Actions);
}
nothing Trig_Ancient_Help_Move_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	group gdamage;
	real damage;
	real heal;
	integer wait = LoadInteger(udg_hash, h, 5);
	integer waitgo = LoadInteger(udg_hash, h, $D);
	real face;
	unit dammi;
	unit wave;
	real x;
	real y;
	player p;
	group g;
	unit Picked;
	effect ef;
	boolean alife = true;
	real scale;
	real aoe;
	SaveInteger(udg_hash, h, 5, wait);
	if (wait == waitgo) {
		SaveBoolean(udg_hash, h, $A, false);
		SaveUnitHandle(udg_hash, h, 8, wave);
		SetUnitScale(wave, scale, scale, scale);
		SaveEffectHandle(udg_hash, h, 9, ef);
		RemoveUnit(dammi);
	}
	if ((wait > 0) && (wait < waitgo)) {
		SetUnitPosition(wave, x, y);
		GroupEnumUnitsInRange(g, x, y, aoe, null);
		while (true) {
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && IsUnitInGroup(Picked, gdamage) == false && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				GroupAddUnit(gdamage, Picked);
				DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Effects\\Burning Core.mdx", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Effects\\Burning Core.mdx", Picked, "origin"));
				StunUnitTimed(Picked, 2.5);
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			}
			if (IsUnitAlly(Picked, p) && IsUnitInGroup(Picked, gdamage) == false && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				GroupAddUnit(gdamage, Picked);
				SetUnitState(Picked, UNIT_STATE_LIFE, GetUnitState(Picked, UNIT_STATE_LIFE) + heal);
				DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", Picked, "origin"), 1.85);
			}
			GroupRemoveUnit(g, Picked);
		}
		SaveGroupHandle(udg_hash, h, 2, gdamage);
		GroupClear(g);
		DestroyGroup(g);
	}
	if (wait <= 0) {
		KillUnit(wave);
		DestroyEffect(ef);
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
}
nothing Trig_Ancient_Help_Actions() {
	unit caster = GetSpellAbilityUnit();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	unit target = GetSpellTargetUnit();
	real angle;
	group gdamage = CreateGroup();
	integer lvl = GetUnitAbilityLevel(caster, 'A0OV');
	integer lvlup = GetUnitAbilityLevel(caster, 'A0PX');
	real damage;
	real heal;
	location loc;
	real tx;
	real ty;
	integer wait = 40 + 20;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	unit dammi;
	real scale;
	real aoe;
	integer waitgo;
	if (lvl > 0) {
	}
	if (lvlup > 0) {
	}
	if (target == null) {
	else
	}
	SetUnitVertexColor(dammi, $F8, $9A, 0, 'd');
	SetUnitScale(dammi, 1.5, 1.5, 1.5);
	SetUnitAnimation(dammi, "Attack Slam");
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveGroupHandle(udg_hash, h, 2, gdamage);
	SaveReal(udg_hash, h, 3, damage);
	SaveReal(udg_hash, h, 4, heal);
	SaveInteger(udg_hash, h, 5, wait);
	SaveReal(udg_hash, h, 6, angle);
	SaveUnitHandle(udg_hash, h, 7, dammi);
	SaveBoolean(udg_hash, h, $A, true);
	SaveReal(udg_hash, h, $B, scale);
	SaveReal(udg_hash, h, $C, aoe);
	SaveInteger(udg_hash, h, $D, waitgo);
	TimerStart(t, .03, true, Trig_Ancient_Help_Move_Actions);
	RemoveLocation(loc);
}
boolean Trig_Ancient_Help_Conditions() {
	return (GetSpellAbilityId() == 'A0OV' || GetSpellAbilityId() == 'A0PX');
}
nothing InitTrig_Ancient_Help() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Ancient_Help, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Ancient_Help, Condition(Trig_Ancient_Help_Conditions));
	TriggerAddAction(gg_trg_Ancient_Help, Trig_Ancient_Help_Actions);
}
nothing Trig_SpiritBreaker_Load_Actions() {
	AbilityPreload('A0OM', 6);
	AbilityPreload('A0OQ', 6);
	AbilityPreload('A0OP', 6);
	AbilityPreload('A0OV', 3);
	AbilityPreload('A0OU', 1);
	AbilityPreload('B04Z', 1);
	AbilityPreload('B050', 1);
	UnitPreload('h00L');
	EffectPreload("Abilities\\Spells\\Orc\\StasisTrap\\StasisTotemTarget.mdl");
	EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPriest.mdl");
	EffectPreload("Effects\\Nebula.mdx");
	EffectPreload("Effects\\PyroMissle.mdx");
	EffectPreload("Effects\\RedAftershock.mdl");
	EffectPreload("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl");
	EffectPreload("Abilities\\Spells\\Orc\\Shockwave\\ShockwaveMissile.mdl");
	EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl");
	EffectPreload("Effects\\Burning Core.mdx");
	EnableTrigger(gg_trg_Ancient_Communication);
	EnableTrigger(gg_trg_Learn_Power_of_Ancestors);
	EnableTrigger(gg_trg_Switch_Power_of_Ancestors);
	EnableTrigger(gg_trg_Earth_Split);
	EnableTrigger(gg_trg_Ancient_Help);
}
nothing InitTrig_SpiritBreaker_Load() {
	TriggerAddAction(gg_trg_SpiritBreaker_Load, Trig_SpiritBreaker_Load_Actions);
}
nothing Trig_Dash_Dest_Actions() {
	KillDestructable(GetEnumDestructable());
}
nothing Trig_Dash_Move_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	group gdamage = LoadGroupHandle(udg_hash, h, 2);
	real damage = LoadReal(udg_hash, h, 3);
	integer lvl = LoadInteger(udg_hash, h, 4);
	integer wait = LoadInteger(udg_hash, h, 5);
	real face = LoadReal(udg_hash, h, 6);
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	player p = GetOwningPlayer(caster);
	group g = CreateGroup();
	unit Picked;
	real angle;
	real angle2;
	unit dammi;
	boolean alife = true;
	rect r = Rect(x - 100., y - 100., x + 100., y + 100.);
	EnumDestructablesInRect(r, null, Trig_Dash_Dest_Actions);
	if (GetUnitState(caster, UNIT_STATE_LIFE) < .405) {
	}
	if (wait > 0 && alife) {
		SaveInteger(udg_hash, h, 5, wait);
		SetUnitFacing(caster, face);
		if (wait - (wait / 5) * 5 == 0) {
			SetUnitAnimationByIndex(caster, 6);
		}
		GroupEnumUnitsInRange(g, x, y, 125., null);
		while (true) {
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && IsUnitInGroup(Picked, gdamage) == false && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				GroupAddUnit(gdamage, Picked);
				DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPeasant.mdl", Picked, "origin"));
				DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl", Picked, "origin"));
				UnitApplyTimedLife(dammi, 'BTLF', .5);
				UnitAddAbility(dammi, 'A0P1');
				SetUnitAbilityLevel(dammi, 'A0P1', lvl);
				IssueTargetOrderById(dammi, $D006B, Picked);
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			}
			GroupRemoveUnit(g, Picked);
		}
		SaveGroupHandle(udg_hash, h, 2, gdamage);
	else
		SetUnitPathing(caster, true);
		SetUnitTimeScale(caster, 1.);
		SetUnitAnimation(caster, "stand");
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	GroupClear(g);
	DestroyGroup(g);
	RemoveRect(r);
}
nothing Trig_Dash_Actions() {
	unit caster = GetSpellAbilityUnit();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	unit target = GetSpellTargetUnit();
	real angle;
	group gdamage = CreateGroup();
	integer lvl = GetUnitAbilityLevel(caster, 'A0P0');
	real damage = (10. + (30. * lvl)) + (GetHeroAgi(caster, true) * (.3 + .5 * lvl));
	location loc;
	real tx;
	real ty;
	real dist;
	real time;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	SetUnitAnimation(caster, "stand");
	SetUnitPathing(caster, false);
	SetUnitAnimationByIndex(caster, 6);
	SetUnitTimeScale(caster, 2.);
	if (target == null) {
	else
	}
	if (target == caster) {
	}
	MoveUnit(caster, time, 900., .0, angle, .0, true);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveGroupHandle(udg_hash, h, 2, gdamage);
	SaveReal(udg_hash, h, 3, damage);
	SaveInteger(udg_hash, h, 4, lvl);
	SaveInteger(udg_hash, h, 5, R2I(dist / 27));
	SaveReal(udg_hash, h, 6, angle);
	TimerStart(t, .03, true, Trig_Dash_Move_Actions);
	RemoveLocation(loc);
}
boolean Trig_Dash_Conditions() {
	return GetSpellAbilityId() == 'A0P0';
}
nothing InitTrig_Dash() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Dash, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Dash, Condition(Trig_Dash_Conditions));
	TriggerAddAction(gg_trg_Dash, Trig_Dash_Actions);
}
nothing Trig_Dash_Remove_Damge_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	integer alldamage = LoadInteger(udg_hash, h, 2);
	effect ef = LoadEffectHandle(udg_hash, h, 3);
	SetAttackAbilityLevel(caster, -alldamage);
	DestroyEffect(ef);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
}
nothing Trig_Dagger_Throw_Dest_Actions() {
	KillDestructable(GetEnumDestructable());
}
nothing Trig_Dagger_Throw_Move_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	group gdamage = LoadGroupHandle(udg_hash, h, 2);
	real damage = LoadReal(udg_hash, h, 3);
	integer adddamage = LoadInteger(udg_hash, h, 4);
	integer wait = LoadInteger(udg_hash, h, 5);
	real angle = LoadReal(udg_hash, h, 6);
	unit dagger = LoadUnitHandle(udg_hash, h, 7);
	boolean tuda = LoadBoolean(udg_hash, h, 8);
	integer alldamage = LoadInteger(udg_hash, h, 9);
	real x = GetUnitX(dagger);
	real y = GetUnitY(dagger);
	player p = GetOwningPlayer(caster);
	group g = CreateGroup();
	unit Picked;
	boolean alife = true;
	real dist;
	boolean dest = false;
	rect r = Rect(x - 100., y - 100., x + 100., y + 100.);
	timer t2;
	integer h2;
	EnumDestructablesInRect(r, null, Trig_Dagger_Throw_Dest_Actions);
	if ((wait > 0) && tuda) {
		SaveInteger(udg_hash, h, 5, wait);
		SetUnitPosition(dagger, x + 24. * Cos((angle) * bj_DEGTORAD), y + 24. * Sin((angle) * bj_DEGTORAD));
	}
	if (wait == 0) {
		SaveBoolean(udg_hash, h, 8, tuda);
	}
	if (tuda == false) {
		SetUnitPosition(dagger, x + 24. * Cos((angle) * bj_DEGTORAD), y + 24. * Sin((angle) * bj_DEGTORAD));
		if (dist < 50.) {
		}
	}
	GroupEnumUnitsInRange(g, x, y, 125., null);
	while (true) {
		if (Picked == null) break;
		if (IsUnitEnemy(Picked, p) && IsUnitInGroup(Picked, gdamage) == false && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			GroupAddUnit(gdamage, Picked);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl", Picked, "chest"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl", Picked, "origin"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl", Picked, "head"));
			DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPeasant.mdl", Picked, "origin"));
			DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl", Picked, "origin"));
			DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", Picked, "chest"));
			UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
		}
		GroupRemoveUnit(g, Picked);
	}
	SaveInteger(udg_hash, h, 9, alldamage);
	SaveGroupHandle(udg_hash, h, 2, gdamage);
	if (dest) {
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		RemoveUnit(dagger);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
		if (alldamage > 0) {
			SetAttackAbilityLevel(caster, alldamage);
			SaveUnitHandle(udg_hash, h2, 1, caster);
			SaveInteger(udg_hash, h2, 2, alldamage);
			SaveEffectHandle(udg_hash, h2, 3, AddSpecialEffectTarget("Effects\\Prismatic Missile Fixed.mdx", caster, "weapon"));
			TimerStart(t2, 6., false, Trig_Dash_Remove_Damge_Actions);
		}
	}
	GroupClear(g);
	DestroyGroup(g);
	RemoveRect(r);
}
nothing Trig_Dagger_Throw_Actions() {
	unit caster = GetSpellAbilityUnit();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	unit target = GetSpellTargetUnit();
	real angle;
	group gdamage = CreateGroup();
	integer lvl = GetUnitAbilityLevel(caster, 'A0P2');
	real damage = (40. * lvl);
	integer adddamage = 2 + lvl;
	integer alldamage = 0;
	location loc;
	real tx;
	real ty;
	real dist;
	unit dagger;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	if (target == null) {
	else
	}
	if (target == caster) {
	}
	SetUnitX(dagger, x + 20. * Cos((angle) * bj_DEGTORAD));
	SetUnitY(dagger, y + 20. * Sin((angle) * bj_DEGTORAD));
	SetUnitTimeScale(dagger, 4.);
	SetUnitScale(dagger, 1.5, 1.5, 1.5);
	SetUnitPathing(dagger, false);
	SetUnitFlyHeight(dagger, 50., .0);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveGroupHandle(udg_hash, h, 2, gdamage);
	SaveReal(udg_hash, h, 3, damage);
	SaveInteger(udg_hash, h, 4, adddamage);
	SaveInteger(udg_hash, h, 5, R2I(dist / 24));
	SaveReal(udg_hash, h, 6, angle);
	SaveUnitHandle(udg_hash, h, 7, dagger);
	SaveBoolean(udg_hash, h, 8, true);
	SaveInteger(udg_hash, h, 9, alldamage);
	TimerStart(t, .03, true, Trig_Dagger_Throw_Move_Actions);
	RemoveLocation(loc);
}
boolean Trig_Dagger_Throw_Conditions() {
	return GetSpellAbilityId() == 'A0P2';
}
nothing InitTrig_Dagger_Throw() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Dagger_Throw, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Dagger_Throw, Condition(Trig_Dagger_Throw_Conditions));
	TriggerAddAction(gg_trg_Dagger_Throw, Trig_Dagger_Throw_Actions);
}
nothing Trig_Kara_Justice_perodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	group gdamage = LoadGroupHandle(udg_hash, h, 2);
	group gdamage2 = LoadGroupHandle(udg_hash, h, 3);
	real damage = LoadReal(udg_hash, h, 4);
	real angle = LoadReal(udg_hash, h, 5);
	player p = GetOwningPlayer(caster);
	unit Picked;
	unit target;
	RandomUnitFromGroup(1, gdamage);
	if (Picked != null) {
		GroupRemoveUnit(gdamage2, Picked);
	}
	GroupToGroup(gdamage2, gdamage);
	SaveGroupHandle(udg_hash, h, 2, gdamage);
	SaveGroupHandle(udg_hash, h, 3, gdamage2);
	if (Picked != null) {
		PlaySoundBJ(gg_snd_WardenAttackEffort1);
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl", Picked, "chest"));
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl", Picked, "origin"));
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl", Picked, "head"));
		DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl", Picked, "origin"));
		DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", Picked, "chest"));
		SetUnitPosition(caster, GetUnitX(Picked) - 50. * Cos(angle * bj_DEGTORAD), GetUnitY(Picked) - 50. * Sin(angle * bj_DEGTORAD));
		SetUnitAnimation(caster, "stop");
		SetUnitAnimation(caster, "attack");
		if (GetRandomInt(1, 'd') <= ($A + 5 * GetUnitAbilityLevel(caster, 'A0P3')) && GetUnitAbilityLevel(caster, 'A0P3') > 0) {
			UnitDamageTarget(caster, Picked, 2 * damage, false, false, ATTACK_TYPE_MELEE, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS);
			CreateTexttag(udg_ColorString[1] + I2S(R2I(2 * damage)) + "!|r", .022, $FF, GetUnitX(Picked) - 18., GetUnitY(Picked) + 15., .0, .0, .035, 3.5);
		else
			UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_MELEE, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS);
		}
	else
		SetUnitVertexColor(caster, $FF, $FF, $FF, $FF);
		SetUnitTimeScale(caster, 1.);
		SetUnitInvulnerable(caster, false);
		SetUnitPosition(caster, LoadReal(udg_hash, h, 6), LoadReal(udg_hash, h, 7));
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		GroupClear(gdamage2);
		DestroyGroup(gdamage2);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
}
nothing Trig_Kara_Justice_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	integer lvl = GetUnitAbilityLevel(caster, 'A0P5');
	location loc = GetSpellTargetLoc();
	real x = GetLocationX(loc);
	real y = GetLocationY(loc);
	real damage = 75 * lvl + (.25 + (.75 * lvl)) * GetHeroAgi(caster, true);
	group g = CreateGroup();
	group gdamage = CreateGroup();
	group gdamage2 = CreateGroup();
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	unit Picked;
	real angle = bj_RADTODEG * Atan2(y - GetUnitY(caster), x - GetUnitX(caster));
	GroupEnumUnitsInRange(g, x, y, 500., null);
	while (true) {
		if (Picked == null) break;
		if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			GroupAddUnit(gdamage, Picked);
			GroupAddUnit(gdamage2, Picked);
		}
		GroupRemoveUnit(g, Picked);
	}
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveGroupHandle(udg_hash, h, 2, gdamage);
	SaveGroupHandle(udg_hash, h, 3, gdamage2);
	SaveReal(udg_hash, h, 4, damage);
	SaveReal(udg_hash, h, 5, angle);
	SaveReal(udg_hash, h, 6, GetUnitX(caster));
	SaveReal(udg_hash, h, 7, GetUnitY(caster));
	SetUnitVertexColor(caster, $FF, $FF, $FF, 'd');
	SetUnitTimeScale(caster, 4.);
	SetUnitInvulnerable(caster, true);
	UnitPeriodicPostionMove(caster, .03, .2 * CountUnitsInGroup(gdamage));
	TimerStart(t, .2, true, Trig_Kara_Justice_perodic_Actions);
	RemoveLocation(loc);
}
boolean Trig_Kara_Justice_Conditions() {
	return GetSpellAbilityId() == 'A0P5';
}
nothing InitTrig_Kara_Justice() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Kara_Justice, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Kara_Justice, Condition(Trig_Kara_Justice_Conditions));
	TriggerAddAction(gg_trg_Kara_Justice, Trig_Kara_Justice_Actions);
}
nothing Trig_Warden_Load_Actions() {
	AbilityPreload('A0P0', 6);
	AbilityPreload('A0P2', 6);
	AbilityPreload('A0P3', 6);
	AbilityPreload('A0P5', 3);
	AbilityPreload('A0P1', 6);
	AbilityPreload('B051', 1);
	EffectPreload("Effects\\CosmicTouch.MDX");
	EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPeasant.mdl");
	EffectPreload("Effects\\Prismatic Missile Fixed.mdx");
	EffectPreload("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl");
	EffectPreload("Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl");
	EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl");
	EnableTrigger(gg_trg_Dash);
	EnableTrigger(gg_trg_Dagger_Throw);
	EnableTrigger(gg_trg_Kara_Justice);
}
nothing InitTrig_Warden_Load() {
	TriggerAddAction(gg_trg_Warden_Load, Trig_SpiritBreaker_Load_Actions);
}
nothing Trig_Strength_Fist_Move_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 7);
	player p = GetOwningPlayer(caster);
	real damage = LoadReal(udg_hash, h, 1);
	integer lvl = LoadInteger(udg_hash, h, 2);
	unit orb = LoadUnitHandle(udg_hash, h, 3);
	real xt = LoadReal(udg_hash, h, 4);
	real yt = LoadReal(udg_hash, h, 5);
	group g = CreateGroup();
	unit Picked;
	unit dammi;
	GroupEnumUnitsInRange(g, xt, yt, 250., null);
	DestroyEffect(AddSpecialEffect("Effects\\RedAftershock.mdx", xt, yt));
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", xt, yt));
	while (true) {
		if (Picked == null) break;
		if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			UnitApplyTimedLife(dammi, 'BTLF', .5);
			UnitAddAbility(dammi, 'A0P8');
			SetUnitAbilityLevel(dammi, 'A0P8', lvl);
			IssueTargetOrderById(dammi, $D006B, Picked);
			UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
		}
		GroupRemoveUnit(g, Picked);
	}
	KillUnit(orb);
	GroupClear(g);
	DestroyGroup(g);
	KillUnit(orb);
	DestroyTimer(t);
	FlushChildHashtable(udg_hash, h);
}
nothing Trig_Strength_Fist_Actions() {
	unit caster = GetSpellAbilityUnit();
	location loc = GetSpellTargetLoc();
	real xt = GetLocationX(loc);
	real yt = GetLocationY(loc);
	integer lvl = GetUnitAbilityLevel(caster, 'A0P7');
	real damage = 5. + (35. * lvl) + (GetHeroStr(caster, true) * .5 * lvl);
	player p = GetOwningPlayer(caster);
	unit orb;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	UnitAddAbility(orb, 'Amrf');
	UnitRemoveAbility(orb, 'Amrf');
	SetUnitFlyHeight(orb, 800., .0);
	SetUnitFlyHeight(orb, 25., 1550.);
	SaveReal(udg_hash, h, 1, damage);
	SaveInteger(udg_hash, h, 2, lvl);
	SaveUnitHandle(udg_hash, h, 3, orb);
	SaveReal(udg_hash, h, 4, xt);
	SaveReal(udg_hash, h, 5, yt);
	SaveUnitHandle(udg_hash, h, 7, caster);
	TimerStart(t, .5, false, Trig_Strength_Fist_Move_Actions);
	RemoveLocation(loc);
}
boolean Trig_Strength_Fist_Conditions() {
	return GetSpellAbilityId() == 'A0P7';
}
nothing InitTrig_Strength_Fist() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Strength_Fist, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Strength_Fist, Condition(Trig_Strength_Fist_Conditions));
	TriggerAddAction(gg_trg_Strength_Fist, Trig_Strength_Fist_Actions);
}
nothing Trig_Fighting_Impact_14sec_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit target = LoadUnitHandle(udg_hash, h, 1);
	integer as = LoadInteger(udg_hash, h, 2);
	integer addarmor = LoadInteger(udg_hash, h, 3);
	effect ef;
	group g = CreateGroup();
	unit Picked;
	player p = GetOwningPlayer(target);
	real damage = LoadReal(udg_hash, GetHandleId(target), $96);
	unit caster = LoadUnitHandle(udg_hash, GetHandleId(target), $97);
	DestroyEffect(AddSpecialEffect("Effects\\LightNova.mdl", GetUnitX(target), GetUnitY(target)));
	DestroyEffect(AddSpecialEffectTarget("Effects\\DivineRage.mdx", target, "origin"));
	GroupEnumUnitsInRange(g, GetUnitX(target), GetUnitY(target), 500., null);
	while (true) {
		if (Picked == null) break;
		if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			DestroyEffect(AddSpecialEffectTarget("Effects\\DivineRage.mdx", Picked, "origin"));
			UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
		}
		GroupRemoveUnit(g, Picked);
	}
	SetAttackSpeedAbilityLevel(target, -as);
	DestroyEffect(ef);
	DestroyEffect(ef);
	DestroyEffect(ef);
	SaveReal(udg_hash, GetHandleId(target), $93, .0);
	SaveInteger(udg_hash, GetHandleId(target), $94, 0);
	SaveTimerHandle(udg_hash, GetHandleId(target), $95, null);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	DestroyGroup(g);
}
nothing Trig_Fighting_Impact_Actions() {
	unit caster = GetSpellAbilityUnit();
	integer lvl = GetUnitAbilityLevel(caster, 'A0P6');
	unit target = GetSpellTargetUnit();
	integer as = 20 * lvl + $A;
	real shield = 75. * lvl;
	real damage = 40 * lvl;
	effect ef;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	timer t2;
	integer h2;
	string smainstat = LoadStr(udg_hash, GetUnitTypeId(target), 70);
	if (LoadTimerHandle(udg_hash, GetHandleId(target), $95) != null) {
		DestroyEffect(ef);
		DestroyEffect(ef);
		DestroyEffect(ef);
		SetAttackSpeedAbilityLevel(target, -LoadInteger(udg_hash, GetHandleId(target), $94));
		FlushChildHashtable(udg_hash, h2);
		DestroyTimer(t2);
	}
	if (smainstat == "str") {
	}
	if (smainstat == "agi") {
	}
	if (smainstat == "int") {
	}
	SaveEffectHandle(udg_hash, h, 5, ef);
	SaveEffectHandle(udg_hash, h, 6, ef);
	SetAttackSpeedAbilityLevel(target, as);
	SaveReal(udg_hash, GetHandleId(target), $93, shield);
	SaveInteger(udg_hash, GetHandleId(target), $94, as);
	SaveTimerHandle(udg_hash, GetHandleId(target), $95, t);
	SaveReal(udg_hash, GetHandleId(target), $96, damage);
	SaveUnitHandle(udg_hash, GetHandleId(target), $97, caster);
	SaveUnitHandle(udg_hash, h, 1, target);
	SaveInteger(udg_hash, h, 2, as);
	TimerStart(t, 14., false, Trig_Fighting_Impact_14sec_Actions);
}
boolean Trig_Fighting_Impact_Conditions() {
	return GetSpellAbilityId() == 'A0P6';
}
nothing InitTrig_Fighting_Impact() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Fighting_Impact, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Fighting_Impact, Condition(Trig_Fighting_Impact_Conditions));
	TriggerAddAction(gg_trg_Fighting_Impact, Trig_Fighting_Impact_Actions);
}
nothing Trig_Learn_Marshal_Armor_Actions_Timer() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit hero = LoadUnitHandle(udg_hash, h, 1);
	texttag txt = LoadTextTagHandle(udg_hash, h, 2);
	real x = GetUnitX(hero);
	real y = GetUnitY(hero);
	boolean alife = LoadBoolean(udg_hash, h, 3);
	integer stack;
	if ((GetUnitState(hero, UNIT_STATE_LIFE) < .405 && alife)) {
		SaveBoolean(udg_hash, h, 3, alife);
		SetTextTagVisibility(txt, false);
	}
	if ((GetUnitState(hero, UNIT_STATE_LIFE) > .405 && alife == false)) {
		SaveBoolean(udg_hash, h, 3, alife);
		SetTextTagVisibility(txt, true);
	}
	if ((GetUnitState(hero, UNIT_STATE_LIFE) > .405 && alife)) {
		SetTextTagText(txt, "|cFFDCDC32" + I2S(stack) + "|r|cFF969696/|r|cFFDCDC32" + I2S(5 * GetUnitAbilityLevel(hero, 'A0P9')) + "|r", .027);
		SetTextTagPos(txt, GetUnitX(hero) - 40., GetUnitY(hero) + 50., .0);
	}
}
nothing Trig_Learn_Marshal_Armor_Actions() {
	integer lvl = GetUnitAbilityLevel(GetLearningUnit(), 'A0P9');
	timer t;
	integer h;
	texttag txt;
	unit hero = GetLearningUnit();
	integer stack = LoadInteger(udg_hash, GetHandleId(hero), $99);
	if (lvl == 1) {
		SetTextTagText(txt, "|cFFDCDC32" + I2S(stack) + "|r|cFF969696/|r|cFFDCDC32" + I2S(5 * GetUnitAbilityLevel(hero, 'A0P9')) + "|r", .033);
		SetTextTagColor(txt, $FF, $FF, $FF, $FF);
		SetTextTagPos(txt, GetUnitX(hero) - 40., GetUnitY(hero) + 50., .0);
		SetTextTagPermanent(txt, true);
		SaveUnitHandle(udg_hash, h, 1, hero);
		SaveTextTagHandle(udg_hash, h, 2, txt);
		SaveBoolean(udg_hash, h, 3, true);
		TimerStart(t, .03, true, Trig_Learn_Marshal_Armor_Actions_Timer);
	}
}
boolean Trig_Learn_Marshal_Armor_Conditions() {
	return GetUnitTypeId(GetLearningUnit()) != 'h00U' && GetLearnedSkill() == 'A0P9';
}
nothing InitTrig_Learn_Marshal_Armor() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Marshal_Armor, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Learn_Marshal_Armor, Condition(Trig_Learn_Marshal_Armor_Conditions));
	TriggerAddAction(gg_trg_Learn_Marshal_Armor, Trig_Learn_Marshal_Armor_Actions);
}
nothing Trig_Illusive_Army_Periodic_Damage_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit knight = LoadUnitHandle(udg_hash, h, 1);
	real wait = LoadReal(udg_hash, h, 2);
	real damage;
	real stuntime;
	unit caster;
	group gdamage;
	player p;
	group g;
	unit Picked;
	SaveReal(udg_hash, h, 2, wait);
	if (wait > 0) {
		GroupEnumUnitsInRange(g, GetUnitX(knight), GetUnitY(knight), 115., null);
		while (true) {
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && IsUnitInGroup(Picked, gdamage) == false && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				GroupAddUnit(gdamage, Picked);
				DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Effects\\DivineRage.mdx", Picked, "origin"));
				StunUnitTimed(Picked, stuntime);
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			}
			GroupRemoveUnit(g, Picked);
		}
		SaveGroupHandle(udg_hash, h, 7, gdamage);
		DestroyGroup(g);
	else
		DestroyEffect(AddSpecialEffect("Effects\\DivineRage.mdx", GetUnitX(knight), GetUnitY(knight)));
		RemoveUnit(knight);
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
}
nothing Trig_Illusive_Army_Periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	integer wait = LoadInteger(udg_hash, h, 2);
	real damage;
	real x;
	real y;
	real angle;
	real stuntime;
	player p;
	unit knight;
	real xnew;
	real ynew;
	real dist;
	timer t2;
	integer h2;
	integer perekluchatel;
	integer order = GetUnitCurrentOrder(caster);
	integer orderId;
	if ((orderId != 0)) {
	else
		if ((orderId != 0)) {
		}
	}
	if (wait > 0 && order == orderId) {
		SaveInteger(udg_hash, h, 2, wait);
		if (perekluchatel > 0) {
			SaveInteger(udg_hash, h, $A, perekluchatel);
		else
			SaveInteger(udg_hash, h, $A, perekluchatel);
		}
		DestroyEffect(AddSpecialEffect("Effects\\DivineRage.mdx", xnew, ynew));
		SetUnitVertexColor(knight, $FF, $FF, $E1, 75);
		SetUnitColor(knight, PLAYER_COLOR_YELLOW);
		SetUnitAnimationByIndex(knight, 0);
		MoveUnit(knight, 2., 450., .0, angle, .0, true);
		SaveUnitHandle(udg_hash, h2, 1, knight);
		SaveReal(udg_hash, h2, 2, 2.01);
		SaveReal(udg_hash, h2, 3, damage);
		SaveReal(udg_hash, h2, 4, stuntime);
		SaveUnitHandle(udg_hash, h2, 5, caster);
		SaveGroupHandle(udg_hash, h2, 7, CreateGroup());
		TimerStart(t2, .04, true, Trig_Illusive_Army_Periodic_Damage_Actions);
	else
		RemoveUnit(LoadUnitHandle(udg_hash, GetHandleId(caster), 'u'));
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
}
nothing Trig_Illusive_Army_Actions() {
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	integer lvl = GetUnitAbilityLevel(caster, 'A0PA');
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	real tx;
	real ty;
	real stuntime = 1. + .5 * lvl;
	real damage = 75. * lvl;
	integer count = 5 + 5 * lvl;
	unit target = GetSpellTargetUnit();
	real angle;
	location loc;
	if (target == null) {
	else
	}
	AddProgressBar(caster, 195. + (20. * lvl), (1. + .15 * lvl), (count * .4), false, true, 'u', $FF, $E1, 80);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveInteger(udg_hash, h, 2, count);
	SaveReal(udg_hash, h, 3, damage);
	SaveReal(udg_hash, h, 4, x);
	SaveReal(udg_hash, h, 5, y);
	SaveReal(udg_hash, h, 8, angle);
	SaveReal(udg_hash, h, 9, stuntime);
	SaveInteger(udg_hash, h, $A, 1);
	TimerStart(t, .4, true, Trig_Illusive_Army_Periodic_Actions);
}
boolean Trig_Illusive_Army_Conditions() {
	return GetSpellAbilityId() == 'A0PA';
}
nothing InitTrig_Illusive_Army() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Illusive_Army, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Illusive_Army, Condition(Trig_Illusive_Army_Conditions));
	TriggerAddAction(gg_trg_Illusive_Army, Trig_Illusive_Army_Actions);
}
nothing Trig_Marshal_Load_Actions() {
	AbilityPreload('A0P7', 6);
	AbilityPreload('A0P6', 6);
	AbilityPreload('A0P9', 6);
	AbilityPreload('A0PA', 3);
	UnitPreload('h00K');
	AbilityPreload('A0P8', 6);
	AbilityPreload('B052', 1);
	EffectPreload("Effects\\RedAftershock.mdx");
	EffectPreload("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl");
	EffectPreload("Effects\\LightNova.mdl");
	EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl");
	EffectPreload("Effects\\DivineRage.mdx");
	EffectPreload("Effects\\LifeHigh.mdx");
	EffectPreload("Abilities\\Spells\\Human\\DivineShield\\DivineShieldTarget.mdl");
	EffectPreload("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl");
	EnableTrigger(gg_trg_Strength_Fist);
	EnableTrigger(gg_trg_Fighting_Impact);
	EnableTrigger(gg_trg_Learn_Marshal_Armor);
	EnableTrigger(gg_trg_Illusive_Army);
}
nothing InitTrig_Marshal_Load() {
	TriggerAddAction(gg_trg_Marshal_Load, Trig_Marshal_Load_Actions);
}
nothing Trig_Remove_Lightning_From_Chain_Lightning_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit Picked = LoadUnitHandle(udg_hash, h, 1);
	integer wait = LoadInteger(udg_hash, h, 2);
	unit damaged = LoadUnitHandle(udg_hash, h, 3);
	lightning l = LoadLightningHandle(udg_hash, h, 4);
	location locr = GetUnitLoc(damaged);
	location locd = GetUnitLoc(Picked);
	SaveInteger(udg_hash, h, 2, wait);
	if (LoadInteger(udg_hash, h, 5) == $E4) {
		MoveLightningEx(l, true, GetUnitX(damaged) + 75. * Cos(LoadReal(udg_hash, h, 6) * bj_DEGTORAD), GetUnitY(damaged) + 75. * Sin(LoadReal(udg_hash, h, 6) * bj_DEGTORAD), GetUnitFlyHeight(damaged) + 100. + GetLocationZ(locr), GetUnitX(Picked), GetUnitY(Picked), GetUnitFlyHeight(Picked) + 25. + GetLocationZ(locd));
	else
		MoveLightningEx(l, true, GetUnitX(damaged), GetUnitY(damaged), GetUnitFlyHeight(damaged) + 25. + GetLocationZ(locr), GetUnitX(Picked), GetUnitY(Picked), GetUnitFlyHeight(Picked) + 25. + GetLocationZ(locd));
	}
	if (wait <= 0) {
		DestroyLightning(l);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	RemoveLocation(locr);
	RemoveLocation(locd);
}
nothing Trig_Chain_Lightning_Move_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	real damage = LoadReal(udg_hash, h, 2);
	unit target = LoadUnitHandle(udg_hash, h, 8);
	integer count = LoadInteger(udg_hash, h, 5);
	group gdamage = LoadGroupHandle(udg_hash, h, $E);
	unit target2;
	player p = GetOwningPlayer(caster);
	group g;
	group grup;
	unit Picked;
	timer t2;
	integer h2;
	boolean first = LoadBoolean(udg_hash, h, $F);
	boolean destroy = false;
	location locr;
	lightning l;
	location locd;
	if (count > 0) {
		SaveInteger(udg_hash, h, 5, count);
		GroupEnumUnitsInRange(g, GetUnitX(target), GetUnitY(target), 500., null);
		while (true) {
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && IsUnitInGroup(Picked, gdamage) == false && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				GroupAddUnit(grup, Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
		RandomUnitFromGroup(1, grup);
		GroupAddGroup(udg_GroupRandomUnitFromGroup, g);
		if (target2 != null) {
			DestroyEffect(AddSpecialEffectTarget("Effects\\EMPBomb.mdx", target2, "chest"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningBolt\\LightningBoltMissile.mdl", target2, "chest"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", target2, "origin"));
			UnitDamageTarget(caster, target2, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			GroupAddUnit(gdamage, target2);
			SaveUnitHandle(udg_hash, h2, 1, target2);
			SaveInteger(udg_hash, h2, 2, $F);
			SaveUnitHandle(udg_hash, h2, 3, target);
			SaveLightningHandle(udg_hash, h2, 4, l);
			RemoveLocation(locr);
			RemoveLocation(locd);
			TimerStart(t2, .04, true, Trig_Remove_Lightning_From_Chain_Lightning_Actions);
			SaveUnitHandle(udg_hash, h, 8, target2);
		else
		}
		SaveGroupHandle(udg_hash, h, $E, gdamage);
		GroupClear(g);
		DestroyGroup(g);
		GroupClear(grup);
		DestroyGroup(grup);
	else
	}
	if (destroy) {
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
}
nothing Trig_Chain_Lightning_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	integer lvl = GetUnitAbilityLevel(caster, 'A0PP');
	real damage = ($A + 40 * lvl) + (GetHeroInt(caster, true) * (.3 + .2 * lvl));
	integer count = 8 + (lvl * 2) - 1;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	group gdamage = CreateGroup();
	location locr;
	lightning l;
	location locd;
	timer t2;
	integer h2;
	real angle = (bj_RADTODEG * Atan2(GetUnitY(target) - GetUnitY(caster), GetUnitX(target) - GetUnitX(caster)));
	DestroyEffect(AddSpecialEffectTarget("Effects\\EMPBomb.mdx", target, "chest"));
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningBolt\\LightningBoltMissile.mdl", target, "chest"));
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", target, "origin"));
	UnitDamageTarget(caster, target, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
	GroupAddUnit(gdamage, target);
	SaveUnitHandle(udg_hash, h2, 1, target);
	SaveInteger(udg_hash, h2, 2, $F);
	SaveUnitHandle(udg_hash, h2, 3, caster);
	SaveInteger(udg_hash, h2, 5, $E4);
	SaveReal(udg_hash, h2, 6, angle);
	SaveLightningHandle(udg_hash, h2, 4, l);
	RemoveLocation(locr);
	RemoveLocation(locd);
	TimerStart(t2, .04, true, Trig_Remove_Lightning_From_Chain_Lightning_Actions);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 2, damage);
	SaveInteger(udg_hash, h, 5, count);
	SaveUnitHandle(udg_hash, h, 8, target);
	SaveGroupHandle(udg_hash, h, $E, gdamage);
	SaveBoolean(udg_hash, h, $F, true);
	TimerStart(t, .3, true, Trig_Chain_Lightning_Move_Actions);
}
boolean Trig_Chain_Lightning_Conditions() {
	return GetSpellAbilityId() == 'A0PP';
}
nothing InitTrig_Chain_Lightning() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Chain_Lightning, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Chain_Lightning, Condition(Trig_Chain_Lightning_Conditions));
	TriggerAddAction(gg_trg_Chain_Lightning, Trig_Chain_Lightning_Actions);
}
nothing Trig_Magic_Trap_periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	real x = LoadReal(udg_hash, h, 2);
	real y = LoadReal(udg_hash, h, 3);
	integer lvl = LoadInteger(udg_hash, h, 4);
	group gdamage = LoadGroupHandle(udg_hash, h, 6);
	real damage = LoadReal(udg_hash, h, 7);
	integer wait = LoadInteger(udg_hash, h, 8);
	integer order = GetUnitCurrentOrder(caster);
	unit dammi;
	real px;
	real py;
	integer orderId;
	group g = CreateGroup();
	player p = GetOwningPlayer(caster);
	unit Picked;
	lightning l;
	location locc;
	location loc = GetUnitLoc(caster);
	real dist;
	real angle;
	real speed;
	unit orb;
	effect ef;
	if ((orderId != 0)) {
	else
		if ((orderId != 0)) {
		}
	}
	if (order == orderId && lvl > 0) {
		SaveInteger(udg_hash, h, 8, wait);
		GroupAddGroup(gdamage, g);
		while (true) {
			if (Picked == null) break;
			if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h000') {
				MoveLightningEx(l, true, x, y, 250. + GetLocationZ(loc), GetUnitX(Picked), GetUnitY(Picked), 50. + GetLocationZ(locc));
				if (speed <= 0) {
				}
				SetUnitPosition(Picked, GetUnitX(Picked) + speed * Cos(angle * bj_DEGTORAD), GetUnitY(Picked) + speed * Sin(angle * bj_DEGTORAD));
				RemoveLocation(locc);
			else
				DestroyLightning(l);
				GroupRemoveUnit(gdamage, Picked);
				SaveGroupHandle(udg_hash, h, 6, gdamage);
			}
			GroupRemoveUnit(g, Picked);
		}
	else
		DestroyEffect(AddSpecialEffect("Effects\\MagicStomp.mdx", x, y));
		while (true) {
			if (Picked == null) break;
			if (LoadLightningHandle(udg_hash, GetHandleId(Picked), $A3) != null) {
				DestroyLightning(l);
			}
			SaveLightningHandle(udg_hash, GetHandleId(Picked), $A3, null);
			SetUnitPathing(Picked, true);
			if (wait >= 66 && GetUnitState(Picked, UNIT_STATE_LIFE) > .405) {
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				DestroyEffect(AddSpecialEffectTarget("Effects\\SoundTrauma.mdx", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Effects\\Fireworksblue.mdx", Picked, "chest"));
				UnitApplyTimedLife(dammi, 'BTLF', 1.);
				UnitAddAbility(dammi, 'A0PN');
				IssueTargetOrderById(dammi, $D006B, Picked);
			}
			GroupRemoveUnit(gdamage, Picked);
		}
		KillUnit(orb);
		DestroyEffect(ef);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
		RemoveUnit(LoadUnitHandle(udg_hash, GetHandleId(caster), 'u'));
	}
	DestroyGroup(g);
	RemoveLocation(loc);
}
nothing Trig_Magic_Trap_Actions() {
	unit caster = GetSpellAbilityUnit();
	integer lvl = GetUnitAbilityLevel(caster, 'A0PM');
	location loc = GetSpellTargetLoc();
	real tx = GetLocationX(loc);
	real ty = GetLocationY(loc);
	location locc;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	real damage = 10. + 30. * lvl;
	real aoe = 175. + 75. * lvl;
	lightning l;
	group g = CreateGroup();
	player p = GetOwningPlayer(caster);
	unit Picked;
	group gdamage = CreateGroup();
	integer wait = 0;
	unit orb = CreateUnit(p, 'h00U', tx, ty, 270.);
	effect ef = AddSpecialEffectTarget("Effects\\Spirit Orb.mdl", orb, "origin");
	UnitAddAbility(orb, 'Amrf');
	UnitRemoveAbility(orb, 'Amrf');
	SetUnitFlyHeight(orb, 250., .0);
	SetUnitScale(orb, 2. + .5 * lvl, 2. + .5 * lvl, 2. + .5 * lvl);
	GroupEnumUnitsInRange(g, tx, ty, aoe, null);
	while (true) {
		if (Picked == null) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, p) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h000') {
			SaveLightningHandle(udg_hash, GetHandleId(Picked), $A3, l);
			GroupAddUnit(gdamage, Picked);
			SetUnitPathing(Picked, false);
			RemoveLocation(locc);
		}
		GroupRemoveUnit(g, Picked);
	}
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 2, tx);
	SaveReal(udg_hash, h, 3, ty);
	SaveInteger(udg_hash, h, 4, lvl);
	SaveGroupHandle(udg_hash, h, 6, gdamage);
	SaveReal(udg_hash, h, 7, damage);
	SaveInteger(udg_hash, h, 8, wait);
	SaveUnitHandle(udg_hash, h, 9, orb);
	SaveEffectHandle(udg_hash, h, $A, ef);
	TimerStart(t, .03, true, Trig_Magic_Trap_periodic_Actions);
	AddProgressBar(caster, 260. + (5. * lvl), (.85 + .05 * lvl), 2., false, true, 'u', 50, 50, $FF);
	DestroyGroup(g);
	RemoveLocation(loc);
}
boolean Trig_Magic_Trap_Conditions() {
	return GetSpellAbilityId() == 'A0PM';
}
nothing InitTrig_Magic_Trap() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Magic_Trap, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Magic_Trap, Condition(Trig_Magic_Trap_Conditions));
	TriggerAddAction(gg_trg_Magic_Trap, Trig_Magic_Trap_Actions);
}
nothing Trig_Remove_Lightning_Form_Dead_Units_Actions() {
	DestroyLightning(LoadLightningHandle(udg_hash, GetHandleId(GetDyingUnit()), $A3));
	SaveLightningHandle(udg_hash, GetHandleId(GetDyingUnit()), $A3, null);
}
boolean Trig_Remove_Lightning_Form_Dead_Units_Conditions() {
	return LoadLightningHandle(udg_hash, GetHandleId(GetDyingUnit()), $A3) != null;
}
nothing InitTrig_Remove_Lightning_Form_Dead_Units() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Remove_Lightning_Form_Dead_Units, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Remove_Lightning_Form_Dead_Units, Condition(Trig_Remove_Lightning_Form_Dead_Units_Conditions));
	TriggerAddAction(gg_trg_Remove_Lightning_Form_Dead_Units, Trig_Remove_Lightning_Form_Dead_Units_Actions);
}
nothing Trig_EnergyWave_periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 20);
	integer count = LoadInteger(udg_hash, h, 21);
	real mana = LoadReal(udg_hash, h, 22);
	integer check = LoadInteger(udg_hash, h, 23);
	integer lvl = LoadInteger(udg_hash, h, 26);
	group gdamage = LoadGroupHandle(udg_hash, h, 25);
	real manamax = LoadReal(udg_hash, h, 27);
	real time = LoadReal(udg_hash, h, 28);
	player p = GetOwningPlayer(caster);
	unit arrow;
	real ax;
	real ay;
	real face;
	integer lop = 0;
	effect ef;
	real angle;
	unit dammi;
	string sef;
	group g = CreateGroup();
	unit Picked;
	if (check < 47) {
		SaveInteger(udg_hash, h, 23, check);
		while (true) {
			if (lop >= count) break;
			if (IsTerrainPathable(ax, ay, PATHING_TYPE_FLYABILITY) == false) {
				SetUnitPosition(arrow, ax, ay);
				GroupEnumUnitsInRange(g, ax, ay, 100., null);
				while (true) {
					if (Picked == null) break;
					if (IsUnitEnemy(Picked, p) && IsUnitInGroup(Picked, gdamage) == false && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h000') {
						GroupAddUnit(gdamage, Picked);
						UnitApplyTimedLife(dammi, 'BTLF', .34);
						UnitAddAbility(dammi, 'A0PK');
						SetUnitAbilityLevel(dammi, 'A0PK', lvl);
						IssueTargetOrderById(dammi, $D02BC, Picked);
						RemoveUnitAttack(Picked, time);
						MoveUnit(Picked, 1.5, 200., 100., angle, .0, true);
					}
					if (IsUnitAlly(Picked, p) && IsUnitInGroup(Picked, gdamage) == false && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h000') {
						GroupAddUnit(gdamage, Picked);
						SetUnitState(Picked, UNIT_STATE_MANA, GetUnitState(Picked, UNIT_STATE_MANA) + mana + GetUnitState(Picked, UNIT_STATE_MAX_MANA) * manamax);
						DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIma\\AImaTarget.mdl", Picked, "origin"));
					}
					GroupRemoveUnit(g, Picked);
				}
			}
		}
	else
		while (true) {
			if (lop >= count) break;
			KillUnit(arrow);
			DestroyEffect(ef);
		}
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	GroupClear(g);
	DestroyGroup(g);
}
nothing Trig_EnergyWave_Actions() {
	unit caster = GetSpellAbilityUnit();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	unit target = GetSpellTargetUnit();
	real tx;
	real ty;
	location loc;
	real angle;
	real angle1;
	player p = GetOwningPlayer(caster);
	integer lvl = GetUnitAbilityLevel(caster, 'A0PJ');
	integer count = lvl + 2;
	integer lop = 0;
	real mana = 50 * lvl;
	real manamax = .05 * lvl;
	real time = 1. + .75 * lvl;
	unit arrow;
	integer check = 0;
	effect ef;
	string s;
	group gdamage = CreateGroup();
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	boolean perekluchatelangle = false;
	integer counterangle = 0;
	if (target == null) {
	else
	}
	if (target == caster) {
	}
	if (count - ((count / 2) * 2) == 0) {
	}
	while (true) {
		if (lop >= count) break;
		if (perekluchatelangle) {
		else
		}
		SetUnitScale(arrow, 1.2, 1.2, 1.2);
		UnitAddAbility(arrow, 'Amrf');
		UnitRemoveAbility(arrow, 'Amrf');
		SetUnitFlyHeight(arrow, 10., .0);
		SaveUnitHandle(udg_hash, h, lop, arrow);
		SaveEffectHandle(udg_hash, h, $A + lop, ef);
	}
	SaveUnitHandle(udg_hash, h, 20, caster);
	SaveInteger(udg_hash, h, 21, count);
	SaveReal(udg_hash, h, 22, mana);
	SaveInteger(udg_hash, h, 23, check);
	SaveGroupHandle(udg_hash, h, 25, gdamage);
	SaveInteger(udg_hash, h, 26, lvl);
	SaveReal(udg_hash, h, 27, manamax);
	SaveReal(udg_hash, h, 28, time);
	TimerStart(t, .04, true, Trig_EnergyWave_periodic_Actions);
	RemoveLocation(loc);
}
boolean Trig_EnergyWave_Conditions() {
	return GetSpellAbilityId() == 'A0PJ';
}
nothing InitTrig_EnergyWave() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_EnergyWave, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_EnergyWave, Condition(Trig_EnergyWave_Conditions));
	TriggerAddAction(gg_trg_EnergyWave, Trig_EnergyWave_Actions);
}
nothing Trig_Magic_Epicenter_Move_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	real damage = LoadReal(udg_hash, h, 3);
	real stuntime = LoadReal(udg_hash, h, 4);
	real aoe = LoadReal(udg_hash, h, 5);
	unit caster = LoadUnitHandle(udg_hash, h, 7);
	real x = LoadReal(udg_hash, h, 9);
	real y = LoadReal(udg_hash, h, $A);
	player p = GetOwningPlayer(caster);
	group g = CreateGroup();
	unit Picked;
	unit dammi = CreateUnit(p, 'h00U', x, y, 270.);
	SetUnitScale(dammi, 1.8, 1.8, 1.8);
	DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\NightElf\\NEDeathMedium\\NEDeath.mdl", dammi, "origin"));
	DestroyEffect(AddSpecialEffect("Effects\\MagicStomp.mdl", x, y));
	KillUnit(dammi);
	GroupEnumUnitsInRange(g, x, y, aoe, null);
	while (true) {
		if (Picked == null) break;
		if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			DestroyEffect(AddSpecialEffectTarget("Effects\\EMPBomb.mdx", Picked, "chest"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl", Picked, "origin"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl", Picked, "chest"));
			StunUnitTimed(Picked, stuntime);
			UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	DestroyTimer(t);
	FlushChildHashtable(udg_hash, h);
}
nothing Trig_Magic_Epicenter_Actions() {
	unit caster = GetSpellAbilityUnit();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	location loc = GetSpellTargetLoc();
	real xt = GetLocationX(loc);
	real yt = GetLocationY(loc);
	integer lvl = GetUnitAbilityLevel(caster, 'A0PO');
	integer lvlup = GetUnitAbilityLevel(caster, 'A0PW');
	real damage;
	real stuntime;
	player p = GetOwningPlayer(caster);
	real aoe = 300. + 50 * lvl;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	if (lvlup <= 0) {
	}
	if (lvlup > 0) {
	}
	DestroyEffectWithWait(AddSpecialEffect("Effects\\IonCannon.mdl", xt, yt), 10.);
	SaveReal(udg_hash, h, 3, damage);
	SaveReal(udg_hash, h, 4, stuntime);
	SaveReal(udg_hash, h, 5, aoe);
	SaveUnitHandle(udg_hash, h, 7, caster);
	SaveReal(udg_hash, h, 9, xt);
	SaveReal(udg_hash, h, $A, yt);
	TimerStart(t, 6.5, false, Trig_Magic_Epicenter_Move_Actions);
	RemoveLocation(loc);
}
boolean Trig_Magic_Epicenter_Conditions() {
	return (GetSpellAbilityId() == 'A0PO' || GetSpellAbilityId() == 'A0PW');
}
nothing InitTrig_Magic_Epicenter() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Magic_Epicenter, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Magic_Epicenter, Condition(Trig_Magic_Epicenter_Conditions));
	TriggerAddAction(gg_trg_Magic_Epicenter, Trig_Magic_Epicenter_Actions);
}
nothing Trig_Load_ArchMage_Actions() {
	AbilityPreload('A0PP', 6);
	AbilityPreload('A0PM', 6);
	AbilityPreload('A0PJ', 6);
	AbilityPreload('A0PO', 3);
	AbilityPreload('A0PK', 6);
	AbilityPreload('A0PN', 1);
	AbilityPreload('B055', 1);
	AbilityPreload('B054', 1);
	EffectPreload("Effects\\EMPBomb.mdx");
	EffectPreload("Abilities\\Spells\\Orc\\LightningBolt\\LightningBoltMissile.mdl");
	EffectPreload("Effects\\Spirit Orb.mdl");
	EffectPreload("Effects\\SoundTrauma.mdx");
	EffectPreload("Effects\\Fireworksblue.mdx");
	EffectPreload("Abilities\\Weapons\\WingedSerpentMissile\\WingedSerpentMissile.mdl");
	EffectPreload("Abilities\\Spells\\Items\\AIma\\AImaTarget.mdl");
	EffectPreload("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl");
	EffectPreload("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl");
	EffectPreload("Effects\\IonCannon.mdl");
	EffectPreload("Abilities\\Spells\\Other\\Silence\\SilenceTarget.mdl");
	EffectPreload("Abilities\\Spells\\Other\\Drain\\ManaDrainCaster.mdl");
	EffectPreload("Abilities\\Weapons\\Bolt\\BoltImpact.mdl");
	EffectPreload("Objects\\Spawnmodels\\NightElf\\NEDeathMedium\\NEDeath.mdl");
	EffectPreload("Effects\\MagicStomp.mdl");
	EnableTrigger(gg_trg_Chain_Lightning);
	EnableTrigger(gg_trg_Magic_Trap);
	EnableTrigger(gg_trg_Remove_Lightning_Form_Dead_Units);
	EnableTrigger(gg_trg_EnergyWave);
	EnableTrigger(gg_trg_Magic_Epicenter);
}
nothing InitTrig_Load_ArchMage() {
	TriggerAddAction(gg_trg_Load_ArchMage, Trig_Load_ArchMage_Actions);
}
nothing Trig_Toxic_Field_Move_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit orb;
	effect ef;
	real damage = LoadReal(udg_hash, h, 3);
	integer armor = LoadInteger(udg_hash, h, 4);
	integer wait = LoadInteger(udg_hash, h, 5);
	unit caster = LoadUnitHandle(udg_hash, h, 7);
	group gdamage = LoadGroupHandle(udg_hash, h, 8);
	real x = LoadReal(udg_hash, h, 9);
	real y = LoadReal(udg_hash, h, $A);
	player p = GetOwningPlayer(caster);
	group g = CreateGroup();
	group g2 = CreateGroup();
	group g3 = CreateGroup();
	unit Picked;
	unit dammi;
	if (wait > 0) {
		SaveInteger(udg_hash, h, 5, wait);
		GroupAddGroup(gdamage, g3);
		GroupEnumUnitsInRange(g, x, y, 325., null);
		if (wait == 4) {
			KillUnit(orb);
			DestroyEffect(ef);
			SaveUnitHandle(udg_hash, h, 1, orb);
			SaveEffectHandle(udg_hash, h, 2, ef);
		}
		while (true) {
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				UnitApplyTimedLife(dammi, 'BTLF', 1.);
				UnitAddAbility(dammi, 'A0QE');
				IssueTargetOrderById(dammi, $D006B, Picked);
				GroupAddUnit(g2, Picked);
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			}
			GroupRemoveUnit(g, Picked);
		}
		while (true) {
			if (Picked == null) break;
			if (IsUnitInGroup(Picked, g2) == false) {
				SetArmorAbilityLevel(Picked, armor);
				GroupRemoveUnit(gdamage, Picked);
			}
			GroupRemoveUnit(g3, Picked);
		}
		while (true) {
			if (Picked == null) break;
			if (IsUnitInGroup(Picked, gdamage) == false) {
				SetArmorAbilityLevel(Picked, -armor);
				GroupAddUnit(gdamage, Picked);
			}
			GroupRemoveUnit(g2, Picked);
		}
		SaveGroupHandle(udg_hash, h, 8, gdamage);
		TimerStart(t, 1., false, Trig_Toxic_Field_Move_Actions);
	else
		KillUnit(orb);
		DestroyEffect(ef);
		while (true) {
			if (Picked == null) break;
			SetArmorAbilityLevel(Picked, armor);
			GroupRemoveUnit(gdamage, Picked);
		}
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		DestroyTimer(t);
		FlushChildHashtable(udg_hash, h);
	}
	GroupClear(g);
	DestroyGroup(g);
	GroupClear(g2);
	DestroyGroup(g2);
	GroupClear(g3);
	DestroyGroup(g3);
}
nothing Trig_Toxic_Field_Actions() {
	unit caster = GetSpellAbilityUnit();
	location loc = GetSpellTargetLoc();
	real xt = GetLocationX(loc);
	real yt = GetLocationY(loc);
	integer lvl = GetUnitAbilityLevel(caster, 'A0QD');
	integer wait = 8;
	real damage = (-20. + (60. * lvl) + GetUnitState(caster, UNIT_STATE_MAX_LIFE) * .03 * lvl) / (wait);
	integer armor = 2 + 3 * lvl;
	player p = GetOwningPlayer(caster);
	unit orb = CreateUnit(p, 'h00U', xt, yt, GetRandomReal(.0, 360.));
	effect ef = AddSpecialEffectTarget("Effects\\ToxicField.mdx", orb, "origin");
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	group g = CreateGroup();
	SaveUnitHandle(udg_hash, h, 1, orb);
	SaveEffectHandle(udg_hash, h, 2, ef);
	SaveReal(udg_hash, h, 3, damage);
	SaveInteger(udg_hash, h, 4, armor);
	SaveInteger(udg_hash, h, 5, wait);
	SaveUnitHandle(udg_hash, h, 7, caster);
	SaveGroupHandle(udg_hash, h, 8, g);
	SaveReal(udg_hash, h, 9, xt);
	SaveReal(udg_hash, h, $A, yt);
	TimerStart(t, .0, false, Trig_Toxic_Field_Move_Actions);
	RemoveLocation(loc);
}
boolean Trig_Toxic_Field_Conditions() {
	return GetSpellAbilityId() == 'A0QD';
}
nothing InitTrig_Toxic_Field() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Toxic_Field, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Toxic_Field, Condition(Trig_Toxic_Field_Conditions));
	TriggerAddAction(gg_trg_Toxic_Field, Trig_Toxic_Field_Actions);
}
nothing Trig_Poison_Bomb_MOVE_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	unit target = LoadUnitHandle(udg_hash, h, 8);
	real xload = LoadReal(udg_hash, h, 16);
	real yload = LoadReal(udg_hash, h, 17);
	integer count = LoadInteger(udg_hash, h, 5);
	unit orb = LoadUnitHandle(udg_hash, h, 6);
	unit target2;
	real stuntime;
	real heal;
	group gdamage;
	real height;
	effect ef;
	real x = GetUnitX(orb);
	real y = GetUnitY(orb);
	real xt;
	real yt;
	real xorb;
	real yorb;
	real angle;
	real dist;
	player p;
	group g;
	group grup;
	unit Picked;
	timer tef;
	integer hef;
	integer regen;
	boolean remove = false;
	boolean reselect = false;
	unit orb2;
	group gg;
	effect ef2;
	if (GetUnitState(target, UNIT_STATE_LIFE) > .405) {
	else
	}
	SetUnitPosition(orb, xorb, yorb);
	SetUnitFacing(orb, angle);
	if (dist < 21.) {
		SetUnitPosition(orb, xt, yt);
		GroupEnumUnitsInRange(gg, xt, yt, 150., null);
		while (true) {
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && GetUnitState(target, UNIT_STATE_LIFE) > .0 && IsUnitType(target, UNIT_TYPE_STRUCTURE) == false && IsUnitType(target, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(target) != 'h00U') {
				StunUnitTimed(Picked, stuntime);
			}
			GroupRemoveUnit(gg, Picked);
		}
		SaveInteger(udg_hash, h, 5, count);
	}
	if (reselect) {
		GroupEnumUnitsInRange(g, xt, yt, 500., null);
		while (true) {
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				GroupAddUnit(grup, Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
		RandomUnitFromGroup(1, grup);
		GroupAddGroup(udg_GroupRandomUnitFromGroup, g);
		if (target2 != null) {
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\AcidBomb\\BottleMissile.mdl", xt, yt));
			DestroyEffect(ef);
			RemoveUnit(orb);
			SetUnitScale(orb2, 1.5, 1.5, 1.5);
			SaveUnitHandle(udg_hash, h, 6, orb2);
			SaveEffectHandle(udg_hash, h, 7, ef2);
			SaveUnitHandle(udg_hash, h, 8, target2);
			SaveReal(udg_hash, h, 9, (dist / 3));
			SaveReal(udg_hash, h, 16, xt);
			SaveReal(udg_hash, h, 17, yt);
		else
		}
		GroupClear(g);
		DestroyGroup(g);
		GroupClear(grup);
		DestroyGroup(grup);
	}
	if (count <= 0) {
	}
	if (remove) {
		KillUnit(orb);
		DestroyEffect(ef);
		GroupClear(g);
		DestroyGroup(g);
		DestroyTimer(t);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
}
nothing Trig_Poison_Bomb_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	unit target = GetSpellTargetUnit();
	location loc;
	real xt;
	real yt;
	real angle;
	real dist;
	integer lvl = GetUnitAbilityLevel(caster, 'A0QF');
	real stuntime = 4.;
	integer count = 2 + (lvl * 2);
	unit orb = CreateUnit(p, 'h00U', x, y, .0);
	effect ef = AddSpecialEffectTarget("Abilities\\Spells\\Other\\AcidBomb\\BottleMissile.mdl", orb, "chest");
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	SetUnitScale(orb, 1.5, 1.5, 1.5);
	if (target == null) {
	else
	}
	SetUnitX(orb, x + 30. * Cos((angle) * bj_DEGTORAD));
	SetUnitY(orb, y + 30. * Sin((angle) * bj_DEGTORAD));
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 2, stuntime);
	SaveInteger(udg_hash, h, 5, count);
	SaveUnitHandle(udg_hash, h, 6, orb);
	SaveEffectHandle(udg_hash, h, 7, ef);
	SaveUnitHandle(udg_hash, h, 8, target);
	SaveReal(udg_hash, h, 16, xt);
	SaveReal(udg_hash, h, 17, yt);
	TimerStart(t, .03, true, Trig_Poison_Bomb_MOVE_Actions);
}
boolean Trig_Poison_Bomb_Conditions() {
	return GetSpellAbilityId() == 'A0QF';
}
nothing InitTrig_Poison_Bomb() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Poison_Bomb, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Poison_Bomb, Condition(Trig_Poison_Bomb_Conditions));
	TriggerAddAction(gg_trg_Poison_Bomb, Trig_Poison_Bomb_Actions);
}
nothing Trig_Learn_Ogre_Rage_Actions_Timer() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit hero = LoadUnitHandle(udg_hash, h, 1);
	texttag txt = LoadTextTagHandle(udg_hash, h, 2);
	real x = GetUnitX(hero);
	real y = GetUnitY(hero);
	boolean alife = LoadBoolean(udg_hash, h, 3);
	integer hhero = GetHandleId(hero);
	integer hpregenold = LoadInteger(udg_hash, hhero, $AE);
	integer asold = LoadInteger(udg_hash, hhero, $AF);
	integer lvl = GetUnitAbilityLevel(hero, 'A0QG');
	integer hpstack = R2I((((GetUnitState(hero, UNIT_STATE_MAX_LIFE) - GetUnitState(hero, UNIT_STATE_LIFE)) / GetUnitState(hero, UNIT_STATE_MAX_LIFE)) + .1) * $A);
	integer hpregennew = (1 + 1 * lvl) * hpstack;
	integer asnew = (2 + 3 * lvl) * hpstack;
	if ((GetUnitState(hero, UNIT_STATE_LIFE) < .405 && alife)) {
		SaveBoolean(udg_hash, h, 3, alife);
		SetTextTagVisibility(txt, false);
	}
	if ((GetUnitState(hero, UNIT_STATE_LIFE) > .405 && alife == false)) {
		SaveBoolean(udg_hash, h, 3, alife);
		SetTextTagVisibility(txt, true);
	}
	if ((GetUnitState(hero, UNIT_STATE_LIFE) > .405 && alife)) {
		if (hpstack >= 6 && LoadBoolean(udg_hash, h, $B0) == false) {
			SaveBoolean(udg_hash, h, $B0, true);
			AddUnitAnimationProperties(hero, "Alternate", true);
			PlaySoundBJ(gg_snd_AlchemistChemicalBurst1);
		}
		if (hpstack < 5 && LoadBoolean(udg_hash, h, $B0)) {
			SaveBoolean(udg_hash, h, $B0, false);
			AddUnitAnimationProperties(hero, "Alternate", false);
			PlaySoundBJ(gg_snd_AlchemistMorph1);
		}
		if (hpregennew != hpregenold) {
			SetUnitLifeAndManaRegeneration(hero, "life", (hpregennew - hpregenold));
			SaveInteger(udg_hash, hhero, $AE, hpregennew);
		}
		if (asnew != asold) {
			SetAttackSpeedAbilityLevel(hero, (asnew - asold));
			SaveInteger(udg_hash, hhero, $AF, asnew);
		}
		SetTextTagText(txt, "|cff006400" + I2S(hpstack) + "|r|cFF969696/|r|cff00640010|r", .033);
		SetTextTagPos(txt, GetUnitX(hero) - 40., GetUnitY(hero) + 50., .0);
	}
}
nothing Trig_Learn_Ogre_Rage_Actions() {
	integer lvl = GetUnitAbilityLevel(GetLearningUnit(), 'A0QG');
	timer t;
	integer h;
	texttag txt;
	unit hero = GetLearningUnit();
	if (lvl == 1) {
		SetTextTagText(txt, "|cff006400" + I2S(0) + "|r|cFF969696/|r|cff00640010|r", .033);
		SetTextTagColor(txt, $FF, $FF, $FF, $FF);
		SetTextTagPos(txt, GetUnitX(hero) - 40., GetUnitY(hero) + 50., .0);
		SetTextTagPermanent(txt, true);
		SaveUnitHandle(udg_hash, h, 1, hero);
		SaveTextTagHandle(udg_hash, h, 2, txt);
		SaveBoolean(udg_hash, h, 3, true);
		TimerStart(t, .03, true, Trig_Learn_Ogre_Rage_Actions_Timer);
	}
}
boolean Trig_Learn_Ogre_Rage_Conditions() {
	return GetUnitTypeId(GetLearningUnit()) != 'h00U' && GetLearnedSkill() == 'A0QG';
}
nothing InitTrig_Learn_Ogre_Rage() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Ogre_Rage, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Learn_Ogre_Rage, Condition(Trig_Learn_Ogre_Rage_Conditions));
	TriggerAddAction(gg_trg_Learn_Ogre_Rage, Trig_Learn_Ogre_Rage_Actions);
}
nothing Trig_Potion_of_Growth_Periodic_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	integer str = LoadInteger(udg_hash, h, 2);
	integer wait = LoadInteger(udg_hash, h, 3);
	integer wait2 = LoadInteger(udg_hash, h, 4);
	real percent;
	if (wait > 0) {
		SaveInteger(udg_hash, h, 3, wait);
		if (wait >= $A) {
			SetHeroStr(caster, GetHeroStr(caster, false) + str, true);
			SetUnitState(caster, UNIT_STATE_LIFE, GetUnitState(caster, UNIT_STATE_MAX_LIFE) * percent);
			SetUnitScale(caster, .9 + (20 - wait) * .05, .9 + (20 - wait) * .05, .9 + (20 - wait) * .05);
		}
	else
		if (wait2 == 20) {
			TimerStart(t, .05, true, Trig_Potion_of_Growth_Periodic_Actions);
		}
		if (wait2 > 0) {
			SaveInteger(udg_hash, h, 4, wait2);
			SetUnitScale(caster, 1.4 - ((20 - wait2) * .025), 1.4 - ((20 - wait2) * .025), 1.4 - ((20 - wait2) * .025));
		}
		if (wait2 == 0) {
			SetHeroStr(caster, GetHeroStr(caster, false) - (str * $A), true);
			SetUnitState(caster, UNIT_STATE_LIFE, GetUnitState(caster, UNIT_STATE_MAX_LIFE) * percent);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\ManaBurn\\ManaBurnTarget.mdl", caster, "origin"));
			FlushChildHashtable(udg_hash, h);
			DestroyTimer(t);
		}
	}
}
nothing Trig_Potion_of_Growth_Actions() {
	unit caster = GetSpellAbilityUnit();
	integer wait = 20;
	integer lvl = GetUnitAbilityLevel(caster, 'A0QH');
	integer str = (5 + 5 * lvl);
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	PlaySoundBJ(gg_snd_HeroAlchemistYesAttack1);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveInteger(udg_hash, h, 2, str);
	SaveInteger(udg_hash, h, 3, wait);
	SaveInteger(udg_hash, h, 4, 20);
	TimerStart(t, 1., true, Trig_Potion_of_Growth_Periodic_Actions);
}
boolean Trig_Potion_of_Growth_Conditions() {
	return GetSpellAbilityId() == 'A0QH';
}
nothing InitTrig_Potion_of_Growth() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Potion_of_Growth, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Potion_of_Growth, Condition(Trig_Potion_of_Growth_Conditions));
	TriggerAddAction(gg_trg_Potion_of_Growth, Trig_Potion_of_Growth_Actions);
}
nothing Trig_Load_Alchemist_Actions() {
	AbilityPreload('A0QD', 6);
	AbilityPreload('A0QF', 6);
	AbilityPreload('A0QG', 6);
	AbilityPreload('A0QH', 3);
	AbilityPreload('A0QE', 1);
	AbilityPreload('B058', 1);
	EffectPreload("Effects\\ToxicField.mdx");
	EffectPreload("Abilities\\Spells\\Other\\AcidBomb\\BottleMissile.mdl");
	EffectPreload("Abilities\\Spells\\NightElf\\ManaBurn\\ManaBurnTarget.mdl");
	EffectPreload("Abilities\\Weapons\\PoisonSting\\PoisonStingTarget.mdl");
	EnableTrigger(gg_trg_Toxic_Field);
	EnableTrigger(gg_trg_Poison_Bomb);
	EnableTrigger(gg_trg_Learn_Ogre_Rage);
	EnableTrigger(gg_trg_Potion_of_Growth);
}
nothing InitTrig_Load_Alchemist() {
	TriggerAddAction(gg_trg_Load_Alchemist, Trig_Load_Alchemist_Actions);
}
nothing Trig_Case_Shot_Move_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	group gdamage;
	real damage;
	effect ef;
	integer wait = LoadInteger(udg_hash, h, 5);
	real angle = LoadReal(udg_hash, h, 6);
	unit dagger = LoadUnitHandle(udg_hash, h, 7);
	integer lvl;
	real x = GetUnitX(dagger) + 40. * Cos((angle) * bj_DEGTORAD);
	real y = GetUnitY(dagger) + 40. * Sin((angle) * bj_DEGTORAD);
	player p = GetOwningPlayer(caster);
	group g = CreateGroup();
	unit Picked;
	real dist;
	boolean dest = false;
	boolean explode = false;
	unit dammi;
	real angle2;
	if (wait > 0) {
		SaveInteger(udg_hash, h, 5, wait);
		SetUnitPosition(dagger, x, y);
		GroupEnumUnitsInRange(g, x, y, 125., null);
		while (true) {
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			}
			GroupRemoveUnit(g, Picked);
		}
		GroupClear(g);
		DestroyGroup(g);
	else
	}
	if (explode) {
		GroupEnumUnitsInRange(gdamage, x, y, 300., null);
		while (true) {
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Rifle\\RifleImpact.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GyroCopter\\GyroCopterImpact.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPeasant.mdl", Picked, "origin"));
				UnitApplyTimedLife(dammi, 'BTLF', 1.);
				UnitAddAbility(dammi, 'A0QS');
				SetUnitAbilityLevel(dammi, 'A0QS', lvl);
				IssueTargetOrderById(dammi, $D006B, Picked);
				MoveUnit(Picked, 1., 600., 600., angle2, .0, false);
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			}
			GroupRemoveUnit(gdamage, Picked);
		}
		GroupClear(gdamage);
		DestroyGroup(gdamage);
	}
	if (dest) {
		DestroyEffect(ef);
		DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\CannonTowerMissile\\CannonTowerMissile.mdl", x, y));
		KillUnit(dagger);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
}
nothing Trig_Case_Shot_Actions() {
	unit caster = GetSpellAbilityUnit();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	unit target = GetSpellTargetUnit();
	real angle;
	group gdamage = CreateGroup();
	integer lvl = GetUnitAbilityLevel(caster, 'A0QR');
	real damage = (20. * lvl) + 10.;
	location loc;
	real tx;
	real ty;
	real dist;
	unit dagger;
	effect ef;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	if (target == null) {
	else
	}
	if (target == caster) {
	}
	SetUnitX(dagger, x + 20. * Cos((angle) * bj_DEGTORAD));
	SetUnitY(dagger, y + 20. * Sin((angle) * bj_DEGTORAD));
	SetUnitTimeScale(dagger, 2.);
	SetUnitScale(dagger, 1.5, 1.5, 1.5);
	SetUnitPathing(dagger, false);
	SetUnitFlyHeight(dagger, 50., .0);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveGroupHandle(udg_hash, h, 2, gdamage);
	SaveReal(udg_hash, h, 3, damage);
	SaveEffectHandle(udg_hash, h, 4, ef);
	SaveInteger(udg_hash, h, 5, R2I(900. / 40));
	SaveReal(udg_hash, h, 6, angle);
	SaveUnitHandle(udg_hash, h, 7, dagger);
	SaveInteger(udg_hash, h, 9, lvl);
	TimerStart(t, .03, true, Trig_Case_Shot_Move_Actions);
	RemoveLocation(loc);
}
boolean Trig_Case_Shot_Conditions() {
	return GetSpellAbilityId() == 'A0QR';
}
nothing InitTrig_Case_Shot() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Case_Shot, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Case_Shot, Condition(Trig_Case_Shot_Conditions));
	TriggerAddAction(gg_trg_Case_Shot, Trig_Case_Shot_Actions);
}
nothing Trig_Learn_Fire_Position_Actions_Timer() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit hero = LoadUnitHandle(udg_hash, h, 1);
	real time = LoadReal(udg_hash, h, 2);
	real x = GetUnitX(hero);
	real y = GetUnitY(hero);
	boolean alife = LoadBoolean(udg_hash, h, 3);
	boolean circlego = LoadBoolean(udg_hash, h, 4);
	boolean maximum = LoadBoolean(udg_hash, h, 9);
	real xold = LoadReal(udg_hash, h, 5);
	real yold = LoadReal(udg_hash, h, 6);
	real xnew;
	real ynew;
	integer hhero = GetHandleId(hero);
	integer attackold = LoadInteger(udg_hash, hhero, $B2);
	integer lvl = GetUnitAbilityLevel(hero, 'A0QV');
	integer attackstack;
	integer attacknew;
	effect ef;
	unit dammi;
	if ((GetUnitState(hero, UNIT_STATE_LIFE) > .405 && alife)) {
		if (RAbsBJ(xnew - xold) < 125. && RAbsBJ(ynew - yold) < 125.) {
			if (time < 10.) {
				SaveReal(udg_hash, h, 2, time);
			}
			if (time >= 3.) {
				if (circlego == false) {
					SaveBoolean(udg_hash, h, 4, circlego);
					SetUnitScale(dammi, 3., 3., 3.);
					SaveEffectHandle(udg_hash, h, 7, ef);
					SaveUnitHandle(udg_hash, h, $A, dammi);
					AddProgressBar(hero, 230., 1.1, 7., true, true, 'v', $C0, $C0, $C0);
				}
				if (maximum == false && time >= 10.) {
					SaveBoolean(udg_hash, h, 9, maximum);
					SaveBoolean(udg_hash, GetHandleId(hero), $B3, true);
					SaveEffectHandle(udg_hash, h, 8, ef);
				}
				if (attackold != attacknew) {
					SetAttackAbilityLevel(hero, attacknew - attackold);
					SetAttackSpeedAbilityLevel(hero, attacknew - attackold);
					SaveInteger(udg_hash, hhero, $B2, attacknew);
				}
			}
		else
			SaveReal(udg_hash, h, 5, xold);
			SaveReal(udg_hash, h, 6, yold);
			if (time >= 3.) {
				SetAttackAbilityLevel(hero, -attackold);
				SetAttackSpeedAbilityLevel(hero, -attackold);
				SaveInteger(udg_hash, hhero, $B2, 0);
				if (circlego) {
					SaveBoolean(udg_hash, h, 4, circlego);
					DestroyEffect(ef);
					KillUnit(dammi);
					RemoveUnit(LoadUnitHandle(udg_hash, GetHandleId(hero), 'v'));
				}
				if (maximum) {
					SaveBoolean(udg_hash, h, 9, maximum);
					SaveBoolean(udg_hash, GetHandleId(hero), $B3, false);
					DestroyEffect(ef);
				}
			}
			SaveReal(udg_hash, h, 2, time);
		}
	}
}
nothing Trig_Learn_Fire_Position_Actions() {
	integer lvl = GetUnitAbilityLevel(GetLearningUnit(), 'A0QV');
	timer t;
	integer h;
	unit hero = GetLearningUnit();
	if (lvl == 1) {
		SaveUnitHandle(udg_hash, h, 1, hero);
		SaveReal(udg_hash, h, 2, .0);
		SaveBoolean(udg_hash, h, 3, true);
		SaveBoolean(udg_hash, h, 4, false);
		SaveReal(udg_hash, h, 5, GetUnitX(hero));
		SaveReal(udg_hash, h, 6, GetUnitY(hero));
		SaveBoolean(udg_hash, h, 9, false);
		TimerStart(t, .1, true, Trig_Learn_Fire_Position_Actions_Timer);
	}
}
boolean Trig_Learn_Fire_Position_Conditions() {
	return GetUnitTypeId(GetLearningUnit()) != 'h00U' && GetLearnedSkill() == 'A0QV' && IsUnitIllusion(GetLearningUnit()) == false;
}
nothing InitTrig_Learn_Fire_Position() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Fire_Position, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Learn_Fire_Position, Condition(Trig_Learn_Fire_Position_Conditions));
	TriggerAddAction(gg_trg_Learn_Fire_Position, Trig_Learn_Fire_Position_Actions);
}
nothing Trig_Dwarf_Cannon_Move_Actions() {
	timer t = GetExpiredTimer();
	integer h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	integer order = GetUnitCurrentOrder(caster);
	integer orderId;
	integer wait1 = LoadInteger(udg_hash, h, 20);
	unit dagger;
	group gdamage;
	real x;
	real y;
	real angle;
	effect ef;
	integer wait = LoadInteger(udg_hash, h, 19);
	player p;
	real damage;
	real stuntime;
	group g;
	unit Picked;
	boolean dest = false;
	if ((orderId != 0)) {
	else
		if ((orderId != 0)) {
		}
	}
	if (order == orderId && wait1 > 0) {
		SaveInteger(udg_hash, h, 20, wait1);
		if (wait1 == 0) {
			SetUnitTimeScale(caster, 1.);
			SetUnitX(dagger, x + 20. * Cos((angle) * bj_DEGTORAD));
			SetUnitY(dagger, y + 20. * Sin((angle) * bj_DEGTORAD));
			SetUnitTimeScale(dagger, 2.);
			SetUnitScale(dagger, 2., 2., 2.);
			SetUnitPathing(dagger, false);
			SetUnitFlyHeight(dagger, 50., .0);
			SaveUnitHandle(udg_hash, h, $A, dagger);
			SaveEffectHandle(udg_hash, h, $B, ef);
			RemoveUnit(LoadUnitHandle(udg_hash, GetHandleId(caster), 'u'));
			SaveBoolean(udg_hash, h, 21, true);
		}
	}
	if (order != orderId && wait1 > 0 && LoadBoolean(udg_hash, h, 21) == false) {
		SetUnitTimeScale(caster, 1.);
		RemoveUnit(LoadUnitHandle(udg_hash, GetHandleId(caster), 'u'));
	}
	if (LoadBoolean(udg_hash, h, 21) && wait > 0) {
		SaveInteger(udg_hash, h, 19, wait);
		SetUnitPosition(dagger, GetUnitX(dagger) + 50. * Cos((angle) * bj_DEGTORAD), GetUnitY(dagger) + 50. * Sin((angle) * bj_DEGTORAD));
		GroupEnumUnitsInRange(g, GetUnitX(dagger) + 50. * Cos((angle) * bj_DEGTORAD), GetUnitY(dagger) + 50. * Sin((angle) * bj_DEGTORAD), 200., null);
		while (true) {
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && IsUnitInGroup(Picked, gdamage) == false && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Rifle\\RifleImpact.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GyroCopter\\GyroCopterImpact.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPeasant.mdl", Picked, "origin"));
				StunUnitTimed(Picked, stuntime);
				GroupAddUnit(gdamage, Picked);
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			}
			GroupRemoveUnit(g, Picked);
		}
		SaveGroupHandle(udg_hash, h, 2, gdamage);
		GroupClear(g);
		DestroyGroup(g);
	}
	if (LoadBoolean(udg_hash, h, 21) && wait <= 0) {
	}
	if (dest) {
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		DestroyEffect(ef);
		DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\Mortar\\MortarMissile.mdl", GetUnitX(dagger), GetUnitY(dagger)));
		KillUnit(dagger);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
}
nothing Trig_Dwarf_Cannon_Actions() {
	unit caster = GetSpellAbilityUnit();
	real x = GetUnitX(caster);
	real y = GetUnitY(caster);
	unit target = GetSpellTargetUnit();
	real angle;
	group gdamage = CreateGroup();
	integer lvl = GetUnitAbilityLevel(caster, 'A0QU');
	real damage = (150. * lvl) + 50.;
	real stuntime = 1. + 1. * lvl;
	location loc;
	real tx;
	real ty;
	real dist;
	unit dagger;
	timer t = CreateTimer();
	integer h = GetHandleId(t);
	SetUnitTimeScale(caster, .15);
	SetUnitAnimationByIndex(caster, 3);
	if (target == null) {
	else
	}
	AddProgressBar(caster, 200., 1., 1.5, false, true, 'u', $C0, $C0, $C0);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveGroupHandle(udg_hash, h, 2, gdamage);
	SaveReal(udg_hash, h, 3, damage);
	SaveReal(udg_hash, h, 4, x);
	SaveReal(udg_hash, h, 5, y);
	SaveReal(udg_hash, h, 6, stuntime);
	SaveReal(udg_hash, h, 7, angle);
	SaveInteger(udg_hash, h, 9, lvl);
	SaveInteger(udg_hash, h, 19, 30);
	SaveInteger(udg_hash, h, 20, 50);
	SaveBoolean(udg_hash, h, 21, false);
	TimerStart(t, .03, true, Trig_Dwarf_Cannon_Move_Actions);
	RemoveLocation(loc);
}
boolean Trig_Dwarf_Cannon_Conditions() {
	return GetSpellAbilityId() == 'A0QU';
}
nothing InitTrig_Dwarf_Cannon() {
	integer index = 0;
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Dwarf_Cannon, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Dwarf_Cannon, Condition(Trig_Dwarf_Cannon_Conditions));
	TriggerAddAction(gg_trg_Dwarf_Cannon, Trig_Dwarf_Cannon_Actions);
}
nothing Trig_Load_Sniper_Actions() {
	AbilityPreload('A0QR', 6);
	AbilityPreload('A0QV', 6);
	AbilityPreload('A0QT', 6);
	AbilityPreload('A0QU', 3);
	AbilityPreload('A0QS', 6);
	AbilityPreload('B05A', 1);
	EffectPreload("Abilities\\Weapons\\SteamTank\\SteamTankImpact.mdl");
	EffectPreload("Abilities\\Weapons\\GyroCopter\\GyroCopterMissile.mdl");
	EffectPreload("Abilities\\Weapons\\GyroCopter\\GyroCopterImpact.mdl");
	EffectPreload("Abilities\\Weapons\\CannonTowerMissile\\CannonTowerMissile.mdl");
	EffectPreload("Abilities\\Weapons\\Rifle\\RifleImpact.mdl");
	EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPeasant.mdl");
	EffectPreload("Effects\\Fire Uber.mdx");
	EffectPreload("Effects\\CircleOutBuff.mdx");
	EffectPreload("Abilities\\Weapons\\Mortar\\MortarMissile.mdl");
	EnableTrigger(gg_trg_Case_Shot);
	EnableTrigger(gg_trg_Learn_Fire_Position);
	EnableTrigger(gg_trg_Dwarf_Cannon);
}
nothing InitTrig_Load_Sniper() {
	TriggerAddAction(gg_trg_Load_Sniper, Trig_Load_Sniper_Actions);
}
nothing InitCustomTriggers() {
	InitTrig_Players_Start_Script();
	InitTrig_InitMap();
	InitTrig_InitMapStage2();
	InitTrig_System_Spells_Load();
	InitTrig_Items_Preload();
	InitTrig_Igrok_Massiv_Save();
	InitTrig_Load_Vsiakoe();
	InitTrig_Igrok_Massiv_Liver();
	InitTrig_Messager();
	InitTrig_Create_TExttags_about_Shops();
	InitTrig_InitHashtable();
	InitTrig_Save_Sounds();
	InitTrig_HandleCounter();
	InitTrig_Set_Chlenix();
	InitTrig_Set_Energy_Walls();
	InitTrig_Nachalo_Eiti_aren();
	InitTrig_HeroDeadonEitiArena();
	InitTrig__PortalCheckTop();
	InitTrig__PortalCheckBot();
	InitTrig_LinkItemsInit();
	InitTrig_ItemPickedUp();
	InitTrig_ChargesConnecting();
	InitTrig_Remove_Dammi_Items();
	InitTrig_Save_Items_Cost();
	InitTrig_Ice_Boss();
	InitTrig_Ice_Wall();
	InitTrig_Ice_Storm();
	InitTrig_Ice_Rain();
	InitTrig_Cold_Punishment();
	InitTrig_Ice_Restoration();
	InitTrig_BossStart();
	InitTrig_FlameSpells();
	InitTrig_Fire_Circle();
	InitTrig_Fire_Meteor();
	InitTrig_Upgrade_Summons();
	InitTrig_UseBeornSpells();
	InitTrig_Start_Beorn_Den();
	InitTrig_Beorn_Push();
	InitTrig_Beorn_Stomp();
	InitTrig_HeroUnitGameSave();
	InitTrig_INIT();
	InitTrig_Pick_Hero_Upgrade();
	InitTrig_Hero_Dead();
	InitTrig_Start_Duel();
	InitTrig_Hero_Death_On_Duel();
	InitTrig_Timer_Check();
	InitTrig_go_mochiytb_portal();
	InitTrig_Start_game();
	InitTrig_StartWave();
	InitTrig_MobsAttackBase();
	InitTrig_TeleportStuckedCreeps();
	InitTrig_vhodit_v_zony();
	InitTrig_Add_Gold_System_Receiving_Gold_for_Creeps();
	InitTrig_Init_System_Receiving_Gold_for_Creeps();
	InitTrig_Init_System_Receiving_Experience_for_Creeps();
	InitTrig_Add_Experience_System_Receiving_Experience_for_Creeps();
	InitTrig_Init_Potion_System();
	InitTrig_Mob_Dead_Create_Potion();
	InitTrig_Check_Potion_Picked_Up();
	InitTrig_InitSystem();
	InitTrig_EnterUnit();
	InitTrig_AddDamage();
	InitTrig_TimeTalisman();
	InitTrig_Take_Paladin_Armor();
	InitTrig_Take_Archimagus_Staff();
	InitTrig_Lost_Charged_Staff_of_Lightning();
	InitTrig_Blood_Bow();
	InitTrig_Balance_Ring();
	InitTrig_Armageddon_Staff();
	InitTrig_Sargeras_Crown();
	InitTrig_Lost_Sargeras_Crown();
	InitTrig_Take_Sargeras_Crown();
	InitTrig_Lost_Archimagus_Armor();
	InitTrig_Take_Archimagus_Armor();
	InitTrig_Sorcerers_Talisman_Cast();
	InitTrig_Sorcerers_Talisman();
	InitTrig_Sorcerers_Talisman_Dead_Unit();
	InitTrig_Orc_Banner();
	InitTrig_Devil_Axe();
	InitTrig_Devil_Axe_Kill_Unit();
	InitTrig_Tokugawas_Katan_Kill_Unit();
	InitTrig_Tokugawas_Katan();
	InitTrig_Kings_Armor();
	InitTrig_Steel_Bib();
	InitTrig_Archimagus_Staff();
	InitTrig_Isidors_Scepter();
	InitTrig_Detached_Shield_Use();
	InitTrig_Cuirass_of_Invulnerable_Use2();
	InitTrig_Lost_Cuirass_of_Invulnerable();
	InitTrig_Take_Cuirass_of_Invulnerable();
	InitTrig_Fire_Staff();
	InitTrig_Demon_Axe();
	InitTrig_Demon_Axe_Kill_Unit();
	InitTrig_Boots_Rescue();
	InitTrig_Astral_Staff();
	InitTrig_Healer_Staff();
	InitTrig_Magic_Amulet();
	InitTrig_Blood_Dagger();
	InitTrig_Agility_Blade();
	InitTrig_Bone_Staff_Set_Summon_Ability_Level();
	InitTrig_Novice_Amulet();
	InitTrig_Glove_of_Andromat();
	InitTrig_Glove_of_Midas();
	InitTrig_Heroes_more_attacked_priority_when_guards();
	InitTrig_Player_Fast_Purchase_System();
	InitTrig_Show_hint_abount_hints();
	InitTrig_Show_Hint_Abount_Items();
	InitTrig_Hint_About_Random();
	InitTrig_Show_hint_abount_reference_panel();
	InitTrig_Show_Ability_Learn();
	InitTrig_System_Personal_Items_Buy_Item();
	InitTrig_System_Personal_Items_Pick_Up_Item();
	InitTrig_no_attack();
	InitTrig_Select_Refrence_Panel();
	InitTrig_ShopAnimation();
	InitTrig_ShopStopAnimation();
	InitTrig_RedMarkToUnit();
	InitTrig_UnSelectedDummyRedMark();
	InitTrig_SpecEffect_on_Casters();
	InitTrig_PortalSpecEffects();
	InitTrig_Gates_Start_Animation();
	InitTrig_PlayerEnterGameCommand();
	InitTrig_PlayerUseSpellGameCommand();
	InitTrig_GuardsExorcistDead();
	InitTrig_PauseUnitWhenDefeat();
	InitTrig_PauseUnitWhenWin();
	InitTrig_GameEndWin();
	InitTrig_Respawn_trees_Init();
	InitTrig_Respawn_trees();
	InitTrig_Day_Weather();
	InitTrig_Sky_Morning();
	InitTrig_Sky_Day();
	InitTrig_Night_Weather();
	InitTrig_Sky_Evening();
	InitTrig_Sky_Night();
	InitTrig_Lightnings_Weather_Effect_Rainy();
	InitTrig_Periodic_Rune_Creation();
	InitTrig_Rune_PickedUp();
	InitTrig_Initialization_MultiBoard();
	InitTrig_Hero_MultiBoard_LvlUp();
	InitTrig_Time_Check_and_Player_Gold_for_MultiBoard();
	InitTrig_Reincarnation_Skeletons();
	InitTrig_BossSkeletRaise();
	InitTrig_BossSkeletSkillActiv();
	InitTrig_Fire_Arrow();
	InitTrig_Use_UnholyFrenzy_and_Fire_Arrow();
	InitTrig_Create_Tombstone();
	InitTrig_ZombieExploadDeath();
	InitTrig_Damned_Soul();
	InitTrig_Use_PowerofHorror_and_Curse_and_Slam_and_Dumned_Soul();
	InitTrig_Throw_Meat();
	InitTrig_Earth_Clap();
	InitTrig_Ghoul_Jump();
	InitTrig_BurrowStrike();
	InitTrig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump();
	InitTrig_BeetleCorpseBurrowCast();
	InitTrig_BeetleCorpseBurrow();
	InitTrig_Cocoon_Creation();
	InitTrig_Poisonous_Spittle_Cast();
	InitTrig_Holes_Of_Grave_Diggers_Debug_Kill();
	InitTrig_Holes_Of_Grave_Diggers_Cast();
	InitTrig_Nerub_Spider();
	InitTrig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger();
	InitTrig_Damned_Ents_Reincarnation();
	InitTrig_Rage_of_Decay();
	InitTrig_Use_ThrowStone_and_TurnIntoEnt();
	InitTrig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay();
	InitTrig_Troll_Dead_Remove_Bugs();
	InitTrig_Boss_Troll_Entangle_Throw();
	InitTrig_Use_Berserk_and_BerserkBoss();
	InitTrig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle();
	InitTrig_Aspect_of_Magic_Protection();
	InitTrig_Remove_Effects_From_Bosses();
	InitTrig_Metka_Dreneev();
	InitTrig_Fast_Attack();
	InitTrig_Bash_Attack();
	InitTrig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack();
	InitTrig_Blink_Strike();
	InitTrig_Victim_Search();
	InitTrig_Black_Hole();
	InitTrig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar();
	InitTrig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH();
	InitTrig_Weakness();
	InitTrig_Astral_Dispersal();
	InitTrig_Infernal_Ram();
	InitTrig_Fiery_Blow();
	InitTrig_Bloody_Jump();
	InitTrig_Blood_Absorption();
	InitTrig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u();
	InitTrig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4();
	InitTrig_Hatred_of_fire();
	InitTrig_set_fire();
	InitTrig_set_fire_2();
	InitTrig_the_creation_of_the_image();
	InitTrig_fiery_explosions();
	InitTrig_Breathoffire();
	InitTrig_Fire_Explosions();
	InitTrig_BossStomp();
	InitTrig_Mark_of_Fire();
	InitTrig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire();
	InitTrig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp();
	InitTrig_Power_of_Skeletons();
	InitTrig_Water_Elemental_Load();
	InitTrig_Init_kreeps();
	InitTrig_spirits_of_water_dead();
	InitTrig_Skill_Gertva();
	InitTrig_Opening_Streams();
	InitTrig_Water_Explosion();
	InitTrig_Tsunami();
	InitTrig_Guardsman_Load();
	InitTrig_Protective_Stand_Switch();
	InitTrig_Learn_Fighting_Skills();
	InitTrig_Ram_Board();
	InitTrig_Warcry();
	InitTrig_Drenor_Bull_Load();
	InitTrig_Drenor_Bull_Show_Hint();
	InitTrig_Drenor_Bull_Show_Rage();
	InitTrig_Axe_Throw();
	InitTrig_Violent_Roar();
	InitTrig_upgrade_Berserk();
	InitTrig_Learn_Spell_Rage();
	InitTrig_GrogTarDead();
	InitTrig_attack_hero_Rage();
	InitTrig_kill_hero_Rage();
	InitTrig_Sniatie_Rage();
	InitTrig_Timer_Rage();
	InitTrig_Illusionist_Load();
	InitTrig_Reflection();
	InitTrig_Illusory_Attack();
	InitTrig_Summon_Illusions_with_Reflection();
	InitTrig_Illusions_with_Phantoms_Dead();
	InitTrig_BladeMaster_Load();
	InitTrig_Dissection();
	InitTrig_Whirlwind();
	InitTrig_Imboweling();
	InitTrig_Master_of_Lightnings_Load();
	InitTrig_Thundercloud();
	InitTrig_Power_of_Lightnings();
	InitTrig_Electric_Field();
	InitTrig_Storm();
	InitTrig_Respawnlol();
	InitTrig_Ranger_Load();
	InitTrig_MultiShotSwitch();
	InitTrig_Learn_Release_of_Arrows();
	InitTrig_Release_of_Arrows();
	InitTrig_Dexterity_of_the_Ranger();
	InitTrig_Healer_Load();
	InitTrig_Good_Healing();
	InitTrig_Spiritual_Communication();
	InitTrig_Curing_Light();
	InitTrig_Guardian_Angel();
	InitTrig_Paladin_Load();
	InitTrig_Spiral_of_Light();
	InitTrig_Keeper_Seal();
	InitTrig_Light_Hammer();
	InitTrig_God_Hand();
	InitTrig_Stone_Guard_Load();
	InitTrig_Boulder_Throw();
	InitTrig_Earth_Shiver();
	InitTrig_Learn_Stone_Armor();
	InitTrig_Rock_Strike();
	InitTrig_Archdruid_Load();
	InitTrig_Energy_of_Nature();
	InitTrig_Life_Chain();
	InitTrig_Ent_Creation();
	InitTrig_Nature_Wrath();
	InitTrig_Falling_Star();
	InitTrig_Moon_Chackram();
	InitTrig_Moon_Wind();
	InitTrig_Night_Heart();
	InitTrig_MoonWarrior_Load();
	InitTrig_Ancient_Communication();
	InitTrig_Learn_Power_of_Ancestors();
	InitTrig_Switch_Power_of_Ancestors();
	InitTrig_Earth_Split();
	InitTrig_Ancient_Help();
	InitTrig_SpiritBreaker_Load();
	InitTrig_Dash();
	InitTrig_Dagger_Throw();
	InitTrig_Kara_Justice();
	InitTrig_Warden_Load();
	InitTrig_Strength_Fist();
	InitTrig_Fighting_Impact();
	InitTrig_Learn_Marshal_Armor();
	InitTrig_Illusive_Army();
	InitTrig_Marshal_Load();
	InitTrig_Chain_Lightning();
	InitTrig_Magic_Trap();
	InitTrig_Remove_Lightning_Form_Dead_Units();
	InitTrig_EnergyWave();
	InitTrig_Magic_Epicenter();
	InitTrig_Load_ArchMage();
	InitTrig_Toxic_Field();
	InitTrig_Poison_Bomb();
	InitTrig_Learn_Ogre_Rage();
	InitTrig_Potion_of_Growth();
	InitTrig_Load_Alchemist();
	InitTrig_Case_Shot();
	InitTrig_Learn_Fire_Position();
	InitTrig_Dwarf_Cannon();
	InitTrig_Load_Sniper();
}
nothing RunInitializationTriggers() {
	ConditionalTriggerExecute(gg_trg_InitHashtable);
	ConditionalTriggerExecute(gg_trg_InitSystem);
	ConditionalTriggerExecute(gg_trg_Init_kreeps);
	ConditionalTriggerExecute(gg_trg_Drenor_Bull_Load);
}
nothing InitCustomPlayerSlots() {
	SetPlayerStartLocation(Player(0), 0);
	ForcePlayerStartLocation(Player(0), 0);
	SetPlayerColor(Player(0), ConvertPlayerColor(0));
	SetPlayerRacePreference(Player(0), RACE_PREF_HUMAN);
	SetPlayerRaceSelectable(Player(0), false);
	SetPlayerController(Player(0), MAP_CONTROL_USER);
	SetPlayerStartLocation(Player(1), 1);
	ForcePlayerStartLocation(Player(1), 1);
	SetPlayerColor(Player(1), ConvertPlayerColor(1));
	SetPlayerRacePreference(Player(1), RACE_PREF_HUMAN);
	SetPlayerRaceSelectable(Player(1), false);
	SetPlayerController(Player(1), MAP_CONTROL_USER);
	SetPlayerStartLocation(Player(2), 2);
	ForcePlayerStartLocation(Player(2), 2);
	SetPlayerColor(Player(2), ConvertPlayerColor(2));
	SetPlayerRacePreference(Player(2), RACE_PREF_HUMAN);
	SetPlayerRaceSelectable(Player(2), false);
	SetPlayerController(Player(2), MAP_CONTROL_USER);
	SetPlayerStartLocation(Player(3), 3);
	ForcePlayerStartLocation(Player(3), 3);
	SetPlayerColor(Player(3), ConvertPlayerColor(3));
	SetPlayerRacePreference(Player(3), RACE_PREF_HUMAN);
	SetPlayerRaceSelectable(Player(3), false);
	SetPlayerController(Player(3), MAP_CONTROL_USER);
	SetPlayerStartLocation(Player(4), 4);
	ForcePlayerStartLocation(Player(4), 4);
	SetPlayerColor(Player(4), ConvertPlayerColor(4));
	SetPlayerRacePreference(Player(4), RACE_PREF_HUMAN);
	SetPlayerRaceSelectable(Player(4), false);
	SetPlayerController(Player(4), MAP_CONTROL_USER);
	SetPlayerStartLocation(Player(5), 5);
	ForcePlayerStartLocation(Player(5), 5);
	SetPlayerColor(Player(5), ConvertPlayerColor(5));
	SetPlayerRacePreference(Player(5), RACE_PREF_HUMAN);
	SetPlayerRaceSelectable(Player(5), false);
	SetPlayerController(Player(5), MAP_CONTROL_USER);
	SetPlayerStartLocation(Player(6), 6);
	ForcePlayerStartLocation(Player(6), 6);
	SetPlayerColor(Player(6), ConvertPlayerColor(6));
	SetPlayerRacePreference(Player(6), RACE_PREF_HUMAN);
	SetPlayerRaceSelectable(Player(6), false);
	SetPlayerController(Player(6), MAP_CONTROL_USER);
	SetPlayerStartLocation(Player(7), 7);
	ForcePlayerStartLocation(Player(7), 7);
	SetPlayerColor(Player(7), ConvertPlayerColor(7));
	SetPlayerRacePreference(Player(7), RACE_PREF_HUMAN);
	SetPlayerRaceSelectable(Player(7), false);
	SetPlayerController(Player(7), MAP_CONTROL_USER);
	SetPlayerStartLocation(Player(8), 8);
	ForcePlayerStartLocation(Player(8), 8);
	SetPlayerColor(Player(8), ConvertPlayerColor(8));
	SetPlayerRacePreference(Player(8), RACE_PREF_HUMAN);
	SetPlayerRaceSelectable(Player(8), false);
	SetPlayerController(Player(8), MAP_CONTROL_USER);
	SetPlayerStartLocation(Player($B), 9);
	ForcePlayerStartLocation(Player($B), 9);
	SetPlayerColor(Player($B), ConvertPlayerColor($B));
	SetPlayerRacePreference(Player($B), RACE_PREF_UNDEAD);
	SetPlayerRaceSelectable(Player($B), false);
	SetPlayerController(Player($B), MAP_CONTROL_COMPUTER);
}
nothing InitCustomTeams() {
	SetPlayerTeam(Player(0), 0);
	SetPlayerState(Player(0), PLAYER_STATE_ALLIED_VICTORY, 1);
	SetPlayerTeam(Player(1), 0);
	SetPlayerState(Player(1), PLAYER_STATE_ALLIED_VICTORY, 1);
	SetPlayerTeam(Player(2), 0);
	SetPlayerState(Player(2), PLAYER_STATE_ALLIED_VICTORY, 1);
	SetPlayerTeam(Player(3), 0);
	SetPlayerState(Player(3), PLAYER_STATE_ALLIED_VICTORY, 1);
	SetPlayerTeam(Player(4), 0);
	SetPlayerState(Player(4), PLAYER_STATE_ALLIED_VICTORY, 1);
	SetPlayerTeam(Player(5), 0);
	SetPlayerState(Player(5), PLAYER_STATE_ALLIED_VICTORY, 1);
	SetPlayerTeam(Player(6), 0);
	SetPlayerState(Player(6), PLAYER_STATE_ALLIED_VICTORY, 1);
	SetPlayerTeam(Player(7), 0);
	SetPlayerState(Player(7), PLAYER_STATE_ALLIED_VICTORY, 1);
	SetPlayerTeam(Player(8), 0);
	SetPlayerState(Player(8), PLAYER_STATE_ALLIED_VICTORY, 1);
	SetPlayerAllianceStateAllyBJ(Player(0), Player(1), true);
	SetPlayerAllianceStateAllyBJ(Player(0), Player(2), true);
	SetPlayerAllianceStateAllyBJ(Player(0), Player(3), true);
	SetPlayerAllianceStateAllyBJ(Player(0), Player(4), true);
	SetPlayerAllianceStateAllyBJ(Player(0), Player(5), true);
	SetPlayerAllianceStateAllyBJ(Player(0), Player(6), true);
	SetPlayerAllianceStateAllyBJ(Player(0), Player(7), true);
	SetPlayerAllianceStateAllyBJ(Player(0), Player(8), true);
	SetPlayerAllianceStateAllyBJ(Player(1), Player(0), true);
	SetPlayerAllianceStateAllyBJ(Player(1), Player(2), true);
	SetPlayerAllianceStateAllyBJ(Player(1), Player(3), true);
	SetPlayerAllianceStateAllyBJ(Player(1), Player(4), true);
	SetPlayerAllianceStateAllyBJ(Player(1), Player(5), true);
	SetPlayerAllianceStateAllyBJ(Player(1), Player(6), true);
	SetPlayerAllianceStateAllyBJ(Player(1), Player(7), true);
	SetPlayerAllianceStateAllyBJ(Player(1), Player(8), true);
	SetPlayerAllianceStateAllyBJ(Player(2), Player(0), true);
	SetPlayerAllianceStateAllyBJ(Player(2), Player(1), true);
	SetPlayerAllianceStateAllyBJ(Player(2), Player(3), true);
	SetPlayerAllianceStateAllyBJ(Player(2), Player(4), true);
	SetPlayerAllianceStateAllyBJ(Player(2), Player(5), true);
	SetPlayerAllianceStateAllyBJ(Player(2), Player(6), true);
	SetPlayerAllianceStateAllyBJ(Player(2), Player(7), true);
	SetPlayerAllianceStateAllyBJ(Player(2), Player(8), true);
	SetPlayerAllianceStateAllyBJ(Player(3), Player(0), true);
	SetPlayerAllianceStateAllyBJ(Player(3), Player(1), true);
	SetPlayerAllianceStateAllyBJ(Player(3), Player(2), true);
	SetPlayerAllianceStateAllyBJ(Player(3), Player(4), true);
	SetPlayerAllianceStateAllyBJ(Player(3), Player(5), true);
	SetPlayerAllianceStateAllyBJ(Player(3), Player(6), true);
	SetPlayerAllianceStateAllyBJ(Player(3), Player(7), true);
	SetPlayerAllianceStateAllyBJ(Player(3), Player(8), true);
	SetPlayerAllianceStateAllyBJ(Player(4), Player(0), true);
	SetPlayerAllianceStateAllyBJ(Player(4), Player(1), true);
	SetPlayerAllianceStateAllyBJ(Player(4), Player(2), true);
	SetPlayerAllianceStateAllyBJ(Player(4), Player(3), true);
	SetPlayerAllianceStateAllyBJ(Player(4), Player(5), true);
	SetPlayerAllianceStateAllyBJ(Player(4), Player(6), true);
	SetPlayerAllianceStateAllyBJ(Player(4), Player(7), true);
	SetPlayerAllianceStateAllyBJ(Player(4), Player(8), true);
	SetPlayerAllianceStateAllyBJ(Player(5), Player(0), true);
	SetPlayerAllianceStateAllyBJ(Player(5), Player(1), true);
	SetPlayerAllianceStateAllyBJ(Player(5), Player(2), true);
	SetPlayerAllianceStateAllyBJ(Player(5), Player(3), true);
	SetPlayerAllianceStateAllyBJ(Player(5), Player(4), true);
	SetPlayerAllianceStateAllyBJ(Player(5), Player(6), true);
	SetPlayerAllianceStateAllyBJ(Player(5), Player(7), true);
	SetPlayerAllianceStateAllyBJ(Player(5), Player(8), true);
	SetPlayerAllianceStateAllyBJ(Player(6), Player(0), true);
	SetPlayerAllianceStateAllyBJ(Player(6), Player(1), true);
	SetPlayerAllianceStateAllyBJ(Player(6), Player(2), true);
	SetPlayerAllianceStateAllyBJ(Player(6), Player(3), true);
	SetPlayerAllianceStateAllyBJ(Player(6), Player(4), true);
	SetPlayerAllianceStateAllyBJ(Player(6), Player(5), true);
	SetPlayerAllianceStateAllyBJ(Player(6), Player(7), true);
	SetPlayerAllianceStateAllyBJ(Player(6), Player(8), true);
	SetPlayerAllianceStateAllyBJ(Player(7), Player(0), true);
	SetPlayerAllianceStateAllyBJ(Player(7), Player(1), true);
	SetPlayerAllianceStateAllyBJ(Player(7), Player(2), true);
	SetPlayerAllianceStateAllyBJ(Player(7), Player(3), true);
	SetPlayerAllianceStateAllyBJ(Player(7), Player(4), true);
	SetPlayerAllianceStateAllyBJ(Player(7), Player(5), true);
	SetPlayerAllianceStateAllyBJ(Player(7), Player(6), true);
	SetPlayerAllianceStateAllyBJ(Player(7), Player(8), true);
	SetPlayerAllianceStateAllyBJ(Player(8), Player(0), true);
	SetPlayerAllianceStateAllyBJ(Player(8), Player(1), true);
	SetPlayerAllianceStateAllyBJ(Player(8), Player(2), true);
	SetPlayerAllianceStateAllyBJ(Player(8), Player(3), true);
	SetPlayerAllianceStateAllyBJ(Player(8), Player(4), true);
	SetPlayerAllianceStateAllyBJ(Player(8), Player(5), true);
	SetPlayerAllianceStateAllyBJ(Player(8), Player(6), true);
	SetPlayerAllianceStateAllyBJ(Player(8), Player(7), true);
	SetPlayerAllianceStateVisionBJ(Player(0), Player(1), true);
	SetPlayerAllianceStateVisionBJ(Player(0), Player(2), true);
	SetPlayerAllianceStateVisionBJ(Player(0), Player(3), true);
	SetPlayerAllianceStateVisionBJ(Player(0), Player(4), true);
	SetPlayerAllianceStateVisionBJ(Player(0), Player(5), true);
	SetPlayerAllianceStateVisionBJ(Player(0), Player(6), true);
	SetPlayerAllianceStateVisionBJ(Player(0), Player(7), true);
	SetPlayerAllianceStateVisionBJ(Player(0), Player(8), true);
	SetPlayerAllianceStateVisionBJ(Player(1), Player(0), true);
	SetPlayerAllianceStateVisionBJ(Player(1), Player(2), true);
	SetPlayerAllianceStateVisionBJ(Player(1), Player(3), true);
	SetPlayerAllianceStateVisionBJ(Player(1), Player(4), true);
	SetPlayerAllianceStateVisionBJ(Player(1), Player(5), true);
	SetPlayerAllianceStateVisionBJ(Player(1), Player(6), true);
	SetPlayerAllianceStateVisionBJ(Player(1), Player(7), true);
	SetPlayerAllianceStateVisionBJ(Player(1), Player(8), true);
	SetPlayerAllianceStateVisionBJ(Player(2), Player(0), true);
	SetPlayerAllianceStateVisionBJ(Player(2), Player(1), true);
	SetPlayerAllianceStateVisionBJ(Player(2), Player(3), true);
	SetPlayerAllianceStateVisionBJ(Player(2), Player(4), true);
	SetPlayerAllianceStateVisionBJ(Player(2), Player(5), true);
	SetPlayerAllianceStateVisionBJ(Player(2), Player(6), true);
	SetPlayerAllianceStateVisionBJ(Player(2), Player(7), true);
	SetPlayerAllianceStateVisionBJ(Player(2), Player(8), true);
	SetPlayerAllianceStateVisionBJ(Player(3), Player(0), true);
	SetPlayerAllianceStateVisionBJ(Player(3), Player(1), true);
	SetPlayerAllianceStateVisionBJ(Player(3), Player(2), true);
	SetPlayerAllianceStateVisionBJ(Player(3), Player(4), true);
	SetPlayerAllianceStateVisionBJ(Player(3), Player(5), true);
	SetPlayerAllianceStateVisionBJ(Player(3), Player(6), true);
	SetPlayerAllianceStateVisionBJ(Player(3), Player(7), true);
	SetPlayerAllianceStateVisionBJ(Player(3), Player(8), true);
	SetPlayerAllianceStateVisionBJ(Player(4), Player(0), true);
	SetPlayerAllianceStateVisionBJ(Player(4), Player(1), true);
	SetPlayerAllianceStateVisionBJ(Player(4), Player(2), true);
	SetPlayerAllianceStateVisionBJ(Player(4), Player(3), true);
	SetPlayerAllianceStateVisionBJ(Player(4), Player(5), true);
	SetPlayerAllianceStateVisionBJ(Player(4), Player(6), true);
	SetPlayerAllianceStateVisionBJ(Player(4), Player(7), true);
	SetPlayerAllianceStateVisionBJ(Player(4), Player(8), true);
	SetPlayerAllianceStateVisionBJ(Player(5), Player(0), true);
	SetPlayerAllianceStateVisionBJ(Player(5), Player(1), true);
	SetPlayerAllianceStateVisionBJ(Player(5), Player(2), true);
	SetPlayerAllianceStateVisionBJ(Player(5), Player(3), true);
	SetPlayerAllianceStateVisionBJ(Player(5), Player(4), true);
	SetPlayerAllianceStateVisionBJ(Player(5), Player(6), true);
	SetPlayerAllianceStateVisionBJ(Player(5), Player(7), true);
	SetPlayerAllianceStateVisionBJ(Player(5), Player(8), true);
	SetPlayerAllianceStateVisionBJ(Player(6), Player(0), true);
	SetPlayerAllianceStateVisionBJ(Player(6), Player(1), true);
	SetPlayerAllianceStateVisionBJ(Player(6), Player(2), true);
	SetPlayerAllianceStateVisionBJ(Player(6), Player(3), true);
	SetPlayerAllianceStateVisionBJ(Player(6), Player(4), true);
	SetPlayerAllianceStateVisionBJ(Player(6), Player(5), true);
	SetPlayerAllianceStateVisionBJ(Player(6), Player(7), true);
	SetPlayerAllianceStateVisionBJ(Player(6), Player(8), true);
	SetPlayerAllianceStateVisionBJ(Player(7), Player(0), true);
	SetPlayerAllianceStateVisionBJ(Player(7), Player(1), true);
	SetPlayerAllianceStateVisionBJ(Player(7), Player(2), true);
	SetPlayerAllianceStateVisionBJ(Player(7), Player(3), true);
	SetPlayerAllianceStateVisionBJ(Player(7), Player(4), true);
	SetPlayerAllianceStateVisionBJ(Player(7), Player(5), true);
	SetPlayerAllianceStateVisionBJ(Player(7), Player(6), true);
	SetPlayerAllianceStateVisionBJ(Player(7), Player(8), true);
	SetPlayerAllianceStateVisionBJ(Player(8), Player(0), true);
	SetPlayerAllianceStateVisionBJ(Player(8), Player(1), true);
	SetPlayerAllianceStateVisionBJ(Player(8), Player(2), true);
	SetPlayerAllianceStateVisionBJ(Player(8), Player(3), true);
	SetPlayerAllianceStateVisionBJ(Player(8), Player(4), true);
	SetPlayerAllianceStateVisionBJ(Player(8), Player(5), true);
	SetPlayerAllianceStateVisionBJ(Player(8), Player(6), true);
	SetPlayerAllianceStateVisionBJ(Player(8), Player(7), true);
	SetPlayerTeam(Player($B), 1);
	SetPlayerState(Player($B), PLAYER_STATE_ALLIED_VICTORY, 1);
}
nothing InitAllyPriorities() {
	SetStartLocPrioCount(0, 8);
	SetStartLocPrio(0, 0, 1, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(0, 1, 2, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(0, 2, 3, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(0, 3, 4, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(0, 4, 5, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(0, 5, 6, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(0, 6, 7, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(0, 7, 8, MAP_LOC_PRIO_HIGH);
	SetStartLocPrioCount(1, 8);
	SetStartLocPrio(1, 0, 0, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(1, 1, 2, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(1, 2, 3, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(1, 3, 4, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(1, 4, 5, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(1, 5, 6, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(1, 6, 7, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(1, 7, 8, MAP_LOC_PRIO_HIGH);
	SetStartLocPrioCount(2, 8);
	SetStartLocPrio(2, 0, 0, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(2, 1, 1, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(2, 2, 3, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(2, 3, 4, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(2, 4, 5, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(2, 5, 6, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(2, 6, 7, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(2, 7, 8, MAP_LOC_PRIO_HIGH);
	SetStartLocPrioCount(3, 8);
	SetStartLocPrio(3, 0, 0, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(3, 1, 1, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(3, 2, 2, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(3, 3, 4, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(3, 4, 5, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(3, 5, 6, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(3, 6, 7, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(3, 7, 8, MAP_LOC_PRIO_HIGH);
	SetStartLocPrioCount(4, 8);
	SetStartLocPrio(4, 0, 0, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(4, 1, 1, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(4, 2, 2, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(4, 3, 3, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(4, 4, 5, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(4, 5, 6, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(4, 6, 7, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(4, 7, 8, MAP_LOC_PRIO_HIGH);
	SetStartLocPrioCount(5, 8);
	SetStartLocPrio(5, 0, 0, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(5, 1, 1, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(5, 2, 2, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(5, 3, 3, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(5, 4, 4, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(5, 5, 6, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(5, 6, 7, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(5, 7, 8, MAP_LOC_PRIO_HIGH);
	SetStartLocPrioCount(6, 8);
	SetStartLocPrio(6, 0, 0, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(6, 1, 1, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(6, 2, 2, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(6, 3, 3, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(6, 4, 4, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(6, 5, 5, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(6, 6, 7, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(6, 7, 8, MAP_LOC_PRIO_HIGH);
	SetStartLocPrioCount(7, 8);
	SetStartLocPrio(7, 0, 0, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(7, 1, 1, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(7, 2, 2, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(7, 3, 3, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(7, 4, 4, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(7, 5, 5, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(7, 6, 6, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(7, 7, 8, MAP_LOC_PRIO_HIGH);
	SetStartLocPrioCount(8, 8);
	SetStartLocPrio(8, 0, 0, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(8, 1, 1, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(8, 2, 2, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(8, 3, 3, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(8, 4, 4, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(8, 5, 5, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(8, 6, 6, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(8, 7, 7, MAP_LOC_PRIO_HIGH);
	SetStartLocPrioCount(9, 3);
	SetStartLocPrio(9, 0, 0, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(9, 1, 1, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(9, 2, 2, MAP_LOC_PRIO_HIGH);
}
nothing main() {
	weathereffect we;
	integer i;
	player p;
	unit u;
	integer unitID;
	trigger t;
	real life;
	integer index;
	region rectRegion;
	SetCameraBounds(-5760. + GetCameraMargin(CAMERA_MARGIN_LEFT), -10624. + GetCameraMargin(CAMERA_MARGIN_BOTTOM), 5504. - GetCameraMargin(CAMERA_MARGIN_RIGHT), 4480. - GetCameraMargin(CAMERA_MARGIN_TOP), -5760. + GetCameraMargin(CAMERA_MARGIN_LEFT), 4480. - GetCameraMargin(CAMERA_MARGIN_TOP), 5504. - GetCameraMargin(CAMERA_MARGIN_RIGHT), -10624. + GetCameraMargin(CAMERA_MARGIN_BOTTOM));
	SetDayNightModels("Environment\\DNC\\DNCDalaran\\DNCDalaranTerrain\\DNCDalaranTerrain.mdl", "Environment\\DNC\\DNCDalaran\\DNCDalaranUnit\\DNCDalaranUnit.mdl");
	SetWaterBaseColor(0, $80, 0, $FF);
	NewSoundEnvironment("Default");
	SetAmbientDaySound("FelwoodDay");
	SetAmbientNightSound("FelwoodNight");
	SetMapMusic("Music", true, 0);
	SetSoundParamsFromLabel(gg_snd_HeroFirelordYesAttack1, "HeroFireLordYesAttack");
	SetSoundDuration(gg_snd_HeroFirelordYesAttack1, $984);
	SetSoundParamsFromLabel(gg_snd_HeroFirelordYesAttack2, "HeroFireLordYesAttack");
	SetSoundDuration(gg_snd_HeroFirelordYesAttack2, $DAF);
	SetSoundParamsFromLabel(gg_snd_HeroFirelordYesAttack3, "HeroFireLordYesAttack");
	SetSoundDuration(gg_snd_HeroFirelordYesAttack3, $AD1);
	SetSoundParamsFromLabel(gg_snd_HeroFirelordWarcry1, "HeroFireLordWarcry");
	SetSoundDuration(gg_snd_HeroFirelordWarcry1, 5072);
	SetSoundParamsFromLabel(gg_snd_HeroLichReady1, "HeroLichReady");
	SetSoundDuration(gg_snd_HeroLichReady1, 4337);
	SetSoundParamsFromLabel(gg_snd_HeroLichYesAttack1, "HeroLichYesAttack");
	SetSoundDuration(gg_snd_HeroLichYesAttack1, $A4C);
	SetSoundParamsFromLabel(gg_snd_HeroLichYesAttack2, "HeroLichYesAttack");
	SetSoundDuration(gg_snd_HeroLichYesAttack2, $9D4);
	SetSoundParamsFromLabel(gg_snd_HeroLichYesAttack3, "HeroLichYesAttack");
	SetSoundDuration(gg_snd_HeroLichYesAttack3, $872);
	SetSoundParamsFromLabel(gg_snd_DeathSound1, "BanditYesAttack");
	SetSoundDuration(gg_snd_DeathSound1, $4EE);
	SetSoundParamsFromLabel(gg_snd_KnightNoGold1, "NoGoldHuman");
	SetSoundDuration(gg_snd_KnightNoGold1, $57D);
	SetSoundParamsFromLabel(gg_snd_KnightInventoryFull1, "InventoryFullHuman");
	SetSoundDuration(gg_snd_KnightInventoryFull1, $3E8);
	SetSoundParamsFromLabel(gg_snd_HeroStep1, "HeroCinematicStep");
	SetSoundDuration(gg_snd_HeroStep1, 947);
	SetSoundParamsFromLabel(gg_snd_HeroStep2, "HeroCinematicStep");
	SetSoundDuration(gg_snd_HeroStep2, 697);
	SetSoundParamsFromLabel(gg_snd_HeroStep3, "HeroCinematicStep");
	SetSoundDuration(gg_snd_HeroStep3, 599);
	SetSoundParamsFromLabel(gg_snd_HeroStep4, "HeroCinematicStep");
	SetSoundDuration(gg_snd_HeroStep4, $E5);
	SetSoundParamsFromLabel(gg_snd_HuntressYesAttack4, "HuntressYesAttack");
	SetSoundDuration(gg_snd_HuntressYesAttack4, $55E);
	SetSoundChannel(gg_snd_HuntressYesAttack4, 0);
	SetSoundParamsFromLabel(gg_snd_WardenAttackEffort1, "WardenAttack");
	SetSoundDuration(gg_snd_WardenAttackEffort1, $54E);
	SetSoundParamsFromLabel(gg_snd_AlchemistChemicalBurst1, "GoblinAlchemistMorph");
	SetSoundDuration(gg_snd_AlchemistChemicalBurst1, $801);
	SetSoundChannel(gg_snd_AlchemistChemicalBurst1, 0);
	SetSoundParamsFromLabel(gg_snd_AlchemistMorph1, "GoblinAlchemistMorphAlternate");
	SetSoundDuration(gg_snd_AlchemistMorph1, $67F);
	SetSoundChannel(gg_snd_AlchemistMorph1, 0);
	SetSoundParamsFromLabel(gg_snd_HeroAlchemistYesAttack1, "HEROGoblinALCHEMISTYesAttack");
	SetSoundDuration(gg_snd_HeroAlchemistYesAttack1, $942);
	SetSoundChannel(gg_snd_HeroAlchemistYesAttack1, 0);
	EnableWeatherEffect(we, true);
	CameraSetupSetField(gg_cam_Kamera_na_taverni, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Kamera_na_taverni, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Kamera_na_taverni, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Kamera_na_taverni, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Kamera_na_taverni, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Kamera_na_taverni, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Kamera_na_taverni, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Kamera_na_taverni, 4928.7, 3881.5, .0);
	CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Kamera_glavnoi_bazi, 1240., -6378.1, .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Eiti_Arena, 4255.9, 866.9, .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Eiti_Arena_Top_Portal, 4394.2, 1237.5, .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Eiti_Arena_Bot_Portal, 4465.7, 342.3, .0);
	CameraSetupSetField(gg_cam_Camera_miners_arena, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_miners_arena, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Camera_miners_arena, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Camera_miners_arena, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Camera_miners_arena, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_miners_arena, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_miners_arena, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_miners_arena, -3311.2, 2967.9, .0);
	CameraSetupSetField(gg_cam_Camera_BossFightStart, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_BossFightStart, CAMERA_FIELD_ROTATION, 180.9, .0);
	CameraSetupSetField(gg_cam_Camera_BossFightStart, CAMERA_FIELD_ANGLE_OF_ATTACK, 336.5, .0);
	CameraSetupSetField(gg_cam_Camera_BossFightStart, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Camera_BossFightStart, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_BossFightStart, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_BossFightStart, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_BossFightStart, -608.2, 2881., .0);
	CameraSetupSetField(gg_cam_Camera_Duel_Arena, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Duel_Arena, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Camera_Duel_Arena, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Camera_Duel_Arena, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Camera_Duel_Arena, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Duel_Arena, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Duel_Arena, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Duel_Arena, 2139.4, 2853.8, .0);
	CameraSetupSetField(gg_cam_Kamera_cast_magi, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Kamera_cast_magi, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Kamera_cast_magi, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Kamera_cast_magi, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Kamera_cast_magi, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Kamera_cast_magi, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Kamera_cast_magi, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Kamera_cast_magi, 1268., -5714.3, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den1, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den1, CAMERA_FIELD_ROTATION, 233.6, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den1, CAMERA_FIELD_ANGLE_OF_ATTACK, 299.3, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den1, CAMERA_FIELD_TARGET_DISTANCE, 1363.6, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den1, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den1, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den1, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Beorn_Den1, 1384., -9577.2, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den2, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den2, CAMERA_FIELD_ROTATION, 297.9, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den2, CAMERA_FIELD_ANGLE_OF_ATTACK, 300.3, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den2, CAMERA_FIELD_TARGET_DISTANCE, 1363.6, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den2, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den2, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den2, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Beorn_Den2, 1240.7, -9620.8, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den3, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den3, CAMERA_FIELD_ROTATION, 110.6, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den3, CAMERA_FIELD_ANGLE_OF_ATTACK, 300.4, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den3, CAMERA_FIELD_TARGET_DISTANCE, 1127., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den3, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den3, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den3, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Beorn_Den3, 562.8, -8241.1, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den4, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den4, CAMERA_FIELD_ROTATION, 110.6, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den4, CAMERA_FIELD_ANGLE_OF_ATTACK, 300.4, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den4, CAMERA_FIELD_TARGET_DISTANCE, 1127., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den4, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den4, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den4, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Beorn_Den4, -15.3, -9035.4, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den5, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den5, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den5, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den5, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den5, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den5, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den5, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Beorn_Den5, 2191., -8224.1, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den6, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den6, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den6, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den6, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den6, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den6, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den6, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Beorn_Den6, 1474.8, -9613.2, .0);
	SetUnitColor(u, ConvertPlayerColor(6));
	SetUnitColor(u, ConvertPlayerColor(0));
	SetUnitColor(u, ConvertPlayerColor(1));
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	SetUnitState(gg_unit_n00Y_0101, UNIT_STATE_MANA, 0);
	SetUnitState(gg_unit_n00Y_0102, UNIT_STATE_MANA, 0);
	SetUnitState(gg_unit_e002_0106, UNIT_STATE_MANA, 0);
	SetUnitState(gg_unit_e002_0108, UNIT_STATE_MANA, 0);
	InitBlizzard();
	while (true) {
		if ((i > 1)) break;
	}
	TriggerRegisterTimerEventSingle(gg_trg_Players_Start_Script, 2.);
	TriggerAddAction(gg_trg_Players_Start_Script, Trig_Players_Start_Script_Actions);
	TriggerRegisterTimerEventSingle(gg_trg_InitMap, .0);
	TriggerAddAction(gg_trg_InitMap, Trig_InitMap_Actions);
	TriggerRegisterTimerExpireEvent(gg_trg_InitMapStage2, udg_InitMapTimer);
	TriggerAddAction(gg_trg_InitMapStage2, Trig_InitMapStage2_Actions);
	TriggerRegisterTimerEvent(gg_trg_System_Spells_Load, 2., false);
	TriggerAddAction(gg_trg_System_Spells_Load, Trig_System_Spells_Load_Actions);
	TriggerRegisterTimerEvent(gg_trg_Items_Preload, 17., false);
	TriggerAddAction(gg_trg_Items_Preload, Trig_Items_Preload_Actions);
	TriggerRegisterTimerEventSingle(gg_trg_Igrok_Massiv_Save, .0);
	TriggerAddAction(gg_trg_Igrok_Massiv_Save, Trig_Igrok_Massiv_Save_Actions);
	TriggerRegisterTimerEventSingle(gg_trg_Load_Vsiakoe, 2.);
	TriggerAddAction(gg_trg_Load_Vsiakoe, Trig_Load_Vsiakoe_Actions);
	TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver, Player(0));
	TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver, Player(1));
	TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver, Player(2));
	TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver, Player(3));
	TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver, Player(4));
	TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver, Player(5));
	TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver, Player(6));
	TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver, Player(7));
	TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver, Player(8));
	TriggerAddAction(gg_trg_Igrok_Massiv_Liver, Trig_Igrok_Massiv_Liver_Actions);
	TriggerRegisterTimerEventSingle(gg_trg_Messager, 8.);
	TriggerAddAction(gg_trg_Messager, Trig_Messager_Actions);
	TriggerRegisterTimerEventSingle(gg_trg_Create_TExttags_about_Shops, 9.);
	TriggerAddAction(gg_trg_Create_TExttags_about_Shops, Trig_Create_TExttags_about_Shops_Actions);
	TriggerAddAction(gg_trg_InitHashtable, Trig_InitHashtable_Actions);
	TriggerRegisterTimerEvent(gg_trg_Save_Sounds, 5., false);
	TriggerAddAction(gg_trg_Save_Sounds, Trig_Save_Sounds_Actions);
	TimerStart(CreateTimer(), 0, false, HandleCounter_Actions);
	TriggerRegisterPlayerChatEvent(gg_trg_Set_Chlenix, Player(0), "-chlenix", false);
	TriggerAddAction(gg_trg_Set_Chlenix, Trig_Set_Chlenix_Actions);
	TriggerRegisterTimerEventSingle(gg_trg_Set_Energy_Walls, 5.);
	TriggerAddAction(gg_trg_Set_Energy_Walls, Trig_Set_Energy_Walls_Actions);
	TriggerAddAction(gg_trg_Nachalo_Eiti_aren, Trig_Nachalo_Eiti_aren_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_HeroDeadonEitiArena, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_HeroDeadonEitiArena, Condition(Trig_HeroDeadonEitiArena_Conditions));
	TriggerAddAction(gg_trg_HeroDeadonEitiArena, Trig_HeroDeadonEitiArena_Actions);
	RegionAddRect(rectRegion, gg_rct_Oblast_Teleporta_Arena_Top);
	TriggerRegisterEnterRegion(gg_trg__PortalCheckTop, rectRegion, null);
	TriggerAddCondition(gg_trg__PortalCheckTop, Condition(Trig__PortalCheckTop_Conditions));
	TriggerAddAction(gg_trg__PortalCheckTop, Trig__PortalCheckTop_Actions);
	RegionAddRect(rectRegion, gg_rct_Oblast_Teleporta_Arena_Bot);
	TriggerRegisterEnterRegion(gg_trg__PortalCheckBot, rectRegion, null);
	TriggerAddCondition(gg_trg__PortalCheckBot, Condition(Trig__PortalCheckBot_Conditions));
	TriggerAddAction(gg_trg__PortalCheckBot, Trig__PortalCheckBot_Actions);
	TriggerRegisterTimerEvent(gg_trg_LinkItemsInit, 6., false);
	TriggerAddAction(gg_trg_LinkItemsInit, Trig_LinkItemsInit_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_ItemPickedUp, Player(index), EVENT_PLAYER_UNIT_PICKUP_ITEM, null);
		if (index == 16) break;
	}
	TriggerAddAction(gg_trg_ItemPickedUp, Trig_ItemPickedUp_Actions);
	TriggerRegisterAnyUnitEventBJ(gg_trg_ChargesConnecting, EVENT_PLAYER_UNIT_PICKUP_ITEM);
	TriggerAddCondition(gg_trg_ChargesConnecting, Condition(Trig_ChargesConnecting_Conditions));
	TriggerAddAction(gg_trg_ChargesConnecting, Trig_ChargesConnecting_Actions);
	DisableTrigger(gg_trg_Remove_Dammi_Items);
	TriggerRegisterAnyUnitEventBJ(gg_trg_Remove_Dammi_Items, EVENT_PLAYER_UNIT_PICKUP_ITEM);
	TriggerAddCondition(gg_trg_Remove_Dammi_Items, Condition(Trig_Remove_Dammi_Items_Conditions));
	TriggerAddAction(gg_trg_Remove_Dammi_Items, Trig_Remove_Dammi_Items_Actions);
	TriggerRegisterTimerEvent(gg_trg_Save_Items_Cost, 10., false);
	TriggerAddAction(gg_trg_Save_Items_Cost, Trig_Save_Items_Cost_Actions);
	TriggerAddAction(gg_trg_Ice_Boss, Trig_IceBoss_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Ice_Wall, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Ice_Wall, Condition(Trig_Ice_Wall_Conditions));
	TriggerAddAction(gg_trg_Ice_Wall, Trig_Ice_Wall_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Ice_Storm, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Ice_Storm, Condition(Trig_Ice_Storm_Conditions));
	TriggerAddAction(gg_trg_Ice_Storm, Trig_Ice_Storm_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Ice_Rain, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Ice_Rain, Condition(Trig_Ice_Rain_Conditions));
	TriggerAddAction(gg_trg_Ice_Rain, Trig_Ice_Rain_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Cold_Punishment, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Cold_Punishment, Condition(Trig_Cold_Punishment_Conditions));
	TriggerAddAction(gg_trg_Cold_Punishment, Trig_Cold_Punishment_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Ice_Restoration, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Ice_Restoration, Condition(Trig_Ice_Restoration_Conditions));
	TriggerAddAction(gg_trg_Ice_Restoration, Trig_Ice_Restoration_Actions);
	TriggerAddAction(gg_trg_BossStart, Trig_BossStart_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_FlameSpells, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_FlameSpells, Condition(Trig_FlameSpells_Conditions));
	TriggerAddAction(gg_trg_FlameSpells, Trig_FlameSpells_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Fire_Circle, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Fire_Circle, Condition(Trig_Fire_Circle_Conditions));
	TriggerAddAction(gg_trg_Fire_Circle, Trig_Fire_Circle_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Fire_Meteor, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Fire_Meteor, Condition(Trig_Fire_Meteor_Conditions));
	TriggerAddAction(gg_trg_Fire_Meteor, Trig_Fire_Meteor_Actions);
	RegionAddRect(rectRegion, gg_rct_6);
	TriggerRegisterEnterRegion(gg_trg_Upgrade_Summons, rectRegion, null);
	TriggerAddCondition(gg_trg_Upgrade_Summons, Condition(Trig_Upgrade_Summons_Conditions));
	TriggerAddAction(gg_trg_Upgrade_Summons, Trig_Upgrade_Summons_Actions);
	TriggerRegisterTimerEvent(gg_trg_UseBeornSpells, 1., true);
	TriggerAddAction(gg_trg_UseBeornSpells, Trig_UseBeornSpells_Actions);
	TriggerAddAction(gg_trg_Start_Beorn_Den, Trig_Start_Beorn_Den_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Beorn_Push, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Beorn_Push, Condition(Trig_Beorn_Push_Conditions));
	TriggerAddAction(gg_trg_Beorn_Push, Trig_Beorn_Push_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Beorn_Stomp, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Beorn_Stomp, Condition(Trig_Beorn_Stomp_Conditions));
	TriggerAddAction(gg_trg_Beorn_Stomp, Trig_Beorn_Stomp_Actions);
	TriggerRegisterEnterRectSimple(gg_trg_HeroUnitGameSave, gg_rct_Oblstb_Tavern);
	TriggerAddAction(gg_trg_HeroUnitGameSave, Trig_HeroUnitGameSave_Actions);
	TriggerRegisterTimerEventSingle(gg_trg_INIT, 1.);
	TriggerAddAction(gg_trg_INIT, Trig_INIT_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Pick_Hero_Upgrade, Player(index), EVENT_PLAYER_UNIT_SELL, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Pick_Hero_Upgrade, Condition(Trig_Pick_Hero_Upgrade_Conditions));
	TriggerAddAction(gg_trg_Pick_Hero_Upgrade, Trig_Pick_Hero_Upgrade_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Hero_Dead, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Hero_Dead, Condition(Trig_Hero_Dead_Conditions));
	TriggerAddAction(gg_trg_Hero_Dead, Trig_Hero_Dead_Actions);
	TriggerAddAction(gg_trg_Start_Duel, Trig_Start_Duel_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Hero_Death_On_Duel, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Hero_Death_On_Duel, Condition(Trig_Hero_Death_On_Duel_Conditions));
	TriggerAddAction(gg_trg_Hero_Death_On_Duel, Trig_Hero_Death_On_Duel_Actions);
	TriggerRegisterTimerExpireEvent(gg_trg_Timer_Check, udg_Timer_Check_Forkreep_system);
	TriggerAddAction(gg_trg_Timer_Check, Trig_Timer_Check_Actions);
	DisableTrigger(gg_trg_go_mochiytb_portal);
	TriggerRegisterTimerEvent(gg_trg_go_mochiytb_portal, 2., true);
	TriggerAddAction(gg_trg_go_mochiytb_portal, Trig_go_mochiytb_portal_Actions);
	TriggerAddAction(gg_trg_Start_game, Trig_Start_game_Actions);
	TriggerRegisterTimerExpireEvent(gg_trg_StartWave, udg_Timer_Nomera_Volni);
	TriggerAddAction(gg_trg_StartWave, Trig_StartWave_Actions);
	TriggerRegisterTimerExpireEvent(gg_trg_MobsAttackBase, udg_TimerMobsAttackBase);
	TriggerAddAction(gg_trg_MobsAttackBase, Trig_MobsAttackBase_Actions);
	DisableTrigger(gg_trg_TeleportStuckedCreeps);
	TriggerRegisterTimerEvent(gg_trg_TeleportStuckedCreeps, 2., true);
	TriggerAddAction(gg_trg_TeleportStuckedCreeps, Trig_TeleportStuckedCreeps_Actions);
	RegionAddRect(rectRegion, gg_rct_cast_magi);
	TriggerRegisterEnterRegion(gg_trg_vhodit_v_zony, rectRegion, null);
	TriggerAddCondition(gg_trg_vhodit_v_zony, Condition(Trig_vhodit_v_zony_Conditions));
	TriggerAddAction(gg_trg_vhodit_v_zony, Trig_vhodit_v_zony_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Add_Gold_System_Receiving_Gold_for_Creeps, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Add_Gold_System_Receiving_Gold_for_Creeps, Condition(Trig_Add_Gold_System_Receiving_Gold_for_Creeps_Conditions));
	TriggerAddAction(gg_trg_Add_Gold_System_Receiving_Gold_for_Creeps, Trig_Add_Gold_System_Receiving_Gold_for_Creeps_Actions);
	TriggerRegisterTimerEvent(gg_trg_Init_System_Receiving_Gold_for_Creeps, 3., false);
	TriggerAddAction(gg_trg_Init_System_Receiving_Gold_for_Creeps, Trig_Init_System_Receiving_Gold_for_Creeps_Actions);
	TriggerAddAction(gg_trg_Init_System_Receiving_Experience_for_Creeps, Trig_Init_System_Receiving_Experience_for_Creeps_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Add_Experience_System_Receiving_Experience_for_Creeps, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Add_Experience_System_Receiving_Experience_for_Creeps, Condition(Trig_Add_Experience_System_Receiving_Experience_for_Creeps_Conditions));
	TriggerAddAction(gg_trg_Add_Experience_System_Receiving_Experience_for_Creeps, Trig_Add_Experience_System_Receiving_Experience_for_Creeps_Actions);
	TriggerRegisterTimerEvent(gg_trg_Init_Potion_System, 1., false);
	TriggerAddAction(gg_trg_Init_Potion_System, Trig_Init_Potion_System_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Mob_Dead_Create_Potion, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Mob_Dead_Create_Potion, Condition(Trig_Mob_Dead_Create_Potion_Conditions));
	TriggerAddAction(gg_trg_Mob_Dead_Create_Potion, Trig_Mob_Dead_Create_Potion_Actions);
	TriggerAddCondition(gg_trg_Check_Potion_Picked_Up, Condition(Trig_Check_Potion_Picked_Up_Conditions));
	TriggerAddAction(gg_trg_Check_Potion_Picked_Up, Trig_Check_Potion_Picked_Up_Actions);
	TriggerRegisterTimerEvent(gg_trg_InitSystem, .01, false);
	TriggerAddAction(gg_trg_InitSystem, Trig_InitSystem_Actions);
	RegionAddRect(rectRegion, GetWorldBounds());
	TriggerRegisterEnterRegion(gg_trg_EnterUnit, rectRegion, null);
	TriggerAddCondition(gg_trg_EnterUnit, Condition(Trig_EnterUnit_Conditions));
	TriggerAddAction(gg_trg_EnterUnit, Trig_EnterUnit_Actions);
	TriggerAddCondition(gg_trg_AddDamage, Condition(Trig_Del_Conditions));
	TriggerAddAction(gg_trg_AddDamage, Trig_AddDamage_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_TimeTalisman, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_TimeTalisman, Condition(Trig_TimeTalisman_Conditions));
	TriggerAddAction(gg_trg_TimeTalisman, Trig_TimeTalisman_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Take_Paladin_Armor, Player(index), EVENT_PLAYER_UNIT_PICKUP_ITEM, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Take_Paladin_Armor, Condition(Trig_Take_Paladin_Armor_Conditions));
	TriggerAddAction(gg_trg_Take_Paladin_Armor, Trig_Take_Paladin_Armor_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Take_Archimagus_Staff, Player(index), EVENT_PLAYER_UNIT_PICKUP_ITEM, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Take_Archimagus_Staff, Condition(Trig_Take_Archimagus_Staff_Conditions));
	TriggerAddAction(gg_trg_Take_Archimagus_Staff, Trig_Take_Archimagus_Staff_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Lost_Charged_Staff_of_Lightning, Player(index), EVENT_PLAYER_UNIT_DROP_ITEM, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Lost_Charged_Staff_of_Lightning, Condition(Trig_Lost_Charged_Staff_of_Lightning_Conditions));
	TriggerAddAction(gg_trg_Lost_Charged_Staff_of_Lightning, Trig_Lost_Charged_Staff_of_Lightning_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Blood_Bow, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Blood_Bow, Condition(Trig_Blood_Bow_Conditions));
	TriggerAddAction(gg_trg_Blood_Bow, Trig_Blood_Bow_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Balance_Ring, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Balance_Ring, Condition(Trig_Balance_Ring_Conditions));
	TriggerAddAction(gg_trg_Balance_Ring, Trig_Balance_Ring_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Armageddon_Staff, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Armageddon_Staff, Condition(Trig_Armageddon_Staff_Conditions));
	TriggerAddAction(gg_trg_Armageddon_Staff, Trig_Armageddon_Staff_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Sargeras_Crown, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Sargeras_Crown, Condition(Trig_Sargeras_Crown_Conditions));
	TriggerAddAction(gg_trg_Sargeras_Crown, Trig_Sargeras_Crown_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Lost_Sargeras_Crown, Player(index), EVENT_PLAYER_UNIT_DROP_ITEM, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Lost_Sargeras_Crown, Condition(Trig_Lost_Sargeras_Crown_Conditions));
	TriggerAddAction(gg_trg_Lost_Sargeras_Crown, Trig_Lost_Sargeras_Crown_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Take_Sargeras_Crown, Player(index), EVENT_PLAYER_UNIT_PICKUP_ITEM, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Take_Sargeras_Crown, Condition(Trig_Take_Sargeras_Crown_Conditions));
	TriggerAddAction(gg_trg_Take_Sargeras_Crown, Trig_Take_Sargeras_Crown_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Lost_Archimagus_Armor, Player(index), EVENT_PLAYER_UNIT_DROP_ITEM, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Lost_Archimagus_Armor, Condition(Trig_Lost_Archimagus_Armor_Conditions));
	TriggerAddAction(gg_trg_Lost_Archimagus_Armor, Trig_Lost_Archimagus_Armor_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Take_Archimagus_Armor, Player(index), EVENT_PLAYER_UNIT_PICKUP_ITEM, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Take_Archimagus_Armor, Condition(Trig_Take_Archimagus_Armor_Conditions));
	TriggerAddAction(gg_trg_Take_Archimagus_Armor, Trig_Take_Archimagus_Armor_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Sorcerers_Talisman_Cast, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Sorcerers_Talisman_Cast, Condition(Trig_Sorcerers_Talisman_Cast_Conditions));
	TriggerAddAction(gg_trg_Sorcerers_Talisman_Cast, Trig_Sorcerers_Talisman_Cast_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Sorcerers_Talisman, Player(index), EVENT_PLAYER_UNIT_USE_ITEM, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Sorcerers_Talisman, Condition(Trig_Sorcerers_Talisman_Conditions));
	TriggerAddAction(gg_trg_Sorcerers_Talisman, Trig_Sorcerers_Talisman_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Sorcerers_Talisman_Dead_Unit, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Sorcerers_Talisman_Dead_Unit, Condition(Trig_Sorcerers_Talisman_Dead_Unit_Condition));
	TriggerAddAction(gg_trg_Sorcerers_Talisman_Dead_Unit, Trig_Sorcerers_Talisman_Dead_Unit_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Orc_Banner, Player(index), EVENT_PLAYER_UNIT_PICKUP_ITEM, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Orc_Banner, Condition(Trig_Orc_Banner_Conditions));
	TriggerAddAction(gg_trg_Orc_Banner, Trig_Orc_Banner_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Devil_Axe, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Devil_Axe, Condition(Trig_Devil_Axe_Conditions));
	TriggerAddAction(gg_trg_Devil_Axe, Trig_Devil_Axe_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Devil_Axe_Kill_Unit, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Devil_Axe_Kill_Unit, Condition(Trig_Devil_Axe_Kill_Unit_Conditions));
	TriggerAddAction(gg_trg_Devil_Axe_Kill_Unit, Trig_Devil_Axe_Kill_Unit_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Tokugawas_Katan_Kill_Unit, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Tokugawas_Katan_Kill_Unit, Condition(Trig_Tokugawas_Katan_Kill_Unit_Conditions));
	TriggerAddAction(gg_trg_Tokugawas_Katan_Kill_Unit, Trig_Tokugawas_Katan_Kill_Unit_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Tokugawas_Katan, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Tokugawas_Katan, Condition(Trig_Tokugawas_Katan_Conditions));
	TriggerAddAction(gg_trg_Tokugawas_Katan, Trig_Tokugawas_Katan_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Kings_Armor, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Kings_Armor, Condition(Trig_Kings_Armor_Conditions));
	TriggerAddAction(gg_trg_Kings_Armor, Trig_Kings_Armor_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Steel_Bib, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Steel_Bib, Condition(Trig_Steel_Bib_Conditions));
	TriggerAddAction(gg_trg_Steel_Bib, Trig_Steel_Bib_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Archimagus_Staff, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Archimagus_Staff, Condition(Trig_Archimagus_Staff_Conditions));
	TriggerAddAction(gg_trg_Archimagus_Staff, Trig_Archimagus_Staff_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Isidors_Scepter, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Isidors_Scepter, Condition(Trig_Isidors_Scepter_Conditions));
	TriggerAddAction(gg_trg_Isidors_Scepter, Trig_Isidors_Scepter_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Detached_Shield_Use, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Detached_Shield_Use, Condition(Trig_Detached_Shield_Use_Conditions));
	TriggerAddAction(gg_trg_Detached_Shield_Use, Trig_Detached_Shield_Use_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Cuirass_of_Invulnerable_Use2, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Cuirass_of_Invulnerable_Use2, Condition(Trig_Cuirass_of_Invulnerable_Use2_Conditions));
	TriggerAddAction(gg_trg_Cuirass_of_Invulnerable_Use2, Trig_Cuirass_of_Invulnerable_Use2_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Lost_Cuirass_of_Invulnerable, Player(index), EVENT_PLAYER_UNIT_DROP_ITEM, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Lost_Cuirass_of_Invulnerable, Condition(Trig_Lost_Cuirass_of_Invulnerable_Conditions));
	TriggerAddAction(gg_trg_Lost_Cuirass_of_Invulnerable, Trig_Lost_Cuirass_of_Invulnerable_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Take_Cuirass_of_Invulnerable, Player(index), EVENT_PLAYER_UNIT_PICKUP_ITEM, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Take_Cuirass_of_Invulnerable, Condition(Trig_Take_Cuirass_of_Invulnerable_Conditions));
	TriggerAddAction(gg_trg_Take_Cuirass_of_Invulnerable, Trig_Take_Cuirass_of_Invulnerable_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Fire_Staff, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Fire_Staff, Condition(Trig_Fire_Staff_Conditions));
	TriggerAddAction(gg_trg_Fire_Staff, Trig_Fire_Staff_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Demon_Axe, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Demon_Axe, Condition(Trig_Demon_Axe_Conditions));
	TriggerAddAction(gg_trg_Demon_Axe, Trig_Demon_Axe_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Demon_Axe_Kill_Unit, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Demon_Axe_Kill_Unit, Condition(Trig_Demon_Axe_Kill_Unit_Conditions));
	TriggerAddAction(gg_trg_Demon_Axe_Kill_Unit, Trig_Demon_Axe_Kill_Unit_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Boots_Rescue, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Boots_Rescue, Condition(Trig_Boots_Rescue_Conditions));
	TriggerAddAction(gg_trg_Boots_Rescue, Trig_Boots_Rescue_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Astral_Staff, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Astral_Staff, Condition(Trig_Astral_Staff_Conditions));
	TriggerAddAction(gg_trg_Astral_Staff, Trig_Astral_Staff_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Healer_Staff, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Healer_Staff, Condition(Trig_Healer_Staff_Conditions));
	TriggerAddAction(gg_trg_Healer_Staff, Trig_Healer_Staff_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Magic_Amulet, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Magic_Amulet, Condition(Trig_Magic_Amulet_Conditions));
	TriggerAddAction(gg_trg_Magic_Amulet, Trig_Magic_Amulet_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Blood_Dagger, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Blood_Dagger, Condition(Trig_Blood_Dagger_Conditions));
	TriggerAddAction(gg_trg_Blood_Dagger, Trig_Blood_Dagger_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Agility_Blade, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Agility_Blade, Condition(Trig_Agility_Blade_Conditions));
	TriggerAddAction(gg_trg_Agility_Blade, Trig_Agility_Blade_Actions);
	TriggerRegisterAnyUnitEventBJ(gg_trg_Bone_Staff_Set_Summon_Ability_Level, EVENT_PLAYER_UNIT_SUMMON);
	TriggerAddCondition(gg_trg_Bone_Staff_Set_Summon_Ability_Level, Condition(Trig_Bone_Staff_Set_Summon_Ability_Level_Conditions));
	TriggerAddAction(gg_trg_Bone_Staff_Set_Summon_Ability_Level, Trig_Bone_Staff_Set_Summon_Ability_Level_Actions);
	TriggerRegisterAnyUnitEventBJ(gg_trg_Novice_Amulet, EVENT_PLAYER_UNIT_SPELL_EFFECT);
	TriggerAddCondition(gg_trg_Novice_Amulet, Condition(Trig_Novice_Amulet_Conditions));
	TriggerAddAction(gg_trg_Novice_Amulet, Trig_Novice_Amulet_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Glove_of_Andromat, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Glove_of_Andromat, Condition(Trig_Glove_of_Andromat_Conditions));
	TriggerAddAction(gg_trg_Glove_of_Andromat, Trig_Glove_of_Andromat_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Glove_of_Midas, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Glove_of_Midas, Condition(Trig_Glove_of_Midas_Conditions));
	TriggerAddAction(gg_trg_Glove_of_Midas, Trig_Glove_of_Midas_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Heroes_more_attacked_priority_when_guards, Player(index), EVENT_PLAYER_UNIT_ATTACKED, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Heroes_more_attacked_priority_when_guards, Condition(Trig_Heroes_more_attacked_priority_when_guards_Conditions));
	TriggerAddAction(gg_trg_Heroes_more_attacked_priority_when_guards, Trig_Heroes_more_attacked_priority_when_guards_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Player_Fast_Purchase_System, Player(index), EVENT_PLAYER_UNIT_ISSUED_ORDER, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Player_Fast_Purchase_System, Condition(Trig_Player_Fast_Purchase_System_Conditions));
	TriggerAddAction(gg_trg_Player_Fast_Purchase_System, Trig_Player_Fast_Purchase_System_Actions);
	TriggerRegisterTimerEventSingle(gg_trg_Show_hint_abount_hints, 120.);
	TriggerRegisterTimerEventSingle(gg_trg_Show_hint_abount_hints, 600.);
	TriggerAddAction(gg_trg_Show_hint_abount_hints, Trig_Show_hint_abount_hints_Actions);
	TriggerRegisterTimerEventPeriodic(gg_trg_Show_Hint_Abount_Items, 600.);
	TriggerAddAction(gg_trg_Show_Hint_Abount_Items, Trig_Show_Hint_Abount_Items_Actions);
	TriggerRegisterTimerEventSingle(gg_trg_Hint_About_Random, 13.);
	TriggerAddAction(gg_trg_Hint_About_Random, Trig_Hint_About_Random_Actions);
	TriggerRegisterTimerEventSingle(gg_trg_Show_hint_abount_reference_panel, 200.);
	TriggerRegisterTimerEventSingle(gg_trg_Show_hint_abount_reference_panel, 1200.);
	TriggerAddAction(gg_trg_Show_hint_abount_reference_panel, Trig_Show_hint_abount_reference_panel_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Show_Ability_Learn, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Show_Ability_Learn, Condition(Trig_Show_Ability_Learn_Conditions));
	TriggerAddAction(gg_trg_Show_Ability_Learn, Trig_Show_Ability_Learn_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_System_Personal_Items_Buy_Item, Player(index), EVENT_PLAYER_UNIT_SELL_ITEM, null);
		if (index == 16) break;
	}
	TriggerAddAction(gg_trg_System_Personal_Items_Buy_Item, Trig_System_Personal_Items_Buy_Item_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_System_Personal_Items_Pick_Up_Item, Player(index), EVENT_PLAYER_UNIT_PICKUP_ITEM, null);
		if (index == 16) break;
	}
	TriggerAddAction(gg_trg_System_Personal_Items_Pick_Up_Item, Trig_System_Personal_Items_Pick_Up_Item_Actions);
	TriggerRegisterAnyUnitEventBJ(gg_trg_no_attack, EVENT_PLAYER_UNIT_ATTACKED);
	TriggerAddCondition(gg_trg_no_attack, Condition(Trig_no_attack_Conditions));
	TriggerAddAction(gg_trg_no_attack, Trig_no_attack_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Select_Refrence_Panel, Player(index), EVENT_PLAYER_UNIT_SELECTED, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Select_Refrence_Panel, Condition(Trig_Select_Refrence_Panel_Conditions));
	TriggerAddAction(gg_trg_Select_Refrence_Panel, Trig_Select_Refrence_Panel_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_ShopAnimation, Player(index), EVENT_PLAYER_UNIT_SELECTED, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_ShopAnimation, Condition(Trig_ShopAnimation_Conditions));
	TriggerAddAction(gg_trg_ShopAnimation, Trig_ShopAnimation_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_ShopStopAnimation, Player(index), EVENT_PLAYER_UNIT_DESELECTED, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_ShopStopAnimation, Condition(Trig_ShopStopAnimation_Conditions));
	TriggerAddAction(gg_trg_ShopStopAnimation, Trig_ShopStopAnimation_Actions);
	RegionAddRect(rectRegion, bj_mapInitialPlayableArea);
	TriggerRegisterEnterRegion(gg_trg_RedMarkToUnit, rectRegion, null);
	TriggerAddAction(gg_trg_RedMarkToUnit, Trig_RedMarkToUnit_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_UnSelectedDummyRedMark, Player(index), EVENT_PLAYER_UNIT_SELECTED, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_UnSelectedDummyRedMark, Condition(Trig_UnSelectedDummyRedMark_Conditions));
	TriggerAddAction(gg_trg_UnSelectedDummyRedMark, Trig_UnSelectedDummyRedMark_Actions);
	TriggerRegisterTimerEvent(gg_trg_SpecEffect_on_Casters, .0, false);
	TriggerAddAction(gg_trg_SpecEffect_on_Casters, Trig_SpecEffect_on_Casters_Actions);
	TriggerRegisterTimerEvent(gg_trg_PortalSpecEffects, 2., false);
	TriggerAddAction(gg_trg_PortalSpecEffects, Trig_PortalSpecEffects_Actions);
	TriggerRegisterTimerEventSingle(gg_trg_Gates_Start_Animation, 2.);
	TriggerAddAction(gg_trg_Gates_Start_Animation, Trig_Gates_Start_Animation_Actions);
	while (true) {
		TriggerRegisterPlayerChatEvent(gg_trg_PlayerEnterGameCommand, Player(index), "-", false);
		TriggerRegisterPlayerChatEvent(gg_trg_PlayerEnterGameCommand, Player(index), "+", true);
		if (index == 16) break;
	}
	TriggerAddAction(gg_trg_PlayerEnterGameCommand, Trig_PlayerEnterGameCommand_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_PlayerUseSpellGameCommand, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_PlayerUseSpellGameCommand, Condition(Trig_PlayerUseSpellGameCommand_Conditions));
	TriggerAddAction(gg_trg_PlayerUseSpellGameCommand, Trig_PlayerUseSpellGameCommand_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_GuardsExorcistDead, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_GuardsExorcistDead, Condition(Trig_GuardsExorcistDead_Conditions));
	TriggerAddAction(gg_trg_GuardsExorcistDead, Trig_GuardsExorcistDead_Actions);
	DisableTrigger(gg_trg_PauseUnitWhenDefeat);
	TriggerRegisterTimerEventPeriodic(gg_trg_PauseUnitWhenDefeat, .05);
	TriggerAddAction(gg_trg_PauseUnitWhenDefeat, Trig_PauseUnitWhenDefeat_Actions);
	DisableTrigger(gg_trg_PauseUnitWhenWin);
	TriggerRegisterEnterRectSimple(gg_trg_PauseUnitWhenWin, bj_mapInitialPlayableArea);
	TriggerAddAction(gg_trg_PauseUnitWhenWin, Trig_PauseUnitWhenWin_Actions);
	DisableTrigger(gg_trg_GameEndWin);
	TriggerAddAction(gg_trg_GameEndWin, Trig_GameEndWin_Actions);
	TriggerRegisterTimerEvent(gg_trg_Respawn_trees_Init, 5., false);
	TriggerAddAction(gg_trg_Respawn_trees_Init, Trig_Respawn_trees_Init_Actions);
	TriggerAddAction(gg_trg_Respawn_trees, Trig_Respawn_trees_Actions);
	TriggerRegisterGameStateEventTimeOfDay(gg_trg_Day_Weather, EQUAL, 6.);
	TriggerRegisterGameStateEventTimeOfDay(gg_trg_Day_Weather, EQUAL, 12.);
	TriggerAddAction(gg_trg_Day_Weather, Trig_Day_Weather_Actions);
	TriggerRegisterGameStateEventTimeOfDay(gg_trg_Sky_Morning, EQUAL, 6.);
	TriggerAddAction(gg_trg_Sky_Morning, Trig_Sky_Morning_Actions);
	TriggerRegisterGameStateEventTimeOfDay(gg_trg_Sky_Day, EQUAL, 12.);
	TriggerAddAction(gg_trg_Sky_Day, Trig_Sky_Day_Actions);
	TriggerRegisterGameStateEventTimeOfDay(gg_trg_Night_Weather, EQUAL, 18.);
	TriggerRegisterGameStateEventTimeOfDay(gg_trg_Night_Weather, EQUAL, .0);
	TriggerAddAction(gg_trg_Night_Weather, Trig_Night_Weather_Actions);
	TriggerRegisterGameStateEventTimeOfDay(gg_trg_Sky_Evening, EQUAL, 18.);
	TriggerAddAction(gg_trg_Sky_Evening, Trig_Sky_Evening_Actions);
	TriggerRegisterGameStateEventTimeOfDay(gg_trg_Sky_Night, EQUAL, .0);
	TriggerAddAction(gg_trg_Sky_Night, Trig_Sky_Night_Actions);
	TriggerRegisterTimerExpireEvent(gg_trg_Lightnings_Weather_Effect_Rainy, udg_Timer_Lightning_Strike_Weather);
	TriggerAddCondition(gg_trg_Lightnings_Weather_Effect_Rainy, Condition(Trig_Lightnings_Weather_Effect_Rainy_Conditions));
	TriggerAddAction(gg_trg_Lightnings_Weather_Effect_Rainy, Trig_Lightnings_Weather_Effect_Rainy_Actions);
	DisableTrigger(gg_trg_Periodic_Rune_Creation);
	TriggerRegisterTimerEventPeriodic(gg_trg_Periodic_Rune_Creation, 60.1);
	TriggerAddAction(gg_trg_Periodic_Rune_Creation, Trig_Periodic_Rune_Creation_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Rune_PickedUp, Player(index), EVENT_PLAYER_UNIT_PICKUP_ITEM, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Rune_PickedUp, Condition(Trig_Rune_PickedUp_Conditions));
	TriggerAddAction(gg_trg_Rune_PickedUp, Trig_Rune_PickedUp_Actions);
	TriggerRegisterTimerEventSingle(gg_trg_Initialization_MultiBoard, 3.);
	TriggerAddAction(gg_trg_Initialization_MultiBoard, Trig_Initialization_MultiBoard_Actions);
	TriggerRegisterAnyUnitEventBJ(gg_trg_Hero_MultiBoard_LvlUp, EVENT_PLAYER_HERO_LEVEL);
	TriggerAddCondition(gg_trg_Hero_MultiBoard_LvlUp, Condition(Trig_Hero_MultiBoard_LvlUp_Conditions));
	TriggerAddAction(gg_trg_Hero_MultiBoard_LvlUp, Trig_Hero_MultiBoard_LvlUp_Actions);
	TriggerRegisterTimerEventPeriodic(gg_trg_Time_Check_and_Player_Gold_for_MultiBoard, 1.);
	TriggerAddAction(gg_trg_Time_Check_and_Player_Gold_for_MultiBoard, Trig_Time_Check_and_Player_Gold_for_MultiBoard_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Reincarnation_Skeletons, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Reincarnation_Skeletons, Condition(Trig_Reincarnation_Skeletons_Conditions));
	TriggerAddAction(gg_trg_Reincarnation_Skeletons, Trig_Reincarnation_Skeletons_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_BossSkeletRaise, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_BossSkeletRaise, Condition(Trig_BossSkeletRaise_Conditions));
	TriggerAddAction(gg_trg_BossSkeletRaise, Trig_BossSkeletRaise_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_BossSkeletSkillActiv, Player(index), EVENT_PLAYER_UNIT_ATTACKED, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_BossSkeletSkillActiv, Condition(Trig_BossSkeletSkillActiv_Conditions));
	TriggerAddAction(gg_trg_BossSkeletSkillActiv, Trig_BossSkeletSkillActiv_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Fire_Arrow, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Fire_Arrow, Condition(Trig_Fire_Arrow_Conditions));
	TriggerAddAction(gg_trg_Fire_Arrow, Trig_Fire_Arrow_Actions);
	TriggerRegisterTimerEvent(gg_trg_Use_UnholyFrenzy_and_Fire_Arrow, 1., true);
	TriggerAddCondition(gg_trg_Use_UnholyFrenzy_and_Fire_Arrow, Condition(Trig_Use_UnholyFrenzy_and_Fire_Arrow_Conditions));
	TriggerAddAction(gg_trg_Use_UnholyFrenzy_and_Fire_Arrow, Trig_Use_UnholyFrenzy_and_Fire_Arrow_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Create_Tombstone, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Create_Tombstone, Condition(Trig_Create_Tombstone_Conditions));
	TriggerAddAction(gg_trg_Create_Tombstone, Trig_Create_Tombstone_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_ZombieExploadDeath, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_ZombieExploadDeath, Condition(Trig_ZombieExploadDeath_Conditions));
	TriggerAddAction(gg_trg_ZombieExploadDeath, Trig_ZombieExploadDeath_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Damned_Soul, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Damned_Soul, Condition(Trig_Damned_Soul_Conditions));
	TriggerAddAction(gg_trg_Damned_Soul, Trig_Damned_Soul_Actions);
	TriggerRegisterTimerEvent(gg_trg_Use_PowerofHorror_and_Curse_and_Slam_and_Dumned_Soul, 1., true);
	TriggerAddCondition(gg_trg_Use_PowerofHorror_and_Curse_and_Slam_and_Dumned_Soul, Condition(Trig_Use_PowerofHorror_and_Curse_and_Slam_Conditions));
	TriggerAddAction(gg_trg_Use_PowerofHorror_and_Curse_and_Slam_and_Dumned_Soul, Trig_Use_PowerofHorror_and_Curse_and_Slam_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Throw_Meat, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Throw_Meat, Condition(Trig_Throw_Meat_Conditions));
	TriggerAddAction(gg_trg_Throw_Meat, Trig_Throw_Meat_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Earth_Clap, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Earth_Clap, Condition(Trig_Earth_Clap_Conditions));
	TriggerAddAction(gg_trg_Earth_Clap, Trig_Earth_Clap_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Ghoul_Jump, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Ghoul_Jump, Condition(Trig_Ghoul_Jump_Conditions));
	TriggerAddAction(gg_trg_Ghoul_Jump, Trig_Ghoul_Jump_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_BurrowStrike, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_BurrowStrike, Condition(Trig_BurrowStrike_Conditions));
	TriggerAddAction(gg_trg_BurrowStrike, Trig_BurrowStrike_Actions);
	TriggerRegisterTimerEvent(gg_trg_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump, 1., true);
	TriggerAddCondition(gg_trg_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump, Condition(Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Conditions));
	TriggerAddAction(gg_trg_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump, Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_BeetleCorpseBurrowCast, Player(index), EVENT_PLAYER_UNIT_ATTACKED, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_BeetleCorpseBurrowCast, Condition(Trig_BeetleCorpseBurrowCast_Conditions));
	TriggerAddAction(gg_trg_BeetleCorpseBurrowCast, Trig_BeetleCorpseBurrowCast_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_BeetleCorpseBurrow, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_BeetleCorpseBurrow, Condition(Trig_BeetleCorpseBurrow_Conditions));
	TriggerAddAction(gg_trg_BeetleCorpseBurrow, Trig_BeetleCorpseBurrow_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Cocoon_Creation, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Cocoon_Creation, Condition(Trig_Cocoon_Creation_Conditions));
	TriggerAddAction(gg_trg_Cocoon_Creation, Trig_Cocoon_Creation_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Poisonous_Spittle_Cast, Player(index), EVENT_PLAYER_UNIT_ATTACKED, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Poisonous_Spittle_Cast, Condition(Trig_Poisonous_Spittle_Cast_Conditions));
	TriggerAddAction(gg_trg_Poisonous_Spittle_Cast, Trig_Poisonous_Spittle_Cast_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Holes_Of_Grave_Diggers_Debug_Kill, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Holes_Of_Grave_Diggers_Debug_Kill, Condition(Trig_Holes_Of_Grave_Diggers_Debug_Kill_Conditions));
	TriggerAddAction(gg_trg_Holes_Of_Grave_Diggers_Debug_Kill, Trig_Holes_Of_Grave_Diggers_Debug_Kill_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Holes_Of_Grave_Diggers_Cast, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Holes_Of_Grave_Diggers_Cast, Condition(Trig_Holes_Of_Grave_Diggers_Cast_Conditions));
	TriggerAddAction(gg_trg_Holes_Of_Grave_Diggers_Cast, Trig_Holes_Of_Grave_Diggers_Cast_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Nerub_Spider, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Nerub_Spider, Condition(Trig_Nerub_Spider_Conditions));
	TriggerAddAction(gg_trg_Nerub_Spider, Trig_Nerub_Spider_Actions);
	TriggerRegisterTimerEvent(gg_trg_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger, 1., true);
	TriggerAddCondition(gg_trg_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger, Condition(Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Conditions));
	TriggerAddAction(gg_trg_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger, Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Damned_Ents_Reincarnation, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Damned_Ents_Reincarnation, Condition(Trig_Damned_Ents_Reincarnation_Conditions));
	TriggerAddAction(gg_trg_Damned_Ents_Reincarnation, Trig_Damned_Ents_Reincarnation_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Rage_of_Decay, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Rage_of_Decay, Condition(Trig_Rage_of_Decay_Conditions));
	TriggerAddAction(gg_trg_Rage_of_Decay, Trig_Rage_of_Decay_Actions);
	TriggerRegisterAnyUnitEventBJ(gg_trg_Use_ThrowStone_and_TurnIntoEnt, EVENT_PLAYER_UNIT_ATTACKED);
	TriggerAddCondition(gg_trg_Use_ThrowStone_and_TurnIntoEnt, Condition(Trig_Use_ThrowStone_and_TurnIntoEnt_Conditions));
	TriggerAddAction(gg_trg_Use_ThrowStone_and_TurnIntoEnt, Trig_Use_ThrowStone_and_TurnIntoEnt_Actions);
	TriggerRegisterTimerEventPeriodic(gg_trg_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay, 1.);
	TriggerAddCondition(gg_trg_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay, Condition(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Conditions));
	TriggerAddAction(gg_trg_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay, Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Troll_Dead_Remove_Bugs, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Troll_Dead_Remove_Bugs, Condition(Trig_Troll_Dead_Remove_Bugs_Conditions));
	TriggerAddAction(gg_trg_Troll_Dead_Remove_Bugs, Trig_Troll_Dead_Remove_Bugs_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Boss_Troll_Entangle_Throw, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Boss_Troll_Entangle_Throw, Condition(Trig_Boss_Troll_Entangle_Throw_Conditions));
	TriggerAddAction(gg_trg_Boss_Troll_Entangle_Throw, Trig_Boss_Troll_Entangle_Throw_Actions);
	TriggerRegisterAnyUnitEventBJ(gg_trg_Use_Berserk_and_BerserkBoss, EVENT_PLAYER_UNIT_ATTACKED);
	TriggerAddCondition(gg_trg_Use_Berserk_and_BerserkBoss, Condition(Trig_Use_Berserk_and_BerserkBoss_Conditions));
	TriggerAddAction(gg_trg_Use_Berserk_and_BerserkBoss, Trig_Use_Berserk_and_BerserkBoss_Actions);
	TriggerRegisterTimerEventPeriodic(gg_trg_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle, 1.);
	TriggerAddCondition(gg_trg_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle, Condition(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Conditions));
	TriggerAddAction(gg_trg_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle, Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Aspect_of_Magic_Protection, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Aspect_of_Magic_Protection, Condition(Trig_Aspect_of_Magic_Protection_Conditions));
	TriggerAddAction(gg_trg_Aspect_of_Magic_Protection, Trig_Aspect_of_Magic_Protection_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Remove_Effects_From_Bosses, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Remove_Effects_From_Bosses, Condition(Trig_Remove_Effects_From_Bosses_Conditions));
	TriggerAddAction(gg_trg_Remove_Effects_From_Bosses, Trig_Remove_Effects_From_Bosses_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Metka_Dreneev, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Metka_Dreneev, Condition(Trig_Metka_Dreneev_Conditions));
	TriggerAddAction(gg_trg_Metka_Dreneev, Trig_Metka_Dreneev_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Fast_Attack, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Fast_Attack, Condition(Trig_Fast_Attack_Conditions));
	TriggerAddAction(gg_trg_Fast_Attack, Trig_Fast_Attack_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Bash_Attack, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Bash_Attack, Condition(Trig_Bash_Attack_Conditions));
	TriggerAddAction(gg_trg_Bash_Attack, Trig_Bash_Attack_Actions);
	TriggerRegisterTimerEvent(gg_trg_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack, 1., true);
	TriggerAddCondition(gg_trg_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack, Condition(Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Conditions));
	TriggerAddAction(gg_trg_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack, Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Blink_Strike, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Blink_Strike, Condition(Trig_Blink_Strike_Conditions));
	TriggerAddAction(gg_trg_Blink_Strike, Trig_Blink_Strike_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Victim_Search, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Victim_Search, Condition(Trig_Victim_Search_Conditions));
	TriggerAddAction(gg_trg_Victim_Search, Trig_Victim_Search_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Black_Hole, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Black_Hole, Condition(Trig_Black_Hole_Conditions));
	TriggerAddAction(gg_trg_Black_Hole, Trig_Black_Hole_Actions);
	TriggerRegisterAnyUnitEventBJ(gg_trg_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar, EVENT_PLAYER_UNIT_ATTACKED);
	TriggerAddCondition(gg_trg_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar, Condition(Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Conditions));
	TriggerAddAction(gg_trg_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar, Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Actions);
	TriggerRegisterTimerEventPeriodic(gg_trg_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH, 1.);
	TriggerAddCondition(gg_trg_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH, Condition(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Conditions));
	TriggerAddAction(gg_trg_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH, Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Weakness, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Weakness, Condition(Trig_Weakness_Conditions));
	TriggerAddAction(gg_trg_Weakness, Trig_Weakness_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Astral_Dispersal, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Astral_Dispersal, Condition(Trig_Astral_Dispersal_Conditions));
	TriggerAddAction(gg_trg_Astral_Dispersal, Trig_Astral_Dispersal_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Infernal_Ram, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Infernal_Ram, Condition(Trig_Infernal_Ram_Conditions));
	TriggerAddAction(gg_trg_Infernal_Ram, Trig_Infernal_Ram_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Fiery_Blow, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Fiery_Blow, Condition(Trig_Fiery_Blow_Conditions));
	TriggerAddAction(gg_trg_Fiery_Blow, Trig_Fiery_Blow_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Bloody_Jump, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Bloody_Jump, Condition(Trig_Bloody_Jump_Conditions));
	TriggerAddAction(gg_trg_Bloody_Jump, Trig_Bloody_Jump_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Blood_Absorption, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Blood_Absorption, Condition(Trig_Blood_Absorption_Conditions));
	TriggerAddAction(gg_trg_Blood_Absorption, Trig_Blood_Absorption_Actions);
	TriggerRegisterAnyUnitEventBJ(gg_trg_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u, EVENT_PLAYER_UNIT_ATTACKED);
	TriggerAddCondition(gg_trg_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u, Condition(Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Conditions));
	TriggerAddAction(gg_trg_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u, Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Actions);
	TriggerRegisterTimerEventPeriodic(gg_trg_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4, 1.);
	TriggerAddCondition(gg_trg_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4, Condition(Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Conditions));
	TriggerAddAction(gg_trg_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4, Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Actions);
	TriggerRegisterAnyUnitEventBJ(gg_trg_Hatred_of_fire, EVENT_PLAYER_UNIT_SPELL_EFFECT);
	TriggerAddCondition(gg_trg_Hatred_of_fire, Condition(Trig_Hatred_of_fire_Conditions));
	TriggerAddAction(gg_trg_Hatred_of_fire, Trig_Hatred_of_fire_Actions);
	TriggerRegisterAnyUnitEventBJ(gg_trg_set_fire, EVENT_PLAYER_UNIT_SPELL_EFFECT);
	TriggerAddCondition(gg_trg_set_fire, Condition(firess));
	TriggerAddAction(gg_trg_set_fire, fires);
	TriggerRegisterAnyUnitEventBJ(gg_trg_set_fire_2, EVENT_PLAYER_UNIT_SPELL_EFFECT);
	TriggerAddCondition(gg_trg_set_fire_2, Condition(firess2));
	TriggerAddAction(gg_trg_set_fire_2, fires2);
	TriggerRegisterAnyUnitEventBJ(gg_trg_the_creation_of_the_image, EVENT_PLAYER_UNIT_SPELL_EFFECT);
	TriggerAddCondition(gg_trg_the_creation_of_the_image, Condition(Trig_the_creation_of_the_image_Conditions));
	TriggerAddAction(gg_trg_the_creation_of_the_image, Trig_the_creation_of_the_image_Actions);
	TriggerRegisterAnyUnitEventBJ(gg_trg_fiery_explosions, EVENT_PLAYER_UNIT_SPELL_EFFECT);
	TriggerAddCondition(gg_trg_fiery_explosions, Condition(Trig_fiery_explosions_Conditions));
	TriggerAddAction(gg_trg_fiery_explosions, Trig_fiery_explosions_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Breathoffire, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Breathoffire, Condition(Trig_Breathoffire_Conditions));
	TriggerAddAction(gg_trg_Breathoffire, Trig_Breathoffire_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Fire_Explosions, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Fire_Explosions, Condition(Trig_Fire_Explosions_Conditions));
	TriggerAddAction(gg_trg_Fire_Explosions, Trig_Fire_Explosions_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_BossStomp, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_BossStomp, Condition(Trig_BossStomp_Conditions));
	TriggerAddAction(gg_trg_BossStomp, Trig_BossStomp_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Mark_of_Fire, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Mark_of_Fire, Condition(Trig_Mark_of_Fire_Conditions));
	TriggerAddAction(gg_trg_Mark_of_Fire, Trig_Mark_of_Fire_Actions);
	TriggerRegisterAnyUnitEventBJ(gg_trg_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire, EVENT_PLAYER_UNIT_ATTACKED);
	TriggerAddCondition(gg_trg_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire, Condition(Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Conditions));
	TriggerAddAction(gg_trg_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire, Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Actions);
	TriggerRegisterTimerEventPeriodic(gg_trg_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp, 1.);
	TriggerAddCondition(gg_trg_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp, Condition(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Conditions));
	TriggerAddAction(gg_trg_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp, Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Power_of_Skeletons, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Power_of_Skeletons, Condition(Trig_Power_of_Skeletons_Conditions));
	TriggerAddAction(gg_trg_Power_of_Skeletons, Trig_Power_of_Skeletons_Actions);
	TriggerAddAction(gg_trg_Water_Elemental_Load, Trig_Water_Elemental_Load_Actions);
	TriggerAddAction(gg_trg_Init_kreeps, Trig_Init_kreeps_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_spirits_of_water_dead, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_spirits_of_water_dead, Condition(Trig_spirits_of_water_dead_Conditions));
	TriggerAddAction(gg_trg_spirits_of_water_dead, Trig_spirits_of_water_dead_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Skill_Gertva, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Skill_Gertva, Condition(Trig_Skill_Gertva_Conditions));
	TriggerAddAction(gg_trg_Skill_Gertva, Trig_Skill_Gertva_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Opening_Streams, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Opening_Streams, Condition(Trig_Opening_Streams_Conditions));
	TriggerAddAction(gg_trg_Opening_Streams, Trig_Opening_Streams_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Water_Explosion, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Water_Explosion, Condition(Trig_water_explosion_Conditions));
	TriggerAddAction(gg_trg_Water_Explosion, Trig_water_explosion_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Tsunami, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Tsunami, Condition(Trig_Tsunami_Conditions));
	TriggerAddAction(gg_trg_Tsunami, Trig_Tsunami_Actions);
	TriggerAddAction(gg_trg_Guardsman_Load, Trig_Guardsman_Load_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Protective_Stand_Switch, Player(index), EVENT_PLAYER_UNIT_ISSUED_ORDER, null);
		TriggerRegisterPlayerUnitEvent(gg_trg_Protective_Stand_Switch, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Protective_Stand_Switch, Condition(Trig_Protective_Stand_Switch_Conditions));
	TriggerAddAction(gg_trg_Protective_Stand_Switch, Trig_Protective_Stand_Switch_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Fighting_Skills, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Learn_Fighting_Skills, Condition(Trig_Learn_Fighting_Skills_Conditions));
	TriggerAddAction(gg_trg_Learn_Fighting_Skills, Trig_Learn_Fighting_Skills_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Ram_Board, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Ram_Board, Condition(Trig_Ram_Board_Conditions));
	TriggerAddAction(gg_trg_Ram_Board, Trig_Ram_Board_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Warcry, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Warcry, Condition(Trig_Warcry_Conditions));
	TriggerAddAction(gg_trg_Warcry, Trig_Warcry_Actions);
	TriggerAddAction(gg_trg_Drenor_Bull_Load, Trig_Drenor_Bull_Load_Actions);
	DisableTrigger(gg_trg_Drenor_Bull_Show_Hint);
	TriggerRegisterTimerEventPeriodic(gg_trg_Drenor_Bull_Show_Hint, 120.);
	TriggerAddAction(gg_trg_Drenor_Bull_Show_Hint, Trig_Drenor_Bull_Show_Hint_Actions);
	DisableTrigger(gg_trg_Drenor_Bull_Show_Rage);
	while (true) {
		TriggerRegisterPlayerChatEvent(gg_trg_Drenor_Bull_Show_Rage, Player(index), "-rage", true);
		TriggerRegisterPlayerChatEvent(gg_trg_Drenor_Bull_Show_Rage, Player(index), "-r", true);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Drenor_Bull_Show_Rage, Condition(Trig_Drenor_Bull_Show_Rage_Conditions));
	TriggerAddAction(gg_trg_Drenor_Bull_Show_Rage, Trig_Drenor_Bull_Show_Rage_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Axe_Throw, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Axe_Throw, Condition(Trig_Axe_Throw_Conditions));
	TriggerAddAction(gg_trg_Axe_Throw, Trig_Axe_Throw_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Violent_Roar, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Violent_Roar, Condition(Trig_Violent_Roar_Conditions));
	TriggerAddAction(gg_trg_Violent_Roar, Trig_Violent_Roar_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_upgrade_Berserk, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_upgrade_Berserk, Condition(Trig_upgrade_Berserk_Conditions));
	TriggerAddAction(gg_trg_upgrade_Berserk, Trig_upgrade_Berserk_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Spell_Rage, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Learn_Spell_Rage, Condition(Trig_Learn_Spell_Rage_Conditions));
	TriggerAddAction(gg_trg_Learn_Spell_Rage, Trig_Learn_Spell_Rage_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_GrogTarDead, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_GrogTarDead, Condition(Trig_GrogTarDead_Conditions));
	TriggerAddAction(gg_trg_GrogTarDead, Trig_GrogTarDead_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_attack_hero_Rage, Player(index), EVENT_PLAYER_UNIT_ATTACKED, null);
		if (index == 16) break;
	}
	DisableTrigger(gg_trg_attack_hero_Rage);
	TriggerAddCondition(gg_trg_attack_hero_Rage, Condition(Trig_attack_hero_Rage_Conditions));
	TriggerAddAction(gg_trg_attack_hero_Rage, Trig_attack_hero_Rage_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_kill_hero_Rage, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	DisableTrigger(gg_trg_kill_hero_Rage);
	TriggerAddCondition(gg_trg_kill_hero_Rage, Condition(Trig_kill_hero_Rage_Conditions));
	TriggerAddAction(gg_trg_kill_hero_Rage, Trig_kill_hero_Rage_Actions);
	TriggerRegisterTimerEvent(gg_trg_Sniatie_Rage, 3., true);
	TriggerAddAction(gg_trg_Sniatie_Rage, Trig_Sniatie_Rage_Action);
	DisableTrigger(gg_trg_Sniatie_Rage);
	TriggerRegisterTimerExpireEvent(gg_trg_Timer_Rage, udg_GrogTarRageTimer);
	TriggerAddAction(gg_trg_Timer_Rage, Trig_Timer_last_Actions);
	TriggerAddAction(gg_trg_Illusionist_Load, Trig_Illusionist_Load_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Reflection, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Reflection, Condition(Trig_Reflection_Conditions));
	TriggerAddAction(gg_trg_Reflection, Trig_Reflection_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Illusory_Attack, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Illusory_Attack, Condition(Trig_Illusory_Attack_Conditions));
	TriggerAddAction(gg_trg_Illusory_Attack, Trig_Illusory_Attack_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Summon_Illusions_with_Reflection, Player(index), EVENT_PLAYER_UNIT_SUMMON, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Summon_Illusions_with_Reflection, Condition(Trig_Summon_Illusions_with_Reflection_Conditions));
	TriggerAddAction(gg_trg_Summon_Illusions_with_Reflection, Trig_Summon_Illusions_with_Reflection_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Illusions_with_Phantoms_Dead, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Illusions_with_Phantoms_Dead, Condition(Trig_Illusions_with_Phantoms_Dead_Conditions));
	TriggerAddAction(gg_trg_Illusions_with_Phantoms_Dead, Trig_Illusions_with_Phantoms_Dead_Actions);
	TriggerAddAction(gg_trg_BladeMaster_Load, Trig_BladeMaster_Load_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Dissection, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Dissection, Condition(Trig_Dissection_Conditions));
	TriggerAddAction(gg_trg_Dissection, Trig_Dissection_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Whirlwind, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Whirlwind, Condition(Trig_Whirlwind_Conditions));
	TriggerAddAction(gg_trg_Whirlwind, Trig_Whirlwind_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Imboweling, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Imboweling, Condition(Trig_Imboweling_Conditions));
	TriggerAddAction(gg_trg_Imboweling, Trig_Imboweling_Actions);
	TriggerAddAction(gg_trg_Master_of_Lightnings_Load, Trig_Master_of_Lightnings_Load_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Thundercloud, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Thundercloud, Condition(Trig_Thundercloud_Conditions));
	TriggerAddAction(gg_trg_Thundercloud, Trig_Thundercloud_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Power_of_Lightnings, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Power_of_Lightnings, Condition(Trig_Power_of_Lightnings_Conditions));
	TriggerAddAction(gg_trg_Power_of_Lightnings, Trig_Power_of_Lightnings_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Electric_Field, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Electric_Field, Condition(Trig_Learn_Skill_Electric_Field_Conditions));
	TriggerAddAction(gg_trg_Electric_Field, Trig_Learn_Skill_Electric_Field_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Storm, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Storm, Condition(Trig_Storm_Conditions));
	TriggerAddAction(gg_trg_Storm, Trig_Storm_Actions);
	TriggerRegisterTimerEventSingle(gg_trg_Respawnlol, 5);
	TriggerAddAction(gg_trg_Respawnlol, Trig_Respawnlol_Actions);
	TriggerAddAction(gg_trg_Ranger_Load, Trig_Ranger_Load_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_MultiShotSwitch, Player(index), EVENT_PLAYER_UNIT_ISSUED_ORDER, null);
		TriggerRegisterPlayerUnitEvent(gg_trg_MultiShotSwitch, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_MultiShotSwitch, Condition(Trig_MultiShotSwitch_Conditions));
	TriggerAddAction(gg_trg_MultiShotSwitch, Trig_MultiShotSwitch_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Release_of_Arrows, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Learn_Release_of_Arrows, Condition(Trig_Learn_Release_of_Arrows_Conditions));
	TriggerAddAction(gg_trg_Learn_Release_of_Arrows, Trig_Learn_Release_of_Arrows_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Release_of_Arrows, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Release_of_Arrows, Condition(Trig_Release_of_Arrows_Conditions));
	TriggerAddAction(gg_trg_Release_of_Arrows, Trig_Release_of_Arrows_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Dexterity_of_the_Ranger, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Dexterity_of_the_Ranger, Condition(Trig_Dexterity_of_the_Ranger_Conditions));
	TriggerAddAction(gg_trg_Dexterity_of_the_Ranger, Trig_Dexterity_of_the_Ranger_Actions);
	TriggerAddAction(gg_trg_Healer_Load, Trig_Healer_Load_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Good_Healing, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Good_Healing, Condition(Trig_Good_Healing_Conditions));
	TriggerAddAction(gg_trg_Good_Healing, Trig_Good_Healing_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Spiritual_Communication, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Spiritual_Communication, Condition(Trig_Spiritual_Communication_Conditions));
	TriggerAddAction(gg_trg_Spiritual_Communication, Trig_Spiritual_Communication_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Curing_Light, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Curing_Light, Condition(Trig_Curing_Light_Conditions));
	TriggerAddAction(gg_trg_Curing_Light, Trig_Curing_Light_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Guardian_Angel, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Guardian_Angel, Condition(Trig_Guardian_Angel_Conditions));
	TriggerAddAction(gg_trg_Guardian_Angel, Trig_Guardian_Angel_Actions);
	TriggerAddAction(gg_trg_Paladin_Load, Trig_Paladin_Load_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Spiral_of_Light, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Spiral_of_Light, Condition(Trig_Spiral_of_Light_Conditions));
	TriggerAddAction(gg_trg_Spiral_of_Light, Trig_Spiral_of_Light_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Keeper_Seal, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Keeper_Seal, Condition(Trig_Keeper_Seal_Conditions));
	TriggerAddAction(gg_trg_Keeper_Seal, Trig_Keeper_Seal_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Light_Hammer, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Light_Hammer, Condition(Trig_Light_Hammer_Conditions));
	TriggerAddAction(gg_trg_Light_Hammer, Trig_Light_Hammer_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_God_Hand, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_God_Hand, Condition(Trig_God_Hand_Conditions));
	TriggerAddAction(gg_trg_God_Hand, Trig_God_Hand_Actions);
	TriggerAddAction(gg_trg_Stone_Guard_Load, Trig_Stone_Guard_Load_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Boulder_Throw, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Boulder_Throw, Condition(Trig_Boulder_Throw_Conditions));
	TriggerAddAction(gg_trg_Boulder_Throw, Trig_Boulder_Throw_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Earth_Shiver, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Earth_Shiver, Condition(Trig_Earth_Shiver_Conditions));
	TriggerAddAction(gg_trg_Earth_Shiver, Trig_Earth_Shiver_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Stone_Armor, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Learn_Stone_Armor, Condition(Trig_Learn_Stone_Armor_Conditions));
	TriggerAddAction(gg_trg_Learn_Stone_Armor, Trig_Learn_Stone_Armor_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Rock_Strike, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Rock_Strike, Condition(Trig_Rock_Strike_Conditions));
	TriggerAddAction(gg_trg_Rock_Strike, Trig_Rock_Strike_Actions);
	TriggerAddAction(gg_trg_Archdruid_Load, Trig_Archdruid_Load_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Energy_of_Nature, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Energy_of_Nature, Condition(Trig_Energy_of_Nature_Conditions));
	TriggerAddAction(gg_trg_Energy_of_Nature, Trig_Energy_of_Nature_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Life_Chain, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Life_Chain, Condition(Trig_Life_Chain_Conditions));
	TriggerAddAction(gg_trg_Life_Chain, Trig_Life_Chain_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Ent_Creation, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Ent_Creation, Condition(Trig_Ent_Creation_Conditions));
	TriggerAddAction(gg_trg_Ent_Creation, Trig_Ent_Creation_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Nature_Wrath, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Nature_Wrath, Condition(Trig_Nature_Wrath_Conditions));
	TriggerAddAction(gg_trg_Nature_Wrath, Trig_Nature_Wrath_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Falling_Star, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Falling_Star, Condition(Trig_Falling_Star_Conditions));
	TriggerAddAction(gg_trg_Falling_Star, Trig_Falling_Star_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Moon_Chackram, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Moon_Chackram, Condition(Trig_Moon_Chackram_Conditions));
	TriggerAddAction(gg_trg_Moon_Chackram, Trig_Moon_Chackram_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Moon_Wind, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Moon_Wind, Condition(Trig_Moon_Wind_Conditions));
	TriggerAddAction(gg_trg_Moon_Wind, Trig_Moon_Wind_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Night_Heart, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Night_Heart, Condition(Trig_Night_Heart_Conditions));
	TriggerAddAction(gg_trg_Night_Heart, Trig_Night_Heart_Actions);
	TriggerAddAction(gg_trg_MoonWarrior_Load, Trig_MoonWarrior_Load_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Ancient_Communication, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Ancient_Communication, Condition(Trig_Ancient_Communication_Conditions));
	TriggerAddAction(gg_trg_Ancient_Communication, Trig_Ancient_Communication_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Power_of_Ancestors, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Learn_Power_of_Ancestors, Condition(Trig_Learn_Power_of_Ancestors_Conditions));
	TriggerAddAction(gg_trg_Learn_Power_of_Ancestors, Trig_Learn_Power_of_Ancestors_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Switch_Power_of_Ancestors, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Switch_Power_of_Ancestors, Condition(Trig_Switch_Power_of_Ancestors_Conditions));
	TriggerAddAction(gg_trg_Switch_Power_of_Ancestors, Trig_Switch_Power_of_Ancestors_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Earth_Split, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Earth_Split, Condition(Trig_Earth_Split_Conditions));
	TriggerAddAction(gg_trg_Earth_Split, Trig_Earth_Split_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Ancient_Help, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Ancient_Help, Condition(Trig_Ancient_Help_Conditions));
	TriggerAddAction(gg_trg_Ancient_Help, Trig_Ancient_Help_Actions);
	TriggerAddAction(gg_trg_SpiritBreaker_Load, Trig_SpiritBreaker_Load_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Dash, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Dash, Condition(Trig_Dash_Conditions));
	TriggerAddAction(gg_trg_Dash, Trig_Dash_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Dagger_Throw, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Dagger_Throw, Condition(Trig_Dagger_Throw_Conditions));
	TriggerAddAction(gg_trg_Dagger_Throw, Trig_Dagger_Throw_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Kara_Justice, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Kara_Justice, Condition(Trig_Kara_Justice_Conditions));
	TriggerAddAction(gg_trg_Kara_Justice, Trig_Kara_Justice_Actions);
	TriggerAddAction(gg_trg_Warden_Load, Trig_SpiritBreaker_Load_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Strength_Fist, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Strength_Fist, Condition(Trig_Strength_Fist_Conditions));
	TriggerAddAction(gg_trg_Strength_Fist, Trig_Strength_Fist_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Fighting_Impact, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Fighting_Impact, Condition(Trig_Fighting_Impact_Conditions));
	TriggerAddAction(gg_trg_Fighting_Impact, Trig_Fighting_Impact_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Marshal_Armor, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Learn_Marshal_Armor, Condition(Trig_Learn_Marshal_Armor_Conditions));
	TriggerAddAction(gg_trg_Learn_Marshal_Armor, Trig_Learn_Marshal_Armor_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Illusive_Army, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Illusive_Army, Condition(Trig_Illusive_Army_Conditions));
	TriggerAddAction(gg_trg_Illusive_Army, Trig_Illusive_Army_Actions);
	TriggerAddAction(gg_trg_Marshal_Load, Trig_Marshal_Load_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Chain_Lightning, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Chain_Lightning, Condition(Trig_Chain_Lightning_Conditions));
	TriggerAddAction(gg_trg_Chain_Lightning, Trig_Chain_Lightning_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Magic_Trap, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Magic_Trap, Condition(Trig_Magic_Trap_Conditions));
	TriggerAddAction(gg_trg_Magic_Trap, Trig_Magic_Trap_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Remove_Lightning_Form_Dead_Units, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Remove_Lightning_Form_Dead_Units, Condition(Trig_Remove_Lightning_Form_Dead_Units_Conditions));
	TriggerAddAction(gg_trg_Remove_Lightning_Form_Dead_Units, Trig_Remove_Lightning_Form_Dead_Units_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_EnergyWave, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_EnergyWave, Condition(Trig_EnergyWave_Conditions));
	TriggerAddAction(gg_trg_EnergyWave, Trig_EnergyWave_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Magic_Epicenter, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Magic_Epicenter, Condition(Trig_Magic_Epicenter_Conditions));
	TriggerAddAction(gg_trg_Magic_Epicenter, Trig_Magic_Epicenter_Actions);
	TriggerAddAction(gg_trg_Load_ArchMage, Trig_Load_ArchMage_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Toxic_Field, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Toxic_Field, Condition(Trig_Toxic_Field_Conditions));
	TriggerAddAction(gg_trg_Toxic_Field, Trig_Toxic_Field_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Poison_Bomb, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Poison_Bomb, Condition(Trig_Poison_Bomb_Conditions));
	TriggerAddAction(gg_trg_Poison_Bomb, Trig_Poison_Bomb_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Ogre_Rage, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Learn_Ogre_Rage, Condition(Trig_Learn_Ogre_Rage_Conditions));
	TriggerAddAction(gg_trg_Learn_Ogre_Rage, Trig_Learn_Ogre_Rage_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Potion_of_Growth, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Potion_of_Growth, Condition(Trig_Potion_of_Growth_Conditions));
	TriggerAddAction(gg_trg_Potion_of_Growth, Trig_Potion_of_Growth_Actions);
	TriggerAddAction(gg_trg_Load_Alchemist, Trig_Load_Alchemist_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Case_Shot, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Case_Shot, Condition(Trig_Case_Shot_Conditions));
	TriggerAddAction(gg_trg_Case_Shot, Trig_Case_Shot_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Fire_Position, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Learn_Fire_Position, Condition(Trig_Learn_Fire_Position_Conditions));
	TriggerAddAction(gg_trg_Learn_Fire_Position, Trig_Learn_Fire_Position_Actions);
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Dwarf_Cannon, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Dwarf_Cannon, Condition(Trig_Dwarf_Cannon_Conditions));
	TriggerAddAction(gg_trg_Dwarf_Cannon, Trig_Dwarf_Cannon_Actions);
	TriggerAddAction(gg_trg_Load_Sniper, Trig_Load_Sniper_Actions);
	ConditionalTriggerExecute(gg_trg_InitHashtable);
	ConditionalTriggerExecute(gg_trg_InitSystem);
	ConditionalTriggerExecute(gg_trg_Init_kreeps);
	ConditionalTriggerExecute(gg_trg_Drenor_Bull_Load);
}
nothing config() {
	SetMapName("TRIGSTR_001");
	SetMapDescription("TRIGSTR_003");
	SetPlayers($A);
	SetTeams($A);
	SetGamePlacement(MAP_PLACEMENT_TEAMS_TOGETHER);
	DefineStartLocation(0, 4928., 3840.);
	DefineStartLocation(1, 4928., 3840.);
	DefineStartLocation(2, 4928., 3840.);
	DefineStartLocation(3, 4928., 3840.);
	DefineStartLocation(4, 4928., 3840.);
	DefineStartLocation(5, 4928., 3840.);
	DefineStartLocation(6, 4928., 3840.);
	DefineStartLocation(7, 4928., 3840.);
	DefineStartLocation(8, 4928., 3840.);
	DefineStartLocation(9, 4928., 3840.);
	SetPlayerStartLocation(Player(0), 0);
	ForcePlayerStartLocation(Player(0), 0);
	SetPlayerColor(Player(0), ConvertPlayerColor(0));
	SetPlayerRacePreference(Player(0), RACE_PREF_HUMAN);
	SetPlayerRaceSelectable(Player(0), false);
	SetPlayerController(Player(0), MAP_CONTROL_USER);
	SetPlayerStartLocation(Player(1), 1);
	ForcePlayerStartLocation(Player(1), 1);
	SetPlayerColor(Player(1), ConvertPlayerColor(1));
	SetPlayerRacePreference(Player(1), RACE_PREF_HUMAN);
	SetPlayerRaceSelectable(Player(1), false);
	SetPlayerController(Player(1), MAP_CONTROL_USER);
	SetPlayerStartLocation(Player(2), 2);
	ForcePlayerStartLocation(Player(2), 2);
	SetPlayerColor(Player(2), ConvertPlayerColor(2));
	SetPlayerRacePreference(Player(2), RACE_PREF_HUMAN);
	SetPlayerRaceSelectable(Player(2), false);
	SetPlayerController(Player(2), MAP_CONTROL_USER);
	SetPlayerStartLocation(Player(3), 3);
	ForcePlayerStartLocation(Player(3), 3);
	SetPlayerColor(Player(3), ConvertPlayerColor(3));
	SetPlayerRacePreference(Player(3), RACE_PREF_HUMAN);
	SetPlayerRaceSelectable(Player(3), false);
	SetPlayerController(Player(3), MAP_CONTROL_USER);
	SetPlayerStartLocation(Player(4), 4);
	ForcePlayerStartLocation(Player(4), 4);
	SetPlayerColor(Player(4), ConvertPlayerColor(4));
	SetPlayerRacePreference(Player(4), RACE_PREF_HUMAN);
	SetPlayerRaceSelectable(Player(4), false);
	SetPlayerController(Player(4), MAP_CONTROL_USER);
	SetPlayerStartLocation(Player(5), 5);
	ForcePlayerStartLocation(Player(5), 5);
	SetPlayerColor(Player(5), ConvertPlayerColor(5));
	SetPlayerRacePreference(Player(5), RACE_PREF_HUMAN);
	SetPlayerRaceSelectable(Player(5), false);
	SetPlayerController(Player(5), MAP_CONTROL_USER);
	SetPlayerStartLocation(Player(6), 6);
	ForcePlayerStartLocation(Player(6), 6);
	SetPlayerColor(Player(6), ConvertPlayerColor(6));
	SetPlayerRacePreference(Player(6), RACE_PREF_HUMAN);
	SetPlayerRaceSelectable(Player(6), false);
	SetPlayerController(Player(6), MAP_CONTROL_USER);
	SetPlayerStartLocation(Player(7), 7);
	ForcePlayerStartLocation(Player(7), 7);
	SetPlayerColor(Player(7), ConvertPlayerColor(7));
	SetPlayerRacePreference(Player(7), RACE_PREF_HUMAN);
	SetPlayerRaceSelectable(Player(7), false);
	SetPlayerController(Player(7), MAP_CONTROL_USER);
	SetPlayerStartLocation(Player(8), 8);
	ForcePlayerStartLocation(Player(8), 8);
	SetPlayerColor(Player(8), ConvertPlayerColor(8));
	SetPlayerRacePreference(Player(8), RACE_PREF_HUMAN);
	SetPlayerRaceSelectable(Player(8), false);
	SetPlayerController(Player(8), MAP_CONTROL_USER);
	SetPlayerStartLocation(Player($B), 9);
	ForcePlayerStartLocation(Player($B), 9);
	SetPlayerColor(Player($B), ConvertPlayerColor($B));
	SetPlayerRacePreference(Player($B), RACE_PREF_UNDEAD);
	SetPlayerRaceSelectable(Player($B), false);
	SetPlayerController(Player($B), MAP_CONTROL_COMPUTER);
	InitCustomTeams();
	SetStartLocPrioCount(0, 8);
	SetStartLocPrio(0, 0, 1, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(0, 1, 2, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(0, 2, 3, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(0, 3, 4, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(0, 4, 5, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(0, 5, 6, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(0, 6, 7, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(0, 7, 8, MAP_LOC_PRIO_HIGH);
	SetStartLocPrioCount(1, 8);
	SetStartLocPrio(1, 0, 0, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(1, 1, 2, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(1, 2, 3, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(1, 3, 4, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(1, 4, 5, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(1, 5, 6, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(1, 6, 7, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(1, 7, 8, MAP_LOC_PRIO_HIGH);
	SetStartLocPrioCount(2, 8);
	SetStartLocPrio(2, 0, 0, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(2, 1, 1, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(2, 2, 3, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(2, 3, 4, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(2, 4, 5, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(2, 5, 6, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(2, 6, 7, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(2, 7, 8, MAP_LOC_PRIO_HIGH);
	SetStartLocPrioCount(3, 8);
	SetStartLocPrio(3, 0, 0, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(3, 1, 1, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(3, 2, 2, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(3, 3, 4, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(3, 4, 5, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(3, 5, 6, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(3, 6, 7, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(3, 7, 8, MAP_LOC_PRIO_HIGH);
	SetStartLocPrioCount(4, 8);
	SetStartLocPrio(4, 0, 0, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(4, 1, 1, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(4, 2, 2, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(4, 3, 3, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(4, 4, 5, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(4, 5, 6, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(4, 6, 7, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(4, 7, 8, MAP_LOC_PRIO_HIGH);
	SetStartLocPrioCount(5, 8);
	SetStartLocPrio(5, 0, 0, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(5, 1, 1, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(5, 2, 2, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(5, 3, 3, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(5, 4, 4, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(5, 5, 6, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(5, 6, 7, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(5, 7, 8, MAP_LOC_PRIO_HIGH);
	SetStartLocPrioCount(6, 8);
	SetStartLocPrio(6, 0, 0, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(6, 1, 1, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(6, 2, 2, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(6, 3, 3, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(6, 4, 4, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(6, 5, 5, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(6, 6, 7, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(6, 7, 8, MAP_LOC_PRIO_HIGH);
	SetStartLocPrioCount(7, 8);
	SetStartLocPrio(7, 0, 0, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(7, 1, 1, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(7, 2, 2, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(7, 3, 3, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(7, 4, 4, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(7, 5, 5, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(7, 6, 6, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(7, 7, 8, MAP_LOC_PRIO_HIGH);
	SetStartLocPrioCount(8, 8);
	SetStartLocPrio(8, 0, 0, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(8, 1, 1, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(8, 2, 2, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(8, 3, 3, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(8, 4, 4, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(8, 5, 5, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(8, 6, 6, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(8, 7, 7, MAP_LOC_PRIO_HIGH);
	SetStartLocPrioCount(9, 3);
	SetStartLocPrio(9, 0, 0, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(9, 1, 1, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(9, 2, 2, MAP_LOC_PRIO_HIGH);
}