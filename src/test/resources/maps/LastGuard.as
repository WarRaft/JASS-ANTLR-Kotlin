force udg_IGRAET = null;
int udg_PreD_Dop = 0;
int udg_PreD_Osn = 0;
int udg_BaZa_PrEd = 0;
texttag udg_TEXT = null;
array<unit> udg_player_hero;
multiboard udg_Multiboard = null;
unit udg_KripsLill = null;
int udg_Time_second = 0;
int udg_Time_minuts = 0;
int udg_Time_hours = 0;
force udg_Liver = null;
int udg_SkillLevel = 0;
array<weathereffect> udg_Les_Luna;
array<unit> udg_Dammy_Portal;
timer udg_Timer_Nomera_Volni = null;
array<int> udg_Wave_Unit_tape;
int udg_number_of_otriad_mobs = 0;
int udg_Nomer_samoi_volni = 0;
array<bool> udg_Igraet_Igrok;
array<force> udg_Duel_Igrok;
array<unit> udg_herounit;
int udg_Hero_Duel_Raund = 0;
array<unit> udg_hero_Duel_Unit;
unit udg_Shield_Marshal_Cater = null;
int udg_DrenorBugaiRage = 0;
unit udg_Gnev_Caster = null;
unit udg_GrorTar = null;
array<unit> udg_Weave;
group udg_Weave_group = null;
array<location> udg_Weave_point;
array<int> udg_Items_massive;
int udg_Integer_item = 0;
timer udg_Timer_Check_Forkreep_system = null;
int udg_Integer_kreeps_system_check = 0;
hashtable udg_hash = null;
array<int> udg_Heroes_Types;
int udg_Random_Hero_Count = 0;
int udg_Total_Heroes_Count = 0;
array<int> udg_Heroes_Random_Data;
int udg_Hero_Random_Local = 0;
force udg_Gruppa_Igrokov_Vibor_Heroev = null;
float udg_RealAngelPovorotLocalEitiArena = 0;
int udg_IntegerEitiAbilityPassiveSkill = 0;
unit udg_EEETTTIII = null;
timer udg_Timer_Eiti_Areni = null;
group udg_Gruppa_HeroUnitov_Geroev = null;
array<int> udg_Integer_Kolvo_Giznei_EtitArena;
group udg_OtriadPortalUnitsEitiArena = null;
weathereffect udg_BossFightWeather = null;
unit udg_Unit_FilterMostNearUnit = null;
group udg_DamageGroup = null;
array<int> udg_spirits_of_water;
unit udg_preloader = null;
int udg_Integer_spirits_of_water = 0;
leaderboard udg_HandleBoard = null;
timer udg_DrenorBugaiRageTimer = null;
timer udg_GrogTarRageTimer = null;
group udg_GroupRandomUnitFromGroup = null;
dialog udg_Dialog_Select_Difficult = null;
array<button> udg_Dialog_Button_Select_Difficult;
int udg_Difficult_Level = 0;
timer udg_TimerMobsAttackBase = null;
force udg_Players_Enemy_Group = null;
int udg_count = 0;
timer udg_Timer_Dialog_Select = null;
sound udg_SimError = null;
string udg_strCounter = "";
array<string> udg_ColorString;
unit udg_selectedunittest = null;
int udg_Reks = 0;
array<float> udg_Temp_Real;
array<player> udg_Temp_Player;
int udg_Peski = 0;
unit udg_Temp_Unit = null;
array<int> udg_Temp_Integer;
int udg_bb = 0;
force udg_Players_Ally_Group = null;
int udg_CountPlayers = 0;
array<int> udg_PlayerNumberInMB;
multiboard udg_MultiBoard = null;
array<string> udg_MutliBoardHeroIcon;
int udg_CountPlayersInTeam1 = 0;
force udg_PlayerGroup = null;
array<int> udg_MultiBoard_Player_Kills_Count;
array<int> udg_MultiBoard_Player_Deaths_Count;
array<int> udg_MultiBoard_Player_Assist_Count;
array<int> udg_Hero_Respawn_Time;
array<string> udg_Potion_Effect;
array<string> udg_Potion_Type;
array<int> udg_Potion_Heal_Amount;
array<float> udg_Potion_Size;
weathereffect udg_BossFightWeather2 = null;
timerdialog udg_TimerDialog_Nomera_Volni = null;
int udg_Integer_Item_Recipe_Level = 0;
bool udg_Show_Item_Link_Text = false;
timer udg_ttt = null;
array<unit> udg_ShopSelectedForPlayer;
array<effect> udg_ShopEffectSelectedForPlayer;
array<weathereffect> udg_Weather;
array<unit> udg_DummyHeroPick;
bool udg_IsMinimapPingGuardsAttacked = false;
int udg_CountGuardsExorcist = 0;
bool udg_IsGameEnd = false;
group udg_PortalCastersMagi = null;
array<fogmodifier> udg_BaseVisionFogModifier;
timer udg_InitMapTimer = null;
array<timer> udg_HintsTimerPlayer;
force udg_Drenor_Bull_Hint_Player_Group = null;
array<string> udg_Hero_Player_Color_String;
array<sound> udg_Game_Sound;
array<float> udg_Player_Taken_Damage_Current;
array<float> udg_Player_Taken_Damage_All;
array<float> udg_Player_Received_Damage_Current;
array<bool> udg_System_ShowAbil_And_Items_Hint;
timer udg_TimerShowAndFlushAllPlayerDmg = null;
array<bool> udg_Boolean_Player_Fast_Purchase;
array<location> udg_Temp_Location;
bool udg_Boolean_Is_Rain = false;
timer udg_Timer_Lightning_Strike_Weather = null;
array<int> udg_Integer_Creep_On_Line_Spawn;
array<group> udg_Group_Pickeds_Refrence_Panel;
float udg_Time_Before_Creeps_Spawn = 0;
int udg_Count_Players_Fast_Wave_Start = 0;
array<bool> udg_Is_Player_Fast_Wave_Start;
bool udg_Is_Fast_Wave_Start_On_Off = false;
array<int> udg_Count_Item_Tips_Message;
array<unit> udg_Rune_On_Base_Dummy;
array<float> udg_Rune_On_Base_Dummy_X;
array<float> udg_Rune_On_Base_Dummy_Y;
array<effect> udg_Rune_On_Base_Effect;
array<string> udg_Rune_On_Base_Effect_String;
timer udg_Timer_Hint_About_Fast_Start = null;
array<int> udg_Bonus_Gold_ChestGold;
int udg_Wave_Progress_for_MultiBoard = 0;
bool udg_Is_Eiti_Arena_Already_Go = false;
bool udg_Fire_Boss_Turn_On = false;
array<group> udg_Temp_Group;
location udg_TempPoint = null;
array<bool> udg_Is_Rune_On_Position;
array<int> udg_Rune_Position_X;
array<int> udg_Rune_Position_Y;
timer udg_Timer_Arrow_Pointer_Guide = null;
array<int> udg_Arrow_Pointer_Guide_X;
array<int> udg_Arrow_Pointer_Guide_Y;
array<int> udg_Arrow_Pointer_Guide_Angle;
array<unit> udg_Arrow_Pointer_Guide_Unit;
array<effect> udg_Arrow_Pointer_Guide_Effect;
int udg_Arrow_Pointer_Guide_Count = 0;
array<int> udg_EnergyWallX;
array<int> udg_EnergyWallY;
array<int> udg_EnergyWallAngle;
array<int> udg_EnergyWallCount;
array<unit> udg_EnergyWallUnit;
array<destructable> udg_EnergyWallBlock;
array<unit> udg_BeornDenHouse;
unit udg_BeornBoss = null;
int udg_Ishod_S_Beornami = 0;
bool udg_BeornBossFightEnd = false;
bool udg_IsBeronsFightWin = false;
unit udg_Marshal = null;
group udg_gdamageallnew = null;
unit udg_Hero_Randomed = null;
array<bool> udg_Is_Player_Got_Randomed;
rect gg_rct_Miners_Arena = null;
rect gg_rct_Duel_left = null;
rect gg_rct_Portal_1_down_left_Start = null;
rect gg_rct_Base = null;
rect gg_rct_Portal_baza = null;
rect gg_rct_Les_2 = null;
rect gg_rct_Les_1 = null;
rect gg_rct_Pogoda_v_bolote = null;
rect gg_rct_cast_magi = null;
rect gg_rct_Event_Bonus_Etei_arena_1 = null;
rect gg_rct_Portal_3_up_Start = null;
rect gg_rct_Portal_2_down_right_Start = null;
rect gg_rct_Oblstb_Tavern = null;
rect gg_rct_Hero_Arena = null;
rect gg_rct_les_3 = null;
rect gg_rct_Respawn_Heroes = null;
rect gg_rct_Oblast_Teleporta_Arena_Bot = null;
rect gg_rct_Oblast_Teleporta_Arena_Top = null;
rect gg_rct_6 = null;
rect gg_rct_BaseDopVision = null;
rect gg_rct_Center_Vision = null;
rect gg_rct_Portal_Attack_Dummy_Left = null;
rect gg_rct_Portal_Attack_Dummy_Right = null;
rect gg_rct_Portal_Attack_Dummy_Top = null;
rect gg_rct_Duel_right = null;
rect gg_rct_PlayableAreaVisionDeBag = null;
rect gg_rct_MinusVision1 = null;
rect gg_rct_Les1_Dop1 = null;
rect gg_rct_Les1_Dop2 = null;
rect gg_rct_Beorn_Boss_Area = null;
rect gg_rct_Beorn_Boss_Area2 = null;
camerasetup gg_cam_Kamera_na_taverni = null;
camerasetup gg_cam_Kamera_glavnoi_bazi = null;
camerasetup gg_cam_Camera_Eiti_Arena = null;
camerasetup gg_cam_Camera_Eiti_Arena_Top_Portal = null;
camerasetup gg_cam_Camera_Eiti_Arena_Bot_Portal = null;
camerasetup gg_cam_Camera_miners_arena = null;
camerasetup gg_cam_Camera_BossFightStart = null;
camerasetup gg_cam_Camera_Duel_Arena = null;
camerasetup gg_cam_Kamera_cast_magi = null;
camerasetup gg_cam_Camera_Beorn_Den1 = null;
camerasetup gg_cam_Camera_Beorn_Den2 = null;
camerasetup gg_cam_Camera_Beorn_Den3 = null;
camerasetup gg_cam_Camera_Beorn_Den4 = null;
camerasetup gg_cam_Camera_Beorn_Den5 = null;
camerasetup gg_cam_Camera_Beorn_Den6 = null;
sound gg_snd_HeroFirelordYesAttack1 = null;
sound gg_snd_HeroFirelordYesAttack2 = null;
sound gg_snd_HeroFirelordYesAttack3 = null;
sound gg_snd_HeroFirelordWarcry1 = null;
sound gg_snd_HeroLichReady1 = null;
sound gg_snd_HeroLichYesAttack1 = null;
sound gg_snd_HeroLichYesAttack2 = null;
sound gg_snd_HeroLichYesAttack3 = null;
sound gg_snd_DeathSound1 = null;
sound gg_snd_KnightNoGold1 = null;
sound gg_snd_KnightInventoryFull1 = null;
sound gg_snd_HeroStep1 = null;
sound gg_snd_HeroStep2 = null;
sound gg_snd_HeroStep3 = null;
sound gg_snd_HeroStep4 = null;
sound gg_snd_HuntressYesAttack4 = null;
sound gg_snd_WardenAttackEffort1 = null;
sound gg_snd_AlchemistChemicalBurst1 = null;
sound gg_snd_AlchemistMorph1 = null;
sound gg_snd_HeroAlchemistYesAttack1 = null;
trigger gg_trg_Animation_test_____________________u = null;
trigger gg_trg_Players_Start_Script = null;
trigger gg_trg_InitMap = null;
trigger gg_trg_InitMapStage2 = null;
trigger gg_trg_System_Spells_Load = null;
trigger gg_trg_Items_Preload = null;
trigger gg_trg_Igrok_Massiv_Save = null;
trigger gg_trg_Load_Vsiakoe = null;
trigger gg_trg_Igrok_Massiv_Liver = null;
trigger gg_trg_Messager = null;
trigger gg_trg_Create_TExttags_about_Shops = null;
trigger gg_trg_InitHashtable = null;
trigger gg_trg_Save_Sounds = null;
trigger gg_trg_HandleCounter = null;
trigger gg_trg_Set_Chlenix = null;
trigger gg_trg_Set_Energy_Walls = null;
trigger gg_trg_Test_System_Anvar = null;
trigger gg_trg_test_eiti_arena = null;
trigger gg_trg_Nachalo_Eiti_aren = null;
trigger gg_trg_HeroDeadonEitiArena = null;
trigger gg_trg__PortalCheckTop = null;
trigger gg_trg__PortalCheckBot = null;
trigger gg_trg_Eiti_Dead = null;
trigger gg_trg_LinkItemsInit = null;
trigger gg_trg_ItemPickedUp = null;
trigger gg_trg_ChargesConnecting = null;
trigger gg_trg_Remove_Dammi_Items = null;
trigger gg_trg_Save_Items_Cost = null;
trigger gg_trg_Ice_Boss = null;
trigger gg_trg_Ice_Wall = null;
trigger gg_trg_Ice_Storm = null;
trigger gg_trg_Ice_Rain = null;
trigger gg_trg_Cold_Punishment = null;
trigger gg_trg_Ice_Restoration = null;
trigger gg_trg_Turn_on_Fire_Bossfight = null;
trigger gg_trg_test_fire_boss = null;
trigger gg_trg_BossStart = null;
trigger gg_trg_FlameSpells = null;
trigger gg_trg_Fire_Circle = null;
trigger gg_trg_Fire_Meteor = null;
trigger gg_trg_Upgrade_Summons = null;
trigger gg_trg_____________________________________007 = null;
trigger gg_trg_UseBeornSpells = null;
trigger gg_trg_Start_Beorn_Den = null;
trigger gg_trg_Beorn_Push = null;
trigger gg_trg_Beorn_Stomp = null;
trigger gg_trg_HeroUnitGameSave = null;
trigger gg_trg_INIT = null;
trigger gg_trg_Pick_Hero_Upgrade = null;
trigger gg_trg_Pick_Hero = null;
trigger gg_trg_Hero_Dead = null;
trigger gg_trg_asd = null;
trigger gg_trg_Start_Duel = null;
trigger gg_trg_Hero_Death_On_Duel = null;
trigger gg_trg_Test_plus_wwave_number = null;
trigger gg_trg_Timer_Check = null;
trigger gg_trg_go_mochiytb_portal = null;
trigger gg_trg_Start_game = null;
trigger gg_trg_StartWave = null;
trigger gg_trg_MobsAttackBase = null;
trigger gg_trg_TeleportStuckedCreeps = null;
trigger gg_trg_vhodit_v_zony = null;
trigger gg_trg_Add_Gold_System_Receiving_Gold_for_Creeps = null;
trigger gg_trg_Init_System_Receiving_Gold_for_Creeps = null;
trigger gg_trg_Init_System_Receiving_Experience_for_Creeps = null;
trigger gg_trg_Add_Experience_System_Receiving_Experience_for_Creeps = null;
trigger gg_trg_Test_Potion_System = null;
trigger gg_trg_Init_Potion_System = null;
trigger gg_trg_Mob_Dead_Create_Potion = null;
trigger gg_trg_Check_Potion_Picked_Up = null;
trigger gg_trg_InitSystem = null;
trigger gg_trg_EnterUnit = null;
trigger gg_trg_AddDamage = null;
trigger gg_trg_TimeTalisman = null;
trigger gg_trg_Take_Paladin_Armor = null;
trigger gg_trg_Take_Archimagus_Staff = null;
trigger gg_trg_Lost_Charged_Staff_of_Lightning = null;
trigger gg_trg_Blood_Bow = null;
trigger gg_trg_Balance_Ring = null;
trigger gg_trg_Armageddon_Staff = null;
trigger gg_trg_Sargeras_Crown = null;
trigger gg_trg_Lost_Sargeras_Crown = null;
trigger gg_trg_Take_Sargeras_Crown = null;
trigger gg_trg_Lost_Archimagus_Armor = null;
trigger gg_trg_Take_Archimagus_Armor = null;
trigger gg_trg_Sorcerers_Talisman_Cast = null;
trigger gg_trg_Sorcerers_Talisman = null;
trigger gg_trg_Sorcerers_Talisman_Dead_Unit = null;
trigger gg_trg_Orc_Banner = null;
trigger gg_trg_Devil_Axe = null;
trigger gg_trg_Devil_Axe_Kill_Unit = null;
trigger gg_trg_Tokugawas_Katan_Kill_Unit = null;
trigger gg_trg_Tokugawas_Katan = null;
trigger gg_trg_Kings_Armor = null;
trigger gg_trg_Steel_Bib = null;
trigger gg_trg_Archimagus_Staff = null;
trigger gg_trg_Isidors_Scepter = null;
trigger gg_trg_Detached_Shield_Use = null;
trigger gg_trg_Cuirass_of_Invulnerable_Use2 = null;
trigger gg_trg_Cuirass_of_Invulnerable_Use = null;
trigger gg_trg_Detached_Shield_and_Cuirass_of_Invulnerable_Issue_Order = null;
trigger gg_trg_Lost_Cuirass_of_Invulnerable = null;
trigger gg_trg_Take_Cuirass_of_Invulnerable = null;
trigger gg_trg_Fire_Staff = null;
trigger gg_trg_Demon_Axe = null;
trigger gg_trg_Demon_Axe_Kill_Unit = null;
trigger gg_trg_Boots_Rescue = null;
trigger gg_trg_Astral_Staff = null;
trigger gg_trg_Healer_Staff = null;
trigger gg_trg_Magic_Amulet = null;
trigger gg_trg_Blood_Dagger = null;
trigger gg_trg_Agility_Blade = null;
trigger gg_trg_Bone_Staff_Set_Summon_Ability_Level = null;
trigger gg_trg_Novice_Amulet = null;
trigger gg_trg_Glove_of_Andromat = null;
trigger gg_trg_Glove_of_Midas = null;
trigger gg_trg_Ring_illusionist = null;
trigger gg_trg_Armor_Skill = null;
trigger gg_trg_Steel_gauntlets = null;
trigger gg_trg_Dagger_Cruelty = null;
trigger gg_trg_Heroes_more_attacked_priority_when_guards = null;
trigger gg_trg_Player_Fast_Purchase_System = null;
trigger gg_trg_Show_hint_abount_hints = null;
trigger gg_trg_Show_Hint_Abount_Items = null;
trigger gg_trg_Hint_About_Random = null;
trigger gg_trg_Show_hint_abount_reference_panel = null;
trigger gg_trg_Show_Ability_Learn = null;
trigger gg_trg_System_Personal_Items_Buy_Item = null;
trigger gg_trg_System_Personal_Items_Pick_Up_Item = null;
trigger gg_trg_no_attack = null;
trigger gg_trg_Select_Refrence_Panel = null;
trigger gg_trg_ShopAnimation = null;
trigger gg_trg_ShopStopAnimation = null;
trigger gg_trg_RedMarkToUnit = null;
trigger gg_trg_UnSelectedDummyRedMark = null;
trigger gg_trg_SpecEffect_on_Casters = null;
trigger gg_trg_PortalSpecEffects = null;
trigger gg_trg_Gates_Start_Animation = null;
trigger gg_trg_PlayerEnterGameCommand = null;
trigger gg_trg_PlayerUseSpellGameCommand = null;
trigger gg_trg_GuardsExorcistDead = null;
trigger gg_trg_PauseUnitWhenDefeat = null;
trigger gg_trg_PauseUnitWhenWin = null;
trigger gg_trg_GameEndWin = null;
trigger gg_trg_Respawn_trees_Init = null;
trigger gg_trg_Respawn_trees = null;
trigger gg_trg_Day_Weather = null;
trigger gg_trg_Sky_Morning = null;
trigger gg_trg_Sky_Day = null;
trigger gg_trg_Night_Weather = null;
trigger gg_trg_Sky_Evening = null;
trigger gg_trg_Sky_Night = null;
trigger gg_trg_Lightnings_Weather_Effect_Rainy = null;
trigger gg_trg_Periodic_Rune_Creation = null;
trigger gg_trg_Rune_PickedUp = null;
trigger gg_trg_Initialization_MultiBoard = null;
trigger gg_trg_Hero_MultiBoard_LvlUp = null;
trigger gg_trg_Time_Check_and_Player_Gold_for_MultiBoard = null;
trigger gg_trg_Reincarnation_Skeletons = null;
trigger gg_trg_BossSkeletRaise = null;
trigger gg_trg_BossSkeletSkillActiv = null;
trigger gg_trg_Fire_Arrow = null;
trigger gg_trg_Use_UnholyFrenzy_and_Fire_Arrow = null;
trigger gg_trg_Use_UnholyFrenzy_and_Fire_Arrow_____________________u = null;
trigger gg_trg_Create_Tombstone = null;
trigger gg_trg_ZombieExploadDeath = null;
trigger gg_trg_Damned_Soul = null;
trigger gg_trg_Use_PowerofHorror_and_Curse_and_Slam_and_Dumned_Soul = null;
trigger gg_trg_Throw_Meat = null;
trigger gg_trg_Earth_Clap = null;
trigger gg_trg_Use_PowerofHorror_and_Curse_and_Slam_____________________u = null;
trigger gg_trg_Ghoul_Jump = null;
trigger gg_trg_BurrowStrike = null;
trigger gg_trg_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump = null;
trigger gg_trg_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul______________________u = null;
trigger gg_trg_BeetleCorpseBurrowCast = null;
trigger gg_trg_BeetleCorpseBurrow = null;
trigger gg_trg_Cocoon_Creation = null;
trigger gg_trg_Poisonous_Spittle_Cast = null;
trigger gg_trg_Holes_Of_Grave_Diggers_Debug_Kill = null;
trigger gg_trg_Holes_Of_Grave_Diggers_Cast = null;
trigger gg_trg_Nerub_Spider = null;
trigger gg_trg_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger = null;
trigger gg_trg_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Old = null;
trigger gg_trg_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDa_____________________u = null;
trigger gg_trg_Damned_Ents_Reincarnation = null;
trigger gg_trg_Rage_of_Decay = null;
trigger gg_trg_Use_ThrowStone_and_TurnIntoEnt = null;
trigger gg_trg_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay = null;
trigger gg_trg_Troll_Dead_Remove_Bugs = null;
trigger gg_trg_Boss_Troll_Entangle_Throw = null;
trigger gg_trg_Use_Berserk_and_BerserkBoss = null;
trigger gg_trg_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle = null;
trigger gg_trg_Aspect_of_Magic_Protection = null;
trigger gg_trg_Remove_Effects_From_Bosses = null;
trigger gg_trg_Metka_Dreneev = null;
trigger gg_trg_Fast_Attack = null;
trigger gg_trg_Bash_Attack = null;
trigger gg_trg_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack = null;
trigger gg_trg_Magic_Fire = null;
trigger gg_trg_Blink_Strike = null;
trigger gg_trg_Damned_Skull = null;
trigger gg_trg_Weakness_of_Emptiness = null;
trigger gg_trg_Essence_of_Emptiness = null;
trigger gg_trg_Piercing_Strike = null;
trigger gg_trg_Victim_Search = null;
trigger gg_trg_Black_Hole = null;
trigger gg_trg_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar = null;
trigger gg_trg_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH = null;
trigger gg_trg_Weakness = null;
trigger gg_trg_Pain_Sphere = null;
trigger gg_trg_Astral_Dispersal = null;
trigger gg_trg_Infernal_Ram = null;
trigger gg_trg_Fiery_Blow = null;
trigger gg_trg_Bloody_Jump = null;
trigger gg_trg_Blood_Absorption = null;
trigger gg_trg_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u = null;
trigger gg_trg_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4 = null;
trigger gg_trg_Hatred_of_fire = null;
trigger gg_trg_set_fire = null;
trigger gg_trg_set_fire_2 = null;
trigger gg_trg_the_creation_of_the_image = null;
trigger gg_trg_fiery_explosions = null;
trigger gg_trg_Breathoffire = null;
trigger gg_trg_Wall_of_Fire = null;
trigger gg_trg_Fire_Explosions = null;
trigger gg_trg_BossStomp = null;
trigger gg_trg_Mark_of_Fire = null;
trigger gg_trg_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire = null;
trigger gg_trg_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp = null;
trigger gg_trg_Power_of_Skeletons = null;
trigger gg_trg_Water_Elemental_Load = null;
trigger gg_trg_Init_kreeps = null;
trigger gg_trg_spirits_of_water_dead = null;
trigger gg_trg_Skill_Gertva = null;
trigger gg_trg_Opening_Streams = null;
trigger gg_trg_Water_Explosion = null;
trigger gg_trg_Tsunami = null;
trigger gg_trg_Guardsman_Load = null;
trigger gg_trg_Protective_Stand_Switch = null;
trigger gg_trg_Learn_Fighting_Skills = null;
trigger gg_trg_Ram_Board = null;
trigger gg_trg_Warcry = null;
trigger gg_trg_____________________________________001 = null;
trigger gg_trg_____________________________________001______________________2 = null;
trigger gg_trg_Drenor_Bull_Show_Rage_____________________u = null;
trigger gg_trg_Drenor_Bull_Load = null;
trigger gg_trg_Drenor_Bull_Show_Hint = null;
trigger gg_trg_Drenor_Bull_Show_Rage = null;
trigger gg_trg_Axe_Throw = null;
trigger gg_trg_Violent_Roar = null;
trigger gg_trg_upgrade_Berserk = null;
trigger gg_trg_Learn_Spell_Rage = null;
trigger gg_trg_GrogTarDead = null;
trigger gg_trg_attack_hero_Rage = null;
trigger gg_trg_kill_hero_Rage = null;
trigger gg_trg_Sniatie_Rage = null;
trigger gg_trg_Timer_Rage = null;
trigger gg_trg_Illusionist_Load = null;
trigger gg_trg_Reflection = null;
trigger gg_trg_Illusory_Attack = null;
trigger gg_trg_Summon_Illusions_with_Reflection = null;
trigger gg_trg_Illusions_with_Phantoms_Dead = null;
trigger gg_trg_BladeMaster_Load = null;
trigger gg_trg_Dissection = null;
trigger gg_trg_Whirlwind = null;
trigger gg_trg_Imboweling = null;
trigger gg_trg_Master_of_Lightnings_Load = null;
trigger gg_trg_Thundercloud = null;
trigger gg_trg_Power_of_Lightnings = null;
trigger gg_trg_Electric_Field = null;
trigger gg_trg_Storm = null;
trigger gg_trg_Respawnlol = null;
trigger gg_trg_Ranger_Load = null;
trigger gg_trg_MultiShotSwitch = null;
trigger gg_trg_Learn_Release_of_Arrows = null;
trigger gg_trg_Release_of_Arrows = null;
trigger gg_trg_Dexterity_of_the_Ranger = null;
trigger gg_trg_Healer_Load = null;
trigger gg_trg_Good_Healing = null;
trigger gg_trg_Spiritual_Communication = null;
trigger gg_trg_Curing_Light = null;
trigger gg_trg_Guardian_Angel = null;
trigger gg_trg_Paladin_Load = null;
trigger gg_trg_Spiral_of_Light = null;
trigger gg_trg_Keeper_Seal = null;
trigger gg_trg_Light_Hammer = null;
trigger gg_trg_God_Hand = null;
trigger gg_trg_Stone_Guard_Load = null;
trigger gg_trg_Boulder_Throw = null;
trigger gg_trg_Earth_Shiver = null;
trigger gg_trg_Learn_Stone_Armor = null;
trigger gg_trg_Rock_Strike = null;
trigger gg_trg_Archdruid_Load = null;
trigger gg_trg_Energy_of_Nature = null;
trigger gg_trg_Life_Chain = null;
trigger gg_trg_Ent_Creation = null;
trigger gg_trg_Nature_Wrath = null;
trigger gg_trg_Falling_Star = null;
trigger gg_trg_Moon_Chackram = null;
trigger gg_trg_Moon_Wind = null;
trigger gg_trg_Night_Heart = null;
trigger gg_trg_MoonWarrior_Load = null;
trigger gg_trg_Ancient_Communication = null;
trigger gg_trg_Learn_Power_of_Ancestors = null;
trigger gg_trg_Switch_Power_of_Ancestors = null;
trigger gg_trg_Earth_Split = null;
trigger gg_trg_Ancient_Help = null;
trigger gg_trg_SpiritBreaker_Load = null;
trigger gg_trg_Power_of_Ancestors_Switch = null;
trigger gg_trg_Dash = null;
trigger gg_trg_Dagger_Throw = null;
trigger gg_trg_Kara_Justice = null;
trigger gg_trg_Warden_Load = null;
trigger gg_trg_Strength_Fist = null;
trigger gg_trg_Fighting_Impact = null;
trigger gg_trg_Learn_Marshal_Armor = null;
trigger gg_trg_Illusive_Army = null;
trigger gg_trg_Marshal_Load = null;
trigger gg_trg_Chain_Lightning = null;
trigger gg_trg_Magic_Trap = null;
trigger gg_trg_Remove_Lightning_Form_Dead_Units = null;
trigger gg_trg_EnergyWave = null;
trigger gg_trg_Magic_Epicenter = null;
trigger gg_trg_Load_ArchMage = null;
trigger gg_trg_Toxic_Field = null;
trigger gg_trg_Poison_Bomb = null;
trigger gg_trg_Learn_Ogre_Rage = null;
trigger gg_trg_Potion_of_Growth = null;
trigger gg_trg_Load_Alchemist = null;
trigger gg_trg_Case_Shot = null;
trigger gg_trg_Learn_Fire_Position = null;
trigger gg_trg_Dwarf_Cannon = null;
trigger gg_trg_Load_Sniper = null;
trigger gg_trg_InitSkills_damage = null;
trigger gg_trg_Vhodit_v_zony_damage = null;
trigger gg_trg_Passive_Skill_Storm_bolt = null;
trigger gg_trg_The_power_of_the_rider = null;
trigger gg_trg_Collision_flight = null;
trigger gg_trg_Thunderous_Storm = null;
trigger gg_trg_Hero_Dead______________________4 = null;
trigger gg_trg_Hero_Dead______________________3 = null;
trigger gg_trg_Hero_Dead______________________2 = null;
trigger gg_trg_Hero_Dead_____________________u = null;
unit gg_unit_o003_0028 = null;
unit gg_unit_o003_0027 = null;
unit gg_unit_n00Y_0102 = null;
unit gg_unit_h01K_0100 = null;
unit gg_unit_e002_0106 = null;
unit gg_unit_e002_0108 = null;
unit gg_unit_n00Y_0101 = null;
unit gg_unit_h01K_0109 = null;

void InitGlobals() {
	int i = 0;
	udg_IGRAET[CreateForce()] = CreateForce();
	udg_Multiboard[CreateMultiboard()] = CreateMultiboard();
	udg_Liver[CreateForce()] = CreateForce();
	udg_Timer_Nomera_Volni[CreateTimer()] = CreateTimer();
	i[0] = 0;
	while (true) {
		if ((i > 1)) break;
		udg_Igraet_Igrok[false] = false;
		udg_Duel_Igrok[CreateForce()] = CreateForce();
		udg_Heroes_Random_Data[0] = 0;
		udg_Integer_Kolvo_Giznei_EtitArena[0] = 0;
		udg_ColorString[""] = "";
		udg_Temp_Real[0] = 0;
		udg_Temp_Integer[0] = 0;
		udg_PlayerNumberInMB[0] = 0;
		udg_MutliBoardHeroIcon[""] = "";
		udg_MultiBoard_Player_Kills_Count[0] = 0;
		udg_MultiBoard_Player_Deaths_Count[0] = 0;
		udg_MultiBoard_Player_Assist_Count[0] = 0;
		udg_Hero_Respawn_Time[0] = 0;
		udg_Potion_Effect[""] = "";
		udg_Potion_Type[""] = "";
		udg_Potion_Heal_Amount[0] = 0;
		udg_Potion_Size[0] = 0;
		udg_HintsTimerPlayer[CreateTimer()] = CreateTimer();
		udg_Hero_Player_Color_String[""] = "";
		udg_Player_Taken_Damage_Current[0] = 0;
		udg_Player_Taken_Damage_All[0] = 0;
		udg_Player_Received_Damage_Current[0] = 0;
		udg_System_ShowAbil_And_Items_Hint[true] = true;
		udg_Boolean_Player_Fast_Purchase[false] = false;
		udg_Integer_Creep_On_Line_Spawn[0] = 0;
		udg_Group_Pickeds_Refrence_Panel[CreateGroup()] = CreateGroup();
		udg_Is_Player_Fast_Wave_Start[false] = false;
		udg_Count_Item_Tips_Message[0] = 0;
		udg_Rune_On_Base_Dummy_X[0] = 0;
		udg_Rune_On_Base_Dummy_Y[0] = 0;
		udg_Rune_On_Base_Effect_String[""] = "";
		udg_Bonus_Gold_ChestGold[0] = 0;
		udg_Temp_Group[CreateGroup()] = CreateGroup();
		udg_Is_Rune_On_Position[false] = false;
		udg_Rune_Position_X[0] = 0;
		udg_Rune_Position_Y[0] = 0;
		udg_Arrow_Pointer_Guide_X[0] = 0;
		udg_Arrow_Pointer_Guide_Y[0] = 0;
		udg_Arrow_Pointer_Guide_Angle[0] = 0;
		udg_EnergyWallX[0] = 0;
		udg_EnergyWallY[0] = 0;
		udg_EnergyWallAngle[0] = 0;
		udg_EnergyWallCount[0] = 0;
		udg_Is_Player_Got_Randomed[false] = false;
		i[i + 1] = i + 1;
	}
	udg_Weave_group[CreateGroup()] = CreateGroup();
	udg_Timer_Check_Forkreep_system[CreateTimer()] = CreateTimer();
	udg_Gruppa_Igrokov_Vibor_Heroev[CreateForce()] = CreateForce();
	udg_Timer_Eiti_Areni[CreateTimer()] = CreateTimer();
	udg_Gruppa_HeroUnitov_Geroev[CreateGroup()] = CreateGroup();
	udg_OtriadPortalUnitsEitiArena[CreateGroup()] = CreateGroup();
	udg_DamageGroup[CreateGroup()] = CreateGroup();
	udg_DrenorBugaiRageTimer[CreateTimer()] = CreateTimer();
	udg_GrogTarRageTimer[CreateTimer()] = CreateTimer();
	udg_GroupRandomUnitFromGroup[CreateGroup()] = CreateGroup();
	udg_Dialog_Select_Difficult[DialogCreate()] = DialogCreate();
	udg_TimerMobsAttackBase[CreateTimer()] = CreateTimer();
	udg_Players_Enemy_Group[CreateForce()] = CreateForce();
	udg_Timer_Dialog_Select[CreateTimer()] = CreateTimer();
	udg_Players_Ally_Group[CreateForce()] = CreateForce();
	udg_MultiBoard[CreateMultiboard()] = CreateMultiboard();
	udg_PlayerGroup[CreateForce()] = CreateForce();
	udg_ttt[CreateTimer()] = CreateTimer();
	udg_PortalCastersMagi[CreateGroup()] = CreateGroup();
	udg_InitMapTimer[CreateTimer()] = CreateTimer();
	udg_Drenor_Bull_Hint_Player_Group[CreateForce()] = CreateForce();
	udg_TimerShowAndFlushAllPlayerDmg[CreateTimer()] = CreateTimer();
	udg_Timer_Lightning_Strike_Weather[CreateTimer()] = CreateTimer();
	udg_Timer_Hint_About_Fast_Start[CreateTimer()] = CreateTimer();
	udg_Timer_Arrow_Pointer_Guide[CreateTimer()] = CreateTimer();
	udg_gdamageallnew[CreateGroup()] = CreateGroup();
}
void InitSounds() {
	gg_snd_HeroFirelordYesAttack1[CreateSound("Units\\Creeps\\HeroFlameLord\\HeroFirelordYesAttack1.wav", false, false, false, $A, $A, "HeroAcksEAX")] = CreateSound("Units\\Creeps\\HeroFlameLord\\HeroFirelordYesAttack1.wav", false, false, false, $A, $A, "HeroAcksEAX");
	SetSoundParamsFromLabel(gg_snd_HeroFirelordYesAttack1, "HeroFireLordYesAttack");
	SetSoundDuration(gg_snd_HeroFirelordYesAttack1, $984);
	gg_snd_HeroFirelordYesAttack2[CreateSound("Units\\Creeps\\HeroFlameLord\\HeroFirelordYesAttack2.wav", false, false, false, $A, $A, "HeroAcksEAX")] = CreateSound("Units\\Creeps\\HeroFlameLord\\HeroFirelordYesAttack2.wav", false, false, false, $A, $A, "HeroAcksEAX");
	SetSoundParamsFromLabel(gg_snd_HeroFirelordYesAttack2, "HeroFireLordYesAttack");
	SetSoundDuration(gg_snd_HeroFirelordYesAttack2, $DAF);
	gg_snd_HeroFirelordYesAttack3[CreateSound("Units\\Creeps\\HeroFlameLord\\HeroFirelordYesAttack3.wav", false, false, false, $A, $A, "HeroAcksEAX")] = CreateSound("Units\\Creeps\\HeroFlameLord\\HeroFirelordYesAttack3.wav", false, false, false, $A, $A, "HeroAcksEAX");
	SetSoundParamsFromLabel(gg_snd_HeroFirelordYesAttack3, "HeroFireLordYesAttack");
	SetSoundDuration(gg_snd_HeroFirelordYesAttack3, $AD1);
	gg_snd_HeroFirelordWarcry1[CreateSound("Units\\Creeps\\HeroFlameLord\\HeroFirelordWarcry1.wav", false, false, false, $A, $A, "HeroAcksEAX")] = CreateSound("Units\\Creeps\\HeroFlameLord\\HeroFirelordWarcry1.wav", false, false, false, $A, $A, "HeroAcksEAX");
	SetSoundParamsFromLabel(gg_snd_HeroFirelordWarcry1, "HeroFireLordWarcry");
	SetSoundDuration(gg_snd_HeroFirelordWarcry1, 5072);
	gg_snd_HeroLichReady1[CreateSound("Units\\Undead\\HeroLich\\HeroLichReady1.wav", false, false, false, $A, $A, "HeroAcksEAX")] = CreateSound("Units\\Undead\\HeroLich\\HeroLichReady1.wav", false, false, false, $A, $A, "HeroAcksEAX");
	SetSoundParamsFromLabel(gg_snd_HeroLichReady1, "HeroLichReady");
	SetSoundDuration(gg_snd_HeroLichReady1, 4337);
	gg_snd_HeroLichYesAttack1[CreateSound("Units\\Undead\\HeroLich\\HeroLichYesAttack1.wav", false, false, false, $A, $A, "HeroAcksEAX")] = CreateSound("Units\\Undead\\HeroLich\\HeroLichYesAttack1.wav", false, false, false, $A, $A, "HeroAcksEAX");
	SetSoundParamsFromLabel(gg_snd_HeroLichYesAttack1, "HeroLichYesAttack");
	SetSoundDuration(gg_snd_HeroLichYesAttack1, $A4C);
	gg_snd_HeroLichYesAttack2[CreateSound("Units\\Undead\\HeroLich\\HeroLichYesAttack2.wav", false, false, false, $A, $A, "HeroAcksEAX")] = CreateSound("Units\\Undead\\HeroLich\\HeroLichYesAttack2.wav", false, false, false, $A, $A, "HeroAcksEAX");
	SetSoundParamsFromLabel(gg_snd_HeroLichYesAttack2, "HeroLichYesAttack");
	SetSoundDuration(gg_snd_HeroLichYesAttack2, $9D4);
	gg_snd_HeroLichYesAttack3[CreateSound("Units\\Undead\\HeroLich\\HeroLichYesAttack3.wav", false, false, false, $A, $A, "HeroAcksEAX")] = CreateSound("Units\\Undead\\HeroLich\\HeroLichYesAttack3.wav", false, false, false, $A, $A, "HeroAcksEAX");
	SetSoundParamsFromLabel(gg_snd_HeroLichYesAttack3, "HeroLichYesAttack");
	SetSoundDuration(gg_snd_HeroLichYesAttack3, $872);
	gg_snd_DeathSound1[CreateSound("Units\\Creeps\\Bandit\\BanditYesAttack1.wav", false, false, false, $A, $A, "DefaultEAXON")] = CreateSound("Units\\Creeps\\Bandit\\BanditYesAttack1.wav", false, false, false, $A, $A, "DefaultEAXON");
	SetSoundParamsFromLabel(gg_snd_DeathSound1, "BanditYesAttack");
	SetSoundDuration(gg_snd_DeathSound1, $4EE);
	gg_snd_KnightNoGold1[CreateSound("Sound\\Interface\\Warning\\Human\\KnightNoGold1.wav", false, false, false, $A, $A, "")] = CreateSound("Sound\\Interface\\Warning\\Human\\KnightNoGold1.wav", false, false, false, $A, $A, "");
	SetSoundParamsFromLabel(gg_snd_KnightNoGold1, "NoGoldHuman");
	SetSoundDuration(gg_snd_KnightNoGold1, $57D);
	gg_snd_KnightInventoryFull1[CreateSound("Sound\\Interface\\Warning\\Human\\KnightInventoryFull1.wav", false, false, false, $A, $A, "")] = CreateSound("Sound\\Interface\\Warning\\Human\\KnightInventoryFull1.wav", false, false, false, $A, $A, "");
	SetSoundParamsFromLabel(gg_snd_KnightInventoryFull1, "InventoryFullHuman");
	SetSoundDuration(gg_snd_KnightInventoryFull1, $3E8);
	gg_snd_HeroStep1[CreateSound("Sound\\Units\\Footsteps\\HeroStep1.wav", false, true, true, $A, $A, "SpellsEAX")] = CreateSound("Sound\\Units\\Footsteps\\HeroStep1.wav", false, true, true, $A, $A, "SpellsEAX");
	SetSoundParamsFromLabel(gg_snd_HeroStep1, "HeroCinematicStep");
	SetSoundDuration(gg_snd_HeroStep1, 947);
	gg_snd_HeroStep2[CreateSound("Sound\\Units\\Footsteps\\HeroStep2.wav", false, true, true, $A, $A, "SpellsEAX")] = CreateSound("Sound\\Units\\Footsteps\\HeroStep2.wav", false, true, true, $A, $A, "SpellsEAX");
	SetSoundParamsFromLabel(gg_snd_HeroStep2, "HeroCinematicStep");
	SetSoundDuration(gg_snd_HeroStep2, 697);
	gg_snd_HeroStep3[CreateSound("Sound\\Units\\Footsteps\\HeroStep3.wav", false, true, true, $A, $A, "SpellsEAX")] = CreateSound("Sound\\Units\\Footsteps\\HeroStep3.wav", false, true, true, $A, $A, "SpellsEAX");
	SetSoundParamsFromLabel(gg_snd_HeroStep3, "HeroCinematicStep");
	SetSoundDuration(gg_snd_HeroStep3, 599);
	gg_snd_HeroStep4[CreateSound("Sound\\Units\\Footsteps\\HeroStep4.wav", false, true, true, $A, $A, "SpellsEAX")] = CreateSound("Sound\\Units\\Footsteps\\HeroStep4.wav", false, true, true, $A, $A, "SpellsEAX");
	SetSoundParamsFromLabel(gg_snd_HeroStep4, "HeroCinematicStep");
	SetSoundDuration(gg_snd_HeroStep4, $E5);
	gg_snd_HuntressYesAttack4[CreateSound("Units\\NightElf\\Huntress\\HuntressYesAttack4.wav", false, false, false, 'd', $A, "DefaultEAXON")] = CreateSound("Units\\NightElf\\Huntress\\HuntressYesAttack4.wav", false, false, false, 'd', $A, "DefaultEAXON");
	SetSoundParamsFromLabel(gg_snd_HuntressYesAttack4, "HuntressYesAttack");
	SetSoundDuration(gg_snd_HuntressYesAttack4, $55E);
	SetSoundChannel(gg_snd_HuntressYesAttack4, 0);
	gg_snd_WardenAttackEffort1[CreateSound("Units\\NightElf\\HeroWarden\\WardenAttackEffort1.wav", false, true, true, $A, $A, "CombatSoundsEAX")] = CreateSound("Units\\NightElf\\HeroWarden\\WardenAttackEffort1.wav", false, true, true, $A, $A, "CombatSoundsEAX");
	SetSoundParamsFromLabel(gg_snd_WardenAttackEffort1, "WardenAttack");
	SetSoundDuration(gg_snd_WardenAttackEffort1, $54E);
	gg_snd_AlchemistChemicalBurst1[CreateSound("Units\\Creeps\\HEROGoblinALCHEMIST\\AlchemistChemicalBurst1.wav", false, false, false, $A, $A, "DefaultEAXON")] = CreateSound("Units\\Creeps\\HEROGoblinALCHEMIST\\AlchemistChemicalBurst1.wav", false, false, false, $A, $A, "DefaultEAXON");
	SetSoundParamsFromLabel(gg_snd_AlchemistChemicalBurst1, "GoblinAlchemistMorph");
	SetSoundDuration(gg_snd_AlchemistChemicalBurst1, $801);
	SetSoundChannel(gg_snd_AlchemistChemicalBurst1, 0);
	gg_snd_AlchemistMorph1[CreateSound("Units\\Creeps\\HEROGoblinALCHEMIST\\AlchemistMorph1.wav", false, false, false, $A, $A, "DefaultEAXON")] = CreateSound("Units\\Creeps\\HEROGoblinALCHEMIST\\AlchemistMorph1.wav", false, false, false, $A, $A, "DefaultEAXON");
	SetSoundParamsFromLabel(gg_snd_AlchemistMorph1, "GoblinAlchemistMorphAlternate");
	SetSoundDuration(gg_snd_AlchemistMorph1, $67F);
	SetSoundChannel(gg_snd_AlchemistMorph1, 0);
	gg_snd_HeroAlchemistYesAttack1[CreateSound("Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistYesAttack1.wav", false, false, false, $A, $A, "DefaultEAXON")] = CreateSound("Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistYesAttack1.wav", false, false, false, $A, $A, "DefaultEAXON");
	SetSoundParamsFromLabel(gg_snd_HeroAlchemistYesAttack1, "HEROGoblinALCHEMISTYesAttack");
	SetSoundDuration(gg_snd_HeroAlchemistYesAttack1, $942);
	SetSoundChannel(gg_snd_HeroAlchemistYesAttack1, 0);
}
void CreateNeutralPassiveBuildings() {
	player p = Player($F);
	unit u;
	int unitID;
	trigger t;
	float life;
	u[CreateUnit(p, 'h00S', 2144., -5184., 225.)] = CreateUnit(p, 'h00S', 2144., -5184., 225.);
	u[CreateUnit(p, 'h002', 2176., -5760., 270.)] = CreateUnit(p, 'h002', 2176., -5760., 270.);
	u[CreateUnit(p, 'h001', 2144., -5312., 225.)] = CreateUnit(p, 'h001', 2144., -5312., 225.);
	u[CreateUnit(p, 'n004', 5120., 4032., 270.)] = CreateUnit(p, 'n004', 5120., 4032., 270.);
	SetUnitColor(u, ConvertPlayerColor(6));
	u[CreateUnit(p, 'n002', 4736., 4032., 270.)] = CreateUnit(p, 'n002', 4736., 4032., 270.);
	SetUnitColor(u, ConvertPlayerColor(0));
	u[CreateUnit(p, 'n005', 4928., 3648., 270.)] = CreateUnit(p, 'n005', 4928., 3648., 270.);
	SetUnitColor(u, ConvertPlayerColor(1));
	u[CreateUnit(p, 'h003', 2176., -6016., 270.)] = CreateUnit(p, 'h003', 2176., -6016., 270.);
	u[CreateUnit(p, 'h000', 2176., -5504., 180.)] = CreateUnit(p, 'h000', 2176., -5504., 180.);
	u[CreateUnit(p, 'h00D', 2176., -6272., 225.)] = CreateUnit(p, 'h00D', 2176., -6272., 225.);
	u[CreateUnit(p, 'h00Y', 2176., -4992., 270.)] = CreateUnit(p, 'h00Y', 2176., -4992., 270.);
}
void CreateNeutralPassive() {
	player p = Player($F);
	unit u;
	int unitID;
	trigger t;
	float life;
	u[CreateUnit(p, 'h00I', 2651.1, -8998.3, 132.101)] = CreateUnit(p, 'h00I', 2651.1, -8998.3, 132.101);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	u[CreateUnit(p, 'h00I', 2737.1, -8462., 222.901)] = CreateUnit(p, 'h00I', 2737.1, -8462., 222.901);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	u[CreateUnit(p, 'h00I', 2208., -7950.8, 240.89)] = CreateUnit(p, 'h00I', 2208., -7950.8, 240.89);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	u[CreateUnit(p, 'h00I', 1508.5, -7799.1, 271.992)] = CreateUnit(p, 'h00I', 1508.5, -7799.1, 271.992);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	u[CreateUnit(p, 'h00I', 761.9, -7825.8, 270.894)] = CreateUnit(p, 'h00I', 761.9, -7825.8, 270.894);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	u[CreateUnit(p, 'h00I', 108.7, -7927.1, 297.652)] = CreateUnit(p, 'h00I', 108.7, -7927.1, 297.652);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	u[CreateUnit(p, 'h00I', -341.9, -8450.2, 346.764)] = CreateUnit(p, 'h00I', -341.9, -8450.2, 346.764);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	u[CreateUnit(p, 'h00I', -340.3, -9154.9, 16.661)] = CreateUnit(p, 'h00I', -340.3, -9154.9, 16.661);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	u[CreateUnit(p, 'h00I', -237.5, -9776.7, 2.615)] = CreateUnit(p, 'h00I', -237.5, -9776.7, 2.615);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	gg_unit_o003_0027[CreateUnit(p, 'o003', 1521.1, -5441.2, 222.91)] = CreateUnit(p, 'o003', 1521.1, -5441.2, 222.91);
	gg_unit_o003_0028[CreateUnit(p, 'o003', 1033.8, -5956.6, 42.425)] = CreateUnit(p, 'o003', 1033.8, -5956.6, 42.425);
	u[CreateUnit(p, 'h00I', 1358.5, -9356.4, 270.)] = CreateUnit(p, 'h00I', 1358.5, -9356.4, 270.);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	u[CreateUnit(p, 'h00I', 1357.3, -9244.8, 270.)] = CreateUnit(p, 'h00I', 1357.3, -9244.8, 270.);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	gg_unit_h01K_0100[CreateUnit(p, 'h01K', 1245.4, -5377.6, 270.73)] = CreateUnit(p, 'h01K', 1245.4, -5377.6, 270.73);
	gg_unit_n00Y_0101[CreateUnit(p, 'n00Y', 1589.7, -5683.3, 173.645)] = CreateUnit(p, 'n00Y', 1589.7, -5683.3, 173.645);
	SetUnitState(gg_unit_n00Y_0101, UNIT_STATE_MANA, 0);
	gg_unit_n00Y_0102[CreateUnit(p, 'n00Y', 939.4, -5689.8, .69)] = CreateUnit(p, 'n00Y', 939.4, -5689.8, .69);
	SetUnitState(gg_unit_n00Y_0102, UNIT_STATE_MANA, 0);
	gg_unit_e002_0106[CreateUnit(p, 'e002', 1007.4, -5428.7, 316.082)] = CreateUnit(p, 'e002', 1007.4, -5428.7, 316.082);
	SetUnitState(gg_unit_e002_0106, UNIT_STATE_MANA, 0);
	gg_unit_e002_0108[CreateUnit(p, 'e002', 1526.5, -5954.4, 138.892)] = CreateUnit(p, 'e002', 1526.5, -5954.4, 138.892);
	SetUnitState(gg_unit_e002_0108, UNIT_STATE_MANA, 0);
	gg_unit_h01K_0109[CreateUnit(p, 'h01K', 1268., -6027.5, 89.41)] = CreateUnit(p, 'h01K', 1268., -6027.5, 89.41);
}
void CreatePlayerBuildings() {
}
void CreatePlayerUnits() {
}
void CreateAllUnits() {
	CreateNeutralPassiveBuildings();
	CreatePlayerBuildings();
	CreateNeutralPassive();
	CreatePlayerUnits();
}
void CreateRegions() {
	weathereffect we;
	gg_rct_Miners_Arena[Rect(-4128., 1952., -2496., 3904.)] = Rect(-4128., 1952., -2496., 3904.);
	gg_rct_Duel_left[Rect(1216., 2784., 1472., 3040.)] = Rect(1216., 2784., 1472., 3040.);
	gg_rct_Portal_1_down_left_Start[Rect(-1920., -9536., -1536., -9184.)] = Rect(-1920., -9536., -1536., -9184.);
	gg_rct_Base[Rect(-288., -7488., 2560., -4128.)] = Rect(-288., -7488., 2560., -4128.);
	gg_rct_Portal_baza[Rect(896., -6016., 1408., -5408.)] = Rect(896., -6016., 1408., -5408.);
	gg_rct_Les_2[Rect(-3616., -8160., -512., 320.)] = Rect(-3616., -8160., -512., 320.);
	gg_rct_Les_1[Rect(-320., -10656., 2432., -7904.)] = Rect(-320., -10656., 2432., -7904.);
	gg_rct_Pogoda_v_bolote[Rect(3936., -6944., 5280., -3296.)] = Rect(3936., -6944., 5280., -3296.);
	we[AddWeatherEffect(gg_rct_Pogoda_v_bolote, 'FDgh')] = AddWeatherEffect(gg_rct_Pogoda_v_bolote, 'FDgh');
	EnableWeatherEffect(we, true);
	gg_rct_cast_magi[Rect(832., -6112., 1664., -5312.)] = Rect(832., -6112., 1664., -5312.);
	gg_rct_Event_Bonus_Etei_arena_1[Rect(3488., -256., 5088., 1824.)] = Rect(3488., -256., 5088., 1824.);
	gg_rct_Portal_3_up_Start[Rect(1024., -1120., 1408., -736.)] = Rect(1024., -1120., 1408., -736.);
	gg_rct_Portal_2_down_right_Start[Rect(3392., -9376., 3744., -8992.)] = Rect(3392., -9376., 3744., -8992.);
	gg_rct_Oblstb_Tavern[Rect(4352., 3360., 5504., 4448.)] = Rect(4352., 3360., 5504., 4448.);
	gg_rct_Hero_Arena[Rect(1152., 2048., 2944., 3968.)] = Rect(1152., 2048., 2944., 3968.);
	gg_rct_les_3[Rect(2592., -7040., 3872., -1280.)] = Rect(2592., -7040., 3872., -1280.);
	gg_rct_Respawn_Heroes[Rect(1056., -6624., 1408., -6112.)] = Rect(1056., -6624., 1408., -6112.);
	gg_rct_Oblast_Teleporta_Arena_Bot[Rect(4224., -32., 4416., 160.)] = Rect(4224., -32., 4416., 160.);
	gg_rct_Oblast_Teleporta_Arena_Top[Rect(4224., 1408., 4416., 1600.)] = Rect(4224., 1408., 4416., 1600.);
	gg_rct_6[Rect(-1792., 1888., 544., 3840.)] = Rect(-1792., 1888., 544., 3840.);
	gg_rct_BaseDopVision[Rect(672., -4160., 1664., -3680.)] = Rect(672., -4160., 1664., -3680.);
	gg_rct_Center_Vision[Rect(960., -5760., 1088., -5632.)] = Rect(960., -5760., 1088., -5632.);
	gg_rct_Portal_Attack_Dummy_Left[Rect(-2112., -9696., -1952., -9536.)] = Rect(-2112., -9696., -1952., -9536.);
	gg_rct_Portal_Attack_Dummy_Right[Rect(3584., -9600., 3744., -9440.)] = Rect(3584., -9600., 3744., -9440.);
	gg_rct_Portal_Attack_Dummy_Top[Rect(1120., -576., 1280., -416.)] = Rect(1120., -576., 1280., -416.);
	gg_rct_Duel_right[Rect(2592., 2784., 2848., 3040.)] = Rect(2592., 2784., 2848., 3040.);
	gg_rct_PlayableAreaVisionDeBag[Rect(-3680., -10400., 5504., 4544.)] = Rect(-3680., -10400., 5504., 4544.);
	gg_rct_MinusVision1[Rect(-3712., 800., -2048., 4640.)] = Rect(-3712., 800., -2048., 4640.);
	gg_rct_Les1_Dop1[Rect(2400., -9184., 2912., -8096.)] = Rect(2400., -9184., 2912., -8096.);
	gg_rct_Les1_Dop2[Rect(160., -7936., 2208., -7648.)] = Rect(160., -7936., 2208., -7648.);
	gg_rct_Beorn_Boss_Area[Rect(800., -10368., 1952., -9248.)] = Rect(800., -10368., 1952., -9248.);
	gg_rct_Beorn_Boss_Area2[Rect(992., -10272., 1856., -9376.)] = Rect(992., -10272., 1856., -9376.);
}
void CreateCameras() {
	gg_cam_Kamera_na_taverni[CreateCameraSetup()] = CreateCameraSetup();
	CameraSetupSetField(gg_cam_Kamera_na_taverni, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Kamera_na_taverni, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Kamera_na_taverni, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Kamera_na_taverni, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Kamera_na_taverni, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Kamera_na_taverni, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Kamera_na_taverni, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Kamera_na_taverni, 4928.7, 3881.5, .0);
	gg_cam_Kamera_glavnoi_bazi[CreateCameraSetup()] = CreateCameraSetup();
	CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Kamera_glavnoi_bazi, 1240., -6378.1, .0);
	gg_cam_Camera_Eiti_Arena[CreateCameraSetup()] = CreateCameraSetup();
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Eiti_Arena, 4255.9, 866.9, .0);
	gg_cam_Camera_Eiti_Arena_Top_Portal[CreateCameraSetup()] = CreateCameraSetup();
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Eiti_Arena_Top_Portal, 4394.2, 1237.5, .0);
	gg_cam_Camera_Eiti_Arena_Bot_Portal[CreateCameraSetup()] = CreateCameraSetup();
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Eiti_Arena_Bot_Portal, 4465.7, 342.3, .0);
	gg_cam_Camera_miners_arena[CreateCameraSetup()] = CreateCameraSetup();
	CameraSetupSetField(gg_cam_Camera_miners_arena, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_miners_arena, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Camera_miners_arena, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Camera_miners_arena, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Camera_miners_arena, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_miners_arena, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_miners_arena, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_miners_arena, -3311.2, 2967.9, .0);
	gg_cam_Camera_BossFightStart[CreateCameraSetup()] = CreateCameraSetup();
	CameraSetupSetField(gg_cam_Camera_BossFightStart, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_BossFightStart, CAMERA_FIELD_ROTATION, 180.9, .0);
	CameraSetupSetField(gg_cam_Camera_BossFightStart, CAMERA_FIELD_ANGLE_OF_ATTACK, 336.5, .0);
	CameraSetupSetField(gg_cam_Camera_BossFightStart, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Camera_BossFightStart, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_BossFightStart, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_BossFightStart, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_BossFightStart, -608.2, 2881., .0);
	gg_cam_Camera_Duel_Arena[CreateCameraSetup()] = CreateCameraSetup();
	CameraSetupSetField(gg_cam_Camera_Duel_Arena, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Duel_Arena, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Camera_Duel_Arena, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Camera_Duel_Arena, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Camera_Duel_Arena, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Duel_Arena, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Duel_Arena, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Duel_Arena, 2139.4, 2853.8, .0);
	gg_cam_Kamera_cast_magi[CreateCameraSetup()] = CreateCameraSetup();
	CameraSetupSetField(gg_cam_Kamera_cast_magi, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Kamera_cast_magi, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Kamera_cast_magi, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Kamera_cast_magi, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Kamera_cast_magi, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Kamera_cast_magi, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Kamera_cast_magi, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Kamera_cast_magi, 1268., -5714.3, .0);
	gg_cam_Camera_Beorn_Den1[CreateCameraSetup()] = CreateCameraSetup();
	CameraSetupSetField(gg_cam_Camera_Beorn_Den1, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den1, CAMERA_FIELD_ROTATION, 233.6, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den1, CAMERA_FIELD_ANGLE_OF_ATTACK, 299.3, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den1, CAMERA_FIELD_TARGET_DISTANCE, 1363.6, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den1, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den1, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den1, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Beorn_Den1, 1384., -9577.2, .0);
	gg_cam_Camera_Beorn_Den2[CreateCameraSetup()] = CreateCameraSetup();
	CameraSetupSetField(gg_cam_Camera_Beorn_Den2, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den2, CAMERA_FIELD_ROTATION, 297.9, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den2, CAMERA_FIELD_ANGLE_OF_ATTACK, 300.3, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den2, CAMERA_FIELD_TARGET_DISTANCE, 1363.6, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den2, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den2, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den2, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Beorn_Den2, 1240.7, -9620.8, .0);
	gg_cam_Camera_Beorn_Den3[CreateCameraSetup()] = CreateCameraSetup();
	CameraSetupSetField(gg_cam_Camera_Beorn_Den3, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den3, CAMERA_FIELD_ROTATION, 110.6, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den3, CAMERA_FIELD_ANGLE_OF_ATTACK, 300.4, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den3, CAMERA_FIELD_TARGET_DISTANCE, 1127., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den3, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den3, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den3, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Beorn_Den3, 562.8, -8241.1, .0);
	gg_cam_Camera_Beorn_Den4[CreateCameraSetup()] = CreateCameraSetup();
	CameraSetupSetField(gg_cam_Camera_Beorn_Den4, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den4, CAMERA_FIELD_ROTATION, 110.6, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den4, CAMERA_FIELD_ANGLE_OF_ATTACK, 300.4, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den4, CAMERA_FIELD_TARGET_DISTANCE, 1127., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den4, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den4, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den4, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Beorn_Den4, -15.3, -9035.4, .0);
	gg_cam_Camera_Beorn_Den5[CreateCameraSetup()] = CreateCameraSetup();
	CameraSetupSetField(gg_cam_Camera_Beorn_Den5, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den5, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den5, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den5, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den5, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den5, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den5, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Beorn_Den5, 2191., -8224.1, .0);
	gg_cam_Camera_Beorn_Den6[CreateCameraSetup()] = CreateCameraSetup();
	CameraSetupSetField(gg_cam_Camera_Beorn_Den6, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den6, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den6, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den6, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den6, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den6, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den6, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Beorn_Den6, 1474.8, -9613.2, .0);
}
group CopyGroup(group g) {
	bj_groupAddGroupDest[CreateGroup()] = CreateGroup();
	ForGroup(g, GroupAddGroupEnum);
	return bj_groupAddGroupDest;
}
void DamageGroupOfUnit(unit u, float x, float y, float radius, float damage, bool dbuilds, bool dmagicimmune, bool dally) {
	group g = CreateGroup();
	unit target;
	GroupEnumUnitsInRange(g, x, y, radius, null);
	while (true) {
		target[FirstOfGroup(g)] = FirstOfGroup(g);
		if (target == null) break;
		if ((dally && dbuilds) || (dally && !dbuilds && !IsUnitType(u, UNIT_TYPE_STRUCTURE)) || (IsUnitEnemy(target, GetOwningPlayer(u)) && dbuilds) || (IsUnitEnemy(target, GetOwningPlayer(u)) && !dbuilds && !IsUnitType(u, UNIT_TYPE_STRUCTURE))) {
			UnitDamageTarget(u, target, damage, true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS);
		}
		GroupRemoveUnit(g, target);
	}
	GroupClear(g);
	DestroyGroup(g);
	target[null] = null;
	g[null] = null;
}
void KillSummonsAndIllusions(group g) {
	unit Picked;
	int id;
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		id[GetUnitTypeId(Picked)] = GetUnitTypeId(Picked);
		if (((IsUnitIllusion(Picked) || IsUnitType(Picked, UNIT_TYPE_SUMMONED)) || ((id == 'h017') || (id == 'h01D') || (id == 'h01E') || (id == 'h01F') || (id == 'h01G') || (id == 'h01G'))) && id != 'h00C') {
			KillUnit(Picked);
		}
		GroupRemoveUnit(g, Picked);
	}
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
}
void FilterMostNearUnit(group g, unit Unit) {
	unit ufil;
	float xu;
	float yu;
	float duU;
	float x1U;
	float y1U;
	float d1UUF;
	float X = GetUnitX(Unit);
	float Y = GetUnitY(Unit);
	while (true) {
		ufil[FirstOfGroup(g)] = FirstOfGroup(g);
		if (ufil == null) break;
		if (GetUnitState(ufil, UNIT_STATE_LIFE) > .405 && ufil != Unit && (IsUnitType(ufil, UNIT_TYPE_STRUCTURE) == false) && GetOwningPlayer(ufil) != GetOwningPlayer(Unit)) {
			xu[GetUnitX(ufil)] = GetUnitX(ufil);
			yu[GetUnitY(ufil)] = GetUnitY(ufil);
			x1U[GetUnitX(udg_Unit_FilterMostNearUnit)] = GetUnitX(udg_Unit_FilterMostNearUnit);
			y1U[GetUnitY(udg_Unit_FilterMostNearUnit)] = GetUnitY(udg_Unit_FilterMostNearUnit);
			duU[SquareRoot((X - xu) * (X - xu) + (Y - yu) * (Y - yu))] = SquareRoot((X - xu) * (X - xu) + (Y - yu) * (Y - yu));
			d1UUF[SquareRoot((X - x1U) * (X - x1U) + (Y - y1U) * (Y - y1U))] = SquareRoot((X - x1U) * (X - x1U) + (Y - y1U) * (Y - y1U));
			if (udg_Unit_FilterMostNearUnit == null) {
				udg_Unit_FilterMostNearUnit[ufil] = ufil;
			else
				if (duU < d1UUF) {
					udg_Unit_FilterMostNearUnit[ufil] = ufil;
				}
			}
		}
		GroupRemoveUnit(g, ufil);
	}
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
}
void AbilityPreload(int id, int level) {
	UnitAddAbility(udg_preloader, id);
	SetUnitAbilityLevel(udg_preloader, id, level);
	UnitRemoveAbility(udg_preloader, id);
}
void EffectPreload(string s) {
	Preload(s);
}
void UnitPreload(int id) {
	KillUnit(CreateUnit(Player($F), id, -3000., -3000., .0));
}
void ItemPreload(int id) {
	RemoveItem(CreateItem(id, .0, .0));
}
void DestroyEffectWithWaitActions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	effect ef = LoadEffectHandle(udg_hash, h, 1);
	DestroyEffect(ef);
	ef[null] = null;
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
}
void DestroyEffectWithWait(effect ef, float time) {
	timer t = CreateTimer();
	int h = GetHandleId(t);
	SaveEffectHandle(udg_hash, h, 1, ef);
	TimerStart(t, time, false, DestroyEffectWithWaitActions);
	t[null] = null;
}
void SetAttackAbilityLevel(unit target, int damage) {
	int a100;
	int a10;
	int a1;
	int una100;
	int una10;
	int una1;
	int a;
	int una;
	int itog100 = 0;
	int itog10 = 0;
	int itog1 = 0;
	int itog;
	if (GetUnitAbilityLevel(target, 'A07F') <= 0) {
		UnitAddAbility(target, 'A07F');
		UnitAddAbility(target, 'A07G');
		UnitAddAbility(target, 'A07I');
		UnitAddAbility(target, 'A09D');
		UnitAddAbility(target, 'A0E6');
		UnitAddAbility(target, 'A0E7');
		UnitMakeAbilityPermanent(target, true, 'A07F');
		UnitMakeAbilityPermanent(target, true, 'A07G');
		UnitMakeAbilityPermanent(target, true, 'A07I');
		UnitMakeAbilityPermanent(target, true, 'A09D');
		UnitMakeAbilityPermanent(target, true, 'A0E6');
		UnitMakeAbilityPermanent(target, true, 'A0E7');
	}
	a100[GetUnitAbilityLevel(target, 'A07I')] = GetUnitAbilityLevel(target, 'A07I');
	a10[GetUnitAbilityLevel(target, 'A07G')] = GetUnitAbilityLevel(target, 'A07G');
	a1[GetUnitAbilityLevel(target, 'A07F')] = GetUnitAbilityLevel(target, 'A07F');
	una100[GetUnitAbilityLevel(target, 'A0E7')] = GetUnitAbilityLevel(target, 'A0E7');
	una10[GetUnitAbilityLevel(target, 'A0E6')] = GetUnitAbilityLevel(target, 'A0E6');
	una1[GetUnitAbilityLevel(target, 'A09D')] = GetUnitAbilityLevel(target, 'A09D');
	a[((a100 - 1) * 'd') + ((a10 - 1) * $A) + a1 - 1] = ((a100 - 1) * 'd') + ((a10 - 1) * $A) + a1 - 1;
	una[((una100 - 1) * 'd') + ((una10 - 1) * $A) + una1 - 1] = ((una100 - 1) * 'd') + ((una10 - 1) * $A) + una1 - 1;
	itog[a - una] = a - una;
	if (itog + damage < $3E8 && itog + damage > -$3E8) {
		itog[itog + damage] = itog + damage;
		itog100[(itog / 'd')] = (itog / 'd');
		itog10[(itog - (itog100 * 'd')) / $A] = (itog - (itog100 * 'd')) / $A;
		itog1[itog - (itog100 * 'd') - (itog10 * $A)] = itog - (itog100 * 'd') - (itog10 * $A);
		if (itog100 >= 0) {
			SetUnitAbilityLevel(target, 'A07I', itog100 + 1);
			SetUnitAbilityLevel(target, 'A0E7', 1);
		else
			SetUnitAbilityLevel(target, 'A0E7', -itog100 + 1);
			SetUnitAbilityLevel(target, 'A07I', 1);
		}
		if (itog10 >= 0) {
			SetUnitAbilityLevel(target, 'A07G', itog10 + 1);
			SetUnitAbilityLevel(target, 'A0E6', 1);
		else
			SetUnitAbilityLevel(target, 'A0E6', -itog10 + 1);
			SetUnitAbilityLevel(target, 'A07G', 1);
		}
		if (itog1 >= 0) {
			SetUnitAbilityLevel(target, 'A07F', itog1 + 1);
			SetUnitAbilityLevel(target, 'A09D', 1);
		else
			SetUnitAbilityLevel(target, 'A09D', -itog1 + 1);
			SetUnitAbilityLevel(target, 'A07F', 1);
		}
	else
		if (itog + damage >= $3E8) {
			SetUnitAbilityLevel(target, 'A07I', $A);
			SetUnitAbilityLevel(target, 'A07G', $A);
			SetUnitAbilityLevel(target, 'A07F', $A);
			SetUnitAbilityLevel(target, 'A0E7', 1);
			SetUnitAbilityLevel(target, 'A0E6', 1);
			SetUnitAbilityLevel(target, 'A09D', 1);
		}
		if (itog + damage <= -$3E8) {
			SetUnitAbilityLevel(target, 'A07I', 1);
			SetUnitAbilityLevel(target, 'A07G', 1);
			SetUnitAbilityLevel(target, 'A07F', 1);
			SetUnitAbilityLevel(target, 'A0E7', $A);
			SetUnitAbilityLevel(target, 'A0E6', $A);
			SetUnitAbilityLevel(target, 'A09D', $A);
		}
	}
}
void SetArmorAbilityLevel(unit target, int armor) {
	int d100;
	int d10;
	int d1;
	int und100;
	int und10;
	int und1;
	int def;
	int undef;
	int itog100 = 0;
	int itog10 = 0;
	int itog1 = 0;
	int itog;
	if (GetUnitAbilityLevel(target, 'A0AG') <= 0) {
		UnitAddAbility(target, 'A0AG');
		UnitAddAbility(target, 'A0AH');
		UnitAddAbility(target, 'A087');
		UnitAddAbility(target, 'A0AS');
		UnitAddAbility(target, 'A0AT');
		UnitAddAbility(target, 'A0D8');
		UnitMakeAbilityPermanent(target, true, 'A0AG');
		UnitMakeAbilityPermanent(target, true, 'A0AH');
		UnitMakeAbilityPermanent(target, true, 'A087');
		UnitMakeAbilityPermanent(target, true, 'A0AS');
		UnitMakeAbilityPermanent(target, true, 'A0AT');
		UnitMakeAbilityPermanent(target, true, 'A0D8');
	}
	d100[GetUnitAbilityLevel(target, 'A087')] = GetUnitAbilityLevel(target, 'A087');
	d10[GetUnitAbilityLevel(target, 'A0AH')] = GetUnitAbilityLevel(target, 'A0AH');
	d1[GetUnitAbilityLevel(target, 'A0AG')] = GetUnitAbilityLevel(target, 'A0AG');
	und100[GetUnitAbilityLevel(target, 'A0D8')] = GetUnitAbilityLevel(target, 'A0D8');
	und10[GetUnitAbilityLevel(target, 'A0AT')] = GetUnitAbilityLevel(target, 'A0AT');
	und1[GetUnitAbilityLevel(target, 'A0AS')] = GetUnitAbilityLevel(target, 'A0AS');
	def[((d100 - 1) * 'd') + ((d10 - 1) * $A) + d1 - 1] = ((d100 - 1) * 'd') + ((d10 - 1) * $A) + d1 - 1;
	undef[((und100 - 1) * 'd') + ((und10 - 1) * $A) + und1 - 1] = ((und100 - 1) * 'd') + ((und10 - 1) * $A) + und1 - 1;
	itog[def - undef] = def - undef;
	if (itog + armor < $3E8 && itog + armor > -$3E8) {
		itog[itog + armor] = itog + armor;
		itog100[(itog / 'd')] = (itog / 'd');
		itog10[(itog - (itog100 * 'd')) / $A] = (itog - (itog100 * 'd')) / $A;
		itog1[itog - (itog100 * 'd') - (itog10 * $A)] = itog - (itog100 * 'd') - (itog10 * $A);
		if (itog100 >= 0) {
			SetUnitAbilityLevel(target, 'A087', itog100 + 1);
			SetUnitAbilityLevel(target, 'A0D8', 1);
		else
			SetUnitAbilityLevel(target, 'A0D8', -itog100 + 1);
			SetUnitAbilityLevel(target, 'A087', 1);
		}
		if (itog10 >= 0) {
			SetUnitAbilityLevel(target, 'A0AH', itog10 + 1);
			SetUnitAbilityLevel(target, 'A0AT', 1);
		else
			SetUnitAbilityLevel(target, 'A0AT', -itog10 + 1);
			SetUnitAbilityLevel(target, 'A0AH', 1);
		}
		if (itog1 >= 0) {
			SetUnitAbilityLevel(target, 'A0AG', itog1 + 1);
			SetUnitAbilityLevel(target, 'A0AS', 1);
		else
			SetUnitAbilityLevel(target, 'A0AS', -itog1 + 1);
			SetUnitAbilityLevel(target, 'A0AG', 1);
		}
	else
		if (itog + armor >= $3E8) {
			SetUnitAbilityLevel(target, 'A087', $A);
			SetUnitAbilityLevel(target, 'A0AH', $A);
			SetUnitAbilityLevel(target, 'A0AG', $A);
			SetUnitAbilityLevel(target, 'A0D8', 1);
			SetUnitAbilityLevel(target, 'A0AT', 1);
			SetUnitAbilityLevel(target, 'A0AS', 1);
		}
		if (itog + armor <= -$3E8) {
			SetUnitAbilityLevel(target, 'A087', 1);
			SetUnitAbilityLevel(target, 'A0AH', 1);
			SetUnitAbilityLevel(target, 'A0AG', 1);
			SetUnitAbilityLevel(target, 'A0D8', $A);
			SetUnitAbilityLevel(target, 'A0AT', $A);
			SetUnitAbilityLevel(target, 'A0AS', $A);
		}
	}
}
void SetAttackSpeedAbilityLevel(unit target, int attackspeed) {
	int as100;
	int as10;
	int as1;
	int unas100;
	int unas10;
	int unas1;
	int as;
	int unas;
	int itog100 = 0;
	int itog10 = 0;
	int itog1 = 0;
	int itog;
	if (GetUnitAbilityLevel(target, 'A0B3') <= 0) {
		UnitAddAbility(target, 'A0B3');
		UnitAddAbility(target, 'A0B4');
		UnitAddAbility(target, 'A0B5');
		UnitAddAbility(target, 'A0E9');
		UnitAddAbility(target, 'A0EA');
		UnitAddAbility(target, 'A0EB');
		UnitMakeAbilityPermanent(target, true, 'A0B3');
		UnitMakeAbilityPermanent(target, true, 'A0B4');
		UnitMakeAbilityPermanent(target, true, 'A0B5');
		UnitMakeAbilityPermanent(target, true, 'A0E9');
		UnitMakeAbilityPermanent(target, true, 'A0EA');
		UnitMakeAbilityPermanent(target, true, 'A0EB');
	}
	as100[GetUnitAbilityLevel(target, 'A0B5')] = GetUnitAbilityLevel(target, 'A0B5');
	as10[GetUnitAbilityLevel(target, 'A0B4')] = GetUnitAbilityLevel(target, 'A0B4');
	as1[GetUnitAbilityLevel(target, 'A0B3')] = GetUnitAbilityLevel(target, 'A0B3');
	unas100[GetUnitAbilityLevel(target, 'A0EB')] = GetUnitAbilityLevel(target, 'A0EB');
	unas10[GetUnitAbilityLevel(target, 'A0EA')] = GetUnitAbilityLevel(target, 'A0EA');
	unas1[GetUnitAbilityLevel(target, 'A0E9')] = GetUnitAbilityLevel(target, 'A0E9');
	as[((as100 - 1) * 'd') + ((as10 - 1) * $A) + as1 - 1] = ((as100 - 1) * 'd') + ((as10 - 1) * $A) + as1 - 1;
	unas[((unas100 - 1) * 'd') + ((unas10 - 1) * $A) + unas1 - 1] = ((unas100 - 1) * 'd') + ((unas10 - 1) * $A) + unas1 - 1;
	itog[as - unas] = as - unas;
	if (itog + attackspeed < $3E8 && itog + attackspeed > -$3E8) {
		itog[itog + attackspeed] = itog + attackspeed;
		itog100[(itog / 'd')] = (itog / 'd');
		itog10[(itog - (itog100 * 'd')) / $A] = (itog - (itog100 * 'd')) / $A;
		itog1[itog - (itog100 * 'd') - (itog10 * $A)] = itog - (itog100 * 'd') - (itog10 * $A);
		if (itog100 >= 0) {
			SetUnitAbilityLevel(target, 'A0B5', itog100 + 1);
			SetUnitAbilityLevel(target, 'A0EB', 1);
		else
			SetUnitAbilityLevel(target, 'A0EB', -itog100 + 1);
			SetUnitAbilityLevel(target, 'A0B5', 1);
		}
		if (itog10 >= 0) {
			SetUnitAbilityLevel(target, 'A0B4', itog10 + 1);
			SetUnitAbilityLevel(target, 'A0EA', 1);
		else
			SetUnitAbilityLevel(target, 'A0EA', -itog10 + 1);
			SetUnitAbilityLevel(target, 'A0B4', 1);
		}
		if (itog1 >= 0) {
			SetUnitAbilityLevel(target, 'A0B3', itog1 + 1);
			SetUnitAbilityLevel(target, 'A0E9', 1);
		else
			SetUnitAbilityLevel(target, 'A0E9', -itog1 + 1);
			SetUnitAbilityLevel(target, 'A0B3', 1);
		}
	else
		if (itog + attackspeed >= $3E8) {
			SetUnitAbilityLevel(target, 'A0B5', $A);
			SetUnitAbilityLevel(target, 'A0B4', $A);
			SetUnitAbilityLevel(target, 'A0B3', $A);
			SetUnitAbilityLevel(target, 'A0EB', 1);
			SetUnitAbilityLevel(target, 'A0EA', 1);
			SetUnitAbilityLevel(target, 'A0E9', 1);
		}
		if (itog + attackspeed <= -$3E8) {
			SetUnitAbilityLevel(target, 'A0B5', 1);
			SetUnitAbilityLevel(target, 'A0B4', 1);
			SetUnitAbilityLevel(target, 'A0B3', 1);
			SetUnitAbilityLevel(target, 'A0EB', $A);
			SetUnitAbilityLevel(target, 'A0EA', $A);
			SetUnitAbilityLevel(target, 'A0E9', $A);
		}
	}
}
int MaxStateModifierID(unitstate u) {
	if (u == UNIT_STATE_MAX_LIFE) {
		return 'A07A';
	elseif u == UNIT_STATE_MAX_MANA then
		return 'A07E';
	}
	return 0;
}
void SetUnitMaxState(unit u, unitstate us, int val) {
	int i = MaxStateModifierID(us);
	int c = val;
	if (i == 0) {
		return
	}
	if (c > 0) {
		while (true) {
			if (c == 0) break;
			UnitAddAbility(u, i);
			if (c >= 'd') {
				c[c - 'd'] = c - 'd';
				SetUnitAbilityLevel(u, i, 4);
			elseif c >= $A then
				c[c - $A] = c - $A;
				SetUnitAbilityLevel(u, i, 3);
			else
				c[c - 1] = c - 1;
				SetUnitAbilityLevel(u, i, 2);
			}
			UnitRemoveAbility(u, i);
		}
	elseif c < 0 then
		c[-c] = -c;
		while (true) {
			if (c == 0) break;
			UnitAddAbility(u, i);
			if (c >= 'd') {
				c[c - 'd'] = c - 'd';
				SetUnitAbilityLevel(u, i, 7);
			elseif c >= $A then
				c[c - $A] = c - $A;
				SetUnitAbilityLevel(u, i, 6);
			else
				c[c - 1] = c - 1;
				SetUnitAbilityLevel(u, i, 5);
			}
			UnitRemoveAbility(u, i);
		}
	}
}
void SetUnitLifeAndManaRegenerationActions() {
	timer t = GetExpiredTimer();
	int ht = GetHandleId(t);
	unit target = LoadUnitHandle(udg_hash, ht, 1);
	int life = LoadInteger(udg_hash, ht, 2);
	int mana = LoadInteger(udg_hash, ht, 3);
	float uslife = GetUnitState(target, UNIT_STATE_LIFE);
	if (uslife > .405 && (life != 0 || mana != 0)) {
		SetUnitState(target, UNIT_STATE_LIFE, uslife + (I2R(life) / $A));
		SetUnitState(target, UNIT_STATE_MANA, GetUnitState(target, UNIT_STATE_MANA) + (I2R(mana) / $A));
	elseif IsUnitType(target, UNIT_TYPE_HERO) == false then
		FlushChildHashtable(udg_hash, ht);
		DestroyTimer(t);
	}
	t[null] = null;
	target[null] = null;
}
void SetUnitLifeAndManaRegeneration(unit target, string s, int regen) {
	int hunit = GetHandleId(target);
	timer t = LoadTimerHandle(udg_hash, hunit, 50);
	int ht;
	int life = 0;
	int mana = 0;
	if (t == null) {
		t[CreateTimer()] = CreateTimer();
		ht[GetHandleId(t)] = GetHandleId(t);
		life[0] = 0;
		mana[0] = 0;
		SaveTimerHandle(udg_hash, hunit, 50, t);
		SaveUnitHandle(udg_hash, ht, 1, target);
	}
	ht[GetHandleId(t)] = GetHandleId(t);
	life[LoadInteger(udg_hash, ht, 2)] = LoadInteger(udg_hash, ht, 2);
	mana[LoadInteger(udg_hash, ht, 3)] = LoadInteger(udg_hash, ht, 3);
	if (s == "life") {
		life[life + regen] = life + regen;
		SaveInteger(udg_hash, ht, 2, life);
	}
	if (s == "mana") {
		mana[mana + regen] = mana + regen;
		SaveInteger(udg_hash, ht, 3, mana);
	}
	TimerStart(t, .1, true, SetUnitLifeAndManaRegenerationActions);
	t[null] = null;
}
void RandomUnitFromGroup(int count, group g) {
	array<unit> u;
	array<int> irand;
	unit first = null;
	unit random = null;
	int howunits = 0;
	int howunits2;
	int intran;
	int schetchik = 0;
	GroupClear(udg_GroupRandomUnitFromGroup);
	while (true) {
		first[FirstOfGroup(g)] = FirstOfGroup(g);
		if (first == null) break;
		if (first != null && GetUnitState(first, UNIT_STATE_LIFE) > .405) {
			howunits[howunits + 1] = howunits + 1;
			u[first] = first;
		}
		GroupRemoveUnit(g, first);
	}
	howunits2[howunits] = howunits;
	while (true) {
		if (howunits <= 0 || count <= schetchik) break;
		intran[GetRandomInt(1, howunits)] = GetRandomInt(1, howunits);
		random[u[intran]] = u[intran];
		GroupAddUnit(udg_GroupRandomUnitFromGroup, random);
		u[u[howunits]] = u[howunits];
		howunits[howunits - 1] = howunits - 1;
		schetchik[schetchik + 1] = schetchik + 1;
		random[null] = null;
	}
	while (true) {
		if (howunits2 <= 0) break;
		u[null] = null;
		howunits2[howunits2 - 1] = howunits2 - 1;
	}
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	first[null] = null;
}
void MoveUnit_Timer() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit u = LoadUnitHandle(udg_hash, h, 1);
	float speed = LoadReal(udg_hash, h, 2);
	float speedreduction = LoadReal(udg_hash, h, 3);
	float angle = LoadReal(udg_hash, h, 4);
	int wait = LoadInteger(udg_hash, h, 7);
	int wait2 = LoadInteger(udg_hash, h, 8);
	bool pause = LoadBoolean(udg_hash, h, 9);
	float dist = speed - (speedreduction * (wait2 * 2 - wait));
	float x = GetUnitX(u) + dist * Cos(angle * bj_DEGTORAD);
	float y = GetUnitY(u) + dist * Sin(angle * bj_DEGTORAD);
	if (IsTerrainPathable(x, y, PATHING_TYPE_FLYABILITY) == false && (GetUnitState(u, UNIT_STATE_LIFE) > .405 || LoadReal(udg_hash, h, 5) != .0)) {
		if (pause) {
			SetUnitPosition(u, x, y);
		else
			SetUnitX(u, x);
			SetUnitY(u, y);
		}
	}
	if (wait == wait2 && LoadReal(udg_hash, h, 5) > .0) {
		SetUnitFlyHeight(u, -(LoadReal(udg_hash, h, 5)), LoadReal(udg_hash, h, 6));
	}
	wait[wait - 1] = wait - 1;
	if (wait <= 0) {
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	else
		SaveInteger(udg_hash, h, 7, wait);
	}
	u[null] = null;
}
void MoveUnit(unit u, float time, float speed, float speedreduction, float angle, float height, bool pause) {
	timer t = CreateTimer();
	int h = GetHandleId(t);
	int wait = R2I(time / .03);
	SaveUnitHandle(udg_hash, h, 1, u);
	SaveReal(udg_hash, h, 2, speed / 33.33);
	if (speedreduction != .0) {
		SaveReal(udg_hash, h, 3, (speedreduction / 33.33) / 33.33);
	}
	SaveReal(udg_hash, h, 4, angle);
	if (height != .0) {
		UnitAddAbility(u, 'Amrf');
		UnitRemoveAbility(u, 'Amrf');
		SetUnitFlyHeight(u, height, height / (time / 2));
		SaveReal(udg_hash, h, 5, height);
		SaveReal(udg_hash, h, 6, height / (time / 2));
	}
	SaveInteger(udg_hash, h, 7, wait);
	SaveInteger(udg_hash, h, 8, wait / 2);
	SaveBoolean(udg_hash, h, 9, pause);
	TimerStart(t, .03, true, MoveUnit_Timer);
	t[null] = null;
}
void SimError(player ForPlayer, string msg) {
	if (udg_SimError == null) {
		udg_SimError[CreateSoundFromLabel("InterfaceError", false, false, false, $A, $A)] = CreateSoundFromLabel("InterfaceError", false, false, false, $A, $A);
	}
	if ((GetLocalPlayer() == ForPlayer)) {
		ClearTextMessages();
		DisplayTimedTextToPlayer(ForPlayer, .52, -1., 3., "|cffffcc00" + msg + "|r");
		StartSound(udg_SimError);
	}
}
void CreateTexttag(string s, float size, int alpha, float x, float y, float offset, float velx, float vely, float lifespain) {
	texttag txt = CreateTextTag();
	SetTextTagText(txt, s, size);
	SetTextTagColor(txt, $FF, $FF, $FF, alpha);
	SetTextTagPos(txt, x, y, offset);
	SetTextTagVelocity(txt, velx, vely);
	SetTextTagPermanent(txt, false);
	if (lifespain > .0) {
		SetTextTagLifespan(txt, lifespain);
		SetTextTagFadepoint(txt, lifespain / 2);
	}
	txt[null] = null;
}
int CountItemOfTypeOnUnit(unit u, int itemId) {
	int index = 0;
	int count = 0;
	item indexItem;
	while (true) {
		indexItem[UnitItemInSlot(u, index)] = UnitItemInSlot(u, index);
		if ((indexItem != null) && (GetItemTypeId(indexItem) == itemId)) {
			count[count + 1] = count + 1;
		}
		index[index + 1] = index + 1;
		if (index >= 6) break;
	}
	return count;
}
void SoundForPlayer(player ForPlayer, int number) {
	if ((GetLocalPlayer() == ForPlayer)) {
		StartSound(udg_Game_Sound[number]);
	}
}
void LinkItems(int count1, int id1, int count2, int id2, int count3, int id3, int count4, int id4, int count5, int id5, int id, string sef, bool remove) {
	array<int> count;
	array<int> itemid;
	array<item> iteminslot;
	unit hero = GetTriggerUnit();
	player p = GetOwningPlayer(hero);
	item manipulateditem = GetManipulatedItem();
	int i = 0;
	int lopa = 1;
	int index;
	item indexItem;
	int counter = 0;
	int numerator = 0;
	bool bol = true;
	item finalitem;
	int charges = 0;
	int buysumm = 0;
	int finalcost;
	int costdifference;
	array<item> fastpurchaseitem;
	bool fullinv = true;
	bool stoppurchase = false;
	count[count1] = count1;
	count[count2] = count2;
	count[count3] = count3;
	count[count4] = count4;
	count[count5] = count5;
	itemid[id1] = id1;
	itemid[id2] = id2;
	itemid[id3] = id3;
	itemid[id4] = id4;
	itemid[id5] = id5;
	while (true) {
		if (lopa > 5) break;
		if (count[lopa] > 0) {
			index[0] = 0;
			numerator[0] = 0;
			while (true) {
				if (index > 5) break;
				indexItem[UnitItemInSlot(hero, index)] = UnitItemInSlot(hero, index);
				if ((indexItem != null) && (GetItemTypeId(indexItem) == itemid[lopa]) && count[lopa] > numerator) {
					if (GetItemCharges(indexItem) > 0 && GetItemCharges(indexItem) > charges) {
						charges[GetItemCharges(indexItem)] = GetItemCharges(indexItem);
					}
					buysumm[buysumm + LoadInteger(udg_hash, itemid[lopa], 'x')] = buysumm + LoadInteger(udg_hash, itemid[lopa], 'x');
					counter[counter + 1] = counter + 1;
					numerator[numerator + 1] = numerator + 1;
					iteminslot[indexItem] = indexItem;
					if (udg_Boolean_Player_Fast_Purchase[GetPlayerId(p) + 1]) {
						fastpurchaseitem[indexItem] = indexItem;
					}
				}
				index[index + 1] = index + 1;
			}
			if (numerator < count[lopa]) {
				bol[false] = false;
			}
		}
		lopa[lopa + 1] = lopa + 1;
	}
	if (LoadStr(udg_hash, GetUnitTypeId(hero), 91) != "ranged" && GetItemTypeId(manipulateditem) == 'I041') {
		bol[false] = false;
		stoppurchase[true] = true;
		udg_Show_Item_Link_Text[false] = false;
		SimError(p, "Этот предмет предназначен только для героев дальнего боя!!!");
		SetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) + R2I(GetWidgetLife(manipulateditem)));
	}
	if (LoadStr(udg_hash, GetUnitTypeId(hero), 91) != "melee" && (GetItemTypeId(manipulateditem) == 'I01R' || GetItemTypeId(manipulateditem) == 'I02M')) {
		bol[false] = false;
		stoppurchase[true] = true;
		udg_Show_Item_Link_Text[false] = false;
		SimError(p, "Этот предмет предназначен только для героев ближнего боя!!!");
		SetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) + R2I(GetWidgetLife(manipulateditem)));
	else
		if ((GetItemTypeId(manipulateditem) == 'I01R' || GetItemTypeId(manipulateditem) == 'I02M')) {
			if ((GetItemTypeId(manipulateditem) == 'I01R' && (CountItemOfTypeOnUnit(hero, 'I02E') + CountItemOfTypeOnUnit(hero, 'I02N')) >= 1) || (GetItemTypeId(manipulateditem) == 'I02M' && CountItemOfTypeOnUnit(hero, 'I02N') >= 1)) {
				bol[false] = false;
				stoppurchase[true] = true;
				udg_Show_Item_Link_Text[false] = false;
				SimError(p, "У вашего героя уже есть Топор Вождя Орков или Крушитель!!!");
				SetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) + R2I(GetWidgetLife(manipulateditem)));
			}
		}
	}
	if (bol) {
		while (true) {
			if (counter <= 0) break;
			RemoveItem(iteminslot[counter]);
			iteminslot[null] = null;
			counter[counter - 1] = counter - 1;
		}
		finalitem[CreateItem(id, GetUnitX(hero), GetUnitY(hero))] = CreateItem(id, GetUnitX(hero), GetUnitY(hero));
		UnitAddItem(hero, finalitem);
		SetItemUserData(finalitem, GetPlayerId(GetOwningPlayer(hero)) + 1);
		if (IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS) && udg_System_ShowAbil_And_Items_Hint[GetPlayerId(GetLocalPlayer()) + 1]) {
			DisplayTextToPlayer(GetLocalPlayer(), .0, .0, udg_ColorString[GetPlayerId(p) + 1] + GetPlayerName(p) + "|r приобрел предмет |cff99ccff" + GetItemName(finalitem) + "|r");
		}
		if ((id == 'I055' || id == 'I056' || id == 'I057' || id == 'I058')) {
			SetItemCharges(finalitem, 1);
		}
		if (charges != 0) {
			SetItemCharges(finalitem, charges);
		}
		udg_Integer_Item_Recipe_Level[-1] = -1;
		udg_Show_Item_Link_Text[false] = false;
		if (sef == "") {
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIam\\AIamTarget.mdl", hero, "origin"));
		else
			DestroyEffect(AddSpecialEffectTarget(sef, hero, "origin"));
		}
	else
		if (udg_Boolean_Player_Fast_Purchase[GetPlayerId(p) + 1] && GetItemType(manipulateditem) == ITEM_TYPE_POWERUP && stoppurchase == false && LoadInteger(udg_hash, id, 'y') <= 0) {
			finalcost[LoadInteger(udg_hash, id, 'x')] = LoadInteger(udg_hash, id, 'x');
			costdifference[GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) + R2I(GetWidgetLife(manipulateditem)) - finalcost + buysumm] = GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) + R2I(GetWidgetLife(manipulateditem)) - finalcost + buysumm;
			if (costdifference >= 0) {
				lopa[0] = 0;
				while (true) {
					if (lopa > 5) break;
					if (fastpurchaseitem[lopa] != null) {
						RemoveItem(fastpurchaseitem[lopa]);
					}
					fastpurchaseitem[null] = null;
					iteminslot[null] = null;
					lopa[lopa + 1] = lopa + 1;
				}
				lopa[0] = 0;
				while (true) {
					if (lopa > 5) break;
					if (UnitItemInSlot(hero, lopa) == null) {
						fullinv[false] = false;
					}
					lopa[lopa + 1] = lopa + 1;
				}
				if (fullinv == false) {
					finalitem[CreateItem(id, GetUnitX(hero), GetUnitY(hero))] = CreateItem(id, GetUnitX(hero), GetUnitY(hero));
					UnitAddItem(hero, finalitem);
					SetItemUserData(finalitem, GetPlayerId(GetOwningPlayer(hero)) + 1);
					SetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) + R2I(GetWidgetLife(manipulateditem)) - finalcost + buysumm);
					if (IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS) && udg_System_ShowAbil_And_Items_Hint[GetPlayerId(GetLocalPlayer()) + 1]) {
						DisplayTextToPlayer(GetLocalPlayer(), .0, .0, udg_ColorString[GetPlayerId(p) + 1] + GetPlayerName(p) + "|r приобрел предмет |cff99ccff" + GetItemName(finalitem) + "|r");
					}
					if ((id == 'I055' || id == 'I056' || id == 'I057' || id == 'I058')) {
						SetItemCharges(finalitem, 1);
					}
					if (charges != 0) {
						SetItemCharges(finalitem, charges);
					}
					udg_Integer_Item_Recipe_Level[-1] = -1;
					udg_Show_Item_Link_Text[false] = false;
					if (sef == "") {
						DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIam\\AIamTarget.mdl", hero, "origin"));
					else
						DestroyEffect(AddSpecialEffectTarget(sef, hero, "origin"));
					}
				else
					SoundForPlayer(p, $C);
					SimError(p, "Недостаточно места в инвентаре.");
				}
			else
				SoundForPlayer(p, $D);
				SimError(p, "Недостаточно золота для быстрой покупки!!!");
			}
		}
	}
	if (GetItemType(manipulateditem) == ITEM_TYPE_POWERUP) {
		if (bol == false) {
			udg_Integer_Item_Recipe_Level[udg_Integer_Item_Recipe_Level - 1] = udg_Integer_Item_Recipe_Level - 1;
		}
		if (udg_Integer_Item_Recipe_Level < 0 && udg_Show_Item_Link_Text) {
			if (udg_Boolean_Player_Fast_Purchase[GetPlayerId(p) + 1] && LoadInteger(udg_hash, id, 0) <= 0) {
				if (fullinv == false) {
					SoundForPlayer(p, $D);
					SimError(p, "Недостаточно золота для быстрой покупки!!!");
				}
			else
				SimError(p, "Для того, чтобы собрать предмет, требуются все компоненты!!!");
			}
			SetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) + R2I(GetWidgetLife(manipulateditem)));
		}
		if (udg_Integer_Item_Recipe_Level < 0) {
			RemoveItem(manipulateditem);
		}
	}
	indexItem[null] = null;
	finalitem[null] = null;
	hero[null] = null;
	manipulateditem[null] = null;
	p[null] = null;
}
void ProgressBarMove() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	texttag txt = LoadTextTagHandle(udg_hash, h, 1);
	unit u = LoadUnitHandle(udg_hash, h, 4);
	int counter = LoadInteger(udg_hash, h, 5);
	string color = LoadStr(udg_hash, h, 6);
	int orderId = LoadInteger(udg_hash, h, 7);
	int length = LoadInteger(udg_hash, h, 8);
	int orderunit;
	bool orderbool = false;
	bool display = true;
	string scolor;
	string swhite;
	string s;
	if (counter > 0) {
		counter[counter - 1] = counter - 1;
		SaveInteger(udg_hash, h, 5, counter);
		if (orderId != 0) {
			orderbool[true] = true;
		}
		if (orderbool) {
			orderunit[GetUnitCurrentOrder(u)] = GetUnitCurrentOrder(u);
			if (orderunit == orderId) {
			else
				display[false] = false;
			}
		}
		if (display) {
			scolor[color + SubString("llllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllll", counter, length) + "|r"] = color + SubString("llllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllll", counter, length) + "|r";
			swhite[SubString("llllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllll", 0, counter)] = SubString("llllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllll", 0, counter);
			s[scolor + swhite] = scolor + swhite;
			SetTextTagText(txt, s, .0115);
		else
			counter[0] = 0;
			SaveInteger(udg_hash, h, 5, counter);
		}
	else
		DestroyTextTag(txt);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	txt[null] = null;
	u[null] = null;
}
void AddProgressBarfake(unit u, float size, string color, string order, float time) {
	texttag txt = CreateTextTag();
	timer t = CreateTimer();
	int h = GetHandleId(t);
	float x = GetUnitX(u) + (125. * size) * Cos(180. * bj_DEGTORAD);
	float y = GetUnitY(u) + (125. * size) * Sin(180. * bj_DEGTORAD);
	int counter = R2I('d' * size);
	float periodic = time / counter;
	int orderId;
	SetTextTagText(txt, SubString("llllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllll", 0, R2I('d' * size)), .0115);
	SetTextTagPos(txt, x, y, 200.);
	SetTextTagPermanent(txt, false);
	SaveTextTagHandle(udg_hash, h, 1, txt);
	SaveUnitHandle(udg_hash, h, 4, u);
	SaveInteger(udg_hash, h, 5, counter);
	SaveStr(udg_hash, h, 6, color);
	if (order != "") {
		orderId[OrderId(order)] = OrderId(order);
		if ((orderId != 0)) {
		else
			orderId[UnitId(order)] = UnitId(order);
			if ((orderId != 0)) {
			}
		}
		SaveInteger(udg_hash, h, 7, orderId);
	else
		SaveInteger(udg_hash, h, 7, 0);
	}
	SaveInteger(udg_hash, h, 8, counter);
	TimerStart(t, periodic, true, ProgressBarMove);
	txt[null] = null;
	t[null] = null;
}
bool IsPointInRect(float px, float py, float cx, float cy, float ax, float ay, float bx, float by) {
	float dot1 = (px - cx) * (ax - cx) + (py - cy) * (ay - cy);
	float dot2 = (ax - cx) * (ax - cx) + (ay - cy) * (ay - cy);
	float dot3 = (px - cx) * (bx - cx) + (py - cy) * (by - cy);
	float dot4 = (bx - cx) * (bx - cx) + (by - cy) * (by - cy);
	return dot1 >= 0 && dot1 <= dot2 && dot3 >= 0 && dot3 <= dot4;
}
void UnitPeriodicPostionMovePeriodic() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit target = LoadUnitHandle(udg_hash, h, 1);
	int wait = LoadInteger(udg_hash, h, 2);
	SetUnitX(target, GetUnitX(target));
	SetUnitY(target, GetUnitY(target));
	IssueImmediateOrderById(target, $D0004);
	if (wait <= 0) {
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	else
		SaveInteger(udg_hash, h, 2, wait - 1);
	}
	t[null] = null;
	target[null] = null;
}
void UnitPeriodicPostionMove(unit target, float periodic, float time) {
	timer t = CreateTimer();
	int h = GetHandleId(t);
	SaveUnitHandle(udg_hash, h, 1, target);
	SaveInteger(udg_hash, h, 2, R2I(time / periodic));
	TimerStart(t, periodic, true, UnitPeriodicPostionMovePeriodic);
	t[null] = null;
}
void StunUnitTimed_Periodic() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit dammi = LoadUnitHandle(udg_hash, h, 1);
	unit target = LoadUnitHandle(udg_hash, h, 2);
	int stun100 = LoadInteger(udg_hash, h, 3);
	int stun10 = LoadInteger(udg_hash, h, 4);
	int stun1 = LoadInteger(udg_hash, h, 5);
	int stunstage = LoadInteger(udg_hash, h, 6);
	stunstage[stunstage + 1] = stunstage + 1;
	SaveInteger(udg_hash, h, 6, stunstage);
	if (stunstage == 1) {
		if (GetUnitAbilityLevel(dammi, 'A0H4') > 0) {
			IssueTargetOrderById(dammi, $D007F, target);
		}
		TimerStart(t, stun100 * 1., false, StunUnitTimed_Periodic);
	}
	if (stunstage == 2) {
		if (GetUnitAbilityLevel(dammi, 'A0H5') > 0) {
			IssueTargetOrderById(dammi, $D0107, target);
		}
		TimerStart(t, stun10 * .1, false, StunUnitTimed_Periodic);
	}
	if (stunstage == 3) {
		if (GetUnitAbilityLevel(dammi, 'A0H6') > 0) {
			IssueTargetOrderById(dammi, $D011C, target);
		}
		TimerStart(t, stun1 * .01, false, StunUnitTimed_Periodic);
	}
	if (stunstage >= 4) {
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	dammi[null] = null;
	target[null] = null;
}
void StunUnitTimed(unit target, float time) {
	timer t = CreateTimer();
	int h = GetHandleId(t);
	unit dammi = CreateUnit(Player($F), 'h00U', GetUnitX(target), GetUnitY(target), .0);
	int stun100;
	int stun10;
	int stun1;
	int stunstage = 0;
	if (time >= 10.) {
		time[9.99] = 9.99;
	}
	stun100[R2I(time)] = R2I(time);
	stun10[R2I((time - stun100) * $A)] = R2I((time - stun100) * $A);
	stun1[R2I(time * 'd') - stun100 * 'd' - stun10 * $A] = R2I(time * 'd') - stun100 * 'd' - stun10 * $A;
	if (stun100 > 0) {
		UnitAddAbility(dammi, 'A0H4');
		SetUnitAbilityLevel(dammi, 'A0H4', stun100);
	}
	if (stun10 > 0) {
		UnitAddAbility(dammi, 'A0H5');
		SetUnitAbilityLevel(dammi, 'A0H5', stun10);
	}
	if (stun1 > 0) {
		UnitAddAbility(dammi, 'A0H6');
		SetUnitAbilityLevel(dammi, 'A0H6', stun1);
	}
	UnitApplyTimedLife(dammi, 'BTLF', I2R(stun100) + 2.);
	SaveUnitHandle(udg_hash, h, 1, dammi);
	SaveUnitHandle(udg_hash, h, 2, target);
	SaveInteger(udg_hash, h, 3, stun100);
	SaveInteger(udg_hash, h, 4, stun10);
	SaveInteger(udg_hash, h, 5, stun1);
	SaveInteger(udg_hash, h, 6, stunstage);
	TimerStart(t, .0, false, StunUnitTimed_Periodic);
	t[null] = null;
	dammi[null] = null;
}
void RemovePotionAfterMinute() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit dammi = LoadUnitHandle(udg_hash, h, 1);
	effect ef = LoadEffectHandle(udg_hash, h, 2);
	region reg = LoadRegionHandle(udg_hash, h, 3);
	rect rct = LoadRectHandle(udg_hash, h, 4);
	KillUnit(dammi);
	DestroyEffect(ef);
	FlushChildHashtable(udg_hash, GetHandleId(reg));
	FlushChildHashtable(udg_hash, GetHandleId(dammi));
	RemoveRect(rct);
	RemoveRegion(reg);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
	dammi[null] = null;
	ef[null] = null;
	reg[null] = null;
	rct[null] = null;
}
void CreatePotion(float x, float y, int potionmin, int potionmax) {
	int potionindex = GetRandomInt(potionmin, potionmax);
	unit dammi = CreateUnit(Player($F), 'h00U', x, y, GetRandomReal(.0, 360.));
	effect ef = AddSpecialEffectTarget(udg_Potion_Effect[potionindex], dammi, "origin");
	string healtype = udg_Potion_Type[potionindex];
	int heal = udg_Potion_Heal_Amount[potionindex];
	float size = udg_Potion_Size[potionindex];
	group g = CreateGroup();
	unit Picked;
	bool destroy = false;
	texttag txt;
	float vel = .0221875;
	float angle = 45. + GetRandomReal(.0, 90.);
	float xvel = vel * Cos(angle * bj_DEGTORAD);
	float yvel = vel * Sin(angle * bj_DEGTORAD);
	float state;
	rect rct;
	region reg;
	timer t;
	int h;
	SetUnitScale(dammi, size, size, size);
	GroupEnumUnitsInRange(g, x, y, 150., null);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null || destroy) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && GetPlayerId(GetOwningPlayer(Picked)) <= 8 && IsUnitType(Picked, UNIT_TYPE_HERO) && GetUnitTypeId(Picked) != 'h00U') {
			state[GetUnitState(Picked, UNIT_STATE_LIFE)] = GetUnitState(Picked, UNIT_STATE_LIFE);
			if (healtype == "life" && (state < GetUnitState(Picked, UNIT_STATE_MAX_LIFE))) {
				SetUnitState(Picked, UNIT_STATE_LIFE, state + heal);
				DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", Picked, "origin"), 2.);
				txt[CreateTextTag()] = CreateTextTag();
				SetTextTagText(txt, "|cFF00DC00+" + I2S(heal) + "|r", .03);
				SetTextTagPos(txt, x, y, .0);
				SetTextTagColor(txt, 0, 0, 0, $C8);
				SetTextTagVelocity(txt, xvel, yvel);
				SetTextTagLifespan(txt, 3.);
				SetTextTagFadepoint(txt, .0);
				SetTextTagPermanent(txt, false);
				destroy[true] = true;
			}
			state[GetUnitState(Picked, UNIT_STATE_MANA)] = GetUnitState(Picked, UNIT_STATE_MANA);
			if (healtype == "mana" && (state < GetUnitState(Picked, UNIT_STATE_MAX_MANA))) {
				SetUnitState(Picked, UNIT_STATE_MANA, state + heal);
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIma\\AImaTarget.mdl", Picked, "origin"));
				txt[CreateTextTag()] = CreateTextTag();
				SetTextTagText(txt, "|c000347FC+" + I2S(heal) + "|r", .03);
				SetTextTagPos(txt, x, y, .0);
				SetTextTagColor(txt, 0, 0, 0, $C8);
				SetTextTagVelocity(txt, xvel, yvel);
				SetTextTagLifespan(txt, 3.);
				SetTextTagFadepoint(txt, .0);
				SetTextTagPermanent(txt, false);
				destroy[true] = true;
			}
		}
		GroupRemoveUnit(g, Picked);
	}
	if (destroy) {
		KillUnit(dammi);
		DestroyEffect(ef);
	else
		reg[CreateRegion()] = CreateRegion();
		rct[Rect(x - 100., y - 100., x + 100., y + 100.)] = Rect(x - 100., y - 100., x + 100., y + 100.);
		RegionAddRect(reg, rct);
		SaveUnitHandle(udg_hash, GetHandleId(reg), 1, dammi);
		SaveRectHandle(udg_hash, GetHandleId(reg), 2, rct);
		SaveInteger(udg_hash, GetHandleId(dammi), 1, potionindex);
		SaveEffectHandle(udg_hash, GetHandleId(dammi), 2, ef);
		TriggerRegisterEnterRegion(gg_trg_Check_Potion_Picked_Up, reg, null);
		rct[null] = null;
		reg[null] = null;
		t[CreateTimer()] = CreateTimer();
		h[GetHandleId(t)] = GetHandleId(t);
		SaveUnitHandle(udg_hash, h, 1, dammi);
		SaveEffectHandle(udg_hash, h, 2, ef);
		SaveRegionHandle(udg_hash, h, 3, reg);
		SaveRectHandle(udg_hash, h, 4, rct);
		TimerStart(t, 60., false, RemovePotionAfterMinute);
	}
	dammi[null] = null;
	ef[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	Picked[null] = null;
	txt[null] = null;
	t[null] = null;
}
void TimerToFunctionDestroy() {
	timer t2 = GetExpiredTimer();
	int h2 = GetHandleId(t2);
	timer t = LoadTimerHandle(udg_hash, h2, 1);
	timerdialog td = LoadTimerDialogHandle(udg_hash, h2, 2);
	DestroyTimer(t);
	DestroyTimer(t2);
	DestroyTimerDialog(td);
	FlushChildHashtable(udg_hash, h2);
	t[null] = null;
	t2[null] = null;
	td[null] = null;
}
void TimerToFunction(float time, string s, CallbackFunc funcname) {
	timer t = CreateTimer();
	timerdialog td;
	timer t2 = CreateTimer();
	int h2 = GetHandleId(t2);
	if (s != "") {
		td[CreateTimerDialog(t)] = CreateTimerDialog(t);
		TimerDialogSetTitle(td, s);
		TimerDialogDisplay(td, true);
		TimerDialogSetTimeColor(td, $FF, 45, 45, 20);
		SaveTimerDialogHandle(udg_hash, h2, 2, td);
		td[null] = null;
	}
	TimerStart(t, time, false, funcname);
	TimerStart(t2, time + 1., false, TimerToFunctionDestroy);
	SaveTimerHandle(udg_hash, h2, 1, t);
	t[null] = null;
	t2[null] = null;
}
void HintsToPlayerWithDelay_ShowHint() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	int count = LoadInteger(udg_hash, h, $A);
	player p = LoadPlayerHandle(udg_hash, h, $B);
	string s;
	if (count > 0) {
		s[LoadStr(udg_hash, h, count)] = LoadStr(udg_hash, h, count);
		DisplayTimedTextToPlayer(p, .0, .0, 10., "|cff32cd32ПОДСКАЗКА:|r");
		DisplayTimedTextToPlayer(p, .0, .0, 10., s);
		SoundForPlayer(p, 1);
		count[count - 1] = count - 1;
		SaveInteger(udg_hash, h, $A, count);
	else
		DestroyTimer(t);
		FlushChildHashtable(udg_hash, h);
	}
	t[null] = null;
	p[null] = null;
}
void HintsToPlayerWithDelay(player p) {
	timer t = CreateTimer();
	int h = GetHandleId(t);
	int count = 5;
	array<string> s;
	s["Ваша задача: защищать стражей-заклинателей, находящихся около портала на вашей базе. Если все они погибнут - вы проиграете"] = "Ваша задача: защищать стражей-заклинателей, находящихся около портала на вашей базе. Если все они погибнут - вы проиграете";
	s["В правой части базы находятся магазины с предметами, они разделены по типу, поэтому вы можете быстро найти нужные для себя артефакты"] = "В правой части базы находятся магазины с предметами, они разделены по типу, поэтому вы можете быстро найти нужные для себя артефакты";
	s["Просмотреть игровые команды, а также краткую информацию о карте вы можете в меню Инфо (|Cfffed312F9|r) а также на верхней панели интерфейса"] = "Просмотреть игровые команды, а также краткую информацию о карте вы можете в меню Инфо (|Cfffed312F9|r) а также на верхней панели интерфейса";
	s["Для более легкого прохождения первых волн, купите в магазинах несколько зелий лечения здоровья и маны, они помогут вам не умирать в бою."] = "Для более легкого прохождения первых волн, купите в магазинах несколько зелий лечения здоровья и маны, они помогут вам не умирать в бою.";
	s["Приношу свои извинения, но в альфа версии карты, в лесy вокруг базы пока что никого и ничего нет. В следующих версиях там уже кое-что появится..."] = "Приношу свои извинения, но в альфа версии карты, в лесy вокруг базы пока что никого и ничего нет. В следующих версиях там уже кое-что появится...";
	TimerStart(t, 15., true, HintsToPlayerWithDelay_ShowHint);
	SaveStr(udg_hash, h, 1, s[1]);
	SaveStr(udg_hash, h, 2, s[2]);
	SaveStr(udg_hash, h, 3, s[3]);
	SaveStr(udg_hash, h, 4, s[4]);
	SaveStr(udg_hash, h, 5, s[5]);
	SaveInteger(udg_hash, h, $A, count);
	SavePlayerHandle(udg_hash, h, $B, p);
	t[null] = null;
}
void ProgressBarAddPercentComplete_Stop_Animation() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit dammi = LoadUnitHandle(udg_hash, h, 1);
	float sum = LoadReal(udg_hash, GetHandleId(dammi), 1);
	int count = LoadInteger(udg_hash, GetHandleId(dammi), 2);
	float tsum = LoadReal(udg_hash, h, 2);
	int tcount = LoadInteger(udg_hash, h, 3);
	count[count - tcount] = count - tcount;
	SaveInteger(udg_hash, GetHandleId(dammi), 2, count);
	tcount[0] = 0;
	SaveInteger(udg_hash, h, 3, tcount);
	sum[sum - tsum] = sum - tsum;
	SaveReal(udg_hash, GetHandleId(dammi), 1, sum);
	tsum[.0] = .0;
	SaveReal(udg_hash, h, 2, tsum);
	if (count <= 0) {
		SetUnitTimeScale(dammi, .0);
		DestroyTimer(t);
		FlushChildHashtable(udg_hash, h);
	else
		tsum[sum] = sum;
		tcount[count] = count;
		SaveReal(udg_hash, h, 2, tsum);
		SaveInteger(udg_hash, h, 3, tcount);
		SaveUnitHandle(udg_hash, h, 1, dammi);
		SetUnitTimeScale(dammi, (.1 * tsum));
		TimerStart(t, .1, false, ProgressBarAddPercentComplete_Stop_Animation);
	}
	t[null] = null;
	dammi[null] = null;
}
void ProgressBarAddPercentComplete(unit dammi, float percent) {
	timer t;
	int h;
	float sum = LoadReal(udg_hash, GetHandleId(dammi), 1);
	int count = LoadInteger(udg_hash, GetHandleId(dammi), 2);
	sum[sum + percent] = sum + percent;
	count[count + 1] = count + 1;
	SaveReal(udg_hash, GetHandleId(dammi), 1, sum);
	SaveInteger(udg_hash, GetHandleId(dammi), 2, count);
	if (count <= 1) {
		t[CreateTimer()] = CreateTimer();
		h[GetHandleId(t)] = GetHandleId(t);
		SaveUnitHandle(udg_hash, h, 1, dammi);
		SaveReal(udg_hash, h, 2, percent);
		SaveInteger(udg_hash, h, 3, 1);
		SetUnitTimeScale(dammi, (.1 * percent));
		TimerStart(t, .1, false, ProgressBarAddPercentComplete_Stop_Animation);
		t[null] = null;
	}
}
void AddProgressBarMovingPeriodic() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit target = LoadUnitHandle(udg_hash, h, 1);
	unit dammi = LoadUnitHandle(udg_hash, h, 2);
	bool dead;
	if (GetUnitState(dammi, UNIT_STATE_LIFE) > .405 && dammi != null) {
		if (GetUnitState(target, UNIT_STATE_LIFE) > .405) {
			SetUnitPosition(dammi, GetUnitX(target), GetUnitY(target));
			dead[LoadBoolean(udg_hash, h, 3)] = LoadBoolean(udg_hash, h, 3);
			if (dead) {
				SetUnitVertexColor(dammi, LoadInteger(udg_hash, h, 4), LoadInteger(udg_hash, h, 5), LoadInteger(udg_hash, h, 6), $FF);
				SaveBoolean(udg_hash, h, 3, false);
			}
		else
			dead[LoadBoolean(udg_hash, h, 3)] = LoadBoolean(udg_hash, h, 3);
			if (dead == false) {
				SetUnitVertexColor(dammi, LoadInteger(udg_hash, h, 4), LoadInteger(udg_hash, h, 5), LoadInteger(udg_hash, h, 6), 0);
				SaveBoolean(udg_hash, h, 3, true);
			}
		}
	else
		DestroyTimer(t);
		FlushChildHashtable(udg_hash, h);
	}
	t[null] = null;
	target[null] = null;
	dammi[null] = null;
}
void AddProgressBar(unit target, float height, float size, float time, bool move, bool Ns, int hand, int red, int green, int blue) {
	unit dammi = CreateUnit(GetOwningPlayer(target), 'h00B', GetUnitX(target), GetUnitY(target), 270.);
	timer t;
	int h;
	SetUnitX(dammi, GetUnitX(target));
	SetUnitY(dammi, GetUnitY(target));
	UnitAddAbility(dammi, 'Amrf');
	UnitRemoveAbility(dammi, 'Amrf');
	SetUnitFlyHeight(dammi, height, .0);
	SetUnitScale(dammi, size, size, size);
	SetUnitVertexColor(dammi, red, green, blue, $FF);
	SetUnitAnimation(dammi, "birth");
	SaveUnitHandle(udg_hash, GetHandleId(target), hand, dammi);
	if (Ns) {
		SetUnitTimeScale(dammi, (1. / time));
		UnitApplyTimedLife(dammi, 'BTLF', time);
	else
		SetUnitTimeScale(dammi, .0);
	}
	if (move) {
		t[CreateTimer()] = CreateTimer();
		h[GetHandleId(t)] = GetHandleId(t);
		SaveUnitHandle(udg_hash, h, 1, target);
		SaveUnitHandle(udg_hash, h, 2, dammi);
		SaveBoolean(udg_hash, h, 3, false);
		SaveInteger(udg_hash, h, 4, red);
		SaveInteger(udg_hash, h, 5, green);
		SaveInteger(udg_hash, h, 6, blue);
		TimerStart(t, .03, true, AddProgressBarMovingPeriodic);
		t[null] = null;
	}
	dammi[null] = null;
}
void HeroStepsPeriodicSound() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit target = LoadUnitHandle(udg_hash, h, 1);
	float x = LoadReal(udg_hash, h, 2);
	float y = LoadReal(udg_hash, h, 3);
	float xnew = GetUnitX(target);
	float ynew = GetUnitY(target);
	int random = GetRandomInt(1, 4);
	player p;
	if (GetUnitState(target, UNIT_STATE_LIFE) > .405 && (x != xnew && y != ynew)) {
		p[GetOwningPlayer(target)] = GetOwningPlayer(target);
		if (random == 1) {
			SoundForPlayer(p, 8);
			BJDebugMsg("1");
		}
		if (random == 2) {
			SoundForPlayer(p, 9);
			BJDebugMsg("2");
		}
		if (random == 3) {
			SoundForPlayer(p, $A);
			BJDebugMsg("3");
		}
		if (random == 4) {
			SoundForPlayer(p, $B);
			BJDebugMsg("4");
		}
		SaveReal(udg_hash, h, 2, xnew);
		SaveReal(udg_hash, h, 3, ynew);
	}
	t[null] = null;
	target[null] = null;
}
void HeroStepsSound(unit target) {
	timer t = CreateTimer();
	int h = GetHandleId(t);
	float x = GetUnitX(target);
	float y = GetUnitY(target);
	SaveUnitHandle(udg_hash, h, 1, target);
	SaveReal(udg_hash, h, 2, x);
	SaveReal(udg_hash, h, 3, y);
	TimerStart(t, 1., true, HeroStepsPeriodicSound);
	t[null] = null;
}
void ShowAndFlushAllPlayerDamage(bool flushonly) {
	string s;
	float maxtakendamage = .0;
	float maxreciveddamage = .0;
	float ptakendamage = .0;
	float preceiveddamage = .0;
	player pmaxtakedamage = Player(0);
	player pmaxreceiveddamage = Player(0);
	int lopa = 0;
	float alltakendamage = .0;
	float allreceiveddamage = .0;
	player p;
	int id;
	float percent = .0;
	string spercent;
	float time = .0;
	if (flushonly == false) {
		while (true) {
			if (lopa > 8) break;
			alltakendamage[alltakendamage + udg_Player_Taken_Damage_Current[lopa]] = alltakendamage + udg_Player_Taken_Damage_Current[lopa];
			allreceiveddamage[allreceiveddamage + udg_Player_Received_Damage_Current[lopa]] = allreceiveddamage + udg_Player_Received_Damage_Current[lopa];
			if (udg_Player_Taken_Damage_Current[lopa] > maxtakendamage) {
				maxtakendamage[udg_Player_Taken_Damage_Current[lopa]] = udg_Player_Taken_Damage_Current[lopa];
				pmaxtakedamage[Player(lopa)] = Player(lopa);
			}
			if (udg_Player_Received_Damage_Current[lopa] > maxreciveddamage) {
				maxreciveddamage[udg_Player_Received_Damage_Current[lopa]] = udg_Player_Received_Damage_Current[lopa];
				pmaxreceiveddamage[Player(lopa)] = Player(lopa);
			}
			time[(10000. - TimerGetRemaining(udg_TimerShowAndFlushAllPlayerDmg))] = (10000. - TimerGetRemaining(udg_TimerShowAndFlushAllPlayerDmg));
			PauseTimer(udg_TimerShowAndFlushAllPlayerDmg);
			lopa[lopa + 1] = lopa + 1;
		}
		if ((IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS))) {
			p[GetLocalPlayer()] = GetLocalPlayer();
			DisplayTimedTextToPlayer(p, .0, .0, 20., " ");
			DisplayTimedTextToPlayer(p, .0, .0, 20., "Затраченное Время: |cff00CD00" + (SubString(R2S(time), 0, StringLength(R2S(time)) - 2)) + "|r секунд");
			DisplayTimedTextToPlayer(p, .0, .0, 20., "Всего урона нанесено: |cff99ccff" + I2S(R2I(alltakendamage)) + "|r урона");
			DisplayTimedTextToPlayer(p, .0, .0, 20., "Всего урона получено: |cff99ccff" + I2S(R2I(allreceiveddamage)) + "|r урона");
			percent[((maxtakendamage / alltakendamage) * 'd')] = ((maxtakendamage / alltakendamage) * 'd');
			DisplayTimedTextToPlayer(p, .0, .0, 20., "Больше всего нанесено урона: " + udg_ColorString[GetPlayerId(pmaxtakedamage) + 1] + GetPlayerName(pmaxtakedamage) + "|r (|cff99ccff" + I2S(R2I(maxtakendamage)) + "|r урона - |cff99ccff" + (SubString(R2S(percent), 0, StringLength(R2S(percent)) - 2)) + "%|r )");
			percent[((maxreciveddamage / allreceiveddamage) * 'd')] = ((maxreciveddamage / allreceiveddamage) * 'd');
			DisplayTimedTextToPlayer(p, .0, .0, 20., "Больше всего урона получено: " + udg_ColorString[GetPlayerId(pmaxreceiveddamage) + 1] + GetPlayerName(pmaxreceiveddamage) + "|r (|cff99ccff" + I2S(R2I(maxreciveddamage)) + "|r урона - |cff99ccff" + (SubString(R2S(percent), 0, StringLength(R2S(percent)) - 2)) + "%|r )");
			if (p != pmaxtakedamage) {
				percent[((udg_Player_Taken_Damage_Current[GetPlayerId(p)] / alltakendamage) * 'd')] = ((udg_Player_Taken_Damage_Current[GetPlayerId(p)] / alltakendamage) * 'd');
				DisplayTimedTextToPlayer(p, .0, .0, 20., "Ваш нанесенный урон: ( |cff99ccff" + I2S(R2I(udg_Player_Taken_Damage_Current[GetPlayerId(p)])) + "|r урона - |cff99ccff" + (SubString(R2S(percent), 0, StringLength(R2S(percent)) - 2)) + "%|r )");
			}
			if (p != pmaxreceiveddamage) {
				percent[((udg_Player_Received_Damage_Current[GetPlayerId(p)] / allreceiveddamage) * 'd')] = ((udg_Player_Received_Damage_Current[GetPlayerId(p)] / allreceiveddamage) * 'd');
				DisplayTimedTextToPlayer(p, .0, .0, 20., "Ваш полученный урон: ( |cff99ccff" + I2S(R2I(udg_Player_Received_Damage_Current[GetPlayerId(p)])) + "|r урона - |cff99ccff" + (SubString(R2S(percent), 0, StringLength(R2S(percent)) - 2)) + "%|r )");
			}
			p[null] = null;
		}
		lopa[0] = 0;
	}
	while (true) {
		if (lopa > 8) break;
		udg_Player_Taken_Damage_Current[.0] = .0;
		udg_Player_Received_Damage_Current[.0] = .0;
		lopa[lopa + 1] = lopa + 1;
	}
}
void MoveDammiReferencePanel_Timer() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit hero = LoadUnitHandle(udg_hash, h, 1);
	unit dammi = LoadUnitHandle(udg_hash, h, 2);
	float x = GetUnitX(hero);
	float y = GetUnitY(hero);
	bool alife = LoadBoolean(udg_hash, h, 3);
	if ((GetUnitState(hero, UNIT_STATE_LIFE) < .405 && alife)) {
		ShowUnit(dammi, false);
		alife[false] = false;
		SaveBoolean(udg_hash, h, 3, alife);
	else
		if ((GetUnitState(hero, UNIT_STATE_LIFE) > .405 && alife == false)) {
			ShowUnit(dammi, true);
			alife[true] = true;
			SaveBoolean(udg_hash, h, 3, alife);
		}
		SetUnitX(dammi, x);
		SetUnitY(dammi, y);
	}
	t[null] = null;
	hero[null] = null;
	dammi[null] = null;
}
void MoveDammiReferencePanel(unit hero) {
	timer t = CreateTimer();
	int h = GetHandleId(t);
	unit dammi = CreateUnit(GetOwningPlayer(hero), 'h00C', GetUnitX(hero), GetUnitY(hero), .0);
	SaveUnitHandle(udg_hash, h, 1, hero);
	SaveUnitHandle(udg_hash, h, 2, dammi);
	SaveBoolean(udg_hash, h, 3, true);
	IssueImmediateOrderById(dammi, $D0057);
	TimerStart(t, 1., true, MoveDammiReferencePanel_Timer);
	t[null] = null;
	dammi[null] = null;
}
bool IsUnitInvulnerable(unit Unit) {
	float Health_Current = GetWidgetLife(Unit);
	float Mana_Current = GetUnitState(Unit, UNIT_STATE_MANA);
	bool Check_Health;
	SetWidgetLife(Unit, Health_Current + .001);
	if (Health_Current != GetWidgetLife(Unit)) {
		UnitDamageTarget(Unit, Unit, .001, false, true, null, null, null);
		Check_Health[(GetWidgetLife(Unit) == Health_Current + .001)] = (GetWidgetLife(Unit) == Health_Current + .001);
	else
		UnitDamageTarget(Unit, Unit, .001, false, true, null, null, null);
		Check_Health[(GetWidgetLife(Unit) == Health_Current)] = (GetWidgetLife(Unit) == Health_Current);
		SetWidgetLife(Unit, Health_Current);
	}
	if (Check_Health) {
		return !(GetUnitState(Unit, UNIT_STATE_MANA) != Mana_Current);
	}
	return Check_Health;
}
void GroupToGroupUnitMoving() {
	GroupAddUnit(udg_Temp_Group[1], GetEnumUnit());
}
void GroupToGroup(group gold, group gnew) {
	udg_Temp_Group[gnew] = gnew;
	ForGroup(gold, GroupToGroupUnitMoving);
	udg_Temp_Group[null] = null;
}
void CreateEnergyWall(int start, int end) {
	int lopa = start;
	int lopb;
	while (true) {
		if (lopa > end) break;
		udg_EnergyWallUnit[CreateUnit(Player($F), 'h00I', udg_EnergyWallX[lopa], udg_EnergyWallY[lopa], udg_EnergyWallAngle[lopa])] = CreateUnit(Player($F), 'h00I', udg_EnergyWallX[lopa], udg_EnergyWallY[lopa], udg_EnergyWallAngle[lopa]);
		lopb[1] = 1;
		while (true) {
			if (lopb > 7) break;
			udg_EnergyWallBlock[CreateDestructable('YTpc', udg_EnergyWallX[lopa] - ((4 - lopb) * 128. - 64.) * Cos((udg_EnergyWallAngle[lopa] - 90.) * bj_DEGTORAD), udg_EnergyWallY[lopa] - ((4 - lopb) * 128. - 64.) * Sin((udg_EnergyWallAngle[lopa] - 90.) * bj_DEGTORAD), udg_EnergyWallAngle[lopa], 1., 0)] = CreateDestructable('YTpc', udg_EnergyWallX[lopa] - ((4 - lopb) * 128. - 64.) * Cos((udg_EnergyWallAngle[lopa] - 90.) * bj_DEGTORAD), udg_EnergyWallY[lopa] - ((4 - lopb) * 128. - 64.) * Sin((udg_EnergyWallAngle[lopa] - 90.) * bj_DEGTORAD), udg_EnergyWallAngle[lopa], 1., 0);
			lopb[lopb + 1] = lopb + 1;
		}
		lopa[lopa + 1] = lopa + 1;
	}
}
float ConvertMagicAndChaosDamageInClear(unit target, float magicdamage, float chaosdamage) {
	float itog = magicdamage;
	if (IsUnitType(target, UNIT_TYPE_MAGIC_IMMUNE) == false) {
		if (IsUnitType(target, UNIT_TYPE_HERO)) {
			magicdamage[magicdamage * .75] = magicdamage * .75;
		}
		if (GetUnitAbilityLevel(target, 'A0HD') > 0) {
			magicdamage[magicdamage * 1.5] = magicdamage * 1.5;
		}
		if (GetUnitAbilityLevel(target, 'A0CZ') > 0) {
			magicdamage[magicdamage * .75] = magicdamage * .75;
		}
		if (GetUnitAbilityLevel(target, 'A017') > 0) {
			magicdamage[magicdamage * .85] = magicdamage * .85;
		}
		if (GetUnitAbilityLevel(target, 'A01C') > 0) {
			magicdamage[magicdamage * .7] = magicdamage * .7;
		}
		if (GetUnitAbilityLevel(target, 'A09T') > 0) {
			magicdamage[magicdamage * .7] = magicdamage * .7;
		}
	else
		magicdamage[.0] = .0;
	}
	itog[magicdamage + chaosdamage] = magicdamage + chaosdamage;
	return itog;
}
void RemoveUnitAttack_End() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit target = LoadUnitHandle(udg_hash, h, 1);
	effect ef = LoadEffectHandle(udg_hash, h, 2);
	UnitRemoveAbility(target, 'A0PL');
	DestroyEffect(ef);
	DestroyTimer(t);
	FlushChildHashtable(udg_hash, h);
	t[null] = null;
	ef[null] = null;
	target[null] = null;
}
void RemoveUnitAttack(unit target, float time) {
	timer t;
	int h;
	effect ef;
	float newtime;
	if (LoadTimerHandle(udg_hash, GetHandleId(target), $A4) == null) {
		t[CreateTimer()] = CreateTimer();
		h[GetHandleId(t)] = GetHandleId(t);
		ef[AddSpecialEffectTarget("Effects\\NoAttack.mdx", target, "overhead")] = AddSpecialEffectTarget("Effects\\NoAttack.mdx", target, "overhead");
		UnitAddAbility(target, 'A0PL');
		SaveUnitHandle(udg_hash, h, 1, target);
		SaveEffectHandle(udg_hash, h, 2, ef);
		SaveTimerHandle(udg_hash, GetHandleId(target), $A4, t);
		ef[null] = null;
		newtime[time] = time;
	else
		t[LoadTimerHandle(udg_hash, GetHandleId(target), $A4)] = LoadTimerHandle(udg_hash, GetHandleId(target), $A4);
		if (time > TimerGetRemaining(t)) {
			newtime[time] = time;
		else
			newtime[TimerGetRemaining(t)] = TimerGetRemaining(t);
		}
	}
	TimerStart(t, newtime, false, RemoveUnitAttack_End);
	t[null] = null;
}
float HaveAnyTimeTalisman() {
	float respawn = .0;
	group grp = CreateGroup();
	unit Picked;
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, grp);
	while (true) {
		Picked[FirstOfGroup(grp)] = FirstOfGroup(grp);
		if (Picked == null) break;
		if (IsUnitType(Picked, UNIT_TYPE_HERO) && GetPlayerId(GetOwningPlayer(Picked)) <= 8) {
			if (CountItemOfTypeOnUnit(Picked, 'I02R') > 0 && (.1 > respawn)) {
				respawn[.1] = .1;
			}
			if (CountItemOfTypeOnUnit(Picked, 'I02S') > 0 && (.15 > respawn)) {
				respawn[.15] = .15;
			}
			if (CountItemOfTypeOnUnit(Picked, 'I02W') > 0 && (.2 > respawn)) {
				respawn[.2] = .2;
			}
			if (CountItemOfTypeOnUnit(Picked, 'I02X') > 0 && (.25 > respawn)) {
				respawn[.25] = .25;
			}
			if (CountItemOfTypeOnUnit(Picked, 'I02Y') > 0 && (.3 > respawn)) {
				respawn[.3] = .3;
			}
		}
		GroupRemoveUnit(grp, Picked);
	}
	Picked[null] = null;
	GroupClear(grp);
	DestroyGroup(grp);
	grp[null] = null;
	return respawn;
}
void Trig_Players_Start_Script_Func034A() {
	SetPlayerFlagBJ(PLAYER_STATE_GIVES_BOUNTY, true, GetEnumPlayer());
	SetPlayerColorBJ(GetEnumPlayer(), PLAYER_COLOR_BROWN, true);
}
void Trig_Players_Start_Script_Actions() {
	AbilityPreload('A0J2', 30);
	AbilityPreload('A0J4', 25);
	udg_CountGuardsExorcist[8] = 8;
	udg_ColorString["|cffff0000"] = "|cffff0000";
	udg_ColorString["|cff0000ff"] = "|cff0000ff";
	udg_ColorString["|cff00f5ff"] = "|cff00f5ff";
	udg_ColorString["|cff551A8B"] = "|cff551A8B";
	udg_ColorString["|cffffff00"] = "|cffffff00";
	udg_ColorString["|cffEE9A00"] = "|cffEE9A00";
	udg_ColorString["|cff00CD00"] = "|cff00CD00";
	udg_ColorString["|cffFF69B4"] = "|cffFF69B4";
	udg_ColorString["|cffC0C0C0"] = "|cffC0C0C0";
	udg_ColorString["|cffB0E2FF"] = "|cffB0E2FF";
	udg_ColorString["|cff006400"] = "|cff006400";
	udg_ColorString["|cff8B4513"] = "|cff8B4513";
	udg_ColorString["|cffff0000"] = "|cffff0000";
	udg_ColorString["|cff0000ff"] = "|cff0000ff";
	udg_ColorString["|c00959697"] = "|c00959697";
	udg_ColorString["|cFFFFDC00"] = "|cFFFFDC00";
	udg_ColorString["|cFFDCDCDC"] = "|cFFDCDCDC";
	SetPlayerName(Player(9), "TRIGSTR_858");
	SetPlayerName(Player($A), "Армия Тьмы");
	SetPlayerName(Player($B), "Армия Тьмы");
	SetPlayerColorBJ(Player($F), PLAYER_COLOR_LIGHT_BLUE, false);
	ForceAddPlayer(udg_Players_Enemy_Group, Player(9));
	ForceAddPlayer(udg_Players_Enemy_Group, Player($A));
	ForceAddPlayer(udg_Players_Enemy_Group, Player($B));
	SetForceAllianceStateBJ(udg_Players_Enemy_Group, udg_Players_Enemy_Group, 3);
	SetForceAllianceStateBJ(udg_Players_Enemy_Group, bj_FORCE_PLAYER[$C], 3);
	SetForceAllianceStateBJ(bj_FORCE_PLAYER[$C], udg_Players_Enemy_Group, 3);
	SetForceAllianceStateBJ(udg_Players_Enemy_Group, bj_FORCE_PLAYER[$F], 0);
	SetForceAllianceStateBJ(bj_FORCE_PLAYER[$F], udg_Players_Enemy_Group, 0);
	ForForce(udg_Players_Enemy_Group, Trig_Players_Start_Script_Func034A);
}
void InitTrig_Players_Start_Script() {
	gg_trg_Players_Start_Script[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventSingle(gg_trg_Players_Start_Script, 2.);
	TriggerAddAction(gg_trg_Players_Start_Script, Trig_Players_Start_Script_Actions);
}
void Trig_InitMap_Func009A() {
	CreateFogModifierRectBJ(true, GetEnumPlayer(), FOG_OF_WAR_VISIBLE, gg_rct_PlayableAreaVisionDeBag);
	FogModifierStart(bj_lastCreatedFogModifier);
	DestroyFogModifier(bj_lastCreatedFogModifier);
	CreateFogModifierRectBJ(true, GetEnumPlayer(), FOG_OF_WAR_MASKED, gg_rct_MinusVision1);
	FogModifierStart(bj_lastCreatedFogModifier);
	CameraSetupApplyForPlayer(true, gg_cam_Kamera_na_taverni, GetEnumPlayer(), 0);
	CinematicFadeBJ(1, .0, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0);
}
void Trig_InitMap_Actions() {
	SetTimeOfDay(5.45);
	SetMapFlag(MAP_RESOURCE_TRADING_ALLIES_ONLY, true);
	ShowInterfaceForceOff(bj_FORCE_ALL_PLAYERS, .0);
	StartTimerBJ(udg_InitMapTimer, false, 10.);
	DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 12., "|cff99ccffДобро пожаловать на альфа версию карты|r |Cfffed312Последние Стражи|r (|Cfffed312Last Guards|r)|cff99ccff!|r");
	DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 12., "|cff99ccffЦель игры: выстоять против 10 разнообразнейших волн врагов, защищая стражей-заклинателей. По ходу прохождения вы также поучавствуете во множестве различных игровых событий, сражений, битв с боссами и многое другое...|r");
	DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 12., "|cff99ccffА теперь - выберете своего героя, и отправляйтесь в бой!|r");
	ForForce(bj_FORCE_ALL_PLAYERS, Trig_InitMap_Func009A);
}
void InitTrig_InitMap() {
	gg_trg_InitMap[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventSingle(gg_trg_InitMap, .0);
	TriggerAddAction(gg_trg_InitMap, Trig_InitMap_Actions);
}
void Trig_InitMapStage2_Func002A() {
	CameraSetupApplyForPlayer(true, gg_cam_Kamera_na_taverni, GetEnumPlayer(), 0);
	CinematicFadeBJ(0, 5., "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0);
}
void Trig_InitMapStage2_Actions() {
	ShowInterfaceForceOn(bj_FORCE_ALL_PLAYERS, 5.);
	ForForce(bj_FORCE_ALL_PLAYERS, Trig_InitMapStage2_Func002A);
}
void InitTrig_InitMapStage2() {
	gg_trg_InitMapStage2[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerExpireEvent(gg_trg_InitMapStage2, udg_InitMapTimer);
	TriggerAddAction(gg_trg_InitMapStage2, Trig_InitMapStage2_Actions);
}
void Trig_System_Spells_Load_Periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	int i = LoadInteger(udg_hash, h, 0);
	if (LoadInteger(udg_hash, h, i) != 0) {
		AbilityPreload(LoadInteger(udg_hash, h, i), LoadInteger(udg_hash, h, i + 1));
		i[i + 2] = i + 2;
		SaveInteger(udg_hash, h, 0, i);
	else
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
}
void Trig_System_Spells_Load_Actions() {
	timer t = CreateTimer();
	int h = GetHandleId(t);
	int i = 1;
	SaveInteger(udg_hash, h, 0, i);
	SaveInteger(udg_hash, h, 1, 'A07F');
	SaveInteger(udg_hash, h, 2, $A);
	SaveInteger(udg_hash, h, 3, 'A07G');
	SaveInteger(udg_hash, h, 4, $A);
	SaveInteger(udg_hash, h, 5, 'A07I');
	SaveInteger(udg_hash, h, 6, $A);
	SaveInteger(udg_hash, h, 7, 'A09D');
	SaveInteger(udg_hash, h, 8, $A);
	SaveInteger(udg_hash, h, 9, 'A0E6');
	SaveInteger(udg_hash, h, $A, $A);
	SaveInteger(udg_hash, h, $B, 'A0E7');
	SaveInteger(udg_hash, h, $C, $A);
	SaveInteger(udg_hash, h, $D, 'A0B3');
	SaveInteger(udg_hash, h, $E, $A);
	SaveInteger(udg_hash, h, $F, 'A0B4');
	SaveInteger(udg_hash, h, 16, $A);
	SaveInteger(udg_hash, h, 17, 'A0B5');
	SaveInteger(udg_hash, h, 18, $A);
	SaveInteger(udg_hash, h, 19, 'A0E9');
	SaveInteger(udg_hash, h, 20, $A);
	SaveInteger(udg_hash, h, 21, 'A0EA');
	SaveInteger(udg_hash, h, 22, $A);
	SaveInteger(udg_hash, h, 23, 'A0EB');
	SaveInteger(udg_hash, h, 24, $A);
	SaveInteger(udg_hash, h, 25, 'A0AG');
	SaveInteger(udg_hash, h, 26, $A);
	SaveInteger(udg_hash, h, 27, 'A0AH');
	SaveInteger(udg_hash, h, 28, $A);
	SaveInteger(udg_hash, h, 29, 'A087');
	SaveInteger(udg_hash, h, 30, $A);
	SaveInteger(udg_hash, h, 31, 'A0AS');
	SaveInteger(udg_hash, h, 32, $A);
	SaveInteger(udg_hash, h, 33, 'A0AT');
	SaveInteger(udg_hash, h, 34, $A);
	SaveInteger(udg_hash, h, 35, 'A0D8');
	SaveInteger(udg_hash, h, 36, $A);
	SaveInteger(udg_hash, h, 37, 'A07A');
	SaveInteger(udg_hash, h, 38, 7);
	SaveInteger(udg_hash, h, 39, 'A07E');
	SaveInteger(udg_hash, h, 40, 7);
	SaveInteger(udg_hash, h, 41, 'A0H6');
	SaveInteger(udg_hash, h, 42, $A);
	SaveInteger(udg_hash, h, 43, 'A0H5');
	SaveInteger(udg_hash, h, 44, $A);
	SaveInteger(udg_hash, h, 45, 'A0H4');
	SaveInteger(udg_hash, h, 46, $A);
	TimerStart(t, .2, true, Trig_System_Spells_Load_Periodic_Actions);
}
void InitTrig_System_Spells_Load() {
	gg_trg_System_Spells_Load[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEvent(gg_trg_System_Spells_Load, 2., false);
	TriggerAddAction(gg_trg_System_Spells_Load, Trig_System_Spells_Load_Actions);
}
void Trig_Items_Preload_Periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	int i = LoadInteger(udg_hash, h, 0);
	if (LoadInteger(udg_hash, h, i) != 0) {
		ItemPreload(LoadInteger(udg_hash, h, i));
		i[i + 1] = i + 1;
		SaveInteger(udg_hash, h, 0, i);
	else
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
}
void Trig_Items_Preload_Actions() {
	timer t = CreateTimer();
	int h = GetHandleId(t);
	int i = 1;
	SaveInteger(udg_hash, h, 0, i);
	SaveInteger(udg_hash, h, 1, 'I00I');
	SaveInteger(udg_hash, h, 2, 'I01G');
	SaveInteger(udg_hash, h, 3, 'I03W');
	SaveInteger(udg_hash, h, 4, 'I036');
	SaveInteger(udg_hash, h, 5, 'I05A');
	SaveInteger(udg_hash, h, 6, 'I04Z');
	SaveInteger(udg_hash, h, 7, 'I01U');
	SaveInteger(udg_hash, h, 8, 'I03U');
	SaveInteger(udg_hash, h, 9, 'I02J');
	SaveInteger(udg_hash, h, $A, 'I01B');
	SaveInteger(udg_hash, h, $B, 'I01X');
	SaveInteger(udg_hash, h, $C, 'I052');
	SaveInteger(udg_hash, h, $D, 'I053');
	SaveInteger(udg_hash, h, $E, 'I051');
	SaveInteger(udg_hash, h, $F, 'I03Q');
	SaveInteger(udg_hash, h, 16, 'I048');
	SaveInteger(udg_hash, h, 17, 'I01P');
	SaveInteger(udg_hash, h, 18, 'I00G');
	SaveInteger(udg_hash, h, 19, 'I01Q');
	SaveInteger(udg_hash, h, 20, 'I01V');
	SaveInteger(udg_hash, h, 21, 'I02N');
	SaveInteger(udg_hash, h, 22, 'I03N');
	SaveInteger(udg_hash, h, 23, 'I042');
	SaveInteger(udg_hash, h, 24, 'I03S');
	SaveInteger(udg_hash, h, 25, 'I02U');
	SaveInteger(udg_hash, h, 26, 'I00C');
	SaveInteger(udg_hash, h, 27, 'I00A');
	SaveInteger(udg_hash, h, 28, 'I04V');
	SaveInteger(udg_hash, h, 29, 'I044');
	SaveInteger(udg_hash, h, 30, 'I00J');
	SaveInteger(udg_hash, h, 31, 'I03G');
	SaveInteger(udg_hash, h, 32, 'I04L');
	SaveInteger(udg_hash, h, 33, 'I02I');
	SaveInteger(udg_hash, h, 34, 'I02T');
	SaveInteger(udg_hash, h, 35, 'I04U');
	SaveInteger(udg_hash, h, 36, 'I03K');
	SaveInteger(udg_hash, h, 37, 'I03L');
	SaveInteger(udg_hash, h, 38, 'I03M');
	SaveInteger(udg_hash, h, 39, 'I04X');
	SaveInteger(udg_hash, h, 40, 'I055');
	SaveInteger(udg_hash, h, 41, 'I056');
	SaveInteger(udg_hash, h, 42, 'I057');
	SaveInteger(udg_hash, h, 43, 'I058');
	SaveInteger(udg_hash, h, 44, 'I02E');
	SaveInteger(udg_hash, h, 45, 'I02F');
	SaveInteger(udg_hash, h, 46, 'I01S');
	SaveInteger(udg_hash, h, 47, 'I03Y');
	SaveInteger(udg_hash, h, 48, 'I02G');
	SaveInteger(udg_hash, h, 49, 'I00S');
	SaveInteger(udg_hash, h, 50, 'I00T');
	SaveInteger(udg_hash, h, 51, 'I00V');
	SaveInteger(udg_hash, h, 52, 'I00X');
	SaveInteger(udg_hash, h, 53, 'I012');
	SaveInteger(udg_hash, h, 54, 'I01W');
	TimerStart(t, .05, true, Trig_Items_Preload_Periodic_Actions);
}
void InitTrig_Items_Preload() {
	gg_trg_Items_Preload[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEvent(gg_trg_Items_Preload, 17., false);
	TriggerAddAction(gg_trg_Items_Preload, Trig_Items_Preload_Actions);
}
bool Trig_Igrok_Massiv_Save_Func005Func001C() {
	return (GetPlayerSlotState(Player(-1 + (bj_forLoopAIndex))) == PLAYER_SLOT_STATE_PLAYING) && (GetPlayerController(Player(-1 + (bj_forLoopAIndex))) != MAP_CONTROL_COMPUTER);
}
void Trig_Igrok_Massiv_Save_Func006002() {
	SetPlayerStateBJ(GetEnumPlayer(), PLAYER_STATE_RESOURCE_FOOD_CAP, 1);
}
bool Trig_Igrok_Massiv_Save_Func007C() {
	return (CountPlayersInForceBJ(udg_IGRAET) <= 0);
}
void Trig_Igrok_Massiv_Save_Actions() {
	RemoveAllGuardPositions(Player(9));
	RemoveAllGuardPositions(Player($A));
	RemoveAllGuardPositions(Player($B));
	bj_forLoopAIndex[1] = 1;
	bj_forLoopAIndexEnd[9] = 9;
	while (true) {
		if (bj_forLoopAIndex > bj_forLoopAIndexEnd) break;
		if ((Trig_Igrok_Massiv_Save_Func005Func001C())) {
			udg_Igraet_Igrok[true] = true;
			ForceAddPlayer(udg_IGRAET, Player(-1 + (bj_forLoopAIndex)));
		else
			udg_Igraet_Igrok[false] = false;
		}
		bj_forLoopAIndex[bj_forLoopAIndex + 1] = bj_forLoopAIndex + 1;
	}
	ForForce(udg_IGRAET, Trig_Igrok_Massiv_Save_Func006002);
	if ((Trig_Igrok_Massiv_Save_Func007C())) {
		DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "Игра одному пока что запрещена!!!");
		CustomVictoryBJ(ForcePickRandomPlayer(udg_IGRAET), true, false);
	}
}
void InitTrig_Igrok_Massiv_Save() {
	gg_trg_Igrok_Massiv_Save[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventSingle(gg_trg_Igrok_Massiv_Save, .0);
	TriggerAddAction(gg_trg_Igrok_Massiv_Save, Trig_Igrok_Massiv_Save_Actions);
}
bool Trig_Load_Vsiakoe_Func004Func001Func003C() {
	return (GetUnitTypeId(GetEnumUnit()) == 'e002') || (GetUnitTypeId(GetEnumUnit()) == 'h01K') || (GetUnitTypeId(GetEnumUnit()) == 'n00Y') || (GetUnitTypeId(GetEnumUnit()) == 'o003');
}
bool Trig_Load_Vsiakoe_Func004Func001C() {
	return (Trig_Load_Vsiakoe_Func004Func001Func003C());
}
void Trig_Load_Vsiakoe_Func004A() {
	if ((Trig_Load_Vsiakoe_Func004Func001C())) {
		UnitAddType(GetEnumUnit(), UNIT_TYPE_PEON);
		GroupAddUnit(udg_PortalCastersMagi, GetEnumUnit());
	}
}
void Trig_Load_Vsiakoe_Func007A() {
	SetPlayerStateBJ(GetEnumPlayer(), PLAYER_STATE_RESOURCE_GOLD, 500);
	SetPlayerStateBJ(GetEnumPlayer(), PLAYER_STATE_RESOURCE_LUMBER, 8);
	SetPlayerAbilityAvailableBJ(false, 'A04F', GetEnumPlayer());
	SetPlayerAbilityAvailableBJ(false, 'A0EF', GetEnumPlayer());
}
void Trig_Load_Vsiakoe_Actions() {
	CreateNUnitsAtLoc(1, 'h00U', Player($F), GetRectCenter(bj_mapInitialPlayableArea), bj_UNIT_FACING);
	udg_preloader[bj_lastCreatedUnit] = bj_lastCreatedUnit;
	ForGroupBJ(GetUnitsInRectAll(gg_rct_cast_magi), Trig_Load_Vsiakoe_Func004A);
	CreateQuestBJ(0, "Авторы", "Создатели Карты (|Cfffed312Последние Стражи|r/|Cfffed312Last Guards|r)|n|cff99ccfflluo_OHEP (Derarius/Sladkoegka)|nCosonic5|r", "CommandButton\\Map_Autor's.blp");
	CreateQuestBJ(2, "Игровые Команды", "TRIGSTR_5336", "CommandButton\\Game_Commands.blp");
	ForForce(bj_FORCE_ALL_PLAYERS, Trig_Load_Vsiakoe_Func007A);
}
void InitTrig_Load_Vsiakoe() {
	gg_trg_Load_Vsiakoe[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventSingle(gg_trg_Load_Vsiakoe, 2.);
	TriggerAddAction(gg_trg_Load_Vsiakoe, Trig_Load_Vsiakoe_Actions);
}
bool Trig_Igrok_Massiv_Liver_Func004Func001C() {
	return (IsUnitType(GetEnumUnit(), UNIT_TYPE_HERO)) != null;
}
void Trig_Igrok_Massiv_Liver_Func004A() {
	if ((Trig_Igrok_Massiv_Liver_Func004Func001C())) {
		bj_forLoopAIndex[1] = 1;
		bj_forLoopAIndexEnd[6] = 6;
		while (true) {
			if (bj_forLoopAIndex > bj_forLoopAIndexEnd) break;
			RemoveItem(UnitItemInSlotBJ(GetEnumUnit(), bj_forLoopAIndex));
			bj_forLoopAIndex[bj_forLoopAIndex + 1] = bj_forLoopAIndex + 1;
		}
	}
	KillUnit(GetEnumUnit());
	RemoveUnit(GetEnumUnit());
}
bool Trig_Igrok_Massiv_Liver_Func012Func001C() {
	return (udg_Is_Player_Fast_Wave_Start[(1 + GetPlayerId(GetTriggerPlayer()))]);
}
bool Trig_Igrok_Massiv_Liver_Func012Func002C() {
	return (udg_Count_Players_Fast_Wave_Start >= CountPlayersInForceBJ(udg_IGRAET));
}
bool Trig_Igrok_Massiv_Liver_Func012C() {
	return (udg_Is_Fast_Wave_Start_On_Off);
}
bool Trig_Igrok_Massiv_Liver_Func013Func001C() {
	return (GetRandomInt(1, 2) == 1);
}
bool Trig_Igrok_Massiv_Liver_Func013Func002C() {
	return (GetRandomInt(1, 2) == 1);
}
bool Trig_Igrok_Massiv_Liver_Func013C() {
	return (GetRandomInt(1, 2) == 1);
}
void Trig_Igrok_Massiv_Liver_Actions() {
	udg_Igraet_Igrok[false] = false;
	ForceRemovePlayer(udg_IGRAET, GetTriggerPlayer());
	ForGroupBJ(GetUnitsOfPlayerAll(GetTriggerPlayer()), Trig_Igrok_Massiv_Liver_Func004A);
	udg_herounit[null] = null;
	DestroyEffect(udg_Rune_On_Base_Effect[(CountPlayersInForceBJ(udg_IGRAET) + 1)]);
	RemoveUnit(udg_Rune_On_Base_Dummy[(CountPlayersInForceBJ(udg_IGRAET) + 1)]);
	udg_Rune_On_Base_Dummy[null] = null;
	udg_ColorString["|cFF969696"] = "|cFF969696";
	MultiboardSetItemValueBJ(udg_MultiBoard, 2, udg_PlayerNumberInMB[(1 + GetPlayerId(GetTriggerPlayer()))], ("|cFF969696" + (GetPlayerName(GetTriggerPlayer()) + "|r")));
	if ((Trig_Igrok_Massiv_Liver_Func012C())) {
		if ((Trig_Igrok_Massiv_Liver_Func012Func001C())) {
			udg_Count_Players_Fast_Wave_Start[(udg_Count_Players_Fast_Wave_Start - 1)] = (udg_Count_Players_Fast_Wave_Start - 1);
			udg_Is_Player_Fast_Wave_Start[false] = false;
		}
		if ((Trig_Igrok_Massiv_Liver_Func012Func002C())) {
			StartTimerBJ(udg_Timer_Nomera_Volni, false, 1.);
		}
	}
	if ((Trig_Igrok_Massiv_Liver_Func013C())) {
		if ((Trig_Igrok_Massiv_Liver_Func013Func002C())) {
			DisplayTextToForce(bj_FORCE_ALL_PLAYERS, (udg_ColorString[(1 + GetPlayerId(GetTriggerPlayer()))] + (GetPlayerName(GetTriggerPlayer()) + "|r по непонятным причинам решил ливнуть!")));
		else
			DisplayTextToForce(bj_FORCE_ALL_PLAYERS, (udg_ColorString[(1 + GetPlayerId(GetTriggerPlayer()))] + (GetPlayerName(GetTriggerPlayer()) + "|r вышел из игры! Ну почему всегда найдется тот, кто запорет всю игру?!")));
		}
	else
		if ((Trig_Igrok_Massiv_Liver_Func013Func001C())) {
			DisplayTextToForce(bj_FORCE_ALL_PLAYERS, (udg_ColorString[(1 + GetPlayerId(GetTriggerPlayer()))] + (GetPlayerName(GetTriggerPlayer()) + "|r сбежал с поля боя...Чтож‚ придется подолжать без него!")));
		else
			DisplayTextToForce(bj_FORCE_ALL_PLAYERS, (udg_ColorString[(1 + GetPlayerId(GetTriggerPlayer()))] + (GetPlayerName(GetTriggerPlayer()) + "|r специально (а может случайно?) покинул игру!")));
		}
	}
}
void InitTrig_Igrok_Massiv_Liver() {
	gg_trg_Igrok_Massiv_Liver[CreateTrigger()] = CreateTrigger();
	TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver, Player(0));
	TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver, Player(1));
	TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver, Player(2));
	TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver, Player(3));
	TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver, Player(4));
	TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver, Player(5));
	TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver, Player(6));
	TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver, Player(7));
	TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver, Player(8));
	TriggerAddAction(gg_trg_Igrok_Massiv_Liver, Trig_Igrok_Massiv_Liver_Actions);
}
void Trig_Messager_Actions() {
	ConditionalTriggerExecute(gg_trg_Start_game);
	CreateNUnitsAtLoc(1, 'h009', Player($B), GetRectCenter(gg_rct_Portal_Attack_Dummy_Left), bj_UNIT_FACING);
	udg_Dammy_Portal[bj_lastCreatedUnit] = bj_lastCreatedUnit;
	SetUnitFlyHeight(udg_Dammy_Portal[1], 150., 1200.);
	CreateNUnitsAtLoc(1, 'h009', Player($B), GetRectCenter(gg_rct_Portal_Attack_Dummy_Right), bj_UNIT_FACING);
	udg_Dammy_Portal[bj_lastCreatedUnit] = bj_lastCreatedUnit;
	SetUnitFlyHeight(udg_Dammy_Portal[2], 150., 1200.);
	CreateNUnitsAtLoc(1, 'h009', Player($B), GetRectCenter(gg_rct_Portal_Attack_Dummy_Top), bj_UNIT_FACING);
	udg_Dammy_Portal[bj_lastCreatedUnit] = bj_lastCreatedUnit;
	SetUnitFlyHeight(udg_Dammy_Portal[3], 150., 1200.);
	udg_Rune_On_Base_Dummy_X[1220.] = 1220.;
	udg_Rune_On_Base_Dummy_Y[-4740.] = -4740.;
	udg_Rune_On_Base_Effect_String["Doodads\\Cinematic\\GlowingRunes\\GlowingRunes0.mdl"] = "Doodads\\Cinematic\\GlowingRunes\\GlowingRunes0.mdl";
	udg_Rune_On_Base_Dummy_X[1745.] = 1745.;
	udg_Rune_On_Base_Dummy_Y[-6380.] = -6380.;
	udg_Rune_On_Base_Effect_String["Doodads\\Cinematic\\GlowingRunes\\GlowingRunes1.mdl"] = "Doodads\\Cinematic\\GlowingRunes\\GlowingRunes1.mdl";
	udg_Rune_On_Base_Dummy_X[1100.] = 1100.;
	udg_Rune_On_Base_Dummy_Y[-5000.] = -5000.;
	udg_Rune_On_Base_Effect_String["Doodads\\Cinematic\\GlowingRunes\\GlowingRunes2.mdl"] = "Doodads\\Cinematic\\GlowingRunes\\GlowingRunes2.mdl";
	udg_Rune_On_Base_Dummy_X[1735.] = 1735.;
	udg_Rune_On_Base_Dummy_Y[-6160.] = -6160.;
	udg_Rune_On_Base_Effect_String["Doodads\\Cinematic\\GlowingRunes\\GlowingRunes3.mdl"] = "Doodads\\Cinematic\\GlowingRunes\\GlowingRunes3.mdl";
	udg_Rune_On_Base_Dummy_X[1400.] = 1400.;
	udg_Rune_On_Base_Dummy_Y[-4990.] = -4990.;
	udg_Rune_On_Base_Effect_String["Doodads\\Cinematic\\GlowingRunes\\GlowingRunes4.mdl"] = "Doodads\\Cinematic\\GlowingRunes\\GlowingRunes4.mdl";
	udg_Rune_On_Base_Dummy_X[1600.] = 1600.;
	udg_Rune_On_Base_Dummy_Y[-6310.] = -6310.;
	udg_Rune_On_Base_Effect_String["Doodads\\Cinematic\\GlowingRunes\\GlowingRunes5.mdl"] = "Doodads\\Cinematic\\GlowingRunes\\GlowingRunes5.mdl";
	udg_Rune_On_Base_Dummy_X[800.] = 800.;
	udg_Rune_On_Base_Dummy_Y[-6420.] = -6420.;
	udg_Rune_On_Base_Effect_String["Doodads\\Cinematic\\GlowingRunes\\GlowingRunes6.mdl"] = "Doodads\\Cinematic\\GlowingRunes\\GlowingRunes6.mdl";
	udg_Rune_On_Base_Dummy_X[800.] = 800.;
	udg_Rune_On_Base_Dummy_Y[-6200.] = -6200.;
	udg_Rune_On_Base_Effect_String["Doodads\\Cinematic\\GlowingRunes\\GlowingRunes7.mdl"] = "Doodads\\Cinematic\\GlowingRunes\\GlowingRunes7.mdl";
	udg_Rune_On_Base_Dummy_X[1000.] = 1000.;
	udg_Rune_On_Base_Dummy_Y[-6400.] = -6400.;
	udg_Rune_On_Base_Effect_String["Doodads\\Cinematic\\GlowingRunes\\GlowingRunes8.mdl"] = "Doodads\\Cinematic\\GlowingRunes\\GlowingRunes8.mdl";
	udg_Rune_Position_X[$58C] = $58C;
	udg_Rune_Position_Y[-$AF0] = -$AF0;
	udg_Rune_Position_X[$BE5] = $BE5;
	udg_Rune_Position_Y[-7523] = -7523;
	udg_Rune_Position_X[-390] = -390;
	udg_Rune_Position_Y[-8275] = -8275;
	udg_Arrow_Pointer_Guide_X[$4CE] = $4CE;
	udg_Arrow_Pointer_Guide_Y[-5065] = -5065;
	udg_Arrow_Pointer_Guide_Angle[$B4] = $B4;
	udg_Arrow_Pointer_Guide_X[$62C] = $62C;
	udg_Arrow_Pointer_Guide_Y[-6220] = -6220;
	udg_Arrow_Pointer_Guide_Angle[45] = 45;
	udg_Arrow_Pointer_Guide_X[$53A] = $53A;
	udg_Arrow_Pointer_Guide_Y[-5220] = -5220;
	udg_Arrow_Pointer_Guide_Angle[$B4] = $B4;
	udg_Arrow_Pointer_Guide_X[$65C] = $65C;
	udg_Arrow_Pointer_Guide_Y[-6130] = -6130;
	udg_Arrow_Pointer_Guide_Angle[45] = 45;
	udg_Arrow_Pointer_Guide_X[$461] = $461;
	udg_Arrow_Pointer_Guide_Y[-5223] = -5223;
	udg_Arrow_Pointer_Guide_Angle[$B4] = $B4;
	udg_Arrow_Pointer_Guide_X[$591] = $591;
	udg_Arrow_Pointer_Guide_Y[-6215] = -6215;
	udg_Arrow_Pointer_Guide_Angle[45] = 45;
	udg_Arrow_Pointer_Guide_X[822] = 822;
	udg_Arrow_Pointer_Guide_Y[-6227] = -6227;
	udg_Arrow_Pointer_Guide_Angle[315] = 315;
	udg_Arrow_Pointer_Guide_X[$40C] = $40C;
	udg_Arrow_Pointer_Guide_Y[-6216] = -6216;
	udg_Arrow_Pointer_Guide_Angle[315] = 315;
	udg_Arrow_Pointer_Guide_X[790] = 790;
	udg_Arrow_Pointer_Guide_Y[-6050] = -6050;
	udg_Arrow_Pointer_Guide_Angle[315] = 315;
	udg_Arrow_Pointer_Guide_Count[CountPlayersInForceBJ(udg_IGRAET)] = CountPlayersInForceBJ(udg_IGRAET);
	bj_forLoopAIndex[1] = 1;
	bj_forLoopAIndexEnd[CountPlayersInForceBJ(udg_IGRAET)] = CountPlayersInForceBJ(udg_IGRAET);
	while (true) {
		if (bj_forLoopAIndex > bj_forLoopAIndexEnd) break;
		CreateNUnitsAtLoc(1, 'h00U', Player($F), Location(I2R(udg_Arrow_Pointer_Guide_X[bj_forLoopAIndex]), I2R(udg_Arrow_Pointer_Guide_Y[bj_forLoopAIndex])), I2R(udg_Arrow_Pointer_Guide_Angle[bj_forLoopAIndex]));
		udg_Arrow_Pointer_Guide_Unit[bj_lastCreatedUnit] = bj_lastCreatedUnit;
		AddSpecialEffectTargetUnitBJ("origin", bj_lastCreatedUnit, "Effects\\Arrow - Chapter Browse - Rotated.mdx");
		udg_Arrow_Pointer_Guide_Effect[bj_lastCreatedEffect] = bj_lastCreatedEffect;
		bj_forLoopAIndex[bj_forLoopAIndex + 1] = bj_forLoopAIndex + 1;
	}
	AddSpecialEffectLocBJ(Location(I2R(udg_Rune_Position_X[1]), I2R(udg_Rune_Position_Y[1])), "Effects\\MistAura.mdx");
	AddSpecialEffectLocBJ(Location(I2R(udg_Rune_Position_X[2]), I2R(udg_Rune_Position_Y[2])), "Effects\\MistAura.mdx");
	AddSpecialEffectLocBJ(Location(I2R(udg_Rune_Position_X[3]), I2R(udg_Rune_Position_Y[3])), "Effects\\MistAura.mdx");
	AddSpecialEffectLocBJ(Location(I2R(udg_Rune_Position_X[1]), I2R(udg_Rune_Position_Y[1])), "Effects\\GreenRing.mdx");
	bj_forLoopAIndex[1] = 1;
	bj_forLoopAIndexEnd[CountPlayersInForceBJ(udg_IGRAET)] = CountPlayersInForceBJ(udg_IGRAET);
	while (true) {
		if (bj_forLoopAIndex > bj_forLoopAIndexEnd) break;
		CreateNUnitsAtLoc(1, 'h00E', Player($F), Location(udg_Rune_On_Base_Dummy_X[bj_forLoopAIndex], udg_Rune_On_Base_Dummy_Y[bj_forLoopAIndex]), bj_UNIT_FACING);
		AddSpecialEffectTargetUnitBJ("origin", bj_lastCreatedUnit, udg_Rune_On_Base_Effect_String[bj_forLoopAIndex]);
		SetUnitFlyHeight(bj_lastCreatedUnit, -50., .0);
		udg_Rune_On_Base_Effect[bj_lastCreatedEffect] = bj_lastCreatedEffect;
		udg_Rune_On_Base_Dummy[bj_lastCreatedUnit] = bj_lastCreatedUnit;
		bj_forLoopAIndex[bj_forLoopAIndex + 1] = bj_forLoopAIndex + 1;
	}
}
void InitTrig_Messager() {
	gg_trg_Messager[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventSingle(gg_trg_Messager, 8.);
	TriggerAddAction(gg_trg_Messager, Trig_Messager_Actions);
}
void Trig_Create_TExttags_about_Shops_Actions() {
	CreateTexttag("|cFF00C850Барахолка|r", .03, $FF, 2050., -5100., .0, .0, .0, 9999999.);
	CreateTexttag("|cFF00C850Экипировка|r", .03, $FF, 2050., -5250., .0, .0, .0, 99999999.);
	CreateTexttag("|cFFFF8C00Броня и Доспехи|r", .03, $FF, 2050., -5400., .0, .0, .0, 99999999.);
	CreateTexttag("|cFF9600FFВооружение|r", .03, $FF, 2050., -5660., .0, .0, .0, 99999999.);
	CreateTexttag("|cFF6464FAТайник Странника|r", .03, $FF, 2050., -5900., .0, .0, .0, 9999999.);
	CreateTexttag("|cFF6464FAМагические Артефакты|r", .03, $FF, 2050., -6130., .0, .0, .0, 999999.);
}
void InitTrig_Create_TExttags_about_Shops() {
	gg_trg_Create_TExttags_about_Shops[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventSingle(gg_trg_Create_TExttags_about_Shops, 9.);
	TriggerAddAction(gg_trg_Create_TExttags_about_Shops, Trig_Create_TExttags_about_Shops_Actions);
}
void Trig_InitHashtable_Actions() {
	udg_hash[InitHashtable()] = InitHashtable();
}
void InitTrig_InitHashtable() {
	gg_trg_InitHashtable[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_InitHashtable, Trig_InitHashtable_Actions);
}
void Trig_Save_Sounds_Actions() {
	udg_Game_Sound[CreateSoundFromLabel("Hint", false, false, false, $A, $A)] = CreateSoundFromLabel("Hint", false, false, false, $A, $A);
	udg_Game_Sound[CreateSoundFromLabel("GoodJob", false, false, false, $A, $A)] = CreateSoundFromLabel("GoodJob", false, false, false, $A, $A);
	udg_Game_Sound[CreateSoundFromLabel("Warning", false, false, false, $A, $A)] = CreateSoundFromLabel("Warning", false, false, false, $A, $A);
	udg_Game_Sound[CreateSoundFromLabel("ClanInvitation", false, false, false, $A, $A)] = CreateSoundFromLabel("ClanInvitation", false, false, false, $A, $A);
	udg_Game_Sound[CreateSoundFromLabel("NewTournament", false, false, false, $A, $A)] = CreateSoundFromLabel("NewTournament", false, false, false, $A, $A);
	udg_Game_Sound[CreateSoundFromLabel("ArrangedTeamInvitation", false, false, false, $A, $A)] = CreateSoundFromLabel("ArrangedTeamInvitation", false, false, false, $A, $A);
	udg_Game_Sound[CreateSoundFromLabel("GameFound", false, false, false, $A, $A)] = CreateSoundFromLabel("GameFound", false, false, false, $A, $A);
	udg_Game_Sound[gg_snd_HeroStep1] = gg_snd_HeroStep1;
	udg_Game_Sound[gg_snd_HeroStep2] = gg_snd_HeroStep2;
	udg_Game_Sound[gg_snd_HeroStep3] = gg_snd_HeroStep3;
	udg_Game_Sound[gg_snd_HeroStep4] = gg_snd_HeroStep4;
	udg_Game_Sound[gg_snd_KnightInventoryFull1] = gg_snd_KnightInventoryFull1;
	udg_Game_Sound[gg_snd_KnightNoGold1] = gg_snd_KnightNoGold1;
	udg_Game_Sound[CreateSoundFromLabel("ShimmeringPortalBirth", false, false, false, $A, $A)] = CreateSoundFromLabel("ShimmeringPortalBirth", false, false, false, $A, $A);
	udg_Game_Sound[CreateSoundFromLabel("ShimmeringPortalDeath", false, false, false, $A, $A)] = CreateSoundFromLabel("ShimmeringPortalDeath", false, false, false, $A, $A);
	udg_Game_Sound[CreateSoundFromLabel("ShimmeringPortalEntrance", false, false, false, $A, $A)] = CreateSoundFromLabel("ShimmeringPortalEntrance", false, false, false, $A, $A);
	udg_Game_Sound[CreateSoundFromLabel("Tranquility", false, false, false, $A, $A)] = CreateSoundFromLabel("Tranquility", false, false, false, $A, $A);
	udg_Game_Sound[CreateSoundFromLabel("AlchemistChemicalBurst1", false, false, false, $A, $A)] = CreateSoundFromLabel("AlchemistChemicalBurst1", false, false, false, $A, $A);
	udg_Game_Sound[CreateSoundFromLabel("AlchemistMorph1", false, false, false, $A, $A)] = CreateSoundFromLabel("AlchemistMorph1", false, false, false, $A, $A);
}
void InitTrig_Save_Sounds() {
	gg_trg_Save_Sounds[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEvent(gg_trg_Save_Sounds, 5., false);
	TriggerAddAction(gg_trg_Save_Sounds, Trig_Save_Sounds_Actions);
}
void HandleCounter_Update() {
	int i = 0;
	int id;
	array<location> P;
	float result = 0;
	while (true) {
		if (i >= 50) break;
		i[i + 1] = i + 1;
		P[Location(0, 0)] = Location(0, 0);
		id[GetHandleId(P[i])] = GetHandleId(P[i]);
		result[result + (id - $100000)] = result + (id - $100000);
	}
	result[result / i - i / 2] = result / i - i / 2;
	while (true) {
		RemoveLocation(P[i]);
		P[null] = null;
		if (i <= 1) break;
		i[i - 1] = i - 1;
	}
	LeaderboardSetItemValue(udg_HandleBoard, 0, R2I(result));
}
void HandleCounter_Actions() {
	udg_HandleBoard[CreateLeaderboard()] = CreateLeaderboard();
	LeaderboardSetLabel(udg_HandleBoard, "Handle Counter");
	PlayerSetLeaderboard(GetLocalPlayer(), udg_HandleBoard);
	LeaderboardDisplay(udg_HandleBoard, false);
	if (GetPlayerName(GetLocalPlayer()) == "Derarius" || GetPlayerName(GetLocalPlayer()) == "WorldEdit") {
		LeaderboardDisplay(udg_HandleBoard, true);
	}
	LeaderboardAddItem(udg_HandleBoard, "Handles", 0, Player(0));
	LeaderboardSetSizeByItemCount(udg_HandleBoard, 1);
	HandleCounter_Update();
	TimerStart(GetExpiredTimer(), .05, true, HandleCounter_Update);
}
void InitTrig_HandleCounter() {
	TimerStart(CreateTimer(), 0, false, HandleCounter_Actions);
}
void Trig_Set_Chlenix_Actions() {
	udg_Integer_Creep_On_Line_Spawn[S2I(SubStringBJ(GetEventPlayerChatString(), $A, $A))] = S2I(SubStringBJ(GetEventPlayerChatString(), $A, $A));
	udg_Integer_Creep_On_Line_Spawn[S2I(SubStringBJ(GetEventPlayerChatString(), $B, $B))] = S2I(SubStringBJ(GetEventPlayerChatString(), $B, $B));
	udg_Integer_Creep_On_Line_Spawn[S2I(SubStringBJ(GetEventPlayerChatString(), $C, $C))] = S2I(SubStringBJ(GetEventPlayerChatString(), $C, $C));
	DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cFFFF0000CHLENIX|r АКТИВИРОВАН");
}
void InitTrig_Set_Chlenix() {
	gg_trg_Set_Chlenix[CreateTrigger()] = CreateTrigger();
	TriggerRegisterPlayerChatEvent(gg_trg_Set_Chlenix, Player(0), "-chlenix", false);
	TriggerAddAction(gg_trg_Set_Chlenix, Trig_Set_Chlenix_Actions);
}
void Trig_Set_Energy_Walls_Func003A() {
	udg_EnergyWallX[R2I(GetUnitX(GetEnumUnit()))] = R2I(GetUnitX(GetEnumUnit()));
	udg_EnergyWallY[R2I(GetUnitY(GetEnumUnit()))] = R2I(GetUnitY(GetEnumUnit()));
	udg_EnergyWallAngle[R2I(GetUnitFacing(GetEnumUnit()))] = R2I(GetUnitFacing(GetEnumUnit()));
	RemoveUnit(GetEnumUnit());
	udg_Temp_Integer[(udg_Temp_Integer[1] + 1)] = (udg_Temp_Integer[1] + 1);
}
void Trig_Set_Energy_Walls_Actions() {
	udg_Temp_Integer[1] = 1;
	udg_EnergyWallCount[$B] = $B;
	ForGroupBJ(GetUnitsOfPlayerAndTypeId(Player($F), 'h00I'), Trig_Set_Energy_Walls_Func003A);
}
void InitTrig_Set_Energy_Walls() {
	gg_trg_Set_Energy_Walls[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventSingle(gg_trg_Set_Energy_Walls, 5.);
	TriggerAddAction(gg_trg_Set_Energy_Walls, Trig_Set_Energy_Walls_Actions);
}
void Trig_EitiArenaRemovesAllItems_Actions() {
	RemoveItem(GetEnumItem());
}
void Trig_TimerEitiAreniTheEnd3_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	timerdialog td = LoadTimerDialogHandle(udg_hash, GetHandleId(gg_rct_Event_Bonus_Etei_arena_1), $B);
	group gruppa = CreateGroup();
	unit Picked;
	float xc = GetRectCenterX(gg_rct_Respawn_Heroes);
	float yc = GetRectCenterY(gg_rct_Respawn_Heroes);
	float perekluchatel = .0;
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
	while (true) {
		Picked[FirstOfGroup(gruppa)] = FirstOfGroup(gruppa);
		if (Picked == null) break;
		DestroyFogModifier(LoadFogModifierHandle(udg_hash, GetHandleId(Picked), $AB));
		if (perekluchatel >= 0) {
			perekluchatel[-perekluchatel] = -perekluchatel;
			perekluchatel[perekluchatel - 50.] = perekluchatel - 50.;
		else
			perekluchatel[-perekluchatel] = -perekluchatel;
			perekluchatel[perekluchatel + 50.] = perekluchatel + 50.;
		}
		xc[GetRectCenterX(gg_rct_Respawn_Heroes) + perekluchatel] = GetRectCenterX(gg_rct_Respawn_Heroes) + perekluchatel;
		yc[GetRectCenterY(gg_rct_Respawn_Heroes)] = GetRectCenterY(gg_rct_Respawn_Heroes);
		SetUnitPosition(Picked, xc, yc);
		SetUnitFacing(Picked, 270.);
		SetUnitState(Picked, UNIT_STATE_LIFE, $540BE3FF);
		SetUnitState(Picked, UNIT_STATE_MANA, $540BE3FF);
		ShowUnit(Picked, true);
		PauseUnit(Picked, false);
		if ((GetLocalPlayer() == GetOwningPlayer(Picked))) {
			ResetToGameCamera(.0);
			PanCameraToTimed(xc, yc, .0);
			ClearSelection();
			SelectUnit(Picked, true);
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	EnumItemsInRect(gg_rct_Event_Bonus_Etei_arena_1, null, Trig_EitiArenaRemovesAllItems_Actions);
	StartTimerBJ(udg_Timer_Nomera_Volni, false, 75.);
	CreateTimerDialogBJ(udg_Timer_Nomera_Volni, ("Волна № |cFFFF0000" + (I2S(udg_Nomer_samoi_volni) + "|r")));
	udg_TimerDialog_Nomera_Volni[bj_lastCreatedTimerDialog] = bj_lastCreatedTimerDialog;
	TimerDialogSetTimeColorBJ(udg_TimerDialog_Nomera_Volni, 'd', 90., 30., 20.);
	udg_Is_Fast_Wave_Start_On_Off[true] = true;
	udg_Is_Eiti_Arena_Already_Go[false] = false;
	KillUnit(LoadUnitHandle(udg_hash, GetHandleId(gg_rct_Event_Bonus_Etei_arena_1), $C));
	KillUnit(LoadUnitHandle(udg_hash, GetHandleId(gg_rct_Event_Bonus_Etei_arena_1), $D));
	EnableTrigger(gg_trg_Hero_Dead);
	DestroyTimerDialog(td);
	DestroyTimer(t);
	FlushChildHashtable(udg_hash, h);
	t[null] = null;
	td[null] = null;
	gruppa[null] = null;
	Picked[null] = null;
}
void Trig_TimerEitiAreniTheEnd2_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	timer t2 = CreateTimer();
	int h2 = GetHandleId(t2);
	TimerStart(t2, 1.25, false, Trig_TimerEitiAreniTheEnd3_Actions);
	t[null] = null;
	t2[null] = null;
}
void Trig_TimerEitiAreniTheEnd_ForForce() {
	bj_forLoopAIndex[1] = 1;
	while (true) {
		if (bj_forLoopAIndex > 9) break;
		SetPlayerAllianceStateBJ(GetEnumPlayer(), Player(bj_forLoopAIndex - 1), 3);
		bj_forLoopAIndex[bj_forLoopAIndex + 1] = bj_forLoopAIndex + 1;
	}
}
void Trig_TimerEitiAreniTheEnd_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit Picked;
	group gruppa = CreateGroup();
	float angle = 0;
	float x = GetRectCenterX(gg_rct_Event_Bonus_Etei_arena_1);
	float y = GetRectCenterY(gg_rct_Event_Bonus_Etei_arena_1);
	float xc = GetRectCenterX(gg_rct_Respawn_Heroes);
	float yc = GetRectCenterY(gg_rct_Respawn_Heroes);
	float xu;
	float yu;
	int play = 0;
	int hhero = 0;
	texttag txt = CreateTextTag();
	float vel = .0221875;
	float angletxt = 45. + GetRandomReal(.0, 90.);
	float xvel = vel * Cos(angle * bj_DEGTORAD);
	float yvel = vel * Sin(angle * bj_DEGTORAD);
	timer t2 = CreateTimer();
	int h2 = GetHandleId(t2);
	float timeRemaining = 0;
	float anglestep = (360. / CountPlayersInForceBJ(udg_IGRAET));
	ForForce(udg_IGRAET, Trig_TimerEitiAreniTheEnd_ForForce);
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
	TimerStart(t2, 4., false, Trig_TimerEitiAreniTheEnd2_Actions);
	while (true) {
		Picked[FirstOfGroup(gruppa)] = FirstOfGroup(gruppa);
		if (Picked == null) break;
		angle[angle + anglestep] = angle + anglestep;
		SetUnitPosition(Picked, (x + 400 * Cos(angle * bj_DEGTORAD)), (y + 400 * Sin(angle * bj_DEGTORAD)));
		ReviveHero(Picked, (x + 400 * Cos(angle * bj_DEGTORAD)), (y + 400 * Sin(angle * bj_DEGTORAD)), true);
		SetUnitFacing(Picked, bj_RADTODEG * Atan2(y - GetUnitY(Picked), x - GetUnitX(Picked)));
		SetUnitState(Picked, UNIT_STATE_LIFE, $540BE3FF);
		SetUnitState(Picked, UNIT_STATE_MANA, $540BE3FF);
		if ((GetLocalPlayer() == GetOwningPlayer(Picked))) {
			PanCameraToTimed(x, y, .0);
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	GroupEnumUnitsInRect(gruppa, gg_rct_Event_Bonus_Etei_arena_1, null);
	KillSummonsAndIllusions(gruppa);
	gruppa[CreateGroup()] = CreateGroup();
	GroupEnumUnitsInRect(gruppa, gg_rct_Event_Bonus_Etei_arena_1, null);
	while (true) {
		Picked[FirstOfGroup(gruppa)] = FirstOfGroup(gruppa);
		if (Picked == null) break;
		if (GetUnitTypeId(Picked) != 'h00C' && GetUnitTypeId(Picked) != 'h00B') {
			PauseUnit(Picked, true);
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
	while (true) {
		Picked[FirstOfGroup(gruppa)] = FirstOfGroup(gruppa);
		if (Picked == null) break;
		hhero[GetHandleId(Picked)] = GetHandleId(Picked);
		play[LoadInteger(udg_hash, hhero, 1)] = LoadInteger(udg_hash, hhero, 1);
		if (play == 2 || play == 1 || play == 0) {
			xu[GetUnitX(Picked)] = GetUnitX(Picked);
			yu[GetUnitY(Picked)] = GetUnitY(Picked);
			SetTextTagText(txt, "|cFFFFFF00+650|r", .045);
			SetTextTagPos(txt, xu, yu, .0);
			SetTextTagColor(txt, 0, 0, 0, 50);
			SetTextTagVelocity(txt, xvel, yvel);
			SetTextTagPermanent(txt, false);
			SetTextTagLifespan(txt, 4.);
			SetTextTagFadepoint(txt, .0);
			txt[CreateTextTag()] = CreateTextTag();
			SetPlayerState(GetOwningPlayer(Picked), PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(GetOwningPlayer(Picked), PLAYER_STATE_RESOURCE_GOLD) + 650);
			if (GetLocalPlayer() == GetOwningPlayer(Picked)) {
				DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Вы получили " + udg_ColorString[23] + I2S(650) + " золота|r!!!");
			}
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	t[null] = null;
	GroupClear(gruppa);
	DestroyGroup(gruppa);
	gruppa[null] = null;
	txt[null] = null;
	t2[null] = null;
	Picked[null] = null;
	gruppa[null] = null;
	txt[null] = null;
	t2[null] = null;
}
void Trig_Nachalo_Eiti_aren_Actions_Periodic() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	int timeout = LoadInteger(udg_hash, h, 3);
	int lvl = LoadInteger(udg_hash, h, 4);
	int I = LoadInteger(udg_hash, h, 5);
	rect rct = gg_rct_Event_Bonus_Etei_arena_1;
	float minx = GetRectMinX(rct);
	float maxx = GetRectMaxX(rct);
	float miny = GetRectMinY(rct);
	float maxy = GetRectMaxY(rct);
	float x = GetRandomReal(minx, maxx);
	float y = GetRandomReal(miny, maxy);
	player p = Player($C);
	int random = R2I($F + 5 * CountPlayersInForceBJ(udg_IGRAET));
	int randomgold = GetRandomInt(1, R2I(30 - 3 * CountPlayersInForceBJ(udg_IGRAET)));
	int o = GetHandleId(udg_Gruppa_HeroUnitov_Geroev);
	int ff = 0;
	timer t2 = LoadTimerHandle(udg_hash, h, 8);
	group gruppa = CreateGroup();
	unit Picked;
	float xt;
	float yt;
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
	while (true) {
		Picked[FirstOfGroup(gruppa)] = FirstOfGroup(gruppa);
		if (Picked == null) break;
		xt[GetUnitX(Picked)] = GetUnitX(Picked);
		yt[GetUnitY(Picked)] = GetUnitY(Picked);
		if (!((GetRectMinX(gg_rct_Event_Bonus_Etei_arena_1) <= xt) && (xt <= GetRectMaxX(gg_rct_Event_Bonus_Etei_arena_1)) && (GetRectMinY(gg_rct_Event_Bonus_Etei_arena_1) <= yt) && (yt <= GetRectMaxY(gg_rct_Event_Bonus_Etei_arena_1)))) {
			SetUnitPosition(Picked, 4250., 800.);
			if ((GetLocalPlayer() == GetOwningPlayer(Picked))) {
				PanCameraToTimed(4250., 800., .0);
			}
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl", 4250., 800.));
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	ff[LoadInteger(udg_hash, o, 2)] = LoadInteger(udg_hash, o, 2);
	I[I + 1] = I + 1;
	if (randomgold <= 3) {
		CreateItem('I03B', x, y);
	}
	if (randomgold == 4) {
		CreateItem('I03A', x, y);
	}
	SaveInteger(udg_hash, h, 3, timeout - 1);
	x[GetRandomReal(minx + 200., maxx - 200.)] = GetRandomReal(minx + 200., maxx - 200.);
	y[GetRandomReal(miny + 200., maxy - 200.)] = GetRandomReal(miny + 200., maxy - 200.);
	if (GetRandomInt(1, 'd') <= random) {
		CreatePotion(x, y, 1, 6);
	}
	if (timeout <= 0) {
		DestroyTimer(t);
		FlushChildHashtable(udg_hash, h);
	}
	if (ff == 1) {
		TimerStart(t2, .05, false, Trig_TimerEitiAreniTheEnd_Actions);
	}
	GroupClear(gruppa);
	DestroyGroup(gruppa);
	gruppa[null] = null;
	Picked[null] = null;
	t[null] = null;
	t2[null] = null;
	p[null] = null;
	rct[null] = null;
}
void Trig_Nachalo_Eiti_aren2_Actions() {
	timer t3 = GetExpiredTimer();
	int h = GetHandleId(t3);
	unit Picked;
	group gruppa = CreateGroup();
	float xtop = GetRectCenterX(gg_rct_Oblast_Teleporta_Arena_Top);
	float ytop = GetRectCenterY(gg_rct_Oblast_Teleporta_Arena_Top);
	float xbot = GetRectCenterX(gg_rct_Oblast_Teleporta_Arena_Bot);
	float ybot = GetRectCenterY(gg_rct_Oblast_Teleporta_Arena_Bot);
	timer t = LoadTimerHandle(udg_hash, h, 1);
	timer t2 = LoadTimerHandle(udg_hash, h, 2);
	timerdialog td = LoadTimerDialogHandle(udg_hash, h, 3);
	unit portal;
	GroupEnumUnitsInRect(gruppa, gg_rct_Event_Bonus_Etei_arena_1, null);
	while (true) {
		Picked[FirstOfGroup(gruppa)] = FirstOfGroup(gruppa);
		if (Picked == null) break;
		PauseUnit(Picked, false);
		GroupRemoveUnit(gruppa, Picked);
	}
	portal[CreateUnit(Player($F), 'h012', xtop, ytop, .0)] = CreateUnit(Player($F), 'h012', xtop, ytop, .0);
	SaveUnitHandle(udg_hash, GetHandleId(gg_rct_Event_Bonus_Etei_arena_1), $C, portal);
	portal[CreateUnit(Player($F), 'h012', xbot, ybot, .0)] = CreateUnit(Player($F), 'h012', xbot, ybot, .0);
	SaveUnitHandle(udg_hash, GetHandleId(gg_rct_Event_Bonus_Etei_arena_1), $D, portal);
	TimerStart(t2, 90., false, Trig_TimerEitiAreniTheEnd_Actions);
	TimerDialogSetTitle(td, "Time Remaining:");
	TimerDialogDisplay(td, true);
	TimerDialogSetTimeColor(td, $FF, 30, 30, $A);
	SaveTimerDialogHandle(udg_hash, GetHandleId(gg_rct_Event_Bonus_Etei_arena_1), $B, td);
	TimerStart(t, .5, true, Trig_Nachalo_Eiti_aren_Actions_Periodic);
	Picked[null] = null;
	t[null] = null;
	t2[null] = null;
	td[null] = null;
	GroupClear(gruppa);
	DestroyGroup(gruppa);
	gruppa[null] = null;
}
void Trig_Nachalo_Eiti_aren_FuncForGroup() {
	bj_forLoopAIndex[1] = 1;
	while (true) {
		if (bj_forLoopAIndex > 9) break;
		if (GetEnumPlayer() != Player(bj_forLoopAIndex - 1)) {
			SetPlayerAllianceStateBJ(GetEnumPlayer(), Player(bj_forLoopAIndex - 1), 0);
		}
		bj_forLoopAIndex[bj_forLoopAIndex + 1] = bj_forLoopAIndex + 1;
	}
}
void Trig_Nachalo_Eiti_aren_Actions() {
	float angle = 0;
	float x = GetRectCenterX(gg_rct_Event_Bonus_Etei_arena_1);
	float y = GetRectCenterY(gg_rct_Event_Bonus_Etei_arena_1);
	float xtop = GetRectCenterX(gg_rct_Oblast_Teleporta_Arena_Top);
	float ytop = GetRectCenterY(gg_rct_Oblast_Teleporta_Arena_Top);
	float xbot = GetRectCenterX(gg_rct_Oblast_Teleporta_Arena_Bot);
	float ybot = GetRectCenterY(gg_rct_Oblast_Teleporta_Arena_Bot);
	unit Picked;
	timer t2 = CreateTimer();
	timerdialog td = CreateTimerDialog(t2);
	int h2 = GetHandleId(t2);
	timer t = CreateTimer();
	int h = GetHandleId(t);
	timer t3 = CreateTimer();
	int h3 = GetHandleId(t3);
	group gruppa = CreateGroup();
	group grupa = CreateGroup();
	int I = 0;
	int lvl = 0;
	int hhero;
	float anglestep = (360. / CountPlayersInForceBJ(udg_IGRAET));
	int o = GetHandleId(udg_Gruppa_HeroUnitov_Geroev);
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, grupa);
	SaveInteger(udg_hash, h, 3, $B4);
	SaveInteger(udg_hash, h, 4, lvl);
	SaveInteger(udg_hash, h, 5, I);
	SaveReal(udg_hash, h, 6, x);
	SaveReal(udg_hash, h, 7, y);
	SaveTimerHandle(udg_hash, h, 8, t);
	SaveGroupHandle(udg_hash, o, 1, grupa);
	DisableTrigger(gg_trg_Hero_Dead);
	ForForce(udg_IGRAET, Trig_Nachalo_Eiti_aren_FuncForGroup);
	if ((IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS))) {
		DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Добро Пожаловать на |cFFFFDC00Золотую Поляну|r!!!");
		DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Здесь каждый играет сам за себя. Постарайтесь выжить указанное время и собрать как можно больше золотых монеток. Удачи!");
	}
	while (true) {
		Picked[FirstOfGroup(gruppa)] = FirstOfGroup(gruppa);
		if (Picked == null) break;
		hhero[GetHandleId(Picked)] = GetHandleId(Picked);
		SaveInteger(udg_hash, hhero, 1, 0);
		angle[angle + anglestep] = angle + anglestep;
		SetUnitPosition(Picked, (x + 400 * Cos(angle * bj_DEGTORAD)), (y + 400 * Sin(angle * bj_DEGTORAD)));
		SetUnitFacing(Picked, bj_RADTODEG * Atan2(y - GetUnitY(Picked), x - GetUnitX(Picked)));
		bj_lastCreatedFogModifier[CreateFogModifierRect(GetOwningPlayer(Picked), FOG_OF_WAR_VISIBLE, gg_rct_Event_Bonus_Etei_arena_1, true, false)] = CreateFogModifierRect(GetOwningPlayer(Picked), FOG_OF_WAR_VISIBLE, gg_rct_Event_Bonus_Etei_arena_1, true, false);
		FogModifierStart(bj_lastCreatedFogModifier);
		SaveFogModifierHandle(udg_hash, GetHandleId(Picked), $AB, bj_lastCreatedFogModifier);
		if ((GetLocalPlayer() == GetOwningPlayer(Picked))) {
			SoundForPlayer(GetOwningPlayer(Picked), 7);
			ClearSelection();
			SelectUnit(Picked, true);
			PanCameraToTimed(x, y, .0);
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	GroupEnumUnitsInRange(gruppa, 0, 0, 99999, null);
	KillSummonsAndIllusions(gruppa);
	gruppa[CreateGroup()] = CreateGroup();
	GroupEnumUnitsInRect(gruppa, gg_rct_Event_Bonus_Etei_arena_1, null);
	while (true) {
		Picked[FirstOfGroup(gruppa)] = FirstOfGroup(gruppa);
		if (Picked == null) break;
		PauseUnit(Picked, true);
		GroupRemoveUnit(gruppa, Picked);
	}
	SaveTimerHandle(udg_hash, h3, 1, t);
	SaveTimerHandle(udg_hash, h3, 2, t2);
	SaveTimerDialogHandle(udg_hash, h3, 3, td);
	udg_Is_Eiti_Arena_Already_Go[true] = true;
	TimerStart(t3, 5., false, Trig_Nachalo_Eiti_aren2_Actions);
	Picked[null] = null;
	t[null] = null;
	t2[null] = null;
	t3[null] = null;
	td[null] = null;
	GroupClear(gruppa);
	DestroyGroup(gruppa);
	gruppa[null] = null;
	grupa[null] = null;
}
void InitTrig_Nachalo_Eiti_aren() {
	gg_trg_Nachalo_Eiti_aren[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Nachalo_Eiti_aren, Trig_Nachalo_Eiti_aren_Actions);
}
void Trig_Hero_Deadd_Timer2_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit u = LoadUnitHandle(udg_hash, h, 1);
	effect ef = LoadEffectHandle(udg_hash, h, 4);
	DestroyEffect(ef);
	UnitRemoveAbility(u, 'Avul');
	DestroyTimer(t);
	FlushChildHashtable(udg_hash, h);
	t[null] = null;
	u[null] = null;
}
void Trig_Hero_Deadd_Timer_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit u = LoadUnitHandle(udg_hash, h, 1);
	float x = LoadReal(udg_hash, h, 2);
	float y = LoadReal(udg_hash, h, 3);
	effect ef = AddSpecialEffectTarget("Abilities\\Spells\\Human\\DivineShield\\DivineShieldTarget.mdl", u, "origin");
	SaveEffectHandle(udg_hash, h, 4, ef);
	TimerStart(t, 3., false, Trig_Hero_Deadd_Timer2_Actions);
	ReviveHero(u, x, y, true);
	SetUnitState(u, UNIT_STATE_MANA, GetUnitState(u, UNIT_STATE_MAX_MANA));
	SetUnitState(u, UNIT_STATE_LIFE, GetUnitState(u, UNIT_STATE_MAX_LIFE));
	UnitAddAbility(u, 'Avul');
	if ((GetLocalPlayer() == GetOwningPlayer(u))) {
		DisplayTextToPlayer(GetOwningPlayer(u), 0, 0, "|cFFFFFF00Ваш Герой Получил Второй Шанс!!!|r");
		PanCameraToTimed(x, y, .0);
		ClearSelection();
		SelectUnit(u, true);
	}
	t[null] = null;
	u[null] = null;
}
void Trig_HeroDeadonEitiArena_Actions() {
	unit u = GetDyingUnit();
	int hhero = GetHandleId(u);
	player p = GetOwningPlayer(u);
	int play = GetPlayerId(p) + 1;
	array<int> heroint;
	unit killer = GetKillingUnit();
	player pk = GetOwningPlayer(killer);
	int random = GetRandomInt(1, 3);
	int o = GetHandleId(udg_Gruppa_HeroUnitov_Geroev);
	group g = LoadGroupHandle(udg_hash, o, 1);
	timer t = CreateTimer();
	int h = GetHandleId(t);
	float xu = GetUnitX(u);
	float yu = GetUnitY(u);
	string stext = "";
	int ff = 0;
	int gold = 0;
	int xp = 0;
	heroint[0] = 0;
	heroint[LoadInteger(udg_hash, hhero, 1)] = LoadInteger(udg_hash, hhero, 1);
	SaveUnitHandle(udg_hash, h, 1, u);
	SaveReal(udg_hash, h, 2, xu);
	SaveReal(udg_hash, h, 3, yu);
	heroint[heroint[play] + 1] = heroint[play] + 1;
	SaveInteger(udg_hash, hhero, 1, heroint[play]);
	if (heroint[play] == 1) {
		TimerStart(t, 4., false, Trig_Hero_Deadd_Timer_Actions);
		gold[350] = 350;
		xp[500] = 500;
	}
	if (heroint[play] == 2) {
		TimerStart(t, 4., false, Trig_Hero_Deadd_Timer_Actions);
		gold[$FA] = $FA;
		xp[300] = 300;
	}
	if (heroint[play] == 3) {
		gold[$96] = $96;
		xp['d'] = 'd';
	}
	if (GetPlayerId(pk) <= 8 && heroint[play] <= 3) {
		if (random == 1) {
			stext[udg_ColorString[GetPlayerId(pk) + 1] + GetPlayerName(pk) + "|r убил " + udg_ColorString[GetPlayerId(p) + 1] + GetPlayerName(p) + "|r и получает за это " + udg_ColorString[23] + I2S(gold) + " золота|r и " + udg_ColorString[23] + I2S(xp) + " опыта|r!!!"] = udg_ColorString[GetPlayerId(pk) + 1] + GetPlayerName(pk) + "|r убил " + udg_ColorString[GetPlayerId(p) + 1] + GetPlayerName(p) + "|r и получает за это " + udg_ColorString[23] + I2S(gold) + " золота|r и " + udg_ColorString[23] + I2S(xp) + " опыта|r!!!";
		}
		if (random == 2) {
			stext[udg_ColorString[GetPlayerId(pk) + 1] + GetPlayerName(pk) + "|r скукожил " + udg_ColorString[GetPlayerId(p) + 1] + GetPlayerName(p) + "|r и получает за это " + udg_ColorString[23] + I2S(gold) + " золота|r и " + udg_ColorString[23] + I2S(xp) + " опыта|r!!!"] = udg_ColorString[GetPlayerId(pk) + 1] + GetPlayerName(pk) + "|r скукожил " + udg_ColorString[GetPlayerId(p) + 1] + GetPlayerName(p) + "|r и получает за это " + udg_ColorString[23] + I2S(gold) + " золота|r и " + udg_ColorString[23] + I2S(xp) + " опыта|r!!!";
		}
		if (random == 3) {
			stext[udg_ColorString[GetPlayerId(pk) + 1] + GetPlayerName(pk) + "|r распотрошил " + udg_ColorString[GetPlayerId(p) + 1] + GetPlayerName(p) + "|r и получает за это " + udg_ColorString[23] + I2S(gold) + " золота|r и " + udg_ColorString[23] + I2S(xp) + " опыта|r!!!"] = udg_ColorString[GetPlayerId(pk) + 1] + GetPlayerName(pk) + "|r распотрошил " + udg_ColorString[GetPlayerId(p) + 1] + GetPlayerName(p) + "|r и получает за это " + udg_ColorString[23] + I2S(gold) + " золота|r и " + udg_ColorString[23] + I2S(xp) + " опыта|r!!!";
		}
		SetPlayerState(pk, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(pk, PLAYER_STATE_RESOURCE_GOLD) + gold);
		AddHeroXP(killer, xp, true);
	}
	if (stext != "" && stext != "") {
		if (IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS)) {
			DisplayTimedTextToPlayer(GetLocalPlayer(), 0, 0, 7., stext);
		}
	}
	if (heroint[play] == 3) {
		GroupRemoveUnit(g, u);
	}
	if (CountUnitsInGroup(g) <= 0) {
		ff[1] = 1;
		SaveInteger(udg_hash, o, 2, ff);
	}
	SaveGroupHandle(udg_hash, o, 1, g);
	u[null] = null;
	p[null] = null;
	killer[null] = null;
	pk[null] = null;
	g[null] = null;
	t[null] = null;
}
bool Trig_HeroDeadonEitiArena_Conditions() {
	return (IsUnitType(GetDyingUnit(), UNIT_TYPE_HERO) && IsUnitIllusion(GetDyingUnit()) == false && GetPlayerId(GetOwningPlayer(GetDyingUnit())) <= 8 && (udg_Is_Eiti_Arena_Already_Go)) != null;
}
void InitTrig_HeroDeadonEitiArena() {
	int index = 0;
	gg_trg_HeroDeadonEitiArena[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_HeroDeadonEitiArena, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_HeroDeadonEitiArena, Condition(Trig_HeroDeadonEitiArena_Conditions));
	TriggerAddAction(gg_trg_HeroDeadonEitiArena, Trig_HeroDeadonEitiArena_Actions);
}
bool Trig__PortalCheckTop_Conditions() {
	return (IsUnitType(GetEnteringUnit(), UNIT_TYPE_HERO) && IsUnitIllusion(GetTriggerUnit()) == false) != null;
}
void Trig__PortalCheckTop_Actions() {
	unit u = GetEnteringUnit();
	float x = GetRectCenterX(gg_rct_Oblast_Teleporta_Arena_Bot);
	float y = GetRectCenterY(gg_rct_Oblast_Teleporta_Arena_Bot);
	if (IsUnitInGroup(u, udg_OtriadPortalUnitsEitiArena)) {
		GroupRemoveUnit(udg_OtriadPortalUnitsEitiArena, u);
	else
		GroupAddUnit(udg_OtriadPortalUnitsEitiArena, u);
		SetUnitPosition(u, x, y);
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl", x, y));
		if (GetLocalPlayer() == GetOwningPlayer(u)) {
			CameraSetupApplyForceDuration(gg_cam_Camera_Eiti_Arena_Bot_Portal, true, .0);
		}
	}
	u[null] = null;
}
void InitTrig__PortalCheckTop() {
	region rectRegion = CreateRegion();
	gg_trg__PortalCheckTop[CreateTrigger()] = CreateTrigger();
	RegionAddRect(rectRegion, gg_rct_Oblast_Teleporta_Arena_Top);
	TriggerRegisterEnterRegion(gg_trg__PortalCheckTop, rectRegion, null);
	TriggerAddCondition(gg_trg__PortalCheckTop, Condition(Trig__PortalCheckTop_Conditions));
	TriggerAddAction(gg_trg__PortalCheckTop, Trig__PortalCheckTop_Actions);
}
bool Trig__PortalCheckBot_Conditions() {
	return (IsUnitType(GetEnteringUnit(), UNIT_TYPE_HERO) && IsUnitIllusion(GetTriggerUnit()) == false) != null;
}
void Trig__PortalCheckBot_Actions() {
	unit u = GetEnteringUnit();
	float x = GetRectCenterX(gg_rct_Oblast_Teleporta_Arena_Top);
	float y = GetRectCenterY(gg_rct_Oblast_Teleporta_Arena_Top);
	if (IsUnitInGroup(u, udg_OtriadPortalUnitsEitiArena)) {
		GroupRemoveUnit(udg_OtriadPortalUnitsEitiArena, u);
	else
		GroupAddUnit(udg_OtriadPortalUnitsEitiArena, u);
		SetUnitPosition(u, x, y);
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl", x, y));
		if (GetLocalPlayer() == GetOwningPlayer(u)) {
			CameraSetupApplyForceDuration(gg_cam_Camera_Eiti_Arena_Top_Portal, true, .0);
		}
	}
	u[null] = null;
}
void InitTrig__PortalCheckBot() {
	region rectRegion = CreateRegion();
	gg_trg__PortalCheckBot[CreateTrigger()] = CreateTrigger();
	RegionAddRect(rectRegion, gg_rct_Oblast_Teleporta_Arena_Bot);
	TriggerRegisterEnterRegion(gg_trg__PortalCheckBot, rectRegion, null);
	TriggerAddCondition(gg_trg__PortalCheckBot, Condition(Trig__PortalCheckBot_Conditions));
	TriggerAddAction(gg_trg__PortalCheckBot, Trig__PortalCheckBot_Actions);
}
void Trig_LinkItemsInitAddItemToSystem_Actions(int count1, int id1, int count2, int id2, int count3, int id3, int count4, int id4, int count5, int id5, int itemlevel, int idfinal, int idrecipe, string sef) {
	int h = ($C * itemlevel);
	SaveInteger(udg_hash, idrecipe, h + 1, count1);
	SaveInteger(udg_hash, idrecipe, h + 2, id1);
	SaveInteger(udg_hash, idrecipe, h + 3, count2);
	SaveInteger(udg_hash, idrecipe, h + 4, id2);
	SaveInteger(udg_hash, idrecipe, h + 5, count3);
	SaveInteger(udg_hash, idrecipe, h + 6, id3);
	SaveInteger(udg_hash, idrecipe, h + 7, count4);
	SaveInteger(udg_hash, idrecipe, h + 8, id4);
	SaveInteger(udg_hash, idrecipe, h + 9, count5);
	SaveInteger(udg_hash, idrecipe, h + $A, id5);
	SaveInteger(udg_hash, idrecipe, h + $B, idfinal);
	SaveStr(udg_hash, idrecipe, h + $C, sef);
	SaveInteger(udg_hash, idfinal, 'y', itemlevel);
}
void Trig_LinkItemsInit_Actions() {
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I004', 1, 'I00D', 0, 0, 0, 0, 0, 0, 0, 'I027', 'I02T', "Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00M', 0, 0, 0, 0, 0, 0, 0, 0, 0, 'I02Y', 'I030', "Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I02Y', 0, 0, 0, 0, 0, 0, 0, 0, 1, 'I02Z', 'I030', "Abilities\\Spells\\Human\\Resurrect\\ResurrectCaster.mdl");
	SaveInteger(udg_hash, 'I030', 0, 1);
	Trig_LinkItemsInitAddItemToSystem_Actions(2, 'I01T', 1, 'I021', 0, 0, 0, 0, 0, 0, 0, 'I036', 'I037', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I003', 1, 'I004', 1, 'I01T', 0, 0, 0, 0, 0, 'I02J', 'I01D', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I02J', 0, 0, 0, 0, 0, 0, 0, 0, 1, 'I01B', 'I01D', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I01B', 0, 0, 0, 0, 0, 0, 0, 0, 2, 'I01X', 'I01D', "");
	SaveInteger(udg_hash, 'I01D', 0, 2);
	Trig_LinkItemsInitAddItemToSystem_Actions(2, 'I01T', 1, 'I001', 0, 0, 0, 0, 0, 0, 0, 'I01U', 'I01M', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(2, 'I003', 1, 'I01U', 0, 0, 0, 0, 0, 0, 0, 'I01G', 'I018', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00Z', 1, 'I00D', 0, 0, 0, 0, 0, 0, 0, 'I00A', 'I000', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00D', 1, 'I00E', 0, 0, 0, 0, 0, 0, 0, 'I00I', 'I01N', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00A', 1, 'I00I', 0, 0, 0, 0, 0, 0, 0, 'I00C', 'I00O', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00J', 1, 'I00E', 1, 'I00N', 0, 0, 0, 0, 0, 'I00G', 'I00K', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00G', 0, 0, 0, 0, 0, 0, 0, 0, 1, 'I01Q', 'I00K', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I01Q', 0, 0, 0, 0, 0, 0, 0, 0, 2, 'I01V', 'I00K', "");
	SaveInteger(udg_hash, 'I00K', 0, 2);
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00Z', 2, 'I027', 0, 0, 0, 0, 0, 0, 0, 'I03G', 'I02K', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I027', 1, 'I022', 1, 'I021', 1, 'I026', 0, 0, 0, 'I03K', 'I03J', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I03K', 0, 0, 0, 0, 0, 0, 0, 0, 1, 'I03L', 'I03J', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I03L', 0, 0, 0, 0, 0, 0, 0, 0, 2, 'I03M', 'I03J', "");
	SaveInteger(udg_hash, 'I03J', 0, 2);
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00Z', 2, 'I026', 0, 0, 0, 0, 0, 0, 0, 'I02U', 'I03I', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(2, 'I00N', 1, 'I00Y', 0, 0, 0, 0, 0, 0, 0, 'I03Q', 'I02V', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(2, 'I015', 1, 'I00D', 0, 0, 0, 0, 0, 0, 0, 'I03S', 'I03R', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00F', 1, 'I001', 2, 'I00E', 0, 0, 0, 0, 0, 'I03U', 'I03T', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00J', 1, 'I021', 1, 'I026', 1, 'I00F', 0, 0, 0, 'I03W', 'I03V', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I02C', 1, 'I001', 1, 'I004', 0, 0, 0, 0, 0, 'I03Y', 'I03X', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I01X', 1, 'I01S', 0, 0, 0, 0, 0, 0, 0, 'I02G', 'I03Z', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I023', 1, 'I001', 0, 0, 0, 0, 0, 0, 0, 'I02I', 'I02O', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I036', 1, 'I00B', 1, 'I02A', 0, 0, 0, 0, 0, 'I02F', 'I040', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I022', 1, 'I00Z', 1, 'I026', 1, 'I00F', 0, 0, 0, 'I042', 'I041', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00J', 1, 'I01A', 1, 'I015', 0, 0, 0, 0, 0, 'I044', 'I043', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I02G', 1, 'I01X', 1, 'I01U', 0, 0, 0, 0, 0, 'I048', 'I047', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I023', 1, 'I00Z', 0, 0, 0, 0, 0, 0, 0, 'I04L', 'I04K', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I03U', 1, 'I00I', 1, 'I00J', 0, 0, 0, 0, 0, 'I04U', 'I04M', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00J', 1, 'I00I', 1, 'I006', 0, 0, 0, 0, 0, 'I04V', 'I00Q', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(2, 'I01K', 0, 0, 0, 0, 0, 0, 0, 0, 0, 'I04X', 'I04W', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I01G', 1, 'I01S', 1, 'I04X', 0, 0, 0, 0, 0, 'I04Z', 'I04Y', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00B', 1, 'I02A', 2, 'I001', 0, 0, 0, 0, 0, 'I02E', 'I01R', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I02E', 1, 'I03N', 1, 'I02A', 0, 0, 0, 0, 0, 'I02N', 'I02M', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I03M', 1, 'I02U', 1, 'I03G', 0, 0, 0, 0, 0, 'I051', 'I050', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I02F', 1, 'I03Q', 1, 'I00B', 0, 0, 0, 0, 0, 'I02T', 'I02D', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I01T', 2, 'I00N', 1, 'I015', 0, 0, 0, 0, 0, 'I052', 'I03H', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I052', 0, 0, 0, 0, 0, 0, 0, 0, 1, 'I053', 'I03H', "");
	SaveInteger(udg_hash, 'I03H', 0, 1);
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I015', 1, 'I001', 1, 'I00E', 0, 0, 0, 0, 0, 'I055', 'I054', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I055', 0, 0, 0, 0, 0, 0, 0, 0, 1, 'I056', 'I054', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I056', 0, 0, 0, 0, 0, 0, 0, 0, 2, 'I057', 'I054', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I057', 0, 0, 0, 0, 0, 0, 0, 0, 3, 'I058', 'I054', "");
	SaveInteger(udg_hash, 'I054', 0, 3);
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I04X', 1, 'I03S', 1, 'I00I', 0, 0, 0, 0, 0, 'I05A', 'I059', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(2, 'I00D', 1, 'I00F', 0, 0, 0, 0, 0, 0, 0, 'I006', 'I005', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I036', 1, 'I006', 1, 'I026', 0, 0, 0, 0, 0, 'I008', 'I007', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I008', 0, 0, 0, 0, 0, 0, 0, 0, 1, 'I009', 'I007', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I009', 0, 0, 0, 0, 0, 0, 0, 0, 2, 'I00L', 'I007', "");
	SaveInteger(udg_hash, 'I007', 0, 2);
	Trig_LinkItemsInitAddItemToSystem_Actions(2, 'I022', 1, 'I00F', 0, 0, 0, 0, 0, 0, 0, 'I00S', 'I00R', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I044', 1, 'I00S', 1, 'I01A', 0, 0, 0, 0, 0, 'I00T', 'I00M', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I004', 0, 0, 0, 0, 0, 0, 0, 0, 0, 'I00V', 'I00U', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I01T', 1, 'I00D', 1, 'I001', 1, 'I00E', 0, 0, 0, 'I00X', 'I00W', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I042', 1, 'I03Q', 1, 'I022', 0, 0, 0, 0, 0, 'I012', 'I011', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I003', 1, 'I001', 0, 0, 0, 0, 0, 0, 0, 'I01C', 'I019', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00S', 1, 'I03G', 1, 'I006', 0, 0, 0, 0, 0, 'I01W', 'I01P', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I02U', 1, 'I03Y', 0, 0, 0, 0, 0, 0, 0, 'I02H', 'I029', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I01G', 1, 'I03U', 0, 0, 0, 0, 0, 0, 0, 'I02P', 'I02L', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(2, 'I00E', 1, 'I01T', 0, 0, 0, 0, 0, 0, 0, 'I02R', 'I02Q', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I02R', 0, 0, 0, 0, 0, 0, 0, 0, 1, 'I02S', 'I02Q', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I02S', 0, 0, 0, 0, 0, 0, 0, 0, 2, 'I02W', 'I02Q', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I02W', 0, 0, 0, 0, 0, 0, 0, 0, 3, 'I02X', 'I02Q', "");
	Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I02X', 0, 0, 0, 0, 0, 0, 0, 0, 4, 'I02Y', 'I02Q', "");
	SaveInteger(udg_hash, 'I02Q', 0, 4);
}
void InitTrig_LinkItemsInit() {
	gg_trg_LinkItemsInit[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEvent(gg_trg_LinkItemsInit, 6., false);
	TriggerAddAction(gg_trg_LinkItemsInit, Trig_LinkItemsInit_Actions);
}
void Trig_ItemPickedUp_Actions() {
	item it = GetManipulatedItem();
	int id = GetItemTypeId(it);
	int itemlevel;
	int h;
	int lopa;
	if (GetItemType(it) == ITEM_TYPE_POWERUP && id != 'I03A' && id != 'I03B' && id != 'I013' && id != 'I014' && id != 'I016' && id != 'I017') {
		if ((id == 'I035') || (id == 'I00P') || (id == 'I03O')) {
			RemoveItem(it);
			SimError(GetOwningPlayer(GetTriggerUnit()), "Для покупки это предмета не нужен рецепт!");
		else
			itemlevel[LoadInteger(udg_hash, id, 0)] = LoadInteger(udg_hash, id, 0);
			lopa[0] = 0;
			udg_Show_Item_Link_Text[true] = true;
			udg_Integer_Item_Recipe_Level[itemlevel] = itemlevel;
			while (true) {
				if ((itemlevel < lopa) || (udg_Integer_Item_Recipe_Level < 0)) break;
				h[itemlevel * $C] = itemlevel * $C;
				LinkItems(LoadInteger(udg_hash, id, h + 1), LoadInteger(udg_hash, id, h + 2), LoadInteger(udg_hash, id, h + 3), LoadInteger(udg_hash, id, h + 4), LoadInteger(udg_hash, id, h + 5), LoadInteger(udg_hash, id, h + 6), LoadInteger(udg_hash, id, h + 7), LoadInteger(udg_hash, id, h + 8), LoadInteger(udg_hash, id, h + 9), LoadInteger(udg_hash, id, h + $A), LoadInteger(udg_hash, id, h + $B), LoadStr(udg_hash, id, h + $C), true);
				itemlevel[itemlevel - 1] = itemlevel - 1;
			}
			itemlevel[0] = 0;
			h[0] = 0;
		}
	else
		if (id != 'I03A' && id != 'I03B' && id != 'I013' && id != 'I014' && id != 'I016' && id != 'I017' && id != 'I01Y') {
			LinkItems(1, 'I01U', 1, 'I01K', 1, 'I004', 0, 0, 0, 0, 'I01S', "", false);
			LinkItems(2, 'I00F', 1, 'I00E', 0, 0, 0, 0, 0, 0, 'I00J', "", false);
			LinkItems(1, 'I02A', 1, 'I00H', 1, 'I021', 0, 0, 0, 0, 'I03N', "", false);
		}
	}
	it[null] = null;
}
void InitTrig_ItemPickedUp() {
	int index = 0;
	gg_trg_ItemPickedUp[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_ItemPickedUp, Player(index), EVENT_PLAYER_UNIT_PICKUP_ITEM, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddAction(gg_trg_ItemPickedUp, Trig_ItemPickedUp_Actions);
}
bool Trig_ChargesConnecting_Func002C() {
	return (GetItemTypeId(GetManipulatedItem()) != 'I055') && (GetItemTypeId(GetManipulatedItem()) != 'I056') && (GetItemTypeId(GetManipulatedItem()) != 'I057') && (GetItemTypeId(GetManipulatedItem()) != 'I058');
}
bool Trig_ChargesConnecting_Conditions() {
	return (GetItemCharges(GetManipulatedItem()) > 0) && (Trig_ChargesConnecting_Func002C());
}
bool Trig_ChargesConnecting_Func005C() {
	return (UnitHasItemOfTypeBJ(GetManipulatingUnit(), GetItemTypeId(GetManipulatedItem())) == false);
}
void Trig_ChargesConnecting_Actions() {
	UnitRemoveItemSwapped(GetManipulatedItem(), GetManipulatingUnit());
	if ((Trig_ChargesConnecting_Func005C())) {
		CreateItemLoc(GetItemTypeId(GetManipulatedItem()), GetUnitLoc(GetManipulatingUnit()));
		DisableTrigger(GetTriggeringTrigger());
		UnitAddItem(GetManipulatingUnit(), bj_lastCreatedItem);
		EnableTrigger(GetTriggeringTrigger());
		SetItemCharges(bj_lastCreatedItem, GetItemCharges(GetManipulatedItem()));
	else
		SetItemCharges(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(), GetItemTypeId(GetManipulatedItem())), (GetItemCharges(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(), GetItemTypeId(GetManipulatedItem()))) + GetItemCharges(GetManipulatedItem())));
	}
	RemoveItem(GetManipulatedItem());
}
void InitTrig_ChargesConnecting() {
	gg_trg_ChargesConnecting[CreateTrigger()] = CreateTrigger();
	TriggerRegisterAnyUnitEventBJ(gg_trg_ChargesConnecting, EVENT_PLAYER_UNIT_PICKUP_ITEM);
	TriggerAddCondition(gg_trg_ChargesConnecting, Condition(Trig_ChargesConnecting_Conditions));
	TriggerAddAction(gg_trg_ChargesConnecting, Trig_ChargesConnecting_Actions);
}
bool Trig_Remove_Dammi_Items_Func003C() {
	return (GetItemTypeId(GetManipulatedItem()) == 'I035');
}
bool Trig_Remove_Dammi_Items_Conditions() {
	return (Trig_Remove_Dammi_Items_Func003C());
}
void Trig_Remove_Dammi_Items_Actions() {
	RemoveItem(GetManipulatedItem());
	SimError(GetOwningPlayer(GetTriggerUnit()), "Для покупки это предмета не нужен рецепт!");
}
void InitTrig_Remove_Dammi_Items() {
	gg_trg_Remove_Dammi_Items[CreateTrigger()] = CreateTrigger();
	DisableTrigger(gg_trg_Remove_Dammi_Items);
	TriggerRegisterAnyUnitEventBJ(gg_trg_Remove_Dammi_Items, EVENT_PLAYER_UNIT_PICKUP_ITEM);
	TriggerAddCondition(gg_trg_Remove_Dammi_Items, Condition(Trig_Remove_Dammi_Items_Conditions));
	TriggerAddAction(gg_trg_Remove_Dammi_Items, Trig_Remove_Dammi_Items_Actions);
}
void Trig_Save_Items_Cost_Actions() {
	SaveInteger(udg_hash, 'I00I', 'x', $3ED);
	SaveInteger(udg_hash, 'I01G', 'x', $D0C);
	SaveInteger(udg_hash, 'I03W', 'x', $D70);
	SaveInteger(udg_hash, 'I036', 'x', $546);
	SaveInteger(udg_hash, 'I05A', 'x', 5150);
	SaveInteger(udg_hash, 'I04Z', 'x', 8100);
	SaveInteger(udg_hash, 'I01U', 'x', $67C);
	SaveInteger(udg_hash, 'I03U', 'x', $7DF);
	SaveInteger(udg_hash, 'I02J', 'x', $4E2);
	SaveInteger(udg_hash, 'I01B', 'x', $60E);
	SaveInteger(udg_hash, 'I01X', 'x', $73A);
	SaveInteger(udg_hash, 'I052', 'x', $596);
	SaveInteger(udg_hash, 'I053', 'x', $6C2);
	SaveInteger(udg_hash, 'I051', 'x', 8710);
	SaveInteger(udg_hash, 'I03Q', 'x', $654);
	SaveInteger(udg_hash, 'I048', 'x', 9815);
	SaveInteger(udg_hash, 'I00G', 'x', $7A8);
	SaveInteger(udg_hash, 'I01Q', 'x', $9CE);
	SaveInteger(udg_hash, 'I01V', 'x', $BF4);
	SaveInteger(udg_hash, 'I02N', 'x', 4900);
	SaveInteger(udg_hash, 'I03N', 'x', $465);
	SaveInteger(udg_hash, 'I042', 'x', $979);
	SaveInteger(udg_hash, 'I03S', 'x', $712);
	SaveInteger(udg_hash, 'I02U', 'x', $6AE);
	SaveInteger(udg_hash, 'I00C', 'x', $D5C);
	SaveInteger(udg_hash, 'I00A', 'x', $5C3);
	SaveInteger(udg_hash, 'I04V', 'x', 4100);
	SaveInteger(udg_hash, 'I044', 'x', $AB4);
	SaveInteger(udg_hash, 'I00J', 'x', 980);
	SaveInteger(udg_hash, 'I03G', 'x', $5AA);
	SaveInteger(udg_hash, 'I04L', 'x', 925);
	SaveInteger(udg_hash, 'I02I', 'x', 765);
	SaveInteger(udg_hash, 'I02T', 'x', 7000);
	SaveInteger(udg_hash, 'I04U', 'x', 5250);
	SaveInteger(udg_hash, 'I03K', 'x', $A2D);
	SaveInteger(udg_hash, 'I03L', 'x', $E01);
	SaveInteger(udg_hash, 'I03M', 'x', $4FB);
	SaveInteger(udg_hash, 'I04X', 'x', $4FB);
	SaveInteger(udg_hash, 'I055', 'x', $4F6);
	SaveInteger(udg_hash, 'I056', 'x', $686);
	SaveInteger(udg_hash, 'I057', 'x', $816);
	SaveInteger(udg_hash, 'I058', 'x', $9A6);
	SaveInteger(udg_hash, 'I02E', 'x', $834);
	SaveInteger(udg_hash, 'I02F', 'x', $AB9);
	SaveInteger(udg_hash, 'I01S', 'x', $875);
	SaveInteger(udg_hash, 'I03Y', 'x', 955);
	SaveInteger(udg_hash, 'I02G', 'x', 4805);
	SaveInteger(udg_hash, 'I00D', 'x', 275);
	SaveInteger(udg_hash, 'I022', 'x', 350);
	SaveInteger(udg_hash, 'I00N', 'x', $C8);
	SaveInteger(udg_hash, 'I027', 'x', 450);
	SaveInteger(udg_hash, 'I003', 'x', 475);
	SaveInteger(udg_hash, 'I026', 'x', 425);
	SaveInteger(udg_hash, 'I004', 'x', '}');
	SaveInteger(udg_hash, 'I001', 'x', 260);
	SaveInteger(udg_hash, 'I01K', 'x', 380);
	SaveInteger(udg_hash, 'I00H', 'x', 375);
	SaveInteger(udg_hash, 'I00Y', 'x', 650);
	SaveInteger(udg_hash, 'I00E', 'x', $E6);
	SaveInteger(udg_hash, 'I02C', 'x', 360);
	SaveInteger(udg_hash, 'I01A', 'x', 500);
	SaveInteger(udg_hash, 'I02A', 'x', 350);
	SaveInteger(udg_hash, 'I015', 'x', 380);
	SaveInteger(udg_hash, 'I00Z', 'x', 300);
	SaveInteger(udg_hash, 'I00F', 'x', 375);
	SaveInteger(udg_hash, 'I021', 'x', 400);
	SaveInteger(udg_hash, 'I023', 'x', $E1);
	SaveInteger(udg_hash, 'I00B', 'x', 600);
	SaveInteger(udg_hash, 'I01T', 'x', 350);
	SaveInteger(udg_hash, 'I006', 'x', $465);
	SaveInteger(udg_hash, 'I008', 'x', $ED8);
	SaveInteger(udg_hash, 'I009', 'x', 4700);
	SaveInteger(udg_hash, 'I00L', 'x', 5600);
	SaveInteger(udg_hash, 'I00S', 'x', $555);
	SaveInteger(udg_hash, 'I00T', 'x', 5655);
	SaveInteger(udg_hash, 'I00V', 'x', 475);
	SaveInteger(udg_hash, 'I00X', 'x', $514);
	SaveInteger(udg_hash, 'I012', 'x', 5595);
	SaveInteger(udg_hash, 'I01C', 'x', 860);
	SaveInteger(udg_hash, 'I01W', 'x', 4500);
	SaveInteger(udg_hash, 'I02H', 'x', $C1C);
	SaveInteger(udg_hash, 'I02P', 'x', 6300);
	SaveInteger(udg_hash, 'I02R', 'x', $51E);
	SaveInteger(udg_hash, 'I02S', 'x', $712);
	SaveInteger(udg_hash, 'I02W', 'x', $906);
	SaveInteger(udg_hash, 'I02X', 'x', $AFA);
	SaveInteger(udg_hash, 'I02Y', 'x', $CEE);
	SaveInteger(udg_hash, 'I030', 'x', $708);
}
void InitTrig_Save_Items_Cost() {
	gg_trg_Save_Items_Cost[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEvent(gg_trg_Save_Items_Cost, 10., false);
	TriggerAddAction(gg_trg_Save_Items_Cost, Trig_Save_Items_Cost_Actions);
}
void Trig_IceBoss_onbase_Actions() {
	timer tonbase = GetExpiredTimer();
	int honbase = GetHandleId(tonbase);
	int ishod = LoadInteger(udg_hash, honbase, 3);
	unit boss = LoadUnitHandle(udg_hash, honbase, 1);
	group gruppa = CreateGroup();
	unit Picked;
	float xc = GetRectCenterX(gg_rct_Respawn_Heroes);
	float yc = GetRectCenterY(gg_rct_Respawn_Heroes);
	fogmodifier fm = LoadFogModifierHandle(udg_hash, honbase, 2);
	texttag txt;
	float vel = .0221875;
	float angle = 45. + GetRandomReal(.0, 90.);
	float xvel = vel * Cos(angle * bj_DEGTORAD);
	float yvel = vel * Sin(angle * bj_DEGTORAD);
	int dead = 0;
	float perekluchatel = .1;
	ShowAndFlushAllPlayerDamage(false);
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
	CinematicModeExBJ(false, bj_FORCE_ALL_PLAYERS, bj_CINEMODE_INTERFACEFADE);
	CinematicFadeBJ(0, 5., "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0);
	while (true) {
		Picked[FirstOfGroup(gruppa)] = FirstOfGroup(gruppa);
		if (Picked == null) break;
		if (perekluchatel >= 0) {
			perekluchatel[-perekluchatel] = -perekluchatel;
			perekluchatel[perekluchatel - 50.] = perekluchatel - 50.;
		else
			perekluchatel[-perekluchatel] = -perekluchatel;
			perekluchatel[perekluchatel + 50.] = perekluchatel + 50.;
		}
		xc[GetRectCenterX(gg_rct_Respawn_Heroes) + perekluchatel] = GetRectCenterX(gg_rct_Respawn_Heroes) + perekluchatel;
		yc[GetRectCenterY(gg_rct_Respawn_Heroes)] = GetRectCenterY(gg_rct_Respawn_Heroes);
		ReviveHero(Picked, xc, yc, true);
		SetUnitPosition(Picked, xc, yc);
		SetUnitFacing(Picked, 270.);
		SetUnitState(Picked, UNIT_STATE_LIFE, $540BE3FF);
		SetUnitState(Picked, UNIT_STATE_MANA, $540BE3FF);
		if (ishod == 0) {
			txt[CreateTextTag()] = CreateTextTag();
			dead[LoadInteger(udg_hash, GetHandleId(Picked), 1)] = LoadInteger(udg_hash, GetHandleId(Picked), 1);
			if (dead == 1) {
				SetTextTagText(txt, "|cFFFFFF00+850|r", .035);
				AddHeroXP(Picked, $6A4, true);
				SetPlayerState(GetOwningPlayer(Picked), PLAYER_STATE_RESOURCE_GOLD, (GetPlayerState(GetOwningPlayer(Picked), PLAYER_STATE_RESOURCE_GOLD) + 750));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl", Picked, "overhead"));
				if (GetLocalPlayer() == GetOwningPlayer(Picked)) {
					DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Вы получили " + udg_ColorString[23] + I2S(850) + " золота|r!!!");
				}
			else
				SetTextTagText(txt, "|cFFFFFF00+2600|r", .045);
				AddHeroXP(Picked, 5500, true);
				SetPlayerState(GetOwningPlayer(Picked), PLAYER_STATE_RESOURCE_GOLD, (GetPlayerState(GetOwningPlayer(Picked), PLAYER_STATE_RESOURCE_GOLD) + $708));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl", Picked, "overhead"));
				if (GetLocalPlayer() == GetOwningPlayer(Picked)) {
					DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Вы получили " + udg_ColorString[23] + I2S($A28) + " золота|r!!!");
				}
			}
			SetTextTagPos(txt, GetUnitX(Picked), GetUnitY(Picked), .0);
			SetTextTagColor(txt, 0, 0, 0, 50);
			SetTextTagVelocity(txt, xvel, yvel);
			SetTextTagPermanent(txt, false);
			SetTextTagLifespan(txt, 4.);
			SetTextTagFadepoint(txt, .0);
			txt[null] = null;
		}
		if ((GetLocalPlayer() == GetOwningPlayer(Picked))) {
			ResetToGameCamera(.0);
			if (ishod == 1) {
				DisplayTextToPlayer(GetOwningPlayer(Picked), 0, 0, "|cFFFF0000ВЫ ПРОИГРАЛИ БИТВУ С БОССОМ!!!|r");
			else
				DisplayTextToPlayer(GetOwningPlayer(Picked), 0, 0, "|cFFFFFF00ВЫ ПОБЕДИЛИ В БИТВЕ С БОССОМ!!!|r");
			}
			ResetToGameCamera(.0);
			PanCameraToTimed(xc, yc, .0);
			SelectUnit(Picked, true);
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	EnableTrigger(gg_trg_Hero_Dead);
	Picked[null] = null;
	GroupEnumUnitsInRect(gruppa, gg_rct_6, null);
	while (true) {
		Picked[FirstOfGroup(gruppa)] = FirstOfGroup(gruppa);
		if (Picked == null) break;
		if (GetUnitTypeId(Picked) != 'h00C' && GetUnitTypeId(Picked) != 'h00B' && GetUnitTypeId(Picked) != 'h00U') {
			RemoveUnit(Picked);
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	if (TriggerEvaluate(gg_trg_GameEndWin)) {
		TriggerExecute(gg_trg_GameEndWin);
	}
	Picked[null] = null;
	RemoveWeatherEffect(udg_BossFightWeather);
	udg_BossFightWeather[null] = null;
	FlushChildHashtable(udg_hash, GetHandleId(boss));
	RemoveUnit(boss);
	boss[null] = null;
	DestroyFogModifier(fm);
	fm[null] = null;
	DestroyGroup(gruppa);
	gruppa[null] = null;
	FlushChildHashtable(udg_hash, honbase);
	DestroyTimer(tonbase);
	tonbase[null] = null;
}
void Trig_IceBoss_end_Actions() {
	timer tend = GetExpiredTimer();
	int hend = GetHandleId(tend);
	unit boss = LoadUnitHandle(udg_hash, hend, 1);
	fogmodifier fm = CreateFogModifierRect(Player(0), FOG_OF_WAR_VISIBLE, gg_rct_6, true, true);
	int lop = 0;
	int ishod = LoadInteger(udg_hash, hend, 2);
	timer tonbase = CreateTimer();
	int honbase = GetHandleId(tonbase);
	group g = CreateGroup();
	unit Picked;
	SaveUnitHandle(udg_hash, honbase, 1, boss);
	SaveFogModifierHandle(udg_hash, honbase, 2, fm);
	SaveInteger(udg_hash, honbase, 3, ishod);
	GroupEnumUnitsInRect(g, gg_rct_6, null);
	while (true) {
		if (lop > 9) break;
		if ((GetLocalPlayer() == Player(lop))) {
			CameraSetupApplyForceDuration(gg_cam_Camera_BossFightStart, true, .0);
			SetCameraRotateMode(GetRectCenterX(gg_rct_6), GetRectCenterY(gg_rct_6), bj_DEGTORAD * 360., 6.);
		}
		lop[lop + 1] = lop + 1;
	}
	TimerStart(tonbase, 6., false, Trig_IceBoss_onbase_Actions);
	if (ishod == 1) {
		IssuePointOrderById(boss, $D0012, GetRectCenterX(gg_rct_6), GetRectCenterY(gg_rct_6));
	else
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (GetOwningPlayer(Picked) == Player($B)) {
				KillUnit(Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
		Picked[null] = null;
	}
	CinematicModeExBJ(true, bj_FORCE_ALL_PLAYERS, bj_CINEMODE_INTERFACEFADE);
	CinematicFadeBJ(1, 6., "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1);
	FlushChildHashtable(udg_hash, hend);
	DestroyTimer(tend);
	tend[null] = null;
	boss[null] = null;
	fm[null] = null;
	tonbase[null] = null;
	DestroyGroup(g);
	g[null] = null;
}
void Trig_IceBoss_ActionWithWait_Actions() {
	timer twact = GetExpiredTimer();
	int hwact = GetHandleId(twact);
	unit boss = LoadUnitHandle(udg_hash, hwact, 1);
	IssueImmediateOrderById(boss, $D00FC);
	DestroyTimer(twact);
	twact[null] = null;
	FlushChildHashtable(udg_hash, hwact);
	boss[null] = null;
}
void Trig_IceBoss_No_zaniat_Actions() {
	timer t = GetExpiredTimer();
	unit boss = LoadUnitHandle(udg_hash, GetHandleId(t), 1);
	bool zaniat = LoadBoolean(udg_hash, GetHandleId(boss), $A);
	zaniat[false] = false;
	SaveBoolean(udg_hash, GetHandleId(boss), $A, zaniat);
	FlushChildHashtable(udg_hash, GetHandleId(t));
}
void Trig_IceBoss_hpcheck_Actions() {
	float xc = GetRectCenterX(gg_rct_6);
	float yc = GetRectCenterY(gg_rct_6);
	timer thpcheck = GetExpiredTimer();
	int hhpcheck = GetHandleId(thpcheck);
	unit boss = LoadUnitHandle(udg_hash, hhpcheck, 1);
	int stage = LoadInteger(udg_hash, hhpcheck, 2);
	int dammicheck = LoadInteger(udg_hash, hhpcheck, 4);
	float dx = GetUnitX(boss) - xc;
	float dy = GetUnitY(boss) - yc;
	timer twact = CreateTimer();
	int hwact = GetHandleId(twact);
	timer taltars;
	bool zaniat = LoadBoolean(udg_hash, GetHandleId(boss), $A);
	int cdwall = LoadInteger(udg_hash, GetHandleId(boss), 41);
	int cdstorm = LoadInteger(udg_hash, GetHandleId(boss), 42);
	int cdrain = LoadInteger(udg_hash, GetHandleId(boss), 43);
	int cdpunishment = LoadInteger(udg_hash, GetHandleId(boss), 44);
	int cdblink = LoadInteger(udg_hash, GetHandleId(boss), 45);
	group grp = CreateGroup();
	timer tcd;
	timer tgol;
	group heroes = CreateGroup();
	unit Picked;
	int kolvo = 0;
	int random = GetRandomInt(1, 4);
	float dist;
	timer tend;
	int hend;
	int ishod = 0;
	effect ef;
	player p = Player($C);
	int itemrand = R2I($F + 5 * CountPlayersInForceBJ(udg_IGRAET));
	float itemx = (GetRandomReal(-1350., 100.));
	float itemy = (GetRandomReal(1900., 3450.));
	unit dammi;
	group geroi = CreateGroup();
	if (GetRandomInt(1, 'd') <= itemrand) {
		CreatePotion(itemx, itemy, 3, 6);
	}
	if ((zaniat == false && stage == 0 && GetUnitState(boss, UNIT_STATE_LIFE) > 140000. && GetUnitState(boss, UNIT_STATE_LIFE) < 120000.) || (stage == 1 && GetUnitState(boss, UNIT_STATE_LIFE) > 100000. && GetUnitState(boss, UNIT_STATE_LIFE) < 75000.) || (stage == 2 && GetUnitState(boss, UNIT_STATE_LIFE) > 30000. && GetUnitState(boss, UNIT_STATE_LIFE) < 5000.)) {
		stage[stage + 1] = stage + 1;
		zaniat[true] = true;
		SaveBoolean(udg_hash, GetHandleId(boss), $A, zaniat);
		SaveInteger(udg_hash, hhpcheck, 2, stage);
		SaveUnitHandle(udg_hash, hwact, 1, boss);
		if (SquareRoot(dx * dx + dy * dy) > 500) {
			IssuePointOrderById(boss, $D0012, xc + GetRandomReal(-250., 250.), yc + GetRandomReal(-250., 250.));
			SetUnitPathing(boss, false);
			TimerStart(twact, 4., false, Trig_IceBoss_ActionWithWait_Actions);
		else
			TimerStart(twact, .25, false, Trig_IceBoss_ActionWithWait_Actions);
		}
	}
	if (cdwall > 0) {
		SaveInteger(udg_hash, GetHandleId(boss), 41, cdwall - 1);
	}
	if (cdstorm > 0) {
		SaveInteger(udg_hash, GetHandleId(boss), 42, cdstorm - 1);
	}
	if (cdrain > 0) {
		SaveInteger(udg_hash, GetHandleId(boss), 43, cdrain - 1);
	}
	if (cdpunishment > 0) {
		SaveInteger(udg_hash, GetHandleId(boss), 44, cdpunishment - 1);
	}
	if (cdblink > 0) {
		SaveInteger(udg_hash, GetHandleId(boss), 45, cdblink - 1);
	}
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, geroi);
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, grp);
	while (true) {
		Picked[FirstOfGroup(grp)] = FirstOfGroup(grp);
		if (Picked == null) break;
		if (IsUnitType(Picked, UNIT_TYPE_HERO) && Picked != boss && GetUnitState(Picked, UNIT_STATE_LIFE) > .405) {
			GroupAddUnit(heroes, Picked);
		}
		GroupRemoveUnit(grp, Picked);
	}
	FilterMostNearUnit(heroes, boss);
	Picked[null] = null;
	AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodSorceress.mdl", udg_Unit_FilterMostNearUnit, "chest");
	dammicheck[dammicheck + 1] = dammicheck + 1;
	if (dammicheck == 8 || dammicheck == 16) {
		dammi[CreateUnit(Player($B), 'h00U', GetUnitX(boss), GetUnitY(boss), .0)] = CreateUnit(Player($B), 'h00U', GetUnitX(boss), GetUnitY(boss), .0);
		UnitApplyTimedLife(dammi, 'BTLF', 7.);
		UnitAddAbility(dammi, 'A04H');
		IssuePointOrderById(dammi, $D0079, GetUnitX(udg_Unit_FilterMostNearUnit), GetUnitY(udg_Unit_FilterMostNearUnit));
	}
	if (dammicheck == 18) {
		dammicheck[0] = 0;
	}
	SaveInteger(udg_hash, hhpcheck, 4, dammicheck);
	if (zaniat == false) {
		if (random == 1 && cdwall <= 0 && udg_Unit_FilterMostNearUnit != null) {
			IssuePointOrderById(boss, $D027A, GetUnitX(udg_Unit_FilterMostNearUnit), GetUnitY(udg_Unit_FilterMostNearUnit));
			SaveInteger(udg_hash, GetHandleId(boss), 41, 16);
		}
		if (random == 2 && SquareRoot(dx * dx + dy * dy) < 700 && cdstorm <= 0) {
			IssueImmediateOrderById(boss, $D0278);
			SaveInteger(udg_hash, GetHandleId(boss), 42, 19);
			zaniat[true] = true;
			tcd[CreateTimer()] = CreateTimer();
			SaveBoolean(udg_hash, GetHandleId(boss), $A, zaniat);
			SaveInteger(udg_hash, GetHandleId(boss), $C, 20);
			SaveUnitHandle(udg_hash, GetHandleId(tcd), 1, boss);
			TimerStart(tcd, 3.5, false, Trig_IceBoss_No_zaniat_Actions);
			tcd[null] = null;
		}
		if (random == 3 && SquareRoot(dx * dx + dy * dy) < 700 && cdrain <= 0) {
			IssuePointOrderById(boss, $D010D, GetUnitX(boss) + $A * Cos(GetUnitFacing(boss) * bj_DEGTORAD), GetUnitY(boss) + $A * Sin(GetUnitFacing(boss) * bj_DEGTORAD));
			zaniat[true] = true;
			SaveInteger(udg_hash, GetHandleId(boss), 43, 22);
			tcd[CreateTimer()] = CreateTimer();
			SaveBoolean(udg_hash, GetHandleId(boss), $A, zaniat);
			SaveInteger(udg_hash, GetHandleId(boss), $C, 20);
			SaveUnitHandle(udg_hash, GetHandleId(tcd), 1, boss);
			TimerStart(tcd, 6., false, Trig_IceBoss_No_zaniat_Actions);
			tcd[null] = null;
		}
		if (random == 4 && cdpunishment <= 0 && udg_Unit_FilterMostNearUnit != null) {
			TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS, boss, "FrostLich the Freezing in Ice", gg_snd_HeroLichYesAttack1, udg_ColorString[GetPlayerId(GetOwningPlayer(udg_Unit_FilterMostNearUnit)) + 1] + GetPlayerName(GetOwningPlayer(udg_Unit_FilterMostNearUnit)) + "|r, |cFFAFE6FFПочувствуй Зов Могилы!!!...|r", 0, 2.2, false);
			SaveInteger(udg_hash, GetHandleId(boss), 44, $C);
			IssueTargetOrderById(boss, $D00DD, udg_Unit_FilterMostNearUnit);
		}
	}
	if (cdblink <= 0 && zaniat == false) {
		dist[GetRandomReal(-800., -400.)] = GetRandomReal(-800., -400.);
		SaveInteger(udg_hash, GetHandleId(boss), 45, 25);
		IssuePointOrderById(boss, $D022D, GetUnitX(boss) + dist * Cos(bj_RADTODEG * Atan2(dx, dy) * bj_DEGTORAD), GetUnitY(boss) + dist * Sin(bj_RADTODEG * Atan2(dx, dy) * bj_DEGTORAD));
		DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Shiva'sWrath.mdl", boss, "origin"));
	}
	if (SquareRoot(dx * dx + dy * dy) > $4B0 && zaniat == false) {
		SetUnitPosition(boss, xc, yc);
	}
	GroupClear(heroes);
	if (GetUnitState(boss, UNIT_STATE_LIFE) < .405) {
		tend[CreateTimer()] = CreateTimer();
		hend[GetHandleId(tend)] = GetHandleId(tend);
		SaveInteger(udg_hash, hend, 2, ishod);
		SaveUnitHandle(udg_hash, hend, 1, boss);
		TimerStart(tend, 3., false, Trig_IceBoss_end_Actions);
		taltars[LoadTimerHandle(udg_hash, hhpcheck, 3)] = LoadTimerHandle(udg_hash, hhpcheck, 3);
		FlushChildHashtable(udg_hash, GetHandleId(taltars));
		DestroyTimer(taltars);
		GroupEnumUnitsInRect(heroes, gg_rct_6, null);
		DestroyTimer(thpcheck);
		tend[null] = null;
		FlushChildHashtable(udg_hash, hhpcheck);
	}
	GroupClear(heroes);
	while (true) {
		Picked[FirstOfGroup(geroi)] = FirstOfGroup(geroi);
		if (Picked == null) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) < .405) {
			kolvo[kolvo + 1] = kolvo + 1;
			SaveInteger(udg_hash, GetHandleId(Picked), 1, 1);
		}
		GroupRemoveUnit(geroi, Picked);
	}
	Picked[null] = null;
	if (kolvo >= CountUnitsInGroup(udg_Gruppa_HeroUnitov_Geroev)) {
		tend[CreateTimer()] = CreateTimer();
		hend[GetHandleId(tend)] = GetHandleId(tend);
		SaveInteger(udg_hash, hend, 2, ishod + 1);
		SaveUnitHandle(udg_hash, hend, 1, boss);
		taltars[LoadTimerHandle(udg_hash, hhpcheck, 3)] = LoadTimerHandle(udg_hash, hhpcheck, 3);
		FlushChildHashtable(udg_hash, GetHandleId(taltars));
		DestroyTimer(taltars);
		TimerStart(tend, 3., false, Trig_IceBoss_end_Actions);
		DestroyTimer(thpcheck);
		tend[null] = null;
		FlushChildHashtable(udg_hash, hhpcheck);
	}
	thpcheck[null] = null;
	boss[null] = null;
	twact[null] = null;
	GroupClear(grp);
	DestroyGroup(grp);
	grp[null] = null;
	GroupClear(heroes);
	DestroyGroup(heroes);
	GroupClear(geroi);
	DestroyGroup(geroi);
	geroi[null] = null;
	heroes[null] = null;
	p[null] = null;
	dammi[null] = null;
}
void Trig_IceBoss_frasa_Actions() {
	timer tfrasa = GetExpiredTimer();
	int hfrasa = GetHandleId(tfrasa);
	unit boss = LoadUnitHandle(udg_hash, hfrasa, 1);
	int random = GetRandomInt(1, 3);
	if (GetUnitState(boss, UNIT_STATE_LIFE) > .405) {
		if (random == 1) {
			TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS, boss, "FrostLich the Freezing in Ice", gg_snd_HeroLichReady1, "|cFFAFE6FFДревнее Зло... Непобедимо!!!|r", 0, 4.37, false);
		}
		if (random == 2) {
			TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS, boss, "FrostLich the Freezing in Ice", gg_snd_HeroLichYesAttack2, "|cFFAFE6FFВо Славу Тьмы!!!..|r", 0, 2.7, false);
		}
		if (random == 3) {
			TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS, boss, "FrostLich the Freezing in Ice", gg_snd_HeroLichYesAttack3, "|cFFAFE6FFИх Ждет Смерть!!!...|r", 0, 2.4, false);
		}
	else
		FlushChildHashtable(udg_hash, hfrasa);
		DestroyTimer(tfrasa);
	}
	tfrasa[null] = null;
	boss[null] = null;
}
void Trig_IceBoss_5sec_Actions() {
	timer t5sec = GetExpiredTimer();
	int h5sec = GetHandleId(t5sec);
	unit boss = LoadUnitHandle(udg_hash, h5sec, 1);
	group gruppa = CreateGroup();
	unit Picked;
	timer tfrasa = CreateTimer();
	int hfrasa = GetHandleId(tfrasa);
	timer thpcheck = CreateTimer();
	int hhpcheck = GetHandleId(thpcheck);
	int stage = 0;
	timer taltars = CreateTimer();
	bool zaniat = false;
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
	CinematicModeExBJ(false, bj_FORCE_ALL_PLAYERS, bj_CINEMODE_INTERFACEFADE);
	while (true) {
		Picked[FirstOfGroup(gruppa)] = FirstOfGroup(gruppa);
		if (Picked == null) break;
		PauseUnit(Picked, false);
		IssueTargetOrderById(Picked, $D000F, boss);
		if ((GetLocalPlayer() == GetOwningPlayer(Picked))) {
			ClearSelection();
			SelectUnit(Picked, true);
			ResetToGameCamera(.0);
			PanCameraToTimed(GetRectCenterX(gg_rct_6), GetRectCenterY(gg_rct_6), .0);
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	PauseUnit(boss, false);
	IssuePointOrderById(boss, $D0012, GetRectCenterX(gg_rct_6), GetRectCenterY(gg_rct_6));
	SaveUnitHandle(udg_hash, hfrasa, 1, boss);
	TimerStart(tfrasa, 13., true, Trig_IceBoss_frasa_Actions);
	SaveUnitHandle(udg_hash, hhpcheck, 1, boss);
	SaveInteger(udg_hash, hhpcheck, 2, stage);
	SaveTimerHandle(udg_hash, hhpcheck, 3, taltars);
	SaveBoolean(udg_hash, GetHandleId(boss), $A, zaniat);
	SaveInteger(udg_hash, GetHandleId(boss), 41, 0);
	SaveInteger(udg_hash, GetHandleId(boss), 42, 0);
	SaveInteger(udg_hash, GetHandleId(boss), 43, 0);
	SaveInteger(udg_hash, GetHandleId(boss), 44, 0);
	SaveInteger(udg_hash, GetHandleId(boss), 45, 20);
	SaveInteger(udg_hash, hhpcheck, 4, 0);
	TimerStart(thpcheck, 1., true, Trig_IceBoss_hpcheck_Actions);
	DestroyTimer(t5sec);
	FlushChildHashtable(udg_hash, h5sec);
	t5sec[null] = null;
	boss[null] = null;
	Picked[null] = null;
	tfrasa[null] = null;
	thpcheck[null] = null;
	taltars[null] = null;
	GroupClear(gruppa);
	DestroyGroup(gruppa);
	gruppa[null] = null;
}
void Trig_IceBoss_3sec_Actions() {
	timer t3sec = GetExpiredTimer();
	int h3sec = GetHandleId(t3sec);
	timer t5sec = CreateTimer();
	int h5sec = GetHandleId(t5sec);
	unit boss = LoadUnitHandle(udg_hash, h3sec, 1);
	SaveUnitHandle(udg_hash, h5sec, 1, boss);
	TimerStart(t5sec, 5., false, Trig_IceBoss_5sec_Actions);
	ForceCinematicSubtitles(true);
	TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS, boss, "FrostLich the Freezing in Ice", gg_snd_HeroLichReady1, "|cFFAFE6FFДревнее Зло... Непобедимо!!!|r", 0, 4.75, false);
	DestroyTimer(t3sec);
	FlushChildHashtable(udg_hash, h3sec);
	t3sec[null] = null;
	t5sec[null] = null;
	boss[null] = null;
}
void Trig_IceBoss_Actions() {
	float xc = GetRectCenterX(gg_rct_6);
	float yc = GetRectCenterY(gg_rct_6);
	float xp = xc - 1216.;
	float yp = yc + 1088.;
	int random;
	int end = 1;
	group gruppa = CreateGroup();
	unit Picked;
	float dist = -350;
	unit boss = CreateUnit(Player($B), 'N000', (xc - 500), yc, .0);
	timer t3sec = CreateTimer();
	int h3sec = GetHandleId(t3sec);
	udg_BossFightWeather[AddWeatherEffect(gg_rct_6, 'SNhs')] = AddWeatherEffect(gg_rct_6, 'SNhs');
	udg_BossFightWeather2[AddWeatherEffect(gg_rct_6, 'FDbh')] = AddWeatherEffect(gg_rct_6, 'FDbh');
	EnableWeatherEffect(udg_BossFightWeather, true);
	EnableWeatherEffect(udg_BossFightWeather2, true);
	DisableTrigger(gg_trg_Hero_Dead);
	EnableTrigger(gg_trg_Ice_Wall);
	EnableTrigger(gg_trg_Ice_Storm);
	EnableTrigger(gg_trg_Ice_Rain);
	EnableTrigger(gg_trg_Ice_Restoration);
	EnableTrigger(gg_trg_Cold_Punishment);
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
	SetAttackSpeedAbilityLevel(boss, 20 * CountPlayersInForceBJ(udg_IGRAET));
	SetAttackAbilityLevel(boss, 'd' * CountPlayersInForceBJ(udg_IGRAET));
	SetArmorAbilityLevel(boss, $A * CountPlayersInForceBJ(udg_IGRAET));
	CinematicModeExBJ(true, bj_FORCE_ALL_PLAYERS, bj_CINEMODE_INTERFACEFADE);
	CinematicFadeBJ(1, .0, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1);
	CinematicFadeBJ(0, 8.25, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1);
	while (true) {
		Picked[FirstOfGroup(gruppa)] = FirstOfGroup(gruppa);
		if (Picked == null) break;
		SetUnitPosition(Picked, (xc + 500), (yc + dist));
		SetUnitFacing(Picked, bj_RADTODEG * Atan2(yc - GetUnitY(Picked), xc - GetUnitX(Picked)));
		PauseUnit(Picked, true);
		ClearSelection();
		dist[dist + 'd'] = dist + 'd';
		if ((GetLocalPlayer() == GetOwningPlayer(Picked))) {
			CameraSetupApplyForceDuration(gg_cam_Camera_BossFightStart, true, .0);
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	SetHeroLevel(boss, 50, false);
	UnitAddAbility(boss, 'A00K');
	UnitAddAbility(boss, 'A03K');
	UnitAddAbility(boss, 'A03P');
	UnitAddAbility(boss, 'A043');
	UnitAddAbility(boss, 'A04B');
	UnitAddAbility(boss, 'A04D');
	PauseUnit(boss, true);
	SaveUnitHandle(udg_hash, h3sec, 1, boss);
	TimerStart(t3sec, 3., false, Trig_IceBoss_3sec_Actions);
	ShowAndFlushAllPlayerDamage(true);
	TimerStart(udg_TimerShowAndFlushAllPlayerDmg, 10000., false, null);
	while (true) {
		if (end > 16) break;
		yp[yp - $80] = yp - $80;
		bj_forLoopAIndex[1] = 1;
		while (true) {
			if (bj_forLoopAIndex > 20) break;
			random[GetRandomInt(1, $A)] = GetRandomInt(1, $A);
			if (random >= 1 && random <= 3) {
				SetTerrainType(xp, yp, 'Idki', -1, 2, 1);
			else
				if (random >= 4 && random <= 7) {
					SetTerrainType(xp, yp, 'Iice', -1, 2, 1);
				else
					SetTerrainType(xp, yp, 'Nice', -1, 2, 1);
				}
			}
			xp[xp + $80] = xp + $80;
			bj_forLoopAIndex[bj_forLoopAIndex + 1] = bj_forLoopAIndex + 1;
		}
		end[end + 1] = end + 1;
		xp[xc - 1216.] = xc - 1216.;
	}
	Picked[null] = null;
	boss[null] = null;
	GroupClear(gruppa);
	DestroyGroup(gruppa);
	gruppa[null] = null;
	t3sec[null] = null;
}
void InitTrig_Ice_Boss() {
	gg_trg_Ice_Boss[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Ice_Boss, Trig_IceBoss_Actions);
}
void Trig_Ice_Wall_Periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	int wait = LoadInteger(udg_hash, h, 2);
	float damage = LoadReal(udg_hash, h, 3);
	group gdamage = CreateGroup();
	group gdamage2 = CreateGroup();
	unit Picked;
	player p = GetOwningPlayer(caster);
	effect ef;
	int lopa = 1;
	unit dammi;
	if (wait > 0) {
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 2, wait);
		while (true) {
			if (lopa > 20) break;
			dammi[LoadUnitHandle(udg_hash, h, $A + lopa)] = LoadUnitHandle(udg_hash, h, $A + lopa);
			GroupEnumUnitsInRange(gdamage, GetUnitX(dammi), GetUnitY(dammi), 140., null);
			GroupAddGroup(gdamage, gdamage2);
			dammi[null] = null;
			lopa[lopa + 1] = lopa + 1;
		}
		while (true) {
			Picked[FirstOfGroup(gdamage2)] = FirstOfGroup(gdamage2);
			if (Picked == null) break;
			if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, p) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				UnitDamageTarget(caster, Picked, (damage / 10.), false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				if ((wait - (wait / $A) * $A) == 0) {
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIob\\AIobSpecialArt.mdl", Picked, "origin"));
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratFrostMissile\\ZigguratFrostMissile.mdl", Picked, "chest"));
				}
				if (GetUnitAbilityLevel(Picked, 'B008') <= 0) {
					dammi[CreateUnit(p, 'h00U', GetUnitX(Picked), GetUnitY(Picked), .0)] = CreateUnit(p, 'h00U', GetUnitX(Picked), GetUnitY(Picked), .0);
					UnitApplyTimedLife(dammi, 'BTLF', 2.);
					UnitAddAbility(dammi, 'A03M');
					IssueTargetOrderById(dammi, $D006B, Picked);
					dammi[null] = null;
				}
			}
			if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitType(Picked, UNIT_TYPE_HERO) == false && IsUnitAlly(Picked, p) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				if (GetUnitAbilityLevel(Picked, 'B009') <= 0) {
					dammi[CreateUnit(p, 'h00U', GetUnitX(Picked), GetUnitY(Picked), .0)] = CreateUnit(p, 'h00U', GetUnitX(Picked), GetUnitY(Picked), .0);
					UnitApplyTimedLife(dammi, 'BTLF', 2.);
					UnitAddAbility(dammi, 'A03I');
					SetUnitAbilityLevel(dammi, 'A03I', 1);
					IssueTargetOrderById(dammi, $D0101, Picked);
					dammi[null] = null;
				}
			}
			GroupRemoveUnit(gdamage2, Picked);
		}
	else
		lopa[1] = 1;
		while (true) {
			if (lopa > 20) break;
			dammi[LoadUnitHandle(udg_hash, h, $A + lopa)] = LoadUnitHandle(udg_hash, h, $A + lopa);
			KillUnit(dammi);
			ef[LoadEffectHandle(udg_hash, h, 40 + lopa)] = LoadEffectHandle(udg_hash, h, 40 + lopa);
			DestroyEffect(ef);
			dammi[null] = null;
			ef[null] = null;
			lopa[lopa + 1] = lopa + 1;
		}
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	caster[null] = null;
	ef[null] = null;
	Picked[null] = null;
	p[null] = null;
	GroupClear(gdamage);
	DestroyGroup(gdamage);
	gdamage[null] = null;
	GroupClear(gdamage2);
	DestroyGroup(gdamage2);
	gdamage2[null] = null;
	dammi[null] = null;
	ef[null] = null;
}
void Trig_Ice_Wall_Actions() {
	unit caster = GetSpellAbilityUnit();
	location loc;
	float xt;
	float yt;
	unit target = GetSpellTargetUnit();
	float angle;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	int wait = 'x';
	float damage = 150.;
	int lopa = 1;
	int lopb = 1;
	unit dammi;
	effect ef;
	player p = GetOwningPlayer(caster);
	float random;
	if (target != null) {
		xt[GetUnitX(target)] = GetUnitX(target);
		yt[GetUnitY(target)] = GetUnitY(target);
	else
		loc[GetSpellTargetLoc()] = GetSpellTargetLoc();
		xt[GetLocationX(loc)] = GetLocationX(loc);
		yt[GetLocationY(loc)] = GetLocationY(loc);
	}
	angle[bj_RADTODEG * Atan2(yt - GetUnitY(caster), xt - GetUnitX(caster))] = bj_RADTODEG * Atan2(yt - GetUnitY(caster), xt - GetUnitX(caster));
	xt[xt + 75. * Cos(angle * bj_DEGTORAD)] = xt + 75. * Cos(angle * bj_DEGTORAD);
	yt[yt + 75. * Sin(angle * bj_DEGTORAD)] = yt + 75. * Sin(angle * bj_DEGTORAD);
	angle[angle - 90.] = angle - 90.;
	xt[xt + 500. * Cos(angle * bj_DEGTORAD)] = xt + 500. * Cos(angle * bj_DEGTORAD);
	yt[yt + 500. * Sin(angle * bj_DEGTORAD)] = yt + 500. * Sin(angle * bj_DEGTORAD);
	while (true) {
		if (lopb > 2) break;
		while (true) {
			if (lopa > $A) break;
			random[GetRandomReal(.8, 1.25)] = GetRandomReal(.8, 1.25);
			dammi[CreateUnit(p, 'h00U', xt - ((lopa - 1) * 100.) * Cos(angle * bj_DEGTORAD), yt - ((lopa - 1) * 100.) * Sin(angle * bj_DEGTORAD), GetRandomReal(.0, 360.))] = CreateUnit(p, 'h00U', xt - ((lopa - 1) * 100.) * Cos(angle * bj_DEGTORAD), yt - ((lopa - 1) * 100.) * Sin(angle * bj_DEGTORAD), GetRandomReal(.0, 360.));
			SetUnitScale(dammi, random, random, random);
			ef[AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathTargetArt.mdl", dammi, "origin")] = AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathTargetArt.mdl", dammi, "origin");
			SaveUnitHandle(udg_hash, h, $A + lopa + ($A * (lopb - 1)), dammi);
			SaveEffectHandle(udg_hash, h, 40 + lopa + ($A * (lopb - 1)), ef);
			dammi[null] = null;
			ef[null] = null;
			lopa[lopa + 1] = lopa + 1;
		}
		xt[xt - 150. * Cos((angle + 90.) * bj_DEGTORAD)] = xt - 150. * Cos((angle + 90.) * bj_DEGTORAD);
		yt[yt - 150. * Sin((angle + 90.) * bj_DEGTORAD)] = yt - 150. * Sin((angle + 90.) * bj_DEGTORAD);
		lopb[lopb + 1] = lopb + 1;
		lopa[1] = 1;
	}
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveInteger(udg_hash, h, 2, wait);
	SaveReal(udg_hash, h, 3, damage);
	TimerStart(t, .1, true, Trig_Ice_Wall_Periodic_Actions);
	caster[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	target[null] = null;
	t[null] = null;
	p[null] = null;
}
bool Trig_Ice_Wall_Conditions() {
	return GetSpellAbilityId() == 'A03K';
}
void InitTrig_Ice_Wall() {
	int index = 0;
	gg_trg_Ice_Wall[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Ice_Wall, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Ice_Wall, Condition(Trig_Ice_Wall_Conditions));
	TriggerAddAction(gg_trg_Ice_Wall, Trig_Ice_Wall_Actions);
}
void Trig_Ice_Storm_Periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	float x = LoadReal(udg_hash, h, 2);
	float y = LoadReal(udg_hash, h, 3);
	int wait = LoadInteger(udg_hash, h, 4);
	float damage = LoadReal(udg_hash, h, 5);
	float angle = LoadReal(udg_hash, h, 6);
	group gdamage = CreateGroup();
	unit Picked;
	player p = GetOwningPlayer(caster);
	unit dammi;
	int order = GetUnitCurrentOrder(caster);
	int orderId;
	float dist;
	float xt;
	float yt;
	orderId[$D0278] = $D0278;
	if ((orderId != 0)) {
	else
		orderId[UnitId("channel")] = UnitId("channel");
		if ((orderId != 0)) {
		}
	}
	if (order == orderId && wait > 0) {
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 4, wait);
		dist[GetRandomReal(250., 600.)] = GetRandomReal(250., 600.);
		angle[angle + GetRandomReal(-60., 60.)] = angle + GetRandomReal(-60., 60.);
		xt[x + dist * Cos(angle * bj_DEGTORAD)] = x + dist * Cos(angle * bj_DEGTORAD);
		yt[y + dist * Sin(angle * bj_DEGTORAD)] = y + dist * Sin(angle * bj_DEGTORAD);
		angle[angle + 120.] = angle + 120.;
		SaveReal(udg_hash, h, 6, angle);
		GroupEnumUnitsInRange(gdamage, xt, yt, 200., null);
		DestroyEffect(AddSpecialEffect("war3mapImported\\Shiva'sWrath.mdl", xt, yt));
		dammi[CreateUnit(p, 'n00A', xt, yt, GetRandomReal(.0, 360.))] = CreateUnit(p, 'n00A', xt, yt, GetRandomReal(.0, 360.));
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl", dammi, "origin"));
		dammi[null] = null;
		while (true) {
			Picked[FirstOfGroup(gdamage)] = FirstOfGroup(gdamage);
			if (Picked == null) break;
			if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, p) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				dammi[CreateUnit(p, 'h00U', GetUnitX(Picked), GetUnitY(Picked), .0)] = CreateUnit(p, 'h00U', GetUnitX(Picked), GetUnitY(Picked), .0);
				UnitApplyTimedLife(dammi, 'BTLF', 2.);
				UnitAddAbility(dammi, 'A039');
				SetUnitAbilityLevel(dammi, 'A039', 1);
				IssueTargetOrderById(dammi, $D00CB, Picked);
				dammi[null] = null;
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl", Picked, "origin"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIob\\AIobSpecialArt.mdl", Picked, "origin"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratFrostMissile\\ZigguratFrostMissile.mdl", Picked, "chest"));
			}
			GroupRemoveUnit(gdamage, Picked);
		}
	else
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	caster[null] = null;
	Picked[null] = null;
	p[null] = null;
	GroupClear(gdamage);
	DestroyGroup(gdamage);
	gdamage[null] = null;
	dammi[null] = null;
}
void Trig_Ice_Storm_Actions() {
	unit caster = GetSpellAbilityUnit();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	timer t = CreateTimer();
	int h = GetHandleId(t);
	int wait = 6;
	float damage = 350;
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 2, x);
	SaveReal(udg_hash, h, 3, y);
	SaveInteger(udg_hash, h, 4, wait);
	SaveReal(udg_hash, h, 5, damage);
	SaveReal(udg_hash, h, 6, GetUnitFacing(caster));
	TimerStart(t, .5, true, Trig_Ice_Storm_Periodic_Actions);
	caster[null] = null;
	t[null] = null;
}
bool Trig_Ice_Storm_Conditions() {
	return GetSpellAbilityId() == 'A03P';
}
void InitTrig_Ice_Storm() {
	int index = 0;
	gg_trg_Ice_Storm[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Ice_Storm, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Ice_Storm, Condition(Trig_Ice_Storm_Conditions));
	TriggerAddAction(gg_trg_Ice_Storm, Trig_Ice_Storm_Actions);
}
bool Trig_Ice_Rain_Filter_Actions() {
	return (GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405 && IsUnitEnemy(GetFilterUnit(), udg_Temp_Player[1]) && IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) == false && IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(GetFilterUnit()) != 'h00U') != null;
}
void Trig_Ice_Rain_Periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	int wait = LoadInteger(udg_hash, h, 2);
	float damage = LoadReal(udg_hash, h, 3);
	float xt = LoadReal(udg_hash, h, 4);
	float yt = LoadReal(udg_hash, h, 5);
	float angle = LoadReal(udg_hash, h, 6);
	group gmissile = LoadGroupHandle(udg_hash, h, 7);
	int waitcreate = LoadInteger(udg_hash, h, 8);
	group gmissile2 = CreateGroup();
	group gdamage;
	group gdamage2 = CreateGroup();
	unit Picked;
	unit Picked2;
	unit missile;
	float xmissile;
	float ymissile;
	int hmissile;
	int missileflywait;
	float anglemissile;
	player p = GetOwningPlayer(caster);
	effect ef;
	bool stop;
	int order = GetUnitCurrentOrder(caster);
	int orderId;
	orderId[$D010D] = $D010D;
	if ((orderId != 0)) {
	else
		orderId[UnitId("rainofchaos")] = UnitId("rainofchaos");
		if ((orderId != 0)) {
		}
	}
	if (order == orderId && wait > 0) {
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 2, wait);
		udg_Temp_Player[p] = p;
		if (waitcreate > 0) {
			waitcreate[waitcreate - 1] = waitcreate - 1;
			SaveInteger(udg_hash, h, 8, waitcreate);
			xmissile[xt + GetRandomReal(-300., 300.) * Cos((angle - 90.) * bj_DEGTORAD)] = xt + GetRandomReal(-300., 300.) * Cos((angle - 90.) * bj_DEGTORAD);
			ymissile[yt + GetRandomReal(-300., 300.) * Sin((angle - 90.) * bj_DEGTORAD)] = yt + GetRandomReal(-300., 300.) * Sin((angle - 90.) * bj_DEGTORAD);
			anglemissile[angle + GetRandomReal(-30., 30.)] = angle + GetRandomReal(-30., 30.);
			missile[CreateUnit(p, 'h00U', xmissile, ymissile, anglemissile)] = CreateUnit(p, 'h00U', xmissile, ymissile, anglemissile);
			ef[AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl", missile, "chest")] = AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl", missile, "chest");
			UnitAddAbility(missile, 'Amrf');
			UnitRemoveAbility(missile, 'Amrf');
			SetUnitFlyHeight(missile, 50., .0);
			hmissile[GetHandleId(missile)] = GetHandleId(missile);
			SaveInteger(udg_hash, hmissile, 1, 0);
			SaveEffectHandle(udg_hash, hmissile, 2, ef);
			SaveStr(udg_hash, hmissile, 3, "Im missile");
			GroupAddUnit(gmissile, missile);
			SaveGroupHandle(udg_hash, h, 7, gmissile);
			missile[null] = null;
			ef[null] = null;
		}
		GroupAddGroup(gmissile, gmissile2);
		while (true) {
			missile[FirstOfGroup(gmissile2)] = FirstOfGroup(gmissile2);
			if (missile == null) break;
			anglemissile[GetUnitFacing(missile)] = GetUnitFacing(missile);
			xmissile[GetUnitX(missile) + 36. * Cos(anglemissile * bj_DEGTORAD)] = GetUnitX(missile) + 36. * Cos(anglemissile * bj_DEGTORAD);
			ymissile[GetUnitY(missile) + 36. * Sin(anglemissile * bj_DEGTORAD)] = GetUnitY(missile) + 36. * Sin(anglemissile * bj_DEGTORAD);
			gdamage[CreateGroup()] = CreateGroup();
			GroupEnumUnitsInRange(gdamage, xmissile, ymissile, 100., Filter(Trig_Ice_Rain_Filter_Actions));
			GroupAddGroup(gdamage, gdamage2);
			GroupClear(gdamage);
			DestroyGroup(gdamage);
			gdamage[null] = null;
			if (IsTerrainPathable(xmissile, ymissile, PATHING_TYPE_FLYABILITY) == false) {
				SetUnitPosition(missile, xmissile, ymissile);
			}
			hmissile[GetHandleId(missile)] = GetHandleId(missile);
			missileflywait[LoadInteger(udg_hash, hmissile, 1)] = LoadInteger(udg_hash, hmissile, 1);
			if (missileflywait >= 30) {
				KillUnit(missile);
				GroupRemoveUnit(gmissile, missile);
				SaveGroupHandle(udg_hash, h, 7, gmissile);
				ef[LoadEffectHandle(udg_hash, hmissile, 2)] = LoadEffectHandle(udg_hash, hmissile, 2);
				DestroyEffect(ef);
				FlushChildHashtable(udg_hash, hmissile);
				ef[null] = null;
				missile[null] = null;
			else
				SaveInteger(udg_hash, hmissile, 1, missileflywait + 1);
			}
			GroupRemoveUnit(gmissile2, missile);
		}
		while (true) {
			Picked[FirstOfGroup(gdamage2)] = FirstOfGroup(gdamage2);
			if (Picked == null) break;
			gdamage[CreateGroup()] = CreateGroup();
			GroupEnumUnitsInRange(gdamage, GetUnitX(Picked), GetUnitY(Picked), 100., null);
			stop[false] = false;
			while (true) {
				Picked2[FirstOfGroup(gdamage)] = FirstOfGroup(gdamage);
				if (Picked2 == null || stop) break;
				if (GetUnitState(Picked2, UNIT_STATE_LIFE) > .405 && GetOwningPlayer(Picked2) == p && GetUnitTypeId(Picked2) == 'h00U' && LoadStr(udg_hash, GetHandleId(Picked2), 3) == "Im missile") {
					hmissile[GetHandleId(Picked2)] = GetHandleId(Picked2);
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIob\\AIobSpecialArt.mdl", Picked, "origin"));
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratFrostMissile\\ZigguratFrostMissile.mdl", Picked, "chest"));
					UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
					StunUnitTimed(Picked, .66);
					missile[Picked2] = Picked2;
					KillUnit(missile);
					GroupRemoveUnit(gmissile, missile);
					SaveGroupHandle(udg_hash, h, 7, gmissile);
					ef[LoadEffectHandle(udg_hash, hmissile, 2)] = LoadEffectHandle(udg_hash, hmissile, 2);
					DestroyEffect(ef);
					FlushChildHashtable(udg_hash, hmissile);
					ef[null] = null;
					missile[null] = null;
					stop[true] = true;
				}
				GroupRemoveUnit(gdamage, Picked2);
			}
			GroupClear(gdamage);
			DestroyGroup(gdamage);
			gdamage[null] = null;
			GroupRemoveUnit(gdamage2, Picked);
		}
	else
		if (wait > 0) {
			while (true) {
				missile[FirstOfGroup(gmissile)] = FirstOfGroup(gmissile);
				if (missile == null) break;
				KillUnit(missile);
				hmissile[GetHandleId(missile)] = GetHandleId(missile);
				ef[LoadEffectHandle(udg_hash, hmissile, 2)] = LoadEffectHandle(udg_hash, hmissile, 2);
				DestroyEffect(ef);
				FlushChildHashtable(udg_hash, hmissile);
				ef[null] = null;
				GroupRemoveUnit(gmissile, missile);
				missile[null] = null;
			}
		}
		GroupClear(gmissile);
		DestroyGroup(gmissile);
		gmissile[null] = null;
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	caster[null] = null;
	ef[null] = null;
	Picked[null] = null;
	Picked2[null] = null;
	missile[null] = null;
	p[null] = null;
	GroupClear(gmissile2);
	DestroyGroup(gmissile2);
	gmissile2[null] = null;
	GroupClear(gdamage2);
	DestroyGroup(gdamage2);
	gdamage2[null] = null;
}
void Trig_Ice_Rain_Actions() {
	unit caster = GetSpellAbilityUnit();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	location loc;
	float xt;
	float yt;
	float xpoint;
	float ypoint;
	unit target = GetSpellTargetUnit();
	float angle;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	int wait = $AF;
	int waitcreate = $91;
	float damage = 150.;
	group gmissile = CreateGroup();
	if (target != null) {
		xt[GetUnitX(target)] = GetUnitX(target);
		yt[GetUnitY(target)] = GetUnitY(target);
	else
		loc[GetSpellTargetLoc()] = GetSpellTargetLoc();
		xt[GetLocationX(loc)] = GetLocationX(loc);
		yt[GetLocationY(loc)] = GetLocationY(loc);
	}
	angle[bj_RADTODEG * Atan2(yt - GetUnitY(caster), xt - GetUnitX(caster))] = bj_RADTODEG * Atan2(yt - GetUnitY(caster), xt - GetUnitX(caster));
	xpoint[x - 300. * Cos(angle * bj_DEGTORAD)] = x - 300. * Cos(angle * bj_DEGTORAD);
	ypoint[y - 300. * Sin(angle * bj_DEGTORAD)] = y - 300. * Sin(angle * bj_DEGTORAD);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveInteger(udg_hash, h, 2, wait);
	SaveReal(udg_hash, h, 3, damage);
	SaveReal(udg_hash, h, 4, xpoint);
	SaveReal(udg_hash, h, 5, ypoint);
	SaveReal(udg_hash, h, 6, angle);
	SaveGroupHandle(udg_hash, h, 7, gmissile);
	SaveInteger(udg_hash, h, 8, waitcreate);
	TimerStart(t, .04, true, Trig_Ice_Rain_Periodic_Actions);
	caster[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	target[null] = null;
	t[null] = null;
	gmissile[null] = null;
}
bool Trig_Ice_Rain_Conditions() {
	return GetSpellAbilityId() == 'A043';
}
void InitTrig_Ice_Rain() {
	int index = 0;
	gg_trg_Ice_Rain[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Ice_Rain, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Ice_Rain, Condition(Trig_Ice_Rain_Conditions));
	TriggerAddAction(gg_trg_Ice_Rain, Trig_Ice_Rain_Actions);
}
void Trig_Cold_Punishment_RefreshGroup_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit Picked = LoadUnitHandle(udg_hash, h, 1);
	group gdamage = LoadGroupHandle(udg_hash, h, 2);
	GroupRemoveUnit(gdamage, Picked);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
	Picked[null] = null;
	gdamage[null] = null;
}
void Trig_Cold_Punishment_Periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	unit target = LoadUnitHandle(udg_hash, h, 2);
	int wait = LoadInteger(udg_hash, h, 3);
	float damage = LoadReal(udg_hash, h, 4);
	float x = LoadReal(udg_hash, h, 5);
	float y = LoadReal(udg_hash, h, 6);
	group gdamage = LoadGroupHandle(udg_hash, h, 7);
	float xt;
	float yt;
	float angle;
	group g;
	unit Picked;
	player p;
	int lopa = 1;
	unit dammi;
	effect ef;
	bool destroy = false;
	int abilitylevel;
	timer tPicked;
	int htPicked;
	float time;
	if (GetUnitState(target, UNIT_STATE_LIFE) > .405 && wait > 0) {
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 3, wait);
		g[CreateGroup()] = CreateGroup();
		p[GetOwningPlayer(caster)] = GetOwningPlayer(caster);
		xt[GetUnitX(target)] = GetUnitX(target);
		yt[GetUnitY(target)] = GetUnitY(target);
		angle[bj_RADTODEG * Atan2(yt - y, xt - x)] = bj_RADTODEG * Atan2(yt - y, xt - x);
		x[x + 6. * Cos(angle * bj_DEGTORAD)] = x + 6. * Cos(angle * bj_DEGTORAD);
		y[y + 6. * Sin(angle * bj_DEGTORAD)] = y + 6. * Sin(angle * bj_DEGTORAD);
		SaveReal(udg_hash, h, 5, x);
		SaveReal(udg_hash, h, 6, y);
		while (true) {
			if (lopa > 5) break;
			dammi[LoadUnitHandle(udg_hash, h, 9 + lopa)] = LoadUnitHandle(udg_hash, h, 9 + lopa);
			SetUnitPosition(dammi, x + 75. * Cos((lopa * 72) * bj_DEGTORAD), y + 75. * Sin((lopa * 72) * bj_DEGTORAD));
			dammi[null] = null;
			lopa[lopa + 1] = lopa + 1;
		}
		GroupEnumUnitsInRange(g, x, y, 150., null);
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, p) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U' && IsUnitInGroup(Picked, gdamage) == false) {
				abilitylevel[2] = 2;
				if (Picked == target) {
					abilitylevel[4] = 4;
					UnitDamageTarget(caster, Picked, GetUnitState(target, UNIT_STATE_MAX_LIFE) / 2.5 + damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
					destroy[true] = true;
				}
				if (GetUnitAbilityLevel(Picked, 'B005') <= 0 || Picked == target) {
					UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
					dammi[CreateUnit(p, 'h00U', GetUnitX(Picked), GetUnitY(Picked), .0)] = CreateUnit(p, 'h00U', GetUnitX(Picked), GetUnitY(Picked), .0);
					UnitApplyTimedLife(dammi, 'BTLF', 2.);
					UnitAddAbility(dammi, 'A039');
					SetUnitAbilityLevel(dammi, 'A039', abilitylevel);
					IssueTargetOrderById(dammi, $D00CB, Picked);
					dammi[null] = null;
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl", Picked, "origin"));
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIob\\AIobSpecialArt.mdl", Picked, "origin"));
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratFrostMissile\\ZigguratFrostMissile.mdl", Picked, "chest"));
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl", Picked, "chest"));
					GroupAddUnit(gdamage, Picked);
					tPicked[CreateTimer()] = CreateTimer();
					htPicked[GetHandleId(tPicked)] = GetHandleId(tPicked);
					SaveUnitHandle(udg_hash, htPicked, 1, Picked);
					SaveGroupHandle(udg_hash, htPicked, 2, gdamage);
					time[2.5] = 2.5;
					if (IsUnitType(Picked, UNIT_TYPE_HERO) == false) {
						time[time * 2] = time * 2;
					}
					TimerStart(tPicked, time, false, Trig_Cold_Punishment_RefreshGroup_Actions);
					tPicked[null] = null;
				}
			}
			GroupRemoveUnit(g, Picked);
		}
		SaveGroupHandle(udg_hash, h, 7, gdamage);
	else
		destroy[true] = true;
	}
	if (destroy) {
		lopa[1] = 1;
		while (true) {
			if (lopa > 5) break;
			dammi[LoadUnitHandle(udg_hash, h, 9 + lopa)] = LoadUnitHandle(udg_hash, h, 9 + lopa);
			ef[LoadEffectHandle(udg_hash, h, $E + lopa)] = LoadEffectHandle(udg_hash, h, $E + lopa);
			KillUnit(dammi);
			DestroyEffect(ef);
			dammi[null] = null;
			ef[null] = null;
			lopa[lopa + 1] = lopa + 1;
		}
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	caster[null] = null;
	Picked[null] = null;
	target[null] = null;
	p[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	gdamage[null] = null;
	dammi[null] = null;
}
void Trig_Cold_Punishment_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	float xt = GetUnitX(target);
	float yt = GetUnitY(target);
	float angle = bj_RADTODEG * Atan2(yt - GetUnitY(caster), xt - GetUnitX(caster));
	timer t = CreateTimer();
	int h = GetHandleId(t);
	int wait = 500;
	float damage = 300.;
	int lopa = 1;
	unit dammi;
	effect ef;
	player p = GetOwningPlayer(caster);
	float xnew = x + 200. * Cos(angle * bj_DEGTORAD);
	float ynew = y + 200. * Sin(angle * bj_DEGTORAD);
	group gdamage = CreateGroup();
	while (true) {
		if (lopa > 5) break;
		dammi[CreateUnit(p, 'h00U', xnew + 75. * Cos((lopa * 72) * bj_DEGTORAD), ynew + 75. * Sin((lopa * 72) * bj_DEGTORAD), angle)] = CreateUnit(p, 'h00U', xnew + 75. * Cos((lopa * 72) * bj_DEGTORAD), ynew + 75. * Sin((lopa * 72) * bj_DEGTORAD), angle);
		UnitAddAbility(dammi, 'Amrf');
		UnitRemoveAbility(dammi, 'Amrf');
		SetUnitFlyHeight(dammi, 100., .0);
		ef[AddSpecialEffectTarget("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl", dammi, "origin")] = AddSpecialEffectTarget("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl", dammi, "origin");
		SaveUnitHandle(udg_hash, h, 9 + lopa, dammi);
		SaveEffectHandle(udg_hash, h, $E + lopa, ef);
		dammi[null] = null;
		ef[null] = null;
		lopa[lopa + 1] = lopa + 1;
	}
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveUnitHandle(udg_hash, h, 2, target);
	SaveInteger(udg_hash, h, 3, wait);
	SaveReal(udg_hash, h, 4, damage);
	SaveReal(udg_hash, h, 5, xnew);
	SaveReal(udg_hash, h, 6, ynew);
	SaveGroupHandle(udg_hash, h, 7, gdamage);
	TimerStart(t, .03, true, Trig_Cold_Punishment_Periodic_Actions);
	caster[null] = null;
	target[null] = null;
	t[null] = null;
	p[null] = null;
	gdamage[null] = null;
}
bool Trig_Cold_Punishment_Conditions() {
	return GetSpellAbilityId() == 'A04B';
}
void InitTrig_Cold_Punishment() {
	int index = 0;
	gg_trg_Cold_Punishment[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Cold_Punishment, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Cold_Punishment, Condition(Trig_Cold_Punishment_Conditions));
	TriggerAddAction(gg_trg_Cold_Punishment, Trig_Cold_Punishment_Actions);
}
void Trig_Ice_Restoration_Periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, $D);
	int wait = LoadInteger(udg_hash, h, $E);
	float xprestore = LoadReal(udg_hash, h, $F);
	texttag txtxp = LoadTextTagHandle(udg_hash, h, 16);
	texttag txt;
	texttag txttime = LoadTextTagHandle(udg_hash, h, 17);
	int lop = 0;
	unit dammi;
	lightning l;
	int schetchik = 0;
	effect ef;
	float angle;
	unit Picked;
	unit dammi2;
	group gdamage;
	float xt;
	float yt;
	player p = GetOwningPlayer(caster);
	wait[wait - 1] = wait - 1;
	SaveInteger(udg_hash, h, $E, wait);
	SetTextTagText(txttime, "|cFFAFE6FF " + I2S(R2I(wait / 5)) + "|r", .065);
	while (true) {
		if (lop > 3) break;
		lop[lop + 1] = lop + 1;
		dammi[LoadUnitHandle(udg_hash, h, lop)] = LoadUnitHandle(udg_hash, h, lop);
		if (GetUnitState(dammi, UNIT_STATE_LIFE) > .405 && wait > 0) {
			schetchik[schetchik + 1] = schetchik + 1;
		else
			if (dammi != null) {
				xt[GetUnitX(dammi)] = GetUnitX(dammi);
				yt[GetUnitY(dammi)] = GetUnitY(dammi);
				dammi2[CreateUnit(p, 'h00U', xt, yt, .0)] = CreateUnit(p, 'h00U', xt, yt, .0);
				UnitApplyTimedLife(dammi2, 'BTLF', 2.);
				SetUnitScale(dammi2, 2., 2., 2.);
				DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Shiva'sWrath.mdl", dammi2, "origin"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl", dammi2, "origin"));
				dammi2[null] = null;
				gdamage[CreateGroup()] = CreateGroup();
				GroupEnumUnitsInRange(gdamage, GetUnitX(dammi), GetUnitY(dammi), 250., null);
				while (true) {
					Picked[FirstOfGroup(gdamage)] = FirstOfGroup(gdamage);
					if (Picked == null) break;
					if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, p) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
						UnitDamageTarget(caster, Picked, 100., false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
						dammi2[CreateUnit(p, 'h00U', GetUnitX(Picked), GetUnitY(Picked), .0)] = CreateUnit(p, 'h00U', GetUnitX(Picked), GetUnitY(Picked), .0);
						UnitApplyTimedLife(dammi2, 'BTLF', 2.);
						UnitAddAbility(dammi2, 'A039');
						SetUnitAbilityLevel(dammi2, 'A039', 2);
						IssueTargetOrderById(dammi2, $D00CB, Picked);
						dammi2[null] = null;
						DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl", Picked, "origin"));
						DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIob\\AIobSpecialArt.mdl", Picked, "origin"));
						DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratFrostMissile\\ZigguratFrostMissile.mdl", Picked, "chest"));
					}
					GroupRemoveUnit(gdamage, Picked);
				}
				Picked[null] = null;
				GroupClear(gdamage);
				DestroyGroup(gdamage);
				gdamage[null] = null;
				RemoveUnit(dammi);
				l[LoadLightningHandle(udg_hash, GetHandleId(dammi), 1)] = LoadLightningHandle(udg_hash, GetHandleId(dammi), 1);
				DestroyLightning(l);
				FlushChildHashtable(udg_hash, GetHandleId(dammi));
				l[null] = null;
			}
		}
		dammi[null] = null;
	}
	if (schetchik <= 0 || wait <= 0) {
		if (wait <= 0) {
			SetUnitState(caster, UNIT_STATE_LIFE, GetUnitState(caster, UNIT_STATE_LIFE) + $3A98);
		}
		xprestore[xprestore + $3A98] = xprestore + $3A98;
		txt[CreateTextTag()] = CreateTextTag();
		SetTextTagText(txt, "|cFFAFE6FF +" + I2S(R2I(xprestore)) + "!|r", .045);
		xt[GetUnitX(caster) + 'd' * Cos(180. * bj_DEGTORAD)] = GetUnitX(caster) + 'd' * Cos(180. * bj_DEGTORAD);
		yt[GetUnitY(caster) + 'd' * Sin(180. * bj_DEGTORAD)] = GetUnitY(caster) + 'd' * Sin(180. * bj_DEGTORAD);
		SetTextTagPos(txt, xt + $96 * Cos(90. * bj_DEGTORAD), yt + $96 * Sin(90. * bj_DEGTORAD), .0);
		angle[GetRandomReal(45., 135.)] = GetRandomReal(45., 135.);
		SetTextTagVelocity(txt, .0101875 * Cos(angle * bj_DEGTORAD), .0301875 * Sin(angle * bj_DEGTORAD));
		SetTextTagPermanent(txt, false);
		SetTextTagColor(txt, $FF, $FF, $FF, $C8);
		SetTextTagLifespan(txt, 4.);
		SetTextTagFadepoint(txt, 2.);
		txt[null] = null;
		DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Shiva'sWrath.mdl", caster, "origin"));
		DestroyTextTag(txtxp);
		DestroyTextTag(txttime);
		UnitRemoveAbility(caster, 'Avul');
		PauseUnit(caster, false);
		SetUnitAnimation(caster, "stand");
		ef[LoadEffectHandle(udg_hash, h, 18)] = LoadEffectHandle(udg_hash, h, 18);
		DestroyEffect(ef);
		ef[null] = null;
		DestroyTimer(t);
		FlushChildHashtable(udg_hash, h);
		SaveBoolean(udg_hash, GetHandleId(caster), $A, false);
	else
		xprestore[xprestore + schetchik * 50] = xprestore + schetchik * 50;
		SetTextTagText(txtxp, "|cFFAFE6FF +" + I2S(R2I(xprestore)) + "|r", .045);
		SaveReal(udg_hash, h, $F, xprestore);
		SetUnitState(caster, UNIT_STATE_LIFE, GetUnitState(caster, UNIT_STATE_LIFE) + schetchik * 50);
	}
	t[null] = null;
	caster[null] = null;
	txtxp[null] = null;
	txttime[null] = null;
	p[null] = null;
}
void Trig_Ice_Restoration_Actions() {
	unit caster = GetSpellAbilityUnit();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	float angle = 45.;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	int wait = '}';
	int lop = 0;
	unit dammi;
	effect ef;
	player p = GetOwningPlayer(caster);
	float xc = GetRectCenterX(gg_rct_6);
	float yc = GetRectCenterY(gg_rct_6);
	lightning l;
	float xprestore = .0;
	texttag txtxp = CreateTextTag();
	texttag txttime = CreateTextTag();
	float xnew;
	float ynew;
	unit dammi2;
	SetTextTagText(txtxp, "|cFFAFE6FF +" + I2S(R2I(.0)) + "|r", .045);
	xnew[x + 'd' * Cos(180. * bj_DEGTORAD)] = x + 'd' * Cos(180. * bj_DEGTORAD);
	ynew[y + 'd' * Sin(180. * bj_DEGTORAD)] = y + 'd' * Sin(180. * bj_DEGTORAD);
	SetTextTagPos(txtxp, xnew, ynew, .0);
	SetTextTagPos(txtxp, xnew + $96 * Cos(90. * bj_DEGTORAD), ynew + $96 * Sin(90. * bj_DEGTORAD), .0);
	SetTextTagPermanent(txtxp, false);
	SetTextTagColor(txtxp, $FF, $FF, $FF, $C8);
	SetTextTagText(txttime, "|cFFAFE6FF " + I2S(R2I(wait / 25)) + "|r", .065);
	xnew[x + 75 * Cos(180. * bj_DEGTORAD)] = x + 75 * Cos(180. * bj_DEGTORAD);
	ynew[y + 75 * Sin(180. * bj_DEGTORAD)] = y + 75 * Sin(180. * bj_DEGTORAD);
	SetTextTagPos(txttime, xnew, ynew, .0);
	SetTextTagPos(txttime, xnew + 50 * Cos(90. * bj_DEGTORAD), ynew + 50 * Sin(90. * bj_DEGTORAD), .0);
	SetTextTagPermanent(txttime, false);
	SetTextTagColor(txttime, $FF, $FF, $FF, $C8);
	UnitAddAbility(caster, 'Avul');
	ef[AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostArmor\\FrostArmorTarget.mdl", caster, "chest")] = AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostArmor\\FrostArmorTarget.mdl", caster, "chest");
	SaveEffectHandle(udg_hash, h, 18, ef);
	ef[null] = null;
	PauseUnit(caster, true);
	SetUnitAnimation(caster, "Stand Channel");
	SetUnitFacing(caster, 270.);
	while (true) {
		if (lop > 3) break;
		lop[lop + 1] = lop + 1;
		dammi[CreateUnit(p, 'n007', xc + $41A * Cos(angle * bj_DEGTORAD), yc + $41A * Sin(angle * bj_DEGTORAD), angle + $87)] = CreateUnit(p, 'n007', xc + $41A * Cos(angle * bj_DEGTORAD), yc + $41A * Sin(angle * bj_DEGTORAD), angle + $87);
		dammi2[CreateUnit(p, 'h00U', GetUnitX(dammi), GetUnitY(dammi), .0)] = CreateUnit(p, 'h00U', GetUnitX(dammi), GetUnitY(dammi), .0);
		UnitApplyTimedLife(dammi2, 'BTLF', 2.);
		SetUnitScale(dammi2, 2., 2., 2.);
		DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Shiva'sWrath.mdl", dammi2, "origin"));
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl", dammi2, "origin"));
		dammi2[null] = null;
		SetUnitAnimation(dammi, "Stand Work");
		SaveUnitHandle(udg_hash, h, lop, dammi);
		ef[AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratFrostMissile\\ZigguratFrostMissile.mdl", dammi, "overhead")] = AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratFrostMissile\\ZigguratFrostMissile.mdl", dammi, "overhead");
		l[AddLightningEx("DRAM", true, x, y, 100., GetUnitX(dammi), GetUnitY(dammi), 260.)] = AddLightningEx("DRAM", true, x, y, 100., GetUnitX(dammi), GetUnitY(dammi), 260.);
		SaveEffectHandle(udg_hash, h, lop + 4, ef);
		SaveLightningHandle(udg_hash, GetHandleId(dammi), 1, l);
		angle[angle + 90.] = angle + 90.;
		dammi[null] = null;
		ef[null] = null;
		l[null] = null;
	}
	SaveUnitHandle(udg_hash, h, $D, caster);
	SaveInteger(udg_hash, h, $E, wait);
	SaveReal(udg_hash, h, $F, xprestore);
	SaveTextTagHandle(udg_hash, h, 16, txtxp);
	SaveTextTagHandle(udg_hash, h, 17, txttime);
	TimerStart(t, .2, true, Trig_Ice_Restoration_Periodic_Actions);
	t[null] = null;
	caster[null] = null;
	p[null] = null;
	txtxp[null] = null;
	txttime[null] = null;
}
bool Trig_Ice_Restoration_Conditions() {
	return GetSpellAbilityId() == 'A04D';
}
void InitTrig_Ice_Restoration() {
	int index = 0;
	gg_trg_Ice_Restoration[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Ice_Restoration, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Ice_Restoration, Condition(Trig_Ice_Restoration_Conditions));
	TriggerAddAction(gg_trg_Ice_Restoration, Trig_Ice_Restoration_Actions);
}
void Trig_BossStart_onbase_Actions() {
	timer tonbase = GetExpiredTimer();
	int honbase = GetHandleId(tonbase);
	int ishod = LoadInteger(udg_hash, honbase, 3);
	unit boss = LoadUnitHandle(udg_hash, honbase, 1);
	group gruppa = CreateGroup();
	unit Picked;
	float xc = GetRectCenterX(gg_rct_Respawn_Heroes);
	float yc = GetRectCenterY(gg_rct_Respawn_Heroes);
	fogmodifier fm = LoadFogModifierHandle(udg_hash, honbase, 2);
	texttag txt;
	float vel = .0221875;
	float angle = 45. + GetRandomReal(.0, 90.);
	float xvel = vel * Cos(angle * bj_DEGTORAD);
	float yvel = vel * Sin(angle * bj_DEGTORAD);
	int dead = 0;
	float perekluchatel = .1;
	ShowAndFlushAllPlayerDamage(false);
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
	CinematicModeExBJ(false, bj_FORCE_ALL_PLAYERS, bj_CINEMODE_INTERFACEFADE);
	CinematicFadeBJ(0, 5., "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0);
	while (true) {
		Picked[FirstOfGroup(gruppa)] = FirstOfGroup(gruppa);
		if (Picked == null) break;
		if (perekluchatel >= 0) {
			perekluchatel[-perekluchatel] = -perekluchatel;
			perekluchatel[perekluchatel - 50.] = perekluchatel - 50.;
		else
			perekluchatel[-perekluchatel] = -perekluchatel;
			perekluchatel[perekluchatel + 50.] = perekluchatel + 50.;
		}
		xc[GetRectCenterX(gg_rct_Respawn_Heroes) + perekluchatel] = GetRectCenterX(gg_rct_Respawn_Heroes) + perekluchatel;
		yc[GetRectCenterY(gg_rct_Respawn_Heroes)] = GetRectCenterY(gg_rct_Respawn_Heroes);
		ReviveHero(Picked, xc, yc, true);
		SetUnitPosition(Picked, xc, yc);
		SetUnitFacing(Picked, 270.);
		SetUnitState(Picked, UNIT_STATE_LIFE, $540BE3FF);
		SetUnitState(Picked, UNIT_STATE_MANA, $540BE3FF);
		if (ishod == 0) {
			txt[CreateTextTag()] = CreateTextTag();
			dead[LoadInteger(udg_hash, GetHandleId(Picked), 1)] = LoadInteger(udg_hash, GetHandleId(Picked), 1);
			if (dead == 1) {
				SetTextTagText(txt, "|cFFFFFF00+500|r", .035);
				AddHeroXP(Picked, $3E8, true);
				SetPlayerState(GetOwningPlayer(Picked), PLAYER_STATE_RESOURCE_GOLD, (GetPlayerState(GetOwningPlayer(Picked), PLAYER_STATE_RESOURCE_GOLD) + 500));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl", Picked, "overhead"));
				if (GetLocalPlayer() == GetOwningPlayer(Picked)) {
					DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Вы получили " + udg_ColorString[23] + I2S(500) + " золота|r!!!");
				}
			else
				SetTextTagText(txt, "|cFFFFFF00+1200|r", .045);
				AddHeroXP(Picked, $BB8, true);
				SetPlayerState(GetOwningPlayer(Picked), PLAYER_STATE_RESOURCE_GOLD, (GetPlayerState(GetOwningPlayer(Picked), PLAYER_STATE_RESOURCE_GOLD) + $4B0));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl", Picked, "overhead"));
				if (GetLocalPlayer() == GetOwningPlayer(Picked)) {
					DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Вы получили " + udg_ColorString[23] + I2S($4B0) + " золота|r!!!");
				}
			}
			SetTextTagPos(txt, GetUnitX(Picked), GetUnitY(Picked), .0);
			SetTextTagColor(txt, 0, 0, 0, 50);
			SetTextTagVelocity(txt, xvel, yvel);
			SetTextTagPermanent(txt, false);
			SetTextTagLifespan(txt, 4.);
			SetTextTagFadepoint(txt, .0);
			txt[null] = null;
		}
		if ((GetLocalPlayer() == GetOwningPlayer(Picked))) {
			ResetToGameCamera(.0);
			if (ishod == 1) {
				DisplayTextToPlayer(GetOwningPlayer(Picked), 0, 0, "|cFFFF0000ВЫ ПРОИГРАЛИ БИТВУ С БОССОМ!!!|r");
			else
				DisplayTextToPlayer(GetOwningPlayer(Picked), 0, 0, "|cFFFFFF00ВЫ ПОБЕДИЛИ В БИТВЕ С БОССОМ!!!|r");
			}
			ResetToGameCamera(.0);
			PanCameraToTimed(xc, yc, .0);
			SelectUnit(Picked, true);
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	EnableTrigger(gg_trg_Hero_Dead);
	DisableTrigger(gg_trg_FlameSpells);
	DisableTrigger(gg_trg_Upgrade_Summons);
	Picked[null] = null;
	GroupEnumUnitsInRect(gruppa, gg_rct_6, null);
	while (true) {
		Picked[FirstOfGroup(gruppa)] = FirstOfGroup(gruppa);
		if (Picked == null) break;
		if (GetUnitTypeId(Picked) != 'h00C' && GetUnitTypeId(Picked) != 'h00B' && GetUnitTypeId(Picked) != 'h00U') {
			RemoveUnit(Picked);
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	StartTimerBJ(udg_Timer_Nomera_Volni, false, 75.);
	CreateTimerDialogBJ(udg_Timer_Nomera_Volni, ("Волна № |cFFFF0000" + (I2S(udg_Nomer_samoi_volni) + "|r")));
	udg_TimerDialog_Nomera_Volni[bj_lastCreatedTimerDialog] = bj_lastCreatedTimerDialog;
	TimerDialogSetTimeColorBJ(udg_TimerDialog_Nomera_Volni, 'd', 90., 30., 20.);
	udg_Is_Fast_Wave_Start_On_Off[true] = true;
	Picked[null] = null;
	RemoveWeatherEffect(udg_BossFightWeather);
	udg_BossFightWeather[null] = null;
	FlushChildHashtable(udg_hash, GetHandleId(boss));
	RemoveUnit(boss);
	boss[null] = null;
	DestroyFogModifier(fm);
	fm[null] = null;
	DestroyGroup(gruppa);
	gruppa[null] = null;
	FlushChildHashtable(udg_hash, honbase);
	DestroyTimer(tonbase);
	tonbase[null] = null;
}
void Trig_BossStart_end_Actions() {
	timer tend = GetExpiredTimer();
	int hend = GetHandleId(tend);
	unit boss = LoadUnitHandle(udg_hash, hend, 1);
	fogmodifier fm = CreateFogModifierRect(Player(0), FOG_OF_WAR_VISIBLE, gg_rct_6, true, true);
	int lop = 0;
	int ishod = LoadInteger(udg_hash, hend, 2);
	timer tonbase = CreateTimer();
	int honbase = GetHandleId(tonbase);
	group g = CreateGroup();
	unit Picked;
	SaveUnitHandle(udg_hash, honbase, 1, boss);
	SaveFogModifierHandle(udg_hash, honbase, 2, fm);
	SaveInteger(udg_hash, honbase, 3, ishod);
	GroupEnumUnitsInRect(g, gg_rct_6, null);
	while (true) {
		if (lop > 9) break;
		if ((GetLocalPlayer() == Player(lop))) {
			CameraSetupApplyForceDuration(gg_cam_Camera_BossFightStart, true, .0);
			SetCameraRotateMode(GetRectCenterX(gg_rct_6), GetRectCenterY(gg_rct_6), bj_DEGTORAD * 360., 6.);
		}
		lop[lop + 1] = lop + 1;
	}
	TimerStart(tonbase, 6., false, Trig_BossStart_onbase_Actions);
	if (ishod == 1) {
		IssuePointOrderById(boss, $D0012, GetRectCenterX(gg_rct_6), GetRectCenterY(gg_rct_6));
	else
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (GetOwningPlayer(Picked) == Player($B)) {
				KillUnit(Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
		Picked[null] = null;
	}
	CinematicModeExBJ(true, bj_FORCE_ALL_PLAYERS, bj_CINEMODE_INTERFACEFADE);
	CinematicFadeBJ(1, 6., "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1);
	FlushChildHashtable(udg_hash, hend);
	DestroyTimer(tend);
	tend[null] = null;
	boss[null] = null;
	fm[null] = null;
	tonbase[null] = null;
	DestroyGroup(g);
	g[null] = null;
}
void Trig_BossStart_altars_periodic_Actions() {
	timer taltarsper = GetExpiredTimer();
	int haltarsper = GetHandleId(taltarsper);
	float x = GetRectCenterX(gg_rct_6) + GetRandomReal(-1000., 1000.);
	float y = GetRectCenterY(gg_rct_6) + GetRandomReal(-800., 800.);
	int number = LoadInteger(udg_hash, haltarsper, 5);
	int end = LoadInteger(udg_hash, haltarsper, 6);
	unit altar = LoadUnitHandle(udg_hash, haltarsper, number);
	int lop = 0;
	effect ef;
	number[number + 1] = number + 1;
	if (number >= 5) {
		number[1] = 1;
	}
	SaveInteger(udg_hash, haltarsper, 5, number);
	if (GetUnitState(altar, UNIT_STATE_LIFE) > .405) {
		IssuePointOrderById(altar, $D0208, x, y);
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl", GetUnitX(altar), GetUnitY(altar)));
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl", GetUnitX(altar), GetUnitY(altar)));
	else
		ef[LoadEffectHandle(udg_hash, GetHandleId(altar), 1)] = LoadEffectHandle(udg_hash, GetHandleId(altar), 1);
		DestroyEffect(ef);
		FlushChildHashtable(udg_hash, GetHandleId(altar));
		ef[null] = null;
	}
	altar[null] = null;
	end[end - 1] = end - 1;
	SaveInteger(udg_hash, haltarsper, 6, end);
	if (end <= 0) {
		while (true) {
			lop[lop + 1] = lop + 1;
			if (lop > 4) break;
			altar[LoadUnitHandle(udg_hash, haltarsper, lop)] = LoadUnitHandle(udg_hash, haltarsper, lop);
			KillUnit(altar);
			altar[null] = null;
			FlushChildHashtable(udg_hash, GetHandleId(altar));
		}
		DestroyTimer(taltarsper);
		FlushChildHashtable(udg_hash, haltarsper);
	}
	taltarsper[null] = null;
}
void Trig_BossStart_altars_Actions() {
	timer taltars = GetExpiredTimer();
	float xc = GetRectCenterX(gg_rct_6);
	float yc = GetRectCenterY(gg_rct_6);
	unit Picked;
	int number = 0;
	int end = 40;
	int lop = 0;
	float angle = 45.;
	timer taltarsper = CreateTimer();
	int haltarsper = GetHandleId(taltarsper);
	effect ef;
	while (true) {
		if (lop > 3) break;
		lop[lop + 1] = lop + 1;
		Picked[CreateUnit(Player($B), 'n00Q', xc + $41A * Cos(angle * bj_DEGTORAD), yc + $41A * Sin(angle * bj_DEGTORAD), angle + $87)] = CreateUnit(Player($B), 'n00Q', xc + $41A * Cos(angle * bj_DEGTORAD), yc + $41A * Sin(angle * bj_DEGTORAD), angle + $87);
		UnitApplyTimedLife(Picked, 'BTLF', 60.01);
		SaveUnitHandle(udg_hash, haltarsper, lop, Picked);
		ef[AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl", Picked, "origin")] = AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl", Picked, "origin");
		SaveEffectHandle(udg_hash, GetHandleId(Picked), 1, ef);
		angle[angle + 90.] = angle + 90.;
		Picked[null] = null;
		ef[null] = null;
	}
	SaveInteger(udg_hash, haltarsper, 5, number);
	SaveInteger(udg_hash, haltarsper, 6, end);
	TimerStart(taltarsper, 1.5, true, Trig_BossStart_altars_periodic_Actions);
	taltarsper[null] = null;
	taltars[null] = null;
}
void Trig_BossStart_hprestore_Actions() {
	timer thprestore = GetExpiredTimer();
	int hhprestore = GetHandleId(thprestore);
	unit boss = LoadUnitHandle(udg_hash, hhprestore, 1);
	int lop = 0;
	array<unit> u;
	lightning l;
	int schetchik = 0;
	int end = LoadInteger(udg_hash, hhprestore, $A);
	texttag txt;
	int endtxt = end - (end / 5) * 5;
	bool zaniat = LoadBoolean(udg_hash, GetHandleId(boss), $A);
	effect ef;
	float angle;
	float hpforsolo = (GetUnitState(boss, UNIT_STATE_MAX_LIFE) / $BB8);
	int hpforall = R2I((GetUnitState(boss, UNIT_STATE_MAX_LIFE) / $A));
	if ((endtxt < 0)) {
		endtxt[endtxt + 5] = endtxt + 5;
	}
	end[end + 1] = end + 1;
	SaveInteger(udg_hash, hhprestore, $A, end);
	if (endtxt == 0) {
		txt[CreateTextTag()] = CreateTextTag();
		angle[GetRandomReal(.0, 360.)] = GetRandomReal(.0, 360.);
		SetTextTagText(txt, "|cFFFF0000" + I2S(20 - (end / 5)) + "|r", .055);
		SetTextTagPos(txt, GetUnitX(boss), GetUnitY(boss), .0);
		SetTextTagPermanent(txt, false);
		SetTextTagColor(txt, 0, 0, 0, $C8);
		SetTextTagVelocity(txt, .0501875 * Cos(angle * bj_DEGTORAD), .0501875 * Cos(angle * bj_DEGTORAD));
		SetTextTagLifespan(txt, 3.5);
		SetTextTagFadepoint(txt, .0);
		txt[null] = null;
	}
	while (true) {
		if (lop > 4) break;
		lop[lop + 1] = lop + 1;
		u[LoadUnitHandle(udg_hash, hhprestore, 1 + lop)] = LoadUnitHandle(udg_hash, hhprestore, 1 + lop);
		l[LoadLightningHandle(udg_hash, GetHandleId(u[lop]), 1 + lop)] = LoadLightningHandle(udg_hash, GetHandleId(u[lop]), 1 + lop);
		if (GetUnitState(u[lop], UNIT_STATE_LIFE) > .405 && end < 'd') {
			schetchik[schetchik + 1] = schetchik + 1;
			MoveLightningEx(l, true, GetUnitX(boss), GetUnitY(boss), 100., GetUnitX(u[lop]), GetUnitY(u[lop]), 5.);
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomTarget.mdl", GetUnitX(u[lop]), GetUnitY(u[lop])));
		else
			if (end >= 'd') {
				KillUnit(u[lop]);
			}
			if (GetUnitState(u[lop], UNIT_STATE_LIFE) < .405) {
			}
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl", GetUnitX(u[lop]), GetUnitY(u[lop])));
			DestroyLightning(l);
			FlushChildHashtable(udg_hash, GetHandleId(u[lop]));
			u[null] = null;
			l[null] = null;
		}
	}
	if (schetchik <= 0 || end >= 'd') {
		if (end >= 'd') {
			SetUnitState(boss, UNIT_STATE_LIFE, GetUnitState(boss, UNIT_STATE_LIFE) + hpforall);
			txt[CreateTextTag()] = CreateTextTag();
			SetTextTagText(txt, "|cFFFF0000 +" + I2S(hpforall) + "!|r", .055);
			SetTextTagPos(txt, GetUnitX(boss), GetUnitY(boss), .0);
			SetTextTagPermanent(txt, false);
			SetTextTagColor(txt, 0, 0, 0, $C8);
			SetTextTagVelocity(txt, .0101875 * Cos(GetRandomReal(.0, 360.) * bj_DEGTORAD), .0301875 * Sin(GetRandomReal(.0, 360.) * bj_DEGTORAD));
			SetTextTagLifespan(txt, 3.5);
			SetTextTagFadepoint(txt, .0);
			txt[null] = null;
		}
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl", GetUnitX(boss), GetUnitY(boss)));
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl", GetUnitX(boss), GetUnitY(boss)));
		UnitRemoveAbility(boss, 'Avul');
		ef[LoadEffectHandle(udg_hash, GetHandleId(boss), $F)] = LoadEffectHandle(udg_hash, GetHandleId(boss), $F);
		DestroyEffect(ef);
		ef[null] = null;
		DestroyTimer(thprestore);
		FlushChildHashtable(udg_hash, hhprestore);
		PauseUnit(boss, false);
		SetUnitAnimation(boss, "stand");
		zaniat[false] = false;
		SaveBoolean(udg_hash, GetHandleId(boss), $A, zaniat);
	else
		SetUnitState(boss, UNIT_STATE_LIFE, GetUnitState(boss, UNIT_STATE_LIFE) + (schetchik * hpforsolo));
	}
	thprestore[null] = null;
	boss[null] = null;
}
void Trig_BossStart_ActionWithWait_Actions() {
	timer twact = GetExpiredTimer();
	int hwact = GetHandleId(twact);
	unit boss = LoadUnitHandle(udg_hash, hwact, 1);
	effect ef = LoadEffectHandle(udg_hash, hwact, 2);
	int lop = 0;
	float xboss = GetUnitX(boss);
	float yboss = GetUnitY(boss);
	float angle = 0;
	array<unit> u;
	timer thprestore = CreateTimer();
	int hhprestore = GetHandleId(thprestore);
	int end = 0;
	TimerStart(thprestore, .2, true, Trig_BossStart_hprestore_Actions);
	PauseUnit(boss, true);
	SetUnitPathing(boss, true);
	SetUnitAnimationByIndex(boss, 7);
	SaveUnitHandle(udg_hash, hhprestore, 1, boss);
	SaveInteger(udg_hash, hhprestore, $A, end);
	while (true) {
		if (lop > 4) break;
		lop[lop + 1] = lop + 1;
		u[CreateUnit(Player($B), 'n00L', xboss + 500 * Cos(angle * bj_DEGTORAD), yboss + 500 * Sin(angle * bj_DEGTORAD), angle + $B4)] = CreateUnit(Player($B), 'n00L', xboss + 500 * Cos(angle * bj_DEGTORAD), yboss + 500 * Sin(angle * bj_DEGTORAD), angle + $B4);
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl", xboss + 500 * Cos(angle * bj_DEGTORAD), yboss + 500 * Sin(angle * bj_DEGTORAD)));
		UnitApplyTimedLife(u[lop], 'BTLF', 20.);
		UnitAddAbility(u[lop], 'Abun');
		UnitAddType(u[lop], UNIT_TYPE_PEON);
		PauseUnit(u[lop], true);
		SetUnitAnimationByIndex(u[lop], 2);
		SetUnitMoveSpeed(u[lop], 0);
		bj_lastCreatedLightning[AddLightningEx("AFOD", true, xboss, yboss, 100., GetUnitX(u[lop]), GetUnitY(u[lop]), 5.)] = AddLightningEx("AFOD", true, xboss, yboss, 100., GetUnitX(u[lop]), GetUnitY(u[lop]), 5.);
		SaveUnitHandle(udg_hash, hhprestore, 1 + lop, u[lop]);
		SaveLightningHandle(udg_hash, GetHandleId(u[lop]), 1 + lop, bj_lastCreatedLightning);
		angle[angle + 72] = angle + 72;
		u[null] = null;
	}
	DestroyTimer(twact);
	twact[null] = null;
	FlushChildHashtable(udg_hash, hwact);
	boss[null] = null;
	DestroyEffect(ef);
	ef[null] = null;
	thprestore[null] = null;
}
void Trig_BossStart_vulcano_Actions() {
	timer tvul = GetExpiredTimer();
	unit boss = LoadUnitHandle(udg_hash, GetHandleId(tvul), 1);
	bool zaniat = LoadBoolean(udg_hash, GetHandleId(boss), $A);
	effect ef = LoadEffectHandle(udg_hash, GetHandleId(boss), $F);
	zaniat[false] = false;
	SaveBoolean(udg_hash, GetHandleId(boss), $A, zaniat);
	DestroyEffect(ef);
	ef[null] = null;
	UnitRemoveAbility(boss, 'Avul');
	FlushChildHashtable(udg_hash, GetHandleId(tvul));
}
void Trig_BossStart_golems_Actions() {
	timer tgol = GetExpiredTimer();
	unit boss = LoadUnitHandle(udg_hash, GetHandleId(tgol), 1);
	bool zaniat = LoadBoolean(udg_hash, GetHandleId(boss), $A);
	zaniat[false] = false;
	SaveBoolean(udg_hash, GetHandleId(boss), $A, zaniat);
	FlushChildHashtable(udg_hash, GetHandleId(tgol));
}
void Trig_BossStart_hpcheck_Actions() {
	float xc = GetRectCenterX(gg_rct_6);
	float yc = GetRectCenterY(gg_rct_6);
	timer thpcheck = GetExpiredTimer();
	int hhpcheck = GetHandleId(thpcheck);
	unit boss = LoadUnitHandle(udg_hash, hhpcheck, 1);
	int stage = LoadInteger(udg_hash, hhpcheck, 2);
	int dammicheck = LoadInteger(udg_hash, hhpcheck, 4);
	float dx = GetUnitX(boss) - xc;
	float dy = GetUnitY(boss) - yc;
	timer twact = CreateTimer();
	int hwact = GetHandleId(twact);
	timer taltars;
	bool zaniat = LoadBoolean(udg_hash, GetHandleId(boss), $A);
	int cdvul = LoadInteger(udg_hash, GetHandleId(boss), $B);
	int cdgol = LoadInteger(udg_hash, GetHandleId(boss), $C);
	group grp = CreateGroup();
	timer tvul;
	timer tgol;
	group heroes = CreateGroup();
	group heroes2;
	unit targethero;
	group heroes2dummi;
	unit Picked;
	int kolvo = 0;
	int random = GetRandomInt(1, 4);
	timer tend;
	int hend;
	int ishod = 0;
	effect ef;
	player p = Player($C);
	int itemrand = R2I($F + 5 * CountPlayersInForceBJ(udg_IGRAET));
	float itemx = (GetRandomReal(-1350., 100.));
	float itemy = (GetRandomReal(1900., 3450.));
	unit dammi;
	group geroi = CreateGroup();
	float maxhp = GetUnitState(boss, UNIT_STATE_MAX_LIFE);
	if (GetRandomInt(1, 'd') <= itemrand) {
		CreatePotion(itemx, itemy, 3, 6);
	}
	if ((zaniat == false && stage == 0 && GetUnitState(boss, UNIT_STATE_LIFE) > (maxhp * .566) && GetUnitState(boss, UNIT_STATE_LIFE) < (maxhp * .733)) || (stage == 1 && GetUnitState(boss, UNIT_STATE_LIFE) > (maxhp * .3) && GetUnitState(boss, UNIT_STATE_LIFE) < (maxhp * .466)) || (stage == 2 && GetUnitState(boss, UNIT_STATE_LIFE) > (maxhp * .03) && GetUnitState(boss, UNIT_STATE_LIFE) < (maxhp * .2))) {
		stage[stage + 1] = stage + 1;
		zaniat[true] = true;
		SaveBoolean(udg_hash, GetHandleId(boss), $A, zaniat);
		SaveInteger(udg_hash, hhpcheck, 2, stage);
		SaveUnitHandle(udg_hash, hwact, 1, boss);
		if (SquareRoot(dx * dx + dy * dy) > 500) {
			IssuePointOrderById(boss, $D0012, xc + GetRandomReal(-250., 250.), yc + GetRandomReal(-250., 250.));
			SetUnitPathing(boss, false);
			TimerStart(twact, 4., false, Trig_BossStart_ActionWithWait_Actions);
		else
			TimerStart(twact, .25, false, Trig_BossStart_ActionWithWait_Actions);
		}
		UnitAddAbility(boss, 'Avul');
		ef[AddSpecialEffectTarget("Abilities\\Spells\\Other\\ImmolationRed\\ImmolationRedTarget.mdl", boss, "chest")] = AddSpecialEffectTarget("Abilities\\Spells\\Other\\ImmolationRed\\ImmolationRedTarget.mdl", boss, "chest");
		SaveEffectHandle(udg_hash, GetHandleId(boss), $F, ef);
	}
	if (cdgol > 0) {
		SaveInteger(udg_hash, GetHandleId(boss), $C, cdgol - 1);
	}
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, geroi);
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, grp);
	while (true) {
		Picked[FirstOfGroup(grp)] = FirstOfGroup(grp);
		if (Picked == null) break;
		if (IsUnitType(Picked, UNIT_TYPE_HERO) && GetPlayerId(GetOwningPlayer(Picked)) <= 8 && Picked != boss) {
			GroupAddUnit(heroes, Picked);
		}
		GroupRemoveUnit(grp, Picked);
	}
	FilterMostNearUnit(heroes, boss);
	Picked[null] = null;
	AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodSorceress.mdl", udg_Unit_FilterMostNearUnit, "chest");
	dammicheck[dammicheck + 1] = dammicheck + 1;
	if (dammicheck == 7 || dammicheck == $E || dammicheck == 21) {
		heroes2dummi[CreateGroup()] = CreateGroup();
		heroes2[CreateGroup()] = CreateGroup();
		GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, heroes2dummi);
		RandomUnitFromGroup(1, heroes2dummi);
		GroupAddGroup(udg_GroupRandomUnitFromGroup, heroes2);
		targethero[FirstOfGroup(heroes2)] = FirstOfGroup(heroes2);
		dammi[CreateUnit(Player($B), 'h00U', GetUnitX(boss), GetUnitY(boss), .0)] = CreateUnit(Player($B), 'h00U', GetUnitX(boss), GetUnitY(boss), .0);
		UnitApplyTimedLife(dammi, 'BTLF', 2.);
		UnitAddAbility(dammi, 'A0O4');
		IssuePointOrderById(dammi, $D0201, GetUnitX(targethero), GetUnitY(targethero));
		GroupClear(heroes2dummi);
		DestroyGroup(heroes2dummi);
		heroes2dummi[null] = null;
		GroupClear(heroes2);
		DestroyGroup(heroes2);
		heroes2[null] = null;
		targethero[null] = null;
		dammi[null] = null;
	}
	if (dammicheck == $A || dammicheck == 20) {
		dammi[CreateUnit(Player($B), 'h00U', GetUnitX(boss), GetUnitY(boss), .0)] = CreateUnit(Player($B), 'h00U', GetUnitX(boss), GetUnitY(boss), .0);
		UnitApplyTimedLife(dammi, 'BTLF', 2.);
		UnitAddAbility(dammi, 'A06J');
		IssueTargetOrderById(dammi, $D02BC, udg_Unit_FilterMostNearUnit);
	}
	if (dammicheck == 21) {
		dammicheck[0] = 0;
	}
	SaveInteger(udg_hash, hhpcheck, 4, dammicheck);
	if (zaniat == false && GetRandomInt(2, 4) <= 2) {
		if (random == 1) {
			if (udg_Unit_FilterMostNearUnit != null) {
				IssuePointOrderById(boss, $D009D, GetUnitX(udg_Unit_FilterMostNearUnit), GetUnitY(udg_Unit_FilterMostNearUnit));
			}
		}
		if (random == 2 && SquareRoot(dx * dx + dy * dy) < 700 && cdgol <= 0) {
			IssueImmediateOrderById(boss, $D0080);
			zaniat[true] = true;
			tgol[CreateTimer()] = CreateTimer();
			SaveBoolean(udg_hash, GetHandleId(boss), $A, zaniat);
			SaveInteger(udg_hash, GetHandleId(boss), $C, 20);
			SaveUnitHandle(udg_hash, GetHandleId(tgol), 1, boss);
			TimerStart(tgol, 4., false, Trig_BossStart_golems_Actions);
			tgol[null] = null;
		}
		if (random == 4 && SquareRoot(dx * dx + dy * dy) < 700) {
			IssueImmediateOrderById(boss, $D00B1);
		}
	}
	if (SquareRoot(dx * dx + dy * dy) > $4B0 && zaniat == false) {
		SetUnitPosition(boss, xc, yc);
	}
	GroupClear(heroes);
	if (GetUnitState(boss, UNIT_STATE_LIFE) < .405) {
		tend[CreateTimer()] = CreateTimer();
		hend[GetHandleId(tend)] = GetHandleId(tend);
		SaveInteger(udg_hash, hend, 2, ishod);
		SaveUnitHandle(udg_hash, hend, 1, boss);
		TimerStart(tend, 3., false, Trig_BossStart_end_Actions);
		taltars[LoadTimerHandle(udg_hash, hhpcheck, 3)] = LoadTimerHandle(udg_hash, hhpcheck, 3);
		FlushChildHashtable(udg_hash, GetHandleId(taltars));
		DestroyTimer(taltars);
		GroupEnumUnitsInRect(heroes, gg_rct_6, null);
		DestroyTimer(thpcheck);
		tend[null] = null;
		FlushChildHashtable(udg_hash, hhpcheck);
	}
	GroupClear(heroes);
	while (true) {
		Picked[FirstOfGroup(geroi)] = FirstOfGroup(geroi);
		if (Picked == null) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) < .405) {
			kolvo[kolvo + 1] = kolvo + 1;
			SaveInteger(udg_hash, GetHandleId(Picked), 1, 1);
		}
		GroupRemoveUnit(geroi, Picked);
	}
	Picked[null] = null;
	if (kolvo >= CountUnitsInGroup(udg_Gruppa_HeroUnitov_Geroev)) {
		tend[CreateTimer()] = CreateTimer();
		hend[GetHandleId(tend)] = GetHandleId(tend);
		SaveInteger(udg_hash, hend, 2, ishod + 1);
		SaveUnitHandle(udg_hash, hend, 1, boss);
		taltars[LoadTimerHandle(udg_hash, hhpcheck, 3)] = LoadTimerHandle(udg_hash, hhpcheck, 3);
		FlushChildHashtable(udg_hash, GetHandleId(taltars));
		DestroyTimer(taltars);
		TimerStart(tend, 3., false, Trig_BossStart_end_Actions);
		DestroyTimer(thpcheck);
		tend[null] = null;
		FlushChildHashtable(udg_hash, hhpcheck);
	}
	thpcheck[null] = null;
	boss[null] = null;
	twact[null] = null;
	GroupClear(grp);
	DestroyGroup(grp);
	grp[null] = null;
	GroupClear(heroes);
	DestroyGroup(heroes);
	GroupClear(geroi);
	DestroyGroup(geroi);
	geroi[null] = null;
	heroes[null] = null;
	p[null] = null;
	dammi[null] = null;
}
void Trig_BossStart_frasa_Actions() {
	timer tfrasa = GetExpiredTimer();
	int hfrasa = GetHandleId(tfrasa);
	unit boss = LoadUnitHandle(udg_hash, hfrasa, 1);
	int random = GetRandomInt(1, 4);
	if (GetUnitState(boss, UNIT_STATE_LIFE) > .405) {
		if (random == 1) {
			TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS, boss, "Pyrovulcanous the Sunderer", gg_snd_HeroFirelordWarcry1, "|cFFFF0000Всех сожгу!!!......Один останусь!!!|r", 0, 4.77, false);
		}
		if (random == 2) {
			TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS, boss, "Pyrovulcanous the Sunderer", gg_snd_HeroFirelordYesAttack1, "|cFFFF0000Сожгу!!!......|r", 0, 2.13, false);
		}
		if (random == 3) {
			TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS, boss, "Pyrovulcanous the Sunderer", gg_snd_HeroFirelordYesAttack2, "|cFFFF0000Всё поглотит огонь!!!...|r", 0, 3.2, false);
		}
		if (random == 4) {
			TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS, boss, "Pyrovulcanous the Sunderer", gg_snd_HeroFirelordYesAttack3, "|cFFFF0000Испепелю!!!...|r", 0, 2.49, false);
		}
	else
		FlushChildHashtable(udg_hash, hfrasa);
		DestroyTimer(tfrasa);
	}
	tfrasa[null] = null;
	boss[null] = null;
}
void Trig_BossStart_5sec_Actions() {
	timer t5sec = GetExpiredTimer();
	int h5sec = GetHandleId(t5sec);
	unit boss = LoadUnitHandle(udg_hash, h5sec, 1);
	group gruppa = CreateGroup();
	unit Picked;
	timer tfrasa = CreateTimer();
	int hfrasa = GetHandleId(tfrasa);
	timer thpcheck = CreateTimer();
	int hhpcheck = GetHandleId(thpcheck);
	int stage = 0;
	timer taltars = CreateTimer();
	bool zaniat = false;
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
	CinematicModeExBJ(false, bj_FORCE_ALL_PLAYERS, bj_CINEMODE_INTERFACEFADE);
	while (true) {
		Picked[FirstOfGroup(gruppa)] = FirstOfGroup(gruppa);
		if (Picked == null) break;
		PauseUnit(Picked, false);
		IssueTargetOrderById(Picked, $D000F, boss);
		if ((GetLocalPlayer() == GetOwningPlayer(Picked))) {
			ClearSelection();
			SelectUnit(Picked, true);
			ResetToGameCamera(.0);
			PanCameraToTimed(GetRectCenterX(gg_rct_6), GetRectCenterY(gg_rct_6), .0);
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	PauseUnit(boss, false);
	IssuePointOrderById(boss, $D0012, GetRectCenterX(gg_rct_6), GetRectCenterY(gg_rct_6));
	SaveUnitHandle(udg_hash, hfrasa, 1, boss);
	TimerStart(tfrasa, 14., true, Trig_BossStart_frasa_Actions);
	SaveUnitHandle(udg_hash, hhpcheck, 1, boss);
	SaveInteger(udg_hash, hhpcheck, 2, stage);
	SaveTimerHandle(udg_hash, hhpcheck, 3, taltars);
	SaveBoolean(udg_hash, GetHandleId(boss), $A, zaniat);
	SaveInteger(udg_hash, GetHandleId(boss), $B, 0);
	SaveInteger(udg_hash, GetHandleId(boss), $C, 0);
	SaveInteger(udg_hash, hhpcheck, 4, 0);
	TimerStart(thpcheck, 1., true, Trig_BossStart_hpcheck_Actions);
	TimerStart(taltars, 61., true, Trig_BossStart_altars_Actions);
	DestroyTimer(t5sec);
	FlushChildHashtable(udg_hash, h5sec);
	t5sec[null] = null;
	boss[null] = null;
	Picked[null] = null;
	tfrasa[null] = null;
	thpcheck[null] = null;
	taltars[null] = null;
	GroupClear(gruppa);
	DestroyGroup(gruppa);
	gruppa[null] = null;
}
void Trig_BossStart_3sec_Actions() {
	timer t3sec = GetExpiredTimer();
	int h3sec = GetHandleId(t3sec);
	timer t5sec = CreateTimer();
	int h5sec = GetHandleId(t5sec);
	unit boss = LoadUnitHandle(udg_hash, h3sec, 1);
	SaveUnitHandle(udg_hash, h5sec, 1, boss);
	TimerStart(t5sec, 5.25, false, Trig_BossStart_5sec_Actions);
	ForceCinematicSubtitles(true);
	TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS, boss, "Pyrovulcanous the Sunderer", gg_snd_HeroFirelordWarcry1, "|cFFFF0000Всех сожгу!!!......Один останусь!!!|r", 0, 5.07, false);
	DestroyTimer(t3sec);
	FlushChildHashtable(udg_hash, h3sec);
	t3sec[null] = null;
	t5sec[null] = null;
	boss[null] = null;
}
void Trig_BossStart_Actions() {
	float xc = GetRectCenterX(gg_rct_6);
	float yc = GetRectCenterY(gg_rct_6);
	float xp = xc - 1216.;
	float yp = yc + 1088.;
	int random;
	int end = 1;
	group gruppa = CreateGroup();
	unit Picked;
	float dist = -350;
	unit boss = CreateUnit(Player($B), 'N00J', (xc - 500), yc, .0);
	timer t3sec = CreateTimer();
	int h3sec = GetHandleId(t3sec);
	udg_BossFightWeather[AddWeatherEffect(gg_rct_6, 'FDrh')] = AddWeatherEffect(gg_rct_6, 'FDrh');
	EnableWeatherEffect(udg_BossFightWeather, true);
	DisableTrigger(gg_trg_Hero_Dead);
	EnableTrigger(gg_trg_FlameSpells);
	EnableTrigger(gg_trg_Upgrade_Summons);
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
	CinematicModeExBJ(true, bj_FORCE_ALL_PLAYERS, bj_CINEMODE_INTERFACEFADE);
	CinematicFadeBJ(1, .0, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1);
	CinematicFadeBJ(0, 8.25, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1);
	SetAttackSpeedAbilityLevel(boss, $F * CountPlayersInForceBJ(udg_IGRAET));
	SetAttackAbilityLevel(boss, 30 * CountPlayersInForceBJ(udg_IGRAET));
	SetArmorAbilityLevel(boss, 5 * CountPlayersInForceBJ(udg_IGRAET));
	SetUnitMaxState(boss, UNIT_STATE_MAX_LIFE, R2I(3000. * CountPlayersInForceBJ(udg_IGRAET)));
	while (true) {
		Picked[FirstOfGroup(gruppa)] = FirstOfGroup(gruppa);
		if (Picked == null) break;
		SetUnitPosition(Picked, (xc + 500), (yc + dist));
		SetUnitFacing(Picked, bj_RADTODEG * Atan2(yc - GetUnitY(Picked), xc - GetUnitX(Picked)));
		PauseUnit(Picked, true);
		ClearSelection();
		dist[dist + 'd'] = dist + 'd';
		if ((GetLocalPlayer() == GetOwningPlayer(Picked))) {
			CameraSetupApplyForceDuration(gg_cam_Camera_BossFightStart, true, .0);
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	SetHeroLevel(boss, 30, false);
	AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl", boss, "chest");
	AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl", boss, "hand,right");
	AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl", boss, "hand,left");
	AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire2.mdl", boss, "head");
	UnitAddAbility(boss, 'A05T');
	UnitAddAbility(boss, 'A051');
	UnitAddAbility(boss, 'A05U');
	UnitAddAbility(boss, 'A004');
	PauseUnit(boss, true);
	SaveUnitHandle(udg_hash, h3sec, 1, boss);
	TimerStart(t3sec, 3., false, Trig_BossStart_3sec_Actions);
	ShowAndFlushAllPlayerDamage(true);
	TimerStart(udg_TimerShowAndFlushAllPlayerDmg, 10000., false, null);
	while (true) {
		if (end > 16) break;
		yp[yp - $80] = yp - $80;
		bj_forLoopAIndex[1] = 1;
		while (true) {
			if (bj_forLoopAIndex > 20) break;
			random[GetRandomInt(1, $A)] = GetRandomInt(1, $A);
			if (random >= 1 && random <= 3) {
				SetTerrainType(xp, yp, 'Ddrt', -1, 2, 1);
			else
				if (random >= 4 && random <= 7) {
					SetTerrainType(xp, yp, 'Dlvc', -1, 2, 1);
				else
					SetTerrainType(xp, yp, 'Dlav', -1, 2, 1);
				}
			}
			xp[xp + $80] = xp + $80;
			bj_forLoopAIndex[bj_forLoopAIndex + 1] = bj_forLoopAIndex + 1;
		}
		end[end + 1] = end + 1;
		xp[xc - 1216.] = xc - 1216.;
	}
	Picked[null] = null;
	boss[null] = null;
	GroupClear(gruppa);
	DestroyGroup(gruppa);
	gruppa[null] = null;
	t3sec[null] = null;
}
void InitTrig_BossStart() {
	gg_trg_BossStart[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_BossStart, Trig_BossStart_Actions);
}
bool Trig_FlameSpells_Conditions() {
	return GetSpellAbilityId() == 'A05T' || GetSpellAbilityId() == 'A05U';
}
void Trig_FlameSpells_Periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	float xu = LoadReal(udg_hash, h, 1);
	float yu = LoadReal(udg_hash, h, 2);
	float angle = LoadReal(udg_hash, h, 3);
	int i = LoadInteger(udg_hash, h, 4);
	unit caster = LoadUnitHandle(udg_hash, h, 5);
	float x = xu + 400 * Cos((angle + i * 'x') * bj_DEGTORAD);
	float y = yu + 400 * Sin((angle + i * 'x') * bj_DEGTORAD);
	unit u;
	unit un;
	bool zaniat = LoadBoolean(udg_hash, GetHandleId(caster), $A);
	effect ef = LoadEffectHandle(udg_hash, GetHandleId(caster), $F);
	i[i + 1] = i + 1;
	SaveInteger(udg_hash, h, 4, i);
	if (i < 4) {
		u[CreateUnit(GetOwningPlayer(caster), 'h00U', xu, yu, .0)] = CreateUnit(GetOwningPlayer(caster), 'h00U', xu, yu, .0);
		un[CreateUnit(GetOwningPlayer(caster), 'h00U', xu, yu, .0)] = CreateUnit(GetOwningPlayer(caster), 'h00U', xu, yu, .0);
		UnitApplyTimedLife(u, 'BTLF', 2.);
		UnitAddAbility(u, 'A055');
		UnitAddAbility(un, 'A05A');
		SetUnitAbilityLevel(u, 'A055', 1);
		IssuePointOrderById(u, $D0100, x, y);
		IssuePointOrderById(un, $D0208, x, y);
	else
		zaniat[false] = false;
		SaveBoolean(udg_hash, GetHandleId(caster), $A, zaniat);
		DestroyTimer(t);
		FlushChildHashtable(udg_hash, h);
		PauseUnit(caster, false);
		UnitRemoveAbility(caster, 'Avul');
		SetUnitAnimation(caster, "stand");
		DestroyEffect(ef);
	}
	t[null] = null;
	u[null] = null;
	un[null] = null;
	caster[null] = null;
	ef[null] = null;
}
void Trig_FlameSpells_Actions() {
	timer t = CreateTimer();
	int h = GetHandleId(t);
	float x;
	float y;
	float angle = 0;
	int lop = 0;
	location loc;
	unit u = GetSpellAbilityUnit();
	effect ef;
	if (GetSpellAbilityId() == 'A05T') {
		PauseUnit(u, true);
		UnitAddAbility(u, 'Avul');
		ef[AddSpecialEffectTarget("Abilities\\Spells\\Other\\ImmolationRed\\ImmolationRedTarget.mdl", u, "chest")] = AddSpecialEffectTarget("Abilities\\Spells\\Other\\ImmolationRed\\ImmolationRedTarget.mdl", u, "chest");
		SaveEffectHandle(udg_hash, GetHandleId(u), $F, ef);
		SetUnitAnimationByIndex(u, 7);
		SaveReal(udg_hash, h, 1, GetUnitX(u));
		SaveReal(udg_hash, h, 2, GetUnitY(u));
		SaveReal(udg_hash, h, 3, GetUnitFacing(u));
		SaveInteger(udg_hash, h, 4, 0);
		SaveUnitHandle(udg_hash, h, 5, u);
		TimerStart(t, 1., true, Trig_FlameSpells_Periodic_Actions);
		ef[null] = null;
	}
	if (GetSpellAbilityId() == 'A05U') {
		loc[GetSpellTargetLoc()] = GetSpellTargetLoc();
		x[GetLocationX(loc)] = GetLocationX(loc);
		y[GetLocationY(loc)] = GetLocationY(loc);
		while (true) {
			if (lop > 4) break;
			lop[lop + 1] = lop + 1;
			CreateUnit(GetOwningPlayer(u), 'n00L', x + $96 * Cos(angle * bj_DEGTORAD), y + $96 * Sin(angle * bj_DEGTORAD), GetUnitFacing(u));
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl", x + $96 * Cos(angle * bj_DEGTORAD), y + $96 * Sin(angle * bj_DEGTORAD)));
			UnitApplyTimedLife(bj_lastCreatedUnit, 'BTLF', GetRandomReal(40., 60.));
			angle[angle + 72] = angle + 72;
		}
		RemoveLocation(loc);
		loc[null] = null;
	}
	t[null] = null;
	u[null] = null;
}
void InitTrig_FlameSpells() {
	int index = 0;
	gg_trg_FlameSpells[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_FlameSpells, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_FlameSpells, Condition(Trig_FlameSpells_Conditions));
	TriggerAddAction(gg_trg_FlameSpells, Trig_FlameSpells_Actions);
}
void Trig_Fire_Circle_Periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	float x = LoadReal(udg_hash, h, 2);
	float y = LoadReal(udg_hash, h, 3);
	float angle = LoadReal(udg_hash, h, 4);
	int waitcreate = LoadInteger(udg_hash, h, 6);
	int wait = LoadInteger(udg_hash, h, 7);
	float damage = LoadReal(udg_hash, h, 8);
	int counter = LoadInteger(udg_hash, h, 9);
	group gdamage = CreateGroup();
	group gdamage2 = CreateGroup();
	unit Picked;
	player p = GetOwningPlayer(caster);
	effect ef;
	int lopa;
	float xnew;
	float ynew;
	float xcheck;
	float ycheck;
	if (waitcreate > 0) {
		waitcreate[waitcreate - 1] = waitcreate - 1;
		SaveInteger(udg_hash, h, 6, waitcreate);
		xcheck[x + 500. * Cos(angle + ((40 - waitcreate) * 9.) * bj_DEGTORAD)] = x + 500. * Cos(angle + ((40 - waitcreate) * 9.) * bj_DEGTORAD);
		ycheck[y + 500. * Sin(angle + ((40 - waitcreate) * 9.) * bj_DEGTORAD)] = y + 500. * Sin(angle + ((40 - waitcreate) * 9.) * bj_DEGTORAD);
		if ((waitcreate - (waitcreate / 2) * 2) == 0 && IsTerrainPathable(xcheck, ycheck, PATHING_TYPE_FLYABILITY) == false) {
			counter[counter + 1] = counter + 1;
			ef[AddSpecialEffect("Doodads\\Cinematic\\TownBurningFireEmitter\\TownBurningFireEmitter.mdl", xcheck, ycheck)] = AddSpecialEffect("Doodads\\Cinematic\\TownBurningFireEmitter\\TownBurningFireEmitter.mdl", xcheck, ycheck);
			SaveEffectHandle(udg_hash, h, counter, ef);
			ef[null] = null;
			SaveInteger(udg_hash, h, 9, counter);
		}
	}
	if (wait > 0) {
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 7, wait);
		lopa[$A] = $A;
		while (true) {
			if (lopa > counter) break;
			xnew[x + 500. * Cos(angle + (lopa * 18.) * bj_DEGTORAD)] = x + 500. * Cos(angle + (lopa * 18.) * bj_DEGTORAD);
			ynew[y + 500. * Sin(angle + (lopa * 18.) * bj_DEGTORAD)] = y + 500. * Sin(angle + (lopa * 18.) * bj_DEGTORAD);
			GroupEnumUnitsInRange(gdamage, xnew, ynew, 150., null);
			GroupAddGroup(gdamage, gdamage2);
			lopa[lopa + 1] = lopa + 1;
		}
		while (true) {
			Picked[FirstOfGroup(gdamage2)] = FirstOfGroup(gdamage2);
			if (Picked == null) break;
			if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, p) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				UnitDamageTarget(caster, Picked, (damage / 25.), false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				if ((wait - (wait / $F) * $F) == 0) {
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\FlameStrike\\FlameStrikeEmbers.mdl", Picked, "origin"));
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\FlameStrike\\FlameStrikeEmbers.mdl", Picked, "chest"));
				}
			}
			GroupRemoveUnit(gdamage2, Picked);
		}
	else
		lopa[$A] = $A;
		while (true) {
			if (lopa > counter) break;
			ef[LoadEffectHandle(udg_hash, h, lopa)] = LoadEffectHandle(udg_hash, h, lopa);
			DestroyEffect(ef);
			ef[null] = null;
			lopa[lopa + 1] = lopa + 1;
		}
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	caster[null] = null;
	ef[null] = null;
	Picked[null] = null;
	p[null] = null;
	GroupClear(gdamage);
	DestroyGroup(gdamage);
	gdamage[null] = null;
	GroupClear(gdamage2);
	DestroyGroup(gdamage2);
	gdamage2[null] = null;
}
void Trig_Fire_Circle_Actions() {
	unit caster = GetSpellAbilityUnit();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	float angle = GetUnitFacing(caster);
	float xt = x + 500. * Cos(angle * bj_DEGTORAD);
	float yt = y + 500. * Sin(angle * bj_DEGTORAD);
	timer t = CreateTimer();
	int h = GetHandleId(t);
	int waitcreate = 20 * 2;
	int wait = 390;
	int counter = 9;
	float damage = 40. + 20. * CountPlayersInForceBJ(udg_IGRAET);
	TimerStart(t, .04, true, Trig_Fire_Circle_Periodic_Actions);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 2, x);
	SaveReal(udg_hash, h, 3, y);
	SaveReal(udg_hash, h, 4, angle);
	SaveInteger(udg_hash, h, 6, waitcreate);
	SaveInteger(udg_hash, h, 7, wait);
	SaveReal(udg_hash, h, 8, damage);
	SaveInteger(udg_hash, h, 9, counter);
	caster[null] = null;
	t[null] = null;
}
bool Trig_Fire_Circle_Conditions() {
	return GetSpellAbilityId() == 'A004';
}
void InitTrig_Fire_Circle() {
	int index = 0;
	gg_trg_Fire_Circle[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Fire_Circle, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Fire_Circle, Condition(Trig_Fire_Circle_Conditions));
	TriggerAddAction(gg_trg_Fire_Circle, Trig_Fire_Circle_Actions);
}
void Trig_Fire_Meteor_Move_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster;
	float damage;
	float stuntime;
	int wait = LoadInteger(udg_hash, h, 4);
	unit circle;
	effect ef;
	float xt;
	float yt;
	player p;
	group g;
	unit Picked;
	unit dammi;
	if (wait > 0) {
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 4, wait);
		if (wait == 24) {
			xt[LoadReal(udg_hash, h, $B)] = LoadReal(udg_hash, h, $B);
			yt[LoadReal(udg_hash, h, $C)] = LoadReal(udg_hash, h, $C);
			DestroyEffect(AddSpecialEffect("Effects\\MeteorStrike.mdl", xt, yt));
		}
	else
		caster[LoadUnitHandle(udg_hash, h, 1)] = LoadUnitHandle(udg_hash, h, 1);
		circle[LoadUnitHandle(udg_hash, h, 6)] = LoadUnitHandle(udg_hash, h, 6);
		ef[LoadEffectHandle(udg_hash, h, 7)] = LoadEffectHandle(udg_hash, h, 7);
		DestroyEffect(ef);
		ef[null] = null;
		RemoveUnit(circle);
		damage[LoadReal(udg_hash, h, 2)] = LoadReal(udg_hash, h, 2);
		stuntime[LoadReal(udg_hash, h, 3)] = LoadReal(udg_hash, h, 3);
		xt[LoadReal(udg_hash, h, $B)] = LoadReal(udg_hash, h, $B);
		yt[LoadReal(udg_hash, h, $C)] = LoadReal(udg_hash, h, $C);
		p[GetOwningPlayer(caster)] = GetOwningPlayer(caster);
		g[CreateGroup()] = CreateGroup();
		GroupEnumUnitsInRange(g, xt, yt, 200., null);
		dammi[CreateUnit(p, 'h00U', xt, yt, .0)] = CreateUnit(p, 'h00U', xt, yt, .0);
		UnitApplyTimedLife(dammi, 'BTLF', 2.);
		UnitAddAbility(dammi, 'A0O5');
		IssuePointOrderById(dammi, $D0208, xt, yt);
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				StunUnitTimed(Picked, stuntime);
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Effects\\FireBall.mdl", Picked, "chest"));
			}
			GroupRemoveUnit(g, Picked);
		}
		ef[LoadEffectHandle(udg_hash, h, $E)] = LoadEffectHandle(udg_hash, h, $E);
		DestroyEffect(ef);
		ef[null] = null;
		p[null] = null;
		GroupClear(g);
		DestroyGroup(g);
		g[null] = null;
		DestroyTimer(t);
		Picked[null] = null;
		caster[null] = null;
		circle[null] = null;
		dammi[null] = null;
		FlushChildHashtable(udg_hash, h);
	}
	t[null] = null;
}
void Trig_Fire_Meteor_Actions() {
	unit caster = GetSpellAbilityUnit();
	location loc = GetSpellTargetLoc();
	float xt = GetLocationX(loc);
	float yt = GetLocationY(loc);
	float damage = 200. + 40. * CountPlayersInForceBJ(udg_IGRAET);
	float stuntime = 4.;
	float time = 3.;
	unit circle = CreateUnit(GetOwningPlayer(caster), 'h00U', xt, yt, 270.);
	effect ef = AddSpecialEffectTarget("Abilities\\Spells\\Orc\\CommandAura\\CommandAuraTarget.mdl", circle, "origin");
	timer t = CreateTimer();
	int h = GetHandleId(t);
	SetUnitScale(circle, 4., 4., 4.);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 2, damage);
	SaveReal(udg_hash, h, 3, stuntime);
	SaveInteger(udg_hash, h, 4, R2I(time / .03));
	SaveUnitHandle(udg_hash, h, 6, circle);
	SaveEffectHandle(udg_hash, h, 7, ef);
	SaveReal(udg_hash, h, $B, xt);
	SaveReal(udg_hash, h, $C, yt);
	TimerStart(t, .03, true, Trig_Fire_Meteor_Move_Actions);
	caster[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	t[null] = null;
	circle[null] = null;
	ef[null] = null;
}
bool Trig_Fire_Meteor_Conditions() {
	return GetSpellAbilityId() == 'A0O4';
}
void InitTrig_Fire_Meteor() {
	int index = 0;
	gg_trg_Fire_Meteor[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Fire_Meteor, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Fire_Meteor, Condition(Trig_Fire_Meteor_Conditions));
	TriggerAddAction(gg_trg_Fire_Meteor, Trig_Fire_Meteor_Actions);
}
void Trig_Upgrade_Summons_Actions() {
	unit summon = GetEnteringUnit();
	int h = GetUnitTypeId(summon);
	if (h == 'n00L') {
		SetAttackAbilityLevel(summon, 5 * CountPlayersInForceBJ(udg_IGRAET));
		SetUnitMaxState(summon, UNIT_STATE_MAX_LIFE, R2I(75. * CountPlayersInForceBJ(udg_IGRAET)));
	}
	if (h == 'n00M') {
		SetAttackAbilityLevel(summon, 3 * CountPlayersInForceBJ(udg_IGRAET));
		SetUnitMaxState(summon, UNIT_STATE_MAX_LIFE, R2I(30. * CountPlayersInForceBJ(udg_IGRAET)));
	}
	if (h == 'n00N') {
		SetAttackAbilityLevel(summon, $C * CountPlayersInForceBJ(udg_IGRAET));
		SetUnitMaxState(summon, UNIT_STATE_MAX_LIFE, R2I(100. * CountPlayersInForceBJ(udg_IGRAET)));
	}
}
bool Trig_Upgrade_Summons_Conditions() {
	return GetOwningPlayer(GetEnteringUnit()) == Player($B);
}
void InitTrig_Upgrade_Summons() {
	region rectRegion = CreateRegion();
	gg_trg_Upgrade_Summons[CreateTrigger()] = CreateTrigger();
	RegionAddRect(rectRegion, gg_rct_6);
	TriggerRegisterEnterRegion(gg_trg_Upgrade_Summons, rectRegion, null);
	TriggerAddCondition(gg_trg_Upgrade_Summons, Condition(Trig_Upgrade_Summons_Conditions));
	TriggerAddAction(gg_trg_Upgrade_Summons, Trig_Upgrade_Summons_Actions);
}
bool Trig_UseBeornSpells_Is_Enemy_Condition() {
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405) && (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) && (IsPlayerEnemy(udg_Temp_Player[1], GetOwningPlayer(GetFilterUnit())))) != null;
}
bool Trig_UseBeornSpells_Is_Ally_Condition() {
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405) && (GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) < GetUnitState(GetFilterUnit(), UNIT_STATE_MAX_LIFE) * .6) && (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) && (IsPlayerAlly(udg_Temp_Player[1], GetOwningPlayer(GetFilterUnit())))) != null;
}
bool Trig_UseBeornSpells_Condition() {
	return (IsPlayerInForce(GetOwningPlayer(GetFilterUnit()), udg_Players_Enemy_Group));
}
void Trig_UseBeornSpells_Actions() {
	group gall = CreateGroup();
	group g;
	group g2;
	unit Picked;
	unit target;
	float x;
	float y;
	float dist;
	float angle;
	GroupEnumUnitsInRect(gall, bj_mapInitialPlayableArea, Condition(Trig_UseBeornSpells_Condition));
	g[CreateGroup()] = CreateGroup();
	GroupToGroup(gall, g);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A0OD') > 0) && GetRandomInt(1, 2) == 1) {
			g2[CreateGroup()] = CreateGroup();
			x[GetUnitX(Picked)] = GetUnitX(Picked);
			y[GetUnitY(Picked)] = GetUnitY(Picked);
			udg_Temp_Player[GetOwningPlayer(Picked)] = GetOwningPlayer(Picked);
			GroupEnumUnitsInRange(g2, x, y, 600., Condition(Trig_UseBeornSpells_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			g2[CreateGroup()] = CreateGroup();
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			target[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D00CB, target);
			}
			udg_Temp_Player[null] = null;
			GroupClear(g2);
			DestroyGroup(g2);
			g2[null] = null;
			target[null] = null;
		}
		GroupRemoveUnit(g, Picked);
	}
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	g[CreateGroup()] = CreateGroup();
	GroupToGroup(gall, g);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A0OC') > 0) && GetRandomInt(1, 2) == 1) {
			g2[CreateGroup()] = CreateGroup();
			x[GetUnitX(Picked)] = GetUnitX(Picked);
			y[GetUnitY(Picked)] = GetUnitY(Picked);
			udg_Temp_Player[GetOwningPlayer(Picked)] = GetOwningPlayer(Picked);
			GroupEnumUnitsInRange(g2, x, y, 575., Condition(Trig_UseBeornSpells_Is_Ally_Condition));
			RandomUnitFromGroup(1, g2);
			g2[CreateGroup()] = CreateGroup();
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			target[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D00C0, target);
			}
			udg_Temp_Player[null] = null;
			GroupClear(g2);
			DestroyGroup(g2);
			g2[null] = null;
			target[null] = null;
		}
		GroupRemoveUnit(g, Picked);
	}
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	g[CreateGroup()] = CreateGroup();
	GroupToGroup(gall, g);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A0OF') > 0) && GetRandomInt(1, 3) <= 2) {
			g2[CreateGroup()] = CreateGroup();
			x[GetUnitX(Picked)] = GetUnitX(Picked);
			y[GetUnitY(Picked)] = GetUnitY(Picked);
			udg_Temp_Player[GetOwningPlayer(Picked)] = GetOwningPlayer(Picked);
			GroupEnumUnitsInRange(g2, x, y, 300., Condition(Trig_UseBeornSpells_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			g2[CreateGroup()] = CreateGroup();
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			target[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D00BD, target);
			}
			udg_Temp_Player[null] = null;
			GroupClear(g2);
			DestroyGroup(g2);
			g2[null] = null;
			target[null] = null;
		}
		GroupRemoveUnit(g, Picked);
	}
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	GroupClear(gall);
	DestroyGroup(gall);
	gall[null] = null;
}
void InitTrig_UseBeornSpells() {
	gg_trg_UseBeornSpells[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEvent(gg_trg_UseBeornSpells, 1., true);
	TriggerAddAction(gg_trg_UseBeornSpells, Trig_UseBeornSpells_Actions);
}
void Trig_Beorn_Den_onbase_Actions() {
	timer tonbase = GetExpiredTimer();
	int honbase = GetHandleId(tonbase);
	int ishod = LoadInteger(udg_hash, honbase, 3);
	unit boss = udg_BeornBoss;
	group gruppa = CreateGroup();
	unit Picked;
	float xc = GetRectCenterX(gg_rct_Respawn_Heroes);
	float yc = GetRectCenterY(gg_rct_Respawn_Heroes);
	texttag txt;
	float vel = .0221875;
	float angle = 45. + GetRandomReal(.0, 90.);
	float xvel = vel * Cos(angle * bj_DEGTORAD);
	float yvel = vel * Sin(angle * bj_DEGTORAD);
	int dead = 0;
	float perekluchatel = .1;
	group g1 = CreateGroup();
	group g2 = CreateGroup();
	group g3 = CreateGroup();
	group g4 = CreateGroup();
	group g = CreateGroup();
	group grp = CreateGroup();
	int lopb = 0;
	int lopa = 0;
	RemoveUnit(udg_EnergyWallUnit[$A]);
	RemoveUnit(udg_EnergyWallUnit[$B]);
	lopb[1] = 1;
	while (true) {
		if (lopb > $B) break;
		RemoveUnit(udg_EnergyWallUnit[lopb]);
		lopb[lopb + 1] = lopb + 1;
	}
	lopb[1] = 1;
	lopa[0] = 0;
	while (true) {
		if (lopa > $B) break;
		lopa[lopa + 1] = lopa + 1;
		while (true) {
			if (lopb > 7) break;
			RemoveDestructable(udg_EnergyWallBlock[lopa * 7 + lopb]);
			lopb[lopb + 1] = lopb + 1;
		}
		lopb[1] = 1;
	}
	GroupEnumUnitsInRange(grp, 0, 0, 99999, null);
	KillSummonsAndIllusions(grp);
	DisableTrigger(gg_trg_UseBeornSpells);
	ShowAndFlushAllPlayerDamage(false);
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
	CinematicModeExBJ(false, bj_FORCE_ALL_PLAYERS, bj_CINEMODE_INTERFACEFADE);
	CinematicFadeBJ(0, 5., "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0);
	while (true) {
		Picked[FirstOfGroup(gruppa)] = FirstOfGroup(gruppa);
		if (Picked == null) break;
		if (perekluchatel >= 0) {
			perekluchatel[-perekluchatel] = -perekluchatel;
			perekluchatel[perekluchatel - 50.] = perekluchatel - 50.;
		else
			perekluchatel[-perekluchatel] = -perekluchatel;
			perekluchatel[perekluchatel + 50.] = perekluchatel + 50.;
		}
		xc[GetRectCenterX(gg_rct_Respawn_Heroes) + perekluchatel] = GetRectCenterX(gg_rct_Respawn_Heroes) + perekluchatel;
		yc[GetRectCenterY(gg_rct_Respawn_Heroes)] = GetRectCenterY(gg_rct_Respawn_Heroes);
		ReviveHero(Picked, xc, yc, true);
		SetUnitPosition(Picked, xc, yc);
		SetUnitFacing(Picked, 270.);
		SetUnitState(Picked, UNIT_STATE_LIFE, $540BE3FF);
		SetUnitState(Picked, UNIT_STATE_MANA, $540BE3FF);
		if (ishod == 2) {
			txt[CreateTextTag()] = CreateTextTag();
			SetTextTagText(txt, "|cFFFFFF00+800|r", .045);
			SetTextTagPos(txt, GetUnitX(Picked), GetUnitY(Picked), .0);
			SetTextTagColor(txt, 0, 0, 0, 50);
			SetTextTagVelocity(txt, xvel, yvel);
			SetTextTagPermanent(txt, false);
			SetTextTagLifespan(txt, 4.);
			SetTextTagFadepoint(txt, .0);
			txt[null] = null;
			SetHeroStr(Picked, GetHeroStr(Picked, false) + 8, true);
			SetHeroAgi(Picked, GetHeroAgi(Picked, false) + 8, true);
			SetHeroInt(Picked, GetHeroInt(Picked, false) + 8, true);
			SetPlayerState(GetOwningPlayer(Picked), PLAYER_STATE_RESOURCE_GOLD, (GetPlayerState(GetOwningPlayer(Picked), PLAYER_STATE_RESOURCE_GOLD) + 800));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl", Picked, "overhead"));
			if (GetLocalPlayer() == GetOwningPlayer(Picked)) {
				DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Вы получили " + udg_ColorString[23] + I2S(800) + " золота|r!!!");
				DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Все характеристики вашего героя повышены на |cff99ccff8!|r");
			}
		}
		if ((GetLocalPlayer() == GetOwningPlayer(Picked))) {
			ResetToGameCamera(.0);
		}
		if (ishod == 1) {
			DisplayTextToPlayer(GetOwningPlayer(Picked), 0, 0, "|cFFFF0000ВЫ ПРОИГРАЛИ БИТВУ С БЕОРНАМИ!!!|r");
		else
			DisplayTextToPlayer(GetOwningPlayer(Picked), 0, 0, "|cFFFFFF00ВЫ ПОБЕДИЛИ В БИТВЕ С БЕОРНАМИ!!!|r");
		}
		if ((GetLocalPlayer() == GetOwningPlayer(Picked))) {
			ResetToGameCamera(.0);
			PanCameraToTimed(xc, yc, .0);
			SelectUnit(Picked, true);
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	EnableTrigger(gg_trg_Hero_Dead);
	Picked[null] = null;
	GroupEnumUnitsInRect(g1, gg_rct_Les_1, null);
	GroupEnumUnitsInRect(g2, gg_rct_Les1_Dop1, null);
	GroupEnumUnitsInRect(g3, gg_rct_Les1_Dop2, null);
	GroupAddGroup(g1, g);
	GroupAddGroup(g2, g);
	GroupAddGroup(g3, g);
	GroupEnumUnitsInRange(g4, .0, .0, 999999., null);
	while (true) {
		Picked[FirstOfGroup(g4)] = FirstOfGroup(g4);
		if (Picked == null) break;
		if (GetUnitTypeId(Picked) == 'n01N' || GetUnitTypeId(Picked) == 'n01R' || GetUnitTypeId(Picked) == 'n01P') {
			GroupAddUnit(g, Picked);
		}
		GroupRemoveUnit(g4, Picked);
	}
	DestroyGroup(g4);
	g4[null] = null;
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if (GetUnitTypeId(Picked) != 'h00C' && GetUnitTypeId(Picked) != 'h00B' && GetUnitTypeId(Picked) != 'h00U') {
			RemoveUnit(Picked);
		}
		GroupRemoveUnit(g, Picked);
	}
	StartTimerBJ(udg_Timer_Nomera_Volni, false, 50.);
	CreateTimerDialogBJ(udg_Timer_Nomera_Volni, ("Волна № |cFFFF0000" + (I2S(udg_Nomer_samoi_volni) + "|r")));
	udg_TimerDialog_Nomera_Volni[bj_lastCreatedTimerDialog] = bj_lastCreatedTimerDialog;
	TimerDialogSetTimeColorBJ(udg_TimerDialog_Nomera_Volni, 'd', 90., 30., 20.);
	udg_Is_Fast_Wave_Start_On_Off[true] = true;
	Picked[null] = null;
	RemoveUnit(boss);
	boss[null] = null;
	DestroyGroup(gruppa);
	gruppa[null] = null;
	FlushChildHashtable(udg_hash, honbase);
	DestroyTimer(tonbase);
	tonbase[null] = null;
	DisableTrigger(gg_trg_Start_Beorn_Den);
}
void Trig_Beorn_Den_end_Actions() {
	timer tend = GetExpiredTimer();
	int hend = GetHandleId(tend);
	unit boss = udg_BeornBoss;
	int lop = 0;
	int ishod = udg_Ishod_S_Beornami;
	timer tonbase = CreateTimer();
	int honbase = GetHandleId(tonbase);
	group g1 = CreateGroup();
	group g2 = CreateGroup();
	group g22 = CreateGroup();
	group g3 = CreateGroup();
	group g = CreateGroup();
	group gg;
	unit Picked;
	DestroyEffect(LoadEffectHandle(udg_hash, GetHandleId(boss), $87));
	SaveUnitHandle(udg_hash, honbase, 1, boss);
	SaveInteger(udg_hash, honbase, 3, ishod);
	GroupEnumUnitsInRect(g1, gg_rct_Les_1, null);
	GroupEnumUnitsInRect(g2, gg_rct_Les1_Dop1, null);
	GroupEnumUnitsInRect(g3, gg_rct_Les1_Dop2, null);
	GroupAddGroup(g1, g);
	GroupAddGroup(g2, g);
	GroupAddGroup(g3, g);
	while (true) {
		if (lop > 9) break;
		if ((GetLocalPlayer() == Player(lop))) {
			CameraSetupApplyForceDuration(gg_cam_Camera_Beorn_Den1, true, .0);
			SetCameraRotateMode(GetRectCenterX(gg_rct_Beorn_Boss_Area), GetRectCenterY(gg_rct_Beorn_Boss_Area), bj_DEGTORAD * 360., 5.);
		}
		lop[lop + 1] = lop + 1;
	}
	TimerStart(tonbase, 5., false, Trig_Beorn_Den_onbase_Actions);
	if (ishod == 1) {
		IssuePointOrderById(boss, $D0012, GetRectCenterX(gg_rct_Beorn_Boss_Area), GetRectCenterY(gg_rct_Beorn_Boss_Area));
	else
		udg_IsBeronsFightWin[false] = false;
		gg[CreateGroup()] = CreateGroup();
		GroupAddGroup(udg_PortalCastersMagi, gg);
		while (true) {
			Picked[FirstOfGroup(gg)] = FirstOfGroup(gg);
			if (Picked == null) break;
			UnitAddAbility(Picked, 'A0OL');
			GroupRemoveUnit(gg, Picked);
		}
		DestroyGroup(gg);
		gg[null] = null;
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (GetOwningPlayer(Picked) == Player($B)) {
				KillUnit(Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
		Picked[null] = null;
	}
	g22[CreateGroup()] = CreateGroup();
	GroupEnumUnitsInRange(g22, 0, 0, 99999, null);
	KillSummonsAndIllusions(g22);
	CinematicModeExBJ(true, bj_FORCE_ALL_PLAYERS, bj_CINEMODE_INTERFACEFADE);
	CinematicFadeBJ(1, 5., "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1);
	FlushChildHashtable(udg_hash, hend);
	DestroyTimer(tend);
	tend[null] = null;
	boss[null] = null;
	tonbase[null] = null;
	DestroyGroup(g);
	g[null] = null;
}
void Trig_Beorn_Den_Boss_hpcheck_Actions() {
	unit boss = udg_BeornBoss;
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	int maxwait = LoadInteger(udg_hash, h, 1);
	int wait = LoadInteger(udg_hash, h, 2);
	int cdskill = LoadInteger(udg_hash, h, 3);
	int itemrand = R2I($A + 5 * CountPlayersInForceBJ(udg_IGRAET));
	float itemx = (GetRandomReal(1000., 1650.));
	float itemy = (GetRandomReal(-9800., -10200.));
	unit beorn;
	if (GetUnitState(boss, UNIT_STATE_LIFE) > .405 && udg_BeornBossFightEnd == false) {
		if (GetRandomInt(1, 'd') <= itemrand) {
			CreatePotion(itemx, itemy, 1, 4);
		}
		if (cdskill < 8) {
			SaveInteger(udg_hash, h, 3, cdskill + 1);
		}
		if (cdskill >= 8) {
			IssueImmediateOrderById(boss, $D0105);
			SaveInteger(udg_hash, h, 3, 0);
		}
		if (wait < maxwait) {
			SaveInteger(udg_hash, h, 2, wait + 1);
		}
		if (wait >= maxwait) {
			SaveInteger(udg_hash, h, 2, 0);
			beorn[CreateUnit(Player($B), 'n01R', itemx, itemy, GetRandomReal(.0, 360.))] = CreateUnit(Player($B), 'n01R', itemx, itemy, GetRandomReal(.0, 360.));
			UnitApplyTimedLife(beorn, 'BTLF', 60.);
			beorn[null] = null;
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl", itemx, itemy));
		}
	else
		DestroyTimer(t);
	}
	boss[null] = null;
}
void Trig_Beorn_Den_HeroInHeroArea_Check_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	int lopb;
	group gruppa = CreateGroup();
	group g2;
	unit Picked;
	float x;
	float y;
	int countrct = 0;
	float dist = 1.;
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
	while (true) {
		Picked[FirstOfGroup(gruppa)] = FirstOfGroup(gruppa);
		if (Picked == null) break;
		x[GetUnitX(Picked)] = GetUnitX(Picked);
		y[GetUnitY(Picked)] = GetUnitY(Picked);
		if ((GetRectMinX(gg_rct_Beorn_Boss_Area) <= x) && (x <= GetRectMaxX(gg_rct_Beorn_Boss_Area)) && (GetRectMinY(gg_rct_Beorn_Boss_Area) <= y) && (y <= GetRectMaxY(gg_rct_Beorn_Boss_Area))) {
			countrct[1] = 1;
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	if (countrct == 1) {
		CreateEnergyWall($A, $B);
		GroupClear(gruppa);
		DestroyGroup(gruppa);
		gruppa[null] = null;
		g2[CreateGroup()] = CreateGroup();
		GroupEnumUnitsInRange(g2, 0, 0, 99999, null);
		KillSummonsAndIllusions(g2);
		gruppa[CreateGroup()] = CreateGroup();
		GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
		while (true) {
			Picked[FirstOfGroup(gruppa)] = FirstOfGroup(gruppa);
			if (Picked == null) break;
			SetUnitPosition(Picked, 1320. + dist, -9540.);
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl", 1320. + dist, -9540.));
			if (dist > .0) {
				dist[-dist - 50.] = -dist - 50.;
			else
				dist[-dist + 50.] = -dist + 50.;
			}
			SetUnitFacing(Picked, 270.);
			if ((GetLocalPlayer() == GetOwningPlayer(Picked))) {
				CameraSetupApplyForceDuration(gg_cam_Camera_Beorn_Den6, true, 1.);
				ClearSelection();
				SelectUnit(Picked, true);
			}
			GroupRemoveUnit(gruppa, Picked);
		}
		SetAttackAbilityLevel(udg_BeornBoss, $F * CountPlayersInForceBJ(udg_IGRAET));
		SetArmorAbilityLevel(udg_BeornBoss, 3 * CountPlayersInForceBJ(udg_IGRAET));
		SetUnitMaxState(udg_BeornBoss, UNIT_STATE_MAX_LIFE, R2I(800. * CountPlayersInForceBJ(udg_IGRAET)));
		SetUnitInvulnerable(udg_BeornBoss, false);
		IssueImmediateOrderById(udg_BeornBoss, $D0004);
		DestroyTimer(t);
		t[CreateTimer()] = CreateTimer();
		h[GetHandleId(t)] = GetHandleId(t);
		SaveInteger(udg_hash, h, 1, R2I(22. - CountPlayersInForceBJ(udg_IGRAET) * 2.));
		SaveInteger(udg_hash, h, 2, 0);
		SaveInteger(udg_hash, h, 3, 0);
		TimerStart(t, 1., true, Trig_Beorn_Den_Boss_hpcheck_Actions);
		t[null] = null;
	}
	t[null] = null;
	GroupClear(gruppa);
	DestroyGroup(gruppa);
	gruppa[null] = null;
}
void Trig_Beorn_Den_Shamans_HP_Check_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit sh1 = LoadUnitHandle(udg_hash, h, 1);
	unit sh2 = LoadUnitHandle(udg_hash, h, 2);
	unit sh3 = LoadUnitHandle(udg_hash, h, 3);
	int lopb;
	if ((GetUnitState(sh1, UNIT_STATE_LIFE) < .0 || sh1 == null) && (GetUnitState(sh2, UNIT_STATE_LIFE) < .0 || sh2 == null) && (GetUnitState(sh3, UNIT_STATE_LIFE) < .0 || sh3 == null)) {
		DestroyTimer(t);
		RemoveUnit(udg_EnergyWallUnit[$A]);
		RemoveUnit(udg_EnergyWallUnit[$B]);
		lopb[1] = 1;
		while (true) {
			if (lopb > 7) break;
			RemoveDestructable(udg_EnergyWallBlock[63 + lopb]);
			RemoveDestructable(udg_EnergyWallBlock[70 + lopb]);
			lopb[lopb + 1] = lopb + 1;
		}
		t[CreateTimer()] = CreateTimer();
		TimerStart(t, 1., true, Trig_Beorn_Den_HeroInHeroArea_Check_Actions);
		t[null] = null;
	}
	t[null] = null;
	sh1[null] = null;
	sh2[null] = null;
	sh3[null] = null;
}
void Trig_Beorn_Shamans_Animation_Check_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit sh1 = LoadUnitHandle(udg_hash, h, 1);
	if (GetUnitState(sh1, UNIT_STATE_LIFE) > .405) {
		SetUnitAnimationByIndex(sh1, 3);
	else
		DestroyTimer(t);
		FlushChildHashtable(udg_hash, h);
	}
	t[null] = null;
	sh1[null] = null;
}
void Trig_Beorn_Den_HP_Check_Actions() {
	timer t = GetExpiredTimer();
	int players = CountPlayersInForceBJ(udg_IGRAET);
	int lopa = 1;
	int countmelee = 1 + R2I(players / 4);
	float dist = 1.;
	int h;
	unit u;
	timer t1;
	int h1;
	if (GetUnitState(udg_BeornDenHouse[1], UNIT_STATE_LIFE) < .405 && GetUnitState(udg_BeornDenHouse[2], UNIT_STATE_LIFE) < .405) {
		DestroyTimer(t);
		t[CreateTimer()] = CreateTimer();
		h[GetHandleId(t)] = GetHandleId(t);
		u[CreateUnit(Player($B), 'n01Q', 1900., -8000., 270.)] = CreateUnit(Player($B), 'n01Q', 1900., -8000., 270.);
		UnitAddAbility(u, 'Abun');
		UnitAddType(u, UNIT_TYPE_PEON);
		PauseUnit(u, true);
		SetUnitAnimationByIndex(u, 3);
		SetUnitMoveSpeed(u, 0);
		t1[CreateTimer()] = CreateTimer();
		h1[GetHandleId(t1)] = GetHandleId(t1);
		SaveUnitHandle(udg_hash, h1, 1, u);
		TimerStart(t1, 1., true, Trig_Beorn_Shamans_Animation_Check_Actions);
		t1[null] = null;
		SaveUnitHandle(udg_hash, h, 1, u);
		while (true) {
			if (lopa > countmelee) break;
			CreateUnit(Player($B), 'n01R', 1900. + dist, -8000., 270.);
			if (dist > .0) {
				dist[-dist - 50.] = -dist - 50.;
			else
				dist[-dist + 50.] = -dist + 50.;
			}
			lopa[lopa + 1] = lopa + 1;
		}
		lopa[1] = 1;
		dist[1.] = 1.;
		u[CreateUnit(Player($B), 'n01Q', 2400., -8850., 90.)] = CreateUnit(Player($B), 'n01Q', 2400., -8850., 90.);
		UnitAddAbility(u, 'Abun');
		UnitAddType(u, UNIT_TYPE_PEON);
		PauseUnit(u, true);
		SetUnitAnimationByIndex(u, 3);
		SetUnitMoveSpeed(u, 0);
		t1[CreateTimer()] = CreateTimer();
		h1[GetHandleId(t1)] = GetHandleId(t1);
		SaveUnitHandle(udg_hash, h1, 1, u);
		TimerStart(t1, 1., true, Trig_Beorn_Shamans_Animation_Check_Actions);
		t1[null] = null;
		SaveUnitHandle(udg_hash, h, 2, u);
		while (true) {
			if (lopa > countmelee) break;
			CreateUnit(Player($B), 'n01R', 2400. + dist, -8600., 90.);
			if (dist > .0) {
				dist[-dist - 50.] = -dist - 50.;
			else
				dist[-dist + 50.] = -dist + 50.;
			}
			lopa[lopa + 1] = lopa + 1;
		}
		lopa[1] = 1;
		dist[1.] = 1.;
		u[CreateUnit(Player($B), 'n01Q', 850., -8900., .0)] = CreateUnit(Player($B), 'n01Q', 850., -8900., .0);
		UnitAddAbility(u, 'Abun');
		UnitAddType(u, UNIT_TYPE_PEON);
		PauseUnit(u, true);
		SetUnitAnimationByIndex(u, 3);
		SetUnitMoveSpeed(u, 0);
		SaveUnitHandle(udg_hash, h, 3, u);
		t1[CreateTimer()] = CreateTimer();
		h1[GetHandleId(t1)] = GetHandleId(t1);
		SaveUnitHandle(udg_hash, h1, 1, u);
		TimerStart(t1, 1., true, Trig_Beorn_Shamans_Animation_Check_Actions);
		t1[null] = null;
		while (true) {
			if (lopa > countmelee) break;
			CreateUnit(Player($B), 'n01R', 850. + dist, -8700., .0);
			if (dist > .0) {
				dist[-dist - 50.] = -dist - 50.;
			else
				dist[-dist + 50.] = -dist + 50.;
			}
			lopa[lopa + 1] = lopa + 1;
		}
		lopa[1] = 1;
		dist[1.] = 1.;
		TimerStart(t, 1., true, Trig_Beorn_Den_Shamans_HP_Check_Actions);
		t[null] = null;
	}
	t[null] = null;
}
void Trig_Beorn_Den_Create_Beorns2_Actions() {
	timer t = GetExpiredTimer();
	int players = CountPlayersInForceBJ(udg_IGRAET);
	int countmelee = 1 + R2I(players / 3);
	int countrange = 1 + R2I(players / 3);
	int lopa = 1;
	float dist = 1.;
	unit u;
	unit hero;
	group g = CreateGroup();
	if (GetUnitState(udg_BeornDenHouse[2], UNIT_STATE_LIFE) > .0) {
		GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, g);
		while (true) {
			if (lopa > countmelee) break;
			u[CreateUnit(Player($B), 'n01N', 70. + dist, -8870., 90.)] = CreateUnit(Player($B), 'n01N', 70. + dist, -8870., 90.);
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl", GetUnitX(u), GetUnitY(u)));
			RandomUnitFromGroup(1, g);
			hero[FirstOfGroup(udg_GroupRandomUnitFromGroup)] = FirstOfGroup(udg_GroupRandomUnitFromGroup);
			IssuePointOrderById(u, $D000F, GetUnitX(hero), GetUnitY(hero));
			u[null] = null;
			u[CreateUnit(Player($B), 'n01P', 70. + dist, -9000., 90.)] = CreateUnit(Player($B), 'n01P', 70. + dist, -9000., 90.);
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl", GetUnitX(u), GetUnitY(u)));
			IssuePointOrderById(u, $D000F, GetUnitX(hero), GetUnitY(hero));
			u[null] = null;
			GroupClear(g);
			DestroyGroup(g);
			g[null] = null;
			if (dist > .0) {
				dist[-dist - 50.] = -dist - 50.;
			else
				dist[-dist + 50.] = -dist + 50.;
			}
			lopa[lopa + 1] = lopa + 1;
		}
		TimerStart(t, 30., false, Trig_Beorn_Den_Create_Beorns2_Actions);
	else
		DestroyTimer(t);
	}
	t[null] = null;
}
void Trig_Beorn_Den_Create_Beorns_Actions() {
	timer t = GetExpiredTimer();
	int players = CountPlayersInForceBJ(udg_IGRAET);
	int countmelee = 1 + R2I(players / 3);
	int countrange = 1 + R2I(players / 3);
	int lopa = 1;
	float dist = 1.;
	unit u;
	unit hero;
	group g = CreateGroup();
	if (GetUnitState(udg_BeornDenHouse[1], UNIT_STATE_LIFE) > .0) {
		GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, g);
		while (true) {
			if (lopa > countmelee) break;
			u[CreateUnit(Player($B), 'n01N', 500., -8400. + dist, .0)] = CreateUnit(Player($B), 'n01N', 500., -8400. + dist, .0);
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl", GetUnitX(u), GetUnitY(u)));
			RandomUnitFromGroup(1, g);
			hero[FirstOfGroup(udg_GroupRandomUnitFromGroup)] = FirstOfGroup(udg_GroupRandomUnitFromGroup);
			IssuePointOrderById(u, $D000F, GetUnitX(hero), GetUnitY(hero));
			u[null] = null;
			u[CreateUnit(Player($B), 'n01P', 300., -8400. + dist, .0)] = CreateUnit(Player($B), 'n01P', 300., -8400. + dist, .0);
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl", GetUnitX(u), GetUnitY(u)));
			IssuePointOrderById(u, $D000F, GetUnitX(hero), GetUnitY(hero));
			u[null] = null;
			GroupClear(g);
			DestroyGroup(g);
			g[null] = null;
			if (dist > .0) {
				dist[-dist - 50.] = -dist - 50.;
			else
				dist[-dist + 50.] = -dist + 50.;
			}
			lopa[lopa + 1] = lopa + 1;
		}
		TimerStart(t, 35., false, Trig_Beorn_Den_Create_Beorns_Actions);
	else
		DestroyTimer(t);
	}
	t[null] = null;
}
void Trig_Start_Beorn_Den_5sec_Actions() {
	timer t5sec = GetExpiredTimer();
	int h5sec = GetHandleId(t5sec);
	unit boss = LoadUnitHandle(udg_hash, h5sec, 1);
	group gruppa = CreateGroup();
	unit Picked;
	timer tfrasa = CreateTimer();
	int hfrasa = GetHandleId(tfrasa);
	timer thpcheck = CreateTimer();
	int stage = 0;
	bool zaniat = false;
	timer tbeorn = CreateTimer();
	timer tbeorn2 = CreateTimer();
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
	CinematicModeExBJ(false, bj_FORCE_ALL_PLAYERS, bj_CINEMODE_INTERFACEFADE);
	while (true) {
		Picked[FirstOfGroup(gruppa)] = FirstOfGroup(gruppa);
		if (Picked == null) break;
		PauseUnit(Picked, false);
		if ((GetLocalPlayer() == GetOwningPlayer(Picked))) {
			ClearSelection();
			SelectUnit(Picked, true);
			ResetToGameCamera(.0);
			PanCameraToTimed(2090., -8300., .0);
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	TimerStart(thpcheck, 1., true, Trig_Beorn_Den_HP_Check_Actions);
	TimerStart(tbeorn, 2., false, Trig_Beorn_Den_Create_Beorns_Actions);
	TimerStart(tbeorn2, 17., false, Trig_Beorn_Den_Create_Beorns2_Actions);
	DestroyTimer(t5sec);
	FlushChildHashtable(udg_hash, h5sec);
	t5sec[null] = null;
	boss[null] = null;
	Picked[null] = null;
	GroupClear(gruppa);
	DestroyGroup(gruppa);
	gruppa[null] = null;
}
void Trig_Start_Beorn_Den_6sec_Actions() {
	timer t3sec = GetExpiredTimer();
	int h3sec = GetHandleId(t3sec);
	timer t5sec = CreateTimer();
	int h5sec = GetHandleId(t5sec);
	unit boss = LoadUnitHandle(udg_hash, h3sec, 1);
	group gruppa = CreateGroup();
	unit Picked;
	unit support = CreateUnit(Player($F), 'h00J', .0, .0, .0);
	UnitApplyTimedLife(support, 'BTLF', 20.);
	SaveUnitHandle(udg_hash, h5sec, 1, boss);
	TimerStart(t5sec, 7., false, Trig_Start_Beorn_Den_5sec_Actions);
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
	while (true) {
		Picked[FirstOfGroup(gruppa)] = FirstOfGroup(gruppa);
		if (Picked == null) break;
		if ((GetLocalPlayer() == GetOwningPlayer(Picked))) {
			CameraSetupApplyForceDuration(gg_cam_Camera_Beorn_Den3, true, .0);
			CameraSetupApplyForceDuration(gg_cam_Camera_Beorn_Den4, true, 7.);
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS, support, "Помощник", null, "|cff99ccffДля этого уничтожьте две Хижины Беорнов, а затем... Ну, как-нибудь уберите магическую защиту и войдите в логово Старейшины Беорнов. Удачи...|r", 0, 7., false);
	DestroyTimer(t3sec);
	FlushChildHashtable(udg_hash, h3sec);
	t3sec[null] = null;
	t5sec[null] = null;
	boss[null] = null;
}
void Trig_Start_Beorn_Den_4sec_Actions() {
	timer t3sec = GetExpiredTimer();
	int h3sec = GetHandleId(t3sec);
	timer t6sec = CreateTimer();
	int h6sec = GetHandleId(t6sec);
	unit boss = LoadUnitHandle(udg_hash, h3sec, 1);
	unit support = CreateUnit(Player($F), 'h00J', .0, .0, .0);
	UnitApplyTimedLife(support, 'BTLF', 20.);
	SaveUnitHandle(udg_hash, h6sec, 1, boss);
	TimerStart(t6sec, 8., false, Trig_Start_Beorn_Den_6sec_Actions);
	TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS, support, "Помощник", null, "|cff99ccffУничтожьте Старейшину Беорнов, для того чтобы получить награду золотом, бонусы для своего героя и усилить стражей-заклинателей на базе|r", 0, 8., false);
	DestroyTimer(t3sec);
	FlushChildHashtable(udg_hash, h3sec);
	t3sec[null] = null;
	t6sec[null] = null;
	boss[null] = null;
}
void Trig_Start_Beorn_Den_Check_Rects_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit boss = LoadUnitHandle(udg_hash, h, 1);
	group gruppa = CreateGroup();
	unit Picked;
	float x;
	float y;
	int countrct;
	if (GetUnitState(boss, UNIT_STATE_LIFE) > .0) {
		x[GetUnitX(boss)] = GetUnitX(boss);
		y[GetUnitY(boss)] = GetUnitY(boss);
		if ((GetRectMinX(gg_rct_Beorn_Boss_Area2) <= x) && (x <= GetRectMaxX(gg_rct_Beorn_Boss_Area2)) && (GetRectMinY(gg_rct_Beorn_Boss_Area2) <= y) && (y <= GetRectMaxY(gg_rct_Beorn_Boss_Area2))) {
		else
			SetUnitPosition(boss, 1400., -9900.);
			SetUnitFacing(boss, 90.);
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl", 1400., -9900.));
		}
		GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
		while (true) {
			Picked[FirstOfGroup(gruppa)] = FirstOfGroup(gruppa);
			if (Picked == null) break;
			x[GetUnitX(Picked)] = GetUnitX(Picked);
			y[GetUnitY(Picked)] = GetUnitY(Picked);
			countrct[0] = 0;
			if ((GetRectMinX(gg_rct_Les_1) <= x) && (x <= GetRectMaxX(gg_rct_Les_1)) && (GetRectMinY(gg_rct_Les_1) <= y) && (y <= GetRectMaxY(gg_rct_Les_1))) {
				countrct[1] = 1;
			}
			if ((GetRectMinX(gg_rct_Les1_Dop1) <= x) && (x <= GetRectMaxX(gg_rct_Les1_Dop1)) && (GetRectMinY(gg_rct_Les1_Dop1) <= y) && (y <= GetRectMaxY(gg_rct_Les1_Dop1))) {
				countrct[1] = 1;
			}
			if ((GetRectMinX(gg_rct_Les1_Dop2) <= x) && (x <= GetRectMaxX(gg_rct_Les1_Dop2)) && (GetRectMinY(gg_rct_Les1_Dop2) <= y) && (y <= GetRectMaxY(gg_rct_Les1_Dop2))) {
				countrct[1] = 1;
			}
			if (countrct == 0) {
				if ((GetLocalPlayer() == GetOwningPlayer(Picked))) {
					ClearSelection();
					SelectUnit(Picked, true);
					CameraSetupApplyForceDuration(gg_cam_Camera_Beorn_Den5, true, .0);
				}
				SetUnitPosition(Picked, 2090., -8300.);
				SetUnitFacing(Picked, 180.);
			}
			GroupRemoveUnit(gruppa, Picked);
		}
	else
		DestroyTimer(t);
		FlushChildHashtable(udg_hash, h);
	}
	t[null] = null;
	Picked[null] = null;
	GroupClear(gruppa);
	DestroyGroup(gruppa);
	gruppa[null] = null;
	boss[null] = null;
}
void Trig_Start_Beorn_Den_Check_Alive_Units_Actions() {
	timer t = GetExpiredTimer();
	group gruppa = CreateGroup();
	unit Picked;
	int ishod = 0;
	bool alive = false;
	bool start = false;
	if (GetUnitState(udg_BeornBoss, UNIT_STATE_LIFE) < .405) {
		udg_Ishod_S_Beornami[2] = 2;
		start[true] = true;
	}
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
	while (true) {
		Picked[FirstOfGroup(gruppa)] = FirstOfGroup(gruppa);
		if (Picked == null) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405) {
			alive[true] = true;
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	if (alive == false) {
		udg_Ishod_S_Beornami[1] = 1;
		start[true] = true;
	}
	if (start) {
		DestroyTimer(t);
		udg_BeornBossFightEnd[true] = true;
		t[CreateTimer()] = CreateTimer();
		TimerStart(t, 1., false, Trig_Beorn_Den_end_Actions);
	}
	t[null] = null;
	Picked[null] = null;
	GroupClear(gruppa);
	DestroyGroup(gruppa);
	gruppa[null] = null;
}
void Trig_Start_Beorn_Den_Actions() {
	int random;
	int end = 1;
	group gruppa = CreateGroup();
	unit Picked;
	float dist = 1.;
	unit boss = CreateUnit(Player($B), 'n01S', 1400., -9950., 90.);
	timer t3sec = CreateTimer();
	int h3sec = GetHandleId(t3sec);
	timer tobl = CreateTimer();
	int hobl = GetHandleId(tobl);
	timer talive = CreateTimer();
	group grp = CreateGroup();
	GroupEnumUnitsInRange(grp, 0, 0, 99999, null);
	KillSummonsAndIllusions(grp);
	CreateEnergyWall(1, $B);
	udg_BeornBoss[boss] = boss;
	SetUnitInvulnerable(boss, true);
	CreateUnit(Player($B), 'n01R', 1200., -9900., 90.);
	IssueImmediateOrderById(bj_lastCreatedUnit, $D0019);
	CreateUnit(Player($B), 'n01R', 1600., -9900., 90.);
	IssueImmediateOrderById(bj_lastCreatedUnit, $D0019);
	udg_BeornDenHouse[CreateUnit(Player($B), 'n01O', 440., -8060., 270.)] = CreateUnit(Player($B), 'n01O', 440., -8060., 270.);
	udg_BeornDenHouse[CreateUnit(Player($B), 'n01O', -140., -9150., 270.)] = CreateUnit(Player($B), 'n01O', -140., -9150., 270.);
	DisableTrigger(gg_trg_Hero_Dead);
	IssueImmediateOrderById(udg_BeornBoss, $D0019);
	EnableTrigger(gg_trg_UseBeornSpells);
	GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, gruppa);
	CinematicModeExBJ(true, bj_FORCE_ALL_PLAYERS, bj_CINEMODE_INTERFACEFADE);
	CinematicFadeBJ(1, .0, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1);
	CinematicFadeBJ(0, 4., "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1);
	while (true) {
		Picked[FirstOfGroup(gruppa)] = FirstOfGroup(gruppa);
		if (Picked == null) break;
		SetUnitPosition(Picked, 2090., (-8300. + dist));
		if (dist > .0) {
			dist[-dist - 50.] = -dist - 50.;
		else
			dist[-dist + 50.] = -dist + 50.;
		}
		SetUnitFacing(Picked, 180.);
		PauseUnit(Picked, true);
		ClearSelection();
		if ((GetLocalPlayer() == GetOwningPlayer(Picked))) {
			CameraSetupApplyForceDuration(gg_cam_Camera_Beorn_Den1, true, .0);
			CameraSetupApplyForceDuration(gg_cam_Camera_Beorn_Den2, true, 12.);
		}
		GroupRemoveUnit(gruppa, Picked);
	}
	SaveUnitHandle(udg_hash, h3sec, 1, boss);
	TimerStart(t3sec, 4., false, Trig_Start_Beorn_Den_4sec_Actions);
	ShowAndFlushAllPlayerDamage(true);
	TimerStart(udg_TimerShowAndFlushAllPlayerDmg, 10000., false, null);
	SaveUnitHandle(udg_hash, hobl, 1, boss);
	TimerStart(tobl, 1., true, Trig_Start_Beorn_Den_Check_Rects_Actions);
	TimerStart(talive, 1., true, Trig_Start_Beorn_Den_Check_Alive_Units_Actions);
	Picked[null] = null;
	boss[null] = null;
	GroupClear(gruppa);
	DestroyGroup(gruppa);
	gruppa[null] = null;
	t3sec[null] = null;
}
void InitTrig_Start_Beorn_Den() {
	gg_trg_Start_Beorn_Den[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Start_Beorn_Den, Trig_Start_Beorn_Den_Actions);
}
void Trig_Beorn_Push_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	float xt = GetUnitX(target);
	float yt = GetUnitY(target);
	float angle = bj_RADTODEG * Atan2((yt - y), (xt - x));
	unit dammi;
	UnitDamageTarget(caster, target, 65. + 15. * CountPlayersInForceBJ(udg_IGRAET), false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
	MoveUnit(target, .5, 800., 1200., angle, .0, true);
	dammi[CreateUnit(GetOwningPlayer(caster), 'h00U', x, y, .0)] = CreateUnit(GetOwningPlayer(caster), 'h00U', x, y, .0);
	UnitApplyTimedLife(dammi, 'BTLF', 1.);
	UnitAddAbility(dammi, 'A0OG');
	IssueTargetOrderById(dammi, $D006B, target);
	dammi[null] = null;
	caster[null] = null;
	target[null] = null;
}
bool Trig_Beorn_Push_Conditions() {
	return GetSpellAbilityId() == 'A0OF';
}
void InitTrig_Beorn_Push() {
	int index = 0;
	gg_trg_Beorn_Push[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Beorn_Push, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Beorn_Push, Condition(Trig_Beorn_Push_Conditions));
	TriggerAddAction(gg_trg_Beorn_Push, Trig_Beorn_Push_Actions);
}
void Trig_Beorn_Stomp_Actions() {
	unit caster = GetSpellAbilityUnit();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	float radius = 300.;
	float damage = 75. + 25. * CountPlayersInForceBJ(udg_IGRAET);
	player p = GetOwningPlayer(caster);
	group g = CreateGroup();
	unit Picked;
	float dist;
	float angle;
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", x, y));
	GroupEnumUnitsInRange(g, x, y, radius, null);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, p) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			StunUnitTimed(Picked, 1.5);
			dist[SquareRoot((GetUnitX(Picked) - x) * (GetUnitX(Picked) - x) + (GetUnitY(Picked) - y) * (GetUnitY(Picked) - y))] = SquareRoot((GetUnitX(Picked) - x) * (GetUnitX(Picked) - x) + (GetUnitY(Picked) - y) * (GetUnitY(Picked) - y));
			angle[bj_RADTODEG * Atan2(GetUnitY(Picked) - y, GetUnitX(Picked) - x)] = bj_RADTODEG * Atan2(GetUnitY(Picked) - y, GetUnitX(Picked) - x);
			MoveUnit(Picked, (300. - dist) / 300. + .25, (600. - dist), .0, angle, .0, true);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", Picked, "origin"));
		}
		GroupRemoveUnit(g, Picked);
	}
	caster[null] = null;
	p[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	Picked[null] = null;
}
bool Trig_Beorn_Stomp_Conditions() {
	return GetSpellAbilityId() == 'A0OH';
}
void InitTrig_Beorn_Stomp() {
	int index = 0;
	gg_trg_Beorn_Stomp[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Beorn_Stomp, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Beorn_Stomp, Condition(Trig_Beorn_Stomp_Conditions));
	TriggerAddAction(gg_trg_Beorn_Stomp, Trig_Beorn_Stomp_Actions);
}
bool Trig_HeroUnitGameSave_Func001C() {
	return (IsUnitType(GetEnteringUnit(), UNIT_TYPE_HERO)) != null;
}
void Trig_HeroUnitGameSave_Actions() {
	if ((Trig_HeroUnitGameSave_Func001C())) {
		udg_herounit[GetEnteringUnit()] = GetEnteringUnit();
		GroupAddUnit(udg_Gruppa_HeroUnitov_Geroev, GetEnteringUnit());
	}
}
void InitTrig_HeroUnitGameSave() {
	gg_trg_HeroUnitGameSave[CreateTrigger()] = CreateTrigger();
	TriggerRegisterEnterRectSimple(gg_trg_HeroUnitGameSave, gg_rct_Oblstb_Tavern);
	TriggerAddAction(gg_trg_HeroUnitGameSave, Trig_HeroUnitGameSave_Actions);
}
bool Trig_INIT_Func001Func001C() {
	return ((IsUnitType(GetEnumUnit(), UNIT_TYPE_STRUCTURE) == false) && (GetUnitTypeId(GetEnumUnit()) != 'h00A')) != null;
}
void Trig_INIT_Func001A() {
	if ((Trig_INIT_Func001Func001C())) {
		udg_herounit[GetEnumUnit()] = GetEnumUnit();
		GroupAddUnit(udg_Gruppa_HeroUnitov_Geroev, GetEnumUnit());
		ForceAddPlayer(udg_IGRAET, GetOwningPlayer(GetEnumUnit()));
	}
}
void Trig_INIT_Func002A() {
	ForceAddPlayer(udg_Gruppa_Igrokov_Vibor_Heroev, GetEnumPlayer());
	CameraSetupApplyForPlayer(true, gg_cam_Kamera_na_taverni, GetEnumPlayer(), 0);
	CreateNUnitsAtLoc(1, 'h00A', GetEnumPlayer(), PolarProjectionBJ(GetRectCenter(gg_rct_Oblstb_Tavern), 50., (I2R((1 + GetPlayerId(GetEnumPlayer()))) * 40.)), bj_UNIT_FACING);
	udg_DummyHeroPick[bj_lastCreatedUnit] = bj_lastCreatedUnit;
	udg_System_ShowAbil_And_Items_Hint[true] = true;
}
void Trig_INIT_Actions() {
	ForGroupBJ(GetUnitsInRectAll(gg_rct_Oblstb_Tavern), Trig_INIT_Func001A);
	ForForce(udg_IGRAET, Trig_INIT_Func002A);
	udg_Heroes_Types['H01M'] = 'H01M';
	udg_MutliBoardHeroIcon["ReplaceableTextures\\CommandButtons\\BTNGuardsman.blp"] = "ReplaceableTextures\\CommandButtons\\BTNGuardsman.blp";
	SaveInteger(udg_hash, 'H01M', 84, 1);
	udg_Heroes_Types['O005'] = 'O005';
	udg_MutliBoardHeroIcon["ReplaceableTextures\\CommandButtons\\BTNChaosGrunt.blp"] = "ReplaceableTextures\\CommandButtons\\BTNChaosGrunt.blp";
	SaveInteger(udg_hash, 'O005', 84, 2);
	udg_Heroes_Types['N012'] = 'N012';
	udg_MutliBoardHeroIcon["ReplaceableTextures\\CommandButtons\\BTNChaosBlademaster.blp"] = "ReplaceableTextures\\CommandButtons\\BTNChaosBlademaster.blp";
	SaveInteger(udg_hash, 'N012', 84, 3);
	udg_Heroes_Types['E004'] = 'E004';
	udg_MutliBoardHeroIcon["ReplaceableTextures\\CommandButtons\\BTNEvilIllidan.blp"] = "ReplaceableTextures\\CommandButtons\\BTNEvilIllidan.blp";
	SaveInteger(udg_hash, 'E004', 84, 4);
	udg_Heroes_Types['H01L'] = 'H01L';
	udg_MutliBoardHeroIcon["ReplaceableTextures\\CommandButtons\\BTNSylvanusWindrunner.blp"] = "ReplaceableTextures\\CommandButtons\\BTNSylvanusWindrunner.blp";
	SaveInteger(udg_hash, 'H01L', 84, 5);
	udg_Heroes_Types['E001'] = 'E001';
	udg_MutliBoardHeroIcon["ReplaceableTextures\\CommandButtons\\BTNPriest.blp"] = "ReplaceableTextures\\CommandButtons\\BTNPriest.blp";
	SaveInteger(udg_hash, 'E001', 84, 6);
	udg_Heroes_Types['H01I'] = 'H01I';
	udg_MutliBoardHeroIcon["ReplaceableTextures\\CommandButtons\\BTNSeaElemental.blp"] = "ReplaceableTextures\\CommandButtons\\BTNSeaElemental.blp";
	SaveInteger(udg_hash, 'H01I', 84, 7);
	udg_Heroes_Types['N00W'] = 'N00W';
	udg_MutliBoardHeroIcon["ReplaceableTextures\\CommandButtons\\BTNRevenant.blp"] = "ReplaceableTextures\\CommandButtons\\BTNRevenant.blp";
	SaveInteger(udg_hash, 'N00W', 84, 8);
	udg_Heroes_Types['O000'] = 'O000';
	udg_MutliBoardHeroIcon["ReplaceableTextures\\CommandButtons\\BTNArthas.blp"] = "ReplaceableTextures\\CommandButtons\\BTNArthas.blp";
	SaveInteger(udg_hash, 'O000', 84, 9);
	udg_Heroes_Types['E005'] = 'E005';
	udg_MutliBoardHeroIcon["ReplaceableTextures\\CommandButtons\\BTNAncientOfWonders.blp"] = "ReplaceableTextures\\CommandButtons\\BTNAncientOfWonders.blp";
	SaveInteger(udg_hash, 'E005', 84, $A);
	udg_Heroes_Types['E003'] = 'E003';
	udg_MutliBoardHeroIcon["ReplaceableTextures\\CommandButtons\\BTNFurion.blp"] = "ReplaceableTextures\\CommandButtons\\BTNFurion.blp";
	SaveInteger(udg_hash, 'E003', 84, $B);
	udg_Heroes_Types['E007'] = 'E007';
	udg_MutliBoardHeroIcon["ReplaceableTextures\\CommandButtons\\BTNHuntress.blp"] = "ReplaceableTextures\\CommandButtons\\BTNHuntress.blp";
	SaveInteger(udg_hash, 'E007', 84, $C);
	udg_Heroes_Types['O001'] = 'O001';
	udg_MutliBoardHeroIcon["ReplaceableTextures\\CommandButtons\\BTNSpiritWalker.blp"] = "ReplaceableTextures\\CommandButtons\\BTNSpiritWalker.blp";
	SaveInteger(udg_hash, 'O001', 84, $D);
	udg_Heroes_Types['E008'] = 'E008';
	udg_MutliBoardHeroIcon["ReplaceableTextures\\CommandButtons\\BTNHeroWarden.blp"] = "ReplaceableTextures\\CommandButtons\\BTNHeroWarden.blp";
	SaveInteger(udg_hash, 'E008', 84, $E);
	udg_Heroes_Types['H00O'] = 'H00O';
	udg_MutliBoardHeroIcon["ReplaceableTextures\\CommandButtons\\BTNGarithos.blp"] = "ReplaceableTextures\\CommandButtons\\BTNGarithos.blp";
	SaveInteger(udg_hash, 'H00O', 84, $F);
	udg_Heroes_Types['H00Q'] = 'H00Q';
	udg_MutliBoardHeroIcon["ReplaceableTextures\\CommandButtons\\BTNHeroArchMage.blp"] = "ReplaceableTextures\\CommandButtons\\BTNHeroArchMage.blp";
	SaveInteger(udg_hash, 'H00Q', 84, 16);
	udg_Heroes_Types['N01T'] = 'N01T';
	udg_MutliBoardHeroIcon["ReplaceableTextures\\CommandButtons\\BTNHeroAlchemist.blp"] = "ReplaceableTextures\\CommandButtons\\BTNHeroAlchemist.blp";
	SaveInteger(udg_hash, 'N01T', 84, 17);
	udg_Heroes_Types['H00R'] = 'H00R';
	udg_MutliBoardHeroIcon["ReplaceableTextures\\CommandButtons\\BTNRifleman.blp"] = "ReplaceableTextures\\CommandButtons\\BTNRifleman.blp";
	SaveInteger(udg_hash, 'H00R', 84, 18);
	udg_Total_Heroes_Count[18] = 18;
	udg_Random_Hero_Count[18] = 18;
	bj_forLoopAIndex[1] = 1;
	bj_forLoopAIndexEnd[udg_Total_Heroes_Count] = udg_Total_Heroes_Count;
	while (true) {
		if (bj_forLoopAIndex > bj_forLoopAIndexEnd) break;
		udg_Heroes_Random_Data[bj_forLoopAIndex] = bj_forLoopAIndex;
		udg_Is_Player_Got_Randomed[false] = false;
		bj_forLoopAIndex[bj_forLoopAIndex + 1] = bj_forLoopAIndex + 1;
	}
}
void InitTrig_INIT() {
	gg_trg_INIT[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventSingle(gg_trg_INIT, 1.);
	TriggerAddAction(gg_trg_INIT, Trig_INIT_Actions);
}
void Trig_Pick_Hero_Upgrade_Func006A() {
	SetPlayerTechMaxAllowed(GetEnumPlayer(), GetUnitTypeId(udg_Temp_Unit), 0);
}
void Trig_Pick_Hero_Upgrade_Actions() {
	unit hero;
	player p;
	int heroid;
	int pid;
	bool randomed = false;
	int i;
	if (udg_Hero_Randomed != null) {
		hero[udg_Hero_Randomed] = udg_Hero_Randomed;
		randomed[true] = true;
		udg_Hero_Randomed[null] = null;
	else
		hero[GetSoldUnit()] = GetSoldUnit();
	}
	p[GetOwningPlayer(hero)] = GetOwningPlayer(hero);
	pid[GetPlayerId(p) + 1] = GetPlayerId(p) + 1;
	heroid[GetUnitTypeId(hero)] = GetUnitTypeId(hero);
	udg_Temp_Unit[hero] = hero;
	udg_Temp_Integer[LoadInteger(udg_hash, heroid, 84)] = LoadInteger(udg_hash, heroid, 84);
	MultiboardSetItemIconBJ(udg_MultiBoard, 1, udg_PlayerNumberInMB[pid], udg_MutliBoardHeroIcon[udg_Temp_Integer[1]]);
	MultiboardSetItemValueBJ(udg_MultiBoard, 6, udg_PlayerNumberInMB[pid], (udg_ColorString[22] + ("1|r")));
	SetPlayerTechMaxAllowed(p, 'HERO', 0);
	ForForce(bj_FORCE_ALL_PLAYERS, Trig_Pick_Hero_Upgrade_Func006A);
	ForceRemovePlayer(udg_Gruppa_Igrokov_Vibor_Heroev, p);
	if ((GetLocalPlayer() == p)) {
		ClearSelection();
		SelectUnit(hero, true);
		CameraSetupApplyForceDuration(gg_cam_Kamera_glavnoi_bazi, true, .0);
	}
	bj_lastCreatedItem[CreateItem('I01E', .0, .0)] = CreateItem('I01E', .0, .0);
	UnitAddItem(hero, bj_lastCreatedItem);
	SetUnitPosition(hero, 1232., -6368.);
	RemoveUnit(udg_DummyHeroPick[pid]);
	bj_lastCreatedFogModifier[CreateFogModifierRadius(p, FOG_OF_WAR_VISIBLE, 1024., -5696., 1700., true, false)] = CreateFogModifierRadius(p, FOG_OF_WAR_VISIBLE, 1024., -5696., 1700., true, false);
	FogModifierStart(bj_lastCreatedFogModifier);
	udg_BaseVisionFogModifier[bj_lastCreatedFogModifier] = bj_lastCreatedFogModifier;
	MoveDammiReferencePanel(hero);
	if (heroid == 'H01M') {
		SetUnitColor(hero, PLAYER_COLOR_RED);
		SaveStr(udg_hash, heroid, 91, "melee");
		SaveStr(udg_hash, heroid, 70, "str");
		udg_Hero_Player_Color_String["|cFFC80000"] = "|cFFC80000";
		if (TriggerEvaluate(gg_trg_Guardsman_Load)) {
			TriggerExecute(gg_trg_Guardsman_Load);
		}
	}
	if (heroid == 'O005') {
		SetUnitColor(hero, ConvertPlayerColor($C));
		SaveStr(udg_hash, heroid, 91, "melee");
		SaveStr(udg_hash, heroid, 70, "str");
		ForceAddPlayer(udg_Drenor_Bull_Hint_Player_Group, p);
		udg_Hero_Player_Color_String["|cFFF0692D"] = "|cFFF0692D";
		if (TriggerEvaluate(gg_trg_Drenor_Bull_Load)) {
			TriggerExecute(gg_trg_Drenor_Bull_Load);
		}
	}
	if (heroid == 'O000') {
		SetUnitColor(hero, PLAYER_COLOR_ORANGE);
		SaveStr(udg_hash, heroid, 91, "melee");
		SaveStr(udg_hash, heroid, 70, "str");
		udg_Hero_Player_Color_String["|cFFF89A00"] = "|cFFF89A00";
		if (TriggerEvaluate(gg_trg_Paladin_Load)) {
			TriggerExecute(gg_trg_Paladin_Load);
		}
	}
	if (heroid == 'E005') {
		SetUnitColor(hero, PLAYER_COLOR_LIGHT_GRAY);
		SaveStr(udg_hash, heroid, 91, "melee");
		SaveStr(udg_hash, heroid, 70, "str");
		udg_Hero_Player_Color_String["|cFFAFAFAF"] = "|cFFAFAFAF";
		SetUnitAnimation(hero, "stand");
		if (TriggerEvaluate(gg_trg_Stone_Guard_Load)) {
			TriggerExecute(gg_trg_Stone_Guard_Load);
		}
	}
	if (heroid == 'N012') {
		SetUnitColor(hero, PLAYER_COLOR_RED);
		SaveStr(udg_hash, heroid, 91, "melee");
		SaveStr(udg_hash, heroid, 70, "agi");
		udg_Hero_Player_Color_String["|cFFFF3200"] = "|cFFFF3200";
		if (TriggerEvaluate(gg_trg_BladeMaster_Load)) {
			TriggerExecute(gg_trg_BladeMaster_Load);
		}
	}
	if (heroid == 'E004') {
		SetUnitColor(hero, PLAYER_COLOR_PINK);
		SaveStr(udg_hash, heroid, 91, "melee");
		SaveStr(udg_hash, heroid, 70, "agi");
		udg_Hero_Player_Color_String["|cFFB496AF"] = "|cFFB496AF";
		if (TriggerEvaluate(gg_trg_Illusionist_Load)) {
			TriggerExecute(gg_trg_Illusionist_Load);
		}
	}
	if (heroid == 'H01L') {
		SetUnitColor(hero, PLAYER_COLOR_BLUE);
		SaveStr(udg_hash, heroid, 91, "ranged");
		SaveStr(udg_hash, heroid, 70, "agi");
		udg_Hero_Player_Color_String["|cFF146EE6"] = "|cFF146EE6";
		if (TriggerEvaluate(gg_trg_Ranger_Load)) {
			TriggerExecute(gg_trg_Ranger_Load);
		}
	}
	if (heroid == 'E007') {
		SetUnitColor(hero, PLAYER_COLOR_PURPLE);
		SaveStr(udg_hash, heroid, 91, "ranged");
		SaveStr(udg_hash, heroid, 70, "agi");
		udg_Hero_Player_Color_String["|cFF9664FF"] = "|cFF9664FF";
		if (TriggerEvaluate(gg_trg_MoonWarrior_Load)) {
			TriggerExecute(gg_trg_MoonWarrior_Load);
		}
	}
	if (heroid == 'E001') {
		SetUnitColor(hero, PLAYER_COLOR_YELLOW);
		SaveStr(udg_hash, heroid, 91, "ranged");
		SaveStr(udg_hash, heroid, 70, "int");
		udg_Hero_Player_Color_String["|cFFFFFF64"] = "|cFFFFFF64";
		if (TriggerEvaluate(gg_trg_Healer_Load)) {
			TriggerExecute(gg_trg_Healer_Load);
		}
	}
	if (heroid == 'H01I') {
		SetUnitColor(hero, PLAYER_COLOR_CYAN);
		SaveStr(udg_hash, heroid, 91, "ranged");
		SaveStr(udg_hash, heroid, 70, "int");
		udg_Hero_Player_Color_String["|cFF64DCFA"] = "|cFF64DCFA";
		if (TriggerEvaluate(gg_trg_Water_Elemental_Load)) {
			TriggerExecute(gg_trg_Water_Elemental_Load);
		}
	}
	if (heroid == 'N00W') {
		SetUnitColor(hero, PLAYER_COLOR_LIGHT_GRAY);
		SaveStr(udg_hash, heroid, 91, "ranged");
		SaveStr(udg_hash, heroid, 70, "int");
		udg_Hero_Player_Color_String["|cFF9696AF"] = "|cFF9696AF";
		if (TriggerEvaluate(gg_trg_Master_of_Lightnings_Load)) {
			TriggerExecute(gg_trg_Master_of_Lightnings_Load);
		}
	}
	if (heroid == 'E003') {
		SetUnitColor(hero, PLAYER_COLOR_GREEN);
		SaveStr(udg_hash, heroid, 91, "ranged");
		SaveStr(udg_hash, heroid, 70, "int");
		udg_Hero_Player_Color_String["|cff00CD00"] = "|cff00CD00";
		if (TriggerEvaluate(gg_trg_Archdruid_Load)) {
			TriggerExecute(gg_trg_Archdruid_Load);
		}
	}
	if (heroid == 'O001') {
		SetUnitColor(hero, PLAYER_COLOR_ORANGE);
		SaveStr(udg_hash, heroid, 91, "ranged");
		SaveStr(udg_hash, heroid, 70, "int");
		udg_Hero_Player_Color_String["|cffEE9A00"] = "|cffEE9A00";
		if (TriggerEvaluate(gg_trg_SpiritBreaker_Load)) {
			TriggerExecute(gg_trg_SpiritBreaker_Load);
		}
	}
	if (heroid == 'E008') {
		SetUnitColor(hero, PLAYER_COLOR_LIGHT_BLUE);
		SaveStr(udg_hash, heroid, 91, "melee");
		SaveStr(udg_hash, heroid, 70, "agi");
		udg_Hero_Player_Color_String["|cffB0E2FF"] = "|cffB0E2FF";
		if (TriggerEvaluate(gg_trg_Warden_Load)) {
			TriggerExecute(gg_trg_Warden_Load);
		}
	}
	if (heroid == 'H00O') {
		SetUnitColor(hero, PLAYER_COLOR_YELLOW);
		SaveStr(udg_hash, heroid, 91, "melee");
		SaveStr(udg_hash, heroid, 70, "str");
		udg_Hero_Player_Color_String["|cFFFFE150"] = "|cFFFFE150";
		if (TriggerEvaluate(gg_trg_Marshal_Load)) {
			TriggerExecute(gg_trg_Marshal_Load);
		}
	}
	if (heroid == 'H00Q') {
		SetUnitColor(hero, PLAYER_COLOR_BLUE);
		udg_Hero_Player_Color_String["|cFF6496FF"] = "|cFF6496FF";
		SaveStr(udg_hash, heroid, 70, "int");
		SaveStr(udg_hash, heroid, 91, "ranged");
		if (TriggerEvaluate(gg_trg_Load_ArchMage)) {
			TriggerExecute(gg_trg_Load_ArchMage);
		}
	}
	if (heroid == 'N01T') {
		SetUnitColor(hero, PLAYER_COLOR_AQUA);
		udg_Hero_Player_Color_String["|cFF00C800"] = "|cFF00C800";
		SaveStr(udg_hash, heroid, 70, "str");
		SaveStr(udg_hash, heroid, 91, "melee");
		if (TriggerEvaluate(gg_trg_Load_Alchemist)) {
			TriggerExecute(gg_trg_Load_Alchemist);
		}
	}
	if (heroid == 'H00R') {
		SetUnitColor(hero, PLAYER_COLOR_LIGHT_BLUE);
		SaveStr(udg_hash, heroid, 91, "ranged");
		SaveStr(udg_hash, heroid, 70, "agi");
		udg_Hero_Player_Color_String["|cffC0C0C0"] = "|cffC0C0C0";
		if (TriggerEvaluate(gg_trg_Load_Sniper)) {
			TriggerExecute(gg_trg_Load_Sniper);
		}
	}
	udg_Is_Player_Got_Randomed[true] = true;
	udg_Heroes_Random_Data[udg_Heroes_Random_Data[udg_Total_Heroes_Count]] = udg_Heroes_Random_Data[udg_Total_Heroes_Count];
	udg_Total_Heroes_Count[udg_Total_Heroes_Count - 1] = udg_Total_Heroes_Count - 1;
	if (randomed == false && IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS)) {
		DisplayTextToPlayer(GetLocalPlayer(), 0, 0, udg_ColorString[pid] + GetPlayerName(p) + "|r выбрал героя: " + udg_Hero_Player_Color_String[pid] + GetUnitName(hero) + "|r");
	}
	if (randomed && IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS)) {
		DisplayTextToPlayer(GetLocalPlayer(), 0, 0, udg_ColorString[pid] + GetPlayerName(p) + "|r наугад выбрал героя: " + udg_Hero_Player_Color_String[pid] + GetUnitName(hero) + "|r");
	}
	if (randomed) {
		SetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) + $FA);
		if ((GetLocalPlayer() == p)) {
			DisplayTimedTextToPlayer(GetLocalPlayer(), 0, 0, 10., "За случайный выбор героя вы получили |cFFFFFF00+250|r золота!");
		}
	}
}
bool Trig_Pick_Hero_Upgrade_Conditions() {
	return (IsUnitType(GetSoldUnit(), UNIT_TYPE_HERO) && IsPlayerInForce(GetOwningPlayer(GetSoldUnit()), udg_Gruppa_Igrokov_Vibor_Heroev)) != null;
}
void InitTrig_Pick_Hero_Upgrade() {
	int index = 0;
	gg_trg_Pick_Hero_Upgrade[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Pick_Hero_Upgrade, Player(index), EVENT_PLAYER_UNIT_SELL, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Pick_Hero_Upgrade, Condition(Trig_Pick_Hero_Upgrade_Conditions));
	TriggerAddAction(gg_trg_Pick_Hero_Upgrade, Trig_Pick_Hero_Upgrade_Actions);
}
void Trig_Hero_Dead_MultiBoard_Check_Actions() {
	timer tmb = GetExpiredTimer();
	int htmb = GetHandleId(tmb);
	float time = LoadReal(udg_hash, htmb, 1);
	int pnumber = LoadInteger(udg_hash, htmb, 2);
	if (time > 0) {
		time[time - 1] = time - 1;
		SaveReal(udg_hash, htmb, 1, time);
		MultiboardSetItemValueBJ(udg_MultiBoard, 2, udg_PlayerNumberInMB[pnumber], (udg_ColorString[pnumber] + GetPlayerName(Player(pnumber - 1)) + "|r (" + udg_ColorString[pnumber] + I2S((R2I(time))) + "|r)"));
	else
		time[0] = 0;
		MultiboardSetItemValueBJ(udg_MultiBoard, 2, udg_PlayerNumberInMB[pnumber], (udg_ColorString[pnumber] + GetPlayerName(Player(pnumber - 1)) + "|r"));
		FlushChildHashtable(udg_hash, htmb);
		DestroyTimer(tmb);
	}
	udg_Hero_Respawn_Time[R2I(time)] = R2I(time);
	tmb[null] = null;
}
void Trig_Hero_Dead_Timer2_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit u = LoadUnitHandle(udg_hash, h, 1);
	UnitRemoveAbility(u, 'Avul');
	DestroyTimer(t);
	FlushChildHashtable(udg_hash, h);
	t[null] = null;
	u[null] = null;
}
void Trig_Hero_Dead_Timer_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit u = LoadUnitHandle(udg_hash, h, 1);
	float x = GetRectCenterX(gg_rct_Respawn_Heroes);
	float y = GetRectCenterY(gg_rct_Respawn_Heroes);
	timerdialog td = LoadTimerDialogHandle(udg_hash, h, 2);
	camerasetup theCam = CreateCameraSetup();
	TimerStart(t, 4., false, Trig_Hero_Dead_Timer2_Actions);
	ReviveHero(u, x, y, true);
	SetUnitState(u, UNIT_STATE_MANA, GetUnitState(u, UNIT_STATE_MAX_MANA));
	SetUnitState(u, UNIT_STATE_LIFE, GetUnitState(u, UNIT_STATE_MAX_LIFE));
	UnitAddAbility(u, 'Avul');
	DisplayTextToPlayer(GetOwningPlayer(u), 500., 500, "|cFFFFFF00Ваш Герой Воскрешен!!!|r");
	if ((GetLocalPlayer() == GetOwningPlayer(u)) && udg_IsGameEnd == false) {
		CameraSetupSetField(theCam, CAMERA_FIELD_TARGET_DISTANCE, GetCameraField(CAMERA_FIELD_TARGET_DISTANCE), 0);
		CameraSetupSetField(theCam, CAMERA_FIELD_FARZ, GetCameraField(CAMERA_FIELD_FARZ), 0);
		CameraSetupSetField(theCam, CAMERA_FIELD_ZOFFSET, GetCameraField(CAMERA_FIELD_ZOFFSET), 0);
		CameraSetupSetField(theCam, CAMERA_FIELD_ANGLE_OF_ATTACK, bj_RADTODEG * GetCameraField(CAMERA_FIELD_ANGLE_OF_ATTACK), 0);
		CameraSetupSetField(theCam, CAMERA_FIELD_FIELD_OF_VIEW, bj_RADTODEG * GetCameraField(CAMERA_FIELD_FIELD_OF_VIEW), 0);
		CameraSetupSetField(theCam, CAMERA_FIELD_ROLL, bj_RADTODEG * GetCameraField(CAMERA_FIELD_ROLL), 0);
		CameraSetupSetField(theCam, CAMERA_FIELD_ROTATION, bj_RADTODEG * GetCameraField(CAMERA_FIELD_ROTATION), 0);
		CameraSetupSetDestPosition(theCam, GetUnitX(u), GetUnitY(u), 0);
		CameraSetupApplyForceDuration(theCam, true, 0);
		ClearSelection();
		SelectUnit(u, true);
	}
	DestroyTimerDialog(td);
	t[null] = null;
	u[null] = null;
	td[null] = null;
}
bool Trig_Hero_Dead_Conditions() {
	return (IsUnitType(GetDyingUnit(), UNIT_TYPE_HERO) && IsUnitIllusion(GetDyingUnit()) == false && GetPlayerId(GetOwningPlayer(GetDyingUnit())) <= 8 && GetOwningPlayer(GetDyingUnit()) != Player($F) && GetOwningPlayer(GetDyingUnit()) != Player($B)) != null;
}
void Trig_Hero_Dead_Actions() {
	timer t = CreateTimer();
	timerdialog td = CreateTimerDialog(t);
	int h = GetHandleId(t);
	unit u = GetDyingUnit();
	player p = GetOwningPlayer(u);
	int pnumber = GetPlayerId(p) + 1;
	timer tmb = CreateTimer();
	int htmb = GetHandleId(tmb);
	float time = 5. + (2. * GetHeroLevel(u));
	if (LoadReal(udg_hash, GetHandleId(u), 't') > .0) {
		time[R2I(time * (1. - LoadReal(udg_hash, GetHandleId(u), 't')))] = R2I(time * (1. - LoadReal(udg_hash, GetHandleId(u), 't')));
		SaveReal(udg_hash, GetHandleId(u), 't', .0);
	}
	time[time * (1. - HaveAnyTimeTalisman())] = time * (1. - HaveAnyTimeTalisman());
	SaveUnitHandle(udg_hash, h, 1, u);
	SaveTimerDialogHandle(udg_hash, h, 2, td);
	if (pnumber <= 9) {
		udg_MultiBoard_Player_Deaths_Count[udg_MultiBoard_Player_Deaths_Count[pnumber] + 1] = udg_MultiBoard_Player_Deaths_Count[pnumber] + 1;
		MultiboardSetItemValueBJ(udg_MultiBoard, 4, udg_PlayerNumberInMB[pnumber], udg_ColorString[21] + I2S(udg_MultiBoard_Player_Deaths_Count[pnumber]) + "|r");
	}
	TimerStart(t, time, false, Trig_Hero_Dead_Timer_Actions);
	TimerDialogDisplay(td, false);
	TimerDialogSetTitle(td, "Respawn in:");
	if ((GetLocalPlayer() == p)) {
		TimerDialogDisplay(td, true);
		TimerDialogSetTitleColor(td, $FF, $E6, 80, 65);
		TimerDialogSetTimeColor(td, $FF, 45, 45, 20);
	}
	if ((IsPlayerInForce(GetLocalPlayer(), udg_IGRAET))) {
		DisplayTimedTextToPlayer(GetLocalPlayer(), .0, .0, 10., "Герой " + udg_Hero_Player_Color_String[pnumber] + GetUnitName(u) + "|r (" + udg_ColorString[pnumber] + GetPlayerName(p) + "|r) погибает!!!");
	}
	udg_Hero_Respawn_Time[R2I(time)] = R2I(time);
	SaveReal(udg_hash, htmb, 1, time);
	SaveInteger(udg_hash, htmb, 2, pnumber);
	TimerStart(tmb, 1., true, Trig_Hero_Dead_MultiBoard_Check_Actions);
	u[null] = null;
	t[null] = null;
	tmb[null] = null;
	td[null] = null;
}
void InitTrig_Hero_Dead() {
	int index = 0;
	gg_trg_Hero_Dead[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Hero_Dead, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Hero_Dead, Condition(Trig_Hero_Dead_Conditions));
	TriggerAddAction(gg_trg_Hero_Dead, Trig_Hero_Dead_Actions);
}
void Trig_Duel_Checking_On_HighGround_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit hero1 = LoadUnitHandle(udg_hash, h, 1);
	unit hero2 = LoadUnitHandle(udg_hash, h, 2);
	float x1 = GetUnitX(hero1);
	float y1 = GetUnitY(hero1);
	float x2 = GetUnitX(hero2);
	float y2 = GetUnitY(hero2);
	int h2 = LoadInteger(udg_hash, h, 3);
	if (LoadBoolean(udg_hash, h2, $D) == false) {
		if (!((GetRectMinX(gg_rct_Hero_Arena) <= x1) && (x1 <= GetRectMaxX(gg_rct_Hero_Arena)) && (GetRectMinY(gg_rct_Hero_Arena) <= y1) && (y1 <= GetRectMaxY(gg_rct_Hero_Arena)))) {
			SetUnitPosition(hero1, 2000., 2950.);
			if ((GetLocalPlayer() == GetOwningPlayer(hero1))) {
				PanCameraToTimed(2000., 2950., .0);
			}
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl", 2000., 2950.));
		}
		if (!((GetRectMinX(gg_rct_Hero_Arena) <= x2) && (x2 <= GetRectMaxX(gg_rct_Hero_Arena)) && (GetRectMinY(gg_rct_Hero_Arena) <= y2) && (y2 <= GetRectMaxY(gg_rct_Hero_Arena)))) {
			SetUnitPosition(hero2, 2000., 2950.);
			if ((GetLocalPlayer() == GetOwningPlayer(hero2))) {
				PanCameraToTimed(2000., 2950., .0);
			}
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl", 2000., 2950.));
		}
	else
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	hero1[null] = null;
	hero2[null] = null;
}
void Trig_Duel_Timer_Dialog_Destroy_2sec_wait_Actions() {
	timer t2secwait = GetExpiredTimer();
	ExecuteFunc("Trig_Hero_Death_On_Duel_2secwait_Actions");
	DestroyTimer(t2secwait);
	t2secwait[null] = null;
}
void Trig_Duel_Timer_Dialog_Destroy_Actions() {
	rect rct = gg_rct_Hero_Arena;
	int h = GetHandleId(rct);
	timer t = GetExpiredTimer();
	int ht = GetHandleId(t);
	timerdialog td = LoadTimerDialogHandle(udg_hash, ht, 1);
	timer t2secwait = CreateTimer();
	int counterduel = LoadInteger(udg_hash, h, $A);
	unit hero1 = udg_herounit[LoadInteger(udg_hash, h, counterduel)];
	unit hero2 = udg_herounit[LoadInteger(udg_hash, h, counterduel + 1)];
	player pw = GetOwningPlayer(hero1);
	player pd = GetOwningPlayer(hero2);
	int gold = $96 + (udg_Nomer_samoi_volni * 60);
	int xp = 300 + (udg_Nomer_samoi_volni * 'd');
	if (LoadBoolean(udg_hash, h, $D) == false) {
		SaveBoolean(udg_hash, h, $D, true);
		DestroyTimerDialog(td);
		CinematicFadeBJ(1, 2.5, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1);
		TimerStart(t2secwait, 2.5, false, Trig_Duel_Timer_Dialog_Destroy_2sec_wait_Actions);
		SetUnitInvulnerable(hero1, true);
		SetUnitInvulnerable(hero2, true);
		if (IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS)) {
			DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Дуэль закончилась вничью");
		}
		if ((GetLocalPlayer() == pw)) {
			DisplayTextToPlayer(pw, .0, .0, "Дуэль закончилась вничью, ваш герой получaeт |cFFFFFF00" + I2S(xp) + " опыта|r и |cFFFFFF00" + I2S(gold) + " золота|r");
		}
		AddHeroXP(hero1, xp, false);
		SetPlayerState(pw, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(pw, PLAYER_STATE_RESOURCE_GOLD) + gold);
		if ((GetLocalPlayer() == pd)) {
			DisplayTextToPlayer(pw, .0, .0, "Дуэль закончилась вничью, ваш герой получaeт |cFFFFFF00" + I2S(xp) + " опыта|r и |cFFFFFF00" + I2S(gold) + " золота|r");
		}
		AddHeroXP(hero2, xp, false);
		SetPlayerState(pd, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(pd, PLAYER_STATE_RESOURCE_GOLD) + gold);
	}
	rct[null] = null;
	DestroyTimer(t);
	t[null] = null;
	FlushChildHashtable(udg_hash, ht);
	td[null] = null;
	t2secwait[null] = null;
	hero1[null] = null;
	hero2[null] = null;
	pw[null] = null;
	pd[null] = null;
}
void Trig_Duel_Start_Fight_Actions() {
	rect rct = gg_rct_Hero_Arena;
	int h = GetHandleId(rct);
	int counterduel = LoadInteger(udg_hash, h, $A);
	unit hero1 = udg_herounit[LoadInteger(udg_hash, h, counterduel)];
	unit hero2 = udg_herounit[LoadInteger(udg_hash, h, counterduel + 1)];
	timer t = CreateTimer();
	timerdialog td = CreateTimerDialog(t);
	int ht = GetHandleId(t);
	timer t2;
	int h2;
	SoundForPlayer(GetOwningPlayer(hero1), 4);
	SoundForPlayer(GetOwningPlayer(hero2), 4);
	TimerDialogSetTitle(td, "Дуэль:");
	TimerDialogDisplay(td, true);
	TimerDialogSetTitleColor(td, $FF, $E6, 80, 65);
	TimerDialogSetTimeColor(td, $FF, 0, 0, 20);
	SaveTimerDialogHandle(udg_hash, ht, 1, td);
	SaveTimerHandle(udg_hash, h, $D, t);
	SaveTimerDialogHandle(udg_hash, h, $E, td);
	if (hero1 != null && hero2 != null) {
		hero1[udg_herounit[LoadInteger(udg_hash, h, counterduel)]] = udg_herounit[LoadInteger(udg_hash, h, counterduel)];
		hero2[udg_herounit[LoadInteger(udg_hash, h, counterduel + 1)]] = udg_herounit[LoadInteger(udg_hash, h, counterduel + 1)];
		PauseUnit(hero1, false);
		PauseUnit(hero2, false);
		IssueTargetOrderById(hero1, $D000F, hero2);
		IssueTargetOrderById(hero2, $D000F, hero1);
		t2[CreateTimer()] = CreateTimer();
		h2[GetHandleId(t2)] = GetHandleId(t2);
		SaveUnitHandle(udg_hash, h2, 1, hero1);
		SaveUnitHandle(udg_hash, h2, 2, hero2);
		SaveInteger(udg_hash, h2, 3, h);
		TimerStart(t2, .5, true, Trig_Duel_Checking_On_HighGround_Actions);
		TimerStart(t, 120., false, Trig_Duel_Timer_Dialog_Destroy_Actions);
	}
	DestroyTimer(GetExpiredTimer());
	rct[null] = null;
	hero1[null] = null;
	hero2[null] = null;
	t[null] = null;
	td[null] = null;
}
void Trig_Duel_TextTag_Size_Increase_Actions() {
	timer ttxt = GetExpiredTimer();
	int httxt = GetHandleId(ttxt);
	rect rct = gg_rct_Hero_Arena;
	texttag txt = LoadTextTagHandle(udg_hash, httxt, 1);
	int count = LoadInteger(udg_hash, httxt, 2);
	if (count <= 2) {
		if (count == 0) {
			SetTextTagText(txt, "2", .05);
		}
		if (count == 1) {
			SetTextTagText(txt, "1", .05);
		}
		if (count == 2) {
			SetTextTagText(txt, "FIGHT!", .05);
			SetTextTagPos(txt, GetRectCenterX(rct) - 80., GetRectCenterY(rct), .0);
		}
		count[count + 1] = count + 1;
		SaveInteger(udg_hash, httxt, 2, count);
	else
		DestroyTextTag(txt);
		DestroyTimer(ttxt);
		FlushChildHashtable(udg_hash, httxt);
	}
	ttxt[null] = null;
	rct[null] = null;
	txt[null] = null;
}
void Trig_Duel_Round_Actions() {
	rect rct = gg_rct_Hero_Arena;
	float x = GetRectCenterX(rct);
	float y = GetRectCenterY(rct);
	int h = GetHandleId(rct);
	int counterduel = LoadInteger(udg_hash, h, $A);
	int maxplayers = LoadInteger(udg_hash, h, $B);
	bool endduels = LoadBoolean(udg_hash, h, $C);
	timer t = CreateTimer();
	int ht = GetHandleId(t);
	int number1;
	int number2;
	unit hero1;
	unit hero2;
	int i = 1;
	float xc;
	float yc;
	texttag txt;
	timer ttxt;
	float perekluchatel = 0;
	player p1;
	player p2;
	group gruppa;
	if (maxplayers >= counterduel + 1) {
		number1[LoadInteger(udg_hash, h, counterduel)] = LoadInteger(udg_hash, h, counterduel);
		number2[LoadInteger(udg_hash, h, counterduel + 1)] = LoadInteger(udg_hash, h, counterduel + 1);
		hero1[udg_herounit[number1]] = udg_herounit[number1];
		hero2[udg_herounit[number2]] = udg_herounit[number2];
		SaveBoolean(udg_hash, h, $D, false);
		txt[CreateTextTag()] = CreateTextTag();
		ttxt[CreateTimer()] = CreateTimer();
		SetTextTagText(txt, "3", .05);
		SetTextTagColor(txt, $FF, 0, 0, 0);
		SetTextTagPos(txt, x, y, .0);
		SetTextTagPermanent(txt, false);
		SetTextTagLifespan(txt, 1215752191.);
		SetTextTagFadepoint(txt, .0);
		SaveTextTagHandle(udg_hash, GetHandleId(ttxt), 1, txt);
		SaveInteger(udg_hash, GetHandleId(ttxt), 2, 0);
		TimerStart(ttxt, 1., true, Trig_Duel_TextTag_Size_Increase_Actions);
		p1[GetOwningPlayer(hero1)] = GetOwningPlayer(hero1);
		p2[GetOwningPlayer(hero2)] = GetOwningPlayer(hero2);
		if ((IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS))) {
			DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Дуэль №" + udg_ColorString[20] + I2S(R2I((counterduel / 2) + 1)) + "|r: " + udg_ColorString[GetPlayerId(p1) + 1] + GetPlayerName(p1) + "|r против " + udg_ColorString[GetPlayerId(p2) + 1] + GetPlayerName(p2) + "|r");
		}
		ShowUnit(hero1, true);
		ShowUnit(hero2, true);
		SetUnitPosition(hero1, x + 500. * Cos(180. * bj_DEGTORAD), y);
		SetUnitPosition(hero2, x + 500. * Cos(.0 * bj_DEGTORAD), y);
		PauseUnit(hero1, true);
		PauseUnit(hero2, true);
		SetUnitFacing(hero1, .0);
		SetUnitFacing(hero2, 180.);
		SetUnitState(hero1, UNIT_STATE_LIFE, $540BE3FF);
		SetUnitState(hero1, UNIT_STATE_MANA, $540BE3FF);
		SetUnitState(hero2, UNIT_STATE_LIFE, $540BE3FF);
		SetUnitState(hero2, UNIT_STATE_MANA, $540BE3FF);
		if ((GetLocalPlayer() == GetOwningPlayer(hero1))) {
			ClearSelection();
			SelectUnit(hero1, true);
			PanCameraToTimed(x, y, .0);
		}
		if ((GetLocalPlayer() == GetOwningPlayer(hero2))) {
			ClearSelection();
			SelectUnit(hero2, true);
			PanCameraToTimed(x, y, .0);
		}
		gruppa[CreateGroup()] = CreateGroup();
		GroupEnumUnitsInRect(gruppa, gg_rct_Hero_Arena, null);
		KillSummonsAndIllusions(gruppa);
		SetPlayerAllianceStateBJ(Player(number1 - 1), Player(number2 - 1), 0);
		SetPlayerAllianceStateBJ(Player(number2 - 1), Player(number1 - 1), 0);
		TimerStart(t, 4., false, Trig_Duel_Start_Fight_Actions);
	else
		DisableTrigger(gg_trg_Hero_Death_On_Duel);
		if (IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS)) {
			DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Все дуэли завершены, спасибо героям за участие!!!");
		}
		while (true) {
			if (i > 9) break;
			hero1[udg_herounit[i]] = udg_herounit[i];
			if (perekluchatel >= 0) {
				perekluchatel[-perekluchatel] = -perekluchatel;
				perekluchatel[perekluchatel - 50.] = perekluchatel - 50.;
			else
				perekluchatel[-perekluchatel] = -perekluchatel;
				perekluchatel[perekluchatel + 50.] = perekluchatel + 50.;
			}
			xc[GetRectCenterX(gg_rct_Respawn_Heroes) + perekluchatel] = GetRectCenterX(gg_rct_Respawn_Heroes) + perekluchatel;
			yc[GetRectCenterY(gg_rct_Respawn_Heroes)] = GetRectCenterY(gg_rct_Respawn_Heroes);
			SetUnitPosition(hero1, xc, yc);
			SetUnitFacing(hero1, 270.);
			SetUnitState(hero1, UNIT_STATE_LIFE, $540BE3FF);
			SetUnitState(hero1, UNIT_STATE_MANA, $540BE3FF);
			ShowUnit(hero1, true);
			DestroyFogModifier(LoadFogModifierHandle(udg_hash, h, 20 + i));
			if ((GetLocalPlayer() == GetOwningPlayer(hero1))) {
				ResetToGameCamera(.0);
				PanCameraToTimed(xc, yc, .0);
				ClearSelection();
				SelectUnit(hero1, true);
			}
			i[i + 1] = i + 1;
		}
		StartTimerBJ(udg_Timer_Nomera_Volni, false, 75.);
		CreateTimerDialogBJ(udg_Timer_Nomera_Volni, ("Волна № |cFFFF0000" + (I2S(udg_Nomer_samoi_volni) + "|r")));
		udg_TimerDialog_Nomera_Volni[bj_lastCreatedTimerDialog] = bj_lastCreatedTimerDialog;
		TimerDialogSetTimeColorBJ(udg_TimerDialog_Nomera_Volni, 'd', 90., 30., 20.);
		udg_Is_Fast_Wave_Start_On_Off[true] = true;
		FlushChildHashtable(udg_hash, h);
		EnableTrigger(gg_trg_Hero_Dead);
	}
	rct[null] = null;
	t[null] = null;
	hero1[null] = null;
	hero2[null] = null;
	txt[null] = null;
	ttxt[null] = null;
}
void Trig_Duel_WaitBeforeActions_Actions() {
	rect rct = gg_rct_Hero_Arena;
	float x = GetRectCenterX(rct);
	float y = GetRectCenterY(rct);
	int i = 0;
	while (true) {
		if (i > 8) break;
		if ((GetLocalPlayer() == Player(i))) {
			ResetToGameCamera(.0);
			PanCameraToTimed(x, y, .0);
		}
		i[i + 1] = i + 1;
	}
	ExecuteFunc("Trig_Duel_Round_Actions");
	DestroyTimer(GetExpiredTimer());
	rct[null] = null;
}
void Trig_Start_Duel_Actions() {
	int i = 1;
	int schetchik = 0;
	array<int> number;
	int random = 0;
	int maksint;
	array<int> playernumber;
	group g = CreateGroup();
	timer t = CreateTimer();
	player p1;
	player p2;
	int emptyplayernumber;
	rect rct = gg_rct_Hero_Arena;
	float x = GetRectCenterX(rct);
	float y = GetRectCenterY(rct);
	int h = GetHandleId(rct);
	GroupEnumUnitsInRange(g, .0, .0, 9999999., null);
	KillSummonsAndIllusions(g);
	while (true) {
		if (i > 9) break;
		if (udg_herounit[i] != null) {
			ReviveHero(udg_herounit[i], .0, .0, false);
			ShowUnit(udg_herounit[i], false);
			schetchik[schetchik + 1] = schetchik + 1;
			number[schetchik] = schetchik;
			playernumber[i] = i;
		}
		i[i + 1] = i + 1;
	}
	maksint[schetchik] = schetchik;
	schetchik[schetchik] = schetchik;
	emptyplayernumber[schetchik] = schetchik;
	while (true) {
		if (schetchik <= 0) break;
		random[GetRandomInt(1, maksint)] = GetRandomInt(1, maksint);
		if (number[random] == random) {
			SaveInteger(udg_hash, h, random, playernumber[schetchik]);
			bj_lastCreatedFogModifier[CreateFogModifierRect(Player(playernumber[schetchik] - 1), FOG_OF_WAR_VISIBLE, rct, true, false)] = CreateFogModifierRect(Player(playernumber[schetchik] - 1), FOG_OF_WAR_VISIBLE, rct, true, false);
			FogModifierStart(bj_lastCreatedFogModifier);
			SaveFogModifierHandle(udg_hash, h, 20 + random, bj_lastCreatedFogModifier);
			if ((GetLocalPlayer() == Player(playernumber[schetchik] - 1))) {
				PanCameraToTimed(x, y, .0);
			}
			if (random == maksint && (emptyplayernumber != 2 && emptyplayernumber != 4 && emptyplayernumber != 6 && emptyplayernumber != 8)) {
				if ((GetLocalPlayer() == Player(playernumber[schetchik] - 1))) {
					DisplayTextToPlayer(Player(playernumber[schetchik] - 1), .0, .0, "К сожалению, вы не поучавствуете в дуэли, так как вам не хватило противника, но вы все равно получаете |cFFFFFF00" + I2S($C8 + (udg_Nomer_samoi_volni * 'x')) + " опыта|r и |cFFFFFF00" + I2S('d' + (udg_Nomer_samoi_volni * 60)) + " золота|r");
				}
				AddHeroXP(udg_herounit[playernumber[schetchik]], $C8 + (udg_Nomer_samoi_volni * 'x'), false);
				SetPlayerState(Player(playernumber[schetchik] - 1), PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(Player(playernumber[schetchik] - 1), PLAYER_STATE_RESOURCE_GOLD) + 'd' + (udg_Nomer_samoi_volni * 60));
			}
			schetchik[schetchik - 1] = schetchik - 1;
			number[0] = 0;
		}
	}
	if ((IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS))) {
		DisplayTimedTextToPlayer(GetLocalPlayer(), 0, 0, 10., "Список Дуэлей:");
		SoundForPlayer(GetLocalPlayer(), 5);
	}
	schetchik[1] = 1;
	while (true) {
		if (LoadInteger(udg_hash, h, schetchik) == 0 || LoadInteger(udg_hash, h, schetchik + 1) == 0) break;
		p1[Player(LoadInteger(udg_hash, h, schetchik) - 1)] = Player(LoadInteger(udg_hash, h, schetchik) - 1);
		p2[Player(LoadInteger(udg_hash, h, schetchik + 1) - 1)] = Player(LoadInteger(udg_hash, h, schetchik + 1) - 1);
		if ((IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS))) {
			DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Дуэль №" + udg_ColorString[20] + I2S(R2I((schetchik / 2) + 1)) + "|r: " + udg_ColorString[GetPlayerId(p1) + 1] + GetPlayerName(p1) + "|r против " + udg_ColorString[GetPlayerId(p2) + 1] + GetPlayerName(p2) + "|r");
		}
		schetchik[schetchik + 2] = schetchik + 2;
		p1[null] = null;
		p2[null] = null;
	}
	CinematicFadeBJ(1, .0, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1);
	CinematicFadeBJ(0, 3., "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1);
	DisableTrigger(gg_trg_Hero_Dead);
	SaveInteger(udg_hash, h, $A, 1);
	SaveInteger(udg_hash, h, $B, maksint);
	SaveBoolean(udg_hash, h, $C, false);
	SaveBoolean(udg_hash, h, $D, false);
	EnableTrigger(gg_trg_Hero_Death_On_Duel);
	TimerStart(t, 3., false, Trig_Duel_WaitBeforeActions_Actions);
	t[null] = null;
	rct[null] = null;
}
void InitTrig_Start_Duel() {
	gg_trg_Start_Duel[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Start_Duel, Trig_Start_Duel_Actions);
}
void Trig_Hero_Death_On_Duel_2secwait_Actions() {
	rect rct = gg_rct_Hero_Arena;
	int h = GetHandleId(rct);
	timer t = GetExpiredTimer();
	int ht = GetHandleId(t);
	int counterduel = LoadInteger(udg_hash, h, $A);
	unit winner = LoadUnitHandle(udg_hash, ht, 1);
	unit defeater = LoadUnitHandle(udg_hash, ht, 2);
	unit hero1 = udg_herounit[LoadInteger(udg_hash, h, counterduel)];
	unit hero2 = udg_herounit[LoadInteger(udg_hash, h, counterduel + 1)];
	float x = GetRectCenterX(gg_rct_Respawn_Heroes);
	float y = GetRectCenterY(gg_rct_Respawn_Heroes);
	timer tdialog = LoadTimerHandle(udg_hash, h, $D);
	int htdialog = GetHandleId(tdialog);
	timerdialog td = LoadTimerDialogHandle(udg_hash, h, $E);
	group g = CreateGroup();
	SetUnitInvulnerable(hero1, false);
	SetUnitInvulnerable(hero2, false);
	ReviveHero(defeater, x, y, false);
	SetUnitPosition(winner, x, y);
	ShowUnit(hero1, false);
	ShowUnit(hero2, false);
	SetPlayerAllianceStateBJ(GetOwningPlayer(hero1), GetOwningPlayer(hero2), 3);
	SetPlayerAllianceStateBJ(GetOwningPlayer(hero2), GetOwningPlayer(hero1), 3);
	CinematicFadeBJ(0, 1.5, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1);
	GroupEnumUnitsInRange(g, GetRectCenterX(gg_rct_Hero_Arena), GetRectCenterY(gg_rct_Hero_Arena), 1500., null);
	KillSummonsAndIllusions(g);
	counterduel[counterduel + 2] = counterduel + 2;
	SaveInteger(udg_hash, h, $A, counterduel);
	ExecuteFunc("Trig_Duel_Round_Actions");
	DestroyTimerDialog(td);
	DestroyTimer(tdialog);
	rct[null] = null;
	DestroyTimer(t);
	t[null] = null;
	FlushChildHashtable(udg_hash, ht);
	winner[null] = null;
	defeater[null] = null;
	hero1[null] = null;
	hero2[null] = null;
	tdialog[null] = null;
	td[null] = null;
}
void Trig_Hero_Death_On_Duel_Actions() {
	rect rct = gg_rct_Hero_Arena;
	int h = GetHandleId(rct);
	int counterduel = LoadInteger(udg_hash, h, $A);
	timer t = CreateTimer();
	int ht = GetHandleId(t);
	player pw = GetOwningPlayer(GetKillingUnit());
	unit winner = udg_herounit[GetPlayerId(pw) + 1];
	player pd = GetOwningPlayer(GetDyingUnit());
	unit defeater = udg_herounit[GetPlayerId(pd) + 1];
	int gold;
	int xp;
	if (pw != null) {
		if (LoadBoolean(udg_hash, h, $D) == false) {
			SaveBoolean(udg_hash, h, $D, true);
			SetUnitInvulnerable(GetKillingUnit(), true);
			SaveUnitHandle(udg_hash, ht, 1, winner);
			SaveUnitHandle(udg_hash, ht, 2, defeater);
			CinematicFadeBJ(1, 2.5, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1);
			TimerStart(t, 2.5, false, Trig_Hero_Death_On_Duel_2secwait_Actions);
			if (IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS)) {
				DisplayTextToPlayer(GetLocalPlayer(), .0, .0, udg_ColorString[GetPlayerId(pw) + 1] + GetPlayerName(pw) + "|r Победил в дуэле " + udg_ColorString[GetPlayerId(pd) + 1] + GetPlayerName(pd) + "|r");
			}
			gold[300 + (udg_Nomer_samoi_volni * 'd')] = 300 + (udg_Nomer_samoi_volni * 'd');
			xp[600 + (udg_Nomer_samoi_volni * $AF)] = 600 + (udg_Nomer_samoi_volni * $AF);
			if ((GetLocalPlayer() == pw)) {
				DisplayTextToPlayer(pw, .0, .0, "За победу в дуэле ваш герой получает |cFFFFFF00" + I2S(xp) + " опыта|r и |cFFFFFF00" + I2S(gold) + " золота|r");
			}
			AddHeroXP(winner, xp, true);
			SetPlayerState(pw, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(pw, PLAYER_STATE_RESOURCE_GOLD) + gold);
			gold['d' + (udg_Nomer_samoi_volni * 60)] = 'd' + (udg_Nomer_samoi_volni * 60);
			xp[$C8 + (udg_Nomer_samoi_volni * 'x')] = $C8 + (udg_Nomer_samoi_volni * 'x');
			if ((GetLocalPlayer() == pd)) {
				DisplayTextToPlayer(pw, .0, .0, "За участие в дуэле ваш герой получает |cFFFFFF00" + I2S(xp) + " опыта|r и |cFFFFFF00" + I2S(gold) + " золота|r");
			}
			AddHeroXP(defeater, xp, false);
			SetPlayerState(pd, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(pd, PLAYER_STATE_RESOURCE_GOLD) + gold);
		}
	}
	rct[null] = null;
	t[null] = null;
	winner[null] = null;
	pw[null] = null;
	defeater[null] = null;
	pd[null] = null;
}
bool Trig_Hero_Death_On_Duel_Conditions() {
	return (IsUnitType(GetDyingUnit(), UNIT_TYPE_HERO) && IsUnitIllusion(GetTriggerUnit()) == false && GetPlayerId(GetOwningPlayer(GetKillingUnit())) <= 8 && GetPlayerId(GetOwningPlayer(GetDyingUnit())) <= 8 && LoadInteger(udg_hash, GetHandleId(gg_rct_Hero_Arena), $A) > 0) != null;
}
void InitTrig_Hero_Death_On_Duel() {
	int index = 0;
	gg_trg_Hero_Death_On_Duel[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Hero_Death_On_Duel, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Hero_Death_On_Duel, Condition(Trig_Hero_Death_On_Duel_Conditions));
	TriggerAddAction(gg_trg_Hero_Death_On_Duel, Trig_Hero_Death_On_Duel_Actions);
}
bool Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func002001001001002() {
	return (GetUnitTypeId(GetFilterUnit()) != 'h00U');
}
bool Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func002001() {
	return (IsUnitGroupDeadBJ(GetUnitsOfPlayerMatching(Player(9), Condition(Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func002001001001002))));
}
bool Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func003001001001002() {
	return (GetUnitTypeId(GetFilterUnit()) != 'h00U');
}
bool Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func003001() {
	return (IsUnitGroupDeadBJ(GetUnitsOfPlayerMatching(Player($A), Condition(Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func003001001001002))));
}
bool Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func004001001001002001() {
	return (GetUnitTypeId(GetFilterUnit()) != 'h00U');
}
bool Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func004001001001002002() {
	return (GetUnitTypeId(GetFilterUnit()) != 'h009');
}
bool Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func004001001001002() {
	return GetBooleanAnd(Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func004001001001002001(), Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func004001001001002002());
}
bool Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func004001() {
	return (IsUnitGroupDeadBJ(GetUnitsOfPlayerMatching(Player($B), Condition(Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func004001001001002))));
}
bool Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func034Func005Func002C() {
	return (udg_Bonus_Gold_ChestGold[(1 + GetPlayerId(GetEnumPlayer()))] == 0);
}
bool Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func034Func005C() {
	return (1 == 0) && (UnitHasItemOfTypeBJ(udg_herounit[(1 + GetPlayerId(GetEnumPlayer()))], 'I00V'));
}
void Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func034A() {
	AddHeroXPSwapped((80 + ('x' * udg_Nomer_samoi_volni)), udg_herounit[(1 + GetPlayerId(GetEnumPlayer()))], true);
	SetPlayerStateBJ(GetEnumPlayer(), PLAYER_STATE_RESOURCE_GOLD, (GetPlayerState(GetEnumPlayer(), PLAYER_STATE_RESOURCE_GOLD) + ('x' + (80 * udg_Nomer_samoi_volni))));
	SoundForPlayer(GetEnumPlayer(), 2);
	if ((Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func034Func005C())) {
		if ((Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func034Func005Func002C())) {
			udg_Bonus_Gold_ChestGold[60] = 60;
			SetPlayerStateBJ(GetEnumPlayer(), PLAYER_STATE_RESOURCE_GOLD, (GetPlayerState(GetEnumPlayer(), PLAYER_STATE_RESOURCE_GOLD) + udg_Bonus_Gold_ChestGold[(1 + GetPlayerId(GetEnumPlayer()))]));
		else
			udg_Bonus_Gold_ChestGold[(udg_Bonus_Gold_ChestGold[(1 + GetPlayerId(GetEnumPlayer()))] + 40)] = (udg_Bonus_Gold_ChestGold[(1 + GetPlayerId(GetEnumPlayer()))] + 40);
			SetPlayerStateBJ(GetEnumPlayer(), PLAYER_STATE_RESOURCE_GOLD, (GetPlayerState(GetEnumPlayer(), PLAYER_STATE_RESOURCE_GOLD) + udg_Bonus_Gold_ChestGold[(1 + GetPlayerId(GetEnumPlayer()))]));
		}
		CreateTexttag(udg_ColorString[23] + "+" + I2S(udg_Bonus_Gold_ChestGold[GetPlayerId(GetEnumPlayer()) + 1]) + "|r", .031, $FF, GetUnitX(udg_herounit[GetPlayerId(GetEnumPlayer()) + 1]) - 15., GetUnitY(udg_herounit[GetPlayerId(GetEnumPlayer()) + 1]), .0, .0, .04, 4.5);
	}
}
void Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func036A() {
	udg_Temp_Real[GetUnitStateSwap(UNIT_STATE_LIFE, GetEnumUnit())] = GetUnitStateSwap(UNIT_STATE_LIFE, GetEnumUnit());
	SetUnitMaxState(GetEnumUnit(), UNIT_STATE_MAX_LIFE, $AF);
	SetWidgetLife(GetEnumUnit(), udg_Temp_Real[1]);
	SetWidgetLife(GetEnumUnit(), (GetUnitStateSwap(UNIT_STATE_LIFE, GetEnumUnit()) + (130. + (25. * I2R(udg_Nomer_samoi_volni)))));
	SetArmorAbilityLevel(GetEnumUnit(), 4);
}
bool Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001Func001Func001Func001Func003Func001Func003C() {
	return (udg_Nomer_samoi_volni == 6) && (udg_Fire_Boss_Turn_On == false);
}
bool Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001Func001Func001Func001Func003Func001C() {
	return (udg_Nomer_samoi_volni == 2) || (udg_Nomer_samoi_volni == 7) || (Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001Func001Func001Func001Func003Func001Func003C());
}
bool Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001Func001Func001Func001Func003C() {
	return (Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001Func001Func001Func001Func003Func001C());
}
bool Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001Func001Func001Func001C() {
	return (udg_Nomer_samoi_volni == 3);
}
bool Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001Func001Func001C() {
	return (udg_Nomer_samoi_volni == $B);
}
bool Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001Func001C() {
	return (udg_Nomer_samoi_volni == 6);
}
bool Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001C() {
	return (udg_Nomer_samoi_volni == 5);
}
bool Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func002C() {
	return (udg_Nomer_samoi_volni == 4) || (udg_Nomer_samoi_volni == 8) || (udg_Nomer_samoi_volni == $A);
}
bool Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045C() {
	return (Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func002C());
}
bool Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001C() {
	return (udg_Integer_kreeps_system_check == 7);
}
bool Trig_Timer_Check_Func002Func001Func001Func001Func001Func001C() {
	return (udg_Integer_kreeps_system_check == 6);
}
bool Trig_Timer_Check_Func002Func001Func001Func001Func001C() {
	return (udg_Integer_kreeps_system_check == 5);
}
bool Trig_Timer_Check_Func002Func001Func001Func001C() {
	return (udg_Integer_kreeps_system_check == 4);
}
bool Trig_Timer_Check_Func002Func001Func001C() {
	return (udg_Integer_kreeps_system_check == 3);
}
bool Trig_Timer_Check_Func002Func001C() {
	return (udg_Integer_kreeps_system_check == 2);
}
bool Trig_Timer_Check_Func002C() {
	return (udg_Integer_kreeps_system_check == 1);
}
void Trig_Timer_Check_Actions() {
	udg_Integer_kreeps_system_check[(udg_Integer_kreeps_system_check + 1)] = (udg_Integer_kreeps_system_check + 1);
	if ((Trig_Timer_Check_Func002C())) {
		udg_number_of_otriad_mobs[(udg_number_of_otriad_mobs + 1)] = (udg_number_of_otriad_mobs + 1);
		StartTimerBJ(udg_Timer_Check_Forkreep_system, false, (udg_Time_Before_Creeps_Spawn * 2.));
	else
		if ((Trig_Timer_Check_Func002Func001C())) {
			udg_number_of_otriad_mobs[(udg_number_of_otriad_mobs + 1)] = (udg_number_of_otriad_mobs + 1);
			StartTimerBJ(udg_Timer_Check_Forkreep_system, false, (udg_Time_Before_Creeps_Spawn * 1.));
		else
			if ((Trig_Timer_Check_Func002Func001Func001C())) {
				udg_number_of_otriad_mobs[(udg_number_of_otriad_mobs - 1)] = (udg_number_of_otriad_mobs - 1);
				StartTimerBJ(udg_Timer_Check_Forkreep_system, false, (udg_Time_Before_Creeps_Spawn * 2.));
			else
				if ((Trig_Timer_Check_Func002Func001Func001Func001C())) {
					udg_number_of_otriad_mobs[(udg_number_of_otriad_mobs + 1)] = (udg_number_of_otriad_mobs + 1);
					StartTimerBJ(udg_Timer_Check_Forkreep_system, false, (udg_Time_Before_Creeps_Spawn * 1.));
				else
					if ((Trig_Timer_Check_Func002Func001Func001Func001Func001C())) {
						udg_number_of_otriad_mobs[(udg_number_of_otriad_mobs - 1)] = (udg_number_of_otriad_mobs - 1);
						StartTimerBJ(udg_Timer_Check_Forkreep_system, false, (udg_Time_Before_Creeps_Spawn * 2.));
					else
						if ((Trig_Timer_Check_Func002Func001Func001Func001Func001Func001C())) {
							udg_number_of_otriad_mobs[(udg_number_of_otriad_mobs + 2)] = (udg_number_of_otriad_mobs + 2);
							StartTimerBJ(udg_Timer_Check_Forkreep_system, false, (udg_Time_Before_Creeps_Spawn * 1.));
						else
							if ((Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001C())) {
								PauseTimerBJ(true, udg_TimerMobsAttackBase);
								while (true) {
									if ((Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func002001())) break;
									TriggerSleepAction(RMaxBJ(bj_WAIT_FOR_COND_MIN_INTERVAL, 1));
								}
								while (true) {
									if ((Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func003001())) break;
									TriggerSleepAction(RMaxBJ(bj_WAIT_FOR_COND_MIN_INTERVAL, 1));
								}
								while (true) {
									if ((Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func004001())) break;
									TriggerSleepAction(RMaxBJ(bj_WAIT_FOR_COND_MIN_INTERVAL, 1));
								}
								udg_Temp_Location[GetRectCenter(gg_rct_Portal_3_up_Start)] = GetRectCenter(gg_rct_Portal_3_up_Start);
								PlaySoundAtPointBJ(udg_Game_Sound[$F], 100., udg_Temp_Location[1], .0);
								RemoveLocation(udg_Temp_Location[1]);
								udg_Temp_Location[null] = null;
								udg_Temp_Location[GetRectCenter(gg_rct_Portal_2_down_right_Start)] = GetRectCenter(gg_rct_Portal_2_down_right_Start);
								PlaySoundAtPointBJ(udg_Game_Sound[$F], 100., udg_Temp_Location[1], .0);
								RemoveLocation(udg_Temp_Location[1]);
								udg_Temp_Location[null] = null;
								udg_Temp_Location[GetRectCenter(gg_rct_Portal_1_down_left_Start)] = GetRectCenter(gg_rct_Portal_1_down_left_Start);
								PlaySoundAtPointBJ(udg_Game_Sound[$F], 100., udg_Temp_Location[1], .0);
								RemoveLocation(udg_Temp_Location[1]);
								udg_Temp_Location[null] = null;
								SetAttackAbilityLevel(udg_Dammy_Portal[1], 50);
								SetAttackAbilityLevel(udg_Dammy_Portal[2], 50);
								SetAttackAbilityLevel(udg_Dammy_Portal[3], 50);
								DisableTrigger(gg_trg_TeleportStuckedCreeps);
								DisableTrigger(gg_trg_go_mochiytb_portal);
								DisableTrigger(gg_trg_Periodic_Rune_Creation);
								udg_Arrow_Pointer_Guide_Count[CountPlayersInForceBJ(udg_IGRAET)] = CountPlayersInForceBJ(udg_IGRAET);
								bj_forLoopAIndex[1] = 1;
								bj_forLoopAIndexEnd[CountPlayersInForceBJ(udg_IGRAET)] = CountPlayersInForceBJ(udg_IGRAET);
								while (true) {
									if (bj_forLoopAIndex > bj_forLoopAIndexEnd) break;
									CreateNUnitsAtLoc(1, 'h00U', Player($F), Location(I2R(udg_Arrow_Pointer_Guide_X[bj_forLoopAIndex]), I2R(udg_Arrow_Pointer_Guide_Y[bj_forLoopAIndex])), I2R(udg_Arrow_Pointer_Guide_Angle[bj_forLoopAIndex]));
									udg_Arrow_Pointer_Guide_Unit[bj_lastCreatedUnit] = bj_lastCreatedUnit;
									AddSpecialEffectTargetUnitBJ("origin", bj_lastCreatedUnit, "Effects\\Arrow - Chapter Browse - Rotated.mdx");
									udg_Arrow_Pointer_Guide_Effect[bj_lastCreatedEffect] = bj_lastCreatedEffect;
									bj_forLoopAIndex[bj_forLoopAIndex + 1] = bj_forLoopAIndex + 1;
								}
								bj_forLoopAIndex[1] = 1;
								bj_forLoopAIndexEnd[9] = 9;
								while (true) {
									if (bj_forLoopAIndex > bj_forLoopAIndexEnd) break;
									SetWidgetLife(udg_herounit[bj_forLoopAIndex], GetUnitStateSwap(UNIT_STATE_MAX_LIFE, udg_herounit[bj_forLoopAIndex]));
									SetUnitManaBJ(udg_herounit[bj_forLoopAIndex], GetUnitStateSwap(UNIT_STATE_MAX_MANA, udg_herounit[bj_forLoopAIndex]));
									bj_forLoopAIndex[bj_forLoopAIndex + 1] = bj_forLoopAIndex + 1;
								}
								DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "|cff99ccffВНИМАНИЕ!|r");
								DisplayTextToForce(bj_FORCE_ALL_PLAYERS, ("За успешное прохождение волны герои получают |cFFFFDC00" + (I2S(('x' + (80 * udg_Nomer_samoi_volni))) + (" золота|r и |cFFFFDC00" + (I2S((80 + ('x' * udg_Nomer_samoi_volni))) + " опыта|r!!!")))));
								ForForce(udg_IGRAET, Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func034A);
								DisplayTextToForce(bj_FORCE_ALL_PLAYERS, ("Стражам-заклинателям восстановлено|cff99ccff " + (I2S(($82 + (25 * udg_Nomer_samoi_volni))) + " |rздоровья. А их защита и максимальный запас здоровье повышены на |cff99ccff4|r и |cff99ccff175|r соответсвенно.")));
								ForGroupBJ(udg_PortalCastersMagi, Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func036A);
								ShowAndFlushAllPlayerDamage(false);
								udg_Time_Before_Creeps_Spawn[(udg_Time_Before_Creeps_Spawn - 1.)] = (udg_Time_Before_Creeps_Spawn - 1.);
								udg_number_of_otriad_mobs[0] = 0;
								udg_Integer_kreeps_system_check[0] = 0;
								udg_Nomer_samoi_volni[(udg_Nomer_samoi_volni + 1)] = (udg_Nomer_samoi_volni + 1);
								SetDoodadAnimationRect(bj_mapInitialPlayableArea, 'D01A', "Stand", false);
								if ((Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045C())) {
									TimerToFunction(50., "Дуэли Героев", Trig_Start_Duel_Actions);
								else
									if ((Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001C())) {
										TimerToFunction(70., "Золотая Поляна", Trig_Nachalo_Eiti_aren_Actions);
									else
										if ((Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001Func001C())) {
											TimerToFunction(50., "Битва с Боссом", Trig_BossStart_Actions);
										else
											if ((Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001Func001Func001C())) {
												TimerToFunction(90., "Битва с Боссом", Trig_IceBoss_Actions);
											else
												if ((Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001Func001Func001Func001C())) {
													TimerToFunction(40., "Битва с Беорнами", Trig_Start_Beorn_Den_Actions);
												else
													StartTimerBJ(udg_Timer_Nomera_Volni, false, 60.);
													if ((Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001Func001Func001Func001Func003C())) {
														StartTimerBJ(udg_Timer_Hint_About_Fast_Start, false, 15.);
													}
													CreateTimerDialogBJ(udg_Timer_Nomera_Volni, ("Волна № |cFFFF0000" + (I2S(udg_Nomer_samoi_volni) + "|r")));
													udg_TimerDialog_Nomera_Volni[bj_lastCreatedTimerDialog] = bj_lastCreatedTimerDialog;
													TimerDialogSetTimeColorBJ(udg_TimerDialog_Nomera_Volni, 'd', 90., 30., 20.);
													udg_Is_Fast_Wave_Start_On_Off[true] = true;
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}
void InitTrig_Timer_Check() {
	gg_trg_Timer_Check[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerExpireEvent(gg_trg_Timer_Check, udg_Timer_Check_Forkreep_system);
	TriggerAddAction(gg_trg_Timer_Check, Trig_Timer_Check_Actions);
}
bool Trig_go_mochiytb_portal_Filter() {
	return ((GetOwningPlayer(GetFilterUnit()) == Player(9)) || (GetOwningPlayer(GetFilterUnit()) == Player($A)) || (GetOwningPlayer(GetFilterUnit()) == Player($B)));
}
void Trig_go_mochiytb_portal_Actions() {
	group g = CreateGroup();
	group g2;
	unit Picked;
	rect rct = gg_rct_Portal_baza;
	float x = GetRectCenterX(rct);
	float y = GetRectCenterY(rct);
	int order;
	int orderId;
	orderId[$D0004] = $D0004;
	if ((orderId != 0)) {
	else
		orderId[UnitId("stop")] = UnitId("stop");
		if ((orderId != 0)) {
		}
	}
	g2[CreateGroup()] = CreateGroup();
	GroupEnumUnitsInRect(g2, rct, null);
	GroupEnumUnitsInRect(g, bj_mapInitialPlayableArea, Condition(Trig_go_mochiytb_portal_Filter));
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		order[GetUnitCurrentOrder(Picked)] = GetUnitCurrentOrder(Picked);
		if ((IsUnitInGroup(Picked, g2) == false)) {
			if ((order == orderId) || order == 0) {
				IssuePointOrderById(Picked, $D000F, x, y);
			}
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g2);
	DestroyGroup(g2);
	g2[null] = null;
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	rct[null] = null;
}
void InitTrig_go_mochiytb_portal() {
	gg_trg_go_mochiytb_portal[CreateTrigger()] = CreateTrigger();
	DisableTrigger(gg_trg_go_mochiytb_portal);
	TriggerRegisterTimerEvent(gg_trg_go_mochiytb_portal, 2., true);
	TriggerAddAction(gg_trg_go_mochiytb_portal, Trig_go_mochiytb_portal_Actions);
}
void Trig_Start_game_Actions() {
	RemoveAllGuardPositions(Player($B));
	udg_Nomer_samoi_volni[1] = 1;
	udg_Time_Before_Creeps_Spawn[21.] = 21.;
	StartTimerBJ(udg_Timer_Nomera_Volni, false, 180.);
	CreateTimerDialogBJ(bj_lastStartedTimer, ("Волна № |cFFFF0000" + (I2S(udg_Nomer_samoi_volni) + "|r")));
	udg_TimerDialog_Nomera_Volni[bj_lastCreatedTimerDialog] = bj_lastCreatedTimerDialog;
	TimerDialogSetTimeColorBJ(udg_TimerDialog_Nomera_Volni, 'd', 90., 30., 20.);
	udg_Is_Fast_Wave_Start_On_Off[true] = true;
	udg_Wave_Unit_tape['u001'] = 'u001';
	udg_Wave_Unit_tape['u002'] = 'u002';
	udg_Wave_Unit_tape['u003'] = 'u003';
	udg_Wave_Unit_tape['n00K'] = 'n00K';
	udg_Wave_Unit_tape['n00H'] = 'n00H';
	udg_Wave_Unit_tape['n00P'] = 'n00P';
	udg_Wave_Unit_tape['u005'] = 'u005';
	udg_Wave_Unit_tape['n00O'] = 'n00O';
	udg_Wave_Unit_tape['u006'] = 'u006';
	udg_Wave_Unit_tape['u004'] = 'u004';
	udg_Wave_Unit_tape['u007'] = 'u007';
	udg_Wave_Unit_tape['u008'] = 'u008';
	udg_Wave_Unit_tape['u00D'] = 'u00D';
	udg_Wave_Unit_tape['n00R'] = 'n00R';
	udg_Wave_Unit_tape['n00U'] = 'n00U';
	udg_Wave_Unit_tape['n00V'] = 'n00V';
	udg_Wave_Unit_tape['u009'] = 'u009';
	udg_Wave_Unit_tape['u00B'] = 'u00B';
	udg_Wave_Unit_tape['u00A'] = 'u00A';
	udg_Wave_Unit_tape['u00C'] = 'u00C';
	udg_Wave_Unit_tape['u00E'] = 'u00E';
	udg_Wave_Unit_tape['n013'] = 'n013';
	udg_Wave_Unit_tape['n014'] = 'n014';
	udg_Wave_Unit_tape['n015'] = 'n015';
	udg_Wave_Unit_tape['n016'] = 'n016';
	udg_Wave_Unit_tape['n017'] = 'n017';
	udg_Wave_Unit_tape['n018'] = 'n018';
	udg_Wave_Unit_tape['n019'] = 'n019';
	udg_Wave_Unit_tape['n01A'] = 'n01A';
	udg_Wave_Unit_tape['n01B'] = 'n01B';
	udg_Wave_Unit_tape['n01E'] = 'n01E';
	udg_Wave_Unit_tape['n01C'] = 'n01C';
	udg_Wave_Unit_tape['n003'] = 'n003';
	udg_Wave_Unit_tape['n00D'] = 'n00D';
	udg_Wave_Unit_tape['n008'] = 'n008';
	udg_Wave_Unit_tape['n009'] = 'n009';
	udg_Wave_Unit_tape['n00F'] = 'n00F';
	udg_Wave_Unit_tape['n00I'] = 'n00I';
	udg_Wave_Unit_tape['n00G'] = 'n00G';
	udg_Wave_Unit_tape['n00E'] = 'n00E';
	TriggerExecute(gg_trg_Init_System_Receiving_Experience_for_Creeps);
	TriggerExecute(gg_trg_Init_System_Receiving_Gold_for_Creeps);
}
void InitTrig_Start_game() {
	gg_trg_Start_game[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Start_game, Trig_Start_game_Actions);
}
void Trig_StartWave_Func007A() {
	SoundForPlayer(GetEnumPlayer(), 3);
}
void Trig_StartWave_Actions() {
	DestroyTimerDialog(udg_TimerDialog_Nomera_Volni);
	udg_Is_Fast_Wave_Start_On_Off[false] = false;
	udg_Count_Players_Fast_Wave_Start[0] = 0;
	bj_forLoopAIndex[1] = 1;
	bj_forLoopAIndexEnd[16] = 16;
	while (true) {
		if (bj_forLoopAIndex > bj_forLoopAIndexEnd) break;
		udg_Is_Player_Fast_Wave_Start[false] = false;
		bj_forLoopAIndex[bj_forLoopAIndex + 1] = bj_forLoopAIndex + 1;
	}
	DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 5., ("Волна №|cFFFF0000" + (I2S(udg_Nomer_samoi_volni) + " |rначалась!!!")));
	ForForce(udg_IGRAET, Trig_StartWave_Func007A);
	EnableTrigger(gg_trg_go_mochiytb_portal);
	EnableTrigger(gg_trg_Periodic_Rune_Creation);
	StartTimerBJ(udg_Timer_Check_Forkreep_system, false, .0);
	StartTimerBJ(udg_TimerMobsAttackBase, false, .1);
	EnableTrigger(gg_trg_TeleportStuckedCreeps);
	udg_Wave_Progress_for_MultiBoard[0] = 0;
	MultiboardSetItemValueBJ(udg_MultiBoard, 3, (udg_CountPlayers + 3), "|Cfffed3120|r|cFF969696/|r|Cfffed3129|r");
	MultiboardSetTitleText(udg_MultiBoard, ("Последние Стражи" + (" (Волна " + (udg_ColorString[20] + (I2S(udg_Nomer_samoi_volni) + ("|r из " + (udg_ColorString[20] + "10|r)")))))));
	SetDoodadAnimationRect(bj_mapInitialPlayableArea, 'D01A', "Stand Work", false);
	ShowAndFlushAllPlayerDamage(true);
	udg_Temp_Location[GetRectCenter(gg_rct_Portal_3_up_Start)] = GetRectCenter(gg_rct_Portal_3_up_Start);
	PlaySoundAtPointBJ(udg_Game_Sound[$E], 100., udg_Temp_Location[1], .0);
	RemoveLocation(udg_Temp_Location[1]);
	udg_Temp_Location[null] = null;
	udg_Temp_Location[GetRectCenter(gg_rct_Portal_2_down_right_Start)] = GetRectCenter(gg_rct_Portal_2_down_right_Start);
	PlaySoundAtPointBJ(udg_Game_Sound[$E], 100., udg_Temp_Location[1], .0);
	RemoveLocation(udg_Temp_Location[1]);
	udg_Temp_Location[null] = null;
	udg_Temp_Location[GetRectCenter(gg_rct_Portal_1_down_left_Start)] = GetRectCenter(gg_rct_Portal_1_down_left_Start);
	PlaySoundAtPointBJ(udg_Game_Sound[$E], 100., udg_Temp_Location[1], .0);
	RemoveLocation(udg_Temp_Location[1]);
	udg_Temp_Location[null] = null;
	bj_forLoopAIndex[1] = 1;
	bj_forLoopAIndexEnd[CountPlayersInForceBJ(udg_IGRAET)] = CountPlayersInForceBJ(udg_IGRAET);
	while (true) {
		if (bj_forLoopAIndex > bj_forLoopAIndexEnd) break;
		SetUnitAnimation(udg_Rune_On_Base_Dummy[bj_forLoopAIndex], "Stand Alternate");
		bj_forLoopAIndex[bj_forLoopAIndex + 1] = bj_forLoopAIndex + 1;
	}
	bj_forLoopAIndex[1] = 1;
	bj_forLoopAIndexEnd[udg_Arrow_Pointer_Guide_Count] = udg_Arrow_Pointer_Guide_Count;
	while (true) {
		if (bj_forLoopAIndex > bj_forLoopAIndexEnd) break;
		DestroyEffect(udg_Arrow_Pointer_Guide_Effect[bj_forLoopAIndex]);
		KillUnit(udg_Arrow_Pointer_Guide_Unit[bj_forLoopAIndex]);
		bj_forLoopAIndex[bj_forLoopAIndex + 1] = bj_forLoopAIndex + 1;
	}
	StartTimerBJ(udg_TimerShowAndFlushAllPlayerDmg, false, 10000.);
}
void InitTrig_StartWave() {
	gg_trg_StartWave[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerExpireEvent(gg_trg_StartWave, udg_Timer_Nomera_Volni);
	TriggerAddAction(gg_trg_StartWave, Trig_StartWave_Actions);
}
void Trig_MobsAttackBase_Actions() {
	int wavenumber = udg_Nomer_samoi_volni;
	int players = CountPlayersInForceBJ(udg_IGRAET);
	int count = 2;
	int count2 = 1;
	int count3 = 3;
	array<int> mobscount;
	array<int> mobscount2;
	array<int> mobscount3;
	int numbergroup = udg_number_of_otriad_mobs;
	int difficultlevel;
	float xc = GetRectCenterX(gg_rct_cast_magi);
	float yc = GetRectCenterY(gg_rct_cast_magi);
	array<rect> rct;
	array<float> x;
	array<float> y;
	array<float> x1type;
	array<float> y1type;
	array<float> x2type;
	array<float> y2type;
	array<float> x3type;
	array<float> y3type;
	array<float> angle;
	unit mob;
	int lopa = 1;
	int lopb = 1;
	int id1 = udg_Wave_Unit_tape[(4 * wavenumber) - 3];
	int id2 = udg_Wave_Unit_tape[(4 * wavenumber) - 2];
	int id3 = udg_Wave_Unit_tape[(4 * wavenumber) - 1];
	int mobsrandom;
	array<int> multiplayers;
	float dist = .0;
	int perekluchatel = 1;
	array<player> p;
	unit dammi;
	if (numbergroup == 3) {
		count[count * 2] = count * 2;
		count2[count2 * 2] = count2 * 2;
	}
	if (players >= 1 && players <= 2) {
		multiplayers[1] = 1;
	}
	if (players >= 3 && players <= 4) {
		multiplayers[2] = 2;
	}
	if (players >= 5 && players <= 9) {
		multiplayers[3] = 3;
	}
	if (players >= 2 && players <= 3) {
		multiplayers[1] = 1;
	}
	if (players >= 4 && players <= 5) {
		multiplayers[2] = 2;
	}
	if (players >= 6 && players <= 9) {
		multiplayers[3] = 3;
	}
	if (players >= 7 && players <= 9) {
		multiplayers[(players - 6)] = (players - 6);
	}
	if ((udg_Integer_Creep_On_Line_Spawn[1] != 0) || (udg_Integer_Creep_On_Line_Spawn[2] != 0) || (udg_Integer_Creep_On_Line_Spawn[3] != 0)) {
		multiplayers[udg_Integer_Creep_On_Line_Spawn[1]] = udg_Integer_Creep_On_Line_Spawn[1];
		multiplayers[udg_Integer_Creep_On_Line_Spawn[2]] = udg_Integer_Creep_On_Line_Spawn[2];
		multiplayers[udg_Integer_Creep_On_Line_Spawn[3]] = udg_Integer_Creep_On_Line_Spawn[3];
	}
	mobsrandom[0] = 0;
	if (count * multiplayers[1] > 0) {
		mobscount[(count * multiplayers[1]) + mobsrandom] = (count * multiplayers[1]) + mobsrandom;
		mobscount2[(count2 * multiplayers[1]) + mobsrandom] = (count2 * multiplayers[1]) + mobsrandom;
		mobscount3[(count3 * multiplayers[1]) + mobsrandom] = (count3 * multiplayers[1]) + mobsrandom;
		udg_Temp_Location[GetRectCenter(gg_rct_Portal_3_up_Start)] = GetRectCenter(gg_rct_Portal_3_up_Start);
		PlaySoundAtPointBJ(udg_Game_Sound[16], 100., udg_Temp_Location[1], .0);
		RemoveLocation(udg_Temp_Location[1]);
		udg_Temp_Location[null] = null;
	}
	if (count * multiplayers[2] > 0) {
		mobscount[(count * multiplayers[2]) + mobsrandom] = (count * multiplayers[2]) + mobsrandom;
		mobscount2[(count2 * multiplayers[2]) + mobsrandom] = (count2 * multiplayers[2]) + mobsrandom;
		mobscount3[(count3 * multiplayers[2]) + mobsrandom] = (count3 * multiplayers[2]) + mobsrandom;
		udg_Temp_Location[GetRectCenter(gg_rct_Portal_2_down_right_Start)] = GetRectCenter(gg_rct_Portal_2_down_right_Start);
		PlaySoundAtPointBJ(udg_Game_Sound[16], 100., udg_Temp_Location[1], .0);
		RemoveLocation(udg_Temp_Location[1]);
		udg_Temp_Location[null] = null;
	}
	if (count * multiplayers[3] > 0) {
		mobscount[(count * multiplayers[3]) + mobsrandom] = (count * multiplayers[3]) + mobsrandom;
		mobscount2[(count2 * multiplayers[3]) + mobsrandom] = (count2 * multiplayers[3]) + mobsrandom;
		mobscount3[(count3 * multiplayers[3]) + mobsrandom] = (count3 * multiplayers[3]) + mobsrandom;
		udg_Temp_Location[GetRectCenter(gg_rct_Portal_1_down_left_Start)] = GetRectCenter(gg_rct_Portal_1_down_left_Start);
		PlaySoundAtPointBJ(udg_Game_Sound[16], 100., udg_Temp_Location[1], .0);
		RemoveLocation(udg_Temp_Location[1]);
		udg_Temp_Location[null] = null;
	}
	rct[gg_rct_Portal_3_up_Start] = gg_rct_Portal_3_up_Start;
	rct[gg_rct_Portal_2_down_right_Start] = gg_rct_Portal_2_down_right_Start;
	rct[gg_rct_Portal_1_down_left_Start] = gg_rct_Portal_1_down_left_Start;
	x[GetRectCenterX(rct[1])] = GetRectCenterX(rct[1]);
	x[GetRectCenterX(rct[2])] = GetRectCenterX(rct[2]);
	x[GetRectCenterX(rct[3])] = GetRectCenterX(rct[3]);
	y[GetRectCenterY(rct[1])] = GetRectCenterY(rct[1]);
	y[GetRectCenterY(rct[2])] = GetRectCenterY(rct[2]);
	y[GetRectCenterY(rct[3])] = GetRectCenterY(rct[3]);
	angle[-90.] = -90.;
	angle[123.] = 123.;
	angle[50.] = 50.;
	x1type[x[1] + 150. * Cos(angle[1] * bj_DEGTORAD)] = x[1] + 150. * Cos(angle[1] * bj_DEGTORAD);
	x1type[x[2] + 150. * Cos(angle[2] * bj_DEGTORAD)] = x[2] + 150. * Cos(angle[2] * bj_DEGTORAD);
	x1type[x[3] + 150. * Cos(angle[3] * bj_DEGTORAD)] = x[3] + 150. * Cos(angle[3] * bj_DEGTORAD);
	y1type[y[1] + 150. * Sin(angle[1] * bj_DEGTORAD)] = y[1] + 150. * Sin(angle[1] * bj_DEGTORAD);
	y1type[y[2] + 150. * Sin(angle[2] * bj_DEGTORAD)] = y[2] + 150. * Sin(angle[2] * bj_DEGTORAD);
	y1type[y[3] + 150. * Sin(angle[3] * bj_DEGTORAD)] = y[3] + 150. * Sin(angle[3] * bj_DEGTORAD);
	if (wavenumber == 'd') {
		mobscount[R2I((mobscount[1] * 1.5) + .5)] = R2I((mobscount[1] * 1.5) + .5);
		mobscount[R2I((mobscount[2] * 1.5) + .5)] = R2I((mobscount[2] * 1.5) + .5);
		mobscount[R2I((mobscount[3] * 1.5) + .5)] = R2I((mobscount[3] * 1.5) + .5);
		mobscount2[R2I((mobscount2[1] * 1.5) + .5)] = R2I((mobscount2[1] * 1.5) + .5);
		mobscount2[R2I((mobscount2[2] * 1.5) + .5)] = R2I((mobscount2[2] * 1.5) + .5);
		mobscount2[R2I((mobscount2[3] * 1.5) + .5)] = R2I((mobscount2[3] * 1.5) + .5);
		mobscount3[R2I((mobscount3[1] * 1.5) + .5)] = R2I((mobscount3[1] * 1.5) + .5);
		mobscount3[R2I((mobscount3[2] * 1.5) + .5)] = R2I((mobscount3[2] * 1.5) + .5);
		mobscount3[R2I((mobscount3[3] * 1.5) + .5)] = R2I((mobscount3[3] * 1.5) + .5);
	}
	if (wavenumber == 'd') {
		mobscount[R2I((mobscount[1] / 2.) + .5)] = R2I((mobscount[1] / 2.) + .5);
		mobscount[R2I((mobscount[2] / 2.) + .5)] = R2I((mobscount[2] / 2.) + .5);
		mobscount[R2I((mobscount[3] / 2.) + .5)] = R2I((mobscount[3] / 2.) + .5);
		mobscount2[R2I((mobscount2[1] / 2.) + .5)] = R2I((mobscount2[1] / 2.) + .5);
		mobscount2[R2I((mobscount2[2] / 2.) + .5)] = R2I((mobscount2[2] / 2.) + .5);
		mobscount2[R2I((mobscount2[3] / 2.) + .5)] = R2I((mobscount2[3] / 2.) + .5);
		mobscount3[R2I((mobscount3[1] / 2.) + .5)] = R2I((mobscount3[1] / 2.) + .5);
		mobscount3[R2I((mobscount3[2] / 2.) + .5)] = R2I((mobscount3[2] / 2.) + .5);
		mobscount3[R2I((mobscount3[3] / 2.) + .5)] = R2I((mobscount3[3] / 2.) + .5);
	}
	p[Player(9)] = Player(9);
	p[Player($A)] = Player($A);
	p[Player($B)] = Player($B);
	while (true) {
		if (lopa > 3) break;
		if (mobscount[lopa] > 0) {
			dammi[CreateUnit(Player($B), 'h00U', x1type[lopa], y1type[lopa], .0)] = CreateUnit(Player($B), 'h00U', x1type[lopa], y1type[lopa], .0);
			UnitApplyTimedLife(dammi, 'BTLF', 2.);
			SetUnitScale(dammi, 2., 2., 2.);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl", dammi, "origin"));
			dammi[null] = null;
			while (true) {
				if (lopb > mobscount[lopa]) break;
				if (perekluchatel == 1) {
					perekluchatel[-1] = -1;
				else
					if (perekluchatel == -1) {
						perekluchatel[1] = 1;
					}
				}
				dist[dist + 32.] = dist + 32.;
				mob[CreateUnit(p[lopa], id1, x1type[lopa] + dist * Cos((angle[lopa] + perekluchatel * 90.) * bj_DEGTORAD), y1type[lopa] + dist * Sin((angle[lopa] + perekluchatel * 90.) * bj_DEGTORAD), angle[lopa])] = CreateUnit(p[lopa], id1, x1type[lopa] + dist * Cos((angle[lopa] + perekluchatel * 90.) * bj_DEGTORAD), y1type[lopa] + dist * Sin((angle[lopa] + perekluchatel * 90.) * bj_DEGTORAD), angle[lopa]);
				udg_count[udg_count + 1] = udg_count + 1;
				IssuePointOrderById(mob, $D000F, xc, yc);
				SaveBoolean(udg_hash, GetHandleId(mob), 83, true);
				mob[null] = null;
				lopb[lopb + 1] = lopb + 1;
			}
		}
		dist[.0] = .0;
		lopb[1] = 1;
		lopa[lopa + 1] = lopa + 1;
	}
	lopa[1] = 1;
	lopb[1] = 1;
	if (numbergroup >= 1) {
		x2type[x[1] + 60. * Cos(angle[1] * bj_DEGTORAD)] = x[1] + 60. * Cos(angle[1] * bj_DEGTORAD);
		x2type[x[2] + 60. * Cos(angle[2] * bj_DEGTORAD)] = x[2] + 60. * Cos(angle[2] * bj_DEGTORAD);
		x2type[x[3] + 60. * Cos(angle[3] * bj_DEGTORAD)] = x[3] + 60. * Cos(angle[3] * bj_DEGTORAD);
		y2type[y[1] + 60. * Sin(angle[1] * bj_DEGTORAD)] = y[1] + 60. * Sin(angle[1] * bj_DEGTORAD);
		y2type[y[2] + 60. * Sin(angle[2] * bj_DEGTORAD)] = y[2] + 60. * Sin(angle[2] * bj_DEGTORAD);
		y2type[y[3] + 60. * Sin(angle[3] * bj_DEGTORAD)] = y[3] + 60. * Sin(angle[3] * bj_DEGTORAD);
		while (true) {
			if (lopa > 3) break;
			while (true) {
				if (lopb > mobscount2[lopa]) break;
				if (perekluchatel == 1) {
					perekluchatel[-1] = -1;
				else
					if (perekluchatel == -1) {
						perekluchatel[1] = 1;
					}
				}
				dist[dist + 30.] = dist + 30.;
				mob[CreateUnit(p[lopa], id2, x2type[lopa] + dist * Cos((angle[lopa] + perekluchatel * 90.) * bj_DEGTORAD), y2type[lopa] + dist * Sin((angle[lopa] + perekluchatel * 90.) * bj_DEGTORAD), angle[lopa])] = CreateUnit(p[lopa], id2, x2type[lopa] + dist * Cos((angle[lopa] + perekluchatel * 90.) * bj_DEGTORAD), y2type[lopa] + dist * Sin((angle[lopa] + perekluchatel * 90.) * bj_DEGTORAD), angle[lopa]);
				udg_count[udg_count + 1] = udg_count + 1;
				SaveBoolean(udg_hash, GetHandleId(mob), 83, true);
				IssuePointOrderById(mob, $D000F, xc, yc);
				mob[null] = null;
				lopb[lopb + 1] = lopb + 1;
			}
			dist[.0] = .0;
			lopb[1] = 1;
			lopa[lopa + 1] = lopa + 1;
		}
		lopa[1] = 1;
		lopb[1] = 1;
	}
	if (numbergroup == 2) {
		while (true) {
			if (lopa > 3) break;
			while (true) {
				if (lopb > mobscount3[lopa]) break;
				udg_count[udg_count + 1] = udg_count + 1;
				mob[CreateUnit(p[lopa], id3, x[lopa] - 25. * Cos(angle[lopa] * bj_DEGTORAD), y[lopa] - 25. * Sin(angle[lopa] * bj_DEGTORAD), angle[lopa])] = CreateUnit(p[lopa], id3, x[lopa] - 25. * Cos(angle[lopa] * bj_DEGTORAD), y[lopa] - 25. * Sin(angle[lopa] * bj_DEGTORAD), angle[lopa]);
				IssuePointOrderById(mob, $D000F, xc, yc);
				SaveBoolean(udg_hash, GetHandleId(mob), 83, true);
				mob[null] = null;
				lopb[lopb + 1] = lopb + 1;
			}
			lopb[1] = 1;
			lopa[lopa + 1] = lopa + 1;
		}
		lopa[1] = 1;
		lopb[1] = 1;
	}
	if (numbergroup == 3) {
		if ((IsPlayerInForce(GetLocalPlayer(), udg_IGRAET))) {
			DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "|cFFFF0000БОСС!!!|r");
			SoundForPlayer(GetLocalPlayer(), 6);
		}
		while (true) {
			if (lopa > 3) break;
			if (mobscount[lopa] > 0) {
				udg_count[udg_count + 1] = udg_count + 1;
				mob[CreateUnit(p[lopa], udg_Wave_Unit_tape[4 * wavenumber], x[lopa] - 25. * Cos(angle[lopa] * bj_DEGTORAD), y[lopa] - 25. * Sin(angle[lopa] * bj_DEGTORAD), angle[lopa])] = CreateUnit(p[lopa], udg_Wave_Unit_tape[4 * wavenumber], x[lopa] - 25. * Cos(angle[lopa] * bj_DEGTORAD), y[lopa] - 25. * Sin(angle[lopa] * bj_DEGTORAD), angle[lopa]);
				IssuePointOrderById(mob, $D000F, xc, yc);
				SaveBoolean(udg_hash, GetHandleId(mob), 83, true);
				mob[null] = null;
			}
			lopa[lopa + 1] = lopa + 1;
		}
		lopa[1] = 1;
	}
	p[null] = null;
	p[null] = null;
	p[null] = null;
	mob[null] = null;
	dammi[null] = null;
	udg_Wave_Progress_for_MultiBoard[udg_Wave_Progress_for_MultiBoard + 1] = udg_Wave_Progress_for_MultiBoard + 1;
	MultiboardSetItemValueBJ(udg_MultiBoard, 3, (udg_CountPlayers + 3), (("|Cfffed312" + I2S(udg_Wave_Progress_for_MultiBoard)) + "|r|cFF969696/|r|Cfffed3129|r"));
	StartTimerBJ(udg_TimerMobsAttackBase, false, udg_Time_Before_Creeps_Spawn);
}
void InitTrig_MobsAttackBase() {
	gg_trg_MobsAttackBase[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerExpireEvent(gg_trg_MobsAttackBase, udg_TimerMobsAttackBase);
	TriggerAddAction(gg_trg_MobsAttackBase, Trig_MobsAttackBase_Actions);
}
bool Trig_Filter_TeleportStuckedCreeps_Actions() {
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405 && IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(GetFilterUnit()) != 'h00U' && GetUnitTypeId(GetFilterUnit()) != 'n01M' && GetUnitTypeId(GetFilterUnit()) != 'h00C') && (GetOwningPlayer(GetFilterUnit()) == Player(9) || GetOwningPlayer(GetFilterUnit()) == Player($A) || GetOwningPlayer(GetFilterUnit()) == Player($B))) != null;
}
void Trig_TeleportStuckedCreeps_Actions() {
	group g = CreateGroup();
	unit Picked;
	int h;
	float x;
	float y;
	float dist1 = .0;
	float dist2 = .0;
	float dist3 = .0;
	float x1 = GetRectCenterX(gg_rct_Portal_3_up_Start);
	float y1 = GetRectCenterY(gg_rct_Portal_3_up_Start);
	float x2 = GetRectCenterX(gg_rct_Portal_2_down_right_Start);
	float y2 = GetRectCenterY(gg_rct_Portal_2_down_right_Start);
	float x3 = GetRectCenterX(gg_rct_Portal_1_down_left_Start);
	float y3 = GetRectCenterY(gg_rct_Portal_1_down_left_Start);
	float xt;
	float yt;
	float xload = .0;
	float yload = .0;
	int i = 0;
	GroupEnumUnitsInRect(g, bj_mapInitialPlayableArea, Filter(Trig_Filter_TeleportStuckedCreeps_Actions));
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		h[GetHandleId(Picked)] = GetHandleId(Picked);
		x[GetUnitX(Picked)] = GetUnitX(Picked);
		y[GetUnitY(Picked)] = GetUnitY(Picked);
		i[LoadInteger(udg_hash, h, 'k')] = LoadInteger(udg_hash, h, 'k');
		i[i + 2] = i + 2;
		SaveInteger(udg_hash, h, 'k', i);
		if (i >= 20 && udg_IsGameEnd == false) {
			dist1[SquareRoot(((x - x1) * (x - x1)) + ((y - y1) * (y - y1)))] = SquareRoot(((x - x1) * (x - x1)) + ((y - y1) * (y - y1)));
			dist2[SquareRoot(((x - x2) * (x - x2)) + ((y - y2) * (y - y2)))] = SquareRoot(((x - x2) * (x - x2)) + ((y - y2) * (y - y2)));
			dist3[SquareRoot(((x - x3) * (x - x3)) + ((y - y3) * (y - y3)))] = SquareRoot(((x - x3) * (x - x3)) + ((y - y3) * (y - y3)));
			if ((dist1 < dist2) && (dist1 < dist3)) {
				xt[x1] = x1;
				yt[y1] = y1;
			else
				if ((dist2 < dist3)) {
					xt[x2] = x2;
					yt[y2] = y2;
				else
					xt[x3] = x3;
					yt[y3] = y3;
				}
			}
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl", x, y));
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl", xt, yt));
			SetUnitPosition(Picked, xt, yt);
			SaveInteger(udg_hash, h, 'k', 0);
		}
		xload[LoadReal(udg_hash, h, 'l')] = LoadReal(udg_hash, h, 'l');
		yload[LoadReal(udg_hash, h, 'm')] = LoadReal(udg_hash, h, 'm');
		dist1[SquareRoot((x - xload) * (x - xload)) + ((y - yload) * (y - yload))] = SquareRoot((x - xload) * (x - xload)) + ((y - yload) * (y - yload));
		if (dist1 > 500.) {
			SaveReal(udg_hash, h, 'l', x);
			SaveReal(udg_hash, h, 'm', y);
			SaveInteger(udg_hash, h, 'k', 0);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	Picked[null] = null;
}
void InitTrig_TeleportStuckedCreeps() {
	gg_trg_TeleportStuckedCreeps[CreateTrigger()] = CreateTrigger();
	DisableTrigger(gg_trg_TeleportStuckedCreeps);
	TriggerRegisterTimerEvent(gg_trg_TeleportStuckedCreeps, 2., true);
	TriggerAddAction(gg_trg_TeleportStuckedCreeps, Trig_TeleportStuckedCreeps_Actions);
}
void Trig_vhodit_v_zony_Actions() {
	IssueImmediateOrderById(GetEnteringUnit(), $D0004);
}
bool Trig_vhodit_v_zony_Conditions() {
	return GetOwningPlayer(GetEnteringUnit()) == Player($B);
}
void InitTrig_vhodit_v_zony() {
	region rectRegion = CreateRegion();
	gg_trg_vhodit_v_zony[CreateTrigger()] = CreateTrigger();
	RegionAddRect(rectRegion, gg_rct_cast_magi);
	TriggerRegisterEnterRegion(gg_trg_vhodit_v_zony, rectRegion, null);
	TriggerAddCondition(gg_trg_vhodit_v_zony, Condition(Trig_vhodit_v_zony_Conditions));
	TriggerAddAction(gg_trg_vhodit_v_zony, Trig_vhodit_v_zony_Actions);
}
void Trig_Add_Gold_System_Receiving_Gold_for_Creeps_AddGoldAssists_Actions() {
	player p = GetEnumPlayer();
	int pnumber = GetPlayerId(p) + 1;
	int goldassist = udg_Temp_Integer[1];
	float angle = udg_Temp_Real[3];
	float x = udg_Temp_Real[1];
	float y = udg_Temp_Real[2];
	texttag txt = CreateTextTag();
	if (CountItemOfTypeOnUnit(udg_herounit[pnumber], 'I00V') > 0) {
		goldassist[goldassist * 2] = goldassist * 2;
	}
	SetTextTagText(txt, udg_ColorString[23] + "+" + I2S(goldassist) + "|r", .023);
	SetTextTagColor(txt, $FF, $FF, $FF, $FF);
	SetTextTagPos(txt, x - 15., y, .0);
	SetTextTagVelocity(txt, .0, .035);
	SetTextTagPermanent(txt, false);
	SetTextTagLifespan(txt, 2.75);
	SetTextTagFadepoint(txt, 2.75);
	if (GetLocalPlayer() == p) {
		SetTextTagVisibility(txt, true);
	else
		SetTextTagVisibility(txt, false);
	}
	SetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) + goldassist);
	if (pnumber <= 9) {
		udg_MultiBoard_Player_Assist_Count[udg_MultiBoard_Player_Assist_Count[pnumber] + 1] = udg_MultiBoard_Player_Assist_Count[pnumber] + 1;
		MultiboardSetItemValueBJ(udg_MultiBoard, 5, udg_PlayerNumberInMB[pnumber], udg_ColorString[24] + I2S(udg_MultiBoard_Player_Assist_Count[pnumber]) + "|r");
	}
	txt[null] = null;
	p[null] = null;
}
void Trig_Add_Gold_System_Receiving_Gold_for_Creeps_Actions() {
	unit creep = GetDyingUnit();
	unit killer = GetKillingUnit();
	player p = GetOwningPlayer(killer);
	int pnumber = GetPlayerId(p) + 1;
	int mingold = LoadInteger(udg_hash, GetUnitTypeId(creep), 70);
	int maxgold = LoadInteger(udg_hash, GetUnitTypeId(creep), 71);
	int gold = GetRandomInt(mingold, maxgold);
	force players = LoadForceHandle(udg_hash, GetHandleId(creep), 72);
	float angle = .0;
	int countplayers = 0;
	int assistgold = 0;
	float x = GetUnitX(creep);
	float y = GetUnitY(creep);
	bool normalmob = LoadBoolean(udg_hash, GetHandleId(creep), 83);
	texttag txt = CreateTextTag();
	if (gold > 0 && LoadBoolean(udg_hash, GetHandleId(creep), 85) == false) {
		if (normalmob == false) {
			gold[R2I((gold / 2) + .5)] = R2I((gold / 2) + .5);
		}
		ForceRemovePlayer(players, p);
		countplayers[CountPlayersInForceBJ(players)] = CountPlayersInForceBJ(players);
		if (countplayers != 0) {
			assistgold[R2I((.2 + .05 * countplayers) * gold + .5)] = R2I((.2 + .05 * countplayers) * gold + .5);
			angle[(360. / countplayers)] = (360. / countplayers);
		}
		gold[gold - assistgold] = gold - assistgold;
		if (countplayers != 0) {
			assistgold[R2I(assistgold / countplayers)] = R2I(assistgold / countplayers);
		}
		if (assistgold <= 0) {
			assistgold[1] = 1;
		}
		SetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) + gold);
		SetTextTagText(txt, udg_ColorString[23] + "+" + I2S(gold) + "|r", .025);
		SetTextTagColor(txt, $FF, $FF, $FF, $FF);
		SetTextTagPos(txt, x - 15., y, .0);
		SetTextTagVelocity(txt, .0, .035);
		SetTextTagPermanent(txt, false);
		SetTextTagLifespan(txt, 3.5);
		SetTextTagFadepoint(txt, 3.5 / 2);
		if ((GetLocalPlayer() == p)) {
			SetTextTagVisibility(txt, true);
		else
			SetTextTagVisibility(txt, false);
		}
		txt[null] = null;
		if (pnumber <= 9) {
			udg_MultiBoard_Player_Kills_Count[udg_MultiBoard_Player_Kills_Count[pnumber] + 1] = udg_MultiBoard_Player_Kills_Count[pnumber] + 1;
			MultiboardSetItemValueBJ(udg_MultiBoard, 3, udg_PlayerNumberInMB[pnumber], udg_ColorString[20] + I2S(udg_MultiBoard_Player_Kills_Count[pnumber]) + "|r");
		}
		udg_Temp_Integer[assistgold] = assistgold;
		udg_Temp_Real[x] = x;
		udg_Temp_Real[y] = y;
		udg_Temp_Real[angle] = angle;
		udg_Temp_Real[angle] = angle;
		ForForce(players, Trig_Add_Gold_System_Receiving_Gold_for_Creeps_AddGoldAssists_Actions);
	}
	ForceClear(players);
	DestroyForce(players);
	creep[null] = null;
	killer[null] = null;
	p[null] = null;
	players[null] = null;
}
bool Trig_Add_Gold_System_Receiving_Gold_for_Creeps_Conditions() {
	return IsUnitIllusion(GetDyingUnit()) == false && GetUnitAbilityLevel(GetDyingUnit(), 'Aloc') <= 0 && GetUnitTypeId(GetDyingUnit()) != 'h00U' && (GetOwningPlayer(GetDyingUnit()) == Player(9) || GetOwningPlayer(GetDyingUnit()) == Player($A) || GetOwningPlayer(GetDyingUnit()) == Player($B));
}
void InitTrig_Add_Gold_System_Receiving_Gold_for_Creeps() {
	int index = 0;
	gg_trg_Add_Gold_System_Receiving_Gold_for_Creeps[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Add_Gold_System_Receiving_Gold_for_Creeps, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Add_Gold_System_Receiving_Gold_for_Creeps, Condition(Trig_Add_Gold_System_Receiving_Gold_for_Creeps_Conditions));
	TriggerAddAction(gg_trg_Add_Gold_System_Receiving_Gold_for_Creeps, Trig_Add_Gold_System_Receiving_Gold_for_Creeps_Actions);
}
void Trig_Init_System_Receiving_Gold_for_Creeps_Actions() {
	float factor = .25;
	float factorwave;
	int wavenumber;
	array<int> goldconstmin;
	array<int> goldconstmax;
	array<int> goldmin;
	array<int> goldmax;
	goldconstmin[$A] = $A;
	goldconstmax[$D] = $D;
	goldconstmin[8] = 8;
	goldconstmax[$C] = $C;
	goldconstmin[$D] = $D;
	goldconstmax[20] = 20;
	goldconstmin['x'] = 'x';
	goldconstmax[$D2] = $D2;
	SaveInteger(udg_hash, 'n01D', 70, 20);
	SaveInteger(udg_hash, 'n01D', 71, 24);
	SaveInteger(udg_hash, 'u00F', 70, 19);
	SaveInteger(udg_hash, 'u00F', 71, 26);
	SaveInteger(udg_hash, 'u00H', 70, 54);
	SaveInteger(udg_hash, 'u00H', 71, 70);
	SaveInteger(udg_hash, 'n011', 70, 20);
	SaveInteger(udg_hash, 'n011', 71, 24);
	SaveInteger(udg_hash, 'n00T', 70, $D);
	SaveInteger(udg_hash, 'n00T', 71, $F);
	SaveInteger(udg_hash, 'n00X', 70, 6);
	SaveInteger(udg_hash, 'n00X', 71, 7);
	SaveInteger(udg_hash, 'n00Z', 70, $D);
	SaveInteger(udg_hash, 'n00Z', 71, 19);
	SaveInteger(udg_hash, 'u00G', 70, 30);
	SaveInteger(udg_hash, 'u00G', 71, 35);
	SaveInteger(udg_hash, 'n00L', 70, 30);
	SaveInteger(udg_hash, 'n00L', 71, 35);
	SaveInteger(udg_hash, 'n00M', 70, $C);
	SaveInteger(udg_hash, 'n00M', 71, 16);
	SaveInteger(udg_hash, 'n00N', 70, 50);
	SaveInteger(udg_hash, 'n00N', 71, 60);
	SaveInteger(udg_hash, 'n00A', 70, 40);
	SaveInteger(udg_hash, 'n00A', 71, 50);
	wavenumber[1] = 1;
	factorwave[1. + (factor * (wavenumber - 1))] = 1. + (factor * (wavenumber - 1));
	goldmin[R2I((goldconstmin[1] * factorwave) + .5)] = R2I((goldconstmin[1] * factorwave) + .5);
	goldmax[R2I((goldconstmax[1] * factorwave) + .5)] = R2I((goldconstmax[1] * factorwave) + .5);
	goldmin[R2I((goldconstmin[2] * factorwave) + .5)] = R2I((goldconstmin[2] * factorwave) + .5);
	goldmax[R2I((goldconstmax[2] * factorwave) + .5)] = R2I((goldconstmax[2] * factorwave) + .5);
	goldmin[R2I((goldconstmin[3] * factorwave) + .5)] = R2I((goldconstmin[3] * factorwave) + .5);
	goldmax[R2I((goldconstmax[3] * factorwave) + .5)] = R2I((goldconstmax[3] * factorwave) + .5);
	goldmin[R2I((goldconstmin[4] * factorwave) + .5)] = R2I((goldconstmin[4] * factorwave) + .5);
	goldmax[R2I((goldconstmax[4] * factorwave) + .5)] = R2I((goldconstmax[4] * factorwave) + .5);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[1], 70, goldmin[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[1], 71, goldmax[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[2], 70, goldmin[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[2], 71, goldmax[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[3], 70, goldmin[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[3], 71, goldmax[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[4], 70, goldmin[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[4], 71, goldmax[4]);
	wavenumber[2] = 2;
	factorwave[1. + (factor * (wavenumber - 1))] = 1. + (factor * (wavenumber - 1));
	goldmin[R2I((goldconstmin[1] * factorwave) + .5)] = R2I((goldconstmin[1] * factorwave) + .5);
	goldmax[R2I((goldconstmax[1] * factorwave) + .5)] = R2I((goldconstmax[1] * factorwave) + .5);
	goldmin[R2I((goldconstmin[2] * factorwave) + .5)] = R2I((goldconstmin[2] * factorwave) + .5);
	goldmax[R2I((goldconstmax[2] * factorwave) + .5)] = R2I((goldconstmax[2] * factorwave) + .5);
	goldmin[R2I((goldconstmin[3] * factorwave) + .5)] = R2I((goldconstmin[3] * factorwave) + .5);
	goldmax[R2I((goldconstmax[3] * factorwave) + .5)] = R2I((goldconstmax[3] * factorwave) + .5);
	goldmin[R2I((goldconstmin[4] * factorwave) + .5)] = R2I((goldconstmin[4] * factorwave) + .5);
	goldmax[R2I((goldconstmax[4] * factorwave) + .5)] = R2I((goldconstmax[4] * factorwave) + .5);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[5], 70, goldmin[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[5], 71, goldmax[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[6], 70, goldmin[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[6], 71, goldmax[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[7], 70, goldmin[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[7], 71, goldmax[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[8], 70, goldmin[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[8], 71, goldmax[4]);
	wavenumber[3] = 3;
	factorwave[1. + (factor * (wavenumber - 1))] = 1. + (factor * (wavenumber - 1));
	goldmin[R2I((goldconstmin[1] * factorwave) + .5)] = R2I((goldconstmin[1] * factorwave) + .5);
	goldmax[R2I((goldconstmax[1] * factorwave) + .5)] = R2I((goldconstmax[1] * factorwave) + .5);
	goldmin[R2I((goldconstmin[2] * factorwave) + .5)] = R2I((goldconstmin[2] * factorwave) + .5);
	goldmax[R2I((goldconstmax[2] * factorwave) + .5)] = R2I((goldconstmax[2] * factorwave) + .5);
	goldmin[R2I((goldconstmin[3] * factorwave) + .5)] = R2I((goldconstmin[3] * factorwave) + .5);
	goldmax[R2I((goldconstmax[3] * factorwave) + .5)] = R2I((goldconstmax[3] * factorwave) + .5);
	goldmin[R2I((goldconstmin[4] * factorwave) + .5)] = R2I((goldconstmin[4] * factorwave) + .5);
	goldmax[R2I((goldconstmax[4] * factorwave) + .5)] = R2I((goldconstmax[4] * factorwave) + .5);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[9], 70, goldmin[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[9], 71, goldmax[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[$A], 70, goldmin[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[$A], 71, goldmax[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[$B], 70, goldmin[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[$B], 71, goldmax[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[$C], 70, goldmin[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[$C], 71, goldmax[4]);
	wavenumber[4] = 4;
	factorwave[1. + (factor * (wavenumber - 1))] = 1. + (factor * (wavenumber - 1));
	goldmin[R2I((goldconstmin[1] * factorwave) + .5)] = R2I((goldconstmin[1] * factorwave) + .5);
	goldmax[R2I((goldconstmax[1] * factorwave) + .5)] = R2I((goldconstmax[1] * factorwave) + .5);
	goldmin[R2I((goldconstmin[2] * factorwave) + .5)] = R2I((goldconstmin[2] * factorwave) + .5);
	goldmax[R2I((goldconstmax[2] * factorwave) + .5)] = R2I((goldconstmax[2] * factorwave) + .5);
	goldmin[R2I((goldconstmin[3] * factorwave) + .5)] = R2I((goldconstmin[3] * factorwave) + .5);
	goldmax[R2I((goldconstmax[3] * factorwave) + .5)] = R2I((goldconstmax[3] * factorwave) + .5);
	goldmin[R2I((goldconstmin[4] * factorwave) + .5)] = R2I((goldconstmin[4] * factorwave) + .5);
	goldmax[R2I((goldconstmax[4] * factorwave) + .5)] = R2I((goldconstmax[4] * factorwave) + .5);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[$D], 70, goldmin[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[$D], 71, goldmax[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[$E], 70, goldmin[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[$E], 71, goldmax[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[$F], 70, goldmin[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[$F], 71, goldmax[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[16], 70, goldmin[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[16], 71, goldmax[4]);
	wavenumber[5] = 5;
	factorwave[1. + (factor * (wavenumber - 1))] = 1. + (factor * (wavenumber - 1));
	goldmin[R2I((goldconstmin[1] * factorwave) + .5)] = R2I((goldconstmin[1] * factorwave) + .5);
	goldmax[R2I((goldconstmax[1] * factorwave) + .5)] = R2I((goldconstmax[1] * factorwave) + .5);
	goldmin[R2I((goldconstmin[2] * factorwave) + .5)] = R2I((goldconstmin[2] * factorwave) + .5);
	goldmax[R2I((goldconstmax[2] * factorwave) + .5)] = R2I((goldconstmax[2] * factorwave) + .5);
	goldmin[R2I((goldconstmin[3] * factorwave) + .5)] = R2I((goldconstmin[3] * factorwave) + .5);
	goldmax[R2I((goldconstmax[3] * factorwave) + .5)] = R2I((goldconstmax[3] * factorwave) + .5);
	goldmin[R2I((goldconstmin[4] * factorwave) + .5)] = R2I((goldconstmin[4] * factorwave) + .5);
	goldmax[R2I((goldconstmax[4] * factorwave) + .5)] = R2I((goldconstmax[4] * factorwave) + .5);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[17], 70, goldmin[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[17], 71, goldmax[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[18], 70, goldmin[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[18], 71, goldmax[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[19], 70, goldmin[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[19], 71, goldmax[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[20], 70, goldmin[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[20], 71, goldmax[4]);
	wavenumber[6] = 6;
	factorwave[1. + (factor * (wavenumber - 1))] = 1. + (factor * (wavenumber - 1));
	goldmin[R2I((goldconstmin[1] * factorwave) + .5)] = R2I((goldconstmin[1] * factorwave) + .5);
	goldmax[R2I((goldconstmax[1] * factorwave) + .5)] = R2I((goldconstmax[1] * factorwave) + .5);
	goldmin[R2I((goldconstmin[2] * factorwave) + .5)] = R2I((goldconstmin[2] * factorwave) + .5);
	goldmax[R2I((goldconstmax[2] * factorwave) + .5)] = R2I((goldconstmax[2] * factorwave) + .5);
	goldmin[R2I((goldconstmin[3] * factorwave) + .5)] = R2I((goldconstmin[3] * factorwave) + .5);
	goldmax[R2I((goldconstmax[3] * factorwave) + .5)] = R2I((goldconstmax[3] * factorwave) + .5);
	goldmin[R2I((goldconstmin[4] * factorwave) + .5)] = R2I((goldconstmin[4] * factorwave) + .5);
	goldmax[R2I((goldconstmax[4] * factorwave) + .5)] = R2I((goldconstmax[4] * factorwave) + .5);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[21], 70, goldmin[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[21], 71, goldmax[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[22], 70, goldmin[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[22], 71, goldmax[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[23], 70, goldmin[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[23], 71, goldmax[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[24], 70, goldmin[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[24], 71, goldmax[4]);
	wavenumber[7] = 7;
	factorwave[1. + (factor * (wavenumber - 1))] = 1. + (factor * (wavenumber - 1));
	goldmin[R2I((goldconstmin[1] * factorwave) + .5)] = R2I((goldconstmin[1] * factorwave) + .5);
	goldmax[R2I((goldconstmax[1] * factorwave) + .5)] = R2I((goldconstmax[1] * factorwave) + .5);
	goldmin[R2I((goldconstmin[2] * factorwave) + .5)] = R2I((goldconstmin[2] * factorwave) + .5);
	goldmax[R2I((goldconstmax[2] * factorwave) + .5)] = R2I((goldconstmax[2] * factorwave) + .5);
	goldmin[R2I((goldconstmin[3] * factorwave) + .5)] = R2I((goldconstmin[3] * factorwave) + .5);
	goldmax[R2I((goldconstmax[3] * factorwave) + .5)] = R2I((goldconstmax[3] * factorwave) + .5);
	goldmin[R2I((goldconstmin[4] * factorwave) + .5)] = R2I((goldconstmin[4] * factorwave) + .5);
	goldmax[R2I((goldconstmax[4] * factorwave) + .5)] = R2I((goldconstmax[4] * factorwave) + .5);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[25], 70, goldmin[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[25], 71, goldmax[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[26], 70, goldmin[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[26], 71, goldmax[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[27], 70, goldmin[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[27], 71, goldmax[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[28], 70, goldmin[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[28], 71, goldmax[4]);
	wavenumber[8] = 8;
	factorwave[1. + (factor * (wavenumber - 1))] = 1. + (factor * (wavenumber - 1));
	goldmin[R2I((goldconstmin[1] * factorwave) + .5)] = R2I((goldconstmin[1] * factorwave) + .5);
	goldmax[R2I((goldconstmax[1] * factorwave) + .5)] = R2I((goldconstmax[1] * factorwave) + .5);
	goldmin[R2I((goldconstmin[2] * factorwave) + .5)] = R2I((goldconstmin[2] * factorwave) + .5);
	goldmax[R2I((goldconstmax[2] * factorwave) + .5)] = R2I((goldconstmax[2] * factorwave) + .5);
	goldmin[R2I((goldconstmin[3] * factorwave) + .5)] = R2I((goldconstmin[3] * factorwave) + .5);
	goldmax[R2I((goldconstmax[3] * factorwave) + .5)] = R2I((goldconstmax[3] * factorwave) + .5);
	goldmin[R2I((goldconstmin[4] * factorwave) + .5)] = R2I((goldconstmin[4] * factorwave) + .5);
	goldmax[R2I((goldconstmax[4] * factorwave) + .5)] = R2I((goldconstmax[4] * factorwave) + .5);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[29], 70, goldmin[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[29], 71, goldmax[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[30], 70, goldmin[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[30], 71, goldmax[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[31], 70, goldmin[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[31], 71, goldmax[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[32], 70, goldmin[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[32], 71, goldmax[4]);
	wavenumber[9] = 9;
	factorwave[1. + (factor * (wavenumber - 1))] = 1. + (factor * (wavenumber - 1));
	goldmin[R2I((goldconstmin[1] * factorwave) + .5)] = R2I((goldconstmin[1] * factorwave) + .5);
	goldmax[R2I((goldconstmax[1] * factorwave) + .5)] = R2I((goldconstmax[1] * factorwave) + .5);
	goldmin[R2I((goldconstmin[2] * factorwave) + .5)] = R2I((goldconstmin[2] * factorwave) + .5);
	goldmax[R2I((goldconstmax[2] * factorwave) + .5)] = R2I((goldconstmax[2] * factorwave) + .5);
	goldmin[R2I((goldconstmin[3] * factorwave) + .5)] = R2I((goldconstmin[3] * factorwave) + .5);
	goldmax[R2I((goldconstmax[3] * factorwave) + .5)] = R2I((goldconstmax[3] * factorwave) + .5);
	goldmin[R2I((goldconstmin[4] * factorwave) + .5)] = R2I((goldconstmin[4] * factorwave) + .5);
	goldmax[R2I((goldconstmax[4] * factorwave) + .5)] = R2I((goldconstmax[4] * factorwave) + .5);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[33], 70, goldmin[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[33], 71, goldmax[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[34], 70, goldmin[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[34], 71, goldmax[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[35], 70, goldmin[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[35], 71, goldmax[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[36], 70, goldmin[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[36], 71, goldmax[4]);
	wavenumber[$A] = $A;
	factorwave[1. + (factor * (wavenumber - 1))] = 1. + (factor * (wavenumber - 1));
	goldmin[R2I((goldconstmin[1] * factorwave) + .5)] = R2I((goldconstmin[1] * factorwave) + .5);
	goldmax[R2I((goldconstmax[1] * factorwave) + .5)] = R2I((goldconstmax[1] * factorwave) + .5);
	goldmin[R2I((goldconstmin[2] * factorwave) + .5)] = R2I((goldconstmin[2] * factorwave) + .5);
	goldmax[R2I((goldconstmax[2] * factorwave) + .5)] = R2I((goldconstmax[2] * factorwave) + .5);
	goldmin[R2I((goldconstmin[3] * factorwave) + .5)] = R2I((goldconstmin[3] * factorwave) + .5);
	goldmax[R2I((goldconstmax[3] * factorwave) + .5)] = R2I((goldconstmax[3] * factorwave) + .5);
	goldmin[R2I((goldconstmin[4] * factorwave) + .5)] = R2I((goldconstmin[4] * factorwave) + .5);
	goldmax[R2I((goldconstmax[4] * factorwave) + .5)] = R2I((goldconstmax[4] * factorwave) + .5);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[37], 70, goldmin[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[37], 71, goldmax[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[38], 70, goldmin[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[38], 71, goldmax[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[39], 70, goldmin[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[39], 71, goldmax[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[40], 70, goldmin[4]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[40], 71, goldmax[4]);
}
void InitTrig_Init_System_Receiving_Gold_for_Creeps() {
	gg_trg_Init_System_Receiving_Gold_for_Creeps[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEvent(gg_trg_Init_System_Receiving_Gold_for_Creeps, 3., false);
	TriggerAddAction(gg_trg_Init_System_Receiving_Gold_for_Creeps, Trig_Init_System_Receiving_Gold_for_Creeps_Actions);
}
void Trig_Init_System_Receiving_Experience_for_Creeps_Actions() {
	float factor = .75;
	float factorwave;
	int wavenumber;
	array<int> xpconst;
	array<int> xp;
	xpconst[8] = 8;
	xpconst[7] = 7;
	xpconst[$D] = $D;
	xpconst[$87] = $87;
	SaveInteger(udg_hash, 'n01D', 82, 50);
	SaveInteger(udg_hash, 'u00F', 82, 35);
	SaveInteger(udg_hash, 'u00H', 82, 'h');
	SaveInteger(udg_hash, 'n011', 82, 30);
	SaveInteger(udg_hash, 'n00T', 82, 24);
	SaveInteger(udg_hash, 'n00X', 82, 8);
	SaveInteger(udg_hash, 'n00Z', 82, 40);
	SaveInteger(udg_hash, 'u00G', 82, 52);
	SaveInteger(udg_hash, 'n00A', 82, 70);
	wavenumber[1] = 1;
	factorwave[1. + (factor * (wavenumber - 1))] = 1. + (factor * (wavenumber - 1));
	xp[R2I((xpconst[1] * factorwave) + .5)] = R2I((xpconst[1] * factorwave) + .5);
	xp[R2I((xpconst[2] * factorwave) + .5)] = R2I((xpconst[2] * factorwave) + .5);
	xp[R2I((xpconst[3] * factorwave) + .5)] = R2I((xpconst[3] * factorwave) + .5);
	xp[R2I((xpconst[4] * factorwave) + .5)] = R2I((xpconst[4] * factorwave) + .5);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[1], 82, xp[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[2], 82, xp[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[3], 82, xp[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[4], 82, xp[4]);
	wavenumber[2] = 2;
	factorwave[1. + (factor * (wavenumber - 1))] = 1. + (factor * (wavenumber - 1));
	xp[R2I((xpconst[1] * factorwave) + .5)] = R2I((xpconst[1] * factorwave) + .5);
	xp[R2I((xpconst[2] * factorwave) + .5)] = R2I((xpconst[2] * factorwave) + .5);
	xp[R2I((xpconst[3] * factorwave) + .5)] = R2I((xpconst[3] * factorwave) + .5);
	xp[R2I((xpconst[4] * factorwave) + .5)] = R2I((xpconst[4] * factorwave) + .5);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[5], 82, xp[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[6], 82, xp[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[7], 82, xp[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[8], 82, xp[4]);
	wavenumber[3] = 3;
	factorwave[1. + (factor * (wavenumber - 1))] = 1. + (factor * (wavenumber - 1));
	xp[R2I((xpconst[1] * factorwave) + .5)] = R2I((xpconst[1] * factorwave) + .5);
	xp[R2I((xpconst[2] * factorwave) + .5)] = R2I((xpconst[2] * factorwave) + .5);
	xp[R2I((xpconst[3] * factorwave) + .5)] = R2I((xpconst[3] * factorwave) + .5);
	xp[R2I((xpconst[4] * factorwave) + .5)] = R2I((xpconst[4] * factorwave) + .5);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[9], 82, xp[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[$A], 82, xp[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[$B], 82, xp[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[$C], 82, xp[4]);
	wavenumber[4] = 4;
	factorwave[1. + (factor * (wavenumber - 1))] = 1. + (factor * (wavenumber - 1));
	xp[R2I((xpconst[1] * factorwave) + .5)] = R2I((xpconst[1] * factorwave) + .5);
	xp[R2I((xpconst[2] * factorwave) + .5)] = R2I((xpconst[2] * factorwave) + .5);
	xp[R2I((xpconst[3] * factorwave) + .5)] = R2I((xpconst[3] * factorwave) + .5);
	xp[R2I((xpconst[4] * factorwave) + .5)] = R2I((xpconst[4] * factorwave) + .5);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[$D], 82, xp[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[$E], 82, xp[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[$F], 82, xp[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[16], 82, xp[4]);
	wavenumber[5] = 5;
	factorwave[1. + (factor * (wavenumber - 1))] = 1. + (factor * (wavenumber - 1));
	xp[R2I((xpconst[1] * factorwave) + .5)] = R2I((xpconst[1] * factorwave) + .5);
	xp[R2I((xpconst[2] * factorwave) + .5)] = R2I((xpconst[2] * factorwave) + .5);
	xp[R2I((xpconst[3] * factorwave) + .5)] = R2I((xpconst[3] * factorwave) + .5);
	xp[R2I((xpconst[4] * factorwave) + .5)] = R2I((xpconst[4] * factorwave) + .5);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[17], 82, xp[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[18], 82, xp[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[19], 82, xp[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[20], 82, xp[4]);
	wavenumber[6] = 6;
	factorwave[1. + (factor * (wavenumber - 1))] = 1. + (factor * (wavenumber - 1));
	xp[R2I((xpconst[1] * factorwave) + .5)] = R2I((xpconst[1] * factorwave) + .5);
	xp[R2I((xpconst[2] * factorwave) + .5)] = R2I((xpconst[2] * factorwave) + .5);
	xp[R2I((xpconst[3] * factorwave) + .5)] = R2I((xpconst[3] * factorwave) + .5);
	xp[R2I((xpconst[4] * factorwave) + .5)] = R2I((xpconst[4] * factorwave) + .5);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[21], 82, xp[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[22], 82, xp[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[23], 82, xp[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[24], 82, xp[4]);
	wavenumber[7] = 7;
	factorwave[1. + (factor * (wavenumber - 1))] = 1. + (factor * (wavenumber - 1));
	xp[R2I((xpconst[1] * factorwave) + .5)] = R2I((xpconst[1] * factorwave) + .5);
	xp[R2I((xpconst[2] * factorwave) + .5)] = R2I((xpconst[2] * factorwave) + .5);
	xp[R2I((xpconst[3] * factorwave) + .5)] = R2I((xpconst[3] * factorwave) + .5);
	xp[R2I((xpconst[4] * factorwave) + .5)] = R2I((xpconst[4] * factorwave) + .5);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[25], 82, xp[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[26], 82, xp[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[27], 82, xp[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[28], 82, xp[4]);
	wavenumber[8] = 8;
	factorwave[1. + (factor * (wavenumber - 1))] = 1. + (factor * (wavenumber - 1));
	xp[R2I((xpconst[1] * factorwave) + .5)] = R2I((xpconst[1] * factorwave) + .5);
	xp[R2I((xpconst[2] * factorwave) + .5)] = R2I((xpconst[2] * factorwave) + .5);
	xp[R2I((xpconst[3] * factorwave) + .5)] = R2I((xpconst[3] * factorwave) + .5);
	xp[R2I((xpconst[4] * factorwave) + .5)] = R2I((xpconst[4] * factorwave) + .5);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[29], 82, xp[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[30], 82, xp[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[31], 82, xp[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[32], 82, xp[4]);
	wavenumber[9] = 9;
	factorwave[1. + (factor * (wavenumber - 1))] = 1. + (factor * (wavenumber - 1));
	xp[R2I((xpconst[1] * factorwave) + .5)] = R2I((xpconst[1] * factorwave) + .5);
	xp[R2I((xpconst[2] * factorwave) + .5)] = R2I((xpconst[2] * factorwave) + .5);
	xp[R2I((xpconst[3] * factorwave) + .5)] = R2I((xpconst[3] * factorwave) + .5);
	xp[R2I((xpconst[4] * factorwave) + .5)] = R2I((xpconst[4] * factorwave) + .5);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[33], 82, xp[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[34], 82, xp[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[35], 82, xp[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[36], 82, xp[4]);
	wavenumber[$A] = $A;
	factorwave[1. + (factor * (wavenumber - 1))] = 1. + (factor * (wavenumber - 1));
	xp[R2I((xpconst[1] * factorwave) + .5)] = R2I((xpconst[1] * factorwave) + .5);
	xp[R2I((xpconst[2] * factorwave) + .5)] = R2I((xpconst[2] * factorwave) + .5);
	xp[R2I((xpconst[3] * factorwave) + .5)] = R2I((xpconst[3] * factorwave) + .5);
	xp[R2I((xpconst[4] * factorwave) + .5)] = R2I((xpconst[4] * factorwave) + .5);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[37], 82, xp[1]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[38], 82, xp[2]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[39], 82, xp[3]);
	SaveInteger(udg_hash, udg_Wave_Unit_tape[40], 82, xp[4]);
}
void InitTrig_Init_System_Receiving_Experience_for_Creeps() {
	gg_trg_Init_System_Receiving_Experience_for_Creeps[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Init_System_Receiving_Experience_for_Creeps, Trig_Init_System_Receiving_Experience_for_Creeps_Actions);
}
bool Trig_Add_Experience_System_Receiving_Experience_for_Creeps_Condition_Actions() {
	return (GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405 && IsUnitIllusion(GetFilterUnit()) == false && IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) && IsUnitEnemy(GetFilterUnit(), udg_Temp_Player[1])) != null;
}
void Trig_Add_Experience_System_Receiving_Experience_for_Creeps_Actions() {
	unit creep = GetDyingUnit();
	int xp = LoadInteger(udg_hash, GetUnitTypeId(creep), 82);
	group g = CreateGroup();
	int count;
	unit Picked;
	bool normalmob = LoadBoolean(udg_hash, GetHandleId(creep), 83);
	if (xp > 0) {
		udg_Temp_Player[GetOwningPlayer(creep)] = GetOwningPlayer(creep);
		GroupEnumUnitsInRange(g, GetUnitX(creep), GetUnitY(creep), 1200., Filter(Trig_Add_Experience_System_Receiving_Experience_for_Creeps_Condition_Actions));
		count[CountUnitsInGroup(g)] = CountUnitsInGroup(g);
		if (normalmob == false) {
			xp[R2I((xp / 2) + .5)] = R2I((xp / 2) + .5);
		}
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			AddHeroXP(Picked, R2I((xp / count) + .5), true);
			GroupRemoveUnit(g, Picked);
		}
	}
	creep[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	Picked[null] = null;
}
bool Trig_Add_Experience_System_Receiving_Experience_for_Creeps_Conditions() {
	return IsUnitIllusion(GetDyingUnit()) == false && GetUnitAbilityLevel(GetDyingUnit(), 'Aloc') <= 0 && GetUnitTypeId(GetDyingUnit()) != 'h00U' && (GetOwningPlayer(GetDyingUnit()) == Player(9) || GetOwningPlayer(GetDyingUnit()) == Player($A) || GetOwningPlayer(GetDyingUnit()) == Player($B));
}
void InitTrig_Add_Experience_System_Receiving_Experience_for_Creeps() {
	int index = 0;
	gg_trg_Add_Experience_System_Receiving_Experience_for_Creeps[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Add_Experience_System_Receiving_Experience_for_Creeps, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Add_Experience_System_Receiving_Experience_for_Creeps, Condition(Trig_Add_Experience_System_Receiving_Experience_for_Creeps_Conditions));
	TriggerAddAction(gg_trg_Add_Experience_System_Receiving_Experience_for_Creeps, Trig_Add_Experience_System_Receiving_Experience_for_Creeps_Actions);
}
void Trig_Init_Potion_System_Actions() {
	udg_Potion_Effect["war3mapImported\\Item_Potion_TinyGreen.mdl"] = "war3mapImported\\Item_Potion_TinyGreen.mdl";
	udg_Potion_Type["life"] = "life";
	udg_Potion_Heal_Amount[80] = 80;
	udg_Potion_Size[1.2] = 1.2;
	udg_Potion_Effect["war3mapImported\\Item_Potion_TinyBlue.mdl"] = "war3mapImported\\Item_Potion_TinyBlue.mdl";
	udg_Potion_Type["mana"] = "mana";
	udg_Potion_Heal_Amount[55] = 55;
	udg_Potion_Size[1.2] = 1.2;
	udg_Potion_Effect["war3mapImported\\Item_Potion_SmallGreen.mdl"] = "war3mapImported\\Item_Potion_SmallGreen.mdl";
	udg_Potion_Type["life"] = "life";
	udg_Potion_Heal_Amount[$A0] = $A0;
	udg_Potion_Size[1.35] = 1.35;
	udg_Potion_Effect["war3mapImported\\Item_Potion_SmallBlue.mdl"] = "war3mapImported\\Item_Potion_SmallBlue.mdl";
	udg_Potion_Type["mana"] = "mana";
	udg_Potion_Heal_Amount['x'] = 'x';
	udg_Potion_Size[1.35] = 1.35;
	udg_Potion_Effect["war3mapImported\\Item_Potion_BigGreen.mdl"] = "war3mapImported\\Item_Potion_BigGreen.mdl";
	udg_Potion_Type["life"] = "life";
	udg_Potion_Heal_Amount[305] = 305;
	udg_Potion_Size[1.4] = 1.4;
	udg_Potion_Effect["war3mapImported\\Item_Potion_BigBlue.mdl"] = "war3mapImported\\Item_Potion_BigBlue.mdl";
	udg_Potion_Type["mana"] = "mana";
	udg_Potion_Heal_Amount[$DC] = $DC;
	udg_Potion_Size[1.4] = 1.4;
	udg_Potion_Effect["war3mapImported\\Item_Potion_LargeGreen.mdl"] = "war3mapImported\\Item_Potion_LargeGreen.mdl";
	udg_Potion_Type["life"] = "life";
	udg_Potion_Heal_Amount[555] = 555;
	udg_Potion_Size[1.55] = 1.55;
	udg_Potion_Effect["war3mapImported\\Item_Potion_LargeBlue.mdl"] = "war3mapImported\\Item_Potion_LargeBlue.mdl";
	udg_Potion_Type["mana"] = "mana";
	udg_Potion_Heal_Amount[405] = 405;
	udg_Potion_Size[1.55] = 1.55;
}
void InitTrig_Init_Potion_System() {
	gg_trg_Init_Potion_System[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEvent(gg_trg_Init_Potion_System, 1., false);
	TriggerAddAction(gg_trg_Init_Potion_System, Trig_Init_Potion_System_Actions);
}
bool Trig_Mob_Dead_Create_Potion_Conditions() {
	return ((GetOwningPlayer(GetDyingUnit()) == Player($B) || GetOwningPlayer(GetDyingUnit()) == Player($A) || GetOwningPlayer(GetDyingUnit()) == Player(9)) && GetRandomInt(1, 'd') <= 8 && IsUnitType(GetDyingUnit(), UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(GetDyingUnit()) != 'h00U' && IsUnitIllusion(GetDyingUnit()) == false && IsUnitType(GetDyingUnit(), UNIT_TYPE_SUMMONED) == false) != null;
}
void Trig_Mob_Dead_Create_Potion_Actions() {
	int minint;
	int maxint;
	int numberwave = udg_Nomer_samoi_volni;
	if (numberwave >= 1 && numberwave <= 3) {
		minint[1] = 1;
	}
	if (numberwave >= 4 && numberwave <= 6) {
		minint[3] = 3;
	}
	if (numberwave >= 7 && numberwave <= 9) {
		minint[5] = 5;
	}
	if (numberwave >= $A) {
		minint[7] = 7;
	}
	if (numberwave == 1) {
		maxint[2] = 2;
	}
	if (numberwave >= 2 && numberwave <= 4) {
		maxint[4] = 4;
	}
	if (numberwave >= 5 && numberwave <= 7) {
		maxint[6] = 6;
	}
	if (numberwave >= 8) {
		maxint[8] = 8;
	}
	CreatePotion(GetUnitX(GetDyingUnit()), GetUnitY(GetDyingUnit()), minint, maxint);
}
void InitTrig_Mob_Dead_Create_Potion() {
	int index = 0;
	gg_trg_Mob_Dead_Create_Potion[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Mob_Dead_Create_Potion, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Mob_Dead_Create_Potion, Condition(Trig_Mob_Dead_Create_Potion_Conditions));
	TriggerAddAction(gg_trg_Mob_Dead_Create_Potion, Trig_Mob_Dead_Create_Potion_Actions);
}
bool Trig_Check_Potion_Picked_Up_Conditions() {
	return (GetUnitState(GetEnteringUnit(), UNIT_STATE_LIFE) > .405 && IsUnitType(GetEnteringUnit(), UNIT_TYPE_HERO) && GetPlayerId(GetOwningPlayer(GetEnteringUnit())) <= 8) != null;
}
void Trig_Check_Potion_Picked_Up_Actions() {
	region reg = GetTriggeringRegion();
	unit hero = GetEnteringUnit();
	unit dammi = LoadUnitHandle(udg_hash, GetHandleId(reg), 1);
	rect rct = LoadRectHandle(udg_hash, GetHandleId(reg), 2);
	int potionindex = LoadInteger(udg_hash, GetHandleId(dammi), 1);
	effect ef = LoadEffectHandle(udg_hash, GetHandleId(dammi), 2);
	string healtype = udg_Potion_Type[potionindex];
	int heal = udg_Potion_Heal_Amount[potionindex];
	float x = GetUnitX(hero);
	float y = GetUnitY(hero);
	float xp = GetUnitState(hero, UNIT_STATE_LIFE);
	float xpmax = GetUnitState(hero, UNIT_STATE_MAX_LIFE);
	float mp = GetUnitState(hero, UNIT_STATE_MANA);
	float mpmax = GetUnitState(hero, UNIT_STATE_MAX_MANA);
	texttag txt;
	float vel = .0221875;
	float angle = 45. + GetRandomReal(.0, 90.);
	float xvel = vel * Cos(angle * bj_DEGTORAD);
	float yvel = vel * Sin(angle * bj_DEGTORAD);
	bool hil = false;
	if (healtype == "life" && (xp < xpmax)) {
		SetUnitState(hero, UNIT_STATE_LIFE, xp + heal);
		DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", hero, "origin"), 2.);
		txt[CreateTextTag()] = CreateTextTag();
		SetTextTagText(txt, "|cFF00DC00+" + I2S(heal) + "|r", .03);
		hil[true] = true;
	}
	if (healtype == "mana" && (mp < mpmax)) {
		SetUnitState(hero, UNIT_STATE_MANA, mp + heal);
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIma\\AImaTarget.mdl", hero, "origin"));
		txt[CreateTextTag()] = CreateTextTag();
		SetTextTagText(txt, "|c000347FC+" + I2S(heal) + "|r", .03);
		hil[true] = true;
	}
	if (hil) {
		KillUnit(dammi);
		DestroyEffect(ef);
		SetTextTagPos(txt, x, y, .0);
		SetTextTagColor(txt, 0, 0, 0, $C8);
		SetTextTagVelocity(txt, xvel, yvel);
		SetTextTagLifespan(txt, 3.);
		SetTextTagFadepoint(txt, .0);
		SetTextTagPermanent(txt, false);
		FlushChildHashtable(udg_hash, GetHandleId(reg));
		FlushChildHashtable(udg_hash, GetHandleId(dammi));
		RemoveRect(rct);
		RemoveRegion(reg);
	}
	reg[null] = null;
	hero[null] = null;
	dammi[null] = null;
	rct[null] = null;
	ef[null] = null;
	txt[null] = null;
}
void InitTrig_Check_Potion_Picked_Up() {
	gg_trg_Check_Potion_Picked_Up[CreateTrigger()] = CreateTrigger();
	TriggerAddCondition(gg_trg_Check_Potion_Picked_Up, Condition(Trig_Check_Potion_Picked_Up_Conditions));
	TriggerAddAction(gg_trg_Check_Potion_Picked_Up, Trig_Check_Potion_Picked_Up_Actions);
}
void Trig_InitSystem_ForGroup() {
	SetPlayerAbilityAvailable(GetEnumPlayer(), 'A66B', false);
}
void Trig_InitSystem_Actions() {
	group g = CreateGroup();
	unit Picked;
	ForForce(bj_FORCE_ALL_PLAYERS, Trig_InitSystem_ForGroup);
	GroupEnumUnitsInRect(g, bj_mapInitialPlayableArea, null);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if (IsUnitType(Picked, UNIT_TYPE_STRUCTURE) != true) {
			GroupAddUnit(udg_DamageGroup, Picked);
			UnitAddAbility(Picked, 'A66B');
			UnitMakeAbilityPermanent(Picked, true, 'A66B');
			UnitMakeAbilityPermanent(Picked, true, 'A666');
			TriggerRegisterUnitEvent(gg_trg_AddDamage, Picked, EVENT_UNIT_DAMAGED);
		}
		GroupRemoveUnit(g, Picked);
	}
	Picked[null] = null;
	DestroyGroup(g);
	g[null] = null;
}
void InitTrig_InitSystem() {
	gg_trg_InitSystem[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEvent(gg_trg_InitSystem, .01, false);
	TriggerAddAction(gg_trg_InitSystem, Trig_InitSystem_Actions);
}
bool Trig_EnterUnit_Conditions() {
	return IsUnitInGroup(GetEnteringUnit(), udg_DamageGroup) == false;
}
void Trig_EnterUnit_Actions() {
	unit u = GetEnteringUnit();
	if (GetUnitTypeId(u) != 'h00U' && IsUnitType(u, UNIT_TYPE_STRUCTURE) != true && GetUnitTypeId(u) != 'h00C') {
		GroupAddUnit(udg_DamageGroup, u);
		UnitAddAbility(u, 'A66B');
		UnitMakeAbilityPermanent(u, true, 'A66B');
		UnitMakeAbilityPermanent(u, true, 'A666');
		TriggerRegisterUnitEvent(gg_trg_AddDamage, u, EVENT_UNIT_DAMAGED);
	}
	u[null] = null;
}
void InitTrig_EnterUnit() {
	region rectRegion = CreateRegion();
	gg_trg_EnterUnit[CreateTrigger()] = CreateTrigger();
	RegionAddRect(rectRegion, GetWorldBounds());
	TriggerRegisterEnterRegion(gg_trg_EnterUnit, rectRegion, null);
	TriggerAddCondition(gg_trg_EnterUnit, Condition(Trig_EnterUnit_Conditions));
	TriggerAddAction(gg_trg_EnterUnit, Trig_EnterUnit_Actions);
}
void Trig_Remove_Bonus_Marshal_Armor_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit damaged = LoadUnitHandle(udg_hash, h, 1);
	SetUnitLifeAndManaRegeneration(damaged, "life", -1);
	SetArmorAbilityLevel(damaged, -1);
	SaveInteger(udg_hash, GetHandleId(damaged), $99, LoadInteger(udg_hash, GetHandleId(damaged), $99) - 1);
	t[CreateTimer()] = CreateTimer();
	h[GetHandleId(t)] = GetHandleId(t);
	SaveUnitHandle(udg_hash, h, 1, damaged);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
	damaged[null] = null;
}
void Trig_Remove_ASBonus_Double_Attack_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit damager = LoadUnitHandle(udg_hash, h, 1);
	DestroyEffect(LoadEffectHandle(udg_hash, h, 2));
	DestroyEffect(LoadEffectHandle(udg_hash, h, 3));
	UnitRemoveAbility(damager, 'A0P4');
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
	damager[null] = null;
}
void Trig_Remove_Lightning_From_Staff_Of_Lightning_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit Picked = LoadUnitHandle(udg_hash, h, 1);
	int wait = LoadInteger(udg_hash, h, 2);
	unit damaged = LoadUnitHandle(udg_hash, h, 3);
	lightning l = LoadLightningHandle(udg_hash, h, 4);
	location locr = GetUnitLoc(damaged);
	location locd = GetUnitLoc(Picked);
	wait[wait - 1] = wait - 1;
	SaveInteger(udg_hash, h, 2, wait);
	MoveLightningEx(l, true, GetUnitX(damaged), GetUnitY(damaged), GetUnitFlyHeight(damaged) + 25. + GetLocationZ(locr), GetUnitX(Picked), GetUnitY(Picked), GetUnitFlyHeight(Picked) + 25. + GetLocationZ(locd));
	if (wait <= 0) {
		DestroyLightning(l);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	Picked[null] = null;
	damaged[null] = null;
	l[null] = null;
	RemoveLocation(locr);
	RemoveLocation(locd);
	locr[null] = null;
	locd[null] = null;
}
void Trig_Beorn_Rage_Remove_Effects_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit damaged = LoadUnitHandle(udg_hash, h, 1);
	effect ef;
	ef[LoadEffectHandle(udg_hash, h, 2)] = LoadEffectHandle(udg_hash, h, 2);
	DestroyEffect(ef);
	ef[null] = null;
	ef[LoadEffectHandle(udg_hash, h, 3)] = LoadEffectHandle(udg_hash, h, 3);
	DestroyEffect(ef);
	ef[null] = null;
	SaveBoolean(udg_hash, GetHandleId(damaged), $84, false);
	SetAttackSpeedAbilityLevel(damaged, -50);
	SetAttackAbilityLevel(damaged, -$A);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	damaged[null] = null;
	t[null] = null;
}
void Trig_Blood_Bow_Remove_Effects_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	int attackspeed = LoadInteger(udg_hash, h, 1);
	unit damager = LoadUnitHandle(udg_hash, h, 2);
	effect ef = LoadEffectHandle(udg_hash, h, 3);
	DestroyEffect(ef);
	ef[null] = null;
	ef[LoadEffectHandle(udg_hash, h, 4)] = LoadEffectHandle(udg_hash, h, 4);
	DestroyEffect(ef);
	ef[null] = null;
	SetAttackSpeedAbilityLevel(damager, -attackspeed);
	SetAttackAbilityLevel(damager, -R2I(attackspeed / 2));
	SaveInteger(udg_hash, GetHandleId(damager), $82, 0);
	SaveTimerHandle(udg_hash, GetHandleId(damager), $81, null);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	damager[null] = null;
	t[null] = null;
}
void Trig_Moon_Chackrum_Periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit damager = LoadUnitHandle(udg_hash, h, 1);
	unit target = LoadUnitHandle(udg_hash, h, $C);
	int count = LoadInteger(udg_hash, h, 3);
	unit glaive = LoadUnitHandle(udg_hash, h, $A);
	unit target2;
	float damage;
	float damagemagic;
	group gdamage;
	float height;
	effect ef;
	float x = GetUnitX(glaive);
	float y = GetUnitY(glaive);
	float xt = GetUnitX(target);
	float yt = GetUnitY(target);
	float xorb;
	float yorb;
	float angle = bj_RADTODEG * Atan2((yt - y), (xt - x));
	float dist = SquareRoot(((xt - x) * (xt - x)) + ((yt - y) * (yt - y)));
	player p;
	group g;
	group grup;
	unit Picked;
	bool remove = false;
	bool reselect = false;
	unit orb2;
	effect ef2;
	bool night;
	string str;
	float resist;
	if (GetUnitState(target, UNIT_STATE_LIFE) > .405) {
		xorb[x + 27. * Cos(angle * bj_DEGTORAD)] = x + 27. * Cos(angle * bj_DEGTORAD);
		yorb[y + 27. * Sin(angle * bj_DEGTORAD)] = y + 27. * Sin(angle * bj_DEGTORAD);
		SetUnitPosition(glaive, xorb, yorb);
		dist[SquareRoot((xt - xorb) * (xt - xorb) + (yt - yorb) * (yt - yorb))] = SquareRoot((xt - xorb) * (xt - xorb) + (yt - yorb) * (yt - yorb));
		SetUnitFacing(glaive, angle);
		if (dist < 21.) {
			SetUnitPosition(glaive, xt, yt);
			p[GetOwningPlayer(damager)] = GetOwningPlayer(damager);
			gdamage[LoadGroupHandle(udg_hash, h, 9)] = LoadGroupHandle(udg_hash, h, 9);
			night[LoadBoolean(udg_hash, h, 4)] = LoadBoolean(udg_hash, h, 4);
			SetUnitPosition(glaive, xt, yt);
			if (GetUnitState(target, UNIT_STATE_LIFE) > .0 && IsUnitType(target, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(target) != 'h00U' && GetUnitTypeId(target) != 'uplg') {
				damage[LoadReal(udg_hash, h, 2)] = LoadReal(udg_hash, h, 2);
				damagemagic[LoadReal(udg_hash, h, 20)] = LoadReal(udg_hash, h, 20);
				resist[LoadReal(udg_hash, h, 21)] = LoadReal(udg_hash, h, 21);
				damage[damage * resist] = damage * resist;
				damagemagic[damagemagic * resist] = damagemagic * resist;
				SaveReal(udg_hash, h, 2, damage);
				SaveReal(udg_hash, h, 20, damagemagic);
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl", target, "chest"));
				UnitDamageTarget(damager, target, ConvertMagicAndChaosDamageInClear(target, damagemagic, damage), false, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				if (night) {
					DestroyEffect(AddSpecialEffectTarget("Effects\\SoundTrauma.mdl", target, "chest"));
				}
				GroupAddUnit(gdamage, target);
			}
			count[count - 1] = count - 1;
			SaveInteger(udg_hash, h, 3, count);
			SaveGroupHandle(udg_hash, h, 9, gdamage);
			reselect[true] = true;
			p[null] = null;
			gdamage[null] = null;
		}
	}
	if (count > 0 && reselect) {
		grup[CreateGroup()] = CreateGroup();
		p[GetOwningPlayer(damager)] = GetOwningPlayer(damager);
		g[CreateGroup()] = CreateGroup();
		GroupEnumUnitsInRange(g, xt, yt, 350., null);
		gdamage[LoadGroupHandle(udg_hash, h, 9)] = LoadGroupHandle(udg_hash, h, 9);
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (IsUnitInGroup(Picked, gdamage) == false && IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U' && GetUnitTypeId(Picked) != 'uplg') {
				GroupAddUnit(grup, Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
		Picked[null] = null;
		RandomUnitFromGroup(1, grup);
		target2[FirstOfGroup(udg_GroupRandomUnitFromGroup)] = FirstOfGroup(udg_GroupRandomUnitFromGroup);
		p[null] = null;
		GroupClear(g);
		DestroyGroup(g);
		g[null] = null;
		if (target2 != null) {
			x[GetUnitX(glaive)] = GetUnitX(glaive);
			y[GetUnitY(glaive)] = GetUnitY(glaive);
			xt[GetUnitX(target2)] = GetUnitX(target2);
			yt[GetUnitY(target2)] = GetUnitY(target2);
			dist[SquareRoot(((xt - x) * (xt - x)) + ((yt - y) * (yt - y)))] = SquareRoot(((xt - x) * (xt - x)) + ((yt - y) * (yt - y)));
			angle[bj_RADTODEG * Atan2((yt - y), (xt - x))] = bj_RADTODEG * Atan2((yt - y), (xt - x));
			p[GetOwningPlayer(damager)] = GetOwningPlayer(damager);
			ef[LoadEffectHandle(udg_hash, h, $B)] = LoadEffectHandle(udg_hash, h, $B);
			DestroyEffect(ef);
			ef[null] = null;
			orb2[CreateUnit(p, 'h00U', x, y, angle)] = CreateUnit(p, 'h00U', x, y, angle);
			RemoveUnit(glaive);
			glaive[null] = null;
			if (night) {
				str["Effects\\BlueGlaivie.mdl"] = "Effects\\BlueGlaivie.mdl";
				SetUnitScale(orb2, .6, .6, .6);
			else
				str["Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl"] = "Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl";
			}
			ef2[AddSpecialEffectTarget(str, orb2, "origin")] = AddSpecialEffectTarget(str, orb2, "origin");
			DestroyEffect(AddSpecialEffectTarget(str, target2, "chest"));
			UnitAddAbility(orb2, 'Amrf');
			UnitRemoveAbility(orb2, 'Amrf');
			SetUnitFlyHeight(orb2, 45., .0);
			SaveUnitHandle(udg_hash, h, $A, orb2);
			SaveEffectHandle(udg_hash, h, $B, ef2);
			SaveUnitHandle(udg_hash, h, $C, target2);
			p[null] = null;
			orb2[null] = null;
			ef2[null] = null;
			target2[null] = null;
		else
			remove[true] = true;
		}
		target2[null] = null;
		p[null] = null;
		gdamage[null] = null;
	}
	if (count <= 0 || (GetUnitState(target, UNIT_STATE_LIFE) < .405)) {
		remove[true] = true;
	}
	if (remove) {
		RemoveUnit(glaive);
		glaive[null] = null;
		ef[LoadEffectHandle(udg_hash, h, $B)] = LoadEffectHandle(udg_hash, h, $B);
		DestroyEffect(ef);
		ef[null] = null;
		gdamage[LoadGroupHandle(udg_hash, h, 9)] = LoadGroupHandle(udg_hash, h, 9);
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		gdamage[null] = null;
		DestroyTimer(t);
		Picked[null] = null;
		FlushChildHashtable(udg_hash, h);
	}
	t[null] = null;
	damager[null] = null;
	glaive[null] = null;
	target[null] = null;
}
void Trig_Stone_Armor_Periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster;
	unit dammi = LoadUnitHandle(udg_hash, h, 2);
	int wait2 = LoadInteger(udg_hash, h, 3);
	unit target = LoadUnitHandle(udg_hash, h, 4);
	float damage;
	float height;
	effect ef;
	float x = GetUnitX(dammi);
	float y = GetUnitY(dammi);
	float xt = GetUnitX(target);
	float yt = GetUnitY(target);
	float angle = bj_RADTODEG * Atan2(yt - y, xt - x);
	float dist;
	bool destroy = false;
	if (GetUnitState(target, UNIT_STATE_LIFE) > .405) {
		wait2[wait2 - 1] = wait2 - 1;
		SaveInteger(udg_hash, h, 3, wait2);
		if (wait2 == 0) {
			height[LoadReal(udg_hash, h, 6)] = LoadReal(udg_hash, h, 6);
			SetUnitFlyHeight(dammi, .0, height * 3.33);
		}
		x[x + 24. * Cos(angle * bj_DEGTORAD)] = x + 24. * Cos(angle * bj_DEGTORAD);
		y[y + 24. * Sin(angle * bj_DEGTORAD)] = y + 24. * Sin(angle * bj_DEGTORAD);
		SetUnitFacing(dammi, GetUnitFacing(dammi) + 30.);
		if (IsTerrainPathable(x, y, PATHING_TYPE_FLYABILITY) == false) {
			SetUnitPosition(dammi, x, y);
		}
		dist[SquareRoot((xt - x) * (xt - x) + (yt - y) * (yt - y))] = SquareRoot((xt - x) * (xt - x) + (yt - y) * (yt - y));
		if (dist < 25.) {
			caster[LoadUnitHandle(udg_hash, h, 1)] = LoadUnitHandle(udg_hash, h, 1);
			damage[LoadReal(udg_hash, h, 5)] = LoadReal(udg_hash, h, 5);
			destroy[true] = true;
			SetUnitFlyHeight(dammi, GetUnitFlyHeight(target) + 50., .0);
			SetUnitPosition(dammi, xt, yt);
			UnitDamageTarget(caster, target, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", target, "chest"));
			DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", GetUnitX(target), GetUnitY(target)));
			MoveUnit(target, .3, 600., 900., angle, .0, true);
			caster[null] = null;
		}
	else
		destroy[true] = true;
	}
	if (destroy) {
		RemoveUnit(dammi);
		ef[LoadEffectHandle(udg_hash, h, 7)] = LoadEffectHandle(udg_hash, h, 7);
		DestroyEffect(ef);
		ef[null] = null;
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	target[null] = null;
	dammi[null] = null;
}
void Trig_IsMinimapPingGuardsAttacked_Refresh_Actions() {
	timer t = GetExpiredTimer();
	udg_IsMinimapPingGuardsAttacked[false] = false;
	DestroyTimer(t);
	t[null] = null;
}
void Trig_Archimagus_Armor_Timer_Death_Denial_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit damaged = LoadUnitHandle(udg_hash, h, 1);
	int hd = GetHandleId(damaged);
	effect ef;
	if (LoadBoolean(udg_hash, hd, 'f')) {
		ef[AddSpecialEffectTarget("Effects\\MagicShieldBlue.mdx", damaged, "origin")] = AddSpecialEffectTarget("Effects\\MagicShieldBlue.mdx", damaged, "origin");
		SaveEffectHandle(udg_hash, hd, 'g', ef);
		SaveReal(udg_hash, hd, 'i', (500. + (GetHeroInt(damaged, true) * 3.)));
	}
	SaveReal(udg_hash, hd, 'h', .0);
	SaveBoolean(udg_hash, hd, 'j', false);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	damaged[null] = null;
	t[null] = null;
	ef[null] = null;
}
void Trig_Cuirass_of_Invulnerable_Timer_Death_Denial_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit damaged = LoadUnitHandle(udg_hash, h, 1);
	int hd = GetHandleId(damaged);
	effect ef;
	if (LoadBoolean(udg_hash, hd, 94)) {
		ef[AddSpecialEffectTarget("Effects\\PurpleSphere.mdx", damaged, "chest")] = AddSpecialEffectTarget("Effects\\PurpleSphere.mdx", damaged, "chest");
		SaveEffectHandle(udg_hash, hd, 95, ef);
	}
	SaveBoolean(udg_hash, hd, $A2, false);
	SaveReal(udg_hash, hd, 96, .0);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	damaged[null] = null;
	t[null] = null;
	ef[null] = null;
}
void Trig_Wind_Bow_Remove_Attack_Speed_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	int attackspeed = LoadInteger(udg_hash, h, 1);
	unit damager = LoadUnitHandle(udg_hash, h, 2);
	effect ef = LoadEffectHandle(udg_hash, h, 3);
	DestroyEffect(ef);
	ef[null] = null;
	ef[LoadEffectHandle(udg_hash, h, 4)] = LoadEffectHandle(udg_hash, h, 4);
	DestroyEffect(ef);
	ef[null] = null;
	SetAttackSpeedAbilityLevel(damager, -attackspeed);
	SaveTimerHandle(udg_hash, GetHandleId(damager), 92, null);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	damager[null] = null;
	t[null] = null;
}
void Trig_Pancir_Iachera_Periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit damaged = LoadUnitHandle(udg_hash, h, 1);
	unit dammi = LoadUnitHandle(udg_hash, h, 2);
	int wait = LoadInteger(udg_hash, h, 3);
	float angle = LoadReal(udg_hash, h, 4);
	float damage;
	float stuntime;
	effect ef;
	float x = GetUnitX(dammi);
	float y = GetUnitY(dammi);
	float xnew = x + 24. * Cos(angle * bj_DEGTORAD);
	float ynew = y + 24. * Sin(angle * bj_DEGTORAD);
	player p = GetOwningPlayer(damaged);
	unit Picked;
	group g = CreateGroup();
	bool destroy = false;
	wait[wait - 1] = wait - 1;
	SaveInteger(udg_hash, h, 3, wait);
	if (wait > 0) {
		if (IsTerrainPathable(xnew, ynew, PATHING_TYPE_FLYABILITY) == false) {
			SetUnitPosition(dammi, xnew, ynew);
		}
		GroupEnumUnitsInRange(g, xnew, ynew, 100., null);
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				damage[LoadReal(udg_hash, h, 5)] = LoadReal(udg_hash, h, 5);
				stuntime[LoadReal(udg_hash, h, 6)] = LoadReal(udg_hash, h, 6);
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl", Picked, "chest"));
				UnitDamageTarget(damaged, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				StunUnitTimed(Picked, stuntime);
				destroy[true] = true;
			}
			GroupRemoveUnit(g, Picked);
		}
	else
		destroy[true] = true;
	}
	if (destroy) {
		ef[LoadEffectHandle(udg_hash, h, 7)] = LoadEffectHandle(udg_hash, h, 7);
		DestroyEffect(ef);
		ef[null] = null;
		KillUnit(dammi);
		dammi[null] = null;
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	damaged[null] = null;
	t[null] = null;
	dammi[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	p[null] = null;
	Picked[null] = null;
}
void Trig_Pancir_Iachera_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit damager = LoadUnitHandle(udg_hash, h, 1);
	SetAttackAbilityLevel(damager, $E);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
	damager[null] = null;
}
void Trig_Spirit_of_Absorption_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit damager = LoadUnitHandle(udg_hash, h, 1);
	float damage = LoadReal(udg_hash, h, 2);
	float manaburn = LoadReal(udg_hash, h, 3);
	int wait = LoadInteger(udg_hash, h, 4);
	unit dammi = LoadUnitHandle(udg_hash, h, 5);
	group gdamage = LoadGroupHandle(udg_hash, h, 6);
	effect ef;
	float x = GetUnitX(dammi);
	float y = GetUnitY(dammi);
	player p = GetOwningPlayer(damager);
	unit Picked;
	group g = CreateGroup();
	wait[wait - 1] = wait - 1;
	SaveInteger(udg_hash, h, 4, wait);
	if (wait > 0) {
		GroupEnumUnitsInRange(g, x, y, 100., null);
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && (IsUnitInGroup(Picked, udg_PortalCastersMagi) == false) && IsUnitInGroup(Picked, gdamage) == false && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Feedback\\ArcaneTowerAttack.mdl", Picked, "origin"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\OrbOfDeath\\OrbOfDeathMissile.mdl", Picked, "chest"));
				UnitDamageTarget(damager, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				SetUnitState(Picked, UNIT_STATE_MANA, GetUnitState(Picked, UNIT_STATE_MANA) - manaburn);
				GroupAddUnit(gdamage, Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
		SaveGroupHandle(udg_hash, h, 6, gdamage);
	else
		SetUnitTimeScale(dammi, 1.);
		ef[LoadEffectHandle(udg_hash, h, 7)] = LoadEffectHandle(udg_hash, h, 7);
		DestroyEffect(ef);
		ef[null] = null;
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\OrbOfDeath\\OrbOfDeathMissile.mdl", x, y));
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\OrbOfDeath\\AnnihilationMissile.mdl", x, y));
		RemoveUnit(dammi);
		dammi[null] = null;
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	damager[null] = null;
	t[null] = null;
	dammi[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	gdamage[null] = null;
	p[null] = null;
	Picked[null] = null;
}
void Trig_Triple_Strike_Move_And_Attack_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit damager = LoadUnitHandle(udg_hash, h, 1);
	unit damaged = LoadUnitHandle(udg_hash, h, 2);
	float damage = LoadReal(udg_hash, h, 3);
	int wait = LoadInteger(udg_hash, h, 4);
	int lvl = LoadInteger(udg_hash, h, $A);
	float xdr = GetUnitX(damager);
	float ydr = GetUnitY(damager);
	float xdd = GetUnitX(damaged);
	float ydd = GetUnitY(damaged);
	float angle = (LoadReal(udg_hash, h, 5)) + 120.;
	float x = xdd + 100. * Cos(angle * bj_DEGTORAD);
	float y = ydd + 100. * Sin(angle * bj_DEGTORAD);
	group g;
	unit Picked;
	player p;
	SaveReal(udg_hash, h, 5, angle);
	wait[wait + 1] = wait + 1;
	SaveInteger(udg_hash, h, 4, wait);
	if (wait <= 4) {
		damage[(damage * (.3 + .1 * lvl))] = (damage * (.3 + .1 * lvl));
		if (wait == 3) {
			SetUnitX(damager, x);
			SetUnitY(damager, y);
			SetUnitFacing(damager, angle + 180.);
			SaveReal(udg_hash, h, 8, xdd);
			SaveReal(udg_hash, h, 9, ydd);
			SetUnitTimeScale(damager, 1.4);
			SetUnitAnimationByIndex(damager, 3);
			TimerStart(t, .6, false, Trig_Triple_Strike_Move_And_Attack_Actions);
		}
		if (wait == 4) {
			g[CreateGroup()] = CreateGroup();
			GroupEnumUnitsInRange(g, LoadReal(udg_hash, h, 8), LoadReal(udg_hash, h, 9), 200., null);
			p[GetOwningPlayer(damager)] = GetOwningPlayer(damager);
			while (true) {
				Picked[FirstOfGroup(g)] = FirstOfGroup(g);
				if (Picked == null) break;
				if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
					UnitDamageTarget(damager, Picked, damage + (30 * lvl), false, false, ATTACK_TYPE_MELEE, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", Picked, "chest"));
				}
				GroupRemoveUnit(g, Picked);
			}
			DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile.mdl", LoadReal(udg_hash, h, 8), LoadReal(udg_hash, h, 9)));
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl", LoadReal(udg_hash, h, 8), LoadReal(udg_hash, h, 9)));
			TimerStart(t, .0, false, Trig_Triple_Strike_Move_And_Attack_Actions);
		}
		if (wait < 3) {
			if (GetRandomInt(1, 2) == 1) {
				SetUnitAnimationByIndex(damager, 8);
			else
				SetUnitAnimationByIndex(damager, 2);
			}
			SetUnitX(damager, x);
			SetUnitY(damager, y);
			SetUnitFacing(damager, angle + 180.);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Blink\\BlinkCaster.mdl", damager, "chest"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", damaged, "chest"));
			UnitDamageTarget(damager, damaged, damage, true, false, ATTACK_TYPE_MELEE, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
		}
	else
		SaveBoolean(udg_hash, GetHandleId(damager), 61, false);
		DestroyEffect(LoadEffectHandle(udg_hash, h, 6));
		DestroyEffect(LoadEffectHandle(udg_hash, h, 7));
		SetUnitInvulnerable(damager, false);
		SetUnitPathing(damager, true);
		SetUnitAnimation(damager, "Stand");
		SetUnitTimeScale(damager, 1.);
		SetUnitTurnSpeed(damager, GetUnitDefaultTurnSpeed(damager));
		IssueImmediateOrderById(damager, $D0004);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	damager[null] = null;
	damaged[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	Picked[null] = null;
	p[null] = null;
}
void Trig_Damage_Unit_With_Wait_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit damaged = LoadUnitHandle(udg_hash, h, 1);
	unit damager = LoadUnitHandle(udg_hash, h, 2);
	float damage = LoadReal(udg_hash, h, 3);
	string str = LoadStr(udg_hash, h, 4);
	if (str == "phys") {
		UnitDamageTarget(damager, damaged, damage, false, false, ATTACK_TYPE_MELEE, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS);
	}
	if (str == "magic") {
		UnitDamageTarget(damager, damaged, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
	}
	if (str == "clear") {
		UnitDamageTarget(damager, damaged, damage, false, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
	}
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
	damaged[null] = null;
	damager[null] = null;
}
void Trig_Make_Unit_UnInvulnerable_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit damaged = LoadUnitHandle(udg_hash, h, 1);
	SetUnitInvulnerable(damaged, false);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
	damaged[null] = null;
}
void Trig_Hil_Unit_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit damaged = LoadUnitHandle(udg_hash, h, 1);
	float hil = LoadReal(udg_hash, h, 2);
	SetUnitState(damaged, UNIT_STATE_LIFE, GetUnitState(damaged, UNIT_STATE_LIFE) + hil);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
	damaged[null] = null;
}
void Trig_Trolls_Evasion_Salto_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit damaged = LoadUnitHandle(udg_hash, h, 1);
	int i = LoadInteger(udg_hash, h, 2);
	if (i == 0) {
		SaveInteger(udg_hash, h, 2, 1);
		TimerStart(t, .5, false, Trig_Trolls_Evasion_Salto_Actions);
		SetUnitTimeScale(damaged, 1.75);
	else
		PauseUnit(damaged, false);
		SetUnitTimeScale(damaged, 1.);
		if (GetUnitState(damaged, UNIT_STATE_LIFE) > .405) {
			SetUnitAnimation(damaged, "Stand");
		}
		SetUnitInvulnerable(damaged, false);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	damaged[null] = null;
}
void Trig_Dark_Crypt_Fiend_Attack_Unbuff_Dispel_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit damaged = LoadUnitHandle(udg_hash, h, 1);
	SetArmorAbilityLevel(damaged, 2);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
	damaged[null] = null;
}
void Trig_Varmosar_Lightning_Destroy_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	lightning l = LoadLightningHandle(udg_hash, h, 1);
	DestroyLightning(l);
	l[null] = null;
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
}
void Trig_AddDamage_Refresh_Creep_Assists_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	player pr = LoadPlayerHandle(udg_hash, h, 1);
	force players = LoadForceHandle(udg_hash, h, 2);
	int hdd = LoadInteger(udg_hash, h, 3);
	ForceRemovePlayer(players, pr);
	SaveForceHandle(udg_hash, hdd, 72, players);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
	pr[null] = null;
	players[null] = null;
}
void Trig_AddDamage_Refresh_Magic_Damage_Handle_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	int hdd = LoadInteger(udg_hash, h, 1);
	SaveBoolean(udg_hash, hdd, $9D, false);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
}
void Trig_AddDamage_Refresh_Handle_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	int hdd = LoadInteger(udg_hash, h, 2);
	SaveInteger(udg_hash, hdd, $AA, 0);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
}
void Trig_AddDamage_Actions() {
	unit damager = GetEventDamageSource();
	unit damaged = GetTriggerUnit();
	float damage = GetEventDamage();
	int hdr = GetHandleId(damager);
	int hdd = GetHandleId(damaged);
	float xr = GetUnitX(damager);
	float yr = GetUnitY(damager);
	float xd = GetUnitX(damaged);
	float yd = GetUnitY(damaged);
	player pr = GetOwningPlayer(damager);
	player pd = GetOwningPlayer(damaged);
	location locr;
	location locd;
	unit dammi;
	unit Picked;
	unit u;
	lightning l;
	timer t;
	int h;
	timer t2;
	int h2;
	timer t3;
	int h3;
	texttag txt;
	int i;
	int lvl;
	int count;
	effect ef;
	float angle;
	float r1;
	float r2;
	float r3;
	float r4;
	string str;
	group g;
	group g2;
	force players;
	bool vZ;
	float dist;
	bool b;
	player p;
	group gdamagefromdamager;
	group gdamagefromdamaged;
	int random;
	bool melee;
	bool physical = false;
	bool loadphysical = false;
	if (1 == 2) {
		t[CreateTimer()] = CreateTimer();
		h[GetHandleId(t)] = GetHandleId(t);
		SaveInteger(udg_hash, h, 2, hdd);
		TimerStart(t, .0, false, Trig_AddDamage_Refresh_Handle_Actions);
		t[null] = null;
	}
	if ((GetUnitAbilityLevel(damaged, 'B00M') > 0 || GetUnitAbilityLevel(damaged, 'B00L') > 0)) {
		if (GetUnitAbilityLevel(GetTriggerUnit(), 'B00M') > 0) {
			melee[true] = true;
		else
			melee[false] = false;
		}
		physical[true] = true;
		UnitRemoveAbility(GetTriggerUnit(), 'B00M');
		UnitRemoveAbility(GetTriggerUnit(), 'B00L');
	}
	gdamagefromdamager[CreateGroup()] = CreateGroup();
	gdamagefromdamaged[CreateGroup()] = CreateGroup();
	if (damage >= .01 && physical) {
		if (GetUnitTypeId(damager) == 'N00W') {
			t[CreateTimer()] = CreateTimer();
			h[GetHandleId(t)] = GetHandleId(t);
			locr[GetUnitLoc(damager)] = GetUnitLoc(damager);
			locd[GetUnitLoc(damaged)] = GetUnitLoc(damaged);
			l[AddLightningEx("CLPB", true, xr, yr, GetUnitFlyHeight(damager) + 125. + GetLocationZ(locr), xd, yd, GetUnitFlyHeight(damaged) + 30. + GetLocationZ(locd))] = AddLightningEx("CLPB", true, xr, yr, GetUnitFlyHeight(damager) + 125. + GetLocationZ(locr), xd, yd, GetUnitFlyHeight(damaged) + 30. + GetLocationZ(locd));
			SaveLightningHandle(udg_hash, h, 1, l);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", damaged, "origin"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\ChimaeraLightningMissile\\ChimaeraLightningMissile.mdl", damaged, "chest"));
			DestroyEffect(AddSpecialEffectTarget("Effects\\OrbOfLightning.mdx", damaged, "origin"));
			TimerStart(t, .3, false, Trig_Varmosar_Lightning_Destroy_Actions);
			l[null] = null;
			RemoveLocation(locr);
			RemoveLocation(locd);
			locr[null] = null;
			locd[null] = null;
			t[null] = null;
		}
		if (GetUnitAbilityLevel(damager, 'A051') > 0 && GetRandomInt(1, 4) == 1) {
			g[CreateGroup()] = CreateGroup();
			GroupEnumUnitsInRange(g, xd, yd, 250., null);
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl", xd, yd));
			while (true) {
				Picked[FirstOfGroup(g)] = FirstOfGroup(g);
				if (Picked == null) break;
				if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, pr) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
					UnitDamageTarget(damager, Picked, 100. + 25 * CountPlayersInForceBJ(udg_IGRAET), false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
					StunUnitTimed(Picked, 1.);
				}
				GroupRemoveUnit(g, Picked);
			}
			GroupClear(g);
			DestroyGroup(g);
			g[null] = null;
			Picked[null] = null;
		}
		if (GetUnitAbilityLevel(damager, 'A06Z') > 0 && GetRandomInt(1, 'd') <= 8 && LoadInteger(udg_hash, GetHandleId(damager), 64) < (GetUnitAbilityLevel(damager, 'A06Z') + 2)) {
			dammi[CreateUnit(pr, udg_spirits_of_water[GetUnitAbilityLevel(damager, 'A06Z')], xd, yd, GetRandomReal(0, 360))] = CreateUnit(pr, udg_spirits_of_water[GetUnitAbilityLevel(damager, 'A06Z')], xd, yd, GetRandomReal(0, 360));
			SaveUnitHandle(udg_hash, GetHandleId(dammi), 63, damager);
			SaveInteger(udg_hash, GetHandleId(damager), 64, LoadInteger(udg_hash, GetHandleId(damager), 64) + 1);
		}
		if (GetUnitAbilityLevel(damager, 'A07J') > 0 && GetRandomInt(1, 'd') <= $A && LoadInteger(udg_hash, hdr, 'z') <= $E) {
			SetAttackAbilityLevel(damager, 2);
			SetUnitMaxState(damager, UNIT_STATE_MAX_LIFE, 20);
			SaveInteger(udg_hash, hdr, 'z', LoadInteger(udg_hash, hdr, 'z') + 1);
			if (LoadInteger(udg_hash, hdr, 'z') == $F) {
				ef[AddSpecialEffectTarget("war3mapImported\\s_WateryAura.mdx", damager, "origin")] = AddSpecialEffectTarget("war3mapImported\\s_WateryAura.mdx", damager, "origin");
				SaveEffectHandle(udg_hash, hdr, '{', ef);
				ef[null] = null;
			}
		}
		if (GetUnitTypeId(damager) == 'u00D' && IsUnitType(damaged, UNIT_TYPE_MAGIC_IMMUNE) == false && IsUnitIllusion(damager) == false && GetRandomInt(1, $A) == 1) {
			dammi[CreateUnit(pr, 'h00U', xr, yr, .0)] = CreateUnit(pr, 'h00U', xr, yr, .0);
			UnitApplyTimedLife(dammi, 'BTLF', 2.);
			UnitAddAbility(dammi, 'A08R');
			IssuePointOrderById(dammi, $D00FA, xd, yd);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AvengerMissile\\AvengerMissile.mdl", damaged, "chest"));
			if (GetUnitAbilityLevel(damaged, 'A087') <= 0) {
				UnitAddAbility(damaged, 'A087');
				UnitAddAbility(damaged, 'A0AH');
				UnitAddAbility(damaged, 'A0AG');
				UnitAddAbility(damaged, 'A0D8');
				UnitAddAbility(damaged, 'A0AT');
				UnitAddAbility(damaged, 'A0AS');
			}
			SetArmorAbilityLevel(damaged, -2);
			t[CreateTimer()] = CreateTimer();
			h[GetHandleId(t)] = GetHandleId(t);
			SaveUnitHandle(udg_hash, h, 1, damaged);
			TimerStart(t, 10., false, Trig_Dark_Crypt_Fiend_Attack_Unbuff_Dispel_Actions);
			t[null] = null;
			dammi[null] = null;
		}
		if (GetUnitAbilityLevel(damager, 'A0EO') > 0) {
			h[GetHandleId(damager)] = GetHandleId(damager);
			lvl[LoadInteger(udg_hash, h, 52)] = LoadInteger(udg_hash, h, 52);
			i[LoadInteger(udg_hash, h, 53)] = LoadInteger(udg_hash, h, 53);
			if (lvl + i <= 30 * GetUnitAbilityLevel(damager, 'A0EN') - 5) {
				lvl[lvl + i] = lvl + i;
				SetHeroAgi(damager, GetHeroAgi(damager, false) + i, true);
				ProgressBarAddPercentComplete(LoadUnitHandle(udg_hash, GetHandleId(damager), 'u'), (i * 100. / (30 * GetUnitAbilityLevel(damager, 'A0EN') - 5)));
				SaveInteger(udg_hash, h, 52, lvl);
			else
				SetHeroAgi(damager, GetHeroAgi(damager, false) - lvl + (30 * GetUnitAbilityLevel(damager, 'A0EN')) - 5, true);
				lvl[30 * GetUnitAbilityLevel(damager, 'A0EN') - 5] = 30 * GetUnitAbilityLevel(damager, 'A0EN') - 5;
				SaveInteger(udg_hash, h, 52, lvl);
			}
		}
		if (GetUnitTypeId(damaged) == 'n00U' && IsUnitType(damager, UNIT_TYPE_MAGIC_IMMUNE) == false && GetRandomInt(1, 4) == 1) {
			dammi[CreateUnit(pd, 'h00U', xd, yd, .0)] = CreateUnit(pd, 'h00U', xd, yd, .0);
			UnitApplyTimedLife(dammi, 'BTLF', 2.);
			UnitAddAbility(dammi, 'A0E0');
			IssueTargetOrderById(dammi, $D007F, damager);
		}
		if (GetUnitAbilityLevel(damager, 'A08V') > 0 && IsUnitType(damaged, UNIT_TYPE_MAGIC_IMMUNE) == false && GetRandomInt(1, 'd') <= 6) {
			dammi[CreateUnit(pr, 'h00U', xr, yr, .0)] = CreateUnit(pr, 'h00U', xr, yr, .0);
			UnitApplyTimedLife(dammi, 'BTLF', 2.);
			UnitAddAbility(dammi, 'A08Z');
			IssueTargetOrderById(dammi, $D00CB, damaged);
			dammi[null] = null;
		}
		if (GetUnitAbilityLevel(damager, 'A0E4') > 0 && IsUnitType(damaged, UNIT_TYPE_MAGIC_IMMUNE) == false && GetRandomInt(1, 'd') <= $F) {
			dammi[CreateUnit(pr, 'h00U', xr, yr, .0)] = CreateUnit(pr, 'h00U', xr, yr, .0);
			UnitApplyTimedLife(dammi, 'BTLF', 2.);
			UnitAddAbility(dammi, 'A092');
			IssueTargetOrderById(dammi, $D006B, damaged);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathCoil\\DeathCoilSpecialArt.mdl", damaged, "chest"));
		}
		if (GetUnitAbilityLevel(damaged, 'A0E5') > 0 && GetRandomInt(1, 5) == 1 && 1 == 2) {
			t[CreateTimer()] = CreateTimer();
			h[GetHandleId(t)] = GetHandleId(t);
			SaveUnitHandle(udg_hash, h, 1, damaged);
			SaveInteger(udg_hash, h, 2, 0);
			if (IsTerrainPathable(xd + 50. * Cos((180. + bj_RADTODEG * Atan2(yr - yd, xr - xd)) * bj_DEGTORAD), yd + 50. * Sin((180. + bj_RADTODEG * Atan2(yr - yd, xr - xd)) * bj_DEGTORAD), PATHING_TYPE_WALKABILITY) == false) {
				SetUnitX(damaged, xd + 50. * Cos((180. + bj_RADTODEG * Atan2(yr - yd, xr - xd)) * bj_DEGTORAD));
				SetUnitY(damaged, yd + 50. * Sin((180. + bj_RADTODEG * Atan2(yr - yd, xr - xd)) * bj_DEGTORAD));
			}
			DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl", xd + 50. * Cos((180. + bj_RADTODEG * Atan2(yr - yd, xr - xd)) * bj_DEGTORAD), yd + 50. * Sin((180. + bj_RADTODEG * Atan2(yr - yd, xr - xd)) * bj_DEGTORAD)));
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\CarrionSwarm\\CarrionSwarmDamage.mdl", xd + 50. * Cos((180. + bj_RADTODEG * Atan2(yr - yd, xr - xd)) * bj_DEGTORAD), yd + 50. * Sin((180. + bj_RADTODEG * Atan2(yr - yd, xr - xd)) * bj_DEGTORAD)));
			SetUnitFacing(damaged, bj_RADTODEG * Atan2(yr - yd, xr - xd));
			PauseUnit(damaged, true);
			SetUnitTimeScale(damaged, 10.);
			SetUnitAnimationByIndex(damaged, 2);
			txt[CreateTextTag()] = CreateTextTag();
			SetTextTagText(txt, "|cFFFF0000miss!|r", .0275);
			SetTextTagPos(txt, xd, yd, .0);
			SetTextTagColor(txt, 0, 0, 0, $C8);
			SetTextTagVelocity(txt, .0221875 * Cos(45. + GetRandomReal(.0, 90.) * bj_DEGTORAD), .0221875 * Sin(45. + GetRandomReal(.0, 90.) * bj_DEGTORAD));
			SetTextTagLifespan(txt, 3.);
			SetTextTagFadepoint(txt, .0);
			SetTextTagPermanent(txt, false);
			TimerStart(t, .04, false, Trig_Trolls_Evasion_Salto_Actions);
			t[null] = null;
			t[CreateTimer()] = CreateTimer();
			h[GetHandleId(t)] = GetHandleId(t);
			SaveUnitHandle(udg_hash, h, 1, damaged);
			SaveReal(udg_hash, h, 2, damage);
			if (GetUnitState(damaged, UNIT_STATE_LIFE) < damage) {
				SetUnitInvulnerable(damaged, true);
			else
				TimerStart(t, .0, false, Trig_Hil_Unit_Actions);
			}
			t[null] = null;
		}
		if (GetUnitAbilityLevel(damager, 'A09E') > 0 && GetRandomInt(1, 2) == 1) {
			h[GetHandleId(damager)] = GetHandleId(damager);
			i[0] = 0;
			i[LoadInteger(udg_hash, h, 54)] = LoadInteger(udg_hash, h, 54);
			if (i <= 0) {
				i[1] = 1;
				ef[AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Bloodlust\\BloodlustTarget.mdl", damager, "hand, left")] = AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Bloodlust\\BloodlustTarget.mdl", damager, "hand, left");
				SaveEffectHandle(udg_hash, h, 55, ef);
				ef[null] = null;
				ef[AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Bloodlust\\BloodlustTarget.mdl", damager, "hand, right")] = AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Bloodlust\\BloodlustTarget.mdl", damager, "hand, right");
				SaveEffectHandle(udg_hash, h, 56, ef);
				ef[null] = null;
			}
			if (i <= 8 && i > 0) {
				i[i + 1] = i + 1;
				SaveInteger(udg_hash, h, 54, i);
				SetAttackAbilityLevel(damager, 6);
			}
			if (i == 8) {
				i[i + $A] = i + $A;
				SaveInteger(udg_hash, h, 54, i);
				ef[AddSpecialEffectTarget("Abilities\\Spells\\Orc\\TrollBerserk\\HeadhunterWEAPONSLeft.mdl", damager, "overhead")] = AddSpecialEffectTarget("Abilities\\Spells\\Orc\\TrollBerserk\\HeadhunterWEAPONSLeft.mdl", damager, "overhead");
				SaveEffectHandle(udg_hash, h, 57, ef);
				IssueImmediateOrderById(damager, $D0084);
				ef[null] = null;
			}
		}
		if (GetUnitAbilityLevel(damaged, 'A0ET') > 0 && LoadBoolean(udg_hash, GetHandleId(damaged), 1)) {
			lvl[GetUnitAbilityLevel(damaged, 'A0EU')] = GetUnitAbilityLevel(damaged, 'A0EU');
			r1[.03 * GetUnitAbilityLevel(damaged, 'A0ET') + .05] = .03 * GetUnitAbilityLevel(damaged, 'A0ET') + .05;
			r2[GetUnitFacing(damaged)] = GetUnitFacing(damaged);
			angle[(Atan2(GetUnitY(damaged) - GetUnitY(damager), GetUnitX(damaged) - GetUnitX(damager)) * bj_RADTODEG) + 360.] = (Atan2(GetUnitY(damaged) - GetUnitY(damager), GetUnitX(damaged) - GetUnitX(damager)) * bj_RADTODEG) + 360.;
			if ((angle <= (r2 + 240.) && angle >= (r2 + 120.))) {
				r1[r1 * 2] = r1 * 2;
				if (lvl > 0 && GetRandomReal(0, 'd') <= ($B + lvl * 4)) {
					r1[1.] = 1.;
					r3[damage + ((.05 + (.05 * lvl)) * GetHeroStr(damaged, true))] = damage + ((.05 + (.05 * lvl)) * GetHeroStr(damaged, true));
					CreateTexttag("" + SubString(R2S(r3), 0, StringLength(R2S(r3)) - 2), .023, 'x', xd, yd, .0, .0, .035, 3.5);
					GroupAddUnit(gdamagefromdamaged, damager);
					SaveReal(udg_hash, hdr, $A0, LoadReal(udg_hash, hdr, $A0) + r3);
					dammi[CreateUnit(pd, 'h00U', xd, yd, .0)] = CreateUnit(pd, 'h00U', xd, yd, .0);
					UnitApplyTimedLife(dammi, 'BTLF', 2.);
					UnitAddAbility(dammi, 'A0EV');
					IssueTargetOrderById(dammi, $D007F, damager);
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Defend\\DefendCaster.mdl", damaged, "origin"));
				}
			}
			SetUnitState(damaged, UNIT_STATE_LIFE, GetUnitState(damaged, UNIT_STATE_LIFE) + damage * r1);
		}
		if (GetUnitAbilityLevel(damager, 'A0F3') > 0) {
			u[udg_herounit[GetPlayerId(pr) + 1]] = udg_herounit[GetPlayerId(pr) + 1];
			if (LoadInteger(udg_hash, GetHandleId(u), 60) < GetUnitAbilityLevel(damager, 'A0F3') + 1 && GetUnitAbilityLevel(damager, 'Aloc') <= 0 && ((GetRandomInt(1, 'd') < 3 + (2 * GetUnitAbilityLevel(damager, 'A0F3')) && IsUnitIllusion(damager) == false) || ((GetRandomInt(1, 'd') < 2 + GetUnitAbilityLevel(damager, 'A0F3') && IsUnitIllusion(damager))))) {
				dammi[CreateUnit(pr, 'h00U', xr, yr, .0)] = CreateUnit(pr, 'h00U', xr, yr, .0);
				UnitApplyTimedLife(dammi, 'BTLF', 1.);
				UnitAddAbility(dammi, 'A0AY');
				SetUnitAbilityLevel(dammi, 'A0AY', 1 + GetUnitAbilityLevel(u, 'A0F2'));
				IssueTargetOrderById(dammi, $D0132, damager);
				SaveBoolean(udg_hash, GetHandleId(dammi), 3, false);
			}
		}
		if (GetUnitAbilityLevel(damager, 'B01P') >= 1) {
			UnitRemoveAbility(damager, 'B01P');
			UnitRemoveAbility(damager, 'A0GY');
		}
		if (GetUnitAbilityLevel(damaged, 'B01P') >= 1 && GetUnitAbilityLevel(damaged, 'A0GY') < 1) {
			UnitAddAbility(damaged, 'A0GY');
		}
		if (GetUnitAbilityLevel(damaged, 'A09Y') == 1) {
			PauseUnit(damaged, false);
			UnitRemoveAbility(damaged, 'A09Y');
			dammi[CreateUnit(GetOwningPlayer(damaged), 'h013', xr, yr, 0)] = CreateUnit(GetOwningPlayer(damaged), 'h013', xr, yr, 0);
			UnitAddAbility(dammi, 'A0HF');
			SetUnitAbilityLevel(dammi, 'A0HF', GetUnitAbilityLevel(damaged, 'A0GZ'));
			IssueTargetOrderById(dammi, $D02B6, damager);
			UnitApplyTimedLife(dammi, 'BTLF', .5);
		}
		if (GetUnitAbilityLevel(damager, 'B03I') > 0 && GetRandomInt(1, 'd') <= 20) {
			dammi[CreateUnit(GetOwningPlayer(damager), 'h013', xr, yr, 0)] = CreateUnit(GetOwningPlayer(damager), 'h013', xr, yr, 0);
			UnitAddAbility(dammi, 'A0HK');
			IssueTargetOrderById(dammi, $D0062, damaged);
			UnitApplyTimedLife(dammi, 'BTLF', 1.5);
			UnitRemoveAbility(damager, 'B03I');
		}
		if (GetUnitAbilityLevel(damager, 'A0FF') > 0 && GetRandomInt(1, 'd') <= (8 + 2 * GetUnitAbilityLevel(damager, 'A0FF')) && IsUnitIllusion(damager) == false && LoadBoolean(udg_hash, hdr, 61) == false && GetUnitState(damaged, UNIT_STATE_LIFE) > .405) {
			t[CreateTimer()] = CreateTimer();
			h[GetHandleId(t)] = GetHandleId(t);
			SaveUnitHandle(udg_hash, h, 1, damager);
			SaveUnitHandle(udg_hash, h, 2, damaged);
			SaveReal(udg_hash, h, 3, damage);
			SaveInteger(udg_hash, h, 4, 0);
			SaveReal(udg_hash, h, 5, bj_RADTODEG * Atan2(yr - yd, xr - xd));
			SaveBoolean(udg_hash, hdr, 61, true);
			SaveInteger(udg_hash, h, $A, GetUnitAbilityLevel(damager, 'A0FF'));
			UnitPeriodicPostionMove(damager, .02, 1.2);
			SetUnitInvulnerable(damager, true);
			SetUnitPathing(damager, false);
			SetUnitAnimationByIndex(damager, 2);
			SetUnitTimeScale(damager, 4.);
			SetUnitTurnSpeed(damager, 3.);
			if (GetRandomInt(1, 2) == 1) {
				SetUnitAnimationByIndex(damager, 8);
			else
				SetUnitAnimationByIndex(damager, 2);
			}
			ef[AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl", damager, "weapon")] = AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl", damager, "weapon");
			SaveEffectHandle(udg_hash, h, 6, ef);
			ef[null] = null;
			ef[AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratMissile\\ZigguratMissile.mdl", damager, "weapon")] = AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratMissile\\ZigguratMissile.mdl", damager, "weapon");
			SaveEffectHandle(udg_hash, h, 7, ef);
			ef[null] = null;
			TimerStart(t, .2, true, Trig_Triple_Strike_Move_And_Attack_Actions);
			t[null] = null;
		}
		if (GetUnitAbilityLevel(damager, 'A0GH') > 0 && GetRandomInt(1, 'd') <= 40 && IsUnitIllusion(damager) == false) {
			angle[bj_RADTODEG * Atan2(yd - yr, xd - xr)] = bj_RADTODEG * Atan2(yd - yr, xd - xr);
			r1[200.] = 200.;
			r2[100.] = 100.;
			r3[xr + 50. * Cos(angle * bj_DEGTORAD)] = xr + 50. * Cos(angle * bj_DEGTORAD);
			r4[yr + 50. * Sin(angle * bj_DEGTORAD)] = yr + 50. * Sin(angle * bj_DEGTORAD);
			g[CreateGroup()] = CreateGroup();
			dammi[CreateUnit(pr, 'h01P', r3, r4, angle)] = CreateUnit(pr, 'h01P', r3, r4, angle);
			SetUnitVertexColor(dammi, $DC, $DC, $DC, 'd');
			SetUnitAnimation(dammi, "stand");
			SetUnitTimeScale(dammi, 1.5);
			SetUnitAnimationByIndex(dammi, 1);
			t[CreateTimer()] = CreateTimer();
			h[GetHandleId(t)] = GetHandleId(t);
			SaveUnitHandle(udg_hash, h, 1, damager);
			SaveReal(udg_hash, h, 2, r1);
			SaveReal(udg_hash, h, 3, r2);
			SaveInteger(udg_hash, h, 4, 66);
			SaveUnitHandle(udg_hash, h, 5, dammi);
			SaveGroupHandle(udg_hash, h, 6, g);
			ef[AddSpecialEffectTarget("Abilities\\Spells\\Human\\Feedback\\ArcaneTowerAttack.mdl", dammi, "chest")] = AddSpecialEffectTarget("Abilities\\Spells\\Human\\Feedback\\ArcaneTowerAttack.mdl", dammi, "chest");
			SaveEffectHandle(udg_hash, h, 7, ef);
			ef[null] = null;
			MoveUnit(dammi, 2., 400., .0, angle, .0, true);
			TimerStart(t, .03, true, Trig_Spirit_of_Absorption_Actions);
			t[null] = null;
			dammi[null] = null;
		}
		if (GetUnitAbilityLevel(damager, 'A09O') > 0 && IsUnitType(damaged, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitState(damaged, UNIT_STATE_MAX_MANA) > .0) {
			GroupAddUnit(gdamagefromdamager, damaged);
			SaveReal(udg_hash, hdd, $9E, LoadReal(udg_hash, hdd, $9E) + 15.);
			SetUnitState(damaged, UNIT_STATE_MANA, GetUnitState(damaged, UNIT_STATE_MANA) - 15.);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Feedback\\ArcaneTowerAttack.mdl", damaged, "origin"));
		}
		r1[LoadReal(udg_hash, hdr, 68)] = LoadReal(udg_hash, hdr, 68);
		if (GetUnitAbilityLevel(damager, 'A0H2') > 0 && r1 > 0) {
			r2[r1 - damage] = r1 - damage;
			r3[GetUnitState(damaged, UNIT_STATE_LIFE)] = GetUnitState(damaged, UNIT_STATE_LIFE);
			SaveReal(udg_hash, hdr, 68, r2);
			if (r2 < .0) {
				r2[damage] = damage;
				UnitRemoveAbility(damager, 'A0H2');
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DevourMagic\\DevourMagicBirthMissile.mdl", damager, "hand,right"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DevourMagic\\DevourMagicBirthMissile.mdl", damager, "hand,left"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DevourMagic\\DevourMagicBirthMissile.mdl", damager, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DevourMagic\\DevourMagicBirthMissile.mdl", damager, "weapon"));
			}
			t[CreateTimer()] = CreateTimer();
			h[GetHandleId(t)] = GetHandleId(t);
			SaveUnitHandle(udg_hash, h, 1, damaged);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayDamage.mdl", damaged, "chest"));
			if (damage >= r3) {
				SetUnitInvulnerable(damaged, true);
				TimerStart(t, .0, false, Trig_Make_Unit_UnInvulnerable_Actions);
			else
				SaveReal(udg_hash, h, 2, damage);
				TimerStart(t, .0, false, Trig_Hil_Unit_Actions);
			}
			t[null] = null;
		}
		if (GetUnitAbilityLevel(damaged, 'A0HN') > 0 && GetRandomInt(1, 'd') <= 40) {
			r1[damage / 2] = damage / 2;
			r2[GetUnitState(damaged, UNIT_STATE_LIFE)] = GetUnitState(damaged, UNIT_STATE_LIFE);
			r3[SquareRoot((xr - xd) * (xr - xd) + (yr - yd) * (yr - yd))] = SquareRoot((xr - xd) * (xr - xd) + (yr - yd) * (yr - yd));
			if (damage >= r2 && r1 < r2) {
				t[CreateTimer()] = CreateTimer();
				h[GetHandleId(t)] = GetHandleId(t);
				SaveUnitHandle(udg_hash, h, 1, damaged);
				SetUnitInvulnerable(damaged, true);
				TimerStart(t, .0, false, Trig_Make_Unit_UnInvulnerable_Actions);
				GroupAddUnit(gdamagefromdamager, damaged);
				SaveReal(udg_hash, hdd, $9E, LoadReal(udg_hash, hdd, $9E) + r1);
			}
			if (damage < r2) {
				t[CreateTimer()] = CreateTimer();
				h[GetHandleId(t)] = GetHandleId(t);
				SaveUnitHandle(udg_hash, h, 1, damaged);
				SaveReal(udg_hash, h, 2, r1);
				TimerStart(t, .0, false, Trig_Hil_Unit_Actions);
			}
			t[null] = null;
			t[CreateTimer()] = CreateTimer();
			h[GetHandleId(t)] = GetHandleId(t);
			if (r3 <= 225.) {
				GroupAddUnit(gdamagefromdamaged, damager);
				SaveReal(udg_hash, hdr, $A0, LoadReal(udg_hash, hdr, $A0) + 50.);
				SaveUnitHandle(udg_hash, h, 1, damager);
				SetAttackAbilityLevel(damager, -$E);
				TimerStart(t, 10., false, Trig_Pancir_Iachera_Actions);
				StunUnitTimed(damager, 1.45);
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SearingArrow\\SearingArrowMissile.mdl", damager, "weapon"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SearingArrow\\SearingArrowMissile.mdl", damager, "hand,right"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SearingArrow\\SearingArrowMissile.mdl", damager, "hand,left"));
			else
				angle[bj_RADTODEG * Atan2(yr - yd, xr - xd)] = bj_RADTODEG * Atan2(yr - yd, xr - xd);
				dammi[CreateUnit(pd, 'h00U', GetUnitX(damaged), GetUnitY(damaged), angle)] = CreateUnit(pd, 'h00U', GetUnitX(damaged), GetUnitY(damaged), angle);
				SetUnitFlyHeight(dammi, 50., .0);
				SetUnitFacing(dammi, angle);
				ef[AddSpecialEffectTarget("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl", dammi, "chest")] = AddSpecialEffectTarget("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl", dammi, "chest");
				SaveUnitHandle(udg_hash, h, 1, damaged);
				SaveUnitHandle(udg_hash, h, 2, dammi);
				SaveInteger(udg_hash, h, 3, 50);
				SaveReal(udg_hash, h, 4, angle);
				SaveReal(udg_hash, h, 5, 250.);
				SaveReal(udg_hash, h, 6, 1.45);
				SaveEffectHandle(udg_hash, h, 7, ef);
				TimerStart(t, .03, true, Trig_Pancir_Iachera_Periodic_Actions);
				ef[null] = null;
				dammi[null] = null;
			}
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl", damager, "chest"));
			t[null] = null;
		}
		if (GetUnitAbilityLevel(damager, 'A00K') > 0 && IsUnitType(damaged, UNIT_TYPE_MAGIC_IMMUNE) == false) {
			dammi[CreateUnit(pr, 'h00U', xr, yr, .0)] = CreateUnit(pr, 'h00U', xr, yr, .0);
			UnitApplyTimedLife(dammi, 'BTLF', 2.);
			UnitAddAbility(dammi, 'A01T');
			IssueTargetOrderById(dammi, $D0102, damaged);
			dammi[null] = null;
		}
		if (GetUnitAbilityLevel(damager, 'A0AW') > 0 && IsUnitType(damaged, UNIT_TYPE_MAGIC_IMMUNE) == false && ($B + (3 * GetUnitAbilityLevel(damager, 'A0AW'))) >= GetRandomInt(1, 'd')) {
			GroupAddUnit(gdamagefromdamager, damaged);
			SaveReal(udg_hash, hdd, $9E, LoadReal(udg_hash, hdd, $9E) + (15. + ($A * GetUnitAbilityLevel(damager, 'A0AW'))));
			StunUnitTimed(damaged, .4 + (.2 * GetUnitAbilityLevel(damager, 'A0AW')));
		}
		if (GetUnitAbilityLevel(damager, 'A0HV') > 0 && GetRandomInt(1, 'd') <= 18) {
			r1[(damage * .7) + 20.] = (damage * .7) + 20.;
			GroupAddUnit(gdamagefromdamager, damaged);
			SaveReal(udg_hash, hdd, $9E, LoadReal(udg_hash, hdd, $9E) + r1);
			CreateTexttag(udg_ColorString[1] + I2S(R2I(r1 + damage)) + "!|r", .025, $FF, xd - 18., yd + 15., .0, .0, .035, 3.5);
		}
		if (GetUnitAbilityLevel(damager, 'A0K0') > 0 && GetRandomInt(1, 'd') <= $F) {
			r1[(damage * .7) + 10.] = (damage * .7) + 10.;
			UnitDamageTarget(damager, damaged, r1, false, false, ATTACK_TYPE_MELEE, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			CreateTexttag(udg_ColorString[1] + I2S(R2I(r1 + damage)) + "!|r", .025, $FF, xd - 18., yd + 15., .0, .0, .035, 3.5);
		}
		r1[GetUnitState(damaged, UNIT_STATE_LIFE)] = GetUnitState(damaged, UNIT_STATE_LIFE);
		r2[GetUnitState(damaged, UNIT_STATE_MAX_LIFE)] = GetUnitState(damaged, UNIT_STATE_MAX_LIFE);
		if ((GetUnitAbilityLevel(damager, 'A0I1') > 0 && (r2 * .3) > r1) || (GetUnitAbilityLevel(damager, 'A0I3') > 0 && (r2 * .4) > r1) || (GetUnitAbilityLevel(damager, 'A0I2') > 0 && (r2 * .5) > r1)) {
			if ((GetUnitAbilityLevel(damager, 'A0I1')) > 0) {
				r3[18.] = 18.;
			}
			if ((GetUnitAbilityLevel(damager, 'A0I3')) > 0) {
				r3[27.] = 27.;
			}
			if ((GetUnitAbilityLevel(damager, 'A0I2')) > 0) {
				r3[36.] = 36.;
			}
			DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl", damaged, "chest"));
			GroupAddUnit(gdamagefromdamager, damaged);
			SaveReal(udg_hash, hdd, $9E, LoadReal(udg_hash, hdd, $9E) + r3);
		}
		if ((GetUnitAbilityLevel(damager, 'A0I5') > 0 && GetRandomInt(1, 'd') <= 20) || (GetUnitAbilityLevel(damager, 'A0I4') > 0 && GetRandomInt(1, 'd') <= 25) || (GetUnitAbilityLevel(damager, 'A0I6') > 0 && GetRandomInt(1, 'd') <= 30)) {
			if ((GetUnitAbilityLevel(damager, 'A0I6')) > 0) {
				lvl[3] = 3;
			}
			if ((GetUnitAbilityLevel(damager, 'A0I4')) > 0) {
				lvl[2] = 2;
			}
			if ((GetUnitAbilityLevel(damager, 'A0I5')) > 0) {
				lvl[1] = 1;
			}
			dammi[CreateUnit(pr, 'h00U', xd, yd, .0)] = CreateUnit(pr, 'h00U', xd, yd, .0);
			UnitApplyTimedLife(dammi, 'BTLF', 2.);
			UnitAddAbility(dammi, 'A0HX');
			SetUnitAbilityLevel(dammi, 'A0HX', lvl);
			IssueTargetOrderById(dammi, $D006B, damaged);
			dammi[null] = null;
			DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl", damaged, "origin"));
			DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPriest.mdl", damaged, "origin"));
		}
		if ((GetUnitAbilityLevel(damager, 'A0IA') > 0 && GetRandomInt(1, 'd') <= 22)) {
			GroupAddUnit(gdamagefromdamager, damaged);
			SaveReal(udg_hash, hdd, $9E, LoadReal(udg_hash, hdd, $9E) + (25. + (.3 * GetHeroStr(damager, true))));
			StunUnitTimed(damaged, 1.25);
		}
		if (GetUnitAbilityLevel(damager, 'A0J2') >= 1) {
			GroupAddUnit(gdamagefromdamager, damaged);
			SaveReal(udg_hash, hdd, $9E, LoadReal(udg_hash, hdd, $9E) + (.5 * GetHeroStr(damager, true)));
			DestroyEffect(AddSpecialEffectTarget("Effects\\AxeEffect.mdl", damaged, "chest"));
			DestroyEffect(AddSpecialEffectTarget("Effects\\AxeEffect.mdl", damaged, "origin"));
			DestroyEffect(AddSpecialEffect("Effects\\AxeEffect.mdl", xd, yd));
		}
		if (GetUnitAbilityLevel(damager, 'A0JH') >= 1) {
			dammi[CreateUnit(pr, 'h00U', xr, yr, .0)] = CreateUnit(pr, 'h00U', xr, yr, .0);
			UnitApplyTimedLife(dammi, 'BTLF', 1.);
			UnitAddAbility(dammi, 'A0J3');
			IssueTargetOrderById(dammi, $D006B, damaged);
			dammi[null] = null;
		}
		if (GetUnitAbilityLevel(damager, 'A0JI') >= 1) {
			t[LoadTimerHandle(udg_hash, hdr, 92)] = LoadTimerHandle(udg_hash, hdr, 92);
			if (t != null) {
				i[LoadInteger(udg_hash, GetHandleId(t), 1)] = LoadInteger(udg_hash, GetHandleId(t), 1);
				if (i <= 58) {
					i[i + 2] = i + 2;
					SetAttackSpeedAbilityLevel(damager, 2);
					SaveInteger(udg_hash, GetHandleId(t), 1, i);
				else
					ef[LoadEffectHandle(udg_hash, GetHandleId(t), 3)] = LoadEffectHandle(udg_hash, GetHandleId(t), 3);
					if (ef == null) {
						ef[AddSpecialEffectTarget("Abilities\\Spells\\Other\\Tornado\\Tornado_Target.mdl", damager, "weapon")] = AddSpecialEffectTarget("Abilities\\Spells\\Other\\Tornado\\Tornado_Target.mdl", damager, "weapon");
						SaveEffectHandle(udg_hash, GetHandleId(t), 3, ef);
						ef[null] = null;
						ef[AddSpecialEffectTarget("Abilities\\Spells\\Other\\Tornado\\Tornado_Target.mdl", damager, "chest")] = AddSpecialEffectTarget("Abilities\\Spells\\Other\\Tornado\\Tornado_Target.mdl", damager, "chest");
						SaveEffectHandle(udg_hash, GetHandleId(t), 4, ef);
					}
					ef[null] = null;
				}
			else
				t[CreateTimer()] = CreateTimer();
				SaveTimerHandle(udg_hash, hdr, 92, t);
				SetAttackSpeedAbilityLevel(damager, 2);
				SaveInteger(udg_hash, GetHandleId(t), 1, 2);
				SaveUnitHandle(udg_hash, GetHandleId(t), 2, damager);
			}
			TimerStart(t, 15., false, Trig_Wind_Bow_Remove_Attack_Speed_Actions);
			t[null] = null;
		}
		if (GetUnitAbilityLevel(damager, 'A0LE') >= 1) {
			r1[.15 * damage] = .15 * damage;
			str[LoadStr(udg_hash, GetUnitTypeId(damager), 70)] = LoadStr(udg_hash, GetUnitTypeId(damager), 70);
			if (str == "str") {
				r2[GetHeroStr(damager, true) / 2] = GetHeroStr(damager, true) / 2;
			}
			if (str == "agi") {
				r2[GetHeroAgi(damager, true) / 2] = GetHeroAgi(damager, true) / 2;
			}
			if (str == "int") {
				r2[GetHeroInt(damager, true) / 2] = GetHeroInt(damager, true) / 2;
			}
			r3[150. + r2] = 150. + r2;
			g[CreateGroup()] = CreateGroup();
			GroupEnumUnitsInRange(g, xd, yd, r3, null);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Cleave\\CleaveDamageTarget.mdl", damaged, "chest"));
			while (true) {
				Picked[FirstOfGroup(g)] = FirstOfGroup(g);
				if (Picked == null) break;
				if (IsUnitEnemy(Picked, pr) && Picked != damaged && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
					GroupAddUnit(gdamagefromdamager, Picked);
					SaveReal(udg_hash, GetHandleId(Picked), $9F, LoadReal(udg_hash, GetHandleId(Picked), $9F) + r1);
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Cleave\\CleaveDamageTarget.mdl", Picked, "chest"));
				}
				GroupRemoveUnit(g, Picked);
			}
			GroupClear(g);
			DestroyGroup(g);
			g[null] = null;
		}
		if (GetUnitAbilityLevel(damager, 'A0LI') >= 1) {
			r1[.25 * damage] = .25 * damage;
			str[LoadStr(udg_hash, GetUnitTypeId(damager), 70)] = LoadStr(udg_hash, GetUnitTypeId(damager), 70);
			if (str == "str") {
				r2[GetHeroStr(damager, true) / 1.75] = GetHeroStr(damager, true) / 1.75;
			}
			if (str == "agi") {
				r2[GetHeroAgi(damager, true) / 1.75] = GetHeroAgi(damager, true) / 1.75;
			}
			if (str == "int") {
				r2[GetHeroInt(damager, true) / 1.75] = GetHeroInt(damager, true) / 1.75;
			}
			r3[150. + r2] = 150. + r2;
			g[CreateGroup()] = CreateGroup();
			GroupEnumUnitsInRange(g, xd, yd, r3, null);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Cleave\\CleaveDamageTarget.mdl", damaged, "chest"));
			while (true) {
				Picked[FirstOfGroup(g)] = FirstOfGroup(g);
				if (Picked == null) break;
				if (IsUnitEnemy(Picked, pr) && Picked != damaged && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
					GroupAddUnit(gdamagefromdamager, Picked);
					SaveReal(udg_hash, GetHandleId(Picked), $9F, LoadReal(udg_hash, GetHandleId(Picked), $9F) + r1);
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Cleave\\CleaveDamageTarget.mdl", Picked, "chest"));
				}
				GroupRemoveUnit(g, Picked);
			}
			GroupClear(g);
			DestroyGroup(g);
			g[null] = null;
		}
		if (GetUnitAbilityLevel(damager, 'A0LJ') >= 1 && GetRandomInt(1, 'd') <= 30) {
			r1[.5 * GetHeroStr(damager, true)] = .5 * GetHeroStr(damager, true);
			g[CreateGroup()] = CreateGroup();
			GroupEnumUnitsInRange(g, xd, yd, 150., null);
			while (true) {
				Picked[FirstOfGroup(g)] = FirstOfGroup(g);
				if (IsUnitEnemy(Picked, pr) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
					GroupAddUnit(gdamagefromdamager, Picked);
					SaveReal(udg_hash, GetHandleId(Picked), $9E, LoadReal(udg_hash, GetHandleId(Picked), $9E) + r1);
					DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGhoul.mdl", Picked, "origin"));
					StunUnitTimed(Picked, .75);
				}
				GroupRemoveUnit(g, Picked);
			}
			GroupClear(g);
			DestroyGroup(g);
			g[null] = null;
		}
		if ((GetUnitAbilityLevel(damager, 'A0LP') > 0 && GetRandomInt(1, 'd') <= 25)) {
			if (GetUnitState(damaged, UNIT_STATE_LIFE) < GetUnitState(damaged, UNIT_STATE_MAX_LIFE) * .5) {
				r1[(damage * 3.4) + 80.] = (damage * 3.4) + 80.;
				CreateTexttag(udg_ColorString[1] + I2S(R2I(r1 + damage)) + "!|r", .03, $FF, xd - 18., yd + 15., .0, .0, .035, 3.5);
			else
				r1[(damage * 1.2) + 40.] = (damage * 1.2) + 40.;
				CreateTexttag(udg_ColorString[1] + I2S(R2I(r1 + damage)) + "!|r", .025, $FF, xd - 18., yd + 15., .0, .0, .035, 3.5);
			}
			GroupAddUnit(gdamagefromdamager, damaged);
			SaveReal(udg_hash, hdd, $9F, LoadReal(udg_hash, hdd, $9F) + r1);
			dammi[CreateUnit(pr, 'h00U', xd, yd, .0)] = CreateUnit(pr, 'h00U', xd, yd, .0);
			UnitApplyTimedLife(dammi, 'BTLF', 2.);
			UnitAddAbility(dammi, 'A0LQ');
			IssueTargetOrderById(dammi, $D006B, damaged);
			dammi[null] = null;
			DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodSorceress.mdl", damaged, "origin"));
			DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Other\\HumanBloodCinematicEffect\\HumanBloodCinematicEffect.mdl", damaged, "origin"));
			DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl", damaged, "origin"));
			DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPeasant.mdl", damaged, "origin"));
		}
		if (LoadBoolean(udg_hash, hdr, 99)) {
			r1[(GetUnitState(damager, UNIT_STATE_LIFE) - GetUnitState(damaged, UNIT_STATE_LIFE)) / 10.] = (GetUnitState(damager, UNIT_STATE_LIFE) - GetUnitState(damaged, UNIT_STATE_LIFE)) / 10.;
			if (r1 < 0) {
				r1[-r1] = -r1;
			}
			r1[r1 + R2I(GetHeroStr(damager, true) * .75)] = r1 + R2I(GetHeroStr(damager, true) * .75);
			if (r1 > 150.) {
				r1[150.] = 150.;
			}
			GroupAddUnit(gdamagefromdamager, damaged);
			SaveReal(udg_hash, hdd, $9E, LoadReal(udg_hash, hdd, $9E) + r1);
			DestroyEffectWithWait(AddSpecialEffectTarget("Effects\\BloodBreathDamage.mdx", damaged, "origin"), .35);
			DestroyEffectWithWait(AddSpecialEffectTarget("Effects\\BloodElementalMisile.mdx", damaged, "origin"), .35);
		}
		if (GetUnitAbilityLevel(damager, 'A0M8') > 0) {
			if (LoadBoolean(udg_hash, hdr, 'q') == false) {
				r1[LoadReal(udg_hash, hdr, 'p')] = LoadReal(udg_hash, hdr, 'p');
				r2[360. + (GetUnitAbilityLevel(damager, 'A0M8') * 40.)] = 360. + (GetUnitAbilityLevel(damager, 'A0M8') * 40.);
				r1[r1 + damage] = r1 + damage;
				ProgressBarAddPercentComplete(LoadUnitHandle(udg_hash, GetHandleId(damager), 'v'), (damage * 100. / r2));
				if (r1 >= r2) {
					SaveBoolean(udg_hash, hdr, 'q', true);
					SaveReal(udg_hash, hdr, 'p', .0);
					ef[AddSpecialEffectTarget("Abilities\\Spells\\Human\\slow\\slowtarget.mdl", damager, "weapon")] = AddSpecialEffectTarget("Abilities\\Spells\\Human\\slow\\slowtarget.mdl", damager, "weapon");
					SaveEffectHandle(udg_hash, hdr, 'r', ef);
					ef[null] = null;
					ef[AddSpecialEffectTarget("Effects\\LifeHigh.mdx", damager, "weapon")] = AddSpecialEffectTarget("Effects\\LifeHigh.mdx", damager, "weapon");
					SaveEffectHandle(udg_hash, hdr, 's', ef);
					ef[null] = null;
				else
					SaveReal(udg_hash, hdr, 'p', r1);
				}
			else
				RemoveUnit(LoadUnitHandle(udg_hash, GetHandleId(damager), 'v'));
				AddProgressBar(damager, 235. + (3. * GetUnitAbilityLevel(damager, 'A0M8')), (.9 + .05 * GetUnitAbilityLevel(damager, 'A0M8')), 1., true, false, 'v', $F8, $9A, 0);
				g[CreateGroup()] = CreateGroup();
				GroupEnumUnitsInRange(g, xd, yd, 250., null);
				lvl[GetUnitAbilityLevel(damager, 'A0M8')] = GetUnitAbilityLevel(damager, 'A0M8');
				r3[damage * (.25 + (.25 * lvl))] = damage * (.25 + (.25 * lvl));
				r1[(25 + (lvl * $A)) + (GetHeroStr(damager, true) * (.3 + (.2 * lvl)))] = (25 + (lvl * $A)) + (GetHeroStr(damager, true) * (.3 + (.2 * lvl)));
				r2[(25 + (lvl * $A)) + (GetHeroInt(damager, true) * (.3 + (.2 * lvl)))] = (25 + (lvl * $A)) + (GetHeroInt(damager, true) * (.3 + (.2 * lvl)));
				GroupAddUnit(gdamagefromdamager, damaged);
				SaveReal(udg_hash, hdd, $9E, LoadReal(udg_hash, hdd, $9E) + r3);
				dammi[CreateUnit(pr, 'h00U', xd, yd, .0)] = CreateUnit(pr, 'h00U', xd, yd, .0);
				UnitApplyTimedLife(dammi, 'BTLF', 3.);
				SetUnitScale(dammi, .5, .5, .5);
				SetUnitPathing(dammi, false);
				SetUnitX(dammi, xd);
				SetUnitY(dammi, yd);
				DestroyEffect(AddSpecialEffectTarget("Effects\\LightNova.mdl", dammi, "origin"));
				dammi[null] = null;
				DestroyEffect(AddSpecialEffectTarget("Effects\\DivineRage.mdx", damager, "weapon"));
				ef[LoadEffectHandle(udg_hash, hdr, 'r')] = LoadEffectHandle(udg_hash, hdr, 'r');
				DestroyEffect(ef);
				ef[null] = null;
				ef[LoadEffectHandle(udg_hash, hdr, 's')] = LoadEffectHandle(udg_hash, hdr, 's');
				DestroyEffect(ef);
				ef[null] = null;
				SaveBoolean(udg_hash, hdr, 'q', false);
				while (true) {
					Picked[FirstOfGroup(g)] = FirstOfGroup(g);
					if (Picked == null) break;
					if (IsUnitEnemy(Picked, pr) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
						GroupAddUnit(gdamagefromdamager, Picked);
						SaveReal(udg_hash, GetHandleId(Picked), $9E, LoadReal(udg_hash, GetHandleId(Picked), $9E) + r1);
						DestroyEffect(AddSpecialEffectTarget("Effects\\DivineRage.mdx", Picked, "origin"));
						dammi[CreateUnit(pr, 'h00U', xd, yd, .0)] = CreateUnit(pr, 'h00U', xd, yd, .0);
						UnitApplyTimedLife(dammi, 'BTLF', 1.);
						UnitAddAbility(dammi, 'A0M9');
						IssueTargetOrderById(dammi, $D006B, Picked);
						dammi[null] = null;
					}
					if (IsUnitAlly(Picked, pr) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
						SetUnitState(Picked, UNIT_STATE_LIFE, GetUnitState(Picked, UNIT_STATE_LIFE) + r2);
						DestroyEffect(AddSpecialEffectTarget("Effects\\MegaHeal.mdx", Picked, "origin"));
						DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", Picked, "origin"), 2.);
					}
					GroupRemoveUnit(g, Picked);
				}
				Picked[null] = null;
			}
			GroupClear(g);
			DestroyGroup(g);
			g[null] = null;
		}
		if (GetUnitAbilityLevel(damager, 'A0JA') >= 1 && GetRandomInt(1, 'd') <= 20 && GetUnitAbilityLevel(damaged, 'A0JC') < 1) {
			dammi[CreateUnit(pr, 'h013', xr, yr, .0)] = CreateUnit(pr, 'h013', xr, yr, .0);
			UnitApplyTimedLife(dammi, 'BTLF', 1.5);
			UnitAddAbility(dammi, 'A0JD');
			IssueTargetOrderById(dammi, $D006B, damaged);
			dammi[null] = null;
		}
		if (GetUnitAbilityLevel(damager, 'A0K3') > 0 && GetRandomInt(1, 'd') <= $F && IsUnitIllusion(damager) == false) {
			r1[(.3 * GetHeroStr(damager, true))] = (.3 * GetHeroStr(damager, true));
			g[CreateGroup()] = CreateGroup();
			GroupEnumUnitsInRange(g, xr, yr, 250., null);
			while (true) {
				Picked[FirstOfGroup(g)] = FirstOfGroup(g);
				if (Picked == null) break;
				if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, pr) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false) {
					GroupAddUnit(gdamagefromdamager, Picked);
					SaveReal(udg_hash, GetHandleId(Picked), $9E, LoadReal(udg_hash, GetHandleId(Picked), $9E) + r1);
				}
				GroupRemoveUnit(g, Picked);
			}
			GroupClear(g);
			DestroyGroup(g);
			g[null] = null;
		}
		if (GetUnitAbilityLevel(damager, 'A0K4') > 0 && GetRandomInt(1, 'd') <= 30 && IsUnitIllusion(damager) == false) {
			r1[(.6 * GetHeroStr(damager, true))] = (.6 * GetHeroStr(damager, true));
			g[CreateGroup()] = CreateGroup();
			GroupEnumUnitsInRange(g, xr, yr, 300., null);
			while (true) {
				Picked[FirstOfGroup(g)] = FirstOfGroup(g);
				if (Picked == null) break;
				if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, pr) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false) {
					GroupAddUnit(gdamagefromdamager, Picked);
					SaveReal(udg_hash, GetHandleId(Picked), $9E, LoadReal(udg_hash, GetHandleId(Picked), $9E) + r1);
				}
				GroupRemoveUnit(g, Picked);
			}
			GroupClear(g);
			DestroyGroup(g);
			g[null] = null;
			Picked[null] = null;
		}
		if (GetUnitAbilityLevel(damager, 'A0K4') > 0 && GetRandomInt(1, 'd') <= $F && IsUnitIllusion(damager) == false) {
			g[CreateGroup()] = CreateGroup();
			GroupEnumUnitsInRange(g, xr, yr, 270., null);
			while (true) {
				Picked[FirstOfGroup(g)] = FirstOfGroup(g);
				if (Picked == null) break;
				if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, pr) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false) {
					StunUnitTimed(Picked, 1.);
				}
				GroupRemoveUnit(g, Picked);
			}
			GroupClear(g);
			DestroyGroup(g);
			g[null] = null;
			Picked[null] = null;
		}
		if (GetUnitAbilityLevel(damaged, 'A0MK') > 0 && IsUnitType(damager, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitState(damaged, UNIT_STATE_LIFE) > .405 && damage > .0 && GetRandomInt(1, 'd') <= ($C + (3 * GetUnitAbilityLevel(damaged, 'A0MK')))) {
			lvl[GetUnitAbilityLevel(damaged, 'A0MK')] = GetUnitAbilityLevel(damaged, 'A0MK');
			r1[SquareRoot((xr - xd) * (xr - xd) + (yr - yd) * (yr - yd))] = SquareRoot((xr - xd) * (xr - xd) + (yr - yd) * (yr - yd));
			r2[(5. + 5. * lvl) + (r1 / (34. - 4. * lvl))] = (5. + 5. * lvl) + (r1 / (34. - 4. * lvl));
			r3[.1 + .15 * lvl] = .1 + .15 * lvl;
			t[CreateTimer()] = CreateTimer();
			h[GetHandleId(t)] = GetHandleId(t);
			SaveUnitHandle(udg_hash, h, 1, damaged);
			SaveReal(udg_hash, h, 2, (r3 * damage));
			TimerStart(t, .0, false, Trig_Hil_Unit_Actions);
			t[null] = null;
			t[CreateTimer()] = CreateTimer();
			h[GetHandleId(t)] = GetHandleId(t);
			angle[bj_RADTODEG * Atan2(yr - yd, xr - xd)] = bj_RADTODEG * Atan2(yr - yd, xr - xd);
			dammi[CreateUnit(pd, 'h00E', GetUnitX(damaged), GetUnitY(damaged), angle)] = CreateUnit(pd, 'h00E', GetUnitX(damaged), GetUnitY(damaged), angle);
			SetUnitFlyHeight(dammi, 50., .0);
			SetUnitFlyHeight(dammi, 200., r1);
			SetUnitFacing(dammi, angle);
			SetUnitScale(dammi, 1.5, 1.5, 1.5);
			ef[AddSpecialEffectTarget("Effects\\StoneSmall.mdl", dammi, "chest")] = AddSpecialEffectTarget("Effects\\StoneSmall.mdl", dammi, "chest");
			SaveUnitHandle(udg_hash, h, 1, damaged);
			SaveUnitHandle(udg_hash, h, 2, dammi);
			SaveInteger(udg_hash, h, 3, R2I(r1 / 40));
			SaveUnitHandle(udg_hash, h, 4, damager);
			SaveReal(udg_hash, h, 5, r2);
			SaveReal(udg_hash, h, 6, (r1 / 3));
			SaveEffectHandle(udg_hash, h, 7, ef);
			TimerStart(t, .03, true, Trig_Stone_Armor_Periodic_Actions);
			ef[null] = null;
			dammi[null] = null;
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", damaged, "chest"));
			t[null] = null;
		}
		if (GetUnitAbilityLevel(damager, 'A0N7') > 0 && IsUnitIllusion(damager) == false && IsUnitType(damaged, UNIT_TYPE_MAGIC_IMMUNE) == false) {
			r1[(GetUnitState(damager, UNIT_STATE_MAX_MANA) / 25.)] = (GetUnitState(damager, UNIT_STATE_MAX_MANA) / 25.);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SpiritOfVengeanceMissile\\SpiritOfVengeanceMissile.mdl", damaged, "chest"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl", damaged, "chest"));
			GroupAddUnit(gdamagefromdamager, damaged);
			SaveReal(udg_hash, hdd, $9E, LoadReal(udg_hash, hdd, $9E) + r1);
		}
		if (GetUnitAbilityLevel(damager, 'A0ND') > 0 && IsUnitIllusion(damager) == false) {
			g[CreateGroup()] = CreateGroup();
			g2[CreateGroup()] = CreateGroup();
			GroupEnumUnitsInRange(g, xd, yd, 150., null);
			GroupRemoveUnit(g, damaged);
			while (true) {
				Picked[FirstOfGroup(g)] = FirstOfGroup(g);
				if (Picked == null) break;
				if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, pr) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false) {
					GroupAddUnit(g2, Picked);
				}
				GroupRemoveUnit(g, Picked);
			}
			Picked[null] = null;
			GroupClear(g);
			DestroyGroup(g);
			g[null] = null;
			RandomUnitFromGroup(2, g2);
			g[CreateGroup()] = CreateGroup();
			GroupAddGroup(udg_GroupRandomUnitFromGroup, g);
			r1[(GetUnitState(damager, UNIT_STATE_MAX_MANA) / 20.)] = (GetUnitState(damager, UNIT_STATE_MAX_MANA) / 20.);
			while (true) {
				Picked[FirstOfGroup(g)] = FirstOfGroup(g);
				if (Picked == null) break;
				GroupAddUnit(gdamagefromdamager, Picked);
				SaveReal(udg_hash, GetHandleId(Picked), $9E, LoadReal(udg_hash, GetHandleId(Picked), $9E) + r1);
				DestroyEffect(AddSpecialEffectTarget("Effects\\FlameBomb.mdx", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIfb\\AIfbSpecialArt.mdl", Picked, "chest"));
				GroupRemoveUnit(g, Picked);
			}
			GroupClear(g);
			DestroyGroup(g);
			g[null] = null;
			GroupClear(g2);
			DestroyGroup(g2);
			g2[null] = null;
			Picked[null] = null;
		}
		if ((GetUnitAbilityLevel(damaged, 'A0NJ') > 0 || GetUnitAbilityLevel(damaged, 'A0NK') > 0 || GetUnitAbilityLevel(damaged, 'A0NL') > 0) && (GetUnitAbilityLevel(damaged, 'A0IT') <= 0 && GetUnitAbilityLevel(damaged, 'A0J8') <= 0) && IsUnitType(damager, UNIT_TYPE_MAGIC_IMMUNE) == false) {
			if (GetUnitAbilityLevel(damaged, 'A0NJ') > 0) {
				r1[damage * .1 + 10.] = damage * .1 + 10.;
			}
			if (GetUnitAbilityLevel(damaged, 'A0NK') > 0) {
				r1[damage * .15 + 12.] = damage * .15 + 12.;
			}
			if (GetUnitAbilityLevel(damaged, 'A0NL') > 0) {
				r1[damage * .2 + 14.] = damage * .2 + 14.;
			}
			GroupAddUnit(gdamagefromdamaged, damager);
			SaveReal(udg_hash, hdr, $A1, LoadReal(udg_hash, hdr, $A1) + r1);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\ThornsAura\\ThornsAuraDamage.mdl", damager, "overhead"));
		}
		if (GetUnitAbilityLevel(damager, 'A08G') > 0 && GetRandomInt(1, 'd') <= 20) {
			r1[(damage * .5)] = (damage * .5);
			GroupAddUnit(gdamagefromdamager, damaged);
			SaveReal(udg_hash, hdd, $9F, LoadReal(udg_hash, hdd, $9F) + r1 + 10.);
			CreateTexttag(udg_ColorString[1] + I2S(R2I(r1 + damage)) + "!|r", .022, $FF, xd - 18., yd + 15., .0, .0, .035, 3.5);
		}
		if (GetUnitAbilityLevel(damager, 'A0NI') > 0 && IsUnitIllusion(damager) == false && IsUnitType(damaged, UNIT_TYPE_MAGIC_IMMUNE) == false) {
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIfb\\AIfbSpecialArt.mdl", damaged, "chest"));
		}
		if (GetUnitAbilityLevel(damager, 'A0NS') > 0) {
			lvl[GetUnitAbilityLevel(damager, 'A0NS')] = GetUnitAbilityLevel(damager, 'A0NS');
			r1[damage] = damage;
			r2[.0] = .0;
			if (lvl == 1 || lvl == 2) {
				i[1] = 1;
			}
			if (lvl == 3 || lvl == 4) {
				i[2] = 2;
			}
			if (lvl == 5 || lvl == 6) {
				i[3] = 3;
			}
			if (GetFloatGameState(GAME_STATE_TIME_OF_DAY) < 6. || GetFloatGameState(GAME_STATE_TIME_OF_DAY) > 18.) {
				r2[(GetHeroAgi(damager, true) + GetHeroInt(damager, true)) / 3] = (GetHeroAgi(damager, true) + GetHeroInt(damager, true)) / 3;
				str["Effects\\BlueGlaivie.mdl"] = "Effects\\BlueGlaivie.mdl";
				r4[.6] = .6;
				b[true] = true;
			else
				str["Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl"] = "Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl";
				r4[1.] = 1.;
				b[false] = false;
			}
			t[CreateTimer()] = CreateTimer();
			h[GetHandleId(t)] = GetHandleId(t);
			SaveReal(udg_hash, h, 21, .6);
			if (LoadBoolean(udg_hash, hdr, $7F)) {
				i[i * 2] = i * 2;
			}
			if (LoadBoolean(udg_hash, hdr, $80)) {
				SaveReal(udg_hash, h, 21, .8);
			}
			SaveUnitHandle(udg_hash, h, 1, damager);
			SaveReal(udg_hash, h, 2, r1);
			SaveReal(udg_hash, h, 20, r2);
			SaveInteger(udg_hash, h, 3, i);
			SaveBoolean(udg_hash, h, 4, b);
			if (b) {
				DestroyEffect(AddSpecialEffectTarget("Effects\\SoundTrauma.mdl", damaged, "chest"));
				GroupAddUnit(gdamagefromdamager, damaged);
				SaveReal(udg_hash, hdd, $9E, LoadReal(udg_hash, hdd, $9E) + r2);
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl", damaged, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Effects\\BlueGlaivie.mdl", damaged, "chest"));
			}
			g[null] = null;
			g2[null] = null;
			g[CreateGroup()] = CreateGroup();
			g2[CreateGroup()] = CreateGroup();
			GroupEnumUnitsInRange(g, xd, yd, 350., null);
			while (true) {
				Picked[FirstOfGroup(g)] = FirstOfGroup(g);
				if (Picked == null) break;
				if (damaged != Picked && IsUnitEnemy(Picked, pr) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U' && GetUnitTypeId(Picked) != 'uplg') {
					GroupAddUnit(g2, Picked);
				}
				GroupRemoveUnit(g, Picked);
			}
			Picked[null] = null;
			RandomUnitFromGroup(1, g2);
			u[FirstOfGroup(udg_GroupRandomUnitFromGroup)] = FirstOfGroup(udg_GroupRandomUnitFromGroup);
			GroupClear(g);
			DestroyGroup(g);
			g[null] = null;
			if (u != null) {
				r1[GetUnitX(u)] = GetUnitX(u);
				r2[GetUnitY(u)] = GetUnitY(u);
				dist[SquareRoot(((r1 - xd) * (r1 - xd)) + ((r2 - yd) * (r2 - yd)))] = SquareRoot(((r1 - xd) * (r1 - xd)) + ((r2 - yd) * (r2 - yd)));
				angle[bj_RADTODEG * Atan2((r2 - yd), (r1 - xd))] = bj_RADTODEG * Atan2((r2 - yd), (r1 - xd));
				dammi[CreateUnit(pr, 'h00U', xd, yd, angle)] = CreateUnit(pr, 'h00U', xd, yd, angle);
				SetUnitScale(dammi, r4, r4, r4);
				ef[AddSpecialEffectTarget(str, dammi, "origin")] = AddSpecialEffectTarget(str, dammi, "origin");
				UnitAddAbility(dammi, 'Amrf');
				UnitRemoveAbility(dammi, 'Amrf');
				SetUnitFlyHeight(dammi, 45., .0);
				g[CreateGroup()] = CreateGroup();
				GroupAddUnit(g, damaged);
				SaveGroupHandle(udg_hash, h, 9, g);
				SaveUnitHandle(udg_hash, h, $A, dammi);
				SaveEffectHandle(udg_hash, h, $B, ef);
				SaveUnitHandle(udg_hash, h, $C, u);
				TimerStart(t, .03, true, Trig_Moon_Chackrum_Periodic_Actions);
				ef[null] = null;
				dammi[null] = null;
				t[null] = null;
				u[null] = null;
				g[null] = null;
			else
				DestroyTimer(t);
				FlushChildHashtable(udg_hash, h);
				t[null] = null;
			}
		}
		if (GetUnitAbilityLevel(damager, 'A0O0') >= 1) {
			dammi[CreateUnit(pr, 'h00U', xr, yr, .0)] = CreateUnit(pr, 'h00U', xr, yr, .0);
			UnitApplyTimedLife(dammi, 'BTLF', 1.);
			UnitAddAbility(dammi, 'A0O2');
			IssueTargetOrderById(dammi, $D006B, damaged);
			dammi[null] = null;
		}
		if (GetUnitAbilityLevel(damager, 'A0OE') >= 1 && GetRandomInt(1, 'd') <= 20) {
			StunUnitTimed(damaged, 1.);
			GroupAddUnit(gdamagefromdamager, damaged);
			SaveReal(udg_hash, hdd, $9E, LoadReal(udg_hash, hdd, $9E) + 15.);
		}
		if (GetUnitAbilityLevel(damager, 'A0O1') >= 1) {
			t[LoadTimerHandle(udg_hash, hdr, $81)] = LoadTimerHandle(udg_hash, hdr, $81);
			if (t != null) {
				i[LoadInteger(udg_hash, GetHandleId(t), 1)] = LoadInteger(udg_hash, GetHandleId(t), 1);
				if (i <= 58) {
					i[i + 2] = i + 2;
					SetAttackSpeedAbilityLevel(damager, 2);
					SetAttackAbilityLevel(damager, 1);
					SaveInteger(udg_hash, GetHandleId(t), 1, i);
					SaveInteger(udg_hash, hdr, $82, i);
				else
					ef[LoadEffectHandle(udg_hash, GetHandleId(t), 3)] = LoadEffectHandle(udg_hash, GetHandleId(t), 3);
					if (ef == null) {
						ef[AddSpecialEffectTarget("Abilities\\Spells\\Other\\Tornado\\Tornado_Target.mdl", damager, "weapon")] = AddSpecialEffectTarget("Abilities\\Spells\\Other\\Tornado\\Tornado_Target.mdl", damager, "weapon");
						SaveEffectHandle(udg_hash, GetHandleId(t), 3, ef);
						ef[null] = null;
						ef[AddSpecialEffectTarget("Effects\\Spellorb.mdl", damager, "origin")] = AddSpecialEffectTarget("Effects\\Spellorb.mdl", damager, "origin");
						SaveEffectHandle(udg_hash, GetHandleId(t), 4, ef);
					}
					ef[null] = null;
				}
			else
				t[CreateTimer()] = CreateTimer();
				SaveTimerHandle(udg_hash, hdr, $81, t);
				SetAttackSpeedAbilityLevel(damager, 2);
				SetAttackAbilityLevel(damager, 1);
				SaveInteger(udg_hash, hdr, $82, 2);
				SaveInteger(udg_hash, GetHandleId(t), 1, 2);
				SaveUnitHandle(udg_hash, GetHandleId(t), 2, damager);
			}
			TimerStart(t, 15., false, Trig_Blood_Bow_Remove_Effects_Actions);
			t[null] = null;
		}
		if (LoadBoolean(udg_hash, hdd, $84) == false && GetUnitAbilityLevel(damaged, 'A0OB') >= 1 && (GetUnitState(damaged, UNIT_STATE_LIFE) <= GetUnitState(damaged, UNIT_STATE_MAX_LIFE) * .5)) {
			SaveBoolean(udg_hash, hdd, $84, true);
			SetAttackSpeedAbilityLevel(damaged, 50);
			SetAttackAbilityLevel(damaged, $A);
			t[CreateTimer()] = CreateTimer();
			ef[AddSpecialEffectTarget("Abilities\\Spells\\Orc\\TrollBerserk\\HeadhunterWEAPONSLeft.mdl", damaged, "overhead")] = AddSpecialEffectTarget("Abilities\\Spells\\Orc\\TrollBerserk\\HeadhunterWEAPONSLeft.mdl", damaged, "overhead");
			SaveEffectHandle(udg_hash, GetHandleId(t), 2, ef);
			ef[null] = null;
			ef[AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Bloodlust\\BloodlustTarget.mdl", damaged, "hand,left")] = AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Bloodlust\\BloodlustTarget.mdl", damaged, "hand,left");
			SaveEffectHandle(udg_hash, GetHandleId(t), 3, ef);
			ef[null] = null;
			SaveUnitHandle(udg_hash, GetHandleId(t), 1, damaged);
			TimerStart(t, 7., false, Trig_Beorn_Rage_Remove_Effects_Actions);
			t[null] = null;
		}
		if (GetUnitAbilityLevel(damager, 'A0OJ') >= 1) {
			u[LoadUnitHandle(udg_hash, hdr, $85)] = LoadUnitHandle(udg_hash, hdr, $85);
			if (u == null) {
				u[damaged] = damaged;
				ef[AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Bloodlust\\BloodlustTarget.mdl", damaged, "overhead")] = AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Bloodlust\\BloodlustTarget.mdl", damaged, "overhead");
				SaveEffectHandle(udg_hash, hdr, $87, ef);
				ef[null] = null;
			}
			i[0] = 0;
			i[LoadInteger(udg_hash, hdr, $86)] = LoadInteger(udg_hash, hdr, $86);
			if (damaged == u) {
				if (i < $A) {
					i[i + 1] = i + 1;
				}
			else
				if (i >= 4) {
					if (i == $A) {
						i[9] = 9;
					}
					SetAttackSpeedAbilityLevel(damager, -20 * (i - 3));
				}
				i[0] = 0;
				ef[LoadEffectHandle(udg_hash, hdr, $87)] = LoadEffectHandle(udg_hash, hdr, $87);
				DestroyEffect(ef);
				ef[AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Bloodlust\\BloodlustTarget.mdl", damaged, "overhead")] = AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Bloodlust\\BloodlustTarget.mdl", damaged, "overhead");
				SaveEffectHandle(udg_hash, hdr, $87, ef);
				ef[null] = null;
			}
			if (i > 3 && i < $A) {
				SetAttackSpeedAbilityLevel(damager, 20);
			}
			SaveUnitHandle(udg_hash, hdr, $85, damaged);
			SaveInteger(udg_hash, hdr, $86, i);
		}
		if (GetUnitAbilityLevel(damager, 'A0O1') >= 1) {
			r1[LoadInteger(udg_hash, hdr, $82) * damage * .15 * .01] = LoadInteger(udg_hash, hdr, $82) * damage * .15 * .01;
			SetUnitState(damager, UNIT_STATE_LIFE, GetUnitState(damager, UNIT_STATE_LIFE) + r1);
		}
		if (GetUnitAbilityLevel(damager, 'A0OZ') > 0 && IsUnitIllusion(damager) == false) {
			i[LoadInteger(udg_hash, hdr, $8F)] = LoadInteger(udg_hash, hdr, $8F);
			b[false] = false;
			i[i + 1] = i + 1;
			if (i == 3) {
				ef[AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", damager, "weapon")] = AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", damager, "weapon");
				SaveEffectHandle(udg_hash, hdr, $90, ef);
				ef[null] = null;
			}
			if (i == 4) {
				i[0] = 0;
				b[true] = true;
			}
			SaveInteger(udg_hash, hdr, $8F, i);
			if (b) {
				DestroyEffect(LoadEffectHandle(udg_hash, hdr, $90));
				r1[(damage * 1.) + GetHeroInt(damager, true)] = (damage * 1.) + GetHeroInt(damager, true);
				GroupAddUnit(gdamagefromdamager, damaged);
				SaveReal(udg_hash, hdd, $9E, LoadReal(udg_hash, hdd, $9E) + GetHeroInt(damager, true));
				SaveReal(udg_hash, hdd, $9F, LoadReal(udg_hash, hdd, $9F) + (damage * 1.));
				CreateTexttag(udg_ColorString[2] + I2S(R2I(r1 + damage)) + "!|r", .025, $FF, xd - 18., yd + 15., .0, .0, .035, 3.5);
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", damaged, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningBolt\\LightningBoltMissile.mdl", damaged, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", damaged, "origin"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningShield\\LightningShieldBuff.mdl", damaged, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Purge\\PurgeBuffTarget.mdl", damaged, "chest"));
				g[CreateGroup()] = CreateGroup();
				g2[CreateGroup()] = CreateGroup();
				GroupEnumUnitsInRange(g, xd, yd, 300., null);
				GroupRemoveUnit(g, damaged);
				while (true) {
					Picked[FirstOfGroup(g)] = FirstOfGroup(g);
					if (Picked == null) break;
					if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, pr) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false) {
						GroupAddUnit(g2, Picked);
					}
					GroupRemoveUnit(g, Picked);
				}
				Picked[null] = null;
				GroupClear(g);
				DestroyGroup(g);
				g[null] = null;
				RandomUnitFromGroup(3, g2);
				g[CreateGroup()] = CreateGroup();
				GroupAddGroup(udg_GroupRandomUnitFromGroup, g);
				r1[100. + (GetUnitState(damager, UNIT_STATE_MAX_MANA) / 15.)] = 100. + (GetUnitState(damager, UNIT_STATE_MAX_MANA) / 15.);
				while (true) {
					Picked[FirstOfGroup(g)] = FirstOfGroup(g);
					if (Picked == null) break;
					t[CreateTimer()] = CreateTimer();
					h[GetHandleId(t)] = GetHandleId(t);
					SaveUnitHandle(udg_hash, h, 1, Picked);
					SaveInteger(udg_hash, h, 2, $F);
					SaveUnitHandle(udg_hash, h, 3, damaged);
					locr[GetUnitLoc(damaged)] = GetUnitLoc(damaged);
					locd[GetUnitLoc(Picked)] = GetUnitLoc(Picked);
					l[AddLightningEx("CLPB", true, xd, yd, GetUnitFlyHeight(damaged) + 25. + GetLocationZ(locr), GetUnitX(Picked), GetUnitY(Picked), GetUnitFlyHeight(Picked) + 25. + GetLocationZ(locd))] = AddLightningEx("CLPB", true, xd, yd, GetUnitFlyHeight(damaged) + 25. + GetLocationZ(locr), GetUnitX(Picked), GetUnitY(Picked), GetUnitFlyHeight(Picked) + 25. + GetLocationZ(locd));
					SaveLightningHandle(udg_hash, h, 4, l);
					l[null] = null;
					RemoveLocation(locr);
					locr[null] = null;
					RemoveLocation(locd);
					locd[null] = null;
					TimerStart(t, .04, true, Trig_Remove_Lightning_From_Staff_Of_Lightning_Actions);
					GroupAddUnit(gdamagefromdamager, Picked);
					SaveReal(udg_hash, GetHandleId(Picked), $9E, LoadReal(udg_hash, GetHandleId(Picked), $9E) + r1);
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", Picked, "chest"));
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningBolt\\LightningBoltMissile.mdl", Picked, "chest"));
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", Picked, "origin"));
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningShield\\LightningShieldBuff.mdl", Picked, "chest"));
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Purge\\PurgeBuffTarget.mdl", Picked, "chest"));
					GroupRemoveUnit(g, Picked);
					t[null] = null;
				}
				GroupClear(g);
				DestroyGroup(g);
				g[null] = null;
				GroupClear(g2);
				DestroyGroup(g2);
				g2[null] = null;
				Picked[null] = null;
			}
		}
		if (GetUnitAbilityLevel(damager, 'A0P3') > 0 && LoadTimerHandle(udg_hash, hdr, $92) != null && IsUnitIllusion(damager) == false) {
			DestroyEffect(LoadEffectHandle(udg_hash, GetHandleId(LoadTimerHandle(udg_hash, hdr, $92)), 2));
			DestroyEffect(LoadEffectHandle(udg_hash, GetHandleId(LoadTimerHandle(udg_hash, hdr, $92)), 3));
			UnitRemoveAbility(damager, 'A0P4');
			r1[damage * .5] = damage * .5;
			g[CreateGroup()] = CreateGroup();
			GroupEnumUnitsInRange(g, xd, yd, 150., null);
			GroupRemoveUnit(g, damaged);
			while (true) {
				Picked[FirstOfGroup(g)] = FirstOfGroup(g);
				if (Picked == null) break;
				if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, pr) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false) {
					GroupAddUnit(gdamagefromdamager, Picked);
					SaveReal(udg_hash, GetHandleId(Picked), $9F, LoadReal(udg_hash, GetHandleId(Picked), $9F) + r1);
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl", Picked, "chest"));
					DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPeasant.mdl", Picked, "origin"));
					DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl", Picked, "origin"));
				}
				GroupRemoveUnit(g, Picked);
			}
			GroupClear(g);
			DestroyGroup(g);
			g[null] = null;
			Picked[null] = null;
			FlushChildHashtable(udg_hash, GetHandleId(LoadTimerHandle(udg_hash, hdr, $92)));
			DestroyTimer(LoadTimerHandle(udg_hash, hdr, $92));
		}
		if (GetUnitAbilityLevel(damager, 'A0P3') > 0 && GetRandomInt(1, 'd') <= ($A + 5 * GetUnitAbilityLevel(damager, 'A0P3')) && IsUnitIllusion(damager) == false) {
			SaveInteger(udg_hash, hdr, $91, 1);
			t[LoadTimerHandle(udg_hash, hdr, $92)] = LoadTimerHandle(udg_hash, hdr, $92);
			if (t == null) {
				t[CreateTimer()] = CreateTimer();
				h[GetHandleId(t)] = GetHandleId(t);
				SaveTimerHandle(udg_hash, hdr, $92, t);
				UnitAddAbility(damager, 'A0P4');
				SaveUnitHandle(udg_hash, h, 1, damager);
				SaveEffectHandle(udg_hash, h, 2, AddSpecialEffectTarget("Effects\\CosmicTouch.MDX", damager, "weapon"));
				SaveEffectHandle(udg_hash, h, 3, AddSpecialEffectTarget("Effects\\CosmicTouch.MDX", damager, "overhead"));
			}
			TimerStart(t, 1., false, Trig_Remove_ASBonus_Double_Attack_Actions);
			t[null] = null;
		}
		if (GetUnitAbilityLevel(damaged, 'A0P9') > 0 && IsUnitIllusion(damaged) == false) {
			i[LoadInteger(udg_hash, hdd, $98)] = LoadInteger(udg_hash, hdd, $98);
			lvl[LoadInteger(udg_hash, hdd, $99)] = LoadInteger(udg_hash, hdd, $99);
			if (lvl > 0 && (IsUnitType(damager, UNIT_TYPE_MAGIC_IMMUNE) == false)) {
				GroupAddUnit(gdamagefromdamaged, damager);
				SaveReal(udg_hash, hdr, $A0, LoadReal(udg_hash, hdr, $A0) + I2R(lvl));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl", damager, "chest"));
			}
			i[i + 1] = i + 1;
			if (i == 5) {
				i[0] = 0;
				if (lvl < GetUnitAbilityLevel(damaged, 'A0P9') * 5) {
					lvl[lvl + 1] = lvl + 1;
					SaveInteger(udg_hash, hdd, $99, lvl);
					t[CreateTimer()] = CreateTimer();
					h[GetHandleId(t)] = GetHandleId(t);
					SaveUnitHandle(udg_hash, h, 1, damaged);
					SetUnitLifeAndManaRegeneration(damaged, "life", 1);
					SetArmorAbilityLevel(damaged, 1);
					TimerStart(t, 5. * GetUnitAbilityLevel(damaged, 'A0P9'), false, Trig_Remove_Bonus_Marshal_Armor_Actions);
					t[null] = null;
				}
			}
			SaveInteger(udg_hash, hdd, $98, i);
			t[null] = null;
		}
		if (GetUnitAbilityLevel(damager, 'A09L') > 0) {
			i[LoadInteger(udg_hash, hdr, $A7)] = LoadInteger(udg_hash, hdr, $A7);
			b[false] = false;
			i[i + 1] = i + 1;
			if (i == 2) {
				ef[AddSpecialEffectTarget("Abilities\\Spells\\Orc\\TrollBerserk\\HeadhunterWEAPONSLeft.mdl", damager, "hand,left")] = AddSpecialEffectTarget("Abilities\\Spells\\Orc\\TrollBerserk\\HeadhunterWEAPONSLeft.mdl", damager, "hand,left");
				SaveEffectHandle(udg_hash, hdr, $A8, ef);
				ef[null] = null;
				ef[AddSpecialEffectTarget("Abilities\\Spells\\Orc\\TrollBerserk\\HeadhunterWEAPONSRight.mdl", damager, "weapon,right")] = AddSpecialEffectTarget("Abilities\\Spells\\Orc\\TrollBerserk\\HeadhunterWEAPONSRight.mdl", damager, "weapon,right");
				SaveEffectHandle(udg_hash, hdr, $A9, ef);
				ef[null] = null;
			}
			if (i == 3) {
				i[0] = 0;
				b[true] = true;
			}
			SaveInteger(udg_hash, hdr, $A7, i);
			if (b) {
				DestroyEffect(LoadEffectHandle(udg_hash, hdr, $A8));
				DestroyEffect(LoadEffectHandle(udg_hash, hdr, $A9));
				DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HeroBloodElfBlood.mdl", damaged, "origin"));
				DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl", damaged, "origin"));
				r1[damage * 2.] = damage * 2.;
				GroupAddUnit(gdamagefromdamager, damaged);
				SaveReal(udg_hash, hdd, $9F, LoadReal(udg_hash, hdd, $9F) + r1);
				CreateTexttag(udg_ColorString[1] + I2S(R2I(r1 + damage)) + "!|r", .031, $FF, xd - 18., yd + 15., .0, .0, .035, 3.5);
				dammi[CreateUnit(pr, 'h00U', xd, yd, .0)] = CreateUnit(pr, 'h00U', xd, yd, .0);
				UnitApplyTimedLife(dammi, 'BTLF', 2.);
				UnitAddAbility(dammi, 'A0F8');
				IssueTargetOrderById(dammi, $D006B, damaged);
				dammi[null] = null;
			}
		}
		if (GetUnitAbilityLevel(damager, 'A0GS') > 0) {
			r1[GetUnitFacing(damaged)] = GetUnitFacing(damaged);
			r2[(Atan2(yr - yd, xr - xd) * bj_RADTODEG)] = (Atan2(yr - yd, xr - xd) * bj_RADTODEG);
			r3[r2 + 360.] = r2 + 360.;
			dist[SquareRoot((xd - xr) * (xd - xr) + (yd - yr) * (yd - yr))] = SquareRoot((xd - xr) * (xd - xr) + (yd - yr) * (yd - yr));
			if (((r1 < r2 + 60.) && (r1 > r2 - 60.)) || ((r1 < r3 + 60.) && (r1 > r3 - 60.)) && dist <= 175.) {
				UnitDamageTarget(damager, damaged, GetHeroAgi(damager, true) * .6, false, false, ATTACK_TYPE_MELEE, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS);
				DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl", damaged, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GargoyleMissile\\GargoyleMissile.mdl", damaged, "chest"));
			}
		}
		if (GetUnitAbilityLevel(damager, 'A0QT') >= 1 && GetRandomInt(0, 'd') <= (7 + GetUnitAbilityLevel(damager, 'A0QT') * 3)) {
			r1[(GetUnitAbilityLevel(damager, 'A0QT') * .05 + .15) * damage] = (GetUnitAbilityLevel(damager, 'A0QT') * .05 + .15) * damage;
			StunUnitTimed(damaged, 1.5);
			g[CreateGroup()] = CreateGroup();
			if (LoadBoolean(udg_hash, hdr, $B3) == false) {
				GroupEnumUnitsInRange(g, xd, yd, 150., null);
			else
				GroupEnumUnitsInRange(g, xd, yd, 225., null);
				r1[((GetUnitAbilityLevel(damager, 'A0QT') * .05 + .15) * damage) + GetHeroAgi(damager, true) * .75] = ((GetUnitAbilityLevel(damager, 'A0QT') * .05 + .15) * damage) + GetHeroAgi(damager, true) * .75;
			}
			GroupRemoveUnit(g, damaged);
			DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\SteamTank\\SteamTankImpact.mdl", xd, yd));
			while (true) {
				Picked[FirstOfGroup(g)] = FirstOfGroup(g);
				if (Picked == null) break;
				if (IsUnitEnemy(Picked, pr) && Picked != damaged && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GyroCopter\\GyroCopterMissile.mdl", Picked, "origin"));
					StunUnitTimed(Picked, .25);
					GroupAddUnit(gdamagefromdamager, Picked);
					SaveReal(udg_hash, GetHandleId(Picked), $9F, LoadReal(udg_hash, GetHandleId(Picked), $9F) + r1);
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GyroCopter\\GyroCopterImpact.mdl", Picked, "chest"));
				}
				GroupRemoveUnit(g, Picked);
			}
			GroupClear(g);
			DestroyGroup(g);
			g[null] = null;
		}
		if (GetUnitAbilityLevel(damaged, 'A0OW') > 0) {
			if (damage > 7) {
				r1[7] = 7;
			}
			if (damage <= 7) {
				r1[damage] = damage;
			}
			t[CreateTimer()] = CreateTimer();
			h[GetHandleId(t)] = GetHandleId(t);
			SaveUnitHandle(udg_hash, h, 1, damaged);
			SaveReal(udg_hash, h, 2, r1);
			TimerStart(t, .0, false, Trig_Hil_Unit_Actions);
			t[null] = null;
		}
		if (GetUnitAbilityLevel(damaged, 'A0K7') > 0 && GetRandomInt(1, 'd') <= 20 && GetUnitAbilityLevel(damaged, 'A0K9') < 1) {
			dammi[CreateUnit(pd, 'h013', xr, yr, .0)] = CreateUnit(pd, 'h013', xr, yr, .0);
			UnitApplyTimedLife(dammi, 'BTLF', 1.);
			UnitAddAbility(dammi, 'A0K8');
			IssueTargetOrderById(dammi, $D006B, damaged);
			dammi[null] = null;
		}
		if (GetUnitAbilityLevel(damaged, 'B03P') > 0) {
			UnitDamageTarget(damaged, damager, (GetRandomReal(20., 50.)), false, false, ATTACK_TYPE_MELEE, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Immolation\\ImmolationDamage.mdl", damager, "chest"));
		}
	}
	if (damage >= .01) {
		if (LoadReal(udg_hash, hdd, 65) > .0 && LoadEffectHandle(udg_hash, hdd, 66) != null) {
			r1[LoadReal(udg_hash, hdd, 65)] = LoadReal(udg_hash, hdd, 65);
			if ((r1 - damage) > .0) {
				r2[damage] = damage;
			else
				r2[r1] = r1;
				ef[LoadEffectHandle(udg_hash, hdd, 66)] = LoadEffectHandle(udg_hash, hdd, 66);
				DestroyEffect(ef);
				ef[null] = null;
			}
			t[CreateTimer()] = CreateTimer();
			h[GetHandleId(t)] = GetHandleId(t);
			SaveUnitHandle(udg_hash, h, 1, damaged);
			SaveReal(udg_hash, h, 2, r2);
			TimerStart(t, .0, false, Trig_Hil_Unit_Actions);
			SaveReal(udg_hash, hdd, 65, r1 - damage);
			t[null] = null;
		}
		if (GetUnitAbilityLevel(damaged, 'A07U') > 0 && GetRandomInt(1, 'd') <= 30) {
			t[CreateTimer()] = CreateTimer();
			h[GetHandleId(t)] = GetHandleId(t);
			SaveUnitHandle(udg_hash, h, 1, damaged);
			r2[damage * .2] = damage * .2;
			if (GetUnitState(damaged, UNIT_STATE_LIFE) <= damage) {
				SetUnitInvulnerable(damaged, true);
				TimerStart(t, .0, false, Trig_Make_Unit_UnInvulnerable_Actions);
			else
				SaveReal(udg_hash, h, 2, damage);
				TimerStart(t, .0, false, Trig_Hil_Unit_Actions);
			}
			dammi[CreateUnit(Player($F), 'h00U', xd, yd, bj_RADTODEG * Atan2(yr - yd, xr - xd))] = CreateUnit(Player($F), 'h00U', xd, yd, bj_RADTODEG * Atan2(yr - yd, xr - xd));
			UnitApplyTimedLife(dammi, 'BTLF', 2.);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SpiritOfVengeanceMissile\\SpiritOfVengeanceMissile.mdl", damager, "chest"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\SpellShieldAmulet\\SpellShieldCaster.mdl", dammi, "origin"));
			dammi[null] = null;
			if (IsUnitType(damager, UNIT_TYPE_MAGIC_IMMUNE) == false) {
				GroupAddUnit(gdamagefromdamaged, damager);
				SaveReal(udg_hash, hdr, $A0, LoadReal(udg_hash, hdr, $A0) + r2);
			}
			t[null] = null;
		}
		if (damage > .0 && (pd == Player(9) || pd == Player($A) || pd == Player($B))) {
			players[LoadForceHandle(udg_hash, hdd, 72)] = LoadForceHandle(udg_hash, hdd, 72);
			if (players == null) {
				players[CreateForce()] = CreateForce();
			}
			if (IsPlayerInForce(pr, players) == false) {
				ForceAddPlayer(players, pr);
			}
			t[null] = null;
			t[LoadTimerHandle(udg_hash, hdd, 73 + GetPlayerId(pr))] = LoadTimerHandle(udg_hash, hdd, 73 + GetPlayerId(pr));
			if (t == null) {
				t[CreateTimer()] = CreateTimer();
			}
			SaveTimerHandle(udg_hash, hdd, 73 + GetPlayerId(pr), t);
			h[GetHandleId(t)] = GetHandleId(t);
			SavePlayerHandle(udg_hash, h, 1, pr);
			SaveForceHandle(udg_hash, h, 2, players);
			SaveInteger(udg_hash, h, 3, hdd);
			TimerStart(t, 7., false, Trig_AddDamage_Refresh_Creep_Assists_Actions);
			SaveForceHandle(udg_hash, hdd, 72, players);
			players[null] = null;
			t[null] = null;
		}
		if (damage > 5. && GetUnitAbilityLevel(damaged, 'A09G') > 0 && GetRandomInt(1, 'd') <= 25) {
			SetUnitState(damaged, UNIT_STATE_LIFE, GetUnitState(damaged, UNIT_STATE_LIFE) + 25.);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayDamage.mdl", damaged, "chest"));
		}
		if (damage > 10. && GetUnitAbilityLevel(damaged, 'A09K') > 0 && GetRandomInt(1, 'd') <= 40) {
			SetUnitState(damaged, UNIT_STATE_LIFE, GetUnitState(damaged, UNIT_STATE_LIFE) + 25. + (damage / 3));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\SpellSteal\\SpellStealMissile.mdl", damaged, "chest"));
		}
		if (LoadReal(udg_hash, hdd, 86) > .0 && LoadEffectHandle(udg_hash, hdd, 87) != null) {
			r1[LoadReal(udg_hash, hdd, 86)] = LoadReal(udg_hash, hdd, 86);
			r3[GetUnitState(damaged, UNIT_STATE_LIFE)] = GetUnitState(damaged, UNIT_STATE_LIFE);
			t[CreateTimer()] = CreateTimer();
			h[GetHandleId(t)] = GetHandleId(t);
			SaveUnitHandle(udg_hash, h, 1, damaged);
			if ((r1 - damage) > .0) {
				r2[damage] = damage;
			else
				r2[r1] = r1;
				ef[LoadEffectHandle(udg_hash, hdd, 87)] = LoadEffectHandle(udg_hash, hdd, 87);
				DestroyEffect(ef);
				ef[null] = null;
				SaveEffectHandle(udg_hash, hdd, 87, null);
			}
			if (r3 <= damage && (r1 + r3 - damage) > .0) {
				SetUnitInvulnerable(damaged, true);
				TimerStart(t, .0, false, Trig_Make_Unit_UnInvulnerable_Actions);
				if (r1 <= damage) {
					t2[CreateTimer()] = CreateTimer();
					h2[GetHandleId(t2)] = GetHandleId(t2);
					SaveUnitHandle(udg_hash, h2, 1, damaged);
					SaveUnitHandle(udg_hash, h2, 2, damager);
					SaveReal(udg_hash, h2, 3, (damage - r1));
					SaveStr(udg_hash, h2, 4, "clear");
					TimerStart(t2, .0, false, Trig_Damage_Unit_With_Wait_Actions);
					t2[null] = null;
				}
			}
			if (r3 > damage) {
				SaveReal(udg_hash, h, 2, r2);
				TimerStart(t, .0, false, Trig_Hil_Unit_Actions);
			}
			SaveReal(udg_hash, hdd, 86, r1 - damage);
			t[null] = null;
		}
		if ((GetUnitAbilityLevel(damaged, 'A0IT') > 0 || GetUnitAbilityLevel(damaged, 'A0J8') > 0) && IsUnitType(damager, UNIT_TYPE_MAGIC_IMMUNE) == false) {
			if (GetUnitAbilityLevel(damaged, 'A0IT') > 0) {
				r1[damage * .2 + 20.] = damage * .2 + 20.;
			}
			if (GetUnitAbilityLevel(damaged, 'A0J8') > 0) {
				r1[damage * .3 + 30.] = damage * .3 + 30.;
			}
			GroupAddUnit(gdamagefromdamaged, damager);
			SaveReal(udg_hash, hdr, $A1, LoadReal(udg_hash, hdr, $A1) + r1);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\ThornsAura\\ThornsAuraDamage.mdl", damager, "overhead"));
		}
		if (LoadBoolean(udg_hash, hdd, 94) && LoadBoolean(udg_hash, hdd, $A2) == false && LoadEffectHandle(udg_hash, hdd, 95) != null && (GetUnitState(damaged, UNIT_STATE_LIFE) <= damage || GetUnitState(damaged, UNIT_STATE_LIFE) <= GetUnitState(damaged, UNIT_STATE_MAX_LIFE) * .02)) {
			ef[LoadEffectHandle(udg_hash, hdd, 95)] = LoadEffectHandle(udg_hash, hdd, 95);
			DestroyEffect(ef);
			t[CreateTimer()] = CreateTimer();
			h[GetHandleId(t)] = GetHandleId(t);
			SaveUnitHandle(udg_hash, h, 1, damaged);
			SetUnitInvulnerable(damaged, true);
			TimerStart(t, .0, false, Trig_Make_Unit_UnInvulnerable_Actions);
			SetUnitState(damaged, UNIT_STATE_LIFE, GetUnitState(damaged, UNIT_STATE_MAX_LIFE) * .5);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl", damaged, "origin"));
			SaveEffectHandle(udg_hash, hdd, 95, null);
			SaveReal(udg_hash, hdd, 96, 60.);
			SaveBoolean(udg_hash, hdd, $A2, true);
			t2[CreateTimer()] = CreateTimer();
			h2[GetHandleId(t2)] = GetHandleId(t2);
			SaveUnitHandle(udg_hash, h2, 1, damaged);
			TimerStart(t2, 60., false, Trig_Cuirass_of_Invulnerable_Timer_Death_Denial_Actions);
			ef[null] = null;
			t[null] = null;
			t2[null] = null;
		}
		if (LoadReal(udg_hash, hdd, 'i') > .0 && LoadBoolean(udg_hash, hdd, 'f')) {
			r1[LoadReal(udg_hash, hdd, 'i')] = LoadReal(udg_hash, hdd, 'i');
			r3[GetUnitState(damaged, UNIT_STATE_LIFE)] = GetUnitState(damaged, UNIT_STATE_LIFE);
			t[CreateTimer()] = CreateTimer();
			h[GetHandleId(t)] = GetHandleId(t);
			SaveUnitHandle(udg_hash, h, 1, damaged);
			SaveBoolean(udg_hash, hdd, 'j', true);
			if ((r1 - damage) > .0) {
				r2[damage] = damage;
			else
				r2[r1] = r1;
				ef[LoadEffectHandle(udg_hash, hdd, 'g')] = LoadEffectHandle(udg_hash, hdd, 'g');
				DestroyEffect(ef);
				ef[null] = null;
				SaveEffectHandle(udg_hash, hdd, 'g', null);
				t3[CreateTimer()] = CreateTimer();
				h3[GetHandleId(t3)] = GetHandleId(t3);
				SaveUnitHandle(udg_hash, h3, 1, damaged);
				SaveReal(udg_hash, hdd, 'h', 45.);
				TimerStart(t3, 45., false, Trig_Archimagus_Armor_Timer_Death_Denial_Actions);
				g[CreateGroup()] = CreateGroup();
				GroupEnumUnitsInRange(g, xd, yd, 500., null);
				SetUnitState(damaged, UNIT_STATE_MANA, GetUnitState(damaged, UNIT_STATE_MANA) + ((50 + GetHeroInt(damaged, true) * .5)));
				while (true) {
					Picked[FirstOfGroup(g)] = FirstOfGroup(g);
					if (Picked == null) break;
					if (IsUnitAlly(Picked, pd) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
						SetUnitState(Picked, UNIT_STATE_MANA, GetUnitState(Picked, UNIT_STATE_MANA) + ((50 + GetHeroInt(damaged, true) * .5)));
						DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIma\\AImaTarget.mdl", Picked, "origin"));
					}
					GroupRemoveUnit(g, Picked);
				}
				GroupClear(g);
				DestroyGroup(g);
				g[null] = null;
				Picked[null] = null;
			}
			if (r3 <= damage && (r1 + r3 - damage) > .0) {
				SetUnitInvulnerable(damaged, true);
				TimerStart(t, .0, false, Trig_Make_Unit_UnInvulnerable_Actions);
				if (r1 <= damage) {
					t2[CreateTimer()] = CreateTimer();
					h2[GetHandleId(t2)] = GetHandleId(t2);
					SaveUnitHandle(udg_hash, h2, 1, damaged);
					SaveUnitHandle(udg_hash, h2, 2, damager);
					SaveReal(udg_hash, h2, 3, (damage - r1));
					SaveStr(udg_hash, h2, 4, "clear");
					TimerStart(t2, .0, false, Trig_Damage_Unit_With_Wait_Actions);
					t2[null] = null;
				}
			}
			if (r3 > damage) {
				SaveReal(udg_hash, h, 2, r2);
				TimerStart(t, .0, false, Trig_Hil_Unit_Actions);
			}
			SaveReal(udg_hash, hdd, 'i', r1 - damage);
			t[null] = null;
		}
		if (LoadReal(udg_hash, hdd, 'n') > .0 && LoadUnitHandle(udg_hash, hdd, 'o') != null) {
			r2[damage * LoadReal(udg_hash, hdd, 'n')] = damage * LoadReal(udg_hash, hdd, 'n');
			r3[GetUnitState(damaged, UNIT_STATE_LIFE)] = GetUnitState(damaged, UNIT_STATE_LIFE);
			t[CreateTimer()] = CreateTimer();
			h[GetHandleId(t)] = GetHandleId(t);
			SaveUnitHandle(udg_hash, h, 1, damaged);
			GroupAddUnit(gdamagefromdamager, LoadUnitHandle(udg_hash, hdd, 'o'));
			SaveReal(udg_hash, GetHandleId(LoadUnitHandle(udg_hash, hdd, 'o')), $9E, LoadReal(udg_hash, GetHandleId(LoadUnitHandle(udg_hash, hdd, 'o')), $9E) + (r2) / 2);
			if ((r3 <= damage) && (r2 + r3 - damage) > .0) {
				SetUnitInvulnerable(damaged, true);
				TimerStart(t, .0, false, Trig_Make_Unit_UnInvulnerable_Actions);
			}
			if (r3 > damage) {
				SaveReal(udg_hash, h, 2, r2);
				TimerStart(t, .0, false, Trig_Hil_Unit_Actions);
			}
			t[null] = null;
		}
		if (LoadReal(udg_hash, hdd, $93) > .0 && LoadTimerHandle(udg_hash, hdd, $95) != null) {
			r1[LoadReal(udg_hash, hdd, $93)] = LoadReal(udg_hash, hdd, $93);
			if ((r1 - damage) > .0) {
				r2[damage] = damage;
			else
				r2[r1] = r1;
				g[CreateGroup()] = CreateGroup();
				u[LoadUnitHandle(udg_hash, hdd, $97)] = LoadUnitHandle(udg_hash, hdd, $97);
				p[GetOwningPlayer(u)] = GetOwningPlayer(u);
				r3[LoadReal(udg_hash, hdd, $96)] = LoadReal(udg_hash, hdd, $96);
				DestroyEffect(AddSpecialEffect("Effects\\LightNova.mdl", GetUnitX(damaged), GetUnitY(damaged)));
				udg_Temp_Integer[0] = 0;
				udg_Temp_Integer[0] = 0;
				DestroyEffect(AddSpecialEffectTarget("Effects\\DivineRage.mdx", damaged, "origin"));
				GroupEnumUnitsInRange(g, GetUnitX(damaged), GetUnitY(damaged), 500., null);
				while (true) {
					Picked[FirstOfGroup(g)] = FirstOfGroup(g);
					if (Picked == null) break;
					if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
						DestroyEffect(AddSpecialEffectTarget("Effects\\DivineRage.mdx", Picked, "origin"));
						UnitDamageTarget(u, Picked, r3, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
					}
					GroupRemoveUnit(g, Picked);
				}
				t2[LoadTimerHandle(udg_hash, hdd, $95)] = LoadTimerHandle(udg_hash, hdd, $95);
				h2[GetHandleId(t2)] = GetHandleId(t2);
				ef[LoadEffectHandle(udg_hash, h2, 4)] = LoadEffectHandle(udg_hash, h2, 4);
				DestroyEffect(ef);
				ef[null] = null;
				ef[LoadEffectHandle(udg_hash, h2, 5)] = LoadEffectHandle(udg_hash, h2, 5);
				DestroyEffect(ef);
				ef[null] = null;
				ef[LoadEffectHandle(udg_hash, h2, 6)] = LoadEffectHandle(udg_hash, h2, 6);
				DestroyEffect(ef);
				ef[null] = null;
				SetAttackSpeedAbilityLevel(damaged, -LoadInteger(udg_hash, GetHandleId(damaged), $94));
				FlushChildHashtable(udg_hash, h2);
				DestroyTimer(t2);
				t2[null] = null;
				u[null] = null;
				p[null] = null;
				DestroyGroup(g);
				g[null] = null;
			}
			t[CreateTimer()] = CreateTimer();
			h[GetHandleId(t)] = GetHandleId(t);
			SaveUnitHandle(udg_hash, h, 1, damaged);
			SaveReal(udg_hash, h, 2, r2);
			TimerStart(t, .0, false, Trig_Hil_Unit_Actions);
			SaveReal(udg_hash, hdd, $93, r1 - damage);
			t[null] = null;
		}
		if (LoadBoolean(udg_hash, hdd, $A5) && LoadTimerHandle(udg_hash, hdd, $A6) != null) {
			t[CreateTimer()] = CreateTimer();
			h[GetHandleId(t)] = GetHandleId(t);
			SaveUnitHandle(udg_hash, h, 1, damaged);
			if (GetUnitState(damaged, UNIT_STATE_LIFE) > damage) {
				SaveReal(udg_hash, h, 2, damage);
				TimerStart(t, .0, false, Trig_Hil_Unit_Actions);
			}
			if (GetUnitState(damaged, UNIT_STATE_LIFE) <= damage) {
				SetUnitInvulnerable(damaged, true);
				TimerStart(t, .0, false, Trig_Make_Unit_UnInvulnerable_Actions);
			}
			t[null] = null;
		}
		if (udg_IsBeronsFightWin && (GetUnitTypeId(damaged) == 'h01K' || GetUnitTypeId(damaged) == 'e002' || GetUnitTypeId(damaged) == 'n00Y' || GetUnitTypeId(damaged) == 'o003')) {
			r2[damage] = damage;
			r3[GetUnitState(damaged, UNIT_STATE_LIFE)] = GetUnitState(damaged, UNIT_STATE_LIFE);
			t[CreateTimer()] = CreateTimer();
			h[GetHandleId(t)] = GetHandleId(t);
			SaveUnitHandle(udg_hash, h, 1, damaged);
			if ((r3 <= damage)) {
				SetUnitInvulnerable(damaged, true);
				TimerStart(t, .0, false, Trig_Make_Unit_UnInvulnerable_Actions);
			}
			if (r3 > damage) {
				SaveReal(udg_hash, h, 2, r2 * .3);
				TimerStart(t, .0, false, Trig_Hil_Unit_Actions);
			}
			t[null] = null;
		}
		if (IsUnitAlly(damaged, Player($B)) || IsUnitAlly(damager, Player($B))) {
			if (IsUnitAlly(damaged, Player($B))) {
				dammi[damaged] = damaged;
			else
				dammi[damager] = damager;
			}
			if (IsUnitIllusion(dammi) == false && GetUnitState(dammi, UNIT_STATE_LIFE) > .405 && GetUnitTypeId(dammi) != 'h00U') {
				SaveInteger(udg_hash, GetHandleId(dammi), 'k', 0);
			}
		}
		if (pd == Player($F) && damage > .0 && IsUnitIllusion(damaged) == false && udg_IsMinimapPingGuardsAttacked == false && (GetUnitTypeId(damaged) == 'h01K' || GetUnitTypeId(damaged) == 'e002' || GetUnitTypeId(damaged) == 'n00Y' || GetUnitTypeId(damaged) == 'o003')) {
			if ((IsPlayerInForce(GetLocalPlayer(), udg_IGRAET))) {
				DisplayTextToPlayer(GetLocalPlayer(), .0, .0, "|cff99ccffВНИМАНИЕ!!!|r");
				DisplayTextToPlayer(GetLocalPlayer(), .0, .0, "|cffff0000Стражи-Чародеи атакованы!!!|r");
				PingMinimapEx(xd, yd, 3., $FE, 0, 0, true);
			}
			udg_IsMinimapPingGuardsAttacked[true] = true;
			t[CreateTimer()] = CreateTimer();
			TimerStart(t, 6., false, Trig_IsMinimapPingGuardsAttacked_Refresh_Actions);
			t[null] = null;
		}
		if (damage > .0) {
			i[GetPlayerId(pr)] = GetPlayerId(pr);
			if (GetPlayerId(pr) <= 8) {
				udg_Player_Taken_Damage_Current[udg_Player_Taken_Damage_Current[i] + damage] = udg_Player_Taken_Damage_Current[i] + damage;
				udg_Player_Taken_Damage_All[udg_Player_Taken_Damage_All[i] + damage] = udg_Player_Taken_Damage_All[i] + damage;
			}
			i[GetPlayerId(pd)] = GetPlayerId(pd);
			if (GetPlayerId(pd) <= 8) {
				udg_Player_Received_Damage_Current[udg_Player_Received_Damage_Current[i] + damage] = udg_Player_Received_Damage_Current[i] + damage;
			}
		}
	}
	while (true) {
		Picked[FirstOfGroup(gdamagefromdamaged)] = FirstOfGroup(gdamagefromdamaged);
		if (Picked == null) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
			UnitDamageTarget(damaged, Picked, ConvertMagicAndChaosDamageInClear(Picked, LoadReal(udg_hash, GetHandleId(Picked), $A0), LoadReal(udg_hash, GetHandleId(Picked), $A1)), false, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			SaveReal(udg_hash, GetHandleId(Picked), $A0, .0);
			SaveReal(udg_hash, GetHandleId(Picked), $A1, .0);
		}
		GroupRemoveUnit(gdamagefromdamaged, Picked);
	}
	Picked[null] = null;
	GroupClear(gdamagefromdamaged);
	DestroyGroup(gdamagefromdamaged);
	gdamagefromdamaged[null] = null;
	while (true) {
		Picked[FirstOfGroup(gdamagefromdamager)] = FirstOfGroup(gdamagefromdamager);
		if (Picked == null) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
			UnitDamageTarget(damager, Picked, ConvertMagicAndChaosDamageInClear(Picked, LoadReal(udg_hash, GetHandleId(Picked), $9E), LoadReal(udg_hash, GetHandleId(Picked), $9F)), false, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			SaveReal(udg_hash, GetHandleId(Picked), $9E, .0);
			SaveReal(udg_hash, GetHandleId(Picked), $9F, .0);
		}
		GroupRemoveUnit(gdamagefromdamager, Picked);
	}
	Picked[null] = null;
	GroupClear(gdamagefromdamager);
	DestroyGroup(gdamagefromdamager);
	gdamagefromdamager[null] = null;
	damager[null] = null;
	damaged[null] = null;
	pr[null] = null;
	pd[null] = null;
	dammi[null] = null;
	u[null] = null;
	l[null] = null;
	t[null] = null;
	txt[null] = null;
	ef[null] = null;
	g[null] = null;
}
bool Trig_Del_Conditions() {
	return GetEventDamage() > .0;
}
void InitTrig_AddDamage() {
	gg_trg_AddDamage[CreateTrigger()] = CreateTrigger();
	TriggerAddCondition(gg_trg_AddDamage, Condition(Trig_Del_Conditions));
	TriggerAddAction(gg_trg_AddDamage, Trig_AddDamage_Actions);
}
void Trig_TimeTalisman_Remove_Bonuses_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit target = LoadUnitHandle(udg_hash, h, 1);
	int as = LoadInteger(udg_hash, h, 2);
	effect ef = LoadEffectHandle(udg_hash, h, 5);
	SetAttackSpeedAbilityLevel(target, -as);
	SaveBoolean(udg_hash, GetHandleId(target), $B1, false);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	DestroyEffect(ef);
	target[null] = null;
	ef[null] = null;
	t[null] = null;
}
void Trig_TimeTalisman_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	int id = GetSpellAbilityId();
	effect ef;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	int as;
	unit dammi;
	dammi[CreateUnit(GetOwningPlayer(caster), 'h00U', GetUnitX(caster), GetUnitY(caster), .0)] = CreateUnit(GetOwningPlayer(caster), 'h00U', GetUnitX(caster), GetUnitY(caster), .0);
	UnitApplyTimedLife(dammi, 'BTLF', 1.);
	UnitAddAbility(dammi, 'A0QQ');
	IssueTargetOrderById(dammi, $D0085, target);
	dammi[null] = null;
	if (id == 'A0QI') {
		as[30] = 30;
	}
	if (id == 'A0QM') {
		as[45] = 45;
	}
	if (id == 'A0QN') {
		as[60] = 60;
	}
	if (id == 'A0QO') {
		as[75] = 75;
	}
	if (id == 'A0QP') {
		as[90] = 90;
	}
	if (LoadBoolean(udg_hash, GetHandleId(target), $B1) == false) {
		ef[AddSpecialEffectTarget("Punishment_Missle.mdx", target, "chest")] = AddSpecialEffectTarget("Punishment_Missle.mdx", target, "chest");
		SaveBoolean(udg_hash, GetHandleId(target), $B1, true);
		SetAttackSpeedAbilityLevel(target, as);
		SaveUnitHandle(udg_hash, h, 1, target);
		SaveInteger(udg_hash, h, 2, as);
		SaveEffectHandle(udg_hash, h, 5, ef);
		TimerStart(t, 10., false, Trig_TimeTalisman_Remove_Bonuses_Actions);
		ef[null] = null;
	else
		SimError(GetOwningPlayer(caster), "На этого воина уже наложено заклинание: 'Обгоняя Время'.");
	}
	caster[null] = null;
	target[null] = null;
	t[null] = null;
}
bool Trig_TimeTalisman_Conditions() {
	return (GetSpellAbilityId() == 'A0QI' || GetSpellAbilityId() == 'A0QM' || GetSpellAbilityId() == 'A0QN' || GetSpellAbilityId() == 'A0QO' || GetSpellAbilityId() == 'A0QP');
}
void InitTrig_TimeTalisman() {
	int index = 0;
	gg_trg_TimeTalisman[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_TimeTalisman, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_TimeTalisman, Condition(Trig_TimeTalisman_Conditions));
	TriggerAddAction(gg_trg_TimeTalisman, Trig_TimeTalisman_Actions);
}
void Trig_Take_Paladin_Armor_Periodic_Wave_Move_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit target = LoadUnitHandle(udg_hash, h, 1);
	unit dammi = LoadUnitHandle(udg_hash, h, 4);
	float x;
	float y;
	float xt;
	float yt;
	float angle;
	float dist;
	float heal;
	effect ef;
	x[GetUnitX(dammi)] = GetUnitX(dammi);
	y[GetUnitY(dammi)] = GetUnitY(dammi);
	xt[GetUnitX(target)] = GetUnitX(target);
	yt[GetUnitY(target)] = GetUnitY(target);
	angle[bj_RADTODEG * Atan2(yt - y, xt - x)] = bj_RADTODEG * Atan2(yt - y, xt - x);
	x[x + 17. * Cos(angle * bj_DEGTORAD)] = x + 17. * Cos(angle * bj_DEGTORAD);
	y[y + 17. * Sin(angle * bj_DEGTORAD)] = y + 17. * Sin(angle * bj_DEGTORAD);
	SetUnitPosition(dammi, x, y);
	dist[SquareRoot((xt - x) * (xt - x) + (yt - y) * (yt - y))] = SquareRoot((xt - x) * (xt - x) + (yt - y) * (yt - y));
	if (dist < 23. || GetUnitState(target, UNIT_STATE_LIFE) < .405) {
		SetUnitScale(dammi, .6, .6, .6);
		ef[LoadEffectHandle(udg_hash, h, 3)] = LoadEffectHandle(udg_hash, h, 3);
		DestroyEffect(ef);
		ef[null] = null;
		if (GetUnitState(target, UNIT_STATE_LIFE) > .405) {
			heal[LoadReal(udg_hash, h, 2)] = LoadReal(udg_hash, h, 2);
			SetUnitState(target, UNIT_STATE_LIFE, GetUnitState(target, UNIT_STATE_LIFE) + heal);
			DestroyEffect(AddSpecialEffectTarget("Effects\\MegaHeal.mdx", target, "origin"));
			DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", target, "origin"), 2.);
		else
			DestroyEffect(AddSpecialEffect("Effects\\HolyPhoenixMissle.mdx", x, y));
		}
		RemoveUnit(dammi);
		DestroyTimer(t);
		FlushChildHashtable(udg_hash, h);
	}
	t[null] = null;
	target[null] = null;
	dammi[null] = null;
}
void Trig_Take_Paladin_Armor_Periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit hero = LoadUnitHandle(udg_hash, h, 1);
	int regen = LoadInteger(udg_hash, h, 2);
	item armor = LoadItemHandle(udg_hash, h, 3);
	int newregen = R2I(GetUnitState(hero, UNIT_STATE_MAX_LIFE) * .01);
	float heal;
	timer t2;
	int h2;
	unit target;
	group g;
	group grup;
	unit Picked;
	unit dammi;
	effect ef;
	if (armor != LoadItemHandle(udg_hash, GetHandleId(hero), $AD) || UnitHasItem(hero, armor) == false) {
		SetUnitLifeAndManaRegeneration(hero, "life", -LoadInteger(udg_hash, h, 2));
		SaveInteger(udg_hash, h, 2, 0);
	}
	if (UnitHasItem(hero, armor) == false) {
		SaveItemHandle(udg_hash, GetHandleId(hero), $AD, GetItemOfTypeFromUnitBJ(hero, 'I02P'));
	}
	if (GetUnitState(hero, UNIT_STATE_LIFE) > .405 && CountItemOfTypeOnUnit(hero, 'I02P') > 0 && armor == LoadItemHandle(udg_hash, GetHandleId(hero), $AD)) {
		if (regen != newregen) {
			SetUnitLifeAndManaRegeneration(hero, "life", -regen);
			SetUnitLifeAndManaRegeneration(hero, "life", newregen);
			SaveInteger(udg_hash, h, 2, newregen);
		}
		g[CreateGroup()] = CreateGroup();
		grup[CreateGroup()] = CreateGroup();
		GroupEnumUnitsInRange(g, GetUnitX(hero), GetUnitY(hero), 750., null);
		GroupRemoveUnit(g, hero);
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (IsUnitAlly(Picked, GetOwningPlayer(hero)) && (GetUnitState(Picked, UNIT_STATE_LIFE) < .99 * GetUnitState(Picked, UNIT_STATE_MAX_LIFE)) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				GroupAddUnit(grup, Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
		Picked[null] = null;
		RandomUnitFromGroup(1, grup);
		GroupAddGroup(udg_GroupRandomUnitFromGroup, g);
		target[FirstOfGroup(udg_GroupRandomUnitFromGroup)] = FirstOfGroup(udg_GroupRandomUnitFromGroup);
		if (target == null) {
			target[hero] = hero;
		}
		if (target != null) {
			t2[CreateTimer()] = CreateTimer();
			h2[GetHandleId(t2)] = GetHandleId(t2);
			heal[200. + GetHeroStr(hero, true)] = 200. + GetHeroStr(hero, true);
			dammi[CreateUnit(GetOwningPlayer(hero), 'h00U', GetUnitX(hero), GetUnitY(hero), (bj_RADTODEG * Atan2(GetUnitY(target) - GetUnitY(hero), GetUnitX(target) - GetUnitX(hero))))] = CreateUnit(GetOwningPlayer(hero), 'h00U', GetUnitX(hero), GetUnitY(hero), (bj_RADTODEG * Atan2(GetUnitY(target) - GetUnitY(hero), GetUnitX(target) - GetUnitX(hero))));
			UnitAddAbility(dammi, 'Amrf');
			UnitRemoveAbility(dammi, 'Amrf');
			SetUnitFlyHeight(dammi, 50., .0);
			ef[AddSpecialEffectTarget("Effects\\HolyPhoenixMissle.mdx", dammi, "chest")] = AddSpecialEffectTarget("Effects\\HolyPhoenixMissle.mdx", dammi, "chest");
			SaveUnitHandle(udg_hash, h2, 1, target);
			SaveReal(udg_hash, h2, 2, heal);
			SaveEffectHandle(udg_hash, h2, 3, ef);
			SaveUnitHandle(udg_hash, h2, 4, dammi);
			TimerStart(t2, .03, true, Trig_Take_Paladin_Armor_Periodic_Wave_Move_Actions);
			ef[null] = null;
			dammi[null] = null;
			t2[null] = null;
		}
		GroupClear(g);
		DestroyGroup(g);
		g[null] = null;
	}
	if (CountItemOfTypeOnUnit(hero, 'I02P') <= 0) {
		DestroyTimer(t);
		FlushChildHashtable(udg_hash, h);
	}
	armor[null] = null;
	t[null] = null;
	hero[null] = null;
}
void Trig_Take_Paladin_Armor_Actions() {
	timer t = CreateTimer();
	int h = GetHandleId(t);
	int regen = 0;
	unit hero = GetTriggerUnit();
	SaveUnitHandle(udg_hash, h, 1, hero);
	SaveInteger(udg_hash, h, 2, regen);
	SaveItemHandle(udg_hash, h, 3, GetManipulatedItem());
	SaveItemHandle(udg_hash, GetHandleId(hero), $AD, GetManipulatedItem());
	TimerStart(t, 5., true, Trig_Take_Paladin_Armor_Periodic_Actions);
	t[null] = null;
	hero[null] = null;
}
bool Trig_Take_Paladin_Armor_Conditions() {
	return (GetItemTypeId(GetManipulatedItem()) == 'I02P');
}
void InitTrig_Take_Paladin_Armor() {
	int index = 0;
	gg_trg_Take_Paladin_Armor[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Take_Paladin_Armor, Player(index), EVENT_PLAYER_UNIT_PICKUP_ITEM, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Take_Paladin_Armor, Condition(Trig_Take_Paladin_Armor_Conditions));
	TriggerAddAction(gg_trg_Take_Paladin_Armor, Trig_Take_Paladin_Armor_Actions);
}
bool Trig_Take_Archimagus_Staff_Conditions() {
	return GetItemTypeId(GetManipulatedItem()) == 'I04V';
}
void Trig_Take_Archimagus_Staff_Remove_Recipe_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	item it = LoadItemHandle(udg_hash, h, 1);
	item staff = LoadItemHandle(udg_hash, h, 2);
	if (staff != null) {
		UnitAddItem(LoadUnitHandle(udg_hash, h, 3), staff);
	}
	RemoveItem(it);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	it[null] = null;
	t[null] = null;
}
void Trig_Take_Archimagus_Staff_Actions() {
	item it = GetManipulatedItem();
	int id = GetItemTypeId(it);
	unit hero = GetManipulatingUnit();
	int heroid = GetUnitTypeId(hero);
	item staff;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	if (heroid == 'H00Q') {
		staff[CreateItem('I01Y', GetUnitX(hero), GetUnitY(hero))] = CreateItem('I01Y', GetUnitX(hero), GetUnitY(hero));
		UnitAddItem(hero, staff);
		SetItemUserData(staff, GetPlayerId(GetOwningPlayer(hero)) + 1);
	}
	if (heroid == 'O001') {
		staff[CreateItem('I01Z', GetUnitX(hero), GetUnitY(hero))] = CreateItem('I01Z', GetUnitX(hero), GetUnitY(hero));
		UnitAddItem(hero, staff);
		SetItemUserData(staff, GetPlayerId(GetOwningPlayer(hero)) + 1);
	}
	if (heroid == 'E003') {
		staff[CreateItem('I020', GetUnitX(hero), GetUnitY(hero))] = CreateItem('I020', GetUnitX(hero), GetUnitY(hero));
		UnitAddItem(hero, staff);
		SetItemUserData(staff, GetPlayerId(GetOwningPlayer(hero)) + 1);
	}
	if (heroid == 'E001') {
		staff[CreateItem('I024', GetUnitX(hero), GetUnitY(hero))] = CreateItem('I024', GetUnitX(hero), GetUnitY(hero));
		UnitAddItem(hero, staff);
		SetItemUserData(staff, GetPlayerId(GetOwningPlayer(hero)) + 1);
	}
	if (heroid == 'N00W') {
		staff[CreateItem('I025', GetUnitX(hero), GetUnitY(hero))] = CreateItem('I025', GetUnitX(hero), GetUnitY(hero));
		UnitAddItem(hero, staff);
		SetItemUserData(staff, GetPlayerId(GetOwningPlayer(hero)) + 1);
	}
	if (heroid == 'H01I') {
		staff[CreateItem('I028', GetUnitX(hero), GetUnitY(hero))] = CreateItem('I028', GetUnitX(hero), GetUnitY(hero));
		UnitAddItem(hero, staff);
		SetItemUserData(staff, GetPlayerId(GetOwningPlayer(hero)) + 1);
	}
	SaveItemHandle(udg_hash, h, 1, it);
	if (staff != null) {
		SaveItemHandle(udg_hash, h, 2, staff);
		SaveUnitHandle(udg_hash, h, 3, hero);
	}
	TimerStart(t, .01, false, Trig_Take_Archimagus_Staff_Remove_Recipe_Actions);
	it[null] = null;
	hero[null] = null;
}
void InitTrig_Take_Archimagus_Staff() {
	int index = 0;
	gg_trg_Take_Archimagus_Staff[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Take_Archimagus_Staff, Player(index), EVENT_PLAYER_UNIT_PICKUP_ITEM, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Take_Archimagus_Staff, Condition(Trig_Take_Archimagus_Staff_Conditions));
	TriggerAddAction(gg_trg_Take_Archimagus_Staff, Trig_Take_Archimagus_Staff_Actions);
}
void Trig_Lost_Charged_Staff_of_Lightning_Actions() {
	unit hero = GetTriggerUnit();
	int h = GetHandleId(hero);
	int i = LoadInteger(udg_hash, h, $8F);
	if (i == 3) {
		DestroyEffect(LoadEffectHandle(udg_hash, h, $90));
	}
	SaveInteger(udg_hash, h, $8F, 0);
}
bool Trig_Lost_Charged_Staff_of_Lightning_Conditions() {
	return (GetItemTypeId(GetManipulatedItem()) == 'I01W' && IsUnitType(GetManipulatingUnit(), UNIT_TYPE_HERO)) != null;
}
void InitTrig_Lost_Charged_Staff_of_Lightning() {
	int index = 0;
	gg_trg_Lost_Charged_Staff_of_Lightning[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Lost_Charged_Staff_of_Lightning, Player(index), EVENT_PLAYER_UNIT_DROP_ITEM, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Lost_Charged_Staff_of_Lightning, Condition(Trig_Lost_Charged_Staff_of_Lightning_Conditions));
	TriggerAddAction(gg_trg_Lost_Charged_Staff_of_Lightning, Trig_Lost_Charged_Staff_of_Lightning_Actions);
}
void Trig_Blood_Bow_Actions() {
	unit killer = GetKillingUnit();
	SetUnitState(killer, UNIT_STATE_LIFE, GetUnitState(killer, UNIT_STATE_LIFE) + (GetUnitState(GetDyingUnit(), UNIT_STATE_MAX_LIFE) * .1));
	DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPriest.mdl", killer, "chest"));
	killer[null] = null;
}
bool Trig_Blood_Bow_Conditions() {
	return GetUnitAbilityLevel(GetKillingUnit(), 'A0O0') >= 1;
}
void InitTrig_Blood_Bow() {
	int index = 0;
	gg_trg_Blood_Bow[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Blood_Bow, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Blood_Bow, Condition(Trig_Blood_Bow_Conditions));
	TriggerAddAction(gg_trg_Blood_Bow, Trig_Blood_Bow_Actions);
}
void Trig_Balance_Ring_Actions() {
	unit caster = GetSpellAbilityUnit();
	float hp = GetUnitState(caster, UNIT_STATE_LIFE);
	float hp2;
	float removehp = 200.;
	float healmp = 150.;
	if ((GetUnitState(caster, UNIT_STATE_MANA) < (GetUnitState(caster, UNIT_STATE_MAX_MANA) * .5))) {
		if (hp > removehp) {
			hp2[removehp] = removehp;
		else
			hp2[hp - 1.] = hp - 1.;
		}
		SetUnitState(caster, UNIT_STATE_LIFE, hp - hp2);
		SetUnitState(caster, UNIT_STATE_MANA, GetUnitState(caster, UNIT_STATE_MANA) + 250.);
	else
		if (hp > removehp) {
			hp2[removehp] = removehp;
		else
			hp2[hp - 1.] = hp - 1.;
		}
		SetUnitState(caster, UNIT_STATE_LIFE, hp - hp2);
		SetUnitState(caster, UNIT_STATE_MANA, GetUnitState(caster, UNIT_STATE_MANA) + 150.);
	}
	DestroyEffect(AddSpecialEffectTarget("Effects\\RefreshingSurge.mdl", caster, "origin"));
	caster[null] = null;
}
bool Trig_Balance_Ring_Conditions() {
	return GetSpellAbilityId() == 'A0NQ';
}
void InitTrig_Balance_Ring() {
	int index = 0;
	gg_trg_Balance_Ring[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Balance_Ring, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Balance_Ring, Condition(Trig_Balance_Ring_Conditions));
	TriggerAddAction(gg_trg_Balance_Ring, Trig_Balance_Ring_Actions);
}
void Trig_Armageddon_Staff_Periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 37);
	float damage = LoadReal(udg_hash, h, 38);
	int wait = LoadInteger(udg_hash, h, 39);
	float angle = LoadReal(udg_hash, h, 40);
	group gdamage = LoadGroupHandle(udg_hash, h, 41);
	player p = GetOwningPlayer(caster);
	group gdammi = CreateGroup();
	group g = CreateGroup();
	float dammiangle;
	float xdammi;
	float ydammi;
	unit Picked;
	unit dammi;
	int lopa = 1;
	effect ef;
	float anglestep;
	if (wait > 0) {
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 39, wait);
		while (true) {
			if (lopa > $A) break;
			dammi[LoadUnitHandle(udg_hash, h, lopa)] = LoadUnitHandle(udg_hash, h, lopa);
			dammiangle[LoadReal(udg_hash, h, lopa + 20)] = LoadReal(udg_hash, h, lopa + 20);
			anglestep[LoadReal(udg_hash, h, lopa + 50)] = LoadReal(udg_hash, h, lopa + 50);
			if (dammiangle < -45.) {
				anglestep[-anglestep] = -anglestep;
				SaveReal(udg_hash, h, lopa + 50, anglestep);
			}
			if (dammiangle > 45.) {
				anglestep[-anglestep] = -anglestep;
				SaveReal(udg_hash, h, lopa + 50, anglestep);
			}
			dammiangle[dammiangle + anglestep] = dammiangle + anglestep;
			xdammi[GetUnitX(dammi) + 16. * Cos((angle + dammiangle) * bj_DEGTORAD)] = GetUnitX(dammi) + 16. * Cos((angle + dammiangle) * bj_DEGTORAD);
			ydammi[GetUnitY(dammi) + 16. * Sin((angle + dammiangle) * bj_DEGTORAD)] = GetUnitY(dammi) + 16. * Sin((angle + dammiangle) * bj_DEGTORAD);
			SetUnitPosition(dammi, xdammi, ydammi);
			SetUnitFacing(dammi, angle + dammiangle);
			GroupEnumUnitsInRange(gdammi, xdammi, ydammi, 125., null);
			GroupAddGroup(gdammi, g);
			SaveReal(udg_hash, h, lopa + 20, dammiangle);
			dammi[null] = null;
			lopa[lopa + 1] = lopa + 1;
		}
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitInGroup(Picked, gdamage) == false && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				dammi[CreateUnit(p, 'h00U', GetUnitX(Picked), GetUnitY(Picked), .0)] = CreateUnit(p, 'h00U', GetUnitX(Picked), GetUnitY(Picked), .0);
				UnitApplyTimedLife(dammi, 'BTLF', 1.);
				UnitAddAbility(dammi, 'A0NE');
				IssueTargetOrderById(dammi, $D02B6, Picked);
				dammi[null] = null;
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIfb\\AIfbSpecialArt.mdl", Picked, "chest"));
				GroupAddUnit(gdamage, Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
		Picked[null] = null;
		SaveGroupHandle(udg_hash, h, 41, gdamage);
	else
		while (true) {
			if (lopa > $A) break;
			dammi[LoadUnitHandle(udg_hash, h, lopa)] = LoadUnitHandle(udg_hash, h, lopa);
			ef[LoadEffectHandle(udg_hash, h, lopa + $A)] = LoadEffectHandle(udg_hash, h, lopa + $A);
			KillUnit(dammi);
			DestroyEffect(ef);
			lopa[lopa + 1] = lopa + 1;
			dammi[null] = null;
			ef[null] = null;
		}
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
		GroupClear(gdamage);
		DestroyGroup(gdamage);
	}
	t[null] = null;
	caster[null] = null;
	gdamage[null] = null;
	p[null] = null;
	GroupClear(gdammi);
	DestroyGroup(gdammi);
	gdammi[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	Picked[null] = null;
}
void Trig_Armageddon_Staff_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	timer t = CreateTimer();
	int h = GetHandleId(t);
	location loc;
	float xt;
	float yt;
	unit dammi;
	effect ef;
	float xdammi;
	float ydammi;
	int lopa = 1;
	group gdamage = CreateGroup();
	float angle;
	int count = $A;
	float damage = 335. + GetHeroInt(caster, true);
	int wait = 50;
	float dammidist = -300.;
	float dammiangle;
	if (GetSpellTargetUnit() == null) {
		loc[GetSpellTargetLoc()] = GetSpellTargetLoc();
		xt[GetLocationX(loc)] = GetLocationX(loc);
		yt[GetLocationY(loc)] = GetLocationY(loc);
		RemoveLocation(loc);
		loc[null] = null;
	else
		xt[GetUnitX(GetSpellTargetUnit())] = GetUnitX(GetSpellTargetUnit());
		yt[GetUnitY(GetSpellTargetUnit())] = GetUnitY(GetSpellTargetUnit());
	}
	angle[bj_RADTODEG * Atan2(yt - y, xt - x)] = bj_RADTODEG * Atan2(yt - y, xt - x);
	while (true) {
		if (lopa > count) break;
		dammiangle[GetRandomReal(-45., 45.)] = GetRandomReal(-45., 45.);
		xdammi[x + dammidist * Cos((angle - 90.) * bj_DEGTORAD)] = x + dammidist * Cos((angle - 90.) * bj_DEGTORAD);
		ydammi[y + dammidist * Sin((angle - 90.) * bj_DEGTORAD)] = y + dammidist * Sin((angle - 90.) * bj_DEGTORAD);
		dammi[CreateUnit(p, 'h00U', xdammi, ydammi, dammiangle)] = CreateUnit(p, 'h00U', xdammi, ydammi, dammiangle);
		UnitAddAbility(dammi, 'Amrf');
		UnitRemoveAbility(dammi, 'Amrf');
		SetUnitFlyHeight(dammi, 50., .0);
		ef[AddSpecialEffectTarget("Effects\\SunfireMissile.mdl", dammi, "chest")] = AddSpecialEffectTarget("Effects\\SunfireMissile.mdl", dammi, "chest");
		SaveUnitHandle(udg_hash, h, lopa, dammi);
		SaveEffectHandle(udg_hash, h, lopa + $A, ef);
		SaveReal(udg_hash, h, lopa + 20, dammiangle);
		SaveReal(udg_hash, h, lopa + 50, 3.6);
		dammidist[dammidist + 70.] = dammidist + 70.;
		lopa[lopa + 1] = lopa + 1;
		dammi[null] = null;
		ef[null] = null;
	}
	SaveUnitHandle(udg_hash, h, 37, caster);
	SaveReal(udg_hash, h, 38, damage);
	SaveInteger(udg_hash, h, 39, wait);
	SaveReal(udg_hash, h, 40, angle);
	SaveGroupHandle(udg_hash, h, 41, gdamage);
	TimerStart(t, .03, true, Trig_Armageddon_Staff_Periodic_Actions);
	caster[null] = null;
	p[null] = null;
	t[null] = null;
	gdamage[null] = null;
}
bool Trig_Armageddon_Staff_Conditions() {
	return GetSpellAbilityId() == 'A0NC';
}
void InitTrig_Armageddon_Staff() {
	int index = 0;
	gg_trg_Armageddon_Staff[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Armageddon_Staff, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Armageddon_Staff, Condition(Trig_Armageddon_Staff_Conditions));
	TriggerAddAction(gg_trg_Armageddon_Staff, Trig_Armageddon_Staff_Actions);
}
void Trig_Sargeras_Crown_Remove_Bonuses_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit target = LoadUnitHandle(udg_hash, h, 1);
	int bonusstr = LoadInteger(udg_hash, h, 2);
	int bonusagi = LoadInteger(udg_hash, h, 3);
	int bonusint = LoadInteger(udg_hash, h, 4);
	effect ef = LoadEffectHandle(udg_hash, h, 5);
	SetHeroStr(target, GetHeroStr(target, false) - bonusstr, true);
	SetHeroAgi(target, GetHeroAgi(target, false) - bonusagi, true);
	SetHeroInt(target, GetHeroInt(target, false) - bonusint, true);
	SaveBoolean(udg_hash, GetHandleId(target), '}', false);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	DestroyEffect(ef);
	target[null] = null;
	ef[null] = null;
	t[null] = null;
}
void Trig_Sargeras_Crown_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	int agi = GetHeroAgi(target, true);
	int id = GetSpellAbilityId();
	float bonus = .0;
	float time = .0;
	effect ef;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	int bonusstr;
	int bonusagi;
	int bonusint;
	if (id == 'A0N2') {
		bonus[.3] = .3;
		time[7.] = 7.;
	}
	if (id == 'A0N3') {
		bonus[.5] = .5;
		time[9.] = 9.;
	}
	if (id == 'A0N4') {
		bonus[.7] = .7;
		time[11.] = 11.;
	}
	if (LoadBoolean(udg_hash, GetHandleId(target), '}') == false) {
		ef[AddSpecialEffectTarget("Effects\\HolyBlessing.mdl", target, "origin")] = AddSpecialEffectTarget("Effects\\HolyBlessing.mdl", target, "origin");
		SaveBoolean(udg_hash, GetHandleId(target), '}', true);
		bonusstr[R2I(GetHeroStr(target, true) * bonus)] = R2I(GetHeroStr(target, true) * bonus);
		bonusagi[R2I(GetHeroAgi(target, true) * bonus)] = R2I(GetHeroAgi(target, true) * bonus);
		bonusint[R2I(GetHeroInt(target, true) * bonus)] = R2I(GetHeroInt(target, true) * bonus);
		SetHeroStr(target, GetHeroStr(target, false) + bonusstr, true);
		SetHeroAgi(target, GetHeroAgi(target, false) + bonusagi, true);
		SetHeroInt(target, GetHeroInt(target, false) + bonusint, true);
		SaveUnitHandle(udg_hash, h, 1, target);
		SaveInteger(udg_hash, h, 2, bonusstr);
		SaveInteger(udg_hash, h, 3, bonusagi);
		SaveInteger(udg_hash, h, 4, bonusint);
		SaveEffectHandle(udg_hash, h, 5, ef);
		TimerStart(t, time, false, Trig_Sargeras_Crown_Remove_Bonuses_Actions);
		ef[null] = null;
	else
		SimError(GetOwningPlayer(caster), "На этого героя уже наложено Благославление Саргераса.");
	}
	caster[null] = null;
	target[null] = null;
	t[null] = null;
}
bool Trig_Sargeras_Crown_Conditions() {
	return (GetSpellAbilityId() == 'A0N2' || GetSpellAbilityId() == 'A0N3' || GetSpellAbilityId() == 'A0N4');
}
void InitTrig_Sargeras_Crown() {
	int index = 0;
	gg_trg_Sargeras_Crown[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Sargeras_Crown, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Sargeras_Crown, Condition(Trig_Sargeras_Crown_Conditions));
	TriggerAddAction(gg_trg_Sargeras_Crown, Trig_Sargeras_Crown_Actions);
}
void Trig_Lost_Sargeras_Crown_Actions() {
	unit hero = GetTriggerUnit();
	int h = GetHandleId(hero);
	int id = GetItemTypeId(GetManipulatedItem());
	int bonus = 0;
	string smainstat = LoadStr(udg_hash, GetUnitTypeId(hero), 70);
	if (id == 'I008') {
		bonus[$F] = $F;
	}
	if (id == 'I009') {
		bonus[30] = 30;
	}
	if (id == 'I00L') {
		bonus[45] = 45;
	}
	if (smainstat == "str") {
		SetHeroStr(hero, GetHeroStr(hero, false) - bonus, true);
	}
	if (smainstat == "agi") {
		SetHeroAgi(hero, GetHeroAgi(hero, false) - bonus, true);
	}
	if (smainstat == "int") {
		SetHeroInt(hero, GetHeroInt(hero, false) - bonus, true);
	}
	hero[null] = null;
}
bool Trig_Lost_Sargeras_Crown_Conditions() {
	return ((GetItemTypeId(GetManipulatedItem()) == 'I008' || GetItemTypeId(GetManipulatedItem()) == 'I009' || GetItemTypeId(GetManipulatedItem()) == 'I00L') && IsUnitType(GetManipulatingUnit(), UNIT_TYPE_HERO)) != null;
}
void InitTrig_Lost_Sargeras_Crown() {
	int index = 0;
	gg_trg_Lost_Sargeras_Crown[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Lost_Sargeras_Crown, Player(index), EVENT_PLAYER_UNIT_DROP_ITEM, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Lost_Sargeras_Crown, Condition(Trig_Lost_Sargeras_Crown_Conditions));
	TriggerAddAction(gg_trg_Lost_Sargeras_Crown, Trig_Lost_Sargeras_Crown_Actions);
}
void Trig_Take_Sargeras_Crown_Actions() {
	unit hero = GetTriggerUnit();
	int h = GetHandleId(hero);
	int id = GetItemTypeId(GetManipulatedItem());
	int bonus = 0;
	string smainstat = LoadStr(udg_hash, GetUnitTypeId(hero), 70);
	if (id == 'I008') {
		bonus[$F] = $F;
	}
	if (id == 'I009') {
		bonus[30] = 30;
	}
	if (id == 'I00L') {
		bonus[45] = 45;
	}
	if (smainstat == "str") {
		SetHeroStr(hero, GetHeroStr(hero, false) + bonus, true);
	}
	if (smainstat == "agi") {
		SetHeroAgi(hero, GetHeroAgi(hero, false) + bonus, true);
	}
	if (smainstat == "int") {
		SetHeroInt(hero, GetHeroInt(hero, false) + bonus, true);
	}
	hero[null] = null;
}
bool Trig_Take_Sargeras_Crown_Conditions() {
	return ((GetItemTypeId(GetManipulatedItem()) == 'I008' || GetItemTypeId(GetManipulatedItem()) == 'I009' || GetItemTypeId(GetManipulatedItem()) == 'I00L') && IsUnitType(GetManipulatingUnit(), UNIT_TYPE_HERO)) != null;
}
void InitTrig_Take_Sargeras_Crown() {
	int index = 0;
	gg_trg_Take_Sargeras_Crown[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Take_Sargeras_Crown, Player(index), EVENT_PLAYER_UNIT_PICKUP_ITEM, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Take_Sargeras_Crown, Condition(Trig_Take_Sargeras_Crown_Conditions));
	TriggerAddAction(gg_trg_Take_Sargeras_Crown, Trig_Take_Sargeras_Crown_Actions);
}
void Trig_Lost_Archimagus_Armor_Actions() {
	unit hero = GetTriggerUnit();
	int h = GetHandleId(hero);
	effect ef = LoadEffectHandle(udg_hash, h, 'g');
	DestroyEffect(ef);
	SaveBoolean(udg_hash, h, 'f', false);
	SaveEffectHandle(udg_hash, h, 'g', null);
	hero[null] = null;
	ef[null] = null;
}
bool Trig_Lost_Archimagus_Armor_Conditions() {
	return GetItemTypeId(GetManipulatedItem()) == 'I05A' && CountItemOfTypeOnUnit(GetTriggerUnit(), 'I05A') == 1;
}
void InitTrig_Lost_Archimagus_Armor() {
	int index = 0;
	gg_trg_Lost_Archimagus_Armor[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Lost_Archimagus_Armor, Player(index), EVENT_PLAYER_UNIT_DROP_ITEM, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Lost_Archimagus_Armor, Condition(Trig_Lost_Archimagus_Armor_Conditions));
	TriggerAddAction(gg_trg_Lost_Archimagus_Armor, Trig_Lost_Archimagus_Armor_Actions);
}
void Trig_Take_Archimagus_Armor_Actions() {
	unit hero = GetTriggerUnit();
	int h = GetHandleId(hero);
	effect ef;
	if (LoadReal(udg_hash, h, 'h') < 1.) {
		ef[AddSpecialEffectTarget("Effects\\MagicShieldBlue.mdx", hero, "origin")] = AddSpecialEffectTarget("Effects\\MagicShieldBlue.mdx", hero, "origin");
		SaveBoolean(udg_hash, h, 'f', true);
		SaveEffectHandle(udg_hash, h, 'g', ef);
		if (LoadBoolean(udg_hash, h, 'j') == false) {
			SaveReal(udg_hash, GetHandleId(hero), 'i', (500. + (GetHeroInt(hero, true) * 3.)));
		}
	}
	hero[null] = null;
	ef[null] = null;
}
bool Trig_Take_Archimagus_Armor_Conditions() {
	return GetItemTypeId(GetManipulatedItem()) == 'I05A' && CountItemOfTypeOnUnit(GetTriggerUnit(), 'I05A') == 1;
}
void InitTrig_Take_Archimagus_Armor() {
	int index = 0;
	gg_trg_Take_Archimagus_Armor[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Take_Archimagus_Armor, Player(index), EVENT_PLAYER_UNIT_PICKUP_ITEM, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Take_Archimagus_Armor, Condition(Trig_Take_Archimagus_Armor_Conditions));
	TriggerAddAction(gg_trg_Take_Archimagus_Armor, Trig_Take_Archimagus_Armor_Actions);
}
void Trig_Sorcerers_Talisman_Cast_Actions() {
	udg_Temp_Unit[GetSpellTargetUnit()] = GetSpellTargetUnit();
}
bool Trig_Sorcerers_Talisman_Cast_Conditions() {
	return GetSpellAbilityId() == 'A0LW' || GetSpellAbilityId() == 'A0LZ' || GetSpellAbilityId() == 'A0M0' || GetSpellAbilityId() == 'A0M1';
}
void InitTrig_Sorcerers_Talisman_Cast() {
	int index = 0;
	gg_trg_Sorcerers_Talisman_Cast[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Sorcerers_Talisman_Cast, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Sorcerers_Talisman_Cast, Condition(Trig_Sorcerers_Talisman_Cast_Conditions));
	TriggerAddAction(gg_trg_Sorcerers_Talisman_Cast, Trig_Sorcerers_Talisman_Cast_Actions);
}
void Trig_Sorcerers_Talisman_Periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	unit target = LoadUnitHandle(udg_hash, h, 2);
	effect ef;
	bool ally = LoadBoolean(udg_hash, h, 4);
	float heal = LoadReal(udg_hash, h, 5);
	float damage = LoadReal(udg_hash, h, 6);
	int wait = LoadInteger(udg_hash, h, 7);
	if (wait > 0) {
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 7, wait);
		if (ally && GetUnitState(target, UNIT_STATE_LIFE) > .405) {
			SetUnitState(target, UNIT_STATE_LIFE, GetUnitState(target, UNIT_STATE_LIFE) + heal);
		else
			if (IsUnitType(target, UNIT_TYPE_MAGIC_IMMUNE) == false) {
				UnitDamageTarget(caster, target, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			}
		}
	else
		DestroyTimer(t);
		ef[LoadEffectHandle(udg_hash, h, 3)] = LoadEffectHandle(udg_hash, h, 3);
		DestroyEffect(ef);
		FlushChildHashtable(udg_hash, h);
	}
	t[null] = null;
	caster[null] = null;
	target[null] = null;
}
void Trig_Sorcerers_Talisman_Actions() {
	unit caster = GetManipulatingUnit();
	unit target = udg_Temp_Unit;
	player p = GetOwningPlayer(caster);
	timer t = CreateTimer();
	int h = GetHandleId(t);
	int lvl;
	item it = GetManipulatedItem();
	int charges = GetItemCharges(it);
	int id = GetItemTypeId(it);
	effect ef;
	bool ally;
	float heal;
	float damage;
	int wait;
	if (charges != 0) {
		SetItemCharges(it, charges + 1);
	}
	if (charges == 0) {
		SetItemCharges(it, 1);
	}
	if (GetItemCharges(it) <= 7) {
		SimError(p, "Для Применения необходимо минимум 8 душ.");
	else
		if (id == 'I055') {
			lvl[1] = 1;
		}
		if (id == 'I056') {
			lvl[2] = 2;
		}
		if (id == 'I057') {
			lvl[3] = 3;
		}
		if (id == 'I058') {
			lvl[4] = 4;
		}
		wait[8 - lvl] = 8 - lvl;
		heal[(125. + (75. * lvl)) / wait] = (125. + (75. * lvl)) / wait;
		damage[(200. + (100. * lvl)) / wait] = (200. + (100. * lvl)) / wait;
		SetItemCharges(it, GetItemCharges(it) - 8);
		if (IsUnitEnemy(target, p) && IsUnitType(target, UNIT_TYPE_STRUCTURE) == false && IsUnitType(target, UNIT_TYPE_MAGIC_IMMUNE) == false) {
			ef[AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Voodoo\\VoodooAuraTarget.mdl", target, "overhead")] = AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Voodoo\\VoodooAuraTarget.mdl", target, "overhead");
			ally[false] = false;
		}
		if (IsUnitAlly(target, p) && IsUnitType(target, UNIT_TYPE_STRUCTURE) == false && IsUnitType(target, UNIT_TYPE_MAGIC_IMMUNE) == false) {
			ef[AddSpecialEffectTarget("Abilities\\Spells\\Items\\StaffOfSanctuary\\Staff_Sanctuary_Target.mdl", target, "chest")] = AddSpecialEffectTarget("Abilities\\Spells\\Items\\StaffOfSanctuary\\Staff_Sanctuary_Target.mdl", target, "chest");
			ally[true] = true;
		}
		DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\EtherealForm\\SpiritWalkerChange.mdl", caster, "origin"), 2.5);
		DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\EtherealForm\\SpiritWalkerChange.mdl", target, "origin"), 3.);
		SaveUnitHandle(udg_hash, h, 1, caster);
		SaveUnitHandle(udg_hash, h, 2, target);
		SaveEffectHandle(udg_hash, h, 3, ef);
		SaveBoolean(udg_hash, h, 4, ally);
		SaveReal(udg_hash, h, 5, heal);
		SaveReal(udg_hash, h, 6, damage);
		SaveInteger(udg_hash, h, 7, wait);
		TimerStart(t, 1., true, Trig_Sorcerers_Talisman_Periodic_Actions);
	}
	caster[null] = null;
	target[null] = null;
	p[null] = null;
	t[null] = null;
	it[null] = null;
	ef[null] = null;
}
bool Trig_Sorcerers_Talisman_Conditions() {
	return GetItemTypeId(GetManipulatedItem()) == 'I055' || GetItemTypeId(GetManipulatedItem()) == 'I056' || GetItemTypeId(GetManipulatedItem()) == 'I057' || GetItemTypeId(GetManipulatedItem()) == 'I058';
}
void InitTrig_Sorcerers_Talisman() {
	int index = 0;
	gg_trg_Sorcerers_Talisman[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Sorcerers_Talisman, Player(index), EVENT_PLAYER_UNIT_USE_ITEM, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Sorcerers_Talisman, Condition(Trig_Sorcerers_Talisman_Conditions));
	TriggerAddAction(gg_trg_Sorcerers_Talisman, Trig_Sorcerers_Talisman_Actions);
}
bool Trig_Sorcerers_Talisman_Dead_Unit_Condition_Actions() {
	return GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405 && GetUnitTypeId(GetFilterUnit()) != 'h00U' && IsUnitEnemy(udg_Temp_Unit, GetOwningPlayer(GetFilterUnit())) && (CountItemOfTypeOnUnit(GetFilterUnit(), 'I055') >= 1 || CountItemOfTypeOnUnit(GetFilterUnit(), 'I056') >= 1 || CountItemOfTypeOnUnit(GetFilterUnit(), 'I057') >= 1 || CountItemOfTypeOnUnit(GetFilterUnit(), 'I058') >= 1);
}
void Trig_Sorcerers_Talisman_Dead_Unit_Actions() {
	unit enemy = GetDyingUnit();
	float x = GetUnitX(enemy);
	float y = GetUnitY(enemy);
	group g = CreateGroup();
	unit dammi = CreateUnit(GetOwningPlayer(enemy), 'h00U', x, y, .0);
	item talisman;
	int lop = 1;
	UnitApplyTimedLife(dammi, 'BTLF', 2.);
	udg_Temp_Unit[enemy] = enemy;
	GroupEnumUnitsInRange(g, x, y, 1200., Filter(Trig_Sorcerers_Talisman_Dead_Unit_Condition_Actions));
	FilterMostNearUnit(g, dammi);
	if (udg_Unit_FilterMostNearUnit != null && SquareRoot(((GetUnitX(udg_Unit_FilterMostNearUnit) - x) * (GetUnitX(udg_Unit_FilterMostNearUnit) - x)) + ((GetUnitY(udg_Unit_FilterMostNearUnit) - y) * (GetUnitY(udg_Unit_FilterMostNearUnit) - y))) <= 1200.) {
		talisman[UnitItemInSlot(udg_Unit_FilterMostNearUnit, 0)] = UnitItemInSlot(udg_Unit_FilterMostNearUnit, 0);
		while (true) {
			if (lop > 5) break;
			if (((GetItemTypeId(talisman) == 'I055' && GetItemCharges(talisman) < 24) || (GetItemTypeId(talisman) == 'I056' && GetItemCharges(talisman) < 32) || (GetItemTypeId(talisman) == 'I057' && GetItemCharges(talisman) < 40) || (GetItemTypeId(talisman) == 'I058' && GetItemCharges(talisman) < 48))) {
				SetItemCharges(talisman, GetItemCharges(talisman) + 1);
				lop[6] = 6;
			else
				talisman[UnitItemInSlot(udg_Unit_FilterMostNearUnit, lop)] = UnitItemInSlot(udg_Unit_FilterMostNearUnit, lop);
			}
			lop[lop + 1] = lop + 1;
		}
	}
	enemy[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	talisman[null] = null;
}
bool Trig_Sorcerers_Talisman_Dead_Unit_Condition() {
	return GetUnitTypeId(GetDyingUnit()) != 'h00U';
}
void InitTrig_Sorcerers_Talisman_Dead_Unit() {
	int index = 0;
	gg_trg_Sorcerers_Talisman_Dead_Unit[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Sorcerers_Talisman_Dead_Unit, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Sorcerers_Talisman_Dead_Unit, Condition(Trig_Sorcerers_Talisman_Dead_Unit_Condition));
	TriggerAddAction(gg_trg_Sorcerers_Talisman_Dead_Unit, Trig_Sorcerers_Talisman_Dead_Unit_Actions);
}
void Trig_Orc_Banner_Periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit hero = LoadUnitHandle(udg_hash, h, 1);
	group gmain = LoadGroupHandle(udg_hash, h, 2);
	int bonushp = LoadInteger(udg_hash, h, 3);
	int bonusa = LoadInteger(udg_hash, h, 4);
	int bonusstat = LoadInteger(udg_hash, h, 5);
	int lvl = LoadInteger(udg_hash, h, 6);
	item it = LoadItemHandle(udg_hash, h, 7);
	group g = CreateGroup();
	group g2 = CreateGroup();
	player p = GetOwningPlayer(hero);
	unit Picked;
	string s;
	float x = GetUnitX(hero);
	float y = GetUnitY(hero);
	bool dest = false;
	bool tdest = false;
	if (UnitHasItem(hero, it)) {
		if (GetItemTypeId(it) == 'I052' && LoadInteger(udg_hash, GetHandleId(hero), 'e') == 2) {
			dest[true] = true;
		}
		if (dest == false) {
			GroupEnumUnitsInRange(g, GetUnitX(hero), GetUnitY(hero), 800., null);
			while (true) {
				Picked[FirstOfGroup(g)] = FirstOfGroup(g);
				if (Picked == null) break;
				if (IsUnitAlly(Picked, p) && IsUnitInGroup(Picked, gmain) == false && (LoadInteger(udg_hash, GetHandleId(Picked), 'e') == 0 || (LoadInteger(udg_hash, GetHandleId(Picked), 'e') == 1 && lvl == 2)) && IsUnitType(Picked, UNIT_TYPE_HERO) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
					SetAttackAbilityLevel(Picked, bonusa);
					SetUnitMaxState(Picked, UNIT_STATE_MAX_LIFE, bonushp);
					s[LoadStr(udg_hash, GetUnitTypeId(Picked), 70)] = LoadStr(udg_hash, GetUnitTypeId(Picked), 70);
					if (s == "str") {
						SetHeroStr(Picked, GetHeroStr(Picked, false) + bonusstat, true);
					}
					if (s == "agi") {
						SetHeroAgi(Picked, GetHeroAgi(Picked, false) + bonusstat, true);
					}
					if (s == "int") {
						SetHeroInt(Picked, GetHeroInt(Picked, false) + bonusstat, true);
					}
					SaveInteger(udg_hash, GetHandleId(Picked), 'e', lvl);
					GroupAddUnit(gmain, Picked);
				}
				GroupRemoveUnit(g, Picked);
			}
			Picked[null] = null;
			GroupAddGroup(gmain, g2);
			while (true) {
				Picked[FirstOfGroup(g2)] = FirstOfGroup(g2);
				if (Picked == null) break;
				if (SquareRoot((x - GetUnitX(Picked)) * (x - GetUnitX(Picked)) + (y - GetUnitY(Picked)) * (y - GetUnitY(Picked))) > 800.) {
					SetAttackAbilityLevel(Picked, -bonusa);
					SetUnitMaxState(Picked, UNIT_STATE_MAX_LIFE, -bonushp);
					s[LoadStr(udg_hash, GetUnitTypeId(Picked), 70)] = LoadStr(udg_hash, GetUnitTypeId(Picked), 70);
					if (s == "str") {
						SetHeroStr(Picked, GetHeroStr(Picked, false) - bonusstat, true);
					}
					if (s == "agi") {
						SetHeroAgi(Picked, GetHeroAgi(Picked, false) - bonusstat, true);
					}
					if (s == "int") {
						SetHeroInt(Picked, GetHeroInt(Picked, false) - bonusstat, true);
					}
					if (LoadInteger(udg_hash, GetHandleId(Picked), 'e') == lvl) {
						SaveInteger(udg_hash, GetHandleId(Picked), 'e', 0);
					}
					GroupRemoveUnit(gmain, Picked);
				}
				GroupRemoveUnit(g2, Picked);
			}
			Picked[null] = null;
		}
		SaveGroupHandle(udg_hash, h, 2, gmain);
	else
		dest[true] = true;
	}
	if (dest) {
		while (true) {
			Picked[FirstOfGroup(gmain)] = FirstOfGroup(gmain);
			if (Picked == null) break;
			SetAttackAbilityLevel(Picked, -bonusa);
			SetUnitMaxState(Picked, UNIT_STATE_MAX_LIFE, -bonushp);
			s[LoadStr(udg_hash, GetUnitTypeId(Picked), 70)] = LoadStr(udg_hash, GetUnitTypeId(Picked), 70);
			if (s == "str") {
				SetHeroStr(Picked, GetHeroStr(Picked, false) - bonusstat, true);
			}
			if (s == "agi") {
				SetHeroAgi(Picked, GetHeroAgi(Picked, false) - bonusstat, true);
			}
			if (s == "int") {
				SetHeroInt(Picked, GetHeroInt(Picked, false) - bonusstat, true);
			}
			if (LoadInteger(udg_hash, GetHandleId(Picked), 'e') == lvl) {
				SaveInteger(udg_hash, GetHandleId(Picked), 'e', 0);
			}
			GroupRemoveUnit(gmain, Picked);
		}
	}
	if (UnitHasItem(hero, it) == false) {
		GroupClear(gmain);
		DestroyGroup(gmain);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	else
		SaveGroupHandle(udg_hash, h, 2, gmain);
	}
	t[null] = null;
	hero[null] = null;
	gmain[null] = null;
	it[null] = null;
	p[null] = null;
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	GroupClear(g2);
	DestroyGroup(g2);
	g2[null] = null;
}
void Trig_Orc_Banner_Actions() {
	unit hero = GetTriggerUnit();
	group g = CreateGroup();
	group gmain = CreateGroup();
	player p = GetOwningPlayer(hero);
	unit Picked;
	int bonushp;
	int bonusa;
	int bonusstat;
	int lvl;
	item it = GetManipulatedItem();
	string s;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	if (GetItemTypeId(it) == 'I052') {
		bonushp[$AF] = $AF;
		bonusa[20] = 20;
		bonusstat[7] = 7;
		lvl[1] = 1;
	else
		bonushp[$FA] = $FA;
		bonusa[30] = 30;
		bonusstat[$A] = $A;
		lvl[2] = 2;
	}
	GroupEnumUnitsInRange(g, GetUnitX(hero), GetUnitY(hero), 800., null);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if (IsUnitAlly(Picked, p) && (LoadInteger(udg_hash, GetHandleId(Picked), 'e') == 0 || (LoadInteger(udg_hash, GetHandleId(Picked), 'e') == 1 && lvl == 2)) && IsUnitType(Picked, UNIT_TYPE_HERO) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
			SetAttackAbilityLevel(Picked, bonusa);
			SetUnitMaxState(Picked, UNIT_STATE_MAX_LIFE, bonushp);
			s[LoadStr(udg_hash, GetUnitTypeId(Picked), 70)] = LoadStr(udg_hash, GetUnitTypeId(Picked), 70);
			if (s == "str") {
				SetHeroStr(Picked, GetHeroStr(Picked, false) + bonusstat, true);
			}
			if (s == "agi") {
				SetHeroAgi(Picked, GetHeroAgi(Picked, false) + bonusstat, true);
			}
			if (s == "int") {
				SetHeroInt(Picked, GetHeroInt(Picked, false) + bonusstat, true);
			}
			SaveInteger(udg_hash, GetHandleId(Picked), 'e', lvl);
			GroupAddUnit(gmain, Picked);
		}
		GroupRemoveUnit(g, Picked);
	}
	SaveUnitHandle(udg_hash, h, 1, hero);
	SaveGroupHandle(udg_hash, h, 2, gmain);
	SaveInteger(udg_hash, h, 3, bonushp);
	SaveInteger(udg_hash, h, 4, bonusa);
	SaveInteger(udg_hash, h, 5, bonusstat);
	SaveInteger(udg_hash, h, 6, lvl);
	SaveItemHandle(udg_hash, h, 7, it);
	TimerStart(t, .3, true, Trig_Orc_Banner_Periodic_Actions);
	hero[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	gmain[null] = null;
	p[null] = null;
	Picked[null] = null;
	it[null] = null;
	t[null] = null;
}
bool Trig_Orc_Banner_Conditions() {
	return (GetItemTypeId(GetManipulatedItem()) == 'I052' || (GetItemTypeId(GetManipulatedItem()) == 'I053'));
}
void InitTrig_Orc_Banner() {
	int index = 0;
	gg_trg_Orc_Banner[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Orc_Banner, Player(index), EVENT_PLAYER_UNIT_PICKUP_ITEM, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Orc_Banner, Condition(Trig_Orc_Banner_Conditions));
	TriggerAddAction(gg_trg_Orc_Banner, Trig_Orc_Banner_Actions);
}
void Trig_Devil_Axe_Remove_Stregnth_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	int strenght = LoadInteger(udg_hash, GetHandleId(caster), 'd');
	effect ef;
	SetHeroStr(caster, GetHeroStr(caster, false) - strenght, true);
	ef[LoadEffectHandle(udg_hash, h, 2)] = LoadEffectHandle(udg_hash, h, 2);
	DestroyEffect(ef);
	ef[null] = null;
	ef[LoadEffectHandle(udg_hash, h, 3)] = LoadEffectHandle(udg_hash, h, 3);
	DestroyEffect(ef);
	ef[null] = null;
	SaveBoolean(udg_hash, GetHandleId(caster), 99, false);
	SaveInteger(udg_hash, GetHandleId(caster), 'd', 0);
	DestroyTimer(t);
	FlushChildHashtable(udg_hash, h);
	t[null] = null;
	caster[null] = null;
}
void Trig_Devil_Axe_Actions() {
	unit caster = GetSpellAbilityUnit();
	timer t = CreateTimer();
	int h = GetHandleId(t);
	unit dammi = CreateUnit(GetOwningPlayer(caster), 'h00U', GetUnitX(caster), GetUnitY(caster), .0);
	effect ef;
	UnitApplyTimedLife(dammi, 'BTLF', 1.);
	UnitAddAbility(dammi, 'A0LT');
	IssueTargetOrderById(dammi, $D00F1, caster);
	SaveUnitHandle(udg_hash, h, 1, caster);
	ef[AddSpecialEffectTarget("Effects\\EvilMissileofShadowyDOOMV2.mdx", caster, "weapon")] = AddSpecialEffectTarget("Effects\\EvilMissileofShadowyDOOMV2.mdx", caster, "weapon");
	SaveEffectHandle(udg_hash, h, 2, ef);
	ef[null] = null;
	ef[AddSpecialEffectTarget("Effects\\BloodCloudTarget.mdx", caster, "overhead")] = AddSpecialEffectTarget("Effects\\BloodCloudTarget.mdx", caster, "overhead");
	SaveEffectHandle(udg_hash, h, 3, ef);
	ef[null] = null;
	SaveBoolean(udg_hash, GetHandleId(caster), 99, true);
	TimerStart(t, 30., false, Trig_Devil_Axe_Remove_Stregnth_Actions);
	caster[null] = null;
	t[null] = null;
	dammi[null] = null;
}
bool Trig_Devil_Axe_Conditions() {
	return GetSpellAbilityId() == 'A0LS';
}
void InitTrig_Devil_Axe() {
	int index = 0;
	gg_trg_Devil_Axe[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Devil_Axe, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Devil_Axe, Condition(Trig_Devil_Axe_Conditions));
	TriggerAddAction(gg_trg_Devil_Axe, Trig_Devil_Axe_Actions);
}
void Trig_Devil_Axe_Kill_Unit_Actions() {
	SetHeroStr(GetKillingUnit(), GetHeroStr(GetKillingUnit(), false) + 3, true);
	SetUnitState(GetKillingUnit(), UNIT_STATE_LIFE, GetUnitState(GetKillingUnit(), UNIT_STATE_LIFE) + (GetUnitState(GetDyingUnit(), UNIT_STATE_MAX_LIFE) * .15));
	DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPeasant.mdl", GetUnitX(GetDyingUnit()), GetUnitY(GetDyingUnit())));
	DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodSorceress.mdl", GetUnitX(GetDyingUnit()), GetUnitY(GetDyingUnit())));
	DestroyEffectWithWait(AddSpecialEffectTarget("Effects\\BloodBreathDamage.mdx", GetKillingUnit(), "origin"), 2.);
	SaveInteger(udg_hash, GetHandleId(GetKillingUnit()), 'd', LoadInteger(udg_hash, GetHandleId(GetKillingUnit()), 'd') + 3);
}
bool Trig_Devil_Axe_Kill_Unit_Conditions() {
	return LoadBoolean(udg_hash, GetHandleId(GetKillingUnit()), 99);
}
void InitTrig_Devil_Axe_Kill_Unit() {
	int index = 0;
	gg_trg_Devil_Axe_Kill_Unit[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Devil_Axe_Kill_Unit, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Devil_Axe_Kill_Unit, Condition(Trig_Devil_Axe_Kill_Unit_Conditions));
	TriggerAddAction(gg_trg_Devil_Axe_Kill_Unit, Trig_Devil_Axe_Kill_Unit_Actions);
}
void Trig_Tokugawas_Katan_Kill_Unit_Actions() {
	SetHeroAgi(GetKillingUnit(), GetHeroAgi(GetKillingUnit(), false) + 1, true);
}
bool Trig_Tokugawas_Katan_Kill_Unit_Conditions() {
	return LoadBoolean(udg_hash, GetHandleId(GetKillingUnit()), 98) && GetRandomInt(1, 'd') <= 20;
}
void InitTrig_Tokugawas_Katan_Kill_Unit() {
	int index = 0;
	gg_trg_Tokugawas_Katan_Kill_Unit[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Tokugawas_Katan_Kill_Unit, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Tokugawas_Katan_Kill_Unit, Condition(Trig_Tokugawas_Katan_Kill_Unit_Conditions));
	TriggerAddAction(gg_trg_Tokugawas_Katan_Kill_Unit, Trig_Tokugawas_Katan_Kill_Unit_Actions);
}
void Trig_Tokugawas_Katan_Remove_Agi_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	int bonus = LoadInteger(udg_hash, h, 2);
	effect ef = LoadEffectHandle(udg_hash, h, 3);
	effect ef2 = LoadEffectHandle(udg_hash, h, 4);
	int clearagi = GetHeroAgi(caster, false);
	SetHeroAgi(caster, clearagi - bonus, true);
	SaveBoolean(udg_hash, GetHandleId(caster), 98, false);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	DestroyEffect(ef);
	DestroyEffect(ef2);
	caster[null] = null;
	ef[null] = null;
	ef2[null] = null;
	t[null] = null;
}
void Trig_Tokugawas_Katan_Actions() {
	unit caster = GetSpellAbilityUnit();
	int agi = GetHeroAgi(caster, true);
	int clearagi = GetHeroAgi(caster, false);
	int bonus = R2I(agi * .7);
	effect ef = AddSpecialEffectTarget("Abilities\\Spells\\Other\\AcidBomb\\BottleImpact.mdl", caster, "weapon");
	effect ef2 = AddSpecialEffectTarget("Abilities\\Spells\\Other\\Drain\\DrainCaster.mdl", caster, "head");
	timer t = CreateTimer();
	int h = GetHandleId(t);
	SetHeroAgi(caster, clearagi + bonus, true);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveInteger(udg_hash, h, 2, bonus);
	SaveEffectHandle(udg_hash, h, 3, ef);
	SaveEffectHandle(udg_hash, h, 4, ef2);
	SaveBoolean(udg_hash, GetHandleId(caster), 98, true);
	TimerStart(t, 8., false, Trig_Tokugawas_Katan_Remove_Agi_Actions);
	caster[null] = null;
	ef[null] = null;
	ef2[null] = null;
	t[null] = null;
}
bool Trig_Tokugawas_Katan_Conditions() {
	return GetSpellAbilityId() == 'A0LO';
}
void InitTrig_Tokugawas_Katan() {
	int index = 0;
	gg_trg_Tokugawas_Katan[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Tokugawas_Katan, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Tokugawas_Katan, Condition(Trig_Tokugawas_Katan_Conditions));
	TriggerAddAction(gg_trg_Tokugawas_Katan, Trig_Tokugawas_Katan_Actions);
}
void Trig_Kings_Armor_Remove_Buffs_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	group g = LoadGroupHandle(udg_hash, h, 2);
	int count = LoadInteger(udg_hash, h, 3);
	effect ef;
	unit Picked;
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		SetArmorAbilityLevel(Picked, -$F);
		SetAttackSpeedAbilityLevel(Picked, -(20 + LoadInteger(udg_hash, GetHandleId(Picked), 97)));
		SetUnitLifeAndManaRegeneration(Picked, "life", -25);
		ef[LoadEffectHandle(udg_hash, h, count)] = LoadEffectHandle(udg_hash, h, count);
		DestroyEffect(ef);
		ef[null] = null;
		count[count - 1] = count - 1;
		GroupRemoveUnit(g, Picked);
	}
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	t[null] = null;
	caster[null] = null;
}
void Trig_Kings_Armor_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	int armor = $F;
	int hpregen = 25;
	int as = 20;
	int asbonus;
	group g = CreateGroup();
	group g2 = CreateGroup();
	unit Picked;
	effect ef;
	unit dammi;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	int count = $A;
	DestroyEffect(AddSpecialEffectTarget("Effects\\BattleCryCaster.mdl", caster, "origin"));
	GroupEnumUnitsInRange(g, x, y, 750., null);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if (IsUnitAlly(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			dammi[CreateUnit(p, 'h00U', x, y, .0)] = CreateUnit(p, 'h00U', x, y, .0);
			UnitApplyTimedLife(dammi, 'BTLF', 2.);
			UnitAddAbility(dammi, 'A0LD');
			IssueTargetOrderById(dammi, $D0062, Picked);
			dammi[null] = null;
			SetArmorAbilityLevel(Picked, armor);
			asbonus[R2I((R2I((1. - GetUnitState(Picked, UNIT_STATE_LIFE) / GetUnitState(Picked, UNIT_STATE_MAX_LIFE)) / .1) * 8))] = R2I((R2I((1. - GetUnitState(Picked, UNIT_STATE_LIFE) / GetUnitState(Picked, UNIT_STATE_MAX_LIFE)) / .1) * 8));
			SetAttackSpeedAbilityLevel(Picked, as + asbonus);
			SetUnitLifeAndManaRegeneration(Picked, "life", hpregen);
			count[count + 1] = count + 1;
			ef[AddSpecialEffectTarget("Abilities\\Spells\\Human\\InnerFire\\InnerFireTarget.mdl", Picked, "overhead")] = AddSpecialEffectTarget("Abilities\\Spells\\Human\\InnerFire\\InnerFireTarget.mdl", Picked, "overhead");
			SaveEffectHandle(udg_hash, h, count, ef);
			ef[null] = null;
			SaveInteger(udg_hash, GetHandleId(Picked), 97, asbonus);
			GroupAddUnit(g2, Picked);
		}
		GroupRemoveUnit(g, Picked);
	}
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveGroupHandle(udg_hash, h, 2, g2);
	SaveInteger(udg_hash, h, 3, count);
	TimerStart(t, 10., false, Trig_Kings_Armor_Remove_Buffs_Actions);
	caster[null] = null;
	p[null] = null;
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	g2[null] = null;
	t[null] = null;
}
bool Trig_Kings_Armor_Conditions() {
	return GetSpellAbilityId() == 'A0LC';
}
void InitTrig_Kings_Armor() {
	int index = 0;
	gg_trg_Kings_Armor[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Kings_Armor, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Kings_Armor, Condition(Trig_Kings_Armor_Conditions));
	TriggerAddAction(gg_trg_Kings_Armor, Trig_Kings_Armor_Actions);
}
void Trig_Steel_Bib_Remove_Buffs_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Defend\\DefendCaster.mdl", caster, "origin"));
	SetArmorAbilityLevel(caster, -20);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
	caster[null] = null;
}
void Trig_Steel_Bib_Actions() {
	unit caster = GetSpellAbilityUnit();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	unit dammi = CreateUnit(GetOwningPlayer(caster), 'h00U', x, y, .0);
	timer t = CreateTimer();
	int h = GetHandleId(t);
	UnitApplyTimedLife(dammi, 'BTLF', 1.);
	UnitAddAbility(dammi, 'A0L5');
	IssueTargetOrderById(dammi, $D006B, caster);
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Defend\\DefendCaster.mdl", caster, "origin"));
	SetArmorAbilityLevel(caster, 20);
	SaveUnitHandle(udg_hash, h, 1, caster);
	TimerStart(t, 7., false, Trig_Steel_Bib_Remove_Buffs_Actions);
	caster[null] = null;
	dammi[null] = null;
	t[null] = null;
}
bool Trig_Steel_Bib_Conditions() {
	return GetSpellAbilityId() == 'A0L4';
}
void InitTrig_Steel_Bib() {
	int index = 0;
	gg_trg_Steel_Bib[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Steel_Bib, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Steel_Bib, Condition(Trig_Steel_Bib_Conditions));
	TriggerAddAction(gg_trg_Steel_Bib, Trig_Steel_Bib_Actions);
}
void Trig_Archimagus_Staff_Periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 20);
	float damage = LoadReal(udg_hash, h, 21);
	int wait = LoadInteger(udg_hash, h, 22);
	float angle = LoadReal(udg_hash, h, 23);
	group gdamage = LoadGroupHandle(udg_hash, h, 24);
	float dammiangle = LoadReal(udg_hash, h, 25);
	float dist = LoadReal(udg_hash, h, 27);
	float xt = LoadReal(udg_hash, h, 28);
	float yt = LoadReal(udg_hash, h, 29);
	player p = GetOwningPlayer(caster);
	group gdammi = CreateGroup();
	group g = CreateGroup();
	float xdammi;
	float ydammi;
	unit Picked;
	unit dammi;
	int lopa = 1;
	effect ef;
	if (wait > 0) {
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 22, wait);
		dammiangle[dammiangle + 7.2] = dammiangle + 7.2;
		dist[dist - 5.5] = dist - 5.5;
		SaveReal(udg_hash, h, 25, dammiangle);
		SaveReal(udg_hash, h, 27, dist);
		while (true) {
			if (lopa > 5) break;
			dammi[LoadUnitHandle(udg_hash, h, lopa)] = LoadUnitHandle(udg_hash, h, lopa);
			xdammi[xt + dist * Cos((dammiangle + (72. * (lopa - 1))) * bj_DEGTORAD)] = xt + dist * Cos((dammiangle + (72. * (lopa - 1))) * bj_DEGTORAD);
			ydammi[yt + dist * Sin((dammiangle + (72. * (lopa - 1))) * bj_DEGTORAD)] = yt + dist * Sin((dammiangle + (72. * (lopa - 1))) * bj_DEGTORAD);
			SetUnitPosition(dammi, xdammi, ydammi);
			SetUnitFacing(dammi, dammiangle + (72. * (lopa - 1)));
			GroupEnumUnitsInRange(gdammi, xdammi, ydammi, 100., null);
			GroupAddGroup(gdammi, g);
			lopa[lopa + 1] = lopa + 1;
			dammi[null] = null;
			ef[null] = null;
		}
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (IsUnitAlly(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitInGroup(Picked, gdamage) == false && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
				SetUnitState(Picked, UNIT_STATE_MANA, GetUnitState(Picked, UNIT_STATE_MANA) + 125.);
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\ReplenishManaCaster.mdl", Picked, "origin"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIma\\AImaTarget.mdl", Picked, "origin"));
				GroupAddUnit(gdamage, Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
		Picked[null] = null;
		SaveGroupHandle(udg_hash, h, 24, gdamage);
	else
		while (true) {
			if (lopa > 5) break;
			dammi[LoadUnitHandle(udg_hash, h, lopa)] = LoadUnitHandle(udg_hash, h, lopa);
			ef[LoadEffectHandle(udg_hash, h, lopa + 5)] = LoadEffectHandle(udg_hash, h, lopa + 5);
			KillUnit(dammi);
			DestroyEffect(ef);
			lopa[lopa + 1] = lopa + 1;
			dammi[null] = null;
			ef[null] = null;
		}
		GroupEnumUnitsInRange(g, xt, yt, 275., null);
		dammi[CreateUnit(p, 'h00U', xt, yt, .0)] = CreateUnit(p, 'h00U', xt, yt, .0);
		SetUnitScale(dammi, 4., 4., 1.);
		DestroyEffect(AddSpecialEffectTarget("Effects\\Fireworksblue.mdl", dammi, "chest"));
		DestroyEffect(AddSpecialEffectTarget("Effects\\Fireworksblue.mdl", dammi, "chest"));
		dammi[null] = null;
		DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NEDeathMedium\\NEDeath.mdl", xt, yt));
		DestroyEffect(AddSpecialEffect("Effects\\MagicStomp.mdl", xt, yt));
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				DestroyEffect(AddSpecialEffectTarget("Effects\\Fireworksblue.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl", Picked, "origin"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl", Picked, "chest"));
			}
			GroupRemoveUnit(g, Picked);
		}
		Picked[null] = null;
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
		GroupClear(gdamage);
		DestroyGroup(gdamage);
	}
	t[null] = null;
	caster[null] = null;
	gdamage[null] = null;
	p[null] = null;
	GroupClear(gdammi);
	DestroyGroup(gdammi);
	gdammi[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	Picked[null] = null;
}
void Trig_Archimagus_Staff_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	location loc = GetSpellTargetLoc();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	float xt = GetLocationX(loc);
	float yt = GetLocationY(loc);
	timer t = CreateTimer();
	int h = GetHandleId(t);
	unit dammi;
	effect ef;
	float xdammi;
	float ydammi;
	int lopa = 1;
	group gdamage = CreateGroup();
	float angle;
	float dammiangle = -72.;
	float damage = 100. + GetHeroInt(caster, true) * 1.75;
	int wait = 50;
	angle[bj_RADTODEG * Atan2(yt - y, xt - x)] = bj_RADTODEG * Atan2(yt - y, xt - x);
	while (true) {
		if (lopa > 5) break;
		xdammi[xt + 275. * Cos((angle + dammiangle) * bj_DEGTORAD)] = xt + 275. * Cos((angle + dammiangle) * bj_DEGTORAD);
		ydammi[yt + 275. * Sin((angle + dammiangle) * bj_DEGTORAD)] = yt + 275. * Sin((angle + dammiangle) * bj_DEGTORAD);
		dammiangle[dammiangle + 72.] = dammiangle + 72.;
		dammi[CreateUnit(p, 'h00U', xdammi, ydammi, dammiangle)] = CreateUnit(p, 'h00U', xdammi, ydammi, dammiangle);
		UnitAddAbility(dammi, 'Amrf');
		UnitRemoveAbility(dammi, 'Amrf');
		SetUnitFlyHeight(dammi, 50., .0);
		ef[AddSpecialEffectTarget("Effects\\Magic Missile.mdl", dammi, "chest")] = AddSpecialEffectTarget("Effects\\Magic Missile.mdl", dammi, "chest");
		SaveUnitHandle(udg_hash, h, lopa, dammi);
		SaveEffectHandle(udg_hash, h, lopa + 5, ef);
		lopa[lopa + 1] = lopa + 1;
		dammi[null] = null;
		ef[null] = null;
	}
	SaveUnitHandle(udg_hash, h, 20, caster);
	SaveReal(udg_hash, h, 21, damage);
	SaveInteger(udg_hash, h, 22, wait);
	SaveReal(udg_hash, h, 23, angle);
	SaveGroupHandle(udg_hash, h, 24, gdamage);
	SaveReal(udg_hash, h, 25, .0);
	SaveReal(udg_hash, h, 27, 275.);
	SaveReal(udg_hash, h, 28, xt);
	SaveReal(udg_hash, h, 29, yt);
	TimerStart(t, .03, true, Trig_Archimagus_Staff_Periodic_Actions);
	caster[null] = null;
	p[null] = null;
	t[null] = null;
	gdamage[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
}
bool Trig_Archimagus_Staff_Conditions() {
	return GetSpellAbilityId() == 'A0L1';
}
void InitTrig_Archimagus_Staff() {
	int index = 0;
	gg_trg_Archimagus_Staff[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Archimagus_Staff, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Archimagus_Staff, Condition(Trig_Archimagus_Staff_Conditions));
	TriggerAddAction(gg_trg_Archimagus_Staff, Trig_Archimagus_Staff_Actions);
}
void Trig_Isidors_Scepter_Add_Mana_Caster_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	SetUnitState(caster, UNIT_STATE_MANA, GetUnitState(caster, UNIT_STATE_MANA) + 175.);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
	caster[null] = null;
}
void Trig_Isidors_Scepter_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	location loc = GetSpellTargetLoc();
	float x = GetLocationX(loc);
	float y = GetLocationY(loc);
	float heal = 200. + (GetHeroInt(caster, true) * 3.);
	float mana = 175.;
	group g = CreateGroup();
	unit Picked;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl", x, y));
	GroupEnumUnitsInRange(g, x, y, 350., null);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if (IsUnitAlly(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			SetUnitState(Picked, UNIT_STATE_LIFE, GetUnitState(Picked, UNIT_STATE_LIFE) + heal);
			if (Picked != caster) {
				SetUnitState(Picked, UNIT_STATE_MANA, GetUnitState(Picked, UNIT_STATE_MANA) + mana);
			}
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl", Picked, "origin"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIma\\AImaTarget.mdl", Picked, "origin"));
			DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", Picked, "origin"), 2.);
		}
		GroupRemoveUnit(g, Picked);
	}
	SaveUnitHandle(udg_hash, h, 1, caster);
	TimerStart(t, .0, false, Trig_Isidors_Scepter_Add_Mana_Caster_Actions);
	caster[null] = null;
	p[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	t[null] = null;
}
bool Trig_Isidors_Scepter_Conditions() {
	return GetSpellAbilityId() == 'A0L0';
}
void InitTrig_Isidors_Scepter() {
	int index = 0;
	gg_trg_Isidors_Scepter[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Isidors_Scepter, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Isidors_Scepter, Condition(Trig_Isidors_Scepter_Conditions));
	TriggerAddAction(gg_trg_Isidors_Scepter, Trig_Isidors_Scepter_Actions);
}
void Trig_Detached_Shield_Use_Remove_Agr_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	group g = LoadGroupHandle(udg_hash, h, 2);
	int damage = LoadInteger(udg_hash, h, 4);
	int armor = LoadInteger(udg_hash, h, 5);
	effect ef;
	unit Picked;
	SetUnitLifeAndManaRegeneration(caster, "life", -35);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		SetAttackAbilityLevel(Picked, damage);
		SetArmorAbilityLevel(Picked, armor);
		ef[LoadEffectHandle(udg_hash, GetHandleId(Picked), 89)] = LoadEffectHandle(udg_hash, GetHandleId(Picked), 89);
		DestroyEffect(ef);
		ef[null] = null;
		SaveEffectHandle(udg_hash, GetHandleId(Picked), 89, null);
		GroupRemoveUnit(g, Picked);
	}
	ef[LoadEffectHandle(udg_hash, h, 3)] = LoadEffectHandle(udg_hash, h, 3);
	DestroyEffect(ef);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
	caster[null] = null;
	DestroyGroup(g);
	GroupClear(g);
	g[null] = null;
	ef[null] = null;
	Picked[null] = null;
}
void Trig_Detached_Shield_Use_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	group g = CreateGroup();
	group g2 = CreateGroup();
	unit Picked;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	effect ef;
	int damage = 20;
	int armor = 8;
	SetUnitLifeAndManaRegeneration(caster, "life", 35);
	GroupEnumUnitsInRange(g, x, y, 450., null);
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\NightElf\\BattleRoar\\RoarCaster.mdl", x, y));
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		ef[LoadEffectHandle(udg_hash, GetHandleId(Picked), 89)] = LoadEffectHandle(udg_hash, GetHandleId(Picked), 89);
		if (ef == null && GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && IsUnitEnemy(Picked, p) && GetUnitTypeId(Picked) != 'h00U') {
			GroupAddUnit(g2, Picked);
			IssueTargetOrderById(Picked, $D000F, caster);
			SetAttackAbilityLevel(Picked, -damage);
			SetArmorAbilityLevel(Picked, -armor);
			ef[AddSpecialEffectTarget("Abilities\\Spells\\Orc\\TrollBerserk\\HeadhunterWEAPONSLeft.mdl", Picked, "overhead")] = AddSpecialEffectTarget("Abilities\\Spells\\Orc\\TrollBerserk\\HeadhunterWEAPONSLeft.mdl", Picked, "overhead");
			SaveEffectHandle(udg_hash, GetHandleId(Picked), 89, ef);
			ef[null] = null;
		}
		GroupRemoveUnit(g, Picked);
	}
	ef[AddSpecialEffectTarget("Abilities\\Spells\\Other\\HowlOfTerror\\HowlTarget.mdl", caster, "chest")] = AddSpecialEffectTarget("Abilities\\Spells\\Other\\HowlOfTerror\\HowlTarget.mdl", caster, "chest");
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveGroupHandle(udg_hash, h, 2, g2);
	SaveEffectHandle(udg_hash, h, 3, ef);
	SaveInteger(udg_hash, h, 4, damage);
	SaveInteger(udg_hash, h, 5, armor);
	TimerStart(t, 7., false, Trig_Detached_Shield_Use_Remove_Agr_Actions);
	caster[null] = null;
	p[null] = null;
	DestroyGroup(g);
	GroupClear(g);
	g[null] = null;
	g2[null] = null;
	Picked[null] = null;
	t[null] = null;
	ef[null] = null;
}
bool Trig_Detached_Shield_Use_Conditions() {
	return GetSpellAbilityId() == 'A0IV';
}
void InitTrig_Detached_Shield_Use() {
	int index = 0;
	gg_trg_Detached_Shield_Use[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Detached_Shield_Use, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Detached_Shield_Use, Condition(Trig_Detached_Shield_Use_Conditions));
	TriggerAddAction(gg_trg_Detached_Shield_Use, Trig_Detached_Shield_Use_Actions);
}
void Trig_Cuirass_of_Invulnerable_Use2_Remove_Agr_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	group g = LoadGroupHandle(udg_hash, h, 2);
	int damage = LoadInteger(udg_hash, h, 4);
	int armor = LoadInteger(udg_hash, h, 5);
	effect ef;
	unit Picked;
	SetUnitLifeAndManaRegeneration(caster, "life", -75);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		SetAttackAbilityLevel(Picked, damage);
		SetArmorAbilityLevel(Picked, armor);
		ef[LoadEffectHandle(udg_hash, GetHandleId(Picked), 89)] = LoadEffectHandle(udg_hash, GetHandleId(Picked), 89);
		DestroyEffect(ef);
		ef[null] = null;
		SaveEffectHandle(udg_hash, GetHandleId(Picked), 89, null);
		GroupRemoveUnit(g, Picked);
	}
	ef[LoadEffectHandle(udg_hash, h, 3)] = LoadEffectHandle(udg_hash, h, 3);
	DestroyEffect(ef);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
	caster[null] = null;
	DestroyGroup(g);
	GroupClear(g);
	g[null] = null;
	ef[null] = null;
	Picked[null] = null;
}
void Trig_Cuirass_of_Invulnerable_Use2_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	group g = CreateGroup();
	group g2 = CreateGroup();
	unit Picked;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	effect ef;
	int damage = 30;
	int armor = $D;
	SetUnitLifeAndManaRegeneration(caster, "life", 75);
	GroupEnumUnitsInRange(g, x, y, 500., null);
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\NightElf\\BattleRoar\\RoarCaster.mdl", x, y));
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		ef[LoadEffectHandle(udg_hash, GetHandleId(Picked), 89)] = LoadEffectHandle(udg_hash, GetHandleId(Picked), 89);
		if (ef == null && GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && IsUnitEnemy(Picked, p) && GetUnitTypeId(Picked) != 'h00U') {
			GroupAddUnit(g2, Picked);
			IssueTargetOrderById(Picked, $D000F, caster);
			SetAttackAbilityLevel(Picked, -damage);
			SetArmorAbilityLevel(Picked, -armor);
			ef[AddSpecialEffectTarget("Effects\\RedZapMissle.mdl", Picked, "overhead")] = AddSpecialEffectTarget("Effects\\RedZapMissle.mdl", Picked, "overhead");
			SaveEffectHandle(udg_hash, GetHandleId(Picked), 89, ef);
			ef[null] = null;
		}
		GroupRemoveUnit(g, Picked);
	}
	ef[AddSpecialEffectTarget("Effects\\Duel.mdx", caster, "overhead")] = AddSpecialEffectTarget("Effects\\Duel.mdx", caster, "overhead");
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveGroupHandle(udg_hash, h, 2, g2);
	SaveEffectHandle(udg_hash, h, 3, ef);
	SaveInteger(udg_hash, h, 4, damage);
	SaveInteger(udg_hash, h, 5, armor);
	TimerStart(t, 8., false, Trig_Cuirass_of_Invulnerable_Use2_Remove_Agr_Actions);
	caster[null] = null;
	p[null] = null;
	DestroyGroup(g);
	GroupClear(g);
	g[null] = null;
	g2[null] = null;
	Picked[null] = null;
	t[null] = null;
	ef[null] = null;
}
bool Trig_Cuirass_of_Invulnerable_Use2_Conditions() {
	return GetSpellAbilityId() == 'A0JT';
}
void InitTrig_Cuirass_of_Invulnerable_Use2() {
	int index = 0;
	gg_trg_Cuirass_of_Invulnerable_Use2[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Cuirass_of_Invulnerable_Use2, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Cuirass_of_Invulnerable_Use2, Condition(Trig_Cuirass_of_Invulnerable_Use2_Conditions));
	TriggerAddAction(gg_trg_Cuirass_of_Invulnerable_Use2, Trig_Cuirass_of_Invulnerable_Use2_Actions);
}
void Trig_Lost_Cuirass_of_Invulnerable_Actions() {
	unit hero = GetTriggerUnit();
	int h = GetHandleId(hero);
	effect ef = LoadEffectHandle(udg_hash, h, 95);
	DestroyEffect(ef);
	SaveBoolean(udg_hash, h, 94, true);
	SaveEffectHandle(udg_hash, h, 95, null);
	hero[null] = null;
	ef[null] = null;
}
bool Trig_Lost_Cuirass_of_Invulnerable_Conditions() {
	return GetItemTypeId(GetManipulatedItem()) == 'I048' && CountItemOfTypeOnUnit(GetTriggerUnit(), 'I048') == 1;
}
void InitTrig_Lost_Cuirass_of_Invulnerable() {
	int index = 0;
	gg_trg_Lost_Cuirass_of_Invulnerable[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Lost_Cuirass_of_Invulnerable, Player(index), EVENT_PLAYER_UNIT_DROP_ITEM, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Lost_Cuirass_of_Invulnerable, Condition(Trig_Lost_Cuirass_of_Invulnerable_Conditions));
	TriggerAddAction(gg_trg_Lost_Cuirass_of_Invulnerable, Trig_Lost_Cuirass_of_Invulnerable_Actions);
}
void Trig_Take_Cuirass_of_Invulnerable_Actions() {
	unit hero = GetTriggerUnit();
	int h = GetHandleId(hero);
	effect ef;
	if (LoadReal(udg_hash, h, 96) < 1.) {
		ef[AddSpecialEffectTarget("Effects\\PurpleSphere.mdx", hero, "chest")] = AddSpecialEffectTarget("Effects\\PurpleSphere.mdx", hero, "chest");
		SaveBoolean(udg_hash, h, 94, true);
		SaveEffectHandle(udg_hash, h, 95, ef);
	}
	hero[null] = null;
	ef[null] = null;
}
bool Trig_Take_Cuirass_of_Invulnerable_Conditions() {
	return GetItemTypeId(GetManipulatedItem()) == 'I048' && CountItemOfTypeOnUnit(GetTriggerUnit(), 'I048') == 1;
}
void InitTrig_Take_Cuirass_of_Invulnerable() {
	int index = 0;
	gg_trg_Take_Cuirass_of_Invulnerable[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Take_Cuirass_of_Invulnerable, Player(index), EVENT_PLAYER_UNIT_PICKUP_ITEM, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Take_Cuirass_of_Invulnerable, Condition(Trig_Take_Cuirass_of_Invulnerable_Conditions));
	TriggerAddAction(gg_trg_Take_Cuirass_of_Invulnerable, Trig_Take_Cuirass_of_Invulnerable_Actions);
}
void Trig_Fire_Staff_Periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 7);
	float damage = LoadReal(udg_hash, h, 8);
	int wait = LoadInteger(udg_hash, h, 9);
	float angle = LoadReal(udg_hash, h, $A);
	group gdamage = LoadGroupHandle(udg_hash, h, $B);
	float dammiangle = LoadReal(udg_hash, h, $C);
	float anglestep = LoadReal(udg_hash, h, $D);
	player p = GetOwningPlayer(caster);
	group gdammi = CreateGroup();
	group g = CreateGroup();
	float xdammi;
	float ydammi;
	unit Picked;
	unit dammi;
	int lopa = 1;
	effect ef;
	if (wait > 0) {
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 9, wait);
		dammiangle[dammiangle - anglestep] = dammiangle - anglestep;
		if (dammiangle < -45.) {
			anglestep[-anglestep] = -anglestep;
			SaveReal(udg_hash, h, $D, anglestep);
		}
		if (dammiangle > 45.) {
			anglestep[-anglestep] = -anglestep;
			SaveReal(udg_hash, h, $D, anglestep);
		}
		SaveReal(udg_hash, h, $C, dammiangle);
		dammi[LoadUnitHandle(udg_hash, h, 1)] = LoadUnitHandle(udg_hash, h, 1);
		xdammi[GetUnitX(dammi) + 15. * Cos((angle + dammiangle) * bj_DEGTORAD)] = GetUnitX(dammi) + 15. * Cos((angle + dammiangle) * bj_DEGTORAD);
		ydammi[GetUnitY(dammi) + 15. * Sin((angle + dammiangle) * bj_DEGTORAD)] = GetUnitY(dammi) + 15. * Sin((angle + dammiangle) * bj_DEGTORAD);
		SetUnitPosition(dammi, xdammi, ydammi);
		GroupEnumUnitsInRange(gdammi, xdammi, ydammi, 125., null);
		GroupAddGroup(gdammi, g);
		dammi[null] = null;
		dammiangle[-dammiangle] = -dammiangle;
		dammi[LoadUnitHandle(udg_hash, h, 3)] = LoadUnitHandle(udg_hash, h, 3);
		xdammi[GetUnitX(dammi) + 15. * Cos((angle + dammiangle) * bj_DEGTORAD)] = GetUnitX(dammi) + 15. * Cos((angle + dammiangle) * bj_DEGTORAD);
		ydammi[GetUnitY(dammi) + 15. * Sin((angle + dammiangle) * bj_DEGTORAD)] = GetUnitY(dammi) + 15. * Sin((angle + dammiangle) * bj_DEGTORAD);
		SetUnitPosition(dammi, xdammi, ydammi);
		GroupEnumUnitsInRange(gdammi, xdammi, ydammi, 125., null);
		GroupAddGroup(gdammi, g);
		dammi[null] = null;
		dammi[LoadUnitHandle(udg_hash, h, 2)] = LoadUnitHandle(udg_hash, h, 2);
		xdammi[GetUnitX(dammi) + 13.2 * Cos(angle * bj_DEGTORAD)] = GetUnitX(dammi) + 13.2 * Cos(angle * bj_DEGTORAD);
		ydammi[GetUnitY(dammi) + 13.2 * Sin(angle * bj_DEGTORAD)] = GetUnitY(dammi) + 13.2 * Sin(angle * bj_DEGTORAD);
		SetUnitPosition(dammi, xdammi, ydammi);
		GroupEnumUnitsInRange(gdammi, xdammi, ydammi, 125., null);
		GroupAddGroup(gdammi, g);
		dammi[null] = null;
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitInGroup(Picked, gdamage) == false && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				dammi[CreateUnit(p, 'h00U', GetUnitX(Picked), GetUnitY(Picked), .0)] = CreateUnit(p, 'h00U', GetUnitX(Picked), GetUnitY(Picked), .0);
				UnitApplyTimedLife(dammi, 'BTLF', 1.);
				UnitAddAbility(dammi, 'A0JK');
				IssueTargetOrderById(dammi, $D02B6, Picked);
				dammi[null] = null;
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIfb\\AIfbSpecialArt.mdl", Picked, "chest"));
				GroupAddUnit(gdamage, Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
		SaveGroupHandle(udg_hash, h, $B, gdamage);
	else
		while (true) {
			if (lopa > 3) break;
			dammi[LoadUnitHandle(udg_hash, h, lopa)] = LoadUnitHandle(udg_hash, h, lopa);
			ef[LoadEffectHandle(udg_hash, h, lopa + 3)] = LoadEffectHandle(udg_hash, h, lopa + 3);
			KillUnit(dammi);
			DestroyEffect(ef);
			lopa[lopa + 1] = lopa + 1;
			dammi[null] = null;
			ef[null] = null;
		}
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
		GroupClear(gdamage);
		DestroyGroup(gdamage);
	}
	t[null] = null;
	caster[null] = null;
	gdamage[null] = null;
	p[null] = null;
	GroupClear(gdammi);
	DestroyGroup(gdammi);
	gdammi[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	Picked[null] = null;
}
void Trig_Fire_Staff_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	timer t = CreateTimer();
	int h = GetHandleId(t);
	location loc;
	float xt;
	float yt;
	unit dammi;
	effect ef;
	float xdammi;
	float ydammi;
	int lopa = 1;
	group gdamage = CreateGroup();
	float angle;
	float dammiangle = -90.;
	float damage = 170.;
	int wait = 50;
	if (GetSpellTargetUnit() == null) {
		loc[GetSpellTargetLoc()] = GetSpellTargetLoc();
		xt[GetLocationX(loc)] = GetLocationX(loc);
		yt[GetLocationY(loc)] = GetLocationY(loc);
		RemoveLocation(loc);
		loc[null] = null;
	else
		xt[GetUnitX(GetSpellTargetUnit())] = GetUnitX(GetSpellTargetUnit());
		yt[GetUnitY(GetSpellTargetUnit())] = GetUnitY(GetSpellTargetUnit());
	}
	angle[bj_RADTODEG * Atan2(yt - y, xt - x)] = bj_RADTODEG * Atan2(yt - y, xt - x);
	while (true) {
		if (lopa > 3) break;
		xdammi[x + 100. * Cos((angle + dammiangle) * bj_DEGTORAD)] = x + 100. * Cos((angle + dammiangle) * bj_DEGTORAD);
		ydammi[y + 100. * Sin((angle + dammiangle) * bj_DEGTORAD)] = y + 100. * Sin((angle + dammiangle) * bj_DEGTORAD);
		dammiangle[dammiangle + 90.] = dammiangle + 90.;
		dammi[CreateUnit(p, 'h00U', xdammi, ydammi, angle)] = CreateUnit(p, 'h00U', xdammi, ydammi, angle);
		UnitAddAbility(dammi, 'Amrf');
		UnitRemoveAbility(dammi, 'Amrf');
		SetUnitFlyHeight(dammi, 50., .0);
		ef[AddSpecialEffectTarget("Effects\\SunfireMissile.mdl", dammi, "chest")] = AddSpecialEffectTarget("Effects\\SunfireMissile.mdl", dammi, "chest");
		SaveUnitHandle(udg_hash, h, lopa, dammi);
		SaveEffectHandle(udg_hash, h, lopa + 3, ef);
		lopa[lopa + 1] = lopa + 1;
		dammi[null] = null;
		ef[null] = null;
	}
	SaveUnitHandle(udg_hash, h, 7, caster);
	SaveReal(udg_hash, h, 8, damage);
	SaveInteger(udg_hash, h, 9, wait);
	SaveReal(udg_hash, h, $A, angle);
	SaveGroupHandle(udg_hash, h, $B, gdamage);
	SaveReal(udg_hash, h, $C, 45.);
	SaveReal(udg_hash, h, $D, 3.6);
	TimerStart(t, .03, true, Trig_Fire_Staff_Periodic_Actions);
	caster[null] = null;
	p[null] = null;
	t[null] = null;
	gdamage[null] = null;
}
bool Trig_Fire_Staff_Conditions() {
	return GetSpellAbilityId() == 'A0JJ';
}
void InitTrig_Fire_Staff() {
	int index = 0;
	gg_trg_Fire_Staff[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Fire_Staff, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Fire_Staff, Condition(Trig_Fire_Staff_Conditions));
	TriggerAddAction(gg_trg_Fire_Staff, Trig_Fire_Staff_Actions);
}
void Trig_Demon_Axe_Remove_Stregnth_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	UnitRemoveAbility(caster, 'A0J2');
	DestroyTimer(t);
	FlushChildHashtable(udg_hash, h);
	t[null] = null;
	caster[null] = null;
}
void Trig_Demon_Axe_Actions() {
	unit caster = GetSpellAbilityUnit();
	timer t = CreateTimer();
	int h = GetHandleId(t);
	unit dammi = CreateUnit(GetOwningPlayer(caster), 'h00U', GetUnitX(caster), GetUnitY(caster), .0);
	UnitApplyTimedLife(dammi, 'BTLF', 1.);
	UnitAddAbility(dammi, 'A0IW');
	IssueTargetOrderById(dammi, $D00F1, caster);
	UnitAddAbility(caster, 'A0J2');
	SaveUnitHandle(udg_hash, h, 1, caster);
	TimerStart(t, 35., false, Trig_Demon_Axe_Remove_Stregnth_Actions);
	caster[null] = null;
	t[null] = null;
	dammi[null] = null;
}
bool Trig_Demon_Axe_Conditions() {
	return GetSpellAbilityId() == 'A0J1';
}
void InitTrig_Demon_Axe() {
	int index = 0;
	gg_trg_Demon_Axe[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Demon_Axe, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Demon_Axe, Condition(Trig_Demon_Axe_Conditions));
	TriggerAddAction(gg_trg_Demon_Axe, Trig_Demon_Axe_Actions);
}
void Trig_Demon_Axe_Kill_Unit_Actions() {
	unit killer = GetKillingUnit();
	SetUnitAbilityLevel(killer, 'A0J2', (GetUnitAbilityLevel(killer, 'A0J2') + 1));
	killer[null] = null;
}
bool Trig_Demon_Axe_Kill_Unit_Conditions() {
	return GetUnitAbilityLevel(GetKillingUnit(), 'A0J2') > 0;
}
void InitTrig_Demon_Axe_Kill_Unit() {
	int index = 0;
	gg_trg_Demon_Axe_Kill_Unit[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Demon_Axe_Kill_Unit, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Demon_Axe_Kill_Unit, Condition(Trig_Demon_Axe_Kill_Unit_Conditions));
	TriggerAddAction(gg_trg_Demon_Axe_Kill_Unit, Trig_Demon_Axe_Kill_Unit_Actions);
}
void Trig_Boots_Rescue_Remove_Effects_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	unit target = LoadUnitHandle(udg_hash, h, 2);
	SetUnitLifeAndManaRegeneration(caster, "life", -25);
	SetUnitLifeAndManaRegeneration(target, "life", -25);
	DestroyTimer(t);
	FlushChildHashtable(udg_hash, h);
	t[null] = null;
	caster[null] = null;
	target[null] = null;
}
void Trig_Boots_Rescue_Destroy_Lightning_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	lightning l = LoadLightningHandle(udg_hash, h, 1);
	DestroyLightning(l);
	DestroyTimer(t);
	FlushChildHashtable(udg_hash, h);
	t[null] = null;
	l[null] = null;
}
void Trig_Boots_Rescue_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	float xc = GetUnitX(caster);
	float yc = GetUnitY(caster);
	float xt = GetUnitX(target);
	float yt = GetUnitY(target);
	player p = GetOwningPlayer(caster);
	unit dammi = CreateUnit(p, 'h00U', xc, yc, .0);
	unit dammi2 = CreateUnit(p, 'h00U', xc, yc, .0);
	timer t = CreateTimer();
	int h = GetHandleId(t);
	lightning l = AddLightningEx("MBUR", true, xc, yc, 50., xt, yt, 50.);
	timer t2 = CreateTimer();
	int h2 = GetHandleId(t2);
	SetUnitX(caster, xt);
	SetUnitY(caster, yt);
	SetUnitX(target, xc);
	SetUnitY(target, yc);
	SetUnitLifeAndManaRegeneration(caster, "life", 25);
	SetUnitLifeAndManaRegeneration(target, "life", 25);
	UnitApplyTimedLife(dammi, 'BTLF', 1.);
	UnitApplyTimedLife(dammi2, 'BTLF', 1.);
	UnitAddAbility(dammi, 'A0IY');
	UnitAddAbility(dammi2, 'A0IY');
	IssueTargetOrderById(dammi, $D008E, caster);
	IssueTargetOrderById(dammi2, $D008E, target);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveUnitHandle(udg_hash, h, 2, target);
	SaveLightningHandle(udg_hash, h2, 1, l);
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\ManaBurn\\ManaBurnTarget.mdl", caster, "origin"));
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\ManaBurn\\ManaBurnTarget.mdl", target, "origin"));
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageCaster.mdl", caster, "origin"));
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageCaster.mdl", target, "origin"));
	TimerStart(t, 6., false, Trig_Boots_Rescue_Remove_Effects_Actions);
	TimerStart(t2, .5, false, Trig_Boots_Rescue_Destroy_Lightning_Actions);
	caster[null] = null;
	target[null] = null;
	dammi[null] = null;
	dammi2[null] = null;
	p[null] = null;
	t[null] = null;
	l[null] = null;
	t2[null] = null;
}
bool Trig_Boots_Rescue_Conditions() {
	return GetSpellAbilityId() == 'A0JE';
}
void InitTrig_Boots_Rescue() {
	int index = 0;
	gg_trg_Boots_Rescue[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Boots_Rescue, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Boots_Rescue, Condition(Trig_Boots_Rescue_Conditions));
	TriggerAddAction(gg_trg_Boots_Rescue, Trig_Boots_Rescue_Actions);
}
void Trig_Astral_Staff_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	location loc = GetSpellTargetLoc();
	float x = GetLocationX(loc);
	float y = GetLocationY(loc);
	float radius = 300.;
	group g = CreateGroup();
	unit Picked;
	unit dammi;
	GroupEnumUnitsInRange(g, x, y, radius, null);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, p) && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			dammi[CreateUnit(p, 'h00U', x, y, .0)] = CreateUnit(p, 'h00U', x, y, .0);
			UnitApplyTimedLife(dammi, 'BTLF', 2.);
			UnitAddAbility(dammi, 'A0IQ');
			IssueTargetOrderById(dammi, $D0206, Picked);
			dammi[null] = null;
		}
		GroupRemoveUnit(g, Picked);
	}
	caster[null] = null;
	p[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	DestroyGroup(g);
	GroupClear(g);
	g[null] = null;
	Picked[null] = null;
}
bool Trig_Astral_Staff_Conditions() {
	return GetSpellAbilityId() == 'A0IP';
}
void InitTrig_Astral_Staff() {
	int index = 0;
	gg_trg_Astral_Staff[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Astral_Staff, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Astral_Staff, Condition(Trig_Astral_Staff_Conditions));
	TriggerAddAction(gg_trg_Astral_Staff, Trig_Astral_Staff_Actions);
}
void Trig_Healer_Staff_Actions() {
	unit target = GetSpellTargetUnit();
	SetUnitState(target, UNIT_STATE_LIFE, GetUnitState(target, UNIT_STATE_LIFE) + 150. + (2. * GetHeroInt(GetSpellAbilityUnit(), true)));
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl", target, "origin"));
	DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", target, "origin"), 2.);
	target[null] = null;
}
bool Trig_Healer_Staff_Conditions() {
	return GetSpellAbilityId() == 'A0IM';
}
void InitTrig_Healer_Staff() {
	int index = 0;
	gg_trg_Healer_Staff[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Healer_Staff, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Healer_Staff, Condition(Trig_Healer_Staff_Conditions));
	TriggerAddAction(gg_trg_Healer_Staff, Trig_Healer_Staff_Actions);
}
void Trig_Magic_Amulet_Remove_Shield_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	effect ef = LoadEffectHandle(udg_hash, h, 2);
	SaveReal(udg_hash, GetHandleId(caster), 86, .0);
	SaveEffectHandle(udg_hash, GetHandleId(caster), 87, null);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	DestroyEffect(ef);
	t[null] = null;
	caster[null] = null;
	ef[null] = null;
}
void Trig_Magic_Amulet_Actions() {
	unit caster = GetSpellAbilityUnit();
	float shield = 200.;
	effect ef = AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaShield\\ManaShieldCaster.mdl", caster, "origin");
	timer t = CreateTimer();
	int h = GetHandleId(t);
	SaveReal(udg_hash, GetHandleId(caster), 86, shield);
	SaveEffectHandle(udg_hash, GetHandleId(caster), 87, ef);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveEffectHandle(udg_hash, h, 2, ef);
	TimerStart(t, 20., false, Trig_Magic_Amulet_Remove_Shield_Actions);
	caster[null] = null;
	ef[null] = null;
	t[null] = null;
}
bool Trig_Magic_Amulet_Conditions() {
	return GetSpellAbilityId() == 'A0IH';
}
void InitTrig_Magic_Amulet() {
	int index = 0;
	gg_trg_Magic_Amulet[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Magic_Amulet, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Magic_Amulet, Condition(Trig_Magic_Amulet_Conditions));
	TriggerAddAction(gg_trg_Magic_Amulet, Trig_Magic_Amulet_Actions);
}
void Trig_Blood_Dagger_Actions() {
	unit killer = GetKillingUnit();
	SetUnitState(killer, UNIT_STATE_LIFE, GetUnitState(killer, UNIT_STATE_LIFE) + (GetUnitState(GetDyingUnit(), UNIT_STATE_MAX_LIFE) * .1));
	DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPriest.mdl", killer, "chest"));
	killer[null] = null;
}
bool Trig_Blood_Dagger_Conditions() {
	return GetUnitAbilityLevel(GetKillingUnit(), 'A0IG') >= 1;
}
void InitTrig_Blood_Dagger() {
	int index = 0;
	gg_trg_Blood_Dagger[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Blood_Dagger, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Blood_Dagger, Condition(Trig_Blood_Dagger_Conditions));
	TriggerAddAction(gg_trg_Blood_Dagger, Trig_Blood_Dagger_Actions);
}
void Trig_Agility_Blade_Remove_Agi_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	int bonus = LoadInteger(udg_hash, h, 2);
	effect ef = LoadEffectHandle(udg_hash, h, 3);
	effect ef2 = LoadEffectHandle(udg_hash, h, 4);
	int clearagi = GetHeroAgi(caster, false);
	SetHeroAgi(caster, clearagi - bonus, true);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	DestroyEffect(ef);
	DestroyEffect(ef2);
	caster[null] = null;
	ef[null] = null;
	ef2[null] = null;
	t[null] = null;
}
void Trig_Agility_Blade_Actions() {
	unit caster = GetSpellAbilityUnit();
	int agi = GetHeroAgi(caster, true);
	int clearagi = GetHeroAgi(caster, false);
	int bonus = R2I(agi / 2);
	effect ef = AddSpecialEffectTarget("Abilities\\Spells\\Other\\AcidBomb\\BottleImpact.mdl", caster, "weapon");
	effect ef2 = AddSpecialEffectTarget("Abilities\\Spells\\Other\\Drain\\DrainCaster.mdl", caster, "head");
	timer t = CreateTimer();
	int h = GetHandleId(t);
	SetHeroAgi(caster, clearagi + bonus, true);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveInteger(udg_hash, h, 2, bonus);
	SaveEffectHandle(udg_hash, h, 3, ef);
	SaveEffectHandle(udg_hash, h, 4, ef2);
	TimerStart(t, 7., false, Trig_Agility_Blade_Remove_Agi_Actions);
	caster[null] = null;
	ef[null] = null;
	ef2[null] = null;
	t[null] = null;
}
bool Trig_Agility_Blade_Conditions() {
	return GetSpellAbilityId() == 'A0IE';
}
void InitTrig_Agility_Blade() {
	int index = 0;
	gg_trg_Agility_Blade[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Agility_Blade, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Agility_Blade, Condition(Trig_Agility_Blade_Conditions));
	TriggerAddAction(gg_trg_Agility_Blade, Trig_Agility_Blade_Actions);
}
bool Trig_Bone_Staff_Set_Summon_Ability_Level_Func003C() {
	return (GetUnitTypeId(GetSummonedUnit()) == 'n01K') || (GetUnitTypeId(GetSummonedUnit()) == 'n01L');
}
bool Trig_Bone_Staff_Set_Summon_Ability_Level_Conditions() {
	return (Trig_Bone_Staff_Set_Summon_Ability_Level_Func003C());
}
bool Trig_Bone_Staff_Set_Summon_Ability_Level_Func001C() {
	return (GetUnitTypeId(GetSummonedUnit()) == 'n01K');
}
bool Trig_Bone_Staff_Set_Summon_Ability_Level_Func002C() {
	return (GetUnitTypeId(GetSummonedUnit()) == 'n01L');
}
void Trig_Bone_Staff_Set_Summon_Ability_Level_Actions() {
	if ((Trig_Bone_Staff_Set_Summon_Ability_Level_Func001C())) {
		SetUnitAbilityLevelSwapped('A0B6', GetSummonedUnit(), 2);
		SetUnitAbilityLevelSwapped('A0AW', GetSummonedUnit(), 2);
		SetUnitAbilityLevelSwapped('A0AX', GetSummonedUnit(), 2);
	}
	if ((Trig_Bone_Staff_Set_Summon_Ability_Level_Func002C())) {
		SetUnitAbilityLevelSwapped('A0B6', GetSummonedUnit(), 3);
		SetUnitAbilityLevelSwapped('A0AW', GetSummonedUnit(), 3);
		SetUnitAbilityLevelSwapped('A0AX', GetSummonedUnit(), 3);
	}
}
void InitTrig_Bone_Staff_Set_Summon_Ability_Level() {
	gg_trg_Bone_Staff_Set_Summon_Ability_Level[CreateTrigger()] = CreateTrigger();
	TriggerRegisterAnyUnitEventBJ(gg_trg_Bone_Staff_Set_Summon_Ability_Level, EVENT_PLAYER_UNIT_SUMMON);
	TriggerAddCondition(gg_trg_Bone_Staff_Set_Summon_Ability_Level, Condition(Trig_Bone_Staff_Set_Summon_Ability_Level_Conditions));
	TriggerAddAction(gg_trg_Bone_Staff_Set_Summon_Ability_Level, Trig_Bone_Staff_Set_Summon_Ability_Level_Actions);
}
bool Trig_Novice_Amulet_Conditions() {
	return (GetSpellAbilityId() == 'A0AI');
}
void Trig_Novice_Amulet_Actions() {
	SetUnitManaBJ(GetSpellAbilityUnit(), (GetUnitStateSwap(UNIT_STATE_MANA, GetSpellAbilityUnit()) + 75.));
}
void InitTrig_Novice_Amulet() {
	gg_trg_Novice_Amulet[CreateTrigger()] = CreateTrigger();
	TriggerRegisterAnyUnitEventBJ(gg_trg_Novice_Amulet, EVENT_PLAYER_UNIT_SPELL_EFFECT);
	TriggerAddCondition(gg_trg_Novice_Amulet, Condition(Trig_Novice_Amulet_Conditions));
	TriggerAddAction(gg_trg_Novice_Amulet, Trig_Novice_Amulet_Actions);
}
void Trig_Glove_of_Andromat_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	float xt = GetUnitX(target);
	float yt = GetUnitY(target);
	player p = GetOwningPlayer(caster);
	int pnumber = GetPlayerId(p) + 1;
	int id = GetUnitTypeId(target);
	int gold = R2I(GetRandomInt(LoadInteger(udg_hash, id, 70), LoadInteger(udg_hash, id, 71)) * 10.) + 60;
	int xp = R2I(LoadInteger(udg_hash, id, 82) * 7.);
	float mana = 75. + (GetUnitState(target, UNIT_STATE_MAX_LIFE) / 2);
	SetUnitState(caster, UNIT_STATE_MANA, GetUnitState(caster, UNIT_STATE_MANA) + mana);
	AddHeroXP(caster, R2I(xp + .5), true);
	SetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) + gold);
	CreateTexttag(udg_ColorString[23] + "+" + I2S(gold) + "|r", .025, $FF, xt - 15., yt, .0, .0, .035, 3.5);
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Transmute\\PileofGold.mdl", xt, yt));
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Items\\AIlm\\AIlmTarget.mdl", xt, yt));
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\DarkRitual\\DarkRitualTarget.mdl", xt, yt));
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIma\\AImaTarget.mdl", caster, "origin"));
	if (pnumber <= 9) {
		udg_MultiBoard_Player_Kills_Count[udg_MultiBoard_Player_Kills_Count[pnumber] + 1] = udg_MultiBoard_Player_Kills_Count[pnumber] + 1;
		MultiboardSetItemValueBJ(udg_MultiBoard, 3, udg_PlayerNumberInMB[pnumber], udg_ColorString[20] + I2S(udg_MultiBoard_Player_Kills_Count[pnumber]) + "|r");
	}
	SaveBoolean(udg_hash, GetHandleId(target), 85, true);
	SetUnitExploded(target, true);
	KillUnit(target);
	SetUnitVertexColor(target, 0, 0, 0, 0);
	PauseUnit(target, true);
	caster[null] = null;
	target[null] = null;
	p[null] = null;
}
bool Trig_Glove_of_Andromat_Conditions() {
	return GetSpellAbilityId() == 'A0AN';
}
void InitTrig_Glove_of_Andromat() {
	int index = 0;
	gg_trg_Glove_of_Andromat[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Glove_of_Andromat, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Glove_of_Andromat, Condition(Trig_Glove_of_Andromat_Conditions));
	TriggerAddAction(gg_trg_Glove_of_Andromat, Trig_Glove_of_Andromat_Actions);
}
void Trig_Glove_of_Midas_Periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	unit target = LoadUnitHandle(udg_hash, h, 2);
	unit dammi = LoadUnitHandle(udg_hash, h, 3);
	int wait2 = LoadInteger(udg_hash, h, 5);
	float height = LoadReal(udg_hash, h, 6);
	effect ef;
	int gold;
	int xp;
	player p;
	int pnumber;
	int id;
	float x = GetUnitX(dammi);
	float y = GetUnitY(dammi);
	float xt = GetUnitX(target);
	float yt = GetUnitY(target);
	float angle = bj_RADTODEG * Atan2(yt - y, xt - x);
	float dist;
	bool destroy = false;
	if (GetUnitState(target, UNIT_STATE_LIFE) > .405) {
		wait2[wait2 - 1] = wait2 - 1;
		SaveInteger(udg_hash, h, 5, wait2);
		if (wait2 == 0) {
			SetUnitFlyHeight(dammi, .0, height * 2.25);
		}
		x[x + 20. * Cos(angle * bj_DEGTORAD)] = x + 20. * Cos(angle * bj_DEGTORAD);
		y[y + 20. * Sin(angle * bj_DEGTORAD)] = y + 20. * Sin(angle * bj_DEGTORAD);
		SetUnitPosition(dammi, x, y);
		dist[SquareRoot((xt - x) * (xt - x) + (yt - y) * (yt - y))] = SquareRoot((xt - x) * (xt - x) + (yt - y) * (yt - y));
		if (dist < 21.) {
			destroy[true] = true;
			id[GetUnitTypeId(target)] = GetUnitTypeId(target);
			p[GetOwningPlayer(caster)] = GetOwningPlayer(caster);
			pnumber[GetPlayerId(p) + 1] = GetPlayerId(p) + 1;
			gold[R2I(GetRandomInt(LoadInteger(udg_hash, id, 70), LoadInteger(udg_hash, id, 71)) * 6.) + 40] = R2I(GetRandomInt(LoadInteger(udg_hash, id, 70), LoadInteger(udg_hash, id, 71)) * 6.) + 40;
			xp[R2I(LoadInteger(udg_hash, id, 82) * 5.)] = R2I(LoadInteger(udg_hash, id, 82) * 5.);
			SetUnitPosition(dammi, xt, yt);
			AddHeroXP(caster, R2I(xp + .5), true);
			SetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD, GetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD) + gold);
			CreateTexttag(udg_ColorString[23] + "+" + I2S(gold) + "|r", .025, $FF, xt - 15., y, .0, .0, .035, 3.5);
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Transmute\\PileofGold.mdl", xt, yt));
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Items\\AIlm\\AIlmTarget.mdl", xt, yt));
			if (pnumber <= 9) {
				udg_MultiBoard_Player_Kills_Count[udg_MultiBoard_Player_Kills_Count[pnumber] + 1] = udg_MultiBoard_Player_Kills_Count[pnumber] + 1;
				MultiboardSetItemValueBJ(udg_MultiBoard, 3, udg_PlayerNumberInMB[pnumber], udg_ColorString[20] + I2S(udg_MultiBoard_Player_Kills_Count[pnumber]) + "|r");
			}
			SaveBoolean(udg_hash, GetHandleId(target), 85, true);
			SetUnitExploded(target, true);
			KillUnit(target);
			SetUnitVertexColor(target, 0, 0, 0, 0);
			PauseUnit(target, true);
			p[null] = null;
		}
	else
		destroy[true] = true;
	}
	if (destroy) {
		KillUnit(dammi);
		ef[LoadEffectHandle(udg_hash, h, 4)] = LoadEffectHandle(udg_hash, h, 4);
		DestroyEffect(ef);
		ef[null] = null;
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	caster[null] = null;
	target[null] = null;
	dammi[null] = null;
}
void Trig_Glove_of_Midas_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	float xt = GetUnitX(target);
	float yt = GetUnitY(target);
	float angle = bj_RADTODEG * Atan2(yt - y, xt - x);
	timer t = CreateTimer();
	int h = GetHandleId(t);
	unit dammi;
	effect ef;
	float dist = SquareRoot((xt - x) * (xt - x) + (yt - y) * (yt - y));
	float height = dist / 3;
	int wait2 = R2I(dist / 40);
	dammi[CreateUnit(GetOwningPlayer(caster), 'h00U', x, y, angle)] = CreateUnit(GetOwningPlayer(caster), 'h00U', x, y, angle);
	UnitAddAbility(dammi, 'Amrf');
	UnitRemoveAbility(dammi, 'Amrf');
	SetUnitFlyHeight(dammi, .0, .0);
	SetUnitFlyHeight(dammi, height, height * 2.25);
	ef[AddSpecialEffectTarget("Abilities\\Spells\\Other\\Transmute\\GoldBottleMissile.mdl", dammi, "chest")] = AddSpecialEffectTarget("Abilities\\Spells\\Other\\Transmute\\GoldBottleMissile.mdl", dammi, "chest");
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveUnitHandle(udg_hash, h, 2, target);
	SaveUnitHandle(udg_hash, h, 3, dammi);
	SaveEffectHandle(udg_hash, h, 4, ef);
	SaveInteger(udg_hash, h, 5, wait2);
	SaveReal(udg_hash, h, 6, height);
	TimerStart(t, .03, true, Trig_Glove_of_Midas_Periodic_Actions);
	target[null] = null;
	t[null] = null;
	dammi[null] = null;
	ef[null] = null;
}
bool Trig_Glove_of_Midas_Conditions() {
	return GetSpellAbilityId() == 'A0A2';
}
void InitTrig_Glove_of_Midas() {
	int index = 0;
	gg_trg_Glove_of_Midas[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Glove_of_Midas, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Glove_of_Midas, Condition(Trig_Glove_of_Midas_Conditions));
	TriggerAddAction(gg_trg_Glove_of_Midas, Trig_Glove_of_Midas_Actions);
}
bool Trig_Heroes_more_attacked_priority_when_guards_Group_Filter() {
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) >= .45) && IsUnitInvulnerable(GetFilterUnit()) == false && (GetPlayerId(GetOwningPlayer(GetFilterUnit())) <= 8 && (IsPlayerEnemy(GetOwningPlayer(GetAttacker()), GetOwningPlayer(GetFilterUnit())))));
}
void Trig_Heroes_more_attacked_priority_when_guards_Actions() {
	group g = CreateGroup();
	unit attacked = GetTriggerUnit();
	unit attacker = GetAttacker();
	unit ally;
	GroupEnumUnitsInRange(g, GetUnitX(attacked), GetUnitY(attacked), 500., Filter(Trig_Heroes_more_attacked_priority_when_guards_Group_Filter));
	if (CountUnitsInGroup(g) > 1) {
		FilterMostNearUnit(g, attacked);
		ally[udg_Unit_FilterMostNearUnit] = udg_Unit_FilterMostNearUnit;
	}
	if (ally != null) {
		IssueTargetOrderById(attacker, $D000F, ally);
	}
	attacked[null] = null;
	attacker[null] = null;
	ally[null] = null;
}
bool Trig_Heroes_more_attacked_priority_when_guards_Conditions() {
	return ((GetUnitState(GetTriggerUnit(), UNIT_STATE_LIFE) >= .405) && (IsUnitIllusion(GetTriggerUnit()) == false) && (GetPlayerId(GetOwningPlayer(GetAttacker())) >= 9)) && (GetUnitTypeId(GetTriggerUnit()) == 'e002' || GetUnitTypeId(GetTriggerUnit()) == 'h01K' || GetUnitTypeId(GetTriggerUnit()) == 'n00Y' || GetUnitTypeId(GetTriggerUnit()) == 'o003');
}
void InitTrig_Heroes_more_attacked_priority_when_guards() {
	int index = 0;
	gg_trg_Heroes_more_attacked_priority_when_guards[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Heroes_more_attacked_priority_when_guards, Player(index), EVENT_PLAYER_UNIT_ATTACKED, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Heroes_more_attacked_priority_when_guards, Condition(Trig_Heroes_more_attacked_priority_when_guards_Conditions));
	TriggerAddAction(gg_trg_Heroes_more_attacked_priority_when_guards, Trig_Heroes_more_attacked_priority_when_guards_Actions);
}
void Trig_Player_Fast_Purchase_System_Actions() {
	unit caster = GetTriggerUnit();
	int pid = GetPlayerId(GetOwningPlayer(caster)) + 1;
	if ((GetIssuedOrderId() == $D0057)) {
		udg_Boolean_Player_Fast_Purchase[true] = true;
	}
	if ((GetIssuedOrderId() == $D0058)) {
		udg_Boolean_Player_Fast_Purchase[false] = false;
	}
	caster[null] = null;
}
bool Trig_Player_Fast_Purchase_System_Conditions() {
	return GetUnitAbilityLevel(GetTriggerUnit(), 'A0MG') > 0;
}
void InitTrig_Player_Fast_Purchase_System() {
	int index = 0;
	gg_trg_Player_Fast_Purchase_System[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Player_Fast_Purchase_System, Player(index), EVENT_PLAYER_UNIT_ISSUED_ORDER, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Player_Fast_Purchase_System, Condition(Trig_Player_Fast_Purchase_System_Conditions));
	TriggerAddAction(gg_trg_Player_Fast_Purchase_System, Trig_Player_Fast_Purchase_System_Actions);
}
void Trig_Show_hint_abount_hints_Actions() {
	DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "Советуем просмотреть все игровые команды в меню Инфо (|Cfffed312F9|r)");
}
void InitTrig_Show_hint_abount_hints() {
	gg_trg_Show_hint_abount_hints[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventSingle(gg_trg_Show_hint_abount_hints, 120.);
	TriggerRegisterTimerEventSingle(gg_trg_Show_hint_abount_hints, 600.);
	TriggerAddAction(gg_trg_Show_hint_abount_hints, Trig_Show_hint_abount_hints_Actions);
}
void Trig_Show_Hint_Abount_Items_Actions() {
	DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "|cff32cd32Подсказка:|r");
	DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "По умолчанию, если вы покупаете рецепт на предмет, то при достаточном количестве золота, вы получите его сразу. В сумму требуемого золота входят ваши предметы, необходимые для сборки!!!");
}
void InitTrig_Show_Hint_Abount_Items() {
	gg_trg_Show_Hint_Abount_Items[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventPeriodic(gg_trg_Show_Hint_Abount_Items, 600.);
	TriggerAddAction(gg_trg_Show_Hint_Abount_Items, Trig_Show_Hint_Abount_Items_Actions);
}
void Trig_Hint_About_Random_Actions() {
	DisplayTextToForce(bj_FORCE_ALL_PLAYERS, "Вы можете выбрать случайного героя, написав в чат |cff99ccff-r/-random/-р/-рандом|r, и получить дополнительно |cFFFFFF00+250|r золота.");
}
void InitTrig_Hint_About_Random() {
	gg_trg_Hint_About_Random[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventSingle(gg_trg_Hint_About_Random, 13.);
	TriggerAddAction(gg_trg_Hint_About_Random, Trig_Hint_About_Random_Actions);
}
void Trig_Show_hint_abount_reference_panel_Actions() {
	DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS, 15., "Вы можете воспользоваться дополнительной информацией в Панели Справки (|Cfffed312F8|r)");
}
void InitTrig_Show_hint_abount_reference_panel() {
	gg_trg_Show_hint_abount_reference_panel[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventSingle(gg_trg_Show_hint_abount_reference_panel, 200.);
	TriggerRegisterTimerEventSingle(gg_trg_Show_hint_abount_reference_panel, 1200.);
	TriggerAddAction(gg_trg_Show_hint_abount_reference_panel, Trig_Show_hint_abount_reference_panel_Actions);
}
void Trig_Show_Ability_Learn_Actions() {
	unit hero = GetLearningUnit();
	player p = GetOwningPlayer(hero);
	int id = GetLearnedSkill();
	if (IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS) && udg_System_ShowAbil_And_Items_Hint[GetPlayerId(GetLocalPlayer()) + 1]) {
		DisplayTextToPlayer(GetLocalPlayer(), .0, .0, udg_ColorString[GetPlayerId(p) + 1] + GetPlayerName(p) + "|r изучил способность |cff99ccff" + GetObjectName(id) + "|r ( |cFF969696" + I2S(GetUnitAbilityLevel(hero, id) - 1) + "|r»»|cff99ccff" + I2S(GetUnitAbilityLevel(hero, id)) + "|r )");
	}
	p[null] = null;
	hero[null] = null;
}
bool Trig_Show_Ability_Learn_Conditions() {
	return ((IsUnitType(GetLearningUnit(), UNIT_TYPE_HERO)) && (GetPlayerId(GetOwningPlayer(GetLearningUnit())) <= 8)) != null;
}
void InitTrig_Show_Ability_Learn() {
	int index = 0;
	gg_trg_Show_Ability_Learn[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Show_Ability_Learn, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Show_Ability_Learn, Condition(Trig_Show_Ability_Learn_Conditions));
	TriggerAddAction(gg_trg_Show_Ability_Learn, Trig_Show_Ability_Learn_Actions);
}
void Trig_System_Personal_Items_Buy_Item_Actions() {
	item it = GetSoldItem();
	string name = GetItemName(it);
	player p;
	if (GetItemType(GetSoldItem()) == ITEM_TYPE_UNKNOWN) {
		p[GetOwningPlayer(GetBuyingUnit())] = GetOwningPlayer(GetBuyingUnit());
		SetItemUserData(it, GetPlayerId(GetOwningPlayer(GetBuyingUnit())) + 1);
		if (IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS) && udg_System_ShowAbil_And_Items_Hint[GetPlayerId(GetLocalPlayer()) + 1] && GetItemType(GetSoldItem()) == ITEM_TYPE_PERMANENT) {
			DisplayTextToPlayer(GetLocalPlayer(), .0, .0, udg_ColorString[GetPlayerId(p) + 1] + GetPlayerName(p) + "|r приобрел предмет |cff99ccff" + name + "|r");
		}
		if (IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS) && GetLocalPlayer() == p && udg_Count_Item_Tips_Message[GetPlayerId(p) + 1] <= 2) {
			DisplayTextToPlayer(GetLocalPlayer(), .0, .0, "|cff99ccffВНИМАНИЕ|r: ЛЮБОЙ предмет (даже сборный) вы можете купить |cFFFF0000Одним Нажатием|r (при достаточном количестве золота и места).");
			udg_Count_Item_Tips_Message[udg_Count_Item_Tips_Message[GetPlayerId(p) + 1] + 1] = udg_Count_Item_Tips_Message[GetPlayerId(p) + 1] + 1;
		}
		it[null] = null;
	}
	p[null] = null;
}
void InitTrig_System_Personal_Items_Buy_Item() {
	int index = 0;
	gg_trg_System_Personal_Items_Buy_Item[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_System_Personal_Items_Buy_Item, Player(index), EVENT_PLAYER_UNIT_SELL_ITEM, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddAction(gg_trg_System_Personal_Items_Buy_Item, Trig_System_Personal_Items_Buy_Item_Actions);
}
void Trig_System_Personal_Items_Pick_Up_Item_Actions() {
	item it = GetManipulatedItem();
	int id = GetItemTypeId(it);
	int cv = GetItemUserData(it);
	float x = GetUnitX(GetManipulatingUnit());
	float y = GetUnitY(GetManipulatingUnit());
	if (GetItemType(it) != ITEM_TYPE_CHARGED && GetItemType(it) != ITEM_TYPE_POWERUP) {
		if ((cv == 0) || (cv == (GetPlayerId(GetOwningPlayer(GetManipulatingUnit())) + 1))) {
		else
			SetItemPosition(it, x, y);
			SimError(GetOwningPlayer(GetManipulatingUnit()), "Вы не можете подбирать чужие предметы");
		}
	}
	it[null] = null;
}
void InitTrig_System_Personal_Items_Pick_Up_Item() {
	int index = 0;
	gg_trg_System_Personal_Items_Pick_Up_Item[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_System_Personal_Items_Pick_Up_Item, Player(index), EVENT_PLAYER_UNIT_PICKUP_ITEM, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddAction(gg_trg_System_Personal_Items_Pick_Up_Item, Trig_System_Personal_Items_Pick_Up_Item_Actions);
}
bool Trig_no_attack_Conditions() {
	return (IsUnitAlly(GetTriggerUnit(), GetOwningPlayer(GetAttacker())));
}
void Trig_no_attack_Actions() {
	IssueImmediateOrderById(GetAttacker(), $D0004);
}
void InitTrig_no_attack() {
	gg_trg_no_attack[CreateTrigger()] = CreateTrigger();
	TriggerRegisterAnyUnitEventBJ(gg_trg_no_attack, EVENT_PLAYER_UNIT_ATTACKED);
	TriggerAddCondition(gg_trg_no_attack, Condition(Trig_no_attack_Conditions));
	TriggerAddAction(gg_trg_no_attack, Trig_no_attack_Actions);
}
void Trig_Select_Refrence_Panel_Actions() {
	if ((GetLocalPlayer() == GetTriggerPlayer())) {
		ClearSelection();
	}
}
bool Trig_Select_Refrence_Panel_Conditions() {
	return GetUnitTypeId(GetTriggerUnit()) == 'h00C' && GetTriggerPlayer() != GetOwningPlayer(GetTriggerUnit());
}
void InitTrig_Select_Refrence_Panel() {
	int index = 0;
	gg_trg_Select_Refrence_Panel[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Select_Refrence_Panel, Player(index), EVENT_PLAYER_UNIT_SELECTED, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Select_Refrence_Panel, Condition(Trig_Select_Refrence_Panel_Conditions));
	TriggerAddAction(gg_trg_Select_Refrence_Panel, Trig_Select_Refrence_Panel_Actions);
}
void Trig_ShopAnimation_Actions() {
	unit shop = GetTriggerUnit();
	int id = GetUnitTypeId(shop);
	player p = GetTriggerPlayer();
	string s;
	bool select = false;
	if (((id == 'h00D') || (id == 'h000') || (id == 'h002')) && GetLocalPlayer() == p) {
		SetUnitAnimation(shop, "Stand Work");
		select[true] = true;
	}
	if ((id == 'h001') && GetLocalPlayer() == p) {
		SetUnitAnimation(shop, "Stand Victory");
		select[true] = true;
	}
	if ((id == 'h00S') && GetLocalPlayer() == p) {
		SetUnitAnimation(shop, "Stand Work");
		select[true] = true;
	}
	s[""] = "";
	if ((id == 'h003')) {
		if (GetLocalPlayer() == p) {
			s["Abilities\\Spells\\Human\\MagicSentry\\MagicSentryCaster.mdl"] = "Abilities\\Spells\\Human\\MagicSentry\\MagicSentryCaster.mdl";
		}
		udg_ShopEffectSelectedForPlayer[AddSpecialEffectTarget(s, shop, "overhead")] = AddSpecialEffectTarget(s, shop, "overhead");
		select[true] = true;
	}
	s[""] = "";
	if ((id == 'h00Y')) {
		if (GetLocalPlayer() == p) {
			s["Abilities\\Spells\\Orc\\SpiritLink\\SpiritLinkZapTarget.mdl"] = "Abilities\\Spells\\Orc\\SpiritLink\\SpiritLinkZapTarget.mdl";
		}
		udg_ShopEffectSelectedForPlayer[AddSpecialEffectTarget(s, shop, "head")] = AddSpecialEffectTarget(s, shop, "head");
		select[true] = true;
	}
	udg_ShopSelectedForPlayer[shop] = shop;
	shop[null] = null;
	p[null] = null;
}
bool Trig_ShopAnimation_Conditions() {
	return ((IsUnitType(GetTriggerUnit(), UNIT_TYPE_STRUCTURE)) && (udg_ShopSelectedForPlayer[GetPlayerId(GetTriggerPlayer())] != GetTriggerUnit())) != null;
}
void InitTrig_ShopAnimation() {
	int index = 0;
	gg_trg_ShopAnimation[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_ShopAnimation, Player(index), EVENT_PLAYER_UNIT_SELECTED, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_ShopAnimation, Condition(Trig_ShopAnimation_Conditions));
	TriggerAddAction(gg_trg_ShopAnimation, Trig_ShopAnimation_Actions);
}
void Trig_ShopStopAnimation_Actions() {
	unit shop = GetTriggerUnit();
	int id = GetUnitTypeId(shop);
	player p = GetTriggerPlayer();
	if (((id == 'h00D') || (id == 'h000') || (id == 'h002') || (id == 'h00S') || (id == 'h001')) && GetLocalPlayer() == p) {
		SetUnitAnimation(shop, "Stand");
	}
	if ((id == 'h003') || (id == 'h00Y')) {
		DestroyEffect(udg_ShopEffectSelectedForPlayer[GetPlayerId(p)]);
	}
	shop[null] = null;
	p[null] = null;
}
bool Trig_ShopStopAnimation_Conditions() {
	return (IsUnitType(GetTriggerUnit(), UNIT_TYPE_STRUCTURE)) != null;
}
void InitTrig_ShopStopAnimation() {
	int index = 0;
	gg_trg_ShopStopAnimation[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_ShopStopAnimation, Player(index), EVENT_PLAYER_UNIT_DESELECTED, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_ShopStopAnimation, Condition(Trig_ShopStopAnimation_Conditions));
	TriggerAddAction(gg_trg_ShopStopAnimation, Trig_ShopStopAnimation_Actions);
}
void Trig_RedMarkToUnit_Periodic_Move_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit u = LoadUnitHandle(udg_hash, h, 1);
	unit mark = LoadUnitHandle(udg_hash, h, 2);
	if (GetUnitState(u, UNIT_STATE_LIFE) > .405) {
		SetUnitX(mark, GetUnitX(u));
		SetUnitY(mark, GetUnitY(u));
	else
		RemoveUnit(mark);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	u[null] = null;
	mark[null] = null;
}
void Trig_RedMarkToUnit_Actions() {
	unit u = GetEnteringUnit();
	int id = GetUnitTypeId(u);
	unit mark;
	timer t;
	int h;
	if (IsUnitIllusion(u) == false && ((id == 'n00K') || (id == 'n00O') || (id == 'u008') || (id == 'n00V') || (id == 'u00C') || (id == 'n015') || (id == 'n019') || (id == 'n01C') || (id == 'n009') || (id == 'n00E') || (id == 'N000') || (id == 'N00J'))) {
		mark[CreateUnit(Player($B), 'n01M', GetUnitX(u), GetUnitY(u), .0)] = CreateUnit(Player($B), 'n01M', GetUnitX(u), GetUnitY(u), .0);
		SetUnitPathing(mark, false);
		t[CreateTimer()] = CreateTimer();
		h[GetHandleId(t)] = GetHandleId(t);
		SaveUnitHandle(udg_hash, h, 1, u);
		SaveUnitHandle(udg_hash, h, 2, mark);
		TimerStart(t, .1, true, Trig_RedMarkToUnit_Periodic_Move_Actions);
		mark[null] = null;
		t[null] = null;
	}
	u[null] = null;
}
void InitTrig_RedMarkToUnit() {
	region rectRegion = CreateRegion();
	gg_trg_RedMarkToUnit[CreateTrigger()] = CreateTrigger();
	RegionAddRect(rectRegion, bj_mapInitialPlayableArea);
	TriggerRegisterEnterRegion(gg_trg_RedMarkToUnit, rectRegion, null);
	TriggerAddAction(gg_trg_RedMarkToUnit, Trig_RedMarkToUnit_Actions);
}
void Trig_UnSelectedDummyRedMark_Actions() {
	if ((GetLocalPlayer() == GetTriggerPlayer())) {
		ClearSelection();
	}
}
bool Trig_UnSelectedDummyRedMark_Conditions() {
	return GetUnitTypeId(GetTriggerUnit()) == 'n01M';
}
void InitTrig_UnSelectedDummyRedMark() {
	int index = 0;
	gg_trg_UnSelectedDummyRedMark[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_UnSelectedDummyRedMark, Player(index), EVENT_PLAYER_UNIT_SELECTED, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_UnSelectedDummyRedMark, Condition(Trig_UnSelectedDummyRedMark_Conditions));
	TriggerAddAction(gg_trg_UnSelectedDummyRedMark, Trig_UnSelectedDummyRedMark_Actions);
}
void Trig_SpecEffect_on_Casters_Animation_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster1 = LoadUnitHandle(udg_hash, h, 1);
	unit caster2 = LoadUnitHandle(udg_hash, h, 2);
	if (GetUnitState(caster1, UNIT_STATE_LIFE) > .405 || GetUnitState(caster2, UNIT_STATE_LIFE) > .405) {
		if (GetUnitState(caster1, UNIT_STATE_LIFE) > .405) {
			SetUnitAnimation(caster1, "spell");
		else
			RemoveSavedHandle(udg_hash, h, 1);
		}
		if (GetUnitState(caster2, UNIT_STATE_LIFE) > .405) {
			SetUnitAnimation(caster2, "spell");
		else
			RemoveSavedHandle(udg_hash, h, 2);
		}
	else
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	caster1[null] = null;
	caster2[null] = null;
}
void Trig_SpecEffect_on_Casters_Actions() {
	array<unit> u;
	array<timer> t;
	array<int> h;
	array<float> time;
	u[gg_unit_o003_0028] = gg_unit_o003_0028;
	u[gg_unit_h01K_0109] = gg_unit_h01K_0109;
	u[gg_unit_e002_0108] = gg_unit_e002_0108;
	u[gg_unit_n00Y_0101] = gg_unit_n00Y_0101;
	u[gg_unit_o003_0027] = gg_unit_o003_0027;
	u[gg_unit_h01K_0100] = gg_unit_h01K_0100;
	u[gg_unit_e002_0106] = gg_unit_e002_0106;
	u[gg_unit_n00Y_0102] = gg_unit_n00Y_0102;
	t[CreateTimer()] = CreateTimer();
	h[GetHandleId(t[1])] = GetHandleId(t[1]);
	t[CreateTimer()] = CreateTimer();
	h[GetHandleId(t[2])] = GetHandleId(t[2]);
	t[CreateTimer()] = CreateTimer();
	h[GetHandleId(t[3])] = GetHandleId(t[3]);
	t[CreateTimer()] = CreateTimer();
	h[GetHandleId(t[4])] = GetHandleId(t[4]);
	time[.867] = .867;
	time[1.33] = 1.33;
	time[2.666] = 2.666;
	time[1.167] = 1.167;
	SaveUnitHandle(udg_hash, h[1], 1, u[1]);
	SaveUnitHandle(udg_hash, h[1], 2, u[5]);
	SaveReal(udg_hash, h[1], 3, time[1]);
	SaveUnitHandle(udg_hash, h[2], 1, u[2]);
	SaveUnitHandle(udg_hash, h[2], 2, u[6]);
	SaveReal(udg_hash, h[2], 3, time[2]);
	SaveUnitHandle(udg_hash, h[3], 1, u[3]);
	SaveUnitHandle(udg_hash, h[3], 2, u[7]);
	SaveReal(udg_hash, h[3], 3, time[3]);
	SaveUnitHandle(udg_hash, h[4], 1, u[4]);
	SaveUnitHandle(udg_hash, h[4], 2, u[8]);
	SaveReal(udg_hash, h[4], 3, time[4]);
	TimerStart(t[1], time[1], true, Trig_SpecEffect_on_Casters_Animation_Actions);
	TimerStart(t[2], time[2], true, Trig_SpecEffect_on_Casters_Animation_Actions);
	TimerStart(t[3], time[3], true, Trig_SpecEffect_on_Casters_Animation_Actions);
	TimerStart(t[4], time[4], true, Trig_SpecEffect_on_Casters_Animation_Actions);
	u[null] = null;
	u[null] = null;
	u[null] = null;
	u[null] = null;
	u[null] = null;
	u[null] = null;
	u[null] = null;
	u[null] = null;
	t[null] = null;
	t[null] = null;
	t[null] = null;
	t[null] = null;
}
void InitTrig_SpecEffect_on_Casters() {
	gg_trg_SpecEffect_on_Casters[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEvent(gg_trg_SpecEffect_on_Casters, .0, false);
	TriggerAddAction(gg_trg_SpecEffect_on_Casters, Trig_SpecEffect_on_Casters_Actions);
}
void Trig_PortalSpecEffects_Peridoic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit dummi = LoadUnitHandle(udg_hash, h, 1);
	unit missile = LoadUnitHandle(udg_hash, h, 2);
	float angle = LoadReal(udg_hash, h, 3);
	int wait = LoadInteger(udg_hash, h, 4);
	float x = GetRectCenterX(gg_rct_cast_magi) + 310. * Cos(angle * bj_DEGTORAD);
	float y = GetRectCenterY(gg_rct_cast_magi) + 310. * Sin(angle * bj_DEGTORAD);
	if (wait < 50) {
		wait[wait + 1] = wait + 1;
		SaveInteger(udg_hash, h, 4, wait);
	else
		wait[0] = 0;
		SaveInteger(udg_hash, h, 4, wait);
		DestroyEffect(AddSpecialEffectTarget("s_ShadowEruption_Rain.mdl", dummi, "origin"));
	}
	SetUnitPosition(missile, x, y);
	SetUnitFacing(missile, angle + 90.);
	angle[angle + 7.2] = angle + 7.2;
	SaveReal(udg_hash, h, 3, angle);
	dummi[null] = null;
	missile[null] = null;
	t[null] = null;
}
void Trig_PortalSpecEffects_Actions() {
	unit dummi = CreateUnit(Player($F), 'h00U', GetRectCenterX(gg_rct_cast_magi) + 20., GetRectCenterY(gg_rct_cast_magi) + 30., .0);
	unit missile = CreateUnit(Player($F), 'h00U', GetRectCenterX(gg_rct_cast_magi), GetRectCenterY(gg_rct_cast_magi), .0);
	effect ef = AddSpecialEffectTarget("Abilities\\Spells\\Undead\\OrbOfDeath\\OrbOfDeathMissile.mdl", missile, "origin");
	timer t = CreateTimer();
	int h = GetHandleId(t);
	SetUnitScale(dummi, 2., 2., 2.);
	UnitAddAbility(missile, 'Amrf');
	UnitRemoveAbility(missile, 'Amrf');
	SetUnitFlyHeight(missile, 150., .0);
	SaveUnitHandle(udg_hash, h, 1, dummi);
	SaveUnitHandle(udg_hash, h, 2, missile);
	SaveReal(udg_hash, h, 3, .0);
	SaveInteger(udg_hash, h, 4, 0);
	TimerStart(t, .04, true, Trig_PortalSpecEffects_Peridoic_Actions);
	dummi[null] = null;
	missile[null] = null;
	ef[null] = null;
	t[null] = null;
}
void InitTrig_PortalSpecEffects() {
	gg_trg_PortalSpecEffects[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEvent(gg_trg_PortalSpecEffects, 2., false);
	TriggerAddAction(gg_trg_PortalSpecEffects, Trig_PortalSpecEffects_Actions);
}
void Trig_Gates_Start_Animation_Actions() {
	SetDoodadAnimationRect(bj_mapInitialPlayableArea, 'D01A', "stand alternate", false);
}
void InitTrig_Gates_Start_Animation() {
	gg_trg_Gates_Start_Animation[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventSingle(gg_trg_Gates_Start_Animation, 2.);
	TriggerAddAction(gg_trg_Gates_Start_Animation, Trig_Gates_Start_Animation_Actions);
}
void Trig_Unstuck_15sec_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit hero = LoadUnitHandle(udg_hash, h, 1);
	float x = GetRectCenterX(gg_rct_Respawn_Heroes);
	float y = GetRectCenterY(gg_rct_Respawn_Heroes);
	camerasetup theCam = CreateCameraSetup();
	PauseUnit(hero, false);
	SetUnitPosition(hero, x, y);
	if (GetLocalPlayer() == GetOwningPlayer(hero)) {
		DisplayTextToPlayer(GetOwningPlayer(hero), 0, 0, "|cff99ccffВНИМАНИЕ!!!|r|nВаш герой отморозился и был перемещен в центр базы.");
		CameraSetupSetField(theCam, CAMERA_FIELD_TARGET_DISTANCE, GetCameraField(CAMERA_FIELD_TARGET_DISTANCE), 0);
		CameraSetupSetField(theCam, CAMERA_FIELD_FARZ, GetCameraField(CAMERA_FIELD_FARZ), 0);
		CameraSetupSetField(theCam, CAMERA_FIELD_ZOFFSET, GetCameraField(CAMERA_FIELD_ZOFFSET), 0);
		CameraSetupSetField(theCam, CAMERA_FIELD_ANGLE_OF_ATTACK, bj_RADTODEG * GetCameraField(CAMERA_FIELD_ANGLE_OF_ATTACK), 0);
		CameraSetupSetField(theCam, CAMERA_FIELD_FIELD_OF_VIEW, bj_RADTODEG * GetCameraField(CAMERA_FIELD_FIELD_OF_VIEW), 0);
		CameraSetupSetField(theCam, CAMERA_FIELD_ROLL, bj_RADTODEG * GetCameraField(CAMERA_FIELD_ROLL), 0);
		CameraSetupSetField(theCam, CAMERA_FIELD_ROTATION, bj_RADTODEG * GetCameraField(CAMERA_FIELD_ROTATION), 0);
		CameraSetupSetDestPosition(theCam, x, y, 0);
		CameraSetupApplyForceDuration(theCam, true, 0);
		ClearSelection();
		SelectUnit(hero, true);
	}
	DestroyTimer(t);
	FlushChildHashtable(udg_hash, h);
	t[null] = null;
	hero[null] = null;
}
void Trig_PlayerEnterGameCommand_Actions() {
	player p = GetTriggerPlayer();
	string s = GetEventPlayerChatString();
	unit hero;
	timer t;
	bool end;
	int random;
	if (((s == "-r") || (s == "-random") || (s == "-р") || (s == "-рандом")) && udg_Is_Player_Got_Randomed[GetPlayerId(p) + 1] == false) {
		udg_Is_Player_Got_Randomed[true] = true;
		random[GetRandomInt(1, udg_Total_Heroes_Count)] = GetRandomInt(1, udg_Total_Heroes_Count);
		udg_Hero_Randomed[CreateUnit(p, udg_Heroes_Types[udg_Heroes_Random_Data[random]], 4925., 3900., .0)] = CreateUnit(p, udg_Heroes_Types[udg_Heroes_Random_Data[random]], 4925., 3900., .0);
		udg_Heroes_Random_Data[udg_Heroes_Random_Data[udg_Total_Heroes_Count]] = udg_Heroes_Random_Data[udg_Total_Heroes_Count];
		udg_Total_Heroes_Count[udg_Total_Heroes_Count - 1] = udg_Total_Heroes_Count - 1;
		TriggerExecute(gg_trg_Pick_Hero_Upgrade);
	}
	if (((s == "-ms") || (s == "-ск") || (s == "-movespeed") || (s == "-скорость")) && udg_herounit[GetPlayerId(p) + 1] != null) {
		DisplayTimedTextToPlayer(p, .0, .0, 5., GetUnitName(udg_herounit[GetPlayerId(p) + 1]) + " перемещается со скоростью = |cff99ccff" + I2S(R2I(GetUnitMoveSpeed(udg_herounit[GetPlayerId(p) + 1]))) + "|r");
	}
	if ((s == "-c") || (s == "-о") || (s == "-clear") || (s == "-очистить")) {
		if ((GetLocalPlayer() == p)) {
			ClearTextMessages();
		}
	}
	if ((s == "-us") || (s == "-unstuck")) {
		if ((GetLocalPlayer() == p)) {
			DisplayTextToPlayer(p, .0, .0, "|cff99ccffВНИМАНИЕ!!!|r");
			DisplayTextToPlayer(p, .0, .0, "Ваш герой заморожен, через 15 секунд он будет перемещен в центр базы.");
		}
		hero[udg_herounit[GetPlayerId(p) + 1]] = udg_herounit[GetPlayerId(p) + 1];
		t[CreateTimer()] = CreateTimer();
		PauseUnit(hero, true);
		SaveUnitHandle(udg_hash, GetHandleId(t), 1, hero);
		TimerStart(t, 15., false, Trig_Unstuck_15sec_Actions);
		hero[null] = null;
		t[null] = null;
	}
	if ((s == "-shh") || (s == "-show hero hints")) {
		end[false] = false;
		if (udg_System_ShowAbil_And_Items_Hint[GetPlayerId(p) + 1]) {
			if (GetLocalPlayer() == p) {
				DisplayTextToPlayer(GetLocalPlayer(), .0, .0, "Подсказки о покупке предметов и изучении способностей отключены.");
			}
			end[true] = true;
			udg_System_ShowAbil_And_Items_Hint[false] = false;
		}
		if (udg_System_ShowAbil_And_Items_Hint[GetPlayerId(p) + 1] == false && end == false) {
			if (GetLocalPlayer() == p) {
				DisplayTextToPlayer(GetLocalPlayer(), .0, .0, "Подсказки о покупке предметов и изучении способностей включены.");
			}
			udg_System_ShowAbil_And_Items_Hint[true] = true;
		}
	}
	if ((s == "-fast start") || (s == "-fs") || (s == "+")) {
		if ((udg_Is_Player_Fast_Wave_Start[GetPlayerId(p) + 1] == false) && (udg_Is_Fast_Wave_Start_On_Off)) {
			udg_Count_Players_Fast_Wave_Start[(udg_Count_Players_Fast_Wave_Start + 1)] = (udg_Count_Players_Fast_Wave_Start + 1);
			udg_Is_Player_Fast_Wave_Start[true] = true;
			DisplayTextToForce(bj_FORCE_ALL_PLAYERS, (udg_ColorString[GetPlayerId(p) + 1] + (GetPlayerName(p) + ("|r |cFF969696хочет немедленно начать волну!|r (|Cfffed312" + (I2S(udg_Count_Players_Fast_Wave_Start) + ("|r|cFF969696/|r|Cfffed312" + (I2S(CountPlayersInForceBJ(udg_IGRAET)) + "|r )")))))));
			if (udg_Count_Players_Fast_Wave_Start >= CountPlayersInForceBJ(udg_IGRAET)) {
				StartTimerBJ(udg_Timer_Nomera_Volni, false, 1.);
			}
		}
	}
	p[null] = null;
}
void InitTrig_PlayerEnterGameCommand() {
	int index = 0;
	gg_trg_PlayerEnterGameCommand[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerChatEvent(gg_trg_PlayerEnterGameCommand, Player(index), "-", false);
		TriggerRegisterPlayerChatEvent(gg_trg_PlayerEnterGameCommand, Player(index), "+", true);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddAction(gg_trg_PlayerEnterGameCommand, Trig_PlayerEnterGameCommand_Actions);
}
void Trig_Unstuck_Ability_15sec_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit hero = LoadUnitHandle(udg_hash, h, 1);
	float x = GetRectCenterX(gg_rct_Respawn_Heroes);
	float y = GetRectCenterY(gg_rct_Respawn_Heroes);
	camerasetup theCam = CreateCameraSetup();
	PauseUnit(hero, false);
	SetUnitPosition(hero, x, y);
	if (GetLocalPlayer() == GetOwningPlayer(hero)) {
		DisplayTextToPlayer(GetOwningPlayer(hero), 0, 0, "|cff99ccffВНИМАНИЕ!!!|r|nВаш герой отморозился и был перемещен в центр базы.");
		CameraSetupSetField(theCam, CAMERA_FIELD_TARGET_DISTANCE, GetCameraField(CAMERA_FIELD_TARGET_DISTANCE), 0);
		CameraSetupSetField(theCam, CAMERA_FIELD_FARZ, GetCameraField(CAMERA_FIELD_FARZ), 0);
		CameraSetupSetField(theCam, CAMERA_FIELD_ZOFFSET, GetCameraField(CAMERA_FIELD_ZOFFSET), 0);
		CameraSetupSetField(theCam, CAMERA_FIELD_ANGLE_OF_ATTACK, bj_RADTODEG * GetCameraField(CAMERA_FIELD_ANGLE_OF_ATTACK), 0);
		CameraSetupSetField(theCam, CAMERA_FIELD_FIELD_OF_VIEW, bj_RADTODEG * GetCameraField(CAMERA_FIELD_FIELD_OF_VIEW), 0);
		CameraSetupSetField(theCam, CAMERA_FIELD_ROLL, bj_RADTODEG * GetCameraField(CAMERA_FIELD_ROLL), 0);
		CameraSetupSetField(theCam, CAMERA_FIELD_ROTATION, bj_RADTODEG * GetCameraField(CAMERA_FIELD_ROTATION), 0);
		CameraSetupSetDestPosition(theCam, x, y, 0);
		CameraSetupApplyForceDuration(theCam, true, 0);
		ClearSelection();
		SelectUnit(hero, true);
	}
	DestroyTimer(t);
	FlushChildHashtable(udg_hash, h);
	t[null] = null;
	hero[null] = null;
}
void Trig_PlayerUseSpellGameCommand_Actions() {
	player p = GetOwningPlayer(GetSpellAbilityUnit());
	int id = GetSpellAbilityId();
	unit hero;
	timer t;
	bool end;
	if ((id == 'A0MD') && udg_herounit[GetPlayerId(p) + 1] != null) {
		DisplayTimedTextToPlayer(p, .0, .0, 5., GetUnitName(udg_herounit[GetPlayerId(p) + 1]) + " перемещается со скоростью = |cff99ccff" + I2S(R2I(GetUnitMoveSpeed(udg_herounit[GetPlayerId(p) + 1]))) + "|r");
	}
	if ((id == 'A0MB')) {
		if ((GetLocalPlayer() == p)) {
			ClearTextMessages();
		}
	}
	if ((id == 'A0ME')) {
		if ((GetLocalPlayer() == p)) {
			DisplayTextToPlayer(p, .0, .0, "|cff99ccffВНИМАНИЕ!!!|r");
			DisplayTextToPlayer(p, .0, .0, "Ваш герой заморожен, через 15 секунд он будет перемещен в центр базы.");
		}
		hero[udg_herounit[GetPlayerId(p) + 1]] = udg_herounit[GetPlayerId(p) + 1];
		t[CreateTimer()] = CreateTimer();
		PauseUnit(hero, true);
		SaveUnitHandle(udg_hash, GetHandleId(t), 1, hero);
		TimerStart(t, 15., false, Trig_Unstuck_Ability_15sec_Actions);
		hero[null] = null;
		t[null] = null;
	}
	if ((id == 'A0MF')) {
		end[false] = false;
		if (udg_System_ShowAbil_And_Items_Hint[GetPlayerId(p) + 1]) {
			if (GetLocalPlayer() == p) {
				DisplayTextToPlayer(GetLocalPlayer(), .0, .0, "Подсказки о покупке предметов и изучении способностей отключены.");
			}
			end[true] = true;
			udg_System_ShowAbil_And_Items_Hint[false] = false;
		}
		if (udg_System_ShowAbil_And_Items_Hint[GetPlayerId(p) + 1] == false && end == false) {
			if (GetLocalPlayer() == p) {
				DisplayTextToPlayer(GetLocalPlayer(), .0, .0, "Подсказки о покупке предметов и изучении способностей включены.");
			}
			udg_System_ShowAbil_And_Items_Hint[true] = true;
		}
	}
	if ((id == 'A0MH')) {
		if ((udg_Is_Player_Fast_Wave_Start[GetPlayerId(p) + 1] == false) && (udg_Is_Fast_Wave_Start_On_Off)) {
			udg_Count_Players_Fast_Wave_Start[(udg_Count_Players_Fast_Wave_Start + 1)] = (udg_Count_Players_Fast_Wave_Start + 1);
			udg_Is_Player_Fast_Wave_Start[true] = true;
			DisplayTextToForce(bj_FORCE_ALL_PLAYERS, (udg_ColorString[GetPlayerId(p) + 1] + (GetPlayerName(p) + ("|r |cFF969696хочет немедленно начать волну!|r (|Cfffed312" + (I2S(udg_Count_Players_Fast_Wave_Start) + ("|r|cFF969696/|r|Cfffed312" + (I2S(CountPlayersInForceBJ(udg_IGRAET)) + "|r )")))))));
			if (udg_Count_Players_Fast_Wave_Start >= CountPlayersInForceBJ(udg_IGRAET)) {
				StartTimerBJ(udg_Timer_Nomera_Volni, false, 1.);
			}
		}
	}
	p[null] = null;
}
bool Trig_PlayerUseSpellGameCommand_Conditions() {
	return GetSpellAbilityId() == 'A0MD' || GetSpellAbilityId() == 'A0MB' || GetSpellAbilityId() == 'A0ME' || GetSpellAbilityId() == 'A0MF' || GetSpellAbilityId() == 'A0MH';
}
void InitTrig_PlayerUseSpellGameCommand() {
	int index = 0;
	gg_trg_PlayerUseSpellGameCommand[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_PlayerUseSpellGameCommand, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_PlayerUseSpellGameCommand, Condition(Trig_PlayerUseSpellGameCommand_Conditions));
	TriggerAddAction(gg_trg_PlayerUseSpellGameCommand, Trig_PlayerUseSpellGameCommand_Actions);
}
void Trig_GuardsExorcistDead_Removes_Buffs_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	group g = LoadGroupHandle(udg_hash, h, 1);
	unit Picked;
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		DestroyEffect(LoadEffectHandle(udg_hash, GetHandleId(Picked), $83));
		SetUnitLifeAndManaRegeneration(Picked, "life", -70);
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	Picked[null] = null;
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
}
void Trig_GuardsExorcistDead_2and5sec_wait_Actions() {
	timer t = GetExpiredTimer();
	int lopa = 0;
	while (true) {
		if (lopa > 8) break;
		if ((GetLocalPlayer() == Player(lopa))) {
			DisplayTimedTextToPlayer(GetLocalPlayer(), .0, .0, 99999., "|cff99ccffИгрa завершена. Всем игрокам огромное спасибо за участие!!!!|r");
			CreateFogModifierRadiusLocBJ(true, GetLocalPlayer(), FOG_OF_WAR_VISIBLE, GetRectCenter(gg_rct_Center_Vision), 650.);
		}
		DestroyFogModifier(udg_BaseVisionFogModifier[GetPlayerId(Player(lopa)) + 1]);
		lopa[lopa + 1] = lopa + 1;
	}
}
void Trig_GuardsExorcistDead_3sec_wait_Actions() {
	timer t = GetExpiredTimer();
	int lopa = 0;
	unit dammi = CreateUnit(Player($F), 'h00U', GetRectCenterX(gg_rct_cast_magi), GetRectCenterY(gg_rct_cast_magi), .0);
	group g = CreateGroup();
	unit Picked;
	GroupEnumUnitsInRect(g, bj_mapInitialPlayableArea, null);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && GetPlayerId(GetOwningPlayer(Picked)) <= 8 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
			KillUnit(Picked);
		}
		GroupRemoveUnit(g, Picked);
	}
	while (true) {
		if (lopa > 8) break;
		if ((GetLocalPlayer() == Player(lopa))) {
			ClearTextMessages();
			DisplayTimedTextToPlayer(GetLocalPlayer(), .0, .0, 99999., "|cffff0000Все стражи-чародеи погибли, вы проиграли!!!|r");
			SetCameraTargetController(dammi, .0, .0, false);
		}
		lopa[lopa + 1] = lopa + 1;
	}
	t[CreateTimer()] = CreateTimer();
	TimerStart(t, 2.5, false, Trig_GuardsExorcistDead_2and5sec_wait_Actions);
}
void Trig_GuardsExorcistDead_Actions() {
	timer t;
	int lopa = 0;
	group g;
	group g2;
	unit Picked;
	unit dammi;
	timer t1;
	int h1;
	if ((IsPlayerInForce(GetLocalPlayer(), udg_IGRAET))) {
		udg_CountGuardsExorcist[udg_CountGuardsExorcist - 1] = udg_CountGuardsExorcist - 1;
		DisplayTextToPlayer(GetLocalPlayer(), .0, .0, "|cff99ccffВНИМАНИЕ!!!|r");
		DisplayTextToPlayer(GetLocalPlayer(), .0, .0, "|cffff0000Один Из Стражей-Чародеев погиб!!!|r В живых осталось: |cff99ccff" + I2S(udg_CountGuardsExorcist) + "|r");
		PingMinimapEx(GetUnitX(GetDyingUnit()), GetUnitY(GetDyingUnit()), 5., $FE, 0, 0, true);
	}
	while (true) {
		if (lopa > 8) break;
		SetPlayerState(Player(lopa), PLAYER_STATE_RESOURCE_LUMBER, GetPlayerState(Player(lopa), PLAYER_STATE_RESOURCE_LUMBER) - 1);
		lopa[lopa + 1] = lopa + 1;
	}
	if (udg_CountGuardsExorcist == 4 || udg_CountGuardsExorcist == 1) {
		dammi[CreateUnit(Player(0), 'h00U', 1255., -5700., .0)] = CreateUnit(Player(0), 'h00U', 1255., -5700., .0);
		UnitApplyTimedLife(dammi, 'BTLF', 5.);
		SetUnitScale(dammi, 3., 3., 3.);
		DestroyEffect(AddSpecialEffect("Effects\\TheHolyBomb.mdl", 1255., -5700.));
		DestroyEffect(AddSpecialEffect("Effects\\LightNova.mdl", 1255., -5700.));
		g[CreateGroup()] = CreateGroup();
		GroupEnumUnitsInRange(g, 1255., -5700., 3000., null);
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && Picked != null && GetPlayerId(GetOwningPlayer(Picked)) >= 9 && GetPlayerId(GetOwningPlayer(Picked)) != $F && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
				StunUnitTimed(Picked, 10.);
				DestroyEffect(AddSpecialEffectTarget("Effects\\TheHolyBomb.mdl", Picked, "origin"));
				DestroyEffect(AddSpecialEffectTarget("Effects\\DivineRage.mdl", Picked, "origin"));
				SetUnitState(Picked, UNIT_STATE_LIFE, GetUnitState(Picked, UNIT_STATE_LIFE) * .5);
			}
			GroupRemoveUnit(g, Picked);
		}
		GroupClear(g);
		DestroyGroup(g);
		g[null] = null;
		Picked[null] = null;
		g[CreateGroup()] = CreateGroup();
		g2[CreateGroup()] = CreateGroup();
		GroupAddGroup(udg_PortalCastersMagi, g2);
		while (true) {
			Picked[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if (Picked == null) break;
			if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && Picked != null) {
				SetUnitLifeAndManaRegeneration(Picked, "life", 70);
				SaveEffectHandle(udg_hash, GetHandleId(Picked), $83, AddSpecialEffectTarget("Effects\\DivineBarrier.mdl", Picked, "origin"));
				GroupAddUnit(g, Picked);
			}
			GroupRemoveUnit(g2, Picked);
		}
		t1[CreateTimer()] = CreateTimer();
		h1[GetHandleId(t1)] = GetHandleId(t1);
		SaveGroupHandle(udg_hash, h1, 1, g);
		TimerStart(t1, 10., false, Trig_GuardsExorcistDead_Removes_Buffs_Actions);
		t1[null] = null;
		GroupClear(g2);
		DestroyGroup(g2);
		g2[null] = null;
		Picked[null] = null;
	}
	if (udg_CountGuardsExorcist <= 0) {
		lopa[0] = 0;
		DisableTrigger(gg_trg_Hero_Dead);
		EnableTrigger(gg_trg_PauseUnitWhenDefeat);
		udg_IsGameEnd[true] = true;
		while (true) {
			if (lopa > 8) break;
			if ((GetLocalPlayer() == Player(lopa))) {
				PanCameraToTimed(GetRectCenterX(gg_rct_cast_magi), GetRectCenterY(gg_rct_cast_magi), 3.);
			}
			lopa[lopa + 1] = lopa + 1;
		}
		g[CreateGroup()] = CreateGroup();
		GroupEnumUnitsInRect(g, bj_mapInitialPlayableArea, null);
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && GetPlayerId(GetOwningPlayer(Picked)) <= 8 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
				SetUnitPosition(Picked, GetRandomReal((GetRectCenterX(gg_rct_cast_magi) - 500.), (GetRectCenterX(gg_rct_cast_magi) + 500.)), GetRandomReal((GetRectCenterY(gg_rct_cast_magi) - 500.), (GetRectCenterY(gg_rct_cast_magi) + 500.)));
				DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl", GetUnitX(Picked), GetUnitY(Picked)));
				PauseUnit(Picked, true);
			}
			GroupRemoveUnit(g, Picked);
		}
		t[CreateTimer()] = CreateTimer();
		TimerStart(t, 3., false, Trig_GuardsExorcistDead_3sec_wait_Actions);
	}
}
bool Trig_GuardsExorcistDead_Conditions() {
	return (GetUnitTypeId(GetDyingUnit()) == 'h01K') || (GetUnitTypeId(GetDyingUnit()) == 'e002') || (GetUnitTypeId(GetDyingUnit()) == 'n00Y') || (GetUnitTypeId(GetDyingUnit()) == 'o003');
}
void InitTrig_GuardsExorcistDead() {
	int index = 0;
	gg_trg_GuardsExorcistDead[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_GuardsExorcistDead, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_GuardsExorcistDead, Condition(Trig_GuardsExorcistDead_Conditions));
	TriggerAddAction(gg_trg_GuardsExorcistDead, Trig_GuardsExorcistDead_Actions);
}
bool Trig_PauseUnitWhenDefeat_Func001Func001C() {
	return ((1 + GetPlayerId(GetOwningPlayer(GetEnumUnit()))) <= 9);
}
void Trig_PauseUnitWhenDefeat_Func001A() {
	if ((Trig_PauseUnitWhenDefeat_Func001Func001C())) {
		KillUnit(GetEnumUnit());
	}
}
void Trig_PauseUnitWhenDefeat_Actions() {
	ForGroupBJ(GetUnitsInRectAll(bj_mapInitialPlayableArea), Trig_PauseUnitWhenDefeat_Func001A);
}
void InitTrig_PauseUnitWhenDefeat() {
	gg_trg_PauseUnitWhenDefeat[CreateTrigger()] = CreateTrigger();
	DisableTrigger(gg_trg_PauseUnitWhenDefeat);
	TriggerRegisterTimerEventPeriodic(gg_trg_PauseUnitWhenDefeat, .05);
	TriggerAddAction(gg_trg_PauseUnitWhenDefeat, Trig_PauseUnitWhenDefeat_Actions);
}
bool Trig_PauseUnitWhenWin_Func001C() {
	return ((1 + GetPlayerId(GetOwningPlayer(GetEnteringUnit()))) >= $A) && ((1 + GetPlayerId(GetOwningPlayer(GetEnteringUnit()))) <= $F);
}
bool Trig_PauseUnitWhenWin_Func002C() {
	return ((1 + GetPlayerId(GetOwningPlayer(GetEnteringUnit()))) <= 9);
}
void Trig_PauseUnitWhenWin_Actions() {
	if ((Trig_PauseUnitWhenWin_Func001C())) {
		KillUnit(GetEnteringUnit());
	}
	if ((Trig_PauseUnitWhenWin_Func002C())) {
		PauseUnit(GetEnteringUnit(), true);
	}
}
void InitTrig_PauseUnitWhenWin() {
	gg_trg_PauseUnitWhenWin[CreateTrigger()] = CreateTrigger();
	DisableTrigger(gg_trg_PauseUnitWhenWin);
	TriggerRegisterEnterRectSimple(gg_trg_PauseUnitWhenWin, bj_mapInitialPlayableArea);
	TriggerAddAction(gg_trg_PauseUnitWhenWin, Trig_PauseUnitWhenWin_Actions);
}
void Trig_GameEndWin_Effects_Actions() {
	timer t = GetExpiredTimer();
	float x = GetRandomReal((GetRectCenterX(gg_rct_cast_magi) - 500.), (GetRectCenterX(gg_rct_cast_magi) + 500.));
	float y = GetRandomReal((GetRectCenterY(gg_rct_cast_magi) - 500.), (GetRectCenterY(gg_rct_cast_magi) + 500.));
	unit dammi = CreateUnit(Player($F), 'h00U', x, y, .0);
	unit dammi2 = CreateUnit(Player($F), 'h00U', x, y, .0);
	UnitApplyTimedLife(dammi, 'BTLF', 11.2);
	AddSpecialEffectTarget("Effects\\Win_Fireworks.mdx", dammi, "origin");
	SetUnitScale(dammi2, 3., 3., 3.);
	DestroyEffect(AddSpecialEffectTarget("Effects\\Fireworksblue.mdl", dammi2, "origin"));
}
void Trig_GameEndWin_1and5sec_wait_Actions() {
	timer t = GetExpiredTimer();
	int lopa = 0;
	while (true) {
		if (lopa > 8) break;
		if ((GetLocalPlayer() == Player(lopa))) {
			DisplayTimedTextToPlayer(GetLocalPlayer(), .0, .0, 99999., "|cff99ccffНа этом моменте альфа версия карты заканчивается!!! Игрa завершена. Всем игрокам огромное спасибо за участие!!!!|r");
		}
		lopa[lopa + 1] = lopa + 1;
	}
	DestroyTimer(t);
	t[CreateTimer()] = CreateTimer();
	TimerStart(t, .25, true, Trig_GameEndWin_Effects_Actions);
}
void Trig_GameEndWin_2sec_wait_Actions() {
	timer t = GetExpiredTimer();
	int lopa = 0;
	unit dammi = CreateUnit(Player($F), 'h00U', GetRectCenterX(gg_rct_cast_magi), GetRectCenterY(gg_rct_cast_magi), .0);
	group g = CreateGroup();
	unit Picked;
	GroupEnumUnitsInRect(g, bj_mapInitialPlayableArea, null);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && GetPlayerId(GetOwningPlayer(Picked)) <= 8 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
			SetUnitInvulnerable(Picked, true);
			if (GetUnitTypeId(Picked) == 'E004' || GetUnitTypeId(Picked) == 'H01I' || GetUnitTypeId(Picked) == 'N00W' || GetUnitTypeId(Picked) == 'E001') {
				SetUnitAnimation(Picked, "Stand");
			else
				SetUnitAnimation(Picked, "Stand Victory");
			}
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	while (true) {
		if (lopa > 8) break;
		if ((GetLocalPlayer() == Player(lopa))) {
			ClearTextMessages();
			DisplayTimedTextToPlayer(GetLocalPlayer(), .0, .0, 99999., "|cff00CD00Армия Тьмы уничтожена, чародеи живы и портал открыт...Вы победили!!!!!!|r");
			SetCameraTargetController(dammi, .0, .0, false);
		}
		lopa[lopa + 1] = lopa + 1;
	}
	t[CreateTimer()] = CreateTimer();
	TimerStart(t, 1.5, false, Trig_GameEndWin_1and5sec_wait_Actions);
}
void Trig_GameEndWin_6and0sec_wait_Actions() {
	timer t;
	int lopa;
	group g;
	unit Picked;
	lopa[0] = 0;
	EnableTrigger(gg_trg_PauseUnitWhenWin);
	udg_IsGameEnd[true] = true;
	while (true) {
		if (lopa > 8) break;
		if ((GetLocalPlayer() == Player(lopa))) {
			PanCameraToTimed(GetRectCenterX(gg_rct_cast_magi), GetRectCenterY(gg_rct_cast_magi), 2.);
		}
		lopa[lopa + 1] = lopa + 1;
	}
	g[CreateGroup()] = CreateGroup();
	GroupEnumUnitsInRect(g, bj_mapInitialPlayableArea, null);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && GetPlayerId(GetOwningPlayer(Picked)) <= 8 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
			SetUnitPosition(Picked, GetRandomReal((GetRectCenterX(gg_rct_cast_magi) - 500.), (GetRectCenterX(gg_rct_cast_magi) + 500.)), GetRandomReal((GetRectCenterY(gg_rct_cast_magi) - 500.), (GetRectCenterY(gg_rct_cast_magi) + 500.)));
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl", GetUnitX(Picked), GetUnitY(Picked)));
			PauseUnit(Picked, true);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	g[CreateGroup()] = CreateGroup();
	GroupEnumUnitsInRect(g, bj_mapInitialPlayableArea, null);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && GetPlayerId(GetOwningPlayer(Picked)) >= 9 && GetPlayerId(GetOwningPlayer(Picked)) < $F && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
			KillUnit(Picked);
		}
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	t[CreateTimer()] = CreateTimer();
	TimerStart(t, 2., false, Trig_GameEndWin_2sec_wait_Actions);
}
void Trig_GameEndWin_Actions() {
	timer t;
	t[CreateTimer()] = CreateTimer();
	TimerStart(t, 6., false, Trig_GameEndWin_6and0sec_wait_Actions);
}
void InitTrig_GameEndWin() {
	gg_trg_GameEndWin[CreateTrigger()] = CreateTrigger();
	DisableTrigger(gg_trg_GameEndWin);
	TriggerAddAction(gg_trg_GameEndWin, Trig_GameEndWin_Actions);
}
void Trig_Respawn_trees_Init_AddTree() {
	if (GetDestructableTypeId(GetEnumDestructable()) == 'ATtr' || GetDestructableTypeId(GetEnumDestructable()) == 'ATtc' || GetDestructableTypeId(GetEnumDestructable()) == 'ZTtw' || GetDestructableTypeId(GetEnumDestructable()) == 'NTtw' || GetDestructableTypeId(GetEnumDestructable()) == 'WTst' || GetDestructableTypeId(GetEnumDestructable()) == 'CTtr') {
		TriggerRegisterDeathEvent(gg_trg_Respawn_trees, GetEnumDestructable());
	}
}
void Trig_Respawn_trees_Init_Actions() {
	EnumDestructablesInRect(GetWorldBounds(), null, Trig_Respawn_trees_Init_AddTree);
}
void InitTrig_Respawn_trees_Init() {
	gg_trg_Respawn_trees_Init[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEvent(gg_trg_Respawn_trees_Init, 5., false);
	TriggerAddAction(gg_trg_Respawn_trees_Init, Trig_Respawn_trees_Init_Actions);
}
void Trig_Respawn_trees_With_Wait_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	destructable tree = LoadDestructableHandle(udg_hash, h, 1);
	DestructableRestoreLife(tree, GetDestructableMaxLife(tree), true);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
	tree[null] = null;
}
void Trig_Respawn_trees_Actions() {
	destructable tree = GetTriggerDestructable();
	timer t = CreateTimer();
	int h = GetHandleId(t);
	SaveDestructableHandle(udg_hash, h, 1, tree);
	TimerStart(t, 120., false, Trig_Respawn_trees_With_Wait_Actions);
	tree[null] = null;
	t[null] = null;
}
void InitTrig_Respawn_trees() {
	gg_trg_Respawn_trees[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Respawn_trees, Trig_Respawn_trees_Actions);
}
bool Trig_Day_Weather_Func003Func005C() {
	return (true == false);
}
bool Trig_Day_Weather_Func003C() {
	return (udg_Temp_Integer[1] == 1);
}
bool Trig_Day_Weather_Func004Func004C() {
	return (true == false);
}
bool Trig_Day_Weather_Func004C() {
	return (udg_Temp_Integer[1] == 2);
}
bool Trig_Day_Weather_Func005Func001C() {
	return (udg_Temp_Integer[1] == 3) || (udg_Temp_Integer[1] == 4) || (udg_Temp_Integer[1] == 5);
}
bool Trig_Day_Weather_Func005C() {
	return (Trig_Day_Weather_Func005Func001C());
}
void Trig_Day_Weather_Actions() {
	RemoveWeatherEffect(udg_Weather[1]);
	udg_Temp_Integer[GetRandomInt(1, 5)] = GetRandomInt(1, 5);
	if ((Trig_Day_Weather_Func003C())) {
		AddWeatherEffectSaveLast(bj_mapInitialPlayableArea, 'RAhr');
		udg_Weather[bj_lastCreatedWeatherEffect] = bj_lastCreatedWeatherEffect;
		udg_Boolean_Is_Rain[true] = true;
		if ((Trig_Day_Weather_Func003Func005C())) {
			StartTimerBJ(udg_Timer_Lightning_Strike_Weather, false, (17. + GetRandomReal(0, 25.)));
		}
	}
	if ((Trig_Day_Weather_Func004C())) {
		AddWeatherEffectSaveLast(bj_mapInitialPlayableArea, 'RAlr');
		udg_Weather[bj_lastCreatedWeatherEffect] = bj_lastCreatedWeatherEffect;
		udg_Boolean_Is_Rain[true] = true;
		if ((Trig_Day_Weather_Func004Func004C())) {
			StartTimerBJ(udg_Timer_Lightning_Strike_Weather, false, (17. + GetRandomReal(0, 25.)));
		}
	}
	if ((Trig_Day_Weather_Func005C())) {
		AddWeatherEffectSaveLast(bj_mapInitialPlayableArea, 'LRaa');
		udg_Weather[bj_lastCreatedWeatherEffect] = bj_lastCreatedWeatherEffect;
		udg_Boolean_Is_Rain[false] = false;
	}
	EnableWeatherEffect(udg_Weather[1], true);
}
void InitTrig_Day_Weather() {
	gg_trg_Day_Weather[CreateTrigger()] = CreateTrigger();
	TriggerRegisterGameStateEventTimeOfDay(gg_trg_Day_Weather, EQUAL, 6.);
	TriggerRegisterGameStateEventTimeOfDay(gg_trg_Day_Weather, EQUAL, 12.);
	TriggerAddAction(gg_trg_Day_Weather, Trig_Day_Weather_Actions);
}
void Trig_Sky_Morning_Actions() {
	SetSkyModel("Environment\\Sky\\LordaeronWinterSkyPink\\LordaeronWinterSkyPink.mdl");
}
void InitTrig_Sky_Morning() {
	gg_trg_Sky_Morning[CreateTrigger()] = CreateTrigger();
	TriggerRegisterGameStateEventTimeOfDay(gg_trg_Sky_Morning, EQUAL, 6.);
	TriggerAddAction(gg_trg_Sky_Morning, Trig_Sky_Morning_Actions);
}
void Trig_Sky_Day_Actions() {
	SetSkyModel("Environment\\Sky\\LordaeronSummerSky\\LordaeronSummerSky.mdl");
}
void InitTrig_Sky_Day() {
	gg_trg_Sky_Day[CreateTrigger()] = CreateTrigger();
	TriggerRegisterGameStateEventTimeOfDay(gg_trg_Sky_Day, EQUAL, 12.);
	TriggerAddAction(gg_trg_Sky_Day, Trig_Sky_Day_Actions);
}
bool Trig_Night_Weather_Func003Func004C() {
	return (true == false);
}
bool Trig_Night_Weather_Func003C() {
	return (udg_Temp_Integer[1] == 1);
}
bool Trig_Night_Weather_Func004Func004C() {
	return (true == false);
}
bool Trig_Night_Weather_Func004C() {
	return (udg_Temp_Integer[1] == 2);
}
bool Trig_Night_Weather_Func005Func001C() {
	return (udg_Temp_Integer[1] == 3) || (udg_Temp_Integer[1] == 4) || (udg_Temp_Integer[1] == 5);
}
bool Trig_Night_Weather_Func005C() {
	return (Trig_Night_Weather_Func005Func001C());
}
void Trig_Night_Weather_Actions() {
	RemoveWeatherEffect(udg_Weather[1]);
	udg_Temp_Integer[GetRandomInt(1, 5)] = GetRandomInt(1, 5);
	if ((Trig_Night_Weather_Func003C())) {
		AddWeatherEffectSaveLast(bj_mapInitialPlayableArea, 'RAhr');
		udg_Weather[bj_lastCreatedWeatherEffect] = bj_lastCreatedWeatherEffect;
		udg_Boolean_Is_Rain[true] = true;
		if ((Trig_Night_Weather_Func003Func004C())) {
			StartTimerBJ(udg_Timer_Lightning_Strike_Weather, false, (17. + GetRandomReal(0, 25.)));
		}
	}
	if ((Trig_Night_Weather_Func004C())) {
		AddWeatherEffectSaveLast(bj_mapInitialPlayableArea, 'RAlr');
		udg_Weather[bj_lastCreatedWeatherEffect] = bj_lastCreatedWeatherEffect;
		udg_Boolean_Is_Rain[true] = true;
		if ((Trig_Night_Weather_Func004Func004C())) {
			StartTimerBJ(udg_Timer_Lightning_Strike_Weather, false, (17. + GetRandomReal(0, 25.)));
		}
	}
	if ((Trig_Night_Weather_Func005C())) {
		AddWeatherEffectSaveLast(bj_mapInitialPlayableArea, 'LRma');
		udg_Weather[bj_lastCreatedWeatherEffect] = bj_lastCreatedWeatherEffect;
		udg_Boolean_Is_Rain[false] = false;
	}
	EnableWeatherEffect(udg_Weather[1], true);
}
void InitTrig_Night_Weather() {
	gg_trg_Night_Weather[CreateTrigger()] = CreateTrigger();
	TriggerRegisterGameStateEventTimeOfDay(gg_trg_Night_Weather, EQUAL, 18.);
	TriggerRegisterGameStateEventTimeOfDay(gg_trg_Night_Weather, EQUAL, .0);
	TriggerAddAction(gg_trg_Night_Weather, Trig_Night_Weather_Actions);
}
void Trig_Sky_Evening_Actions() {
	SetSkyModel("Environment\\Sky\\LordaeronFallSky\\LordaeronFallSky.mdl");
}
void InitTrig_Sky_Evening() {
	gg_trg_Sky_Evening[CreateTrigger()] = CreateTrigger();
	TriggerRegisterGameStateEventTimeOfDay(gg_trg_Sky_Evening, EQUAL, 18.);
	TriggerAddAction(gg_trg_Sky_Evening, Trig_Sky_Evening_Actions);
}
void Trig_Sky_Night_Actions() {
	SetSkyModel("Environment\\Sky\\FelwoodSky\\FelwoodSky.mdl");
}
void InitTrig_Sky_Night() {
	gg_trg_Sky_Night[CreateTrigger()] = CreateTrigger();
	TriggerRegisterGameStateEventTimeOfDay(gg_trg_Sky_Night, EQUAL, .0);
	TriggerAddAction(gg_trg_Sky_Night, Trig_Sky_Night_Actions);
}
bool Trig_Lightnings_Weather_Effect_Rainy_Conditions() {
	return (udg_Boolean_Is_Rain);
}
void Trig_Lightnings_Weather_Effect_Rainy_Func003A() {
	SoundForPlayer(GetEnumPlayer(), 17);
}
void Trig_Lightnings_Weather_Effect_Rainy_Actions() {
	CinematicFadeBJ(1, 1., "ReplaceableTextures\\CameraMasks\\Black_mask.blp", 60., 60., 65., 15.);
	CinematicFadeBJ(0, 2., "ReplaceableTextures\\CameraMasks\\White_mask.blp", 60., 60., 65., 15.);
	ForForce(bj_FORCE_ALL_PLAYERS, Trig_Lightnings_Weather_Effect_Rainy_Func003A);
	StartTimerBJ(udg_Timer_Lightning_Strike_Weather, false, (10. + GetRandomReal(20., 40.)));
}
void InitTrig_Lightnings_Weather_Effect_Rainy() {
	gg_trg_Lightnings_Weather_Effect_Rainy[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerExpireEvent(gg_trg_Lightnings_Weather_Effect_Rainy, udg_Timer_Lightning_Strike_Weather);
	TriggerAddCondition(gg_trg_Lightnings_Weather_Effect_Rainy, Condition(Trig_Lightnings_Weather_Effect_Rainy_Conditions));
	TriggerAddAction(gg_trg_Lightnings_Weather_Effect_Rainy, Trig_Lightnings_Weather_Effect_Rainy_Actions);
}
bool Trig_Periodic_Rune_Creation_Func001Func002Func002C() {
	return (CountPlayersInForceBJ(udg_IGRAET) >= 1);
}
bool Trig_Periodic_Rune_Creation_Func001Func002C() {
	return (CountPlayersInForceBJ(udg_IGRAET) >= 2);
}
bool Trig_Periodic_Rune_Creation_Func001C() {
	return (CountPlayersInForceBJ(udg_IGRAET) >= 3);
}
bool Trig_Periodic_Rune_Creation_Func002Func002Func001Func002C() {
	return (udg_Temp_Integer[2] == 1);
}
bool Trig_Periodic_Rune_Creation_Func002Func002Func001Func003C() {
	return (udg_Temp_Integer[2] == 2);
}
bool Trig_Periodic_Rune_Creation_Func002Func002Func001Func004C() {
	return (udg_Temp_Integer[2] == 3);
}
bool Trig_Periodic_Rune_Creation_Func002Func002Func001Func005C() {
	return (udg_Temp_Integer[2] == 4);
}
bool Trig_Periodic_Rune_Creation_Func002Func002Func001C() {
	return (udg_Is_Rune_On_Position[bj_forLoopAIndex] == false);
}
bool Trig_Periodic_Rune_Creation_Func002Func003C() {
	return (udg_Is_Rune_On_Position[bj_forLoopAIndex] == false);
}
bool Trig_Periodic_Rune_Creation_Func002C() {
	return (Trig_Periodic_Rune_Creation_Func002Func003C());
}
void Trig_Periodic_Rune_Creation_Actions() {
	if ((Trig_Periodic_Rune_Creation_Func001C())) {
		udg_Temp_Integer[3] = 3;
	else
		if ((Trig_Periodic_Rune_Creation_Func001Func002C())) {
			udg_Temp_Integer[2] = 2;
		else
			if ((Trig_Periodic_Rune_Creation_Func001Func002Func002C())) {
				udg_Temp_Integer[1] = 1;
			}
		}
	}
	if ((Trig_Periodic_Rune_Creation_Func002C())) {
		udg_Temp_Integer[4] = 4;
		bj_forLoopAIndex[1] = 1;
		bj_forLoopAIndexEnd[udg_Temp_Integer[4]] = udg_Temp_Integer[4];
		while (true) {
			if (bj_forLoopAIndex > bj_forLoopAIndexEnd) break;
			if ((Trig_Periodic_Rune_Creation_Func002Func002Func001C())) {
				udg_Temp_Integer[GetRandomInt(1, udg_Temp_Integer[3])] = GetRandomInt(1, udg_Temp_Integer[3]);
				if ((Trig_Periodic_Rune_Creation_Func002Func002Func001Func002C())) {
					CreateItemLoc('I013', Location(I2R(udg_Rune_Position_X[bj_forLoopAIndex]), I2R(udg_Rune_Position_Y[bj_forLoopAIndex])));
				}
				if ((Trig_Periodic_Rune_Creation_Func002Func002Func001Func003C())) {
					CreateItemLoc('I014', Location(I2R(udg_Rune_Position_X[bj_forLoopAIndex]), I2R(udg_Rune_Position_Y[bj_forLoopAIndex])));
				}
				if ((Trig_Periodic_Rune_Creation_Func002Func002Func001Func004C())) {
					CreateItemLoc('I016', Location(I2R(udg_Rune_Position_X[bj_forLoopAIndex]), I2R(udg_Rune_Position_Y[bj_forLoopAIndex])));
				}
				if ((Trig_Periodic_Rune_Creation_Func002Func002Func001Func005C())) {
					CreateItemLoc('I017', Location(I2R(udg_Rune_Position_X[bj_forLoopAIndex]), I2R(udg_Rune_Position_Y[bj_forLoopAIndex])));
				}
				AddSpecialEffectLocBJ(Location(I2R(udg_Rune_Position_X[bj_forLoopAIndex]), I2R(udg_Rune_Position_Y[bj_forLoopAIndex])), "Effects\\ShadowAssault.mdx");
				DestroyEffectWithWait(bj_lastCreatedEffect, 3.);
				udg_Is_Rune_On_Position[true] = true;
			}
			bj_forLoopAIndex[bj_forLoopAIndex + 1] = bj_forLoopAIndex + 1;
		}
	}
}
void InitTrig_Periodic_Rune_Creation() {
	gg_trg_Periodic_Rune_Creation[CreateTrigger()] = CreateTrigger();
	DisableTrigger(gg_trg_Periodic_Rune_Creation);
	TriggerRegisterTimerEventPeriodic(gg_trg_Periodic_Rune_Creation, 60.1);
	TriggerAddAction(gg_trg_Periodic_Rune_Creation, Trig_Periodic_Rune_Creation_Actions);
}
void Trig_Rune_PickedUp_End_Immunity_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit hero = LoadUnitHandle(udg_hash, h, 1);
	SetArmorAbilityLevel(hero, -50);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
	hero[null] = null;
}
void Trig_Rune_PickedUp_End_Damage_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit hero = LoadUnitHandle(udg_hash, h, 1);
	int damage = LoadInteger(udg_hash, h, 6);
	effect ef;
	damage[20 + 5 * GetHeroLevel(hero)] = 20 + 5 * GetHeroLevel(hero);
	SetAttackAbilityLevel(hero, -damage);
	ef[LoadEffectHandle(udg_hash, h, 2)] = LoadEffectHandle(udg_hash, h, 2);
	DestroyEffect(ef);
	ef[null] = null;
	ef[LoadEffectHandle(udg_hash, h, 3)] = LoadEffectHandle(udg_hash, h, 3);
	DestroyEffect(ef);
	ef[null] = null;
	ef[LoadEffectHandle(udg_hash, h, 4)] = LoadEffectHandle(udg_hash, h, 4);
	DestroyEffect(ef);
	ef[null] = null;
	ef[LoadEffectHandle(udg_hash, h, 5)] = LoadEffectHandle(udg_hash, h, 5);
	DestroyEffect(ef);
	ef[null] = null;
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
	hero[null] = null;
}
void Trig_Rune_PickedUp_End_Regeneration_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit hero = LoadUnitHandle(udg_hash, h, 1);
	float hp = LoadReal(udg_hash, h, 2);
	float mp = LoadReal(udg_hash, h, 3);
	SetUnitLifeAndManaRegeneration(hero, "life", R2I(-hp / 20));
	SetUnitLifeAndManaRegeneration(hero, "mana", R2I(-mp / 20));
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
	hero[null] = null;
}
void Trig_Rune_PickedUp_Actions() {
	item rune = GetManipulatedItem();
	unit hero = GetManipulatingUnit();
	int id = GetItemTypeId(rune);
	unit dammi;
	float hp;
	float mp;
	timer t;
	int h;
	effect ef;
	int damage;
	float x = GetUnitX(hero);
	float y = GetUnitY(hero);
	float dist1 = SquareRoot((x - udg_Rune_Position_X[1]) * (x - udg_Rune_Position_X[1]) + (y - udg_Rune_Position_Y[1]) * (y - udg_Rune_Position_Y[1]));
	float dist2 = SquareRoot((x - udg_Rune_Position_X[2]) * (x - udg_Rune_Position_X[2]) + (y - udg_Rune_Position_Y[2]) * (y - udg_Rune_Position_Y[2]));
	float dist3 = SquareRoot((x - udg_Rune_Position_X[3]) * (x - udg_Rune_Position_X[3]) + (y - udg_Rune_Position_Y[3]) * (y - udg_Rune_Position_Y[3]));
	int runepos = 0;
	if (dist1 < 500.) {
		runepos[1] = 1;
	}
	if (dist2 < 500.) {
		runepos[2] = 2;
	}
	if (dist3 < 500.) {
		runepos[3] = 3;
	}
	if (id == 'I013') {
		t[CreateTimer()] = CreateTimer();
		h[GetHandleId(t)] = GetHandleId(t);
		dammi[CreateUnit(GetOwningPlayer(hero), 'h00U', GetUnitX(hero), GetUnitY(hero), .0)] = CreateUnit(GetOwningPlayer(hero), 'h00U', GetUnitX(hero), GetUnitY(hero), .0);
		UnitApplyTimedLife(dammi, 'BTLF', 1.);
		UnitAddAbility(dammi, 'A0O6');
		IssueTargetOrderById(dammi, $D00C0, hero);
		hp[GetUnitState(hero, UNIT_STATE_MAX_LIFE)] = GetUnitState(hero, UNIT_STATE_MAX_LIFE);
		mp[GetUnitState(hero, UNIT_STATE_MAX_MANA)] = GetUnitState(hero, UNIT_STATE_MAX_MANA);
		SetUnitLifeAndManaRegeneration(hero, "life", R2I(hp / 20));
		SetUnitLifeAndManaRegeneration(hero, "mana", R2I(mp / 20));
		SaveUnitHandle(udg_hash, h, 1, hero);
		SaveReal(udg_hash, h, 2, hp);
		SaveReal(udg_hash, h, 3, mp);
		TimerStart(t, 10., false, Trig_Rune_PickedUp_End_Regeneration_Actions);
		t[null] = null;
		dammi[null] = null;
	}
	if (id == 'I014') {
		t[CreateTimer()] = CreateTimer();
		h[GetHandleId(t)] = GetHandleId(t);
		damage[20 + 5 * GetHeroLevel(hero)] = 20 + 5 * GetHeroLevel(hero);
		SetAttackAbilityLevel(hero, damage);
		SaveUnitHandle(udg_hash, h, 1, hero);
		ef[AddSpecialEffectTarget("Effects\\Prismatic Missile Fixed.mdl", hero, "hand,left")] = AddSpecialEffectTarget("Effects\\Prismatic Missile Fixed.mdl", hero, "hand,left");
		SaveEffectHandle(udg_hash, h, 2, ef);
		ef[null] = null;
		ef[AddSpecialEffectTarget("Effects\\Prismatic Missile Fixed.mdl", hero, "hand,right")] = AddSpecialEffectTarget("Effects\\Prismatic Missile Fixed.mdl", hero, "hand,right");
		SaveEffectHandle(udg_hash, h, 3, ef);
		ef[null] = null;
		ef[AddSpecialEffectTarget("Effects\\Prismatic Missile Fixed.mdl", hero, "weapon")] = AddSpecialEffectTarget("Effects\\Prismatic Missile Fixed.mdl", hero, "weapon");
		SaveEffectHandle(udg_hash, h, 4, ef);
		ef[null] = null;
		ef[AddSpecialEffectTarget("Effects\\Prismatic Missile Fixed.mdl", hero, "overhead")] = AddSpecialEffectTarget("Effects\\Prismatic Missile Fixed.mdl", hero, "overhead");
		SaveEffectHandle(udg_hash, h, 5, ef);
		ef[null] = null;
		SaveInteger(udg_hash, h, 6, damage);
		TimerStart(t, 20., false, Trig_Rune_PickedUp_End_Damage_Actions);
		t[null] = null;
	}
	if (id == 'I016') {
		dammi[CreateUnit(GetOwningPlayer(hero), 'h00U', GetUnitX(hero), GetUnitY(hero), .0)] = CreateUnit(GetOwningPlayer(hero), 'h00U', GetUnitX(hero), GetUnitY(hero), .0);
		UnitApplyTimedLife(dammi, 'BTLF', 1.);
		UnitAddAbility(dammi, 'A0O7');
		IssueTargetOrderById(dammi, $D0132, hero);
		dammi[null] = null;
	}
	if (id == 'I017') {
		t[CreateTimer()] = CreateTimer();
		h[GetHandleId(t)] = GetHandleId(t);
		dammi[CreateUnit(GetOwningPlayer(hero), 'h00U', GetUnitX(hero), GetUnitY(hero), .0)] = CreateUnit(GetOwningPlayer(hero), 'h00U', GetUnitX(hero), GetUnitY(hero), .0);
		UnitApplyTimedLife(dammi, 'BTLF', 1.);
		UnitAddAbility(dammi, 'A0O8');
		IssueTargetOrderById(dammi, $D00DA, hero);
		SetArmorAbilityLevel(hero, 50);
		SaveUnitHandle(udg_hash, h, 1, hero);
		TimerStart(t, 12., false, Trig_Rune_PickedUp_End_Immunity_Actions);
		t[null] = null;
		dammi[null] = null;
	}
	udg_Is_Rune_On_Position[false] = false;
	RemoveItem(rune);
	hero[null] = null;
	rune[null] = null;
}
bool Trig_Rune_PickedUp_Conditions() {
	return GetItemTypeId(GetManipulatedItem()) == 'I013' || GetItemTypeId(GetManipulatedItem()) == 'I014' || GetItemTypeId(GetManipulatedItem()) == 'I016' || GetItemTypeId(GetManipulatedItem()) == 'I017';
}
void InitTrig_Rune_PickedUp() {
	int index = 0;
	gg_trg_Rune_PickedUp[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Rune_PickedUp, Player(index), EVENT_PLAYER_UNIT_PICKUP_ITEM, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Rune_PickedUp, Condition(Trig_Rune_PickedUp_Conditions));
	TriggerAddAction(gg_trg_Rune_PickedUp, Trig_Rune_PickedUp_Actions);
}
bool Trig_Initialization_MultiBoard_Func002Func001C() {
	return (GetPlayerSlotState(Player(-1 + (bj_forLoopAIndex))) == PLAYER_SLOT_STATE_PLAYING);
}
void Trig_Initialization_MultiBoard_Func029A() {
	MultiboardSetItemValueBJ(udg_MultiBoard, 2, udg_PlayerNumberInMB[(1 + GetPlayerId(GetEnumPlayer()))], (udg_ColorString[(1 + GetPlayerId(GetEnumPlayer()))] + (GetPlayerName(GetEnumPlayer()) + "|r")));
	MultiboardSetItemValueBJ(udg_MultiBoard, 3, udg_PlayerNumberInMB[(1 + GetPlayerId(GetEnumPlayer()))], (udg_ColorString[20] + ("0|r")));
	MultiboardSetItemValueBJ(udg_MultiBoard, 4, udg_PlayerNumberInMB[(1 + GetPlayerId(GetEnumPlayer()))], (udg_ColorString[21] + ("0|r")));
	MultiboardSetItemValueBJ(udg_MultiBoard, 5, udg_PlayerNumberInMB[(1 + GetPlayerId(GetEnumPlayer()))], (udg_ColorString[24] + ("0|r")));
	MultiboardSetItemValueBJ(udg_MultiBoard, 6, udg_PlayerNumberInMB[(1 + GetPlayerId(GetEnumPlayer()))], (udg_ColorString[22] + ("0|r")));
	MultiboardSetItemValueBJ(udg_MultiBoard, 7, udg_PlayerNumberInMB[(1 + GetPlayerId(GetEnumPlayer()))], (udg_ColorString[23] + ("0|r")));
}
void Trig_Initialization_MultiBoard_Actions() {
	bj_forLoopAIndex[1] = 1;
	bj_forLoopAIndexEnd[9] = 9;
	while (true) {
		if (bj_forLoopAIndex > bj_forLoopAIndexEnd) break;
		if ((Trig_Initialization_MultiBoard_Func002Func001C())) {
			ForceAddPlayer(udg_Players_Ally_Group, Player(-1 + (bj_forLoopAIndex)));
			udg_CountPlayers[(udg_CountPlayers + 1)] = (udg_CountPlayers + 1);
			udg_PlayerNumberInMB[(udg_CountPlayers + 1)] = (udg_CountPlayers + 1);
		}
		bj_forLoopAIndex[bj_forLoopAIndex + 1] = bj_forLoopAIndex + 1;
	}
	CreateMultiboardBJ(7, (udg_CountPlayers + 3), "Последние Стражи");
	udg_MultiBoard[bj_lastCreatedMultiboard] = bj_lastCreatedMultiboard;
	MultiboardSetItemValueBJ(udg_MultiBoard, 1, 1, "");
	MultiboardSetItemStyleBJ(udg_MultiBoard, 1, 1, false, false);
	MultiboardSetItemValueBJ(udg_MultiBoard, 2, 1, "Игрок");
	MultiboardSetItemValueBJ(udg_MultiBoard, 3, 1, (udg_ColorString[20] + ("Убийств|r")));
	MultiboardSetItemValueBJ(udg_MultiBoard, 4, 1, (udg_ColorString[21] + ("Cмертей|r")));
	MultiboardSetItemValueBJ(udg_MultiBoard, 5, 1, (udg_ColorString[24] + ("Помощи|r")));
	MultiboardSetItemValueBJ(udg_MultiBoard, 6, 1, (udg_ColorString[22] + ("Уровень|r")));
	MultiboardSetItemIconBJ(udg_MultiBoard, 7, 1, "UI\\Feedback\\Resources\\ResourceGold.blp");
	bj_forLoopAIndex[1] = 1;
	bj_forLoopAIndexEnd[(udg_CountPlayers + 3)] = (udg_CountPlayers + 3);
	while (true) {
		if (bj_forLoopAIndex > bj_forLoopAIndexEnd) break;
		MultiboardSetItemWidthBJ(udg_MultiBoard, 1, bj_forLoopAIndex, 2.);
		MultiboardSetItemWidthBJ(udg_MultiBoard, 2, bj_forLoopAIndex, 10.);
		MultiboardSetItemWidthBJ(udg_MultiBoard, 3, bj_forLoopAIndex, 6.);
		MultiboardSetItemWidthBJ(udg_MultiBoard, 4, bj_forLoopAIndex, 6.);
		MultiboardSetItemWidthBJ(udg_MultiBoard, 5, bj_forLoopAIndex, 6.);
		MultiboardSetItemWidthBJ(udg_MultiBoard, 6, bj_forLoopAIndex, 6.);
		MultiboardSetItemWidthBJ(udg_MultiBoard, 7, bj_forLoopAIndex, 4.);
		MultiboardSetItemStyleBJ(udg_MultiBoard, 1, bj_forLoopAIndex, false, true);
		MultiboardSetItemStyleBJ(udg_MultiBoard, 2, bj_forLoopAIndex, true, false);
		MultiboardSetItemStyleBJ(udg_MultiBoard, 3, bj_forLoopAIndex, true, false);
		MultiboardSetItemStyleBJ(udg_MultiBoard, 4, bj_forLoopAIndex, true, false);
		MultiboardSetItemStyleBJ(udg_MultiBoard, 5, bj_forLoopAIndex, true, false);
		MultiboardSetItemStyleBJ(udg_MultiBoard, 6, bj_forLoopAIndex, true, false);
		MultiboardSetItemStyleBJ(udg_MultiBoard, 7, bj_forLoopAIndex, true, false);
		MultiboardSetItemIconBJ(udg_MultiBoard, 1, bj_forLoopAIndex, "ReplaceableTextures\\CommandButtons\\BTNSelectHeroOn.blp");
		bj_forLoopAIndex[bj_forLoopAIndex + 1] = bj_forLoopAIndex + 1;
	}
	MultiboardSetItemStyleBJ(udg_MultiBoard, 7, 1, false, true);
	MultiboardSetItemStyleBJ(udg_MultiBoard, 1, 1, false, false);
	MultiboardSetItemStyleBJ(udg_MultiBoard, 1, (udg_CountPlayers + 2), false, true);
	MultiboardSetItemStyleBJ(udg_MultiBoard, 2, (udg_CountPlayers + 2), true, false);
	MultiboardSetItemIconBJ(udg_MultiBoard, 1, (udg_CountPlayers + 2), "ReplaceableTextures\\CommandButtons\\ClockTime.blp");
	MultiboardSetItemValueBJ(udg_MultiBoard, 2, (udg_CountPlayers + 2), "|cff00CD00Время Игры|r");
	MultiboardSetItemStyleBJ(udg_MultiBoard, 1, (udg_CountPlayers + 3), false, false);
	MultiboardSetItemStyleBJ(udg_MultiBoard, 2, (udg_CountPlayers + 3), true, false);
	MultiboardSetItemIconBJ(udg_MultiBoard, 1, (udg_CountPlayers + 2), "ReplaceableTextures\\CommandButtons\\ClockTime.blp");
	MultiboardSetItemValueBJ(udg_MultiBoard, 2, (udg_CountPlayers + 3), "|cff99ccffПрогресс волны:|r");
	MultiboardSetItemValueBJ(udg_MultiBoard, 3, (udg_CountPlayers + 3), "|Cfffed3120|r|cFF969696/|r|Cfffed3129|r");
	ForForce(udg_Players_Ally_Group, Trig_Initialization_MultiBoard_Func029A);
	MultiboardDisplay(udg_MultiBoard, false);
	MultiboardDisplay(udg_MultiBoard, true);
	MultiboardMinimize(udg_MultiBoard, true);
}
void InitTrig_Initialization_MultiBoard() {
	gg_trg_Initialization_MultiBoard[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventSingle(gg_trg_Initialization_MultiBoard, 3.);
	TriggerAddAction(gg_trg_Initialization_MultiBoard, Trig_Initialization_MultiBoard_Actions);
}
bool Trig_Hero_MultiBoard_LvlUp_Conditions() {
	return ((IsUnitType(GetLevelingUnit(), UNIT_TYPE_HERO)) && (IsUnitIllusion(GetLevelingUnit()) == false) && ((1 + GetPlayerId(GetOwningPlayer(GetLevelingUnit()))) <= 9)) != null;
}
void Trig_Hero_MultiBoard_LvlUp_Actions() {
	MultiboardSetItemValueBJ(udg_MultiBoard, 6, udg_PlayerNumberInMB[(1 + GetPlayerId(GetOwningPlayer(GetLevelingUnit())))], (udg_ColorString[22] + (I2S(GetUnitLevel(GetLevelingUnit())) + "|r")));
}
void InitTrig_Hero_MultiBoard_LvlUp() {
	gg_trg_Hero_MultiBoard_LvlUp[CreateTrigger()] = CreateTrigger();
	TriggerRegisterAnyUnitEventBJ(gg_trg_Hero_MultiBoard_LvlUp, EVENT_PLAYER_HERO_LEVEL);
	TriggerAddCondition(gg_trg_Hero_MultiBoard_LvlUp, Condition(Trig_Hero_MultiBoard_LvlUp_Conditions));
	TriggerAddAction(gg_trg_Hero_MultiBoard_LvlUp, Trig_Hero_MultiBoard_LvlUp_Actions);
}
bool Trig_Time_Check_and_Player_Gold_for_MultiBoard_Func002C() {
	return (udg_Time_second >= 60);
}
bool Trig_Time_Check_and_Player_Gold_for_MultiBoard_Func003C() {
	return (udg_Time_minuts >= 60);
}
bool Trig_Time_Check_and_Player_Gold_for_MultiBoard_Func004C() {
	return (udg_Time_hours > 0);
}
void Trig_Time_Check_and_Player_Gold_for_MultiBoard_Func005A() {
	MultiboardSetItemValueBJ(udg_MultiBoard, 7, udg_PlayerNumberInMB[(1 + GetPlayerId(GetEnumPlayer()))], (udg_ColorString[23] + (I2S(GetPlayerState(GetEnumPlayer(), PLAYER_STATE_RESOURCE_GOLD)) + "|r")));
}
void Trig_Time_Check_and_Player_Gold_for_MultiBoard_Actions() {
	udg_Time_second[(udg_Time_second + 1)] = (udg_Time_second + 1);
	if ((Trig_Time_Check_and_Player_Gold_for_MultiBoard_Func002C())) {
		udg_Time_minuts[(udg_Time_minuts + 1)] = (udg_Time_minuts + 1);
		udg_Time_second[0] = 0;
	}
	if ((Trig_Time_Check_and_Player_Gold_for_MultiBoard_Func003C())) {
		udg_Time_hours[(udg_Time_hours + 1)] = (udg_Time_hours + 1);
		udg_Time_minuts[0] = 0;
	}
	if ((Trig_Time_Check_and_Player_Gold_for_MultiBoard_Func004C())) {
		MultiboardSetItemValueBJ(udg_MultiBoard, 3, (udg_CountPlayers + 2), (("|cff00CD00" + (I2S(udg_Time_hours) + ":")) + (I2S(udg_Time_minuts) + (":" + (I2S(udg_Time_second) + "|r")))));
	else
		MultiboardSetItemValueBJ(udg_MultiBoard, 3, (udg_CountPlayers + 2), ("|cff00CD00" + (I2S(udg_Time_minuts) + (":" + (I2S(udg_Time_second) + "|r")))));
	}
	ForForce(udg_Players_Ally_Group, Trig_Time_Check_and_Player_Gold_for_MultiBoard_Func005A);
}
void InitTrig_Time_Check_and_Player_Gold_for_MultiBoard() {
	gg_trg_Time_Check_and_Player_Gold_for_MultiBoard[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventPeriodic(gg_trg_Time_Check_and_Player_Gold_for_MultiBoard, 1.);
	TriggerAddAction(gg_trg_Time_Check_and_Player_Gold_for_MultiBoard, Trig_Time_Check_and_Player_Gold_for_MultiBoard_Actions);
}
bool Trig_Reincarnation_Skeletons_Conditions() {
	int id = GetUnitTypeId(GetDyingUnit());
	return IsUnitIllusion(GetDyingUnit()) == false && GetRandomInt(1, 7) == 1 && (id == 'u001' || id == 'u002' || id == 'u003');
}
void Trig_Reincarnation_Skeletons_2sec_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit u = LoadUnitHandle(udg_hash, h, 6);
	PauseUnit(u, false);
	if (GetUnitState(u, UNIT_STATE_LIFE) >= .405) {
		SetUnitAnimation(u, "stand");
		IssuePointOrderById(u, $D000F, GetRectCenterX(gg_rct_cast_magi), GetRectCenterY(gg_rct_cast_magi));
	}
	u[null] = null;
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
}
void Trig_Reincarnation_Skeletons_3sec_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	int id = LoadInteger(udg_hash, h, 1);
	float x = LoadReal(udg_hash, h, 2);
	float y = LoadReal(udg_hash, h, 3);
	player p = LoadPlayerHandle(udg_hash, h, 4);
	float face = LoadReal(udg_hash, h, 5);
	unit u = CreateUnit(p, id, x, y, face);
	SaveUnitHandle(udg_hash, h, 6, u);
	PauseUnit(u, true);
	SetUnitAnimation(u, "Birth");
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl", GetUnitX(u), GetUnitY(u)));
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl", GetUnitX(u), GetUnitY(u)));
	TimerStart(t, 2.33, false, Trig_Reincarnation_Skeletons_2sec_Actions);
	t[null] = null;
	p[null] = null;
	u[null] = null;
}
void Trig_Reincarnation_Skeletons_Actions() {
	unit u = GetDyingUnit();
	int id = GetUnitTypeId(u);
	float x = GetUnitX(u);
	float y = GetUnitY(u);
	player p = GetOwningPlayer(u);
	float face = GetUnitFacing(u);
	timer t = CreateTimer();
	int h = GetHandleId(t);
	SaveInteger(udg_hash, h, 1, id);
	SaveReal(udg_hash, h, 2, x);
	SaveReal(udg_hash, h, 3, y);
	SavePlayerHandle(udg_hash, h, 4, p);
	SaveReal(udg_hash, h, 5, face);
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl", x, y));
	TimerStart(t, 3., false, Trig_Reincarnation_Skeletons_3sec_Actions);
	u[null] = null;
	p[null] = null;
	t[null] = null;
}
void InitTrig_Reincarnation_Skeletons() {
	int index = 0;
	gg_trg_Reincarnation_Skeletons[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Reincarnation_Skeletons, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Reincarnation_Skeletons, Condition(Trig_Reincarnation_Skeletons_Conditions));
	TriggerAddAction(gg_trg_Reincarnation_Skeletons, Trig_Reincarnation_Skeletons_Actions);
}
void Trig_BossSkeletRaise2sec_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 20);
	unit skelet;
	int lop = 0;
	float xr = GetRectCenterX(gg_rct_cast_magi);
	float yr = GetRectCenterY(gg_rct_cast_magi);
	PauseUnit(caster, false);
	SetUnitTimeScale(caster, 1.);
	if (GetUnitState(caster, UNIT_STATE_LIFE) >= .405) {
		SetUnitAnimation(caster, "stand");
		IssuePointOrderById(caster, $D000F, xr, yr);
	}
	while (true) {
		if (lop > $F) break;
		skelet[LoadUnitHandle(udg_hash, h, lop)] = LoadUnitHandle(udg_hash, h, lop);
		PauseUnit(skelet, false);
		if (GetUnitState(skelet, UNIT_STATE_LIFE) >= .405) {
			SetUnitAnimation(skelet, "stand");
			IssuePointOrderById(skelet, $D000F, xr, yr);
		}
		skelet[null] = null;
		lop[lop + 1] = lop + 1;
	}
	caster[null] = null;
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
}
void Trig_BossSkeletRaiseMiniWait_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 20);
	player p = GetOwningPlayer(caster);
	unit target = LoadUnitHandle(udg_hash, h, 21);
	float x = GetUnitX(target);
	float y = GetUnitY(target);
	int lop = 0;
	unit skelet;
	SetUnitAnimationByIndex(caster, 3);
	SetUnitTimeScale(caster, 3.25);
	PauseUnit(caster, true);
	while (true) {
		if (lop > $F) break;
		skelet[CreateUnit(p, 'u001', x + 250. * Cos((lop * 22.5) * bj_DEGTORAD), y + 250. * Sin((lop * 22.5) * bj_DEGTORAD), $B4 + lop * 22.5)] = CreateUnit(p, 'u001', x + 250. * Cos((lop * 22.5) * bj_DEGTORAD), y + 250. * Sin((lop * 22.5) * bj_DEGTORAD), $B4 + lop * 22.5);
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl", x + 250. * Cos((lop * 22.5) * bj_DEGTORAD), y + 250. * Sin((lop * 22.5) * bj_DEGTORAD)));
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl", x + 250. * Cos((lop * 22.5) * bj_DEGTORAD), y + 250. * Sin((lop * 22.5) * bj_DEGTORAD)));
		SetUnitAnimation(skelet, "Birth");
		PauseUnit(skelet, true);
		SaveUnitHandle(udg_hash, h, lop, skelet);
		skelet[null] = null;
		lop[lop + 1] = lop + 1;
	}
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl", x, y));
	TimerStart(t, 2.33, false, Trig_BossSkeletRaise2sec_Actions);
	caster[null] = null;
	p[null] = null;
	target[null] = null;
	t[null] = null;
}
void Trig_BossSkeletRaise_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	timer t = CreateTimer();
	int h = GetHandleId(t);
	SaveUnitHandle(udg_hash, h, 20, caster);
	SaveUnitHandle(udg_hash, h, 21, target);
	TimerStart(t, .3, false, Trig_BossSkeletRaiseMiniWait_Actions);
	caster[null] = null;
	target[null] = null;
	t[null] = null;
}
bool Trig_BossSkeletRaise_Conditions() {
	return GetSpellAbilityId() == 'A07M';
}
void InitTrig_BossSkeletRaise() {
	int index = 0;
	gg_trg_BossSkeletRaise[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_BossSkeletRaise, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_BossSkeletRaise, Condition(Trig_BossSkeletRaise_Conditions));
	TriggerAddAction(gg_trg_BossSkeletRaise, Trig_BossSkeletRaise_Actions);
}
bool Trig_BossSkeletSkillActiv_Conditions() {
	return GetUnitTypeId(GetTriggerUnit()) == 'n00K';
}
void Trig_BossSkeletSkillActiv_Actions() {
	IssueTargetOrderById(GetTriggerUnit(), $D007F, GetAttacker());
}
void InitTrig_BossSkeletSkillActiv() {
	int index = 0;
	gg_trg_BossSkeletSkillActiv[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_BossSkeletSkillActiv, Player(index), EVENT_PLAYER_UNIT_ATTACKED, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_BossSkeletSkillActiv, Condition(Trig_BossSkeletSkillActiv_Conditions));
	TriggerAddAction(gg_trg_BossSkeletSkillActiv, Trig_BossSkeletSkillActiv_Actions);
}
void Trig_Fire_Arrow_Move_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	unit target = LoadUnitHandle(udg_hash, h, 5);
	unit orb = LoadUnitHandle(udg_hash, h, 3);
	effect ef;
	float x = GetUnitX(orb);
	float y = GetUnitY(orb);
	float xt = GetUnitX(target);
	float yt = GetUnitY(target);
	float xorb;
	float yorb;
	float angle = bj_RADTODEG * Atan2((yt - y), (xt - x));
	float dist = SquareRoot(((xt - x) * (xt - x)) + ((yt - y) * (yt - y)));
	player p;
	float damage;
	unit dammi;
	bool destroy = false;
	xorb[x + 24. * Cos(angle * bj_DEGTORAD)] = x + 24. * Cos(angle * bj_DEGTORAD);
	yorb[y + 24. * Sin(angle * bj_DEGTORAD)] = y + 24. * Sin(angle * bj_DEGTORAD);
	SetUnitPosition(orb, xorb, yorb);
	dist[SquareRoot((xt - xorb) * (xt - xorb) + (yt - yorb) * (yt - yorb))] = SquareRoot((xt - xorb) * (xt - xorb) + (yt - yorb) * (yt - yorb));
	SetUnitFacing(orb, angle);
	if (GetUnitState(target, UNIT_STATE_LIFE) < .405) {
		destroy[true] = true;
	}
	if (dist < 20. && GetUnitState(target, UNIT_STATE_LIFE) > .405) {
		SetUnitPosition(orb, xt, yt);
		p[GetOwningPlayer(caster)] = GetOwningPlayer(caster);
		damage[LoadReal(udg_hash, h, 2)] = LoadReal(udg_hash, h, 2);
		if (GetUnitState(target, UNIT_STATE_LIFE) > .0 && IsUnitType(target, UNIT_TYPE_STRUCTURE) == false && IsUnitType(target, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(target) != 'h00U') {
			UnitDamageTarget(caster, target, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl", target, "chest"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIfb\\AIfbSpecialArt.mdl", target, "chest"));
			dammi[CreateUnit(p, 'h00U', xt, yt, .0)] = CreateUnit(p, 'h00U', xt, yt, .0);
			UnitApplyTimedLife(dammi, 'BTLF', 1.);
			UnitAddAbility(dammi, 'A0NG');
			IssueTargetOrderById(dammi, $D02B6, target);
			dammi[null] = null;
		}
		p[null] = null;
		destroy[true] = true;
	}
	if (destroy) {
		KillUnit(orb);
		ef[LoadEffectHandle(udg_hash, h, 4)] = LoadEffectHandle(udg_hash, h, 4);
		DestroyEffect(ef);
		ef[null] = null;
		DestroyTimer(t);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	caster[null] = null;
	orb[null] = null;
	target[null] = null;
}
void Trig_Fire_Arrow_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	unit target = GetSpellTargetUnit();
	float xt = GetUnitX(target);
	float yt = GetUnitY(target);
	float angle = bj_RADTODEG * Atan2((yt - y), (xt - x));
	float damage = 25.;
	unit orb = CreateUnit(p, 'h00U', x, y, angle);
	effect ef = AddSpecialEffectTarget("Abilities\\Weapons\\SearingArrow\\SearingArrowMissile.mdl", orb, "origin");
	timer t = CreateTimer();
	int h = GetHandleId(t);
	SetUnitX(orb, x + 30. * Cos((angle) * bj_DEGTORAD));
	SetUnitY(orb, y + 30. * Sin((angle) * bj_DEGTORAD));
	SetUnitFlyHeight(orb, 60., .0);
	SetUnitScale(orb, 1.2, 1.2, 1.2);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 2, damage);
	SaveUnitHandle(udg_hash, h, 3, orb);
	SaveEffectHandle(udg_hash, h, 4, ef);
	SaveUnitHandle(udg_hash, h, 5, target);
	TimerStart(t, .03, true, Trig_Fire_Arrow_Move_Actions);
	caster[null] = null;
	t[null] = null;
	orb[null] = null;
	ef[null] = null;
	p[null] = null;
	target[null] = null;
}
bool Trig_Fire_Arrow_Conditions() {
	return GetSpellAbilityId() == 'A0NF';
}
void InitTrig_Fire_Arrow() {
	int index = 0;
	gg_trg_Fire_Arrow[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Fire_Arrow, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Fire_Arrow, Condition(Trig_Fire_Arrow_Conditions));
	TriggerAddAction(gg_trg_Fire_Arrow, Trig_Fire_Arrow_Actions);
}
bool Trig_Use_UnholyFrenzy_and_Fire_Arrow_Loop_Is_Enemy_Condition() {
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405) && (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) && (IsPlayerEnemy(udg_Temp_Player[1], GetOwningPlayer(GetFilterUnit())))) != null;
}
bool Trig_Use_UnholyFrenzy_and_Fire_Arrow_Loop_Is_Ally_Condition() {
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405) && (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) && (IsPlayerAlly(udg_Temp_Player[1], GetOwningPlayer(GetFilterUnit())))) != null;
}
bool Trig_Use_UnholyFrenzy_and_Fire_Arrow_All_Condition() {
	return (IsPlayerInForce(GetOwningPlayer(GetFilterUnit()), udg_Players_Enemy_Group));
}
void Trig_Use_UnholyFrenzy_and_Fire_Arrow_Actions() {
	group gall = CreateGroup();
	group g;
	group g2;
	unit Picked;
	unit target;
	float x;
	float y;
	GroupEnumUnitsInRect(gall, bj_mapInitialPlayableArea, Condition(Trig_Use_UnholyFrenzy_and_Fire_Arrow_All_Condition));
	g[CreateGroup()] = CreateGroup();
	GroupToGroup(gall, g);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A08S') > 0) && GetRandomInt(1, 2) == 1) {
			g2[CreateGroup()] = CreateGroup();
			x[GetUnitX(Picked)] = GetUnitX(Picked);
			y[GetUnitY(Picked)] = GetUnitY(Picked);
			udg_Temp_Player[GetOwningPlayer(Picked)] = GetOwningPlayer(Picked);
			GroupEnumUnitsInRange(g2, x, y, 600., Condition(Trig_Use_UnholyFrenzy_and_Fire_Arrow_Loop_Is_Ally_Condition));
			RandomUnitFromGroup(1, g2);
			g2[CreateGroup()] = CreateGroup();
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			target[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D0085, target);
			}
			udg_Temp_Player[null] = null;
			GroupClear(g2);
			DestroyGroup(g2);
			g2[null] = null;
			target[null] = null;
		}
		GroupRemoveUnit(g, Picked);
	}
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	g[CreateGroup()] = CreateGroup();
	GroupToGroup(gall, g);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A0NF') > 0) && GetRandomInt(1, 2) == 1) {
			g2[CreateGroup()] = CreateGroup();
			x[GetUnitX(Picked)] = GetUnitX(Picked);
			y[GetUnitY(Picked)] = GetUnitY(Picked);
			udg_Temp_Player[GetOwningPlayer(Picked)] = GetOwningPlayer(Picked);
			GroupEnumUnitsInRange(g2, x, y, 575., Condition(Trig_Use_UnholyFrenzy_and_Fire_Arrow_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			g2[CreateGroup()] = CreateGroup();
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			target[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D00C1, target);
			}
			udg_Temp_Player[null] = null;
			GroupClear(g2);
			DestroyGroup(g2);
			g2[null] = null;
			target[null] = null;
		}
		GroupRemoveUnit(g, Picked);
	}
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	GroupClear(gall);
	DestroyGroup(gall);
	gall[null] = null;
}
bool Trig_Use_UnholyFrenzy_and_Fire_Arrow_Conditions() {
	return (udg_Nomer_samoi_volni == 1);
}
void InitTrig_Use_UnholyFrenzy_and_Fire_Arrow() {
	gg_trg_Use_UnholyFrenzy_and_Fire_Arrow[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEvent(gg_trg_Use_UnholyFrenzy_and_Fire_Arrow, 1., true);
	TriggerAddCondition(gg_trg_Use_UnholyFrenzy_and_Fire_Arrow, Condition(Trig_Use_UnholyFrenzy_and_Fire_Arrow_Conditions));
	TriggerAddAction(gg_trg_Use_UnholyFrenzy_and_Fire_Arrow, Trig_Use_UnholyFrenzy_and_Fire_Arrow_Actions);
}
void Trig_Create_Tombstone_Wait_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit tomb = LoadUnitHandle(udg_hash, h, 1);
	effect ef = LoadEffectHandle(udg_hash, h, 2);
	float angle = LoadReal(udg_hash, h, 3);
	float x = GetUnitX(tomb);
	float y = GetUnitY(tomb);
	unit zombie = CreateUnit(GetOwningPlayer(tomb), 'n00H', x, y, angle);
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl", x, y));
	IssuePointOrderById(zombie, $D000F, GetRectCenterX(gg_rct_cast_magi), GetRectCenterY(gg_rct_cast_magi));
	KillUnit(tomb);
	DestroyEffect(ef);
	ef[null] = null;
	DestroyTimer(t);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	tomb[null] = null;
	zombie[null] = null;
	t[null] = null;
}
void Trig_Create_Tombstone_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	location loc = GetSpellTargetLoc();
	float xt = GetLocationX(loc);
	float yt = GetLocationY(loc);
	float angle = GetRandomReal(-45., 45.) + 270.;
	unit tomb = CreateUnit(p, 'h00E', xt, yt, angle);
	effect ef = AddSpecialEffectTarget("Abilities\\Spells\\Undead\\Graveyard\\GraveMarker.mdl", tomb, "origin");
	timer t = CreateTimer();
	int h = GetHandleId(t);
	SaveUnitHandle(udg_hash, h, 1, tomb);
	SaveEffectHandle(udg_hash, h, 2, ef);
	SaveReal(udg_hash, h, 3, angle);
	TimerStart(t, 4., false, Trig_Create_Tombstone_Wait_Actions);
	caster[null] = null;
	t[null] = null;
	tomb[null] = null;
	ef[null] = null;
	p[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
}
bool Trig_Create_Tombstone_Conditions() {
	return GetSpellAbilityId() == 'A0O3';
}
void InitTrig_Create_Tombstone() {
	int index = 0;
	gg_trg_Create_Tombstone[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Create_Tombstone, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Create_Tombstone, Condition(Trig_Create_Tombstone_Conditions));
	TriggerAddAction(gg_trg_Create_Tombstone, Trig_Create_Tombstone_Actions);
}
void Trig_ZombieExploadDeathMove_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit meat = LoadUnitHandle(udg_hash, h, 1);
	unit target = LoadUnitHandle(udg_hash, h, 2);
	effect ef;
	float xm = GetUnitX(meat);
	float ym = GetUnitY(meat);
	float xt = GetUnitX(target);
	float yt = GetUnitY(target);
	float angle = bj_RADTODEG * Atan2(yt - ym, xt - xm);
	float dist = SquareRoot((xt - xm) * (xt - xm) + (yt - ym) * (yt - ym));
	if (dist < 20. || GetUnitState(target, UNIT_STATE_LIFE) < .405) {
		if (GetOwningPlayer(meat) == GetOwningPlayer(target)) {
			SetUnitState(target, UNIT_STATE_LIFE, GetUnitState(target, UNIT_STATE_LIFE) + 60.);
		else
			SetUnitState(target, UNIT_STATE_LIFE, GetUnitState(target, UNIT_STATE_LIFE) - 25.);
		}
		ef[LoadEffectHandle(udg_hash, h, 3)] = LoadEffectHandle(udg_hash, h, 3);
		DestroyEffect(ef);
		KillUnit(meat);
		ef[null] = null;
		meat[null] = null;
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
		t[null] = null;
	else
		if (IsTerrainPathable(xm + 20. * Cos(angle * bj_DEGTORAD), ym + 20. * Sin(angle * bj_DEGTORAD), PATHING_TYPE_FLYABILITY) == false) {
			SetUnitPosition(meat, xm + 20. * Cos(angle * bj_DEGTORAD), ym + 20. * Sin(angle * bj_DEGTORAD));
		}
	}
	meat[null] = null;
	target[null] = null;
	t[null] = null;
}
void Trig_ZombieExploadDeath_Actions() {
	unit zomb = GetDyingUnit();
	float x = GetUnitX(zomb);
	float y = GetUnitY(zomb);
	player p = GetOwningPlayer(zomb);
	timer t;
	int h;
	group g = CreateGroup();
	group grup = CreateGroup();
	unit Picked;
	int count = 0;
	unit meat;
	effect ef;
	DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Demon\\DemonLargeDeathExplode\\DemonLargeDeathExplode.mdl", x, y));
	GroupEnumUnitsInRange(g, x, y, 325., null);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null || count > 3) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			GroupAddUnit(grup, Picked);
			count[count + 1] = count + 1;
		}
		GroupRemoveUnit(g, Picked);
	}
	RandomUnitFromGroup(3, grup);
	GroupClear(g);
	GroupAddGroup(udg_GroupRandomUnitFromGroup, g);
	Picked[null] = null;
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		meat[CreateUnit(p, 'h00U', x, y, .0)] = CreateUnit(p, 'h00U', x, y, .0);
		SetUnitTimeScale(meat, 2.);
		ef[AddSpecialEffectTarget("Abilities\\Weapons\\MeatwagonMissile\\MeatwagonMissile.mdl", meat, "chest")] = AddSpecialEffectTarget("Abilities\\Weapons\\MeatwagonMissile\\MeatwagonMissile.mdl", meat, "chest");
		t[CreateTimer()] = CreateTimer();
		h[GetHandleId(t)] = GetHandleId(t);
		SaveUnitHandle(udg_hash, h, 1, meat);
		SaveUnitHandle(udg_hash, h, 2, Picked);
		SaveEffectHandle(udg_hash, h, 3, ef);
		TimerStart(t, .04, true, Trig_ZombieExploadDeathMove_Actions);
		ef[null] = null;
		t[null] = null;
		meat[null] = null;
		GroupRemoveUnit(g, Picked);
	}
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	GroupClear(grup);
	DestroyGroup(grup);
	grup[null] = null;
	meat[null] = null;
	ef[null] = null;
	t[null] = null;
	p[null] = null;
	zomb[null] = null;
	Picked[null] = null;
}
bool Trig_ZombieExploadDeath_Conditions() {
	return GetUnitTypeId(GetDyingUnit()) == 'n00H' && GetRandomInt(1, $A) <= 5;
}
void InitTrig_ZombieExploadDeath() {
	int index = 0;
	gg_trg_ZombieExploadDeath[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_ZombieExploadDeath, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_ZombieExploadDeath, Condition(Trig_ZombieExploadDeath_Conditions));
	TriggerAddAction(gg_trg_ZombieExploadDeath, Trig_ZombieExploadDeath_Actions);
}
void Trig_Damned_Soul_move_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit soul = LoadUnitHandle(udg_hash, h, 1);
	group g = LoadGroupHandle(udg_hash, h, 2);
	float damage = LoadReal(udg_hash, h, 3);
	float angle = LoadReal(udg_hash, h, 4);
	int wait = LoadInteger(udg_hash, h, 5);
	unit caster = LoadUnitHandle(udg_hash, h, 6);
	player p = GetOwningPlayer(caster);
	float x = GetUnitX(soul) + 14. * Cos(angle * bj_DEGTORAD);
	float y = GetUnitY(soul) + 14. * Sin(angle * bj_DEGTORAD);
	effect ef;
	group grup = CreateGroup();
	unit Picked;
	unit dammi;
	if (wait > 0) {
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 5, wait);
		if (IsTerrainPathable(x, y, PATHING_TYPE_FLYABILITY) == false) {
			SetUnitPosition(soul, x, y);
		}
		GroupEnumUnitsInRange(grup, x, y, 125., null);
		while (true) {
			Picked[FirstOfGroup(grup)] = FirstOfGroup(grup);
			if (Picked == null) break;
			if ((IsUnitInGroup(Picked, udg_PortalCastersMagi) == false) && IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitInGroup(Picked, g) == false && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				dammi[CreateUnit(p, 'h00U', x, y, .0)] = CreateUnit(p, 'h00U', x, y, .0);
				UnitApplyTimedLife(dammi, 'BTLF', .5);
				UnitAddAbility(dammi, 'A0OA');
				IssueTargetOrderById(dammi, $D02BC, Picked);
				dammi[null] = null;
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GargoyleMissile\\GargoyleMissile.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathCoil\\DeathCoilSpecialArt.mdl", Picked, "origin"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\CarrionSwarm\\CarrionSwarmDamage.mdl", Picked, "chest"));
				GroupAddUnit(g, Picked);
			}
			GroupRemoveUnit(grup, Picked);
		}
		SaveGroupHandle(udg_hash, h, 2, g);
	else
		dammi[CreateUnit(p, 'h00U', x, y, .0)] = CreateUnit(p, 'h00U', x, y, .0);
		UnitApplyTimedLife(dammi, 'BTLF', 2.5);
		UnitAddAbility(dammi, 'Amrf');
		UnitRemoveAbility(dammi, 'Amrf');
		SetUnitScale(dammi, 1.2, 1.2, 1.2);
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\Possession\\PossessionMissile.mdl", dammi, "origin"));
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\DeathCoil\\DeathCoilSpecialArt.mdl", x, y));
		dammi[null] = null;
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
		ef[LoadEffectHandle(udg_hash, h, 7)] = LoadEffectHandle(udg_hash, h, 7);
		DestroyEffect(ef);
		ef[null] = null;
		KillUnit(soul);
		RemoveUnit(soul);
		GroupClear(g);
		DestroyGroup(g);
		g[null] = null;
	}
	Picked[null] = null;
	GroupClear(grup);
	DestroyGroup(grup);
	grup[null] = null;
	t[null] = null;
	soul[null] = null;
	g[null] = null;
	dammi[null] = null;
	caster[null] = null;
	p[null] = null;
}
void Trig_Damned_Soul_Actions() {
	unit caster = GetSpellAbilityUnit();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	timer t = CreateTimer();
	int h = GetHandleId(t);
	location loc;
	float xt;
	float yt;
	unit soul;
	group g = CreateGroup();
	float damage = 50.;
	int wait = 50;
	effect ef;
	float angle;
	if (GetSpellTargetUnit() == null) {
		loc[GetSpellTargetLoc()] = GetSpellTargetLoc();
		xt[GetLocationX(loc)] = GetLocationX(loc);
		yt[GetLocationY(loc)] = GetLocationY(loc);
		RemoveLocation(loc);
		loc[null] = null;
	else
		xt[GetUnitX(GetSpellTargetUnit())] = GetUnitX(GetSpellTargetUnit());
		yt[GetUnitY(GetSpellTargetUnit())] = GetUnitY(GetSpellTargetUnit());
	}
	angle[bj_RADTODEG * Atan2(yt - y, xt - x)] = bj_RADTODEG * Atan2(yt - y, xt - x);
	soul[CreateUnit(GetOwningPlayer(caster), 'h00U', x, y, angle)] = CreateUnit(GetOwningPlayer(caster), 'h00U', x, y, angle);
	ef[AddSpecialEffectTarget("Abilities\\Spells\\Undead\\Possession\\PossessionMissile.mdl", soul, "origin")] = AddSpecialEffectTarget("Abilities\\Spells\\Undead\\Possession\\PossessionMissile.mdl", soul, "origin");
	UnitAddAbility(soul, 'Amrf');
	UnitRemoveAbility(soul, 'Amrf');
	SetUnitScale(soul, 1.2, 1.2, 1.2);
	SetUnitFlyHeight(soul, 80, .0);
	SaveUnitHandle(udg_hash, h, 1, soul);
	SaveGroupHandle(udg_hash, h, 2, g);
	SaveReal(udg_hash, h, 3, damage);
	SaveReal(udg_hash, h, 4, angle);
	SaveInteger(udg_hash, h, 5, wait);
	SaveUnitHandle(udg_hash, h, 6, caster);
	SaveEffectHandle(udg_hash, h, 7, ef);
	TimerStart(t, .03, true, Trig_Damned_Soul_move_Actions);
	caster[null] = null;
	t[null] = null;
	soul[null] = null;
	g[null] = null;
	ef[null] = null;
}
bool Trig_Damned_Soul_Conditions() {
	return GetSpellAbilityId() == 'A0O9';
}
void InitTrig_Damned_Soul() {
	int index = 0;
	gg_trg_Damned_Soul[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Damned_Soul, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Damned_Soul, Condition(Trig_Damned_Soul_Conditions));
	TriggerAddAction(gg_trg_Damned_Soul, Trig_Damned_Soul_Actions);
}
bool Trig_Use_PowerofHorror_and_Curse_and_Slam_Loop_Is_Enemy_Condition() {
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405) && (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) && (IsPlayerEnemy(udg_Temp_Player[1], GetOwningPlayer(GetFilterUnit())))) != null;
}
bool Trig_Use_PowerofHorror_and_Curse_and_Slam_Loop_Is_Ally_Condition() {
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405) && (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) && (IsPlayerAlly(udg_Temp_Player[1], GetOwningPlayer(GetFilterUnit())))) != null;
}
bool Trig_Use_PowerofHorror_and_Curse_and_Slam_All_Condition() {
	return (IsPlayerInForce(GetOwningPlayer(GetFilterUnit()), udg_Players_Enemy_Group));
}
void Trig_Use_PowerofHorror_and_Curse_and_Slam_Actions() {
	group gall = CreateGroup();
	group g;
	group g2;
	unit Picked;
	unit target;
	float x;
	float y;
	float dist;
	float angle;
	GroupEnumUnitsInRect(gall, bj_mapInitialPlayableArea, Condition(Trig_Use_PowerofHorror_and_Curse_and_Slam_All_Condition));
	g[CreateGroup()] = CreateGroup();
	GroupToGroup(gall, g);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A07X') > 0) && GetRandomInt(1, 2) == 1) {
			g2[CreateGroup()] = CreateGroup();
			x[GetUnitX(Picked)] = GetUnitX(Picked);
			y[GetUnitY(Picked)] = GetUnitY(Picked);
			udg_Temp_Player[GetOwningPlayer(Picked)] = GetOwningPlayer(Picked);
			GroupEnumUnitsInRange(g2, x, y, 600., Condition(Trig_Use_PowerofHorror_and_Curse_and_Slam_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			g2[CreateGroup()] = CreateGroup();
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			target[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D00DE, target);
			}
			udg_Temp_Player[null] = null;
			GroupClear(g2);
			DestroyGroup(g2);
			g2[null] = null;
			target[null] = null;
		}
		GroupRemoveUnit(g, Picked);
	}
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	g[CreateGroup()] = CreateGroup();
	GroupToGroup(gall, g);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A08B') > 0) && GetRandomInt(1, 2) == 1) {
			g2[CreateGroup()] = CreateGroup();
			x[GetUnitX(Picked)] = GetUnitX(Picked);
			y[GetUnitY(Picked)] = GetUnitY(Picked);
			udg_Temp_Player[GetOwningPlayer(Picked)] = GetOwningPlayer(Picked);
			GroupEnumUnitsInRange(g2, x, y, 575., Condition(Trig_Use_PowerofHorror_and_Curse_and_Slam_Loop_Is_Ally_Condition));
			RandomUnitFromGroup(1, g2);
			g2[CreateGroup()] = CreateGroup();
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			target[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D0062, target);
			}
			udg_Temp_Player[null] = null;
			GroupClear(g2);
			DestroyGroup(g2);
			g2[null] = null;
			target[null] = null;
		}
		GroupRemoveUnit(g, Picked);
	}
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	g[CreateGroup()] = CreateGroup();
	GroupToGroup(gall, g);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A08C') > 0) && GetRandomInt(1, 2) == 1) {
			g2[CreateGroup()] = CreateGroup();
			x[GetUnitX(Picked)] = GetUnitX(Picked);
			y[GetUnitY(Picked)] = GetUnitY(Picked);
			udg_Temp_Player[GetOwningPlayer(Picked)] = GetOwningPlayer(Picked);
			GroupEnumUnitsInRange(g2, x, y, 600., Condition(Trig_Use_PowerofHorror_and_Curse_and_Slam_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			g2[CreateGroup()] = CreateGroup();
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			target[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D0062, target);
			}
			udg_Temp_Player[null] = null;
			GroupClear(g2);
			DestroyGroup(g2);
			g2[null] = null;
			target[null] = null;
		}
		GroupRemoveUnit(g, Picked);
	}
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	g[CreateGroup()] = CreateGroup();
	GroupToGroup(gall, g);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A08F') > 0) && GetRandomInt(1, 2) == 1) {
			g2[CreateGroup()] = CreateGroup();
			x[GetUnitX(Picked)] = GetUnitX(Picked);
			y[GetUnitY(Picked)] = GetUnitY(Picked);
			udg_Temp_Player[GetOwningPlayer(Picked)] = GetOwningPlayer(Picked);
			GroupEnumUnitsInRange(g2, x, y, 300., Condition(Trig_Use_PowerofHorror_and_Curse_and_Slam_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			g2[CreateGroup()] = CreateGroup();
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			target[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if ((target != null)) {
				IssueImmediateOrderById(Picked, $D011D);
			}
			udg_Temp_Player[null] = null;
			GroupClear(g2);
			DestroyGroup(g2);
			g2[null] = null;
			target[null] = null;
		}
		GroupRemoveUnit(g, Picked);
	}
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	g[CreateGroup()] = CreateGroup();
	GroupToGroup(gall, g);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A08S') > 0) && GetRandomInt(1, 2) == 1) {
			g2[CreateGroup()] = CreateGroup();
			x[GetUnitX(Picked)] = GetUnitX(Picked);
			y[GetUnitY(Picked)] = GetUnitY(Picked);
			udg_Temp_Player[GetOwningPlayer(Picked)] = GetOwningPlayer(Picked);
			GroupEnumUnitsInRange(g2, x, y, 600., Condition(Trig_Use_PowerofHorror_and_Curse_and_Slam_Loop_Is_Ally_Condition));
			RandomUnitFromGroup(1, g2);
			g2[CreateGroup()] = CreateGroup();
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			target[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D00F1, target);
			}
			udg_Temp_Player[null] = null;
			GroupClear(g2);
			DestroyGroup(g2);
			g2[null] = null;
			target[null] = null;
		}
		GroupRemoveUnit(g, Picked);
	}
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	if (GetRandomInt(1, 40) == 1 && (udg_Is_Fast_Wave_Start_On_Off == false)) {
		g2[CreateGroup()] = CreateGroup();
		GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev, g2);
		while (true) {
			Picked[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if (Picked == null) break;
			target[CreateUnit(Player(9), 'h00E', GetUnitX(Picked), GetUnitY(Picked), 270.)] = CreateUnit(Player(9), 'h00E', GetUnitX(Picked), GetUnitY(Picked), 270.);
			dist[GetRandomReal(100., 125.)] = GetRandomReal(100., 125.);
			angle[GetRandomReal(.0, 360.)] = GetRandomReal(.0, 360.);
			UnitAddAbility(target, 'A0O3');
			UnitApplyTimedLife(target, 'BTLF', 2.);
			IssuePointOrderById(target, $D00FA, GetUnitX(Picked) + dist * Cos(angle * bj_DEGTORAD), GetUnitY(Picked) + dist * Sin(angle * bj_DEGTORAD));
			target[null] = null;
			GroupRemoveUnit(g2, Picked);
		}
		GroupClear(g2);
		DestroyGroup(g2);
		g2[null] = null;
		Picked[null] = null;
	}
	g[CreateGroup()] = CreateGroup();
	GroupToGroup(gall, g);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A0O9') > 0) && GetRandomInt(1, 2) == 1) {
			g2[CreateGroup()] = CreateGroup();
			x[GetUnitX(Picked)] = GetUnitX(Picked);
			y[GetUnitY(Picked)] = GetUnitY(Picked);
			udg_Temp_Player[GetOwningPlayer(Picked)] = GetOwningPlayer(Picked);
			GroupEnumUnitsInRange(g2, x, y, 600., Condition(Trig_Use_PowerofHorror_and_Curse_and_Slam_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			g2[CreateGroup()] = CreateGroup();
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			target[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D00FA, target);
			}
			udg_Temp_Player[null] = null;
			GroupClear(g2);
			DestroyGroup(g2);
			g2[null] = null;
			target[null] = null;
		}
		GroupRemoveUnit(g, Picked);
	}
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	g[CreateGroup()] = CreateGroup();
	GroupToGroup(gall, g);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A0PI') > 0) && GetRandomInt(1, 2) == 1) {
			g2[CreateGroup()] = CreateGroup();
			x[GetUnitX(Picked)] = GetUnitX(Picked);
			y[GetUnitY(Picked)] = GetUnitY(Picked);
			udg_Temp_Player[GetOwningPlayer(Picked)] = GetOwningPlayer(Picked);
			GroupEnumUnitsInRange(g2, x, y, 700., Condition(Trig_Use_PowerofHorror_and_Curse_and_Slam_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			g2[CreateGroup()] = CreateGroup();
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			target[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D021B, target);
			}
			udg_Temp_Player[null] = null;
			GroupClear(g2);
			DestroyGroup(g2);
			g2[null] = null;
			target[null] = null;
		}
		GroupRemoveUnit(g, Picked);
	}
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	g[CreateGroup()] = CreateGroup();
	GroupToGroup(gall, g);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A08F') > 0) && GetRandomInt(1, 2) == 1) {
			g2[CreateGroup()] = CreateGroup();
			x[GetUnitX(Picked)] = GetUnitX(Picked);
			y[GetUnitY(Picked)] = GetUnitY(Picked);
			udg_Temp_Player[GetOwningPlayer(Picked)] = GetOwningPlayer(Picked);
			GroupEnumUnitsInRange(g2, x, y, 200., Condition(Trig_Use_PowerofHorror_and_Curse_and_Slam_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			g2[CreateGroup()] = CreateGroup();
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			target[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if ((target != null)) {
				IssueImmediateOrderById(Picked, $D00FB);
			}
			udg_Temp_Player[null] = null;
			GroupClear(g2);
			DestroyGroup(g2);
			g2[null] = null;
			target[null] = null;
		}
		GroupRemoveUnit(g, Picked);
	}
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	GroupClear(gall);
	DestroyGroup(gall);
	gall[null] = null;
}
bool Trig_Use_PowerofHorror_and_Curse_and_Slam_Conditions() {
	return (udg_Nomer_samoi_volni == 2);
}
void InitTrig_Use_PowerofHorror_and_Curse_and_Slam_and_Dumned_Soul() {
	gg_trg_Use_PowerofHorror_and_Curse_and_Slam_and_Dumned_Soul[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEvent(gg_trg_Use_PowerofHorror_and_Curse_and_Slam_and_Dumned_Soul, 1., true);
	TriggerAddCondition(gg_trg_Use_PowerofHorror_and_Curse_and_Slam_and_Dumned_Soul, Condition(Trig_Use_PowerofHorror_and_Curse_and_Slam_Conditions));
	TriggerAddAction(gg_trg_Use_PowerofHorror_and_Curse_and_Slam_and_Dumned_Soul, Trig_Use_PowerofHorror_and_Curse_and_Slam_Actions);
}
void Trig_Throw_Meat_Move2_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit u = LoadUnitHandle(udg_hash, h, 1);
	PauseUnit(u, false);
	if (GetUnitState(u, UNIT_STATE_LIFE) >= .405) {
		SetUnitAnimation(u, "stand");
		IssuePointOrderById(u, $D000F, GetRectCenterX(gg_rct_cast_magi), GetRectCenterY(gg_rct_cast_magi));
	}
	u[null] = null;
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
}
void Trig_Throw_Meat_Move_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster;
	unit target = LoadUnitHandle(udg_hash, h, 4);
	float damage;
	float stuntime;
	float angle;
	unit dagger = LoadUnitHandle(udg_hash, h, 7);
	float x = GetUnitX(dagger);
	float y = GetUnitY(dagger);
	float xt = GetUnitX(target);
	float yt = GetUnitY(target);
	float dist;
	unit zombie;
	int h2;
	timer t2;
	angle[bj_RADTODEG * Atan2(yt - y, xt - x)] = bj_RADTODEG * Atan2(yt - y, xt - x);
	dist[SquareRoot((xt - x) * (xt - x) + (yt - y) * (yt - y))] = SquareRoot((xt - x) * (xt - x) + (yt - y) * (yt - y));
	SetUnitPosition(dagger, x + 21. * Cos((angle) * bj_DEGTORAD), y + 21. * Sin((angle) * bj_DEGTORAD));
	if (dist < 50. || GetUnitState(target, UNIT_STATE_LIFE) < .405) {
		caster[LoadUnitHandle(udg_hash, h, 1)] = LoadUnitHandle(udg_hash, h, 1);
		damage[LoadReal(udg_hash, h, 2)] = LoadReal(udg_hash, h, 2);
		stuntime[LoadReal(udg_hash, h, 3)] = LoadReal(udg_hash, h, 3);
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\MeatwagonMissile\\MeatwagonMissile.mdl", target, "chest"));
		UnitDamageTarget(caster, target, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
		StunUnitTimed(target, stuntime);
		DestroyEffect(LoadEffectHandle(udg_hash, h, 8));
		zombie[CreateUnit(GetOwningPlayer(caster), 'n00H', xt + GetRandomReal(30., 100.), yt + GetRandomReal(30., 100.), GetRandomReal(.0, 360.))] = CreateUnit(GetOwningPlayer(caster), 'n00H', xt + GetRandomReal(30., 100.), yt + GetRandomReal(30., 100.), GetRandomReal(.0, 360.));
		t2[CreateTimer()] = CreateTimer();
		h2[GetHandleId(t2)] = GetHandleId(t2);
		PauseUnit(zombie, true);
		SetUnitAnimation(zombie, "Birth");
		SaveUnitHandle(udg_hash, h2, 1, zombie);
		TimerStart(t2, 2.33, false, Trig_Throw_Meat_Move2_Actions);
		t2[null] = null;
		zombie[null] = null;
		RemoveUnit(dagger);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
		caster[null] = null;
	}
	t[null] = null;
	target[null] = null;
	dagger[null] = null;
}
void Trig_Throw_Meat_Actions() {
	unit caster = GetSpellAbilityUnit();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	unit target = GetSpellTargetUnit();
	float tx = GetUnitX(target);
	float ty = GetUnitY(target);
	float damage = 100.;
	float stuntime = 2.;
	float angle;
	float dist;
	unit dagger;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	effect ef;
	angle[bj_RADTODEG * Atan2(ty - y, tx - x)] = bj_RADTODEG * Atan2(ty - y, tx - x);
	dist[SquareRoot((tx - x) * (tx - x) + (ty - y) * (ty - y))] = SquareRoot((tx - x) * (tx - x) + (ty - y) * (ty - y));
	dagger[CreateUnit(GetOwningPlayer(caster), 'h00U', x, y, angle)] = CreateUnit(GetOwningPlayer(caster), 'h00U', x, y, angle);
	SetUnitX(dagger, x + 150. * Cos((angle + 90.) * bj_DEGTORAD));
	SetUnitY(dagger, y + 150. * Sin((angle + 90.) * bj_DEGTORAD));
	UnitAddAbility(dagger, 'Amrf');
	UnitRemoveAbility(dagger, 'Amrf');
	SetUnitScale(dagger, 1.5, 1.5, 1.5);
	SetUnitPathing(dagger, false);
	SetUnitFlyHeight(dagger, 200., .0);
	SetUnitFlyHeight(dagger, 25., (($AF * 700) / dist));
	ef[AddSpecialEffectTarget("Abilities\\Weapons\\MeatwagonMissile\\MeatwagonMissile.mdl", dagger, "origin")] = AddSpecialEffectTarget("Abilities\\Weapons\\MeatwagonMissile\\MeatwagonMissile.mdl", dagger, "origin");
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 2, damage);
	SaveReal(udg_hash, h, 3, stuntime);
	SaveUnitHandle(udg_hash, h, 4, target);
	SaveUnitHandle(udg_hash, h, 7, dagger);
	SaveEffectHandle(udg_hash, h, 8, ef);
	TimerStart(t, .03, true, Trig_Throw_Meat_Move_Actions);
	caster[null] = null;
	target[null] = null;
	t[null] = null;
	dagger[null] = null;
	ef[null] = null;
}
bool Trig_Throw_Meat_Conditions() {
	return GetSpellAbilityId() == 'A0PI';
}
void InitTrig_Throw_Meat() {
	int index = 0;
	gg_trg_Throw_Meat[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Throw_Meat, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Throw_Meat, Condition(Trig_Throw_Meat_Conditions));
	TriggerAddAction(gg_trg_Throw_Meat, Trig_Throw_Meat_Actions);
}
void Trig_Earth_Clap_WAIT_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	unit dammi;
	float xc = GetUnitX(caster);
	float yc = GetUnitY(caster);
	player p = GetOwningPlayer(caster);
	float damage = 100.;
	group g = CreateGroup();
	unit Picked;
	GroupEnumUnitsInRange(g, xc, yc, 200., null);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if ((IsUnitInGroup(Picked, udg_PortalCastersMagi) == false) && IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			dammi[CreateUnit(p, 'h00U', GetUnitX(Picked), GetUnitY(Picked), .0)] = CreateUnit(p, 'h00U', GetUnitX(Picked), GetUnitY(Picked), .0);
			UnitApplyTimedLife(dammi, 'BTLF', 1.);
			UnitAddAbility(dammi, 'A0FE');
			IssueTargetOrderById(dammi, $D006B, Picked);
			UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			dammi[null] = null;
		}
		GroupRemoveUnit(g, Picked);
	}
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", xc, yc));
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	caster[null] = null;
	t[null] = null;
	dammi[null] = null;
	p[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
}
void Trig_Earth_Clap_Actions() {
	unit caster = GetSpellAbilityUnit();
	timer t = CreateTimer();
	int h = GetHandleId(t);
	SaveUnitHandle(udg_hash, h, 1, caster);
	TimerStart(t, .5, false, Trig_Earth_Clap_WAIT_Actions);
	caster[null] = null;
	t[null] = null;
}
bool Trig_Earth_Clap_Conditions() {
	return GetSpellAbilityId() == 'A08F';
}
void InitTrig_Earth_Clap() {
	int index = 0;
	gg_trg_Earth_Clap[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Earth_Clap, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Earth_Clap, Condition(Trig_Earth_Clap_Conditions));
	TriggerAddAction(gg_trg_Earth_Clap, Trig_Earth_Clap_Actions);
}
void Trig_Ghoul_Jump_Move_Dest_Actions() {
	KillDestructable(GetEnumDestructable());
}
void Trig_Ghoul_Jump_Move_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	int wait = LoadInteger(udg_hash, h, 5);
	float face = LoadReal(udg_hash, h, 6);
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	rect r;
	if (wait > 0 && GetUnitState(caster, UNIT_STATE_LIFE) > .405) {
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 5, wait);
		SetUnitFacing(caster, face);
	else
		SetUnitAnimation(caster, "stand");
		r[Rect(x - 100., y - 100., x + 100., y + 100.)] = Rect(x - 100., y - 100., x + 100., y + 100.);
		EnumDestructablesInRect(r, null, Trig_Ghoul_Jump_Move_Dest_Actions);
		SetUnitPathing(caster, true);
		SetUnitTimeScale(caster, 1.);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
		RemoveRect(r);
		r[null] = null;
	}
	t[null] = null;
	caster[null] = null;
}
void Trig_Ghoul_Jump_Actions() {
	unit caster = GetSpellAbilityUnit();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	unit target = GetSpellTargetUnit();
	float angle;
	location loc;
	float tx;
	float ty;
	float dist;
	float time;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	SetUnitAnimation(caster, "stand");
	SetUnitPathing(caster, false);
	SetUnitAnimationByIndex(caster, $A);
	if (target == null) {
		loc[GetSpellTargetLoc()] = GetSpellTargetLoc();
		tx[GetLocationX(loc)] = GetLocationX(loc);
		ty[GetLocationY(loc)] = GetLocationY(loc);
	else
		tx[GetUnitX(target)] = GetUnitX(target);
		ty[GetUnitY(target)] = GetUnitY(target);
	}
	angle[bj_RADTODEG * Atan2(ty - y, tx - x)] = bj_RADTODEG * Atan2(ty - y, tx - x);
	dist[SquareRoot((tx - x) * (tx - x) + (ty - y) * (ty - y))] = SquareRoot((tx - x) * (tx - x) + (ty - y) * (ty - y));
	time[dist / 500.] = dist / 500.;
	SetUnitTimeScale(caster, (1 / time));
	MoveUnit(caster, time, 500., .0, angle, (dist / 3), true);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveInteger(udg_hash, h, 5, R2I(dist / 15.));
	SaveReal(udg_hash, h, 6, angle);
	TimerStart(t, .03, true, Trig_Ghoul_Jump_Move_Actions);
	caster[null] = null;
	target[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	t[null] = null;
}
bool Trig_Ghoul_Jump_Conditions() {
	return GetSpellAbilityId() == 'A0NH';
}
void InitTrig_Ghoul_Jump() {
	int index = 0;
	gg_trg_Ghoul_Jump[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Ghoul_Jump, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Ghoul_Jump, Condition(Trig_Ghoul_Jump_Conditions));
	TriggerAddAction(gg_trg_Ghoul_Jump, Trig_Ghoul_Jump_Actions);
}
void Trig_BurrowStrike_Move_Dest_Actions() {
	KillDestructable(GetEnumDestructable());
}
void Trig_BurrowStrike_Move_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	group gdamage = LoadGroupHandle(udg_hash, h, 2);
	int wait3 = LoadInteger(udg_hash, h, 3);
	int wait2 = LoadInteger(udg_hash, h, 4);
	int wait = LoadInteger(udg_hash, h, 5);
	float face = LoadReal(udg_hash, h, 6);
	float time = LoadReal(udg_hash, h, 7);
	int rewait = LoadInteger(udg_hash, h, 8);
	int impale = LoadInteger(udg_hash, h, 9);
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	player p = GetOwningPlayer(caster);
	group g;
	unit Picked;
	float angle;
	float angle2;
	unit dammi;
	bool alife = true;
	rect r;
	unit dammief;
	if (GetUnitState(caster, UNIT_STATE_LIFE) < .405) {
		alife[false] = false;
	}
	if (wait3 > 0) {
		wait3[wait3 - 1] = wait3 - 1;
		SaveInteger(udg_hash, h, 3, wait3);
	}
	if (wait3 <= 0 && wait > 0) {
		if (wait == rewait) {
			MoveUnit(caster, time, 400., .0, face, .0, true);
			PauseUnit(caster, true);
		}
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 5, wait);
		if (impale < 5) {
			impale[impale + 1] = impale + 1;
		else
			impale[0] = 0;
			dammief[CreateUnit(p, 'h00U', x + 100. * Cos(face * bj_DEGTORAD), y + 100. * Sin(face * bj_DEGTORAD), GetRandomReal(.0, 360.))] = CreateUnit(p, 'h00U', x + 100. * Cos(face * bj_DEGTORAD), y + 100. * Sin(face * bj_DEGTORAD), GetRandomReal(.0, 360.));
			UnitApplyTimedLife(dammief, 'BTLF', 1.);
			SetUnitScale(dammief, 2., 2., 2.5);
			DestroyEffect(AddSpecialEffectTarget("Effects\\ImpaleMissTarget.mdl", dammief, "origin"));
			dammief[null] = null;
		}
		SaveInteger(udg_hash, h, 9, impale);
		r[Rect(x - 100., y - 100., x + 100., y + 100.)] = Rect(x - 100., y - 100., x + 100., y + 100.);
		g[CreateGroup()] = CreateGroup();
		EnumDestructablesInRect(r, null, Trig_BurrowStrike_Move_Dest_Actions);
		GroupEnumUnitsInRange(g, x, y, 125., null);
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && IsUnitInGroup(Picked, gdamage) == false && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				GroupAddUnit(gdamage, Picked);
				DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", Picked, "chest"));
				dammi[CreateUnit(p, 'h00U', x, y, .0)] = CreateUnit(p, 'h00U', x, y, .0);
				UnitApplyTimedLife(dammi, 'BTLF', 1.);
				UnitAddAbility(dammi, 'A01U');
				IssueTargetOrderById(dammi, $D007F, Picked);
				dammi[null] = null;
				if (GetOwningPlayer(Picked) != Player($F)) {
					angle[bj_RADTODEG * Atan2(GetUnitY(Picked) - y, GetUnitX(Picked) - x)] = bj_RADTODEG * Atan2(GetUnitY(Picked) - y, GetUnitX(Picked) - x);
					angle2[(Atan2(y - GetUnitY(Picked), x - GetUnitX(Picked)) * bj_RADTODEG) + 360.] = (Atan2(y - GetUnitY(Picked), x - GetUnitX(Picked)) * bj_RADTODEG) + 360.;
					if ((angle2 <= (GetUnitFacing(caster) + 210.) && angle2 >= (GetUnitFacing(caster) + 180.))) {
						angle[angle + 30.] = angle + 30.;
					}
					if ((angle2 <= (GetUnitFacing(caster) + 180.) && angle2 >= (GetUnitFacing(caster) + 150.))) {
						angle[angle - 30.] = angle - 30.;
					}
					MoveUnit(Picked, 1., 400., 400., angle, 200., false);
				}
			}
			GroupRemoveUnit(g, Picked);
		}
		GroupClear(g);
		DestroyGroup(g);
		g[null] = null;
		RemoveRect(r);
		r[null] = null;
		Picked[null] = null;
		SaveGroupHandle(udg_hash, h, 2, gdamage);
	}
	if (wait <= 0 && wait2 > 0) {
		if (wait2 == $F) {
			SetUnitAnimationByIndex(caster, $A);
		}
		wait2[wait2 - 1] = wait2 - 1;
		SaveInteger(udg_hash, h, 4, wait2);
	}
	if (wait2 <= 0 || alife == false) {
		if (alife) {
			SetUnitAnimation(caster, "stand");
		}
		PauseUnit(caster, false);
		SetUnitPathing(caster, true);
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	caster[null] = null;
	gdamage[null] = null;
	p[null] = null;
	Picked[null] = null;
	dammi[null] = null;
}
void Trig_BurrowStrike_Actions() {
	unit caster = GetSpellAbilityUnit();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	unit target = GetSpellTargetUnit();
	float angle;
	group gdamage = CreateGroup();
	location loc;
	float tx;
	float ty;
	float dist;
	float time;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	int wait;
	int wait2 = 27;
	int wait3 = 30;
	int impale = 0;
	SetUnitAnimation(caster, "stand");
	SetUnitPathing(caster, false);
	SetUnitAnimationByIndex(caster, 8);
	SetUnitTimeScale(caster, 1.);
	UnitPeriodicPostionMove(caster, .03, .5);
	if (target == null) {
		loc[GetSpellTargetLoc()] = GetSpellTargetLoc();
		tx[GetLocationX(loc)] = GetLocationX(loc);
		ty[GetLocationY(loc)] = GetLocationY(loc);
	else
		tx[GetUnitX(target)] = GetUnitX(target);
		ty[GetUnitY(target)] = GetUnitY(target);
	}
	angle[bj_RADTODEG * Atan2(ty - y, tx - x)] = bj_RADTODEG * Atan2(ty - y, tx - x);
	dist[SquareRoot((tx - x) * (tx - x) + (ty - y) * (ty - y))] = SquareRoot((tx - x) * (tx - x) + (ty - y) * (ty - y));
	if (target == caster) {
		angle[GetUnitFacing(caster)] = GetUnitFacing(caster);
		dist[800.] = 800.;
	}
	time[dist / 400.] = dist / 400.;
	wait[R2I(dist / 12.)] = R2I(dist / 12.);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveGroupHandle(udg_hash, h, 2, gdamage);
	SaveInteger(udg_hash, h, 3, wait3);
	SaveInteger(udg_hash, h, 4, wait2);
	SaveInteger(udg_hash, h, 5, wait);
	SaveReal(udg_hash, h, 6, angle);
	SaveReal(udg_hash, h, 7, time);
	SaveInteger(udg_hash, h, 8, wait);
	SaveInteger(udg_hash, h, 9, impale);
	TimerStart(t, .03, true, Trig_BurrowStrike_Move_Actions);
	SetUnitAnimationByIndex(caster, 8);
	PauseUnit(caster, true);
	SetUnitAnimationByIndex(caster, 8);
	caster[null] = null;
	target[null] = null;
	gdamage[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	t[null] = null;
}
bool Trig_BurrowStrike_Conditions() {
	return GetSpellAbilityId() == 'A0NO';
}
void InitTrig_BurrowStrike() {
	int index = 0;
	gg_trg_BurrowStrike[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_BurrowStrike, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_BurrowStrike, Condition(Trig_BurrowStrike_Conditions));
	TriggerAddAction(gg_trg_BurrowStrike, Trig_BurrowStrike_Actions);
}
bool Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Loop_Raise_Dead_Condition() {
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) < .405) && (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) && (GetUnitTypeId(GetFilterUnit()) != 'h00U')) != null;
}
bool Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Loop_Is_Enemy_Condition() {
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405) && (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) && (IsPlayerEnemy(udg_Temp_Player[1], GetOwningPlayer(GetFilterUnit())))) != null;
}
bool Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Loop_Is_Ally_Condition() {
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405) && (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) && (IsPlayerAlly(udg_Temp_Player[1], GetOwningPlayer(GetFilterUnit())))) != null;
}
bool Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_All_Condition() {
	return (IsPlayerInForce(GetOwningPlayer(GetFilterUnit()), udg_Players_Enemy_Group));
}
void Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Actions() {
	group gall = CreateGroup();
	group g;
	group g2;
	unit Picked;
	unit target;
	float x;
	float y;
	float angle;
	GroupEnumUnitsInRect(gall, bj_mapInitialPlayableArea, Condition(Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_All_Condition));
	g[CreateGroup()] = CreateGroup();
	GroupToGroup(gall, g);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A086') > 0) && GetRandomInt(1, 2) == 1) {
			g2[CreateGroup()] = CreateGroup();
			x[GetUnitX(Picked)] = GetUnitX(Picked);
			y[GetUnitY(Picked)] = GetUnitY(Picked);
			udg_Temp_Player[GetOwningPlayer(Picked)] = GetOwningPlayer(Picked);
			GroupEnumUnitsInRange(g2, x, y, 600., Condition(Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Loop_Raise_Dead_Condition));
			RandomUnitFromGroup(1, g2);
			g2[CreateGroup()] = CreateGroup();
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			target[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if ((target != null)) {
				IssueImmediateOrderById(Picked, $D00E5);
			}
			udg_Temp_Player[null] = null;
			GroupClear(g2);
			DestroyGroup(g2);
			g2[null] = null;
			target[null] = null;
		}
		GroupRemoveUnit(g, Picked);
	}
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	g[CreateGroup()] = CreateGroup();
	GroupToGroup(gall, g);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A08K') > 0) && GetRandomInt(1, 2) == 1) {
			g2[CreateGroup()] = CreateGroup();
			x[GetUnitX(Picked)] = GetUnitX(Picked);
			y[GetUnitY(Picked)] = GetUnitY(Picked);
			udg_Temp_Player[GetOwningPlayer(Picked)] = GetOwningPlayer(Picked);
			GroupEnumUnitsInRange(g2, x, y, 800., Condition(Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			g2[CreateGroup()] = CreateGroup();
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			target[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D00FE, target);
			}
			udg_Temp_Player[null] = null;
			GroupClear(g2);
			DestroyGroup(g2);
			g2[null] = null;
			target[null] = null;
		}
		GroupRemoveUnit(g, Picked);
	}
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	g[CreateGroup()] = CreateGroup();
	GroupToGroup(gall, g);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A08K') > 0) && GetRandomInt(1, 2) == 1) {
			g2[CreateGroup()] = CreateGroup();
			x[GetUnitX(Picked)] = GetUnitX(Picked);
			y[GetUnitY(Picked)] = GetUnitY(Picked);
			udg_Temp_Player[GetOwningPlayer(Picked)] = GetOwningPlayer(Picked);
			GroupEnumUnitsInRange(g2, x, y, 800., Condition(Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Loop_Is_Ally_Condition));
			RandomUnitFromGroup(1, g2);
			g2[CreateGroup()] = CreateGroup();
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			target[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D00FE, target);
			}
			udg_Temp_Player[null] = null;
			GroupClear(g2);
			DestroyGroup(g2);
			g2[null] = null;
			target[null] = null;
		}
		GroupRemoveUnit(g, Picked);
	}
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	g[CreateGroup()] = CreateGroup();
	GroupToGroup(gall, g);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A08M') > 0) && GetRandomInt(1, 2) == 1) {
			g2[CreateGroup()] = CreateGroup();
			x[GetUnitX(Picked)] = GetUnitX(Picked);
			y[GetUnitY(Picked)] = GetUnitY(Picked);
			udg_Temp_Player[GetOwningPlayer(Picked)] = GetOwningPlayer(Picked);
			GroupEnumUnitsInRange(g2, x, y, 600., Condition(Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			g2[CreateGroup()] = CreateGroup();
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			target[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if ((target != null)) {
				IssueImmediateOrderById(Picked, $D009E);
			}
			udg_Temp_Player[null] = null;
			GroupClear(g2);
			DestroyGroup(g2);
			g2[null] = null;
			target[null] = null;
		}
		GroupRemoveUnit(g, Picked);
	}
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	g[CreateGroup()] = CreateGroup();
	GroupToGroup(gall, g);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A0NO') > 0) && GetRandomInt(1, 2) == 1) {
			g2[CreateGroup()] = CreateGroup();
			x[GetUnitX(Picked)] = GetUnitX(Picked);
			y[GetUnitY(Picked)] = GetUnitY(Picked);
			udg_Temp_Player[GetOwningPlayer(Picked)] = GetOwningPlayer(Picked);
			GroupEnumUnitsInRange(g2, x, y, 900., Condition(Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			g2[CreateGroup()] = CreateGroup();
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			target[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if ((target != null)) {
				angle[bj_RADTODEG * Atan2(GetUnitY(target) - GetUnitY(Picked), GetUnitX(target) - GetUnitX(Picked))] = bj_RADTODEG * Atan2(GetUnitY(target) - GetUnitY(Picked), GetUnitX(target) - GetUnitX(Picked));
				IssuePointOrderById(Picked, $D00FA, GetUnitX(target) + 175. * Cos(angle * bj_DEGTORAD), GetUnitY(target) + 175. * Sin(angle * bj_DEGTORAD));
			}
			udg_Temp_Player[null] = null;
			GroupClear(g2);
			DestroyGroup(g2);
			g2[null] = null;
			target[null] = null;
		}
		GroupRemoveUnit(g, Picked);
	}
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	g[CreateGroup()] = CreateGroup();
	GroupToGroup(gall, g);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A0NH') > 0) && GetRandomInt(1, 2) == 1) {
			g2[CreateGroup()] = CreateGroup();
			x[GetUnitX(Picked)] = GetUnitX(Picked);
			y[GetUnitY(Picked)] = GetUnitY(Picked);
			udg_Temp_Player[GetOwningPlayer(Picked)] = GetOwningPlayer(Picked);
			GroupEnumUnitsInRange(g2, x, y, 800., Condition(Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			g2[CreateGroup()] = CreateGroup();
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			target[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D00FA, target);
			}
			udg_Temp_Player[null] = null;
			GroupClear(g2);
			DestroyGroup(g2);
			g2[null] = null;
			target[null] = null;
		}
		GroupRemoveUnit(g, Picked);
	}
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	GroupClear(gall);
	DestroyGroup(gall);
	gall[null] = null;
}
bool Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Conditions() {
	return (udg_Nomer_samoi_volni == 3);
}
void InitTrig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump() {
	gg_trg_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEvent(gg_trg_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump, 1., true);
	TriggerAddCondition(gg_trg_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump, Condition(Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Conditions));
	TriggerAddAction(gg_trg_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump, Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Actions);
}
void Trig_BeetleCorpseBurrowCast_Actions() {
	IssueImmediateOrderById(GetTriggerUnit(), $D0235);
}
bool Trig_BeetleCorpseBurrowCast_Conditions() {
	return (GetUnitTypeId(GetTriggerUnit()) == 'u004' || GetUnitTypeId(GetTriggerUnit()) == 'u00D') && 50. > (GetUnitState(GetTriggerUnit(), UNIT_STATE_LIFE) / GetUnitState(GetTriggerUnit(), UNIT_STATE_MAX_LIFE) * 'd');
}
void InitTrig_BeetleCorpseBurrowCast() {
	int index = 0;
	gg_trg_BeetleCorpseBurrowCast[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_BeetleCorpseBurrowCast, Player(index), EVENT_PLAYER_UNIT_ATTACKED, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_BeetleCorpseBurrowCast, Condition(Trig_BeetleCorpseBurrowCast_Conditions));
	TriggerAddAction(gg_trg_BeetleCorpseBurrowCast, Trig_BeetleCorpseBurrowCast_Actions);
}
void Trig_BeetleCorpseBurrowAttackBase_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit beetle = LoadUnitHandle(udg_hash, h, 1);
	IssuePointOrderById(beetle, $D000F, GetRectCenterX(gg_rct_cast_magi), GetRectCenterY(gg_rct_cast_magi));
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
	beetle[null] = null;
}
void Trig_BeetleCorpseBurrowPeriodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit beetle = LoadUnitHandle(udg_hash, h, 1);
	SetUnitState(beetle, UNIT_STATE_MANA, GetUnitState(beetle, UNIT_STATE_MANA) + 60.);
	IssueImmediateOrderById(beetle, $D0236);
	DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl", GetUnitX(beetle), GetUnitY(beetle)));
	TimerStart(t, 1.75, false, Trig_BeetleCorpseBurrowAttackBase_Actions);
	t[null] = null;
	beetle[null] = null;
}
void Trig_BeetleCorpseBurrow_Actions() {
	unit beetle = GetSpellAbilityUnit();
	timer t = CreateTimer();
	int h = GetHandleId(t);
	SaveUnitHandle(udg_hash, h, 1, beetle);
	DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl", GetUnitX(beetle), GetUnitY(beetle)));
	TimerStart(t, GetRandomReal(3.5, 7.5), false, Trig_BeetleCorpseBurrowPeriodic_Actions);
	beetle[null] = null;
	t[null] = null;
}
bool Trig_BeetleCorpseBurrow_Conditions() {
	return (GetSpellAbilityId() == 'A07Z' && GetUnitTypeId(GetSpellAbilityUnit()) == 'u004') || (GetSpellAbilityId() == 'A081' && GetUnitTypeId(GetSpellAbilityUnit()) == 'u00D');
}
void InitTrig_BeetleCorpseBurrow() {
	int index = 0;
	gg_trg_BeetleCorpseBurrow[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_BeetleCorpseBurrow, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_BeetleCorpseBurrow, Condition(Trig_BeetleCorpseBurrow_Conditions));
	TriggerAddAction(gg_trg_BeetleCorpseBurrow, Trig_BeetleCorpseBurrow_Actions);
}
void Trig_Cocoon_periodic_Creation_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit cocoon = LoadUnitHandle(udg_hash, h, 1);
	int check = LoadInteger(udg_hash, h, 2);
	float scale = .75 + (check * .0375);
	unit spider;
	if (check < 20 && GetUnitState(cocoon, UNIT_STATE_LIFE) > .405) {
		check[check + 1] = check + 1;
		SaveInteger(udg_hash, h, 2, check);
		SetUnitScale(cocoon, scale, scale, scale);
	else
		if (check >= 20) {
			spider[CreateUnit(GetOwningPlayer(cocoon), 'n00R', GetUnitX(cocoon), GetUnitY(cocoon), GetUnitFacing(cocoon))] = CreateUnit(GetOwningPlayer(cocoon), 'n00R', GetUnitX(cocoon), GetUnitY(cocoon), GetUnitFacing(cocoon));
			IssuePointOrderById(spider, $D000F, GetRectCenterX(gg_rct_cast_magi), GetRectCenterY(gg_rct_cast_magi));
			DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Demon\\DemonLargeDeathExplode\\DemonLargeDeathExplode.mdl", GetUnitX(cocoon), GetUnitY(cocoon)));
			spider[null] = null;
		}
		KillUnit(cocoon);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
		cocoon[null] = null;
		t[null] = null;
	}
	t[null] = null;
	cocoon[null] = null;
}
void Trig_Cocoon_Creation_Actions() {
	unit spider = GetDyingUnit();
	float x = GetUnitX(spider);
	float y = GetUnitY(spider);
	unit cocoon = CreateUnit(GetOwningPlayer(spider), 'n011', x, y, GetRandomReal(.0, 360.));
	timer t = CreateTimer();
	int h = GetHandleId(t);
	int check = 0;
	DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Demon\\DemonLargeDeathExplode\\DemonLargeDeathExplode.mdl", x, y));
	SaveUnitHandle(udg_hash, h, 1, cocoon);
	SaveInteger(udg_hash, h, 2, check);
	TimerStart(t, .5, true, Trig_Cocoon_periodic_Creation_Actions);
	spider[null] = null;
	cocoon[null] = null;
	t[null] = null;
}
bool Trig_Cocoon_Creation_Conditions() {
	return GetUnitTypeId(GetDyingUnit()) == 'n00R' && GetRandomInt(1, 3) == 1;
}
void InitTrig_Cocoon_Creation() {
	int index = 0;
	gg_trg_Cocoon_Creation[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Cocoon_Creation, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Cocoon_Creation, Condition(Trig_Cocoon_Creation_Conditions));
	TriggerAddAction(gg_trg_Cocoon_Creation, Trig_Cocoon_Creation_Actions);
}
bool Trig_Poisonous_Spittle_Cast_Conditions() {
	return GetUnitTypeId(GetAttacker()) == 'n00R' && GetRandomInt(1, 6) == 1;
}
void Trig_Poisonous_Spittle_Cast_Actions() {
	IssueTargetOrderById(GetAttacker(), $D02B6, GetTriggerUnit());
}
void InitTrig_Poisonous_Spittle_Cast() {
	int index = 0;
	gg_trg_Poisonous_Spittle_Cast[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Poisonous_Spittle_Cast, Player(index), EVENT_PLAYER_UNIT_ATTACKED, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Poisonous_Spittle_Cast, Condition(Trig_Poisonous_Spittle_Cast_Conditions));
	TriggerAddAction(gg_trg_Poisonous_Spittle_Cast, Trig_Poisonous_Spittle_Cast_Actions);
}
void Trig_Holes_Of_Grave_Diggers_Debug_Kill_Actions() {
	RemoveUnit(GetDyingUnit());
	FlushChildHashtable(udg_hash, GetHandleId(GetDyingUnit()));
}
bool Trig_Holes_Of_Grave_Diggers_Debug_Kill_Conditions() {
	return GetUnitTypeId(GetDyingUnit()) == 'u00H';
}
void InitTrig_Holes_Of_Grave_Diggers_Debug_Kill() {
	int index = 0;
	gg_trg_Holes_Of_Grave_Diggers_Debug_Kill[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Holes_Of_Grave_Diggers_Debug_Kill, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Holes_Of_Grave_Diggers_Debug_Kill, Condition(Trig_Holes_Of_Grave_Diggers_Debug_Kill_Conditions));
	TriggerAddAction(gg_trg_Holes_Of_Grave_Diggers_Debug_Kill, Trig_Holes_Of_Grave_Diggers_Debug_Kill_Actions);
}
void Trig_Holes_Of_Grave_Diggers_AttackBase_Actions() {
	timer tsp = GetExpiredTimer();
	int hsp = GetHandleId(tsp);
	unit spider = LoadUnitHandle(udg_hash, hsp, 1);
	SetUnitAnimation(spider, "stand");
	SetUnitMoveSpeed(spider, GetUnitDefaultMoveSpeed(spider));
	IssuePointOrderById(spider, $D000F, GetRectCenterX(gg_rct_cast_magi), GetRectCenterY(gg_rct_cast_magi));
	spider[null] = null;
	FlushChildHashtable(udg_hash, hsp);
	DestroyTimer(tsp);
	tsp[null] = null;
}
void Trig_Holes_Of_Grave_Diggers_periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	float x = LoadReal(udg_hash, h, 1);
	float y = LoadReal(udg_hash, h, 2);
	unit hole = LoadUnitHandle(udg_hash, h, 3);
	unit dammi;
	effect ef;
	int check = LoadInteger(udg_hash, h, 6);
	player p = LoadPlayerHandle(udg_hash, h, 7);
	unit spider;
	timer tsp;
	int hsp;
	if (GetUnitState(hole, UNIT_STATE_LIFE) > .405 && check > 0) {
		check[check - 1] = check - 1;
		SaveInteger(udg_hash, h, 6, check);
		tsp[CreateTimer()] = CreateTimer();
		hsp[GetHandleId(tsp)] = GetHandleId(tsp);
		spider[CreateUnit(p, 'u00D', x, y, GetRandomReal(.0, 360.))] = CreateUnit(p, 'u00D', x, y, GetRandomReal(.0, 360.));
		SetUnitAnimationByIndex(spider, 9);
		SetUnitMoveSpeed(spider, .0);
		SaveUnitHandle(udg_hash, hsp, 1, spider);
		TimerStart(tsp, 1., false, Trig_Holes_Of_Grave_Diggers_AttackBase_Actions);
		spider[null] = null;
		tsp[null] = null;
	else
		dammi[LoadUnitHandle(udg_hash, h, 4)] = LoadUnitHandle(udg_hash, h, 4);
		ef[LoadEffectHandle(udg_hash, h, 5)] = LoadEffectHandle(udg_hash, h, 5);
		DestroyEffect(ef);
		ef[null] = null;
		KillUnit(dammi);
		dammi[null] = null;
		KillUnit(hole);
		hole[null] = null;
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
		t[null] = null;
	}
	t[null] = null;
	hole[null] = null;
	p[null] = null;
}
void Trig_Holes_Of_Grave_Diggers_Cast_Actions() {
	unit caster = GetSpellAbilityUnit();
	location loc = GetSpellTargetLoc();
	float x = GetLocationX(loc);
	float y = GetLocationY(loc);
	unit hole = CreateUnit(GetOwningPlayer(caster), 'u00H', x, y, GetRandomReal(.0, 360.));
	unit dammi = CreateUnit(GetOwningPlayer(caster), 'h00U', x, y, .0);
	timer t = CreateTimer();
	int h = GetHandleId(t);
	effect ef;
	int check = $A;
	SetUnitAnimationByIndex(hole, 8);
	SetUnitScale(dammi, 2., 2., 2.);
	SetUnitVertexColor(dammi, $C8, $C8, $C8, $AF);
	ef[AddSpecialEffectTarget("Abilities\\Spells\\Undead\\Web\\WebTarget.mdl", dammi, "chest")] = AddSpecialEffectTarget("Abilities\\Spells\\Undead\\Web\\WebTarget.mdl", dammi, "chest");
	SaveReal(udg_hash, h, 1, x);
	SaveReal(udg_hash, h, 2, y);
	SaveUnitHandle(udg_hash, h, 3, hole);
	SaveUnitHandle(udg_hash, h, 4, dammi);
	SaveEffectHandle(udg_hash, h, 5, ef);
	SaveInteger(udg_hash, h, 6, check);
	SavePlayerHandle(udg_hash, h, 7, GetOwningPlayer(caster));
	TimerStart(t, 1.5, true, Trig_Holes_Of_Grave_Diggers_periodic_Actions);
	caster[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	hole[null] = null;
	dammi[null] = null;
	t[null] = null;
	ef[null] = null;
}
bool Trig_Holes_Of_Grave_Diggers_Cast_Conditions() {
	return GetSpellAbilityId() == 'A0E2';
}
void InitTrig_Holes_Of_Grave_Diggers_Cast() {
	int index = 0;
	gg_trg_Holes_Of_Grave_Diggers_Cast[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Holes_Of_Grave_Diggers_Cast, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Holes_Of_Grave_Diggers_Cast, Condition(Trig_Holes_Of_Grave_Diggers_Cast_Conditions));
	TriggerAddAction(gg_trg_Holes_Of_Grave_Diggers_Cast, Trig_Holes_Of_Grave_Diggers_Cast_Actions);
}
void Trig_Nerub_Spider_Actions() {
	unit caster = GetSpellAbilityUnit();
	float xt;
	player p = GetOwningPlayer(caster);
	float yt;
	location loc;
	unit target = GetSpellTargetUnit();
	unit dammi;
	if (target != null) {
		xt[GetUnitX(target)] = GetUnitX(target);
		yt[GetUnitY(target)] = GetUnitY(target);
	else
		loc[GetSpellTargetLoc()] = GetSpellTargetLoc();
		xt[GetLocationX(loc)] = GetLocationX(loc);
		yt[GetLocationY(loc)] = GetLocationY(loc);
	}
	dammi[CreateUnit(p, 'n00Z', xt, yt, GetRandomReal(.0, 360.))] = CreateUnit(p, 'n00Z', xt, yt, GetRandomReal(.0, 360.));
	IssuePointOrderById(dammi, $D000F, GetRectCenterX(gg_rct_cast_magi), GetRectCenterY(gg_rct_cast_magi));
	dammi[null] = null;
	dammi[CreateUnit(p, 'n00Z', xt, yt, GetRandomReal(.0, 360.))] = CreateUnit(p, 'n00Z', xt, yt, GetRandomReal(.0, 360.));
	IssuePointOrderById(dammi, $D000F, GetRectCenterX(gg_rct_cast_magi), GetRectCenterY(gg_rct_cast_magi));
	dammi[null] = null;
	caster[null] = null;
	p[null] = null;
	target[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
}
bool Trig_Nerub_Spider_Conditions() {
	return GetSpellAbilityId() == 'A08U';
}
void InitTrig_Nerub_Spider() {
	int index = 0;
	gg_trg_Nerub_Spider[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Nerub_Spider, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Nerub_Spider, Condition(Trig_Nerub_Spider_Conditions));
	TriggerAddAction(gg_trg_Nerub_Spider, Trig_Nerub_Spider_Actions);
}
bool Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Dead_Condition() {
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) < .405) && (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) && (GetUnitTypeId(GetFilterUnit()) != 'h00U')) != null;
}
bool Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Loop_Is_Enemy_Condition() {
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405) && (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) && (IsPlayerEnemy(udg_Temp_Player[1], GetOwningPlayer(GetFilterUnit())))) != null;
}
bool Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Loop_Is_Ally_Condition() {
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405) && (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) && (IsPlayerAlly(udg_Temp_Player[1], GetOwningPlayer(GetFilterUnit())))) != null;
}
bool Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_All_Condition() {
	return (IsPlayerInForce(GetOwningPlayer(GetFilterUnit()), udg_Players_Enemy_Group));
}
void Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Actions() {
	group gall = CreateGroup();
	group g;
	group g2;
	unit Picked;
	unit target;
	float x;
	float y;
	float angle;
	GroupEnumUnitsInRect(gall, bj_mapInitialPlayableArea, Condition(Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_All_Condition));
	g[CreateGroup()] = CreateGroup();
	GroupToGroup(gall, g);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A0DY') > 0) && GetRandomInt(1, 2) == 1) {
			g2[CreateGroup()] = CreateGroup();
			x[GetUnitX(Picked)] = GetUnitX(Picked);
			y[GetUnitY(Picked)] = GetUnitY(Picked);
			udg_Temp_Player[GetOwningPlayer(Picked)] = GetOwningPlayer(Picked);
			GroupEnumUnitsInRange(g2, x, y, 600., Condition(Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Loop_Is_Ally_Condition));
			RandomUnitFromGroup(1, g2);
			g2[CreateGroup()] = CreateGroup();
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			target[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D0062, target);
			}
			udg_Temp_Player[null] = null;
			GroupClear(g2);
			DestroyGroup(g2);
			g2[null] = null;
			target[null] = null;
		}
		GroupRemoveUnit(g, Picked);
	}
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	g[CreateGroup()] = CreateGroup();
	GroupToGroup(gall, g);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A0E2') > 0) && GetRandomInt(1, 2) == 1) {
			g2[CreateGroup()] = CreateGroup();
			x[GetUnitX(Picked)] = GetUnitX(Picked);
			y[GetUnitY(Picked)] = GetUnitY(Picked);
			udg_Temp_Player[GetOwningPlayer(Picked)] = GetOwningPlayer(Picked);
			GroupEnumUnitsInRange(g2, x, y, 700., Condition(Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			g2[CreateGroup()] = CreateGroup();
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			target[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if ((target != null)) {
				IssuePointOrderById(Picked, $D009D, GetUnitX(target), GetUnitY(target));
			}
			udg_Temp_Player[null] = null;
			GroupClear(g2);
			DestroyGroup(g2);
			g2[null] = null;
			target[null] = null;
		}
		GroupRemoveUnit(g, Picked);
	}
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	g[CreateGroup()] = CreateGroup();
	GroupToGroup(gall, g);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A08U') > 0) && GetRandomInt(1, 2) == 1) {
			g2[CreateGroup()] = CreateGroup();
			x[GetUnitX(Picked)] = GetUnitX(Picked);
			y[GetUnitY(Picked)] = GetUnitY(Picked);
			udg_Temp_Player[GetOwningPlayer(Picked)] = GetOwningPlayer(Picked);
			GroupEnumUnitsInRange(g2, x, y, 900., Condition(Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			g2[CreateGroup()] = CreateGroup();
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			target[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if ((target != null)) {
				IssuePointOrderById(Picked, $D0278, GetUnitX(target), GetUnitY(target));
			}
			udg_Temp_Player[null] = null;
			GroupClear(g2);
			DestroyGroup(g2);
			g2[null] = null;
			target[null] = null;
		}
		GroupRemoveUnit(g, Picked);
	}
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	g[CreateGroup()] = CreateGroup();
	GroupToGroup(gall, g);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A082') > 0) && GetRandomInt(1, 2) == 1) {
			g2[CreateGroup()] = CreateGroup();
			x[GetUnitX(Picked)] = GetUnitX(Picked);
			y[GetUnitY(Picked)] = GetUnitY(Picked);
			udg_Temp_Player[GetOwningPlayer(Picked)] = GetOwningPlayer(Picked);
			GroupEnumUnitsInRange(g2, x, y, 250., Condition(Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			g2[CreateGroup()] = CreateGroup();
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			target[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D022F, target);
			}
			udg_Temp_Player[null] = null;
			GroupClear(g2);
			DestroyGroup(g2);
			g2[null] = null;
			target[null] = null;
		}
		GroupRemoveUnit(g, Picked);
	}
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	g[CreateGroup()] = CreateGroup();
	GroupToGroup(gall, g);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A08Q') > 0) && GetRandomInt(1, 2) == 1) {
			g2[CreateGroup()] = CreateGroup();
			x[GetUnitX(Picked)] = GetUnitX(Picked);
			y[GetUnitY(Picked)] = GetUnitY(Picked);
			udg_Temp_Player[GetOwningPlayer(Picked)] = GetOwningPlayer(Picked);
			GroupEnumUnitsInRange(g2, x, y, 500., Condition(Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			g2[CreateGroup()] = CreateGroup();
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			target[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D00F3, target);
			}
			udg_Temp_Player[null] = null;
			GroupClear(g2);
			DestroyGroup(g2);
			g2[null] = null;
			target[null] = null;
		}
		GroupRemoveUnit(g, Picked);
	}
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	g[CreateGroup()] = CreateGroup();
	GroupToGroup(gall, g);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A08T') > 0) && GetRandomInt(1, 2) == 1) {
			g2[CreateGroup()] = CreateGroup();
			x[GetUnitX(Picked)] = GetUnitX(Picked);
			y[GetUnitY(Picked)] = GetUnitY(Picked);
			udg_Temp_Player[GetOwningPlayer(Picked)] = GetOwningPlayer(Picked);
			GroupEnumUnitsInRange(g2, x, y, 650., Condition(Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			g2[CreateGroup()] = CreateGroup();
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			target[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D02B6, target);
			}
			udg_Temp_Player[null] = null;
			GroupClear(g2);
			DestroyGroup(g2);
			g2[null] = null;
			target[null] = null;
		}
		GroupRemoveUnit(g, Picked);
	}
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	GroupClear(gall);
	DestroyGroup(gall);
	gall[null] = null;
}
bool Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Conditions() {
	return (udg_Nomer_samoi_volni == 4);
}
void InitTrig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger() {
	gg_trg_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEvent(gg_trg_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger, 1., true);
	TriggerAddCondition(gg_trg_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger, Condition(Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Conditions));
	TriggerAddAction(gg_trg_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger, Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Actions);
}
void Trig_Damned_Ents_Reincarnation_End_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit damnedent = LoadUnitHandle(udg_hash, h, 4);
	SetUnitTimeScale(damnedent, 1.);
	PauseUnit(damnedent, false);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
	damnedent[null] = null;
}
void Trig_Damned_Ents_Reincarnation_Recovery_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit ent = LoadUnitHandle(udg_hash, h, 1);
	unit damnedent = LoadUnitHandle(udg_hash, h, 4);
	float x = LoadReal(udg_hash, h, 2);
	float y = LoadReal(udg_hash, h, 3);
	group g = CreateGroup();
	unit Picked;
	SetUnitVertexColor(damnedent, $FF, $FF, $FF, $FF);
	DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl", x, y));
	SetUnitTimeScale(damnedent, -.1);
	SetUnitAnimation(damnedent, "Death");
	GroupEnumUnitsInRange(g, x, y, 250., null);
	UnitRemoveAbility(damnedent, 'Avul');
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if (IsUnitAlly(Picked, GetOwningPlayer(damnedent)) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
			SetUnitState(Picked, UNIT_STATE_LIFE, GetUnitState(Picked, UNIT_STATE_LIFE) + 125.);
		}
		if (IsUnitEnemy(Picked, GetOwningPlayer(damnedent)) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			UnitDamageTarget(damnedent, Picked, 80., false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
		}
		GroupRemoveUnit(g, Picked);
	}
	TimerStart(t, 1.5, false, Trig_Damned_Ents_Reincarnation_End_Actions);
	RemoveUnit(ent);
	t[null] = null;
	ent[null] = null;
	damnedent[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	Picked[null] = null;
}
void Trig_Damned_Ents_Reincarnation_Actions() {
	unit ent = GetDyingUnit();
	float x = GetUnitX(ent);
	float y = GetUnitY(ent);
	timer t = CreateTimer();
	int h = GetHandleId(t);
	unit damnedent = CreateUnit(GetOwningPlayer(ent), GetUnitTypeId(ent), x, y, GetUnitFacing(ent));
	PauseUnit(damnedent, true);
	SetUnitAnimation(damnedent, "Death");
	UnitAddAbility(damnedent, 'Avul');
	SaveUnitHandle(udg_hash, h, 1, ent);
	SaveUnitHandle(udg_hash, h, 4, damnedent);
	SaveReal(udg_hash, h, 2, x);
	SaveReal(udg_hash, h, 3, y);
	SetUnitVertexColor(damnedent, $FF, $FF, $FF, 0);
	TimerStart(t, 1.75, false, Trig_Damned_Ents_Reincarnation_Recovery_Actions);
	ent[null] = null;
	t[null] = null;
}
bool Trig_Damned_Ents_Reincarnation_Conditions() {
	return GetUnitAbilityLevel(GetDyingUnit(), 'A0E1') > 0 && GetRandomInt(1, 4) == 1;
}
void InitTrig_Damned_Ents_Reincarnation() {
	int index = 0;
	gg_trg_Damned_Ents_Reincarnation[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Damned_Ents_Reincarnation, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Damned_Ents_Reincarnation, Condition(Trig_Damned_Ents_Reincarnation_Conditions));
	TriggerAddAction(gg_trg_Damned_Ents_Reincarnation, Trig_Damned_Ents_Reincarnation_Actions);
}
void Trig_Rage_of_Decay_ent_attack_base_Actions() {
	timer tsp = GetExpiredTimer();
	int hsp = GetHandleId(tsp);
	unit ent = LoadUnitHandle(udg_hash, hsp, 1);
	if (ent != null) {
		SetUnitAnimation(ent, "Stand");
		PauseUnit(ent, false);
		IssuePointOrderById(ent, $D000F, GetRectCenterX(gg_rct_cast_magi), GetRectCenterY(gg_rct_cast_magi));
	}
	FlushChildHashtable(udg_hash, hsp);
	DestroyTimer(tsp);
	tsp[null] = null;
	ent[null] = null;
}
void Trig_Rage_of_Decay_periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	player p = GetOwningPlayer(caster);
	float x = LoadReal(udg_hash, h, 2);
	float y = LoadReal(udg_hash, h, 3);
	int order = GetUnitCurrentOrder(caster);
	unit dammi;
	group g;
	unit Picked;
	float rx = 0;
	float ry = 0;
	unit ent;
	int entid = 0;
	int random = GetRandomInt(1, $F);
	int efrandom = GetRandomInt(2, 4);
	int orderId;
	timer tsp;
	int hsp;
	orderId[$D0278] = $D0278;
	if ((orderId != 0)) {
	else
		orderId[UnitId("channel")] = UnitId("channel");
		if ((orderId != 0)) {
		}
	}
	if (order == orderId) {
		rx[GetRandomReal((x - 425.), (x + 425.))] = GetRandomReal((x - 425.), (x + 425.));
		ry[GetRandomReal((y - 425.), (y + 425.))] = GetRandomReal((y - 425.), (y + 425.));
		g[CreateGroup()] = CreateGroup();
		GroupEnumUnitsInRange(g, rx, ry, 125., null);
		if (random <= 8) {
			entid['u009'] = 'u009';
		}
		if (random >= 9 && random <= $D) {
			entid['u00B'] = 'u00B';
		}
		if (random >= $E) {
			entid['u00A'] = 'u00A';
		}
		ent[CreateUnit(p, entid, rx, ry, GetRandomReal(.0, 360.))] = CreateUnit(p, entid, rx, ry, GetRandomReal(.0, 360.));
		DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\NightElf\\EntBirthTarget\\EntBirthTarget.mdl", ent, "chest"));
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl", ent, "chest"));
		PauseUnit(ent, true);
		SetUnitAnimation(ent, "Attack Spell");
		tsp[CreateTimer()] = CreateTimer();
		hsp[GetHandleId(tsp)] = GetHandleId(tsp);
		SaveUnitHandle(udg_hash, hsp, 1, ent);
		TimerStart(tsp, 1.6, false, Trig_Rage_of_Decay_ent_attack_base_Actions);
		while (true) {
			if (efrandom < 0) break;
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\NightElf\\EntanglingRoots\\EntanglingRootsTarget.mdl", GetRandomReal(rx - GetRandomReal(20., 125.), rx + GetRandomReal(20., 125.)), GetRandomReal(ry - GetRandomReal(20., 125.), ry + GetRandomReal(20., 125.))));
			efrandom[efrandom - 1] = efrandom - 1;
		}
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				UnitDamageTarget(caster, Picked, 150., false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GreenDragonMissile\\GreenDragonMissile.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl", Picked, "chest"));
				dammi[CreateUnit(p, 'h00U', GetUnitX(Picked), GetUnitY(Picked), .0)] = CreateUnit(p, 'h00U', GetUnitX(Picked), GetUnitY(Picked), .0);
				UnitApplyTimedLife(dammi, 'BTLF', 2.);
				UnitAddAbility(dammi, 'A08Z');
				IssueTargetOrderById(dammi, $D00CB, Picked);
				dammi[null] = null;
			}
			GroupRemoveUnit(g, Picked);
		}
	else
		SetUnitTimeScale(caster, 1.);
		DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl", x, y));
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
		t[null] = null;
	}
	t[null] = null;
	caster[null] = null;
	p[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	ent[null] = null;
	tsp[null] = null;
	Picked[null] = null;
	dammi[null] = null;
}
void Trig_Rage_of_Decay_Actions() {
	unit caster = GetSpellAbilityUnit();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	timer t = CreateTimer();
	int h = GetHandleId(t);
	SetUnitTimeScale(caster, 3.);
	DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl", GetUnitX(caster), GetUnitY(caster)));
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Tranquility\\Tranquility.mdl", caster, "chest"));
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 2, x);
	SaveReal(udg_hash, h, 3, y);
	TimerStart(t, .3, true, Trig_Rage_of_Decay_periodic_Actions);
	caster[null] = null;
	t[null] = null;
}
bool Trig_Rage_of_Decay_Conditions() {
	return GetSpellAbilityId() == 'A091';
}
void InitTrig_Rage_of_Decay() {
	int index = 0;
	gg_trg_Rage_of_Decay[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Rage_of_Decay, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Rage_of_Decay, Condition(Trig_Rage_of_Decay_Conditions));
	TriggerAddAction(gg_trg_Rage_of_Decay, Trig_Rage_of_Decay_Actions);
}
bool Trig_Use_ThrowStone_and_TurnIntoEnt_Conditions() {
	return (udg_Nomer_samoi_volni == 5);
}
bool Trig_Use_ThrowStone_and_TurnIntoEnt_Func002C() {
	return (GetUnitAbilityLevelSwapped('A094', GetTriggerUnit()) > 0) && (GetRandomInt(1, 2) == 1) && (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group));
}
bool Trig_Use_ThrowStone_and_TurnIntoEnt_Func003C() {
	return (GetUnitAbilityLevelSwapped('A094', GetAttacker()) > 0) && (GetRandomInt(1, 2) == 1) && (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group));
}
void Trig_Use_ThrowStone_and_TurnIntoEnt_Actions() {
	if ((Trig_Use_ThrowStone_and_TurnIntoEnt_Func002C())) {
		IssueTargetOrderById(GetTriggerUnit(), $D011C, GetAttacker());
	}
	if ((Trig_Use_ThrowStone_and_TurnIntoEnt_Func003C())) {
		IssueTargetOrderById(GetAttacker(), $D011C, GetTriggerUnit());
	}
}
void InitTrig_Use_ThrowStone_and_TurnIntoEnt() {
	gg_trg_Use_ThrowStone_and_TurnIntoEnt[CreateTrigger()] = CreateTrigger();
	TriggerRegisterAnyUnitEventBJ(gg_trg_Use_ThrowStone_and_TurnIntoEnt, EVENT_PLAYER_UNIT_ATTACKED);
	TriggerAddCondition(gg_trg_Use_ThrowStone_and_TurnIntoEnt, Condition(Trig_Use_ThrowStone_and_TurnIntoEnt_Conditions));
	TriggerAddAction(gg_trg_Use_ThrowStone_and_TurnIntoEnt, Trig_Use_ThrowStone_and_TurnIntoEnt_Actions);
}
bool Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Conditions() {
	return (udg_Nomer_samoi_volni == 5);
}
bool Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003001002() {
	return (IsPlayerInForce(GetOwningPlayer(GetFilterUnit()), udg_Players_Enemy_Group));
}
bool Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001Func001002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
bool Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001Func001002001003002001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
bool Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001Func001002001003002002() {
	return (IsPlayerAlly(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
bool Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001Func001002001003002() {
	return GetBooleanAnd(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001Func001002001003002001(), Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001Func001002001003002002());
}
bool Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001Func001002001003() {
	return GetBooleanAnd(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001Func001002001003001(), Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001Func001002001003002());
}
bool Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001Func002C() {
	return (udg_Temp_Unit != null);
}
bool Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001C() {
	return (GetUnitAbilityLevelSwapped('A090', GetEnumUnit()) > 0) && (GetRandomInt(1, 2) == 3);
}
bool Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
bool Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003002001001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
bool Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003002001002() {
	return (GetUnitStateSwap(UNIT_STATE_LIFE, GetFilterUnit()) < (GetUnitStateSwap(UNIT_STATE_MAX_LIFE, GetFilterUnit()) * .6));
}
bool Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003002001() {
	return GetBooleanAnd(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003002001001(), Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003002001002());
}
bool Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003002002() {
	return (IsPlayerAlly(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
bool Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003002() {
	return GetBooleanAnd(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003002001(), Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003002002());
}
bool Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003() {
	return GetBooleanAnd(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003001(), Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003002());
}
bool Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func002C() {
	return (udg_Temp_Unit != null);
}
bool Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002C() {
	return (GetUnitAbilityLevelSwapped('A08Y', GetEnumUnit()) > 0) && (GetRandomInt(1, 2) == 1);
}
bool Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003Func001002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
bool Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003Func001002001003002001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
bool Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003Func001002001003002002() {
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
bool Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003Func001002001003002() {
	return GetBooleanAnd(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003Func001002001003002001(), Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003Func001002001003002002());
}
bool Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003Func001002001003() {
	return GetBooleanAnd(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003Func001002001003001(), Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003Func001002001003002());
}
bool Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003Func002C() {
	return (udg_Temp_Unit != null);
}
bool Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003C() {
	return (GetUnitAbilityLevelSwapped('S000', GetEnumUnit()) > 0) && (GetRandomInt(1, 2) == 1);
}
bool Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004Func001002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
bool Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004Func001002001003002001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
bool Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004Func001002001003002002() {
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
bool Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004Func001002001003002() {
	return GetBooleanAnd(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004Func001002001003002001(), Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004Func001002001003002002());
}
bool Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004Func001002001003() {
	return GetBooleanAnd(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004Func001002001003001(), Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004Func001002001003002());
}
bool Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004Func002C() {
	return (udg_Temp_Unit != null);
}
bool Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004C() {
	return (GetUnitAbilityLevelSwapped('A091', GetEnumUnit()) > 0) && (GetRandomInt(1, 2) == 1);
}
void Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003A() {
	if ((Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001C())) {
		udg_Temp_Unit[GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(700., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001Func001002001003)))] = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(700., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001Func001002001003)));
		if ((Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001Func002C())) {
			IssueTargetOrderById(GetEnumUnit(), $D0213, udg_Temp_Unit);
		}
	}
	if ((Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002C())) {
		udg_Temp_Unit[GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(800., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003)))] = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(800., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003)));
		if ((Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func002C())) {
			IssueTargetOrderById(GetEnumUnit(), $D00C0, udg_Temp_Unit);
		}
	}
	if ((Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003C())) {
		udg_Temp_Unit[GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(225., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003Func001002001003)))] = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(225., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003Func001002001003)));
		if ((Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003Func002C())) {
			IssueTargetOrderById(GetEnumUnit(), $D00DD, udg_Temp_Unit);
		}
	}
	if ((Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004C())) {
		udg_Temp_Unit[GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(600., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004Func001002001003)))] = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(600., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004Func001002001003)));
		if ((Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004Func002C())) {
			IssueImmediateOrderById(GetEnumUnit(), $D0278);
		}
	}
}
void Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Actions() {
	ForGroupBJ(GetUnitsInRectMatching(bj_mapInitialPlayableArea, Condition(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003001002)), Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003A);
}
void InitTrig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay() {
	gg_trg_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventPeriodic(gg_trg_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay, 1.);
	TriggerAddCondition(gg_trg_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay, Condition(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Conditions));
	TriggerAddAction(gg_trg_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay, Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Actions);
}
void Trig_Troll_Dead_Remove_Bugs_Actions() {
	int h = GetHandleId(GetDyingUnit());
	effect ef = LoadEffectHandle(udg_hash, h, 55);
	DestroyEffect(ef);
	ef[null] = null;
	ef[LoadEffectHandle(udg_hash, h, 56)] = LoadEffectHandle(udg_hash, h, 56);
	DestroyEffect(ef);
	ef[null] = null;
	ef[LoadEffectHandle(udg_hash, h, 57)] = LoadEffectHandle(udg_hash, h, 57);
	DestroyEffect(ef);
	ef[null] = null;
}
bool Trig_Troll_Dead_Remove_Bugs_Conditions() {
	return GetUnitAbilityLevel(GetDyingUnit(), 'A09E') > 0;
}
void InitTrig_Troll_Dead_Remove_Bugs() {
	int index = 0;
	gg_trg_Troll_Dead_Remove_Bugs[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Troll_Dead_Remove_Bugs, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Troll_Dead_Remove_Bugs, Condition(Trig_Troll_Dead_Remove_Bugs_Conditions));
	TriggerAddAction(gg_trg_Troll_Dead_Remove_Bugs, Trig_Troll_Dead_Remove_Bugs_Actions);
}
void Trig_Boss_Troll_Entangle_Throw_periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	float angle = LoadReal(udg_hash, h, 1);
	int stage = LoadInteger(udg_hash, h, 2);
	unit entangle = LoadUnitHandle(udg_hash, h, 3);
	player p;
	float x = GetUnitX(entangle) + 40. * Cos(angle * bj_DEGTORAD);
	float y = GetUnitY(entangle) + 40. * Sin(angle * bj_DEGTORAD);
	effect ef;
	group g;
	unit Picked;
	unit dammi;
	if (stage > 0) {
		stage[stage - 1] = stage - 1;
		SaveInteger(udg_hash, h, 2, stage);
		if (IsTerrainPathable(x, y, PATHING_TYPE_FLYABILITY) == false) {
			SetUnitPosition(entangle, x, y);
		}
	else
		p[GetOwningPlayer(entangle)] = GetOwningPlayer(entangle);
		g[CreateGroup()] = CreateGroup();
		GroupEnumUnitsInRange(g, x, y, 250., null);
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
				dammi[CreateUnit(p, 'h00U', x, y, .0)] = CreateUnit(p, 'h00U', x, y, .0);
				UnitApplyTimedLife(dammi, 'BTLF', 1.);
				UnitAddAbility(dammi, 'A096');
				IssueTargetOrderById(dammi, $D008A, Picked);
				dammi[null] = null;
			}
			GroupRemoveUnit(g, Picked);
		}
		GroupClear(g);
		DestroyGroup(g);
		g[null] = null;
		Picked[null] = null;
		p[null] = null;
		ef[LoadEffectHandle(udg_hash, h, 4)] = LoadEffectHandle(udg_hash, h, 4);
		DestroyEffect(ef);
		ef[null] = null;
		KillUnit(entangle);
		entangle[null] = null;
		DestroyTimer(t);
	}
	t[null] = null;
	entangle[null] = null;
}
void Trig_Boss_Troll_Entangle_Throw_Actions() {
	unit caster = GetSpellAbilityUnit();
	location loc = GetSpellTargetLoc();
	float ux = GetUnitX(caster);
	float uy = GetUnitY(caster);
	float x = GetLocationX(loc);
	float y = GetLocationY(loc);
	float angle = bj_RADTODEG * Atan2(y - uy, x - ux);
	int stage = R2I(SquareRoot((x - ux) * (x - ux) + (y - uy) * (y - uy)) / 40.);
	timer t = CreateTimer();
	int h = GetHandleId(t);
	unit entangle = CreateUnit(GetOwningPlayer(caster), 'h00U', ux + 25. * Cos(angle * bj_DEGTORAD), uy + 25. * Sin(angle * bj_DEGTORAD), angle);
	effect ef = AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Ensnare\\EnsnareMissile.mdl", entangle, "chest");
	SetUnitScale(entangle, 2., 2., 2.);
	UnitAddAbility(entangle, 'Amrf');
	UnitRemoveAbility(entangle, 'Amrf');
	SetUnitFlyHeight(entangle, 50., .0);
	SetUnitFlyHeight(entangle, .0, .04 * stage);
	SaveReal(udg_hash, h, 1, angle);
	SaveInteger(udg_hash, h, 2, stage);
	SaveUnitHandle(udg_hash, h, 3, entangle);
	SaveEffectHandle(udg_hash, h, 4, ef);
	TimerStart(t, .04, true, Trig_Boss_Troll_Entangle_Throw_periodic_Actions);
	caster[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	t[null] = null;
	entangle[null] = null;
	ef[null] = null;
}
bool Trig_Boss_Troll_Entangle_Throw_Conditions() {
	return GetSpellAbilityId() == 'A0E8';
}
void InitTrig_Boss_Troll_Entangle_Throw() {
	int index = 0;
	gg_trg_Boss_Troll_Entangle_Throw[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Boss_Troll_Entangle_Throw, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Boss_Troll_Entangle_Throw, Condition(Trig_Boss_Troll_Entangle_Throw_Conditions));
	TriggerAddAction(gg_trg_Boss_Troll_Entangle_Throw, Trig_Boss_Troll_Entangle_Throw_Actions);
}
bool Trig_Use_Berserk_and_BerserkBoss_Conditions() {
	return (udg_Nomer_samoi_volni == 6);
}
bool Trig_Use_Berserk_and_BerserkBoss_Func002C() {
	return (GetUnitAbilityLevelSwapped('A098', GetTriggerUnit()) > 0) && (GetRandomInt(1, 2) == 1) && (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group));
}
bool Trig_Use_Berserk_and_BerserkBoss_Func003C() {
	return (GetUnitAbilityLevelSwapped('A098', GetAttacker()) > 0) && (GetRandomInt(1, 2) == 1) && (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group));
}
bool Trig_Use_Berserk_and_BerserkBoss_Func004C() {
	return (GetUnitAbilityLevelSwapped('A0EC', GetTriggerUnit()) > 0) && (GetRandomInt(1, 2) == 1) && (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group));
}
bool Trig_Use_Berserk_and_BerserkBoss_Func005C() {
	return (GetUnitAbilityLevelSwapped('A0EC', GetAttacker()) > 0) && (GetRandomInt(1, 2) == 1) && (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group));
}
void Trig_Use_Berserk_and_BerserkBoss_Actions() {
	if ((Trig_Use_Berserk_and_BerserkBoss_Func002C())) {
		IssueImmediateOrderById(GetTriggerUnit(), $D0084);
	}
	if ((Trig_Use_Berserk_and_BerserkBoss_Func003C())) {
		IssueImmediateOrderById(GetAttacker(), $D0084);
	}
	if ((Trig_Use_Berserk_and_BerserkBoss_Func004C())) {
		IssueImmediateOrderById(GetTriggerUnit(), $D0084);
	}
	if ((Trig_Use_Berserk_and_BerserkBoss_Func005C())) {
		IssueImmediateOrderById(GetAttacker(), $D0084);
	}
}
void InitTrig_Use_Berserk_and_BerserkBoss() {
	gg_trg_Use_Berserk_and_BerserkBoss[CreateTrigger()] = CreateTrigger();
	TriggerRegisterAnyUnitEventBJ(gg_trg_Use_Berserk_and_BerserkBoss, EVENT_PLAYER_UNIT_ATTACKED);
	TriggerAddCondition(gg_trg_Use_Berserk_and_BerserkBoss, Condition(Trig_Use_Berserk_and_BerserkBoss_Conditions));
	TriggerAddAction(gg_trg_Use_Berserk_and_BerserkBoss, Trig_Use_Berserk_and_BerserkBoss_Actions);
}
bool Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Conditions() {
	return (udg_Nomer_samoi_volni == 6);
}
bool Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002001002() {
	return (IsPlayerInForce(GetOwningPlayer(GetFilterUnit()), udg_Players_Enemy_Group));
}
bool Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
bool Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003002001001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
bool Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003002001002() {
	return (GetUnitStateSwap(UNIT_STATE_LIFE, GetFilterUnit()) < (GetUnitStateSwap(UNIT_STATE_MAX_LIFE, GetFilterUnit()) * .9));
}
bool Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003002001() {
	return GetBooleanAnd(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003002001001(), Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003002001002());
}
bool Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003002002() {
	return (IsPlayerAlly(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
bool Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003002() {
	return GetBooleanAnd(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003002001(), Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003002002());
}
bool Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003() {
	return GetBooleanAnd(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003001(), Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003002());
}
bool Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func002C() {
	return (udg_Temp_Unit != null);
}
bool Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001C() {
	return (GetUnitAbilityLevelSwapped('A097', GetEnumUnit()) > 0);
}
bool Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
bool Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003002001001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
bool Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003002001002() {
	return (GetUnitStateSwap(UNIT_STATE_LIFE, GetFilterUnit()) < (GetUnitStateSwap(UNIT_STATE_MAX_LIFE, GetFilterUnit()) * .6));
}
bool Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003002001() {
	return GetBooleanAnd(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003002001001(), Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003002001002());
}
bool Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003002002() {
	return (IsPlayerAlly(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
bool Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003002() {
	return GetBooleanAnd(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003002001(), Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003002002());
}
bool Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003() {
	return GetBooleanAnd(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003001(), Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003002());
}
bool Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func002C() {
	return (udg_Temp_Unit != null);
}
bool Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002C() {
	return (GetUnitAbilityLevelSwapped('A099', GetEnumUnit()) > 0) && (GetRandomInt(1, 2) == 1);
}
bool Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003Func001002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
bool Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003Func001002001003002001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
bool Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003Func001002001003002002() {
	return (IsPlayerAlly(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
bool Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003Func001002001003002() {
	return GetBooleanAnd(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003Func001002001003002001(), Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003Func001002001003002002());
}
bool Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003Func001002001003() {
	return GetBooleanAnd(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003Func001002001003001(), Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003Func001002001003002());
}
bool Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003Func002C() {
	return (udg_Temp_Unit != null);
}
bool Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003C() {
	return (GetUnitAbilityLevelSwapped('A09C', GetEnumUnit()) > 0) && (GetRandomInt(1, 2) == 1);
}
bool Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004Func001002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
bool Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004Func001002001003002001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
bool Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004Func001002001003002002() {
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
bool Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004Func001002001003002() {
	return GetBooleanAnd(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004Func001002001003002001(), Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004Func001002001003002002());
}
bool Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004Func001002001003() {
	return GetBooleanAnd(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004Func001002001003001(), Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004Func001002001003002());
}
bool Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004Func002C() {
	return (udg_Temp_Unit != null);
}
bool Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004C() {
	return (GetUnitAbilityLevelSwapped('A0E8', GetEnumUnit()) > 0) && (GetRandomInt(1, 2) == 1);
}
void Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002A() {
	if ((Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001C())) {
		udg_Temp_Unit[GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(500., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003)))] = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(500., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003)));
		if ((Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func002C())) {
			IssueTargetOrderById(GetEnumUnit(), $D005F, udg_Temp_Unit);
		}
	}
	if ((Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002C())) {
		udg_Temp_Unit[GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(700., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003)))] = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(700., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003)));
		if ((Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func002C())) {
			IssueTargetOrderById(GetEnumUnit(), $D0215, udg_Temp_Unit);
		}
	}
	if ((Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003C())) {
		udg_Temp_Unit[GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(700., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003Func001002001003)))] = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(700., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003Func001002001003)));
		if ((Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003Func002C())) {
			IssueTargetOrderById(GetEnumUnit(), $D0062, udg_Temp_Unit);
		}
	}
	if ((Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004C())) {
		udg_Temp_Unit[GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(800., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004Func001002001003)))] = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(800., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004Func001002001003)));
		if ((Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004Func002C())) {
			IssuePointOrderById(GetEnumUnit(), $D0079, GetUnitX(udg_Temp_Unit), GetUnitY(udg_Temp_Unit));
		}
	}
}
void Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Actions() {
	ForGroupBJ(GetUnitsInRectMatching(bj_mapInitialPlayableArea, Condition(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002001002)), Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002A);
}
void InitTrig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle() {
	gg_trg_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventPeriodic(gg_trg_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle, 1.);
	TriggerAddCondition(gg_trg_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle, Condition(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Conditions));
	TriggerAddAction(gg_trg_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle, Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Actions);
}
void Trig_Aspect_of_Magic_Protection_Move_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit target = LoadUnitHandle(udg_hash, GetHandleId(t), 1);
	SaveTimerHandle(udg_hash, GetHandleId(target), $A6, null);
	SaveBoolean(udg_hash, GetHandleId(target), $A5, false);
	DestroyEffect(LoadEffectHandle(udg_hash, h, 2));
	DestroyTimer(t);
	FlushChildHashtable(udg_hash, h);
	t[null] = null;
	target[null] = null;
}
void Trig_Aspect_of_Magic_Protection_Actions() {
	unit target = GetSpellTargetUnit();
	timer t = LoadTimerHandle(udg_hash, GetHandleId(target), $A6);
	int h = GetHandleId(t);
	if (t == null) {
		t[CreateTimer()] = CreateTimer();
		h[GetHandleId(t)] = GetHandleId(t);
		SaveTimerHandle(udg_hash, GetHandleId(target), $A6, t);
		SaveBoolean(udg_hash, GetHandleId(target), $A5, true);
	else
		DestroyEffect(LoadEffectHandle(udg_hash, GetHandleId(t), 2));
	}
	SaveUnitHandle(udg_hash, h, 1, target);
	SaveEffectHandle(udg_hash, h, 2, AddSpecialEffectTarget("Effects\\MagicShieldBlue.mdx", target, "origin"));
	TimerStart(t, 6., false, Trig_Aspect_of_Magic_Protection_Move_Actions);
	t[null] = null;
	target[null] = null;
}
bool Trig_Aspect_of_Magic_Protection_Conditions() {
	return GetSpellAbilityId() == 'A09J';
}
void InitTrig_Aspect_of_Magic_Protection() {
	int index = 0;
	gg_trg_Aspect_of_Magic_Protection[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Aspect_of_Magic_Protection, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Aspect_of_Magic_Protection, Condition(Trig_Aspect_of_Magic_Protection_Conditions));
	TriggerAddAction(gg_trg_Aspect_of_Magic_Protection, Trig_Aspect_of_Magic_Protection_Actions);
}
void Trig_Remove_Effects_From_Bosses_Actions() {
	int h = GetHandleId(GetDyingUnit());
	if (LoadEffectHandle(udg_hash, h, $A8) != null) {
		DestroyEffect(LoadEffectHandle(udg_hash, h, $A8));
	}
	if (LoadEffectHandle(udg_hash, h, $A9) != null) {
		DestroyEffect(LoadEffectHandle(udg_hash, h, $A9));
	}
}
bool Trig_Remove_Effects_From_Bosses_Conditions() {
	return GetUnitAbilityLevel(GetDyingUnit(), 'A09L') > 0;
}
void InitTrig_Remove_Effects_From_Bosses() {
	int index = 0;
	gg_trg_Remove_Effects_From_Bosses[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Remove_Effects_From_Bosses, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Remove_Effects_From_Bosses, Condition(Trig_Remove_Effects_From_Bosses_Conditions));
	TriggerAddAction(gg_trg_Remove_Effects_From_Bosses, Trig_Remove_Effects_From_Bosses_Actions);
}
void Trig_Metka_Dreneev_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	unit Picked;
	player p = GetOwningPlayer(caster);
	group g = CreateGroup();
	GroupEnumUnitsInRange(g, GetUnitX(target), GetUnitY(target), 1000., null);
	GroupRemoveUnit(g, caster);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitAlly(Picked, p) && GetUnitTypeId(Picked) != 'h00U') {
			IssueTargetOrderById(Picked, $D000F, target);
			if (GetUnitAbilityLevel(Picked, 'A0FC') > 0) {
				IssueTargetOrderById(Picked, $D02B2, target);
			}
		}
		GroupRemoveUnit(g, Picked);
	}
	caster[null] = null;
	target[null] = null;
	p[null] = null;
	DestroyGroup(g);
	g[null] = null;
	Picked[null] = null;
}
bool Trig_Metka_Dreneev_Conditions() {
	return GetSpellAbilityId() == 'A0FA';
}
void InitTrig_Metka_Dreneev() {
	int index = 0;
	gg_trg_Metka_Dreneev[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Metka_Dreneev, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Metka_Dreneev, Condition(Trig_Metka_Dreneev_Conditions));
	TriggerAddAction(gg_trg_Metka_Dreneev, Trig_Metka_Dreneev_Actions);
}
void Trig_Fast_Attack_Move_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	unit target = LoadUnitHandle(udg_hash, h, 4);
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	float xt = GetUnitX(target);
	float yt = GetUnitY(target);
	float angle = bj_RADTODEG * Atan2(yt - y, xt - x);
	float dist = SquareRoot((xt - x) * (xt - x) + (yt - y) * (yt - y));
	int wait = LoadInteger(udg_hash, h, 2);
	if (dist > 100. && GetUnitState(target, UNIT_STATE_LIFE) > .405 && GetUnitState(caster, UNIT_STATE_LIFE) > .405) {
		SetUnitPosition(caster, x + 20. * Cos((angle) * bj_DEGTORAD), y + 20. * Sin((angle) * bj_DEGTORAD));
		wait[wait + 1] = wait + 1;
		SaveInteger(udg_hash, h, 2, wait);
		if (wait == 1) {
			SetUnitAnimationByIndex(caster, 2);
		}
	else
		if (GetUnitState(caster, UNIT_STATE_LIFE) > .405) {
			if (GetUnitState(target, UNIT_STATE_LIFE) > .405) {
				IssueTargetOrderById(caster, $D000F, target);
			}
			SetUnitAnimation(caster, "stand");
		}
		SetUnitPathing(caster, true);
		SetUnitTimeScale(caster, 1.);
		DestroyEffect(LoadEffectHandle(udg_hash, h, 8));
		DestroyEffect(LoadEffectHandle(udg_hash, h, 9));
		DestroyEffect(LoadEffectHandle(udg_hash, h, $A));
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	target[null] = null;
	caster[null] = null;
}
void Trig_Fast_Attack_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	timer t = CreateTimer();
	int h = GetHandleId(t);
	effect ef;
	SetUnitAnimation(caster, "stand");
	SetUnitPathing(caster, false);
	SetUnitAnimationByIndex(caster, 2);
	SetUnitTimeScale(caster, 2.);
	ef[AddSpecialEffectTarget("Abilities\\Spells\\Other\\Tornado\\Tornado_Target.mdl", caster, "origin")] = AddSpecialEffectTarget("Abilities\\Spells\\Other\\Tornado\\Tornado_Target.mdl", caster, "origin");
	SaveEffectHandle(udg_hash, h, 8, ef);
	ef[null] = null;
	ef[AddSpecialEffectTarget("Abilities\\Spells\\Other\\Tornado\\Tornado_Target.mdl", caster, "chest")] = AddSpecialEffectTarget("Abilities\\Spells\\Other\\Tornado\\Tornado_Target.mdl", caster, "chest");
	SaveEffectHandle(udg_hash, h, 9, ef);
	ef[null] = null;
	ef[AddSpecialEffectTarget("Abilities\\Spells\\Other\\Tornado\\Tornado_Target.mdl", caster, "head")] = AddSpecialEffectTarget("Abilities\\Spells\\Other\\Tornado\\Tornado_Target.mdl", caster, "head");
	SaveEffectHandle(udg_hash, h, $A, ef);
	ef[null] = null;
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveUnitHandle(udg_hash, h, 4, target);
	SaveInteger(udg_hash, h, 2, 0);
	TimerStart(t, .03, true, Trig_Fast_Attack_Move_Actions);
	caster[null] = null;
	target[null] = null;
	t[null] = null;
}
bool Trig_Fast_Attack_Conditions() {
	return GetSpellAbilityId() == 'A0FC';
}
void InitTrig_Fast_Attack() {
	int index = 0;
	gg_trg_Fast_Attack[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Fast_Attack, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Fast_Attack, Condition(Trig_Fast_Attack_Conditions));
	TriggerAddAction(gg_trg_Fast_Attack, Trig_Fast_Attack_Actions);
}
void Trig_Bash_Attack_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	timer t = CreateTimer();
	int h = GetHandleId(t);
	effect ef;
	if (GetUnitTypeId(caster) == 'n016') {
		StunUnitTimed(target, 1.);
		UnitDamageTarget(caster, target, 75., false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
	}
	if (GetUnitTypeId(caster) == 'n018') {
		StunUnitTimed(target, 1.5);
		UnitDamageTarget(caster, target, 125., false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
	}
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\StormBolt\\StormBoltMissile.mdl", target, "chest"));
	caster[null] = null;
	target[null] = null;
	t[null] = null;
}
bool Trig_Bash_Attack_Conditions() {
	return GetSpellAbilityId() == 'A0FD';
}
void InitTrig_Bash_Attack() {
	int index = 0;
	gg_trg_Bash_Attack[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Bash_Attack, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Bash_Attack, Condition(Trig_Bash_Attack_Conditions));
	TriggerAddAction(gg_trg_Bash_Attack, Trig_Bash_Attack_Actions);
}
bool Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Dead_Condition() {
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) < .405) && (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) && (GetUnitTypeId(GetFilterUnit()) != 'h00U')) != null;
}
bool Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Loop_Is_Enemy_Condition() {
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405) && (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) && (IsPlayerEnemy(udg_Temp_Player[1], GetOwningPlayer(GetFilterUnit())))) != null;
}
bool Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Loop_Is_Ally_Condition() {
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE) > .405) && (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) && (IsPlayerAlly(udg_Temp_Player[1], GetOwningPlayer(GetFilterUnit())))) != null;
}
bool Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_All_Condition() {
	return (IsPlayerInForce(GetOwningPlayer(GetFilterUnit()), udg_Players_Enemy_Group));
}
void Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Actions() {
	group gall = CreateGroup();
	group g;
	group g2;
	unit Picked;
	unit target;
	float x;
	float y;
	float angle;
	GroupEnumUnitsInRect(gall, bj_mapInitialPlayableArea, Condition(Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_All_Condition));
	g[CreateGroup()] = CreateGroup();
	GroupToGroup(gall, g);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A09J') > 0) && GetRandomInt(1, 2) == 1) {
			g2[CreateGroup()] = CreateGroup();
			x[GetUnitX(Picked)] = GetUnitX(Picked);
			y[GetUnitY(Picked)] = GetUnitY(Picked);
			udg_Temp_Player[GetOwningPlayer(Picked)] = GetOwningPlayer(Picked);
			GroupEnumUnitsInRange(g2, x, y, 700., Condition(Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Loop_Is_Ally_Condition));
			RandomUnitFromGroup(1, g2);
			g2[CreateGroup()] = CreateGroup();
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			target[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D0113, target);
			}
			udg_Temp_Player[null] = null;
			GroupClear(g2);
			DestroyGroup(g2);
			g2[null] = null;
			target[null] = null;
		}
		GroupRemoveUnit(g, Picked);
	}
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	g[CreateGroup()] = CreateGroup();
	GroupToGroup(gall, g);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A09H') > 0) && GetRandomInt(1, 2) == 1) {
			g2[CreateGroup()] = CreateGroup();
			x[GetUnitX(Picked)] = GetUnitX(Picked);
			y[GetUnitY(Picked)] = GetUnitY(Picked);
			udg_Temp_Player[GetOwningPlayer(Picked)] = GetOwningPlayer(Picked);
			GroupEnumUnitsInRange(g2, x, y, 600., Condition(Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Loop_Is_Ally_Condition));
			RandomUnitFromGroup(1, g2);
			g2[CreateGroup()] = CreateGroup();
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			target[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D0085, target);
			}
			udg_Temp_Player[null] = null;
			GroupClear(g2);
			DestroyGroup(g2);
			g2[null] = null;
			target[null] = null;
		}
		GroupRemoveUnit(g, Picked);
	}
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	g[CreateGroup()] = CreateGroup();
	GroupToGroup(gall, g);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A0FA') > 0) && GetRandomInt(1, 2) == 1) {
			g2[CreateGroup()] = CreateGroup();
			x[GetUnitX(Picked)] = GetUnitX(Picked);
			y[GetUnitY(Picked)] = GetUnitY(Picked);
			udg_Temp_Player[GetOwningPlayer(Picked)] = GetOwningPlayer(Picked);
			GroupEnumUnitsInRange(g2, x, y, 1000., Condition(Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			g2[CreateGroup()] = CreateGroup();
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			target[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D00B5, target);
			}
			udg_Temp_Player[null] = null;
			GroupClear(g2);
			DestroyGroup(g2);
			g2[null] = null;
			target[null] = null;
		}
		GroupRemoveUnit(g, Picked);
	}
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	g[CreateGroup()] = CreateGroup();
	GroupToGroup(gall, g);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A0FD') > 0) && GetRandomInt(1, 2) == 1) {
			g2[CreateGroup()] = CreateGroup();
			x[GetUnitX(Picked)] = GetUnitX(Picked);
			y[GetUnitY(Picked)] = GetUnitY(Picked);
			udg_Temp_Player[GetOwningPlayer(Picked)] = GetOwningPlayer(Picked);
			GroupEnumUnitsInRange(g2, x, y, 250., Condition(Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			g2[CreateGroup()] = CreateGroup();
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			target[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D0077, target);
			}
			udg_Temp_Player[null] = null;
			GroupClear(g2);
			DestroyGroup(g2);
			g2[null] = null;
			target[null] = null;
		}
		GroupRemoveUnit(g, Picked);
	}
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	g[CreateGroup()] = CreateGroup();
	GroupToGroup(gall, g);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if ((GetUnitAbilityLevel(Picked, 'A0FC') > 0) && GetRandomInt(1, 2) == 1) {
			g2[CreateGroup()] = CreateGroup();
			x[GetUnitX(Picked)] = GetUnitX(Picked);
			y[GetUnitY(Picked)] = GetUnitY(Picked);
			udg_Temp_Player[GetOwningPlayer(Picked)] = GetOwningPlayer(Picked);
			GroupEnumUnitsInRange(g2, x, y, 1200., Condition(Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Loop_Is_Enemy_Condition));
			RandomUnitFromGroup(1, g2);
			g2[CreateGroup()] = CreateGroup();
			GroupToGroup(udg_GroupRandomUnitFromGroup, g2);
			target[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if ((target != null)) {
				IssueTargetOrderById(Picked, $D02B2, target);
			}
			udg_Temp_Player[null] = null;
			GroupClear(g2);
			DestroyGroup(g2);
			g2[null] = null;
			target[null] = null;
		}
		GroupRemoveUnit(g, Picked);
	}
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	GroupClear(gall);
	DestroyGroup(gall);
	gall[null] = null;
}
bool Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Conditions() {
	return (udg_Nomer_samoi_volni == 7);
}
void InitTrig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack() {
	gg_trg_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEvent(gg_trg_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack, 1., true);
	TriggerAddCondition(gg_trg_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack, Condition(Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Conditions));
	TriggerAddAction(gg_trg_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack, Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Actions);
}
void Trig_Blink_Strike_Remove_Buff_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	effect ef;
	ef[LoadEffectHandle(udg_hash, h, 2)] = LoadEffectHandle(udg_hash, h, 2);
	DestroyEffect(ef);
	ef[null] = null;
	ef[LoadEffectHandle(udg_hash, h, 3)] = LoadEffectHandle(udg_hash, h, 3);
	DestroyEffect(ef);
	ef[null] = null;
	SetAttackSpeedAbilityLevel(caster, -$C8);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
}
void Trig_Blink_Strike_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	float xt = GetUnitX(target);
	float yt = GetUnitY(target);
	float angle = bj_RADTODEG * Atan2((yt - y), (xt - x));
	timer t = CreateTimer();
	int h = GetHandleId(t);
	unit dammi = CreateUnit(GetOwningPlayer(caster), 'h00U', x, y, .0);
	effect ef;
	SetAttackSpeedAbilityLevel(caster, $C8);
	SetUnitPosition(caster, xt - 75. * Cos(angle * bj_DEGTORAD), yt - 75. * Sin(angle * bj_DEGTORAD));
	IssueTargetOrderById(caster, $D000F, target);
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayDamage.mdl", target, "origin"));
	ef[AddSpecialEffectTarget("Abilities\\Weapons\\DruidoftheTalonMissile\\DruidoftheTalonMissile.mdl", caster, "hand,left")] = AddSpecialEffectTarget("Abilities\\Weapons\\DruidoftheTalonMissile\\DruidoftheTalonMissile.mdl", caster, "hand,left");
	SaveEffectHandle(udg_hash, h, 2, ef);
	ef[null] = null;
	ef[AddSpecialEffectTarget("Abilities\\Weapons\\DruidoftheTalonMissile\\DruidoftheTalonMissile.mdl", caster, "weapon")] = AddSpecialEffectTarget("Abilities\\Weapons\\DruidoftheTalonMissile\\DruidoftheTalonMissile.mdl", caster, "weapon");
	SaveEffectHandle(udg_hash, h, 3, ef);
	ef[null] = null;
	SaveUnitHandle(udg_hash, h, 1, caster);
	TimerStart(t, 2., false, Trig_Blink_Strike_Remove_Buff_Actions);
	caster[null] = null;
	caster[null] = null;
	t[null] = null;
}
bool Trig_Blink_Strike_Conditions() {
	return GetSpellAbilityId() == 'A09P';
}
void InitTrig_Blink_Strike() {
	int index = 0;
	gg_trg_Blink_Strike[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Blink_Strike, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Blink_Strike, Condition(Trig_Blink_Strike_Conditions));
	TriggerAddAction(gg_trg_Blink_Strike, Trig_Blink_Strike_Actions);
}
void Trig_Victim_Search_Stand2_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	int addas = LoadInteger(udg_hash, h, 2);
	if (GetUnitState(caster, UNIT_STATE_LIFE) > .405 && caster != null) {
		SetAttackSpeedAbilityLevel(caster, -addas);
	}
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
	caster[null] = null;
}
void Trig_Victim_Search_Stand_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	int addas = LoadInteger(udg_hash, h, 2);
	unit dammi = CreateUnit(GetOwningPlayer(caster), 'h00U', GetUnitX(caster), GetUnitY(caster), 270.);
	float wait = 10.;
	if (GetUnitState(caster, UNIT_STATE_LIFE) > .405 && caster != null) {
		PauseUnit(caster, false);
	}
	if (GetUnitState(caster, UNIT_STATE_LIFE) > .405) {
		SetUnitAnimation(caster, "stand");
	else
		SetUnitAnimation(caster, "death");
	}
	UnitRemoveAbility(caster, 'A0HD');
	SetArmorAbilityLevel(caster, 30);
	SetAttackSpeedAbilityLevel(caster, addas);
	UnitApplyTimedLife(dammi, 'BTLF', 1.);
	UnitAddAbility(dammi, 'A0HE');
	IssueTargetOrderById(dammi, $D0085, caster);
	if (IsPlayerInForce(GetOwningPlayer(caster), udg_Players_Enemy_Group)) {
		IssuePointOrderById(caster, $D000F, GetRectCenterX(gg_rct_cast_magi), GetRectCenterY(gg_rct_cast_magi));
	}
	TimerStart(t, wait, false, Trig_Victim_Search_Stand2_Actions);
	t[null] = null;
	caster[null] = null;
	dammi[null] = null;
}
void Trig_Victim_Search_Actions() {
	unit caster = GetSpellAbilityUnit();
	timer t = CreateTimer();
	int h = GetHandleId(t);
	int addas = 80;
	float wait = 2.4;
	PauseUnit(caster, true);
	SetUnitAnimation(caster, "stand");
	SetUnitAnimationByIndex(caster, 1);
	UnitAddAbility(caster, 'A0HD');
	SetArmorAbilityLevel(caster, -30);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveInteger(udg_hash, h, 2, addas);
	TimerStart(t, wait, false, Trig_Victim_Search_Stand_Actions);
	caster[null] = null;
	t[null] = null;
}
bool Trig_Victim_Search_Conditions() {
	return GetSpellAbilityId() == 'A0HC';
}
void InitTrig_Victim_Search() {
	int index = 0;
	gg_trg_Victim_Search[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Victim_Search, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Victim_Search, Condition(Trig_Victim_Search_Conditions));
	TriggerAddAction(gg_trg_Victim_Search, Trig_Victim_Search_Actions);
}
void Trig_Black_Hole_Periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	float damage = LoadReal(udg_hash, h, 2);
	unit dammi = LoadUnitHandle(udg_hash, h, 3);
	int wait = LoadInteger(udg_hash, h, 5);
	group gdamage = LoadGroupHandle(udg_hash, h, 6);
	float angledammi = LoadReal(udg_hash, h, 7);
	float xstart = LoadReal(udg_hash, h, 8);
	float ystart = LoadReal(udg_hash, h, 9);
	float periodicdamage = LoadReal(udg_hash, h, 35);
	effect ef;
	group g = CreateGroup();
	float x = GetUnitX(dammi);
	float y = GetUnitY(dammi);
	float xt;
	float yt;
	float xt2;
	float yt2;
	float xdammi;
	float ydammi;
	float dist;
	float angle;
	player p = GetOwningPlayer(dammi);
	unit Picked;
	int lopa = 0;
	unit dammief;
	if (wait >= 0) {
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 5, wait);
		angledammi[angledammi + 5.5] = angledammi + 5.5;
		SaveReal(udg_hash, h, 7, angledammi);
		while (true) {
			if (lopa > $A) break;
			dammief[LoadUnitHandle(udg_hash, h, lopa + $A)] = LoadUnitHandle(udg_hash, h, lopa + $A);
			if (IsTerrainPathable(xstart + 500. * Cos((angledammi + 36. * lopa) * bj_DEGTORAD), ystart + 500. * Sin((angledammi + 36. * lopa) * bj_DEGTORAD), PATHING_TYPE_FLYABILITY) == false) {
				SetUnitPosition(dammief, xstart + 500. * Cos((angledammi + 36. * lopa) * bj_DEGTORAD), ystart + 500. * Sin((angledammi + 36. * lopa) * bj_DEGTORAD));
			}
			SetUnitFacing(dammief, angledammi + 90.);
			dammief[null] = null;
			lopa[lopa + 1] = lopa + 1;
		}
		xdammi[xstart + 50. * Cos(angledammi * bj_DEGTORAD)] = xstart + 50. * Cos(angledammi * bj_DEGTORAD);
		ydammi[ystart + 50. * Sin(angledammi * bj_DEGTORAD)] = ystart + 50. * Sin(angledammi * bj_DEGTORAD);
		if (IsTerrainPathable(xdammi, ydammi, PATHING_TYPE_FLYABILITY) == false) {
			SetUnitPosition(dammi, xdammi, ydammi);
		}
		GroupEnumUnitsInRange(g, x, y, 500., null);
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if ((IsUnitInGroup(Picked, udg_PortalCastersMagi) == false) && GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, p) && IsUnitInGroup(Picked, udg_PortalCastersMagi) == false && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				xt[GetUnitX(Picked)] = GetUnitX(Picked);
				yt[GetUnitY(Picked)] = GetUnitY(Picked);
				dist[SquareRoot((xt - xstart) * (xt - xstart) + (yt - ystart) * (yt - ystart))] = SquareRoot((xt - xstart) * (xt - xstart) + (yt - ystart) * (yt - ystart));
				angle[bj_RADTODEG * Atan2(ystart - yt, xstart - xt)] = bj_RADTODEG * Atan2(ystart - yt, xstart - xt);
				xt2[xt + (1.5 + ((500 - dist) / $96)) * Cos(angle * bj_DEGTORAD)] = xt + (1.5 + ((500 - dist) / $96)) * Cos(angle * bj_DEGTORAD);
				yt2[yt + (1.5 + ((500 - dist) / $96)) * Sin(angle * bj_DEGTORAD)] = yt + (1.5 + ((500 - dist) / $96)) * Sin(angle * bj_DEGTORAD);
				if (IsTerrainPathable(xt2, yt2, PATHING_TYPE_FLYABILITY) == false && dist > 50) {
					SetUnitX(Picked, xt2);
					SetUnitY(Picked, yt2);
				}
				if (dist < 'd' && IsUnitInGroup(Picked, gdamage) == false) {
					UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
					StunUnitTimed(Picked, 3.25);
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathCoil\\DeathCoilSpecialArt.mdl", Picked, "chest"));
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\CarrionSwarm\\CarrionSwarmDamage.mdl", Picked, "chest"));
					GroupAddUnit(gdamage, Picked);
				}
				if (dist < 'd') {
					UnitDamageTarget(caster, Picked, periodicdamage * .03, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				}
			}
			GroupRemoveUnit(g, Picked);
		}
		SaveGroupHandle(udg_hash, h, 6, gdamage);
	else
		if (wait == -1) {
			ef[LoadEffectHandle(udg_hash, h, 4)] = LoadEffectHandle(udg_hash, h, 4);
			DestroyEffect(ef);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathCoil\\DeathCoilSpecialArt.mdl", dammi, "origin"));
			lopa[0] = 0;
			while (true) {
				if (lopa > $A) break;
				dammief[LoadUnitHandle(udg_hash, h, lopa + $A)] = LoadUnitHandle(udg_hash, h, lopa + $A);
				ef[LoadEffectHandle(udg_hash, h, lopa + 20)] = LoadEffectHandle(udg_hash, h, lopa + 20);
				DestroyEffect(ef);
				RemoveUnit(dammief);
				dammief[null] = null;
				ef[null] = null;
				lopa[lopa + 1] = lopa + 1;
			}
		}
		if (wait >= -66) {
			wait[wait - 1] = wait - 1;
			SaveInteger(udg_hash, h, 5, wait);
		else
			FlushChildHashtable(udg_hash, h);
			DestroyTimer(t);
			GroupClear(gdamage);
			DestroyGroup(gdamage);
			RemoveUnit(dammi);
		}
	}
	t[null] = null;
	caster[null] = null;
	dammi[null] = null;
	ef[null] = null;
	gdamage[null] = null;
	Picked[null] = null;
	p[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
}
void Trig_Black_Hole_Actions() {
	unit caster = GetSpellAbilityUnit();
	location loc = GetSpellTargetLoc();
	float x = GetLocationX(loc);
	float y = GetLocationY(loc);
	timer t = CreateTimer();
	int h = GetHandleId(t);
	float damage = 500.;
	float periodicdamage = 150.;
	int wait = R2I($A / .03);
	unit dammi = CreateUnit(GetOwningPlayer(caster), 'h00U', x + 50., y + 50., 270.);
	float angledammi = 270.;
	effect ef = AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DarkSummoning\\DarkSummonMissile.mdl", dammi, "chest");
	group gdamage = CreateGroup();
	unit dammief;
	effect dammieffect;
	int lopa = 0;
	while (true) {
		if (lopa > $A) break;
		dammief[CreateUnit(GetOwningPlayer(caster), 'h00U', x + 500. * Cos(36. * lopa * bj_DEGTORAD), y + 500. * Sin(36. * lopa * bj_DEGTORAD), (36. * lopa) + 90.)] = CreateUnit(GetOwningPlayer(caster), 'h00U', x + 500. * Cos(36. * lopa * bj_DEGTORAD), y + 500. * Sin(36. * lopa * bj_DEGTORAD), (36. * lopa) + 90.);
		dammieffect[AddSpecialEffectTarget("Effects\\DarkVortex2.mdl", dammief, "chest")] = AddSpecialEffectTarget("Effects\\DarkVortex2.mdl", dammief, "chest");
		SetUnitScale(dammief, 1.5, 1.5, 1.5);
		SaveUnitHandle(udg_hash, h, $A + lopa, dammief);
		SaveEffectHandle(udg_hash, h, 20 + lopa, dammieffect);
		dammief[null] = null;
		dammieffect[null] = null;
		lopa[lopa + 1] = lopa + 1;
	}
	UnitAddAbility(dammi, 'Amrf');
	UnitRemoveAbility(dammi, 'Amrf');
	SetUnitFlyHeight(dammi, 200., .0);
	SetUnitScale(dammi, 2., 2., 2.);
	SetUnitTimeScale(dammi, 2.);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 2, damage);
	SaveUnitHandle(udg_hash, h, 3, dammi);
	SaveEffectHandle(udg_hash, h, 4, ef);
	SaveInteger(udg_hash, h, 5, wait);
	SaveGroupHandle(udg_hash, h, 6, gdamage);
	SaveReal(udg_hash, h, 7, angledammi);
	SaveReal(udg_hash, h, 8, x);
	SaveReal(udg_hash, h, 9, y);
	SaveReal(udg_hash, h, 35, periodicdamage);
	TimerStart(t, .03, true, Trig_Black_Hole_Periodic_Actions);
	caster[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	t[null] = null;
	dammi[null] = null;
	ef[null] = null;
	gdamage[null] = null;
}
bool Trig_Black_Hole_Conditions() {
	return GetSpellAbilityId() == 'A0HA';
}
void InitTrig_Black_Hole() {
	int index = 0;
	gg_trg_Black_Hole[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Black_Hole, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Black_Hole, Condition(Trig_Black_Hole_Conditions));
	TriggerAddAction(gg_trg_Black_Hole, Trig_Black_Hole_Actions);
}
bool Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Conditions() {
	return (udg_Nomer_samoi_volni == 8);
}
bool Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func002C() {
	return (GetUnitAbilityLevelSwapped('A09N', GetTriggerUnit()) > 0) && (GetRandomInt(1, 2) == 3) && (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group)) && (false);
}
bool Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func003C() {
	return (GetUnitAbilityLevelSwapped('A09N', GetAttacker()) > 0) && (GetRandomInt(1, 2) == 3) && (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group)) && (false);
}
bool Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func004C() {
	return (GetUnitAbilityLevelSwapped('A0H0', GetTriggerUnit()) > 0) && (GetRandomInt(1, 3) == 4) && (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group));
}
bool Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func005C() {
	return (GetUnitAbilityLevelSwapped('A0H0', GetAttacker()) > 0) && (GetRandomInt(1, 3) == 4) && (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group));
}
bool Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func006C() {
	return (GetUnitAbilityLevelSwapped('A0H7', GetTriggerUnit()) > 0) && (GetRandomInt(1, 2) == 3) && (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group));
}
bool Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func007C() {
	return (GetUnitAbilityLevelSwapped('A0H7', GetAttacker()) > 0) && (GetRandomInt(1, 2) == 3) && (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group));
}
bool Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func008C() {
	return (GetUnitAbilityLevelSwapped('A0HB', GetTriggerUnit()) > 0) && (GetRandomInt(1, 2) == 1) && (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group));
}
bool Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func009C() {
	return (GetUnitAbilityLevelSwapped('A0HB', GetAttacker()) > 0) && (GetRandomInt(1, 3) == 1) && (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group));
}
bool Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func010C() {
	return (GetUnitAbilityLevelSwapped('A09R', GetTriggerUnit()) > 0) && (GetRandomInt(1, 2) == 1) && (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group));
}
bool Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func011C() {
	return (GetUnitAbilityLevelSwapped('A09R', GetAttacker()) > 0) && (GetRandomInt(1, 2) == 1) && (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group));
}
void Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Actions() {
	if ((Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func002C())) {
		IssueTargetOrderById(GetTriggerUnit(), $D0201, GetAttacker());
	}
	if ((Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func003C())) {
		IssueTargetOrderById(GetAttacker(), $D0201, GetTriggerUnit());
	}
	if ((Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func004C())) {
		IssueTargetOrderById(GetTriggerUnit(), $D027C, GetAttacker());
	}
	if ((Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func005C())) {
		IssueTargetOrderById(GetAttacker(), $D027C, GetTriggerUnit());
	}
	if ((Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func006C())) {
		IssueTargetOrderById(GetTriggerUnit(), $D0244, GetAttacker());
	}
	if ((Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func007C())) {
		IssueTargetOrderById(GetAttacker(), $D0244, GetTriggerUnit());
	}
	if ((Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func008C())) {
		IssuePointOrderById(GetTriggerUnit(), $D00FD, GetUnitX(GetAttacker()), GetUnitY(GetAttacker()));
	}
	if ((Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func009C())) {
		IssuePointOrderById(GetAttacker(), $D00FD, GetUnitX(GetTriggerUnit()), GetUnitY(GetTriggerUnit()));
	}
	if ((Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func010C())) {
		IssueImmediateOrderById(GetTriggerUnit(), $D00C4);
	}
	if ((Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func011C())) {
		IssueImmediateOrderById(GetAttacker(), $D00C4);
	}
}
void InitTrig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar() {
	gg_trg_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar[CreateTrigger()] = CreateTrigger();
	TriggerRegisterAnyUnitEventBJ(gg_trg_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar, EVENT_PLAYER_UNIT_ATTACKED);
	TriggerAddCondition(gg_trg_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar, Condition(Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Conditions));
	TriggerAddAction(gg_trg_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar, Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Actions);
}
bool Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Conditions() {
	return (udg_Nomer_samoi_volni == 8);
}
bool Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002001002() {
	return (IsPlayerInForce(GetOwningPlayer(GetFilterUnit()), udg_Players_Enemy_Group));
}
bool Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001Func001002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
bool Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001Func001002001003002001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
bool Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001Func001002001003002002() {
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
bool Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001Func001002001003002() {
	return GetBooleanAnd(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001Func001002001003002001(), Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001Func001002001003002002());
}
bool Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001Func001002001003() {
	return GetBooleanAnd(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001Func001002001003001(), Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001Func001002001003002());
}
bool Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001Func002C() {
	return (udg_Temp_Unit != null);
}
bool Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001C() {
	return (GetUnitAbilityLevelSwapped('A09P', GetEnumUnit()) > 0);
}
bool Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func002Func001002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
bool Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func002Func001002001003002001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
bool Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func002Func001002001003002002() {
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
bool Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func002Func001002001003002() {
	return GetBooleanAnd(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func002Func001002001003002001(), Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func002Func001002001003002002());
}
bool Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func002Func001002001003() {
	return GetBooleanAnd(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func002Func001002001003001(), Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func002Func001002001003002());
}
bool Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func002C() {
	return (GetUnitAbilityLevelSwapped('A0H0', GetEnumUnit()) > 0) && (GetRandomInt(1, 3) == 4);
}
bool Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func003Func001002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
bool Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func003Func001002001003002001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
bool Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func003Func001002001003002002() {
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
bool Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func003Func001002001003002() {
	return GetBooleanAnd(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func003Func001002001003002001(), Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func003Func001002001003002002());
}
bool Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func003Func001002001003() {
	return GetBooleanAnd(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func003Func001002001003001(), Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func003Func001002001003002());
}
bool Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func003C() {
	return (GetUnitAbilityLevelSwapped('A0H1', GetEnumUnit()) > 0) && (GetRandomInt(1, 3) == 4);
}
bool Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004Func002002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
bool Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004Func002002001003002001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
bool Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004Func002002001003002002() {
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
bool Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004Func002002001003002() {
	return GetBooleanAnd(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004Func002002001003002001(), Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004Func002002001003002002());
}
bool Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004Func002002001003() {
	return GetBooleanAnd(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004Func002002001003001(), Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004Func002002001003002());
}
bool Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004Func003C() {
	return (udg_Temp_Unit != null);
}
bool Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004C() {
	return (GetUnitAbilityLevelSwapped('A0HC', GetEnumUnit()) > 0) && (GetRandomInt(1, 2) == 1);
}
bool Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003001001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
bool Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003001002() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO)) != null;
}
bool Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003001() {
	return GetBooleanAnd(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003001001(), Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003001002());
}
bool Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003002001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
bool Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003002002() {
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
bool Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003002() {
	return GetBooleanAnd(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003002001(), Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003002002());
}
bool Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003() {
	return GetBooleanAnd(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003001(), Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003002());
}
bool Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func002C() {
	return (udg_Temp_Unit != null);
}
bool Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005C() {
	return (GetUnitAbilityLevelSwapped('A0HA', GetEnumUnit()) > 0);
}
void Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002A() {
	if ((Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001C())) {
		udg_Temp_Unit[GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(700., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001Func001002001003)))] = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(700., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001Func001002001003)));
		if ((Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001Func002C())) {
			IssueTargetOrderById(GetEnumUnit(), $D0258, udg_Temp_Unit);
		}
	}
	if ((Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func002C())) {
		udg_Temp_Unit[GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(800., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func002Func001002001003)))] = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(800., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func002Func001002001003)));
		IssueTargetOrderById(GetEnumUnit(), $D027C, udg_Temp_Unit);
	}
	if ((Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func003C())) {
		udg_Temp_Unit[GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(1000., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func003Func001002001003)))] = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(1000., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func003Func001002001003)));
		IssueTargetOrderById(GetEnumUnit(), $D000C, udg_Temp_Unit);
	}
	if ((Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004C())) {
		udg_Temp_Unit[null] = null;
		udg_Temp_Unit[GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(650., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004Func002002001003)))] = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(650., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004Func002002001003)));
		if ((Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004Func003C())) {
			IssueImmediateOrderById(GetEnumUnit(), $D00F3);
		}
	}
	if ((Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005C())) {
		udg_Temp_Unit[GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(1000., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003)))] = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(1000., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003)));
		if ((Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func002C())) {
			IssueTargetOrderById(GetEnumUnit(), $D00E4, udg_Temp_Unit);
		}
	}
}
void Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Actions() {
	ForGroupBJ(GetUnitsInRectMatching(bj_mapInitialPlayableArea, Condition(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002001002)), Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002A);
}
void InitTrig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH() {
	gg_trg_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventPeriodic(gg_trg_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH, 1.);
	TriggerAddCondition(gg_trg_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH, Condition(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Conditions));
	TriggerAddAction(gg_trg_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH, Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Actions);
}
void Trig_Weakness_10second_last_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit target = LoadUnitHandle(udg_hash, h, 1);
	string s = LoadStr(udg_hash, h, 2);
	if (s == "str") {
		SetUnitMaxState(target, UNIT_STATE_MAX_LIFE, 'd');
		SetUnitLifeAndManaRegeneration(target, "life", $A);
	}
	if (s == "agi") {
		SetAttackAbilityLevel(target, $F);
		SetAttackSpeedAbilityLevel(target, $A);
	}
	if (s == "int") {
		SetUnitMaxState(target, UNIT_STATE_MAX_MANA, 50);
		SetUnitLifeAndManaRegeneration(target, "mana", 5);
	}
	if (s == "mob") {
		SetArmorAbilityLevel(target, 7);
	}
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
	target[null] = null;
}
void Trig_Weakness_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	string smainstat;
	string s;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	if (IsUnitType(target, UNIT_TYPE_HERO)) {
		smainstat[LoadStr(udg_hash, GetUnitTypeId(target), 70)] = LoadStr(udg_hash, GetUnitTypeId(target), 70);
		if (smainstat == "str") {
			SetUnitMaxState(target, UNIT_STATE_MAX_LIFE, -'d');
			SetUnitLifeAndManaRegeneration(target, "life", -$A);
			s["str"] = "str";
		}
		if (smainstat == "agi") {
			SetAttackAbilityLevel(target, -$F);
			SetAttackSpeedAbilityLevel(target, -$A);
			s["agi"] = "agi";
		}
		if (smainstat == "int") {
			SetUnitMaxState(target, UNIT_STATE_MAX_MANA, -50);
			SetUnitLifeAndManaRegeneration(target, "mana", -5);
			s["int"] = "int";
		}
	else
		SetArmorAbilityLevel(target, -7);
		s["mob"] = "mob";
	}
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\WingedSerpentMissile\\WingedSerpentMissile.mdl", target, "chest"));
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\WingedSerpentMissile\\WingedSerpentMissile.mdl", target, "hand,left"));
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\WingedSerpentMissile\\WingedSerpentMissile.mdl", target, "hand,right"));
	SaveUnitHandle(udg_hash, h, 1, target);
	SaveStr(udg_hash, h, 2, s);
	TimerStart(t, 12., false, Trig_Weakness_10second_last_Actions);
	caster[null] = null;
	target[null] = null;
	t[null] = null;
}
bool Trig_Weakness_Conditions() {
	return GetSpellAbilityId() == 'A0ES';
}
void InitTrig_Weakness() {
	int index = 0;
	gg_trg_Weakness[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Weakness, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Weakness, Condition(Trig_Weakness_Conditions));
	TriggerAddAction(gg_trg_Weakness, Trig_Weakness_Actions);
}
void Trig_Astral_Dispersal_Periodic_Dest_Actions() {
	KillDestructable(GetEnumDestructable());
}
void Trig_Astral_Dispersal_Periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	float damage = LoadReal(udg_hash, h, 3);
	int waitstand = LoadInteger(udg_hash, h, 4);
	int wait = LoadInteger(udg_hash, h, 5);
	float face = LoadReal(udg_hash, h, 6);
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	player p = GetOwningPlayer(caster);
	group g = CreateGroup();
	unit Picked;
	float angle;
	unit dammi;
	bool alife = true;
	bool endgroupcheck = false;
	effect ef;
	rect r;
	if (waitstand > 0 && GetUnitState(caster, UNIT_STATE_LIFE) > .405) {
		waitstand[waitstand - 1] = waitstand - 1;
		SaveInteger(udg_hash, h, 4, waitstand);
	}
	if (waitstand <= 0 && wait > 0 && GetUnitState(caster, UNIT_STATE_LIFE) > .405) {
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 5, wait);
		r[Rect(x - 100., y - 100., x + 100., y + 100.)] = Rect(x - 100., y - 100., x + 100., y + 100.);
		EnumDestructablesInRect(r, null, Trig_Astral_Dispersal_Periodic_Dest_Actions);
		if (IsTerrainPathable(x + 25. * Cos(face * bj_DEGTORAD), y + 25. * Sin(face * bj_DEGTORAD), PATHING_TYPE_FLYABILITY) == false) {
			SetUnitPosition(caster, x + 25. * Cos(face * bj_DEGTORAD), y + 25. * Sin(face * bj_DEGTORAD));
		}
		SetUnitFacing(caster, face);
		GroupEnumUnitsInRange(g, x + 50. * Cos(face * bj_DEGTORAD), y + 50. * Sin(face * bj_DEGTORAD), 125., null);
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null || endgroupcheck) break;
			if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				endgroupcheck[true] = true;
				wait[-1] = -1;
				SaveInteger(udg_hash, h, 5, wait);
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\OrbOfDeath\\AnnihilationMissile.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl", Picked, "chest"));
				dammi[CreateUnit(p, 'h00U', x, y, .0)] = CreateUnit(p, 'h00U', x, y, .0);
				UnitApplyTimedLife(dammi, 'BTLF', .5);
				UnitAddAbility(dammi, 'A0GG');
				IssueTargetOrderById(dammi, $D007F, Picked);
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				dammi[null] = null;
			}
			GroupRemoveUnit(g, Picked);
		}
	}
	if (wait <= 0 || GetUnitState(caster, UNIT_STATE_LIFE) < .405) {
		SetUnitAnimation(caster, "stand");
		SetUnitPathing(caster, true);
		SetUnitTimeScale(caster, 1.);
		PauseUnit(caster, false);
		ef[LoadEffectHandle(udg_hash, h, 7)] = LoadEffectHandle(udg_hash, h, 7);
		DestroyEffect(ef);
		ef[null] = null;
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	caster[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	p[null] = null;
	Picked[null] = null;
	dammi[null] = null;
	RemoveRect(r);
	r[null] = null;
}
void Trig_Astral_Dispersal_Actions() {
	unit caster = GetSpellAbilityUnit();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	unit target = GetSpellTargetUnit();
	float angle;
	float damage = 400.;
	location loc;
	float tx;
	float ty;
	float dist;
	float time;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	effect ef = AddSpecialEffectTarget("Abilities\\Weapons\\AvengerMissile\\AvengerMissile.mdl", caster, "chest");
	if (target == null) {
		loc[GetSpellTargetLoc()] = GetSpellTargetLoc();
		tx[GetLocationX(loc)] = GetLocationX(loc);
		ty[GetLocationY(loc)] = GetLocationY(loc);
	else
		tx[GetUnitX(target)] = GetUnitX(target);
		ty[GetUnitY(target)] = GetUnitY(target);
	}
	SetUnitAnimation(caster, "stand");
	SetUnitPathing(caster, false);
	SetUnitTimeScale(caster, 4.);
	PauseUnit(caster, true);
	SetUnitAnimationByIndex(caster, 1);
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\OrbOfDeath\\AnnihilationMissile.mdl", tx, ty));
	angle[bj_RADTODEG * Atan2(ty - y, tx - x)] = bj_RADTODEG * Atan2(ty - y, tx - x);
	dist[SquareRoot((tx - x) * (tx - x) + (ty - y) * (ty - y)) + 100.] = SquareRoot((tx - x) * (tx - x) + (ty - y) * (ty - y)) + 100.;
	SetUnitFacing(caster, angle);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 3, damage);
	SaveInteger(udg_hash, h, 4, 66);
	SaveInteger(udg_hash, h, 5, R2I(dist / 25.));
	SaveReal(udg_hash, h, 6, angle);
	SaveEffectHandle(udg_hash, h, 7, ef);
	TimerStart(t, .03, true, Trig_Astral_Dispersal_Periodic_Actions);
	caster[null] = null;
	target[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	t[null] = null;
	ef[null] = null;
}
bool Trig_Astral_Dispersal_Conditions() {
	return GetSpellAbilityId() == 'A0GF';
}
void InitTrig_Astral_Dispersal() {
	int index = 0;
	gg_trg_Astral_Dispersal[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Astral_Dispersal, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Astral_Dispersal, Condition(Trig_Astral_Dispersal_Conditions));
	TriggerAddAction(gg_trg_Astral_Dispersal, Trig_Astral_Dispersal_Actions);
}
void Trig_Infernal_Ram_Periodic_Dest_Actions() {
	KillDestructable(GetEnumDestructable());
}
void Trig_Infernal_Ram_Periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	float damage = LoadReal(udg_hash, h, 3);
	group gdamage = LoadGroupHandle(udg_hash, h, 4);
	int wait = LoadInteger(udg_hash, h, 5);
	float face = LoadReal(udg_hash, h, 6);
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	float xzahvat = x + 50. * Cos(face * bj_DEGTORAD);
	float yzahvat = y + 50. * Sin(face * bj_DEGTORAD);
	player p = GetOwningPlayer(caster);
	group g = CreateGroup();
	unit Picked;
	float angle;
	unit dammi;
	bool alife = true;
	effect ef;
	rect r;
	if (wait > 0 && GetUnitState(caster, UNIT_STATE_LIFE) > .405) {
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 5, wait);
		r[Rect(xzahvat - 125., yzahvat - 125., xzahvat + 125., yzahvat + 125.)] = Rect(xzahvat - 125., yzahvat - 125., xzahvat + 125., yzahvat + 125.);
		EnumDestructablesInRect(r, null, Trig_Infernal_Ram_Periodic_Dest_Actions);
		if (IsTerrainPathable(x + 25. * Cos(face * bj_DEGTORAD), y + 25. * Sin(face * bj_DEGTORAD), PATHING_TYPE_FLYABILITY) == false) {
			SetUnitPosition(caster, x + 25. * Cos(face * bj_DEGTORAD), y + 25. * Sin(face * bj_DEGTORAD));
		}
		SetUnitFacing(caster, face);
		GroupEnumUnitsInRange(g, x + 75. * Cos(face * bj_DEGTORAD), y + 75. * Sin(face * bj_DEGTORAD), 110., null);
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if ((IsUnitInGroup(Picked, udg_PortalCastersMagi) == false) && IsUnitEnemy(Picked, p) && IsUnitInGroup(Picked, gdamage) == false && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				UnitPeriodicPostionMove(Picked, .03, wait * .03);
				GroupAddUnit(gdamage, Picked);
				DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodNecromancer.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl", Picked, "chest"));
				SetUnitPathing(Picked, false);
				MoveUnit(Picked, wait * .03, 833.3, .0, face, .0, true);
			}
			GroupRemoveUnit(g, Picked);
		}
	}
	Picked[null] = null;
	if (wait <= 0 || GetUnitState(caster, UNIT_STATE_LIFE) < .405) {
		while (true) {
			Picked[FirstOfGroup(gdamage)] = FirstOfGroup(gdamage);
			if (Picked == null) break;
			SetUnitPosition(Picked, GetUnitX(Picked), GetUnitY(Picked));
			dammi[CreateUnit(p, 'h00U', x, y, .0)] = CreateUnit(p, 'h00U', x, y, .0);
			UnitApplyTimedLife(dammi, 'BTLF', 1.);
			UnitAddAbility(dammi, 'A0GJ');
			IssueTargetOrderById(dammi, $D006B, Picked);
			UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			SetUnitPathing(Picked, true);
			dammi[null] = null;
			GroupRemoveUnit(gdamage, Picked);
		}
		SetUnitAnimation(caster, "stand");
		SetUnitPathing(caster, true);
		SetUnitTimeScale(caster, 1.);
		PauseUnit(caster, false);
		ef[LoadEffectHandle(udg_hash, h, 7)] = LoadEffectHandle(udg_hash, h, 7);
		DestroyEffect(ef);
		ef[null] = null;
		ef[LoadEffectHandle(udg_hash, h, 8)] = LoadEffectHandle(udg_hash, h, 8);
		DestroyEffect(ef);
		ef[null] = null;
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
		IssuePointOrderById(caster, $D0079, x + 50. * Cos(face * bj_DEGTORAD), y + 50. * Sin(face * bj_DEGTORAD));
	}
	t[null] = null;
	caster[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	gdamage[null] = null;
	p[null] = null;
	Picked[null] = null;
	dammi[null] = null;
	RemoveRect(r);
	r[null] = null;
}
void Trig_Infernal_Ram_Actions() {
	unit caster = GetSpellAbilityUnit();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	unit target = GetSpellTargetUnit();
	float angle;
	float damage = 800.;
	location loc;
	float tx;
	float ty;
	float dist;
	float time;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	effect ef;
	group gdamage = CreateGroup();
	if (target == null) {
		loc[GetSpellTargetLoc()] = GetSpellTargetLoc();
		tx[GetLocationX(loc)] = GetLocationX(loc);
		ty[GetLocationY(loc)] = GetLocationY(loc);
	else
		tx[GetUnitX(target)] = GetUnitX(target);
		ty[GetUnitY(target)] = GetUnitY(target);
	}
	SetUnitAnimation(caster, "stand");
	SetUnitPathing(caster, false);
	SetUnitTimeScale(caster, 3.25);
	PauseUnit(caster, true);
	SetUnitAnimationByIndex(caster, 1);
	angle[bj_RADTODEG * Atan2(ty - y, tx - x)] = bj_RADTODEG * Atan2(ty - y, tx - x);
	dist[SquareRoot((tx - x) * (tx - x) + (ty - y) * (ty - y)) + 100.] = SquareRoot((tx - x) * (tx - x) + (ty - y) * (ty - y)) + 100.;
	SetUnitFacing(caster, angle);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 3, damage);
	SaveGroupHandle(udg_hash, h, 4, gdamage);
	SaveInteger(udg_hash, h, 5, R2I(dist / 25.));
	SaveReal(udg_hash, h, 6, angle);
	ef[AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl", caster, "chest")] = AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl", caster, "chest");
	SaveEffectHandle(udg_hash, h, 7, ef);
	ef[null] = null;
	ef[AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl", caster, "head")] = AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl", caster, "head");
	SaveEffectHandle(udg_hash, h, 8, ef);
	TimerStart(t, .03, true, Trig_Infernal_Ram_Periodic_Actions);
	caster[null] = null;
	target[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	t[null] = null;
	ef[null] = null;
	gdamage[null] = null;
}
bool Trig_Infernal_Ram_Conditions() {
	return GetSpellAbilityId() == 'A0GI';
}
void InitTrig_Infernal_Ram() {
	int index = 0;
	gg_trg_Infernal_Ram[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Infernal_Ram, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Infernal_Ram, Condition(Trig_Infernal_Ram_Conditions));
	TriggerAddAction(gg_trg_Infernal_Ram, Trig_Infernal_Ram_Actions);
}
void Trig_Fiery_Blow_Actions() {
	unit caster = GetSpellAbilityUnit();
	location loc = GetSpellTargetLoc();
	float x = GetLocationX(loc);
	float y = GetLocationY(loc);
	float radius = 250.;
	float damage = 350.;
	unit dammi;
	unit Picked;
	group g = CreateGroup();
	player p = GetOwningPlayer(caster);
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", x, y));
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl", x, y));
	GroupEnumUnitsInRange(g, x, y, radius, null);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Incinerate\\FireLordDeathExplode.mdl", Picked, "origin"));
			dammi[CreateUnit(p, 'h00U', x, y, .0)] = CreateUnit(p, 'h00U', x, y, .0);
			UnitApplyTimedLife(dammi, 'BTLF', 1.);
			UnitAddAbility(dammi, 'A0GL');
			IssueTargetOrderById(dammi, $D007F, Picked);
			UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			dammi[null] = null;
		}
		GroupRemoveUnit(g, Picked);
	}
	caster[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	dammi[null] = null;
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	p[null] = null;
}
bool Trig_Fiery_Blow_Conditions() {
	return GetSpellAbilityId() == 'A0GK';
}
void InitTrig_Fiery_Blow() {
	int index = 0;
	gg_trg_Fiery_Blow[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Fiery_Blow, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Fiery_Blow, Condition(Trig_Fiery_Blow_Conditions));
	TriggerAddAction(gg_trg_Fiery_Blow, Trig_Fiery_Blow_Actions);
}
void Trig_Bloody_Jump_Delete_Dammi_Actions() {
	timer tvoid = GetExpiredTimer();
	int hvoid = GetHandleId(tvoid);
	unit dammivoid = LoadUnitHandle(udg_hash, hvoid, 1);
	RemoveUnit(dammivoid);
	FlushChildHashtable(udg_hash, hvoid);
	DestroyTimer(tvoid);
	tvoid[null] = null;
	dammivoid[null] = null;
}
void Trig_Bloody_Jump_Periodic_Dest_Actions() {
	KillDestructable(GetEnumDestructable());
}
void Trig_Bloody_Jump_Periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	int waitef = LoadInteger(udg_hash, h, 2);
	int wait = LoadInteger(udg_hash, h, 3);
	float face = LoadReal(udg_hash, h, 4);
	group gdamage = LoadGroupHandle(udg_hash, h, 5);
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	float xnew = x + 30. * Cos(face * bj_DEGTORAD);
	float ynew = y + 30. * Sin(face * bj_DEGTORAD);
	player p = GetOwningPlayer(caster);
	group g = CreateGroup();
	unit Picked;
	float angle;
	unit dammi;
	unit dammivoid;
	rect r;
	timer tvoid;
	int hvoid;
	if (wait > 0 && GetUnitState(caster, UNIT_STATE_LIFE) > .405) {
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 3, wait);
		r[Rect(x - 75., y - 75., x + 75., y + 75.)] = Rect(x - 75., y - 75., x + 75., y + 75.);
		EnumDestructablesInRect(r, null, Trig_Bloody_Jump_Periodic_Dest_Actions);
		if (IsTerrainPathable(x + 30. * Cos(face * bj_DEGTORAD), y + 30. * Sin(face * bj_DEGTORAD), PATHING_TYPE_FLYABILITY) == false) {
			SetUnitPosition(caster, x + 30. * Cos(face * bj_DEGTORAD), y + 30. * Sin(face * bj_DEGTORAD));
		}
		if (waitef == 7) {
			waitef[0] = 0;
			tvoid[CreateTimer()] = CreateTimer();
			hvoid[GetHandleId(tvoid)] = GetHandleId(tvoid);
			dammivoid[CreateUnit(Player(0), 'n008', x - 50. * Cos(face * bj_DEGTORAD), y - 50. * Sin(face * bj_DEGTORAD), face)] = CreateUnit(Player(0), 'n008', x - 50. * Cos(face * bj_DEGTORAD), y - 50. * Sin(face * bj_DEGTORAD), face);
			SetUnitAnimation(dammivoid, "stand");
			SetUnitPathing(dammivoid, false);
			SetUnitTimeScale(dammivoid, 2.);
			PauseUnit(dammivoid, true);
			SetUnitMoveSpeed(dammivoid, .0);
			UnitAddAbility(dammivoid, 'Aloc');
			SetUnitVertexColor(dammivoid, $9B, $FF, $FF, 75);
			SetUnitAnimationByIndex(dammivoid, 6);
			SaveUnitHandle(udg_hash, hvoid, 1, dammivoid);
			TimerStart(tvoid, .7, false, Trig_Bloody_Jump_Delete_Dammi_Actions);
			tvoid[null] = null;
			dammivoid[null] = null;
			DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", dammivoid, "chest"));
			DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPeasant.mdl", GetUnitX(caster), GetUnitY(caster)));
		else
			waitef[waitef + 1] = waitef + 1;
		}
		SaveInteger(udg_hash, h, 2, waitef);
		SetUnitFacing(caster, face);
		GroupEnumUnitsInRange(g, x + 50. * Cos(face * bj_DEGTORAD), y + 50. * Sin(face * bj_DEGTORAD), 200., null);
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && IsUnitInGroup(Picked, gdamage) == false && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				GroupAddUnit(gdamage, Picked);
				DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodRifleman.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodSorceress.mdl", Picked, "chest"));
				dammi[CreateUnit(p, 'h00U', xnew, ynew, .0)] = CreateUnit(p, 'h00U', xnew, ynew, .0);
				UnitApplyTimedLife(dammi, 'BTLF', 1.);
				UnitAddAbility(dammi, 'A0GN');
				IssueTargetOrderById(dammi, $D006B, Picked);
				dammi[null] = null;
				dammi[CreateUnit(p, 'h00U', xnew, ynew, .0)] = CreateUnit(p, 'h00U', xnew, ynew, .0);
				UnitApplyTimedLife(dammi, 'BTLF', 1.);
				UnitAddAbility(dammi, 'A0GO');
				IssueTargetOrderById(dammi, $D007F, Picked);
				dammi[null] = null;
			}
			GroupRemoveUnit(g, Picked);
		}
		SaveGroupHandle(udg_hash, h, 5, gdamage);
	}
	if (wait <= 0 || GetUnitState(caster, UNIT_STATE_LIFE) < .405) {
		SetUnitAnimation(caster, "stand");
		SetUnitPathing(caster, true);
		SetUnitTimeScale(caster, 1.);
		PauseUnit(caster, false);
		SetUnitVertexColor(caster, $9B, $FF, $FF, $FF);
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
		IssueImmediateOrderById(caster, $D0080);
	}
	t[null] = null;
	caster[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	gdamage[null] = null;
	p[null] = null;
	Picked[null] = null;
	dammi[null] = null;
	RemoveRect(r);
	r[null] = null;
}
void Trig_Bloody_Jump_Actions() {
	unit caster = GetSpellAbilityUnit();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	unit target = GetSpellTargetUnit();
	float angle;
	location loc;
	float tx;
	float ty;
	float dist;
	float time;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	group gdamage = CreateGroup();
	if (target == null) {
		loc[GetSpellTargetLoc()] = GetSpellTargetLoc();
		tx[GetLocationX(loc)] = GetLocationX(loc);
		ty[GetLocationY(loc)] = GetLocationY(loc);
	else
		tx[GetUnitX(target)] = GetUnitX(target);
		ty[GetUnitY(target)] = GetUnitY(target);
	}
	SetUnitAnimation(caster, "stand");
	SetUnitPathing(caster, false);
	SetUnitTimeScale(caster, 3.);
	PauseUnit(caster, true);
	SetUnitVertexColor(caster, $9B, $FF, $FF, $96);
	SetUnitAnimationByIndex(caster, 0);
	angle[bj_RADTODEG * Atan2(ty - y, tx - x)] = bj_RADTODEG * Atan2(ty - y, tx - x);
	dist[SquareRoot((tx - x) * (tx - x) + (ty - y) * (ty - y)) + 200.] = SquareRoot((tx - x) * (tx - x) + (ty - y) * (ty - y)) + 200.;
	SetUnitFacing(caster, angle);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveInteger(udg_hash, h, 2, 6);
	SaveInteger(udg_hash, h, 3, R2I(dist / 30.));
	SaveReal(udg_hash, h, 4, angle);
	SaveGroupHandle(udg_hash, h, 5, gdamage);
	TimerStart(t, .03, true, Trig_Bloody_Jump_Periodic_Actions);
	caster[null] = null;
	target[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	t[null] = null;
	gdamage[null] = null;
}
bool Trig_Bloody_Jump_Conditions() {
	return GetSpellAbilityId() == 'A0GM';
}
void InitTrig_Bloody_Jump() {
	int index = 0;
	gg_trg_Bloody_Jump[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Bloody_Jump, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Bloody_Jump, Condition(Trig_Bloody_Jump_Conditions));
	TriggerAddAction(gg_trg_Bloody_Jump, Trig_Bloody_Jump_Actions);
}
void Trig_Blood_Absorption_Destroy_Effects_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	effect ef;
	ef[LoadEffectHandle(udg_hash, h, 1)] = LoadEffectHandle(udg_hash, h, 1);
	DestroyEffect(ef);
	ef[null] = null;
	ef[LoadEffectHandle(udg_hash, h, 2)] = LoadEffectHandle(udg_hash, h, 2);
	DestroyEffect(ef);
	ef[null] = null;
	ef[LoadEffectHandle(udg_hash, h, 3)] = LoadEffectHandle(udg_hash, h, 3);
	DestroyEffect(ef);
	ef[null] = null;
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
}
void Trig_Blood_Absorption_Actions() {
	unit caster = GetSpellAbilityUnit();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	float radius = 200.;
	float damage = 200.;
	float heal = 300.;
	unit Picked;
	group g = CreateGroup();
	player p = GetOwningPlayer(caster);
	timer t = CreateTimer();
	int h = GetHandleId(t);
	effect ef;
	DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HeroBloodElfBlood.mdl", caster, "chest"));
	DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", caster, "chest"));
	ef[AddSpecialEffect("Abilities\\Spells\\Items\\VampiricPotion\\VampPotionCaster.mdl", x + radius * Cos(120. * bj_DEGTORAD), y + radius * Sin(120. * bj_DEGTORAD))] = AddSpecialEffect("Abilities\\Spells\\Items\\VampiricPotion\\VampPotionCaster.mdl", x + radius * Cos(120. * bj_DEGTORAD), y + radius * Sin(120. * bj_DEGTORAD));
	SaveEffectHandle(udg_hash, h, 1, ef);
	ef[null] = null;
	ef[AddSpecialEffect("Abilities\\Spells\\Items\\VampiricPotion\\VampPotionCaster.mdl", x + radius * Cos(240. * bj_DEGTORAD), y + radius * Sin(240. * bj_DEGTORAD))] = AddSpecialEffect("Abilities\\Spells\\Items\\VampiricPotion\\VampPotionCaster.mdl", x + radius * Cos(240. * bj_DEGTORAD), y + radius * Sin(240. * bj_DEGTORAD));
	SaveEffectHandle(udg_hash, h, 2, ef);
	ef[null] = null;
	ef[AddSpecialEffect("Abilities\\Spells\\Items\\VampiricPotion\\VampPotionCaster.mdl", x + radius * Cos(360. * bj_DEGTORAD), y + radius * Sin(360. * bj_DEGTORAD))] = AddSpecialEffect("Abilities\\Spells\\Items\\VampiricPotion\\VampPotionCaster.mdl", x + radius * Cos(360. * bj_DEGTORAD), y + radius * Sin(360. * bj_DEGTORAD));
	SaveEffectHandle(udg_hash, h, 3, ef);
	ef[null] = null;
	TimerStart(t, 1.2, false, Trig_Blood_Absorption_Destroy_Effects_Actions);
	SetUnitState(caster, UNIT_STATE_LIFE, GetUnitState(caster, UNIT_STATE_LIFE) + heal);
	GroupEnumUnitsInRange(g, x, y, radius, null);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl", Picked, "chest"));
			DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodSorceress.mdl", Picked, "chest"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\VampiricPotion\\VampPotionCaster.mdl", Picked, "origin"));
			UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_MELEE, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			SetUnitState(caster, UNIT_STATE_LIFE, GetUnitState(caster, UNIT_STATE_LIFE) + damage / 2);
		}
		GroupRemoveUnit(g, Picked);
	}
	caster[null] = null;
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	p[null] = null;
}
bool Trig_Blood_Absorption_Conditions() {
	return GetSpellAbilityId() == 'A0GQ';
}
void InitTrig_Blood_Absorption() {
	int index = 0;
	gg_trg_Blood_Absorption[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Blood_Absorption, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Blood_Absorption, Condition(Trig_Blood_Absorption_Conditions));
	TriggerAddAction(gg_trg_Blood_Absorption, Trig_Blood_Absorption_Actions);
}
bool Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Conditions() {
	return (udg_Nomer_samoi_volni == 9);
}
bool Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func002C() {
	return (GetUnitAbilityLevelSwapped('A0ES', GetTriggerUnit()) > 0) && (GetRandomInt(1, 3) == 1) && (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group));
}
bool Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func003C() {
	return (GetUnitAbilityLevelSwapped('A0ES', GetAttacker()) > 0) && (GetRandomInt(1, 3) == 1) && (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group));
}
bool Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func004C() {
	return (GetUnitAbilityLevelSwapped('A0FJ', GetTriggerUnit()) > 0) && (GetRandomInt(1, 3) == 4) && (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group));
}
bool Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func005C() {
	return (GetUnitAbilityLevelSwapped('A0FJ', GetAttacker()) > 0) && (GetRandomInt(1, 3) == 4) && (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group));
}
bool Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func006C() {
	return (GetUnitAbilityLevelSwapped('A0GK', GetTriggerUnit()) > 0) && (GetRandomInt(1, 5) == 1) && (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group));
}
bool Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func007C() {
	return (GetUnitAbilityLevelSwapped('A0GK', GetAttacker()) > 0) && (GetRandomInt(1, 2) == 1) && (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group));
}
bool Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func008C() {
	return (GetUnitAbilityLevelSwapped('A0GQ', GetTriggerUnit()) > 0) && (GetRandomInt(1, 3) == 1) && (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group));
}
bool Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func009C() {
	return (GetUnitAbilityLevelSwapped('A0GQ', GetAttacker()) > 0) && (GetRandomInt(1, 3) == 1) && (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group));
}
void Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Actions() {
	if ((Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func002C())) {
		IssueTargetOrderById(GetTriggerUnit(), $D00DE, GetAttacker());
	}
	if ((Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func003C())) {
		IssueTargetOrderById(GetAttacker(), $D00DE, GetTriggerUnit());
	}
	if ((Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func004C())) {
		IssueTargetOrderById(GetTriggerUnit(), $D0079, GetAttacker());
	}
	if ((Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func005C())) {
		IssueTargetOrderById(GetAttacker(), $D0079, GetTriggerUnit());
	}
	if ((Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func006C())) {
		IssueTargetOrderById(GetTriggerUnit(), $D0079, GetAttacker());
	}
	if ((Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func007C())) {
		IssueTargetOrderById(GetAttacker(), $D0079, GetTriggerUnit());
	}
	if ((Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func008C())) {
		IssueImmediateOrderById(GetTriggerUnit(), $D0080);
	}
	if ((Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func009C())) {
		IssueImmediateOrderById(GetAttacker(), $D0080);
	}
}
void InitTrig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u() {
	gg_trg_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u[CreateTrigger()] = CreateTrigger();
	TriggerRegisterAnyUnitEventBJ(gg_trg_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u, EVENT_PLAYER_UNIT_ATTACKED);
	TriggerAddCondition(gg_trg_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u, Condition(Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Conditions));
	TriggerAddAction(gg_trg_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u, Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Actions);
}
bool Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Conditions() {
	return (udg_Nomer_samoi_volni == 9);
}
bool Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002001002() {
	return (IsPlayerInForce(GetOwningPlayer(GetFilterUnit()), udg_Players_Enemy_Group));
}
bool Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001Func001002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
bool Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001Func001002001003002001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
bool Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001Func001002001003002002() {
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
bool Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001Func001002001003002() {
	return GetBooleanAnd(Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001Func001002001003002001(), Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001Func001002001003002002());
}
bool Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001Func001002001003() {
	return GetBooleanAnd(Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001Func001002001003001(), Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001Func001002001003002());
}
bool Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001Func002C() {
	return (udg_Temp_Unit != null);
}
bool Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001C() {
	return (GetUnitAbilityLevelSwapped('A0GF', GetEnumUnit()) > 0) && (GetRandomInt(1, 1) == 1);
}
bool Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003001001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
bool Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003001002() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) == false) != null;
}
bool Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003001() {
	return GetBooleanAnd(Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003001001(), Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003001002());
}
bool Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003002001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
bool Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003002002() {
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
bool Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003002() {
	return GetBooleanAnd(Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003002001(), Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003002002());
}
bool Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003() {
	return GetBooleanAnd(Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003001(), Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003002());
}
bool Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func002C() {
	return (udg_Temp_Unit != null);
}
bool Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002C() {
	return (GetUnitAbilityLevelSwapped('A0GM', GetEnumUnit()) > 0) && (GetRandomInt(1, 1) == 1);
}
bool Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003001001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
bool Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003001002() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) == false) != null;
}
bool Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003001() {
	return GetBooleanAnd(Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003001001(), Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003001002());
}
bool Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003002001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
bool Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003002002() {
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
bool Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003002() {
	return GetBooleanAnd(Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003002001(), Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003002002());
}
bool Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003() {
	return GetBooleanAnd(Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003001(), Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003002());
}
bool Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func002C() {
	return (udg_Temp_Unit != null);
}
bool Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003C() {
	return (GetUnitAbilityLevelSwapped('A0GI', GetEnumUnit()) > 0) && (GetRandomInt(1, 1) == 1);
}
void Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002A() {
	if ((Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001C())) {
		udg_Temp_Unit[GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(1200., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001Func001002001003)))] = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(1200., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001Func001002001003)));
		if ((Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001Func002C())) {
			IssueTargetOrderById(GetEnumUnit(), $D0296, udg_Temp_Unit);
		}
	}
	if ((Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002C())) {
		udg_Temp_Unit[GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(1000., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003)))] = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(1000., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003)));
		if ((Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func002C())) {
			IssueTargetOrderById(GetEnumUnit(), $D010E, udg_Temp_Unit);
		}
	}
	if ((Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003C())) {
		udg_Temp_Unit[GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(1200., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003)))] = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(1200., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003)));
		if ((Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func002C())) {
			IssueTargetOrderById(GetEnumUnit(), $D007D, udg_Temp_Unit);
		}
	}
}
void Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Actions() {
	ForGroupBJ(GetUnitsInRectMatching(bj_mapInitialPlayableArea, Condition(Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002001002)), Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002A);
}
void InitTrig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4() {
	gg_trg_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventPeriodic(gg_trg_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4, 1.);
	TriggerAddCondition(gg_trg_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4, Condition(Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Conditions));
	TriggerAddAction(gg_trg_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4, Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Actions);
}
bool Trig_Hatred_of_fire_Conditions() {
	return (GetSpellAbilityId() == 'A0A0');
}
void timeout11() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit u = LoadUnitHandle(udg_hash, h, 40);
	UnitRemoveAbility(u, 'A0GY');
	DestroyTimer(t);
	FlushChildHashtable(udg_hash, h);
	t[null] = null;
	u[null] = null;
}
void Trig_Hatred_of_fire_Actions() {
	unit u = GetSpellAbilityUnit();
	timer t = CreateTimer();
	int h = GetHandleId(t);
	TimerStart(t, 12., false, timeout11);
	SaveUnitHandle(udg_hash, h, 40, u);
	t[null] = null;
	u[null] = null;
}
void InitTrig_Hatred_of_fire() {
	gg_trg_Hatred_of_fire[CreateTrigger()] = CreateTrigger();
	TriggerRegisterAnyUnitEventBJ(gg_trg_Hatred_of_fire, EVENT_PLAYER_UNIT_SPELL_EFFECT);
	TriggerAddCondition(gg_trg_Hatred_of_fire, Condition(Trig_Hatred_of_fire_Conditions));
	TriggerAddAction(gg_trg_Hatred_of_fire, Trig_Hatred_of_fire_Actions);
}
bool firess() {
	return (GetSpellAbilityId() == 'A0GZ') && GetUnitAbilityLevel(GetSpellAbilityUnit(), 'A0GZ') == 1;
}
void timeout15() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	int wait = LoadInteger(udg_hash, h, 42);
	unit u = LoadUnitHandle(udg_hash, h, 41);
	unit z = LoadUnitHandle(udg_hash, h, 43);
	texttag txt;
	if (wait > 0 && GetUnitAbilityLevel(u, 'A09Y') == 1) {
		wait[wait - 1] = wait - 1;
		txt[CreateTextTagUnitBJ(I2S((1 * GetUnitAbilityLevel(u, 'A0GZ'))), u, 0, 16, 'd', $A, $A, 0)] = CreateTextTagUnitBJ(I2S((1 * GetUnitAbilityLevel(u, 'A0GZ'))), u, 0, 16, 'd', $A, $A, 0);
		SetTextTagPermanent(txt, false);
		SetTextTagVelocityBJ(txt, 64, 90);
		SetTextTagLifespan(txt, .6);
		SaveInteger(udg_hash, h, 42, wait);
		SetUnitAnimation(u, "Spell");
		SetUnitAbilityLevel(u, 'A0GZ', GetUnitAbilityLevel(u, 'A0GZ') + 1);
	else
		IssueTargetOrderById(u, $D02B6, z);
		UnitRemoveAbility(u, 'A09Y');
		PauseUnit(u, false);
		SetUnitAnimation(u, "stand");
		DestroyTimer(t);
		FlushChildHashtable(udg_hash, h);
	}
	txt[null] = null;
	t[null] = null;
	u[null] = null;
	z[null] = null;
}
void fires() {
	unit u = GetSpellAbilityUnit();
	unit z = GetSpellTargetUnit();
	timer t = CreateTimer();
	int h = GetHandleId(t);
	int wait = 4;
	PauseUnit(u, true);
	TimerStart(t, .9, true, timeout15);
	SaveInteger(udg_hash, h, 42, wait);
	SaveUnitHandle(udg_hash, h, 41, u);
	SaveUnitHandle(udg_hash, h, 43, z);
	UnitAddAbility(u, 'A09Y');
	t[null] = null;
	u[null] = null;
	z[null] = null;
}
void InitTrig_set_fire() {
	gg_trg_set_fire[CreateTrigger()] = CreateTrigger();
	TriggerRegisterAnyUnitEventBJ(gg_trg_set_fire, EVENT_PLAYER_UNIT_SPELL_EFFECT);
	TriggerAddCondition(gg_trg_set_fire, Condition(firess));
	TriggerAddAction(gg_trg_set_fire, fires);
}
bool firess2() {
	return (GetSpellAbilityId() == 'A0GZ') && GetUnitAbilityLevel(GetSpellAbilityUnit(), 'A0GZ') > 1;
}
void timeout16() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit u = LoadUnitHandle(udg_hash, h, 43);
	SetUnitAbilityLevel(u, 'A0GZ', 1);
	DestroyTimer(t);
	FlushChildHashtable(udg_hash, h);
	u[null] = null;
	t[null] = null;
}
void fires2() {
	unit u = GetSpellAbilityUnit();
	timer t = CreateTimer();
	int h = GetHandleId(t);
	UnitRemoveAbility(u, 'A09Y');
	SaveUnitHandle(udg_hash, h, 43, u);
	TimerStart(t, .5, false, timeout16);
	u[null] = null;
	t[null] = null;
}
void InitTrig_set_fire_2() {
	gg_trg_set_fire_2[CreateTrigger()] = CreateTrigger();
	TriggerRegisterAnyUnitEventBJ(gg_trg_set_fire_2, EVENT_PLAYER_UNIT_SPELL_EFFECT);
	TriggerAddCondition(gg_trg_set_fire_2, Condition(firess2));
	TriggerAddAction(gg_trg_set_fire_2, fires2);
}
bool Trig_the_creation_of_the_image_Conditions() {
	return GetSpellAbilityId() == 'A0HG';
}
void timeout17() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit u = LoadUnitHandle(udg_hash, h, 46);
	unit dammi = LoadUnitHandle(udg_hash, h, 47);
	unit dammi2;
	float x = LoadReal(udg_hash, h, 44);
	float y = LoadReal(udg_hash, h, 45);
	group g = CreateGroup();
	unit Picked;
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl", dammi, "origin"));
	GroupEnumUnitsInRange(g, x, y, 380, null);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if (IsUnitEnemy(Picked, GetOwningPlayer(u)) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false) {
			UnitDamageTargetBJ(u, Picked, ($C8), ATTACK_TYPE_NORMAL, DAMAGE_TYPE_NORMAL);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl", Picked, "origin"));
		else
			if (IsUnitAlly(Picked, GetOwningPlayer(u)) && GetUnitTypeId(Picked) == 'n01D' && GetUnitState(Picked, UNIT_STATE_LIFE) > .0) {
				dammi2[CreateUnit(GetOwningPlayer(u), 'h013', x, y, 0)] = CreateUnit(GetOwningPlayer(u), 'h013', x, y, 0);
				UnitAddAbility(dammi2, 'A0HI');
				UnitApplyTimedLife(dammi2, 'BTLF', 1.);
				IssueTargetOrderById(dammi2, $D0062, Picked);
			}
		}
		GroupRemoveUnit(g, Picked);
	}
	SetUnitTimeScalePercent(dammi, 'd');
	KillUnit(dammi);
	DestroyGroup(g);
	DestroyTimer(t);
	FlushChildHashtable(udg_hash, h);
	g[null] = null;
	dammi[null] = null;
	dammi2[null] = null;
	Picked[null] = null;
	u[null] = null;
	t[null] = null;
}
void Trig_the_creation_of_the_image_Actions() {
	unit u = GetSpellAbilityUnit();
	location locs = GetSpellTargetLoc();
	float x = GetLocationX(locs);
	float y = GetLocationY(locs);
	unit dammi = CreateUnit(GetOwningPlayer(u), 'n00I', x, y, GetUnitFacing(u));
	timer t = CreateTimer();
	int h = GetHandleId(t);
	UnitAddAbility(dammi, 'Aloc');
	TimerStart(t, 2.07, false, timeout17);
	SaveReal(udg_hash, h, 44, x);
	SaveReal(udg_hash, h, 45, y);
	SaveUnitHandle(udg_hash, h, 46, u);
	SaveUnitHandle(udg_hash, h, 47, dammi);
	SetUnitVertexColor(dammi, $FF, $FF, $FF, 90);
	SetUnitTimeScalePercent(dammi, 80);
	PauseUnit(dammi, true);
	UnitApplyTimedLife(dammi, 'BTLF', 1.85);
	SetUnitAnimation(dammi, "Spell Slam");
	dammi[null] = null;
	u[null] = null;
	RemoveLocation(locs);
	locs[null] = null;
	t[null] = null;
}
void InitTrig_the_creation_of_the_image() {
	gg_trg_the_creation_of_the_image[CreateTrigger()] = CreateTrigger();
	TriggerRegisterAnyUnitEventBJ(gg_trg_the_creation_of_the_image, EVENT_PLAYER_UNIT_SPELL_EFFECT);
	TriggerAddCondition(gg_trg_the_creation_of_the_image, Condition(Trig_the_creation_of_the_image_Conditions));
	TriggerAddAction(gg_trg_the_creation_of_the_image, Trig_the_creation_of_the_image_Actions);
}
bool Trig_fiery_explosions_Conditions() {
	return GetSpellAbilityId() == 'A0HK';
}
void timeout18() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	int wait = LoadInteger(udg_hash, h, 50);
	unit u = LoadUnitHandle(udg_hash, h, 48);
	unit j = LoadUnitHandle(udg_hash, h, 49);
	float x = GetUnitX(j);
	float y = GetUnitY(j);
	group g = CreateGroup();
	unit Picked;
	if (GetUnitState(j, UNIT_STATE_LIFE) > .0) {
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Incinerate\\FireLordDeathExplode.mdl", x, y));
	}
	GroupEnumUnitsInRange(g, x, y, 300, null);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if (IsUnitEnemy(Picked, GetOwningPlayer(u)) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false) {
			UnitDamageTargetBJ(u, Picked, (80), ATTACK_TYPE_NORMAL, DAMAGE_TYPE_NORMAL);
		}
		GroupRemoveUnit(g, Picked);
	}
	DestroyGroup(g);
	if (wait < 0) {
		DestroyTimer(t);
		UnitRemoveAbility(j, 'B03J');
		FlushChildHashtable(udg_hash, h);
	else
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 50, wait);
	}
	t[null] = null;
	g[null] = null;
	Picked[null] = null;
	u[null] = null;
	j[null] = null;
}
void Trig_fiery_explosions_Actions() {
	unit u = GetSpellAbilityUnit();
	unit j = GetSpellTargetUnit();
	timer t = CreateTimer();
	int h = GetHandleId(t);
	int wait = GetRandomInt(3, 8);
	TimerStart(t, 1., true, timeout18);
	SaveUnitHandle(udg_hash, h, 48, u);
	SaveUnitHandle(udg_hash, h, 49, j);
	SaveInteger(udg_hash, h, 50, wait);
	u[null] = null;
	j[null] = null;
	t[null] = null;
}
void InitTrig_fiery_explosions() {
	gg_trg_fiery_explosions[CreateTrigger()] = CreateTrigger();
	TriggerRegisterAnyUnitEventBJ(gg_trg_fiery_explosions, EVENT_PLAYER_UNIT_SPELL_EFFECT);
	TriggerAddCondition(gg_trg_fiery_explosions, Condition(Trig_fiery_explosions_Conditions));
	TriggerAddAction(gg_trg_fiery_explosions, Trig_fiery_explosions_Actions);
}
void Trig_Breathoffire_Periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	unit dammi = LoadUnitHandle(udg_hash, h, 2);
	float xt = LoadReal(udg_hash, h, 3);
	float yt = LoadReal(udg_hash, h, 4);
	bool first = LoadBoolean(udg_hash, h, 5);
	int order = GetUnitCurrentOrder(caster);
	int orderId;
	orderId[$D0278] = $D0278;
	if ((orderId != 0)) {
	else
		orderId[UnitId("channel")] = UnitId("channel");
		if ((orderId != 0)) {
		}
	}
	if (order == orderId) {
		IssuePointOrderById(dammi, $D0264, xt, yt);
		if (first) {
			first[false] = false;
			SaveBoolean(udg_hash, h, 5, first);
			TimerStart(t, 1., true, Trig_Breathoffire_Periodic_Actions);
		}
	else
		RemoveUnit(dammi);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	caster[null] = null;
	dammi[null] = null;
}
void Trig_Breathoffire_Actions() {
	unit caster = GetSpellAbilityUnit();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	location loc;
	float xt;
	float yt;
	unit target = GetSpellTargetUnit();
	float angle;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	unit dammi;
	bool first = true;
	if (target != null) {
		xt[GetUnitX(target)] = GetUnitX(target);
		yt[GetUnitY(target)] = GetUnitY(target);
	else
		loc[GetSpellTargetLoc()] = GetSpellTargetLoc();
		xt[GetLocationX(loc)] = GetLocationX(loc);
		yt[GetLocationY(loc)] = GetLocationY(loc);
	}
	angle[bj_RADTODEG * Atan2(yt - y, xt - x)] = bj_RADTODEG * Atan2(yt - y, xt - x);
	SetUnitFacing(caster, angle);
	dammi[CreateUnit(GetOwningPlayer(caster), 'h00U', x + 50. * Cos(angle * bj_DEGTORAD), y + 50. * Sin(angle * bj_DEGTORAD), angle)] = CreateUnit(GetOwningPlayer(caster), 'h00U', x + 50. * Cos(angle * bj_DEGTORAD), y + 50. * Sin(angle * bj_DEGTORAD), angle);
	UnitAddAbility(dammi, 'A0HM');
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveUnitHandle(udg_hash, h, 2, dammi);
	SaveReal(udg_hash, h, 3, xt);
	SaveReal(udg_hash, h, 4, yt);
	SaveBoolean(udg_hash, h, 5, first);
	TimerStart(t, .04, true, Trig_Breathoffire_Periodic_Actions);
	caster[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	target[null] = null;
	t[null] = null;
	dammi[null] = null;
}
bool Trig_Breathoffire_Conditions() {
	return GetSpellAbilityId() == 'A0HL';
}
void InitTrig_Breathoffire() {
	int index = 0;
	gg_trg_Breathoffire[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Breathoffire, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Breathoffire, Condition(Trig_Breathoffire_Conditions));
	TriggerAddAction(gg_trg_Breathoffire, Trig_Breathoffire_Actions);
}
void Trig_Fire_Explosions_Periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	float xt = LoadReal(udg_hash, h, 2);
	float yt = LoadReal(udg_hash, h, 3);
	float damage = LoadReal(udg_hash, h, 4);
	int order = GetUnitCurrentOrder(caster);
	player p = GetOwningPlayer(caster);
	float xnew;
	float ynew;
	unit dammi;
	int orderId;
	group g;
	unit Picked;
	orderId[$D0278] = $D0278;
	if ((orderId != 0)) {
	else
		orderId[UnitId("channel")] = UnitId("channel");
		if ((orderId != 0)) {
		}
	}
	if (order == orderId) {
		xnew[xt + GetRandomReal(-400., 400.)] = xt + GetRandomReal(-400., 400.);
		ynew[yt + GetRandomReal(-400., 400.)] = yt + GetRandomReal(-400., 400.);
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl", xnew, ynew));
		g[CreateGroup()] = CreateGroup();
		GroupEnumUnitsInRange(g, xnew, ynew, 200., null);
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, p) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				StunUnitTimed(Picked, 1.5);
				dammi[CreateUnit(GetOwningPlayer(caster), 'h00U', xnew, ynew, 270.)] = CreateUnit(GetOwningPlayer(caster), 'h00U', xnew, ynew, 270.);
				UnitAddAbility(dammi, 'A0HR');
				UnitApplyTimedLife(dammi, 'BTLF', 1.5);
				IssueTargetOrderById(dammi, $D02B6, Picked);
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosDone.mdl ", Picked, "chest"));
				dammi[null] = null;
			}
			GroupRemoveUnit(g, Picked);
		}
	else
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	p[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	Picked[null] = null;
	t[null] = null;
	caster[null] = null;
	dammi[null] = null;
}
void Trig_Fire_Explosions_Actions() {
	unit caster = GetSpellAbilityUnit();
	location loc = GetSpellTargetLoc();
	float xt = GetLocationX(loc);
	float yt = GetLocationY(loc);
	timer t = CreateTimer();
	int h = GetHandleId(t);
	float damage = 225.;
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 2, xt);
	SaveReal(udg_hash, h, 3, yt);
	SaveReal(udg_hash, h, 4, damage);
	TimerStart(t, .2, true, Trig_Fire_Explosions_Periodic_Actions);
	caster[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	t[null] = null;
}
bool Trig_Fire_Explosions_Conditions() {
	return GetSpellAbilityId() == 'A0HQ';
}
void InitTrig_Fire_Explosions() {
	int index = 0;
	gg_trg_Fire_Explosions[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Fire_Explosions, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Fire_Explosions, Condition(Trig_Fire_Explosions_Conditions));
	TriggerAddAction(gg_trg_Fire_Explosions, Trig_Fire_Explosions_Actions);
}
void Trig_BossStomp_Remove_DisArmor_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	group gdamage = LoadGroupHandle(udg_hash, h, 1);
	unit Picked;
	while (true) {
		Picked[FirstOfGroup(gdamage)] = FirstOfGroup(gdamage);
		if (Picked == null) break;
		SetArmorAbilityLevel(Picked, 16);
		GroupRemoveUnit(gdamage, Picked);
	}
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
	GroupClear(gdamage);
	DestroyGroup(gdamage);
	gdamage[null] = null;
	Picked[null] = null;
}
void Trig_BossStomp_Actions() {
	unit caster = GetSpellAbilityUnit();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	float radius = 400.;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	float damage = 250.;
	player p = GetOwningPlayer(caster);
	group g = CreateGroup();
	group gdamage = CreateGroup();
	unit Picked;
	float dist;
	float angle;
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", x, y));
	GroupEnumUnitsInRange(g, x, y, radius, null);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, p) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			StunUnitTimed(Picked, 1.75);
			dist[SquareRoot((GetUnitX(Picked) - x) * (GetUnitX(Picked) - x) + (GetUnitY(Picked) - y) * (GetUnitY(Picked) - y))] = SquareRoot((GetUnitX(Picked) - x) * (GetUnitX(Picked) - x) + (GetUnitY(Picked) - y) * (GetUnitY(Picked) - y));
			angle[bj_RADTODEG * Atan2(GetUnitY(Picked) - y, GetUnitX(Picked) - x)] = bj_RADTODEG * Atan2(GetUnitY(Picked) - y, GetUnitX(Picked) - x);
			MoveUnit(Picked, (400. - dist) / 400. + .25, (600. - dist), .0, angle, .0, false);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl", Picked, "head"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl", Picked, "origin"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl", Picked, "hand,left"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl", Picked, "hand,right"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Incinerate\\FireLordDeathExplode.mdl", Picked, "chest"));
			SetArmorAbilityLevel(Picked, -16);
			GroupAddUnit(gdamage, Picked);
		}
		GroupRemoveUnit(g, Picked);
	}
	SaveGroupHandle(udg_hash, h, 1, gdamage);
	TimerStart(t, 12., false, Trig_BossStomp_Remove_DisArmor_Actions);
	caster[null] = null;
	t[null] = null;
	p[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	gdamage[null] = null;
	Picked[null] = null;
}
bool Trig_BossStomp_Conditions() {
	return GetSpellAbilityId() == 'A0HS';
}
void InitTrig_BossStomp() {
	int index = 0;
	gg_trg_BossStomp[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_BossStomp, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_BossStomp, Condition(Trig_BossStomp_Conditions));
	TriggerAddAction(gg_trg_BossStomp, Trig_BossStomp_Actions);
}
void Trig_Mark_of_Fire_Periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	unit dammi = LoadUnitHandle(udg_hash, h, 2);
	effect ef;
	int wait = LoadInteger(udg_hash, h, 4);
	group g;
	unit Picked;
	player p;
	float scale;
	float x;
	float y;
	if (wait > 0) {
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 4, wait);
		scale[1. + ('d' - wait) * .015] = 1. + ('d' - wait) * .015;
		SetUnitScale(dammi, scale, scale, 1.);
	else
		g[CreateGroup()] = CreateGroup();
		p[GetOwningPlayer(caster)] = GetOwningPlayer(caster);
		x[GetUnitX(dammi)] = GetUnitX(dammi);
		y[GetUnitY(dammi)] = GetUnitY(dammi);
		GroupEnumUnitsInRange(g, x, y, 250., null);
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl", x + 100. * Cos(120. * bj_DEGTORAD), y + 100. * Sin(120. * bj_DEGTORAD)));
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl", x + 100. * Cos(240. * bj_DEGTORAD), y + 100. * Sin(240. * bj_DEGTORAD)));
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl", x + 100. * Cos(360. * bj_DEGTORAD), y + 100. * Sin(360. * bj_DEGTORAD)));
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, p) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				UnitDamageTarget(caster, Picked, GetUnitState(Picked, UNIT_STATE_MAX_LIFE) / 2, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosDone.mdl ", Picked, "chest"));
			}
			GroupRemoveUnit(g, Picked);
		}
		GroupClear(g);
		DestroyGroup(g);
		g[null] = null;
		p[null] = null;
		Picked[null] = null;
		ef[LoadEffectHandle(udg_hash, h, 3)] = LoadEffectHandle(udg_hash, h, 3);
		DestroyEffect(ef);
		ef[null] = null;
		ef[LoadEffectHandle(udg_hash, h, 5)] = LoadEffectHandle(udg_hash, h, 5);
		DestroyEffect(ef);
		ef[null] = null;
		ef[LoadEffectHandle(udg_hash, h, 6)] = LoadEffectHandle(udg_hash, h, 6);
		DestroyEffect(ef);
		ef[null] = null;
		RemoveUnit(dammi);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	caster[null] = null;
	dammi[null] = null;
}
void Trig_Mark_of_Fire_Actions() {
	unit caster = GetSpellAbilityUnit();
	location loc = GetSpellTargetLoc();
	float xt = GetLocationX(loc);
	float yt = GetLocationY(loc);
	unit dammi = CreateUnit(GetOwningPlayer(caster), 'h00U', xt, yt, 270.);
	effect ef;
	int wait = $85;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveUnitHandle(udg_hash, h, 2, dammi);
	SaveInteger(udg_hash, h, 4, wait);
	ef[AddSpecialEffectTarget("Abilities\\Spells\\Other\\Doom\\DoomTarget.mdl", dammi, "origin")] = AddSpecialEffectTarget("Abilities\\Spells\\Other\\Doom\\DoomTarget.mdl", dammi, "origin");
	SaveEffectHandle(udg_hash, h, 3, ef);
	ef[null] = null;
	ef[AddSpecialEffectTarget("Abilities\\Spells\\Other\\Doom\\DoomTarget.mdl", dammi, "origin")] = AddSpecialEffectTarget("Abilities\\Spells\\Other\\Doom\\DoomTarget.mdl", dammi, "origin");
	SaveEffectHandle(udg_hash, h, 5, ef);
	ef[null] = null;
	ef[AddSpecialEffectTarget("Abilities\\Spells\\Other\\Doom\\DoomTarget.mdl", dammi, "origin")] = AddSpecialEffectTarget("Abilities\\Spells\\Other\\Doom\\DoomTarget.mdl", dammi, "origin");
	SaveEffectHandle(udg_hash, h, 6, ef);
	ef[null] = null;
	TimerStart(t, .03, true, Trig_Mark_of_Fire_Periodic_Actions);
	caster[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	dammi[null] = null;
	ef[null] = null;
	t[null] = null;
}
bool Trig_Mark_of_Fire_Conditions() {
	return GetSpellAbilityId() == 'A0HT';
}
void InitTrig_Mark_of_Fire() {
	int index = 0;
	gg_trg_Mark_of_Fire[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Mark_of_Fire, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Mark_of_Fire, Condition(Trig_Mark_of_Fire_Conditions));
	TriggerAddAction(gg_trg_Mark_of_Fire, Trig_Mark_of_Fire_Actions);
}
bool Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Conditions() {
	return (udg_Nomer_samoi_volni == $A);
}
bool Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func002C() {
	return (GetUnitAbilityLevelSwapped('A0A0', GetTriggerUnit()) > 0) && (GetRandomInt(1, 2) == 1) && (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group));
}
bool Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func003C() {
	return (GetUnitAbilityLevelSwapped('A0A0', GetAttacker()) > 0) && (GetRandomInt(1, 2) == 1) && (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group));
}
bool Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func004C() {
	return (GetUnitAbilityLevelSwapped('A0HL', GetTriggerUnit()) > 0) && (GetRandomInt(1, 3) == 1) && (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group));
}
bool Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func005C() {
	return (GetUnitAbilityLevelSwapped('A0HL', GetAttacker()) > 0) && (GetRandomInt(1, 2) == 1) && (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group));
}
bool Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func006C() {
	return (GetUnitAbilityLevelSwapped('A0HP', GetTriggerUnit()) > 0) && (GetRandomInt(1, 2) == 1) && (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group));
}
bool Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func007C() {
	return (GetUnitAbilityLevelSwapped('A0HP', GetAttacker()) > 0) && (GetRandomInt(1, 3) == 1) && (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group));
}
bool Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func008C() {
	return (GetUnitAbilityLevelSwapped('A0HT', GetTriggerUnit()) > 0) && (GetRandomInt(1, 2) == 1) && (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group));
}
bool Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func009C() {
	return (GetUnitAbilityLevelSwapped('A0HT', GetAttacker()) > 0) && (GetRandomInt(1, 2) == 1) && (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group));
}
void Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Actions() {
	if ((Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func002C())) {
		IssueImmediateOrderById(GetTriggerUnit(), $D00C4);
	}
	if ((Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func003C())) {
		IssueImmediateOrderById(GetAttacker(), $D00C4);
	}
	if ((Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func004C())) {
		IssueTargetOrderById(GetTriggerUnit(), $D0278, GetAttacker());
	}
	if ((Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func005C())) {
		IssueTargetOrderById(GetAttacker(), $D0278, GetTriggerUnit());
	}
	if ((Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func006C())) {
		IssueTargetOrderById(GetTriggerUnit(), $D02BC, GetAttacker());
	}
	if ((Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func007C())) {
		IssueTargetOrderById(GetAttacker(), $D02BC, GetTriggerUnit());
	}
	if ((Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func008C())) {
		IssuePointOrderById(GetTriggerUnit(), $D00EA, GetUnitX(GetAttacker()), GetUnitY(GetAttacker()));
	}
	if ((Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func009C())) {
		IssuePointOrderById(GetAttacker(), $D00EA, GetUnitX(GetTriggerUnit()), GetUnitY(GetTriggerUnit()));
	}
}
void InitTrig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire() {
	gg_trg_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire[CreateTrigger()] = CreateTrigger();
	TriggerRegisterAnyUnitEventBJ(gg_trg_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire, EVENT_PLAYER_UNIT_ATTACKED);
	TriggerAddCondition(gg_trg_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire, Condition(Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Conditions));
	TriggerAddAction(gg_trg_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire, Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Actions);
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Conditions() {
	return (udg_Nomer_samoi_volni == $A);
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002001002() {
	return (IsPlayerInForce(GetOwningPlayer(GetFilterUnit()), udg_Players_Enemy_Group));
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func001Func001002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func001Func001002001003002001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func001Func001002001003002002() {
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func001Func001002001003002() {
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func001Func001002001003002001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func001Func001002001003002002());
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func001Func001002001003() {
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func001Func001002001003001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func001Func001002001003002());
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func001C() {
	return (GetUnitAbilityLevelSwapped('A0GZ', GetEnumUnit()) > 0) && (GetRandomInt(1, 2) == 3);
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002Func001002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002Func001002001003002001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002Func001002001003002002() {
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002Func001002001003002() {
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002Func001002001003002001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002Func001002001003002002());
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002Func001002001003() {
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002Func001002001003001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002Func001002001003002());
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002Func002C() {
	return (udg_Temp_Unit != null);
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002C() {
	return (GetUnitAbilityLevelSwapped('A0HH', GetEnumUnit()) > 0) && (GetRandomInt(1, 2) == 1);
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003Func003002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003Func003002001003002001() {
	return (GetUnitTypeId(GetFilterUnit()) == 'n01D');
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003Func003002001003002002() {
	return (IsPlayerAlly(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003Func003002001003002() {
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003Func003002001003002001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003Func003002001003002002());
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003Func003002001003() {
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003Func003002001003001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003Func003002001003002());
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003Func004C() {
	return (udg_Temp_Unit != null);
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003C() {
	return (GetUnitAbilityLevelSwapped('A0HG', GetEnumUnit()) > 0) && (GetRandomInt(1, 2) == 1);
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func004Func003002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func004Func003002001003002() {
	return (IsPlayerAlly(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func004Func003002001003() {
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func004Func003002001003001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func004Func003002001003002());
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func004Func004C() {
	return (udg_Temp_Unit != null);
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func004C() {
	return (GetUnitAbilityLevelSwapped('A0HJ', GetEnumUnit()) > 0) && (GetRandomInt(1, 2) == 1);
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func005Func001002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func005Func001002001003002001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func005Func001002001003002002() {
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func005Func001002001003002() {
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func005Func001002001003002001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func005Func001002001003002002());
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func005Func001002001003() {
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func005Func001002001003001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func005Func001002001003002());
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func005C() {
	return (GetUnitAbilityLevelSwapped('A0HO', GetEnumUnit()) > 0) && (GetRandomInt(1, 2) == 3);
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func006Func001002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func006Func001002001003002001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func006Func001002001003002002() {
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func006Func001002001003002() {
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func006Func001002001003002001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func006Func001002001003002002());
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func006Func001002001003() {
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func006Func001002001003001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func006Func001002001003002());
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func006C() {
	return (GetUnitAbilityLevelSwapped('A0HQ', GetEnumUnit()) > 0) && (GetRandomInt(1, 2) == 1);
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007Func001002001003001() {
	return (IsUnitAliveBJ(GetFilterUnit()));
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007Func001002001003002001() {
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE) == false) != null;
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007Func001002001003002002() {
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())));
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007Func001002001003002() {
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007Func001002001003002001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007Func001002001003002002());
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007Func001002001003() {
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007Func001002001003001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007Func001002001003002());
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007Func002C() {
	return (udg_Temp_Unit != null);
}
bool Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007C() {
	return (GetUnitAbilityLevelSwapped('A0HS', GetEnumUnit()) > 0) && (GetRandomInt(1, 2) == 1);
}
void Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002A() {
	if ((Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func001C())) {
		udg_Temp_Unit[GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(600., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func001Func001002001003)))] = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(600., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func001Func001002001003)));
		IssueTargetOrderById(GetEnumUnit(), $D02B6, udg_Temp_Unit);
	}
	if ((Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002C())) {
		udg_Temp_Unit[GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(800., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002Func001002001003)))] = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(800., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002Func001002001003)));
		if ((Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002Func002C())) {
			IssueImmediateOrderById(GetEnumUnit(), $D0081);
		}
	}
	if ((Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003C())) {
		udg_Temp_Unit[GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(700., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003Func003002001003)))] = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(700., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003Func003002001003)));
		if ((Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003Func004C())) {
			IssuePointOrderById(GetEnumUnit(), $D00FA, GetUnitX(udg_Temp_Unit), GetUnitY(udg_Temp_Unit));
		}
	}
	if ((Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func004C())) {
		udg_Temp_Unit[GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(700., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func004Func003002001003)))] = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(700., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func004Func003002001003)));
		if ((Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func004Func004C())) {
			IssueTargetOrderById(GetEnumUnit(), $D0062, udg_Temp_Unit);
		}
	}
	if ((Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func005C())) {
		udg_Temp_Unit[GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(900., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func005Func001002001003)))] = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(900., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func005Func001002001003)));
		IssueTargetOrderById(GetEnumUnit(), $D0255, udg_Temp_Unit);
	}
	if ((Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func006C())) {
		udg_Temp_Unit[GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(900., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func006Func001002001003)))] = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(900., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func006Func001002001003)));
		IssueTargetOrderById(GetEnumUnit(), $D0278, udg_Temp_Unit);
	}
	if ((Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007C())) {
		udg_Temp_Unit[GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(300., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007Func001002001003)))] = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(300., GetUnitLoc(GetEnumUnit()), Condition(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007Func001002001003)));
		if ((Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007Func002C())) {
			IssueImmediateOrderById(GetEnumUnit(), $D0105);
		}
	}
}
void Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Actions() {
	ForGroupBJ(GetUnitsInRectMatching(bj_mapInitialPlayableArea, Condition(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002001002)), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002A);
}
void InitTrig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp() {
	gg_trg_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventPeriodic(gg_trg_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp, 1.);
	TriggerAddCondition(gg_trg_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp, Condition(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Conditions));
	TriggerAddAction(gg_trg_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp, Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Actions);
}
void Trig_Power_of_Skeletons_Remove_Bonuses_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	int damagebonus = LoadInteger(udg_hash, h, 1);
	int asbonus = LoadInteger(udg_hash, h, 2);
	int regenbonus = LoadInteger(udg_hash, h, 3);
	unit target = LoadUnitHandle(udg_hash, h, 4);
	SetAttackAbilityLevel(target, -damagebonus);
	SetAttackSpeedAbilityLevel(target, -asbonus);
	SetUnitLifeAndManaRegeneration(target, "life", -regenbonus);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
	target[null] = null;
}
void Trig_Power_of_Skeletons_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	int lvl = GetUnitAbilityLevel(caster, 'A0B6');
	timer t = CreateTimer();
	int h = GetHandleId(t);
	float time = 14.;
	int damagebonus = $A + 5 * lvl;
	int asbonus = $F + 5 * lvl;
	int regenbonus = 3 + 5 * lvl;
	if (IsUnitType(target, UNIT_TYPE_HERO)) {
		damagebonus[$F + $A * lvl] = $F + $A * lvl;
		asbonus[20 + $A * lvl] = 20 + $A * lvl;
	}
	SetAttackAbilityLevel(target, damagebonus);
	SetAttackSpeedAbilityLevel(target, asbonus);
	SetUnitLifeAndManaRegeneration(target, "life", regenbonus);
	SaveInteger(udg_hash, h, 1, damagebonus);
	SaveInteger(udg_hash, h, 2, asbonus);
	SaveInteger(udg_hash, h, 3, regenbonus);
	SaveUnitHandle(udg_hash, h, 4, target);
	TimerStart(t, time, false, Trig_Power_of_Skeletons_Remove_Bonuses_Actions);
	caster[null] = null;
	target[null] = null;
	t[null] = null;
}
bool Trig_Power_of_Skeletons_Conditions() {
	return GetSpellAbilityId() == 'A0B6';
}
void InitTrig_Power_of_Skeletons() {
	int index = 0;
	gg_trg_Power_of_Skeletons[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Power_of_Skeletons, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Power_of_Skeletons, Condition(Trig_Power_of_Skeletons_Conditions));
	TriggerAddAction(gg_trg_Power_of_Skeletons, Trig_Power_of_Skeletons_Actions);
}
void Trig_Water_Elemental_Load_Actions() {
	AbilityPreload('A071', 6);
	AbilityPreload('A072', 6);
	AbilityPreload('A06Z', 6);
	AbilityPreload('A078', 3);
	AbilityPreload('A06V', 6);
	AbilityPreload('A06X', 1);
	AbilityPreload('A07L', 1);
	AbilityPreload('A07K', 1);
	AbilityPreload('A07J', 1);
	EffectPreload("war3mapImported\\s_WateryAura.mdx");
	EffectPreload("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl");
	EffectPreload("war3mapImported\\AquaSpike.mdx");
	EffectPreload("Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveDamage.mdl");
	EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodFootman.mdl");
	UnitPreload('h017');
	UnitPreload('h01D');
	UnitPreload('h01E');
	UnitPreload('h01F');
	UnitPreload('h01G');
	UnitPreload('h01H');
	EnableTrigger(gg_trg_spirits_of_water_dead);
	EnableTrigger(gg_trg_Skill_Gertva);
	EnableTrigger(gg_trg_Opening_Streams);
	EnableTrigger(gg_trg_Tsunami);
	EnableTrigger(gg_trg_Water_Explosion);
}
void InitTrig_Water_Elemental_Load() {
	gg_trg_Water_Elemental_Load[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Water_Elemental_Load, Trig_Water_Elemental_Load_Actions);
}
void Trig_Init_kreeps_Actions() {
	udg_spirits_of_water['h017'] = 'h017';
	udg_spirits_of_water['h01D'] = 'h01D';
	udg_spirits_of_water['h01E'] = 'h01E';
	udg_spirits_of_water['h01F'] = 'h01F';
	udg_spirits_of_water['h01G'] = 'h01G';
	udg_spirits_of_water['h01H'] = 'h01H';
	udg_Integer_spirits_of_water[0] = 0;
}
void InitTrig_Init_kreeps() {
	gg_trg_Init_kreeps[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Init_kreeps, Trig_Init_kreeps_Actions);
}
bool Trig_spirits_of_water_dead_Conditions() {
	int id = GetUnitTypeId(GetDyingUnit());
	return (id == 'h017' || id == 'h01D' || id == 'h01E' || id == 'h01F' || id == 'h01G' || id == 'h01H') && IsUnitIllusion(GetDyingUnit()) == false;
}
void Trig_spirits_of_water_dead_Actions() {
	unit elemental = GetDyingUnit();
	unit hero = LoadUnitHandle(udg_hash, GetHandleId(elemental), 63);
	SaveInteger(udg_hash, GetHandleId(hero), 64, LoadInteger(udg_hash, GetHandleId(hero), 64) - 1);
	DestroyEffect(LoadEffectHandle(udg_hash, GetHandleId(elemental), '{'));
	FlushChildHashtable(udg_hash, GetHandleId(elemental));
}
void InitTrig_spirits_of_water_dead() {
	int index = 0;
	gg_trg_spirits_of_water_dead[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_spirits_of_water_dead, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_spirits_of_water_dead, Condition(Trig_spirits_of_water_dead_Conditions));
	TriggerAddAction(gg_trg_spirits_of_water_dead, Trig_spirits_of_water_dead_Actions);
}
bool Trig_Skill_Gertva_Conditions() {
	int id = GetUnitTypeId(GetSpellTargetUnit());
	return GetSpellAbilityId() == 'A06X' && IsUnitIllusion(GetSpellTargetUnit()) == false && (id == 'H01I' || id == 'h017' || id == 'h01D' || id == 'h01E' || id == 'h01F' || id == 'h01G' || id == 'h01H');
}
void Trig_Skill_Gertva_Actions() {
	DestroyEffect(AddSpecialEffectTarget("units\\human\\WaterElemental\\WaterElemental.mdl", GetSpellTargetUnit(), "chest"));
	SetUnitState(GetSpellTargetUnit(), UNIT_STATE_LIFE, GetUnitState(GetSpellTargetUnit(), UNIT_STATE_LIFE) + (.66 * GetUnitState(GetSpellAbilityUnit(), UNIT_STATE_LIFE)) + .1 * GetUnitState(GetSpellTargetUnit(), UNIT_STATE_MAX_LIFE));
	KillUnit(GetSpellAbilityUnit());
}
void InitTrig_Skill_Gertva() {
	int index = 0;
	gg_trg_Skill_Gertva[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Skill_Gertva, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Skill_Gertva, Condition(Trig_Skill_Gertva_Conditions));
	TriggerAddAction(gg_trg_Skill_Gertva, Trig_Skill_Gertva_Actions);
}
void Trig_Opening_Streams_Destructables() {
	KillDestructable(GetEnumDestructable());
}
void Trig_Opening_Streams_unit_Actions() {
	timer tu = GetExpiredTimer();
	int ht = GetHandleId(tu);
	unit pilot = LoadUnitHandle(udg_hash, ht, 1);
	float dist = LoadReal(udg_hash, ht, 2);
	float speed = LoadReal(udg_hash, ht, 3);
	float angleu = LoadReal(udg_hash, ht, 4);
	float waitu = LoadReal(udg_hash, ht, 5);
	float waitucheck = LoadReal(udg_hash, ht, 6);
	unit caster = LoadUnitHandle(udg_hash, ht, 7);
	float damage = LoadReal(udg_hash, ht, 8);
	float x = GetUnitX(pilot) + speed * Cos(angleu * bj_DEGTORAD);
	float y = GetUnitY(pilot) + speed * Sin(angleu * bj_DEGTORAD);
	rect r;
	if (waitu > 0) {
		waitu[waitu - 1] = waitu - 1;
		SaveReal(udg_hash, ht, 5, waitu);
		if (IsTerrainPathable(x, y, PATHING_TYPE_FLYABILITY) == false && GetTerrainCliffLevel(x, y) == GetTerrainCliffLevel(GetUnitX(pilot), GetUnitY(pilot))) {
			SetUnitX(pilot, x);
			SetUnitY(pilot, y);
		}
		if (waitu <= waitucheck) {
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveDamage.mdl", pilot, "chest"));
			SetUnitFlyHeight(pilot, 0, 2 * (dist + 50));
		}
	else
		r[Rect(x - 175., y - 175., x + 175., y + 175.)] = Rect(x - 175., y - 175., x + 175., y + 175.);
		EnumDestructablesInRect(r, null, Trig_Opening_Streams_Destructables);
		UnitDamageTarget(caster, pilot, damage / 2, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
		DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodFootman.mdl", pilot, "origin"));
		SetUnitPathing(pilot, true);
		RemoveRect(r);
		r[null] = null;
		FlushChildHashtable(udg_hash, ht);
		DestroyTimer(tu);
	}
	tu[null] = null;
	pilot[null] = null;
	caster[null] = null;
}
void Trig_Opening_Streams_periodic_Actions() {
	timer tper = GetExpiredTimer();
	int hper = GetHandleId(tper);
	unit caster = LoadUnitHandle(udg_hash, hper, 1);
	float xloc = LoadReal(udg_hash, hper, 2);
	float yloc = LoadReal(udg_hash, hper, 3);
	int wait = LoadInteger(udg_hash, hper, 4);
	float damage = LoadReal(udg_hash, hper, 5);
	float angle = 10. * wait;
	array<unit> water;
	int lop = 1;
	effect ef;
	float x;
	float y;
	timer tu;
	int ht;
	group g;
	unit Picked;
	float dist;
	float angleu;
	float speed;
	float waitu;
	if (wait < 50) {
		while (true) {
			if (lop > 18) break;
			x[xloc + (350. - (wait * 5.)) * Cos(angle * bj_DEGTORAD)] = xloc + (350. - (wait * 5.)) * Cos(angle * bj_DEGTORAD);
			y[yloc + (350. - (wait * 5.)) * Sin(angle * bj_DEGTORAD)] = yloc + (350. - (wait * 5.)) * Sin(angle * bj_DEGTORAD);
			if (IsTerrainPathable(x, y, PATHING_TYPE_FLYABILITY) == false) {
				water[LoadUnitHandle(udg_hash, hper, 5 + lop)] = LoadUnitHandle(udg_hash, hper, 5 + lop);
				SetUnitPosition(water[lop], x, y);
			}
			angle[angle + 20.] = angle + 20.;
			lop[lop + 1] = lop + 1;
			water[null] = null;
		}
		wait[wait + 1] = wait + 1;
		SaveInteger(udg_hash, hper, 4, wait);
	else
		angle[72.] = 72.;
		while (true) {
			lop[lop + 1] = lop + 1;
			if (lop > 6) break;
			x[xloc + 125. * Cos(angle * bj_DEGTORAD)] = xloc + 125. * Cos(angle * bj_DEGTORAD);
			y[yloc + 125. * Sin(angle * bj_DEGTORAD)] = yloc + 125. * Sin(angle * bj_DEGTORAD);
			DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl", x, y));
			DestroyEffect(AddSpecialEffect("war3mapImported\\AquaSpike.mdx", x, y));
			angle[angle + 72.] = angle + 72.;
		}
		lop[1] = 1;
		while (true) {
			if (lop > 18) break;
			water[LoadUnitHandle(udg_hash, hper, 5 + lop)] = LoadUnitHandle(udg_hash, hper, 5 + lop);
			ef[LoadEffectHandle(udg_hash, GetHandleId(water[lop]), 1)] = LoadEffectHandle(udg_hash, GetHandleId(water[lop]), 1);
			DestroyEffect(ef);
			FlushChildHashtable(udg_hash, GetHandleId(water[lop]));
			UnitApplyTimedLife(water[lop], 'BTLF', .5);
			KillUnit(water[lop]);
			water[null] = null;
			ef[null] = null;
			lop[lop + 1] = lop + 1;
		}
		g[CreateGroup()] = CreateGroup();
		GroupEnumUnitsInRange(g, xloc, yloc, 350., null);
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, GetOwningPlayer(caster)) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_GROUND) && GetUnitTypeId(Picked) != 'h00U') {
				tu[CreateTimer()] = CreateTimer();
				ht[GetHandleId(tu)] = GetHandleId(tu);
				UnitAddAbility(Picked, 'Amrf');
				UnitRemoveAbility(Picked, 'Amrf');
				SetUnitPathing(Picked, false);
				dist[300. - (SquareRoot((GetUnitX(Picked) - xloc) * (GetUnitX(Picked) - xloc) + (GetUnitY(Picked) - yloc) * (GetUnitY(Picked) - yloc)))] = 300. - (SquareRoot((GetUnitX(Picked) - xloc) * (GetUnitX(Picked) - xloc) + (GetUnitY(Picked) - yloc) * (GetUnitY(Picked) - yloc)));
				speed[(2 * dist) / 80. + 3.125] = (2 * dist) / 80. + 3.125;
				angleu[bj_RADTODEG * Atan2(GetUnitY(Picked) - yloc, GetUnitX(Picked) - xloc)] = bj_RADTODEG * Atan2(GetUnitY(Picked) - yloc, GetUnitX(Picked) - xloc);
				waitu[((2 * dist) + 50.) / (speed * 2)] = ((2 * dist) + 50.) / (speed * 2);
				SetUnitFlyHeight(Picked, dist + 50, 2 * (dist + 50));
				SaveUnitHandle(udg_hash, ht, 1, Picked);
				SaveReal(udg_hash, ht, 2, dist);
				SaveReal(udg_hash, ht, 3, speed);
				SaveReal(udg_hash, ht, 4, angleu);
				SaveReal(udg_hash, ht, 5, waitu);
				SaveReal(udg_hash, ht, 6, (waitu / 2));
				SaveUnitHandle(udg_hash, ht, 7, caster);
				SaveReal(udg_hash, ht, 8, damage);
				UnitDamageTarget(caster, Picked, damage / 2, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveDamage.mdl", Picked, "chest"));
				TimerStart(tu, .025, true, Trig_Opening_Streams_unit_Actions);
				tu[null] = null;
			}
			GroupRemoveUnit(g, Picked);
		}
		FlushChildHashtable(udg_hash, hper);
		DestroyTimer(tper);
	}
	wait[wait + 1] = wait + 1;
	SaveInteger(udg_hash, hper, 4, wait);
	DestroyGroup(g);
	g[null] = null;
	Picked[null] = null;
	tper[null] = null;
	caster[null] = null;
}
void Trig_Opening_Streams_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	location loc = GetSpellTargetLoc();
	float xloc = GetLocationX(loc);
	float yloc = GetLocationY(loc);
	float angle = .0;
	int wait = 0;
	array<unit> water;
	int lop = 1;
	float x;
	float y;
	timer tper = CreateTimer();
	int hper = GetHandleId(tper);
	effect ef;
	int lvl = GetUnitAbilityLevel(caster, 'A072');
	float damage = ($F * lvl) + (5 * lvl * lvl) + 20.;
	while (true) {
		if (lop > 18) break;
		x[xloc + 350. * Cos(angle * bj_DEGTORAD)] = xloc + 350. * Cos(angle * bj_DEGTORAD);
		y[yloc + 350. * Sin(angle * bj_DEGTORAD)] = yloc + 350. * Sin(angle * bj_DEGTORAD);
		if (IsTerrainPathable(x, y, PATHING_TYPE_FLYABILITY) == false) {
			water[CreateUnit(p, 'h00U', x, y, .0)] = CreateUnit(p, 'h00U', x, y, .0);
			SaveUnitHandle(udg_hash, hper, 5 + lop, water[lop]);
			ef[AddSpecialEffectTarget("war3mapImported\\s_WateryAura.mdx", water[lop], "chest")] = AddSpecialEffectTarget("war3mapImported\\s_WateryAura.mdx", water[lop], "chest");
			SaveEffectHandle(udg_hash, GetHandleId(water[lop]), 1, ef);
			ef[null] = null;
		}
		angle[angle + 20.] = angle + 20.;
		lop[lop + 1] = lop + 1;
		water[null] = null;
	}
	SaveUnitHandle(udg_hash, hper, 1, caster);
	SaveReal(udg_hash, hper, 2, xloc);
	SaveReal(udg_hash, hper, 3, yloc);
	SaveInteger(udg_hash, hper, 4, wait);
	SaveReal(udg_hash, hper, 5, damage);
	TimerStart(tper, .04, true, Trig_Opening_Streams_periodic_Actions);
	caster[null] = null;
	p[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	tper[null] = null;
}
bool Trig_Opening_Streams_Conditions() {
	return GetSpellAbilityId() == 'A072';
}
void InitTrig_Opening_Streams() {
	int index = 0;
	gg_trg_Opening_Streams[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Opening_Streams, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Opening_Streams, Condition(Trig_Opening_Streams_Conditions));
	TriggerAddAction(gg_trg_Opening_Streams, Trig_Opening_Streams_Actions);
}
void Trig_water_explosion_Dest_Actions() {
	KillDestructable(GetEnumDestructable());
}
void Trig_water_explosion_periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	int amount = LoadInteger(udg_hash, h, 1);
	unit caster = LoadUnitHandle(udg_hash, h, 2);
	float xloc = LoadReal(udg_hash, h, 3);
	float yloc = LoadReal(udg_hash, h, 4);
	float damage = LoadReal(udg_hash, h, 5);
	float stuntime = LoadReal(udg_hash, h, 6);
	unit u;
	float angle = 0;
	float angle2 = 0;
	float dist = 0;
	float x = 0;
	float y = 0;
	group g;
	group gmain = CreateGroup();
	player p = GetOwningPlayer(caster);
	unit Picked;
	rect r;
	if (amount == 7) {
		angle[51.43] = 51.43;
		angle2[51.43] = 51.43;
		dist[$AF] = $AF;
	}
	if (amount == 1) {
		angle[120.] = 120.;
		angle2[120.] = 120.;
		dist[0] = 0;
	}
	if (amount == $D) {
		angle[27.69] = 27.69;
		angle2[27.69] = 27.69;
		dist[350] = 350;
	}
	bj_forLoopAIndex[1] = 1;
	while (true) {
		if (bj_forLoopAIndex > amount) break;
		g[CreateGroup()] = CreateGroup();
		x[xloc + dist * Cos(angle * bj_DEGTORAD)] = xloc + dist * Cos(angle * bj_DEGTORAD);
		y[yloc + dist * Sin(angle * bj_DEGTORAD)] = yloc + dist * Sin(angle * bj_DEGTORAD);
		r[Rect(x - 100., y - 100., x + 100., y + 100.)] = Rect(x - 100., y - 100., x + 100., y + 100.);
		EnumDestructablesInRect(r, null, Trig_water_explosion_Dest_Actions);
		RemoveRect(r);
		r[null] = null;
		DestroyEffect(AddSpecialEffect("war3mapImported\\s_WateryAura.mdx", x, y));
		DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl", x, y));
		GroupEnumUnitsInRange(g, x, y, 100., null);
		GroupAddGroup(g, gmain);
		GroupClear(g);
		DestroyGroup(g);
		g[null] = null;
		bj_forLoopAIndex[bj_forLoopAIndex + 1] = bj_forLoopAIndex + 1;
		angle[angle + angle2] = angle + angle2;
	}
	while (true) {
		Picked[FirstOfGroup(gmain)] = FirstOfGroup(gmain);
		if (Picked == null) break;
		if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			StunUnitTimed(Picked, stuntime);
		}
		GroupRemoveUnit(gmain, Picked);
	}
	SaveInteger(udg_hash, h, 1, amount - 6);
	if (amount < -1) {
		DestroyTimer(t);
		FlushChildHashtable(udg_hash, h);
	else
		TimerStart(t, .75, false, Trig_water_explosion_periodic_Actions);
	}
	t[null] = null;
	caster[null] = null;
	GroupClear(gmain);
	DestroyGroup(gmain);
	gmain[null] = null;
	p[null] = null;
	Picked[null] = null;
}
void Trig_water_explosion_Actions() {
	timer t = CreateTimer();
	int h = GetHandleId(t);
	int amount = $D;
	unit caster = GetSpellAbilityUnit();
	location loc = GetSpellTargetLoc();
	float xloc = GetLocationX(loc);
	float yloc = GetLocationY(loc);
	int lvl = GetUnitAbilityLevel(caster, 'A071');
	float damage;
	float stuntime = 1.35 + (.15 * lvl);
	if (lvl == 1) {
		damage[30.] = 30.;
	}
	if (lvl == 2) {
		damage[55.] = 55.;
	}
	if (lvl == 3) {
		damage[75.] = 75.;
	}
	if (lvl == 4) {
		damage[110.] = 110.;
	}
	if (lvl == 5) {
		damage[145.] = 145.;
	}
	if (lvl == 6) {
		damage[190.] = 190.;
	}
	SaveInteger(udg_hash, h, 1, amount);
	SaveUnitHandle(udg_hash, h, 2, caster);
	SaveReal(udg_hash, h, 3, xloc);
	SaveReal(udg_hash, h, 4, yloc);
	SaveReal(udg_hash, h, 5, damage);
	SaveReal(udg_hash, h, 6, stuntime);
	TimerStart(t, .06, false, Trig_water_explosion_periodic_Actions);
	t[null] = null;
	caster[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
}
bool Trig_water_explosion_Conditions() {
	return GetSpellAbilityId() == 'A071';
}
void InitTrig_Water_Explosion() {
	int index = 0;
	gg_trg_Water_Explosion[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Water_Explosion, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Water_Explosion, Condition(Trig_water_explosion_Conditions));
	TriggerAddAction(gg_trg_Water_Explosion, Trig_water_explosion_Actions);
}
void Trig_Tsunami_periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	int wait = LoadInteger(udg_hash, h, 2);
	float damage = LoadReal(udg_hash, h, 3);
	group g = LoadGroupHandle(udg_hash, h, 4);
	array<unit> water;
	int lop = 1;
	group grup = CreateGroup();
	unit Picked;
	float x;
	float y;
	bool create;
	int count;
	int lopa;
	unit dammi;
	if (wait > 0) {
		while (true) {
			if (lop > 60) break;
			water[LoadUnitHandle(udg_hash, h, 5 + lop)] = LoadUnitHandle(udg_hash, h, 5 + lop);
			x[GetUnitX(water[lop]) + 25. * Cos(GetUnitFacing(water[lop]) * bj_DEGTORAD)] = GetUnitX(water[lop]) + 25. * Cos(GetUnitFacing(water[lop]) * bj_DEGTORAD);
			y[GetUnitY(water[lop]) + 25. * Sin(GetUnitFacing(water[lop]) * bj_DEGTORAD)] = GetUnitY(water[lop]) + 25. * Sin(GetUnitFacing(water[lop]) * bj_DEGTORAD);
			if (IsTerrainPathable(x, y, PATHING_TYPE_FLYABILITY) == false) {
				SetUnitPosition(water[lop], x, y);
			}
			GroupEnumUnitsInRange(grup, x, y, '}', null);
			while (true) {
				Picked[FirstOfGroup(grup)] = FirstOfGroup(grup);
				if (Picked == null) break;
				if (IsUnitEnemy(Picked, GetOwningPlayer(caster)) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitInGroup(Picked, g) == false) {
					UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
					AddSpecialEffectTarget("Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveDamage.mdl", Picked, "chest");
					GroupAddUnit(g, Picked);
				}
				GroupRemoveUnit(grup, Picked);
			}
			Picked[null] = null;
			water[null] = null;
			lop[lop + 1] = lop + 1;
		}
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 2, wait);
		SaveGroupHandle(udg_hash, h, 4, g);
	else
		create[LoadBoolean(udg_hash, h, 5)] = LoadBoolean(udg_hash, h, 5);
		if (create) {
			count[(GetUnitAbilityLevel(caster, 'A06Z') + 2) - LoadInteger(udg_hash, GetHandleId(caster), 64)] = (GetUnitAbilityLevel(caster, 'A06Z') + 2) - LoadInteger(udg_hash, GetHandleId(caster), 64);
			SaveInteger(udg_hash, GetHandleId(caster), 64, GetUnitAbilityLevel(caster, 'A06Z') + 2);
			lopa[1] = 1;
			while (true) {
				if (lopa > count) break;
				water[LoadUnitHandle(udg_hash, h, 5 + GetRandomInt(1, 60))] = LoadUnitHandle(udg_hash, h, 5 + GetRandomInt(1, 60));
				dammi[CreateUnit(GetOwningPlayer(caster), udg_spirits_of_water[GetUnitAbilityLevel(caster, 'A06Z')], GetUnitX(water[lop]), GetUnitY(water[lop]), GetRandomReal(0, 360))] = CreateUnit(GetOwningPlayer(caster), udg_spirits_of_water[GetUnitAbilityLevel(caster, 'A06Z')], GetUnitX(water[lop]), GetUnitY(water[lop]), GetRandomReal(0, 360));
				SaveUnitHandle(udg_hash, GetHandleId(dammi), 63, caster);
				dammi[null] = null;
				water[null] = null;
				lopa[lopa + 1] = lopa + 1;
			}
		}
		while (true) {
			if (lop > 60) break;
			water[LoadUnitHandle(udg_hash, h, 5 + lop)] = LoadUnitHandle(udg_hash, h, 5 + lop);
			x[GetUnitX(water[lop])] = GetUnitX(water[lop]);
			y[GetUnitY(water[lop])] = GetUnitY(water[lop]);
			if (lop - (lop / 2) * 2 == 0) {
				AddSpecialEffect("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl", x, y);
			}
			if (lop - (lop / 4) * 4 == 0) {
				AddSpecialEffect("war3mapImported\\AquaSpike.mdx", x, y);
			}
			DestroyEffect(LoadEffectHandle(udg_hash, GetHandleId(water[lop]), 1));
			KillUnit(water[lop]);
			water[null] = null;
			FlushChildHashtable(udg_hash, GetHandleId(water[lop]));
			lop[lop + 1] = lop + 1;
		}
		GroupClear(g);
		DestroyGroup(g);
		g[null] = null;
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	DestroyGroup(grup);
	grup[null] = null;
	t[null] = null;
	caster[null] = null;
	g[null] = null;
}
void Trig_Tsunami_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	location loc = GetSpellTargetLoc();
	float xloc = GetLocationX(loc);
	float yloc = GetLocationY(loc);
	float xc = GetUnitX(caster);
	float yc = GetUnitY(caster);
	array<unit> water;
	int lopa = 1;
	int lopb = 1;
	float anglecaster = bj_RADTODEG * Atan2(yloc - GetUnitY(caster), xloc - GetUnitX(caster));
	float xsmec = xc - 400. * Cos(anglecaster * bj_DEGTORAD);
	float ysmec = yc - 400. * Sin(anglecaster * bj_DEGTORAD);
	float anglesmec = .0;
	float xp = xsmec + 630. * Cos((anglecaster - 90.) * bj_DEGTORAD);
	float yp = ysmec + 630. * Sin((anglecaster - 90.) * bj_DEGTORAD);
	timer t = CreateTimer();
	int h = GetHandleId(t);
	int wait = 40;
	int lvl = GetUnitAbilityLevel(caster, 'A078');
	int lvlup = GetUnitAbilityLevel(caster, 'A0Q9');
	bool create;
	float damage;
	group g = CreateGroup();
	effect ef;
	if (lvl > 0) {
		damage[lvl * (2. * (62.5 + GetHeroInt(caster, true)))] = lvl * (2. * (62.5 + GetHeroInt(caster, true)));
		create[false] = false;
	}
	if (lvlup > 0) {
		damage[lvlup * (2. * (87.5 + GetHeroInt(caster, true))) + 25.] = lvlup * (2. * (87.5 + GetHeroInt(caster, true))) + 25.;
		create[true] = true;
	}
	while (true) {
		if (lopa > 3) break;
		xp[xp + 80. * Cos(anglecaster * bj_DEGTORAD)] = xp + 80. * Cos(anglecaster * bj_DEGTORAD);
		yp[yp + 80. * Sin(anglecaster * bj_DEGTORAD)] = yp + 80. * Sin(anglecaster * bj_DEGTORAD);
		lopb[1] = 1;
		while (true) {
			if (lopb > 20) break;
			if (IsTerrainPathable(xp - (lopb * 60.) * Cos((anglecaster - 90.) * bj_DEGTORAD), yp - (lopb * 60.) * Sin((anglecaster - 90.) * bj_DEGTORAD), PATHING_TYPE_FLYABILITY) == false) {
				water[CreateUnit(p, 'h00U', xp - (lopb * 60.) * Cos((anglecaster - 90.) * bj_DEGTORAD), yp - (lopb * 60.) * Sin((anglecaster - 90.) * bj_DEGTORAD), anglecaster)] = CreateUnit(p, 'h00U', xp - (lopb * 60.) * Cos((anglecaster - 90.) * bj_DEGTORAD), yp - (lopb * 60.) * Sin((anglecaster - 90.) * bj_DEGTORAD), anglecaster);
				ef[AddSpecialEffectTarget("war3mapImported\\s_WateryAura.mdx", water[(20 * lopa) + lopb - 20], "chest")] = AddSpecialEffectTarget("war3mapImported\\s_WateryAura.mdx", water[(20 * lopa) + lopb - 20], "chest");
				SaveUnitHandle(udg_hash, h, 5 + (20 * lopa) + lopb - 20, water[(20 * lopa) + lopb - 20]);
				SaveEffectHandle(udg_hash, GetHandleId(water[(20 * lopa) + lopb - 20]), 1, ef);
				ef[null] = null;
				water[null] = null;
			}
			lopb[lopb + 1] = lopb + 1;
		}
		lopa[lopa + 1] = lopa + 1;
	}
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveInteger(udg_hash, h, 2, wait);
	SaveReal(udg_hash, h, 3, damage);
	SaveBoolean(udg_hash, h, 5, create);
	SaveGroupHandle(udg_hash, h, 4, g);
	TimerStart(t, .04, true, Trig_Tsunami_periodic_Actions);
	caster[null] = null;
	p[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	t[null] = null;
	g[null] = null;
}
bool Trig_Tsunami_Conditions() {
	return (GetSpellAbilityId() == 'A078' || GetSpellAbilityId() == 'A0Q9');
}
void InitTrig_Tsunami() {
	int index = 0;
	gg_trg_Tsunami[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Tsunami, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Tsunami, Condition(Trig_Tsunami_Conditions));
	TriggerAddAction(gg_trg_Tsunami, Trig_Tsunami_Actions);
}
void Trig_Guardsman_Load_Actions() {
	AbilityPreload('A0EZ', 6);
	AbilityPreload('A0ET', 6);
	AbilityPreload('A0EU', 6);
	AbilityPreload('A0EY', 3);
	AbilityPreload('A0EV', 1);
	AbilityPreload('A0EX', 2);
	AbilityPreload('A0F0', 6);
	AbilityPreload('B02I', 1);
	AbilityPreload('B02J', 1);
	EffectPreload("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl");
	EffectPreload("Abilities\\Spells\\Human\\Defend\\DefendCaster.mdl");
	EffectPreload("Abilities\\Spells\\NightElf\\BattleRoar\\RoarCaster.mdl");
	EffectPreload("Abilities\\Spells\\Orc\\Bloodlust\\BloodlustTarget.mdl");
	EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl");
	EffectPreload("Abilities\\Spells\\Human\\StormBolt\\StormBoltMissile.mdl");
	EnableTrigger(gg_trg_Protective_Stand_Switch);
	EnableTrigger(gg_trg_Learn_Fighting_Skills);
	EnableTrigger(gg_trg_Ram_Board);
	EnableTrigger(gg_trg_Warcry);
}
void InitTrig_Guardsman_Load() {
	gg_trg_Guardsman_Load[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Guardsman_Load, Trig_Guardsman_Load_Actions);
}
void Trig_Protective_Stand_Switch_Actions() {
	unit caster = GetTriggerUnit();
	int h = GetHandleId(caster);
	int bonus = 5 + 5 * GetUnitAbilityLevel(caster, 'A0EU');
	if (caster == GetDyingUnit()) {
		SaveBoolean(udg_hash, GetHandleId(caster), 3, true);
	else
		if (LoadBoolean(udg_hash, GetHandleId(caster), 3) == false) {
			if ((GetIssuedOrderId() == $D0057)) {
				if (GetUnitAbilityLevel(caster, 'A0EU') > 0) {
					SetAttackSpeedAbilityLevel(caster, -(bonus));
				}
				SaveBoolean(udg_hash, GetHandleId(caster), 1, true);
			}
			if ((GetIssuedOrderId() == $D0058)) {
				if (GetUnitAbilityLevel(caster, 'A0EU') > 0) {
					SetAttackSpeedAbilityLevel(caster, bonus);
				}
				SaveBoolean(udg_hash, GetHandleId(caster), 1, false);
			}
		else
			SaveBoolean(udg_hash, GetHandleId(caster), 3, false);
		}
	}
	caster[null] = null;
}
bool Trig_Protective_Stand_Switch_Conditions() {
	return GetUnitAbilityLevel(GetTriggerUnit(), 'A0ET') > 0;
}
void InitTrig_Protective_Stand_Switch() {
	int index = 0;
	gg_trg_Protective_Stand_Switch[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Protective_Stand_Switch, Player(index), EVENT_PLAYER_UNIT_ISSUED_ORDER, null);
		TriggerRegisterPlayerUnitEvent(gg_trg_Protective_Stand_Switch, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Protective_Stand_Switch, Condition(Trig_Protective_Stand_Switch_Conditions));
	TriggerAddAction(gg_trg_Protective_Stand_Switch, Trig_Protective_Stand_Switch_Actions);
}
void Trig_Learn_Fighting_Skills_Actions() {
	unit u = GetLearningUnit();
	int h = GetHandleId(u);
	int lvl = GetUnitAbilityLevel(u, 'A0EU');
	if (lvl == 1) {
		SaveInteger(udg_hash, h, 2, $A);
		SetAttackAbilityLevel(u, $A);
		SetArmorAbilityLevel(u, 2);
		if (LoadBoolean(udg_hash, h, 1) == false) {
			SetAttackSpeedAbilityLevel(u, $A);
		}
	else
		SetAttackAbilityLevel(u, 5);
		SetArmorAbilityLevel(u, 1);
		if (LoadBoolean(udg_hash, h, 1) == false) {
			SetAttackSpeedAbilityLevel(u, 5);
		}
	}
	u[null] = null;
}
bool Trig_Learn_Fighting_Skills_Conditions() {
	return GetLearnedSkill() == 'A0EU' && GetUnitTypeId(GetLearningUnit()) != 'h00U';
}
void InitTrig_Learn_Fighting_Skills() {
	int index = 0;
	gg_trg_Learn_Fighting_Skills[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Fighting_Skills, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Learn_Fighting_Skills, Condition(Trig_Learn_Fighting_Skills_Conditions));
	TriggerAddAction(gg_trg_Learn_Fighting_Skills, Trig_Learn_Fighting_Skills_Actions);
}
void Trig_Ram_Board_Move_Dest_Actions() {
	KillDestructable(GetEnumDestructable());
}
void Trig_Ram_Board_Move_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	group gdamage = LoadGroupHandle(udg_hash, h, 2);
	float damage = LoadReal(udg_hash, h, 3);
	int lvlstun = LoadInteger(udg_hash, h, 4);
	int wait = LoadInteger(udg_hash, h, 5);
	float face = LoadReal(udg_hash, h, 6);
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	player p = GetOwningPlayer(caster);
	group g = CreateGroup();
	unit Picked;
	float angle;
	float angle2;
	unit dammi;
	bool alife = true;
	rect r = Rect(x - 100., y - 100., x + 100., y + 100.);
	EnumDestructablesInRect(r, null, Trig_Ram_Board_Move_Dest_Actions);
	if (GetUnitState(caster, UNIT_STATE_LIFE) < .405) {
		alife[false] = false;
	}
	if (wait > 0 && alife) {
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 5, wait);
		SetUnitFacing(caster, face);
		SetUnitAnimationByIndex(caster, 8);
		GroupEnumUnitsInRange(g, x, y, 125., null);
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && IsUnitInGroup(Picked, gdamage) == false && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				GroupAddUnit(gdamage, Picked);
				DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\StormBolt\\StormBoltMissile.mdl", Picked, "chest"));
				dammi[CreateUnit(p, 'h00U', x, y, .0)] = CreateUnit(p, 'h00U', x, y, .0);
				UnitApplyTimedLife(dammi, 'BTLF', .5);
				UnitAddAbility(dammi, 'A0EX');
				SetUnitAbilityLevel(dammi, 'A0EX', lvlstun);
				IssueTargetOrderById(dammi, $D007F, Picked);
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				dammi[null] = null;
				angle[bj_RADTODEG * Atan2(GetUnitY(Picked) - y, GetUnitX(Picked) - x)] = bj_RADTODEG * Atan2(GetUnitY(Picked) - y, GetUnitX(Picked) - x);
				angle2[(Atan2(y - GetUnitY(Picked), x - GetUnitX(Picked)) * bj_RADTODEG) + 360.] = (Atan2(y - GetUnitY(Picked), x - GetUnitX(Picked)) * bj_RADTODEG) + 360.;
				if ((angle2 <= (GetUnitFacing(caster) + 210.) && angle2 >= (GetUnitFacing(caster) + 180.))) {
					angle[angle + 30.] = angle + 30.;
				}
				if ((angle2 <= (GetUnitFacing(caster) + 180.) && angle2 >= (GetUnitFacing(caster) + 150.))) {
					angle[angle - 30.] = angle - 30.;
				}
				MoveUnit(Picked, 1., 400., 400., angle, .0, false);
			}
			GroupRemoveUnit(g, Picked);
		}
		SaveGroupHandle(udg_hash, h, 2, gdamage);
	else
		if (alife) {
			if (LoadBoolean(udg_hash, GetHandleId(caster), 1)) {
				SetUnitAnimation(caster, "Stand Defend");
			else
				SetUnitAnimation(caster, "stand");
			}
		}
		SetUnitPathing(caster, true);
		SetUnitTimeScale(caster, 1.);
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	caster[null] = null;
	gdamage[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	p[null] = null;
	Picked[null] = null;
	dammi[null] = null;
	RemoveRect(r);
	r[null] = null;
}
void Trig_Ram_Board_Actions() {
	unit caster = GetSpellAbilityUnit();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	unit target = GetSpellTargetUnit();
	float angle;
	group gdamage = CreateGroup();
	int lvlstun = 1;
	int lvl = GetUnitAbilityLevel(caster, 'A0EZ');
	int stuck = 0;
	timer tstuck;
	float damage = (15. + (35. * lvl)) + (GetHeroStr(caster, true) * (.5 + .25 * lvl));
	location loc;
	float tx;
	float ty;
	float dist;
	float time;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	SetUnitAnimation(caster, "stand");
	SetUnitPathing(caster, false);
	SetUnitAnimationByIndex(caster, 8);
	SetUnitTimeScale(caster, 2.);
	if (target == null) {
		loc[GetSpellTargetLoc()] = GetSpellTargetLoc();
		tx[GetLocationX(loc)] = GetLocationX(loc);
		ty[GetLocationY(loc)] = GetLocationY(loc);
	else
		tx[GetUnitX(target)] = GetUnitX(target);
		ty[GetUnitY(target)] = GetUnitY(target);
	}
	angle[bj_RADTODEG * Atan2(ty - y, tx - x)] = bj_RADTODEG * Atan2(ty - y, tx - x);
	dist[SquareRoot((tx - x) * (tx - x) + (ty - y) * (ty - y))] = SquareRoot((tx - x) * (tx - x) + (ty - y) * (ty - y));
	if (target == caster) {
		angle[GetUnitFacing(caster)] = GetUnitFacing(caster);
		dist[750.] = 750.;
	}
	time[dist / 500.] = dist / 500.;
	MoveUnit(caster, time, 500., .0, angle, .0, true);
	if (GetUnitAbilityLevel(caster, 'A0ET') > 0) {
		if (LoadBoolean(udg_hash, GetHandleId(caster), 1) == false) {
			damage[damage * 1.3] = damage * 1.3;
		else
			lvlstun[2] = 2;
		}
	}
	if (HaveSavedHandle(udg_hash, GetHandleId(caster), 59)) {
		tstuck[LoadTimerHandle(udg_hash, GetHandleId(caster), 59)] = LoadTimerHandle(udg_hash, GetHandleId(caster), 59);
		stuck[LoadInteger(udg_hash, GetHandleId(tstuck), 1)] = LoadInteger(udg_hash, GetHandleId(tstuck), 1);
		if (GetRandomInt(1, $A) <= stuck) {
			UnitRemoveAbility(caster, 'A0EZ');
			UnitAddAbility(caster, 'A0EZ');
			SetUnitAbilityLevel(caster, 'A0EZ', lvl);
			CreateTexttag("|cFFFF4B00Refresh Ability|r", .023, $FF, x - 75., y, .0, .0, .035, 3.5);
		}
		tstuck[null] = null;
	}
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveGroupHandle(udg_hash, h, 2, gdamage);
	SaveReal(udg_hash, h, 3, damage);
	SaveInteger(udg_hash, h, 4, lvlstun);
	SaveInteger(udg_hash, h, 5, R2I(dist / 15.));
	SaveReal(udg_hash, h, 6, angle);
	TimerStart(t, .03, true, Trig_Ram_Board_Move_Actions);
	caster[null] = null;
	target[null] = null;
	gdamage[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	t[null] = null;
}
bool Trig_Ram_Board_Conditions() {
	return GetSpellAbilityId() == 'A0EZ';
}
void InitTrig_Ram_Board() {
	int index = 0;
	gg_trg_Ram_Board[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Ram_Board, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Ram_Board, Condition(Trig_Ram_Board_Conditions));
	TriggerAddAction(gg_trg_Ram_Board, Trig_Ram_Board_Actions);
}
void Trig_Warcry_Buff_Removes_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit target = LoadUnitHandle(udg_hash, h, 2);
	int stuck = LoadInteger(udg_hash, h, 1);
	SetAttackSpeedAbilityLevel(target, (-stuck * $A));
	SetArmorAbilityLevel(target, (-stuck * 3));
	SetAttackAbilityLevel(target, (-stuck * 7));
	if (GetUnitAbilityLevel(target, 'A0EY') > 0) {
		SetUnitLifeAndManaRegeneration(target, "life", -(3 * stuck));
		SetHeroStr(target, GetHeroStr(target, false) - ($A * stuck), true);
	}
	SaveInteger(udg_hash, h, 1, 0);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
	target[null] = null;
}
void Trig_Warcry_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	int lvl = GetUnitAbilityLevel(caster, 'A0EY') * 2;
	int stuck = 0;
	group g = CreateGroup();
	unit Picked;
	unit dammi;
	timer t;
	int h;
	GroupEnumUnitsInRange(g, x, y, 500., null);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if (IsUnitAlly(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			t[LoadTimerHandle(udg_hash, GetHandleId(Picked), 59)] = LoadTimerHandle(udg_hash, GetHandleId(Picked), 59);
			stuck[LoadInteger(udg_hash, GetHandleId(t), 1)] = LoadInteger(udg_hash, GetHandleId(t), 1);
			if (t == null) {
				t[CreateTimer()] = CreateTimer();
				stuck[0] = 0;
				SaveUnitHandle(udg_hash, GetHandleId(t), 2, Picked);
				SaveTimerHandle(udg_hash, GetHandleId(Picked), 59, t);
			}
			h[GetHandleId(t)] = GetHandleId(t);
			if (stuck < lvl) {
				if (Picked == caster) {
					SetHeroStr(caster, GetHeroStr(caster, false) + $A, true);
					SetUnitLifeAndManaRegeneration(caster, "life", 3);
				}
				SetAttackSpeedAbilityLevel(Picked, $A);
				SetArmorAbilityLevel(Picked, 3);
				SetAttackAbilityLevel(Picked, 7);
				stuck[stuck + 1] = stuck + 1;
				SaveInteger(udg_hash, h, 1, stuck);
			}
			dammi[CreateUnit(p, 'h00U', x, y, .0)] = CreateUnit(p, 'h00U', x, y, .0);
			UnitApplyTimedLife(dammi, 'BTLF', 1.5);
			UnitAddAbility(dammi, 'A0F0');
			SetUnitAbilityLevel(dammi, 'A0F0', stuck);
			UnitRemoveAbility(Picked, 'B02J');
			IssueTargetOrderById(dammi, $D0085, Picked);
			dammi[null] = null;
			TimerStart(t, 10., false, Trig_Warcry_Buff_Removes_Actions);
			t[null] = null;
		}
		GroupRemoveUnit(g, Picked);
	}
	caster[null] = null;
	p[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	Picked[null] = null;
	dammi[null] = null;
	t[null] = null;
}
bool Trig_Warcry_Conditions() {
	return GetSpellAbilityId() == 'A0EY';
}
void InitTrig_Warcry() {
	int index = 0;
	gg_trg_Warcry[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Warcry, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Warcry, Condition(Trig_Warcry_Conditions));
	TriggerAddAction(gg_trg_Warcry, Trig_Warcry_Actions);
}
void Trig_Drenor_Bull_Load_Actions() {
	AbilityPreload('A0B1', 6);
	AbilityPreload('A0B0', 6);
	AbilityPreload('A0B2', 6);
	AbilityPreload('A0AZ', 3);
	AbilityPreload('A075', 1);
	AbilityPreload('A0AY', 1);
	EffectPreload("Abilities\\Spells\\Orc\\WarDrums\\DrumsCasterHeal.mdl");
	EffectPreload("Abilities\\Spells\\Orc\\StasisTrap\\StasisTotemTarget.mdl");
	EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPriest.mdl");
	EffectPreload("Abilities\\Spells\\NightElf\\BattleRoar\\RoarCaster.mdl");
	EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl");
	EffectPreload("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl");
	EnableTrigger(gg_trg_Axe_Throw);
	EnableTrigger(gg_trg_Violent_Roar);
	EnableTrigger(gg_trg_upgrade_Berserk);
	EnableTrigger(gg_trg_Learn_Spell_Rage);
	EnableTrigger(gg_trg_Drenor_Bull_Show_Hint);
	EnableTrigger(gg_trg_Drenor_Bull_Show_Rage);
}
void InitTrig_Drenor_Bull_Load() {
	gg_trg_Drenor_Bull_Load[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Drenor_Bull_Load, Trig_Drenor_Bull_Load_Actions);
}
void Trig_Drenor_Bull_Show_Hint_Actions() {
	DisplayTextToForce(udg_Drenor_Bull_Hint_Player_Group, "Чтобы узнать количество накопленной Грог'Таром ярости, введи в чат команду \"|cff99ccff-rage/-r|r\".");
}
void InitTrig_Drenor_Bull_Show_Hint() {
	gg_trg_Drenor_Bull_Show_Hint[CreateTrigger()] = CreateTrigger();
	DisableTrigger(gg_trg_Drenor_Bull_Show_Hint);
	TriggerRegisterTimerEventPeriodic(gg_trg_Drenor_Bull_Show_Hint, 120.);
	TriggerAddAction(gg_trg_Drenor_Bull_Show_Hint, Trig_Drenor_Bull_Show_Hint_Actions);
}
bool Trig_Drenor_Bull_Show_Rage_Conditions() {
	return (IsPlayerInForce(GetTriggerPlayer(), udg_Drenor_Bull_Hint_Player_Group));
}
bool Trig_Drenor_Bull_Show_Rage_Func001C() {
	return (udg_GrorTar != null) && (GetUnitAbilityLevelSwapped('A0B2', udg_GrorTar) > 0);
}
void Trig_Drenor_Bull_Show_Rage_Actions() {
	if ((Trig_Drenor_Bull_Show_Rage_Func001C())) {
		DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()), ("Ярость Грог'Тара: |cFFF0692D" + (I2S(udg_DrenorBugaiRage) + ("|r ( максимум: |cFFF0692D" + (I2S(((GetUnitAbilityLevelSwapped('A0B2', udg_GrorTar) * '}') + (GetUnitAbilityLevelSwapped('A0AZ', udg_GrorTar) * 75))) + "|r)")))));
	else
		DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()), ("Ярость Грог'Тара: |cFFF0692D" + ("0" + ("|r ( максимум: |cFFF0692D" + ("0|r)")))));
	}
}
void InitTrig_Drenor_Bull_Show_Rage() {
	int index = 0;
	gg_trg_Drenor_Bull_Show_Rage[CreateTrigger()] = CreateTrigger();
	DisableTrigger(gg_trg_Drenor_Bull_Show_Rage);
	while (true) {
		TriggerRegisterPlayerChatEvent(gg_trg_Drenor_Bull_Show_Rage, Player(index), "-rage", true);
		TriggerRegisterPlayerChatEvent(gg_trg_Drenor_Bull_Show_Rage, Player(index), "-r", true);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Drenor_Bull_Show_Rage, Condition(Trig_Drenor_Bull_Show_Rage_Conditions));
	TriggerAddAction(gg_trg_Drenor_Bull_Show_Rage, Trig_Drenor_Bull_Show_Rage_Actions);
}
void Trig_Axe_Throw_move_2() {
	KillDestructable(GetEnumDestructable());
}
void Trig_Axe_Throw_move_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit axe = LoadUnitHandle(udg_hash, h, 1);
	group g = LoadGroupHandle(udg_hash, h, 2);
	float damage = LoadReal(udg_hash, h, 3);
	unit caster = LoadUnitHandle(udg_hash, h, 6);
	player p = GetOwningPlayer(caster);
	int wait = LoadInteger(udg_hash, h, 5);
	float x = GetUnitX(axe) + 32. * Cos(GetUnitFacing(axe) * bj_DEGTORAD);
	float y = GetUnitY(axe) + 32. * Sin(GetUnitFacing(axe) * bj_DEGTORAD);
	rect r = Rect(x - 130., y - 130., x + 130., y + 130.);
	group grup = CreateGroup();
	unit Picked;
	unit dammi;
	if (wait > 0) {
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 5, wait);
		EnumDestructablesInRect(r, null, Trig_Axe_Throw_move_2);
		if (IsTerrainPathable(x, y, PATHING_TYPE_FLYABILITY) == false) {
			SetUnitPosition(axe, x, y);
		}
		if (wait == 20 || wait == 16 || wait == $C || wait == 8 || wait == 4) {
			DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl", x, y));
		}
		GroupEnumUnitsInRange(grup, x, y, '}', null);
		while (true) {
			Picked[FirstOfGroup(grup)] = FirstOfGroup(grup);
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, GetOwningPlayer(axe)) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitInGroup(Picked, g) == false && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				dammi[CreateUnit(p, 'h00U', x, y, .0)] = CreateUnit(p, 'h00U', x, y, .0);
				UnitApplyTimedLife(dammi, 'BTLF', .5);
				UnitAddAbility(dammi, 'A0F1');
				IssueTargetOrderById(dammi, $D007F, Picked);
				dammi[null] = null;
				DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPriest.mdl", Picked, "chest"));
				GroupAddUnit(g, Picked);
			}
			GroupRemoveUnit(grup, Picked);
		}
		SaveGroupHandle(udg_hash, h, 2, g);
	else
		DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", x, y));
		DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl", x, y));
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
		KillUnit(axe);
		RemoveUnit(dammi);
		GroupClear(g);
		DestroyGroup(g);
		g[null] = null;
	}
	Picked[null] = null;
	DestroyGroup(grup);
	grup[null] = null;
	t[null] = null;
	axe[null] = null;
	g[null] = null;
	dammi[null] = null;
	RemoveRect(r);
	r[null] = null;
	caster[null] = null;
	p[null] = null;
}
void Trig_Axe_Throw_Actions() {
	unit caster = GetSpellAbilityUnit();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	timer t = CreateTimer();
	int h = GetHandleId(t);
	location loc;
	float xt;
	float yt;
	unit axe;
	group g = CreateGroup();
	float damage3 = 10. + (50. * I2R(GetUnitAbilityLevel(caster, 'A0B1')));
	float damage2 = I2R(udg_DrenorBugaiRage) / 3.;
	float damage = (1. + (.2 * I2R(GetUnitAbilityLevel(caster, 'A0AZ')))) * (damage2 + damage3);
	int wait = 20;
	if (GetSpellTargetUnit() == null) {
		loc[GetSpellTargetLoc()] = GetSpellTargetLoc();
		xt[GetLocationX(loc)] = GetLocationX(loc);
		yt[GetLocationY(loc)] = GetLocationY(loc);
		RemoveLocation(loc);
		loc[null] = null;
	else
		xt[GetUnitX(GetSpellTargetUnit())] = GetUnitX(GetSpellTargetUnit());
		yt[GetUnitY(GetSpellTargetUnit())] = GetUnitY(GetSpellTargetUnit());
	}
	if ((udg_DrenorBugaiRage <= ((('}' * GetUnitAbilityLevel(caster, 'A0B2') + (75 * GetUnitAbilityLevel(caster, 'A0AZ'))) - 30)))) {
		udg_DrenorBugaiRage[udg_DrenorBugaiRage + 30] = udg_DrenorBugaiRage + 30;
		SetAttackSpeedAbilityLevel(udg_GrorTar, 6);
	}
	DisableTrigger(gg_trg_Sniatie_Rage);
	TimerStart(udg_GrogTarRageTimer, 4., false, null);
	axe[CreateUnit(GetOwningPlayer(caster), 'h01J', x, y, bj_RADTODEG * Atan2(yt - y, xt - x))] = CreateUnit(GetOwningPlayer(caster), 'h01J', x, y, bj_RADTODEG * Atan2(yt - y, xt - x));
	UnitAddAbility(axe, 'Amrf');
	UnitRemoveAbility(axe, 'Amrf');
	SetUnitTimeScale(axe, 2.5);
	SetUnitFlyHeight(axe, 15., 80.);
	SaveUnitHandle(udg_hash, h, 1, axe);
	SaveGroupHandle(udg_hash, h, 2, g);
	SaveReal(udg_hash, h, 3, damage);
	SaveInteger(udg_hash, h, 5, wait);
	SaveUnitHandle(udg_hash, h, 6, caster);
	TimerStart(t, .03, true, Trig_Axe_Throw_move_Actions);
	caster[null] = null;
	t[null] = null;
	axe[null] = null;
	g[null] = null;
}
bool Trig_Axe_Throw_Conditions() {
	return GetSpellAbilityId() == 'A0B1';
}
void InitTrig_Axe_Throw() {
	int index = 0;
	gg_trg_Axe_Throw[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Axe_Throw, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Axe_Throw, Condition(Trig_Axe_Throw_Conditions));
	TriggerAddAction(gg_trg_Axe_Throw, Trig_Axe_Throw_Actions);
}
void Trig_Violent_Roar_periodic() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	float xc = LoadReal(udg_hash, h, 2);
	float yc = LoadReal(udg_hash, h, 3);
	float damage = LoadReal(udg_hash, h, 4);
	int wait = LoadInteger(udg_hash, h, 5);
	group g = CreateGroup();
	unit Picked;
	unit dammi;
	float angle;
	float x;
	float y;
	float dist;
	if (wait > 0) {
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 5, wait);
		if (wait == $E) {
			GroupEnumUnitsInRange(g, xc, yc, 400., null);
			while (true) {
				Picked[FirstOfGroup(g)] = FirstOfGroup(g);
				if (Picked == null) break;
				if (IsUnitEnemy(Picked, GetOwningPlayer(caster)) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
					dammi[CreateUnit(GetOwningPlayer(caster), 'h00U', GetUnitX(Picked), GetUnitY(Picked), .0)] = CreateUnit(GetOwningPlayer(caster), 'h00U', GetUnitX(Picked), GetUnitY(Picked), .0);
					UnitApplyTimedLife(dammi, 'BTLF', 1.);
					UnitAddAbility(dammi, 'A075');
					IssueTargetOrderById(dammi, $D00DD, Picked);
					dammi[null] = null;
				}
				GroupRemoveUnit(g, Picked);
			}
			Picked[null] = null;
		}
		GroupEnumUnitsInRange(g, xc, yc, 400., null);
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, GetOwningPlayer(caster)) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
				x[GetUnitX(Picked)] = GetUnitX(Picked);
				y[GetUnitY(Picked)] = GetUnitY(Picked);
				angle[bj_RADTODEG * Atan2(y - yc, x - xc)] = bj_RADTODEG * Atan2(y - yc, x - xc);
				dist[SquareRoot((x - xc) * (x - xc) + (y - yc) * (y - yc))] = SquareRoot((x - xc) * (x - xc) + (y - yc) * (y - yc));
				x[GetUnitX(Picked) + (21. - (dist / 20.)) * Cos(angle * bj_DEGTORAD)] = GetUnitX(Picked) + (21. - (dist / 20.)) * Cos(angle * bj_DEGTORAD);
				y[GetUnitY(Picked) + (21. - (dist / 20.)) * Sin(angle * bj_DEGTORAD)] = GetUnitY(Picked) + (21. - (dist / 20.)) * Sin(angle * bj_DEGTORAD);
				if (IsTerrainPathable(x, y, PATHING_TYPE_WALKABILITY) == false && GetTerrainCliffLevel(x, y) == GetTerrainCliffLevel(GetUnitX(Picked) - (21. - (dist / 20.)) * Cos(angle * bj_DEGTORAD), GetUnitY(Picked) - (21. - (dist / 20.)) * Sin(angle * bj_DEGTORAD))) {
					SetUnitX(Picked, x);
					SetUnitY(Picked, y);
				}
				if (wait == $E) {
					DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", Picked, "chest"));
				}
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			}
			GroupRemoveUnit(g, Picked);
		}
		Picked[null] = null;
	else
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	caster[null] = null;
	DestroyGroup(g);
	g[null] = null;
}
void Trig_Violent_Roar_Actions() {
	unit caster = GetSpellAbilityUnit();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	int wait = $F;
	float ultalvl = 1. + (.2 * I2R(GetUnitAbilityLevel(caster, 'A0AZ')));
	float abilitylvl = 15. + (20. * I2R(GetUnitAbilityLevel(caster, 'A0B0')));
	float udgrage = I2R(udg_DrenorBugaiRage) / 20.;
	float herostr = I2R(GetUnitAbilityLevel(caster, 'A0B0')) * (.2 * GetHeroStr(caster, true));
	float damage = (ultalvl * (abilitylvl + udgrage + herostr)) / wait;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	if ((udg_DrenorBugaiRage <= ((('}' * GetUnitAbilityLevel(caster, 'A0B2') + (75 * GetUnitAbilityLevel(caster, 'A0AZ'))) - 30)))) {
		udg_DrenorBugaiRage[udg_DrenorBugaiRage + 30] = udg_DrenorBugaiRage + 30;
		SetAttackSpeedAbilityLevel(udg_GrorTar, 6);
	}
	DisableTrigger(gg_trg_Sniatie_Rage);
	TimerStart(udg_GrogTarRageTimer, 4., false, null);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 2, x);
	SaveReal(udg_hash, h, 3, y);
	SaveReal(udg_hash, h, 4, damage);
	SaveInteger(udg_hash, h, 5, wait);
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\NightElf\\BattleRoar\\RoarCaster.mdl", x, y));
	TimerStart(t, .04, true, Trig_Violent_Roar_periodic);
}
bool Trig_Violent_Roar_Conditions() {
	return GetSpellAbilityId() == 'A0B0';
}
void InitTrig_Violent_Roar() {
	int index = 0;
	gg_trg_Violent_Roar[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Violent_Roar, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Violent_Roar, Condition(Trig_Violent_Roar_Conditions));
	TriggerAddAction(gg_trg_Violent_Roar, Trig_Violent_Roar_Actions);
}
bool Trig_upgrade_Berserk_Conditions() {
	return GetLearnedSkill() == 'A0AZ';
}
void Trig_upgrade_Berserk_Actions() {
	SetPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()), 'R007', GetLearnedSkillLevel());
}
void InitTrig_upgrade_Berserk() {
	int index = 0;
	gg_trg_upgrade_Berserk[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_upgrade_Berserk, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_upgrade_Berserk, Condition(Trig_upgrade_Berserk_Conditions));
	TriggerAddAction(gg_trg_upgrade_Berserk, Trig_upgrade_Berserk_Actions);
}
void Trig_Learn_Spell_Rage_Actions_Timer() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit hero = LoadUnitHandle(udg_hash, h, 1);
	texttag txt = LoadTextTagHandle(udg_hash, h, 2);
	float x = GetUnitX(hero);
	float y = GetUnitY(hero);
	bool alife = LoadBoolean(udg_hash, h, 3);
	if ((GetUnitState(hero, UNIT_STATE_LIFE) < .405 && alife)) {
		alife[false] = false;
		SaveBoolean(udg_hash, h, 3, alife);
		SetTextTagVisibility(txt, false);
	}
	if ((GetUnitState(hero, UNIT_STATE_LIFE) > .405 && alife == false)) {
		alife[true] = true;
		SaveBoolean(udg_hash, h, 3, alife);
		SetTextTagVisibility(txt, true);
	}
	if ((GetUnitState(hero, UNIT_STATE_LIFE) > .405 && alife)) {
		alife[true] = true;
		SaveBoolean(udg_hash, h, 3, alife);
		SetTextTagText(txt, "|cFFF0692D" + I2S(udg_DrenorBugaiRage) + "|r|cFF969696/|r|cFFF0692D" + I2S(((('}' * GetUnitAbilityLevel(hero, 'A0B2') + (75 * GetUnitAbilityLevel(hero, 'A0AZ')))))) + "|r", .027);
		SetTextTagPos(txt, GetUnitX(hero) - 40., GetUnitY(hero) + 100., .0);
	}
	t[null] = null;
	hero[null] = null;
	txt[null] = null;
}
void Trig_Learn_Spell_Rage_Actions() {
	int lvl = GetUnitAbilityLevel(GetLearningUnit(), 'A0B2');
	timer t;
	int h;
	texttag txt;
	unit hero;
	if (lvl == 1) {
		udg_GrorTar[GetLearningUnit()] = GetLearningUnit();
		udg_DrenorBugaiRage[0] = 0;
		EnableTrigger(gg_trg_attack_hero_Rage);
		EnableTrigger(gg_trg_kill_hero_Rage);
		EnableTrigger(gg_trg_Timer_Rage);
		EnableTrigger(gg_trg_GrogTarDead);
		t[CreateTimer()] = CreateTimer();
		h[GetHandleId(t)] = GetHandleId(t);
		txt[CreateTextTag()] = CreateTextTag();
		hero[GetLearningUnit()] = GetLearningUnit();
		SetTextTagText(txt, "|cFFF0692D" + I2S(udg_DrenorBugaiRage) + "|r|cFF969696/|r|cFFF0692D" + I2S(((('}' * GetUnitAbilityLevel(hero, 'A0B2') + (75 * GetUnitAbilityLevel(hero, 'A0AZ')))))) + "|r", .027);
		SetTextTagColor(txt, $FF, $FF, $FF, $FF);
		SetTextTagPos(txt, GetUnitX(hero) - 40., GetUnitY(hero) + 50., .0);
		SetTextTagPermanent(txt, true);
		SaveUnitHandle(udg_hash, h, 1, hero);
		SaveTextTagHandle(udg_hash, h, 2, txt);
		SaveBoolean(udg_hash, h, 3, true);
		TimerStart(t, .03, true, Trig_Learn_Spell_Rage_Actions_Timer);
		t[null] = null;
		hero[null] = null;
		txt[null] = null;
	}
}
bool Trig_Learn_Spell_Rage_Conditions() {
	return GetUnitAbilityLevel(GetLearningUnit(), 'A0B2') >= 1 && GetUnitTypeId(GetLearningUnit()) != 'h00U' && GetLearnedSkill() == 'A0B2';
}
void InitTrig_Learn_Spell_Rage() {
	int index = 0;
	gg_trg_Learn_Spell_Rage[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Spell_Rage, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Learn_Spell_Rage, Condition(Trig_Learn_Spell_Rage_Conditions));
	TriggerAddAction(gg_trg_Learn_Spell_Rage, Trig_Learn_Spell_Rage_Actions);
}
void Trig_GrogTarDead_Actions() {
	SetAttackSpeedAbilityLevel(udg_GrorTar, -udg_DrenorBugaiRage / 5);
	udg_DrenorBugaiRage[0] = 0;
	DisableTrigger(gg_trg_Sniatie_Rage);
}
bool Trig_GrogTarDead_Conditions() {
	return GetDyingUnit() == udg_GrorTar;
}
void InitTrig_GrogTarDead() {
	int index = 0;
	gg_trg_GrogTarDead[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_GrogTarDead, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_GrogTarDead, Condition(Trig_GrogTarDead_Conditions));
	TriggerAddAction(gg_trg_GrogTarDead, Trig_GrogTarDead_Actions);
}
bool Trig_attack_hero_Rage_Conditions() {
	return IsUnitEnemy(GetAttacker(), GetOwningPlayer(GetTriggerUnit())) && (GetUnitAbilityLevel(GetTriggerUnit(), 'A0B2') >= 1);
}
void Trig_attack_hero_Rage_Actions() {
	int addrage = 0;
	if ((GetRandomInt(1, 2) == 1)) {
		if (udg_DrenorBugaiRage <= ((('}' * (GetUnitAbilityLevel(GetTriggerUnit(), 'A0B2'))) + (75 * (GetUnitAbilityLevel(GetTriggerUnit(), 'A0AZ')))) - 1)) {
			udg_DrenorBugaiRage[udg_DrenorBugaiRage + 1] = udg_DrenorBugaiRage + 1;
			addrage[addrage + 1] = addrage + 1;
			if ((udg_DrenorBugaiRage / 5) * 5 >= udg_DrenorBugaiRage) {
				SetAttackSpeedAbilityLevel(udg_GrorTar, 1);
			}
		else
			udg_DrenorBugaiRage[(((('}' * (GetUnitAbilityLevel(GetTriggerUnit(), 'A0B2')))) + (75 * (GetUnitAbilityLevel(GetTriggerUnit(), 'A0AZ')))))] = (((('}' * (GetUnitAbilityLevel(GetTriggerUnit(), 'A0B2')))) + (75 * (GetUnitAbilityLevel(GetTriggerUnit(), 'A0AZ')))));
		}
	}
	DisableTrigger(gg_trg_Sniatie_Rage);
	TimerStart(udg_GrogTarRageTimer, 4., false, null);
}
void InitTrig_attack_hero_Rage() {
	int index = 0;
	gg_trg_attack_hero_Rage[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_attack_hero_Rage, Player(index), EVENT_PLAYER_UNIT_ATTACKED, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	DisableTrigger(gg_trg_attack_hero_Rage);
	TriggerAddCondition(gg_trg_attack_hero_Rage, Condition(Trig_attack_hero_Rage_Conditions));
	TriggerAddAction(gg_trg_attack_hero_Rage, Trig_attack_hero_Rage_Actions);
}
bool Trig_kill_hero_Rage_Conditions() {
	return (GetUnitAbilityLevel(GetKillingUnit(), 'A0B2') >= 1);
}
void Trig_kill_hero_Rage_Actions() {
	int addrage = 0;
	if ((udg_DrenorBugaiRage <= ((('}' * GetUnitAbilityLevel(GetKillingUnit(), 'A0B2'))) + (75 * GetUnitAbilityLevel(GetKillingUnit(), 'A0AZ'))) - 5)) {
		udg_DrenorBugaiRage[udg_DrenorBugaiRage + 5] = udg_DrenorBugaiRage + 5;
		addrage[addrage + 5] = addrage + 5;
		SetAttackSpeedAbilityLevel(udg_GrorTar, 1);
		if ((IsUnitType(GetDyingUnit(), UNIT_TYPE_ANCIENT) || IsUnitType(GetDyingUnit(), UNIT_TYPE_HERO)) && (udg_DrenorBugaiRage <= ((('}' * GetUnitAbilityLevel(GetKillingUnit(), 'A0B2'))) + (75 * GetUnitAbilityLevel(GetKillingUnit(), 'A0AZ'))) - 85)) {
			udg_DrenorBugaiRage[udg_DrenorBugaiRage + 85] = udg_DrenorBugaiRage + 85;
			addrage[addrage + 85] = addrage + 85;
			SetAttackSpeedAbilityLevel(udg_GrorTar, 9);
		}
	}
	DisableTrigger(gg_trg_Sniatie_Rage);
	TimerStart(udg_GrogTarRageTimer, 4., false, null);
}
void InitTrig_kill_hero_Rage() {
	int index = 0;
	gg_trg_kill_hero_Rage[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_kill_hero_Rage, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	DisableTrigger(gg_trg_kill_hero_Rage);
	TriggerAddCondition(gg_trg_kill_hero_Rage, Condition(Trig_kill_hero_Rage_Conditions));
	TriggerAddAction(gg_trg_kill_hero_Rage, Trig_kill_hero_Rage_Actions);
}
void Trig_Sniatie_Rage_Action() {
	if (udg_DrenorBugaiRage >= 20) {
		udg_DrenorBugaiRage[udg_DrenorBugaiRage - 20] = udg_DrenorBugaiRage - 20;
		SetAttackSpeedAbilityLevel(udg_GrorTar, -4);
	else
		udg_Temp_Integer[('}' * (GetUnitAbilityLevel(udg_GrorTar, 'A0B2'))) + (75 * (GetUnitAbilityLevel(udg_GrorTar, 'A0AZ')))] = ('}' * (GetUnitAbilityLevel(udg_GrorTar, 'A0B2'))) + (75 * (GetUnitAbilityLevel(udg_GrorTar, 'A0AZ')));
		SetAttackSpeedAbilityLevel(udg_GrorTar, -udg_DrenorBugaiRage / 5);
		udg_DrenorBugaiRage[0] = 0;
	}
}
void InitTrig_Sniatie_Rage() {
	gg_trg_Sniatie_Rage[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEvent(gg_trg_Sniatie_Rage, 3., true);
	TriggerAddAction(gg_trg_Sniatie_Rage, Trig_Sniatie_Rage_Action);
	DisableTrigger(gg_trg_Sniatie_Rage);
}
void Trig_Timer_last_Actions() {
	EnableTrigger(gg_trg_Sniatie_Rage);
}
void InitTrig_Timer_Rage() {
	gg_trg_Timer_Rage[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerExpireEvent(gg_trg_Timer_Rage, udg_GrogTarRageTimer);
	TriggerAddAction(gg_trg_Timer_Rage, Trig_Timer_last_Actions);
}
void Trig_Illusionist_Load_Actions() {
	AbilityPreload('A0F6', 6);
	AbilityPreload('A0F5', 6);
	AbilityPreload('A0F3', 6);
	AbilityPreload('A0F2', 3);
	AbilityPreload('A0F7', 6);
	AbilityPreload('A0AY', 4);
	AbilityPreload('A0F4', 6);
	AbilityPreload('B02L', 1);
	AbilityPreload('B02K', 1);
	AbilityPreload('B02M', 1);
	EffectPreload("Abilities\\Spells\\Orc\\Devour\\DevourEffectArt.mdl");
	EffectPreload("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageDeathCaster.mdl");
	EffectPreload("Abilities\\Spells\\Undead\\Curse\\CurseTarget.mdl");
	EffectPreload("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageMissile.mdl");
	EffectPreload("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageCaster.mdl");
	EffectPreload("Abilities\\Spells\\Other\\Levelup\\LevelupCaster.mdl");
	EffectPreload("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathMissile.mdl");
	EffectPreload("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayDamage.mdl");
	EffectPreload("Abilities\\Spells\\Undead\\DeathPact\\DeathPactCaster.mdl");
	EffectPreload("Abilities\\Spells\\Undead\\DeathPact\\DeathPactTarget.mdl");
	EnableTrigger(gg_trg_Reflection);
	EnableTrigger(gg_trg_Illusory_Attack);
	EnableTrigger(gg_trg_Summon_Illusions_with_Reflection);
	EnableTrigger(gg_trg_Illusions_with_Phantoms_Dead);
}
void InitTrig_Illusionist_Load() {
	gg_trg_Illusionist_Load[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Illusionist_Load, Trig_Illusionist_Load_Actions);
}
void Trig_Reflection_perodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	rect r = LoadRectHandle(udg_hash, h, 2);
	float x = GetRectCenterX(r);
	float y = GetRectCenterY(r);
	float tx;
	float ty;
	int wait = LoadInteger(udg_hash, h, 3);
	float damage = LoadReal(udg_hash, h, 4);
	player p = GetOwningPlayer(caster);
	int order = GetUnitCurrentOrder(caster);
	group g = CreateGroup();
	group gdamage = CreateGroup();
	unit Picked;
	unit dammi;
	unit dammi2;
	unit target;
	int orderId;
	orderId[$D0278] = $D0278;
	if ((orderId != 0)) {
	else
		orderId[UnitId("channel")] = UnitId("channel");
		if ((orderId != 0)) {
		}
	}
	if (order == orderId && wait > 0) {
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 3, wait);
		GroupEnumUnitsInRect(g, r, null);
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathPact\\DeathPactTarget.mdl", caster, "chest"));
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && (GetPlayerId(GetOwningPlayer(Picked)) != $D) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				GroupAddUnit(gdamage, Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
		Picked[null] = null;
		GroupClear(g);
		RandomUnitFromGroup(1, gdamage);
		GroupAddGroup(udg_GroupRandomUnitFromGroup, g);
		target[FirstOfGroup(g)] = FirstOfGroup(g);
		tx[GetUnitX(target)] = GetUnitX(target);
		ty[GetUnitY(target)] = GetUnitY(target);
		dammi2[CreateUnit(p, 'h00U', x, y, .0)] = CreateUnit(p, 'h00U', x, y, .0);
		UnitApplyTimedLife(dammi2, 'BTLF', 1.);
		UnitAddAbility(dammi2, 'A0F4');
		SetUnitAbilityLevel(dammi2, 'A0F4', GetUnitAbilityLevel(caster, 'A0F6'));
		IssueTargetOrderById(dammi2, $D006B, target);
		dammi[CreateUnit(p, 'h00U', x, y, .0)] = CreateUnit(p, 'h00U', x, y, .0);
		SaveUnitHandle(udg_hash, GetHandleId(dammi), 2, target);
		SaveBoolean(udg_hash, GetHandleId(dammi), 3, true);
		UnitApplyTimedLife(dammi, 'BTLF', 1.);
		UnitAddAbility(dammi, 'A0AY');
		SetUnitAbilityLevel(dammi, 'A0AY', 1 + GetUnitAbilityLevel(caster, 'A0F2'));
		IssueTargetOrderById(dammi, $D0132, caster);
		GroupClear(gdamage);
		GroupEnumUnitsInRange(gdamage, tx, ty, 150., null);
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathPact\\DeathPactCaster.mdl", target, "origin"));
		while (true) {
			Picked[FirstOfGroup(gdamage)] = FirstOfGroup(gdamage);
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayDamage.mdl", Picked, "origin"));
			}
			GroupRemoveUnit(gdamage, Picked);
		}
	else
		SetUnitVertexColor(caster, $FF, $FF, $FF, $FF);
		RemoveRect(r);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
		RemoveUnit(LoadUnitHandle(udg_hash, GetHandleId(caster), 'u'));
	}
	t[null] = null;
	caster[null] = null;
	r[null] = null;
	p[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	GroupClear(gdamage);
	DestroyGroup(gdamage);
	gdamage[null] = null;
	Picked[null] = null;
	dammi[null] = null;
	dammi2[null] = null;
	target[null] = null;
}
void Trig_Reflection_Actions() {
	unit caster = GetSpellAbilityUnit();
	int lvl = GetUnitAbilityLevel(caster, 'A0F6');
	int wait = lvl + 2;
	location loc = GetSpellTargetLoc();
	float x = GetLocationX(loc);
	float y = GetLocationY(loc);
	rect r = Rect(x - 350., y - 350., x + 350., y + 350.);
	float damage = $A + 5 * lvl + (.1 + (.05 * lvl)) * GetHeroAgi(caster, true);
	timer t = CreateTimer();
	int h = GetHandleId(t);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveRectHandle(udg_hash, h, 2, r);
	SaveInteger(udg_hash, h, 3, wait);
	SaveReal(udg_hash, h, 4, damage);
	AddProgressBar(caster, 215. + (1.5 * lvl), (.9 + .1 * lvl), (.3 * wait), false, true, 'u', $B4, $96, $AF);
	SetUnitVertexColor(caster, $C8, $C8, $C8, 'd');
	TimerStart(t, .3, true, Trig_Reflection_perodic_Actions);
	caster[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	r[null] = null;
	t[null] = null;
}
bool Trig_Reflection_Conditions() {
	return GetSpellAbilityId() == 'A0F6';
}
void InitTrig_Reflection() {
	int index = 0;
	gg_trg_Reflection[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Reflection, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Reflection, Condition(Trig_Reflection_Conditions));
	TriggerAddAction(gg_trg_Reflection, Trig_Reflection_Actions);
}
void Trig_Illusory_Attack_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	float angle = GetRandomReal(.0, 360.);
	float x = GetUnitX(target) + 50. * Cos(angle * bj_DEGTORAD);
	float y = GetUnitY(target) + 50. * Sin(angle * bj_DEGTORAD);
	int lvl = GetUnitAbilityLevel(caster, 'A0F5');
	float damage = (GetHeroAgi(caster, true) * (.25 * lvl + .5)) + (lvl * 25 + $F);
	unit dammi = CreateUnit(GetOwningPlayer(caster), 'h00U', x, y, .0);
	unit dammi2 = CreateUnit(GetOwningPlayer(caster), 'h00U', x, y, .0);
	SaveUnitHandle(udg_hash, GetHandleId(dammi), 4, target);
	SaveBoolean(udg_hash, GetHandleId(dammi), 5, true);
	SaveReal(udg_hash, GetHandleId(dammi), 6, (angle + 180.));
	SetUnitPosition(caster, x, y);
	UnitApplyTimedLife(dammi2, 'BTLF', 1.);
	UnitAddAbility(dammi2, 'A0F7');
	SetUnitAbilityLevel(dammi2, 'A0F7', lvl);
	IssueTargetOrderById(dammi2, $D007F, target);
	UnitApplyTimedLife(dammi, 'BTLF', 1.);
	UnitAddAbility(dammi, 'A0AY');
	SetUnitAbilityLevel(dammi, 'A0AY', 1 + GetUnitAbilityLevel(caster, 'A0F2'));
	IssueTargetOrderById(dammi, $D0132, caster);
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathMissile.mdl", target, "origin"));
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathMissile.mdl", target, "chest"));
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathMissile.mdl", target, "overhead"));
	UnitDamageTarget(caster, target, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS);
	IssueTargetOrderById(caster, $D000F, target);
	caster[null] = null;
	target[null] = null;
	dammi[null] = null;
	dammi2[null] = null;
}
bool Trig_Illusory_Attack_Conditions() {
	return GetSpellAbilityId() == 'A0F5';
}
void InitTrig_Illusory_Attack() {
	int index = 0;
	gg_trg_Illusory_Attack[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Illusory_Attack, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Illusory_Attack, Condition(Trig_Illusory_Attack_Conditions));
	TriggerAddAction(gg_trg_Illusory_Attack, Trig_Illusory_Attack_Actions);
}
void Trig_Summon_Illusions_with_Reflection_Actions() {
	unit illusion = GetSummonedUnit();
	unit dammi = GetSummoningUnit();
	unit target;
	int idhero = GetHandleId(udg_herounit[GetPlayerId(GetOwningPlayer(illusion)) + 1]);
	if (LoadBoolean(udg_hash, GetHandleId(dammi), 3)) {
		target[LoadUnitHandle(udg_hash, GetHandleId(dammi), 2)] = LoadUnitHandle(udg_hash, GetHandleId(dammi), 2);
		if (target != null) {
			SetUnitPosition(illusion, GetUnitX(target), GetUnitY(target));
			SetUnitPosition(illusion, GetUnitX(target) + 75. * Cos(GetRandomReal(.0, 360.) * bj_DEGTORAD), GetUnitY(target) + 75. * Sin(GetRandomReal(.0, 360.) * bj_DEGTORAD));
			UnitApplyTimedLife(illusion, 'BTLF', 5.);
			UnitAddAbility(illusion, 'Aloc');
			UnitRemoveAbility(illusion, 'A0F3');
			SetUnitVertexColor(illusion, $96, $96, $96, 'd');
			IssueTargetOrderById(illusion, $D000F, target);
		else
			RemoveUnit(illusion);
		}
	else
		if (LoadBoolean(udg_hash, GetHandleId(dammi), 5)) {
			target[LoadUnitHandle(udg_hash, GetHandleId(dammi), 4)] = LoadUnitHandle(udg_hash, GetHandleId(dammi), 4);
			SetUnitPosition(illusion, GetUnitX(target) + 50. * Cos(LoadReal(udg_hash, GetHandleId(dammi), 6) * bj_DEGTORAD), GetUnitY(target) + 50. * Sin(LoadReal(udg_hash, GetHandleId(dammi), 6) * bj_DEGTORAD));
			IssueTargetOrderById(illusion, $D000F, target);
		else
			SaveInteger(udg_hash, idhero, 60, LoadInteger(udg_hash, idhero, 60) + 1);
			SaveInteger(udg_hash, GetHandleId(illusion), 1, $A);
		}
	}
	dammi[null] = null;
	illusion[null] = null;
	target[null] = null;
}
bool Trig_Summon_Illusions_with_Reflection_Conditions() {
	return GetUnitTypeId(GetSummonedUnit()) == 'E004' && GetUnitAbilityLevel(GetSummoningUnit(), 'A0AY') > 0;
}
void InitTrig_Summon_Illusions_with_Reflection() {
	int index = 0;
	gg_trg_Summon_Illusions_with_Reflection[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Summon_Illusions_with_Reflection, Player(index), EVENT_PLAYER_UNIT_SUMMON, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Summon_Illusions_with_Reflection, Condition(Trig_Summon_Illusions_with_Reflection_Conditions));
	TriggerAddAction(gg_trg_Summon_Illusions_with_Reflection, Trig_Summon_Illusions_with_Reflection_Actions);
}
void Trig_Illusions_with_Phantoms_Dead_Actions() {
	int idhero = GetHandleId(udg_herounit[GetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1]);
	int count = LoadInteger(udg_hash, idhero, 60);
	if (count > 0) {
		SaveInteger(udg_hash, idhero, 60, count - 1);
	}
}
bool Trig_Illusions_with_Phantoms_Dead_Conditions() {
	return GetUnitTypeId(GetDyingUnit()) == 'E004' && IsUnitIllusion(GetDyingUnit()) && HaveSavedInteger(udg_hash, GetHandleId(GetDyingUnit()), 1);
}
void InitTrig_Illusions_with_Phantoms_Dead() {
	int index = 0;
	gg_trg_Illusions_with_Phantoms_Dead[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Illusions_with_Phantoms_Dead, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Illusions_with_Phantoms_Dead, Condition(Trig_Illusions_with_Phantoms_Dead_Conditions));
	TriggerAddAction(gg_trg_Illusions_with_Phantoms_Dead, Trig_Illusions_with_Phantoms_Dead_Actions);
}
void Trig_BladeMaster_Load_Actions() {
	AbilityPreload('A0FG', 6);
	AbilityPreload('A0FH', 6);
	AbilityPreload('A0FF', 6);
	AbilityPreload('A0G2', 3);
	AbilityPreload('A0G1', 4);
	AbilityPreload('A0G3', 1);
	AbilityPreload('A0GH', 1);
	AbilityPreload('B02W', 1);
	AbilityPreload('B02X', 1);
	EffectPreload("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl");
	EffectPreload("Abilities\\Weapons\\ZigguratMissile\\ZigguratMissile.mdl");
	EffectPreload("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl");
	EffectPreload("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl");
	EffectPreload("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile.mdl");
	EffectPreload("Abilities\\Spells\\NightElf\\Blink\\BlinkCaster.mdl");
	EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl");
	EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodMortarTeam.mdl");
	EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodFootman.mdl");
	EnableTrigger(gg_trg_Dissection);
	EnableTrigger(gg_trg_Whirlwind);
	EnableTrigger(gg_trg_Imboweling);
}
void InitTrig_BladeMaster_Load() {
	gg_trg_BladeMaster_Load[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_BladeMaster_Load, Trig_BladeMaster_Load_Actions);
}
void Trig_Dissection_Periodic_Damage_Target_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit Picked = LoadUnitHandle(udg_hash, h, 1);
	unit caster = LoadUnitHandle(udg_hash, h, 2);
	float periodicdamage = LoadReal(udg_hash, h, 3);
	int wait = LoadInteger(udg_hash, h, 4);
	if (wait > 0 && GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && GetUnitAbilityLevel(Picked, 'B02W') > 0) {
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 4, wait);
		UnitDamageTarget(caster, Picked, (periodicdamage / 40), false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
		if (wait == 30 || wait == 20 || wait == $A) {
			DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodMortarTeam.mdl", Picked, "origin"));
		}
	else
		DestroyTimer(t);
		FlushChildHashtable(udg_hash, h);
	}
	t[null] = null;
	Picked[null] = null;
	caster[null] = null;
}
void Trig_Dissection_Periodic_Move_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	float xc = GetUnitX(caster);
	float yc = GetUnitY(caster);
	float xt = LoadReal(udg_hash, h, 2);
	float yt = LoadReal(udg_hash, h, 3);
	float angle = LoadReal(udg_hash, h, 4);
	float xnext = xc + 400. * Cos(angle * bj_DEGTORAD);
	float ynext = yc + 400. * Sin(angle * bj_DEGTORAD);
	float damage = LoadReal(udg_hash, h, 5);
	group gdamage = LoadGroupHandle(udg_hash, h, 6);
	bool pravo = LoadBoolean(udg_hash, h, 9);
	bool first = LoadBoolean(udg_hash, h, $A);
	int jumps = LoadInteger(udg_hash, h, $B);
	float periodicdamage = LoadReal(udg_hash, h, $C);
	float xcenter = (xnext + xc) / 2;
	float ycenter = (ynext + yc) / 2;
	float radius;
	group g = CreateGroup();
	unit Picked;
	unit dammi;
	timer tPicked;
	int hPicked;
	bool lastslash;
	float cx;
	float cy;
	float ax;
	float ay;
	float bx;
	float by;
	player p = GetOwningPlayer(caster);
	jumps[jumps - 1] = jumps - 1;
	SaveInteger(udg_hash, h, $B, jumps);
	if (first) {
		xnext[xc + 200. * Cos(angle * bj_DEGTORAD)] = xc + 200. * Cos(angle * bj_DEGTORAD);
		ynext[yc + 200. * Sin(angle * bj_DEGTORAD)] = yc + 200. * Sin(angle * bj_DEGTORAD);
		xcenter[(xnext + xc) / 2] = (xnext + xc) / 2;
		ycenter[(ynext + yc) / 2] = (ynext + yc) / 2;
		first[false] = false;
		SaveBoolean(udg_hash, h, $A, first);
	}
	if (jumps <= 0) {
		lastslash[true] = true;
	}
	if (jumps > 0) {
		lastslash[false] = false;
		if (!((xnext > -5. && xnext < 5.) && (ynext > -5. && ynext < 5.))) {
			SetUnitPosition(caster, xnext, ynext);
		}
		if (GetRandomInt(1, 2) == 1) {
			SetUnitAnimationByIndex(caster, 8);
		else
			SetUnitAnimationByIndex(caster, 2);
		}
		radius[((SquareRoot((xnext - xc) * (xnext - xc) + (ynext - yc) * (ynext - yc))) / 2) + 200.] = ((SquareRoot((xnext - xc) * (xnext - xc) + (ynext - yc) * (ynext - yc))) / 2) + 200.;
		cx[xc + 200. * Cos((angle + 90.) * bj_DEGTORAD)] = xc + 200. * Cos((angle + 90.) * bj_DEGTORAD);
		cy[yc + 200. * Sin((angle + 90.) * bj_DEGTORAD)] = yc + 200. * Sin((angle + 90.) * bj_DEGTORAD);
		ax[xc + 200. * Cos((angle - 90.) * bj_DEGTORAD)] = xc + 200. * Cos((angle - 90.) * bj_DEGTORAD);
		ay[yc + 200. * Sin((angle - 90.) * bj_DEGTORAD)] = yc + 200. * Sin((angle - 90.) * bj_DEGTORAD);
		bx[xnext + 200. * Cos((angle + 90.) * bj_DEGTORAD)] = xnext + 200. * Cos((angle + 90.) * bj_DEGTORAD);
		by[ynext + 200. * Sin((angle + 90.) * bj_DEGTORAD)] = ynext + 200. * Sin((angle + 90.) * bj_DEGTORAD);
		if (pravo) {
			angle[angle + 120.] = angle + 120.;
			SaveBoolean(udg_hash, h, 9, false);
		else
			angle[angle - 120.] = angle - 120.;
			SaveBoolean(udg_hash, h, 9, true);
		}
		SaveReal(udg_hash, h, 4, angle);
		SaveGroupHandle(udg_hash, h, 6, gdamage);
	}
	if (lastslash) {
		cx[-11000.] = -11000.;
		cy[-11000.] = -11000.;
		ax[-10000.] = -10000.;
		ay[5000.] = 5000.;
		bx[6000.] = 6000.;
		by[-11000.] = -11000.;
		GroupEnumUnitsInRange(g, xt, yt, 175., null);
	else
		GroupEnumUnitsInRange(g, xcenter, ycenter, radius, null);
	}
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, p) && IsUnitInGroup(Picked, gdamage) == false && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U' && IsPointInRect(GetUnitX(Picked), GetUnitY(Picked), cx, cy, ax, ay, bx, by)) {
			GroupAddUnit(gdamage, Picked);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", Picked, "chest"));
			DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", Picked, "chest"));
			UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			dammi[CreateUnit(p, 'h00U', GetUnitX(Picked), GetUnitY(Picked), .0)] = CreateUnit(p, 'h00U', GetUnitX(Picked), GetUnitY(Picked), .0);
			UnitApplyTimedLife(dammi, 'BTLF', 1.);
			UnitAddAbility(dammi, 'A0G1');
			SetUnitAbilityLevel(dammi, 'A0G1', R2I(5 - ((4 * GetUnitState(Picked, UNIT_STATE_LIFE) - .1) / GetUnitState(Picked, UNIT_STATE_MAX_LIFE))));
			IssueTargetOrderById(dammi, $D006B, Picked);
			dammi[null] = null;
			if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405) {
				tPicked[CreateTimer()] = CreateTimer();
				hPicked[GetHandleId(tPicked)] = GetHandleId(tPicked);
				SaveUnitHandle(udg_hash, hPicked, 1, Picked);
				SaveUnitHandle(udg_hash, hPicked, 2, caster);
				SaveReal(udg_hash, hPicked, 3, periodicdamage * (.6 + .4 * GetUnitAbilityLevel(dammi, 'A0G1')));
				SaveInteger(udg_hash, hPicked, 4, 40);
				TimerStart(tPicked, .1, true, Trig_Dissection_Periodic_Damage_Target_Actions);
				tPicked[null] = null;
			}
		}
		GroupRemoveUnit(g, Picked);
	}
	if (jumps <= 0) {
		PauseUnit(caster, false);
		SetUnitInvulnerable(caster, false);
		SetUnitPathing(caster, true);
		SetUnitAnimation(caster, "stand");
		SetUnitTimeScale(caster, 1.);
		SetUnitTurnSpeed(caster, .6);
		SetUnitPosition(caster, xt, yt);
		DestroyEffect(LoadEffectHandle(udg_hash, h, 7));
		DestroyEffect(LoadEffectHandle(udg_hash, h, 8));
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	caster[null] = null;
	gdamage[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	Picked[null] = null;
	dammi[null] = null;
	tPicked[null] = null;
	p[null] = null;
}
void Trig_Dissection_Actions() {
	unit caster = GetSpellAbilityUnit();
	float xc = GetUnitX(caster);
	float yc = GetUnitY(caster);
	float xt;
	float yt;
	float dist;
	float angle;
	int lvl = GetUnitAbilityLevel(caster, 'A0FG');
	float damage = -5. + 40. * lvl;
	float periodicdamage = 4. + 16. * lvl;
	group gdamage = CreateGroup();
	timer t = CreateTimer();
	int h = GetHandleId(t);
	unit target = GetSpellTargetUnit();
	location loc;
	effect ef;
	int jumps;
	if (target != null) {
		xt[GetUnitX(target)] = GetUnitX(target);
		yt[GetUnitY(target)] = GetUnitY(target);
	else
		loc[GetSpellTargetLoc()] = GetSpellTargetLoc();
		xt[GetLocationX(loc)] = GetLocationX(loc);
		yt[GetLocationY(loc)] = GetLocationY(loc);
	}
	angle[(bj_RADTODEG * Atan2(yt - yc, xt - xc)) - 60.] = (bj_RADTODEG * Atan2(yt - yc, xt - xc)) - 60.;
	dist[SquareRoot((xt - xc) * (xt - xc) + (yt - yc) * (yt - yc))] = SquareRoot((xt - xc) * (xt - xc) + (yt - yc) * (yt - yc));
	jumps[R2I(dist / 200.)] = R2I(dist / 200.);
	SetUnitInvulnerable(caster, true);
	SetUnitPathing(caster, false);
	SetUnitAnimationByIndex(caster, 2);
	SetUnitTimeScale(caster, 13.33);
	SetUnitTurnSpeed(caster, 3.);
	if (GetRandomInt(1, 2) == 1) {
		SetUnitAnimationByIndex(caster, 8);
	else
		SetUnitAnimationByIndex(caster, 2);
	}
	ef[AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl", caster, "weapon")] = AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl", caster, "weapon");
	SaveEffectHandle(udg_hash, h, 7, ef);
	ef[null] = null;
	ef[AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratMissile\\ZigguratMissile.mdl", caster, "weapon")] = AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratMissile\\ZigguratMissile.mdl", caster, "weapon");
	SaveEffectHandle(udg_hash, h, 8, ef);
	ef[null] = null;
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 2, xt);
	SaveReal(udg_hash, h, 3, yt);
	SaveReal(udg_hash, h, 4, angle);
	SaveReal(udg_hash, h, 5, damage);
	SaveGroupHandle(udg_hash, h, 6, gdamage);
	SaveBoolean(udg_hash, h, 9, true);
	SaveBoolean(udg_hash, h, $A, true);
	SaveInteger(udg_hash, h, $B, jumps + 1);
	SaveReal(udg_hash, h, $C, periodicdamage);
	UnitPeriodicPostionMove(caster, .02, jumps * .075);
	TimerStart(t, .075, true, Trig_Dissection_Periodic_Move_Actions);
	caster[null] = null;
	gdamage[null] = null;
	t[null] = null;
	target[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
}
bool Trig_Dissection_Conditions() {
	return GetSpellAbilityId() == 'A0FG';
}
void InitTrig_Dissection() {
	int index = 0;
	gg_trg_Dissection[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Dissection, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Dissection, Condition(Trig_Dissection_Conditions));
	TriggerAddAction(gg_trg_Dissection, Trig_Dissection_Actions);
}
void Trig_Whirlwind_Periodic_Damage_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	float damage = LoadReal(udg_hash, h, 2);
	int wait = LoadInteger(udg_hash, h, 3);
	float xc = GetUnitX(caster);
	float yc = GetUnitY(caster);
	group g = CreateGroup();
	player p = GetOwningPlayer(caster);
	unit Picked;
	effect ef;
	if (wait > 0 && GetUnitState(caster, UNIT_STATE_LIFE) > .405) {
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 3, wait);
		GroupEnumUnitsInRange(g, xc, yc, 200., null);
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, p) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				if (wait - (wait / $A) * $A == 0) {
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", Picked, "chest"));
				}
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			}
			GroupRemoveUnit(g, Picked);
		}
	else
		ef[LoadEffectHandle(udg_hash, h, 4)] = LoadEffectHandle(udg_hash, h, 4);
		DestroyEffect(ef);
		ef[null] = null;
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	caster[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	p[null] = null;
	Picked[null] = null;
}
void Trig_Whirlwind_Actions() {
	unit caster = GetSpellAbilityUnit();
	int wait = 80;
	int lvl = GetUnitAbilityLevel(caster, 'A0FH');
	float damage = ((20 * lvl) + ((-.4 + .4 * lvl) * GetHeroAgi(caster, true))) / 20.;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	effect ef = AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl", caster, "weapon");
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 2, damage);
	SaveInteger(udg_hash, h, 3, wait);
	SaveEffectHandle(udg_hash, h, 4, ef);
	TimerStart(t, .05, true, Trig_Whirlwind_Periodic_Damage_Actions);
	caster[null] = null;
	t[null] = null;
	ef[null] = null;
}
bool Trig_Whirlwind_Conditions() {
	return GetSpellAbilityId() == 'A0FH';
}
void InitTrig_Whirlwind() {
	int index = 0;
	gg_trg_Whirlwind[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Whirlwind, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Whirlwind, Condition(Trig_Whirlwind_Conditions));
	TriggerAddAction(gg_trg_Whirlwind, Trig_Whirlwind_Actions);
}
void Trig_Imboweling_Periodic_Damage_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	float xt = LoadReal(udg_hash, h, 2);
	float yt = LoadReal(udg_hash, h, 3);
	float angle = LoadReal(udg_hash, h, 4) + GetRandomReal(75., 285.);
	float damage = LoadReal(udg_hash, h, 5);
	group gdamage = LoadGroupHandle(udg_hash, h, 6);
	float anglejump = LoadReal(udg_hash, h, 7);
	float damagejump = LoadReal(udg_hash, h, 8);
	int jumps = LoadInteger(udg_hash, h, 9);
	float xc = GetUnitX(caster);
	float yc = GetUnitY(caster);
	float x = xt + GetRandomReal(150., 250.) * Cos(angle * bj_DEGTORAD);
	float y = yt + GetRandomReal(150., 250.) * Sin(angle * bj_DEGTORAD);
	group g = CreateGroup();
	float dist = SquareRoot((xt - xc) * (xt - xc) + (yt - yc) * (yt - yc));
	int lop = R2I(dist / 100.) + 1;
	unit Picked;
	unit dammi;
	player p = GetOwningPlayer(caster);
	SaveReal(udg_hash, h, 4, angle);
	jumps[jumps - 1] = jumps - 1;
	SaveInteger(udg_hash, h, 9, jumps);
	if (jumps > 0) {
		if (jumps != 1 && jumps != $B && jumps != 21 && jumps != 2 && jumps != $C && jumps != 22) {
			SetUnitFacing(caster, angle);
			SetUnitTimeScale(caster, 7.5);
			if (GetRandomInt(1, 2) == 1) {
				SetUnitAnimationByIndex(caster, 8);
			else
				SetUnitAnimationByIndex(caster, 2);
			}
			if (IsTerrainPathable(x, y, PATHING_TYPE_FLYABILITY) == false) {
				SetUnitX(caster, x);
				SetUnitY(caster, y);
			}
			SetUnitFacing(caster, angle);
			while (true) {
				if (lop < 0) break;
				GroupEnumUnitsInRange(g, x + ((100. * lop) * Cos(angle * bj_DEGTORAD)), y + ((100. * lop) * Sin(angle * bj_DEGTORAD)), 175., null);
				lop[lop - 1] = lop - 1;
			}
			while (true) {
				Picked[FirstOfGroup(g)] = FirstOfGroup(g);
				if (Picked == null) break;
				if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitInGroup(Picked, gdamage) == false && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
					UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_MELEE, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", Picked, "chest"));
					dammi[CreateUnit(p, 'h00U', GetUnitX(Picked), GetUnitY(Picked), .0)] = CreateUnit(p, 'h00U', GetUnitX(Picked), GetUnitY(Picked), .0);
					UnitApplyTimedLife(dammi, 'BTLF', 1.);
					UnitAddAbility(dammi, 'A0G3');
					IssueTargetOrderById(dammi, $D006B, Picked);
					dammi[null] = null;
				}
				GroupRemoveUnit(g, Picked);
			}
			Picked[null] = null;
			TimerStart(t, .1, false, Trig_Imboweling_Periodic_Damage_Actions);
		}
		SaveGroupHandle(udg_hash, h, 6, gdamage);
		if (jumps == 2 || jumps == $C || jumps == 22) {
			anglejump[anglejump + 120.] = anglejump + 120.;
			SaveReal(udg_hash, h, 7, anglejump);
			x[xt + 200. * Cos(anglejump * bj_DEGTORAD)] = xt + 200. * Cos(anglejump * bj_DEGTORAD);
			y[yt + 200. * Sin(anglejump * bj_DEGTORAD)] = yt + 200. * Sin(anglejump * bj_DEGTORAD);
			if (IsTerrainPathable(x, y, PATHING_TYPE_FLYABILITY) == false) {
				SetUnitX(caster, x);
				SetUnitY(caster, y);
			}
			SetUnitFacing(caster, anglejump);
			SetUnitTimeScale(caster, 1.4);
			SetUnitAnimationByIndex(caster, 3);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Blink\\BlinkCaster.mdl", caster, "chest"));
			TimerStart(t, .6, false, Trig_Imboweling_Periodic_Damage_Actions);
		}
		if (jumps == 1 || jumps == $B || jumps == 21) {
			GroupEnumUnitsInRange(g, xc + 100. * Cos(anglejump * bj_DEGTORAD), yc + 100. * Sin(anglejump * bj_DEGTORAD), 225., null);
			p[GetOwningPlayer(caster)] = GetOwningPlayer(caster);
			while (true) {
				Picked[FirstOfGroup(g)] = FirstOfGroup(g);
				if (Picked == null) break;
				if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
					UnitDamageTarget(caster, Picked, damagejump, false, false, ATTACK_TYPE_MELEE, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", Picked, "chest"));
					DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", Picked, "chest"));
					dammi[CreateUnit(p, 'h00U', GetUnitX(Picked), GetUnitY(Picked), .0)] = CreateUnit(p, 'h00U', GetUnitX(Picked), GetUnitY(Picked), .0);
					UnitApplyTimedLife(dammi, 'BTLF', 1.);
					UnitAddAbility(dammi, 'A0G4');
					IssueTargetOrderById(dammi, $D007F, Picked);
					dammi[null] = null;
				}
				GroupRemoveUnit(g, Picked);
			}
			Picked[null] = null;
			DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile.mdl", xc + 100. * Cos(anglejump * bj_DEGTORAD), yc + 100. * Sin(anglejump * bj_DEGTORAD)));
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl", xc + 100. * Cos(anglejump * bj_DEGTORAD), yc + 100. * Sin(anglejump * bj_DEGTORAD)));
			TimerStart(t, .1, false, Trig_Imboweling_Periodic_Damage_Actions);
			GroupClear(gdamage);
			SaveGroupHandle(udg_hash, h, 6, gdamage);
		}
	else
		DestroyEffect(LoadEffectHandle(udg_hash, h, $A));
		DestroyEffect(LoadEffectHandle(udg_hash, h, $B));
		SetUnitInvulnerable(caster, false);
		SetUnitPathing(caster, true);
		SetUnitAnimation(caster, "Stand");
		SetUnitTimeScale(caster, 1.);
		SetUnitTurnSpeed(caster, GetUnitDefaultTurnSpeed(caster));
		IssueImmediateOrderById(caster, $D0004);
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	caster[null] = null;
	gdamage[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	Picked[null] = null;
	dammi[null] = null;
	p[null] = null;
}
void Trig_Imboweling_Actions() {
	unit caster = GetSpellAbilityUnit();
	float xc = GetUnitX(caster);
	float yc = GetUnitY(caster);
	location loc = GetSpellTargetLoc();
	float xt = GetLocationX(loc);
	float yt = GetLocationY(loc);
	float dist;
	float angle = .0;
	float anglejump = (bj_RADTODEG * Atan2(yt - yc, xt - xc));
	int lvl = GetUnitAbilityLevel(caster, 'A0G2');
	float damage = 5. + (25. * lvl) + ((.1 + .1 * lvl) * GetHeroAgi(caster, true));
	float damagejump = (50 + GetHeroAgi(caster, true)) * 1.5 * lvl;
	group gdamage = CreateGroup();
	timer t = CreateTimer();
	int h = GetHandleId(t);
	effect ef;
	int jumps = ($A * 3) + 1;
	SetUnitInvulnerable(caster, true);
	SetUnitPathing(caster, false);
	SetUnitAnimationByIndex(caster, 2);
	SetUnitTimeScale(caster, 20.);
	SetUnitTurnSpeed(caster, 3.);
	if (GetRandomInt(1, 2) == 1) {
		SetUnitAnimationByIndex(caster, 8);
	else
		SetUnitAnimationByIndex(caster, 2);
	}
	ef[AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl", caster, "weapon")] = AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl", caster, "weapon");
	SaveEffectHandle(udg_hash, h, $A, ef);
	ef[null] = null;
	ef[AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratMissile\\ZigguratMissile.mdl", caster, "weapon")] = AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratMissile\\ZigguratMissile.mdl", caster, "weapon");
	SaveEffectHandle(udg_hash, h, $B, ef);
	ef[null] = null;
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 2, xt);
	SaveReal(udg_hash, h, 3, yt);
	SaveReal(udg_hash, h, 4, angle);
	SaveReal(udg_hash, h, 5, damage);
	SaveGroupHandle(udg_hash, h, 6, gdamage);
	SaveReal(udg_hash, h, 7, anglejump);
	SaveReal(udg_hash, h, 8, damagejump);
	SaveInteger(udg_hash, h, 9, jumps);
	UnitPeriodicPostionMove(caster, .02, jumps * .1 + 1.5);
	TimerStart(t, .1, false, Trig_Imboweling_Periodic_Damage_Actions);
	caster[null] = null;
	gdamage[null] = null;
	t[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
}
bool Trig_Imboweling_Conditions() {
	return GetSpellAbilityId() == 'A0G2';
}
void InitTrig_Imboweling() {
	int index = 0;
	gg_trg_Imboweling[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Imboweling, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Imboweling, Condition(Trig_Imboweling_Conditions));
	TriggerAddAction(gg_trg_Imboweling, Trig_Imboweling_Actions);
}
void Trig_Master_of_Lightnings_Load_Actions() {
	AbilityPreload('A07N', 6);
	AbilityPreload('A07O', 6);
	AbilityPreload('A07Q', 6);
	AbilityPreload('A07P', 3);
	AbilityPreload('A07S', 6);
	EffectPreload("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl");
	EffectPreload("Abilities\\Spells\\Orc\\LightningBolt\\LightningBoltMissile.mdl");
	EffectPreload("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl");
	EffectPreload("Abilities\\Spells\\Items\\AIlb\\AIlbTarget.mdl");
	EffectPreload("Abilities\\Weapons\\Bolt\\BoltImpact.mdl");
	EffectPreload("Abilities\\Spells\\Items\\AIlb\\AIlbSpecialArt.mdl");
	EffectPreload("Abilities\\Spells\\Orc\\LightningShield\\LightningShieldBuff.mdl");
	EffectPreload("war3mapImported\\OutlandStorm.mdx");
	EffectPreload("Abilities\\Spells\\Orc\\Purge\\PurgeBuffTarget.mdl");
	EffectPreload("Abilities\\Spells\\Orc\\LightningShield\\LightningShieldTarget.mdl");
	EnableTrigger(gg_trg_Thundercloud);
	EnableTrigger(gg_trg_Power_of_Lightnings);
	EnableTrigger(gg_trg_Electric_Field);
	EnableTrigger(gg_trg_Storm);
}
void InitTrig_Master_of_Lightnings_Load() {
	gg_trg_Master_of_Lightnings_Load[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Master_of_Lightnings_Load, Trig_Master_of_Lightnings_Load_Actions);
}
void Trig_Thundercloud_lightning_Actions() {
	timer tl = GetExpiredTimer();
	int hl = GetHandleId(tl);
	int lop = 0;
	lightning l;
	while (true) {
		if (lop > 5) break;
		l[LoadLightningHandle(udg_hash, hl, lop)] = LoadLightningHandle(udg_hash, hl, lop);
		DestroyLightning(l);
		l[null] = null;
		lop[lop + 1] = lop + 1;
	}
	FlushChildHashtable(udg_hash, hl);
	DestroyTimer(tl);
	tl[null] = null;
}
void Trig_Thundercloud_move_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit cloud = LoadUnitHandle(udg_hash, h, 1);
	float x = LoadReal(udg_hash, h, 2);
	float y = LoadReal(udg_hash, h, 3);
	float angle = LoadReal(udg_hash, h, 4);
	int stage = LoadInteger(udg_hash, h, 5);
	unit caster = LoadUnitHandle(udg_hash, h, 7);
	float xp = LoadReal(udg_hash, h, 8);
	float yp = LoadReal(udg_hash, h, 9);
	float damage = LoadReal(udg_hash, h, $A);
	player p = LoadPlayerHandle(udg_hash, h, $B);
	int lop = 0;
	float xu = GetUnitX(cloud);
	float yu = GetUnitY(cloud);
	float distance = SquareRoot((xp - xu) * (xp - xu) + (yp - yu) * (yp - yu));
	float xt;
	float yt;
	unit slower;
	timer tl;
	int hl;
	group g;
	unit Picked;
	lightning l;
	float between;
	effect efcloud;
	location locz;
	location loccloudz = GetUnitLoc(cloud);
	if (distance < 3.75) {
		stage[stage + 1] = stage + 1;
		SaveInteger(udg_hash, h, 5, stage);
		tl[CreateTimer()] = CreateTimer();
		hl[GetHandleId(tl)] = GetHandleId(tl);
		while (true) {
			if (lop > 4) break;
			xt[xp + 150. * Cos((lop * 72.) * bj_DEGTORAD)] = xp + 150. * Cos((lop * 72.) * bj_DEGTORAD);
			yt[yp + 150. * Sin((lop * 72.) * bj_DEGTORAD)] = yp + 150. * Sin((lop * 72.) * bj_DEGTORAD);
			locz[Location(xt, yt)] = Location(xt, yt);
			l[AddLightningEx("FORK", true, xu, yu, 425. + GetLocationZ(loccloudz), xt, yt, -50. + GetLocationZ(locz))] = AddLightningEx("FORK", true, xu, yu, 425. + GetLocationZ(loccloudz), xt, yt, -50. + GetLocationZ(locz));
			DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", xt, yt));
			SaveLightningHandle(udg_hash, hl, lop, l);
			l[null] = null;
			lop[lop + 1] = lop + 1;
			RemoveLocation(locz);
			locz[null] = null;
		}
		l[null] = null;
		locz[Location(xt, yt)] = Location(xt, yt);
		l[AddLightningEx("FORK", true, xu, yu, 425. + GetLocationZ(loccloudz), xp, yp, -50. + GetLocationZ(locz))] = AddLightningEx("FORK", true, xu, yu, 425. + GetLocationZ(loccloudz), xp, yp, -50. + GetLocationZ(locz));
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.mdl", xp, yp));
		DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", xp, yp));
		SaveLightningHandle(udg_hash, hl, 5, l);
		l[null] = null;
		RemoveLocation(locz);
		locz[null] = null;
		g[CreateGroup()] = CreateGroup();
		GroupEnumUnitsInRange(g, xp, yp, $E1, null);
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				slower[CreateUnit(p, 'h00U', xp, yp, .0)] = CreateUnit(p, 'h00U', xp, yp, .0);
				UnitApplyTimedLife(slower, 'BTLF', .75);
				UnitAddAbility(slower, 'A07S');
				SetUnitAbilityLevel(slower, 'A07S', GetUnitAbilityLevel(caster, 'A07N'));
				IssueTargetOrderById(slower, $D006B, Picked);
				slower[null] = null;
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", Picked, "origin"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIlb\\AIlbSpecialArt.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningShield\\LightningShieldBuff.mdl", Picked, "origin"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", Picked, "chest"));
			}
			GroupRemoveUnit(g, Picked);
		}
		Picked[null] = null;
		TimerStart(tl, .6, false, Trig_Thundercloud_lightning_Actions);
		xp[x + GetRandomReal(200., 250.) * Cos(((stage * 120.) + angle) * bj_DEGTORAD)] = x + GetRandomReal(200., 250.) * Cos(((stage * 120.) + angle) * bj_DEGTORAD);
		yp[y + GetRandomReal(200., 250.) * Sin(((stage * 120.) + angle) * bj_DEGTORAD)] = y + GetRandomReal(200., 250.) * Sin(((stage * 120.) + angle) * bj_DEGTORAD);
		SaveReal(udg_hash, h, 8, xp);
		SaveReal(udg_hash, h, 9, yp);
		tl[null] = null;
		Picked[null] = null;
		DestroyGroup(g);
		g[null] = null;
		if (stage >= 4) {
			efcloud[LoadEffectHandle(udg_hash, h, 6)] = LoadEffectHandle(udg_hash, h, 6);
			DestroyEffect(efcloud);
			efcloud[null] = null;
			KillUnit(cloud);
			cloud[null] = null;
			FlushChildHashtable(udg_hash, h);
			DestroyTimer(t);
			t[null] = null;
		}
	else
		between[bj_RADTODEG * Atan2(yp - yu, xp - xu)] = bj_RADTODEG * Atan2(yp - yu, xp - xu);
		xu[xu + 5. * Cos(between * bj_DEGTORAD)] = xu + 5. * Cos(between * bj_DEGTORAD);
		yu[yu + 5. * Sin(between * bj_DEGTORAD)] = yu + 5. * Sin(between * bj_DEGTORAD);
		if (IsTerrainPathable(xu, yu, PATHING_TYPE_FLYABILITY) == false) {
			SetUnitPosition(cloud, xu, yu);
		else
			efcloud[LoadEffectHandle(udg_hash, h, 6)] = LoadEffectHandle(udg_hash, h, 6);
			DestroyEffect(efcloud);
			efcloud[null] = null;
			KillUnit(cloud);
			cloud[null] = null;
			FlushChildHashtable(udg_hash, h);
			DestroyTimer(t);
			t[null] = null;
		}
	}
	t[null] = null;
	cloud[null] = null;
	caster[null] = null;
	p[null] = null;
	RemoveLocation(loccloudz);
	loccloudz[null] = null;
}
void Trig_Thundercloud_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit caster2;
	int lvl = GetUnitAbilityLevel(caster, 'A07N');
	int lvlult = GetUnitAbilityLevel(caster, 'A07P');
	int lvlultup = GetUnitAbilityLevel(caster, 'A0Q6');
	location loc = GetSpellTargetLoc();
	float x = GetLocationX(loc);
	float y = GetLocationY(loc);
	int stage = 0;
	unit cloud = CreateUnit(GetOwningPlayer(caster), 'h00U', x, y, .0);
	effect efcloud;
	float angle = GetRandomReal(.0, 360.);
	float damage = (.12 * GetUnitAbilityLevel(caster, 'A07P') + 1.) * ((5. + (25. * lvl) + ((.1 + .05 * lvl) * GetHeroInt(caster, true))));
	timer t = CreateTimer();
	int h = GetHandleId(t);
	player p;
	if (lvlult > 0) {
		damage[(.12 * lvlult + 1.) * ((5. + (25. * lvl) + ((.1 + .05 * lvl) * GetHeroInt(caster, true))))] = (.12 * lvlult + 1.) * ((5. + (25. * lvl) + ((.1 + .05 * lvl) * GetHeroInt(caster, true))));
	}
	if (lvlultup > 0) {
		damage[(.17 * lvlultup + 1.) * ((5. + (25. * lvl) + ((.1 + .05 * lvl) * GetHeroInt(caster, true))))] = (.17 * lvlultup + 1.) * ((5. + (25. * lvl) + ((.1 + .05 * lvl) * GetHeroInt(caster, true))));
	}
	if (GetOwningPlayer(caster) == Player($F)) {
		p[LoadPlayerHandle(udg_hash, GetHandleId(caster), 1)] = LoadPlayerHandle(udg_hash, GetHandleId(caster), 1);
		caster2[LoadUnitHandle(udg_hash, GetHandleId(caster), 2)] = LoadUnitHandle(udg_hash, GetHandleId(caster), 2);
		FlushChildHashtable(udg_hash, GetHandleId(caster));
	else
		p[GetOwningPlayer(caster)] = GetOwningPlayer(caster);
		caster2[caster] = caster;
	}
	UnitAddAbility(cloud, 'Amrf');
	UnitRemoveAbility(cloud, 'Amrf');
	SetUnitFlyHeight(cloud, 350. + GetLocationZ(loc), .0);
	SetUnitScale(cloud, 1.35, 1.35, 1.35);
	SetUnitPosition(cloud, x, y);
	efcloud[AddSpecialEffectTarget("war3mapImported\\OutlandStorm.mdx", cloud, "origin")] = AddSpecialEffectTarget("war3mapImported\\OutlandStorm.mdx", cloud, "origin");
	SaveUnitHandle(udg_hash, h, 1, cloud);
	SaveReal(udg_hash, h, 2, x);
	SaveReal(udg_hash, h, 3, y);
	SaveReal(udg_hash, h, 4, angle);
	SaveInteger(udg_hash, h, 5, stage);
	SaveEffectHandle(udg_hash, h, 6, efcloud);
	SaveUnitHandle(udg_hash, h, 7, caster2);
	SaveReal(udg_hash, h, 8, x);
	SaveReal(udg_hash, h, 9, y);
	SaveReal(udg_hash, h, $A, damage);
	SavePlayerHandle(udg_hash, h, $B, p);
	TimerStart(t, .04, true, Trig_Thundercloud_move_Actions);
	caster[null] = null;
	caster2[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	cloud[null] = null;
	efcloud[null] = null;
	t[null] = null;
	p[null] = null;
}
bool Trig_Thundercloud_Conditions() {
	return GetSpellAbilityId() == 'A07N';
}
void InitTrig_Thundercloud() {
	int index = 0;
	gg_trg_Thundercloud[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Thundercloud, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Thundercloud, Condition(Trig_Thundercloud_Conditions));
	TriggerAddAction(gg_trg_Thundercloud, Trig_Thundercloud_Actions);
}
void Trig_Power_of_Lightnings_periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit ward = LoadUnitHandle(udg_hash, h, $A);
	float x = GetUnitX(ward);
	float y = GetUnitY(ward);
	int stage = LoadInteger(udg_hash, h, $B);
	int adddamage = LoadInteger(udg_hash, h, 18);
	int addas = LoadInteger(udg_hash, h, 19);
	array<unit> target;
	array<effect> ef;
	float tx;
	float ty;
	array<lightning> l;
	int second = LoadInteger(udg_hash, h, $D);
	int bonus;
	int lop = 1;
	effect wef;
	int count = LoadInteger(udg_hash, h, $F);
	bool destroy = false;
	location locwardz = GetUnitLoc(ward);
	location locz;
	while (true) {
		if (lop > count) break;
		target[LoadUnitHandle(udg_hash, h, lop)] = LoadUnitHandle(udg_hash, h, lop);
		l[LoadLightningHandle(udg_hash, h, 3 + lop)] = LoadLightningHandle(udg_hash, h, 3 + lop);
		lop[lop + 1] = lop + 1;
	}
	lop[1] = 1;
	if (stage >= 25) {
		stage[0] = 0;
		second[second + 1] = second + 1;
		SaveInteger(udg_hash, h, $D, second);
		bonus[LoadInteger(udg_hash, h, $C)] = LoadInteger(udg_hash, h, $C);
		while (true) {
			if (lop > count) break;
			SetAttackAbilityLevel(target[lop], adddamage);
			SetAttackSpeedAbilityLevel(target[lop], addas);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", target[lop], "weapon"));
			lop[lop + 1] = lop + 1;
		}
	else
		stage[stage + 1] = stage + 1;
		lop[1] = 1;
		while (true) {
			if (lop > count) break;
			if (target[lop] != null) {
				tx[GetUnitX(target[lop]) - x] = GetUnitX(target[lop]) - x;
				ty[GetUnitY(target[lop]) - y] = GetUnitY(target[lop]) - y;
				if (SquareRoot(tx * tx + ty * ty) < 500 && GetUnitState(target[lop], UNIT_STATE_LIFE) > .405 && second < $F) {
					locz[GetUnitLoc(target[lop])] = GetUnitLoc(target[lop]);
					MoveLightningEx(l[lop], true, x, y, 150. + GetLocationZ(locwardz), GetUnitX(target[lop]), GetUnitY(target[lop]), GetUnitFlyHeight(target[lop]) + 60. + GetLocationZ(locz));
					RemoveLocation(locz);
					locz[null] = null;
				else
					destroy[true] = true;
				}
			}
			lop[lop + 1] = lop + 1;
		}
	}
	if (destroy) {
		lop[1] = 1;
		bonus[LoadInteger(udg_hash, h, $C)] = LoadInteger(udg_hash, h, $C);
		wef[LoadEffectHandle(udg_hash, h, $E)] = LoadEffectHandle(udg_hash, h, $E);
		DestroyEffect(wef);
		wef[null] = null;
		KillUnit(ward);
		while (true) {
			if (lop > count) break;
			SetAttackAbilityLevel(target[lop], -1 * adddamage * second);
			SetAttackSpeedAbilityLevel(target[lop], -second * addas);
			ef[LoadEffectHandle(udg_hash, h, 6 + lop)] = LoadEffectHandle(udg_hash, h, 6 + lop);
			DestroyEffect(ef[lop]);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", target[lop], "weapon"));
			DestroyLightning(l[lop]);
			ef[null] = null;
			lop[lop + 1] = lop + 1;
		}
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
		t[null] = null;
	}
	SaveInteger(udg_hash, h, $B, stage);
	lop[1] = 1;
	while (true) {
		if (lop > count) break;
		target[null] = null;
		l[null] = null;
		lop[lop + 1] = lop + 1;
	}
	t[null] = null;
	ward[null] = null;
	RemoveLocation(locwardz);
	locwardz[null] = null;
}
void Trig_Power_of_Lightnings_Actions() {
	unit caster = GetSpellAbilityUnit();
	location loc = GetSpellTargetLoc();
	float x = GetLocationX(loc);
	float y = GetLocationY(loc);
	unit ward = CreateUnit(GetOwningPlayer(caster), 'h00U', x, y, GetRandomReal(.0, 360.));
	array<unit> target;
	float xw = GetUnitX(ward);
	float yw = GetUnitY(ward);
	array<lightning> l;
	int lop = 1;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	group g = CreateGroup();
	group grup = CreateGroup();
	unit Picked;
	int stage = 0;
	int second = 0;
	int bonus = 2 + GetUnitAbilityLevel(caster, 'A07O');
	array<effect> ef;
	effect wef = AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", ward, "chest");
	int count = R2I((I2R(GetUnitAbilityLevel(caster, 'A07O')) / 2) + .5);
	location locz;
	int adddamage = 2 + GetUnitAbilityLevel(caster, 'A07O');
	int addas = R2I(adddamage / 2);
	UnitAddAbility(ward, 'Amrf');
	UnitRemoveAbility(ward, 'Amrf');
	SetUnitFlyHeight(ward, 50., .0);
	SetUnitScale(ward, 2.5, 2.5, 2.5);
	GroupEnumUnitsInRange(g, x, y, 450., null);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if (IsUnitAlly(Picked, GetOwningPlayer(caster)) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
			GroupAddUnit(grup, Picked);
		}
		GroupRemoveUnit(g, Picked);
	}
	RandomUnitFromGroup(R2I((I2R(GetUnitAbilityLevel(caster, 'A07O')) / 2) + .5), grup);
	while (true) {
		if (lop > count) break;
		target[FirstOfGroup(udg_GroupRandomUnitFromGroup)] = FirstOfGroup(udg_GroupRandomUnitFromGroup);
		if (target[lop] != null) {
			locz[GetUnitLoc(target[lop])] = GetUnitLoc(target[lop]);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", target[lop], "chest"));
			ef[AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", target[lop], "weapon")] = AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", target[lop], "weapon");
			l[AddLightningEx("CLPB", true, x, y, 150. + GetLocationZ(loc), GetUnitX(target[lop]), GetUnitY(target[lop]), GetUnitFlyHeight(target[lop]) + 50. + GetLocationZ(locz))] = AddLightningEx("CLPB", true, x, y, 150. + GetLocationZ(loc), GetUnitX(target[lop]), GetUnitY(target[lop]), GetUnitFlyHeight(target[lop]) + 50. + GetLocationZ(locz));
			SaveUnitHandle(udg_hash, h, lop, target[lop]);
			SaveLightningHandle(udg_hash, h, lop + 3, l[lop]);
			SaveEffectHandle(udg_hash, h, lop + 6, ef[lop]);
			RemoveLocation(locz);
			locz[null] = null;
		}
		GroupRemoveUnit(udg_GroupRandomUnitFromGroup, target[lop]);
		lop[lop + 1] = lop + 1;
	}
	SaveUnitHandle(udg_hash, h, $A, ward);
	SaveInteger(udg_hash, h, $B, stage);
	SaveInteger(udg_hash, h, $C, bonus);
	SaveInteger(udg_hash, h, $D, second);
	SaveEffectHandle(udg_hash, h, $E, wef);
	SaveInteger(udg_hash, h, $F, count);
	SaveInteger(udg_hash, h, 18, adddamage);
	SaveInteger(udg_hash, h, 19, addas);
	TimerStart(t, .04, true, Trig_Power_of_Lightnings_periodic_Actions);
	lop[1] = 1;
	while (true) {
		if (lop > count) break;
		target[null] = null;
		l[null] = null;
		ef[null] = null;
		lop[lop + 1] = lop + 1;
	}
	caster[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	ward[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	GroupClear(grup);
	DestroyGroup(grup);
	grup[null] = null;
	Picked[null] = null;
	wef[null] = null;
	t[null] = null;
}
bool Trig_Power_of_Lightnings_Conditions() {
	return GetSpellAbilityId() == 'A07O';
}
void InitTrig_Power_of_Lightnings() {
	int index = 0;
	gg_trg_Power_of_Lightnings[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Power_of_Lightnings, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Power_of_Lightnings, Condition(Trig_Power_of_Lightnings_Conditions));
	TriggerAddAction(gg_trg_Power_of_Lightnings, Trig_Power_of_Lightnings_Actions);
}
void Trig_Electric_Field_periodic_lightning_move_Actions() {
	timer tl = GetExpiredTimer();
	int hl = GetHandleId(tl);
	int check = LoadInteger(udg_hash, hl, 20);
	unit caster = LoadUnitHandle(udg_hash, hl, 21);
	int lvl = GetUnitAbilityLevel(caster, 'A07Q');
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	location loccasterz = GetUnitLoc(caster);
	location locz;
	array<lightning> l;
	array<unit> target;
	int lop = 0;
	int count = LoadInteger(udg_hash, hl, 22);
	if (check < $F) {
		check[check + 1] = check + 1;
		SaveInteger(udg_hash, hl, 20, check);
		while (true) {
			if (lop + 1 > count) break;
			l[LoadLightningHandle(udg_hash, hl, lop)] = LoadLightningHandle(udg_hash, hl, lop);
			target[LoadUnitHandle(udg_hash, hl, lop + $A)] = LoadUnitHandle(udg_hash, hl, lop + $A);
			if (GetUnitState(target[lop], UNIT_STATE_LIFE) > .405 && target[lop] != null) {
				locz[GetUnitLoc(target[lop])] = GetUnitLoc(target[lop]);
				MoveLightningEx(l[lop], true, x, y, GetUnitFlyHeight(caster) + 215. + GetLocationZ(loccasterz), GetUnitX(target[lop]), GetUnitY(target[lop]), GetUnitFlyHeight(target[lop]) + 25. + GetLocationZ(locz));
				RemoveLocation(locz);
				locz[null] = null;
			}
			l[null] = null;
			target[null] = null;
			lop[lop + 1] = lop + 1;
		}
	else
		lop[0] = 0;
		while (true) {
			if (lop > count) break;
			l[LoadLightningHandle(udg_hash, hl, lop)] = LoadLightningHandle(udg_hash, hl, lop);
			DestroyLightning(l[lop]);
			l[null] = null;
			lop[lop + 1] = lop + 1;
		}
		FlushChildHashtable(udg_hash, hl);
		DestroyTimer(tl);
	}
	tl[null] = null;
	caster[null] = null;
	RemoveLocation(loccasterz);
	loccasterz[null] = null;
}
void Trig_Electric_Field_periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	int lvl = GetUnitAbilityLevel(caster, 'A07Q');
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	group g;
	group grup;
	unit Picked;
	int lop = 0;
	unit target;
	array<lightning> l;
	location loccasterz;
	location locz;
	timer tl;
	int hl;
	int check = 0;
	float damage;
	int count = 0;
	if (GetUnitState(caster, UNIT_STATE_LIFE) > .405) {
		damage[10. + (lvl * $F) + GetRandomReal(.0, lvl * 10.)] = 10. + (lvl * $F) + GetRandomReal(.0, lvl * 10.);
		tl[CreateTimer()] = CreateTimer();
		hl[GetHandleId(tl)] = GetHandleId(tl);
		loccasterz[GetUnitLoc(caster)] = GetUnitLoc(caster);
		g[CreateGroup()] = CreateGroup();
		grup[CreateGroup()] = CreateGroup();
		GroupEnumUnitsInRange(g, x, y, 500., null);
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", caster, "overhead"));
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, GetOwningPlayer(caster)) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				GroupAddUnit(grup, Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
		RandomUnitFromGroup(1 + lvl, grup);
		GroupAddGroup(udg_GroupRandomUnitFromGroup, g);
		while (true) {
			target[FirstOfGroup(g)] = FirstOfGroup(g);
			if (lop > lvl + 1 || target == null) break;
			count[count + 1] = count + 1;
			locz[GetUnitLoc(target)] = GetUnitLoc(target);
			l[AddLightningEx("CLPB", true, x, y, GetUnitFlyHeight(caster) + 215. + GetLocationZ(loccasterz), GetUnitX(target), GetUnitY(target), GetUnitFlyHeight(target) + 25. + GetLocationZ(locz))] = AddLightningEx("CLPB", true, x, y, GetUnitFlyHeight(caster) + 215. + GetLocationZ(loccasterz), GetUnitX(target), GetUnitY(target), GetUnitFlyHeight(target) + 25. + GetLocationZ(locz));
			SaveLightningHandle(udg_hash, hl, lop, l[lop]);
			SaveUnitHandle(udg_hash, hl, lop + $A, target);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", target, "chest"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIlb\\AIlbSpecialArt.mdl", target, "chest"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", target, "origin"));
			UnitDamageTarget(caster, target, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			GroupRemoveUnit(g, target);
			RemoveLocation(locz);
			locz[null] = null;
			l[null] = null;
			target[null] = null;
			lop[lop + 1] = lop + 1;
		}
		SaveInteger(udg_hash, hl, 20, check);
		SaveUnitHandle(udg_hash, hl, 21, caster);
		SaveInteger(udg_hash, hl, 22, count);
		TimerStart(tl, .04, true, Trig_Electric_Field_periodic_lightning_move_Actions);
		RemoveLocation(loccasterz);
		loccasterz[null] = null;
		tl[null] = null;
		GroupClear(g);
		DestroyGroup(g);
		g[null] = null;
		GroupClear(grup);
		DestroyGroup(grup);
		grup[null] = null;
		Picked[null] = null;
		target[null] = null;
	}
	t[null] = null;
	caster[null] = null;
}
void Trig_Learn_Skill_Electric_Field_Actions() {
	unit caster = GetLearningUnit();
	int lvl = GetUnitAbilityLevel(caster, 'A07Q');
	timer t;
	int h;
	if (lvl == 1) {
		t[CreateTimer()] = CreateTimer();
		h[GetHandleId(t)] = GetHandleId(t);
		SaveTimerHandle(udg_hash, GetHandleId(caster), $B, t);
	}
	t[LoadTimerHandle(udg_hash, GetHandleId(caster), $B)] = LoadTimerHandle(udg_hash, GetHandleId(caster), $B);
	SaveUnitHandle(udg_hash, h, 1, caster);
	TimerStart(t, 4. - (.25 * lvl), true, Trig_Electric_Field_periodic_Actions);
	caster[null] = null;
	t[null] = null;
}
bool Trig_Learn_Skill_Electric_Field_Conditions() {
	return GetLearnedSkill() == 'A07Q' && GetUnitTypeId(GetLearningUnit()) != 'h00U';
}
void InitTrig_Electric_Field() {
	int index = 0;
	gg_trg_Electric_Field[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Electric_Field, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Electric_Field, Condition(Trig_Learn_Skill_Electric_Field_Conditions));
	TriggerAddAction(gg_trg_Electric_Field, Trig_Learn_Skill_Electric_Field_Actions);
}
void Trig_Thundercloud_lightning2_Actions() {
	timer tl = GetExpiredTimer();
	int hl = GetHandleId(tl);
	int lop = 0;
	lightning l;
	while (true) {
		if (lop > 5) break;
		l[LoadLightningHandle(udg_hash, hl, lop)] = LoadLightningHandle(udg_hash, hl, lop);
		DestroyLightning(l);
		l[null] = null;
		lop[lop + 1] = lop + 1;
	}
	FlushChildHashtable(udg_hash, hl);
	DestroyTimer(tl);
	tl[null] = null;
}
void Trig_Thundercloud2_move_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit cloud = LoadUnitHandle(udg_hash, h, 1);
	float x = LoadReal(udg_hash, h, 2);
	float y = LoadReal(udg_hash, h, 3);
	float angle = LoadReal(udg_hash, h, 4);
	int stage = LoadInteger(udg_hash, h, 5);
	unit caster = LoadUnitHandle(udg_hash, h, 7);
	float xp = LoadReal(udg_hash, h, 8);
	float yp = LoadReal(udg_hash, h, 9);
	float damage = LoadReal(udg_hash, h, $A);
	player p = LoadPlayerHandle(udg_hash, h, $B);
	int lop = 0;
	float xu = GetUnitX(cloud);
	float yu = GetUnitY(cloud);
	float distance = SquareRoot((xp - xu) * (xp - xu) + (yp - yu) * (yp - yu));
	float xt;
	float yt;
	unit slower;
	timer tl;
	int hl;
	group g;
	unit Picked;
	lightning l;
	float between;
	effect efcloud;
	location locz;
	location loccloudz = GetUnitLoc(cloud);
	if (distance < 3.75) {
		stage[stage + 1] = stage + 1;
		SaveInteger(udg_hash, h, 5, stage);
		tl[CreateTimer()] = CreateTimer();
		hl[GetHandleId(tl)] = GetHandleId(tl);
		while (true) {
			if (lop > 4) break;
			xt[xp + 150. * Cos((lop * 72.) * bj_DEGTORAD)] = xp + 150. * Cos((lop * 72.) * bj_DEGTORAD);
			yt[yp + 150. * Sin((lop * 72.) * bj_DEGTORAD)] = yp + 150. * Sin((lop * 72.) * bj_DEGTORAD);
			locz[Location(xt, yt)] = Location(xt, yt);
			l[AddLightningEx("FORK", true, xu, yu, 425. + GetLocationZ(loccloudz), xt, yt, -50. + GetLocationZ(locz))] = AddLightningEx("FORK", true, xu, yu, 425. + GetLocationZ(loccloudz), xt, yt, -50. + GetLocationZ(locz));
			DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", xt, yt));
			SaveLightningHandle(udg_hash, hl, lop, l);
			l[null] = null;
			lop[lop + 1] = lop + 1;
			RemoveLocation(locz);
			locz[null] = null;
		}
		l[null] = null;
		locz[Location(xt, yt)] = Location(xt, yt);
		l[AddLightningEx("FORK", true, xu, yu, 425. + GetLocationZ(loccloudz), xp, yp, -50. + GetLocationZ(locz))] = AddLightningEx("FORK", true, xu, yu, 425. + GetLocationZ(loccloudz), xp, yp, -50. + GetLocationZ(locz));
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.mdl", xp, yp));
		DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", xp, yp));
		SaveLightningHandle(udg_hash, hl, 5, l);
		l[null] = null;
		RemoveLocation(locz);
		locz[null] = null;
		g[CreateGroup()] = CreateGroup();
		GroupEnumUnitsInRange(g, xp, yp, $E1, null);
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				slower[CreateUnit(p, 'h00U', xp, yp, .0)] = CreateUnit(p, 'h00U', xp, yp, .0);
				UnitApplyTimedLife(slower, 'BTLF', .75);
				UnitAddAbility(slower, 'A07S');
				SetUnitAbilityLevel(slower, 'A07S', GetUnitAbilityLevel(caster, 'A07N'));
				IssueTargetOrderById(slower, $D006B, Picked);
				slower[null] = null;
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", Picked, "origin"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIlb\\AIlbSpecialArt.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningShield\\LightningShieldBuff.mdl", Picked, "origin"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", Picked, "chest"));
			}
			GroupRemoveUnit(g, Picked);
		}
		Picked[null] = null;
		TimerStart(tl, .6, false, Trig_Thundercloud_lightning2_Actions);
		xp[x + GetRandomReal(200., 250.) * Cos(((stage * 120.) + angle) * bj_DEGTORAD)] = x + GetRandomReal(200., 250.) * Cos(((stage * 120.) + angle) * bj_DEGTORAD);
		yp[y + GetRandomReal(200., 250.) * Sin(((stage * 120.) + angle) * bj_DEGTORAD)] = y + GetRandomReal(200., 250.) * Sin(((stage * 120.) + angle) * bj_DEGTORAD);
		SaveReal(udg_hash, h, 8, xp);
		SaveReal(udg_hash, h, 9, yp);
		tl[null] = null;
		Picked[null] = null;
		DestroyGroup(g);
		g[null] = null;
		if (stage >= 4) {
			efcloud[LoadEffectHandle(udg_hash, h, 6)] = LoadEffectHandle(udg_hash, h, 6);
			DestroyEffect(efcloud);
			efcloud[null] = null;
			KillUnit(cloud);
			cloud[null] = null;
			FlushChildHashtable(udg_hash, h);
			DestroyTimer(t);
			t[null] = null;
		}
	else
		between[bj_RADTODEG * Atan2(yp - yu, xp - xu)] = bj_RADTODEG * Atan2(yp - yu, xp - xu);
		xu[xu + 5. * Cos(between * bj_DEGTORAD)] = xu + 5. * Cos(between * bj_DEGTORAD);
		yu[yu + 5. * Sin(between * bj_DEGTORAD)] = yu + 5. * Sin(between * bj_DEGTORAD);
		if (IsTerrainPathable(xu, yu, PATHING_TYPE_FLYABILITY) == false) {
			SetUnitPosition(cloud, xu, yu);
		else
			efcloud[LoadEffectHandle(udg_hash, h, 6)] = LoadEffectHandle(udg_hash, h, 6);
			DestroyEffect(efcloud);
			efcloud[null] = null;
			KillUnit(cloud);
			cloud[null] = null;
			FlushChildHashtable(udg_hash, h);
			DestroyTimer(t);
			t[null] = null;
		}
	}
	t[null] = null;
	cloud[null] = null;
	caster[null] = null;
	p[null] = null;
	RemoveLocation(loccloudz);
	loccloudz[null] = null;
}
void Trig_Storm_periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	float x = LoadReal(udg_hash, h, 2);
	float y = LoadReal(udg_hash, h, 3);
	int lvl = LoadInteger(udg_hash, h, 5);
	int order = GetUnitCurrentOrder(caster);
	int lvlult = GetUnitAbilityLevel(caster, 'A07P');
	int lvlultup = GetUnitAbilityLevel(caster, 'A0Q6');
	unit dammi;
	float px;
	float py;
	int orderId;
	unit cloud;
	player p;
	float damage;
	float angle;
	effect efcloud;
	location loc;
	timer t2;
	int h2;
	orderId[$D0278] = $D0278;
	if ((orderId != 0)) {
	else
		orderId[UnitId("channel")] = UnitId("channel");
		if ((orderId != 0)) {
		}
	}
	if (order == orderId && (lvl > 0)) {
		t2[CreateTimer()] = CreateTimer();
		h2[GetHandleId(t2)] = GetHandleId(t2);
		p[GetOwningPlayer(caster)] = GetOwningPlayer(caster);
		if (lvlult > 0) {
			damage[(.12 * lvlult + 1.) * ((5. + (25. * lvl) + ((.1 + .05 * lvl) * GetHeroInt(caster, true))))] = (.12 * lvlult + 1.) * ((5. + (25. * lvl) + ((.1 + .05 * lvl) * GetHeroInt(caster, true))));
		}
		if (lvlultup > 0) {
			damage[(.17 * lvlultup + 1.) * ((5. + (25. * lvl) + ((.1 + .05 * lvl) * GetHeroInt(caster, true))))] = (.17 * lvlultup + 1.) * ((5. + (25. * lvl) + ((.1 + .05 * lvl) * GetHeroInt(caster, true))));
		}
		angle[GetRandomReal(.0, 360.)] = GetRandomReal(.0, 360.);
		px[x + GetRandomReal(200., 400.) * Cos(angle * bj_DEGTORAD)] = x + GetRandomReal(200., 400.) * Cos(angle * bj_DEGTORAD);
		py[y + GetRandomReal(200., 400.) * Sin(angle * bj_DEGTORAD)] = y + GetRandomReal(200., 400.) * Sin(angle * bj_DEGTORAD);
		cloud[CreateUnit(GetOwningPlayer(caster), 'h00U', px, py, .0)] = CreateUnit(GetOwningPlayer(caster), 'h00U', px, py, .0);
		efcloud[AddSpecialEffectTarget("war3mapImported\\OutlandStorm.mdx", cloud, "origin")] = AddSpecialEffectTarget("war3mapImported\\OutlandStorm.mdx", cloud, "origin");
		UnitAddAbility(cloud, 'Amrf');
		UnitRemoveAbility(cloud, 'Amrf');
		loc[Location(px, py)] = Location(px, py);
		SetUnitFlyHeight(cloud, 350. + GetLocationZ(loc), .0);
		SetUnitScale(cloud, 1.35, 1.35, 1.35);
		SetUnitPosition(cloud, px, py);
		SaveUnitHandle(udg_hash, h2, 1, cloud);
		SaveReal(udg_hash, h2, 2, px);
		SaveReal(udg_hash, h2, 3, py);
		SaveReal(udg_hash, h2, 4, angle);
		SaveInteger(udg_hash, h2, 5, 0);
		SaveEffectHandle(udg_hash, h2, 6, efcloud);
		SaveUnitHandle(udg_hash, h2, 7, caster);
		SaveReal(udg_hash, h2, 8, px);
		SaveReal(udg_hash, h2, 9, py);
		SaveReal(udg_hash, h2, $A, damage);
		SavePlayerHandle(udg_hash, h2, $B, p);
		TimerStart(t2, .04, true, Trig_Thundercloud2_move_Actions);
		caster[null] = null;
		RemoveLocation(loc);
		loc[null] = null;
		cloud[null] = null;
		efcloud[null] = null;
		t2[null] = null;
		p[null] = null;
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Purge\\PurgeBuffTarget.mdl", caster, "origin"));
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", caster, "origin"));
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningBolt\\LightningBoltMissile.mdl", caster, "overhead"));
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningShield\\LightningShieldTarget.mdl", caster, "origin"));
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", caster, "chest"));
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", caster, "hand,right"));
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", caster, "weapon"));
	else
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
		RemoveUnit(LoadUnitHandle(udg_hash, GetHandleId(caster), 'u'));
	}
	t[null] = null;
	caster[null] = null;
}
void Trig_Storm_Actions() {
	unit caster = GetSpellAbilityUnit();
	int lvl = GetUnitAbilityLevel(caster, 'A07N');
	int lvlult = GetUnitAbilityLevel(caster, 'A07P');
	int lvlultup = GetUnitAbilityLevel(caster, 'A0Q6');
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	timer t = CreateTimer();
	int h = GetHandleId(t);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 2, x);
	SaveReal(udg_hash, h, 3, y);
	SaveInteger(udg_hash, h, 5, lvl);
	if (lvlult > 0) {
		AddProgressBar(caster, 240. + (3. * lvlult), (.9 + .1 * lvl), (.5 * 3 * lvlult), false, true, 'u', $96, $96, $AF);
	}
	if (lvlultup > 0) {
		AddProgressBar(caster, 240. + (3. * lvlultup), (.9 + .1 * lvl), (.5 * 4 * lvlultup), false, true, 'u', $96, $96, $AF);
	}
	TimerStart(t, .5, true, Trig_Storm_periodic_Actions);
	caster[null] = null;
	t[null] = null;
}
bool Trig_Storm_Conditions() {
	return (GetSpellAbilityId() == 'A07P' || GetSpellAbilityId() == 'A0Q6');
}
void InitTrig_Storm() {
	int index = 0;
	gg_trg_Storm[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Storm, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Storm, Condition(Trig_Storm_Conditions));
	TriggerAddAction(gg_trg_Storm, Trig_Storm_Actions);
}
void Trig_Respawnlol_Actions() {
	ConditionalTriggerExecute(gg_trg_Ranger_Load);
}
void InitTrig_Respawnlol() {
	gg_trg_Respawnlol[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventSingle(gg_trg_Respawnlol, 5);
	TriggerAddAction(gg_trg_Respawnlol, Trig_Respawnlol_Actions);
}
void Trig_Ranger_Load_Actions() {
	AbilityPreload('A0EE', 6);
	AbilityPreload('A0ED', 4);
	AbilityPreload('A0EF', 1);
	AbilityPreload('A0EH', 6);
	AbilityPreload('A0EK', 6);
	AbilityPreload('A0EL', 6);
	AbilityPreload('A0EG', 6);
	AbilityPreload('A0EN', 6);
	AbilityPreload('A0EO', 1);
	AbilityPreload('A0EP', 3);
	AbilityPreload('A0EM', 6);
	AbilityPreload('A0EI', 6);
	AbilityPreload('A0EJ', 6);
	EffectPreload("Abilities\\Spells\\Other\\BreathOfFire\\BreathOfFireDamage.mdl");
	EffectPreload("Abilities\\Spells\\Other\\FrostDamage\\FrostDamage.mdl");
	EffectPreload("Abilities\\Weapons\\ZigguratFrostMissile\\ZigguratFrostMissile.mdl");
	EffectPreload("Abilities\\Spells\\Undead\\Curse\\CurseTarget.mdl");
	EffectPreload("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl");
	EffectPreload("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl");
	EffectPreload("Abilities\\Spells\\Undead\\OrbOfDeath\\AnnihilationMissile.mdl");
	EffectPreload("Abilities\\Weapons\\SearingArrow\\SearingArrowMissile.mdl");
	EffectPreload("Abilities\\Weapons\\ColdArrow\\ColdArrowMissile.mdl");
	EffectPreload("Abilities\\Spells\\Other\\BlackArrow\\BlackArrowMissile.mdl");
	EffectPreload("Abilities\\Spells\\Other\\Drain\\ManaDrainCaster.mdl");
	EnableTrigger(gg_trg_MultiShotSwitch);
	EnableTrigger(gg_trg_Learn_Release_of_Arrows);
	EnableTrigger(gg_trg_Release_of_Arrows);
	EnableTrigger(gg_trg_Dexterity_of_the_Ranger);
}
void InitTrig_Ranger_Load() {
	gg_trg_Ranger_Load[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Ranger_Load, Trig_Ranger_Load_Actions);
}
void Trig_MultiShotSwitch_Actions() {
	unit caster = GetTriggerUnit();
	unit death = GetDyingUnit();
	int id = 'A0EF';
	int orderId;
	if (GetUnitAbilityLevel(death, id) > 0) {
		UnitRemoveAbility(death, id);
	}
	orderId[$D0057] = $D0057;
	if ((GetIssuedOrderId() == orderId)) {
		UnitAddAbility(caster, id);
		SetUnitAbilityLevel(caster, 'A0ED', 1 + GetUnitAbilityLevel(caster, 'A0EP'));
		UnitMakeAbilityPermanent(caster, true, id);
		UnitMakeAbilityPermanent(caster, true, 'A0ED');
	}
	orderId[$D0058] = $D0058;
	if ((GetIssuedOrderId() == orderId)) {
		UnitRemoveAbility(caster, id);
	}
	caster[null] = null;
	death[null] = null;
}
bool Trig_MultiShotSwitch_Conditions() {
	return GetUnitAbilityLevel(GetTriggerUnit(), 'A0EE') > 0 || GetUnitAbilityLevel(GetDyingUnit(), 'A0EE') > 0;
}
void InitTrig_MultiShotSwitch() {
	int index = 0;
	gg_trg_MultiShotSwitch[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_MultiShotSwitch, Player(index), EVENT_PLAYER_UNIT_ISSUED_ORDER, null);
		TriggerRegisterPlayerUnitEvent(gg_trg_MultiShotSwitch, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_MultiShotSwitch, Condition(Trig_MultiShotSwitch_Conditions));
	TriggerAddAction(gg_trg_MultiShotSwitch, Trig_MultiShotSwitch_Actions);
}
void Trig_Learn_Release_of_Arrows_Actions() {
	unit u = GetLearningUnit();
	int lvl = GetUnitAbilityLevel(u, 'A0EH');
	if (lvl == 1) {
		UnitAddAbility(u, 'A0EK');
		UnitAddAbility(u, 'A0EL');
		UnitAddAbility(u, 'A0EG');
		UnitMakeAbilityPermanent(u, true, 'A0EK');
		UnitMakeAbilityPermanent(u, true, 'A0EL');
		UnitMakeAbilityPermanent(u, true, 'A0EG');
	else
		SetUnitAbilityLevel(u, 'A0EK', lvl);
		SetUnitAbilityLevel(u, 'A0EL', lvl);
		SetUnitAbilityLevel(u, 'A0EG', lvl);
	}
	u[null] = null;
}
bool Trig_Learn_Release_of_Arrows_Conditions() {
	return GetLearnedSkill() == 'A0EH' && GetUnitTypeId(GetLearningUnit()) != 'h00U';
}
void InitTrig_Learn_Release_of_Arrows() {
	int index = 0;
	gg_trg_Learn_Release_of_Arrows[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Release_of_Arrows, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Learn_Release_of_Arrows, Condition(Trig_Learn_Release_of_Arrows_Conditions));
	TriggerAddAction(gg_trg_Learn_Release_of_Arrows, Trig_Learn_Release_of_Arrows_Actions);
}
void Trig_Release_of_Arrows_periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 20);
	int count = LoadInteger(udg_hash, h, 21);
	float damage = LoadReal(udg_hash, h, 22);
	int check = LoadInteger(udg_hash, h, 23);
	int abiltype = LoadInteger(udg_hash, h, 24);
	group gdamage = LoadGroupHandle(udg_hash, h, 25);
	player p = GetOwningPlayer(caster);
	int lvl = GetUnitAbilityLevel(caster, 'A0EH');
	unit arrow;
	float ax;
	float ay;
	float face;
	int lop = 0;
	effect ef;
	unit dammi;
	string sef;
	string order;
	int rawcode;
	group g = CreateGroup();
	group gr = CreateGroup();
	unit Picked;
	if (check < 25) {
		check[check + 1] = check + 1;
		SaveInteger(udg_hash, h, 23, check);
		if (abiltype == 1) {
			sef["Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl"] = "Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl";
			rawcode['A0EM'] = 'A0EM';
			order["acidbomb"] = "acidbomb";
		}
		if (abiltype == 2) {
			sef["Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl"] = "Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl";
			rawcode['A0EI'] = 'A0EI';
			order["slow"] = "slow";
		}
		if (abiltype == 3) {
			sef["Abilities\\Spells\\Undead\\OrbOfDeath\\AnnihilationMissile.mdl"] = "Abilities\\Spells\\Undead\\OrbOfDeath\\AnnihilationMissile.mdl";
			rawcode['A0EJ'] = 'A0EJ';
			order["innerfire"] = "innerfire";
		}
		while (true) {
			if (lop >= count) break;
			arrow[LoadUnitHandle(udg_hash, h, lop)] = LoadUnitHandle(udg_hash, h, lop);
			face[GetUnitFacing(arrow)] = GetUnitFacing(arrow);
			ax[GetUnitX(arrow) + 36. * Cos(face * bj_DEGTORAD)] = GetUnitX(arrow) + 36. * Cos(face * bj_DEGTORAD);
			ay[GetUnitY(arrow) + 36. * Sin(face * bj_DEGTORAD)] = GetUnitY(arrow) + 36. * Sin(face * bj_DEGTORAD);
			if (IsTerrainPathable(ax, ay, PATHING_TYPE_FLYABILITY) == false) {
				SetUnitPosition(arrow, ax, ay);
				GroupEnumUnitsInRange(g, ax, ay, 100., null);
				while (true) {
					Picked[FirstOfGroup(g)] = FirstOfGroup(g);
					if (Picked == null) break;
					if (IsUnitEnemy(Picked, p) && IsUnitInGroup(Picked, gdamage) == false && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h00U') {
						GroupAddUnit(gdamage, Picked);
						GroupAddUnit(gr, Picked);
					}
					GroupRemoveUnit(g, Picked);
				}
				Picked[null] = null;
			}
			arrow[null] = null;
			lop[lop + 1] = lop + 1;
		}
		while (true) {
			Picked[FirstOfGroup(gr)] = FirstOfGroup(gr);
			if (Picked == null) break;
			dammi[CreateUnit(p, 'h00U', ax, ay, .0)] = CreateUnit(p, 'h00U', ax, ay, .0);
			UnitApplyTimedLife(dammi, 'BTLF', .34);
			UnitAddAbility(dammi, rawcode);
			SetUnitAbilityLevel(dammi, rawcode, lvl);
			IssueTargetOrder(dammi, order, Picked);
			UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			DestroyEffect(AddSpecialEffectTarget(sef, Picked, "chest"));
			dammi[null] = null;
			GroupRemoveUnit(gr, Picked);
		}
	else
		while (true) {
			if (lop >= count) break;
			arrow[LoadUnitHandle(udg_hash, h, lop)] = LoadUnitHandle(udg_hash, h, lop);
			ef[LoadEffectHandle(udg_hash, h, $A + lop)] = LoadEffectHandle(udg_hash, h, $A + lop);
			KillUnit(arrow);
			DestroyEffect(ef);
			arrow[null] = null;
			ef[null] = null;
			lop[lop + 1] = lop + 1;
		}
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		gdamage[null] = null;
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
		t[null] = null;
	}
	t[null] = null;
	caster[null] = null;
	gdamage[null] = null;
	p[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	GroupClear(gr);
	DestroyGroup(gr);
	gr[null] = null;
	Picked[null] = null;
}
void Trig_Release_of_Arrows_Actions() {
	unit caster = GetSpellAbilityUnit();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	unit target = GetSpellTargetUnit();
	float tx;
	float ty;
	location loc;
	float angle;
	float angle1;
	player p = GetOwningPlayer(caster);
	int abilityid = GetSpellAbilityId();
	int abiltype;
	int count = GetUnitAbilityLevel(caster, GetSpellAbilityId()) + 2;
	int lop = 0;
	float damage = ((count * 25.) - 35.);
	int lvlult = GetUnitAbilityLevel(caster, 'A0EP');
	unit arrow;
	int check = 0;
	effect ef;
	string s;
	group gdamage = CreateGroup();
	timer t = CreateTimer();
	int h = GetHandleId(t);
	bool perekluchatelangle = false;
	int counterangle = 0;
	int hcaster = GetHandleId(caster);
	int agility;
	int bonus;
	if (lvlult > 0) {
		damage[damage * (1. + .15 * GetUnitAbilityLevel(caster, 'A0EP') + .05)] = damage * (1. + .15 * GetUnitAbilityLevel(caster, 'A0EP') + .05);
	}
	if (target == null) {
		loc[GetSpellTargetLoc()] = GetSpellTargetLoc();
		tx[GetLocationX(loc)] = GetLocationX(loc);
		ty[GetLocationY(loc)] = GetLocationY(loc);
	else
		tx[GetUnitX(target)] = GetUnitX(target);
		ty[GetUnitY(target)] = GetUnitY(target);
	}
	angle[(bj_RADTODEG * Atan2(ty - y, tx - x))] = (bj_RADTODEG * Atan2(ty - y, tx - x));
	if (target == caster) {
		angle[GetUnitFacing(caster)] = GetUnitFacing(caster);
	}
	if (count - ((count / 2) * 2) == 0) {
		angle[angle + 6.] = angle + 6.;
	}
	if (abilityid == 'A0EK') {
		abiltype[1] = 1;
		s["Abilities\\Weapons\\SearingArrow\\SearingArrowMissile.mdl"] = "Abilities\\Weapons\\SearingArrow\\SearingArrowMissile.mdl";
	}
	if (abilityid == 'A0EL') {
		abiltype[2] = 2;
		s["Abilities\\Weapons\\ColdArrow\\ColdArrowMissile.mdl"] = "Abilities\\Weapons\\ColdArrow\\ColdArrowMissile.mdl";
	}
	if (abilityid == 'A0EG') {
		abiltype[3] = 3;
		s["Abilities\\Spells\\Other\\BlackArrow\\BlackArrowMissile.mdl"] = "Abilities\\Spells\\Other\\BlackArrow\\BlackArrowMissile.mdl";
	}
	while (true) {
		if (lop >= count) break;
		if (perekluchatelangle) {
			perekluchatelangle[false] = false;
			angle[angle - (counterangle * 12.)] = angle - (counterangle * 12.);
		else
			perekluchatelangle[true] = true;
			angle[angle + (counterangle * 12.)] = angle + (counterangle * 12.);
		}
		arrow[CreateUnit(p, 'h00U', x, y, angle)] = CreateUnit(p, 'h00U', x, y, angle);
		SetUnitScale(arrow, 1.2, 1.2, 1.2);
		ef[AddSpecialEffectTarget(s, arrow, "chest")] = AddSpecialEffectTarget(s, arrow, "chest");
		SaveUnitHandle(udg_hash, h, lop, arrow);
		SaveEffectHandle(udg_hash, h, $A + lop, ef);
		arrow[null] = null;
		ef[null] = null;
		lop[lop + 1] = lop + 1;
		counterangle[counterangle + 1] = counterangle + 1;
	}
	if (GetUnitAbilityLevel(caster, 'A0EO') > 0) {
		hcaster[GetHandleId(caster)] = GetHandleId(caster);
		agility[LoadInteger(udg_hash, hcaster, 52)] = LoadInteger(udg_hash, hcaster, 52);
		bonus[LoadInteger(udg_hash, hcaster, 53)] = LoadInteger(udg_hash, hcaster, 53);
		if (agility <= 30 * GetUnitAbilityLevel(caster, 'A0EN') - 5 - (count * bonus)) {
			agility[agility + (count * bonus)] = agility + (count * bonus);
			SetHeroAgi(caster, GetHeroAgi(caster, false) + (count * bonus), true);
			SaveInteger(udg_hash, hcaster, 52, agility);
			ProgressBarAddPercentComplete(LoadUnitHandle(udg_hash, GetHandleId(caster), 'u'), (((count * bonus) * 100.) / (30 * GetUnitAbilityLevel(caster, 'A0EN') - 5 - (count * bonus))));
		else
			SetHeroAgi(caster, GetHeroAgi(caster, false) - agility + (30 * GetUnitAbilityLevel(caster, 'A0EN')) - 5, true);
			agility[30 * GetUnitAbilityLevel(caster, 'A0EN') - 5] = 30 * GetUnitAbilityLevel(caster, 'A0EN') - 5;
			SaveInteger(udg_hash, hcaster, 52, agility);
		}
	}
	SaveUnitHandle(udg_hash, h, 20, caster);
	SaveInteger(udg_hash, h, 21, count);
	SaveReal(udg_hash, h, 22, damage);
	SaveInteger(udg_hash, h, 23, check);
	SaveInteger(udg_hash, h, 24, abiltype);
	SaveGroupHandle(udg_hash, h, 25, gdamage);
	TimerStart(t, .04, true, Trig_Release_of_Arrows_periodic_Actions);
	caster[null] = null;
	target[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	p[null] = null;
	gdamage[null] = null;
	t[null] = null;
}
bool Trig_Release_of_Arrows_Conditions() {
	return GetSpellAbilityId() == 'A0EK' || GetSpellAbilityId() == 'A0EL' || GetSpellAbilityId() == 'A0EG';
}
void InitTrig_Release_of_Arrows() {
	int index = 0;
	gg_trg_Release_of_Arrows[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Release_of_Arrows, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Release_of_Arrows, Condition(Trig_Release_of_Arrows_Conditions));
	TriggerAddAction(gg_trg_Release_of_Arrows, Trig_Release_of_Arrows_Actions);
}
void Trig_Dexterity_of_the_Ranger_Remove_Agility_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	effect ef = LoadEffectHandle(udg_hash, h, 2);
	int agility = LoadInteger(udg_hash, GetHandleId(caster), 52);
	SetHeroAgi(caster, GetHeroAgi(caster, false) - agility, true);
	UnitRemoveAbility(caster, 'A0EO');
	DestroyEffect(ef);
	RemoveUnit(LoadUnitHandle(udg_hash, GetHandleId(caster), 'u'));
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
	ef[null] = null;
	caster[null] = null;
}
void Trig_Dexterity_of_the_Ranger_Actions() {
	unit caster = GetSpellAbilityUnit();
	float time = 10. + 2 * GetUnitAbilityLevel(caster, 'A0EP');
	timer t = CreateTimer();
	int h = GetHandleId(t);
	int lvl = GetUnitAbilityLevel(caster, 'A0EN');
	int agility = 6 + 4 * lvl;
	int chetnost = ((lvl / 2) * 2) - lvl;
	int bonus;
	effect ef = AddSpecialEffectTarget("Abilities\\Spells\\Other\\Drain\\ManaDrainCaster.mdl", caster, "overhead");
	if (chetnost == 0) {
		bonus[(lvl / 2)] = (lvl / 2);
	else
		bonus[(lvl / 2) + 1] = (lvl / 2) + 1;
	}
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveEffectHandle(udg_hash, h, 2, ef);
	SaveInteger(udg_hash, GetHandleId(caster), 52, agility);
	SaveInteger(udg_hash, GetHandleId(caster), 53, bonus);
	SetHeroAgi(caster, GetHeroAgi(caster, false) + agility, true);
	UnitAddAbility(caster, 'A0EO');
	TimerStart(t, 10., false, Trig_Dexterity_of_the_Ranger_Remove_Agility_Actions);
	AddProgressBar(caster, 150. + (2. * lvl), (.9 + .05 * lvl), 1., true, false, 'u', 20, 'n', $E6);
	ProgressBarAddPercentComplete(LoadUnitHandle(udg_hash, GetHandleId(caster), 'u'), (agility * 100. / (30 * GetUnitAbilityLevel(caster, 'A0EN') - 5)));
	caster[null] = null;
	ef[null] = null;
	t[null] = null;
}
bool Trig_Dexterity_of_the_Ranger_Conditions() {
	return GetSpellAbilityId() == 'A0EN';
}
void InitTrig_Dexterity_of_the_Ranger() {
	int index = 0;
	gg_trg_Dexterity_of_the_Ranger[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Dexterity_of_the_Ranger, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Dexterity_of_the_Ranger, Condition(Trig_Dexterity_of_the_Ranger_Conditions));
	TriggerAddAction(gg_trg_Dexterity_of_the_Ranger, Trig_Dexterity_of_the_Ranger_Actions);
}
void Trig_Healer_Load_Actions() {
	AbilityPreload('A006', 6);
	AbilityPreload('A04P', 6);
	AbilityPreload('A0AC', 6);
	AbilityPreload('A0AE', 3);
	UnitPreload('h01O');
	AbilityPreload('A0EQ', 6);
	AbilityPreload('A0ER', 6);
	AbilityPreload('A032', 6);
	AbilityPreload('A0A8', 6);
	AbilityPreload('A0AD', 1);
	AbilityPreload('B020', 1);
	AbilityPreload('B022', 1);
	AbilityPreload('B023', 1);
	AbilityPreload('B025', 1);
	AbilityPreload('B028', 1);
	EffectPreload("Abilities\\Spells\\Items\\StaffOfSanctuary\\Staff_Sanctuary_Target.mdl");
	EffectPreload("Abilities\\Spells\\Items\\PotionOfOmniscience\\CrystalBallCaster.mdl");
	EffectPreload("Abilities\\Spells\\Human\\InnerFire\\InnerFireTarget.mdl");
	EffectPreload("Abilities\\Spells\\Other\\ANrm\\ANrmTarget.mdl");
	EffectPreload("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl");
	EffectPreload("Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl");
	EffectPreload("war3mapImported\\Curing_Light_Effect.mdx");
	EffectPreload("Abilities\\Spells\\Undead\\ReplenishHealth\\ReplenishHealthCasterOverhead.mdl");
	EffectPreload("Abilities\\Spells\\NightElf\\Tranquility\\Tranquility.mdl");
	EffectPreload("war3mapImported\\Retribution.mdx");
	EnableTrigger(gg_trg_Good_Healing);
	EnableTrigger(gg_trg_Spiritual_Communication);
	EnableTrigger(gg_trg_Curing_Light);
	EnableTrigger(gg_trg_Guardian_Angel);
}
void InitTrig_Healer_Load() {
	gg_trg_Healer_Load[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Healer_Load, Trig_Healer_Load_Actions);
}
void Trig_Good_Healing_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	location loc = GetSpellTargetLoc();
	float x = GetLocationX(loc);
	float y = GetLocationY(loc);
	int lvl = GetUnitAbilityLevel(caster, 'A006');
	float damage = ((5 * lvl * lvl) + 20) + (20. * lvl) + (GetHeroInt(caster, true) * .2 * lvl);
	float heal = (($A * lvl * lvl) + 40) + (40. * lvl) + (GetHeroInt(caster, true) * .4 * lvl);
	group g = CreateGroup();
	unit Picked;
	unit dammi;
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl", x, y));
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl", x, y));
	dammi[CreateUnit(p, 'h00U', x, y, .0)] = CreateUnit(p, 'h00U', x, y, .0);
	SetUnitX(dammi, x);
	SetUnitY(dammi, y);
	UnitApplyTimedLife(dammi, 'BTLF', 2.);
	UnitAddAbility(dammi, 'A0EQ');
	SetUnitAbilityLevel(dammi, 'A0EQ', lvl);
	IssueImmediateOrderById(dammi, $D00C4);
	GroupEnumUnitsInRange(g, x, y, 300. + 10., null);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl", Picked, "origin"));
		}
		if (IsUnitAlly(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			SetUnitState(Picked, UNIT_STATE_LIFE, GetUnitState(Picked, UNIT_STATE_LIFE) + heal);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl", Picked, "origin"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl", Picked, "origin"));
		}
		GroupRemoveUnit(g, Picked);
	}
	dammi[null] = null;
	caster[null] = null;
	p[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	Picked[null] = null;
	dammi[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
}
bool Trig_Good_Healing_Conditions() {
	return GetSpellAbilityId() == 'A006';
}
void InitTrig_Good_Healing() {
	int index = 0;
	gg_trg_Good_Healing[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Good_Healing, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Good_Healing, Condition(Trig_Good_Healing_Conditions));
	TriggerAddAction(gg_trg_Good_Healing, Trig_Good_Healing_Actions);
}
void Trig_Spiritual_Communication_Ligtning_Move_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	unit target = LoadUnitHandle(udg_hash, h, 2);
	lightning l = LoadLightningHandle(udg_hash, h, 3);
	float time = LoadReal(udg_hash, h, 4);
	location locc = GetUnitLoc(caster);
	float xc = GetUnitX(caster);
	float yc = GetUnitY(caster);
	location loct = GetUnitLoc(target);
	float xt = GetUnitX(target);
	float yt = GetUnitY(target);
	float dx = xc - xt;
	float dy = yc - yt;
	float dist = SquareRoot(dx * dx + dy * dy);
	int liferegen;
	int manaregen;
	if (GetUnitState(caster, UNIT_STATE_LIFE) > .405 && GetUnitState(target, UNIT_STATE_LIFE) > .0 && dist <= 700. && time > .0) {
		time[time - .04] = time - .04;
		SaveReal(udg_hash, h, 4, time);
		MoveLightningEx(l, true, xc, yc, 50. + GetLocationZ(locc), xt, yt, 50. + GetLocationZ(loct));
	else
		UnitRemoveAbility(caster, 'B022');
		UnitRemoveAbility(target, 'B022');
		UnitRemoveAbility(caster, 'B023');
		UnitRemoveAbility(target, 'B023');
		liferegen[LoadInteger(udg_hash, h, 5)] = LoadInteger(udg_hash, h, 5);
		manaregen[LoadInteger(udg_hash, h, 6)] = LoadInteger(udg_hash, h, 6);
		SetUnitLifeAndManaRegeneration(caster, "life", -1 * liferegen);
		SetUnitLifeAndManaRegeneration(target, "life", -1 * liferegen);
		SetUnitLifeAndManaRegeneration(caster, "mana", -1 * manaregen);
		SetUnitLifeAndManaRegeneration(target, "mana", -1 * manaregen);
		DestroyLightning(l);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	caster[null] = null;
	target[null] = null;
	l[null] = null;
	RemoveLocation(locc);
	locc[null] = null;
	RemoveLocation(loct);
	loct[null] = null;
}
void Trig_Spiritual_Communication_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	unit dammi;
	location locc = GetUnitLoc(caster);
	float xc = GetUnitX(caster);
	float yc = GetUnitY(caster);
	location loct = GetUnitLoc(target);
	float xt = GetUnitX(target);
	float yt = GetUnitY(target);
	lightning l = AddLightningEx("SPLK", true, xc, yc, 50. + GetLocationZ(locc), xt, yt, 50. + GetLocationZ(loct));
	player p = GetOwningPlayer(caster);
	int lvl = GetUnitAbilityLevel(caster, 'A04P');
	timer t = CreateTimer();
	int h = GetHandleId(t);
	float time = 10. + (.05 * GetHeroInt(caster, true));
	int liferegen = $A + ($A * lvl);
	int manaregen = (5 * lvl);
	SetUnitLifeAndManaRegeneration(caster, "life", liferegen);
	SetUnitLifeAndManaRegeneration(target, "life", liferegen);
	SetUnitLifeAndManaRegeneration(caster, "mana", manaregen);
	SetUnitLifeAndManaRegeneration(target, "mana", manaregen);
	dammi[CreateUnit(p, 'h00U', xt, yt, .0)] = CreateUnit(p, 'h00U', xt, yt, .0);
	UnitApplyTimedLife(dammi, 'BTLF', 1.5);
	UnitAddAbility(dammi, 'A0ER');
	SetUnitAbilityLevel(dammi, 'A0ER', lvl);
	IssueTargetOrderById(dammi, $D0085, caster);
	dammi[null] = null;
	if (GetOwningPlayer(target) != Player($D)) {
		dammi[CreateUnit(p, 'h00U', xt, yt, .0)] = CreateUnit(p, 'h00U', xt, yt, .0);
		UnitApplyTimedLife(dammi, 'BTLF', 1.5);
		UnitAddAbility(dammi, 'A0ER');
		SetUnitAbilityLevel(dammi, 'A0ER', lvl);
		IssueTargetOrderById(dammi, $D0085, target);
		dammi[null] = null;
	}
	dammi[CreateUnit(p, 'h00U', xt, yt, .0)] = CreateUnit(p, 'h00U', xt, yt, .0);
	UnitApplyTimedLife(dammi, 'BTLF', 1.5);
	UnitAddAbility(dammi, 'A032');
	SetUnitAbilityLevel(dammi, 'A032', lvl);
	IssueTargetOrderById(dammi, $D0062, caster);
	dammi[null] = null;
	dammi[CreateUnit(p, 'h00U', xt, yt, .0)] = CreateUnit(p, 'h00U', xt, yt, .0);
	UnitApplyTimedLife(dammi, 'BTLF', 1.5);
	UnitAddAbility(dammi, 'A032');
	SetUnitAbilityLevel(dammi, 'A032', lvl);
	IssueTargetOrderById(dammi, $D0062, target);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveUnitHandle(udg_hash, h, 2, target);
	SaveLightningHandle(udg_hash, h, 3, l);
	SaveReal(udg_hash, h, 4, time);
	SaveInteger(udg_hash, h, 5, liferegen);
	SaveInteger(udg_hash, h, 6, manaregen);
	TimerStart(t, .04, true, Trig_Spiritual_Communication_Ligtning_Move_Actions);
	caster[null] = null;
	target[null] = null;
	dammi[null] = null;
	RemoveLocation(locc);
	locc[null] = null;
	RemoveLocation(loct);
	loct[null] = null;
	l[null] = null;
	p[null] = null;
	t[null] = null;
}
bool Trig_Spiritual_Communication_Conditions() {
	return (GetSpellAbilityId() == 'A04P' && IsUnitType(GetSpellAbilityUnit(), UNIT_TYPE_HERO)) != null;
}
void InitTrig_Spiritual_Communication() {
	int index = 0;
	gg_trg_Spiritual_Communication[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Spiritual_Communication, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Spiritual_Communication, Condition(Trig_Spiritual_Communication_Conditions));
	TriggerAddAction(gg_trg_Spiritual_Communication, Trig_Spiritual_Communication_Actions);
}
void Trig_Curing_Light_Heal_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	int wait = LoadInteger(udg_hash, h, 1);
	group gheal = LoadGroupHandle(udg_hash, h, 2);
	unit sphere = LoadUnitHandle(udg_hash, h, 3);
	int heal = LoadInteger(udg_hash, h, 4);
	int lvl = LoadInteger(udg_hash, h, 5);
	effect ef = LoadEffectHandle(udg_hash, h, 6);
	player p = GetOwningPlayer(sphere);
	float x = GetUnitX(sphere);
	float y = GetUnitY(sphere);
	group maingroup = CreateGroup();
	group g = CreateGroup();
	group gcurrent = CreateGroup();
	group copygheal = CreateGroup();
	unit Picked;
	unit dammi;
	if (wait > 0) {
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 1, wait);
		GroupEnumUnitsInRange(g, x, y, 300., null);
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if ((IsUnitAlly(Picked, p) || GetOwningPlayer(Picked) == Player($D)) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				GroupAddUnit(gcurrent, Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
		Picked[null] = null;
		GroupAddGroup(gheal, maingroup);
		GroupAddGroup(gcurrent, maingroup);
		while (true) {
			Picked[FirstOfGroup(maingroup)] = FirstOfGroup(maingroup);
			if (Picked == null) break;
			if (IsUnitInGroup(Picked, gheal) && IsUnitInGroup(Picked, gcurrent) == false) {
				GroupRemoveUnit(gheal, Picked);
				SetUnitLifeAndManaRegeneration(Picked, "life", -1 * heal);
			}
			if (IsUnitInGroup(Picked, gheal) == false && IsUnitInGroup(Picked, gcurrent)) {
				GroupAddUnit(gheal, Picked);
				SetUnitLifeAndManaRegeneration(Picked, "life", heal);
			}
			GroupRemoveUnit(maingroup, Picked);
		}
		Picked[null] = null;
		SaveGroupHandle(udg_hash, h, 2, gheal);
		GroupAddGroup(gheal, copygheal);
		RandomUnitFromGroup(1, copygheal);
		Picked[FirstOfGroup(udg_GroupRandomUnitFromGroup)] = FirstOfGroup(udg_GroupRandomUnitFromGroup);
		SetUnitState(Picked, UNIT_STATE_LIFE, GetUnitState(Picked, UNIT_STATE_LIFE) + (lvl * .01) * GetUnitState(Picked, UNIT_STATE_MAX_LIFE));
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl", Picked, "origin"));
	else
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
		DestroyEffect(ef);
		dammi[CreateUnit(Player($C), 'h00U', x, y, GetRandomReal(.0, 360.))] = CreateUnit(Player($C), 'h00U', x, y, GetRandomReal(.0, 360.));
		SetUnitScale(dammi, 3.1, 3.1, 3.1);
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishHealth\\ReplenishHealthCasterOverhead.mdl", dammi, "chest"));
		RemoveUnit(sphere);
		while (true) {
			Picked[FirstOfGroup(gheal)] = FirstOfGroup(gheal);
			if (Picked == null) break;
			SetUnitLifeAndManaRegeneration(Picked, "life", -1 * heal);
			GroupRemoveUnit(gheal, Picked);
		}
	}
	t[null] = null;
	ef[null] = null;
	sphere[null] = null;
	p[null] = null;
	gheal[null] = null;
	GroupClear(maingroup);
	DestroyGroup(maingroup);
	maingroup[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	GroupClear(gcurrent);
	DestroyGroup(gcurrent);
	gcurrent[null] = null;
	GroupClear(copygheal);
	DestroyGroup(copygheal);
	copygheal[null] = null;
	dammi[null] = null;
	Picked[null] = null;
}
void Trig_Curing_Light_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	int lvl = GetUnitAbilityLevel(caster, 'A0AC');
	location loc = GetSpellTargetLoc();
	float x = GetLocationX(loc);
	float y = GetLocationY(loc);
	unit sphere = CreateUnit(p, 'h01O', x, y, GetRandomReal(.0, 360.));
	group g = CreateGroup();
	group gheal = CreateGroup();
	unit Picked;
	int constheal = 8 + (8 * lvl) + R2I((((.06 * lvl) + .06) * GetHeroInt(caster, true)));
	int wait = $C;
	effect ef = AddSpecialEffectTarget("war3mapImported\\Curing_Light_Effect.mdx", sphere, "origin");
	timer t = CreateTimer();
	int h = GetHandleId(t);
	unit dammi = CreateUnit(p, 'h00U', x, y, GetRandomReal(.0, 360.));
	SetUnitScale(dammi, 3.1, 3.1, 3.1);
	UnitAddAbility(sphere, 'A0A8');
	SetUnitAbilityLevel(sphere, 'A0A8', lvl);
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishHealth\\ReplenishHealthCasterOverhead.mdl", dammi, "chest"));
	GroupEnumUnitsInRange(g, x, y, 300., null);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if ((IsUnitAlly(Picked, p) || GetOwningPlayer(Picked) == Player($D)) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			GroupAddUnit(gheal, Picked);
			SetUnitLifeAndManaRegeneration(Picked, "life", constheal);
		}
		GroupRemoveUnit(g, Picked);
	}
	SaveInteger(udg_hash, h, 1, wait);
	SaveGroupHandle(udg_hash, h, 2, gheal);
	SaveUnitHandle(udg_hash, h, 3, sphere);
	SaveInteger(udg_hash, h, 4, constheal);
	SaveInteger(udg_hash, h, 5, lvl);
	SaveEffectHandle(udg_hash, h, 6, ef);
	TimerStart(t, 1., true, Trig_Curing_Light_Heal_Actions);
	caster[null] = null;
	p[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	sphere[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	gheal[null] = null;
	Picked[null] = null;
	ef[null] = null;
	t[null] = null;
	dammi[null] = null;
}
bool Trig_Curing_Light_Conditions() {
	return GetSpellAbilityId() == 'A0AC';
}
void InitTrig_Curing_Light() {
	int index = 0;
	gg_trg_Curing_Light[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Curing_Light, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Curing_Light, Condition(Trig_Curing_Light_Conditions));
	TriggerAddAction(gg_trg_Curing_Light, Trig_Curing_Light_Actions);
}
void Trig_Guardian_Angel_10sec_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	group gheal = LoadGroupHandle(udg_hash, h, 1);
	int adddamage = LoadInteger(udg_hash, h, 2);
	int addarmor = LoadInteger(udg_hash, h, 3);
	effect ef = LoadEffectHandle(udg_hash, h, 4);
	int liferegen = LoadInteger(udg_hash, h, 5);
	unit Picked;
	DestroyEffect(ef);
	ef[null] = null;
	while (true) {
		Picked[FirstOfGroup(gheal)] = FirstOfGroup(gheal);
		if (Picked == null) break;
		ef[LoadEffectHandle(udg_hash, GetHandleId(Picked), 66)] = LoadEffectHandle(udg_hash, GetHandleId(Picked), 66);
		if (ef != null) {
			DestroyEffect(ef);
			ef[null] = null;
		}
		SetAttackAbilityLevel(Picked, -adddamage);
		SetArmorAbilityLevel(Picked, -addarmor);
		SetUnitLifeAndManaRegeneration(Picked, "life", -liferegen);
		UnitRemoveAbility(Picked, 'A0AD');
		GroupRemoveUnit(gheal, Picked);
		SaveEffectHandle(udg_hash, GetHandleId(Picked), 66, null);
		SaveReal(udg_hash, GetHandleId(Picked), 65, .0);
	}
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
	GroupClear(gheal);
	DestroyGroup(gheal);
	gheal[null] = null;
	ef[null] = null;
	Picked[null] = null;
}
void Trig_Guardian_Angel_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	int lvl = GetUnitAbilityLevel(caster, 'A0AE');
	int lvlup = GetUnitAbilityLevel(caster, 'A0Q3');
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	group g = CreateGroup();
	group gheal = CreateGroup();
	unit Picked;
	int adddamage;
	int addarmor;
	float shield;
	int liferegen;
	effect ef;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	float aoe;
	if (lvl > 0) {
		adddamage[40 * lvl + $A] = 40 * lvl + $A;
		addarmor[7 * lvl + 3] = 7 * lvl + 3;
		shield[300. * lvl + 100.] = 300. * lvl + 100.;
		liferegen[lvl * $C + 4] = lvl * $C + 4;
		aoe[750.] = 750.;
	}
	if (lvlup > 0) {
		adddamage[40 * lvlup + $A] = 40 * lvlup + $A;
		addarmor[7 * lvlup + 3] = 7 * lvlup + 3;
		shield[450. * lvlup + 150.] = 450. * lvlup + 150.;
		liferegen[lvlup * $C + 4] = lvlup * $C + 4;
		aoe[999999.] = 999999.;
	}
	ef[AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Tranquility\\Tranquility.mdl", caster, "origin")] = AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Tranquility\\Tranquility.mdl", caster, "origin");
	SaveEffectHandle(udg_hash, h, 4, ef);
	GroupEnumUnitsInRange(g, x, y, aoe, null);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitAlly(Picked, p) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			ef[AddSpecialEffectTarget("war3mapImported\\Retribution.mdx", Picked, "origin")] = AddSpecialEffectTarget("war3mapImported\\Retribution.mdx", Picked, "origin");
			SaveEffectHandle(udg_hash, GetHandleId(Picked), 66, ef);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Resurrect\\ResurrectCaster.mdl", Picked, "origin"));
			GroupAddUnit(gheal, Picked);
			UnitAddAbility(Picked, 'A0AD');
			SetAttackAbilityLevel(Picked, adddamage);
			SetArmorAbilityLevel(Picked, addarmor);
			SetUnitLifeAndManaRegeneration(Picked, "life", liferegen);
			SaveReal(udg_hash, GetHandleId(Picked), 65, shield);
		}
		GroupRemoveUnit(g, Picked);
	}
	SaveGroupHandle(udg_hash, h, 1, gheal);
	SaveInteger(udg_hash, h, 2, adddamage);
	SaveInteger(udg_hash, h, 3, addarmor);
	SaveInteger(udg_hash, h, 5, liferegen);
	TimerStart(t, 12., false, Trig_Guardian_Angel_10sec_Actions);
	caster[null] = null;
	p[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	gheal[null] = null;
	Picked[null] = null;
	ef[null] = null;
	t[null] = null;
}
bool Trig_Guardian_Angel_Conditions() {
	return (GetSpellAbilityId() == 'A0AE' || GetSpellAbilityId() == 'A0Q3');
}
void InitTrig_Guardian_Angel() {
	int index = 0;
	gg_trg_Guardian_Angel[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Guardian_Angel, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Guardian_Angel, Condition(Trig_Guardian_Angel_Conditions));
	TriggerAddAction(gg_trg_Guardian_Angel, Trig_Guardian_Angel_Actions);
}
void Trig_Paladin_Load_Actions() {
	AbilityPreload('A0M6', 6);
	AbilityPreload('A0M7', 6);
	AbilityPreload('A0M8', 6);
	AbilityPreload('A0MA', 3);
	AbilityPreload('A0M9', 6);
	AbilityPreload('B04G', 1);
	AbilityPreload('B04H', 1);
	EffectPreload("Effects\\Consecrate.mdx");
	EffectPreload("Effects\\Holy Nova.mdx");
	EffectPreload("Effects\\HolyArmor.MDX");
	EffectPreload("Effects\\HolyAurora.MDX");
	EffectPreload("Effects\\HolyAwakening.mdx");
	EffectPreload("Effects\\HolyPhoenixMissle.mdx");
	EffectPreload("Effects\\DivineRage.mdx");
	EffectPreload("Effects\\HolySpiral.MDX");
	EffectPreload("Effects\\LifeHigh.mdx");
	EffectPreload("Effects\\LightNova.mdx");
	EffectPreload("Effects\\MegaHeal.mdx");
	EffectPreload("Effects\\OrbLightX.mdx");
	EffectPreload("Effects\\RunicShield.mdx");
	EnableTrigger(gg_trg_Spiral_of_Light);
	EnableTrigger(gg_trg_Keeper_Seal);
	EnableTrigger(gg_trg_Light_Hammer);
	EnableTrigger(gg_trg_God_Hand);
}
void InitTrig_Paladin_Load() {
	gg_trg_Paladin_Load[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Paladin_Load, Trig_Paladin_Load_Actions);
}
void Trig_Spiral_of_Light_Remove_Bonus_Armor_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit target = LoadUnitHandle(udg_hash, h, 1);
	int armor = LoadInteger(udg_hash, h, 2);
	effect ef = LoadEffectHandle(udg_hash, h, 3);
	SetArmorAbilityLevel(target, -armor);
	DestroyEffect(ef);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
	target[null] = null;
	ef[null] = null;
}
void Trig_Spiral_of_Light_Periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	unit target;
	unit dammi;
	int stage = LoadInteger(udg_hash, h, 5);
	effect ef;
	player p;
	group gdammi;
	group gdammi2;
	group g;
	unit Picked;
	unit dammi2;
	float x;
	float y;
	float xt;
	float yt;
	float angle;
	float angle2;
	float dist;
	float damage;
	float heal;
	bool destroy1 = false;
	bool destroy2 = false;
	bool remove;
	int armor;
	timer tarmor;
	int harmor;
	float time;
	if (stage == 0) {
		target[LoadUnitHandle(udg_hash, h, 2)] = LoadUnitHandle(udg_hash, h, 2);
		dammi[LoadUnitHandle(udg_hash, h, 3)] = LoadUnitHandle(udg_hash, h, 3);
		x[GetUnitX(dammi)] = GetUnitX(dammi);
		y[GetUnitY(dammi)] = GetUnitY(dammi);
		xt[GetUnitX(target)] = GetUnitX(target);
		yt[GetUnitY(target)] = GetUnitY(target);
		angle[bj_RADTODEG * Atan2(yt - y, xt - x)] = bj_RADTODEG * Atan2(yt - y, xt - x);
		if (GetUnitState(target, UNIT_STATE_LIFE) > .405) {
			x[x + 22. * Cos(angle * bj_DEGTORAD)] = x + 22. * Cos(angle * bj_DEGTORAD);
			y[y + 22. * Sin(angle * bj_DEGTORAD)] = y + 22. * Sin(angle * bj_DEGTORAD);
			SetUnitPosition(dammi, x, y);
			dist[SquareRoot((xt - x) * (xt - x) + (yt - y) * (yt - y))] = SquareRoot((xt - x) * (xt - x) + (yt - y) * (yt - y));
			if (dist < 23.) {
				destroy1[true] = true;
				SetUnitPosition(dammi, xt, yt);
				DestroyEffect(AddSpecialEffect("Effects\\Holy Nova.mdl", xt, yt));
			}
		else
			destroy1[true] = true;
		}
	}
	if (destroy1) {
		KillUnit(dammi);
		ef[LoadEffectHandle(udg_hash, h, 4)] = LoadEffectHandle(udg_hash, h, 4);
		DestroyEffect(ef);
		ef[null] = null;
		stage[1] = 1;
		SaveInteger(udg_hash, h, 5, stage);
		heal[LoadReal(udg_hash, h, 6)] = LoadReal(udg_hash, h, 6);
		SetUnitState(target, UNIT_STATE_LIFE, GetUnitState(target, UNIT_STATE_LIFE) + heal);
		DestroyEffect(AddSpecialEffectTarget("Effects\\MegaHeal.mdx", target, "origin"));
		DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", target, "origin"), 2.);
		armor[R2I(GetUnitState(target, UNIT_STATE_MAX_LIFE) * .02)] = R2I(GetUnitState(target, UNIT_STATE_MAX_LIFE) * .02);
		tarmor[CreateTimer()] = CreateTimer();
		harmor[GetHandleId(tarmor)] = GetHandleId(tarmor);
		SetArmorAbilityLevel(target, armor);
		time[LoadReal(udg_hash, h, $A)] = LoadReal(udg_hash, h, $A);
		ef[AddSpecialEffectTarget("Effects\\RunicShield.mdx", target, "chest")] = AddSpecialEffectTarget("Effects\\RunicShield.mdx", target, "chest");
		SaveUnitHandle(udg_hash, harmor, 1, target);
		SaveInteger(udg_hash, harmor, 2, armor);
		SaveEffectHandle(udg_hash, harmor, 3, ef);
		TimerStart(tarmor, time, false, Trig_Spiral_of_Light_Remove_Bonus_Armor_Actions);
		ef[null] = null;
		tarmor[null] = null;
		p[GetOwningPlayer(caster)] = GetOwningPlayer(caster);
		g[CreateGroup()] = CreateGroup();
		gdammi[CreateGroup()] = CreateGroup();
		GroupEnumUnitsInRange(g, xt, yt, 400., null);
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				if (IsUnitEnemy(Picked, p)) {
					angle2[bj_RADTODEG * Atan2(GetUnitY(Picked) - yt, GetUnitX(Picked) - xt)] = bj_RADTODEG * Atan2(GetUnitY(Picked) - yt, GetUnitX(Picked) - xt);
					dammi2[CreateUnit(p, 'h00U', xt, yt, angle2)] = CreateUnit(p, 'h00U', xt, yt, angle2);
					UnitAddAbility(dammi2, 'Amrf');
					UnitRemoveAbility(dammi2, 'Amrf');
					SetUnitFlyHeight(dammi2, 50., .0);
					ef[AddSpecialEffectTarget("Effects\\HolyPhoenixMissle.mdx", dammi2, "chest")] = AddSpecialEffectTarget("Effects\\HolyPhoenixMissle.mdx", dammi2, "chest");
					GroupAddUnit(gdammi, dammi2);
					SaveUnitHandle(udg_hash, GetHandleId(dammi2), 1, Picked);
					SaveStr(udg_hash, GetHandleId(dammi2), 2, "damage");
					SaveEffectHandle(udg_hash, GetHandleId(dammi2), 3, ef);
					ef[null] = null;
					dammi2[null] = null;
				}
				if (IsUnitAlly(Picked, p) && Picked != target) {
					angle2[bj_RADTODEG * Atan2(GetUnitY(Picked) - yt, GetUnitX(Picked) - xt)] = bj_RADTODEG * Atan2(GetUnitY(Picked) - yt, GetUnitX(Picked) - xt);
					dammi2[CreateUnit(p, 'h00U', xt, yt, angle2)] = CreateUnit(p, 'h00U', xt, yt, angle2);
					UnitAddAbility(dammi2, 'Amrf');
					UnitRemoveAbility(dammi2, 'Amrf');
					SetUnitFlyHeight(dammi2, 50., .0);
					ef[AddSpecialEffectTarget("Effects\\HolyPhoenixMissle.mdx", dammi2, "chest")] = AddSpecialEffectTarget("Effects\\HolyPhoenixMissle.mdx", dammi2, "chest");
					GroupAddUnit(gdammi, dammi2);
					SaveUnitHandle(udg_hash, GetHandleId(dammi2), 1, Picked);
					SaveStr(udg_hash, GetHandleId(dammi2), 2, "heal");
					SaveEffectHandle(udg_hash, GetHandleId(dammi2), 3, ef);
					ef[null] = null;
					dammi2[null] = null;
				}
			}
			GroupRemoveUnit(g, Picked);
		}
		SaveGroupHandle(udg_hash, h, 9, gdammi);
		GroupClear(g);
		DestroyGroup(g);
		g[null] = null;
		gdammi[null] = null;
		p[null] = null;
	}
	if (stage == 1) {
		p[GetOwningPlayer(caster)] = GetOwningPlayer(caster);
		gdammi[LoadGroupHandle(udg_hash, h, 9)] = LoadGroupHandle(udg_hash, h, 9);
		gdammi2[CreateGroup()] = CreateGroup();
		GroupAddGroup(gdammi, gdammi2);
		while (true) {
			dammi2[FirstOfGroup(gdammi2)] = FirstOfGroup(gdammi2);
			if (dammi2 == null) break;
			remove[false] = false;
			target[LoadUnitHandle(udg_hash, GetHandleId(dammi2), 1)] = LoadUnitHandle(udg_hash, GetHandleId(dammi2), 1);
			x[GetUnitX(dammi2)] = GetUnitX(dammi2);
			y[GetUnitY(dammi2)] = GetUnitY(dammi2);
			xt[GetUnitX(target)] = GetUnitX(target);
			yt[GetUnitY(target)] = GetUnitY(target);
			angle[bj_RADTODEG * Atan2(yt - y, xt - x)] = bj_RADTODEG * Atan2(yt - y, xt - x);
			x[x + 22. * Cos(angle * bj_DEGTORAD)] = x + 22. * Cos(angle * bj_DEGTORAD);
			y[y + 22. * Sin(angle * bj_DEGTORAD)] = y + 22. * Sin(angle * bj_DEGTORAD);
			SetUnitPosition(dammi2, x, y);
			dist[SquareRoot((xt - x) * (xt - x) + (yt - y) * (yt - y))] = SquareRoot((xt - x) * (xt - x) + (yt - y) * (yt - y));
			if (dist < 23. || GetUnitState(target, UNIT_STATE_LIFE) < .405) {
				SetUnitScale(dammi2, .6, .6, .6);
				ef[LoadEffectHandle(udg_hash, GetHandleId(dammi2), 3)] = LoadEffectHandle(udg_hash, GetHandleId(dammi2), 3);
				DestroyEffect(ef);
				ef[null] = null;
				if (GetUnitState(target, UNIT_STATE_LIFE) > .405) {
					if (LoadStr(udg_hash, GetHandleId(dammi2), 2) == "damage") {
						damage[LoadReal(udg_hash, h, 8)] = LoadReal(udg_hash, h, 8);
						remove[true] = true;
						DestroyEffect(AddSpecialEffectTarget("Effects\\HolyPhoenixMissle.mdx", target, "origin"));
						UnitDamageTarget(caster, target, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
					else
						heal[LoadReal(udg_hash, h, 7)] = LoadReal(udg_hash, h, 7);
						SetUnitState(target, UNIT_STATE_LIFE, GetUnitState(target, UNIT_STATE_LIFE) + heal);
						DestroyEffect(AddSpecialEffectTarget("Effects\\MegaHeal.mdx", target, "origin"));
						DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", target, "origin"), 2.);
						remove[true] = true;
					}
				else
					remove[true] = true;
					DestroyEffect(AddSpecialEffect("Effects\\HolyPhoenixMissle.mdx", x, y));
				}
				GroupRemoveUnit(gdammi, dammi2);
				FlushChildHashtable(udg_hash, GetHandleId(dammi2));
				if (remove) {
					RemoveUnit(dammi2);
				}
			}
			GroupRemoveUnit(gdammi2, dammi2);
			target[null] = null;
		}
		dammi2[null] = null;
		SaveGroupHandle(udg_hash, h, 9, gdammi);
		if (CountUnitsInGroup(gdammi) == 0) {
			stage[2] = 2;
			SaveInteger(udg_hash, h, 5, stage);
		}
		p[null] = null;
		gdammi[null] = null;
		GroupClear(gdammi2);
		DestroyGroup(gdammi2);
		gdammi2[null] = null;
	}
	if (stage == 2) {
		gdammi[LoadGroupHandle(udg_hash, h, 9)] = LoadGroupHandle(udg_hash, h, 9);
		GroupClear(gdammi);
		DestroyGroup(gdammi);
		gdammi[null] = null;
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	caster[null] = null;
}
void Trig_Spiral_of_Light_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	float xt = GetUnitX(target);
	float yt = GetUnitY(target);
	float angle = bj_RADTODEG * Atan2(yt - y, xt - x);
	timer t = CreateTimer();
	int h = GetHandleId(t);
	unit dammi;
	effect ef;
	float dist = SquareRoot((xt - x) * (xt - x) + (yt - y) * (yt - y));
	int lvl = GetUnitAbilityLevel(caster, 'A0M6');
	float healmain = 50 + (70 * lvl) + ((GetHeroStr(caster, true) + GetHeroInt(caster, true)) / 2);
	float heal = 30 + (50 * lvl);
	float damage = $A + (30 * lvl);
	float time = 2. + (1. * lvl);
	int stage = 0;
	int hcaster = GetHandleId(caster);
	effect hammeref;
	dammi[CreateUnit(GetOwningPlayer(caster), 'h00U', x, y, angle)] = CreateUnit(GetOwningPlayer(caster), 'h00U', x, y, angle);
	UnitAddAbility(dammi, 'Amrf');
	UnitRemoveAbility(dammi, 'Amrf');
	SetUnitScale(dammi, 1.25, 1.25, 1.25);
	ef[AddSpecialEffectTarget("Effects\\HolySpiral.mdl", dammi, "chest")] = AddSpecialEffectTarget("Effects\\HolySpiral.mdl", dammi, "chest");
	if (GetRandomInt(1, 'd') <= (6 + (GetUnitAbilityLevel(caster, 'A0M8') * 4)) && GetUnitAbilityLevel(caster, 'A0M8') > 0 && LoadBoolean(udg_hash, hcaster, 'q') == false) {
		SaveReal(udg_hash, hcaster, 'p', .0);
		SaveBoolean(udg_hash, hcaster, 'q', true);
		hammeref[AddSpecialEffectTarget("Abilities\\Spells\\Human\\slow\\slowtarget.mdl", caster, "weapon")] = AddSpecialEffectTarget("Abilities\\Spells\\Human\\slow\\slowtarget.mdl", caster, "weapon");
		SaveEffectHandle(udg_hash, hcaster, 'r', hammeref);
		hammeref[null] = null;
		hammeref[AddSpecialEffectTarget("Effects\\LifeHigh.mdx", caster, "weapon")] = AddSpecialEffectTarget("Effects\\LifeHigh.mdx", caster, "weapon");
		SaveEffectHandle(udg_hash, hcaster, 's', hammeref);
		hammeref[null] = null;
	}
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveUnitHandle(udg_hash, h, 2, target);
	SaveUnitHandle(udg_hash, h, 3, dammi);
	SaveEffectHandle(udg_hash, h, 4, ef);
	SaveInteger(udg_hash, h, 5, stage);
	SaveReal(udg_hash, h, 6, healmain);
	SaveReal(udg_hash, h, 7, heal);
	SaveReal(udg_hash, h, 8, damage);
	SaveReal(udg_hash, h, $A, time);
	TimerStart(t, .03, true, Trig_Spiral_of_Light_Periodic_Actions);
	caster[null] = null;
	target[null] = null;
	t[null] = null;
	dammi[null] = null;
	ef[null] = null;
}
bool Trig_Spiral_of_Light_Conditions() {
	return GetSpellAbilityId() == 'A0M6';
}
void InitTrig_Spiral_of_Light() {
	int index = 0;
	gg_trg_Spiral_of_Light[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Spiral_of_Light, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Spiral_of_Light, Condition(Trig_Spiral_of_Light_Conditions));
	TriggerAddAction(gg_trg_Spiral_of_Light, Trig_Spiral_of_Light_Actions);
}
void Trig_Keeper_Seal_Periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	unit target = LoadUnitHandle(udg_hash, h, 2);
	unit dammi = LoadUnitHandle(udg_hash, h, 3);
	effect ef;
	int wait = LoadInteger(udg_hash, h, 7);
	float angle = LoadReal(udg_hash, h, 8);
	int bonushp;
	int bonusregen;
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	float xt = x + 125. * Cos(angle * bj_DEGTORAD);
	float yt = y + 125. * Sin(angle * bj_DEGTORAD);
	if (wait > 0 && GetUnitState(target, UNIT_STATE_LIFE) > .405 && GetUnitState(caster, UNIT_STATE_LIFE) > .405) {
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 7, wait);
		angle[angle + 5.] = angle + 5.;
		SaveReal(udg_hash, h, 8, angle);
		SetUnitPosition(dammi, xt, yt);
	else
		bonushp[LoadInteger(udg_hash, h, 5)] = LoadInteger(udg_hash, h, 5);
		bonusregen[LoadInteger(udg_hash, h, 6)] = LoadInteger(udg_hash, h, 6);
		SetUnitMaxState(caster, UNIT_STATE_MAX_LIFE, -bonushp);
		SetUnitLifeAndManaRegeneration(caster, "life", -bonusregen);
		SaveReal(udg_hash, GetHandleId(target), 'n', .0);
		SaveUnitHandle(udg_hash, GetHandleId(target), 'o', null);
		ef[LoadEffectHandle(udg_hash, h, 4)] = LoadEffectHandle(udg_hash, h, 4);
		DestroyEffect(ef);
		ef[null] = null;
		ef[LoadEffectHandle(udg_hash, h, $B)] = LoadEffectHandle(udg_hash, h, $B);
		DestroyEffect(ef);
		ef[null] = null;
		KillUnit(dammi);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	caster[null] = null;
	target[null] = null;
	dammi[null] = null;
}
void Trig_Keeper_Seal_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	float x;
	float y;
	timer t;
	int h;
	player p = GetOwningPlayer(caster);
	unit dammi;
	effect ef;
	int lvl = GetUnitAbilityLevel(caster, 'A0M7');
	int bonushp;
	int bonusregen;
	float resist;
	int wait;
	float angle;
	int hcaster = GetHandleId(caster);
	effect hammeref;
	if (LoadReal(udg_hash, GetHandleId(target), 'n') > .0) {
		UnitRemoveAbility(caster, 'A0M7');
		UnitAddAbility(caster, 'A0M7');
		SetUnitAbilityLevel(caster, 'A0M7', lvl);
		SetUnitState(caster, UNIT_STATE_MANA, GetUnitState(caster, UNIT_STATE_MANA) + 120. + (5. * lvl));
		SimError(p, "На этого воина уже наложена печать хранителя.");
	else
		t[CreateTimer()] = CreateTimer();
		h[GetHandleId(t)] = GetHandleId(t);
		x[GetUnitX(caster)] = GetUnitX(caster);
		y[GetUnitY(caster)] = GetUnitY(caster);
		bonushp['d' + (50 * lvl)] = 'd' + (50 * lvl);
		resist[(.1 * lvl) + .3] = (.1 * lvl) + .3;
		wait[500] = 500;
		angle[270.] = 270.;
		SetUnitMaxState(caster, UNIT_STATE_MAX_LIFE, bonushp);
		bonusregen[R2I(GetUnitState(caster, UNIT_STATE_MAX_LIFE) * (.005 + (.005 * lvl)))] = R2I(GetUnitState(caster, UNIT_STATE_MAX_LIFE) * (.005 + (.005 * lvl)));
		SetUnitLifeAndManaRegeneration(caster, "life", bonusregen);
		SaveReal(udg_hash, GetHandleId(target), 'n', resist);
		SaveUnitHandle(udg_hash, GetHandleId(target), 'o', caster);
		dammi[CreateUnit(p, 'h00U', x, y, .0)] = CreateUnit(p, 'h00U', x, y, .0);
		UnitAddAbility(dammi, 'Amrf');
		UnitRemoveAbility(dammi, 'Amrf');
		ef[AddSpecialEffectTarget("Effects\\OrbLightX.mdx", dammi, "chest")] = AddSpecialEffectTarget("Effects\\OrbLightX.mdx", dammi, "chest");
		SaveEffectHandle(udg_hash, h, 4, ef);
		ef[null] = null;
		ef[AddSpecialEffectTarget("Effects\\HolyArmor.MDX", target, "chest")] = AddSpecialEffectTarget("Effects\\HolyArmor.MDX", target, "chest");
		SaveEffectHandle(udg_hash, h, $B, ef);
		ef[null] = null;
		if (GetRandomInt(1, 'd') <= (6 + (GetUnitAbilityLevel(caster, 'A0M8') * 4)) && GetUnitAbilityLevel(caster, 'A0M8') > 0 && LoadBoolean(udg_hash, hcaster, 'q') == false) {
			SaveReal(udg_hash, hcaster, 'p', .0);
			SaveBoolean(udg_hash, hcaster, 'q', true);
			hammeref[AddSpecialEffectTarget("Abilities\\Spells\\Human\\slow\\slowtarget.mdl", caster, "weapon")] = AddSpecialEffectTarget("Abilities\\Spells\\Human\\slow\\slowtarget.mdl", caster, "weapon");
			SaveEffectHandle(udg_hash, hcaster, 'r', hammeref);
			hammeref[null] = null;
			hammeref[AddSpecialEffectTarget("Effects\\LifeHigh.mdx", caster, "weapon")] = AddSpecialEffectTarget("Effects\\LifeHigh.mdx", caster, "weapon");
			SaveEffectHandle(udg_hash, hcaster, 's', hammeref);
			hammeref[null] = null;
		}
		SaveUnitHandle(udg_hash, h, 1, caster);
		SaveUnitHandle(udg_hash, h, 2, target);
		SaveUnitHandle(udg_hash, h, 3, dammi);
		SaveInteger(udg_hash, h, 5, bonushp);
		SaveInteger(udg_hash, h, 6, bonusregen);
		SaveInteger(udg_hash, h, 7, wait);
		SaveReal(udg_hash, h, 8, angle);
		TimerStart(t, .03, true, Trig_Keeper_Seal_Periodic_Actions);
	}
	caster[null] = null;
	target[null] = null;
	t[null] = null;
	dammi[null] = null;
	p[null] = null;
}
bool Trig_Keeper_Seal_Conditions() {
	return GetSpellAbilityId() == 'A0M7';
}
void InitTrig_Keeper_Seal() {
	int index = 0;
	gg_trg_Keeper_Seal[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Keeper_Seal, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Keeper_Seal, Condition(Trig_Keeper_Seal_Conditions));
	TriggerAddAction(gg_trg_Keeper_Seal, Trig_Keeper_Seal_Actions);
}
void Trig_Light_Hammer_Periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit hero = LoadUnitHandle(udg_hash, h, 1);
	int damage = LoadInteger(udg_hash, h, 2);
	bool first = LoadBoolean(udg_hash, h, 3);
	int lvl = GetUnitAbilityLevel(hero, 'A0M8');
	int newdamage = R2I(GetUnitState(hero, UNIT_STATE_MAX_LIFE) * .01 * lvl);
	if (first) {
		first[false] = false;
		SaveBoolean(udg_hash, h, 3, first);
		TimerStart(t, 1., true, Trig_Light_Hammer_Periodic_Actions);
	}
	if (damage != newdamage) {
		SetAttackAbilityLevel(hero, -damage);
		SetAttackAbilityLevel(hero, newdamage);
		SaveInteger(udg_hash, h, 2, newdamage);
	}
	hero[null] = null;
	t[null] = null;
}
void Trig_Light_Hammer_Actions() {
	unit hero = GetLearningUnit();
	timer t = CreateTimer();
	int h = GetHandleId(t);
	int damage = 0;
	bool first = true;
	SaveUnitHandle(udg_hash, h, 1, hero);
	SaveInteger(udg_hash, h, 2, damage);
	SaveBoolean(udg_hash, h, 3, first);
	TimerStart(t, .0, false, Trig_Light_Hammer_Periodic_Actions);
	AddProgressBar(hero, 235. + (3.), (.9 + .05), 1., true, false, 'v', $F8, $9A, 0);
	hero[null] = null;
	t[null] = null;
}
bool Trig_Light_Hammer_Conditions() {
	return GetLearnedSkill() == 'A0M8' && GetUnitAbilityLevel(GetLearningUnit(), 'A0M8') == 1 && GetUnitTypeId(GetLearningUnit()) != 'h00U';
}
void InitTrig_Light_Hammer() {
	int index = 0;
	gg_trg_Light_Hammer[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Light_Hammer, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Light_Hammer, Condition(Trig_Light_Hammer_Conditions));
	TriggerAddAction(gg_trg_Light_Hammer, Trig_Light_Hammer_Actions);
}
void Trig_God_Hand_Remove_Bonus_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit target = LoadUnitHandle(udg_hash, h, 1);
	int regen = LoadInteger(udg_hash, h, 2);
	effect ef = LoadEffectHandle(udg_hash, h, 3);
	int stage = LoadInteger(udg_hash, h, 4);
	if (stage == 0) {
		SaveReal(udg_hash, GetHandleId(target), 't', .0);
		SetUnitLifeAndManaRegeneration(target, "life", -regen);
		DestroyEffect(AddSpecialEffectTarget("Effects\\DivineRage.mdl", target, "origin"));
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	else
		DestroyEffect(ef);
		ef[null] = null;
		SaveInteger(udg_hash, h, 4, 0);
		TimerStart(t, 4.5, false, Trig_God_Hand_Remove_Bonus_Actions);
	}
	t[null] = null;
	target[null] = null;
	ef[null] = null;
}
void Trig_God_Hand_periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	unit target = LoadUnitHandle(udg_hash, h, 2);
	float heal;
	float mana;
	int wait = LoadInteger(udg_hash, h, 5);
	int delay = LoadInteger(udg_hash, h, 6);
	float hpc = GetUnitState(caster, UNIT_STATE_LIFE);
	float hpt = GetUnitState(target, UNIT_STATE_LIFE);
	bool alife;
	int regen;
	int order = GetUnitCurrentOrder(caster);
	int orderId;
	timer tbonus;
	int hbonus;
	effect ef;
	orderId[$D0079] = $D0079;
	if ((orderId != 0)) {
	else
		orderId[UnitId("blizzard")] = UnitId("blizzard");
		if ((orderId != 0)) {
		}
	}
	if (hpc > .405 && hpt > .405) {
		alife[true] = true;
	else
		alife[false] = false;
	}
	if (order == orderId && wait > 0 && alife) {
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 5, wait);
	else
		if (wait == 0 && delay == $A && alife) {
			DestroyEffect(AddSpecialEffectTarget("Effects\\HolyAwakening.mdl", target, "origin"));
		}
		if (wait <= 0 && delay > 0 && alife) {
			delay[delay - 1] = delay - 1;
			SaveInteger(udg_hash, h, 6, delay);
		}
		if (wait == 0 && delay == 0 && (hpt > .405)) {
			heal[LoadReal(udg_hash, h, 3)] = LoadReal(udg_hash, h, 3);
			mana[LoadReal(udg_hash, h, 4)] = LoadReal(udg_hash, h, 4);
			regen[LoadInteger(udg_hash, h, 7)] = LoadInteger(udg_hash, h, 7);
			SetUnitState(target, UNIT_STATE_LIFE, GetUnitState(target, UNIT_STATE_LIFE) + heal);
			SetUnitState(target, UNIT_STATE_MANA, GetUnitState(target, UNIT_STATE_MANA) + mana);
			DestroyEffect(AddSpecialEffectTarget("Effects\\MegaHeal.mdx", target, "origin"));
			DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", target, "origin"), 2.);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIma\\AImaTarget.mdl", target, "origin"));
			SetUnitLifeAndManaRegeneration(target, "life", regen);
			tbonus[CreateTimer()] = CreateTimer();
			hbonus[GetHandleId(tbonus)] = GetHandleId(tbonus);
			ef[AddSpecialEffectTarget("Effects\\HolyAurora.mdl", target, "origin")] = AddSpecialEffectTarget("Effects\\HolyAurora.mdl", target, "origin");
			SaveUnitHandle(udg_hash, hbonus, 1, target);
			SaveInteger(udg_hash, hbonus, 2, regen);
			SaveEffectHandle(udg_hash, hbonus, 3, ef);
			SaveInteger(udg_hash, hbonus, 4, 1);
			ef[null] = null;
			TimerStart(tbonus, 2.5, false, Trig_God_Hand_Remove_Bonus_Actions);
			tbonus[null] = null;
		}
		if ((order != orderId && wait > 0) || (wait <= 0 && delay <= 0)) {
			RemoveUnit(LoadUnitHandle(udg_hash, GetHandleId(caster), 'u'));
			FlushChildHashtable(udg_hash, h);
			DestroyTimer(t);
		}
	}
	t[null] = null;
	caster[null] = null;
	target[null] = null;
}
void Trig_God_Hand_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	int lvl = GetUnitAbilityLevel(caster, 'A0MA');
	float heal = (GetUnitState(target, UNIT_STATE_MAX_LIFE) * (.1 + (.1 * lvl))) + (100. + (125. * lvl));
	float mana = (GetUnitState(target, UNIT_STATE_MAX_MANA) * (.1 + (.1 * lvl))) + (50. + (75. * lvl));
	int regen;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	int wait = 70 - (lvl * $A);
	int delay = $A;
	float fastresp = .05 + (.15 * lvl);
	int hcaster = GetHandleId(caster);
	effect hammeref;
	if (IsUnitType(target, UNIT_TYPE_HERO)) {
		regen[R2I((GetHeroStr(caster, true) + GetHeroStr(target, true)) * (.1 + (.1 * lvl)))] = R2I((GetHeroStr(caster, true) + GetHeroStr(target, true)) * (.1 + (.1 * lvl)));
	else
		regen[R2I(GetHeroStr(caster, true) * (.1 + (.1 * lvl)))] = R2I(GetHeroStr(caster, true) * (.1 + (.1 * lvl)));
	}
	if (GetRandomInt(1, 'd') <= (6 + (GetUnitAbilityLevel(caster, 'A0M8') * 4)) && GetUnitAbilityLevel(caster, 'A0M8') > 0 && LoadBoolean(udg_hash, hcaster, 'q') == false) {
		SaveReal(udg_hash, hcaster, 'p', .0);
		SaveBoolean(udg_hash, hcaster, 'q', true);
		hammeref[AddSpecialEffectTarget("Abilities\\Spells\\Human\\slow\\slowtarget.mdl", caster, "weapon")] = AddSpecialEffectTarget("Abilities\\Spells\\Human\\slow\\slowtarget.mdl", caster, "weapon");
		SaveEffectHandle(udg_hash, hcaster, 'r', hammeref);
		hammeref[null] = null;
		hammeref[AddSpecialEffectTarget("Effects\\LifeHigh.mdx", caster, "weapon")] = AddSpecialEffectTarget("Effects\\LifeHigh.mdx", caster, "weapon");
		SaveEffectHandle(udg_hash, hcaster, 's', hammeref);
		hammeref[null] = null;
	}
	SaveReal(udg_hash, GetHandleId(target), 't', fastresp);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveUnitHandle(udg_hash, h, 2, target);
	SaveReal(udg_hash, h, 3, heal);
	SaveReal(udg_hash, h, 4, mana);
	SaveInteger(udg_hash, h, 5, wait);
	SaveInteger(udg_hash, h, 6, delay);
	SaveInteger(udg_hash, h, 7, regen);
	DestroyEffect(AddSpecialEffectTarget("Effects\\Consecrate.mdl", caster, "origin"));
	DestroyEffect(AddSpecialEffectTarget("Effects\\Consecrate.mdl", target, "origin"));
	TimerStart(t, .05, true, Trig_God_Hand_periodic_Actions);
	AddProgressBar(caster, 185. + (3. * lvl), (.9 + .1 * lvl), (wait * .05), false, true, 'u', $F8, $9A, 0);
	caster[null] = null;
	target[null] = null;
	t[null] = null;
}
bool Trig_God_Hand_Conditions() {
	return GetSpellAbilityId() == 'A0MA';
}
void InitTrig_God_Hand() {
	int index = 0;
	gg_trg_God_Hand[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_God_Hand, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_God_Hand, Condition(Trig_God_Hand_Conditions));
	TriggerAddAction(gg_trg_God_Hand, Trig_God_Hand_Actions);
}
void Trig_Stone_Guard_Load_Actions() {
	AbilityPreload('A0MI', 6);
	AbilityPreload('A0ML', 6);
	AbilityPreload('A0MK', 6);
	AbilityPreload('A0MM', 3);
	AbilityPreload('A0MJ', 6);
	AbilityPreload('B04I', 1);
	AbilityPreload('B04J', 1);
	EffectPreload("Effects\\Stone Shield.mdx");
	EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl");
	EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodMortarTeam.mdl");
	EffectPreload("Effects\\RockV4.mdl");
	EffectPreload("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl");
	EffectPreload("Effects\\StoneSmall.mdl");
	EffectPreload("Abilities\\Weapons\\CannonTowerMissile\\CannonTowerMissile.mdl");
	EffectPreload("Effects\\Stonespear.mdl");
	EffectPreload("Abilities\\Spells\\Other\\Volcano\\VolcanoDeath.mdl");
	EffectPreload("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl");
	EffectPreload("Abilities\\Spells\\Orc\\EarthQuake\\EarthQuakeTarget.mdl");
	EnableTrigger(gg_trg_Boulder_Throw);
	EnableTrigger(gg_trg_Earth_Shiver);
	EnableTrigger(gg_trg_Learn_Stone_Armor);
	EnableTrigger(gg_trg_Rock_Strike);
}
void InitTrig_Stone_Guard_Load() {
	gg_trg_Stone_Guard_Load[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Stone_Guard_Load, Trig_Stone_Guard_Load_Actions);
}
void Trig_Boulder_Throw_Move_Dest_Actions() {
	KillDestructable(GetEnumDestructable());
}
void Trig_Boulder_Throw_Move_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	float damage;
	float damage2;
	int wait = LoadInteger(udg_hash, h, 4);
	float angle;
	unit stone;
	effect ef;
	int anim = LoadInteger(udg_hash, h, 8);
	int wait2 = LoadInteger(udg_hash, h, 9);
	float xt;
	float yt;
	int lvl;
	float bangle;
	float speed;
	player p;
	group g;
	unit Picked;
	unit dammi;
	array<unit> boulder;
	int i;
	float dist;
	unit dammief;
	rect r;
	if (wait > 0 && (wait2 == 33)) {
		stone[LoadUnitHandle(udg_hash, h, 6)] = LoadUnitHandle(udg_hash, h, 6);
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 4, wait);
		anim[anim + $A] = anim + $A;
		if (anim >= $AA) {
			anim[0] = 0;
		}
		SaveInteger(udg_hash, h, 8, anim);
		SetUnitFacing(stone, GetUnitFacing(stone) + 30.);
		SetUnitAnimationByIndex(stone, anim);
		if (wait == 0 && wait2 == 33) {
			damage[LoadReal(udg_hash, h, 3)] = LoadReal(udg_hash, h, 3);
			xt[LoadReal(udg_hash, h, $B)] = LoadReal(udg_hash, h, $B);
			yt[LoadReal(udg_hash, h, $C)] = LoadReal(udg_hash, h, $C);
			p[GetOwningPlayer(caster)] = GetOwningPlayer(caster);
			lvl[GetUnitAbilityLevel(caster, 'A0MI')] = GetUnitAbilityLevel(caster, 'A0MI');
			g[CreateGroup()] = CreateGroup();
			GroupEnumUnitsInRange(g, xt, yt, 250., null);
			dammief[CreateUnit(p, 'h00U', xt, yt, .0)] = CreateUnit(p, 'h00U', xt, yt, .0);
			SetUnitFlyHeight(dammief, 40., .0);
			SetUnitScale(dammief, 2., 2., 2.);
			UnitApplyTimedLife(dammief, 'BTLF', 2.);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", dammief, "chest"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\CannonTowerMissile\\CannonTowerMissile.mdl", dammief, "chest"));
			r[Rect(xt - 250., yt - 250., xt + 250., yt + 250.)] = Rect(xt - 250., yt - 250., xt + 250., yt + 250.);
			EnumDestructablesInRect(r, null, Trig_Boulder_Throw_Move_Dest_Actions);
			while (true) {
				Picked[FirstOfGroup(g)] = FirstOfGroup(g);
				if (Picked == null) break;
				if (IsUnitEnemy(Picked, p) && Picked != null && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", Picked, "chest"));
					dammi[CreateUnit(p, 'h00U', xt, yt, .0)] = CreateUnit(p, 'h00U', xt, yt, .0);
					UnitApplyTimedLife(dammi, 'BTLF', 1.);
					UnitAddAbility(dammi, 'A0MJ');
					SetUnitAbilityLevel(dammi, 'A0MJ', lvl);
					IssueTargetOrderById(dammi, $D006B, Picked);
					UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
					dammi[null] = null;
					angle[bj_RADTODEG * Atan2(GetUnitY(Picked) - yt, GetUnitX(Picked) - xt)] = bj_RADTODEG * Atan2(GetUnitY(Picked) - yt, GetUnitX(Picked) - xt);
					dist[SquareRoot(((GetUnitX(Picked) - xt) * (GetUnitX(Picked) - xt)) + ((GetUnitY(Picked) - yt) * (GetUnitY(Picked) - yt)))] = SquareRoot(((GetUnitX(Picked) - xt) * (GetUnitX(Picked) - xt)) + ((GetUnitY(Picked) - yt) * (GetUnitY(Picked) - yt)));
					MoveUnit(Picked, .4, 500. - dist, 625., angle, .0, false);
				}
				GroupRemoveUnit(g, Picked);
			}
			RemoveUnit(stone);
			ef[LoadEffectHandle(udg_hash, h, 7)] = LoadEffectHandle(udg_hash, h, 7);
			DestroyEffect(ef);
			ef[null] = null;
			p[null] = null;
			GroupClear(g);
			DestroyGroup(g);
			g[null] = null;
			RemoveRect(r);
			r[null] = null;
		}
		stone[null] = null;
	}
	if (wait2 > 0 && wait <= 0) {
		wait2[wait2 - 1] = wait2 - 1;
		SaveInteger(udg_hash, h, 9, wait2);
		anim[anim + $A] = anim + $A;
		if (anim >= $AA) {
			anim[0] = 0;
		}
		SaveInteger(udg_hash, h, 8, anim);
		if (wait2 == 32) {
			xt[LoadReal(udg_hash, h, $B)] = LoadReal(udg_hash, h, $B);
			yt[LoadReal(udg_hash, h, $C)] = LoadReal(udg_hash, h, $C);
			p[GetOwningPlayer(caster)] = GetOwningPlayer(caster);
			i[1] = 1;
			while (true) {
				if (i >= $B) break;
				if (i >= 1 && i <= 7) {
					bangle[(360. / 7) * i] = (360. / 7) * i;
					speed[225.] = 225.;
				}
				if (i >= 8 && i <= $A) {
					bangle[(360. / 3) * (i - 7)] = (360. / 3) * (i - 7);
					speed[100.] = 100.;
				}
				boulder[CreateUnit(p, 'h00E', xt, yt, bangle)] = CreateUnit(p, 'h00E', xt, yt, bangle);
				ef[AddSpecialEffectTarget("Effects\\StoneSmall.mdl", boulder[i], "chest")] = AddSpecialEffectTarget("Effects\\StoneSmall.mdl", boulder[i], "chest");
				SetUnitScale(boulder[i], 1.5, 1.5, 1.5);
				UnitAddAbility(boulder[i], 'Amrf');
				UnitRemoveAbility(boulder[i], 'Amrf');
				MoveUnit(boulder[i], 1., speed, .0, bangle, 500., true);
				SaveUnitHandle(udg_hash, h, $F + i, boulder[i]);
				SaveEffectHandle(udg_hash, h, 30 + i, ef);
				ef[null] = null;
				boulder[null] = null;
				i[i + 1] = i + 1;
			}
		}
		i[1] = 1;
		while (true) {
			if (i >= $B) break;
			boulder[LoadUnitHandle(udg_hash, h, $F + i)] = LoadUnitHandle(udg_hash, h, $F + i);
			SetUnitFacing(boulder[i], GetUnitFacing(boulder[i]) + 30.);
			boulder[null] = null;
			i[i + 1] = i + 1;
		}
		if (wait2 <= 0) {
			i[1] = 1;
			while (true) {
				if (i >= $B) break;
				boulder[LoadUnitHandle(udg_hash, h, $F + i)] = LoadUnitHandle(udg_hash, h, $F + i);
				ef[LoadEffectHandle(udg_hash, h, 30 + i)] = LoadEffectHandle(udg_hash, h, 30 + i);
				DestroyEffect(ef);
				DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", GetUnitX(boulder[i]), GetUnitY(boulder[i])));
				RemoveUnit(boulder[i]);
				ef[null] = null;
				boulder[null] = null;
				i[i + 1] = i + 1;
			}
			damage2[LoadReal(udg_hash, h, $A)] = LoadReal(udg_hash, h, $A);
			xt[LoadReal(udg_hash, h, $B)] = LoadReal(udg_hash, h, $B);
			yt[LoadReal(udg_hash, h, $C)] = LoadReal(udg_hash, h, $C);
			p[GetOwningPlayer(caster)] = GetOwningPlayer(caster);
			g[CreateGroup()] = CreateGroup();
			GroupEnumUnitsInRange(g, xt, yt, 250., null);
			r[Rect(xt - 250., yt - 250., xt + 250., yt + 250.)] = Rect(xt - 250., yt - 250., xt + 250., yt + 250.);
			EnumDestructablesInRect(r, null, Trig_Boulder_Throw_Move_Dest_Actions);
			while (true) {
				Picked[FirstOfGroup(g)] = FirstOfGroup(g);
				if (Picked == null) break;
				if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", Picked, "chest"));
					UnitDamageTarget(caster, Picked, damage2, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
					StunUnitTimed(Picked, .5);
				}
				GroupRemoveUnit(g, Picked);
			}
			p[null] = null;
			GroupClear(g);
			DestroyGroup(g);
			g[null] = null;
			RemoveRect(r);
			r[null] = null;
			FlushChildHashtable(udg_hash, h);
			DestroyTimer(t);
		}
	}
	t[null] = null;
	caster[null] = null;
}
void Trig_Boulder_Throw_Actions() {
	unit caster = GetSpellAbilityUnit();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	location loc = GetSpellTargetLoc();
	float xt = GetLocationX(loc);
	float yt = GetLocationY(loc);
	float angle = bj_RADTODEG * Atan2((yt - y), (xt - x));
	float dist = SquareRoot(((xt - x) * (xt - x)) + ((yt - y) * (yt - y)));
	int lvl = GetUnitAbilityLevel(caster, 'A0MI');
	float damage = (35. * lvl) + (GetHeroStr(caster, true) * (.3 + .2 * lvl));
	float damage2 = 20. * lvl;
	float time = dist / 800.;
	int time2 = 33;
	float height = dist / 2;
	unit stone = CreateUnit(GetOwningPlayer(caster), 'h00E', x, y, angle);
	effect ef = AddSpecialEffectTarget("Effects\\RockV4.mdl", stone, "chest");
	timer t = CreateTimer();
	int h = GetHandleId(t);
	if (dist < 50.) {
		time[1.] = 1.;
		angle[GetUnitFacing(caster)] = GetUnitFacing(caster);
		dist[100.] = 100.;
		height[dist / 2] = dist / 2;
		time[dist / 800.] = dist / 800.;
	}
	SetUnitX(stone, x + 50. * Cos((angle - 30.) * bj_DEGTORAD));
	SetUnitY(stone, y + 50. * Sin((angle - 30.) * bj_DEGTORAD));
	SetUnitScale(stone, 1.7, 1.7, 1.7);
	SetUnitFlyHeight(stone, 40., .0);
	MoveUnit(stone, time, 800., .0, angle, height, true);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 3, damage);
	SaveInteger(udg_hash, h, 4, R2I(time / .03));
	SaveReal(udg_hash, h, 5, angle);
	SaveUnitHandle(udg_hash, h, 6, stone);
	SaveEffectHandle(udg_hash, h, 7, ef);
	SaveInteger(udg_hash, h, 8, 1);
	SaveInteger(udg_hash, h, 9, time2);
	SaveReal(udg_hash, h, $A, damage2);
	SaveReal(udg_hash, h, $B, xt);
	SaveReal(udg_hash, h, $C, yt);
	TimerStart(t, .03, true, Trig_Boulder_Throw_Move_Actions);
	caster[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	t[null] = null;
	stone[null] = null;
	ef[null] = null;
}
bool Trig_Boulder_Throw_Conditions() {
	return GetSpellAbilityId() == 'A0MI';
}
void InitTrig_Boulder_Throw() {
	int index = 0;
	gg_trg_Boulder_Throw[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Boulder_Throw, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Boulder_Throw, Condition(Trig_Boulder_Throw_Conditions));
	TriggerAddAction(gg_trg_Boulder_Throw, Trig_Boulder_Throw_Actions);
}
void Trig_Boulder_Earth_Shiver_Dest_Actions() {
	KillDestructable(GetEnumDestructable());
}
void Trig_Boulder_Earth_Shiver_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	group gdamage = LoadGroupHandle(udg_hash, h, 2);
	float damage = LoadReal(udg_hash, h, 3);
	float xt = LoadReal(udg_hash, h, 4);
	float yt = LoadReal(udg_hash, h, 5);
	unit dammief = LoadUnitHandle(udg_hash, h, 6);
	unit Picked;
	rect r = Rect(xt - 325., yt - 325., xt + 325., yt + 325.);
	EnumDestructablesInRect(r, null, Trig_Boulder_Earth_Shiver_Dest_Actions);
	while (true) {
		Picked[FirstOfGroup(gdamage)] = FirstOfGroup(gdamage);
		if (Picked == null) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", Picked, "chest"));
			UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
		}
		GroupRemoveUnit(gdamage, Picked);
	}
	RemoveUnit(dammief);
	dammief[null] = null;
	GroupClear(gdamage);
	DestroyGroup(gdamage);
	gdamage[null] = null;
	RemoveRect(r);
	r[null] = null;
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
	caster[null] = null;
	Picked[null] = null;
}
void Trig_Earth_Shiver_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	location loc = GetSpellTargetLoc();
	float xt = GetLocationX(loc);
	float yt = GetLocationY(loc);
	int lvl = GetUnitAbilityLevel(caster, 'A0ML');
	float damage = ((30. * lvl) + GetUnitState(caster, UNIT_STATE_MAX_LIFE) * (.01 + .01 * lvl)) / 2;
	float time = 1.;
	float stuntime = time + .5;
	float height = 350.;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	group g = CreateGroup();
	group gdamage = CreateGroup();
	unit Picked;
	rect r = Rect(xt - 325., yt - 325., xt + 325., yt + 325.);
	unit dammief = CreateUnit(p, 'h00U', xt, yt, .0);
	SetUnitScale(dammief, 2., 2., 2.);
	DestroyEffect(AddSpecialEffectTarget("Effects\\Stonespear.mdl", dammief, "origin"));
	EnumDestructablesInRect(r, null, Trig_Boulder_Earth_Shiver_Dest_Actions);
	GroupEnumUnitsInRange(g, xt, yt, 325., null);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			DestroyEffect(AddSpecialEffect("Effects\\Stonespear.mdl", GetUnitX(Picked), GetUnitY(Picked)));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", Picked, "chest"));
			StunUnitTimed(Picked, stuntime);
			UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			MoveUnit(Picked, time, .0, .0, .0, height, false);
			GroupAddUnit(gdamage, Picked);
		}
		GroupRemoveUnit(g, Picked);
	}
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveGroupHandle(udg_hash, h, 2, gdamage);
	SaveReal(udg_hash, h, 3, damage);
	SaveReal(udg_hash, h, 4, xt);
	SaveReal(udg_hash, h, 5, yt);
	SaveUnitHandle(udg_hash, h, 6, dammief);
	TimerStart(t, time, false, Trig_Boulder_Earth_Shiver_Actions);
	caster[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	t[null] = null;
	RemoveRect(r);
	r[null] = null;
	p[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	gdamage[null] = null;
	Picked[null] = null;
	dammief[null] = null;
}
bool Trig_Earth_Shiver_Conditions() {
	return GetSpellAbilityId() == 'A0ML';
}
void InitTrig_Earth_Shiver() {
	int index = 0;
	gg_trg_Earth_Shiver[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Earth_Shiver, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Earth_Shiver, Condition(Trig_Earth_Shiver_Conditions));
	TriggerAddAction(gg_trg_Earth_Shiver, Trig_Earth_Shiver_Actions);
}
void Trig_Learn_Stone_Armor_Actions() {
	unit u = GetLearningUnit();
	if (GetUnitAbilityLevel(u, 'A0MK') == 1) {
		SetArmorAbilityLevel(u, 3);
	else
		SetArmorAbilityLevel(u, 2);
	}
	u[null] = null;
}
bool Trig_Learn_Stone_Armor_Conditions() {
	return GetLearnedSkill() == 'A0MK' && GetUnitTypeId(GetLearningUnit()) != 'h00U';
}
void InitTrig_Learn_Stone_Armor() {
	int index = 0;
	gg_trg_Learn_Stone_Armor[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Stone_Armor, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Learn_Stone_Armor, Condition(Trig_Learn_Stone_Armor_Conditions));
	TriggerAddAction(gg_trg_Learn_Stone_Armor, Trig_Learn_Stone_Armor_Actions);
}
void Trig_Rock_Strike_Move_Dest_Actions() {
	KillDestructable(GetEnumDestructable());
}
void Trig_Rock_Strike_Move_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	group gdamage = LoadGroupHandle(udg_hash, h, 2);
	int wait = LoadInteger(udg_hash, h, 3);
	int wait2 = LoadInteger(udg_hash, h, 4);
	int anim = LoadInteger(udg_hash, h, 6);
	float damage;
	float damage2;
	float angle;
	float angle2;
	float angle3;
	unit stone;
	effect ef;
	float x;
	float y;
	float xt;
	float yt;
	player p;
	group g;
	unit Picked;
	float dist;
	unit dammief;
	rect r;
	float stuntime;
	if (wait > 0 && (wait2 == 44) && GetUnitState(caster, UNIT_STATE_LIFE) > .405) {
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 3, wait);
		if (wait == 0 && wait2 == 44) {
			damage[LoadReal(udg_hash, h, 9)] = LoadReal(udg_hash, h, 9);
			xt[LoadReal(udg_hash, h, $B)] = LoadReal(udg_hash, h, $B);
			yt[LoadReal(udg_hash, h, $C)] = LoadReal(udg_hash, h, $C);
			stuntime[LoadReal(udg_hash, h, $F)] = LoadReal(udg_hash, h, $F);
			angle[LoadReal(udg_hash, h, 5)] = LoadReal(udg_hash, h, 5);
			p[GetOwningPlayer(caster)] = GetOwningPlayer(caster);
			g[CreateGroup()] = CreateGroup();
			GroupEnumUnitsInRange(g, xt, yt, 175., null);
			SetUnitTimeScale(caster, 1.);
			dammief[CreateUnit(p, 'h00U', xt, yt, .0)] = CreateUnit(p, 'h00U', xt, yt, .0);
			SetUnitScale(dammief, 1.3, 1.3, 1.3);
			UnitApplyTimedLife(dammief, 'BTLF', 4.);
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", xt, yt));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", dammief, "chest"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\CannonTowerMissile\\CannonTowerMissile.mdl", dammief, "chest"));
			DestroyEffectWithWait(AddSpecialEffect("Abilities\\Spells\\Orc\\EarthQuake\\EarthQuakeTarget.mdl", xt, yt), 2.);
			dammief[null] = null;
			r[Rect(xt - 175., yt - 175., xt + 175., yt + 175.)] = Rect(xt - 175., yt - 175., xt + 175., yt + 175.);
			EnumDestructablesInRect(r, null, Trig_Rock_Strike_Move_Dest_Actions);
			while (true) {
				Picked[FirstOfGroup(g)] = FirstOfGroup(g);
				if (Picked == null) break;
				if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
					DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", Picked, "chest"));
					UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
					StunUnitTimed(Picked, stuntime);
					angle2[bj_RADTODEG * Atan2(GetUnitY(Picked) - yt, GetUnitX(Picked) - xt)] = bj_RADTODEG * Atan2(GetUnitY(Picked) - yt, GetUnitX(Picked) - xt);
					dist[SquareRoot(((GetUnitX(Picked) - xt) * (GetUnitX(Picked) - xt)) + ((GetUnitY(Picked) - yt) * (GetUnitY(Picked) - yt)))] = SquareRoot(((GetUnitX(Picked) - xt) * (GetUnitX(Picked) - xt)) + ((GetUnitY(Picked) - yt) * (GetUnitY(Picked) - yt)));
					MoveUnit(Picked, .5, (600. - (dist * 1.5)) / 2, 100., angle, .0, true);
				}
				GroupRemoveUnit(g, Picked);
			}
			stone[CreateUnit(p, 'h00E', xt, yt, angle)] = CreateUnit(p, 'h00E', xt, yt, angle);
			ef[AddSpecialEffectTarget("Effects\\RockV4.mdl", stone, "chest")] = AddSpecialEffectTarget("Effects\\RockV4.mdl", stone, "chest");
			SaveUnitHandle(udg_hash, h, $D, stone);
			SaveEffectHandle(udg_hash, h, $E, ef);
			SetUnitScale(stone, 2.2, 2.2, 2.2);
			SetUnitFlyHeight(stone, 50., .0);
			MoveUnit(stone, 1.32, 800., .0, angle, .0, true);
			p[null] = null;
			GroupClear(g);
			DestroyGroup(g);
			g[null] = null;
			RemoveRect(r);
			r[null] = null;
			stone[null] = null;
			ef[null] = null;
		}
	}
	if (wait2 > 0 && wait <= 0) {
		wait2[wait2 - 1] = wait2 - 1;
		SaveInteger(udg_hash, h, 4, wait2);
		anim[LoadInteger(udg_hash, h, 6)] = LoadInteger(udg_hash, h, 6);
		anim[anim + $F] = anim + $F;
		if (anim >= $AA) {
			anim[0] = 0;
		}
		stone[LoadUnitHandle(udg_hash, h, $D)] = LoadUnitHandle(udg_hash, h, $D);
		SetUnitAnimationByIndex(stone, anim);
		SaveInteger(udg_hash, h, 6, anim);
		damage2[LoadReal(udg_hash, h, $A)] = LoadReal(udg_hash, h, $A);
		angle[LoadReal(udg_hash, h, 5)] = LoadReal(udg_hash, h, 5);
		stuntime[LoadReal(udg_hash, h, $F)] = LoadReal(udg_hash, h, $F);
		p[GetOwningPlayer(caster)] = GetOwningPlayer(caster);
		g[CreateGroup()] = CreateGroup();
		x[GetUnitX(stone)] = GetUnitX(stone);
		y[GetUnitY(stone)] = GetUnitY(stone);
		GroupEnumUnitsInRange(g, x, y, 175., null);
		DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", x, y));
		r[Rect(x - 175., y - 175., x + 175., y + 175.)] = Rect(x - 175., y - 175., x + 175., y + 175.);
		EnumDestructablesInRect(r, null, Trig_Rock_Strike_Move_Dest_Actions);
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && IsUnitInGroup(Picked, gdamage) == false && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", Picked, "chest"));
				UnitDamageTarget(caster, Picked, damage2, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				StunUnitTimed(Picked, stuntime);
				angle2[bj_RADTODEG * Atan2(GetUnitY(Picked) - y, GetUnitX(Picked) - x)] = bj_RADTODEG * Atan2(GetUnitY(Picked) - y, GetUnitX(Picked) - x);
				dist[SquareRoot(((GetUnitX(Picked) - x) * (GetUnitX(Picked) - x)) + ((GetUnitY(Picked) - y) * (GetUnitY(Picked) - y)))] = SquareRoot(((GetUnitX(Picked) - x) * (GetUnitX(Picked) - x)) + ((GetUnitY(Picked) - y) * (GetUnitY(Picked) - y)));
				angle3[(Atan2(y - GetUnitY(Picked), x - GetUnitX(Picked)) * bj_RADTODEG) + 360.] = (Atan2(y - GetUnitY(Picked), x - GetUnitX(Picked)) * bj_RADTODEG) + 360.;
				if ((angle3 <= (angle + 210.) && angle3 >= (angle + 180.))) {
					angle2[angle2 + 45.] = angle2 + 45.;
				}
				if ((angle3 <= (angle + 180.) && angle3 >= (angle + 150.))) {
					angle2[angle2 - 45.] = angle2 - 45.;
				}
				MoveUnit(Picked, .5, (700. - dist), 100., angle2, .0, true);
				GroupAddUnit(gdamage, Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
		p[null] = null;
		GroupClear(g);
		DestroyGroup(g);
		g[null] = null;
		RemoveRect(r);
		r[null] = null;
		stone[null] = null;
		SaveGroupHandle(udg_hash, h, 2, gdamage);
		if (wait2 <= 0) {
			stone[LoadUnitHandle(udg_hash, h, $D)] = LoadUnitHandle(udg_hash, h, $D);
			ef[LoadEffectHandle(udg_hash, h, $E)] = LoadEffectHandle(udg_hash, h, $E);
			DestroyEffect(ef);
			DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", x, y));
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Volcano\\VolcanoDeath.mdl", x, y));
			ef[null] = null;
			RemoveUnit(stone);
			FlushChildHashtable(udg_hash, h);
			DestroyTimer(t);
			stone[null] = null;
		}
		p[null] = null;
		GroupClear(g);
		DestroyGroup(g);
		g[null] = null;
		RemoveRect(r);
		r[null] = null;
	}
	t[null] = null;
	caster[null] = null;
	gdamage[null] = null;
}
void Trig_Rock_Strike_Actions() {
	unit caster = GetSpellAbilityUnit();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	location loc;
	float xt;
	float yt;
	unit target = GetSpellTargetUnit();
	float angle;
	float dist;
	int lvl = GetUnitAbilityLevel(caster, 'A0MM');
	float damage = (5. + 135. * lvl);
	float damage2 = (15. + 115. * lvl);
	float stuntime = .75 + (.25 * lvl);
	int wait = 6;
	int wait2 = 44;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	group gdamage = CreateGroup();
	if (target != null) {
		xt[GetUnitX(target)] = GetUnitX(target);
		yt[GetUnitY(target)] = GetUnitY(target);
	else
		loc[GetSpellTargetLoc()] = GetSpellTargetLoc();
		xt[GetLocationX(loc)] = GetLocationX(loc);
		yt[GetLocationY(loc)] = GetLocationY(loc);
		RemoveLocation(loc);
		loc[null] = null;
	}
	angle[bj_RADTODEG * Atan2((yt - y), (xt - x))] = bj_RADTODEG * Atan2((yt - y), (xt - x));
	xt[x + 100. * Cos(angle * bj_DEGTORAD)] = x + 100. * Cos(angle * bj_DEGTORAD);
	yt[y + 100. * Sin(angle * bj_DEGTORAD)] = y + 100. * Sin(angle * bj_DEGTORAD);
	SetUnitTimeScale(caster, 2.);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveGroupHandle(udg_hash, h, 2, gdamage);
	SaveInteger(udg_hash, h, 3, wait);
	SaveInteger(udg_hash, h, 4, wait2);
	SaveReal(udg_hash, h, 5, angle);
	SaveInteger(udg_hash, h, 6, 0);
	SaveInteger(udg_hash, h, 8, 1);
	SaveReal(udg_hash, h, 9, damage);
	SaveReal(udg_hash, h, $A, damage2);
	SaveReal(udg_hash, h, $B, xt);
	SaveReal(udg_hash, h, $C, yt);
	SaveReal(udg_hash, h, $F, stuntime);
	TimerStart(t, .03, true, Trig_Rock_Strike_Move_Actions);
	caster[null] = null;
	t[null] = null;
	target[null] = null;
	gdamage[null] = null;
}
bool Trig_Rock_Strike_Conditions() {
	return GetSpellAbilityId() == 'A0MM';
}
void InitTrig_Rock_Strike() {
	int index = 0;
	gg_trg_Rock_Strike[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Rock_Strike, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Rock_Strike, Condition(Trig_Rock_Strike_Conditions));
	TriggerAddAction(gg_trg_Rock_Strike, Trig_Rock_Strike_Actions);
}
void Trig_Archdruid_Load_Actions() {
	AbilityPreload('A0MN', 6);
	AbilityPreload('A0MP', 6);
	AbilityPreload('A0MQ', 6);
	AbilityPreload('A0MS', 3);
	AbilityPreload('A0MT', 3);
	AbilityPreload('A0MO', 1);
	AbilityPreload('A0MR', 6);
	AbilityPreload('B04M', 1);
	AbilityPreload('B04K', 1);
	AbilityPreload('B04L', 1);
	UnitPreload('e006');
	EffectPreload("Abilities\\Spells\\NightElf\\EntanglingRoots\\EntanglingRootsTarget.mdl");
	EffectPreload("Effects\\Earth_Attach.mdx");
	EffectPreload("Abilities\\Spells\\Other\\Drain\\DrainTarget.mdl");
	EffectPreload("Effects\\Power_Orb.mdl");
	EffectPreload("Effects\\Healing Touch.mdl");
	EffectPreload("Effects\\SoulshotC-gradeTarget.mdl");
	EffectPreload("Effects\\naturebeam.mdl");
	EffectPreload("Effects\\AncientExplode.mdx");
	EffectPreload("Effects\\NatureBlessing.mdl");
	EffectPreload("Effects\\LifeWave.mdl");
	EffectPreload("Abilities\\Weapons\\GreenDragonMissile\\GreenDragonMissile.mdl");
	EffectPreload("Effects\\PlasmaMissileGreen.mdl");
	EffectPreload("Effects\\GreenHeal.mdl");
	EffectPreload("Abilities\\Spells\\NightElf\\Tranquility\\Tranquility.mdl");
	EffectPreload("Effects\\EarthNova.mdl");
	EnableTrigger(gg_trg_Energy_of_Nature);
	EnableTrigger(gg_trg_Life_Chain);
	EnableTrigger(gg_trg_Ent_Creation);
	EnableTrigger(gg_trg_Nature_Wrath);
}
void InitTrig_Archdruid_Load() {
	gg_trg_Archdruid_Load[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Archdruid_Load, Trig_Archdruid_Load_Actions);
}
void Trig_Energy_of_Nature_Move_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	float damage;
	float heal;
	int wait = LoadInteger(udg_hash, h, 4);
	unit orb = LoadUnitHandle(udg_hash, h, 6);
	effect ef;
	float xt;
	float yt;
	player p;
	group g;
	unit Picked;
	unit dammi;
	if (wait > 0) {
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 4, wait);
	else
		damage[LoadReal(udg_hash, h, 2)] = LoadReal(udg_hash, h, 2);
		heal[LoadReal(udg_hash, h, 3)] = LoadReal(udg_hash, h, 3);
		xt[LoadReal(udg_hash, h, $B)] = LoadReal(udg_hash, h, $B);
		yt[LoadReal(udg_hash, h, $C)] = LoadReal(udg_hash, h, $C);
		p[GetOwningPlayer(caster)] = GetOwningPlayer(caster);
		g[CreateGroup()] = CreateGroup();
		GroupEnumUnitsInRange(g, xt, yt, 270., null);
		DestroyEffect(AddSpecialEffect("Effects\\AncientExplode.mdx", xt, yt));
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				DestroyEffect(AddSpecialEffectTarget("Effects\\SoulshotC-gradeTarget.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Effects\\naturebeam.mdl", Picked, "chest"));
				dammi[CreateUnit(p, 'h00U', xt, yt, .0)] = CreateUnit(p, 'h00U', xt, yt, .0);
				UnitApplyTimedLife(dammi, 'BTLF', 1.);
				UnitAddAbility(dammi, 'A0MO');
				IssueTargetOrderById(dammi, $D00CB, Picked);
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				dammi[null] = null;
			}
			if (IsUnitAlly(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				DestroyEffect(AddSpecialEffectTarget("Effects\\Healing Touch.mdl", Picked, "origin"));
				SetUnitState(Picked, UNIT_STATE_LIFE, GetUnitState(Picked, UNIT_STATE_LIFE) + heal);
			}
			GroupRemoveUnit(g, Picked);
		}
		SetUnitScale(orb, .1, .1, .1);
		KillUnit(orb);
		ShowUnit(orb, false);
		ef[LoadEffectHandle(udg_hash, h, 7)] = LoadEffectHandle(udg_hash, h, 7);
		DestroyEffect(ef);
		ef[null] = null;
		p[null] = null;
		GroupClear(g);
		DestroyGroup(g);
		g[null] = null;
		DestroyTimer(t);
		Picked[null] = null;
		FlushChildHashtable(udg_hash, h);
	}
	t[null] = null;
	caster[null] = null;
	orb[null] = null;
}
void Trig_Energy_of_Nature_Actions() {
	unit caster = GetSpellAbilityUnit();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	location loc = GetSpellTargetLoc();
	float xt = GetLocationX(loc);
	float yt = GetLocationY(loc);
	float angle = bj_RADTODEG * Atan2((yt - y), (xt - x));
	float dist = SquareRoot(((xt - x) * (xt - x)) + ((yt - y) * (yt - y)));
	int lvl = GetUnitAbilityLevel(caster, 'A0MN');
	float damage = ($A + 25 * lvl) + (GetHeroInt(caster, true) * (.2 + .3 * lvl));
	float heal = (75. + 50 * lvl);
	float time = dist / 600.;
	float height = dist / 4 + 75.;
	unit orb = CreateUnit(GetOwningPlayer(caster), 'h00E', x, y, angle);
	effect ef = AddSpecialEffectTarget("Effects\\Power_Orb.mdl", orb, "origin");
	timer t = CreateTimer();
	int h = GetHandleId(t);
	if (dist < 50.) {
		dist[50.] = 50.;
		time[.07] = .07;
		angle[GetUnitFacing(caster)] = GetUnitFacing(caster);
		height[dist / 4 + 100.] = dist / 4 + 100.;
	}
	SetUnitX(orb, x + 50. * Cos((angle) * bj_DEGTORAD));
	SetUnitY(orb, y + 50. * Sin((angle) * bj_DEGTORAD));
	SetUnitTimeScale(orb, 1.5);
	SetUnitFlyHeight(orb, 100., .0);
	MoveUnit(orb, time, 600., .0, angle, height, true);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 2, damage);
	SaveReal(udg_hash, h, 3, heal);
	SaveInteger(udg_hash, h, 4, R2I(time / .03));
	SaveUnitHandle(udg_hash, h, 6, orb);
	SaveEffectHandle(udg_hash, h, 7, ef);
	SaveReal(udg_hash, h, $B, xt);
	SaveReal(udg_hash, h, $C, yt);
	TimerStart(t, .03, true, Trig_Energy_of_Nature_Move_Actions);
	caster[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	t[null] = null;
	orb[null] = null;
	ef[null] = null;
}
bool Trig_Energy_of_Nature_Conditions() {
	return GetSpellAbilityId() == 'A0MN';
}
void InitTrig_Energy_of_Nature() {
	int index = 0;
	gg_trg_Energy_of_Nature[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Energy_of_Nature, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Energy_of_Nature, Condition(Trig_Energy_of_Nature_Conditions));
	TriggerAddAction(gg_trg_Energy_of_Nature, Trig_Energy_of_Nature_Actions);
}
void Trig_Life_Chain_Remove_Effect_Actions() {
	timer tef = GetExpiredTimer();
	int hef = GetHandleId(tef);
	effect ef = LoadEffectHandle(udg_hash, hef, 1);
	unit target = LoadUnitHandle(udg_hash, hef, 2);
	int regen = LoadInteger(udg_hash, hef, 3);
	SetUnitLifeAndManaRegeneration(target, "life", -regen);
	FlushChildHashtable(udg_hash, hef);
	DestroyEffect(ef);
	tef[null] = null;
	ef[null] = null;
	target[null] = null;
}
void Trig_Life_Chain_Move_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	unit target = LoadUnitHandle(udg_hash, h, 8);
	int wait2 = LoadInteger(udg_hash, h, 4);
	int count = LoadInteger(udg_hash, h, 5);
	unit orb = LoadUnitHandle(udg_hash, h, 6);
	unit target2;
	float damage;
	float heal;
	group gdamage;
	float height;
	effect ef;
	float x = GetUnitX(orb);
	float y = GetUnitY(orb);
	float xt = GetUnitX(target);
	float yt = GetUnitY(target);
	float xorb;
	float yorb;
	float angle = bj_RADTODEG * Atan2((yt - y), (xt - x));
	float dist = SquareRoot(((xt - x) * (xt - x)) + ((yt - y) * (yt - y)));
	player p;
	group g;
	group grup;
	unit Picked;
	timer tef;
	int hef;
	int regen;
	bool remove = false;
	bool reselect = false;
	unit orb2;
	effect ef2;
	if (GetUnitState(target, UNIT_STATE_LIFE) > .405) {
		wait2[wait2 - 1] = wait2 - 1;
		SaveInteger(udg_hash, h, 4, wait2);
		xorb[x + 30.3 * Cos(angle * bj_DEGTORAD)] = x + 30.3 * Cos(angle * bj_DEGTORAD);
		yorb[y + 30.3 * Sin(angle * bj_DEGTORAD)] = y + 30.3 * Sin(angle * bj_DEGTORAD);
		SetUnitPosition(orb, xorb, yorb);
		dist[SquareRoot((xt - xorb) * (xt - xorb) + (yt - yorb) * (yt - yorb))] = SquareRoot((xt - xorb) * (xt - xorb) + (yt - yorb) * (yt - yorb));
		SetUnitFacing(orb, angle);
		if (dist < 21.) {
			SetUnitPosition(orb, xt, yt);
			p[GetOwningPlayer(caster)] = GetOwningPlayer(caster);
			gdamage[LoadGroupHandle(udg_hash, h, $E)] = LoadGroupHandle(udg_hash, h, $E);
			if (IsUnitEnemy(target, p) && IsUnitInGroup(target, gdamage) == false && GetUnitState(target, UNIT_STATE_LIFE) > .0 && IsUnitType(target, UNIT_TYPE_STRUCTURE) == false && IsUnitType(target, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(target) != 'h00U') {
				damage[LoadReal(udg_hash, h, 2)] = LoadReal(udg_hash, h, 2);
				DestroyEffect(AddSpecialEffectTarget("Effects\\SoulshotC-gradeTarget.mdl", target, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Effects\\naturebeam.mdl", target, "chest"));
				UnitDamageTarget(caster, target, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				GroupAddUnit(gdamage, target);
				if (GetUnitState(target, UNIT_STATE_LIFE) < .5) {
					count[count + 1] = count + 1;
					SaveInteger(udg_hash, h, 5, count);
				}
			}
			if (IsUnitAlly(target, p) && IsUnitInGroup(target, gdamage) == false && GetUnitState(target, UNIT_STATE_LIFE) > .0 && IsUnitType(target, UNIT_TYPE_STRUCTURE) == false && IsUnitType(target, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(target) != 'h00U') {
				heal[LoadReal(udg_hash, h, 3)] = LoadReal(udg_hash, h, 3);
				regen[LoadInteger(udg_hash, h, $D)] = LoadInteger(udg_hash, h, $D);
				DestroyEffect(AddSpecialEffectTarget("Effects\\Healing Touch.mdl", target, "origin"));
				SetUnitState(target, UNIT_STATE_LIFE, GetUnitState(target, UNIT_STATE_LIFE) + heal);
				ef[AddSpecialEffectTarget("Effects\\NatureBlessing.mdl", target, "chest")] = AddSpecialEffectTarget("Effects\\NatureBlessing.mdl", target, "chest");
				tef[CreateTimer()] = CreateTimer();
				hef[GetHandleId(tef)] = GetHandleId(tef);
				SaveEffectHandle(udg_hash, hef, 1, ef);
				SaveUnitHandle(udg_hash, hef, 2, target);
				SaveInteger(udg_hash, hef, 3, regen);
				SetUnitLifeAndManaRegeneration(target, "life", regen);
				TimerStart(tef, 8., false, Trig_Life_Chain_Remove_Effect_Actions);
				tef[null] = null;
				ef[null] = null;
				GroupAddUnit(gdamage, target);
			}
			SaveGroupHandle(udg_hash, h, $E, gdamage);
			count[count - 1] = count - 1;
			SaveInteger(udg_hash, h, 5, count);
			reselect[true] = true;
			p[null] = null;
			gdamage[null] = null;
		}
	}
	if ((count > 0 && GetUnitState(target, UNIT_STATE_LIFE) < .405) || reselect) {
		g[CreateGroup()] = CreateGroup();
		grup[CreateGroup()] = CreateGroup();
		GroupEnumUnitsInRange(g, xt, yt, 600., null);
		gdamage[LoadGroupHandle(udg_hash, h, $E)] = LoadGroupHandle(udg_hash, h, $E);
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (IsUnitInGroup(Picked, gdamage) == false && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				GroupAddUnit(grup, Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
		RandomUnitFromGroup(1, grup);
		GroupAddGroup(udg_GroupRandomUnitFromGroup, g);
		target2[FirstOfGroup(udg_GroupRandomUnitFromGroup)] = FirstOfGroup(udg_GroupRandomUnitFromGroup);
		if (target2 != null) {
			x[GetUnitX(orb)] = GetUnitX(orb);
			y[GetUnitY(orb)] = GetUnitY(orb);
			xt[GetUnitX(target2)] = GetUnitX(target2);
			yt[GetUnitY(target2)] = GetUnitY(target2);
			dist[SquareRoot(((xt - x) * (xt - x)) + ((yt - y) * (yt - y)))] = SquareRoot(((xt - x) * (xt - x)) + ((yt - y) * (yt - y)));
			angle[bj_RADTODEG * Atan2((yt - y), (xt - x))] = bj_RADTODEG * Atan2((yt - y), (xt - x));
			p[GetOwningPlayer(caster)] = GetOwningPlayer(caster);
			KillUnit(orb);
			ef[LoadEffectHandle(udg_hash, h, 7)] = LoadEffectHandle(udg_hash, h, 7);
			DestroyEffect(ef);
			ef[null] = null;
			orb2[CreateUnit(p, 'h00E', x, y, angle)] = CreateUnit(p, 'h00E', x, y, angle);
			ef2[AddSpecialEffectTarget("Effects\\LifeWave.mdl", orb2, "origin")] = AddSpecialEffectTarget("Effects\\LifeWave.mdl", orb2, "origin");
			SetUnitFlyHeight(orb2, 60., .0);
			SaveUnitHandle(udg_hash, h, 6, orb2);
			SaveEffectHandle(udg_hash, h, 7, ef2);
			SaveInteger(udg_hash, h, 4, R2I((dist / (1000. * 2))));
			SaveUnitHandle(udg_hash, h, 8, target2);
			SaveReal(udg_hash, h, 9, (dist / 3));
			SaveInteger(udg_hash, h, $A, R2I((dist / 2000.)));
			p[null] = null;
			orb2[null] = null;
			ef2[null] = null;
		else
			remove[true] = true;
		}
		target2[null] = null;
		GroupClear(g);
		DestroyGroup(g);
		g[null] = null;
		GroupClear(grup);
		DestroyGroup(grup);
		grup[null] = null;
		gdamage[null] = null;
	}
	if (count <= 0) {
		remove[true] = true;
	}
	if (remove) {
		KillUnit(orb);
		ef[LoadEffectHandle(udg_hash, h, 7)] = LoadEffectHandle(udg_hash, h, 7);
		DestroyEffect(ef);
		ef[null] = null;
		GroupClear(g);
		DestroyGroup(g);
		g[null] = null;
		DestroyTimer(t);
		Picked[null] = null;
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	caster[null] = null;
	orb[null] = null;
	target[null] = null;
}
void Trig_Life_Chain_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	unit target = GetSpellTargetUnit();
	float xt = GetUnitX(target);
	float yt = GetUnitY(target);
	float angle = bj_RADTODEG * Atan2((yt - y), (xt - x));
	float dist = SquareRoot(((xt - x) * (xt - x)) + ((yt - y) * (yt - y)));
	int lvl = GetUnitAbilityLevel(caster, 'A0MP');
	float damage = ($F + $F * lvl) + (GetHeroInt(caster, true) * (.1 + .1 * lvl));
	float heal = (30 + 30 * lvl) + (GetHeroInt(caster, true) * (.2 + .2 * lvl));
	int regen = (2 + 3 * lvl);
	float speed = 1000.;
	float time = dist / speed;
	float height = dist / 3;
	int count = 3 + (lvl * 3);
	int wait2 = R2I((time / 2));
	unit orb = CreateUnit(p, 'h00E', x, y, angle);
	effect ef = AddSpecialEffectTarget("Effects\\LifeWave.mdl", orb, "origin");
	timer t = CreateTimer();
	int h = GetHandleId(t);
	group gdamage = CreateGroup();
	SetUnitX(orb, x + 30. * Cos((angle) * bj_DEGTORAD));
	SetUnitY(orb, y + 30. * Sin((angle) * bj_DEGTORAD));
	SetUnitFlyHeight(orb, 60., .0);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 2, damage);
	SaveReal(udg_hash, h, 3, heal);
	SaveInteger(udg_hash, h, 4, wait2);
	SaveInteger(udg_hash, h, 5, count);
	SaveUnitHandle(udg_hash, h, 6, orb);
	SaveEffectHandle(udg_hash, h, 7, ef);
	SaveUnitHandle(udg_hash, h, 8, target);
	SaveReal(udg_hash, h, 9, height);
	SaveInteger(udg_hash, h, $D, regen);
	SaveGroupHandle(udg_hash, h, $E, gdamage);
	TimerStart(t, .03, true, Trig_Life_Chain_Move_Actions);
	caster[null] = null;
	t[null] = null;
	orb[null] = null;
	ef[null] = null;
	p[null] = null;
	target[null] = null;
	gdamage[null] = null;
}
bool Trig_Life_Chain_Conditions() {
	return GetSpellAbilityId() == 'A0MP';
}
void InitTrig_Life_Chain() {
	int index = 0;
	gg_trg_Life_Chain[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Life_Chain, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Life_Chain, Condition(Trig_Life_Chain_Conditions));
	TriggerAddAction(gg_trg_Life_Chain, Trig_Life_Chain_Actions);
}
void Trig_Ent_Creation_Move_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	unit target = LoadUnitHandle(udg_hash, h, 8);
	unit orb = LoadUnitHandle(udg_hash, h, 6);
	effect ef;
	float x = GetUnitX(orb);
	float y = GetUnitY(orb);
	float xt = GetUnitX(target);
	float yt = GetUnitY(target);
	float xorb;
	float yorb;
	float angle = bj_RADTODEG * Atan2((yt - y), (xt - x));
	float dist = SquareRoot(((xt - x) * (xt - x)) + ((yt - y) * (yt - y)));
	player p;
	int hp;
	int damage;
	float lifetime;
	int lvl;
	unit dammi;
	xorb[x + 27.2 * Cos(angle * bj_DEGTORAD)] = x + 27.2 * Cos(angle * bj_DEGTORAD);
	yorb[y + 27.2 * Sin(angle * bj_DEGTORAD)] = y + 27.2 * Sin(angle * bj_DEGTORAD);
	SetUnitPosition(orb, xorb, yorb);
	dist[SquareRoot((xt - xorb) * (xt - xorb) + (yt - yorb) * (yt - yorb))] = SquareRoot((xt - xorb) * (xt - xorb) + (yt - yorb) * (yt - yorb));
	SetUnitFacing(orb, angle);
	if (dist < 20.) {
		SetUnitPosition(orb, xt, yt);
		p[GetOwningPlayer(caster)] = GetOwningPlayer(caster);
		hp[LoadInteger(udg_hash, h, 2)] = LoadInteger(udg_hash, h, 2);
		damage[LoadInteger(udg_hash, h, 3)] = LoadInteger(udg_hash, h, 3);
		lifetime[LoadReal(udg_hash, h, 4)] = LoadReal(udg_hash, h, 4);
		lvl[LoadInteger(udg_hash, h, 5)] = LoadInteger(udg_hash, h, 5);
		if (GetUnitState(target, UNIT_STATE_LIFE) > .0 && IsUnitType(target, UNIT_TYPE_STRUCTURE) == false && IsUnitType(target, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(target) != 'h00U') {
			DestroyEffect(AddSpecialEffectTarget("Effects\\SoulshotC-gradeTarget.mdl", target, "chest"));
			DestroyEffect(AddSpecialEffectTarget("Effects\\PlasmaMissileGreen.mdl", target, "chest"));
			dammi[CreateUnit(p, 'h00U', xt, yt, .0)] = CreateUnit(p, 'h00U', xt, yt, .0);
			UnitApplyTimedLife(dammi, 'BTLF', 1.);
			UnitAddAbility(dammi, 'A0MR');
			SetUnitAbilityLevel(dammi, 'A0MR', lvl);
			IssueTargetOrderById(dammi, $D006B, target);
			dammi[null] = null;
		}
		dammi[CreateUnit(p, 'e006', (xt - 60. * Cos((angle) * bj_DEGTORAD)), (yt - 60. * Sin((angle) * bj_DEGTORAD)), angle)] = CreateUnit(p, 'e006', (xt - 60. * Cos((angle) * bj_DEGTORAD)), (yt - 60. * Sin((angle) * bj_DEGTORAD)), angle);
		UnitApplyTimedLife(dammi, 'BTLF', lifetime);
		SetUnitColor(dammi, PLAYER_COLOR_GREEN);
		SetUnitScale(dammi, (.75 + .05 * lvl), (.75 + .05 * lvl), (.75 + .05 * lvl));
		SetUnitMaxState(dammi, UNIT_STATE_MAX_LIFE, hp);
		SetAttackAbilityLevel(dammi, damage);
		dammi[null] = null;
		p[null] = null;
		KillUnit(orb);
		ef[LoadEffectHandle(udg_hash, h, 7)] = LoadEffectHandle(udg_hash, h, 7);
		DestroyEffect(ef);
		ef[null] = null;
		DestroyTimer(t);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	caster[null] = null;
	orb[null] = null;
	target[null] = null;
}
void Trig_Ent_Creation_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	unit target = GetSpellTargetUnit();
	float xt = GetUnitX(target);
	float yt = GetUnitY(target);
	float angle = bj_RADTODEG * Atan2((yt - y), (xt - x));
	int lvl = GetUnitAbilityLevel(caster, 'A0MQ');
	int hp = (-75 + (75 * lvl)) + R2I(GetHeroInt(caster, true) * 2);
	int damage = (-8 + (8 * lvl)) + R2I(GetHeroInt(caster, true) * .3);
	float lifetime = (12. + (3. * lvl)) + (GetUnitState(caster, UNIT_STATE_MAX_MANA) / 'd');
	unit orb = CreateUnit(p, 'h00E', x, y, angle);
	effect ef = AddSpecialEffectTarget("Abilities\\Weapons\\GreenDragonMissile\\GreenDragonMissile.mdl", orb, "origin");
	timer t = CreateTimer();
	int h = GetHandleId(t);
	SetUnitX(orb, x + 30. * Cos((angle) * bj_DEGTORAD));
	SetUnitY(orb, y + 30. * Sin((angle) * bj_DEGTORAD));
	SetUnitFlyHeight(orb, 60., .0);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveInteger(udg_hash, h, 2, hp);
	SaveInteger(udg_hash, h, 3, damage);
	SaveReal(udg_hash, h, 4, lifetime);
	SaveInteger(udg_hash, h, 5, lvl);
	SaveUnitHandle(udg_hash, h, 6, orb);
	SaveEffectHandle(udg_hash, h, 7, ef);
	SaveUnitHandle(udg_hash, h, 8, target);
	TimerStart(t, .03, true, Trig_Ent_Creation_Move_Actions);
	caster[null] = null;
	t[null] = null;
	orb[null] = null;
	ef[null] = null;
	p[null] = null;
	target[null] = null;
}
bool Trig_Ent_Creation_Conditions() {
	return GetSpellAbilityId() == 'A0MQ';
}
void InitTrig_Ent_Creation() {
	int index = 0;
	gg_trg_Ent_Creation[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Ent_Creation, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Ent_Creation, Condition(Trig_Ent_Creation_Conditions));
	TriggerAddAction(gg_trg_Ent_Creation, Trig_Ent_Creation_Actions);
}
void Trig_Nature_Wrath_Periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	group gheal = LoadGroupHandle(udg_hash, h, 2);
	float damage = LoadReal(udg_hash, h, 3);
	int addas = LoadInteger(udg_hash, h, 4);
	int addarmor = LoadInteger(udg_hash, h, 5);
	int addregen = LoadInteger(udg_hash, h, 6);
	int addms = LoadInteger(udg_hash, h, 7);
	int wait = LoadInteger(udg_hash, h, 9);
	int wait2 = LoadInteger(udg_hash, h, $A);
	player p = GetOwningPlayer(caster);
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	group g = CreateGroup();
	group g2 = CreateGroup();
	group g3 = CreateGroup();
	unit Picked;
	unit dammi;
	effect ef;
	unit dammief;
	effect dammieffect;
	int lopa = 0;
	int lopb = 0;
	int count;
	float angleef;
	float dist;
	int dammicounter = $F;
	int order = GetUnitCurrentOrder(caster);
	int orderId;
	orderId[$D021D] = $D021D;
	if ((orderId != 0)) {
	else
		orderId[UnitId("decouple")] = UnitId("decouple");
		if ((orderId != 0)) {
		}
	}
	if (wait > 0 && order == orderId) {
		wait[wait - 1] = wait - 1;
		wait2[wait2 + 1] = wait2 + 1;
		if (wait2 == 26) {
			wait2[0] = 0;
			GroupEnumUnitsInRange(g, x, y, 700., null);
			DestroyEffect(AddSpecialEffect("Effects\\EarthNova.mdl", x, y));
			while (true) {
				Picked[FirstOfGroup(g)] = FirstOfGroup(g);
				if (Picked == null) break;
				if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
					DestroyEffect(AddSpecialEffectTarget("Effects\\SoulshotC-gradeTarget.mdl", Picked, "chest"));
					DestroyEffect(AddSpecialEffectTarget("Effects\\naturebeam.mdl", Picked, "chest"));
					dammi[CreateUnit(p, 'h00U', x, y, .0)] = CreateUnit(p, 'h00U', x, y, .0);
					UnitApplyTimedLife(dammi, 'BTLF', 1.);
					UnitAddAbility(dammi, 'A0MO');
					IssueTargetOrderById(dammi, $D00CB, Picked);
					UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
					dammi[null] = null;
				}
				GroupRemoveUnit(g, Picked);
			}
			Picked[null] = null;
			GroupClear(g);
			DestroyGroup(g);
			g[null] = null;
			g[CreateGroup()] = CreateGroup();
		}
		while (true) {
			if (lopa >= 4) break;
			count[16 - (lopa * 4)] = 16 - (lopa * 4);
			angleef[(360. / count)] = (360. / count);
			dist[(700. - 150. * lopa)] = (700. - 150. * lopa);
			lopb[0] = 0;
			while (true) {
				if (lopb > count) break;
				dammief[LoadUnitHandle(udg_hash, h, dammicounter)] = LoadUnitHandle(udg_hash, h, dammicounter);
				SetUnitPosition(dammief, x + dist * Cos(angleef * lopb * bj_DEGTORAD), y + dist * Sin(angleef * lopb * bj_DEGTORAD));
				SetUnitFacing(dammief, angleef + 90.);
				dammicounter[dammicounter + 1] = dammicounter + 1;
				dammief[null] = null;
				lopb[lopb + 1] = lopb + 1;
			}
			lopa[lopa + 1] = lopa + 1;
		}
		SaveInteger(udg_hash, h, 9, wait);
		SaveInteger(udg_hash, h, $A, wait2);
		GroupEnumUnitsInRange(g, x, y, 700., null);
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if ((IsUnitAlly(Picked, p) || GetOwningPlayer(Picked) == Player($D)) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				GroupAddUnit(g2, Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
		Picked[null] = null;
		GroupClear(g);
		DestroyGroup(g);
		g[null] = null;
		GroupAddGroup(gheal, g3);
		while (true) {
			Picked[FirstOfGroup(g3)] = FirstOfGroup(g3);
			if (Picked == null) break;
			if (IsUnitInGroup(Picked, g2) == false) {
				GroupRemoveUnit(gheal, Picked);
				SetUnitLifeAndManaRegeneration(Picked, "life", -addregen);
				SetArmorAbilityLevel(Picked, -addarmor);
				SetAttackSpeedAbilityLevel(Picked, -addas);
			else
				if ((wait2 / 5) * 5 == wait2) {
					dammi[CreateUnit(p, 'h00U', x, y, .0)] = CreateUnit(p, 'h00U', x, y, .0);
					UnitApplyTimedLife(dammi, 'BTLF', 1.);
					UnitAddAbility(dammi, 'A0MT');
					SetUnitAbilityLevel(dammi, 'A0MT', addms);
					IssueTargetOrderById(dammi, $D0085, Picked);
					dammi[null] = null;
				}
			}
			GroupRemoveUnit(g3, Picked);
		}
		Picked[null] = null;
		GroupClear(g3);
		DestroyGroup(g3);
		g3[null] = null;
		while (true) {
			Picked[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if (Picked == null) break;
			if (IsUnitInGroup(Picked, gheal) == false) {
				DestroyEffect(AddSpecialEffectTarget("Effects\\Healing Touch.mdl", Picked, "origin"));
				SetUnitLifeAndManaRegeneration(Picked, "life", addregen);
				SetArmorAbilityLevel(Picked, addarmor);
				SetAttackSpeedAbilityLevel(Picked, addas);
				GroupAddUnit(gheal, Picked);
			}
			if (GetUnitAbilityLevel(Picked, 'B04M') <= 0) {
				dammi[CreateUnit(p, 'h00U', x, y, .0)] = CreateUnit(p, 'h00U', x, y, .0);
				UnitApplyTimedLife(dammi, 'BTLF', 1.);
				UnitAddAbility(dammi, 'A0MT');
				SetUnitAbilityLevel(dammi, 'A0MT', addms);
				IssueTargetOrderById(dammi, $D0085, Picked);
				dammi[null] = null;
			}
			GroupRemoveUnit(g2, Picked);
		}
		Picked[null] = null;
		GroupClear(g2);
		DestroyGroup(g2);
		g2[null] = null;
		SaveGroupHandle(udg_hash, h, 2, gheal);
	else
		ef[LoadEffectHandle(udg_hash, h, $B)] = LoadEffectHandle(udg_hash, h, $B);
		DestroyEffect(ef);
		ef[null] = null;
		while (true) {
			Picked[FirstOfGroup(gheal)] = FirstOfGroup(gheal);
			if (Picked == null) break;
			SetUnitLifeAndManaRegeneration(Picked, "life", -addregen);
			SetArmorAbilityLevel(Picked, -addarmor);
			SetAttackSpeedAbilityLevel(Picked, -addas);
			GroupRemoveUnit(gheal, Picked);
		}
		GroupClear(gheal);
		DestroyGroup(gheal);
		gheal[null] = null;
		Picked[null] = null;
		lopa[0] = 0;
		lopb[0] = 0;
		dammicounter[$F] = $F;
		while (true) {
			if (lopa > 4) break;
			count[16 - (lopa * 4)] = 16 - (lopa * 4);
			lopb[0] = 0;
			while (true) {
				if (lopb > count) break;
				dammief[LoadUnitHandle(udg_hash, h, dammicounter)] = LoadUnitHandle(udg_hash, h, dammicounter);
				dammieffect[LoadEffectHandle(udg_hash, h, dammicounter + 75)] = LoadEffectHandle(udg_hash, h, dammicounter + 75);
				KillUnit(dammief);
				DestroyEffect(dammieffect);
				dammicounter[dammicounter + 1] = dammicounter + 1;
				dammief[null] = null;
				dammieffect[null] = null;
				lopb[lopb + 1] = lopb + 1;
			}
			lopa[lopa + 1] = lopa + 1;
		}
		SetUnitTimeScale(caster, 1.);
		RemoveUnit(LoadUnitHandle(udg_hash, GetHandleId(caster), 'u'));
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	caster[null] = null;
	p[null] = null;
	gheal[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	GroupClear(g2);
	DestroyGroup(g2);
	g2[null] = null;
	GroupClear(g3);
	DestroyGroup(g3);
	g3[null] = null;
	dammi[null] = null;
	Picked[null] = null;
}
void Trig_Nature_Wrath_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	int lvl = GetUnitAbilityLevel(caster, 'A0MS');
	int lvlup = GetUnitAbilityLevel(caster, 'A0Q2');
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	group gheal = CreateGroup();
	int addas;
	int addarmor;
	int addregen;
	int addms;
	float damage;
	int wait = 80;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	unit dammief;
	effect dammieffect;
	int lopa = 0;
	int lopb = 0;
	int count;
	float angleef;
	float dist;
	int dammicounter = $F;
	effect ef = AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Tranquility\\Tranquility.mdl", caster, "origin");
	if (lvl > 0) {
		addas[$A + 35 * lvl] = $A + 35 * lvl;
		addarmor[5 + (5 * lvl)] = 5 + (5 * lvl);
		addregen[$F + (30 * lvl)] = $F + (30 * lvl);
		addms[lvl] = lvl;
		damage[20. + 50. * lvl] = 20. + 50. * lvl;
		AddProgressBar(caster, 195. + (15. * lvl), (1. + .15 * lvl), (wait * .1), false, true, 'u', 0, $FF, 0);
	}
	if (lvlup > 0) {
		addas[$A + 35 * lvlup] = $A + 35 * lvlup;
		addarmor[5 + (5 * lvlup)] = 5 + (5 * lvlup);
		addregen[25 + (50 * lvlup)] = 25 + (50 * lvlup);
		addms[lvlup] = lvlup;
		damage[25. + 75. * lvlup] = 25. + 75. * lvlup;
		AddProgressBar(caster, 195. + (15. * lvlup), (1. + .15 * lvlup), (wait * .1), false, true, 'u', 0, $FF, 0);
	}
	while (true) {
		if (lopa >= 4) break;
		count[16 - (lopa * 4)] = 16 - (lopa * 4);
		angleef[(360. / count)] = (360. / count);
		dist[(700. - 150. * lopa)] = (700. - 150. * lopa);
		lopb[0] = 0;
		while (true) {
			if (lopb > count) break;
			dammief[CreateUnit(p, 'h00U', x + dist * Cos(angleef * lopb * bj_DEGTORAD), y + dist * Sin(angleef * lopb * bj_DEGTORAD), (angleef * lopb) + 90.)] = CreateUnit(p, 'h00U', x + dist * Cos(angleef * lopb * bj_DEGTORAD), y + dist * Sin(angleef * lopb * bj_DEGTORAD), (angleef * lopb) + 90.);
			dammieffect[AddSpecialEffectTarget("Effects\\GreenHeal.mdl", dammief, "chest")] = AddSpecialEffectTarget("Effects\\GreenHeal.mdl", dammief, "chest");
			SaveUnitHandle(udg_hash, h, dammicounter, dammief);
			SaveEffectHandle(udg_hash, h, dammicounter + 75, dammieffect);
			dammicounter[dammicounter + 1] = dammicounter + 1;
			dammief[null] = null;
			dammieffect[null] = null;
			lopb[lopb + 1] = lopb + 1;
		}
		lopa[lopa + 1] = lopa + 1;
	}
	SetUnitTimeScale(caster, 1.05);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveGroupHandle(udg_hash, h, 2, gheal);
	SaveReal(udg_hash, h, 3, damage);
	SaveInteger(udg_hash, h, 4, addas);
	SaveInteger(udg_hash, h, 5, addarmor);
	SaveInteger(udg_hash, h, 6, addregen);
	SaveInteger(udg_hash, h, 7, addms);
	SaveInteger(udg_hash, h, 9, wait);
	SaveInteger(udg_hash, h, $A, 0);
	SaveEffectHandle(udg_hash, h, $B, ef);
	TimerStart(t, .1, true, Trig_Nature_Wrath_Periodic_Actions);
	caster[null] = null;
	p[null] = null;
	gheal[null] = null;
	ef[null] = null;
	t[null] = null;
}
bool Trig_Nature_Wrath_Conditions() {
	return (GetSpellAbilityId() == 'A0MS' || GetSpellAbilityId() == 'A0Q2');
}
void InitTrig_Nature_Wrath() {
	int index = 0;
	gg_trg_Nature_Wrath[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Nature_Wrath, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Nature_Wrath, Condition(Trig_Nature_Wrath_Conditions));
	TriggerAddAction(gg_trg_Nature_Wrath, Trig_Nature_Wrath_Actions);
}
void Trig_Falling_Star_Move_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 7);
	int count = LoadInteger(udg_hash, h, 8);
	player p = GetOwningPlayer(caster);
	float damage;
	unit orb;
	float stuntime;
	effect ef;
	float xt;
	float yt;
	group g;
	unit Picked;
	float angle2;
	float dist;
	int lopa = 1;
	int horb;
	float knock;
	group gdamage = CreateGroup();
	while (true) {
		if (lopa > count) break;
		orb[LoadUnitHandle(udg_hash, h, lopa)] = LoadUnitHandle(udg_hash, h, lopa);
		ef[LoadEffectHandle(udg_hash, h, lopa + 3)] = LoadEffectHandle(udg_hash, h, lopa + 3);
		horb[GetHandleId(orb)] = GetHandleId(orb);
		damage[LoadReal(udg_hash, horb, 1)] = LoadReal(udg_hash, horb, 1);
		stuntime[LoadReal(udg_hash, horb, 2)] = LoadReal(udg_hash, horb, 2);
		knock[LoadReal(udg_hash, horb, 3)] = LoadReal(udg_hash, horb, 3);
		xt[LoadReal(udg_hash, horb, 4)] = LoadReal(udg_hash, horb, 4);
		yt[LoadReal(udg_hash, horb, 5)] = LoadReal(udg_hash, horb, 5);
		g[CreateGroup()] = CreateGroup();
		GroupEnumUnitsInRange(g, xt, yt, 220., null);
		DestroyEffect(AddSpecialEffect("Effects\\Nebula.mdl", xt, yt));
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl", xt, yt));
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && IsUnitInGroup(Picked, gdamage) == false && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayDamage.mdl", Picked, "origin"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayTarget.mdl", Picked, "origin"));
				StunUnitTimed(Picked, stuntime);
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				angle2[bj_RADTODEG * Atan2((GetUnitY(Picked) - yt), (GetUnitX(Picked) - xt))] = bj_RADTODEG * Atan2((GetUnitY(Picked) - yt), (GetUnitX(Picked) - xt));
				dist[SquareRoot((((GetUnitX(Picked) - xt) * (GetUnitX(Picked) - xt))) + ((GetUnitY(Picked) - yt) * (GetUnitY(Picked) - yt)))] = SquareRoot((((GetUnitX(Picked) - xt) * (GetUnitX(Picked) - xt))) + ((GetUnitY(Picked) - yt) * (GetUnitY(Picked) - yt)));
				MoveUnit(Picked, .5, ($E6 - dist) * 2.5 * knock, ($DC - dist) * 2. * knock, angle2, .0, true);
				GroupAddUnit(gdamage, Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
		Picked[null] = null;
		KillUnit(orb);
		DestroyEffect(ef);
		ef[null] = null;
		GroupClear(g);
		DestroyGroup(g);
		g[null] = null;
		lopa[lopa + 1] = lopa + 1;
	}
	p[null] = null;
	GroupClear(gdamage);
	DestroyGroup(gdamage);
	gdamage[null] = null;
	DestroyTimer(t);
	FlushChildHashtable(udg_hash, h);
	t[null] = null;
	caster[null] = null;
}
void Trig_Falling_Star_Actions() {
	unit caster = GetSpellAbilityUnit();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	location loc = GetSpellTargetLoc();
	float xt = GetLocationX(loc);
	float yt = GetLocationY(loc);
	float angle = bj_RADTODEG * Atan2((yt - y), (xt - x));
	float dist = SquareRoot(((xt - x) * (xt - x)) + ((yt - y) * (yt - y)));
	int lvl = GetUnitAbilityLevel(caster, 'A0NR');
	float damage = (40. * lvl) + (GetHeroAgi(caster, true) * (.25 + .25 * lvl));
	float stuntime = .6 + (.15 * lvl);
	player p = GetOwningPlayer(caster);
	unit orb;
	effect ef;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	int lopa = 1;
	float angle2 = GetRandomReal(.0, 360.);
	bool isultimate = LoadBoolean(udg_hash, GetHandleId(caster), $7F);
	int count = 1;
	if (isultimate) {
		count[3] = 3;
	}
	if (dist < 50.) {
		dist[50.] = 50.;
		angle[GetUnitFacing(caster)] = GetUnitFacing(caster);
	}
	if (GetFloatGameState(GAME_STATE_TIME_OF_DAY) * 1 < 6. || GetFloatGameState(GAME_STATE_TIME_OF_DAY) * 1 > 18.) {
		damage[damage * 1.5] = damage * 1.5;
	}
	while (true) {
		if (lopa > count) break;
		if (lopa == 1) {
			orb[CreateUnit(p, 'h00E', x, y, angle)] = CreateUnit(p, 'h00E', x, y, angle);
			SetUnitScale(orb, 2.75, 2.75, 2.75);
			SaveReal(udg_hash, GetHandleId(orb), 1, damage);
			SaveReal(udg_hash, GetHandleId(orb), 2, stuntime);
			SaveReal(udg_hash, GetHandleId(orb), 3, 1.);
			SaveReal(udg_hash, GetHandleId(orb), 4, xt);
			SaveReal(udg_hash, GetHandleId(orb), 5, yt);
		else
			orb[CreateUnit(p, 'h00E', (x + 200. * Cos(angle2 * bj_DEGTORAD)), (y + 200. * Sin(angle2 * bj_DEGTORAD)), angle)] = CreateUnit(p, 'h00E', (x + 200. * Cos(angle2 * bj_DEGTORAD)), (y + 200. * Sin(angle2 * bj_DEGTORAD)), angle);
			SetUnitScale(orb, 2., 2., 2.);
			SaveReal(udg_hash, GetHandleId(orb), 1, damage / 2);
			SaveReal(udg_hash, GetHandleId(orb), 2, stuntime / 2);
			SaveReal(udg_hash, GetHandleId(orb), 3, .5);
			SaveReal(udg_hash, GetHandleId(orb), 4, GetUnitX(orb) + dist * Cos(angle * bj_DEGTORAD));
			SaveReal(udg_hash, GetHandleId(orb), 5, GetUnitY(orb) + dist * Sin(angle * bj_DEGTORAD));
			angle2[angle2 + GetRandomReal(45., 315.)] = angle2 + GetRandomReal(45., 315.);
		}
		ef[AddSpecialEffectTarget("Effects\\StarfallTarget2.mdl", orb, "origin")] = AddSpecialEffectTarget("Effects\\StarfallTarget2.mdl", orb, "origin");
		SetUnitAnimationByIndex(orb, 45);
		SetUnitTimeScale(orb, 2.5);
		UnitAddAbility(orb, 'Amrf');
		UnitRemoveAbility(orb, 'Amrf');
		SetUnitFlyHeight(orb, 800., .0);
		SetUnitFlyHeight(orb, .0, 1600.);
		MoveUnit(orb, .5, dist * 2, .0, angle, .0, true);
		SaveUnitHandle(udg_hash, h, lopa, orb);
		SaveEffectHandle(udg_hash, h, lopa + 3, ef);
		ef[null] = null;
		orb[null] = null;
		lopa[lopa + 1] = lopa + 1;
	}
	DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Starfall\\StarfallCaster.mdl", caster, "origin"), 3.);
	SaveUnitHandle(udg_hash, h, 7, caster);
	SaveInteger(udg_hash, h, 8, count);
	TimerStart(t, .5, false, Trig_Falling_Star_Move_Actions);
	caster[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	t[null] = null;
	p[null] = null;
}
bool Trig_Falling_Star_Conditions() {
	return GetSpellAbilityId() == 'A0NR';
}
void InitTrig_Falling_Star() {
	int index = 0;
	gg_trg_Falling_Star[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Falling_Star, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Falling_Star, Condition(Trig_Falling_Star_Conditions));
	TriggerAddAction(gg_trg_Falling_Star, Trig_Falling_Star_Actions);
}
void Trig_Moon_Chackram_Periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster;
	effect ef;
	if (LoadBoolean(udg_hash, h, 3)) {
		SaveBoolean(udg_hash, h, 3, false);
		ef[LoadEffectHandle(udg_hash, h, 2)] = LoadEffectHandle(udg_hash, h, 2);
		DestroyEffect(ef);
		ef[null] = null;
		TimerStart(t, 5., false, Trig_Moon_Chackram_Periodic_Actions);
	else
		caster[LoadUnitHandle(udg_hash, h, 1)] = LoadUnitHandle(udg_hash, h, 1);
		SaveBoolean(udg_hash, GetHandleId(caster), $80, false);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
		t[null] = null;
		caster[null] = null;
	}
}
void Trig_Moon_Chackram_Actions() {
	unit caster = GetSpellAbilityUnit();
	timer t = CreateTimer();
	int h = GetHandleId(t);
	effect ef = AddSpecialEffectTarget("Effects\\MoonSight_Buff.mdx", caster, "overhead");
	SaveBoolean(udg_hash, GetHandleId(caster), $80, true);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveEffectHandle(udg_hash, h, 2, ef);
	SaveBoolean(udg_hash, h, 3, true);
	TimerStart(t, 3., false, Trig_Moon_Chackram_Periodic_Actions);
	caster[null] = null;
	t[null] = null;
	ef[null] = null;
}
bool Trig_Moon_Chackram_Conditions() {
	return GetSpellAbilityId() == 'A0NS';
}
void InitTrig_Moon_Chackram() {
	int index = 0;
	gg_trg_Moon_Chackram[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Moon_Chackram, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Moon_Chackram, Condition(Trig_Moon_Chackram_Conditions));
	TriggerAddAction(gg_trg_Moon_Chackram, Trig_Moon_Chackram_Actions);
}
void Trig_Moon_Wind_Periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	group gheal = LoadGroupHandle(udg_hash, h, 2);
	int adddamage;
	int addas = LoadInteger(udg_hash, h, 4);
	int addint = LoadInteger(udg_hash, h, 5);
	int addagi = LoadInteger(udg_hash, h, 6);
	int addregen = LoadInteger(udg_hash, h, 7);
	int wait = LoadInteger(udg_hash, h, 9);
	float x = LoadReal(udg_hash, h, $C);
	float y = LoadReal(udg_hash, h, $D);
	player p = GetOwningPlayer(caster);
	group g = CreateGroup();
	group g2 = CreateGroup();
	group g3 = CreateGroup();
	unit Picked;
	unit dammi;
	unit dammief;
	effect dammieffect;
	int lopa = 0;
	int lopb = 0;
	int count;
	float angleef;
	float dist;
	if (wait > 0) {
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 9, wait);
		GroupEnumUnitsInRange(g, x, y, 450., null);
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if ((IsUnitAlly(Picked, p) || GetOwningPlayer(Picked) == Player($D)) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				GroupAddUnit(g2, Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
		Picked[null] = null;
		GroupClear(g);
		DestroyGroup(g);
		g[null] = null;
		GroupAddGroup(gheal, g3);
		while (true) {
			Picked[FirstOfGroup(g3)] = FirstOfGroup(g3);
			if (Picked == null) break;
			if (IsUnitInGroup(Picked, g2) == false) {
				GroupRemoveUnit(gheal, Picked);
				SetUnitLifeAndManaRegeneration(Picked, "life", -addregen);
				SetAttackSpeedAbilityLevel(Picked, -addas);
				if (IsUnitType(Picked, UNIT_TYPE_HERO)) {
					SetHeroAgi(Picked, GetHeroAgi(Picked, false) - addagi, true);
					SetHeroInt(Picked, GetHeroInt(Picked, false) - addint, true);
				}
				if (Picked == caster && LoadBoolean(udg_hash, h, $E)) {
					SetUnitLifeAndManaRegeneration(Picked, "life", -R2I((addregen)) / 2);
					SetAttackSpeedAbilityLevel(Picked, -R2I((addas)) / 2);
					SetHeroAgi(Picked, GetHeroAgi(Picked, false) - R2I((addagi)) / 2, true);
					SetHeroInt(Picked, GetHeroInt(Picked, false) - R2I((addint)) / 2, true);
				}
				if (Picked == caster && LoadBoolean(udg_hash, h, $F)) {
					adddamage[LoadInteger(udg_hash, h, 3)] = LoadInteger(udg_hash, h, 3);
					SetAttackAbilityLevel(Picked, -adddamage);
				}
			else
				dammi[CreateUnit(p, 'h00U', x, y, .0)] = CreateUnit(p, 'h00U', x, y, .0);
				UnitApplyTimedLife(dammi, 'BTLF', 1.);
				UnitAddAbility(dammi, 'A0NU');
				IssueTargetOrderById(dammi, $D0085, Picked);
				dammi[null] = null;
			}
			GroupRemoveUnit(g3, Picked);
		}
		Picked[null] = null;
		GroupClear(g3);
		DestroyGroup(g3);
		g3[null] = null;
		while (true) {
			Picked[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if (Picked == null) break;
			if (IsUnitInGroup(Picked, gheal) == false) {
				GroupAddUnit(gheal, Picked);
				SetUnitLifeAndManaRegeneration(Picked, "life", addregen);
				SetAttackSpeedAbilityLevel(Picked, addas);
				if (IsUnitType(Picked, UNIT_TYPE_HERO)) {
					SetHeroAgi(Picked, GetHeroAgi(Picked, false) + addagi, true);
					SetHeroInt(Picked, GetHeroInt(Picked, false) + addint, true);
				}
				if (Picked == caster && LoadBoolean(udg_hash, h, $E)) {
					SetUnitLifeAndManaRegeneration(Picked, "life", R2I(addregen / 2));
					SetAttackSpeedAbilityLevel(Picked, R2I(addas / 2));
					SetHeroAgi(Picked, GetHeroAgi(Picked, false) + R2I((addagi) / 2), true);
					SetHeroInt(Picked, GetHeroInt(Picked, false) + R2I((addint)) / 2, true);
				}
				if (Picked == caster && LoadBoolean(udg_hash, h, $F)) {
					adddamage[LoadInteger(udg_hash, h, 3)] = LoadInteger(udg_hash, h, 3);
					SetAttackAbilityLevel(Picked, adddamage);
				}
			}
			if (GetUnitAbilityLevel(Picked, 'B04M') <= 0) {
				dammi[CreateUnit(p, 'h00U', x, y, .0)] = CreateUnit(p, 'h00U', x, y, .0);
				UnitApplyTimedLife(dammi, 'BTLF', 1.);
				UnitAddAbility(dammi, 'A0NU');
				IssueTargetOrderById(dammi, $D0085, Picked);
				dammi[null] = null;
			}
			GroupRemoveUnit(g2, Picked);
		}
		Picked[null] = null;
		GroupClear(g2);
		DestroyGroup(g2);
		g2[null] = null;
		SaveGroupHandle(udg_hash, h, 2, gheal);
	else
		while (true) {
			Picked[FirstOfGroup(gheal)] = FirstOfGroup(gheal);
			if (Picked == null) break;
			SetUnitLifeAndManaRegeneration(Picked, "life", -addregen);
			SetAttackSpeedAbilityLevel(Picked, -addas);
			if (IsUnitType(Picked, UNIT_TYPE_HERO)) {
				SetHeroAgi(Picked, GetHeroAgi(Picked, false) - addagi, true);
				SetHeroInt(Picked, GetHeroInt(Picked, false) - addint, true);
			}
			if (Picked == caster && LoadBoolean(udg_hash, h, $E)) {
				SetUnitLifeAndManaRegeneration(Picked, "life", -R2I((addregen)) / 2);
				SetAttackSpeedAbilityLevel(Picked, -R2I((addas)) / 2);
				SetHeroAgi(Picked, GetHeroAgi(Picked, false) - R2I((addagi)) / 2, true);
				SetHeroInt(Picked, GetHeroInt(Picked, false) - R2I((addint)) / 2, true);
			}
			if (Picked == caster && LoadBoolean(udg_hash, h, $F)) {
				adddamage[LoadInteger(udg_hash, h, 3)] = LoadInteger(udg_hash, h, 3);
				SetAttackAbilityLevel(Picked, -adddamage);
			}
			GroupRemoveUnit(gheal, Picked);
		}
		GroupClear(gheal);
		DestroyGroup(gheal);
		gheal[null] = null;
		Picked[null] = null;
		lopa[1] = 1;
		while (true) {
			if (lopa >= 7) break;
			dammief[LoadUnitHandle(udg_hash, h, 50 + lopa)] = LoadUnitHandle(udg_hash, h, 50 + lopa);
			dammieffect[LoadEffectHandle(udg_hash, h, 60 + lopa)] = LoadEffectHandle(udg_hash, h, 60 + lopa);
			KillUnit(dammief);
			DestroyEffect(dammieffect);
			dammief[null] = null;
			dammieffect[null] = null;
			lopa[lopa + 1] = lopa + 1;
		}
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	caster[null] = null;
	p[null] = null;
	gheal[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	GroupClear(g2);
	DestroyGroup(g2);
	g2[null] = null;
	GroupClear(g3);
	DestroyGroup(g3);
	g3[null] = null;
	dammi[null] = null;
	Picked[null] = null;
}
void Trig_Moon_Wind_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	int lvl = GetUnitAbilityLevel(caster, 'A0NT');
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	location loc = GetSpellTargetLoc();
	float xt = GetLocationX(loc);
	float yt = GetLocationY(loc);
	float angle = bj_RADTODEG * Atan2((yt - y), (xt - x));
	float dist = SquareRoot(((xt - x) * (xt - x)) + ((yt - y) * (yt - y)));
	group gheal = CreateGroup();
	int addagi = 6 + (4 * lvl);
	int addint = 6 + (4 * lvl);
	int addas = 8 + (6 * lvl);
	int adddamage = R2I(GetHeroAgi(caster, true) * .4);
	int addregen = $A + (6 * lvl);
	int wait = 20;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	unit dammief;
	effect dammieffect;
	int lopa = 1;
	int lopb = 0;
	int count;
	float angleef;
	int dammicounter = 6;
	float smechenie = 400. + 133.;
	float angledummi = angle - 90.;
	float x2 = x - 400. * Cos(angle * bj_DEGTORAD);
	float y2 = y - 400. * Sin(angle * bj_DEGTORAD);
	bool halfbonus = false;
	bool isultimate = LoadBoolean(udg_hash, GetHandleId(caster), $7F);
	if (GetFloatGameState(GAME_STATE_TIME_OF_DAY) * 1 < 6. || GetFloatGameState(GAME_STATE_TIME_OF_DAY) * 1 > 18.) {
		halfbonus[true] = true;
	}
	if (isultimate) {
		wait[30] = 30;
	}
	while (true) {
		if (lopa >= 7) break;
		smechenie[smechenie - 133.] = smechenie - 133.;
		dammief[CreateUnit(p, 'h00E', x2 + smechenie * Cos(angledummi * bj_DEGTORAD), y2 + smechenie * Sin(angledummi * bj_DEGTORAD), angle)] = CreateUnit(p, 'h00E', x2 + smechenie * Cos(angledummi * bj_DEGTORAD), y2 + smechenie * Sin(angledummi * bj_DEGTORAD), angle);
		SetUnitAnimationByIndex(dammief, 45);
		SetUnitScale(dammief, 2., 2., 2.);
		SetUnitFlyHeight(dammief, 200., .0);
		dammieffect[AddSpecialEffectTarget("Effects\\HolyBlessing.mdl", dammief, "chest")] = AddSpecialEffectTarget("Effects\\HolyBlessing.mdl", dammief, "chest");
		SaveUnitHandle(udg_hash, h, lopa + 50, dammief);
		SaveEffectHandle(udg_hash, h, lopa + 60, dammieffect);
		dammief[null] = null;
		dammieffect[null] = null;
		lopa[lopa + 1] = lopa + 1;
	}
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveGroupHandle(udg_hash, h, 2, gheal);
	SaveInteger(udg_hash, h, 3, adddamage);
	SaveInteger(udg_hash, h, 4, addas);
	SaveInteger(udg_hash, h, 5, addint);
	SaveInteger(udg_hash, h, 6, addagi);
	SaveInteger(udg_hash, h, 7, addregen);
	SaveInteger(udg_hash, h, 9, wait);
	SaveReal(udg_hash, h, $C, x);
	SaveReal(udg_hash, h, $D, y);
	SaveBoolean(udg_hash, h, $E, halfbonus);
	SaveBoolean(udg_hash, h, $F, isultimate);
	TimerStart(t, .5, true, Trig_Moon_Wind_Periodic_Actions);
	caster[null] = null;
	p[null] = null;
	gheal[null] = null;
	t[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
}
bool Trig_Moon_Wind_Conditions() {
	return GetSpellAbilityId() == 'A0NT';
}
void InitTrig_Moon_Wind() {
	int index = 0;
	gg_trg_Moon_Wind[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Moon_Wind, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Moon_Wind, Condition(Trig_Moon_Wind_Conditions));
	TriggerAddAction(gg_trg_Moon_Wind, Trig_Moon_Wind_Actions);
}
void Trig_Night_Heart_Periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	effect ef = LoadEffectHandle(udg_hash, h, 2);
	int bonus = LoadInteger(udg_hash, h, 3);
	SetHeroAgi(caster, GetHeroAgi(caster, false) - bonus, true);
	SaveBoolean(udg_hash, GetHandleId(caster), $7F, false);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
	caster[null] = null;
	DestroyEffect(ef);
	ef[null] = null;
}
void Trig_Night_Heart_Actions() {
	unit caster = GetSpellAbilityUnit();
	timer t = CreateTimer();
	int h = GetHandleId(t);
	effect ef = AddSpecialEffectTarget("Effects\\StarfallCaster.mdl", caster, "origin");
	int bonus = $F + ($F * GetUnitAbilityLevel(caster, 'A0NV'));
	unit dammi = CreateUnit(GetOwningPlayer(caster), 'h00H', .0, .0, .0);
	item it = CreateItem('I010', .0, .0);
	UnitApplyTimedLife(dammi, 'BTLF', 10.);
	UnitAddItem(dammi, it);
	UnitUseItem(dammi, GetItemOfTypeFromUnitBJ(dammi, 'I010'));
	dammi[null] = null;
	it[null] = null;
	PlaySoundBJ(gg_snd_HuntressYesAttack4);
	SetHeroAgi(caster, GetHeroAgi(caster, false) + bonus, true);
	SaveBoolean(udg_hash, GetHandleId(caster), $7F, true);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveEffectHandle(udg_hash, h, 2, ef);
	SaveInteger(udg_hash, h, 3, bonus);
	TimerStart(t, 20., false, Trig_Night_Heart_Periodic_Actions);
	caster[null] = null;
	t[null] = null;
	ef[null] = null;
}
bool Trig_Night_Heart_Conditions() {
	return GetSpellAbilityId() == 'A0NV';
}
void InitTrig_Night_Heart() {
	int index = 0;
	gg_trg_Night_Heart[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Night_Heart, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Night_Heart, Condition(Trig_Night_Heart_Conditions));
	TriggerAddAction(gg_trg_Night_Heart, Trig_Night_Heart_Actions);
}
void Trig_MoonWarrior_Load_Actions() {
	AbilityPreload('A0NR', 6);
	AbilityPreload('A0NS', 6);
	AbilityPreload('A0NT', 6);
	AbilityPreload('A0NV', 3);
	AbilityPreload('A0NU', 1);
	AbilityPreload('B04R', 1);
	UnitPreload('h00H');
	UnitPreload('I010');
	EffectPreload("Effects\\CosmicTouch.MDX");
	EffectPreload("Effects\\BlueGlaivie.mdl");
	EffectPreload("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl");
	EffectPreload("Effects\\SoundTrauma.mdl");
	EffectPreload("Effects\\StarfallCaster.mdl");
	EffectPreload("Effects\\StarfallTarget2.mdl");
	EffectPreload("Abilities\\Spells\\NightElf\\Starfall\\StarfallCaster.mdl");
	EffectPreload("Effects\\Nebula.mdl");
	EffectPreload("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl");
	EffectPreload("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayDamage.mdl");
	EffectPreload("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayTarget.mdl");
	EffectPreload("Effects\\MoonSight_Buff.mdx");
	EffectPreload("Effects\\HolyBlessing.mdl");
	EnableTrigger(gg_trg_Falling_Star);
	EnableTrigger(gg_trg_Moon_Chackram);
	EnableTrigger(gg_trg_Moon_Wind);
	EnableTrigger(gg_trg_Night_Heart);
}
void InitTrig_MoonWarrior_Load() {
	gg_trg_MoonWarrior_Load[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_MoonWarrior_Load, Trig_MoonWarrior_Load_Actions);
}
void Trig_Ancient_Communication_Ligtning_Move_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	unit target = LoadUnitHandle(udg_hash, h, 2);
	lightning l = LoadLightningHandle(udg_hash, h, 3);
	float time = LoadReal(udg_hash, h, 4);
	location locc = GetUnitLoc(caster);
	float xc = GetUnitX(caster);
	float yc = GetUnitY(caster);
	location loct = GetUnitLoc(target);
	float xt = GetUnitX(target);
	float yt = GetUnitY(target);
	float dx = xc - xt;
	float dy = yc - yt;
	float dist = SquareRoot(dx * dx + dy * dy);
	int damage;
	group g;
	unit Picked;
	group g2;
	group g3;
	int attackspeed;
	effect ef;
	int hpregen;
	int armor;
	if (GetUnitState(caster, UNIT_STATE_LIFE) > .405 && GetUnitState(target, UNIT_STATE_LIFE) > .0 && dist <= 725. && time > .0) {
		time[time - .04] = time - .04;
		SaveReal(udg_hash, h, 4, time);
		MoveLightningEx(l, true, xc, yc, 50. + GetLocationZ(locc), xt, yt, 50. + GetLocationZ(loct));
	else
		if (GetUnitAbilityLevel(caster, 'A0OO') > 0) {
			attackspeed[$A + $A * GetUnitAbilityLevel(caster, 'A0OO')] = $A + $A * GetUnitAbilityLevel(caster, 'A0OO');
			ef[LoadEffectHandle(udg_hash, GetHandleId(target), $89)] = LoadEffectHandle(udg_hash, GetHandleId(target), $89);
			DestroyEffect(ef);
			ef[null] = null;
			SaveEffectHandle(udg_hash, GetHandleId(target), $89, null);
			SetAttackSpeedAbilityLevel(target, -LoadInteger(udg_hash, GetHandleId(target), $8C));
		}
		if (GetUnitAbilityLevel(caster, 'A0OT') > 0) {
			armor[3 + 3 * GetUnitAbilityLevel(caster, 'A0OT')] = 3 + 3 * GetUnitAbilityLevel(caster, 'A0OT');
			hpregen[5 + $A * GetUnitAbilityLevel(caster, 'A0OT')] = 5 + $A * GetUnitAbilityLevel(caster, 'A0OT');
			ef[LoadEffectHandle(udg_hash, GetHandleId(target), $89)] = LoadEffectHandle(udg_hash, GetHandleId(target), $89);
			DestroyEffect(ef);
			ef[null] = null;
			SaveEffectHandle(udg_hash, GetHandleId(target), $89, null);
			SetUnitLifeAndManaRegeneration(target, "life", -LoadInteger(udg_hash, GetHandleId(target), $8D));
			SetArmorAbilityLevel(target, -LoadInteger(udg_hash, GetHandleId(target), $8E));
		}
		UnitRemoveAbility(target, 'B04Z');
		g[LoadGroupHandle(udg_hash, GetHandleId(caster), $88)] = LoadGroupHandle(udg_hash, GetHandleId(caster), $88);
		GroupRemoveUnit(g, target);
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) {
			UnitRemoveAbility(caster, 'B04Z');
		}
		SaveGroupHandle(udg_hash, GetHandleId(caster), $88, g);
		damage[LoadInteger(udg_hash, h, 5)] = LoadInteger(udg_hash, h, 5);
		SetAttackAbilityLevel(caster, -damage);
		SetAttackAbilityLevel(target, -damage);
		DestroyLightning(l);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	caster[null] = null;
	target[null] = null;
	l[null] = null;
	RemoveLocation(locc);
	locc[null] = null;
	RemoveLocation(loct);
	loct[null] = null;
}
void Trig_Ancient_Communication_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	unit dammi;
	location locc = GetUnitLoc(caster);
	float xc = GetUnitX(caster);
	float yc = GetUnitY(caster);
	location loct = GetUnitLoc(target);
	float xt = GetUnitX(target);
	float yt = GetUnitY(target);
	lightning l;
	player p = GetOwningPlayer(caster);
	int lvl = GetUnitAbilityLevel(caster, 'A0OM');
	timer t = CreateTimer();
	int h = GetHandleId(t);
	float time = 11. + lvl;
	int damage = 7 + (8 * lvl);
	group g = LoadGroupHandle(udg_hash, GetHandleId(caster), $88);
	effect ef;
	int attackspeed;
	int hpregen;
	int armor;
	if (g == null) {
		g[CreateGroup()] = CreateGroup();
	}
	if (IsUnitInGroup(target, g)) {
		SimError(GetOwningPlayer(caster), "На этого героя уже наложена Связь Предков.");
		UnitRemoveAbility(caster, 'A0OM');
		UnitAddAbility(caster, 'A0OM');
		SetUnitAbilityLevel(caster, 'A0OM', lvl);
		SetUnitState(caster, UNIT_STATE_MANA, GetUnitState(caster, UNIT_STATE_MANA) + 120. + (5. * lvl));
	else
		l[AddLightningEx("SPLK", true, xc, yc, 50. + GetLocationZ(locc), xt, yt, 50. + GetLocationZ(loct))] = AddLightningEx("SPLK", true, xc, yc, 50. + GetLocationZ(locc), xt, yt, 50. + GetLocationZ(loct));
		GroupAddUnit(g, target);
		SaveGroupHandle(udg_hash, GetHandleId(caster), $88, g);
		SetAttackAbilityLevel(caster, damage);
		SetAttackAbilityLevel(target, damage);
		dammi[CreateUnit(p, 'h00U', xc, yc, .0)] = CreateUnit(p, 'h00U', xc, yc, .0);
		UnitApplyTimedLife(dammi, 'BTLF', 1.5);
		UnitAddAbility(dammi, 'A0ON');
		IssueTargetOrderById(dammi, $D0085, caster);
		dammi[null] = null;
		dammi[CreateUnit(p, 'h00U', xt, yt, .0)] = CreateUnit(p, 'h00U', xt, yt, .0);
		UnitApplyTimedLife(dammi, 'BTLF', 1.5);
		UnitAddAbility(dammi, 'A0ON');
		IssueTargetOrderById(dammi, $D0085, target);
		dammi[null] = null;
		if (GetUnitAbilityLevel(caster, 'A0OO') > 0) {
			attackspeed[$A + $A * GetUnitAbilityLevel(caster, 'A0OO')] = $A + $A * GetUnitAbilityLevel(caster, 'A0OO');
			ef[AddSpecialEffectTarget("Effects\\PyroMissle.mdx", target, "chest")] = AddSpecialEffectTarget("Effects\\PyroMissle.mdx", target, "chest");
			SaveEffectHandle(udg_hash, GetHandleId(target), $89, ef);
			ef[null] = null;
			SetAttackSpeedAbilityLevel(target, attackspeed);
			SaveInteger(udg_hash, GetHandleId(target), $8C, attackspeed);
		}
		if (GetUnitAbilityLevel(caster, 'A0OT') > 0) {
			armor[3 + 3 * GetUnitAbilityLevel(caster, 'A0OT')] = 3 + 3 * GetUnitAbilityLevel(caster, 'A0OT');
			hpregen[5 + $A * GetUnitAbilityLevel(caster, 'A0OT')] = 5 + $A * GetUnitAbilityLevel(caster, 'A0OT');
			ef[AddSpecialEffectTarget("Effects\\Nebula.mdx", target, "origin")] = AddSpecialEffectTarget("Effects\\Nebula.mdx", target, "origin");
			SaveEffectHandle(udg_hash, GetHandleId(target), $89, ef);
			ef[null] = null;
			SetUnitLifeAndManaRegeneration(target, "life", hpregen);
			SetArmorAbilityLevel(target, armor);
			SaveInteger(udg_hash, GetHandleId(target), $8D, hpregen);
			SaveInteger(udg_hash, GetHandleId(target), $8E, armor);
		}
		SaveUnitHandle(udg_hash, h, 1, caster);
		SaveUnitHandle(udg_hash, h, 2, target);
		SaveLightningHandle(udg_hash, h, 3, l);
		SaveReal(udg_hash, h, 4, time);
		SaveInteger(udg_hash, h, 5, damage);
		TimerStart(t, .04, true, Trig_Ancient_Communication_Ligtning_Move_Actions);
		l[null] = null;
	}
	caster[null] = null;
	target[null] = null;
	dammi[null] = null;
	RemoveLocation(locc);
	locc[null] = null;
	RemoveLocation(loct);
	loct[null] = null;
	p[null] = null;
	t[null] = null;
	g[null] = null;
}
bool Trig_Ancient_Communication_Conditions() {
	return GetSpellAbilityId() == 'A0OM';
}
void InitTrig_Ancient_Communication() {
	int index = 0;
	gg_trg_Ancient_Communication[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Ancient_Communication, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Ancient_Communication, Condition(Trig_Ancient_Communication_Conditions));
	TriggerAddAction(gg_trg_Ancient_Communication, Trig_Ancient_Communication_Actions);
}
void Trig_Learn_Power_of_Ancestors_Actions() {
	unit u = GetLearningUnit();
	int lvl = GetUnitAbilityLevel(u, 'A0OP');
	if (lvl == 1) {
		UnitAddAbility(u, 'A0OS');
		UnitAddAbility(u, 'A0OR');
		UnitMakeAbilityPermanent(u, true, 'A0OS');
		UnitMakeAbilityPermanent(u, true, 'A0OR');
	else
		SetUnitAbilityLevel(u, 'A0OS', lvl);
		SetUnitAbilityLevel(u, 'A0OR', lvl);
		SetUnitAbilityLevel(u, 'A0OT', lvl);
		SetUnitAbilityLevel(u, 'A0OO', lvl);
	}
	u[null] = null;
}
bool Trig_Learn_Power_of_Ancestors_Conditions() {
	return GetLearnedSkill() == 'A0OP' && GetUnitTypeId(GetLearningUnit()) != 'h00U';
}
void InitTrig_Learn_Power_of_Ancestors() {
	int index = 0;
	gg_trg_Learn_Power_of_Ancestors[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Power_of_Ancestors, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Learn_Power_of_Ancestors, Condition(Trig_Learn_Power_of_Ancestors_Conditions));
	TriggerAddAction(gg_trg_Learn_Power_of_Ancestors, Trig_Learn_Power_of_Ancestors_Actions);
}
void Trig_Switch_Power_of_Ancestors_Move_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	bool nodestroy = LoadBoolean(udg_hash, h, 2);
	float mana = GetUnitState(caster, UNIT_STATE_MANA);
	group g;
	group g2;
	unit Picked;
	int lvl;
	int h2;
	int mana2;
	effect ef;
	if (mana > 5. && GetUnitState(caster, UNIT_STATE_LIFE) > .0 && nodestroy) {
	else
		if (nodestroy) {
			h2[GetHandleId(caster)] = GetHandleId(caster);
			mana2[LoadInteger(udg_hash, h2, $8A)] = LoadInteger(udg_hash, h2, $8A);
			g[LoadGroupHandle(udg_hash, h2, $88)] = LoadGroupHandle(udg_hash, h2, $88);
			g2[CreateGroup()] = CreateGroup();
			GroupAddUnit(g2, caster);
			GroupAddGroup(g, g2);
			while (true) {
				Picked[FirstOfGroup(g2)] = FirstOfGroup(g2);
				if (Picked == null) break;
				ef[LoadEffectHandle(udg_hash, GetHandleId(Picked), $89)] = LoadEffectHandle(udg_hash, GetHandleId(Picked), $89);
				DestroyEffect(ef);
				ef[null] = null;
				SaveEffectHandle(udg_hash, GetHandleId(Picked), $89, null);
				if (GetUnitAbilityLevel(caster, 'A0OO') > 0) {
					SetAttackSpeedAbilityLevel(Picked, -LoadInteger(udg_hash, GetHandleId(Picked), $8C));
				}
				if (GetUnitAbilityLevel(caster, 'A0OT') > 0) {
					SetUnitLifeAndManaRegeneration(Picked, "life", -LoadInteger(udg_hash, GetHandleId(Picked), $8D));
					SetArmorAbilityLevel(Picked, -LoadInteger(udg_hash, GetHandleId(Picked), $8E));
				}
				GroupRemoveUnit(g2, Picked);
			}
			if (GetUnitAbilityLevel(caster, 'A0OO') > 0) {
				lvl[GetUnitAbilityLevel(caster, 'A0OO')] = GetUnitAbilityLevel(caster, 'A0OO');
				SetUnitLifeAndManaRegeneration(caster, "mana", mana2);
				UnitRemoveAbility(caster, 'A0OO');
				UnitAddAbility(caster, 'A0OS');
				SetUnitAbilityLevel(caster, 'A0OS', lvl);
				UnitMakeAbilityPermanent(caster, true, 'A0OS');
			}
			if (GetUnitAbilityLevel(caster, 'A0OT') > 0) {
				lvl[GetUnitAbilityLevel(caster, 'A0OT')] = GetUnitAbilityLevel(caster, 'A0OT');
				SetUnitLifeAndManaRegeneration(caster, "mana", mana2);
				UnitRemoveAbility(caster, 'A0OT');
				UnitAddAbility(caster, 'A0OR');
				SetUnitAbilityLevel(caster, 'A0OR', lvl);
				UnitMakeAbilityPermanent(caster, true, 'A0OR');
			}
			DestroyGroup(g2);
			g2[null] = null;
			g[null] = null;
		}
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	caster[null] = null;
}
void Trig_Switch_Power_of_Ancestors_Actions() {
	unit caster = GetSpellAbilityUnit();
	int id = GetSpellAbilityId();
	int lvl = GetUnitAbilityLevel(caster, id);
	effect ef;
	int h = GetHandleId(caster);
	group g = LoadGroupHandle(udg_hash, h, $88);
	group g2 = CreateGroup();
	unit Picked;
	int mana = LoadInteger(udg_hash, h, $8A);
	int nowmana = 3 + lvl * 2;
	timer t;
	int attackspeed = $A + $A * lvl;
	int hpregen = 5 + $A * lvl;
	int armor = 3 + 3 * lvl;
	bool Bec = false;
	bool switch2 = false;
	GroupAddUnit(g2, caster);
	GroupAddGroup(g, g2);
	if (id == 'A0OS') {
		UnitRemoveAbility(caster, 'A0OS');
		UnitAddAbility(caster, 'A0OO');
		SetUnitAbilityLevel(caster, 'A0OO', lvl);
		UnitMakeAbilityPermanent(caster, true, 'A0OO');
		if (GetUnitAbilityLevel(caster, 'A0OT') > 0) {
			switch2[true] = true;
			SetUnitLifeAndManaRegeneration(caster, "mana", mana);
			UnitRemoveAbility(caster, 'A0OT');
			UnitAddAbility(caster, 'A0OR');
			SetUnitAbilityLevel(caster, 'A0OR', lvl);
			UnitMakeAbilityPermanent(caster, true, 'A0OR');
		}
		SetUnitLifeAndManaRegeneration(caster, "mana", -nowmana);
		SaveInteger(udg_hash, h, $8A, nowmana);
		t[CreateTimer()] = CreateTimer();
		SaveUnitHandle(udg_hash, GetHandleId(t), 1, caster);
		SaveBoolean(udg_hash, GetHandleId(t), 2, true);
		TimerStart(t, .04, true, Trig_Switch_Power_of_Ancestors_Move_Actions);
		if (LoadTimerHandle(udg_hash, h, $8B) != null) {
			FlushChildHashtable(udg_hash, GetHandleId(LoadTimerHandle(udg_hash, h, $8B)));
			DestroyTimer(LoadTimerHandle(udg_hash, h, $8B));
		}
		SaveTimerHandle(udg_hash, h, $8B, t);
		t[null] = null;
		while (true) {
			Picked[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if (Picked == null) break;
			ef[LoadEffectHandle(udg_hash, GetHandleId(Picked), $89)] = LoadEffectHandle(udg_hash, GetHandleId(Picked), $89);
			DestroyEffect(ef);
			ef[null] = null;
			ef[AddSpecialEffectTarget("Effects\\PyroMissle.mdx", Picked, "chest")] = AddSpecialEffectTarget("Effects\\PyroMissle.mdx", Picked, "chest");
			SaveEffectHandle(udg_hash, GetHandleId(Picked), $89, ef);
			ef[null] = null;
			if (switch2) {
				SetUnitLifeAndManaRegeneration(Picked, "life", -LoadInteger(udg_hash, GetHandleId(Picked), $8D));
				SetArmorAbilityLevel(Picked, -LoadInteger(udg_hash, GetHandleId(Picked), $8E));
			}
			SetAttackSpeedAbilityLevel(Picked, attackspeed);
			SaveInteger(udg_hash, GetHandleId(Picked), $8C, attackspeed);
			GroupRemoveUnit(g2, Picked);
		}
	}
	if (id == 'A0OO') {
		UnitRemoveAbility(caster, 'A0OO');
		UnitAddAbility(caster, 'A0OS');
		SetUnitAbilityLevel(caster, 'A0OS', lvl);
		UnitMakeAbilityPermanent(caster, true, 'A0OS');
		SetUnitLifeAndManaRegeneration(caster, "mana", mana);
		while (true) {
			Picked[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if (Picked == null) break;
			ef[LoadEffectHandle(udg_hash, GetHandleId(Picked), $89)] = LoadEffectHandle(udg_hash, GetHandleId(Picked), $89);
			DestroyEffect(ef);
			ef[null] = null;
			SaveEffectHandle(udg_hash, GetHandleId(Picked), $89, null);
			SetAttackSpeedAbilityLevel(Picked, -LoadInteger(udg_hash, GetHandleId(Picked), $8C));
			GroupRemoveUnit(g2, Picked);
		}
	}
	if (id == 'A0OR') {
		UnitRemoveAbility(caster, 'A0OR');
		UnitAddAbility(caster, 'A0OT');
		SetUnitAbilityLevel(caster, 'A0OT', lvl);
		UnitMakeAbilityPermanent(caster, true, 'A0OT');
		SetUnitLifeAndManaRegeneration(caster, "mana", -nowmana);
		SaveInteger(udg_hash, h, $8A, nowmana);
		if (GetUnitAbilityLevel(caster, 'A0OO') > 0) {
			Bec[true] = true;
			SetUnitLifeAndManaRegeneration(caster, "mana", mana);
			UnitRemoveAbility(caster, 'A0OO');
			UnitAddAbility(caster, 'A0OS');
			SetUnitAbilityLevel(caster, 'A0OS', lvl);
			UnitMakeAbilityPermanent(caster, true, 'A0OS');
		}
		t[CreateTimer()] = CreateTimer();
		SaveUnitHandle(udg_hash, GetHandleId(t), 1, caster);
		SaveBoolean(udg_hash, GetHandleId(t), 2, true);
		TimerStart(t, .04, true, Trig_Switch_Power_of_Ancestors_Move_Actions);
		if (LoadTimerHandle(udg_hash, h, $8B) != null) {
			FlushChildHashtable(udg_hash, GetHandleId(LoadTimerHandle(udg_hash, h, $8B)));
			DestroyTimer(LoadTimerHandle(udg_hash, h, $8B));
		}
		SaveTimerHandle(udg_hash, h, $8B, t);
		t[null] = null;
		while (true) {
			Picked[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if (Picked == null) break;
			ef[LoadEffectHandle(udg_hash, GetHandleId(Picked), $89)] = LoadEffectHandle(udg_hash, GetHandleId(Picked), $89);
			DestroyEffect(ef);
			ef[null] = null;
			if (Bec) {
				SetAttackSpeedAbilityLevel(Picked, -LoadInteger(udg_hash, GetHandleId(Picked), $8C));
			}
			SetUnitLifeAndManaRegeneration(Picked, "life", hpregen);
			SetArmorAbilityLevel(Picked, armor);
			SaveInteger(udg_hash, GetHandleId(Picked), $8D, hpregen);
			SaveInteger(udg_hash, GetHandleId(Picked), $8E, armor);
			ef[AddSpecialEffectTarget("Effects\\Nebula.mdx", Picked, "origin")] = AddSpecialEffectTarget("Effects\\Nebula.mdx", Picked, "origin");
			SaveEffectHandle(udg_hash, GetHandleId(Picked), $89, ef);
			ef[null] = null;
			GroupRemoveUnit(g2, Picked);
		}
	}
	if (id == 'A0OT') {
		UnitRemoveAbility(caster, 'A0OT');
		UnitAddAbility(caster, 'A0OR');
		SetUnitAbilityLevel(caster, 'A0OR', lvl);
		UnitMakeAbilityPermanent(caster, true, 'A0OR');
		SetUnitLifeAndManaRegeneration(caster, "mana", mana);
		while (true) {
			Picked[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if (Picked == null) break;
			ef[LoadEffectHandle(udg_hash, GetHandleId(Picked), $89)] = LoadEffectHandle(udg_hash, GetHandleId(Picked), $89);
			DestroyEffect(ef);
			ef[null] = null;
			SaveEffectHandle(udg_hash, GetHandleId(Picked), $89, null);
			SetUnitLifeAndManaRegeneration(Picked, "life", -LoadInteger(udg_hash, GetHandleId(Picked), $8D));
			SetArmorAbilityLevel(Picked, -LoadInteger(udg_hash, GetHandleId(Picked), $8E));
			GroupRemoveUnit(g2, Picked);
		}
	}
	g[null] = null;
	DestroyGroup(g2);
	g2[null] = null;
	caster[null] = null;
}
bool Trig_Switch_Power_of_Ancestors_Conditions() {
	return GetSpellAbilityId() == 'A0OR' || GetSpellAbilityId() == 'A0OS' || GetSpellAbilityId() == 'A0OO' || GetSpellAbilityId() == 'A0OT';
}
void InitTrig_Switch_Power_of_Ancestors() {
	int index = 0;
	gg_trg_Switch_Power_of_Ancestors[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Switch_Power_of_Ancestors, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Switch_Power_of_Ancestors, Condition(Trig_Switch_Power_of_Ancestors_Conditions));
	TriggerAddAction(gg_trg_Switch_Power_of_Ancestors, Trig_Switch_Power_of_Ancestors_Actions);
}
void Trig_Earth_Split_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	unit dammi;
	float xc = GetUnitX(caster);
	float yc = GetUnitY(caster);
	player p = GetOwningPlayer(caster);
	int lvl = GetUnitAbilityLevel(caster, 'A0OQ');
	int damage = $A + (35 * lvl);
	group g = LoadGroupHandle(udg_hash, GetHandleId(caster), $88);
	group g2 = CreateGroup();
	group g3 = CreateGroup();
	group g4 = CreateGroup();
	unit Picked;
	unit Picked2;
	GroupAddUnit(g2, caster);
	GroupAddGroup(g, g2);
	while (true) {
		Picked2[FirstOfGroup(g2)] = FirstOfGroup(g2);
		if (Picked2 == null) break;
		GroupEnumUnitsInRange(g3, GetUnitX(Picked2), GetUnitY(Picked2), 225., null);
		while (true) {
			Picked[FirstOfGroup(g3)] = FirstOfGroup(g3);
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				dammi[CreateUnit(p, 'h00U', GetUnitX(Picked), GetUnitY(Picked), .0)] = CreateUnit(p, 'h00U', GetUnitX(Picked), GetUnitY(Picked), .0);
				UnitApplyTimedLife(dammi, 'BTLF', 1.);
				UnitAddAbility(dammi, 'A0OU');
				IssueTargetOrderById(dammi, $D006B, Picked);
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				dammi[null] = null;
			}
			GroupRemoveUnit(g3, Picked);
		}
		DestroyEffect(AddSpecialEffect("Effects\\RedAftershock.mdl", GetUnitX(Picked2), GetUnitY(Picked2)));
		DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", GetUnitX(Picked2), GetUnitY(Picked2)));
		GroupRemoveUnit(g2, Picked2);
	}
	caster[null] = null;
	target[null] = null;
	dammi[null] = null;
	p[null] = null;
	g[null] = null;
	DestroyGroup(g2);
	g2[null] = null;
	DestroyGroup(g3);
	g3[null] = null;
	DestroyGroup(g4);
	g4[null] = null;
}
bool Trig_Earth_Split_Conditions() {
	return GetSpellAbilityId() == 'A0OQ';
}
void InitTrig_Earth_Split() {
	int index = 0;
	gg_trg_Earth_Split[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Earth_Split, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Earth_Split, Condition(Trig_Earth_Split_Conditions));
	TriggerAddAction(gg_trg_Earth_Split, Trig_Earth_Split_Actions);
}
void Trig_Ancient_Help_Move_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	group gdamage;
	float damage;
	float heal;
	int wait = LoadInteger(udg_hash, h, 5);
	int waitgo = LoadInteger(udg_hash, h, $D);
	float face;
	unit dammi;
	unit wave;
	float x;
	float y;
	player p;
	group g;
	unit Picked;
	effect ef;
	bool alife = true;
	float scale;
	float aoe;
	wait[wait - 1] = wait - 1;
	SaveInteger(udg_hash, h, 5, wait);
	if (wait == waitgo) {
		SaveBoolean(udg_hash, h, $A, false);
		dammi[LoadUnitHandle(udg_hash, h, 7)] = LoadUnitHandle(udg_hash, h, 7);
		face[LoadReal(udg_hash, h, 6)] = LoadReal(udg_hash, h, 6);
		wave[CreateUnit(GetOwningPlayer(caster), 'h00U', GetUnitX(dammi), GetUnitY(dammi), GetUnitFacing(dammi))] = CreateUnit(GetOwningPlayer(caster), 'h00U', GetUnitX(dammi), GetUnitY(dammi), GetUnitFacing(dammi));
		ef[AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Shockwave\\ShockwaveMissile.mdl", wave, "origin")] = AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Shockwave\\ShockwaveMissile.mdl", wave, "origin");
		SaveUnitHandle(udg_hash, h, 8, wave);
		scale[LoadReal(udg_hash, h, $B)] = LoadReal(udg_hash, h, $B);
		SetUnitScale(wave, scale, scale, scale);
		SaveEffectHandle(udg_hash, h, 9, ef);
		ef[null] = null;
		wave[null] = null;
		RemoveUnit(dammi);
		dammi[null] = null;
	}
	if ((wait > 0) && (wait < waitgo)) {
		wave[LoadUnitHandle(udg_hash, h, 8)] = LoadUnitHandle(udg_hash, h, 8);
		face[LoadReal(udg_hash, h, 6)] = LoadReal(udg_hash, h, 6);
		x[GetUnitX(wave) + 30. * Cos(face * bj_DEGTORAD)] = GetUnitX(wave) + 30. * Cos(face * bj_DEGTORAD);
		y[GetUnitY(wave) + 30. * Sin(face * bj_DEGTORAD)] = GetUnitY(wave) + 30. * Sin(face * bj_DEGTORAD);
		SetUnitPosition(wave, x, y);
		g[CreateGroup()] = CreateGroup();
		p[GetOwningPlayer(caster)] = GetOwningPlayer(caster);
		damage[LoadReal(udg_hash, h, 3)] = LoadReal(udg_hash, h, 3);
		heal[LoadReal(udg_hash, h, 4)] = LoadReal(udg_hash, h, 4);
		gdamage[LoadGroupHandle(udg_hash, h, 2)] = LoadGroupHandle(udg_hash, h, 2);
		aoe[LoadReal(udg_hash, h, $C)] = LoadReal(udg_hash, h, $C);
		GroupEnumUnitsInRange(g, x, y, aoe, null);
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && IsUnitInGroup(Picked, gdamage) == false && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				GroupAddUnit(gdamage, Picked);
				DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Effects\\Burning Core.mdx", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Effects\\Burning Core.mdx", Picked, "origin"));
				StunUnitTimed(Picked, 2.5);
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			}
			if (IsUnitAlly(Picked, p) && IsUnitInGroup(Picked, gdamage) == false && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				GroupAddUnit(gdamage, Picked);
				SetUnitState(Picked, UNIT_STATE_LIFE, GetUnitState(Picked, UNIT_STATE_LIFE) + heal);
				DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", Picked, "origin"), 1.85);
			}
			GroupRemoveUnit(g, Picked);
		}
		SaveGroupHandle(udg_hash, h, 2, gdamage);
		wave[null] = null;
		GroupClear(g);
		DestroyGroup(g);
		g[null] = null;
		p[null] = null;
		gdamage[null] = null;
	}
	if (wait <= 0) {
		wave[LoadUnitHandle(udg_hash, h, 8)] = LoadUnitHandle(udg_hash, h, 8);
		ef[LoadEffectHandle(udg_hash, h, 9)] = LoadEffectHandle(udg_hash, h, 9);
		KillUnit(wave);
		DestroyEffect(ef);
		gdamage[LoadGroupHandle(udg_hash, h, 2)] = LoadGroupHandle(udg_hash, h, 2);
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	caster[null] = null;
	p[null] = null;
	Picked[null] = null;
	dammi[null] = null;
}
void Trig_Ancient_Help_Actions() {
	unit caster = GetSpellAbilityUnit();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	unit target = GetSpellTargetUnit();
	float angle;
	group gdamage = CreateGroup();
	int lvl = GetUnitAbilityLevel(caster, 'A0OV');
	int lvlup = GetUnitAbilityLevel(caster, 'A0PX');
	float damage;
	float heal;
	location loc;
	float tx;
	float ty;
	int wait = 40 + 20;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	unit dammi;
	float scale;
	float aoe;
	int waitgo;
	if (lvl > 0) {
		damage[(-25. + 175. * lvl) + (GetHeroInt(caster, true) * ((lvl * .75) + .25))] = (-25. + 175. * lvl) + (GetHeroInt(caster, true) * ((lvl * .75) + .25));
		heal[(200. * lvl) + (GetHeroInt(caster, true) * 1.25 * lvl)] = (200. * lvl) + (GetHeroInt(caster, true) * 1.25 * lvl);
		scale[1.2] = 1.2;
		aoe[125.] = 125.;
		waitgo[40] = 40;
	}
	if (lvlup > 0) {
		damage[(-25. + 175. * lvlup) + (GetHeroInt(caster, true) * ((lvlup * .75) + .25))] = (-25. + 175. * lvlup) + (GetHeroInt(caster, true) * ((lvlup * .75) + .25));
		heal[(200. * lvlup) + (GetHeroInt(caster, true) * 1.25 * lvlup)] = (200. * lvlup) + (GetHeroInt(caster, true) * 1.25 * lvlup);
		scale[1.6] = 1.6;
		wait[80 + 20] = 80 + 20;
		aoe[200.] = 200.;
		waitgo[80] = 80;
	}
	if (target == null) {
		loc[GetSpellTargetLoc()] = GetSpellTargetLoc();
		tx[GetLocationX(loc)] = GetLocationX(loc);
		ty[GetLocationY(loc)] = GetLocationY(loc);
	else
		tx[GetUnitX(target)] = GetUnitX(target);
		ty[GetUnitY(target)] = GetUnitY(target);
	}
	angle[bj_RADTODEG * Atan2(ty - y, tx - x)] = bj_RADTODEG * Atan2(ty - y, tx - x);
	dammi[CreateUnit(Player(5), 'h00L', x - 200. * Cos(angle * bj_DEGTORAD), y - 200. * Sin(angle * bj_DEGTORAD), angle)] = CreateUnit(Player(5), 'h00L', x - 200. * Cos(angle * bj_DEGTORAD), y - 200. * Sin(angle * bj_DEGTORAD), angle);
	SetUnitVertexColor(dammi, $F8, $9A, 0, 'd');
	SetUnitScale(dammi, 1.5, 1.5, 1.5);
	SetUnitAnimation(dammi, "Attack Slam");
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveGroupHandle(udg_hash, h, 2, gdamage);
	SaveReal(udg_hash, h, 3, damage);
	SaveReal(udg_hash, h, 4, heal);
	SaveInteger(udg_hash, h, 5, wait);
	SaveReal(udg_hash, h, 6, angle);
	SaveUnitHandle(udg_hash, h, 7, dammi);
	SaveBoolean(udg_hash, h, $A, true);
	SaveReal(udg_hash, h, $B, scale);
	SaveReal(udg_hash, h, $C, aoe);
	SaveInteger(udg_hash, h, $D, waitgo);
	TimerStart(t, .03, true, Trig_Ancient_Help_Move_Actions);
	caster[null] = null;
	target[null] = null;
	gdamage[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	t[null] = null;
	dammi[null] = null;
}
bool Trig_Ancient_Help_Conditions() {
	return (GetSpellAbilityId() == 'A0OV' || GetSpellAbilityId() == 'A0PX');
}
void InitTrig_Ancient_Help() {
	int index = 0;
	gg_trg_Ancient_Help[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Ancient_Help, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Ancient_Help, Condition(Trig_Ancient_Help_Conditions));
	TriggerAddAction(gg_trg_Ancient_Help, Trig_Ancient_Help_Actions);
}
void Trig_SpiritBreaker_Load_Actions() {
	AbilityPreload('A0OM', 6);
	AbilityPreload('A0OQ', 6);
	AbilityPreload('A0OP', 6);
	AbilityPreload('A0OV', 3);
	AbilityPreload('A0OU', 1);
	AbilityPreload('B04Z', 1);
	AbilityPreload('B050', 1);
	UnitPreload('h00L');
	EffectPreload("Abilities\\Spells\\Orc\\StasisTrap\\StasisTotemTarget.mdl");
	EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPriest.mdl");
	EffectPreload("Effects\\Nebula.mdx");
	EffectPreload("Effects\\PyroMissle.mdx");
	EffectPreload("Effects\\RedAftershock.mdl");
	EffectPreload("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl");
	EffectPreload("Abilities\\Spells\\Orc\\Shockwave\\ShockwaveMissile.mdl");
	EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl");
	EffectPreload("Effects\\Burning Core.mdx");
	EnableTrigger(gg_trg_Ancient_Communication);
	EnableTrigger(gg_trg_Learn_Power_of_Ancestors);
	EnableTrigger(gg_trg_Switch_Power_of_Ancestors);
	EnableTrigger(gg_trg_Earth_Split);
	EnableTrigger(gg_trg_Ancient_Help);
}
void InitTrig_SpiritBreaker_Load() {
	gg_trg_SpiritBreaker_Load[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_SpiritBreaker_Load, Trig_SpiritBreaker_Load_Actions);
}
void Trig_Dash_Dest_Actions() {
	KillDestructable(GetEnumDestructable());
}
void Trig_Dash_Move_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	group gdamage = LoadGroupHandle(udg_hash, h, 2);
	float damage = LoadReal(udg_hash, h, 3);
	int lvl = LoadInteger(udg_hash, h, 4);
	int wait = LoadInteger(udg_hash, h, 5);
	float face = LoadReal(udg_hash, h, 6);
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	player p = GetOwningPlayer(caster);
	group g = CreateGroup();
	unit Picked;
	float angle;
	float angle2;
	unit dammi;
	bool alife = true;
	rect r = Rect(x - 100., y - 100., x + 100., y + 100.);
	EnumDestructablesInRect(r, null, Trig_Dash_Dest_Actions);
	if (GetUnitState(caster, UNIT_STATE_LIFE) < .405) {
		alife[false] = false;
	}
	if (wait > 0 && alife) {
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 5, wait);
		SetUnitFacing(caster, face);
		if (wait - (wait / 5) * 5 == 0) {
			SetUnitAnimationByIndex(caster, 6);
		}
		GroupEnumUnitsInRange(g, x, y, 125., null);
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && IsUnitInGroup(Picked, gdamage) == false && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				GroupAddUnit(gdamage, Picked);
				DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPeasant.mdl", Picked, "origin"));
				DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl", Picked, "origin"));
				dammi[CreateUnit(p, 'h00U', x, y, .0)] = CreateUnit(p, 'h00U', x, y, .0);
				UnitApplyTimedLife(dammi, 'BTLF', .5);
				UnitAddAbility(dammi, 'A0P1');
				SetUnitAbilityLevel(dammi, 'A0P1', lvl);
				IssueTargetOrderById(dammi, $D006B, Picked);
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				dammi[null] = null;
			}
			GroupRemoveUnit(g, Picked);
		}
		SaveGroupHandle(udg_hash, h, 2, gdamage);
	else
		SetUnitPathing(caster, true);
		SetUnitTimeScale(caster, 1.);
		SetUnitAnimation(caster, "stand");
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	caster[null] = null;
	gdamage[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	p[null] = null;
	Picked[null] = null;
	dammi[null] = null;
	RemoveRect(r);
	r[null] = null;
}
void Trig_Dash_Actions() {
	unit caster = GetSpellAbilityUnit();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	unit target = GetSpellTargetUnit();
	float angle;
	group gdamage = CreateGroup();
	int lvl = GetUnitAbilityLevel(caster, 'A0P0');
	float damage = (10. + (30. * lvl)) + (GetHeroAgi(caster, true) * (.3 + .5 * lvl));
	location loc;
	float tx;
	float ty;
	float dist;
	float time;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	SetUnitAnimation(caster, "stand");
	SetUnitPathing(caster, false);
	SetUnitAnimationByIndex(caster, 6);
	SetUnitTimeScale(caster, 2.);
	if (target == null) {
		loc[GetSpellTargetLoc()] = GetSpellTargetLoc();
		tx[GetLocationX(loc)] = GetLocationX(loc);
		ty[GetLocationY(loc)] = GetLocationY(loc);
	else
		tx[GetUnitX(target)] = GetUnitX(target);
		ty[GetUnitY(target)] = GetUnitY(target);
	}
	angle[bj_RADTODEG * Atan2(ty - y, tx - x)] = bj_RADTODEG * Atan2(ty - y, tx - x);
	dist[SquareRoot((tx - x) * (tx - x) + (ty - y) * (ty - y))] = SquareRoot((tx - x) * (tx - x) + (ty - y) * (ty - y));
	if (target == caster) {
		angle[GetUnitFacing(caster)] = GetUnitFacing(caster);
		dist[900.] = 900.;
	}
	time[dist / 900.] = dist / 900.;
	MoveUnit(caster, time, 900., .0, angle, .0, true);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveGroupHandle(udg_hash, h, 2, gdamage);
	SaveReal(udg_hash, h, 3, damage);
	SaveInteger(udg_hash, h, 4, lvl);
	SaveInteger(udg_hash, h, 5, R2I(dist / 27));
	SaveReal(udg_hash, h, 6, angle);
	TimerStart(t, .03, true, Trig_Dash_Move_Actions);
	caster[null] = null;
	target[null] = null;
	gdamage[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	t[null] = null;
}
bool Trig_Dash_Conditions() {
	return GetSpellAbilityId() == 'A0P0';
}
void InitTrig_Dash() {
	int index = 0;
	gg_trg_Dash[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Dash, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Dash, Condition(Trig_Dash_Conditions));
	TriggerAddAction(gg_trg_Dash, Trig_Dash_Actions);
}
void Trig_Dash_Remove_Damge_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	int alldamage = LoadInteger(udg_hash, h, 2);
	effect ef = LoadEffectHandle(udg_hash, h, 3);
	SetAttackAbilityLevel(caster, -alldamage);
	DestroyEffect(ef);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	ef[null] = null;
	t[null] = null;
	caster[null] = null;
}
void Trig_Dagger_Throw_Dest_Actions() {
	KillDestructable(GetEnumDestructable());
}
void Trig_Dagger_Throw_Move_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	group gdamage = LoadGroupHandle(udg_hash, h, 2);
	float damage = LoadReal(udg_hash, h, 3);
	int adddamage = LoadInteger(udg_hash, h, 4);
	int wait = LoadInteger(udg_hash, h, 5);
	float angle = LoadReal(udg_hash, h, 6);
	unit dagger = LoadUnitHandle(udg_hash, h, 7);
	bool tuda = LoadBoolean(udg_hash, h, 8);
	int alldamage = LoadInteger(udg_hash, h, 9);
	float x = GetUnitX(dagger);
	float y = GetUnitY(dagger);
	player p = GetOwningPlayer(caster);
	group g = CreateGroup();
	unit Picked;
	bool alife = true;
	float dist;
	bool dest = false;
	rect r = Rect(x - 100., y - 100., x + 100., y + 100.);
	timer t2;
	int h2;
	EnumDestructablesInRect(r, null, Trig_Dagger_Throw_Dest_Actions);
	if ((wait > 0) && tuda) {
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 5, wait);
		SetUnitPosition(dagger, x + 24. * Cos((angle) * bj_DEGTORAD), y + 24. * Sin((angle) * bj_DEGTORAD));
	}
	if (wait == 0) {
		tuda[false] = false;
		SaveBoolean(udg_hash, h, 8, tuda);
	}
	if (tuda == false) {
		angle[bj_RADTODEG * Atan2((GetUnitY(caster) - y), (GetUnitX(caster) - x))] = bj_RADTODEG * Atan2((GetUnitY(caster) - y), (GetUnitX(caster) - x));
		dist[SquareRoot((GetUnitX(caster) - x) * (GetUnitX(caster) - x) + (GetUnitY(caster) - y) * (GetUnitY(caster) - y))] = SquareRoot((GetUnitX(caster) - x) * (GetUnitX(caster) - x) + (GetUnitY(caster) - y) * (GetUnitY(caster) - y));
		SetUnitPosition(dagger, x + 24. * Cos((angle) * bj_DEGTORAD), y + 24. * Sin((angle) * bj_DEGTORAD));
		if (dist < 50.) {
			dest[true] = true;
		}
	}
	GroupEnumUnitsInRange(g, x, y, 125., null);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if (IsUnitEnemy(Picked, p) && IsUnitInGroup(Picked, gdamage) == false && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			GroupAddUnit(gdamage, Picked);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl", Picked, "chest"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl", Picked, "origin"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl", Picked, "head"));
			DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPeasant.mdl", Picked, "origin"));
			DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl", Picked, "origin"));
			DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", Picked, "chest"));
			alldamage[alldamage + adddamage] = alldamage + adddamage;
			UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
		}
		GroupRemoveUnit(g, Picked);
	}
	SaveInteger(udg_hash, h, 9, alldamage);
	SaveGroupHandle(udg_hash, h, 2, gdamage);
	if (dest) {
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		RemoveUnit(dagger);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
		if (alldamage > 0) {
			SetAttackAbilityLevel(caster, alldamage);
			t2[CreateTimer()] = CreateTimer();
			h2[GetHandleId(t2)] = GetHandleId(t2);
			SaveUnitHandle(udg_hash, h2, 1, caster);
			SaveInteger(udg_hash, h2, 2, alldamage);
			SaveEffectHandle(udg_hash, h2, 3, AddSpecialEffectTarget("Effects\\Prismatic Missile Fixed.mdx", caster, "weapon"));
			TimerStart(t2, 6., false, Trig_Dash_Remove_Damge_Actions);
			t2[null] = null;
		}
	}
	t[null] = null;
	caster[null] = null;
	gdamage[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	p[null] = null;
	Picked[null] = null;
	RemoveRect(r);
	r[null] = null;
	dagger[null] = null;
}
void Trig_Dagger_Throw_Actions() {
	unit caster = GetSpellAbilityUnit();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	unit target = GetSpellTargetUnit();
	float angle;
	group gdamage = CreateGroup();
	int lvl = GetUnitAbilityLevel(caster, 'A0P2');
	float damage = (40. * lvl);
	int adddamage = 2 + lvl;
	int alldamage = 0;
	location loc;
	float tx;
	float ty;
	float dist;
	unit dagger;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	if (target == null) {
		loc[GetSpellTargetLoc()] = GetSpellTargetLoc();
		tx[GetLocationX(loc)] = GetLocationX(loc);
		ty[GetLocationY(loc)] = GetLocationY(loc);
	else
		tx[GetUnitX(target)] = GetUnitX(target);
		ty[GetUnitY(target)] = GetUnitY(target);
	}
	angle[bj_RADTODEG * Atan2(ty - y, tx - x)] = bj_RADTODEG * Atan2(ty - y, tx - x);
	dist[SquareRoot((tx - x) * (tx - x) + (ty - y) * (ty - y))] = SquareRoot((tx - x) * (tx - x) + (ty - y) * (ty - y));
	if (target == caster) {
		angle[GetUnitFacing(caster)] = GetUnitFacing(caster);
		dist[900.] = 900.;
	}
	dagger[CreateUnit(GetOwningPlayer(caster), 'h00N', x, y, angle)] = CreateUnit(GetOwningPlayer(caster), 'h00N', x, y, angle);
	SetUnitX(dagger, x + 20. * Cos((angle) * bj_DEGTORAD));
	SetUnitY(dagger, y + 20. * Sin((angle) * bj_DEGTORAD));
	SetUnitTimeScale(dagger, 4.);
	SetUnitScale(dagger, 1.5, 1.5, 1.5);
	SetUnitPathing(dagger, false);
	SetUnitFlyHeight(dagger, 50., .0);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveGroupHandle(udg_hash, h, 2, gdamage);
	SaveReal(udg_hash, h, 3, damage);
	SaveInteger(udg_hash, h, 4, adddamage);
	SaveInteger(udg_hash, h, 5, R2I(dist / 24));
	SaveReal(udg_hash, h, 6, angle);
	SaveUnitHandle(udg_hash, h, 7, dagger);
	SaveBoolean(udg_hash, h, 8, true);
	SaveInteger(udg_hash, h, 9, alldamage);
	TimerStart(t, .03, true, Trig_Dagger_Throw_Move_Actions);
	caster[null] = null;
	target[null] = null;
	gdamage[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	t[null] = null;
}
bool Trig_Dagger_Throw_Conditions() {
	return GetSpellAbilityId() == 'A0P2';
}
void InitTrig_Dagger_Throw() {
	int index = 0;
	gg_trg_Dagger_Throw[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Dagger_Throw, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Dagger_Throw, Condition(Trig_Dagger_Throw_Conditions));
	TriggerAddAction(gg_trg_Dagger_Throw, Trig_Dagger_Throw_Actions);
}
void Trig_Kara_Justice_perodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	group gdamage = LoadGroupHandle(udg_hash, h, 2);
	group gdamage2 = LoadGroupHandle(udg_hash, h, 3);
	float damage = LoadReal(udg_hash, h, 4);
	float angle = LoadReal(udg_hash, h, 5);
	player p = GetOwningPlayer(caster);
	unit Picked;
	unit target;
	RandomUnitFromGroup(1, gdamage);
	Picked[FirstOfGroup(udg_GroupRandomUnitFromGroup)] = FirstOfGroup(udg_GroupRandomUnitFromGroup);
	if (Picked != null) {
		GroupRemoveUnit(gdamage2, Picked);
	}
	gdamage[CreateGroup()] = CreateGroup();
	GroupToGroup(gdamage2, gdamage);
	SaveGroupHandle(udg_hash, h, 2, gdamage);
	SaveGroupHandle(udg_hash, h, 3, gdamage2);
	if (Picked != null) {
		PlaySoundBJ(gg_snd_WardenAttackEffort1);
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl", Picked, "chest"));
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl", Picked, "origin"));
		DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl", Picked, "head"));
		DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl", Picked, "origin"));
		DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", Picked, "chest"));
		SetUnitPosition(caster, GetUnitX(Picked) - 50. * Cos(angle * bj_DEGTORAD), GetUnitY(Picked) - 50. * Sin(angle * bj_DEGTORAD));
		SetUnitAnimation(caster, "stop");
		SetUnitAnimation(caster, "attack");
		if (GetRandomInt(1, 'd') <= ($A + 5 * GetUnitAbilityLevel(caster, 'A0P3')) && GetUnitAbilityLevel(caster, 'A0P3') > 0) {
			UnitDamageTarget(caster, Picked, 2 * damage, false, false, ATTACK_TYPE_MELEE, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS);
			CreateTexttag(udg_ColorString[1] + I2S(R2I(2 * damage)) + "!|r", .022, $FF, GetUnitX(Picked) - 18., GetUnitY(Picked) + 15., .0, .0, .035, 3.5);
		else
			UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_MELEE, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS);
		}
	else
		SetUnitVertexColor(caster, $FF, $FF, $FF, $FF);
		SetUnitTimeScale(caster, 1.);
		SetUnitInvulnerable(caster, false);
		SetUnitPosition(caster, LoadReal(udg_hash, h, 6), LoadReal(udg_hash, h, 7));
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		gdamage[null] = null;
		GroupClear(gdamage2);
		DestroyGroup(gdamage2);
		gdamage2[null] = null;
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	caster[null] = null;
	p[null] = null;
	gdamage[null] = null;
	gdamage2[null] = null;
	Picked[null] = null;
	target[null] = null;
}
void Trig_Kara_Justice_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	int lvl = GetUnitAbilityLevel(caster, 'A0P5');
	location loc = GetSpellTargetLoc();
	float x = GetLocationX(loc);
	float y = GetLocationY(loc);
	float damage = 75 * lvl + (.25 + (.75 * lvl)) * GetHeroAgi(caster, true);
	group g = CreateGroup();
	group gdamage = CreateGroup();
	group gdamage2 = CreateGroup();
	timer t = CreateTimer();
	int h = GetHandleId(t);
	unit Picked;
	float angle = bj_RADTODEG * Atan2(y - GetUnitY(caster), x - GetUnitX(caster));
	GroupEnumUnitsInRange(g, x, y, 500., null);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			GroupAddUnit(gdamage, Picked);
			GroupAddUnit(gdamage2, Picked);
		}
		GroupRemoveUnit(g, Picked);
	}
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveGroupHandle(udg_hash, h, 2, gdamage);
	SaveGroupHandle(udg_hash, h, 3, gdamage2);
	SaveReal(udg_hash, h, 4, damage);
	SaveReal(udg_hash, h, 5, angle);
	SaveReal(udg_hash, h, 6, GetUnitX(caster));
	SaveReal(udg_hash, h, 7, GetUnitY(caster));
	SetUnitVertexColor(caster, $FF, $FF, $FF, 'd');
	SetUnitTimeScale(caster, 4.);
	SetUnitInvulnerable(caster, true);
	UnitPeriodicPostionMove(caster, .03, .2 * CountUnitsInGroup(gdamage));
	TimerStart(t, .2, true, Trig_Kara_Justice_perodic_Actions);
	caster[null] = null;
	p[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	t[null] = null;
	g[null] = null;
	gdamage[null] = null;
	gdamage2[null] = null;
}
bool Trig_Kara_Justice_Conditions() {
	return GetSpellAbilityId() == 'A0P5';
}
void InitTrig_Kara_Justice() {
	int index = 0;
	gg_trg_Kara_Justice[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Kara_Justice, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Kara_Justice, Condition(Trig_Kara_Justice_Conditions));
	TriggerAddAction(gg_trg_Kara_Justice, Trig_Kara_Justice_Actions);
}
void Trig_Warden_Load_Actions() {
	AbilityPreload('A0P0', 6);
	AbilityPreload('A0P2', 6);
	AbilityPreload('A0P3', 6);
	AbilityPreload('A0P5', 3);
	AbilityPreload('A0P1', 6);
	AbilityPreload('B051', 1);
	EffectPreload("Effects\\CosmicTouch.MDX");
	EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPeasant.mdl");
	EffectPreload("Effects\\Prismatic Missile Fixed.mdx");
	EffectPreload("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl");
	EffectPreload("Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl");
	EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl");
	EnableTrigger(gg_trg_Dash);
	EnableTrigger(gg_trg_Dagger_Throw);
	EnableTrigger(gg_trg_Kara_Justice);
}
void InitTrig_Warden_Load() {
	gg_trg_Warden_Load[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Warden_Load, Trig_SpiritBreaker_Load_Actions);
}
void Trig_Strength_Fist_Move_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 7);
	player p = GetOwningPlayer(caster);
	float damage = LoadReal(udg_hash, h, 1);
	int lvl = LoadInteger(udg_hash, h, 2);
	unit orb = LoadUnitHandle(udg_hash, h, 3);
	float xt = LoadReal(udg_hash, h, 4);
	float yt = LoadReal(udg_hash, h, 5);
	group g = CreateGroup();
	unit Picked;
	unit dammi;
	GroupEnumUnitsInRange(g, xt, yt, 250., null);
	DestroyEffect(AddSpecialEffect("Effects\\RedAftershock.mdx", xt, yt));
	DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", xt, yt));
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			dammi[CreateUnit(p, 'h00U', xt, yt, .0)] = CreateUnit(p, 'h00U', xt, yt, .0);
			UnitApplyTimedLife(dammi, 'BTLF', .5);
			UnitAddAbility(dammi, 'A0P8');
			SetUnitAbilityLevel(dammi, 'A0P8', lvl);
			IssueTargetOrderById(dammi, $D006B, Picked);
			dammi[null] = null;
			UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
		}
		GroupRemoveUnit(g, Picked);
	}
	Picked[null] = null;
	KillUnit(orb);
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	KillUnit(orb);
	p[null] = null;
	DestroyTimer(t);
	caster[null] = null;
	orb[null] = null;
	FlushChildHashtable(udg_hash, h);
	t[null] = null;
}
void Trig_Strength_Fist_Actions() {
	unit caster = GetSpellAbilityUnit();
	location loc = GetSpellTargetLoc();
	float xt = GetLocationX(loc);
	float yt = GetLocationY(loc);
	int lvl = GetUnitAbilityLevel(caster, 'A0P7');
	float damage = 5. + (35. * lvl) + (GetHeroStr(caster, true) * .5 * lvl);
	player p = GetOwningPlayer(caster);
	unit orb;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	orb[CreateUnit(p, 'h00K', xt, yt, 270.)] = CreateUnit(p, 'h00K', xt, yt, 270.);
	UnitAddAbility(orb, 'Amrf');
	UnitRemoveAbility(orb, 'Amrf');
	SetUnitFlyHeight(orb, 800., .0);
	SetUnitFlyHeight(orb, 25., 1550.);
	SaveReal(udg_hash, h, 1, damage);
	SaveInteger(udg_hash, h, 2, lvl);
	SaveUnitHandle(udg_hash, h, 3, orb);
	SaveReal(udg_hash, h, 4, xt);
	SaveReal(udg_hash, h, 5, yt);
	SaveUnitHandle(udg_hash, h, 7, caster);
	TimerStart(t, .5, false, Trig_Strength_Fist_Move_Actions);
	caster[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	t[null] = null;
	p[null] = null;
	orb[null] = null;
}
bool Trig_Strength_Fist_Conditions() {
	return GetSpellAbilityId() == 'A0P7';
}
void InitTrig_Strength_Fist() {
	int index = 0;
	gg_trg_Strength_Fist[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Strength_Fist, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Strength_Fist, Condition(Trig_Strength_Fist_Conditions));
	TriggerAddAction(gg_trg_Strength_Fist, Trig_Strength_Fist_Actions);
}
void Trig_Fighting_Impact_14sec_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit target = LoadUnitHandle(udg_hash, h, 1);
	int as = LoadInteger(udg_hash, h, 2);
	int addarmor = LoadInteger(udg_hash, h, 3);
	effect ef;
	group g = CreateGroup();
	unit Picked;
	player p = GetOwningPlayer(target);
	float damage = LoadReal(udg_hash, GetHandleId(target), $96);
	unit caster = LoadUnitHandle(udg_hash, GetHandleId(target), $97);
	DestroyEffect(AddSpecialEffect("Effects\\LightNova.mdl", GetUnitX(target), GetUnitY(target)));
	DestroyEffect(AddSpecialEffectTarget("Effects\\DivineRage.mdx", target, "origin"));
	GroupEnumUnitsInRange(g, GetUnitX(target), GetUnitY(target), 500., null);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			DestroyEffect(AddSpecialEffectTarget("Effects\\DivineRage.mdx", Picked, "origin"));
			UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
		}
		GroupRemoveUnit(g, Picked);
	}
	SetAttackSpeedAbilityLevel(target, -as);
	ef[LoadEffectHandle(udg_hash, h, 4)] = LoadEffectHandle(udg_hash, h, 4);
	DestroyEffect(ef);
	ef[null] = null;
	ef[LoadEffectHandle(udg_hash, h, 5)] = LoadEffectHandle(udg_hash, h, 5);
	DestroyEffect(ef);
	ef[null] = null;
	ef[LoadEffectHandle(udg_hash, h, 6)] = LoadEffectHandle(udg_hash, h, 6);
	DestroyEffect(ef);
	ef[null] = null;
	SaveReal(udg_hash, GetHandleId(target), $93, .0);
	SaveInteger(udg_hash, GetHandleId(target), $94, 0);
	SaveTimerHandle(udg_hash, GetHandleId(target), $95, null);
	FlushChildHashtable(udg_hash, h);
	DestroyTimer(t);
	t[null] = null;
	ef[null] = null;
	DestroyGroup(g);
	g[null] = null;
	Picked[null] = null;
	p[null] = null;
	caster[null] = null;
}
void Trig_Fighting_Impact_Actions() {
	unit caster = GetSpellAbilityUnit();
	int lvl = GetUnitAbilityLevel(caster, 'A0P6');
	unit target = GetSpellTargetUnit();
	int as = 20 * lvl + $A;
	float shield = 75. * lvl;
	float damage = 40 * lvl;
	effect ef;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	timer t2;
	int h2;
	string smainstat = LoadStr(udg_hash, GetUnitTypeId(target), 70);
	if (LoadTimerHandle(udg_hash, GetHandleId(target), $95) != null) {
		t2[LoadTimerHandle(udg_hash, GetHandleId(target), $95)] = LoadTimerHandle(udg_hash, GetHandleId(target), $95);
		h2[GetHandleId(t2)] = GetHandleId(t2);
		ef[LoadEffectHandle(udg_hash, h2, 4)] = LoadEffectHandle(udg_hash, h2, 4);
		DestroyEffect(ef);
		ef[null] = null;
		ef[LoadEffectHandle(udg_hash, h2, 5)] = LoadEffectHandle(udg_hash, h2, 5);
		DestroyEffect(ef);
		ef[null] = null;
		ef[LoadEffectHandle(udg_hash, h2, 6)] = LoadEffectHandle(udg_hash, h2, 6);
		DestroyEffect(ef);
		ef[null] = null;
		SetAttackSpeedAbilityLevel(target, -LoadInteger(udg_hash, GetHandleId(target), $94));
		FlushChildHashtable(udg_hash, h2);
		DestroyTimer(t2);
		t2[null] = null;
	}
	if (smainstat == "str") {
		shield[shield + (.2 + .3 * lvl * GetHeroStr(target, true))] = shield + (.2 + .3 * lvl * GetHeroStr(target, true));
	}
	if (smainstat == "agi") {
		shield[shield + (.2 + .3 * lvl * GetHeroAgi(target, true))] = shield + (.2 + .3 * lvl * GetHeroAgi(target, true));
	}
	if (smainstat == "int") {
		shield[shield + (.2 + .3 * lvl * GetHeroInt(target, true))] = shield + (.2 + .3 * lvl * GetHeroInt(target, true));
	}
	ef[AddSpecialEffectTarget("Effects\\LifeHigh.mdx", target, "weapon")] = AddSpecialEffectTarget("Effects\\LifeHigh.mdx", target, "weapon");
	SaveEffectHandle(udg_hash, h, 5, ef);
	ef[null] = null;
	ef[AddSpecialEffectTarget("Abilities\\Spells\\Human\\DivineShield\\DivineShieldTarget.mdl", target, "origin")] = AddSpecialEffectTarget("Abilities\\Spells\\Human\\DivineShield\\DivineShieldTarget.mdl", target, "origin");
	SaveEffectHandle(udg_hash, h, 6, ef);
	ef[null] = null;
	SetAttackSpeedAbilityLevel(target, as);
	SaveReal(udg_hash, GetHandleId(target), $93, shield);
	SaveInteger(udg_hash, GetHandleId(target), $94, as);
	SaveTimerHandle(udg_hash, GetHandleId(target), $95, t);
	SaveReal(udg_hash, GetHandleId(target), $96, damage);
	SaveUnitHandle(udg_hash, GetHandleId(target), $97, caster);
	SaveUnitHandle(udg_hash, h, 1, target);
	SaveInteger(udg_hash, h, 2, as);
	TimerStart(t, 14., false, Trig_Fighting_Impact_14sec_Actions);
	caster[null] = null;
	ef[null] = null;
	t[null] = null;
}
bool Trig_Fighting_Impact_Conditions() {
	return GetSpellAbilityId() == 'A0P6';
}
void InitTrig_Fighting_Impact() {
	int index = 0;
	gg_trg_Fighting_Impact[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Fighting_Impact, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Fighting_Impact, Condition(Trig_Fighting_Impact_Conditions));
	TriggerAddAction(gg_trg_Fighting_Impact, Trig_Fighting_Impact_Actions);
}
void Trig_Learn_Marshal_Armor_Actions_Timer() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit hero = LoadUnitHandle(udg_hash, h, 1);
	texttag txt = LoadTextTagHandle(udg_hash, h, 2);
	float x = GetUnitX(hero);
	float y = GetUnitY(hero);
	bool alife = LoadBoolean(udg_hash, h, 3);
	int stack;
	if ((GetUnitState(hero, UNIT_STATE_LIFE) < .405 && alife)) {
		alife[false] = false;
		SaveBoolean(udg_hash, h, 3, alife);
		SetTextTagVisibility(txt, false);
	}
	if ((GetUnitState(hero, UNIT_STATE_LIFE) > .405 && alife == false)) {
		alife[true] = true;
		SaveBoolean(udg_hash, h, 3, alife);
		SetTextTagVisibility(txt, true);
	}
	if ((GetUnitState(hero, UNIT_STATE_LIFE) > .405 && alife)) {
		stack[LoadInteger(udg_hash, GetHandleId(hero), $99)] = LoadInteger(udg_hash, GetHandleId(hero), $99);
		SetTextTagText(txt, "|cFFDCDC32" + I2S(stack) + "|r|cFF969696/|r|cFFDCDC32" + I2S(5 * GetUnitAbilityLevel(hero, 'A0P9')) + "|r", .027);
		SetTextTagPos(txt, GetUnitX(hero) - 40., GetUnitY(hero) + 50., .0);
	}
	t[null] = null;
	hero[null] = null;
	txt[null] = null;
}
void Trig_Learn_Marshal_Armor_Actions() {
	int lvl = GetUnitAbilityLevel(GetLearningUnit(), 'A0P9');
	timer t;
	int h;
	texttag txt;
	unit hero = GetLearningUnit();
	int stack = LoadInteger(udg_hash, GetHandleId(hero), $99);
	if (lvl == 1) {
		t[CreateTimer()] = CreateTimer();
		h[GetHandleId(t)] = GetHandleId(t);
		txt[CreateTextTag()] = CreateTextTag();
		SetTextTagText(txt, "|cFFDCDC32" + I2S(stack) + "|r|cFF969696/|r|cFFDCDC32" + I2S(5 * GetUnitAbilityLevel(hero, 'A0P9')) + "|r", .033);
		SetTextTagColor(txt, $FF, $FF, $FF, $FF);
		SetTextTagPos(txt, GetUnitX(hero) - 40., GetUnitY(hero) + 50., .0);
		SetTextTagPermanent(txt, true);
		SaveUnitHandle(udg_hash, h, 1, hero);
		SaveTextTagHandle(udg_hash, h, 2, txt);
		SaveBoolean(udg_hash, h, 3, true);
		TimerStart(t, .03, true, Trig_Learn_Marshal_Armor_Actions_Timer);
		t[null] = null;
		hero[null] = null;
		txt[null] = null;
	}
	hero[null] = null;
}
bool Trig_Learn_Marshal_Armor_Conditions() {
	return GetUnitTypeId(GetLearningUnit()) != 'h00U' && GetLearnedSkill() == 'A0P9';
}
void InitTrig_Learn_Marshal_Armor() {
	int index = 0;
	gg_trg_Learn_Marshal_Armor[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Marshal_Armor, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Learn_Marshal_Armor, Condition(Trig_Learn_Marshal_Armor_Conditions));
	TriggerAddAction(gg_trg_Learn_Marshal_Armor, Trig_Learn_Marshal_Armor_Actions);
}
void Trig_Illusive_Army_Periodic_Damage_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit knight = LoadUnitHandle(udg_hash, h, 1);
	float wait = LoadReal(udg_hash, h, 2);
	float damage;
	float stuntime;
	unit caster;
	group gdamage;
	player p;
	group g;
	unit Picked;
	wait[wait - .04] = wait - .04;
	SaveReal(udg_hash, h, 2, wait);
	if (wait > 0) {
		damage[LoadReal(udg_hash, h, 3)] = LoadReal(udg_hash, h, 3);
		stuntime[LoadReal(udg_hash, h, 4)] = LoadReal(udg_hash, h, 4);
		caster[LoadUnitHandle(udg_hash, h, 5)] = LoadUnitHandle(udg_hash, h, 5);
		g[CreateGroup()] = CreateGroup();
		p[GetOwningPlayer(caster)] = GetOwningPlayer(caster);
		gdamage[LoadGroupHandle(udg_hash, h, 7)] = LoadGroupHandle(udg_hash, h, 7);
		GroupEnumUnitsInRange(g, GetUnitX(knight), GetUnitY(knight), 115., null);
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && IsUnitInGroup(Picked, gdamage) == false && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				GroupAddUnit(gdamage, Picked);
				DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Effects\\DivineRage.mdx", Picked, "origin"));
				StunUnitTimed(Picked, stuntime);
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			}
			GroupRemoveUnit(g, Picked);
		}
		SaveGroupHandle(udg_hash, h, 7, gdamage);
		caster[null] = null;
		DestroyGroup(g);
		g[null] = null;
		p[null] = null;
		gdamage[null] = null;
		Picked[null] = null;
	else
		DestroyEffect(AddSpecialEffect("Effects\\DivineRage.mdx", GetUnitX(knight), GetUnitY(knight)));
		RemoveUnit(knight);
		gdamage[LoadGroupHandle(udg_hash, h, 7)] = LoadGroupHandle(udg_hash, h, 7);
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		gdamage[null] = null;
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	knight[null] = null;
	t[null] = null;
}
void Trig_Illusive_Army_Periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	int wait = LoadInteger(udg_hash, h, 2);
	float damage;
	float x;
	float y;
	float angle;
	float stuntime;
	player p;
	unit knight;
	float xnew;
	float ynew;
	float dist;
	timer t2;
	int h2;
	int perekluchatel;
	int order = GetUnitCurrentOrder(caster);
	int orderId;
	orderId[$D0278] = $D0278;
	if ((orderId != 0)) {
	else
		orderId[UnitId("channel")] = UnitId("channel");
		if ((orderId != 0)) {
		}
	}
	if (wait > 0 && order == orderId) {
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 2, wait);
		damage[LoadReal(udg_hash, h, 3)] = LoadReal(udg_hash, h, 3);
		x[LoadReal(udg_hash, h, 4)] = LoadReal(udg_hash, h, 4);
		y[LoadReal(udg_hash, h, 5)] = LoadReal(udg_hash, h, 5);
		angle[LoadReal(udg_hash, h, 8)] = LoadReal(udg_hash, h, 8);
		stuntime[LoadReal(udg_hash, h, 9)] = LoadReal(udg_hash, h, 9);
		p[GetOwningPlayer(caster)] = GetOwningPlayer(caster);
		perekluchatel[LoadInteger(udg_hash, h, $A)] = LoadInteger(udg_hash, h, $A);
		if (perekluchatel > 0) {
			perekluchatel[-1] = -1;
			SaveInteger(udg_hash, h, $A, perekluchatel);
		else
			perekluchatel[1] = 1;
			SaveInteger(udg_hash, h, $A, perekluchatel);
		}
		dist[perekluchatel * 150. + GetRandomReal(-200., 200.)] = perekluchatel * 150. + GetRandomReal(-200., 200.);
		xnew[x - 200. * Cos(angle * bj_DEGTORAD)] = x - 200. * Cos(angle * bj_DEGTORAD);
		ynew[y - 200. * Sin(angle * bj_DEGTORAD)] = y - 200. * Sin(angle * bj_DEGTORAD);
		xnew[xnew + dist * Cos((angle + 90.) * bj_DEGTORAD)] = xnew + dist * Cos((angle + 90.) * bj_DEGTORAD);
		ynew[ynew + dist * Sin((angle + 90.) * bj_DEGTORAD)] = ynew + dist * Sin((angle + 90.) * bj_DEGTORAD);
		DestroyEffect(AddSpecialEffect("Effects\\DivineRage.mdx", xnew, ynew));
		knight[CreateUnit(p, 'h00P', xnew, ynew, angle)] = CreateUnit(p, 'h00P', xnew, ynew, angle);
		SetUnitVertexColor(knight, $FF, $FF, $E1, 75);
		SetUnitColor(knight, PLAYER_COLOR_YELLOW);
		SetUnitAnimationByIndex(knight, 0);
		MoveUnit(knight, 2., 450., .0, angle, .0, true);
		t2[CreateTimer()] = CreateTimer();
		h2[GetHandleId(t2)] = GetHandleId(t2);
		SaveUnitHandle(udg_hash, h2, 1, knight);
		SaveReal(udg_hash, h2, 2, 2.01);
		SaveReal(udg_hash, h2, 3, damage);
		SaveReal(udg_hash, h2, 4, stuntime);
		SaveUnitHandle(udg_hash, h2, 5, caster);
		SaveGroupHandle(udg_hash, h2, 7, CreateGroup());
		TimerStart(t2, .04, true, Trig_Illusive_Army_Periodic_Damage_Actions);
	else
		RemoveUnit(LoadUnitHandle(udg_hash, GetHandleId(caster), 'u'));
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	caster[null] = null;
}
void Trig_Illusive_Army_Actions() {
	timer t = CreateTimer();
	int h = GetHandleId(t);
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	int lvl = GetUnitAbilityLevel(caster, 'A0PA');
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	float tx;
	float ty;
	float stuntime = 1. + .5 * lvl;
	float damage = 75. * lvl;
	int count = 5 + 5 * lvl;
	unit target = GetSpellTargetUnit();
	float angle;
	location loc;
	if (target == null) {
		loc[GetSpellTargetLoc()] = GetSpellTargetLoc();
		tx[GetLocationX(loc)] = GetLocationX(loc);
		ty[GetLocationY(loc)] = GetLocationY(loc);
	else
		tx[GetUnitX(target)] = GetUnitX(target);
		ty[GetUnitY(target)] = GetUnitY(target);
	}
	angle[bj_RADTODEG * Atan2(ty - y, tx - x)] = bj_RADTODEG * Atan2(ty - y, tx - x);
	AddProgressBar(caster, 195. + (20. * lvl), (1. + .15 * lvl), (count * .4), false, true, 'u', $FF, $E1, 80);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveInteger(udg_hash, h, 2, count);
	SaveReal(udg_hash, h, 3, damage);
	SaveReal(udg_hash, h, 4, x);
	SaveReal(udg_hash, h, 5, y);
	SaveReal(udg_hash, h, 8, angle);
	SaveReal(udg_hash, h, 9, stuntime);
	SaveInteger(udg_hash, h, $A, 1);
	TimerStart(t, .4, true, Trig_Illusive_Army_Periodic_Actions);
	caster[null] = null;
	p[null] = null;
	t[null] = null;
}
bool Trig_Illusive_Army_Conditions() {
	return GetSpellAbilityId() == 'A0PA';
}
void InitTrig_Illusive_Army() {
	int index = 0;
	gg_trg_Illusive_Army[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Illusive_Army, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Illusive_Army, Condition(Trig_Illusive_Army_Conditions));
	TriggerAddAction(gg_trg_Illusive_Army, Trig_Illusive_Army_Actions);
}
void Trig_Marshal_Load_Actions() {
	AbilityPreload('A0P7', 6);
	AbilityPreload('A0P6', 6);
	AbilityPreload('A0P9', 6);
	AbilityPreload('A0PA', 3);
	UnitPreload('h00K');
	AbilityPreload('A0P8', 6);
	AbilityPreload('B052', 1);
	EffectPreload("Effects\\RedAftershock.mdx");
	EffectPreload("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl");
	EffectPreload("Effects\\LightNova.mdl");
	EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl");
	EffectPreload("Effects\\DivineRage.mdx");
	EffectPreload("Effects\\LifeHigh.mdx");
	EffectPreload("Abilities\\Spells\\Human\\DivineShield\\DivineShieldTarget.mdl");
	EffectPreload("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl");
	EnableTrigger(gg_trg_Strength_Fist);
	EnableTrigger(gg_trg_Fighting_Impact);
	EnableTrigger(gg_trg_Learn_Marshal_Armor);
	EnableTrigger(gg_trg_Illusive_Army);
}
void InitTrig_Marshal_Load() {
	gg_trg_Marshal_Load[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Marshal_Load, Trig_Marshal_Load_Actions);
}
void Trig_Remove_Lightning_From_Chain_Lightning_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit Picked = LoadUnitHandle(udg_hash, h, 1);
	int wait = LoadInteger(udg_hash, h, 2);
	unit damaged = LoadUnitHandle(udg_hash, h, 3);
	lightning l = LoadLightningHandle(udg_hash, h, 4);
	location locr = GetUnitLoc(damaged);
	location locd = GetUnitLoc(Picked);
	wait[wait - 1] = wait - 1;
	SaveInteger(udg_hash, h, 2, wait);
	if (LoadInteger(udg_hash, h, 5) == $E4) {
		MoveLightningEx(l, true, GetUnitX(damaged) + 75. * Cos(LoadReal(udg_hash, h, 6) * bj_DEGTORAD), GetUnitY(damaged) + 75. * Sin(LoadReal(udg_hash, h, 6) * bj_DEGTORAD), GetUnitFlyHeight(damaged) + 100. + GetLocationZ(locr), GetUnitX(Picked), GetUnitY(Picked), GetUnitFlyHeight(Picked) + 25. + GetLocationZ(locd));
	else
		MoveLightningEx(l, true, GetUnitX(damaged), GetUnitY(damaged), GetUnitFlyHeight(damaged) + 25. + GetLocationZ(locr), GetUnitX(Picked), GetUnitY(Picked), GetUnitFlyHeight(Picked) + 25. + GetLocationZ(locd));
	}
	if (wait <= 0) {
		DestroyLightning(l);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	Picked[null] = null;
	damaged[null] = null;
	l[null] = null;
	RemoveLocation(locr);
	RemoveLocation(locd);
	locr[null] = null;
	locd[null] = null;
}
void Trig_Chain_Lightning_Move_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	float damage = LoadReal(udg_hash, h, 2);
	unit target = LoadUnitHandle(udg_hash, h, 8);
	int count = LoadInteger(udg_hash, h, 5);
	group gdamage = LoadGroupHandle(udg_hash, h, $E);
	unit target2;
	player p = GetOwningPlayer(caster);
	group g;
	group grup;
	unit Picked;
	timer t2;
	int h2;
	bool first = LoadBoolean(udg_hash, h, $F);
	bool destroy = false;
	location locr;
	lightning l;
	location locd;
	if (count > 0) {
		count[count - 1] = count - 1;
		SaveInteger(udg_hash, h, 5, count);
		g[CreateGroup()] = CreateGroup();
		grup[CreateGroup()] = CreateGroup();
		GroupEnumUnitsInRange(g, GetUnitX(target), GetUnitY(target), 500., null);
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && IsUnitInGroup(Picked, gdamage) == false && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				GroupAddUnit(grup, Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
		Picked[null] = null;
		RandomUnitFromGroup(1, grup);
		GroupAddGroup(udg_GroupRandomUnitFromGroup, g);
		target2[FirstOfGroup(udg_GroupRandomUnitFromGroup)] = FirstOfGroup(udg_GroupRandomUnitFromGroup);
		if (target2 != null) {
			DestroyEffect(AddSpecialEffectTarget("Effects\\EMPBomb.mdx", target2, "chest"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningBolt\\LightningBoltMissile.mdl", target2, "chest"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", target2, "origin"));
			UnitDamageTarget(caster, target2, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			GroupAddUnit(gdamage, target2);
			t2[CreateTimer()] = CreateTimer();
			h2[GetHandleId(t2)] = GetHandleId(t2);
			SaveUnitHandle(udg_hash, h2, 1, target2);
			SaveInteger(udg_hash, h2, 2, $F);
			SaveUnitHandle(udg_hash, h2, 3, target);
			locr[GetUnitLoc(target)] = GetUnitLoc(target);
			locd[GetUnitLoc(target2)] = GetUnitLoc(target2);
			l[AddLightningEx("CLPB", true, GetUnitX(target), GetUnitY(target), GetUnitFlyHeight(target) + 25. + GetLocationZ(locr), GetUnitX(target2), GetUnitY(target2), GetUnitFlyHeight(target2) + 25. + GetLocationZ(locd))] = AddLightningEx("CLPB", true, GetUnitX(target), GetUnitY(target), GetUnitFlyHeight(target) + 25. + GetLocationZ(locr), GetUnitX(target2), GetUnitY(target2), GetUnitFlyHeight(target2) + 25. + GetLocationZ(locd));
			SaveLightningHandle(udg_hash, h2, 4, l);
			l[null] = null;
			RemoveLocation(locr);
			locr[null] = null;
			RemoveLocation(locd);
			locd[null] = null;
			TimerStart(t2, .04, true, Trig_Remove_Lightning_From_Chain_Lightning_Actions);
			t2[null] = null;
			SaveUnitHandle(udg_hash, h, 8, target2);
		else
			destroy[true] = true;
		}
		SaveGroupHandle(udg_hash, h, $E, gdamage);
		target2[null] = null;
		GroupClear(g);
		DestroyGroup(g);
		g[null] = null;
		GroupClear(grup);
		DestroyGroup(grup);
		grup[null] = null;
	else
		destroy[true] = true;
	}
	if (destroy) {
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	gdamage[null] = null;
	t[null] = null;
	p[null] = null;
	caster[null] = null;
	target[null] = null;
}
void Trig_Chain_Lightning_Actions() {
	unit caster = GetSpellAbilityUnit();
	unit target = GetSpellTargetUnit();
	int lvl = GetUnitAbilityLevel(caster, 'A0PP');
	float damage = ($A + 40 * lvl) + (GetHeroInt(caster, true) * (.3 + .2 * lvl));
	int count = 8 + (lvl * 2) - 1;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	group gdamage = CreateGroup();
	location locr;
	lightning l;
	location locd;
	timer t2;
	int h2;
	float angle = (bj_RADTODEG * Atan2(GetUnitY(target) - GetUnitY(caster), GetUnitX(target) - GetUnitX(caster)));
	DestroyEffect(AddSpecialEffectTarget("Effects\\EMPBomb.mdx", target, "chest"));
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningBolt\\LightningBoltMissile.mdl", target, "chest"));
	DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", target, "origin"));
	UnitDamageTarget(caster, target, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
	GroupAddUnit(gdamage, target);
	t2[CreateTimer()] = CreateTimer();
	h2[GetHandleId(t2)] = GetHandleId(t2);
	SaveUnitHandle(udg_hash, h2, 1, target);
	SaveInteger(udg_hash, h2, 2, $F);
	SaveUnitHandle(udg_hash, h2, 3, caster);
	SaveInteger(udg_hash, h2, 5, $E4);
	SaveReal(udg_hash, h2, 6, angle);
	locr[GetUnitLoc(caster)] = GetUnitLoc(caster);
	locd[GetUnitLoc(target)] = GetUnitLoc(target);
	l[AddLightningEx("CLPB", true, GetUnitX(caster) + 75. * Cos(angle * bj_DEGTORAD), GetUnitY(caster) + 75. * Sin(angle * bj_DEGTORAD), GetUnitFlyHeight(caster) + 100. + GetLocationZ(locr), GetUnitX(target), GetUnitY(target), GetUnitFlyHeight(target) + 25. + GetLocationZ(locd))] = AddLightningEx("CLPB", true, GetUnitX(caster) + 75. * Cos(angle * bj_DEGTORAD), GetUnitY(caster) + 75. * Sin(angle * bj_DEGTORAD), GetUnitFlyHeight(caster) + 100. + GetLocationZ(locr), GetUnitX(target), GetUnitY(target), GetUnitFlyHeight(target) + 25. + GetLocationZ(locd));
	SaveLightningHandle(udg_hash, h2, 4, l);
	l[null] = null;
	RemoveLocation(locr);
	locr[null] = null;
	RemoveLocation(locd);
	locd[null] = null;
	TimerStart(t2, .04, true, Trig_Remove_Lightning_From_Chain_Lightning_Actions);
	t2[null] = null;
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 2, damage);
	SaveInteger(udg_hash, h, 5, count);
	SaveUnitHandle(udg_hash, h, 8, target);
	SaveGroupHandle(udg_hash, h, $E, gdamage);
	SaveBoolean(udg_hash, h, $F, true);
	TimerStart(t, .3, true, Trig_Chain_Lightning_Move_Actions);
	caster[null] = null;
	t[null] = null;
	target[null] = null;
	gdamage[null] = null;
}
bool Trig_Chain_Lightning_Conditions() {
	return GetSpellAbilityId() == 'A0PP';
}
void InitTrig_Chain_Lightning() {
	int index = 0;
	gg_trg_Chain_Lightning[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Chain_Lightning, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Chain_Lightning, Condition(Trig_Chain_Lightning_Conditions));
	TriggerAddAction(gg_trg_Chain_Lightning, Trig_Chain_Lightning_Actions);
}
void Trig_Magic_Trap_periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	float x = LoadReal(udg_hash, h, 2);
	float y = LoadReal(udg_hash, h, 3);
	int lvl = LoadInteger(udg_hash, h, 4);
	group gdamage = LoadGroupHandle(udg_hash, h, 6);
	float damage = LoadReal(udg_hash, h, 7);
	int wait = LoadInteger(udg_hash, h, 8);
	int order = GetUnitCurrentOrder(caster);
	unit dammi;
	float px;
	float py;
	int orderId;
	group g = CreateGroup();
	player p = GetOwningPlayer(caster);
	unit Picked;
	lightning l;
	location locc;
	location loc = GetUnitLoc(caster);
	float dist;
	float angle;
	float speed;
	unit orb;
	effect ef;
	orderId[$D0278] = $D0278;
	if ((orderId != 0)) {
	else
		orderId[UnitId("channel")] = UnitId("channel");
		if ((orderId != 0)) {
		}
	}
	if (order == orderId && lvl > 0) {
		wait[wait + 1] = wait + 1;
		SaveInteger(udg_hash, h, 8, wait);
		GroupAddGroup(gdamage, g);
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h000') {
				l[LoadLightningHandle(udg_hash, GetHandleId(Picked), $A3)] = LoadLightningHandle(udg_hash, GetHandleId(Picked), $A3);
				locc[GetUnitLoc(Picked)] = GetUnitLoc(Picked);
				MoveLightningEx(l, true, x, y, 250. + GetLocationZ(loc), GetUnitX(Picked), GetUnitY(Picked), 50. + GetLocationZ(locc));
				dist[SquareRoot((x - GetUnitX(Picked)) * (x - GetUnitX(Picked)) + (y - GetUnitY(Picked)) * (y - GetUnitY(Picked)))] = SquareRoot((x - GetUnitX(Picked)) * (x - GetUnitX(Picked)) + (y - GetUnitY(Picked)) * (y - GetUnitY(Picked)));
				angle[bj_RADTODEG * Atan2(y - GetUnitY(Picked), x - GetUnitX(Picked))] = bj_RADTODEG * Atan2(y - GetUnitY(Picked), x - GetUnitX(Picked));
				speed[(dist - 50) / 50] = (dist - 50) / 50;
				if (speed <= 0) {
					speed[.01] = .01;
				}
				SetUnitPosition(Picked, GetUnitX(Picked) + speed * Cos(angle * bj_DEGTORAD), GetUnitY(Picked) + speed * Sin(angle * bj_DEGTORAD));
				l[null] = null;
				RemoveLocation(locc);
				locc[null] = null;
			else
				l[LoadLightningHandle(udg_hash, GetHandleId(Picked), $A3)] = LoadLightningHandle(udg_hash, GetHandleId(Picked), $A3);
				DestroyLightning(l);
				l[null] = null;
				GroupRemoveUnit(gdamage, Picked);
				SaveGroupHandle(udg_hash, h, 6, gdamage);
			}
			GroupRemoveUnit(g, Picked);
		}
	else
		DestroyEffect(AddSpecialEffect("Effects\\MagicStomp.mdx", x, y));
		while (true) {
			Picked[FirstOfGroup(gdamage)] = FirstOfGroup(gdamage);
			if (Picked == null) break;
			if (LoadLightningHandle(udg_hash, GetHandleId(Picked), $A3) != null) {
				l[LoadLightningHandle(udg_hash, GetHandleId(Picked), $A3)] = LoadLightningHandle(udg_hash, GetHandleId(Picked), $A3);
				DestroyLightning(l);
				l[null] = null;
			}
			SaveLightningHandle(udg_hash, GetHandleId(Picked), $A3, null);
			SetUnitPathing(Picked, true);
			if (wait >= 66 && GetUnitState(Picked, UNIT_STATE_LIFE) > .405) {
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
				DestroyEffect(AddSpecialEffectTarget("Effects\\SoundTrauma.mdx", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Effects\\Fireworksblue.mdx", Picked, "chest"));
				dammi[CreateUnit(p, 'h00U', x, y, .0)] = CreateUnit(p, 'h00U', x, y, .0);
				UnitApplyTimedLife(dammi, 'BTLF', 1.);
				UnitAddAbility(dammi, 'A0PN');
				IssueTargetOrderById(dammi, $D006B, Picked);
				dammi[null] = null;
			}
			GroupRemoveUnit(gdamage, Picked);
		}
		orb[LoadUnitHandle(udg_hash, h, 9)] = LoadUnitHandle(udg_hash, h, 9);
		KillUnit(orb);
		ef[LoadEffectHandle(udg_hash, h, $A)] = LoadEffectHandle(udg_hash, h, $A);
		DestroyEffect(ef);
		ef[null] = null;
		orb[null] = null;
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
		RemoveUnit(LoadUnitHandle(udg_hash, GetHandleId(caster), 'u'));
	}
	t[null] = null;
	caster[null] = null;
	DestroyGroup(g);
	g[null] = null;
	p[null] = null;
	Picked[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
}
void Trig_Magic_Trap_Actions() {
	unit caster = GetSpellAbilityUnit();
	int lvl = GetUnitAbilityLevel(caster, 'A0PM');
	location loc = GetSpellTargetLoc();
	float tx = GetLocationX(loc);
	float ty = GetLocationY(loc);
	location locc;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	float damage = 10. + 30. * lvl;
	float aoe = 175. + 75. * lvl;
	lightning l;
	group g = CreateGroup();
	player p = GetOwningPlayer(caster);
	unit Picked;
	group gdamage = CreateGroup();
	int wait = 0;
	unit orb = CreateUnit(p, 'h00U', tx, ty, 270.);
	effect ef = AddSpecialEffectTarget("Effects\\Spirit Orb.mdl", orb, "origin");
	UnitAddAbility(orb, 'Amrf');
	UnitRemoveAbility(orb, 'Amrf');
	SetUnitFlyHeight(orb, 250., .0);
	SetUnitScale(orb, 2. + .5 * lvl, 2. + .5 * lvl, 2. + .5 * lvl);
	GroupEnumUnitsInRange(g, tx, ty, aoe, null);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if (GetUnitState(Picked, UNIT_STATE_LIFE) > .405 && IsUnitEnemy(Picked, p) && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h000') {
			locc[GetUnitLoc(Picked)] = GetUnitLoc(Picked);
			l[AddLightningEx("DRAM", true, tx, ty, 250. + GetLocationZ(loc), GetUnitX(Picked), GetUnitY(Picked), 50. + GetLocationZ(locc))] = AddLightningEx("DRAM", true, tx, ty, 250. + GetLocationZ(loc), GetUnitX(Picked), GetUnitY(Picked), 50. + GetLocationZ(locc));
			SaveLightningHandle(udg_hash, GetHandleId(Picked), $A3, l);
			GroupAddUnit(gdamage, Picked);
			SetUnitPathing(Picked, false);
			l[null] = null;
			RemoveLocation(locc);
			locc[null] = null;
		}
		GroupRemoveUnit(g, Picked);
	}
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 2, tx);
	SaveReal(udg_hash, h, 3, ty);
	SaveInteger(udg_hash, h, 4, lvl);
	SaveGroupHandle(udg_hash, h, 6, gdamage);
	SaveReal(udg_hash, h, 7, damage);
	SaveInteger(udg_hash, h, 8, wait);
	SaveUnitHandle(udg_hash, h, 9, orb);
	SaveEffectHandle(udg_hash, h, $A, ef);
	TimerStart(t, .03, true, Trig_Magic_Trap_periodic_Actions);
	AddProgressBar(caster, 260. + (5. * lvl), (.85 + .05 * lvl), 2., false, true, 'u', 50, 50, $FF);
	DestroyGroup(g);
	g[null] = null;
	p[null] = null;
	Picked[null] = null;
	caster[null] = null;
	t[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	gdamage[null] = null;
	orb[null] = null;
	ef[null] = null;
}
bool Trig_Magic_Trap_Conditions() {
	return GetSpellAbilityId() == 'A0PM';
}
void InitTrig_Magic_Trap() {
	int index = 0;
	gg_trg_Magic_Trap[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Magic_Trap, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Magic_Trap, Condition(Trig_Magic_Trap_Conditions));
	TriggerAddAction(gg_trg_Magic_Trap, Trig_Magic_Trap_Actions);
}
void Trig_Remove_Lightning_Form_Dead_Units_Actions() {
	DestroyLightning(LoadLightningHandle(udg_hash, GetHandleId(GetDyingUnit()), $A3));
	SaveLightningHandle(udg_hash, GetHandleId(GetDyingUnit()), $A3, null);
}
bool Trig_Remove_Lightning_Form_Dead_Units_Conditions() {
	return LoadLightningHandle(udg_hash, GetHandleId(GetDyingUnit()), $A3) != null;
}
void InitTrig_Remove_Lightning_Form_Dead_Units() {
	int index = 0;
	gg_trg_Remove_Lightning_Form_Dead_Units[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Remove_Lightning_Form_Dead_Units, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Remove_Lightning_Form_Dead_Units, Condition(Trig_Remove_Lightning_Form_Dead_Units_Conditions));
	TriggerAddAction(gg_trg_Remove_Lightning_Form_Dead_Units, Trig_Remove_Lightning_Form_Dead_Units_Actions);
}
void Trig_EnergyWave_periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 20);
	int count = LoadInteger(udg_hash, h, 21);
	float mana = LoadReal(udg_hash, h, 22);
	int check = LoadInteger(udg_hash, h, 23);
	int lvl = LoadInteger(udg_hash, h, 26);
	group gdamage = LoadGroupHandle(udg_hash, h, 25);
	float manamax = LoadReal(udg_hash, h, 27);
	float time = LoadReal(udg_hash, h, 28);
	player p = GetOwningPlayer(caster);
	unit arrow;
	float ax;
	float ay;
	float face;
	int lop = 0;
	effect ef;
	float angle;
	unit dammi;
	string sef;
	group g = CreateGroup();
	unit Picked;
	if (check < 47) {
		check[check + 1] = check + 1;
		SaveInteger(udg_hash, h, 23, check);
		while (true) {
			if (lop >= count) break;
			arrow[LoadUnitHandle(udg_hash, h, lop)] = LoadUnitHandle(udg_hash, h, lop);
			face[GetUnitFacing(arrow)] = GetUnitFacing(arrow);
			ax[GetUnitX(arrow) + 17. * Cos(face * bj_DEGTORAD)] = GetUnitX(arrow) + 17. * Cos(face * bj_DEGTORAD);
			ay[GetUnitY(arrow) + 17. * Sin(face * bj_DEGTORAD)] = GetUnitY(arrow) + 17. * Sin(face * bj_DEGTORAD);
			if (IsTerrainPathable(ax, ay, PATHING_TYPE_FLYABILITY) == false) {
				SetUnitPosition(arrow, ax, ay);
				GroupEnumUnitsInRange(g, ax, ay, 100., null);
				while (true) {
					Picked[FirstOfGroup(g)] = FirstOfGroup(g);
					if (Picked == null) break;
					if (IsUnitEnemy(Picked, p) && IsUnitInGroup(Picked, gdamage) == false && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h000') {
						GroupAddUnit(gdamage, Picked);
						dammi[CreateUnit(p, 'h00U', ax, ay, .0)] = CreateUnit(p, 'h00U', ax, ay, .0);
						UnitApplyTimedLife(dammi, 'BTLF', .34);
						UnitAddAbility(dammi, 'A0PK');
						SetUnitAbilityLevel(dammi, 'A0PK', lvl);
						IssueTargetOrderById(dammi, $D02BC, Picked);
						RemoveUnitAttack(Picked, time);
						angle[bj_RADTODEG * Atan2(GetUnitY(Picked) - GetUnitY(arrow), GetUnitX(Picked) - GetUnitX(arrow))] = bj_RADTODEG * Atan2(GetUnitY(Picked) - GetUnitY(arrow), GetUnitX(Picked) - GetUnitX(arrow));
						MoveUnit(Picked, 1.5, 200., 100., angle, .0, true);
					}
					if (IsUnitAlly(Picked, p) && IsUnitInGroup(Picked, gdamage) == false && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && GetUnitTypeId(Picked) != 'h000') {
						GroupAddUnit(gdamage, Picked);
						SetUnitState(Picked, UNIT_STATE_MANA, GetUnitState(Picked, UNIT_STATE_MANA) + mana + GetUnitState(Picked, UNIT_STATE_MAX_MANA) * manamax);
						DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIma\\AImaTarget.mdl", Picked, "origin"));
					}
					GroupRemoveUnit(g, Picked);
				}
				Picked[null] = null;
			}
			arrow[null] = null;
			lop[lop + 1] = lop + 1;
		}
	else
		while (true) {
			if (lop >= count) break;
			arrow[LoadUnitHandle(udg_hash, h, lop)] = LoadUnitHandle(udg_hash, h, lop);
			ef[LoadEffectHandle(udg_hash, h, $A + lop)] = LoadEffectHandle(udg_hash, h, $A + lop);
			KillUnit(arrow);
			DestroyEffect(ef);
			arrow[null] = null;
			ef[null] = null;
			lop[lop + 1] = lop + 1;
		}
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		gdamage[null] = null;
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
		t[null] = null;
	}
	t[null] = null;
	caster[null] = null;
	gdamage[null] = null;
	p[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	Picked[null] = null;
}
void Trig_EnergyWave_Actions() {
	unit caster = GetSpellAbilityUnit();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	unit target = GetSpellTargetUnit();
	float tx;
	float ty;
	location loc;
	float angle;
	float angle1;
	player p = GetOwningPlayer(caster);
	int lvl = GetUnitAbilityLevel(caster, 'A0PJ');
	int count = lvl + 2;
	int lop = 0;
	float mana = 50 * lvl;
	float manamax = .05 * lvl;
	float time = 1. + .75 * lvl;
	unit arrow;
	int check = 0;
	effect ef;
	string s;
	group gdamage = CreateGroup();
	timer t = CreateTimer();
	int h = GetHandleId(t);
	bool perekluchatelangle = false;
	int counterangle = 0;
	if (target == null) {
		loc[GetSpellTargetLoc()] = GetSpellTargetLoc();
		tx[GetLocationX(loc)] = GetLocationX(loc);
		ty[GetLocationY(loc)] = GetLocationY(loc);
	else
		tx[GetUnitX(target)] = GetUnitX(target);
		ty[GetUnitY(target)] = GetUnitY(target);
	}
	angle[(bj_RADTODEG * Atan2(ty - y, tx - x))] = (bj_RADTODEG * Atan2(ty - y, tx - x));
	if (target == caster) {
		angle[GetUnitFacing(caster)] = GetUnitFacing(caster);
	}
	if (count - ((count / 2) * 2) == 0) {
		angle[angle + 6.] = angle + 6.;
	}
	while (true) {
		if (lop >= count) break;
		if (perekluchatelangle) {
			perekluchatelangle[false] = false;
			angle[angle - (counterangle * 12.)] = angle - (counterangle * 12.);
		else
			perekluchatelangle[true] = true;
			angle[angle + (counterangle * 12.)] = angle + (counterangle * 12.);
		}
		arrow[CreateUnit(p, 'h00U', x, y, angle)] = CreateUnit(p, 'h00U', x, y, angle);
		SetUnitScale(arrow, 1.2, 1.2, 1.2);
		UnitAddAbility(arrow, 'Amrf');
		UnitRemoveAbility(arrow, 'Amrf');
		SetUnitFlyHeight(arrow, 10., .0);
		ef[AddSpecialEffectTarget("Abilities\\Weapons\\WingedSerpentMissile\\WingedSerpentMissile.mdl", arrow, "chest")] = AddSpecialEffectTarget("Abilities\\Weapons\\WingedSerpentMissile\\WingedSerpentMissile.mdl", arrow, "chest");
		SaveUnitHandle(udg_hash, h, lop, arrow);
		SaveEffectHandle(udg_hash, h, $A + lop, ef);
		arrow[null] = null;
		ef[null] = null;
		lop[lop + 1] = lop + 1;
		counterangle[counterangle + 1] = counterangle + 1;
	}
	SaveUnitHandle(udg_hash, h, 20, caster);
	SaveInteger(udg_hash, h, 21, count);
	SaveReal(udg_hash, h, 22, mana);
	SaveInteger(udg_hash, h, 23, check);
	SaveGroupHandle(udg_hash, h, 25, gdamage);
	SaveInteger(udg_hash, h, 26, lvl);
	SaveReal(udg_hash, h, 27, manamax);
	SaveReal(udg_hash, h, 28, time);
	TimerStart(t, .04, true, Trig_EnergyWave_periodic_Actions);
	caster[null] = null;
	target[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	p[null] = null;
	gdamage[null] = null;
	t[null] = null;
}
bool Trig_EnergyWave_Conditions() {
	return GetSpellAbilityId() == 'A0PJ';
}
void InitTrig_EnergyWave() {
	int index = 0;
	gg_trg_EnergyWave[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_EnergyWave, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_EnergyWave, Condition(Trig_EnergyWave_Conditions));
	TriggerAddAction(gg_trg_EnergyWave, Trig_EnergyWave_Actions);
}
void Trig_Magic_Epicenter_Move_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	float damage = LoadReal(udg_hash, h, 3);
	float stuntime = LoadReal(udg_hash, h, 4);
	float aoe = LoadReal(udg_hash, h, 5);
	unit caster = LoadUnitHandle(udg_hash, h, 7);
	float x = LoadReal(udg_hash, h, 9);
	float y = LoadReal(udg_hash, h, $A);
	player p = GetOwningPlayer(caster);
	group g = CreateGroup();
	unit Picked;
	unit dammi = CreateUnit(p, 'h00U', x, y, 270.);
	SetUnitScale(dammi, 1.8, 1.8, 1.8);
	DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\NightElf\\NEDeathMedium\\NEDeath.mdl", dammi, "origin"));
	DestroyEffect(AddSpecialEffect("Effects\\MagicStomp.mdl", x, y));
	KillUnit(dammi);
	dammi[null] = null;
	GroupEnumUnitsInRange(g, x, y, aoe, null);
	while (true) {
		Picked[FirstOfGroup(g)] = FirstOfGroup(g);
		if (Picked == null) break;
		if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
			DestroyEffect(AddSpecialEffectTarget("Effects\\EMPBomb.mdx", Picked, "chest"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl", Picked, "origin"));
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl", Picked, "chest"));
			StunUnitTimed(Picked, stuntime);
			UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
		}
		GroupRemoveUnit(g, Picked);
	}
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	p[null] = null;
	DestroyTimer(t);
	FlushChildHashtable(udg_hash, h);
	t[null] = null;
	caster[null] = null;
}
void Trig_Magic_Epicenter_Actions() {
	unit caster = GetSpellAbilityUnit();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	location loc = GetSpellTargetLoc();
	float xt = GetLocationX(loc);
	float yt = GetLocationY(loc);
	int lvl = GetUnitAbilityLevel(caster, 'A0PO');
	int lvlup = GetUnitAbilityLevel(caster, 'A0PW');
	float damage;
	float stuntime;
	player p = GetOwningPlayer(caster);
	float aoe = 300. + 50 * lvl;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	if (lvlup <= 0) {
		damage[(-25. + (200. * lvl)) + (GetHeroInt(caster, true) * (.5 + 1. * lvl))] = (-25. + (200. * lvl)) + (GetHeroInt(caster, true) * (.5 + 1. * lvl));
		stuntime[2. + (.5 * lvl)] = 2. + (.5 * lvl);
	}
	if (lvlup > 0) {
		damage[(-25. + (200. * lvlup)) + (GetHeroInt(caster, true) * (.5 + 1.5 * lvlup))] = (-25. + (200. * lvlup)) + (GetHeroInt(caster, true) * (.5 + 1.5 * lvlup));
		stuntime[3. + (.5 * lvlup)] = 3. + (.5 * lvlup);
	}
	DestroyEffectWithWait(AddSpecialEffect("Effects\\IonCannon.mdl", xt, yt), 10.);
	SaveReal(udg_hash, h, 3, damage);
	SaveReal(udg_hash, h, 4, stuntime);
	SaveReal(udg_hash, h, 5, aoe);
	SaveUnitHandle(udg_hash, h, 7, caster);
	SaveReal(udg_hash, h, 9, xt);
	SaveReal(udg_hash, h, $A, yt);
	TimerStart(t, 6.5, false, Trig_Magic_Epicenter_Move_Actions);
	caster[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	t[null] = null;
	p[null] = null;
}
bool Trig_Magic_Epicenter_Conditions() {
	return (GetSpellAbilityId() == 'A0PO' || GetSpellAbilityId() == 'A0PW');
}
void InitTrig_Magic_Epicenter() {
	int index = 0;
	gg_trg_Magic_Epicenter[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Magic_Epicenter, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Magic_Epicenter, Condition(Trig_Magic_Epicenter_Conditions));
	TriggerAddAction(gg_trg_Magic_Epicenter, Trig_Magic_Epicenter_Actions);
}
void Trig_Load_ArchMage_Actions() {
	AbilityPreload('A0PP', 6);
	AbilityPreload('A0PM', 6);
	AbilityPreload('A0PJ', 6);
	AbilityPreload('A0PO', 3);
	AbilityPreload('A0PK', 6);
	AbilityPreload('A0PN', 1);
	AbilityPreload('B055', 1);
	AbilityPreload('B054', 1);
	EffectPreload("Effects\\EMPBomb.mdx");
	EffectPreload("Abilities\\Spells\\Orc\\LightningBolt\\LightningBoltMissile.mdl");
	EffectPreload("Effects\\Spirit Orb.mdl");
	EffectPreload("Effects\\SoundTrauma.mdx");
	EffectPreload("Effects\\Fireworksblue.mdx");
	EffectPreload("Abilities\\Weapons\\WingedSerpentMissile\\WingedSerpentMissile.mdl");
	EffectPreload("Abilities\\Spells\\Items\\AIma\\AImaTarget.mdl");
	EffectPreload("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl");
	EffectPreload("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl");
	EffectPreload("Effects\\IonCannon.mdl");
	EffectPreload("Abilities\\Spells\\Other\\Silence\\SilenceTarget.mdl");
	EffectPreload("Abilities\\Spells\\Other\\Drain\\ManaDrainCaster.mdl");
	EffectPreload("Abilities\\Weapons\\Bolt\\BoltImpact.mdl");
	EffectPreload("Objects\\Spawnmodels\\NightElf\\NEDeathMedium\\NEDeath.mdl");
	EffectPreload("Effects\\MagicStomp.mdl");
	EnableTrigger(gg_trg_Chain_Lightning);
	EnableTrigger(gg_trg_Magic_Trap);
	EnableTrigger(gg_trg_Remove_Lightning_Form_Dead_Units);
	EnableTrigger(gg_trg_EnergyWave);
	EnableTrigger(gg_trg_Magic_Epicenter);
}
void InitTrig_Load_ArchMage() {
	gg_trg_Load_ArchMage[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Load_ArchMage, Trig_Load_ArchMage_Actions);
}
void Trig_Toxic_Field_Move_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit orb;
	effect ef;
	float damage = LoadReal(udg_hash, h, 3);
	int armor = LoadInteger(udg_hash, h, 4);
	int wait = LoadInteger(udg_hash, h, 5);
	unit caster = LoadUnitHandle(udg_hash, h, 7);
	group gdamage = LoadGroupHandle(udg_hash, h, 8);
	float x = LoadReal(udg_hash, h, 9);
	float y = LoadReal(udg_hash, h, $A);
	player p = GetOwningPlayer(caster);
	group g = CreateGroup();
	group g2 = CreateGroup();
	group g3 = CreateGroup();
	unit Picked;
	unit dammi;
	if (wait > 0) {
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 5, wait);
		GroupAddGroup(gdamage, g3);
		GroupEnumUnitsInRange(g, x, y, 325., null);
		if (wait == 4) {
			orb[LoadUnitHandle(udg_hash, h, 1)] = LoadUnitHandle(udg_hash, h, 1);
			ef[LoadEffectHandle(udg_hash, h, 2)] = LoadEffectHandle(udg_hash, h, 2);
			KillUnit(orb);
			DestroyEffect(ef);
			ef[null] = null;
			orb[null] = null;
			orb[CreateUnit(p, 'h00U', x, y, GetRandomReal(.0, 360.))] = CreateUnit(p, 'h00U', x, y, GetRandomReal(.0, 360.));
			ef[AddSpecialEffectTarget("Effects\\ToxicField.mdx", orb, "origin")] = AddSpecialEffectTarget("Effects\\ToxicField.mdx", orb, "origin");
			SaveUnitHandle(udg_hash, h, 1, orb);
			SaveEffectHandle(udg_hash, h, 2, ef);
			orb[null] = null;
			ef[null] = null;
		}
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				dammi[CreateUnit(p, 'h00U', x, y, .0)] = CreateUnit(p, 'h00U', x, y, .0);
				UnitApplyTimedLife(dammi, 'BTLF', 1.);
				UnitAddAbility(dammi, 'A0QE');
				IssueTargetOrderById(dammi, $D006B, Picked);
				dammi[null] = null;
				GroupAddUnit(g2, Picked);
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			}
			GroupRemoveUnit(g, Picked);
		}
		while (true) {
			Picked[FirstOfGroup(g3)] = FirstOfGroup(g3);
			if (Picked == null) break;
			if (IsUnitInGroup(Picked, g2) == false) {
				SetArmorAbilityLevel(Picked, armor);
				GroupRemoveUnit(gdamage, Picked);
			}
			GroupRemoveUnit(g3, Picked);
		}
		while (true) {
			Picked[FirstOfGroup(g2)] = FirstOfGroup(g2);
			if (Picked == null) break;
			if (IsUnitInGroup(Picked, gdamage) == false) {
				SetArmorAbilityLevel(Picked, -armor);
				GroupAddUnit(gdamage, Picked);
			}
			GroupRemoveUnit(g2, Picked);
		}
		SaveGroupHandle(udg_hash, h, 8, gdamage);
		TimerStart(t, 1., false, Trig_Toxic_Field_Move_Actions);
	else
		orb[LoadUnitHandle(udg_hash, h, 1)] = LoadUnitHandle(udg_hash, h, 1);
		ef[LoadEffectHandle(udg_hash, h, 2)] = LoadEffectHandle(udg_hash, h, 2);
		KillUnit(orb);
		DestroyEffect(ef);
		ef[null] = null;
		orb[null] = null;
		while (true) {
			Picked[FirstOfGroup(gdamage)] = FirstOfGroup(gdamage);
			if (Picked == null) break;
			SetArmorAbilityLevel(Picked, armor);
			GroupRemoveUnit(gdamage, Picked);
		}
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		gdamage[null] = null;
		DestroyTimer(t);
		FlushChildHashtable(udg_hash, h);
	}
	Picked[null] = null;
	GroupClear(g);
	DestroyGroup(g);
	g[null] = null;
	GroupClear(g2);
	DestroyGroup(g2);
	g2[null] = null;
	GroupClear(g3);
	DestroyGroup(g3);
	g3[null] = null;
	p[null] = null;
	gdamage[null] = null;
	t[null] = null;
	caster[null] = null;
}
void Trig_Toxic_Field_Actions() {
	unit caster = GetSpellAbilityUnit();
	location loc = GetSpellTargetLoc();
	float xt = GetLocationX(loc);
	float yt = GetLocationY(loc);
	int lvl = GetUnitAbilityLevel(caster, 'A0QD');
	int wait = 8;
	float damage = (-20. + (60. * lvl) + GetUnitState(caster, UNIT_STATE_MAX_LIFE) * .03 * lvl) / (wait);
	int armor = 2 + 3 * lvl;
	player p = GetOwningPlayer(caster);
	unit orb = CreateUnit(p, 'h00U', xt, yt, GetRandomReal(.0, 360.));
	effect ef = AddSpecialEffectTarget("Effects\\ToxicField.mdx", orb, "origin");
	timer t = CreateTimer();
	int h = GetHandleId(t);
	group g = CreateGroup();
	SaveUnitHandle(udg_hash, h, 1, orb);
	SaveEffectHandle(udg_hash, h, 2, ef);
	SaveReal(udg_hash, h, 3, damage);
	SaveInteger(udg_hash, h, 4, armor);
	SaveInteger(udg_hash, h, 5, wait);
	SaveUnitHandle(udg_hash, h, 7, caster);
	SaveGroupHandle(udg_hash, h, 8, g);
	SaveReal(udg_hash, h, 9, xt);
	SaveReal(udg_hash, h, $A, yt);
	TimerStart(t, .0, false, Trig_Toxic_Field_Move_Actions);
	caster[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	t[null] = null;
	p[null] = null;
	orb[null] = null;
	ef[null] = null;
	g[null] = null;
}
bool Trig_Toxic_Field_Conditions() {
	return GetSpellAbilityId() == 'A0QD';
}
void InitTrig_Toxic_Field() {
	int index = 0;
	gg_trg_Toxic_Field[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Toxic_Field, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Toxic_Field, Condition(Trig_Toxic_Field_Conditions));
	TriggerAddAction(gg_trg_Toxic_Field, Trig_Toxic_Field_Actions);
}
void Trig_Poison_Bomb_MOVE_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	unit target = LoadUnitHandle(udg_hash, h, 8);
	float xload = LoadReal(udg_hash, h, 16);
	float yload = LoadReal(udg_hash, h, 17);
	int count = LoadInteger(udg_hash, h, 5);
	unit orb = LoadUnitHandle(udg_hash, h, 6);
	unit target2;
	float stuntime;
	float heal;
	group gdamage;
	float height;
	effect ef;
	float x = GetUnitX(orb);
	float y = GetUnitY(orb);
	float xt;
	float yt;
	float xorb;
	float yorb;
	float angle;
	float dist;
	player p;
	group g;
	group grup;
	unit Picked;
	timer tef;
	int hef;
	int regen;
	bool remove = false;
	bool reselect = false;
	unit orb2;
	group gg;
	effect ef2;
	if (GetUnitState(target, UNIT_STATE_LIFE) > .405) {
		xt[GetUnitX(target)] = GetUnitX(target);
		yt[GetUnitY(target)] = GetUnitY(target);
	else
		xt[xload] = xload;
		yt[yload] = yload;
	}
	angle[bj_RADTODEG * Atan2((yt - y), (xt - x))] = bj_RADTODEG * Atan2((yt - y), (xt - x));
	xorb[x + 17. * Cos(angle * bj_DEGTORAD)] = x + 17. * Cos(angle * bj_DEGTORAD);
	yorb[y + 17. * Sin(angle * bj_DEGTORAD)] = y + 17. * Sin(angle * bj_DEGTORAD);
	SetUnitPosition(orb, xorb, yorb);
	dist[SquareRoot((xt - xorb) * (xt - xorb) + (yt - yorb) * (yt - yorb))] = SquareRoot((xt - xorb) * (xt - xorb) + (yt - yorb) * (yt - yorb));
	SetUnitFacing(orb, angle);
	if (dist < 21.) {
		SetUnitPosition(orb, xt, yt);
		p[GetOwningPlayer(caster)] = GetOwningPlayer(caster);
		stuntime[LoadReal(udg_hash, h, 2)] = LoadReal(udg_hash, h, 2);
		gg[CreateGroup()] = CreateGroup();
		GroupEnumUnitsInRange(gg, xt, yt, 150., null);
		while (true) {
			Picked[FirstOfGroup(gg)] = FirstOfGroup(gg);
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && GetUnitState(target, UNIT_STATE_LIFE) > .0 && IsUnitType(target, UNIT_TYPE_STRUCTURE) == false && IsUnitType(target, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(target) != 'h00U') {
				StunUnitTimed(Picked, stuntime);
			}
			GroupRemoveUnit(gg, Picked);
		}
		count[count - 1] = count - 1;
		SaveInteger(udg_hash, h, 5, count);
		reselect[true] = true;
		p[null] = null;
	}
	if (reselect) {
		g[CreateGroup()] = CreateGroup();
		grup[CreateGroup()] = CreateGroup();
		p[GetOwningPlayer(caster)] = GetOwningPlayer(caster);
		GroupEnumUnitsInRange(g, xt, yt, 500., null);
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				GroupAddUnit(grup, Picked);
			}
			GroupRemoveUnit(g, Picked);
		}
		RandomUnitFromGroup(1, grup);
		GroupAddGroup(udg_GroupRandomUnitFromGroup, g);
		target2[FirstOfGroup(udg_GroupRandomUnitFromGroup)] = FirstOfGroup(udg_GroupRandomUnitFromGroup);
		if (target2 != null) {
			DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\AcidBomb\\BottleMissile.mdl", xt, yt));
			x[GetUnitX(orb)] = GetUnitX(orb);
			y[GetUnitY(orb)] = GetUnitY(orb);
			xt[GetUnitX(target2)] = GetUnitX(target2);
			yt[GetUnitY(target2)] = GetUnitY(target2);
			dist[SquareRoot(((xt - x) * (xt - x)) + ((yt - y) * (yt - y)))] = SquareRoot(((xt - x) * (xt - x)) + ((yt - y) * (yt - y)));
			angle[bj_RADTODEG * Atan2((yt - y), (xt - x))] = bj_RADTODEG * Atan2((yt - y), (xt - x));
			p[GetOwningPlayer(caster)] = GetOwningPlayer(caster);
			ef[LoadEffectHandle(udg_hash, h, 7)] = LoadEffectHandle(udg_hash, h, 7);
			DestroyEffect(ef);
			ef[null] = null;
			RemoveUnit(orb);
			orb2[CreateUnit(p, 'h00U', x, y, angle)] = CreateUnit(p, 'h00U', x, y, angle);
			ef2[AddSpecialEffectTarget("Abilities\\Spells\\Other\\AcidBomb\\BottleMissile.mdl", orb2, "chest")] = AddSpecialEffectTarget("Abilities\\Spells\\Other\\AcidBomb\\BottleMissile.mdl", orb2, "chest");
			SetUnitScale(orb2, 1.5, 1.5, 1.5);
			SaveUnitHandle(udg_hash, h, 6, orb2);
			SaveEffectHandle(udg_hash, h, 7, ef2);
			SaveUnitHandle(udg_hash, h, 8, target2);
			SaveReal(udg_hash, h, 9, (dist / 3));
			SaveReal(udg_hash, h, 16, xt);
			SaveReal(udg_hash, h, 17, yt);
			p[null] = null;
			orb2[null] = null;
			ef2[null] = null;
		else
			remove[true] = true;
		}
		target2[null] = null;
		GroupClear(g);
		DestroyGroup(g);
		g[null] = null;
		GroupClear(grup);
		DestroyGroup(grup);
		grup[null] = null;
		gdamage[null] = null;
	}
	if (count <= 0) {
		remove[true] = true;
	}
	if (remove) {
		KillUnit(orb);
		ef[LoadEffectHandle(udg_hash, h, 7)] = LoadEffectHandle(udg_hash, h, 7);
		DestroyEffect(ef);
		ef[null] = null;
		GroupClear(g);
		DestroyGroup(g);
		g[null] = null;
		DestroyTimer(t);
		Picked[null] = null;
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	caster[null] = null;
	orb[null] = null;
	target[null] = null;
}
void Trig_Poison_Bomb_Actions() {
	unit caster = GetSpellAbilityUnit();
	player p = GetOwningPlayer(caster);
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	unit target = GetSpellTargetUnit();
	location loc;
	float xt;
	float yt;
	float angle;
	float dist;
	int lvl = GetUnitAbilityLevel(caster, 'A0QF');
	float stuntime = 4.;
	int count = 2 + (lvl * 2);
	unit orb = CreateUnit(p, 'h00U', x, y, .0);
	effect ef = AddSpecialEffectTarget("Abilities\\Spells\\Other\\AcidBomb\\BottleMissile.mdl", orb, "chest");
	timer t = CreateTimer();
	int h = GetHandleId(t);
	SetUnitScale(orb, 1.5, 1.5, 1.5);
	if (target == null) {
		loc[GetSpellTargetLoc()] = GetSpellTargetLoc();
		xt[GetLocationX(loc)] = GetLocationX(loc);
		yt[GetLocationY(loc)] = GetLocationY(loc);
	else
		xt[GetUnitX(target)] = GetUnitX(target);
		yt[GetUnitY(target)] = GetUnitY(target);
	}
	angle[bj_RADTODEG * Atan2((yt - y), (xt - x))] = bj_RADTODEG * Atan2((yt - y), (xt - x));
	dist[SquareRoot(((xt - x) * (xt - x)) + ((yt - y) * (yt - y)))] = SquareRoot(((xt - x) * (xt - x)) + ((yt - y) * (yt - y)));
	SetUnitX(orb, x + 30. * Cos((angle) * bj_DEGTORAD));
	SetUnitY(orb, y + 30. * Sin((angle) * bj_DEGTORAD));
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveReal(udg_hash, h, 2, stuntime);
	SaveInteger(udg_hash, h, 5, count);
	SaveUnitHandle(udg_hash, h, 6, orb);
	SaveEffectHandle(udg_hash, h, 7, ef);
	SaveUnitHandle(udg_hash, h, 8, target);
	SaveReal(udg_hash, h, 16, xt);
	SaveReal(udg_hash, h, 17, yt);
	TimerStart(t, .03, true, Trig_Poison_Bomb_MOVE_Actions);
	caster[null] = null;
	t[null] = null;
	orb[null] = null;
	ef[null] = null;
	p[null] = null;
	target[null] = null;
}
bool Trig_Poison_Bomb_Conditions() {
	return GetSpellAbilityId() == 'A0QF';
}
void InitTrig_Poison_Bomb() {
	int index = 0;
	gg_trg_Poison_Bomb[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Poison_Bomb, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Poison_Bomb, Condition(Trig_Poison_Bomb_Conditions));
	TriggerAddAction(gg_trg_Poison_Bomb, Trig_Poison_Bomb_Actions);
}
void Trig_Learn_Ogre_Rage_Actions_Timer() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit hero = LoadUnitHandle(udg_hash, h, 1);
	texttag txt = LoadTextTagHandle(udg_hash, h, 2);
	float x = GetUnitX(hero);
	float y = GetUnitY(hero);
	bool alife = LoadBoolean(udg_hash, h, 3);
	int hhero = GetHandleId(hero);
	int hpregenold = LoadInteger(udg_hash, hhero, $AE);
	int asold = LoadInteger(udg_hash, hhero, $AF);
	int lvl = GetUnitAbilityLevel(hero, 'A0QG');
	int hpstack = R2I((((GetUnitState(hero, UNIT_STATE_MAX_LIFE) - GetUnitState(hero, UNIT_STATE_LIFE)) / GetUnitState(hero, UNIT_STATE_MAX_LIFE)) + .1) * $A);
	int hpregennew = (1 + 1 * lvl) * hpstack;
	int asnew = (2 + 3 * lvl) * hpstack;
	if ((GetUnitState(hero, UNIT_STATE_LIFE) < .405 && alife)) {
		alife[false] = false;
		SaveBoolean(udg_hash, h, 3, alife);
		SetTextTagVisibility(txt, false);
	}
	if ((GetUnitState(hero, UNIT_STATE_LIFE) > .405 && alife == false)) {
		alife[true] = true;
		SaveBoolean(udg_hash, h, 3, alife);
		SetTextTagVisibility(txt, true);
	}
	if ((GetUnitState(hero, UNIT_STATE_LIFE) > .405 && alife)) {
		if (hpstack >= 6 && LoadBoolean(udg_hash, h, $B0) == false) {
			SaveBoolean(udg_hash, h, $B0, true);
			AddUnitAnimationProperties(hero, "Alternate", true);
			PlaySoundBJ(gg_snd_AlchemistChemicalBurst1);
		}
		if (hpstack < 5 && LoadBoolean(udg_hash, h, $B0)) {
			SaveBoolean(udg_hash, h, $B0, false);
			AddUnitAnimationProperties(hero, "Alternate", false);
			PlaySoundBJ(gg_snd_AlchemistMorph1);
		}
		if (hpregennew != hpregenold) {
			SetUnitLifeAndManaRegeneration(hero, "life", (hpregennew - hpregenold));
			SaveInteger(udg_hash, hhero, $AE, hpregennew);
		}
		if (asnew != asold) {
			SetAttackSpeedAbilityLevel(hero, (asnew - asold));
			SaveInteger(udg_hash, hhero, $AF, asnew);
		}
		SetTextTagText(txt, "|cff006400" + I2S(hpstack) + "|r|cFF969696/|r|cff00640010|r", .033);
		SetTextTagPos(txt, GetUnitX(hero) - 40., GetUnitY(hero) + 50., .0);
	}
	t[null] = null;
	hero[null] = null;
	txt[null] = null;
}
void Trig_Learn_Ogre_Rage_Actions() {
	int lvl = GetUnitAbilityLevel(GetLearningUnit(), 'A0QG');
	timer t;
	int h;
	texttag txt;
	unit hero = GetLearningUnit();
	if (lvl == 1) {
		t[CreateTimer()] = CreateTimer();
		h[GetHandleId(t)] = GetHandleId(t);
		txt[CreateTextTag()] = CreateTextTag();
		SetTextTagText(txt, "|cff006400" + I2S(0) + "|r|cFF969696/|r|cff00640010|r", .033);
		SetTextTagColor(txt, $FF, $FF, $FF, $FF);
		SetTextTagPos(txt, GetUnitX(hero) - 40., GetUnitY(hero) + 50., .0);
		SetTextTagPermanent(txt, true);
		SaveUnitHandle(udg_hash, h, 1, hero);
		SaveTextTagHandle(udg_hash, h, 2, txt);
		SaveBoolean(udg_hash, h, 3, true);
		TimerStart(t, .03, true, Trig_Learn_Ogre_Rage_Actions_Timer);
		t[null] = null;
		txt[null] = null;
	}
	hero[null] = null;
}
bool Trig_Learn_Ogre_Rage_Conditions() {
	return GetUnitTypeId(GetLearningUnit()) != 'h00U' && GetLearnedSkill() == 'A0QG';
}
void InitTrig_Learn_Ogre_Rage() {
	int index = 0;
	gg_trg_Learn_Ogre_Rage[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Ogre_Rage, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Learn_Ogre_Rage, Condition(Trig_Learn_Ogre_Rage_Conditions));
	TriggerAddAction(gg_trg_Learn_Ogre_Rage, Trig_Learn_Ogre_Rage_Actions);
}
void Trig_Potion_of_Growth_Periodic_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	int str = LoadInteger(udg_hash, h, 2);
	int wait = LoadInteger(udg_hash, h, 3);
	int wait2 = LoadInteger(udg_hash, h, 4);
	float percent;
	if (wait > 0) {
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 3, wait);
		if (wait >= $A) {
			percent[(GetUnitState(caster, UNIT_STATE_LIFE) / GetUnitState(caster, UNIT_STATE_MAX_LIFE))] = (GetUnitState(caster, UNIT_STATE_LIFE) / GetUnitState(caster, UNIT_STATE_MAX_LIFE));
			SetHeroStr(caster, GetHeroStr(caster, false) + str, true);
			SetUnitState(caster, UNIT_STATE_LIFE, GetUnitState(caster, UNIT_STATE_MAX_LIFE) * percent);
			SetUnitScale(caster, .9 + (20 - wait) * .05, .9 + (20 - wait) * .05, .9 + (20 - wait) * .05);
		}
	else
		if (wait2 == 20) {
			TimerStart(t, .05, true, Trig_Potion_of_Growth_Periodic_Actions);
		}
		if (wait2 > 0) {
			wait2[wait2 - 1] = wait2 - 1;
			SaveInteger(udg_hash, h, 4, wait2);
			SetUnitScale(caster, 1.4 - ((20 - wait2) * .025), 1.4 - ((20 - wait2) * .025), 1.4 - ((20 - wait2) * .025));
		}
		if (wait2 == 0) {
			percent[(GetUnitState(caster, UNIT_STATE_LIFE) / GetUnitState(caster, UNIT_STATE_MAX_LIFE))] = (GetUnitState(caster, UNIT_STATE_LIFE) / GetUnitState(caster, UNIT_STATE_MAX_LIFE));
			SetHeroStr(caster, GetHeroStr(caster, false) - (str * $A), true);
			SetUnitState(caster, UNIT_STATE_LIFE, GetUnitState(caster, UNIT_STATE_MAX_LIFE) * percent);
			DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\ManaBurn\\ManaBurnTarget.mdl", caster, "origin"));
			FlushChildHashtable(udg_hash, h);
			DestroyTimer(t);
		}
	}
	t[null] = null;
	caster[null] = null;
}
void Trig_Potion_of_Growth_Actions() {
	unit caster = GetSpellAbilityUnit();
	int wait = 20;
	int lvl = GetUnitAbilityLevel(caster, 'A0QH');
	int str = (5 + 5 * lvl);
	timer t = CreateTimer();
	int h = GetHandleId(t);
	PlaySoundBJ(gg_snd_HeroAlchemistYesAttack1);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveInteger(udg_hash, h, 2, str);
	SaveInteger(udg_hash, h, 3, wait);
	SaveInteger(udg_hash, h, 4, 20);
	TimerStart(t, 1., true, Trig_Potion_of_Growth_Periodic_Actions);
	caster[null] = null;
	t[null] = null;
}
bool Trig_Potion_of_Growth_Conditions() {
	return GetSpellAbilityId() == 'A0QH';
}
void InitTrig_Potion_of_Growth() {
	int index = 0;
	gg_trg_Potion_of_Growth[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Potion_of_Growth, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Potion_of_Growth, Condition(Trig_Potion_of_Growth_Conditions));
	TriggerAddAction(gg_trg_Potion_of_Growth, Trig_Potion_of_Growth_Actions);
}
void Trig_Load_Alchemist_Actions() {
	AbilityPreload('A0QD', 6);
	AbilityPreload('A0QF', 6);
	AbilityPreload('A0QG', 6);
	AbilityPreload('A0QH', 3);
	AbilityPreload('A0QE', 1);
	AbilityPreload('B058', 1);
	EffectPreload("Effects\\ToxicField.mdx");
	EffectPreload("Abilities\\Spells\\Other\\AcidBomb\\BottleMissile.mdl");
	EffectPreload("Abilities\\Spells\\NightElf\\ManaBurn\\ManaBurnTarget.mdl");
	EffectPreload("Abilities\\Weapons\\PoisonSting\\PoisonStingTarget.mdl");
	EnableTrigger(gg_trg_Toxic_Field);
	EnableTrigger(gg_trg_Poison_Bomb);
	EnableTrigger(gg_trg_Learn_Ogre_Rage);
	EnableTrigger(gg_trg_Potion_of_Growth);
}
void InitTrig_Load_Alchemist() {
	gg_trg_Load_Alchemist[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Load_Alchemist, Trig_Load_Alchemist_Actions);
}
void Trig_Case_Shot_Move_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	group gdamage;
	float damage;
	effect ef;
	int wait = LoadInteger(udg_hash, h, 5);
	float angle = LoadReal(udg_hash, h, 6);
	unit dagger = LoadUnitHandle(udg_hash, h, 7);
	int lvl;
	float x = GetUnitX(dagger) + 40. * Cos((angle) * bj_DEGTORAD);
	float y = GetUnitY(dagger) + 40. * Sin((angle) * bj_DEGTORAD);
	player p = GetOwningPlayer(caster);
	group g = CreateGroup();
	unit Picked;
	float dist;
	bool dest = false;
	bool explode = false;
	unit dammi;
	float angle2;
	if (wait > 0) {
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 5, wait);
		SetUnitPosition(dagger, x, y);
		GroupEnumUnitsInRange(g, x, y, 125., null);
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				explode[true] = true;
			}
			GroupRemoveUnit(g, Picked);
		}
		GroupClear(g);
		DestroyGroup(g);
		g[null] = null;
	else
		dest[true] = true;
	}
	if (explode) {
		dest[true] = true;
		gdamage[CreateGroup()] = CreateGroup();
		lvl[LoadInteger(udg_hash, h, 9)] = LoadInteger(udg_hash, h, 9);
		damage[LoadReal(udg_hash, h, 3)] = LoadReal(udg_hash, h, 3);
		GroupEnumUnitsInRange(gdamage, x, y, 300., null);
		while (true) {
			Picked[FirstOfGroup(gdamage)] = FirstOfGroup(gdamage);
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Rifle\\RifleImpact.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GyroCopter\\GyroCopterImpact.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPeasant.mdl", Picked, "origin"));
				dammi[CreateUnit(p, 'h00U', x, y, .0)] = CreateUnit(p, 'h00U', x, y, .0);
				UnitApplyTimedLife(dammi, 'BTLF', 1.);
				UnitAddAbility(dammi, 'A0QS');
				SetUnitAbilityLevel(dammi, 'A0QS', lvl);
				IssueTargetOrderById(dammi, $D006B, Picked);
				dammi[null] = null;
				angle2[bj_RADTODEG * Atan2(GetUnitY(Picked) - y, GetUnitX(Picked) - x)] = bj_RADTODEG * Atan2(GetUnitY(Picked) - y, GetUnitX(Picked) - x);
				MoveUnit(Picked, 1., 600., 600., angle2, .0, false);
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			}
			GroupRemoveUnit(gdamage, Picked);
		}
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		gdamage[null] = null;
	}
	if (dest) {
		ef[LoadEffectHandle(udg_hash, h, 4)] = LoadEffectHandle(udg_hash, h, 4);
		DestroyEffect(ef);
		ef[null] = null;
		DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\CannonTowerMissile\\CannonTowerMissile.mdl", x, y));
		KillUnit(dagger);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
	}
	t[null] = null;
	caster[null] = null;
	gdamage[null] = null;
	p[null] = null;
	Picked[null] = null;
	dagger[null] = null;
}
void Trig_Case_Shot_Actions() {
	unit caster = GetSpellAbilityUnit();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	unit target = GetSpellTargetUnit();
	float angle;
	group gdamage = CreateGroup();
	int lvl = GetUnitAbilityLevel(caster, 'A0QR');
	float damage = (20. * lvl) + 10.;
	location loc;
	float tx;
	float ty;
	float dist;
	unit dagger;
	effect ef;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	if (target == null) {
		loc[GetSpellTargetLoc()] = GetSpellTargetLoc();
		tx[GetLocationX(loc)] = GetLocationX(loc);
		ty[GetLocationY(loc)] = GetLocationY(loc);
	else
		tx[GetUnitX(target)] = GetUnitX(target);
		ty[GetUnitY(target)] = GetUnitY(target);
	}
	angle[bj_RADTODEG * Atan2(ty - y, tx - x)] = bj_RADTODEG * Atan2(ty - y, tx - x);
	dist[SquareRoot((tx - x) * (tx - x) + (ty - y) * (ty - y))] = SquareRoot((tx - x) * (tx - x) + (ty - y) * (ty - y));
	if (target == caster) {
		angle[GetUnitFacing(caster)] = GetUnitFacing(caster);
		dist[800.] = 800.;
	}
	dagger[CreateUnit(GetOwningPlayer(caster), 'h00U', x, y, angle)] = CreateUnit(GetOwningPlayer(caster), 'h00U', x, y, angle);
	ef[AddSpecialEffectTarget("Abilities\\Weapons\\CannonTowerMissile\\CannonTowerMissile.mdl", dagger, "origin")] = AddSpecialEffectTarget("Abilities\\Weapons\\CannonTowerMissile\\CannonTowerMissile.mdl", dagger, "origin");
	SetUnitX(dagger, x + 20. * Cos((angle) * bj_DEGTORAD));
	SetUnitY(dagger, y + 20. * Sin((angle) * bj_DEGTORAD));
	SetUnitTimeScale(dagger, 2.);
	SetUnitScale(dagger, 1.5, 1.5, 1.5);
	SetUnitPathing(dagger, false);
	SetUnitFlyHeight(dagger, 50., .0);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveGroupHandle(udg_hash, h, 2, gdamage);
	SaveReal(udg_hash, h, 3, damage);
	SaveEffectHandle(udg_hash, h, 4, ef);
	SaveInteger(udg_hash, h, 5, R2I(900. / 40));
	SaveReal(udg_hash, h, 6, angle);
	SaveUnitHandle(udg_hash, h, 7, dagger);
	SaveInteger(udg_hash, h, 9, lvl);
	TimerStart(t, .03, true, Trig_Case_Shot_Move_Actions);
	caster[null] = null;
	target[null] = null;
	gdamage[null] = null;
	dagger[null] = null;
	ef[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	t[null] = null;
}
bool Trig_Case_Shot_Conditions() {
	return GetSpellAbilityId() == 'A0QR';
}
void InitTrig_Case_Shot() {
	int index = 0;
	gg_trg_Case_Shot[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Case_Shot, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Case_Shot, Condition(Trig_Case_Shot_Conditions));
	TriggerAddAction(gg_trg_Case_Shot, Trig_Case_Shot_Actions);
}
void Trig_Learn_Fire_Position_Actions_Timer() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit hero = LoadUnitHandle(udg_hash, h, 1);
	float time = LoadReal(udg_hash, h, 2);
	float x = GetUnitX(hero);
	float y = GetUnitY(hero);
	bool alife = LoadBoolean(udg_hash, h, 3);
	bool circlego = LoadBoolean(udg_hash, h, 4);
	bool maximum = LoadBoolean(udg_hash, h, 9);
	float xold = LoadReal(udg_hash, h, 5);
	float yold = LoadReal(udg_hash, h, 6);
	float xnew;
	float ynew;
	int hhero = GetHandleId(hero);
	int attackold = LoadInteger(udg_hash, hhero, $B2);
	int lvl = GetUnitAbilityLevel(hero, 'A0QV');
	int attackstack;
	int attacknew;
	effect ef;
	unit dammi;
	if ((GetUnitState(hero, UNIT_STATE_LIFE) > .405 && alife)) {
		xnew[GetUnitX(hero)] = GetUnitX(hero);
		ynew[GetUnitY(hero)] = GetUnitY(hero);
		if (RAbsBJ(xnew - xold) < 125. && RAbsBJ(ynew - yold) < 125.) {
			if (time < 10.) {
				time[time + .1] = time + .1;
				SaveReal(udg_hash, h, 2, time);
			}
			if (time >= 3.) {
				if (circlego == false) {
					circlego[true] = true;
					SaveBoolean(udg_hash, h, 4, circlego);
					dammi[CreateUnit(GetOwningPlayer(hero), 'h00U', xnew, ynew, .0)] = CreateUnit(GetOwningPlayer(hero), 'h00U', xnew, ynew, .0);
					SetUnitScale(dammi, 3., 3., 3.);
					ef[AddSpecialEffectTarget("Effects\\CircleOutBuff.mdx", dammi, "origin")] = AddSpecialEffectTarget("Effects\\CircleOutBuff.mdx", dammi, "origin");
					SaveEffectHandle(udg_hash, h, 7, ef);
					SaveUnitHandle(udg_hash, h, $A, dammi);
					ef[null] = null;
					dammi[null] = null;
					AddProgressBar(hero, 230., 1.1, 7., true, true, 'v', $C0, $C0, $C0);
				}
				if (maximum == false && time >= 10.) {
					maximum[true] = true;
					SaveBoolean(udg_hash, h, 9, maximum);
					SaveBoolean(udg_hash, GetHandleId(hero), $B3, true);
					ef[AddSpecialEffectTarget("Effects\\Fire Uber.mdx", hero, "weapon")] = AddSpecialEffectTarget("Effects\\Fire Uber.mdx", hero, "weapon");
					SaveEffectHandle(udg_hash, h, 8, ef);
					ef[null] = null;
				}
				attacknew[(3 + 2 * lvl) * R2I(time - 3.)] = (3 + 2 * lvl) * R2I(time - 3.);
				if (attackold != attacknew) {
					SetAttackAbilityLevel(hero, attacknew - attackold);
					SetAttackSpeedAbilityLevel(hero, attacknew - attackold);
					SaveInteger(udg_hash, hhero, $B2, attacknew);
				}
			}
		else
			xold[xnew] = xnew;
			yold[ynew] = ynew;
			SaveReal(udg_hash, h, 5, xold);
			SaveReal(udg_hash, h, 6, yold);
			if (time >= 3.) {
				SetAttackAbilityLevel(hero, -attackold);
				SetAttackSpeedAbilityLevel(hero, -attackold);
				SaveInteger(udg_hash, hhero, $B2, 0);
				if (circlego) {
					circlego[false] = false;
					SaveBoolean(udg_hash, h, 4, circlego);
					dammi[LoadUnitHandle(udg_hash, h, $A)] = LoadUnitHandle(udg_hash, h, $A);
					ef[LoadEffectHandle(udg_hash, h, 7)] = LoadEffectHandle(udg_hash, h, 7);
					DestroyEffect(ef);
					ef[null] = null;
					KillUnit(dammi);
					dammi[null] = null;
					RemoveUnit(LoadUnitHandle(udg_hash, GetHandleId(hero), 'v'));
				}
				if (maximum) {
					maximum[false] = false;
					SaveBoolean(udg_hash, h, 9, maximum);
					SaveBoolean(udg_hash, GetHandleId(hero), $B3, false);
					ef[LoadEffectHandle(udg_hash, h, 8)] = LoadEffectHandle(udg_hash, h, 8);
					DestroyEffect(ef);
					ef[null] = null;
				}
			}
			time[.0] = .0;
			SaveReal(udg_hash, h, 2, time);
		}
	}
	t[null] = null;
	hero[null] = null;
}
void Trig_Learn_Fire_Position_Actions() {
	int lvl = GetUnitAbilityLevel(GetLearningUnit(), 'A0QV');
	timer t;
	int h;
	unit hero = GetLearningUnit();
	if (lvl == 1) {
		t[CreateTimer()] = CreateTimer();
		h[GetHandleId(t)] = GetHandleId(t);
		SaveUnitHandle(udg_hash, h, 1, hero);
		SaveReal(udg_hash, h, 2, .0);
		SaveBoolean(udg_hash, h, 3, true);
		SaveBoolean(udg_hash, h, 4, false);
		SaveReal(udg_hash, h, 5, GetUnitX(hero));
		SaveReal(udg_hash, h, 6, GetUnitY(hero));
		SaveBoolean(udg_hash, h, 9, false);
		TimerStart(t, .1, true, Trig_Learn_Fire_Position_Actions_Timer);
		t[null] = null;
	}
	hero[null] = null;
}
bool Trig_Learn_Fire_Position_Conditions() {
	return GetUnitTypeId(GetLearningUnit()) != 'h00U' && GetLearnedSkill() == 'A0QV' && IsUnitIllusion(GetLearningUnit()) == false;
}
void InitTrig_Learn_Fire_Position() {
	int index = 0;
	gg_trg_Learn_Fire_Position[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Fire_Position, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Learn_Fire_Position, Condition(Trig_Learn_Fire_Position_Conditions));
	TriggerAddAction(gg_trg_Learn_Fire_Position, Trig_Learn_Fire_Position_Actions);
}
void Trig_Dwarf_Cannon_Move_Actions() {
	timer t = GetExpiredTimer();
	int h = GetHandleId(t);
	unit caster = LoadUnitHandle(udg_hash, h, 1);
	int order = GetUnitCurrentOrder(caster);
	int orderId;
	int wait1 = LoadInteger(udg_hash, h, 20);
	unit dagger;
	group gdamage;
	float x;
	float y;
	float angle;
	effect ef;
	int wait = LoadInteger(udg_hash, h, 19);
	player p;
	float damage;
	float stuntime;
	group g;
	unit Picked;
	bool dest = false;
	orderId[$D0278] = $D0278;
	if ((orderId != 0)) {
	else
		orderId[UnitId("channel")] = UnitId("channel");
		if ((orderId != 0)) {
		}
	}
	if (order == orderId && wait1 > 0) {
		wait1[wait1 - 1] = wait1 - 1;
		SaveInteger(udg_hash, h, 20, wait1);
		if (wait1 == 0) {
			SetUnitTimeScale(caster, 1.);
			x[LoadReal(udg_hash, h, 4)] = LoadReal(udg_hash, h, 4);
			y[LoadReal(udg_hash, h, 5)] = LoadReal(udg_hash, h, 5);
			angle[LoadReal(udg_hash, h, 7)] = LoadReal(udg_hash, h, 7);
			dagger[CreateUnit(GetOwningPlayer(caster), 'h00U', x, y, angle)] = CreateUnit(GetOwningPlayer(caster), 'h00U', x, y, angle);
			ef[AddSpecialEffectTarget("Abilities\\Weapons\\Mortar\\MortarMissile.mdl", dagger, "origin")] = AddSpecialEffectTarget("Abilities\\Weapons\\Mortar\\MortarMissile.mdl", dagger, "origin");
			SetUnitX(dagger, x + 20. * Cos((angle) * bj_DEGTORAD));
			SetUnitY(dagger, y + 20. * Sin((angle) * bj_DEGTORAD));
			SetUnitTimeScale(dagger, 2.);
			SetUnitScale(dagger, 2., 2., 2.);
			SetUnitPathing(dagger, false);
			SetUnitFlyHeight(dagger, 50., .0);
			SaveUnitHandle(udg_hash, h, $A, dagger);
			SaveEffectHandle(udg_hash, h, $B, ef);
			ef[null] = null;
			dagger[null] = null;
			RemoveUnit(LoadUnitHandle(udg_hash, GetHandleId(caster), 'u'));
			SaveBoolean(udg_hash, h, 21, true);
		}
	}
	if (order != orderId && wait1 > 0 && LoadBoolean(udg_hash, h, 21) == false) {
		SetUnitTimeScale(caster, 1.);
		RemoveUnit(LoadUnitHandle(udg_hash, GetHandleId(caster), 'u'));
		dest[true] = true;
	}
	if (LoadBoolean(udg_hash, h, 21) && wait > 0) {
		wait[wait - 1] = wait - 1;
		SaveInteger(udg_hash, h, 19, wait);
		angle[LoadReal(udg_hash, h, 7)] = LoadReal(udg_hash, h, 7);
		dagger[LoadUnitHandle(udg_hash, h, $A)] = LoadUnitHandle(udg_hash, h, $A);
		gdamage[LoadGroupHandle(udg_hash, h, 2)] = LoadGroupHandle(udg_hash, h, 2);
		p[GetOwningPlayer(caster)] = GetOwningPlayer(caster);
		damage[LoadReal(udg_hash, h, 3)] = LoadReal(udg_hash, h, 3);
		stuntime[LoadReal(udg_hash, h, 6)] = LoadReal(udg_hash, h, 6);
		g[CreateGroup()] = CreateGroup();
		SetUnitPosition(dagger, GetUnitX(dagger) + 50. * Cos((angle) * bj_DEGTORAD), GetUnitY(dagger) + 50. * Sin((angle) * bj_DEGTORAD));
		GroupEnumUnitsInRange(g, GetUnitX(dagger) + 50. * Cos((angle) * bj_DEGTORAD), GetUnitY(dagger) + 50. * Sin((angle) * bj_DEGTORAD), 200., null);
		while (true) {
			Picked[FirstOfGroup(g)] = FirstOfGroup(g);
			if (Picked == null) break;
			if (IsUnitEnemy(Picked, p) && IsUnitInGroup(Picked, gdamage) == false && GetUnitState(Picked, UNIT_STATE_LIFE) > .0 && IsUnitType(Picked, UNIT_TYPE_STRUCTURE) == false && IsUnitType(Picked, UNIT_TYPE_MAGIC_IMMUNE) == false && GetUnitTypeId(Picked) != 'h00U') {
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Rifle\\RifleImpact.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GyroCopter\\GyroCopterImpact.mdl", Picked, "chest"));
				DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPeasant.mdl", Picked, "origin"));
				StunUnitTimed(Picked, stuntime);
				GroupAddUnit(gdamage, Picked);
				UnitDamageTarget(caster, Picked, damage, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNKNOWN, WEAPON_TYPE_WHOKNOWS);
			}
			GroupRemoveUnit(g, Picked);
		}
		SaveGroupHandle(udg_hash, h, 2, gdamage);
		GroupClear(g);
		DestroyGroup(g);
		g[null] = null;
		dagger[null] = null;
		gdamage[null] = null;
		p[null] = null;
	}
	if (LoadBoolean(udg_hash, h, 21) && wait <= 0) {
		dest[true] = true;
	}
	if (dest) {
		gdamage[LoadGroupHandle(udg_hash, h, 2)] = LoadGroupHandle(udg_hash, h, 2);
		GroupClear(gdamage);
		DestroyGroup(gdamage);
		gdamage[null] = null;
		dagger[LoadUnitHandle(udg_hash, h, $A)] = LoadUnitHandle(udg_hash, h, $A);
		ef[LoadEffectHandle(udg_hash, h, $B)] = LoadEffectHandle(udg_hash, h, $B);
		DestroyEffect(ef);
		ef[null] = null;
		DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\Mortar\\MortarMissile.mdl", GetUnitX(dagger), GetUnitY(dagger)));
		KillUnit(dagger);
		FlushChildHashtable(udg_hash, h);
		DestroyTimer(t);
		dagger[null] = null;
	}
	t[null] = null;
	caster[null] = null;
}
void Trig_Dwarf_Cannon_Actions() {
	unit caster = GetSpellAbilityUnit();
	float x = GetUnitX(caster);
	float y = GetUnitY(caster);
	unit target = GetSpellTargetUnit();
	float angle;
	group gdamage = CreateGroup();
	int lvl = GetUnitAbilityLevel(caster, 'A0QU');
	float damage = (150. * lvl) + 50.;
	float stuntime = 1. + 1. * lvl;
	location loc;
	float tx;
	float ty;
	float dist;
	unit dagger;
	timer t = CreateTimer();
	int h = GetHandleId(t);
	SetUnitTimeScale(caster, .15);
	SetUnitAnimationByIndex(caster, 3);
	if (target == null) {
		loc[GetSpellTargetLoc()] = GetSpellTargetLoc();
		tx[GetLocationX(loc)] = GetLocationX(loc);
		ty[GetLocationY(loc)] = GetLocationY(loc);
	else
		tx[GetUnitX(target)] = GetUnitX(target);
		ty[GetUnitY(target)] = GetUnitY(target);
	}
	angle[bj_RADTODEG * Atan2(ty - y, tx - x)] = bj_RADTODEG * Atan2(ty - y, tx - x);
	AddProgressBar(caster, 200., 1., 1.5, false, true, 'u', $C0, $C0, $C0);
	SaveUnitHandle(udg_hash, h, 1, caster);
	SaveGroupHandle(udg_hash, h, 2, gdamage);
	SaveReal(udg_hash, h, 3, damage);
	SaveReal(udg_hash, h, 4, x);
	SaveReal(udg_hash, h, 5, y);
	SaveReal(udg_hash, h, 6, stuntime);
	SaveReal(udg_hash, h, 7, angle);
	SaveInteger(udg_hash, h, 9, lvl);
	SaveInteger(udg_hash, h, 19, 30);
	SaveInteger(udg_hash, h, 20, 50);
	SaveBoolean(udg_hash, h, 21, false);
	TimerStart(t, .03, true, Trig_Dwarf_Cannon_Move_Actions);
	caster[null] = null;
	target[null] = null;
	gdamage[null] = null;
	RemoveLocation(loc);
	loc[null] = null;
	t[null] = null;
}
bool Trig_Dwarf_Cannon_Conditions() {
	return GetSpellAbilityId() == 'A0QU';
}
void InitTrig_Dwarf_Cannon() {
	int index = 0;
	gg_trg_Dwarf_Cannon[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Dwarf_Cannon, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Dwarf_Cannon, Condition(Trig_Dwarf_Cannon_Conditions));
	TriggerAddAction(gg_trg_Dwarf_Cannon, Trig_Dwarf_Cannon_Actions);
}
void Trig_Load_Sniper_Actions() {
	AbilityPreload('A0QR', 6);
	AbilityPreload('A0QV', 6);
	AbilityPreload('A0QT', 6);
	AbilityPreload('A0QU', 3);
	AbilityPreload('A0QS', 6);
	AbilityPreload('B05A', 1);
	EffectPreload("Abilities\\Weapons\\SteamTank\\SteamTankImpact.mdl");
	EffectPreload("Abilities\\Weapons\\GyroCopter\\GyroCopterMissile.mdl");
	EffectPreload("Abilities\\Weapons\\GyroCopter\\GyroCopterImpact.mdl");
	EffectPreload("Abilities\\Weapons\\CannonTowerMissile\\CannonTowerMissile.mdl");
	EffectPreload("Abilities\\Weapons\\Rifle\\RifleImpact.mdl");
	EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPeasant.mdl");
	EffectPreload("Effects\\Fire Uber.mdx");
	EffectPreload("Effects\\CircleOutBuff.mdx");
	EffectPreload("Abilities\\Weapons\\Mortar\\MortarMissile.mdl");
	EnableTrigger(gg_trg_Case_Shot);
	EnableTrigger(gg_trg_Learn_Fire_Position);
	EnableTrigger(gg_trg_Dwarf_Cannon);
}
void InitTrig_Load_Sniper() {
	gg_trg_Load_Sniper[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Load_Sniper, Trig_Load_Sniper_Actions);
}
void InitCustomTriggers() {
	InitTrig_Players_Start_Script();
	InitTrig_InitMap();
	InitTrig_InitMapStage2();
	InitTrig_System_Spells_Load();
	InitTrig_Items_Preload();
	InitTrig_Igrok_Massiv_Save();
	InitTrig_Load_Vsiakoe();
	InitTrig_Igrok_Massiv_Liver();
	InitTrig_Messager();
	InitTrig_Create_TExttags_about_Shops();
	InitTrig_InitHashtable();
	InitTrig_Save_Sounds();
	InitTrig_HandleCounter();
	InitTrig_Set_Chlenix();
	InitTrig_Set_Energy_Walls();
	InitTrig_Nachalo_Eiti_aren();
	InitTrig_HeroDeadonEitiArena();
	InitTrig__PortalCheckTop();
	InitTrig__PortalCheckBot();
	InitTrig_LinkItemsInit();
	InitTrig_ItemPickedUp();
	InitTrig_ChargesConnecting();
	InitTrig_Remove_Dammi_Items();
	InitTrig_Save_Items_Cost();
	InitTrig_Ice_Boss();
	InitTrig_Ice_Wall();
	InitTrig_Ice_Storm();
	InitTrig_Ice_Rain();
	InitTrig_Cold_Punishment();
	InitTrig_Ice_Restoration();
	InitTrig_BossStart();
	InitTrig_FlameSpells();
	InitTrig_Fire_Circle();
	InitTrig_Fire_Meteor();
	InitTrig_Upgrade_Summons();
	InitTrig_UseBeornSpells();
	InitTrig_Start_Beorn_Den();
	InitTrig_Beorn_Push();
	InitTrig_Beorn_Stomp();
	InitTrig_HeroUnitGameSave();
	InitTrig_INIT();
	InitTrig_Pick_Hero_Upgrade();
	InitTrig_Hero_Dead();
	InitTrig_Start_Duel();
	InitTrig_Hero_Death_On_Duel();
	InitTrig_Timer_Check();
	InitTrig_go_mochiytb_portal();
	InitTrig_Start_game();
	InitTrig_StartWave();
	InitTrig_MobsAttackBase();
	InitTrig_TeleportStuckedCreeps();
	InitTrig_vhodit_v_zony();
	InitTrig_Add_Gold_System_Receiving_Gold_for_Creeps();
	InitTrig_Init_System_Receiving_Gold_for_Creeps();
	InitTrig_Init_System_Receiving_Experience_for_Creeps();
	InitTrig_Add_Experience_System_Receiving_Experience_for_Creeps();
	InitTrig_Init_Potion_System();
	InitTrig_Mob_Dead_Create_Potion();
	InitTrig_Check_Potion_Picked_Up();
	InitTrig_InitSystem();
	InitTrig_EnterUnit();
	InitTrig_AddDamage();
	InitTrig_TimeTalisman();
	InitTrig_Take_Paladin_Armor();
	InitTrig_Take_Archimagus_Staff();
	InitTrig_Lost_Charged_Staff_of_Lightning();
	InitTrig_Blood_Bow();
	InitTrig_Balance_Ring();
	InitTrig_Armageddon_Staff();
	InitTrig_Sargeras_Crown();
	InitTrig_Lost_Sargeras_Crown();
	InitTrig_Take_Sargeras_Crown();
	InitTrig_Lost_Archimagus_Armor();
	InitTrig_Take_Archimagus_Armor();
	InitTrig_Sorcerers_Talisman_Cast();
	InitTrig_Sorcerers_Talisman();
	InitTrig_Sorcerers_Talisman_Dead_Unit();
	InitTrig_Orc_Banner();
	InitTrig_Devil_Axe();
	InitTrig_Devil_Axe_Kill_Unit();
	InitTrig_Tokugawas_Katan_Kill_Unit();
	InitTrig_Tokugawas_Katan();
	InitTrig_Kings_Armor();
	InitTrig_Steel_Bib();
	InitTrig_Archimagus_Staff();
	InitTrig_Isidors_Scepter();
	InitTrig_Detached_Shield_Use();
	InitTrig_Cuirass_of_Invulnerable_Use2();
	InitTrig_Lost_Cuirass_of_Invulnerable();
	InitTrig_Take_Cuirass_of_Invulnerable();
	InitTrig_Fire_Staff();
	InitTrig_Demon_Axe();
	InitTrig_Demon_Axe_Kill_Unit();
	InitTrig_Boots_Rescue();
	InitTrig_Astral_Staff();
	InitTrig_Healer_Staff();
	InitTrig_Magic_Amulet();
	InitTrig_Blood_Dagger();
	InitTrig_Agility_Blade();
	InitTrig_Bone_Staff_Set_Summon_Ability_Level();
	InitTrig_Novice_Amulet();
	InitTrig_Glove_of_Andromat();
	InitTrig_Glove_of_Midas();
	InitTrig_Heroes_more_attacked_priority_when_guards();
	InitTrig_Player_Fast_Purchase_System();
	InitTrig_Show_hint_abount_hints();
	InitTrig_Show_Hint_Abount_Items();
	InitTrig_Hint_About_Random();
	InitTrig_Show_hint_abount_reference_panel();
	InitTrig_Show_Ability_Learn();
	InitTrig_System_Personal_Items_Buy_Item();
	InitTrig_System_Personal_Items_Pick_Up_Item();
	InitTrig_no_attack();
	InitTrig_Select_Refrence_Panel();
	InitTrig_ShopAnimation();
	InitTrig_ShopStopAnimation();
	InitTrig_RedMarkToUnit();
	InitTrig_UnSelectedDummyRedMark();
	InitTrig_SpecEffect_on_Casters();
	InitTrig_PortalSpecEffects();
	InitTrig_Gates_Start_Animation();
	InitTrig_PlayerEnterGameCommand();
	InitTrig_PlayerUseSpellGameCommand();
	InitTrig_GuardsExorcistDead();
	InitTrig_PauseUnitWhenDefeat();
	InitTrig_PauseUnitWhenWin();
	InitTrig_GameEndWin();
	InitTrig_Respawn_trees_Init();
	InitTrig_Respawn_trees();
	InitTrig_Day_Weather();
	InitTrig_Sky_Morning();
	InitTrig_Sky_Day();
	InitTrig_Night_Weather();
	InitTrig_Sky_Evening();
	InitTrig_Sky_Night();
	InitTrig_Lightnings_Weather_Effect_Rainy();
	InitTrig_Periodic_Rune_Creation();
	InitTrig_Rune_PickedUp();
	InitTrig_Initialization_MultiBoard();
	InitTrig_Hero_MultiBoard_LvlUp();
	InitTrig_Time_Check_and_Player_Gold_for_MultiBoard();
	InitTrig_Reincarnation_Skeletons();
	InitTrig_BossSkeletRaise();
	InitTrig_BossSkeletSkillActiv();
	InitTrig_Fire_Arrow();
	InitTrig_Use_UnholyFrenzy_and_Fire_Arrow();
	InitTrig_Create_Tombstone();
	InitTrig_ZombieExploadDeath();
	InitTrig_Damned_Soul();
	InitTrig_Use_PowerofHorror_and_Curse_and_Slam_and_Dumned_Soul();
	InitTrig_Throw_Meat();
	InitTrig_Earth_Clap();
	InitTrig_Ghoul_Jump();
	InitTrig_BurrowStrike();
	InitTrig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump();
	InitTrig_BeetleCorpseBurrowCast();
	InitTrig_BeetleCorpseBurrow();
	InitTrig_Cocoon_Creation();
	InitTrig_Poisonous_Spittle_Cast();
	InitTrig_Holes_Of_Grave_Diggers_Debug_Kill();
	InitTrig_Holes_Of_Grave_Diggers_Cast();
	InitTrig_Nerub_Spider();
	InitTrig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger();
	InitTrig_Damned_Ents_Reincarnation();
	InitTrig_Rage_of_Decay();
	InitTrig_Use_ThrowStone_and_TurnIntoEnt();
	InitTrig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay();
	InitTrig_Troll_Dead_Remove_Bugs();
	InitTrig_Boss_Troll_Entangle_Throw();
	InitTrig_Use_Berserk_and_BerserkBoss();
	InitTrig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle();
	InitTrig_Aspect_of_Magic_Protection();
	InitTrig_Remove_Effects_From_Bosses();
	InitTrig_Metka_Dreneev();
	InitTrig_Fast_Attack();
	InitTrig_Bash_Attack();
	InitTrig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack();
	InitTrig_Blink_Strike();
	InitTrig_Victim_Search();
	InitTrig_Black_Hole();
	InitTrig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar();
	InitTrig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH();
	InitTrig_Weakness();
	InitTrig_Astral_Dispersal();
	InitTrig_Infernal_Ram();
	InitTrig_Fiery_Blow();
	InitTrig_Bloody_Jump();
	InitTrig_Blood_Absorption();
	InitTrig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u();
	InitTrig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4();
	InitTrig_Hatred_of_fire();
	InitTrig_set_fire();
	InitTrig_set_fire_2();
	InitTrig_the_creation_of_the_image();
	InitTrig_fiery_explosions();
	InitTrig_Breathoffire();
	InitTrig_Fire_Explosions();
	InitTrig_BossStomp();
	InitTrig_Mark_of_Fire();
	InitTrig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire();
	InitTrig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp();
	InitTrig_Power_of_Skeletons();
	InitTrig_Water_Elemental_Load();
	InitTrig_Init_kreeps();
	InitTrig_spirits_of_water_dead();
	InitTrig_Skill_Gertva();
	InitTrig_Opening_Streams();
	InitTrig_Water_Explosion();
	InitTrig_Tsunami();
	InitTrig_Guardsman_Load();
	InitTrig_Protective_Stand_Switch();
	InitTrig_Learn_Fighting_Skills();
	InitTrig_Ram_Board();
	InitTrig_Warcry();
	InitTrig_Drenor_Bull_Load();
	InitTrig_Drenor_Bull_Show_Hint();
	InitTrig_Drenor_Bull_Show_Rage();
	InitTrig_Axe_Throw();
	InitTrig_Violent_Roar();
	InitTrig_upgrade_Berserk();
	InitTrig_Learn_Spell_Rage();
	InitTrig_GrogTarDead();
	InitTrig_attack_hero_Rage();
	InitTrig_kill_hero_Rage();
	InitTrig_Sniatie_Rage();
	InitTrig_Timer_Rage();
	InitTrig_Illusionist_Load();
	InitTrig_Reflection();
	InitTrig_Illusory_Attack();
	InitTrig_Summon_Illusions_with_Reflection();
	InitTrig_Illusions_with_Phantoms_Dead();
	InitTrig_BladeMaster_Load();
	InitTrig_Dissection();
	InitTrig_Whirlwind();
	InitTrig_Imboweling();
	InitTrig_Master_of_Lightnings_Load();
	InitTrig_Thundercloud();
	InitTrig_Power_of_Lightnings();
	InitTrig_Electric_Field();
	InitTrig_Storm();
	InitTrig_Respawnlol();
	InitTrig_Ranger_Load();
	InitTrig_MultiShotSwitch();
	InitTrig_Learn_Release_of_Arrows();
	InitTrig_Release_of_Arrows();
	InitTrig_Dexterity_of_the_Ranger();
	InitTrig_Healer_Load();
	InitTrig_Good_Healing();
	InitTrig_Spiritual_Communication();
	InitTrig_Curing_Light();
	InitTrig_Guardian_Angel();
	InitTrig_Paladin_Load();
	InitTrig_Spiral_of_Light();
	InitTrig_Keeper_Seal();
	InitTrig_Light_Hammer();
	InitTrig_God_Hand();
	InitTrig_Stone_Guard_Load();
	InitTrig_Boulder_Throw();
	InitTrig_Earth_Shiver();
	InitTrig_Learn_Stone_Armor();
	InitTrig_Rock_Strike();
	InitTrig_Archdruid_Load();
	InitTrig_Energy_of_Nature();
	InitTrig_Life_Chain();
	InitTrig_Ent_Creation();
	InitTrig_Nature_Wrath();
	InitTrig_Falling_Star();
	InitTrig_Moon_Chackram();
	InitTrig_Moon_Wind();
	InitTrig_Night_Heart();
	InitTrig_MoonWarrior_Load();
	InitTrig_Ancient_Communication();
	InitTrig_Learn_Power_of_Ancestors();
	InitTrig_Switch_Power_of_Ancestors();
	InitTrig_Earth_Split();
	InitTrig_Ancient_Help();
	InitTrig_SpiritBreaker_Load();
	InitTrig_Dash();
	InitTrig_Dagger_Throw();
	InitTrig_Kara_Justice();
	InitTrig_Warden_Load();
	InitTrig_Strength_Fist();
	InitTrig_Fighting_Impact();
	InitTrig_Learn_Marshal_Armor();
	InitTrig_Illusive_Army();
	InitTrig_Marshal_Load();
	InitTrig_Chain_Lightning();
	InitTrig_Magic_Trap();
	InitTrig_Remove_Lightning_Form_Dead_Units();
	InitTrig_EnergyWave();
	InitTrig_Magic_Epicenter();
	InitTrig_Load_ArchMage();
	InitTrig_Toxic_Field();
	InitTrig_Poison_Bomb();
	InitTrig_Learn_Ogre_Rage();
	InitTrig_Potion_of_Growth();
	InitTrig_Load_Alchemist();
	InitTrig_Case_Shot();
	InitTrig_Learn_Fire_Position();
	InitTrig_Dwarf_Cannon();
	InitTrig_Load_Sniper();
}
void RunInitializationTriggers() {
	ConditionalTriggerExecute(gg_trg_InitHashtable);
	ConditionalTriggerExecute(gg_trg_InitSystem);
	ConditionalTriggerExecute(gg_trg_Init_kreeps);
	ConditionalTriggerExecute(gg_trg_Drenor_Bull_Load);
}
void InitCustomPlayerSlots() {
	SetPlayerStartLocation(Player(0), 0);
	ForcePlayerStartLocation(Player(0), 0);
	SetPlayerColor(Player(0), ConvertPlayerColor(0));
	SetPlayerRacePreference(Player(0), RACE_PREF_HUMAN);
	SetPlayerRaceSelectable(Player(0), false);
	SetPlayerController(Player(0), MAP_CONTROL_USER);
	SetPlayerStartLocation(Player(1), 1);
	ForcePlayerStartLocation(Player(1), 1);
	SetPlayerColor(Player(1), ConvertPlayerColor(1));
	SetPlayerRacePreference(Player(1), RACE_PREF_HUMAN);
	SetPlayerRaceSelectable(Player(1), false);
	SetPlayerController(Player(1), MAP_CONTROL_USER);
	SetPlayerStartLocation(Player(2), 2);
	ForcePlayerStartLocation(Player(2), 2);
	SetPlayerColor(Player(2), ConvertPlayerColor(2));
	SetPlayerRacePreference(Player(2), RACE_PREF_HUMAN);
	SetPlayerRaceSelectable(Player(2), false);
	SetPlayerController(Player(2), MAP_CONTROL_USER);
	SetPlayerStartLocation(Player(3), 3);
	ForcePlayerStartLocation(Player(3), 3);
	SetPlayerColor(Player(3), ConvertPlayerColor(3));
	SetPlayerRacePreference(Player(3), RACE_PREF_HUMAN);
	SetPlayerRaceSelectable(Player(3), false);
	SetPlayerController(Player(3), MAP_CONTROL_USER);
	SetPlayerStartLocation(Player(4), 4);
	ForcePlayerStartLocation(Player(4), 4);
	SetPlayerColor(Player(4), ConvertPlayerColor(4));
	SetPlayerRacePreference(Player(4), RACE_PREF_HUMAN);
	SetPlayerRaceSelectable(Player(4), false);
	SetPlayerController(Player(4), MAP_CONTROL_USER);
	SetPlayerStartLocation(Player(5), 5);
	ForcePlayerStartLocation(Player(5), 5);
	SetPlayerColor(Player(5), ConvertPlayerColor(5));
	SetPlayerRacePreference(Player(5), RACE_PREF_HUMAN);
	SetPlayerRaceSelectable(Player(5), false);
	SetPlayerController(Player(5), MAP_CONTROL_USER);
	SetPlayerStartLocation(Player(6), 6);
	ForcePlayerStartLocation(Player(6), 6);
	SetPlayerColor(Player(6), ConvertPlayerColor(6));
	SetPlayerRacePreference(Player(6), RACE_PREF_HUMAN);
	SetPlayerRaceSelectable(Player(6), false);
	SetPlayerController(Player(6), MAP_CONTROL_USER);
	SetPlayerStartLocation(Player(7), 7);
	ForcePlayerStartLocation(Player(7), 7);
	SetPlayerColor(Player(7), ConvertPlayerColor(7));
	SetPlayerRacePreference(Player(7), RACE_PREF_HUMAN);
	SetPlayerRaceSelectable(Player(7), false);
	SetPlayerController(Player(7), MAP_CONTROL_USER);
	SetPlayerStartLocation(Player(8), 8);
	ForcePlayerStartLocation(Player(8), 8);
	SetPlayerColor(Player(8), ConvertPlayerColor(8));
	SetPlayerRacePreference(Player(8), RACE_PREF_HUMAN);
	SetPlayerRaceSelectable(Player(8), false);
	SetPlayerController(Player(8), MAP_CONTROL_USER);
	SetPlayerStartLocation(Player($B), 9);
	ForcePlayerStartLocation(Player($B), 9);
	SetPlayerColor(Player($B), ConvertPlayerColor($B));
	SetPlayerRacePreference(Player($B), RACE_PREF_UNDEAD);
	SetPlayerRaceSelectable(Player($B), false);
	SetPlayerController(Player($B), MAP_CONTROL_COMPUTER);
}
void InitCustomTeams() {
	SetPlayerTeam(Player(0), 0);
	SetPlayerState(Player(0), PLAYER_STATE_ALLIED_VICTORY, 1);
	SetPlayerTeam(Player(1), 0);
	SetPlayerState(Player(1), PLAYER_STATE_ALLIED_VICTORY, 1);
	SetPlayerTeam(Player(2), 0);
	SetPlayerState(Player(2), PLAYER_STATE_ALLIED_VICTORY, 1);
	SetPlayerTeam(Player(3), 0);
	SetPlayerState(Player(3), PLAYER_STATE_ALLIED_VICTORY, 1);
	SetPlayerTeam(Player(4), 0);
	SetPlayerState(Player(4), PLAYER_STATE_ALLIED_VICTORY, 1);
	SetPlayerTeam(Player(5), 0);
	SetPlayerState(Player(5), PLAYER_STATE_ALLIED_VICTORY, 1);
	SetPlayerTeam(Player(6), 0);
	SetPlayerState(Player(6), PLAYER_STATE_ALLIED_VICTORY, 1);
	SetPlayerTeam(Player(7), 0);
	SetPlayerState(Player(7), PLAYER_STATE_ALLIED_VICTORY, 1);
	SetPlayerTeam(Player(8), 0);
	SetPlayerState(Player(8), PLAYER_STATE_ALLIED_VICTORY, 1);
	SetPlayerAllianceStateAllyBJ(Player(0), Player(1), true);
	SetPlayerAllianceStateAllyBJ(Player(0), Player(2), true);
	SetPlayerAllianceStateAllyBJ(Player(0), Player(3), true);
	SetPlayerAllianceStateAllyBJ(Player(0), Player(4), true);
	SetPlayerAllianceStateAllyBJ(Player(0), Player(5), true);
	SetPlayerAllianceStateAllyBJ(Player(0), Player(6), true);
	SetPlayerAllianceStateAllyBJ(Player(0), Player(7), true);
	SetPlayerAllianceStateAllyBJ(Player(0), Player(8), true);
	SetPlayerAllianceStateAllyBJ(Player(1), Player(0), true);
	SetPlayerAllianceStateAllyBJ(Player(1), Player(2), true);
	SetPlayerAllianceStateAllyBJ(Player(1), Player(3), true);
	SetPlayerAllianceStateAllyBJ(Player(1), Player(4), true);
	SetPlayerAllianceStateAllyBJ(Player(1), Player(5), true);
	SetPlayerAllianceStateAllyBJ(Player(1), Player(6), true);
	SetPlayerAllianceStateAllyBJ(Player(1), Player(7), true);
	SetPlayerAllianceStateAllyBJ(Player(1), Player(8), true);
	SetPlayerAllianceStateAllyBJ(Player(2), Player(0), true);
	SetPlayerAllianceStateAllyBJ(Player(2), Player(1), true);
	SetPlayerAllianceStateAllyBJ(Player(2), Player(3), true);
	SetPlayerAllianceStateAllyBJ(Player(2), Player(4), true);
	SetPlayerAllianceStateAllyBJ(Player(2), Player(5), true);
	SetPlayerAllianceStateAllyBJ(Player(2), Player(6), true);
	SetPlayerAllianceStateAllyBJ(Player(2), Player(7), true);
	SetPlayerAllianceStateAllyBJ(Player(2), Player(8), true);
	SetPlayerAllianceStateAllyBJ(Player(3), Player(0), true);
	SetPlayerAllianceStateAllyBJ(Player(3), Player(1), true);
	SetPlayerAllianceStateAllyBJ(Player(3), Player(2), true);
	SetPlayerAllianceStateAllyBJ(Player(3), Player(4), true);
	SetPlayerAllianceStateAllyBJ(Player(3), Player(5), true);
	SetPlayerAllianceStateAllyBJ(Player(3), Player(6), true);
	SetPlayerAllianceStateAllyBJ(Player(3), Player(7), true);
	SetPlayerAllianceStateAllyBJ(Player(3), Player(8), true);
	SetPlayerAllianceStateAllyBJ(Player(4), Player(0), true);
	SetPlayerAllianceStateAllyBJ(Player(4), Player(1), true);
	SetPlayerAllianceStateAllyBJ(Player(4), Player(2), true);
	SetPlayerAllianceStateAllyBJ(Player(4), Player(3), true);
	SetPlayerAllianceStateAllyBJ(Player(4), Player(5), true);
	SetPlayerAllianceStateAllyBJ(Player(4), Player(6), true);
	SetPlayerAllianceStateAllyBJ(Player(4), Player(7), true);
	SetPlayerAllianceStateAllyBJ(Player(4), Player(8), true);
	SetPlayerAllianceStateAllyBJ(Player(5), Player(0), true);
	SetPlayerAllianceStateAllyBJ(Player(5), Player(1), true);
	SetPlayerAllianceStateAllyBJ(Player(5), Player(2), true);
	SetPlayerAllianceStateAllyBJ(Player(5), Player(3), true);
	SetPlayerAllianceStateAllyBJ(Player(5), Player(4), true);
	SetPlayerAllianceStateAllyBJ(Player(5), Player(6), true);
	SetPlayerAllianceStateAllyBJ(Player(5), Player(7), true);
	SetPlayerAllianceStateAllyBJ(Player(5), Player(8), true);
	SetPlayerAllianceStateAllyBJ(Player(6), Player(0), true);
	SetPlayerAllianceStateAllyBJ(Player(6), Player(1), true);
	SetPlayerAllianceStateAllyBJ(Player(6), Player(2), true);
	SetPlayerAllianceStateAllyBJ(Player(6), Player(3), true);
	SetPlayerAllianceStateAllyBJ(Player(6), Player(4), true);
	SetPlayerAllianceStateAllyBJ(Player(6), Player(5), true);
	SetPlayerAllianceStateAllyBJ(Player(6), Player(7), true);
	SetPlayerAllianceStateAllyBJ(Player(6), Player(8), true);
	SetPlayerAllianceStateAllyBJ(Player(7), Player(0), true);
	SetPlayerAllianceStateAllyBJ(Player(7), Player(1), true);
	SetPlayerAllianceStateAllyBJ(Player(7), Player(2), true);
	SetPlayerAllianceStateAllyBJ(Player(7), Player(3), true);
	SetPlayerAllianceStateAllyBJ(Player(7), Player(4), true);
	SetPlayerAllianceStateAllyBJ(Player(7), Player(5), true);
	SetPlayerAllianceStateAllyBJ(Player(7), Player(6), true);
	SetPlayerAllianceStateAllyBJ(Player(7), Player(8), true);
	SetPlayerAllianceStateAllyBJ(Player(8), Player(0), true);
	SetPlayerAllianceStateAllyBJ(Player(8), Player(1), true);
	SetPlayerAllianceStateAllyBJ(Player(8), Player(2), true);
	SetPlayerAllianceStateAllyBJ(Player(8), Player(3), true);
	SetPlayerAllianceStateAllyBJ(Player(8), Player(4), true);
	SetPlayerAllianceStateAllyBJ(Player(8), Player(5), true);
	SetPlayerAllianceStateAllyBJ(Player(8), Player(6), true);
	SetPlayerAllianceStateAllyBJ(Player(8), Player(7), true);
	SetPlayerAllianceStateVisionBJ(Player(0), Player(1), true);
	SetPlayerAllianceStateVisionBJ(Player(0), Player(2), true);
	SetPlayerAllianceStateVisionBJ(Player(0), Player(3), true);
	SetPlayerAllianceStateVisionBJ(Player(0), Player(4), true);
	SetPlayerAllianceStateVisionBJ(Player(0), Player(5), true);
	SetPlayerAllianceStateVisionBJ(Player(0), Player(6), true);
	SetPlayerAllianceStateVisionBJ(Player(0), Player(7), true);
	SetPlayerAllianceStateVisionBJ(Player(0), Player(8), true);
	SetPlayerAllianceStateVisionBJ(Player(1), Player(0), true);
	SetPlayerAllianceStateVisionBJ(Player(1), Player(2), true);
	SetPlayerAllianceStateVisionBJ(Player(1), Player(3), true);
	SetPlayerAllianceStateVisionBJ(Player(1), Player(4), true);
	SetPlayerAllianceStateVisionBJ(Player(1), Player(5), true);
	SetPlayerAllianceStateVisionBJ(Player(1), Player(6), true);
	SetPlayerAllianceStateVisionBJ(Player(1), Player(7), true);
	SetPlayerAllianceStateVisionBJ(Player(1), Player(8), true);
	SetPlayerAllianceStateVisionBJ(Player(2), Player(0), true);
	SetPlayerAllianceStateVisionBJ(Player(2), Player(1), true);
	SetPlayerAllianceStateVisionBJ(Player(2), Player(3), true);
	SetPlayerAllianceStateVisionBJ(Player(2), Player(4), true);
	SetPlayerAllianceStateVisionBJ(Player(2), Player(5), true);
	SetPlayerAllianceStateVisionBJ(Player(2), Player(6), true);
	SetPlayerAllianceStateVisionBJ(Player(2), Player(7), true);
	SetPlayerAllianceStateVisionBJ(Player(2), Player(8), true);
	SetPlayerAllianceStateVisionBJ(Player(3), Player(0), true);
	SetPlayerAllianceStateVisionBJ(Player(3), Player(1), true);
	SetPlayerAllianceStateVisionBJ(Player(3), Player(2), true);
	SetPlayerAllianceStateVisionBJ(Player(3), Player(4), true);
	SetPlayerAllianceStateVisionBJ(Player(3), Player(5), true);
	SetPlayerAllianceStateVisionBJ(Player(3), Player(6), true);
	SetPlayerAllianceStateVisionBJ(Player(3), Player(7), true);
	SetPlayerAllianceStateVisionBJ(Player(3), Player(8), true);
	SetPlayerAllianceStateVisionBJ(Player(4), Player(0), true);
	SetPlayerAllianceStateVisionBJ(Player(4), Player(1), true);
	SetPlayerAllianceStateVisionBJ(Player(4), Player(2), true);
	SetPlayerAllianceStateVisionBJ(Player(4), Player(3), true);
	SetPlayerAllianceStateVisionBJ(Player(4), Player(5), true);
	SetPlayerAllianceStateVisionBJ(Player(4), Player(6), true);
	SetPlayerAllianceStateVisionBJ(Player(4), Player(7), true);
	SetPlayerAllianceStateVisionBJ(Player(4), Player(8), true);
	SetPlayerAllianceStateVisionBJ(Player(5), Player(0), true);
	SetPlayerAllianceStateVisionBJ(Player(5), Player(1), true);
	SetPlayerAllianceStateVisionBJ(Player(5), Player(2), true);
	SetPlayerAllianceStateVisionBJ(Player(5), Player(3), true);
	SetPlayerAllianceStateVisionBJ(Player(5), Player(4), true);
	SetPlayerAllianceStateVisionBJ(Player(5), Player(6), true);
	SetPlayerAllianceStateVisionBJ(Player(5), Player(7), true);
	SetPlayerAllianceStateVisionBJ(Player(5), Player(8), true);
	SetPlayerAllianceStateVisionBJ(Player(6), Player(0), true);
	SetPlayerAllianceStateVisionBJ(Player(6), Player(1), true);
	SetPlayerAllianceStateVisionBJ(Player(6), Player(2), true);
	SetPlayerAllianceStateVisionBJ(Player(6), Player(3), true);
	SetPlayerAllianceStateVisionBJ(Player(6), Player(4), true);
	SetPlayerAllianceStateVisionBJ(Player(6), Player(5), true);
	SetPlayerAllianceStateVisionBJ(Player(6), Player(7), true);
	SetPlayerAllianceStateVisionBJ(Player(6), Player(8), true);
	SetPlayerAllianceStateVisionBJ(Player(7), Player(0), true);
	SetPlayerAllianceStateVisionBJ(Player(7), Player(1), true);
	SetPlayerAllianceStateVisionBJ(Player(7), Player(2), true);
	SetPlayerAllianceStateVisionBJ(Player(7), Player(3), true);
	SetPlayerAllianceStateVisionBJ(Player(7), Player(4), true);
	SetPlayerAllianceStateVisionBJ(Player(7), Player(5), true);
	SetPlayerAllianceStateVisionBJ(Player(7), Player(6), true);
	SetPlayerAllianceStateVisionBJ(Player(7), Player(8), true);
	SetPlayerAllianceStateVisionBJ(Player(8), Player(0), true);
	SetPlayerAllianceStateVisionBJ(Player(8), Player(1), true);
	SetPlayerAllianceStateVisionBJ(Player(8), Player(2), true);
	SetPlayerAllianceStateVisionBJ(Player(8), Player(3), true);
	SetPlayerAllianceStateVisionBJ(Player(8), Player(4), true);
	SetPlayerAllianceStateVisionBJ(Player(8), Player(5), true);
	SetPlayerAllianceStateVisionBJ(Player(8), Player(6), true);
	SetPlayerAllianceStateVisionBJ(Player(8), Player(7), true);
	SetPlayerTeam(Player($B), 1);
	SetPlayerState(Player($B), PLAYER_STATE_ALLIED_VICTORY, 1);
}
void InitAllyPriorities() {
	SetStartLocPrioCount(0, 8);
	SetStartLocPrio(0, 0, 1, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(0, 1, 2, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(0, 2, 3, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(0, 3, 4, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(0, 4, 5, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(0, 5, 6, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(0, 6, 7, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(0, 7, 8, MAP_LOC_PRIO_HIGH);
	SetStartLocPrioCount(1, 8);
	SetStartLocPrio(1, 0, 0, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(1, 1, 2, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(1, 2, 3, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(1, 3, 4, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(1, 4, 5, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(1, 5, 6, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(1, 6, 7, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(1, 7, 8, MAP_LOC_PRIO_HIGH);
	SetStartLocPrioCount(2, 8);
	SetStartLocPrio(2, 0, 0, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(2, 1, 1, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(2, 2, 3, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(2, 3, 4, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(2, 4, 5, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(2, 5, 6, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(2, 6, 7, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(2, 7, 8, MAP_LOC_PRIO_HIGH);
	SetStartLocPrioCount(3, 8);
	SetStartLocPrio(3, 0, 0, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(3, 1, 1, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(3, 2, 2, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(3, 3, 4, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(3, 4, 5, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(3, 5, 6, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(3, 6, 7, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(3, 7, 8, MAP_LOC_PRIO_HIGH);
	SetStartLocPrioCount(4, 8);
	SetStartLocPrio(4, 0, 0, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(4, 1, 1, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(4, 2, 2, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(4, 3, 3, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(4, 4, 5, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(4, 5, 6, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(4, 6, 7, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(4, 7, 8, MAP_LOC_PRIO_HIGH);
	SetStartLocPrioCount(5, 8);
	SetStartLocPrio(5, 0, 0, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(5, 1, 1, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(5, 2, 2, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(5, 3, 3, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(5, 4, 4, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(5, 5, 6, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(5, 6, 7, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(5, 7, 8, MAP_LOC_PRIO_HIGH);
	SetStartLocPrioCount(6, 8);
	SetStartLocPrio(6, 0, 0, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(6, 1, 1, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(6, 2, 2, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(6, 3, 3, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(6, 4, 4, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(6, 5, 5, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(6, 6, 7, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(6, 7, 8, MAP_LOC_PRIO_HIGH);
	SetStartLocPrioCount(7, 8);
	SetStartLocPrio(7, 0, 0, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(7, 1, 1, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(7, 2, 2, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(7, 3, 3, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(7, 4, 4, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(7, 5, 5, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(7, 6, 6, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(7, 7, 8, MAP_LOC_PRIO_HIGH);
	SetStartLocPrioCount(8, 8);
	SetStartLocPrio(8, 0, 0, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(8, 1, 1, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(8, 2, 2, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(8, 3, 3, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(8, 4, 4, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(8, 5, 5, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(8, 6, 6, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(8, 7, 7, MAP_LOC_PRIO_HIGH);
	SetStartLocPrioCount(9, 3);
	SetStartLocPrio(9, 0, 0, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(9, 1, 1, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(9, 2, 2, MAP_LOC_PRIO_HIGH);
}
void main() {
	weathereffect we;
	int i;
	player p;
	unit u;
	int unitID;
	trigger t;
	float life;
	int index;
	region rectRegion;
	SetCameraBounds(-5760. + GetCameraMargin(CAMERA_MARGIN_LEFT), -10624. + GetCameraMargin(CAMERA_MARGIN_BOTTOM), 5504. - GetCameraMargin(CAMERA_MARGIN_RIGHT), 4480. - GetCameraMargin(CAMERA_MARGIN_TOP), -5760. + GetCameraMargin(CAMERA_MARGIN_LEFT), 4480. - GetCameraMargin(CAMERA_MARGIN_TOP), 5504. - GetCameraMargin(CAMERA_MARGIN_RIGHT), -10624. + GetCameraMargin(CAMERA_MARGIN_BOTTOM));
	SetDayNightModels("Environment\\DNC\\DNCDalaran\\DNCDalaranTerrain\\DNCDalaranTerrain.mdl", "Environment\\DNC\\DNCDalaran\\DNCDalaranUnit\\DNCDalaranUnit.mdl");
	SetWaterBaseColor(0, $80, 0, $FF);
	NewSoundEnvironment("Default");
	SetAmbientDaySound("FelwoodDay");
	SetAmbientNightSound("FelwoodNight");
	SetMapMusic("Music", true, 0);
	gg_snd_HeroFirelordYesAttack1[CreateSound("Units\\Creeps\\HeroFlameLord\\HeroFirelordYesAttack1.wav", false, false, false, $A, $A, "HeroAcksEAX")] = CreateSound("Units\\Creeps\\HeroFlameLord\\HeroFirelordYesAttack1.wav", false, false, false, $A, $A, "HeroAcksEAX");
	SetSoundParamsFromLabel(gg_snd_HeroFirelordYesAttack1, "HeroFireLordYesAttack");
	SetSoundDuration(gg_snd_HeroFirelordYesAttack1, $984);
	gg_snd_HeroFirelordYesAttack2[CreateSound("Units\\Creeps\\HeroFlameLord\\HeroFirelordYesAttack2.wav", false, false, false, $A, $A, "HeroAcksEAX")] = CreateSound("Units\\Creeps\\HeroFlameLord\\HeroFirelordYesAttack2.wav", false, false, false, $A, $A, "HeroAcksEAX");
	SetSoundParamsFromLabel(gg_snd_HeroFirelordYesAttack2, "HeroFireLordYesAttack");
	SetSoundDuration(gg_snd_HeroFirelordYesAttack2, $DAF);
	gg_snd_HeroFirelordYesAttack3[CreateSound("Units\\Creeps\\HeroFlameLord\\HeroFirelordYesAttack3.wav", false, false, false, $A, $A, "HeroAcksEAX")] = CreateSound("Units\\Creeps\\HeroFlameLord\\HeroFirelordYesAttack3.wav", false, false, false, $A, $A, "HeroAcksEAX");
	SetSoundParamsFromLabel(gg_snd_HeroFirelordYesAttack3, "HeroFireLordYesAttack");
	SetSoundDuration(gg_snd_HeroFirelordYesAttack3, $AD1);
	gg_snd_HeroFirelordWarcry1[CreateSound("Units\\Creeps\\HeroFlameLord\\HeroFirelordWarcry1.wav", false, false, false, $A, $A, "HeroAcksEAX")] = CreateSound("Units\\Creeps\\HeroFlameLord\\HeroFirelordWarcry1.wav", false, false, false, $A, $A, "HeroAcksEAX");
	SetSoundParamsFromLabel(gg_snd_HeroFirelordWarcry1, "HeroFireLordWarcry");
	SetSoundDuration(gg_snd_HeroFirelordWarcry1, 5072);
	gg_snd_HeroLichReady1[CreateSound("Units\\Undead\\HeroLich\\HeroLichReady1.wav", false, false, false, $A, $A, "HeroAcksEAX")] = CreateSound("Units\\Undead\\HeroLich\\HeroLichReady1.wav", false, false, false, $A, $A, "HeroAcksEAX");
	SetSoundParamsFromLabel(gg_snd_HeroLichReady1, "HeroLichReady");
	SetSoundDuration(gg_snd_HeroLichReady1, 4337);
	gg_snd_HeroLichYesAttack1[CreateSound("Units\\Undead\\HeroLich\\HeroLichYesAttack1.wav", false, false, false, $A, $A, "HeroAcksEAX")] = CreateSound("Units\\Undead\\HeroLich\\HeroLichYesAttack1.wav", false, false, false, $A, $A, "HeroAcksEAX");
	SetSoundParamsFromLabel(gg_snd_HeroLichYesAttack1, "HeroLichYesAttack");
	SetSoundDuration(gg_snd_HeroLichYesAttack1, $A4C);
	gg_snd_HeroLichYesAttack2[CreateSound("Units\\Undead\\HeroLich\\HeroLichYesAttack2.wav", false, false, false, $A, $A, "HeroAcksEAX")] = CreateSound("Units\\Undead\\HeroLich\\HeroLichYesAttack2.wav", false, false, false, $A, $A, "HeroAcksEAX");
	SetSoundParamsFromLabel(gg_snd_HeroLichYesAttack2, "HeroLichYesAttack");
	SetSoundDuration(gg_snd_HeroLichYesAttack2, $9D4);
	gg_snd_HeroLichYesAttack3[CreateSound("Units\\Undead\\HeroLich\\HeroLichYesAttack3.wav", false, false, false, $A, $A, "HeroAcksEAX")] = CreateSound("Units\\Undead\\HeroLich\\HeroLichYesAttack3.wav", false, false, false, $A, $A, "HeroAcksEAX");
	SetSoundParamsFromLabel(gg_snd_HeroLichYesAttack3, "HeroLichYesAttack");
	SetSoundDuration(gg_snd_HeroLichYesAttack3, $872);
	gg_snd_DeathSound1[CreateSound("Units\\Creeps\\Bandit\\BanditYesAttack1.wav", false, false, false, $A, $A, "DefaultEAXON")] = CreateSound("Units\\Creeps\\Bandit\\BanditYesAttack1.wav", false, false, false, $A, $A, "DefaultEAXON");
	SetSoundParamsFromLabel(gg_snd_DeathSound1, "BanditYesAttack");
	SetSoundDuration(gg_snd_DeathSound1, $4EE);
	gg_snd_KnightNoGold1[CreateSound("Sound\\Interface\\Warning\\Human\\KnightNoGold1.wav", false, false, false, $A, $A, "")] = CreateSound("Sound\\Interface\\Warning\\Human\\KnightNoGold1.wav", false, false, false, $A, $A, "");
	SetSoundParamsFromLabel(gg_snd_KnightNoGold1, "NoGoldHuman");
	SetSoundDuration(gg_snd_KnightNoGold1, $57D);
	gg_snd_KnightInventoryFull1[CreateSound("Sound\\Interface\\Warning\\Human\\KnightInventoryFull1.wav", false, false, false, $A, $A, "")] = CreateSound("Sound\\Interface\\Warning\\Human\\KnightInventoryFull1.wav", false, false, false, $A, $A, "");
	SetSoundParamsFromLabel(gg_snd_KnightInventoryFull1, "InventoryFullHuman");
	SetSoundDuration(gg_snd_KnightInventoryFull1, $3E8);
	gg_snd_HeroStep1[CreateSound("Sound\\Units\\Footsteps\\HeroStep1.wav", false, true, true, $A, $A, "SpellsEAX")] = CreateSound("Sound\\Units\\Footsteps\\HeroStep1.wav", false, true, true, $A, $A, "SpellsEAX");
	SetSoundParamsFromLabel(gg_snd_HeroStep1, "HeroCinematicStep");
	SetSoundDuration(gg_snd_HeroStep1, 947);
	gg_snd_HeroStep2[CreateSound("Sound\\Units\\Footsteps\\HeroStep2.wav", false, true, true, $A, $A, "SpellsEAX")] = CreateSound("Sound\\Units\\Footsteps\\HeroStep2.wav", false, true, true, $A, $A, "SpellsEAX");
	SetSoundParamsFromLabel(gg_snd_HeroStep2, "HeroCinematicStep");
	SetSoundDuration(gg_snd_HeroStep2, 697);
	gg_snd_HeroStep3[CreateSound("Sound\\Units\\Footsteps\\HeroStep3.wav", false, true, true, $A, $A, "SpellsEAX")] = CreateSound("Sound\\Units\\Footsteps\\HeroStep3.wav", false, true, true, $A, $A, "SpellsEAX");
	SetSoundParamsFromLabel(gg_snd_HeroStep3, "HeroCinematicStep");
	SetSoundDuration(gg_snd_HeroStep3, 599);
	gg_snd_HeroStep4[CreateSound("Sound\\Units\\Footsteps\\HeroStep4.wav", false, true, true, $A, $A, "SpellsEAX")] = CreateSound("Sound\\Units\\Footsteps\\HeroStep4.wav", false, true, true, $A, $A, "SpellsEAX");
	SetSoundParamsFromLabel(gg_snd_HeroStep4, "HeroCinematicStep");
	SetSoundDuration(gg_snd_HeroStep4, $E5);
	gg_snd_HuntressYesAttack4[CreateSound("Units\\NightElf\\Huntress\\HuntressYesAttack4.wav", false, false, false, 'd', $A, "DefaultEAXON")] = CreateSound("Units\\NightElf\\Huntress\\HuntressYesAttack4.wav", false, false, false, 'd', $A, "DefaultEAXON");
	SetSoundParamsFromLabel(gg_snd_HuntressYesAttack4, "HuntressYesAttack");
	SetSoundDuration(gg_snd_HuntressYesAttack4, $55E);
	SetSoundChannel(gg_snd_HuntressYesAttack4, 0);
	gg_snd_WardenAttackEffort1[CreateSound("Units\\NightElf\\HeroWarden\\WardenAttackEffort1.wav", false, true, true, $A, $A, "CombatSoundsEAX")] = CreateSound("Units\\NightElf\\HeroWarden\\WardenAttackEffort1.wav", false, true, true, $A, $A, "CombatSoundsEAX");
	SetSoundParamsFromLabel(gg_snd_WardenAttackEffort1, "WardenAttack");
	SetSoundDuration(gg_snd_WardenAttackEffort1, $54E);
	gg_snd_AlchemistChemicalBurst1[CreateSound("Units\\Creeps\\HEROGoblinALCHEMIST\\AlchemistChemicalBurst1.wav", false, false, false, $A, $A, "DefaultEAXON")] = CreateSound("Units\\Creeps\\HEROGoblinALCHEMIST\\AlchemistChemicalBurst1.wav", false, false, false, $A, $A, "DefaultEAXON");
	SetSoundParamsFromLabel(gg_snd_AlchemistChemicalBurst1, "GoblinAlchemistMorph");
	SetSoundDuration(gg_snd_AlchemistChemicalBurst1, $801);
	SetSoundChannel(gg_snd_AlchemistChemicalBurst1, 0);
	gg_snd_AlchemistMorph1[CreateSound("Units\\Creeps\\HEROGoblinALCHEMIST\\AlchemistMorph1.wav", false, false, false, $A, $A, "DefaultEAXON")] = CreateSound("Units\\Creeps\\HEROGoblinALCHEMIST\\AlchemistMorph1.wav", false, false, false, $A, $A, "DefaultEAXON");
	SetSoundParamsFromLabel(gg_snd_AlchemistMorph1, "GoblinAlchemistMorphAlternate");
	SetSoundDuration(gg_snd_AlchemistMorph1, $67F);
	SetSoundChannel(gg_snd_AlchemistMorph1, 0);
	gg_snd_HeroAlchemistYesAttack1[CreateSound("Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistYesAttack1.wav", false, false, false, $A, $A, "DefaultEAXON")] = CreateSound("Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistYesAttack1.wav", false, false, false, $A, $A, "DefaultEAXON");
	SetSoundParamsFromLabel(gg_snd_HeroAlchemistYesAttack1, "HEROGoblinALCHEMISTYesAttack");
	SetSoundDuration(gg_snd_HeroAlchemistYesAttack1, $942);
	SetSoundChannel(gg_snd_HeroAlchemistYesAttack1, 0);
	gg_rct_Miners_Arena[Rect(-4128., 1952., -2496., 3904.)] = Rect(-4128., 1952., -2496., 3904.);
	gg_rct_Duel_left[Rect(1216., 2784., 1472., 3040.)] = Rect(1216., 2784., 1472., 3040.);
	gg_rct_Portal_1_down_left_Start[Rect(-1920., -9536., -1536., -9184.)] = Rect(-1920., -9536., -1536., -9184.);
	gg_rct_Base[Rect(-288., -7488., 2560., -4128.)] = Rect(-288., -7488., 2560., -4128.);
	gg_rct_Portal_baza[Rect(896., -6016., 1408., -5408.)] = Rect(896., -6016., 1408., -5408.);
	gg_rct_Les_2[Rect(-3616., -8160., -512., 320.)] = Rect(-3616., -8160., -512., 320.);
	gg_rct_Les_1[Rect(-320., -10656., 2432., -7904.)] = Rect(-320., -10656., 2432., -7904.);
	gg_rct_Pogoda_v_bolote[Rect(3936., -6944., 5280., -3296.)] = Rect(3936., -6944., 5280., -3296.);
	we[AddWeatherEffect(gg_rct_Pogoda_v_bolote, 'FDgh')] = AddWeatherEffect(gg_rct_Pogoda_v_bolote, 'FDgh');
	EnableWeatherEffect(we, true);
	gg_rct_cast_magi[Rect(832., -6112., 1664., -5312.)] = Rect(832., -6112., 1664., -5312.);
	gg_rct_Event_Bonus_Etei_arena_1[Rect(3488., -256., 5088., 1824.)] = Rect(3488., -256., 5088., 1824.);
	gg_rct_Portal_3_up_Start[Rect(1024., -1120., 1408., -736.)] = Rect(1024., -1120., 1408., -736.);
	gg_rct_Portal_2_down_right_Start[Rect(3392., -9376., 3744., -8992.)] = Rect(3392., -9376., 3744., -8992.);
	gg_rct_Oblstb_Tavern[Rect(4352., 3360., 5504., 4448.)] = Rect(4352., 3360., 5504., 4448.);
	gg_rct_Hero_Arena[Rect(1152., 2048., 2944., 3968.)] = Rect(1152., 2048., 2944., 3968.);
	gg_rct_les_3[Rect(2592., -7040., 3872., -1280.)] = Rect(2592., -7040., 3872., -1280.);
	gg_rct_Respawn_Heroes[Rect(1056., -6624., 1408., -6112.)] = Rect(1056., -6624., 1408., -6112.);
	gg_rct_Oblast_Teleporta_Arena_Bot[Rect(4224., -32., 4416., 160.)] = Rect(4224., -32., 4416., 160.);
	gg_rct_Oblast_Teleporta_Arena_Top[Rect(4224., 1408., 4416., 1600.)] = Rect(4224., 1408., 4416., 1600.);
	gg_rct_6[Rect(-1792., 1888., 544., 3840.)] = Rect(-1792., 1888., 544., 3840.);
	gg_rct_BaseDopVision[Rect(672., -4160., 1664., -3680.)] = Rect(672., -4160., 1664., -3680.);
	gg_rct_Center_Vision[Rect(960., -5760., 1088., -5632.)] = Rect(960., -5760., 1088., -5632.);
	gg_rct_Portal_Attack_Dummy_Left[Rect(-2112., -9696., -1952., -9536.)] = Rect(-2112., -9696., -1952., -9536.);
	gg_rct_Portal_Attack_Dummy_Right[Rect(3584., -9600., 3744., -9440.)] = Rect(3584., -9600., 3744., -9440.);
	gg_rct_Portal_Attack_Dummy_Top[Rect(1120., -576., 1280., -416.)] = Rect(1120., -576., 1280., -416.);
	gg_rct_Duel_right[Rect(2592., 2784., 2848., 3040.)] = Rect(2592., 2784., 2848., 3040.);
	gg_rct_PlayableAreaVisionDeBag[Rect(-3680., -10400., 5504., 4544.)] = Rect(-3680., -10400., 5504., 4544.);
	gg_rct_MinusVision1[Rect(-3712., 800., -2048., 4640.)] = Rect(-3712., 800., -2048., 4640.);
	gg_rct_Les1_Dop1[Rect(2400., -9184., 2912., -8096.)] = Rect(2400., -9184., 2912., -8096.);
	gg_rct_Les1_Dop2[Rect(160., -7936., 2208., -7648.)] = Rect(160., -7936., 2208., -7648.);
	gg_rct_Beorn_Boss_Area[Rect(800., -10368., 1952., -9248.)] = Rect(800., -10368., 1952., -9248.);
	gg_rct_Beorn_Boss_Area2[Rect(992., -10272., 1856., -9376.)] = Rect(992., -10272., 1856., -9376.);
	gg_cam_Kamera_na_taverni[CreateCameraSetup()] = CreateCameraSetup();
	CameraSetupSetField(gg_cam_Kamera_na_taverni, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Kamera_na_taverni, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Kamera_na_taverni, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Kamera_na_taverni, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Kamera_na_taverni, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Kamera_na_taverni, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Kamera_na_taverni, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Kamera_na_taverni, 4928.7, 3881.5, .0);
	gg_cam_Kamera_glavnoi_bazi[CreateCameraSetup()] = CreateCameraSetup();
	CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Kamera_glavnoi_bazi, 1240., -6378.1, .0);
	gg_cam_Camera_Eiti_Arena[CreateCameraSetup()] = CreateCameraSetup();
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Eiti_Arena, 4255.9, 866.9, .0);
	gg_cam_Camera_Eiti_Arena_Top_Portal[CreateCameraSetup()] = CreateCameraSetup();
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Eiti_Arena_Top_Portal, 4394.2, 1237.5, .0);
	gg_cam_Camera_Eiti_Arena_Bot_Portal[CreateCameraSetup()] = CreateCameraSetup();
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Eiti_Arena_Bot_Portal, 4465.7, 342.3, .0);
	gg_cam_Camera_miners_arena[CreateCameraSetup()] = CreateCameraSetup();
	CameraSetupSetField(gg_cam_Camera_miners_arena, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_miners_arena, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Camera_miners_arena, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Camera_miners_arena, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Camera_miners_arena, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_miners_arena, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_miners_arena, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_miners_arena, -3311.2, 2967.9, .0);
	gg_cam_Camera_BossFightStart[CreateCameraSetup()] = CreateCameraSetup();
	CameraSetupSetField(gg_cam_Camera_BossFightStart, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_BossFightStart, CAMERA_FIELD_ROTATION, 180.9, .0);
	CameraSetupSetField(gg_cam_Camera_BossFightStart, CAMERA_FIELD_ANGLE_OF_ATTACK, 336.5, .0);
	CameraSetupSetField(gg_cam_Camera_BossFightStart, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Camera_BossFightStart, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_BossFightStart, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_BossFightStart, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_BossFightStart, -608.2, 2881., .0);
	gg_cam_Camera_Duel_Arena[CreateCameraSetup()] = CreateCameraSetup();
	CameraSetupSetField(gg_cam_Camera_Duel_Arena, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Duel_Arena, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Camera_Duel_Arena, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Camera_Duel_Arena, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Camera_Duel_Arena, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Duel_Arena, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Duel_Arena, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Duel_Arena, 2139.4, 2853.8, .0);
	gg_cam_Kamera_cast_magi[CreateCameraSetup()] = CreateCameraSetup();
	CameraSetupSetField(gg_cam_Kamera_cast_magi, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Kamera_cast_magi, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Kamera_cast_magi, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Kamera_cast_magi, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Kamera_cast_magi, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Kamera_cast_magi, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Kamera_cast_magi, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Kamera_cast_magi, 1268., -5714.3, .0);
	gg_cam_Camera_Beorn_Den1[CreateCameraSetup()] = CreateCameraSetup();
	CameraSetupSetField(gg_cam_Camera_Beorn_Den1, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den1, CAMERA_FIELD_ROTATION, 233.6, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den1, CAMERA_FIELD_ANGLE_OF_ATTACK, 299.3, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den1, CAMERA_FIELD_TARGET_DISTANCE, 1363.6, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den1, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den1, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den1, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Beorn_Den1, 1384., -9577.2, .0);
	gg_cam_Camera_Beorn_Den2[CreateCameraSetup()] = CreateCameraSetup();
	CameraSetupSetField(gg_cam_Camera_Beorn_Den2, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den2, CAMERA_FIELD_ROTATION, 297.9, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den2, CAMERA_FIELD_ANGLE_OF_ATTACK, 300.3, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den2, CAMERA_FIELD_TARGET_DISTANCE, 1363.6, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den2, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den2, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den2, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Beorn_Den2, 1240.7, -9620.8, .0);
	gg_cam_Camera_Beorn_Den3[CreateCameraSetup()] = CreateCameraSetup();
	CameraSetupSetField(gg_cam_Camera_Beorn_Den3, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den3, CAMERA_FIELD_ROTATION, 110.6, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den3, CAMERA_FIELD_ANGLE_OF_ATTACK, 300.4, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den3, CAMERA_FIELD_TARGET_DISTANCE, 1127., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den3, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den3, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den3, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Beorn_Den3, 562.8, -8241.1, .0);
	gg_cam_Camera_Beorn_Den4[CreateCameraSetup()] = CreateCameraSetup();
	CameraSetupSetField(gg_cam_Camera_Beorn_Den4, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den4, CAMERA_FIELD_ROTATION, 110.6, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den4, CAMERA_FIELD_ANGLE_OF_ATTACK, 300.4, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den4, CAMERA_FIELD_TARGET_DISTANCE, 1127., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den4, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den4, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den4, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Beorn_Den4, -15.3, -9035.4, .0);
	gg_cam_Camera_Beorn_Den5[CreateCameraSetup()] = CreateCameraSetup();
	CameraSetupSetField(gg_cam_Camera_Beorn_Den5, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den5, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den5, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den5, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den5, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den5, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den5, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Beorn_Den5, 2191., -8224.1, .0);
	gg_cam_Camera_Beorn_Den6[CreateCameraSetup()] = CreateCameraSetup();
	CameraSetupSetField(gg_cam_Camera_Beorn_Den6, CAMERA_FIELD_ZOFFSET, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den6, CAMERA_FIELD_ROTATION, 90., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den6, CAMERA_FIELD_ANGLE_OF_ATTACK, 304., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den6, CAMERA_FIELD_TARGET_DISTANCE, 1650., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den6, CAMERA_FIELD_ROLL, .0, .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den6, CAMERA_FIELD_FIELD_OF_VIEW, 70., .0);
	CameraSetupSetField(gg_cam_Camera_Beorn_Den6, CAMERA_FIELD_FARZ, 5000., .0);
	CameraSetupSetDestPosition(gg_cam_Camera_Beorn_Den6, 1474.8, -9613.2, .0);
	p[Player($F)] = Player($F);
	u[CreateUnit(p, 'h00S', 2144., -5184., 225.)] = CreateUnit(p, 'h00S', 2144., -5184., 225.);
	u[CreateUnit(p, 'h002', 2176., -5760., 270.)] = CreateUnit(p, 'h002', 2176., -5760., 270.);
	u[CreateUnit(p, 'h001', 2144., -5312., 225.)] = CreateUnit(p, 'h001', 2144., -5312., 225.);
	u[CreateUnit(p, 'n004', 5120., 4032., 270.)] = CreateUnit(p, 'n004', 5120., 4032., 270.);
	SetUnitColor(u, ConvertPlayerColor(6));
	u[CreateUnit(p, 'n002', 4736., 4032., 270.)] = CreateUnit(p, 'n002', 4736., 4032., 270.);
	SetUnitColor(u, ConvertPlayerColor(0));
	u[CreateUnit(p, 'n005', 4928., 3648., 270.)] = CreateUnit(p, 'n005', 4928., 3648., 270.);
	SetUnitColor(u, ConvertPlayerColor(1));
	u[CreateUnit(p, 'h003', 2176., -6016., 270.)] = CreateUnit(p, 'h003', 2176., -6016., 270.);
	u[CreateUnit(p, 'h000', 2176., -5504., 180.)] = CreateUnit(p, 'h000', 2176., -5504., 180.);
	u[CreateUnit(p, 'h00D', 2176., -6272., 225.)] = CreateUnit(p, 'h00D', 2176., -6272., 225.);
	u[CreateUnit(p, 'h00Y', 2176., -4992., 270.)] = CreateUnit(p, 'h00Y', 2176., -4992., 270.);
	p[Player($F)] = Player($F);
	u[CreateUnit(p, 'h00I', 2651.1, -8998.3, 132.101)] = CreateUnit(p, 'h00I', 2651.1, -8998.3, 132.101);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	u[CreateUnit(p, 'h00I', 2737.1, -8462., 222.901)] = CreateUnit(p, 'h00I', 2737.1, -8462., 222.901);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	u[CreateUnit(p, 'h00I', 2208., -7950.8, 240.89)] = CreateUnit(p, 'h00I', 2208., -7950.8, 240.89);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	u[CreateUnit(p, 'h00I', 1508.5, -7799.1, 271.992)] = CreateUnit(p, 'h00I', 1508.5, -7799.1, 271.992);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	u[CreateUnit(p, 'h00I', 761.9, -7825.8, 270.894)] = CreateUnit(p, 'h00I', 761.9, -7825.8, 270.894);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	u[CreateUnit(p, 'h00I', 108.7, -7927.1, 297.652)] = CreateUnit(p, 'h00I', 108.7, -7927.1, 297.652);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	u[CreateUnit(p, 'h00I', -341.9, -8450.2, 346.764)] = CreateUnit(p, 'h00I', -341.9, -8450.2, 346.764);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	u[CreateUnit(p, 'h00I', -340.3, -9154.9, 16.661)] = CreateUnit(p, 'h00I', -340.3, -9154.9, 16.661);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	u[CreateUnit(p, 'h00I', -237.5, -9776.7, 2.615)] = CreateUnit(p, 'h00I', -237.5, -9776.7, 2.615);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	gg_unit_o003_0027[CreateUnit(p, 'o003', 1521.1, -5441.2, 222.91)] = CreateUnit(p, 'o003', 1521.1, -5441.2, 222.91);
	gg_unit_o003_0028[CreateUnit(p, 'o003', 1033.8, -5956.6, 42.425)] = CreateUnit(p, 'o003', 1033.8, -5956.6, 42.425);
	u[CreateUnit(p, 'h00I', 1358.5, -9356.4, 270.)] = CreateUnit(p, 'h00I', 1358.5, -9356.4, 270.);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	u[CreateUnit(p, 'h00I', 1357.3, -9244.8, 270.)] = CreateUnit(p, 'h00I', 1357.3, -9244.8, 270.);
	SetUnitState(u, UNIT_STATE_MANA, $2710);
	gg_unit_h01K_0100[CreateUnit(p, 'h01K', 1245.4, -5377.6, 270.73)] = CreateUnit(p, 'h01K', 1245.4, -5377.6, 270.73);
	gg_unit_n00Y_0101[CreateUnit(p, 'n00Y', 1589.7, -5683.3, 173.645)] = CreateUnit(p, 'n00Y', 1589.7, -5683.3, 173.645);
	SetUnitState(gg_unit_n00Y_0101, UNIT_STATE_MANA, 0);
	gg_unit_n00Y_0102[CreateUnit(p, 'n00Y', 939.4, -5689.8, .69)] = CreateUnit(p, 'n00Y', 939.4, -5689.8, .69);
	SetUnitState(gg_unit_n00Y_0102, UNIT_STATE_MANA, 0);
	gg_unit_e002_0106[CreateUnit(p, 'e002', 1007.4, -5428.7, 316.082)] = CreateUnit(p, 'e002', 1007.4, -5428.7, 316.082);
	SetUnitState(gg_unit_e002_0106, UNIT_STATE_MANA, 0);
	gg_unit_e002_0108[CreateUnit(p, 'e002', 1526.5, -5954.4, 138.892)] = CreateUnit(p, 'e002', 1526.5, -5954.4, 138.892);
	SetUnitState(gg_unit_e002_0108, UNIT_STATE_MANA, 0);
	gg_unit_h01K_0109[CreateUnit(p, 'h01K', 1268., -6027.5, 89.41)] = CreateUnit(p, 'h01K', 1268., -6027.5, 89.41);
	InitBlizzard();
	i[0] = 0;
	udg_IGRAET[CreateForce()] = CreateForce();
	udg_Multiboard[CreateMultiboard()] = CreateMultiboard();
	udg_Liver[CreateForce()] = CreateForce();
	udg_Timer_Nomera_Volni[CreateTimer()] = CreateTimer();
	i[0] = 0;
	while (true) {
		if ((i > 1)) break;
		udg_Igraet_Igrok[false] = false;
		udg_Duel_Igrok[CreateForce()] = CreateForce();
		udg_Heroes_Random_Data[0] = 0;
		udg_Integer_Kolvo_Giznei_EtitArena[0] = 0;
		udg_ColorString[""] = "";
		udg_Temp_Real[0] = 0;
		udg_Temp_Integer[0] = 0;
		udg_PlayerNumberInMB[0] = 0;
		udg_MutliBoardHeroIcon[""] = "";
		udg_MultiBoard_Player_Kills_Count[0] = 0;
		udg_MultiBoard_Player_Deaths_Count[0] = 0;
		udg_MultiBoard_Player_Assist_Count[0] = 0;
		udg_Hero_Respawn_Time[0] = 0;
		udg_Potion_Effect[""] = "";
		udg_Potion_Type[""] = "";
		udg_Potion_Heal_Amount[0] = 0;
		udg_Potion_Size[0] = 0;
		udg_HintsTimerPlayer[CreateTimer()] = CreateTimer();
		udg_Hero_Player_Color_String[""] = "";
		udg_Player_Taken_Damage_Current[0] = 0;
		udg_Player_Taken_Damage_All[0] = 0;
		udg_Player_Received_Damage_Current[0] = 0;
		udg_System_ShowAbil_And_Items_Hint[true] = true;
		udg_Boolean_Player_Fast_Purchase[false] = false;
		udg_Integer_Creep_On_Line_Spawn[0] = 0;
		udg_Group_Pickeds_Refrence_Panel[CreateGroup()] = CreateGroup();
		udg_Is_Player_Fast_Wave_Start[false] = false;
		udg_Count_Item_Tips_Message[0] = 0;
		udg_Rune_On_Base_Dummy_X[0] = 0;
		udg_Rune_On_Base_Dummy_Y[0] = 0;
		udg_Rune_On_Base_Effect_String[""] = "";
		udg_Bonus_Gold_ChestGold[0] = 0;
		udg_Temp_Group[CreateGroup()] = CreateGroup();
		udg_Is_Rune_On_Position[false] = false;
		udg_Rune_Position_X[0] = 0;
		udg_Rune_Position_Y[0] = 0;
		udg_Arrow_Pointer_Guide_X[0] = 0;
		udg_Arrow_Pointer_Guide_Y[0] = 0;
		udg_Arrow_Pointer_Guide_Angle[0] = 0;
		udg_EnergyWallX[0] = 0;
		udg_EnergyWallY[0] = 0;
		udg_EnergyWallAngle[0] = 0;
		udg_EnergyWallCount[0] = 0;
		udg_Is_Player_Got_Randomed[false] = false;
		i[i + 1] = i + 1;
	}
	udg_Weave_group[CreateGroup()] = CreateGroup();
	udg_Timer_Check_Forkreep_system[CreateTimer()] = CreateTimer();
	udg_Gruppa_Igrokov_Vibor_Heroev[CreateForce()] = CreateForce();
	udg_Timer_Eiti_Areni[CreateTimer()] = CreateTimer();
	udg_Gruppa_HeroUnitov_Geroev[CreateGroup()] = CreateGroup();
	udg_OtriadPortalUnitsEitiArena[CreateGroup()] = CreateGroup();
	udg_DamageGroup[CreateGroup()] = CreateGroup();
	udg_DrenorBugaiRageTimer[CreateTimer()] = CreateTimer();
	udg_GrogTarRageTimer[CreateTimer()] = CreateTimer();
	udg_GroupRandomUnitFromGroup[CreateGroup()] = CreateGroup();
	udg_Dialog_Select_Difficult[DialogCreate()] = DialogCreate();
	udg_TimerMobsAttackBase[CreateTimer()] = CreateTimer();
	udg_Players_Enemy_Group[CreateForce()] = CreateForce();
	udg_Timer_Dialog_Select[CreateTimer()] = CreateTimer();
	udg_Players_Ally_Group[CreateForce()] = CreateForce();
	udg_MultiBoard[CreateMultiboard()] = CreateMultiboard();
	udg_PlayerGroup[CreateForce()] = CreateForce();
	udg_ttt[CreateTimer()] = CreateTimer();
	udg_PortalCastersMagi[CreateGroup()] = CreateGroup();
	udg_InitMapTimer[CreateTimer()] = CreateTimer();
	udg_Drenor_Bull_Hint_Player_Group[CreateForce()] = CreateForce();
	udg_TimerShowAndFlushAllPlayerDmg[CreateTimer()] = CreateTimer();
	udg_Timer_Lightning_Strike_Weather[CreateTimer()] = CreateTimer();
	udg_Timer_Hint_About_Fast_Start[CreateTimer()] = CreateTimer();
	udg_Timer_Arrow_Pointer_Guide[CreateTimer()] = CreateTimer();
	udg_gdamageallnew[CreateGroup()] = CreateGroup();
	gg_trg_Players_Start_Script[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventSingle(gg_trg_Players_Start_Script, 2.);
	TriggerAddAction(gg_trg_Players_Start_Script, Trig_Players_Start_Script_Actions);
	gg_trg_InitMap[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventSingle(gg_trg_InitMap, .0);
	TriggerAddAction(gg_trg_InitMap, Trig_InitMap_Actions);
	gg_trg_InitMapStage2[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerExpireEvent(gg_trg_InitMapStage2, udg_InitMapTimer);
	TriggerAddAction(gg_trg_InitMapStage2, Trig_InitMapStage2_Actions);
	gg_trg_System_Spells_Load[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEvent(gg_trg_System_Spells_Load, 2., false);
	TriggerAddAction(gg_trg_System_Spells_Load, Trig_System_Spells_Load_Actions);
	gg_trg_Items_Preload[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEvent(gg_trg_Items_Preload, 17., false);
	TriggerAddAction(gg_trg_Items_Preload, Trig_Items_Preload_Actions);
	gg_trg_Igrok_Massiv_Save[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventSingle(gg_trg_Igrok_Massiv_Save, .0);
	TriggerAddAction(gg_trg_Igrok_Massiv_Save, Trig_Igrok_Massiv_Save_Actions);
	gg_trg_Load_Vsiakoe[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventSingle(gg_trg_Load_Vsiakoe, 2.);
	TriggerAddAction(gg_trg_Load_Vsiakoe, Trig_Load_Vsiakoe_Actions);
	gg_trg_Igrok_Massiv_Liver[CreateTrigger()] = CreateTrigger();
	TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver, Player(0));
	TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver, Player(1));
	TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver, Player(2));
	TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver, Player(3));
	TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver, Player(4));
	TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver, Player(5));
	TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver, Player(6));
	TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver, Player(7));
	TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver, Player(8));
	TriggerAddAction(gg_trg_Igrok_Massiv_Liver, Trig_Igrok_Massiv_Liver_Actions);
	gg_trg_Messager[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventSingle(gg_trg_Messager, 8.);
	TriggerAddAction(gg_trg_Messager, Trig_Messager_Actions);
	gg_trg_Create_TExttags_about_Shops[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventSingle(gg_trg_Create_TExttags_about_Shops, 9.);
	TriggerAddAction(gg_trg_Create_TExttags_about_Shops, Trig_Create_TExttags_about_Shops_Actions);
	gg_trg_InitHashtable[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_InitHashtable, Trig_InitHashtable_Actions);
	gg_trg_Save_Sounds[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEvent(gg_trg_Save_Sounds, 5., false);
	TriggerAddAction(gg_trg_Save_Sounds, Trig_Save_Sounds_Actions);
	TimerStart(CreateTimer(), 0, false, HandleCounter_Actions);
	gg_trg_Set_Chlenix[CreateTrigger()] = CreateTrigger();
	TriggerRegisterPlayerChatEvent(gg_trg_Set_Chlenix, Player(0), "-chlenix", false);
	TriggerAddAction(gg_trg_Set_Chlenix, Trig_Set_Chlenix_Actions);
	gg_trg_Set_Energy_Walls[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventSingle(gg_trg_Set_Energy_Walls, 5.);
	TriggerAddAction(gg_trg_Set_Energy_Walls, Trig_Set_Energy_Walls_Actions);
	gg_trg_Nachalo_Eiti_aren[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Nachalo_Eiti_aren, Trig_Nachalo_Eiti_aren_Actions);
	index[0] = 0;
	gg_trg_HeroDeadonEitiArena[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_HeroDeadonEitiArena, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_HeroDeadonEitiArena, Condition(Trig_HeroDeadonEitiArena_Conditions));
	TriggerAddAction(gg_trg_HeroDeadonEitiArena, Trig_HeroDeadonEitiArena_Actions);
	rectRegion[CreateRegion()] = CreateRegion();
	gg_trg__PortalCheckTop[CreateTrigger()] = CreateTrigger();
	RegionAddRect(rectRegion, gg_rct_Oblast_Teleporta_Arena_Top);
	TriggerRegisterEnterRegion(gg_trg__PortalCheckTop, rectRegion, null);
	TriggerAddCondition(gg_trg__PortalCheckTop, Condition(Trig__PortalCheckTop_Conditions));
	TriggerAddAction(gg_trg__PortalCheckTop, Trig__PortalCheckTop_Actions);
	rectRegion[CreateRegion()] = CreateRegion();
	gg_trg__PortalCheckBot[CreateTrigger()] = CreateTrigger();
	RegionAddRect(rectRegion, gg_rct_Oblast_Teleporta_Arena_Bot);
	TriggerRegisterEnterRegion(gg_trg__PortalCheckBot, rectRegion, null);
	TriggerAddCondition(gg_trg__PortalCheckBot, Condition(Trig__PortalCheckBot_Conditions));
	TriggerAddAction(gg_trg__PortalCheckBot, Trig__PortalCheckBot_Actions);
	gg_trg_LinkItemsInit[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEvent(gg_trg_LinkItemsInit, 6., false);
	TriggerAddAction(gg_trg_LinkItemsInit, Trig_LinkItemsInit_Actions);
	index[0] = 0;
	gg_trg_ItemPickedUp[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_ItemPickedUp, Player(index), EVENT_PLAYER_UNIT_PICKUP_ITEM, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddAction(gg_trg_ItemPickedUp, Trig_ItemPickedUp_Actions);
	gg_trg_ChargesConnecting[CreateTrigger()] = CreateTrigger();
	TriggerRegisterAnyUnitEventBJ(gg_trg_ChargesConnecting, EVENT_PLAYER_UNIT_PICKUP_ITEM);
	TriggerAddCondition(gg_trg_ChargesConnecting, Condition(Trig_ChargesConnecting_Conditions));
	TriggerAddAction(gg_trg_ChargesConnecting, Trig_ChargesConnecting_Actions);
	gg_trg_Remove_Dammi_Items[CreateTrigger()] = CreateTrigger();
	DisableTrigger(gg_trg_Remove_Dammi_Items);
	TriggerRegisterAnyUnitEventBJ(gg_trg_Remove_Dammi_Items, EVENT_PLAYER_UNIT_PICKUP_ITEM);
	TriggerAddCondition(gg_trg_Remove_Dammi_Items, Condition(Trig_Remove_Dammi_Items_Conditions));
	TriggerAddAction(gg_trg_Remove_Dammi_Items, Trig_Remove_Dammi_Items_Actions);
	gg_trg_Save_Items_Cost[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEvent(gg_trg_Save_Items_Cost, 10., false);
	TriggerAddAction(gg_trg_Save_Items_Cost, Trig_Save_Items_Cost_Actions);
	gg_trg_Ice_Boss[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Ice_Boss, Trig_IceBoss_Actions);
	index[0] = 0;
	gg_trg_Ice_Wall[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Ice_Wall, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Ice_Wall, Condition(Trig_Ice_Wall_Conditions));
	TriggerAddAction(gg_trg_Ice_Wall, Trig_Ice_Wall_Actions);
	index[0] = 0;
	gg_trg_Ice_Storm[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Ice_Storm, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Ice_Storm, Condition(Trig_Ice_Storm_Conditions));
	TriggerAddAction(gg_trg_Ice_Storm, Trig_Ice_Storm_Actions);
	index[0] = 0;
	gg_trg_Ice_Rain[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Ice_Rain, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Ice_Rain, Condition(Trig_Ice_Rain_Conditions));
	TriggerAddAction(gg_trg_Ice_Rain, Trig_Ice_Rain_Actions);
	index[0] = 0;
	gg_trg_Cold_Punishment[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Cold_Punishment, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Cold_Punishment, Condition(Trig_Cold_Punishment_Conditions));
	TriggerAddAction(gg_trg_Cold_Punishment, Trig_Cold_Punishment_Actions);
	index[0] = 0;
	gg_trg_Ice_Restoration[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Ice_Restoration, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Ice_Restoration, Condition(Trig_Ice_Restoration_Conditions));
	TriggerAddAction(gg_trg_Ice_Restoration, Trig_Ice_Restoration_Actions);
	gg_trg_BossStart[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_BossStart, Trig_BossStart_Actions);
	index[0] = 0;
	gg_trg_FlameSpells[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_FlameSpells, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_FlameSpells, Condition(Trig_FlameSpells_Conditions));
	TriggerAddAction(gg_trg_FlameSpells, Trig_FlameSpells_Actions);
	index[0] = 0;
	gg_trg_Fire_Circle[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Fire_Circle, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Fire_Circle, Condition(Trig_Fire_Circle_Conditions));
	TriggerAddAction(gg_trg_Fire_Circle, Trig_Fire_Circle_Actions);
	index[0] = 0;
	gg_trg_Fire_Meteor[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Fire_Meteor, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Fire_Meteor, Condition(Trig_Fire_Meteor_Conditions));
	TriggerAddAction(gg_trg_Fire_Meteor, Trig_Fire_Meteor_Actions);
	rectRegion[CreateRegion()] = CreateRegion();
	gg_trg_Upgrade_Summons[CreateTrigger()] = CreateTrigger();
	RegionAddRect(rectRegion, gg_rct_6);
	TriggerRegisterEnterRegion(gg_trg_Upgrade_Summons, rectRegion, null);
	TriggerAddCondition(gg_trg_Upgrade_Summons, Condition(Trig_Upgrade_Summons_Conditions));
	TriggerAddAction(gg_trg_Upgrade_Summons, Trig_Upgrade_Summons_Actions);
	gg_trg_UseBeornSpells[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEvent(gg_trg_UseBeornSpells, 1., true);
	TriggerAddAction(gg_trg_UseBeornSpells, Trig_UseBeornSpells_Actions);
	gg_trg_Start_Beorn_Den[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Start_Beorn_Den, Trig_Start_Beorn_Den_Actions);
	index[0] = 0;
	gg_trg_Beorn_Push[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Beorn_Push, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Beorn_Push, Condition(Trig_Beorn_Push_Conditions));
	TriggerAddAction(gg_trg_Beorn_Push, Trig_Beorn_Push_Actions);
	index[0] = 0;
	gg_trg_Beorn_Stomp[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Beorn_Stomp, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Beorn_Stomp, Condition(Trig_Beorn_Stomp_Conditions));
	TriggerAddAction(gg_trg_Beorn_Stomp, Trig_Beorn_Stomp_Actions);
	gg_trg_HeroUnitGameSave[CreateTrigger()] = CreateTrigger();
	TriggerRegisterEnterRectSimple(gg_trg_HeroUnitGameSave, gg_rct_Oblstb_Tavern);
	TriggerAddAction(gg_trg_HeroUnitGameSave, Trig_HeroUnitGameSave_Actions);
	gg_trg_INIT[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventSingle(gg_trg_INIT, 1.);
	TriggerAddAction(gg_trg_INIT, Trig_INIT_Actions);
	index[0] = 0;
	gg_trg_Pick_Hero_Upgrade[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Pick_Hero_Upgrade, Player(index), EVENT_PLAYER_UNIT_SELL, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Pick_Hero_Upgrade, Condition(Trig_Pick_Hero_Upgrade_Conditions));
	TriggerAddAction(gg_trg_Pick_Hero_Upgrade, Trig_Pick_Hero_Upgrade_Actions);
	index[0] = 0;
	gg_trg_Hero_Dead[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Hero_Dead, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Hero_Dead, Condition(Trig_Hero_Dead_Conditions));
	TriggerAddAction(gg_trg_Hero_Dead, Trig_Hero_Dead_Actions);
	gg_trg_Start_Duel[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Start_Duel, Trig_Start_Duel_Actions);
	index[0] = 0;
	gg_trg_Hero_Death_On_Duel[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Hero_Death_On_Duel, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Hero_Death_On_Duel, Condition(Trig_Hero_Death_On_Duel_Conditions));
	TriggerAddAction(gg_trg_Hero_Death_On_Duel, Trig_Hero_Death_On_Duel_Actions);
	gg_trg_Timer_Check[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerExpireEvent(gg_trg_Timer_Check, udg_Timer_Check_Forkreep_system);
	TriggerAddAction(gg_trg_Timer_Check, Trig_Timer_Check_Actions);
	gg_trg_go_mochiytb_portal[CreateTrigger()] = CreateTrigger();
	DisableTrigger(gg_trg_go_mochiytb_portal);
	TriggerRegisterTimerEvent(gg_trg_go_mochiytb_portal, 2., true);
	TriggerAddAction(gg_trg_go_mochiytb_portal, Trig_go_mochiytb_portal_Actions);
	gg_trg_Start_game[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Start_game, Trig_Start_game_Actions);
	gg_trg_StartWave[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerExpireEvent(gg_trg_StartWave, udg_Timer_Nomera_Volni);
	TriggerAddAction(gg_trg_StartWave, Trig_StartWave_Actions);
	gg_trg_MobsAttackBase[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerExpireEvent(gg_trg_MobsAttackBase, udg_TimerMobsAttackBase);
	TriggerAddAction(gg_trg_MobsAttackBase, Trig_MobsAttackBase_Actions);
	gg_trg_TeleportStuckedCreeps[CreateTrigger()] = CreateTrigger();
	DisableTrigger(gg_trg_TeleportStuckedCreeps);
	TriggerRegisterTimerEvent(gg_trg_TeleportStuckedCreeps, 2., true);
	TriggerAddAction(gg_trg_TeleportStuckedCreeps, Trig_TeleportStuckedCreeps_Actions);
	rectRegion[CreateRegion()] = CreateRegion();
	gg_trg_vhodit_v_zony[CreateTrigger()] = CreateTrigger();
	RegionAddRect(rectRegion, gg_rct_cast_magi);
	TriggerRegisterEnterRegion(gg_trg_vhodit_v_zony, rectRegion, null);
	TriggerAddCondition(gg_trg_vhodit_v_zony, Condition(Trig_vhodit_v_zony_Conditions));
	TriggerAddAction(gg_trg_vhodit_v_zony, Trig_vhodit_v_zony_Actions);
	index[0] = 0;
	gg_trg_Add_Gold_System_Receiving_Gold_for_Creeps[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Add_Gold_System_Receiving_Gold_for_Creeps, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Add_Gold_System_Receiving_Gold_for_Creeps, Condition(Trig_Add_Gold_System_Receiving_Gold_for_Creeps_Conditions));
	TriggerAddAction(gg_trg_Add_Gold_System_Receiving_Gold_for_Creeps, Trig_Add_Gold_System_Receiving_Gold_for_Creeps_Actions);
	gg_trg_Init_System_Receiving_Gold_for_Creeps[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEvent(gg_trg_Init_System_Receiving_Gold_for_Creeps, 3., false);
	TriggerAddAction(gg_trg_Init_System_Receiving_Gold_for_Creeps, Trig_Init_System_Receiving_Gold_for_Creeps_Actions);
	gg_trg_Init_System_Receiving_Experience_for_Creeps[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Init_System_Receiving_Experience_for_Creeps, Trig_Init_System_Receiving_Experience_for_Creeps_Actions);
	index[0] = 0;
	gg_trg_Add_Experience_System_Receiving_Experience_for_Creeps[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Add_Experience_System_Receiving_Experience_for_Creeps, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Add_Experience_System_Receiving_Experience_for_Creeps, Condition(Trig_Add_Experience_System_Receiving_Experience_for_Creeps_Conditions));
	TriggerAddAction(gg_trg_Add_Experience_System_Receiving_Experience_for_Creeps, Trig_Add_Experience_System_Receiving_Experience_for_Creeps_Actions);
	gg_trg_Init_Potion_System[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEvent(gg_trg_Init_Potion_System, 1., false);
	TriggerAddAction(gg_trg_Init_Potion_System, Trig_Init_Potion_System_Actions);
	index[0] = 0;
	gg_trg_Mob_Dead_Create_Potion[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Mob_Dead_Create_Potion, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Mob_Dead_Create_Potion, Condition(Trig_Mob_Dead_Create_Potion_Conditions));
	TriggerAddAction(gg_trg_Mob_Dead_Create_Potion, Trig_Mob_Dead_Create_Potion_Actions);
	gg_trg_Check_Potion_Picked_Up[CreateTrigger()] = CreateTrigger();
	TriggerAddCondition(gg_trg_Check_Potion_Picked_Up, Condition(Trig_Check_Potion_Picked_Up_Conditions));
	TriggerAddAction(gg_trg_Check_Potion_Picked_Up, Trig_Check_Potion_Picked_Up_Actions);
	gg_trg_InitSystem[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEvent(gg_trg_InitSystem, .01, false);
	TriggerAddAction(gg_trg_InitSystem, Trig_InitSystem_Actions);
	rectRegion[CreateRegion()] = CreateRegion();
	gg_trg_EnterUnit[CreateTrigger()] = CreateTrigger();
	RegionAddRect(rectRegion, GetWorldBounds());
	TriggerRegisterEnterRegion(gg_trg_EnterUnit, rectRegion, null);
	TriggerAddCondition(gg_trg_EnterUnit, Condition(Trig_EnterUnit_Conditions));
	TriggerAddAction(gg_trg_EnterUnit, Trig_EnterUnit_Actions);
	gg_trg_AddDamage[CreateTrigger()] = CreateTrigger();
	TriggerAddCondition(gg_trg_AddDamage, Condition(Trig_Del_Conditions));
	TriggerAddAction(gg_trg_AddDamage, Trig_AddDamage_Actions);
	index[0] = 0;
	gg_trg_TimeTalisman[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_TimeTalisman, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_TimeTalisman, Condition(Trig_TimeTalisman_Conditions));
	TriggerAddAction(gg_trg_TimeTalisman, Trig_TimeTalisman_Actions);
	index[0] = 0;
	gg_trg_Take_Paladin_Armor[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Take_Paladin_Armor, Player(index), EVENT_PLAYER_UNIT_PICKUP_ITEM, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Take_Paladin_Armor, Condition(Trig_Take_Paladin_Armor_Conditions));
	TriggerAddAction(gg_trg_Take_Paladin_Armor, Trig_Take_Paladin_Armor_Actions);
	index[0] = 0;
	gg_trg_Take_Archimagus_Staff[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Take_Archimagus_Staff, Player(index), EVENT_PLAYER_UNIT_PICKUP_ITEM, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Take_Archimagus_Staff, Condition(Trig_Take_Archimagus_Staff_Conditions));
	TriggerAddAction(gg_trg_Take_Archimagus_Staff, Trig_Take_Archimagus_Staff_Actions);
	index[0] = 0;
	gg_trg_Lost_Charged_Staff_of_Lightning[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Lost_Charged_Staff_of_Lightning, Player(index), EVENT_PLAYER_UNIT_DROP_ITEM, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Lost_Charged_Staff_of_Lightning, Condition(Trig_Lost_Charged_Staff_of_Lightning_Conditions));
	TriggerAddAction(gg_trg_Lost_Charged_Staff_of_Lightning, Trig_Lost_Charged_Staff_of_Lightning_Actions);
	index[0] = 0;
	gg_trg_Blood_Bow[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Blood_Bow, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Blood_Bow, Condition(Trig_Blood_Bow_Conditions));
	TriggerAddAction(gg_trg_Blood_Bow, Trig_Blood_Bow_Actions);
	index[0] = 0;
	gg_trg_Balance_Ring[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Balance_Ring, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Balance_Ring, Condition(Trig_Balance_Ring_Conditions));
	TriggerAddAction(gg_trg_Balance_Ring, Trig_Balance_Ring_Actions);
	index[0] = 0;
	gg_trg_Armageddon_Staff[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Armageddon_Staff, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Armageddon_Staff, Condition(Trig_Armageddon_Staff_Conditions));
	TriggerAddAction(gg_trg_Armageddon_Staff, Trig_Armageddon_Staff_Actions);
	index[0] = 0;
	gg_trg_Sargeras_Crown[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Sargeras_Crown, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Sargeras_Crown, Condition(Trig_Sargeras_Crown_Conditions));
	TriggerAddAction(gg_trg_Sargeras_Crown, Trig_Sargeras_Crown_Actions);
	index[0] = 0;
	gg_trg_Lost_Sargeras_Crown[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Lost_Sargeras_Crown, Player(index), EVENT_PLAYER_UNIT_DROP_ITEM, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Lost_Sargeras_Crown, Condition(Trig_Lost_Sargeras_Crown_Conditions));
	TriggerAddAction(gg_trg_Lost_Sargeras_Crown, Trig_Lost_Sargeras_Crown_Actions);
	index[0] = 0;
	gg_trg_Take_Sargeras_Crown[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Take_Sargeras_Crown, Player(index), EVENT_PLAYER_UNIT_PICKUP_ITEM, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Take_Sargeras_Crown, Condition(Trig_Take_Sargeras_Crown_Conditions));
	TriggerAddAction(gg_trg_Take_Sargeras_Crown, Trig_Take_Sargeras_Crown_Actions);
	index[0] = 0;
	gg_trg_Lost_Archimagus_Armor[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Lost_Archimagus_Armor, Player(index), EVENT_PLAYER_UNIT_DROP_ITEM, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Lost_Archimagus_Armor, Condition(Trig_Lost_Archimagus_Armor_Conditions));
	TriggerAddAction(gg_trg_Lost_Archimagus_Armor, Trig_Lost_Archimagus_Armor_Actions);
	index[0] = 0;
	gg_trg_Take_Archimagus_Armor[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Take_Archimagus_Armor, Player(index), EVENT_PLAYER_UNIT_PICKUP_ITEM, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Take_Archimagus_Armor, Condition(Trig_Take_Archimagus_Armor_Conditions));
	TriggerAddAction(gg_trg_Take_Archimagus_Armor, Trig_Take_Archimagus_Armor_Actions);
	index[0] = 0;
	gg_trg_Sorcerers_Talisman_Cast[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Sorcerers_Talisman_Cast, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Sorcerers_Talisman_Cast, Condition(Trig_Sorcerers_Talisman_Cast_Conditions));
	TriggerAddAction(gg_trg_Sorcerers_Talisman_Cast, Trig_Sorcerers_Talisman_Cast_Actions);
	index[0] = 0;
	gg_trg_Sorcerers_Talisman[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Sorcerers_Talisman, Player(index), EVENT_PLAYER_UNIT_USE_ITEM, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Sorcerers_Talisman, Condition(Trig_Sorcerers_Talisman_Conditions));
	TriggerAddAction(gg_trg_Sorcerers_Talisman, Trig_Sorcerers_Talisman_Actions);
	index[0] = 0;
	gg_trg_Sorcerers_Talisman_Dead_Unit[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Sorcerers_Talisman_Dead_Unit, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Sorcerers_Talisman_Dead_Unit, Condition(Trig_Sorcerers_Talisman_Dead_Unit_Condition));
	TriggerAddAction(gg_trg_Sorcerers_Talisman_Dead_Unit, Trig_Sorcerers_Talisman_Dead_Unit_Actions);
	index[0] = 0;
	gg_trg_Orc_Banner[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Orc_Banner, Player(index), EVENT_PLAYER_UNIT_PICKUP_ITEM, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Orc_Banner, Condition(Trig_Orc_Banner_Conditions));
	TriggerAddAction(gg_trg_Orc_Banner, Trig_Orc_Banner_Actions);
	index[0] = 0;
	gg_trg_Devil_Axe[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Devil_Axe, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Devil_Axe, Condition(Trig_Devil_Axe_Conditions));
	TriggerAddAction(gg_trg_Devil_Axe, Trig_Devil_Axe_Actions);
	index[0] = 0;
	gg_trg_Devil_Axe_Kill_Unit[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Devil_Axe_Kill_Unit, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Devil_Axe_Kill_Unit, Condition(Trig_Devil_Axe_Kill_Unit_Conditions));
	TriggerAddAction(gg_trg_Devil_Axe_Kill_Unit, Trig_Devil_Axe_Kill_Unit_Actions);
	index[0] = 0;
	gg_trg_Tokugawas_Katan_Kill_Unit[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Tokugawas_Katan_Kill_Unit, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Tokugawas_Katan_Kill_Unit, Condition(Trig_Tokugawas_Katan_Kill_Unit_Conditions));
	TriggerAddAction(gg_trg_Tokugawas_Katan_Kill_Unit, Trig_Tokugawas_Katan_Kill_Unit_Actions);
	index[0] = 0;
	gg_trg_Tokugawas_Katan[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Tokugawas_Katan, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Tokugawas_Katan, Condition(Trig_Tokugawas_Katan_Conditions));
	TriggerAddAction(gg_trg_Tokugawas_Katan, Trig_Tokugawas_Katan_Actions);
	index[0] = 0;
	gg_trg_Kings_Armor[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Kings_Armor, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Kings_Armor, Condition(Trig_Kings_Armor_Conditions));
	TriggerAddAction(gg_trg_Kings_Armor, Trig_Kings_Armor_Actions);
	index[0] = 0;
	gg_trg_Steel_Bib[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Steel_Bib, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Steel_Bib, Condition(Trig_Steel_Bib_Conditions));
	TriggerAddAction(gg_trg_Steel_Bib, Trig_Steel_Bib_Actions);
	index[0] = 0;
	gg_trg_Archimagus_Staff[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Archimagus_Staff, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Archimagus_Staff, Condition(Trig_Archimagus_Staff_Conditions));
	TriggerAddAction(gg_trg_Archimagus_Staff, Trig_Archimagus_Staff_Actions);
	index[0] = 0;
	gg_trg_Isidors_Scepter[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Isidors_Scepter, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Isidors_Scepter, Condition(Trig_Isidors_Scepter_Conditions));
	TriggerAddAction(gg_trg_Isidors_Scepter, Trig_Isidors_Scepter_Actions);
	index[0] = 0;
	gg_trg_Detached_Shield_Use[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Detached_Shield_Use, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Detached_Shield_Use, Condition(Trig_Detached_Shield_Use_Conditions));
	TriggerAddAction(gg_trg_Detached_Shield_Use, Trig_Detached_Shield_Use_Actions);
	index[0] = 0;
	gg_trg_Cuirass_of_Invulnerable_Use2[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Cuirass_of_Invulnerable_Use2, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Cuirass_of_Invulnerable_Use2, Condition(Trig_Cuirass_of_Invulnerable_Use2_Conditions));
	TriggerAddAction(gg_trg_Cuirass_of_Invulnerable_Use2, Trig_Cuirass_of_Invulnerable_Use2_Actions);
	index[0] = 0;
	gg_trg_Lost_Cuirass_of_Invulnerable[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Lost_Cuirass_of_Invulnerable, Player(index), EVENT_PLAYER_UNIT_DROP_ITEM, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Lost_Cuirass_of_Invulnerable, Condition(Trig_Lost_Cuirass_of_Invulnerable_Conditions));
	TriggerAddAction(gg_trg_Lost_Cuirass_of_Invulnerable, Trig_Lost_Cuirass_of_Invulnerable_Actions);
	index[0] = 0;
	gg_trg_Take_Cuirass_of_Invulnerable[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Take_Cuirass_of_Invulnerable, Player(index), EVENT_PLAYER_UNIT_PICKUP_ITEM, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Take_Cuirass_of_Invulnerable, Condition(Trig_Take_Cuirass_of_Invulnerable_Conditions));
	TriggerAddAction(gg_trg_Take_Cuirass_of_Invulnerable, Trig_Take_Cuirass_of_Invulnerable_Actions);
	index[0] = 0;
	gg_trg_Fire_Staff[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Fire_Staff, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Fire_Staff, Condition(Trig_Fire_Staff_Conditions));
	TriggerAddAction(gg_trg_Fire_Staff, Trig_Fire_Staff_Actions);
	index[0] = 0;
	gg_trg_Demon_Axe[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Demon_Axe, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Demon_Axe, Condition(Trig_Demon_Axe_Conditions));
	TriggerAddAction(gg_trg_Demon_Axe, Trig_Demon_Axe_Actions);
	index[0] = 0;
	gg_trg_Demon_Axe_Kill_Unit[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Demon_Axe_Kill_Unit, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Demon_Axe_Kill_Unit, Condition(Trig_Demon_Axe_Kill_Unit_Conditions));
	TriggerAddAction(gg_trg_Demon_Axe_Kill_Unit, Trig_Demon_Axe_Kill_Unit_Actions);
	index[0] = 0;
	gg_trg_Boots_Rescue[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Boots_Rescue, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Boots_Rescue, Condition(Trig_Boots_Rescue_Conditions));
	TriggerAddAction(gg_trg_Boots_Rescue, Trig_Boots_Rescue_Actions);
	index[0] = 0;
	gg_trg_Astral_Staff[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Astral_Staff, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Astral_Staff, Condition(Trig_Astral_Staff_Conditions));
	TriggerAddAction(gg_trg_Astral_Staff, Trig_Astral_Staff_Actions);
	index[0] = 0;
	gg_trg_Healer_Staff[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Healer_Staff, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Healer_Staff, Condition(Trig_Healer_Staff_Conditions));
	TriggerAddAction(gg_trg_Healer_Staff, Trig_Healer_Staff_Actions);
	index[0] = 0;
	gg_trg_Magic_Amulet[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Magic_Amulet, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Magic_Amulet, Condition(Trig_Magic_Amulet_Conditions));
	TriggerAddAction(gg_trg_Magic_Amulet, Trig_Magic_Amulet_Actions);
	index[0] = 0;
	gg_trg_Blood_Dagger[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Blood_Dagger, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Blood_Dagger, Condition(Trig_Blood_Dagger_Conditions));
	TriggerAddAction(gg_trg_Blood_Dagger, Trig_Blood_Dagger_Actions);
	index[0] = 0;
	gg_trg_Agility_Blade[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Agility_Blade, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Agility_Blade, Condition(Trig_Agility_Blade_Conditions));
	TriggerAddAction(gg_trg_Agility_Blade, Trig_Agility_Blade_Actions);
	gg_trg_Bone_Staff_Set_Summon_Ability_Level[CreateTrigger()] = CreateTrigger();
	TriggerRegisterAnyUnitEventBJ(gg_trg_Bone_Staff_Set_Summon_Ability_Level, EVENT_PLAYER_UNIT_SUMMON);
	TriggerAddCondition(gg_trg_Bone_Staff_Set_Summon_Ability_Level, Condition(Trig_Bone_Staff_Set_Summon_Ability_Level_Conditions));
	TriggerAddAction(gg_trg_Bone_Staff_Set_Summon_Ability_Level, Trig_Bone_Staff_Set_Summon_Ability_Level_Actions);
	gg_trg_Novice_Amulet[CreateTrigger()] = CreateTrigger();
	TriggerRegisterAnyUnitEventBJ(gg_trg_Novice_Amulet, EVENT_PLAYER_UNIT_SPELL_EFFECT);
	TriggerAddCondition(gg_trg_Novice_Amulet, Condition(Trig_Novice_Amulet_Conditions));
	TriggerAddAction(gg_trg_Novice_Amulet, Trig_Novice_Amulet_Actions);
	index[0] = 0;
	gg_trg_Glove_of_Andromat[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Glove_of_Andromat, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Glove_of_Andromat, Condition(Trig_Glove_of_Andromat_Conditions));
	TriggerAddAction(gg_trg_Glove_of_Andromat, Trig_Glove_of_Andromat_Actions);
	index[0] = 0;
	gg_trg_Glove_of_Midas[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Glove_of_Midas, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Glove_of_Midas, Condition(Trig_Glove_of_Midas_Conditions));
	TriggerAddAction(gg_trg_Glove_of_Midas, Trig_Glove_of_Midas_Actions);
	index[0] = 0;
	gg_trg_Heroes_more_attacked_priority_when_guards[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Heroes_more_attacked_priority_when_guards, Player(index), EVENT_PLAYER_UNIT_ATTACKED, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Heroes_more_attacked_priority_when_guards, Condition(Trig_Heroes_more_attacked_priority_when_guards_Conditions));
	TriggerAddAction(gg_trg_Heroes_more_attacked_priority_when_guards, Trig_Heroes_more_attacked_priority_when_guards_Actions);
	index[0] = 0;
	gg_trg_Player_Fast_Purchase_System[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Player_Fast_Purchase_System, Player(index), EVENT_PLAYER_UNIT_ISSUED_ORDER, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Player_Fast_Purchase_System, Condition(Trig_Player_Fast_Purchase_System_Conditions));
	TriggerAddAction(gg_trg_Player_Fast_Purchase_System, Trig_Player_Fast_Purchase_System_Actions);
	gg_trg_Show_hint_abount_hints[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventSingle(gg_trg_Show_hint_abount_hints, 120.);
	TriggerRegisterTimerEventSingle(gg_trg_Show_hint_abount_hints, 600.);
	TriggerAddAction(gg_trg_Show_hint_abount_hints, Trig_Show_hint_abount_hints_Actions);
	gg_trg_Show_Hint_Abount_Items[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventPeriodic(gg_trg_Show_Hint_Abount_Items, 600.);
	TriggerAddAction(gg_trg_Show_Hint_Abount_Items, Trig_Show_Hint_Abount_Items_Actions);
	gg_trg_Hint_About_Random[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventSingle(gg_trg_Hint_About_Random, 13.);
	TriggerAddAction(gg_trg_Hint_About_Random, Trig_Hint_About_Random_Actions);
	gg_trg_Show_hint_abount_reference_panel[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventSingle(gg_trg_Show_hint_abount_reference_panel, 200.);
	TriggerRegisterTimerEventSingle(gg_trg_Show_hint_abount_reference_panel, 1200.);
	TriggerAddAction(gg_trg_Show_hint_abount_reference_panel, Trig_Show_hint_abount_reference_panel_Actions);
	index[0] = 0;
	gg_trg_Show_Ability_Learn[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Show_Ability_Learn, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Show_Ability_Learn, Condition(Trig_Show_Ability_Learn_Conditions));
	TriggerAddAction(gg_trg_Show_Ability_Learn, Trig_Show_Ability_Learn_Actions);
	index[0] = 0;
	gg_trg_System_Personal_Items_Buy_Item[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_System_Personal_Items_Buy_Item, Player(index), EVENT_PLAYER_UNIT_SELL_ITEM, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddAction(gg_trg_System_Personal_Items_Buy_Item, Trig_System_Personal_Items_Buy_Item_Actions);
	index[0] = 0;
	gg_trg_System_Personal_Items_Pick_Up_Item[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_System_Personal_Items_Pick_Up_Item, Player(index), EVENT_PLAYER_UNIT_PICKUP_ITEM, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddAction(gg_trg_System_Personal_Items_Pick_Up_Item, Trig_System_Personal_Items_Pick_Up_Item_Actions);
	gg_trg_no_attack[CreateTrigger()] = CreateTrigger();
	TriggerRegisterAnyUnitEventBJ(gg_trg_no_attack, EVENT_PLAYER_UNIT_ATTACKED);
	TriggerAddCondition(gg_trg_no_attack, Condition(Trig_no_attack_Conditions));
	TriggerAddAction(gg_trg_no_attack, Trig_no_attack_Actions);
	index[0] = 0;
	gg_trg_Select_Refrence_Panel[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Select_Refrence_Panel, Player(index), EVENT_PLAYER_UNIT_SELECTED, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Select_Refrence_Panel, Condition(Trig_Select_Refrence_Panel_Conditions));
	TriggerAddAction(gg_trg_Select_Refrence_Panel, Trig_Select_Refrence_Panel_Actions);
	index[0] = 0;
	gg_trg_ShopAnimation[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_ShopAnimation, Player(index), EVENT_PLAYER_UNIT_SELECTED, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_ShopAnimation, Condition(Trig_ShopAnimation_Conditions));
	TriggerAddAction(gg_trg_ShopAnimation, Trig_ShopAnimation_Actions);
	index[0] = 0;
	gg_trg_ShopStopAnimation[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_ShopStopAnimation, Player(index), EVENT_PLAYER_UNIT_DESELECTED, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_ShopStopAnimation, Condition(Trig_ShopStopAnimation_Conditions));
	TriggerAddAction(gg_trg_ShopStopAnimation, Trig_ShopStopAnimation_Actions);
	rectRegion[CreateRegion()] = CreateRegion();
	gg_trg_RedMarkToUnit[CreateTrigger()] = CreateTrigger();
	RegionAddRect(rectRegion, bj_mapInitialPlayableArea);
	TriggerRegisterEnterRegion(gg_trg_RedMarkToUnit, rectRegion, null);
	TriggerAddAction(gg_trg_RedMarkToUnit, Trig_RedMarkToUnit_Actions);
	index[0] = 0;
	gg_trg_UnSelectedDummyRedMark[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_UnSelectedDummyRedMark, Player(index), EVENT_PLAYER_UNIT_SELECTED, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_UnSelectedDummyRedMark, Condition(Trig_UnSelectedDummyRedMark_Conditions));
	TriggerAddAction(gg_trg_UnSelectedDummyRedMark, Trig_UnSelectedDummyRedMark_Actions);
	gg_trg_SpecEffect_on_Casters[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEvent(gg_trg_SpecEffect_on_Casters, .0, false);
	TriggerAddAction(gg_trg_SpecEffect_on_Casters, Trig_SpecEffect_on_Casters_Actions);
	gg_trg_PortalSpecEffects[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEvent(gg_trg_PortalSpecEffects, 2., false);
	TriggerAddAction(gg_trg_PortalSpecEffects, Trig_PortalSpecEffects_Actions);
	gg_trg_Gates_Start_Animation[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventSingle(gg_trg_Gates_Start_Animation, 2.);
	TriggerAddAction(gg_trg_Gates_Start_Animation, Trig_Gates_Start_Animation_Actions);
	index[0] = 0;
	gg_trg_PlayerEnterGameCommand[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerChatEvent(gg_trg_PlayerEnterGameCommand, Player(index), "-", false);
		TriggerRegisterPlayerChatEvent(gg_trg_PlayerEnterGameCommand, Player(index), "+", true);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddAction(gg_trg_PlayerEnterGameCommand, Trig_PlayerEnterGameCommand_Actions);
	index[0] = 0;
	gg_trg_PlayerUseSpellGameCommand[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_PlayerUseSpellGameCommand, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_PlayerUseSpellGameCommand, Condition(Trig_PlayerUseSpellGameCommand_Conditions));
	TriggerAddAction(gg_trg_PlayerUseSpellGameCommand, Trig_PlayerUseSpellGameCommand_Actions);
	index[0] = 0;
	gg_trg_GuardsExorcistDead[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_GuardsExorcistDead, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_GuardsExorcistDead, Condition(Trig_GuardsExorcistDead_Conditions));
	TriggerAddAction(gg_trg_GuardsExorcistDead, Trig_GuardsExorcistDead_Actions);
	gg_trg_PauseUnitWhenDefeat[CreateTrigger()] = CreateTrigger();
	DisableTrigger(gg_trg_PauseUnitWhenDefeat);
	TriggerRegisterTimerEventPeriodic(gg_trg_PauseUnitWhenDefeat, .05);
	TriggerAddAction(gg_trg_PauseUnitWhenDefeat, Trig_PauseUnitWhenDefeat_Actions);
	gg_trg_PauseUnitWhenWin[CreateTrigger()] = CreateTrigger();
	DisableTrigger(gg_trg_PauseUnitWhenWin);
	TriggerRegisterEnterRectSimple(gg_trg_PauseUnitWhenWin, bj_mapInitialPlayableArea);
	TriggerAddAction(gg_trg_PauseUnitWhenWin, Trig_PauseUnitWhenWin_Actions);
	gg_trg_GameEndWin[CreateTrigger()] = CreateTrigger();
	DisableTrigger(gg_trg_GameEndWin);
	TriggerAddAction(gg_trg_GameEndWin, Trig_GameEndWin_Actions);
	gg_trg_Respawn_trees_Init[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEvent(gg_trg_Respawn_trees_Init, 5., false);
	TriggerAddAction(gg_trg_Respawn_trees_Init, Trig_Respawn_trees_Init_Actions);
	gg_trg_Respawn_trees[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Respawn_trees, Trig_Respawn_trees_Actions);
	gg_trg_Day_Weather[CreateTrigger()] = CreateTrigger();
	TriggerRegisterGameStateEventTimeOfDay(gg_trg_Day_Weather, EQUAL, 6.);
	TriggerRegisterGameStateEventTimeOfDay(gg_trg_Day_Weather, EQUAL, 12.);
	TriggerAddAction(gg_trg_Day_Weather, Trig_Day_Weather_Actions);
	gg_trg_Sky_Morning[CreateTrigger()] = CreateTrigger();
	TriggerRegisterGameStateEventTimeOfDay(gg_trg_Sky_Morning, EQUAL, 6.);
	TriggerAddAction(gg_trg_Sky_Morning, Trig_Sky_Morning_Actions);
	gg_trg_Sky_Day[CreateTrigger()] = CreateTrigger();
	TriggerRegisterGameStateEventTimeOfDay(gg_trg_Sky_Day, EQUAL, 12.);
	TriggerAddAction(gg_trg_Sky_Day, Trig_Sky_Day_Actions);
	gg_trg_Night_Weather[CreateTrigger()] = CreateTrigger();
	TriggerRegisterGameStateEventTimeOfDay(gg_trg_Night_Weather, EQUAL, 18.);
	TriggerRegisterGameStateEventTimeOfDay(gg_trg_Night_Weather, EQUAL, .0);
	TriggerAddAction(gg_trg_Night_Weather, Trig_Night_Weather_Actions);
	gg_trg_Sky_Evening[CreateTrigger()] = CreateTrigger();
	TriggerRegisterGameStateEventTimeOfDay(gg_trg_Sky_Evening, EQUAL, 18.);
	TriggerAddAction(gg_trg_Sky_Evening, Trig_Sky_Evening_Actions);
	gg_trg_Sky_Night[CreateTrigger()] = CreateTrigger();
	TriggerRegisterGameStateEventTimeOfDay(gg_trg_Sky_Night, EQUAL, .0);
	TriggerAddAction(gg_trg_Sky_Night, Trig_Sky_Night_Actions);
	gg_trg_Lightnings_Weather_Effect_Rainy[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerExpireEvent(gg_trg_Lightnings_Weather_Effect_Rainy, udg_Timer_Lightning_Strike_Weather);
	TriggerAddCondition(gg_trg_Lightnings_Weather_Effect_Rainy, Condition(Trig_Lightnings_Weather_Effect_Rainy_Conditions));
	TriggerAddAction(gg_trg_Lightnings_Weather_Effect_Rainy, Trig_Lightnings_Weather_Effect_Rainy_Actions);
	gg_trg_Periodic_Rune_Creation[CreateTrigger()] = CreateTrigger();
	DisableTrigger(gg_trg_Periodic_Rune_Creation);
	TriggerRegisterTimerEventPeriodic(gg_trg_Periodic_Rune_Creation, 60.1);
	TriggerAddAction(gg_trg_Periodic_Rune_Creation, Trig_Periodic_Rune_Creation_Actions);
	index[0] = 0;
	gg_trg_Rune_PickedUp[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Rune_PickedUp, Player(index), EVENT_PLAYER_UNIT_PICKUP_ITEM, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Rune_PickedUp, Condition(Trig_Rune_PickedUp_Conditions));
	TriggerAddAction(gg_trg_Rune_PickedUp, Trig_Rune_PickedUp_Actions);
	gg_trg_Initialization_MultiBoard[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventSingle(gg_trg_Initialization_MultiBoard, 3.);
	TriggerAddAction(gg_trg_Initialization_MultiBoard, Trig_Initialization_MultiBoard_Actions);
	gg_trg_Hero_MultiBoard_LvlUp[CreateTrigger()] = CreateTrigger();
	TriggerRegisterAnyUnitEventBJ(gg_trg_Hero_MultiBoard_LvlUp, EVENT_PLAYER_HERO_LEVEL);
	TriggerAddCondition(gg_trg_Hero_MultiBoard_LvlUp, Condition(Trig_Hero_MultiBoard_LvlUp_Conditions));
	TriggerAddAction(gg_trg_Hero_MultiBoard_LvlUp, Trig_Hero_MultiBoard_LvlUp_Actions);
	gg_trg_Time_Check_and_Player_Gold_for_MultiBoard[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventPeriodic(gg_trg_Time_Check_and_Player_Gold_for_MultiBoard, 1.);
	TriggerAddAction(gg_trg_Time_Check_and_Player_Gold_for_MultiBoard, Trig_Time_Check_and_Player_Gold_for_MultiBoard_Actions);
	index[0] = 0;
	gg_trg_Reincarnation_Skeletons[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Reincarnation_Skeletons, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Reincarnation_Skeletons, Condition(Trig_Reincarnation_Skeletons_Conditions));
	TriggerAddAction(gg_trg_Reincarnation_Skeletons, Trig_Reincarnation_Skeletons_Actions);
	index[0] = 0;
	gg_trg_BossSkeletRaise[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_BossSkeletRaise, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_BossSkeletRaise, Condition(Trig_BossSkeletRaise_Conditions));
	TriggerAddAction(gg_trg_BossSkeletRaise, Trig_BossSkeletRaise_Actions);
	index[0] = 0;
	gg_trg_BossSkeletSkillActiv[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_BossSkeletSkillActiv, Player(index), EVENT_PLAYER_UNIT_ATTACKED, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_BossSkeletSkillActiv, Condition(Trig_BossSkeletSkillActiv_Conditions));
	TriggerAddAction(gg_trg_BossSkeletSkillActiv, Trig_BossSkeletSkillActiv_Actions);
	index[0] = 0;
	gg_trg_Fire_Arrow[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Fire_Arrow, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Fire_Arrow, Condition(Trig_Fire_Arrow_Conditions));
	TriggerAddAction(gg_trg_Fire_Arrow, Trig_Fire_Arrow_Actions);
	gg_trg_Use_UnholyFrenzy_and_Fire_Arrow[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEvent(gg_trg_Use_UnholyFrenzy_and_Fire_Arrow, 1., true);
	TriggerAddCondition(gg_trg_Use_UnholyFrenzy_and_Fire_Arrow, Condition(Trig_Use_UnholyFrenzy_and_Fire_Arrow_Conditions));
	TriggerAddAction(gg_trg_Use_UnholyFrenzy_and_Fire_Arrow, Trig_Use_UnholyFrenzy_and_Fire_Arrow_Actions);
	index[0] = 0;
	gg_trg_Create_Tombstone[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Create_Tombstone, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Create_Tombstone, Condition(Trig_Create_Tombstone_Conditions));
	TriggerAddAction(gg_trg_Create_Tombstone, Trig_Create_Tombstone_Actions);
	index[0] = 0;
	gg_trg_ZombieExploadDeath[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_ZombieExploadDeath, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_ZombieExploadDeath, Condition(Trig_ZombieExploadDeath_Conditions));
	TriggerAddAction(gg_trg_ZombieExploadDeath, Trig_ZombieExploadDeath_Actions);
	index[0] = 0;
	gg_trg_Damned_Soul[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Damned_Soul, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Damned_Soul, Condition(Trig_Damned_Soul_Conditions));
	TriggerAddAction(gg_trg_Damned_Soul, Trig_Damned_Soul_Actions);
	gg_trg_Use_PowerofHorror_and_Curse_and_Slam_and_Dumned_Soul[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEvent(gg_trg_Use_PowerofHorror_and_Curse_and_Slam_and_Dumned_Soul, 1., true);
	TriggerAddCondition(gg_trg_Use_PowerofHorror_and_Curse_and_Slam_and_Dumned_Soul, Condition(Trig_Use_PowerofHorror_and_Curse_and_Slam_Conditions));
	TriggerAddAction(gg_trg_Use_PowerofHorror_and_Curse_and_Slam_and_Dumned_Soul, Trig_Use_PowerofHorror_and_Curse_and_Slam_Actions);
	index[0] = 0;
	gg_trg_Throw_Meat[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Throw_Meat, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Throw_Meat, Condition(Trig_Throw_Meat_Conditions));
	TriggerAddAction(gg_trg_Throw_Meat, Trig_Throw_Meat_Actions);
	index[0] = 0;
	gg_trg_Earth_Clap[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Earth_Clap, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Earth_Clap, Condition(Trig_Earth_Clap_Conditions));
	TriggerAddAction(gg_trg_Earth_Clap, Trig_Earth_Clap_Actions);
	index[0] = 0;
	gg_trg_Ghoul_Jump[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Ghoul_Jump, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Ghoul_Jump, Condition(Trig_Ghoul_Jump_Conditions));
	TriggerAddAction(gg_trg_Ghoul_Jump, Trig_Ghoul_Jump_Actions);
	index[0] = 0;
	gg_trg_BurrowStrike[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_BurrowStrike, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_BurrowStrike, Condition(Trig_BurrowStrike_Conditions));
	TriggerAddAction(gg_trg_BurrowStrike, Trig_BurrowStrike_Actions);
	gg_trg_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEvent(gg_trg_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump, 1., true);
	TriggerAddCondition(gg_trg_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump, Condition(Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Conditions));
	TriggerAddAction(gg_trg_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump, Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Actions);
	index[0] = 0;
	gg_trg_BeetleCorpseBurrowCast[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_BeetleCorpseBurrowCast, Player(index), EVENT_PLAYER_UNIT_ATTACKED, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_BeetleCorpseBurrowCast, Condition(Trig_BeetleCorpseBurrowCast_Conditions));
	TriggerAddAction(gg_trg_BeetleCorpseBurrowCast, Trig_BeetleCorpseBurrowCast_Actions);
	index[0] = 0;
	gg_trg_BeetleCorpseBurrow[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_BeetleCorpseBurrow, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_BeetleCorpseBurrow, Condition(Trig_BeetleCorpseBurrow_Conditions));
	TriggerAddAction(gg_trg_BeetleCorpseBurrow, Trig_BeetleCorpseBurrow_Actions);
	index[0] = 0;
	gg_trg_Cocoon_Creation[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Cocoon_Creation, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Cocoon_Creation, Condition(Trig_Cocoon_Creation_Conditions));
	TriggerAddAction(gg_trg_Cocoon_Creation, Trig_Cocoon_Creation_Actions);
	index[0] = 0;
	gg_trg_Poisonous_Spittle_Cast[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Poisonous_Spittle_Cast, Player(index), EVENT_PLAYER_UNIT_ATTACKED, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Poisonous_Spittle_Cast, Condition(Trig_Poisonous_Spittle_Cast_Conditions));
	TriggerAddAction(gg_trg_Poisonous_Spittle_Cast, Trig_Poisonous_Spittle_Cast_Actions);
	index[0] = 0;
	gg_trg_Holes_Of_Grave_Diggers_Debug_Kill[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Holes_Of_Grave_Diggers_Debug_Kill, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Holes_Of_Grave_Diggers_Debug_Kill, Condition(Trig_Holes_Of_Grave_Diggers_Debug_Kill_Conditions));
	TriggerAddAction(gg_trg_Holes_Of_Grave_Diggers_Debug_Kill, Trig_Holes_Of_Grave_Diggers_Debug_Kill_Actions);
	index[0] = 0;
	gg_trg_Holes_Of_Grave_Diggers_Cast[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Holes_Of_Grave_Diggers_Cast, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Holes_Of_Grave_Diggers_Cast, Condition(Trig_Holes_Of_Grave_Diggers_Cast_Conditions));
	TriggerAddAction(gg_trg_Holes_Of_Grave_Diggers_Cast, Trig_Holes_Of_Grave_Diggers_Cast_Actions);
	index[0] = 0;
	gg_trg_Nerub_Spider[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Nerub_Spider, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Nerub_Spider, Condition(Trig_Nerub_Spider_Conditions));
	TriggerAddAction(gg_trg_Nerub_Spider, Trig_Nerub_Spider_Actions);
	gg_trg_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEvent(gg_trg_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger, 1., true);
	TriggerAddCondition(gg_trg_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger, Condition(Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Conditions));
	TriggerAddAction(gg_trg_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger, Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Actions);
	index[0] = 0;
	gg_trg_Damned_Ents_Reincarnation[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Damned_Ents_Reincarnation, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Damned_Ents_Reincarnation, Condition(Trig_Damned_Ents_Reincarnation_Conditions));
	TriggerAddAction(gg_trg_Damned_Ents_Reincarnation, Trig_Damned_Ents_Reincarnation_Actions);
	index[0] = 0;
	gg_trg_Rage_of_Decay[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Rage_of_Decay, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Rage_of_Decay, Condition(Trig_Rage_of_Decay_Conditions));
	TriggerAddAction(gg_trg_Rage_of_Decay, Trig_Rage_of_Decay_Actions);
	gg_trg_Use_ThrowStone_and_TurnIntoEnt[CreateTrigger()] = CreateTrigger();
	TriggerRegisterAnyUnitEventBJ(gg_trg_Use_ThrowStone_and_TurnIntoEnt, EVENT_PLAYER_UNIT_ATTACKED);
	TriggerAddCondition(gg_trg_Use_ThrowStone_and_TurnIntoEnt, Condition(Trig_Use_ThrowStone_and_TurnIntoEnt_Conditions));
	TriggerAddAction(gg_trg_Use_ThrowStone_and_TurnIntoEnt, Trig_Use_ThrowStone_and_TurnIntoEnt_Actions);
	gg_trg_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventPeriodic(gg_trg_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay, 1.);
	TriggerAddCondition(gg_trg_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay, Condition(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Conditions));
	TriggerAddAction(gg_trg_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay, Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Actions);
	index[0] = 0;
	gg_trg_Troll_Dead_Remove_Bugs[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Troll_Dead_Remove_Bugs, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Troll_Dead_Remove_Bugs, Condition(Trig_Troll_Dead_Remove_Bugs_Conditions));
	TriggerAddAction(gg_trg_Troll_Dead_Remove_Bugs, Trig_Troll_Dead_Remove_Bugs_Actions);
	index[0] = 0;
	gg_trg_Boss_Troll_Entangle_Throw[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Boss_Troll_Entangle_Throw, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Boss_Troll_Entangle_Throw, Condition(Trig_Boss_Troll_Entangle_Throw_Conditions));
	TriggerAddAction(gg_trg_Boss_Troll_Entangle_Throw, Trig_Boss_Troll_Entangle_Throw_Actions);
	gg_trg_Use_Berserk_and_BerserkBoss[CreateTrigger()] = CreateTrigger();
	TriggerRegisterAnyUnitEventBJ(gg_trg_Use_Berserk_and_BerserkBoss, EVENT_PLAYER_UNIT_ATTACKED);
	TriggerAddCondition(gg_trg_Use_Berserk_and_BerserkBoss, Condition(Trig_Use_Berserk_and_BerserkBoss_Conditions));
	TriggerAddAction(gg_trg_Use_Berserk_and_BerserkBoss, Trig_Use_Berserk_and_BerserkBoss_Actions);
	gg_trg_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventPeriodic(gg_trg_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle, 1.);
	TriggerAddCondition(gg_trg_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle, Condition(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Conditions));
	TriggerAddAction(gg_trg_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle, Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Actions);
	index[0] = 0;
	gg_trg_Aspect_of_Magic_Protection[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Aspect_of_Magic_Protection, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Aspect_of_Magic_Protection, Condition(Trig_Aspect_of_Magic_Protection_Conditions));
	TriggerAddAction(gg_trg_Aspect_of_Magic_Protection, Trig_Aspect_of_Magic_Protection_Actions);
	index[0] = 0;
	gg_trg_Remove_Effects_From_Bosses[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Remove_Effects_From_Bosses, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Remove_Effects_From_Bosses, Condition(Trig_Remove_Effects_From_Bosses_Conditions));
	TriggerAddAction(gg_trg_Remove_Effects_From_Bosses, Trig_Remove_Effects_From_Bosses_Actions);
	index[0] = 0;
	gg_trg_Metka_Dreneev[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Metka_Dreneev, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Metka_Dreneev, Condition(Trig_Metka_Dreneev_Conditions));
	TriggerAddAction(gg_trg_Metka_Dreneev, Trig_Metka_Dreneev_Actions);
	index[0] = 0;
	gg_trg_Fast_Attack[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Fast_Attack, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Fast_Attack, Condition(Trig_Fast_Attack_Conditions));
	TriggerAddAction(gg_trg_Fast_Attack, Trig_Fast_Attack_Actions);
	index[0] = 0;
	gg_trg_Bash_Attack[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Bash_Attack, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Bash_Attack, Condition(Trig_Bash_Attack_Conditions));
	TriggerAddAction(gg_trg_Bash_Attack, Trig_Bash_Attack_Actions);
	gg_trg_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEvent(gg_trg_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack, 1., true);
	TriggerAddCondition(gg_trg_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack, Condition(Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Conditions));
	TriggerAddAction(gg_trg_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack, Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Actions);
	index[0] = 0;
	gg_trg_Blink_Strike[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Blink_Strike, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Blink_Strike, Condition(Trig_Blink_Strike_Conditions));
	TriggerAddAction(gg_trg_Blink_Strike, Trig_Blink_Strike_Actions);
	index[0] = 0;
	gg_trg_Victim_Search[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Victim_Search, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Victim_Search, Condition(Trig_Victim_Search_Conditions));
	TriggerAddAction(gg_trg_Victim_Search, Trig_Victim_Search_Actions);
	index[0] = 0;
	gg_trg_Black_Hole[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Black_Hole, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Black_Hole, Condition(Trig_Black_Hole_Conditions));
	TriggerAddAction(gg_trg_Black_Hole, Trig_Black_Hole_Actions);
	gg_trg_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar[CreateTrigger()] = CreateTrigger();
	TriggerRegisterAnyUnitEventBJ(gg_trg_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar, EVENT_PLAYER_UNIT_ATTACKED);
	TriggerAddCondition(gg_trg_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar, Condition(Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Conditions));
	TriggerAddAction(gg_trg_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar, Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Actions);
	gg_trg_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventPeriodic(gg_trg_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH, 1.);
	TriggerAddCondition(gg_trg_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH, Condition(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Conditions));
	TriggerAddAction(gg_trg_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH, Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Actions);
	index[0] = 0;
	gg_trg_Weakness[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Weakness, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Weakness, Condition(Trig_Weakness_Conditions));
	TriggerAddAction(gg_trg_Weakness, Trig_Weakness_Actions);
	index[0] = 0;
	gg_trg_Astral_Dispersal[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Astral_Dispersal, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Astral_Dispersal, Condition(Trig_Astral_Dispersal_Conditions));
	TriggerAddAction(gg_trg_Astral_Dispersal, Trig_Astral_Dispersal_Actions);
	index[0] = 0;
	gg_trg_Infernal_Ram[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Infernal_Ram, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Infernal_Ram, Condition(Trig_Infernal_Ram_Conditions));
	TriggerAddAction(gg_trg_Infernal_Ram, Trig_Infernal_Ram_Actions);
	index[0] = 0;
	gg_trg_Fiery_Blow[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Fiery_Blow, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Fiery_Blow, Condition(Trig_Fiery_Blow_Conditions));
	TriggerAddAction(gg_trg_Fiery_Blow, Trig_Fiery_Blow_Actions);
	index[0] = 0;
	gg_trg_Bloody_Jump[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Bloody_Jump, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Bloody_Jump, Condition(Trig_Bloody_Jump_Conditions));
	TriggerAddAction(gg_trg_Bloody_Jump, Trig_Bloody_Jump_Actions);
	index[0] = 0;
	gg_trg_Blood_Absorption[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Blood_Absorption, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Blood_Absorption, Condition(Trig_Blood_Absorption_Conditions));
	TriggerAddAction(gg_trg_Blood_Absorption, Trig_Blood_Absorption_Actions);
	gg_trg_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u[CreateTrigger()] = CreateTrigger();
	TriggerRegisterAnyUnitEventBJ(gg_trg_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u, EVENT_PLAYER_UNIT_ATTACKED);
	TriggerAddCondition(gg_trg_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u, Condition(Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Conditions));
	TriggerAddAction(gg_trg_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u, Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Actions);
	gg_trg_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventPeriodic(gg_trg_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4, 1.);
	TriggerAddCondition(gg_trg_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4, Condition(Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Conditions));
	TriggerAddAction(gg_trg_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4, Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Actions);
	gg_trg_Hatred_of_fire[CreateTrigger()] = CreateTrigger();
	TriggerRegisterAnyUnitEventBJ(gg_trg_Hatred_of_fire, EVENT_PLAYER_UNIT_SPELL_EFFECT);
	TriggerAddCondition(gg_trg_Hatred_of_fire, Condition(Trig_Hatred_of_fire_Conditions));
	TriggerAddAction(gg_trg_Hatred_of_fire, Trig_Hatred_of_fire_Actions);
	gg_trg_set_fire[CreateTrigger()] = CreateTrigger();
	TriggerRegisterAnyUnitEventBJ(gg_trg_set_fire, EVENT_PLAYER_UNIT_SPELL_EFFECT);
	TriggerAddCondition(gg_trg_set_fire, Condition(firess));
	TriggerAddAction(gg_trg_set_fire, fires);
	gg_trg_set_fire_2[CreateTrigger()] = CreateTrigger();
	TriggerRegisterAnyUnitEventBJ(gg_trg_set_fire_2, EVENT_PLAYER_UNIT_SPELL_EFFECT);
	TriggerAddCondition(gg_trg_set_fire_2, Condition(firess2));
	TriggerAddAction(gg_trg_set_fire_2, fires2);
	gg_trg_the_creation_of_the_image[CreateTrigger()] = CreateTrigger();
	TriggerRegisterAnyUnitEventBJ(gg_trg_the_creation_of_the_image, EVENT_PLAYER_UNIT_SPELL_EFFECT);
	TriggerAddCondition(gg_trg_the_creation_of_the_image, Condition(Trig_the_creation_of_the_image_Conditions));
	TriggerAddAction(gg_trg_the_creation_of_the_image, Trig_the_creation_of_the_image_Actions);
	gg_trg_fiery_explosions[CreateTrigger()] = CreateTrigger();
	TriggerRegisterAnyUnitEventBJ(gg_trg_fiery_explosions, EVENT_PLAYER_UNIT_SPELL_EFFECT);
	TriggerAddCondition(gg_trg_fiery_explosions, Condition(Trig_fiery_explosions_Conditions));
	TriggerAddAction(gg_trg_fiery_explosions, Trig_fiery_explosions_Actions);
	index[0] = 0;
	gg_trg_Breathoffire[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Breathoffire, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Breathoffire, Condition(Trig_Breathoffire_Conditions));
	TriggerAddAction(gg_trg_Breathoffire, Trig_Breathoffire_Actions);
	index[0] = 0;
	gg_trg_Fire_Explosions[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Fire_Explosions, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Fire_Explosions, Condition(Trig_Fire_Explosions_Conditions));
	TriggerAddAction(gg_trg_Fire_Explosions, Trig_Fire_Explosions_Actions);
	index[0] = 0;
	gg_trg_BossStomp[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_BossStomp, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_BossStomp, Condition(Trig_BossStomp_Conditions));
	TriggerAddAction(gg_trg_BossStomp, Trig_BossStomp_Actions);
	index[0] = 0;
	gg_trg_Mark_of_Fire[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Mark_of_Fire, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Mark_of_Fire, Condition(Trig_Mark_of_Fire_Conditions));
	TriggerAddAction(gg_trg_Mark_of_Fire, Trig_Mark_of_Fire_Actions);
	gg_trg_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire[CreateTrigger()] = CreateTrigger();
	TriggerRegisterAnyUnitEventBJ(gg_trg_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire, EVENT_PLAYER_UNIT_ATTACKED);
	TriggerAddCondition(gg_trg_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire, Condition(Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Conditions));
	TriggerAddAction(gg_trg_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire, Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Actions);
	gg_trg_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventPeriodic(gg_trg_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp, 1.);
	TriggerAddCondition(gg_trg_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp, Condition(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Conditions));
	TriggerAddAction(gg_trg_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp, Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Actions);
	index[0] = 0;
	gg_trg_Power_of_Skeletons[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Power_of_Skeletons, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Power_of_Skeletons, Condition(Trig_Power_of_Skeletons_Conditions));
	TriggerAddAction(gg_trg_Power_of_Skeletons, Trig_Power_of_Skeletons_Actions);
	gg_trg_Water_Elemental_Load[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Water_Elemental_Load, Trig_Water_Elemental_Load_Actions);
	gg_trg_Init_kreeps[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Init_kreeps, Trig_Init_kreeps_Actions);
	index[0] = 0;
	gg_trg_spirits_of_water_dead[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_spirits_of_water_dead, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_spirits_of_water_dead, Condition(Trig_spirits_of_water_dead_Conditions));
	TriggerAddAction(gg_trg_spirits_of_water_dead, Trig_spirits_of_water_dead_Actions);
	index[0] = 0;
	gg_trg_Skill_Gertva[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Skill_Gertva, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Skill_Gertva, Condition(Trig_Skill_Gertva_Conditions));
	TriggerAddAction(gg_trg_Skill_Gertva, Trig_Skill_Gertva_Actions);
	index[0] = 0;
	gg_trg_Opening_Streams[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Opening_Streams, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Opening_Streams, Condition(Trig_Opening_Streams_Conditions));
	TriggerAddAction(gg_trg_Opening_Streams, Trig_Opening_Streams_Actions);
	index[0] = 0;
	gg_trg_Water_Explosion[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Water_Explosion, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Water_Explosion, Condition(Trig_water_explosion_Conditions));
	TriggerAddAction(gg_trg_Water_Explosion, Trig_water_explosion_Actions);
	index[0] = 0;
	gg_trg_Tsunami[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Tsunami, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Tsunami, Condition(Trig_Tsunami_Conditions));
	TriggerAddAction(gg_trg_Tsunami, Trig_Tsunami_Actions);
	gg_trg_Guardsman_Load[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Guardsman_Load, Trig_Guardsman_Load_Actions);
	index[0] = 0;
	gg_trg_Protective_Stand_Switch[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Protective_Stand_Switch, Player(index), EVENT_PLAYER_UNIT_ISSUED_ORDER, null);
		TriggerRegisterPlayerUnitEvent(gg_trg_Protective_Stand_Switch, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Protective_Stand_Switch, Condition(Trig_Protective_Stand_Switch_Conditions));
	TriggerAddAction(gg_trg_Protective_Stand_Switch, Trig_Protective_Stand_Switch_Actions);
	index[0] = 0;
	gg_trg_Learn_Fighting_Skills[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Fighting_Skills, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Learn_Fighting_Skills, Condition(Trig_Learn_Fighting_Skills_Conditions));
	TriggerAddAction(gg_trg_Learn_Fighting_Skills, Trig_Learn_Fighting_Skills_Actions);
	index[0] = 0;
	gg_trg_Ram_Board[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Ram_Board, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Ram_Board, Condition(Trig_Ram_Board_Conditions));
	TriggerAddAction(gg_trg_Ram_Board, Trig_Ram_Board_Actions);
	index[0] = 0;
	gg_trg_Warcry[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Warcry, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Warcry, Condition(Trig_Warcry_Conditions));
	TriggerAddAction(gg_trg_Warcry, Trig_Warcry_Actions);
	gg_trg_Drenor_Bull_Load[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Drenor_Bull_Load, Trig_Drenor_Bull_Load_Actions);
	gg_trg_Drenor_Bull_Show_Hint[CreateTrigger()] = CreateTrigger();
	DisableTrigger(gg_trg_Drenor_Bull_Show_Hint);
	TriggerRegisterTimerEventPeriodic(gg_trg_Drenor_Bull_Show_Hint, 120.);
	TriggerAddAction(gg_trg_Drenor_Bull_Show_Hint, Trig_Drenor_Bull_Show_Hint_Actions);
	index[0] = 0;
	gg_trg_Drenor_Bull_Show_Rage[CreateTrigger()] = CreateTrigger();
	DisableTrigger(gg_trg_Drenor_Bull_Show_Rage);
	while (true) {
		TriggerRegisterPlayerChatEvent(gg_trg_Drenor_Bull_Show_Rage, Player(index), "-rage", true);
		TriggerRegisterPlayerChatEvent(gg_trg_Drenor_Bull_Show_Rage, Player(index), "-r", true);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Drenor_Bull_Show_Rage, Condition(Trig_Drenor_Bull_Show_Rage_Conditions));
	TriggerAddAction(gg_trg_Drenor_Bull_Show_Rage, Trig_Drenor_Bull_Show_Rage_Actions);
	index[0] = 0;
	gg_trg_Axe_Throw[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Axe_Throw, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Axe_Throw, Condition(Trig_Axe_Throw_Conditions));
	TriggerAddAction(gg_trg_Axe_Throw, Trig_Axe_Throw_Actions);
	index[0] = 0;
	gg_trg_Violent_Roar[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Violent_Roar, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Violent_Roar, Condition(Trig_Violent_Roar_Conditions));
	TriggerAddAction(gg_trg_Violent_Roar, Trig_Violent_Roar_Actions);
	index[0] = 0;
	gg_trg_upgrade_Berserk[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_upgrade_Berserk, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_upgrade_Berserk, Condition(Trig_upgrade_Berserk_Conditions));
	TriggerAddAction(gg_trg_upgrade_Berserk, Trig_upgrade_Berserk_Actions);
	index[0] = 0;
	gg_trg_Learn_Spell_Rage[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Spell_Rage, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Learn_Spell_Rage, Condition(Trig_Learn_Spell_Rage_Conditions));
	TriggerAddAction(gg_trg_Learn_Spell_Rage, Trig_Learn_Spell_Rage_Actions);
	index[0] = 0;
	gg_trg_GrogTarDead[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_GrogTarDead, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_GrogTarDead, Condition(Trig_GrogTarDead_Conditions));
	TriggerAddAction(gg_trg_GrogTarDead, Trig_GrogTarDead_Actions);
	index[0] = 0;
	gg_trg_attack_hero_Rage[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_attack_hero_Rage, Player(index), EVENT_PLAYER_UNIT_ATTACKED, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	DisableTrigger(gg_trg_attack_hero_Rage);
	TriggerAddCondition(gg_trg_attack_hero_Rage, Condition(Trig_attack_hero_Rage_Conditions));
	TriggerAddAction(gg_trg_attack_hero_Rage, Trig_attack_hero_Rage_Actions);
	index[0] = 0;
	gg_trg_kill_hero_Rage[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_kill_hero_Rage, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	DisableTrigger(gg_trg_kill_hero_Rage);
	TriggerAddCondition(gg_trg_kill_hero_Rage, Condition(Trig_kill_hero_Rage_Conditions));
	TriggerAddAction(gg_trg_kill_hero_Rage, Trig_kill_hero_Rage_Actions);
	gg_trg_Sniatie_Rage[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEvent(gg_trg_Sniatie_Rage, 3., true);
	TriggerAddAction(gg_trg_Sniatie_Rage, Trig_Sniatie_Rage_Action);
	DisableTrigger(gg_trg_Sniatie_Rage);
	gg_trg_Timer_Rage[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerExpireEvent(gg_trg_Timer_Rage, udg_GrogTarRageTimer);
	TriggerAddAction(gg_trg_Timer_Rage, Trig_Timer_last_Actions);
	gg_trg_Illusionist_Load[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Illusionist_Load, Trig_Illusionist_Load_Actions);
	index[0] = 0;
	gg_trg_Reflection[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Reflection, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Reflection, Condition(Trig_Reflection_Conditions));
	TriggerAddAction(gg_trg_Reflection, Trig_Reflection_Actions);
	index[0] = 0;
	gg_trg_Illusory_Attack[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Illusory_Attack, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Illusory_Attack, Condition(Trig_Illusory_Attack_Conditions));
	TriggerAddAction(gg_trg_Illusory_Attack, Trig_Illusory_Attack_Actions);
	index[0] = 0;
	gg_trg_Summon_Illusions_with_Reflection[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Summon_Illusions_with_Reflection, Player(index), EVENT_PLAYER_UNIT_SUMMON, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Summon_Illusions_with_Reflection, Condition(Trig_Summon_Illusions_with_Reflection_Conditions));
	TriggerAddAction(gg_trg_Summon_Illusions_with_Reflection, Trig_Summon_Illusions_with_Reflection_Actions);
	index[0] = 0;
	gg_trg_Illusions_with_Phantoms_Dead[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Illusions_with_Phantoms_Dead, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Illusions_with_Phantoms_Dead, Condition(Trig_Illusions_with_Phantoms_Dead_Conditions));
	TriggerAddAction(gg_trg_Illusions_with_Phantoms_Dead, Trig_Illusions_with_Phantoms_Dead_Actions);
	gg_trg_BladeMaster_Load[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_BladeMaster_Load, Trig_BladeMaster_Load_Actions);
	index[0] = 0;
	gg_trg_Dissection[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Dissection, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Dissection, Condition(Trig_Dissection_Conditions));
	TriggerAddAction(gg_trg_Dissection, Trig_Dissection_Actions);
	index[0] = 0;
	gg_trg_Whirlwind[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Whirlwind, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Whirlwind, Condition(Trig_Whirlwind_Conditions));
	TriggerAddAction(gg_trg_Whirlwind, Trig_Whirlwind_Actions);
	index[0] = 0;
	gg_trg_Imboweling[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Imboweling, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Imboweling, Condition(Trig_Imboweling_Conditions));
	TriggerAddAction(gg_trg_Imboweling, Trig_Imboweling_Actions);
	gg_trg_Master_of_Lightnings_Load[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Master_of_Lightnings_Load, Trig_Master_of_Lightnings_Load_Actions);
	index[0] = 0;
	gg_trg_Thundercloud[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Thundercloud, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Thundercloud, Condition(Trig_Thundercloud_Conditions));
	TriggerAddAction(gg_trg_Thundercloud, Trig_Thundercloud_Actions);
	index[0] = 0;
	gg_trg_Power_of_Lightnings[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Power_of_Lightnings, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Power_of_Lightnings, Condition(Trig_Power_of_Lightnings_Conditions));
	TriggerAddAction(gg_trg_Power_of_Lightnings, Trig_Power_of_Lightnings_Actions);
	index[0] = 0;
	gg_trg_Electric_Field[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Electric_Field, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Electric_Field, Condition(Trig_Learn_Skill_Electric_Field_Conditions));
	TriggerAddAction(gg_trg_Electric_Field, Trig_Learn_Skill_Electric_Field_Actions);
	index[0] = 0;
	gg_trg_Storm[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Storm, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Storm, Condition(Trig_Storm_Conditions));
	TriggerAddAction(gg_trg_Storm, Trig_Storm_Actions);
	gg_trg_Respawnlol[CreateTrigger()] = CreateTrigger();
	TriggerRegisterTimerEventSingle(gg_trg_Respawnlol, 5);
	TriggerAddAction(gg_trg_Respawnlol, Trig_Respawnlol_Actions);
	gg_trg_Ranger_Load[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Ranger_Load, Trig_Ranger_Load_Actions);
	index[0] = 0;
	gg_trg_MultiShotSwitch[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_MultiShotSwitch, Player(index), EVENT_PLAYER_UNIT_ISSUED_ORDER, null);
		TriggerRegisterPlayerUnitEvent(gg_trg_MultiShotSwitch, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_MultiShotSwitch, Condition(Trig_MultiShotSwitch_Conditions));
	TriggerAddAction(gg_trg_MultiShotSwitch, Trig_MultiShotSwitch_Actions);
	index[0] = 0;
	gg_trg_Learn_Release_of_Arrows[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Release_of_Arrows, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Learn_Release_of_Arrows, Condition(Trig_Learn_Release_of_Arrows_Conditions));
	TriggerAddAction(gg_trg_Learn_Release_of_Arrows, Trig_Learn_Release_of_Arrows_Actions);
	index[0] = 0;
	gg_trg_Release_of_Arrows[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Release_of_Arrows, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Release_of_Arrows, Condition(Trig_Release_of_Arrows_Conditions));
	TriggerAddAction(gg_trg_Release_of_Arrows, Trig_Release_of_Arrows_Actions);
	index[0] = 0;
	gg_trg_Dexterity_of_the_Ranger[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Dexterity_of_the_Ranger, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Dexterity_of_the_Ranger, Condition(Trig_Dexterity_of_the_Ranger_Conditions));
	TriggerAddAction(gg_trg_Dexterity_of_the_Ranger, Trig_Dexterity_of_the_Ranger_Actions);
	gg_trg_Healer_Load[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Healer_Load, Trig_Healer_Load_Actions);
	index[0] = 0;
	gg_trg_Good_Healing[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Good_Healing, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Good_Healing, Condition(Trig_Good_Healing_Conditions));
	TriggerAddAction(gg_trg_Good_Healing, Trig_Good_Healing_Actions);
	index[0] = 0;
	gg_trg_Spiritual_Communication[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Spiritual_Communication, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Spiritual_Communication, Condition(Trig_Spiritual_Communication_Conditions));
	TriggerAddAction(gg_trg_Spiritual_Communication, Trig_Spiritual_Communication_Actions);
	index[0] = 0;
	gg_trg_Curing_Light[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Curing_Light, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Curing_Light, Condition(Trig_Curing_Light_Conditions));
	TriggerAddAction(gg_trg_Curing_Light, Trig_Curing_Light_Actions);
	index[0] = 0;
	gg_trg_Guardian_Angel[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Guardian_Angel, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Guardian_Angel, Condition(Trig_Guardian_Angel_Conditions));
	TriggerAddAction(gg_trg_Guardian_Angel, Trig_Guardian_Angel_Actions);
	gg_trg_Paladin_Load[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Paladin_Load, Trig_Paladin_Load_Actions);
	index[0] = 0;
	gg_trg_Spiral_of_Light[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Spiral_of_Light, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Spiral_of_Light, Condition(Trig_Spiral_of_Light_Conditions));
	TriggerAddAction(gg_trg_Spiral_of_Light, Trig_Spiral_of_Light_Actions);
	index[0] = 0;
	gg_trg_Keeper_Seal[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Keeper_Seal, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Keeper_Seal, Condition(Trig_Keeper_Seal_Conditions));
	TriggerAddAction(gg_trg_Keeper_Seal, Trig_Keeper_Seal_Actions);
	index[0] = 0;
	gg_trg_Light_Hammer[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Light_Hammer, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Light_Hammer, Condition(Trig_Light_Hammer_Conditions));
	TriggerAddAction(gg_trg_Light_Hammer, Trig_Light_Hammer_Actions);
	index[0] = 0;
	gg_trg_God_Hand[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_God_Hand, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_God_Hand, Condition(Trig_God_Hand_Conditions));
	TriggerAddAction(gg_trg_God_Hand, Trig_God_Hand_Actions);
	gg_trg_Stone_Guard_Load[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Stone_Guard_Load, Trig_Stone_Guard_Load_Actions);
	index[0] = 0;
	gg_trg_Boulder_Throw[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Boulder_Throw, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Boulder_Throw, Condition(Trig_Boulder_Throw_Conditions));
	TriggerAddAction(gg_trg_Boulder_Throw, Trig_Boulder_Throw_Actions);
	index[0] = 0;
	gg_trg_Earth_Shiver[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Earth_Shiver, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Earth_Shiver, Condition(Trig_Earth_Shiver_Conditions));
	TriggerAddAction(gg_trg_Earth_Shiver, Trig_Earth_Shiver_Actions);
	index[0] = 0;
	gg_trg_Learn_Stone_Armor[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Stone_Armor, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Learn_Stone_Armor, Condition(Trig_Learn_Stone_Armor_Conditions));
	TriggerAddAction(gg_trg_Learn_Stone_Armor, Trig_Learn_Stone_Armor_Actions);
	index[0] = 0;
	gg_trg_Rock_Strike[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Rock_Strike, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Rock_Strike, Condition(Trig_Rock_Strike_Conditions));
	TriggerAddAction(gg_trg_Rock_Strike, Trig_Rock_Strike_Actions);
	gg_trg_Archdruid_Load[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Archdruid_Load, Trig_Archdruid_Load_Actions);
	index[0] = 0;
	gg_trg_Energy_of_Nature[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Energy_of_Nature, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Energy_of_Nature, Condition(Trig_Energy_of_Nature_Conditions));
	TriggerAddAction(gg_trg_Energy_of_Nature, Trig_Energy_of_Nature_Actions);
	index[0] = 0;
	gg_trg_Life_Chain[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Life_Chain, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Life_Chain, Condition(Trig_Life_Chain_Conditions));
	TriggerAddAction(gg_trg_Life_Chain, Trig_Life_Chain_Actions);
	index[0] = 0;
	gg_trg_Ent_Creation[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Ent_Creation, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Ent_Creation, Condition(Trig_Ent_Creation_Conditions));
	TriggerAddAction(gg_trg_Ent_Creation, Trig_Ent_Creation_Actions);
	index[0] = 0;
	gg_trg_Nature_Wrath[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Nature_Wrath, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Nature_Wrath, Condition(Trig_Nature_Wrath_Conditions));
	TriggerAddAction(gg_trg_Nature_Wrath, Trig_Nature_Wrath_Actions);
	index[0] = 0;
	gg_trg_Falling_Star[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Falling_Star, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Falling_Star, Condition(Trig_Falling_Star_Conditions));
	TriggerAddAction(gg_trg_Falling_Star, Trig_Falling_Star_Actions);
	index[0] = 0;
	gg_trg_Moon_Chackram[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Moon_Chackram, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Moon_Chackram, Condition(Trig_Moon_Chackram_Conditions));
	TriggerAddAction(gg_trg_Moon_Chackram, Trig_Moon_Chackram_Actions);
	index[0] = 0;
	gg_trg_Moon_Wind[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Moon_Wind, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Moon_Wind, Condition(Trig_Moon_Wind_Conditions));
	TriggerAddAction(gg_trg_Moon_Wind, Trig_Moon_Wind_Actions);
	index[0] = 0;
	gg_trg_Night_Heart[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Night_Heart, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Night_Heart, Condition(Trig_Night_Heart_Conditions));
	TriggerAddAction(gg_trg_Night_Heart, Trig_Night_Heart_Actions);
	gg_trg_MoonWarrior_Load[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_MoonWarrior_Load, Trig_MoonWarrior_Load_Actions);
	index[0] = 0;
	gg_trg_Ancient_Communication[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Ancient_Communication, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Ancient_Communication, Condition(Trig_Ancient_Communication_Conditions));
	TriggerAddAction(gg_trg_Ancient_Communication, Trig_Ancient_Communication_Actions);
	index[0] = 0;
	gg_trg_Learn_Power_of_Ancestors[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Power_of_Ancestors, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Learn_Power_of_Ancestors, Condition(Trig_Learn_Power_of_Ancestors_Conditions));
	TriggerAddAction(gg_trg_Learn_Power_of_Ancestors, Trig_Learn_Power_of_Ancestors_Actions);
	index[0] = 0;
	gg_trg_Switch_Power_of_Ancestors[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Switch_Power_of_Ancestors, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Switch_Power_of_Ancestors, Condition(Trig_Switch_Power_of_Ancestors_Conditions));
	TriggerAddAction(gg_trg_Switch_Power_of_Ancestors, Trig_Switch_Power_of_Ancestors_Actions);
	index[0] = 0;
	gg_trg_Earth_Split[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Earth_Split, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Earth_Split, Condition(Trig_Earth_Split_Conditions));
	TriggerAddAction(gg_trg_Earth_Split, Trig_Earth_Split_Actions);
	index[0] = 0;
	gg_trg_Ancient_Help[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Ancient_Help, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Ancient_Help, Condition(Trig_Ancient_Help_Conditions));
	TriggerAddAction(gg_trg_Ancient_Help, Trig_Ancient_Help_Actions);
	gg_trg_SpiritBreaker_Load[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_SpiritBreaker_Load, Trig_SpiritBreaker_Load_Actions);
	index[0] = 0;
	gg_trg_Dash[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Dash, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Dash, Condition(Trig_Dash_Conditions));
	TriggerAddAction(gg_trg_Dash, Trig_Dash_Actions);
	index[0] = 0;
	gg_trg_Dagger_Throw[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Dagger_Throw, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Dagger_Throw, Condition(Trig_Dagger_Throw_Conditions));
	TriggerAddAction(gg_trg_Dagger_Throw, Trig_Dagger_Throw_Actions);
	index[0] = 0;
	gg_trg_Kara_Justice[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Kara_Justice, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Kara_Justice, Condition(Trig_Kara_Justice_Conditions));
	TriggerAddAction(gg_trg_Kara_Justice, Trig_Kara_Justice_Actions);
	gg_trg_Warden_Load[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Warden_Load, Trig_SpiritBreaker_Load_Actions);
	index[0] = 0;
	gg_trg_Strength_Fist[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Strength_Fist, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Strength_Fist, Condition(Trig_Strength_Fist_Conditions));
	TriggerAddAction(gg_trg_Strength_Fist, Trig_Strength_Fist_Actions);
	index[0] = 0;
	gg_trg_Fighting_Impact[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Fighting_Impact, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Fighting_Impact, Condition(Trig_Fighting_Impact_Conditions));
	TriggerAddAction(gg_trg_Fighting_Impact, Trig_Fighting_Impact_Actions);
	index[0] = 0;
	gg_trg_Learn_Marshal_Armor[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Marshal_Armor, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Learn_Marshal_Armor, Condition(Trig_Learn_Marshal_Armor_Conditions));
	TriggerAddAction(gg_trg_Learn_Marshal_Armor, Trig_Learn_Marshal_Armor_Actions);
	index[0] = 0;
	gg_trg_Illusive_Army[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Illusive_Army, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Illusive_Army, Condition(Trig_Illusive_Army_Conditions));
	TriggerAddAction(gg_trg_Illusive_Army, Trig_Illusive_Army_Actions);
	gg_trg_Marshal_Load[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Marshal_Load, Trig_Marshal_Load_Actions);
	index[0] = 0;
	gg_trg_Chain_Lightning[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Chain_Lightning, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Chain_Lightning, Condition(Trig_Chain_Lightning_Conditions));
	TriggerAddAction(gg_trg_Chain_Lightning, Trig_Chain_Lightning_Actions);
	index[0] = 0;
	gg_trg_Magic_Trap[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Magic_Trap, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Magic_Trap, Condition(Trig_Magic_Trap_Conditions));
	TriggerAddAction(gg_trg_Magic_Trap, Trig_Magic_Trap_Actions);
	index[0] = 0;
	gg_trg_Remove_Lightning_Form_Dead_Units[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Remove_Lightning_Form_Dead_Units, Player(index), EVENT_PLAYER_UNIT_DEATH, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Remove_Lightning_Form_Dead_Units, Condition(Trig_Remove_Lightning_Form_Dead_Units_Conditions));
	TriggerAddAction(gg_trg_Remove_Lightning_Form_Dead_Units, Trig_Remove_Lightning_Form_Dead_Units_Actions);
	index[0] = 0;
	gg_trg_EnergyWave[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_EnergyWave, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_EnergyWave, Condition(Trig_EnergyWave_Conditions));
	TriggerAddAction(gg_trg_EnergyWave, Trig_EnergyWave_Actions);
	index[0] = 0;
	gg_trg_Magic_Epicenter[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Magic_Epicenter, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Magic_Epicenter, Condition(Trig_Magic_Epicenter_Conditions));
	TriggerAddAction(gg_trg_Magic_Epicenter, Trig_Magic_Epicenter_Actions);
	gg_trg_Load_ArchMage[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Load_ArchMage, Trig_Load_ArchMage_Actions);
	index[0] = 0;
	gg_trg_Toxic_Field[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Toxic_Field, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Toxic_Field, Condition(Trig_Toxic_Field_Conditions));
	TriggerAddAction(gg_trg_Toxic_Field, Trig_Toxic_Field_Actions);
	index[0] = 0;
	gg_trg_Poison_Bomb[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Poison_Bomb, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Poison_Bomb, Condition(Trig_Poison_Bomb_Conditions));
	TriggerAddAction(gg_trg_Poison_Bomb, Trig_Poison_Bomb_Actions);
	index[0] = 0;
	gg_trg_Learn_Ogre_Rage[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Ogre_Rage, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Learn_Ogre_Rage, Condition(Trig_Learn_Ogre_Rage_Conditions));
	TriggerAddAction(gg_trg_Learn_Ogre_Rage, Trig_Learn_Ogre_Rage_Actions);
	index[0] = 0;
	gg_trg_Potion_of_Growth[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Potion_of_Growth, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Potion_of_Growth, Condition(Trig_Potion_of_Growth_Conditions));
	TriggerAddAction(gg_trg_Potion_of_Growth, Trig_Potion_of_Growth_Actions);
	gg_trg_Load_Alchemist[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Load_Alchemist, Trig_Load_Alchemist_Actions);
	index[0] = 0;
	gg_trg_Case_Shot[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Case_Shot, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Case_Shot, Condition(Trig_Case_Shot_Conditions));
	TriggerAddAction(gg_trg_Case_Shot, Trig_Case_Shot_Actions);
	index[0] = 0;
	gg_trg_Learn_Fire_Position[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Fire_Position, Player(index), EVENT_PLAYER_HERO_SKILL, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Learn_Fire_Position, Condition(Trig_Learn_Fire_Position_Conditions));
	TriggerAddAction(gg_trg_Learn_Fire_Position, Trig_Learn_Fire_Position_Actions);
	index[0] = 0;
	gg_trg_Dwarf_Cannon[CreateTrigger()] = CreateTrigger();
	while (true) {
		TriggerRegisterPlayerUnitEvent(gg_trg_Dwarf_Cannon, Player(index), EVENT_PLAYER_UNIT_SPELL_EFFECT, null);
		index[index + 1] = index + 1;
		if (index == 16) break;
	}
	TriggerAddCondition(gg_trg_Dwarf_Cannon, Condition(Trig_Dwarf_Cannon_Conditions));
	TriggerAddAction(gg_trg_Dwarf_Cannon, Trig_Dwarf_Cannon_Actions);
	gg_trg_Load_Sniper[CreateTrigger()] = CreateTrigger();
	TriggerAddAction(gg_trg_Load_Sniper, Trig_Load_Sniper_Actions);
	ConditionalTriggerExecute(gg_trg_InitHashtable);
	ConditionalTriggerExecute(gg_trg_InitSystem);
	ConditionalTriggerExecute(gg_trg_Init_kreeps);
	ConditionalTriggerExecute(gg_trg_Drenor_Bull_Load);
}
void config() {
	SetMapName("TRIGSTR_001");
	SetMapDescription("TRIGSTR_003");
	SetPlayers($A);
	SetTeams($A);
	SetGamePlacement(MAP_PLACEMENT_TEAMS_TOGETHER);
	DefineStartLocation(0, 4928., 3840.);
	DefineStartLocation(1, 4928., 3840.);
	DefineStartLocation(2, 4928., 3840.);
	DefineStartLocation(3, 4928., 3840.);
	DefineStartLocation(4, 4928., 3840.);
	DefineStartLocation(5, 4928., 3840.);
	DefineStartLocation(6, 4928., 3840.);
	DefineStartLocation(7, 4928., 3840.);
	DefineStartLocation(8, 4928., 3840.);
	DefineStartLocation(9, 4928., 3840.);
	SetPlayerStartLocation(Player(0), 0);
	ForcePlayerStartLocation(Player(0), 0);
	SetPlayerColor(Player(0), ConvertPlayerColor(0));
	SetPlayerRacePreference(Player(0), RACE_PREF_HUMAN);
	SetPlayerRaceSelectable(Player(0), false);
	SetPlayerController(Player(0), MAP_CONTROL_USER);
	SetPlayerStartLocation(Player(1), 1);
	ForcePlayerStartLocation(Player(1), 1);
	SetPlayerColor(Player(1), ConvertPlayerColor(1));
	SetPlayerRacePreference(Player(1), RACE_PREF_HUMAN);
	SetPlayerRaceSelectable(Player(1), false);
	SetPlayerController(Player(1), MAP_CONTROL_USER);
	SetPlayerStartLocation(Player(2), 2);
	ForcePlayerStartLocation(Player(2), 2);
	SetPlayerColor(Player(2), ConvertPlayerColor(2));
	SetPlayerRacePreference(Player(2), RACE_PREF_HUMAN);
	SetPlayerRaceSelectable(Player(2), false);
	SetPlayerController(Player(2), MAP_CONTROL_USER);
	SetPlayerStartLocation(Player(3), 3);
	ForcePlayerStartLocation(Player(3), 3);
	SetPlayerColor(Player(3), ConvertPlayerColor(3));
	SetPlayerRacePreference(Player(3), RACE_PREF_HUMAN);
	SetPlayerRaceSelectable(Player(3), false);
	SetPlayerController(Player(3), MAP_CONTROL_USER);
	SetPlayerStartLocation(Player(4), 4);
	ForcePlayerStartLocation(Player(4), 4);
	SetPlayerColor(Player(4), ConvertPlayerColor(4));
	SetPlayerRacePreference(Player(4), RACE_PREF_HUMAN);
	SetPlayerRaceSelectable(Player(4), false);
	SetPlayerController(Player(4), MAP_CONTROL_USER);
	SetPlayerStartLocation(Player(5), 5);
	ForcePlayerStartLocation(Player(5), 5);
	SetPlayerColor(Player(5), ConvertPlayerColor(5));
	SetPlayerRacePreference(Player(5), RACE_PREF_HUMAN);
	SetPlayerRaceSelectable(Player(5), false);
	SetPlayerController(Player(5), MAP_CONTROL_USER);
	SetPlayerStartLocation(Player(6), 6);
	ForcePlayerStartLocation(Player(6), 6);
	SetPlayerColor(Player(6), ConvertPlayerColor(6));
	SetPlayerRacePreference(Player(6), RACE_PREF_HUMAN);
	SetPlayerRaceSelectable(Player(6), false);
	SetPlayerController(Player(6), MAP_CONTROL_USER);
	SetPlayerStartLocation(Player(7), 7);
	ForcePlayerStartLocation(Player(7), 7);
	SetPlayerColor(Player(7), ConvertPlayerColor(7));
	SetPlayerRacePreference(Player(7), RACE_PREF_HUMAN);
	SetPlayerRaceSelectable(Player(7), false);
	SetPlayerController(Player(7), MAP_CONTROL_USER);
	SetPlayerStartLocation(Player(8), 8);
	ForcePlayerStartLocation(Player(8), 8);
	SetPlayerColor(Player(8), ConvertPlayerColor(8));
	SetPlayerRacePreference(Player(8), RACE_PREF_HUMAN);
	SetPlayerRaceSelectable(Player(8), false);
	SetPlayerController(Player(8), MAP_CONTROL_USER);
	SetPlayerStartLocation(Player($B), 9);
	ForcePlayerStartLocation(Player($B), 9);
	SetPlayerColor(Player($B), ConvertPlayerColor($B));
	SetPlayerRacePreference(Player($B), RACE_PREF_UNDEAD);
	SetPlayerRaceSelectable(Player($B), false);
	SetPlayerController(Player($B), MAP_CONTROL_COMPUTER);
	InitCustomTeams();
	SetStartLocPrioCount(0, 8);
	SetStartLocPrio(0, 0, 1, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(0, 1, 2, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(0, 2, 3, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(0, 3, 4, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(0, 4, 5, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(0, 5, 6, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(0, 6, 7, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(0, 7, 8, MAP_LOC_PRIO_HIGH);
	SetStartLocPrioCount(1, 8);
	SetStartLocPrio(1, 0, 0, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(1, 1, 2, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(1, 2, 3, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(1, 3, 4, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(1, 4, 5, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(1, 5, 6, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(1, 6, 7, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(1, 7, 8, MAP_LOC_PRIO_HIGH);
	SetStartLocPrioCount(2, 8);
	SetStartLocPrio(2, 0, 0, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(2, 1, 1, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(2, 2, 3, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(2, 3, 4, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(2, 4, 5, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(2, 5, 6, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(2, 6, 7, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(2, 7, 8, MAP_LOC_PRIO_HIGH);
	SetStartLocPrioCount(3, 8);
	SetStartLocPrio(3, 0, 0, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(3, 1, 1, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(3, 2, 2, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(3, 3, 4, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(3, 4, 5, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(3, 5, 6, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(3, 6, 7, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(3, 7, 8, MAP_LOC_PRIO_HIGH);
	SetStartLocPrioCount(4, 8);
	SetStartLocPrio(4, 0, 0, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(4, 1, 1, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(4, 2, 2, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(4, 3, 3, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(4, 4, 5, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(4, 5, 6, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(4, 6, 7, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(4, 7, 8, MAP_LOC_PRIO_HIGH);
	SetStartLocPrioCount(5, 8);
	SetStartLocPrio(5, 0, 0, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(5, 1, 1, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(5, 2, 2, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(5, 3, 3, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(5, 4, 4, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(5, 5, 6, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(5, 6, 7, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(5, 7, 8, MAP_LOC_PRIO_HIGH);
	SetStartLocPrioCount(6, 8);
	SetStartLocPrio(6, 0, 0, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(6, 1, 1, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(6, 2, 2, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(6, 3, 3, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(6, 4, 4, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(6, 5, 5, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(6, 6, 7, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(6, 7, 8, MAP_LOC_PRIO_HIGH);
	SetStartLocPrioCount(7, 8);
	SetStartLocPrio(7, 0, 0, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(7, 1, 1, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(7, 2, 2, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(7, 3, 3, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(7, 4, 4, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(7, 5, 5, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(7, 6, 6, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(7, 7, 8, MAP_LOC_PRIO_HIGH);
	SetStartLocPrioCount(8, 8);
	SetStartLocPrio(8, 0, 0, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(8, 1, 1, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(8, 2, 2, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(8, 3, 3, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(8, 4, 4, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(8, 5, 5, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(8, 6, 6, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(8, 7, 7, MAP_LOC_PRIO_HIGH);
	SetStartLocPrioCount(9, 3);
	SetStartLocPrio(9, 0, 0, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(9, 1, 1, MAP_LOC_PRIO_HIGH);
	SetStartLocPrio(9, 2, 2, MAP_LOC_PRIO_HIGH);
}