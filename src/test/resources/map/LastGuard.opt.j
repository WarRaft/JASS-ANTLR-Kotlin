globals
	force udg_IGRAET_1 = null
	integer udg_PreD_Dop_1 = 0
	integer udg_PreD_Osn_1 = 0
	integer udg_BaZa_PrEd_1 = 0
	texttag udg_TEXT_1 = null
	unit array udg_player_hero_1
	multiboard udg_Multiboard_1 = null
	unit udg_KripsLill_1 = null
	integer udg_Time_second_1 = 0
	integer udg_Time_minuts_1 = 0
	integer udg_Time_hours_1 = 0
	force udg_Liver_1 = null
	integer udg_SkillLevel_1 = 0
	weathereffect array udg_Les_Luna_1
	unit array udg_Dammy_Portal_1
	timer udg_Timer_Nomera_Volni_1 = null
	integer array udg_Wave_Unit_tape_1
	integer udg_number_of_otriad_mobs_1 = 0
	integer udg_Nomer_samoi_volni_1 = 0
	boolean array udg_Igraet_Igrok_1
	force array udg_Duel_Igrok_1
	unit array udg_herounit_1
	integer udg_Hero_Duel_Raund_1 = 0
	unit array udg_hero_Duel_Unit_1
	unit udg_Shield_Marshal_Cater_1 = null
	integer udg_DrenorBugaiRage_1 = 0
	unit udg_Gnev_Caster_1 = null
	unit udg_GrorTar_1 = null
	unit array udg_Weave_1
	group udg_Weave_group_1 = null
	location array udg_Weave_point_1
	integer array udg_Items_massive_1
	integer udg_Integer_item_1 = 0
	timer udg_Timer_Check_Forkreep_system_1 = null
	integer udg_Integer_kreeps_system_check_1 = 0
	hashtable udg_hash_1 = null
	integer array udg_Heroes_Types_1
	integer udg_Random_Hero_Count_1 = 0
	integer udg_Total_Heroes_Count_1 = 0
	integer array udg_Heroes_Random_Data_1
	integer udg_Hero_Random_Local_1 = 0
	force udg_Gruppa_Igrokov_Vibor_Heroev_1 = null
	real udg_RealAngelPovorotLocalEitiArena_1 = 0
	integer udg_IntegerEitiAbilityPassiveSkill_1 = 0
	unit udg_EEETTTIII_1 = null
	timer udg_Timer_Eiti_Areni_1 = null
	group udg_Gruppa_HeroUnitov_Geroev_1 = null
	integer array udg_Integer_Kolvo_Giznei_EtitArena_1
	group udg_OtriadPortalUnitsEitiArena_1 = null
	weathereffect udg_BossFightWeather_1 = null
	unit udg_Unit_FilterMostNearUnit_1 = null
	group udg_DamageGroup_1 = null
	integer array udg_spirits_of_water_1
	unit udg_preloader_1 = null
	integer udg_Integer_spirits_of_water_1 = 0
	leaderboard udg_HandleBoard_1 = null
	timer udg_DrenorBugaiRageTimer_1 = null
	timer udg_GrogTarRageTimer_1 = null
	group udg_GroupRandomUnitFromGroup_1 = null
	dialog udg_Dialog_Select_Difficult_1 = null
	button array udg_Dialog_Button_Select_Difficult_1
	integer udg_Difficult_Level_1 = 0
	timer udg_TimerMobsAttackBase_1 = null
	force udg_Players_Enemy_Group_1 = null
	integer udg_count_1 = 0
	timer udg_Timer_Dialog_Select_1 = null
	sound udg_SimError_1 = null
	string udg_strCounter_1 = ""
	string array udg_ColorString_1
	unit udg_selectedunittest_1 = null
	integer udg_Reks_1 = 0
	real array udg_Temp_Real_1
	player array udg_Temp_Player_1
	integer udg_Peski_1 = 0
	unit udg_Temp_Unit_1 = null
	integer array udg_Temp_Integer_1
	integer udg_bb_1 = 0
	force udg_Players_Ally_Group_1 = null
	integer udg_CountPlayers_1 = 0
	integer array udg_PlayerNumberInMB_1
	multiboard udg_MultiBoard_1 = null
	string array udg_MutliBoardHeroIcon_1
	integer udg_CountPlayersInTeam1_1 = 0
	force udg_PlayerGroup_1 = null
	integer array udg_MultiBoard_Player_Kills_Count_1
	integer array udg_MultiBoard_Player_Deaths_Count_1
	integer array udg_MultiBoard_Player_Assist_Count_1
	integer array udg_Hero_Respawn_Time_1
	string array udg_Potion_Effect_1
	string array udg_Potion_Type_1
	integer array udg_Potion_Heal_Amount_1
	real array udg_Potion_Size_1
	weathereffect udg_BossFightWeather2_1 = null
	timerdialog udg_TimerDialog_Nomera_Volni_1 = null
	integer udg_Integer_Item_Recipe_Level_1 = 0
	boolean udg_Show_Item_Link_Text_1 = false
	timer udg_ttt_1 = null
	unit array udg_ShopSelectedForPlayer_1
	effect array udg_ShopEffectSelectedForPlayer_1
	weathereffect array udg_Weather_1
	unit array udg_DummyHeroPick_1
	boolean udg_IsMinimapPingGuardsAttacked_1 = false
	integer udg_CountGuardsExorcist_1 = 0
	boolean udg_IsGameEnd_1 = false
	group udg_PortalCastersMagi_1 = null
	fogmodifier array udg_BaseVisionFogModifier_1
	timer udg_InitMapTimer_1 = null
	timer array udg_HintsTimerPlayer_1
	force udg_Drenor_Bull_Hint_Player_Group_1 = null
	string array udg_Hero_Player_Color_String_1
	sound array udg_Game_Sound_1
	real array udg_Player_Taken_Damage_Current_1
	real array udg_Player_Taken_Damage_All_1
	real array udg_Player_Received_Damage_Current_1
	boolean array udg_System_ShowAbil_And_Items_Hint_1
	timer udg_TimerShowAndFlushAllPlayerDmg_1 = null
	boolean array udg_Boolean_Player_Fast_Purchase_1
	location array udg_Temp_Location_1
	boolean udg_Boolean_Is_Rain_1 = false
	timer udg_Timer_Lightning_Strike_Weather_1 = null
	integer array udg_Integer_Creep_On_Line_Spawn_1
	group array udg_Group_Pickeds_Refrence_Panel_1
	real udg_Time_Before_Creeps_Spawn_1 = 0
	integer udg_Count_Players_Fast_Wave_Start_1 = 0
	boolean array udg_Is_Player_Fast_Wave_Start_1
	boolean udg_Is_Fast_Wave_Start_On_Off_1 = false
	integer array udg_Count_Item_Tips_Message_1
	unit array udg_Rune_On_Base_Dummy_1
	real array udg_Rune_On_Base_Dummy_X_1
	real array udg_Rune_On_Base_Dummy_Y_1
	effect array udg_Rune_On_Base_Effect_1
	string array udg_Rune_On_Base_Effect_String_1
	timer udg_Timer_Hint_About_Fast_Start_1 = null
	integer array udg_Bonus_Gold_ChestGold_1
	integer udg_Wave_Progress_for_MultiBoard_1 = 0
	boolean udg_Is_Eiti_Arena_Already_Go_1 = false
	boolean udg_Fire_Boss_Turn_On_1 = false
	group array udg_Temp_Group_1
	location udg_TempPoint_1 = null
	boolean array udg_Is_Rune_On_Position_1
	integer array udg_Rune_Position_X_1
	integer array udg_Rune_Position_Y_1
	timer udg_Timer_Arrow_Pointer_Guide_1 = null
	integer array udg_Arrow_Pointer_Guide_X_1
	integer array udg_Arrow_Pointer_Guide_Y_1
	integer array udg_Arrow_Pointer_Guide_Angle_1
	unit array udg_Arrow_Pointer_Guide_Unit_1
	effect array udg_Arrow_Pointer_Guide_Effect_1
	integer udg_Arrow_Pointer_Guide_Count_1 = 0
	integer array udg_EnergyWallX_1
	integer array udg_EnergyWallY_1
	integer array udg_EnergyWallAngle_1
	integer array udg_EnergyWallCount_1
	unit array udg_EnergyWallUnit_1
	destructable array udg_EnergyWallBlock_1
	unit array udg_BeornDenHouse_1
	unit udg_BeornBoss_1 = null
	integer udg_Ishod_S_Beornami_1 = 0
	boolean udg_BeornBossFightEnd_1 = false
	boolean udg_IsBeronsFightWin_1 = false
	unit udg_Marshal_1 = null
	group udg_gdamageallnew_1 = null
	unit udg_Hero_Randomed_1 = null
	boolean array udg_Is_Player_Got_Randomed_1
	rect gg_rct_Miners_Arena_1 = null
	rect gg_rct_Duel_left_1 = null
	rect gg_rct_Portal_1_down_left_Start_1 = null
	rect gg_rct_Base_1 = null
	rect gg_rct_Portal_baza_1 = null
	rect gg_rct_Les_2_1 = null
	rect gg_rct_Les_1_1 = null
	rect gg_rct_Pogoda_v_bolote_1 = null
	rect gg_rct_cast_magi_1 = null
	rect gg_rct_Event_Bonus_Etei_arena_1_1 = null
	rect gg_rct_Portal_3_up_Start_1 = null
	rect gg_rct_Portal_2_down_right_Start_1 = null
	rect gg_rct_Oblstb_Tavern_1 = null
	rect gg_rct_Hero_Arena_1 = null
	rect gg_rct_les_3_1 = null
	rect gg_rct_Respawn_Heroes_1 = null
	rect gg_rct_Oblast_Teleporta_Arena_Bot_1 = null
	rect gg_rct_Oblast_Teleporta_Arena_Top_1 = null
	rect gg_rct_6_1 = null
	rect gg_rct_BaseDopVision_1 = null
	rect gg_rct_Center_Vision_1 = null
	rect gg_rct_Portal_Attack_Dummy_Left_1 = null
	rect gg_rct_Portal_Attack_Dummy_Right_1 = null
	rect gg_rct_Portal_Attack_Dummy_Top_1 = null
	rect gg_rct_Duel_right_1 = null
	rect gg_rct_PlayableAreaVisionDeBag_1 = null
	rect gg_rct_MinusVision1_1 = null
	rect gg_rct_Les1_Dop1_1 = null
	rect gg_rct_Les1_Dop2_1 = null
	rect gg_rct_Beorn_Boss_Area_1 = null
	rect gg_rct_Beorn_Boss_Area2_1 = null
	camerasetup gg_cam_Kamera_na_taverni_1 = null
	camerasetup gg_cam_Kamera_glavnoi_bazi_1 = null
	camerasetup gg_cam_Camera_Eiti_Arena_1 = null
	camerasetup gg_cam_Camera_Eiti_Arena_Top_Portal_1 = null
	camerasetup gg_cam_Camera_Eiti_Arena_Bot_Portal_1 = null
	camerasetup gg_cam_Camera_miners_arena_1 = null
	camerasetup gg_cam_Camera_BossFightStart_1 = null
	camerasetup gg_cam_Camera_Duel_Arena_1 = null
	camerasetup gg_cam_Kamera_cast_magi_1 = null
	camerasetup gg_cam_Camera_Beorn_Den1_1 = null
	camerasetup gg_cam_Camera_Beorn_Den2_1 = null
	camerasetup gg_cam_Camera_Beorn_Den3_1 = null
	camerasetup gg_cam_Camera_Beorn_Den4_1 = null
	camerasetup gg_cam_Camera_Beorn_Den5_1 = null
	camerasetup gg_cam_Camera_Beorn_Den6_1 = null
	sound gg_snd_HeroFirelordYesAttack1_1 = null
	sound gg_snd_HeroFirelordYesAttack2_1 = null
	sound gg_snd_HeroFirelordYesAttack3_1 = null
	sound gg_snd_HeroFirelordWarcry1_1 = null
	sound gg_snd_HeroLichReady1_1 = null
	sound gg_snd_HeroLichYesAttack1_1 = null
	sound gg_snd_HeroLichYesAttack2_1 = null
	sound gg_snd_HeroLichYesAttack3_1 = null
	sound gg_snd_DeathSound1_1 = null
	sound gg_snd_KnightNoGold1_1 = null
	sound gg_snd_KnightInventoryFull1_1 = null
	sound gg_snd_HeroStep1_1 = null
	sound gg_snd_HeroStep2_1 = null
	sound gg_snd_HeroStep3_1 = null
	sound gg_snd_HeroStep4_1 = null
	sound gg_snd_HuntressYesAttack4_1 = null
	sound gg_snd_WardenAttackEffort1_1 = null
	sound gg_snd_AlchemistChemicalBurst1_1 = null
	sound gg_snd_AlchemistMorph1_1 = null
	sound gg_snd_HeroAlchemistYesAttack1_1 = null
	trigger gg_trg_Animation_test_____________________u_1 = null
	trigger gg_trg_Players_Start_Script_1 = null
	trigger gg_trg_InitMap_1 = null
	trigger gg_trg_InitMapStage2_1 = null
	trigger gg_trg_System_Spells_Load_1 = null
	trigger gg_trg_Items_Preload_1 = null
	trigger gg_trg_Igrok_Massiv_Save_1 = null
	trigger gg_trg_Load_Vsiakoe_1 = null
	trigger gg_trg_Igrok_Massiv_Liver_1 = null
	trigger gg_trg_Messager_1 = null
	trigger gg_trg_Create_TExttags_about_Shops_1 = null
	trigger gg_trg_InitHashtable_1 = null
	trigger gg_trg_Save_Sounds_1 = null
	trigger gg_trg_HandleCounter_1 = null
	trigger gg_trg_Set_Chlenix_1 = null
	trigger gg_trg_Set_Energy_Walls_1 = null
	trigger gg_trg_Test_System_Anvar_1 = null
	trigger gg_trg_test_eiti_arena_1 = null
	trigger gg_trg_Nachalo_Eiti_aren_1 = null
	trigger gg_trg_HeroDeadonEitiArena_1 = null
	trigger gg_trg__PortalCheckTop_1 = null
	trigger gg_trg__PortalCheckBot_1 = null
	trigger gg_trg_Eiti_Dead_1 = null
	trigger gg_trg_LinkItemsInit_1 = null
	trigger gg_trg_ItemPickedUp_1 = null
	trigger gg_trg_ChargesConnecting_1 = null
	trigger gg_trg_Remove_Dammi_Items_1 = null
	trigger gg_trg_Save_Items_Cost_1 = null
	trigger gg_trg_Ice_Boss_1 = null
	trigger gg_trg_Ice_Wall_1 = null
	trigger gg_trg_Ice_Storm_1 = null
	trigger gg_trg_Ice_Rain_1 = null
	trigger gg_trg_Cold_Punishment_1 = null
	trigger gg_trg_Ice_Restoration_1 = null
	trigger gg_trg_Turn_on_Fire_Bossfight_1 = null
	trigger gg_trg_test_fire_boss_1 = null
	trigger gg_trg_BossStart_1 = null
	trigger gg_trg_FlameSpells_1 = null
	trigger gg_trg_Fire_Circle_1 = null
	trigger gg_trg_Fire_Meteor_1 = null
	trigger gg_trg_Upgrade_Summons_1 = null
	trigger gg_trg_____________________________________007_1 = null
	trigger gg_trg_UseBeornSpells_1 = null
	trigger gg_trg_Start_Beorn_Den_1 = null
	trigger gg_trg_Beorn_Push_1 = null
	trigger gg_trg_Beorn_Stomp_1 = null
	trigger gg_trg_HeroUnitGameSave_1 = null
	trigger gg_trg_INIT_1 = null
	trigger gg_trg_Pick_Hero_Upgrade_1 = null
	trigger gg_trg_Pick_Hero_1 = null
	trigger gg_trg_Hero_Dead_1 = null
	trigger gg_trg_asd_1 = null
	trigger gg_trg_Start_Duel_1 = null
	trigger gg_trg_Hero_Death_On_Duel_1 = null
	trigger gg_trg_Test_plus_wwave_number_1 = null
	trigger gg_trg_Timer_Check_1 = null
	trigger gg_trg_go_mochiytb_portal_1 = null
	trigger gg_trg_Start_game_1 = null
	trigger gg_trg_StartWave_1 = null
	trigger gg_trg_MobsAttackBase_1 = null
	trigger gg_trg_TeleportStuckedCreeps_1 = null
	trigger gg_trg_vhodit_v_zony_1 = null
	trigger gg_trg_Add_Gold_System_Receiving_Gold_for_Creeps_1 = null
	trigger gg_trg_Init_System_Receiving_Gold_for_Creeps_1 = null
	trigger gg_trg_Init_System_Receiving_Experience_for_Creeps_1 = null
	trigger gg_trg_Add_Experience_System_Receiving_Experience_for_Creeps_1 = null
	trigger gg_trg_Test_Potion_System_1 = null
	trigger gg_trg_Init_Potion_System_1 = null
	trigger gg_trg_Mob_Dead_Create_Potion_1 = null
	trigger gg_trg_Check_Potion_Picked_Up_1 = null
	trigger gg_trg_InitSystem_1 = null
	trigger gg_trg_EnterUnit_1 = null
	trigger gg_trg_AddDamage_1 = null
	trigger gg_trg_TimeTalisman_1 = null
	trigger gg_trg_Take_Paladin_Armor_1 = null
	trigger gg_trg_Take_Archimagus_Staff_1 = null
	trigger gg_trg_Lost_Charged_Staff_of_Lightning_1 = null
	trigger gg_trg_Blood_Bow_1 = null
	trigger gg_trg_Balance_Ring_1 = null
	trigger gg_trg_Armageddon_Staff_1 = null
	trigger gg_trg_Sargeras_Crown_1 = null
	trigger gg_trg_Lost_Sargeras_Crown_1 = null
	trigger gg_trg_Take_Sargeras_Crown_1 = null
	trigger gg_trg_Lost_Archimagus_Armor_1 = null
	trigger gg_trg_Take_Archimagus_Armor_1 = null
	trigger gg_trg_Sorcerers_Talisman_Cast_1 = null
	trigger gg_trg_Sorcerers_Talisman_1 = null
	trigger gg_trg_Sorcerers_Talisman_Dead_Unit_1 = null
	trigger gg_trg_Orc_Banner_1 = null
	trigger gg_trg_Devil_Axe_1 = null
	trigger gg_trg_Devil_Axe_Kill_Unit_1 = null
	trigger gg_trg_Tokugawas_Katan_Kill_Unit_1 = null
	trigger gg_trg_Tokugawas_Katan_1 = null
	trigger gg_trg_Kings_Armor_1 = null
	trigger gg_trg_Steel_Bib_1 = null
	trigger gg_trg_Archimagus_Staff_1 = null
	trigger gg_trg_Isidors_Scepter_1 = null
	trigger gg_trg_Detached_Shield_Use_1 = null
	trigger gg_trg_Cuirass_of_Invulnerable_Use2_1 = null
	trigger gg_trg_Cuirass_of_Invulnerable_Use_1 = null
	trigger gg_trg_Detached_Shield_and_Cuirass_of_Invulnerable_Issue_Order_1 = null
	trigger gg_trg_Lost_Cuirass_of_Invulnerable_1 = null
	trigger gg_trg_Take_Cuirass_of_Invulnerable_1 = null
	trigger gg_trg_Fire_Staff_1 = null
	trigger gg_trg_Demon_Axe_1 = null
	trigger gg_trg_Demon_Axe_Kill_Unit_1 = null
	trigger gg_trg_Boots_Rescue_1 = null
	trigger gg_trg_Astral_Staff_1 = null
	trigger gg_trg_Healer_Staff_1 = null
	trigger gg_trg_Magic_Amulet_1 = null
	trigger gg_trg_Blood_Dagger_1 = null
	trigger gg_trg_Agility_Blade_1 = null
	trigger gg_trg_Bone_Staff_Set_Summon_Ability_Level_1 = null
	trigger gg_trg_Novice_Amulet_1 = null
	trigger gg_trg_Glove_of_Andromat_1 = null
	trigger gg_trg_Glove_of_Midas_1 = null
	trigger gg_trg_Ring_illusionist_1 = null
	trigger gg_trg_Armor_Skill_1 = null
	trigger gg_trg_Steel_gauntlets_1 = null
	trigger gg_trg_Dagger_Cruelty_1 = null
	trigger gg_trg_Heroes_more_attacked_priority_when_guards_1 = null
	trigger gg_trg_Player_Fast_Purchase_System_1 = null
	trigger gg_trg_Show_hint_abount_hints_1 = null
	trigger gg_trg_Show_Hint_Abount_Items_1 = null
	trigger gg_trg_Hint_About_Random_1 = null
	trigger gg_trg_Show_hint_abount_reference_panel_1 = null
	trigger gg_trg_Show_Ability_Learn_1 = null
	trigger gg_trg_System_Personal_Items_Buy_Item_1 = null
	trigger gg_trg_System_Personal_Items_Pick_Up_Item_1 = null
	trigger gg_trg_no_attack_1 = null
	trigger gg_trg_Select_Refrence_Panel_1 = null
	trigger gg_trg_ShopAnimation_1 = null
	trigger gg_trg_ShopStopAnimation_1 = null
	trigger gg_trg_RedMarkToUnit_1 = null
	trigger gg_trg_UnSelectedDummyRedMark_1 = null
	trigger gg_trg_SpecEffect_on_Casters_1 = null
	trigger gg_trg_PortalSpecEffects_1 = null
	trigger gg_trg_Gates_Start_Animation_1 = null
	trigger gg_trg_PlayerEnterGameCommand_1 = null
	trigger gg_trg_PlayerUseSpellGameCommand_1 = null
	trigger gg_trg_GuardsExorcistDead_1 = null
	trigger gg_trg_PauseUnitWhenDefeat_1 = null
	trigger gg_trg_PauseUnitWhenWin_1 = null
	trigger gg_trg_GameEndWin_1 = null
	trigger gg_trg_Respawn_trees_Init_1 = null
	trigger gg_trg_Respawn_trees_1 = null
	trigger gg_trg_Day_Weather_1 = null
	trigger gg_trg_Sky_Morning_1 = null
	trigger gg_trg_Sky_Day_1 = null
	trigger gg_trg_Night_Weather_1 = null
	trigger gg_trg_Sky_Evening_1 = null
	trigger gg_trg_Sky_Night_1 = null
	trigger gg_trg_Lightnings_Weather_Effect_Rainy_1 = null
	trigger gg_trg_Periodic_Rune_Creation_1 = null
	trigger gg_trg_Rune_PickedUp_1 = null
	trigger gg_trg_Initialization_MultiBoard_1 = null
	trigger gg_trg_Hero_MultiBoard_LvlUp_1 = null
	trigger gg_trg_Time_Check_and_Player_Gold_for_MultiBoard_1 = null
	trigger gg_trg_Reincarnation_Skeletons_1 = null
	trigger gg_trg_BossSkeletRaise_1 = null
	trigger gg_trg_BossSkeletSkillActiv_1 = null
	trigger gg_trg_Fire_Arrow_1 = null
	trigger gg_trg_Use_UnholyFrenzy_and_Fire_Arrow_1 = null
	trigger gg_trg_Use_UnholyFrenzy_and_Fire_Arrow_____________________u_1 = null
	trigger gg_trg_Create_Tombstone_1 = null
	trigger gg_trg_ZombieExploadDeath_1 = null
	trigger gg_trg_Damned_Soul_1 = null
	trigger gg_trg_Use_PowerofHorror_and_Curse_and_Slam_and_Dumned_Soul_1 = null
	trigger gg_trg_Throw_Meat_1 = null
	trigger gg_trg_Earth_Clap_1 = null
	trigger gg_trg_Use_PowerofHorror_and_Curse_and_Slam_____________________u_1 = null
	trigger gg_trg_Ghoul_Jump_1 = null
	trigger gg_trg_BurrowStrike_1 = null
	trigger gg_trg_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_1 = null
	trigger gg_trg_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul______________________u_1 = null
	trigger gg_trg_BeetleCorpseBurrowCast_1 = null
	trigger gg_trg_BeetleCorpseBurrow_1 = null
	trigger gg_trg_Cocoon_Creation_1 = null
	trigger gg_trg_Poisonous_Spittle_Cast_1 = null
	trigger gg_trg_Holes_Of_Grave_Diggers_Debug_Kill_1 = null
	trigger gg_trg_Holes_Of_Grave_Diggers_Cast_1 = null
	trigger gg_trg_Nerub_Spider_1 = null
	trigger gg_trg_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_1 = null
	trigger gg_trg_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Old_1 = null
	trigger gg_trg_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDa_____________________u_1 = null
	trigger gg_trg_Damned_Ents_Reincarnation_1 = null
	trigger gg_trg_Rage_of_Decay_1 = null
	trigger gg_trg_Use_ThrowStone_and_TurnIntoEnt_1 = null
	trigger gg_trg_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_1 = null
	trigger gg_trg_Troll_Dead_Remove_Bugs_1 = null
	trigger gg_trg_Boss_Troll_Entangle_Throw_1 = null
	trigger gg_trg_Use_Berserk_and_BerserkBoss_1 = null
	trigger gg_trg_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_1 = null
	trigger gg_trg_Aspect_of_Magic_Protection_1 = null
	trigger gg_trg_Remove_Effects_From_Bosses_1 = null
	trigger gg_trg_Metka_Dreneev_1 = null
	trigger gg_trg_Fast_Attack_1 = null
	trigger gg_trg_Bash_Attack_1 = null
	trigger gg_trg_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_1 = null
	trigger gg_trg_Magic_Fire_1 = null
	trigger gg_trg_Blink_Strike_1 = null
	trigger gg_trg_Damned_Skull_1 = null
	trigger gg_trg_Weakness_of_Emptiness_1 = null
	trigger gg_trg_Essence_of_Emptiness_1 = null
	trigger gg_trg_Piercing_Strike_1 = null
	trigger gg_trg_Victim_Search_1 = null
	trigger gg_trg_Black_Hole_1 = null
	trigger gg_trg_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_1 = null
	trigger gg_trg_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_1 = null
	trigger gg_trg_Weakness_1 = null
	trigger gg_trg_Pain_Sphere_1 = null
	trigger gg_trg_Astral_Dispersal_1 = null
	trigger gg_trg_Infernal_Ram_1 = null
	trigger gg_trg_Fiery_Blow_1 = null
	trigger gg_trg_Bloody_Jump_1 = null
	trigger gg_trg_Blood_Absorption_1 = null
	trigger gg_trg_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_1 = null
	trigger gg_trg_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_1 = null
	trigger gg_trg_Hatred_of_fire_1 = null
	trigger gg_trg_set_fire_1 = null
	trigger gg_trg_set_fire_2_1 = null
	trigger gg_trg_the_creation_of_the_image_1 = null
	trigger gg_trg_fiery_explosions_1 = null
	trigger gg_trg_Breathoffire_1 = null
	trigger gg_trg_Wall_of_Fire_1 = null
	trigger gg_trg_Fire_Explosions_1 = null
	trigger gg_trg_BossStomp_1 = null
	trigger gg_trg_Mark_of_Fire_1 = null
	trigger gg_trg_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_1 = null
	trigger gg_trg_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_1 = null
	trigger gg_trg_Power_of_Skeletons_1 = null
	trigger gg_trg_Water_Elemental_Load_1 = null
	trigger gg_trg_Init_kreeps_1 = null
	trigger gg_trg_spirits_of_water_dead_1 = null
	trigger gg_trg_Skill_Gertva_1 = null
	trigger gg_trg_Opening_Streams_1 = null
	trigger gg_trg_Water_Explosion_1 = null
	trigger gg_trg_Tsunami_1 = null
	trigger gg_trg_Guardsman_Load_1 = null
	trigger gg_trg_Protective_Stand_Switch_1 = null
	trigger gg_trg_Learn_Fighting_Skills_1 = null
	trigger gg_trg_Ram_Board_1 = null
	trigger gg_trg_Warcry_1 = null
	trigger gg_trg_____________________________________001_1 = null
	trigger gg_trg_____________________________________001______________________2_1 = null
	trigger gg_trg_Drenor_Bull_Show_Rage_____________________u_1 = null
	trigger gg_trg_Drenor_Bull_Load_1 = null
	trigger gg_trg_Drenor_Bull_Show_Hint_1 = null
	trigger gg_trg_Drenor_Bull_Show_Rage_1 = null
	trigger gg_trg_Axe_Throw_1 = null
	trigger gg_trg_Violent_Roar_1 = null
	trigger gg_trg_upgrade_Berserk_1 = null
	trigger gg_trg_Learn_Spell_Rage_1 = null
	trigger gg_trg_GrogTarDead_1 = null
	trigger gg_trg_attack_hero_Rage_1 = null
	trigger gg_trg_kill_hero_Rage_1 = null
	trigger gg_trg_Sniatie_Rage_1 = null
	trigger gg_trg_Timer_Rage_1 = null
	trigger gg_trg_Illusionist_Load_1 = null
	trigger gg_trg_Reflection_1 = null
	trigger gg_trg_Illusory_Attack_1 = null
	trigger gg_trg_Summon_Illusions_with_Reflection_1 = null
	trigger gg_trg_Illusions_with_Phantoms_Dead_1 = null
	trigger gg_trg_BladeMaster_Load_1 = null
	trigger gg_trg_Dissection_1 = null
	trigger gg_trg_Whirlwind_1 = null
	trigger gg_trg_Imboweling_1 = null
	trigger gg_trg_Master_of_Lightnings_Load_1 = null
	trigger gg_trg_Thundercloud_1 = null
	trigger gg_trg_Power_of_Lightnings_1 = null
	trigger gg_trg_Electric_Field_1 = null
	trigger gg_trg_Storm_1 = null
	trigger gg_trg_Respawnlol_1 = null
	trigger gg_trg_Ranger_Load_1 = null
	trigger gg_trg_MultiShotSwitch_1 = null
	trigger gg_trg_Learn_Release_of_Arrows_1 = null
	trigger gg_trg_Release_of_Arrows_1 = null
	trigger gg_trg_Dexterity_of_the_Ranger_1 = null
	trigger gg_trg_Healer_Load_1 = null
	trigger gg_trg_Good_Healing_1 = null
	trigger gg_trg_Spiritual_Communication_1 = null
	trigger gg_trg_Curing_Light_1 = null
	trigger gg_trg_Guardian_Angel_1 = null
	trigger gg_trg_Paladin_Load_1 = null
	trigger gg_trg_Spiral_of_Light_1 = null
	trigger gg_trg_Keeper_Seal_1 = null
	trigger gg_trg_Light_Hammer_1 = null
	trigger gg_trg_God_Hand_1 = null
	trigger gg_trg_Stone_Guard_Load_1 = null
	trigger gg_trg_Boulder_Throw_1 = null
	trigger gg_trg_Earth_Shiver_1 = null
	trigger gg_trg_Learn_Stone_Armor_1 = null
	trigger gg_trg_Rock_Strike_1 = null
	trigger gg_trg_Archdruid_Load_1 = null
	trigger gg_trg_Energy_of_Nature_1 = null
	trigger gg_trg_Life_Chain_1 = null
	trigger gg_trg_Ent_Creation_1 = null
	trigger gg_trg_Nature_Wrath_1 = null
	trigger gg_trg_Falling_Star_1 = null
	trigger gg_trg_Moon_Chackram_1 = null
	trigger gg_trg_Moon_Wind_1 = null
	trigger gg_trg_Night_Heart_1 = null
	trigger gg_trg_MoonWarrior_Load_1 = null
	trigger gg_trg_Ancient_Communication_1 = null
	trigger gg_trg_Learn_Power_of_Ancestors_1 = null
	trigger gg_trg_Switch_Power_of_Ancestors_1 = null
	trigger gg_trg_Earth_Split_1 = null
	trigger gg_trg_Ancient_Help_1 = null
	trigger gg_trg_SpiritBreaker_Load_1 = null
	trigger gg_trg_Power_of_Ancestors_Switch_1 = null
	trigger gg_trg_Dash_1 = null
	trigger gg_trg_Dagger_Throw_1 = null
	trigger gg_trg_Kara_Justice_1 = null
	trigger gg_trg_Warden_Load_1 = null
	trigger gg_trg_Strength_Fist_1 = null
	trigger gg_trg_Fighting_Impact_1 = null
	trigger gg_trg_Learn_Marshal_Armor_1 = null
	trigger gg_trg_Illusive_Army_1 = null
	trigger gg_trg_Marshal_Load_1 = null
	trigger gg_trg_Chain_Lightning_1 = null
	trigger gg_trg_Magic_Trap_1 = null
	trigger gg_trg_Remove_Lightning_Form_Dead_Units_1 = null
	trigger gg_trg_EnergyWave_1 = null
	trigger gg_trg_Magic_Epicenter_1 = null
	trigger gg_trg_Load_ArchMage_1 = null
	trigger gg_trg_Toxic_Field_1 = null
	trigger gg_trg_Poison_Bomb_1 = null
	trigger gg_trg_Learn_Ogre_Rage_1 = null
	trigger gg_trg_Potion_of_Growth_1 = null
	trigger gg_trg_Load_Alchemist_1 = null
	trigger gg_trg_Case_Shot_1 = null
	trigger gg_trg_Learn_Fire_Position_1 = null
	trigger gg_trg_Dwarf_Cannon_1 = null
	trigger gg_trg_Load_Sniper_1 = null
	trigger gg_trg_InitSkills_damage_1 = null
	trigger gg_trg_Vhodit_v_zony_damage_1 = null
	trigger gg_trg_Passive_Skill_Storm_bolt_1 = null
	trigger gg_trg_The_power_of_the_rider_1 = null
	trigger gg_trg_Collision_flight_1 = null
	trigger gg_trg_Thunderous_Storm_1 = null
	trigger gg_trg_Hero_Dead______________________4_1 = null
	trigger gg_trg_Hero_Dead______________________3_1 = null
	trigger gg_trg_Hero_Dead______________________2_1 = null
	trigger gg_trg_Hero_Dead_____________________u_1 = null
	unit gg_unit_o003_0028_1 = null
	unit gg_unit_o003_0027_1 = null
	unit gg_unit_n00Y_0102_1 = null
	unit gg_unit_h01K_0100_1 = null
	unit gg_unit_e002_0106_1 = null
	unit gg_unit_e002_0108_1 = null
	unit gg_unit_n00Y_0101_1 = null
	unit gg_unit_h01K_0109_1 = null
endglobals

function InitGlobals takes nothing returns nothing
	local integer i = 0
	set udg_IGRAET_1 = CreateForce()
	set udg_Multiboard_1 = CreateMultiboard()
	set udg_Liver_1 = CreateForce()
	set udg_Timer_Nomera_Volni_1 = CreateTimer()
	set i_0 = 0
	loop
		exitwhen (i_0 > 1)
		set udg_Igraet_Igrok_1[i_0] = false
		set udg_Duel_Igrok_1[i_0] = CreateForce()
		set udg_Heroes_Random_Data_1[i_0] = 0
		set udg_Integer_Kolvo_Giznei_EtitArena_1[i_0] = 0
		set udg_ColorString_1[i_0] = ""
		set udg_Temp_Real_1[i_0] = 0
		set udg_Temp_Integer_1[i_0] = 0
		set udg_PlayerNumberInMB_1[i_0] = 0
		set udg_MutliBoardHeroIcon_1[i_0] = ""
		set udg_MultiBoard_Player_Kills_Count_1[i_0] = 0
		set udg_MultiBoard_Player_Deaths_Count_1[i_0] = 0
		set udg_MultiBoard_Player_Assist_Count_1[i_0] = 0
		set udg_Hero_Respawn_Time_1[i_0] = 0
		set udg_Potion_Effect_1[i_0] = ""
		set udg_Potion_Type_1[i_0] = ""
		set udg_Potion_Heal_Amount_1[i_0] = 0
		set udg_Potion_Size_1[i_0] = 0
		set udg_HintsTimerPlayer_1[i_0] = CreateTimer()
		set udg_Hero_Player_Color_String_1[i_0] = ""
		set udg_Player_Taken_Damage_Current_1[i_0] = 0
		set udg_Player_Taken_Damage_All_1[i_0] = 0
		set udg_Player_Received_Damage_Current_1[i_0] = 0
		set udg_System_ShowAbil_And_Items_Hint_1[i_0] = true
		set udg_Boolean_Player_Fast_Purchase_1[i_0] = false
		set udg_Integer_Creep_On_Line_Spawn_1[i_0] = 0
		set udg_Group_Pickeds_Refrence_Panel_1[i_0] = CreateGroup()
		set udg_Is_Player_Fast_Wave_Start_1[i_0] = false
		set udg_Count_Item_Tips_Message_1[i_0] = 0
		set udg_Rune_On_Base_Dummy_X_1[i_0] = 0
		set udg_Rune_On_Base_Dummy_Y_1[i_0] = 0
		set udg_Rune_On_Base_Effect_String_1[i_0] = ""
		set udg_Bonus_Gold_ChestGold_1[i_0] = 0
		set udg_Temp_Group_1[i_0] = CreateGroup()
		set udg_Is_Rune_On_Position_1[i_0] = false
		set udg_Rune_Position_X_1[i_0] = 0
		set udg_Rune_Position_Y_1[i_0] = 0
		set udg_Arrow_Pointer_Guide_X_1[i_0] = 0
		set udg_Arrow_Pointer_Guide_Y_1[i_0] = 0
		set udg_Arrow_Pointer_Guide_Angle_1[i_0] = 0
		set udg_EnergyWallX_1[i_0] = 0
		set udg_EnergyWallY_1[i_0] = 0
		set udg_EnergyWallAngle_1[i_0] = 0
		set udg_EnergyWallCount_1[i_0] = 0
		set udg_Is_Player_Got_Randomed_1[i_0] = false
		set i_0 = i_0 + 1
	endloop
	set udg_Weave_group_1 = CreateGroup()
	set udg_Timer_Check_Forkreep_system_1 = CreateTimer()
	set udg_Gruppa_Igrokov_Vibor_Heroev_1 = CreateForce()
	set udg_Timer_Eiti_Areni_1 = CreateTimer()
	set udg_Gruppa_HeroUnitov_Geroev_1 = CreateGroup()
	set udg_OtriadPortalUnitsEitiArena_1 = CreateGroup()
	set udg_DamageGroup_1 = CreateGroup()
	set udg_DrenorBugaiRageTimer_1 = CreateTimer()
	set udg_GrogTarRageTimer_1 = CreateTimer()
	set udg_GroupRandomUnitFromGroup_1 = CreateGroup()
	set udg_Dialog_Select_Difficult_1 = DialogCreate()
	set udg_TimerMobsAttackBase_1 = CreateTimer()
	set udg_Players_Enemy_Group_1 = CreateForce()
	set udg_Timer_Dialog_Select_1 = CreateTimer()
	set udg_Players_Ally_Group_1 = CreateForce()
	set udg_MultiBoard_1 = CreateMultiboard()
	set udg_PlayerGroup_1 = CreateForce()
	set udg_ttt_1 = CreateTimer()
	set udg_PortalCastersMagi_1 = CreateGroup()
	set udg_InitMapTimer_1 = CreateTimer()
	set udg_Drenor_Bull_Hint_Player_Group_1 = CreateForce()
	set udg_TimerShowAndFlushAllPlayerDmg_1 = CreateTimer()
	set udg_Timer_Lightning_Strike_Weather_1 = CreateTimer()
	set udg_Timer_Hint_About_Fast_Start_1 = CreateTimer()
	set udg_Timer_Arrow_Pointer_Guide_1 = CreateTimer()
	set udg_gdamageallnew_1 = CreateGroup()
endfunction

function InitSounds takes nothing returns nothing
	set gg_snd_HeroFirelordYesAttack1_1 = CreateSound("Units\\Creeps\\HeroFlameLord\\HeroFirelordYesAttack1.wav", false, false, false, $A, $A, "HeroAcksEAX")
	call SetSoundParamsFromLabel(gg_snd_HeroFirelordYesAttack1_1, "HeroFireLordYesAttack")
	call SetSoundDuration(gg_snd_HeroFirelordYesAttack1_1, $984)
	set gg_snd_HeroFirelordYesAttack2_1 = CreateSound("Units\\Creeps\\HeroFlameLord\\HeroFirelordYesAttack2.wav", false, false, false, $A, $A, "HeroAcksEAX")
	call SetSoundParamsFromLabel(gg_snd_HeroFirelordYesAttack2_1, "HeroFireLordYesAttack")
	call SetSoundDuration(gg_snd_HeroFirelordYesAttack2_1, $DAF)
	set gg_snd_HeroFirelordYesAttack3_1 = CreateSound("Units\\Creeps\\HeroFlameLord\\HeroFirelordYesAttack3.wav", false, false, false, $A, $A, "HeroAcksEAX")
	call SetSoundParamsFromLabel(gg_snd_HeroFirelordYesAttack3_1, "HeroFireLordYesAttack")
	call SetSoundDuration(gg_snd_HeroFirelordYesAttack3_1, $AD1)
	set gg_snd_HeroFirelordWarcry1_1 = CreateSound("Units\\Creeps\\HeroFlameLord\\HeroFirelordWarcry1.wav", false, false, false, $A, $A, "HeroAcksEAX")
	call SetSoundParamsFromLabel(gg_snd_HeroFirelordWarcry1_1, "HeroFireLordWarcry")
	call SetSoundDuration(gg_snd_HeroFirelordWarcry1_1, 5072)
	set gg_snd_HeroLichReady1_1 = CreateSound("Units\\Undead\\HeroLich\\HeroLichReady1.wav", false, false, false, $A, $A, "HeroAcksEAX")
	call SetSoundParamsFromLabel(gg_snd_HeroLichReady1_1, "HeroLichReady")
	call SetSoundDuration(gg_snd_HeroLichReady1_1, 4337)
	set gg_snd_HeroLichYesAttack1_1 = CreateSound("Units\\Undead\\HeroLich\\HeroLichYesAttack1.wav", false, false, false, $A, $A, "HeroAcksEAX")
	call SetSoundParamsFromLabel(gg_snd_HeroLichYesAttack1_1, "HeroLichYesAttack")
	call SetSoundDuration(gg_snd_HeroLichYesAttack1_1, $A4C)
	set gg_snd_HeroLichYesAttack2_1 = CreateSound("Units\\Undead\\HeroLich\\HeroLichYesAttack2.wav", false, false, false, $A, $A, "HeroAcksEAX")
	call SetSoundParamsFromLabel(gg_snd_HeroLichYesAttack2_1, "HeroLichYesAttack")
	call SetSoundDuration(gg_snd_HeroLichYesAttack2_1, $9D4)
	set gg_snd_HeroLichYesAttack3_1 = CreateSound("Units\\Undead\\HeroLich\\HeroLichYesAttack3.wav", false, false, false, $A, $A, "HeroAcksEAX")
	call SetSoundParamsFromLabel(gg_snd_HeroLichYesAttack3_1, "HeroLichYesAttack")
	call SetSoundDuration(gg_snd_HeroLichYesAttack3_1, $872)
	set gg_snd_DeathSound1_1 = CreateSound("Units\\Creeps\\Bandit\\BanditYesAttack1.wav", false, false, false, $A, $A, "DefaultEAXON")
	call SetSoundParamsFromLabel(gg_snd_DeathSound1_1, "BanditYesAttack")
	call SetSoundDuration(gg_snd_DeathSound1_1, $4EE)
	set gg_snd_KnightNoGold1_1 = CreateSound("Sound\\Interface\\Warning\\Human\\KnightNoGold1.wav", false, false, false, $A, $A, "")
	call SetSoundParamsFromLabel(gg_snd_KnightNoGold1_1, "NoGoldHuman")
	call SetSoundDuration(gg_snd_KnightNoGold1_1, $57D)
	set gg_snd_KnightInventoryFull1_1 = CreateSound("Sound\\Interface\\Warning\\Human\\KnightInventoryFull1.wav", false, false, false, $A, $A, "")
	call SetSoundParamsFromLabel(gg_snd_KnightInventoryFull1_1, "InventoryFullHuman")
	call SetSoundDuration(gg_snd_KnightInventoryFull1_1, $3E8)
	set gg_snd_HeroStep1_1 = CreateSound("Sound\\Units\\Footsteps\\HeroStep1.wav", false, true, true, $A, $A, "SpellsEAX")
	call SetSoundParamsFromLabel(gg_snd_HeroStep1_1, "HeroCinematicStep")
	call SetSoundDuration(gg_snd_HeroStep1_1, 947)
	set gg_snd_HeroStep2_1 = CreateSound("Sound\\Units\\Footsteps\\HeroStep2.wav", false, true, true, $A, $A, "SpellsEAX")
	call SetSoundParamsFromLabel(gg_snd_HeroStep2_1, "HeroCinematicStep")
	call SetSoundDuration(gg_snd_HeroStep2_1, 697)
	set gg_snd_HeroStep3_1 = CreateSound("Sound\\Units\\Footsteps\\HeroStep3.wav", false, true, true, $A, $A, "SpellsEAX")
	call SetSoundParamsFromLabel(gg_snd_HeroStep3_1, "HeroCinematicStep")
	call SetSoundDuration(gg_snd_HeroStep3_1, 599)
	set gg_snd_HeroStep4_1 = CreateSound("Sound\\Units\\Footsteps\\HeroStep4.wav", false, true, true, $A, $A, "SpellsEAX")
	call SetSoundParamsFromLabel(gg_snd_HeroStep4_1, "HeroCinematicStep")
	call SetSoundDuration(gg_snd_HeroStep4_1, $E5)
	set gg_snd_HuntressYesAttack4_1 = CreateSound("Units\\NightElf\\Huntress\\HuntressYesAttack4.wav", false, false, false, 'd', $A, "DefaultEAXON")
	call SetSoundParamsFromLabel(gg_snd_HuntressYesAttack4_1, "HuntressYesAttack")
	call SetSoundDuration(gg_snd_HuntressYesAttack4_1, $55E)
	call SetSoundChannel(gg_snd_HuntressYesAttack4_1, 0)
	set gg_snd_WardenAttackEffort1_1 = CreateSound("Units\\NightElf\\HeroWarden\\WardenAttackEffort1.wav", false, true, true, $A, $A, "CombatSoundsEAX")
	call SetSoundParamsFromLabel(gg_snd_WardenAttackEffort1_1, "WardenAttack")
	call SetSoundDuration(gg_snd_WardenAttackEffort1_1, $54E)
	set gg_snd_AlchemistChemicalBurst1_1 = CreateSound("Units\\Creeps\\HEROGoblinALCHEMIST\\AlchemistChemicalBurst1.wav", false, false, false, $A, $A, "DefaultEAXON")
	call SetSoundParamsFromLabel(gg_snd_AlchemistChemicalBurst1_1, "GoblinAlchemistMorph")
	call SetSoundDuration(gg_snd_AlchemistChemicalBurst1_1, $801)
	call SetSoundChannel(gg_snd_AlchemistChemicalBurst1_1, 0)
	set gg_snd_AlchemistMorph1_1 = CreateSound("Units\\Creeps\\HEROGoblinALCHEMIST\\AlchemistMorph1.wav", false, false, false, $A, $A, "DefaultEAXON")
	call SetSoundParamsFromLabel(gg_snd_AlchemistMorph1_1, "GoblinAlchemistMorphAlternate")
	call SetSoundDuration(gg_snd_AlchemistMorph1_1, $67F)
	call SetSoundChannel(gg_snd_AlchemistMorph1_1, 0)
	set gg_snd_HeroAlchemistYesAttack1_1 = CreateSound("Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistYesAttack1.wav", false, false, false, $A, $A, "DefaultEAXON")
	call SetSoundParamsFromLabel(gg_snd_HeroAlchemistYesAttack1_1, "HEROGoblinALCHEMISTYesAttack")
	call SetSoundDuration(gg_snd_HeroAlchemistYesAttack1_1, $942)
	call SetSoundChannel(gg_snd_HeroAlchemistYesAttack1_1, 0)
endfunction

function CreateNeutralPassiveBuildings takes nothing returns nothing
	local player p = Player($F)
	local unit u
	local integer unitID
	local trigger t
	local real life
	set u_0 = CreateUnit(p_0, 'h00S', 2144., -5184., 225.)
	set u_0 = CreateUnit(p_0, 'h002', 2176., -5760., 270.)
	set u_0 = CreateUnit(p_0, 'h001', 2144., -5312., 225.)
	set u_0 = CreateUnit(p_0, 'n004', 5120., 4032., 270.)
	call SetUnitColor(u_0, ConvertPlayerColor(6))
	set u_0 = CreateUnit(p_0, 'n002', 4736., 4032., 270.)
	call SetUnitColor(u_0, ConvertPlayerColor(0))
	set u_0 = CreateUnit(p_0, 'n005', 4928., 3648., 270.)
	call SetUnitColor(u_0, ConvertPlayerColor(1))
	set u_0 = CreateUnit(p_0, 'h003', 2176., -6016., 270.)
	set u_0 = CreateUnit(p_0, 'h000', 2176., -5504., 180.)
	set u_0 = CreateUnit(p_0, 'h00D', 2176., -6272., 225.)
	set u_0 = CreateUnit(p_0, 'h00Y', 2176., -4992., 270.)
endfunction

function CreateNeutralPassive takes nothing returns nothing
	local player p = Player($F)
	local unit u
	local integer unitID
	local trigger t
	local real life
	set u_0 = CreateUnit(p_0, 'h00I', 2651.1, -8998.3, 132.101)
	call SetUnitState(u_0, UNIT_STATE_MANA_1, $2710)
	set u_0 = CreateUnit(p_0, 'h00I', 2737.1, -8462., 222.901)
	call SetUnitState(u_0, UNIT_STATE_MANA_1, $2710)
	set u_0 = CreateUnit(p_0, 'h00I', 2208., -7950.8, 240.89)
	call SetUnitState(u_0, UNIT_STATE_MANA_1, $2710)
	set u_0 = CreateUnit(p_0, 'h00I', 1508.5, -7799.1, 271.992)
	call SetUnitState(u_0, UNIT_STATE_MANA_1, $2710)
	set u_0 = CreateUnit(p_0, 'h00I', 761.9, -7825.8, 270.894)
	call SetUnitState(u_0, UNIT_STATE_MANA_1, $2710)
	set u_0 = CreateUnit(p_0, 'h00I', 108.7, -7927.1, 297.652)
	call SetUnitState(u_0, UNIT_STATE_MANA_1, $2710)
	set u_0 = CreateUnit(p_0, 'h00I', -341.9, -8450.2, 346.764)
	call SetUnitState(u_0, UNIT_STATE_MANA_1, $2710)
	set u_0 = CreateUnit(p_0, 'h00I', -340.3, -9154.9, 16.661)
	call SetUnitState(u_0, UNIT_STATE_MANA_1, $2710)
	set u_0 = CreateUnit(p_0, 'h00I', -237.5, -9776.7, 2.615)
	call SetUnitState(u_0, UNIT_STATE_MANA_1, $2710)
	set gg_unit_o003_0027_1 = CreateUnit(p_0, 'o003', 1521.1, -5441.2, 222.91)
	set gg_unit_o003_0028_1 = CreateUnit(p_0, 'o003', 1033.8, -5956.6, 42.425)
	set u_0 = CreateUnit(p_0, 'h00I', 1358.5, -9356.4, 270.)
	call SetUnitState(u_0, UNIT_STATE_MANA_1, $2710)
	set u_0 = CreateUnit(p_0, 'h00I', 1357.3, -9244.8, 270.)
	call SetUnitState(u_0, UNIT_STATE_MANA_1, $2710)
	set gg_unit_h01K_0100_1 = CreateUnit(p_0, 'h01K', 1245.4, -5377.6, 270.73)
	set gg_unit_n00Y_0101_1 = CreateUnit(p_0, 'n00Y', 1589.7, -5683.3, 173.645)
	call SetUnitState(gg_unit_n00Y_0101_1, UNIT_STATE_MANA_1, 0)
	set gg_unit_n00Y_0102_1 = CreateUnit(p_0, 'n00Y', 939.4, -5689.8, .69)
	call SetUnitState(gg_unit_n00Y_0102_1, UNIT_STATE_MANA_1, 0)
	set gg_unit_e002_0106_1 = CreateUnit(p_0, 'e002', 1007.4, -5428.7, 316.082)
	call SetUnitState(gg_unit_e002_0106_1, UNIT_STATE_MANA_1, 0)
	set gg_unit_e002_0108_1 = CreateUnit(p_0, 'e002', 1526.5, -5954.4, 138.892)
	call SetUnitState(gg_unit_e002_0108_1, UNIT_STATE_MANA_1, 0)
	set gg_unit_h01K_0109_1 = CreateUnit(p_0, 'h01K', 1268., -6027.5, 89.41)
endfunction

function CreatePlayerBuildings takes nothing returns nothing
endfunction

function CreatePlayerUnits takes nothing returns nothing
endfunction

function CreateAllUnits takes nothing returns nothing
	call CreateNeutralPassiveBuildings()
	call CreatePlayerBuildings()
	call CreateNeutralPassive()
	call CreatePlayerUnits()
endfunction

function CreateRegions takes nothing returns nothing
	local weathereffect we
	set gg_rct_Miners_Arena_1 = Rect(-4128., 1952., -2496., 3904.)
	set gg_rct_Duel_left_1 = Rect(1216., 2784., 1472., 3040.)
	set gg_rct_Portal_1_down_left_Start_1 = Rect(-1920., -9536., -1536., -9184.)
	set gg_rct_Base_1 = Rect(-288., -7488., 2560., -4128.)
	set gg_rct_Portal_baza_1 = Rect(896., -6016., 1408., -5408.)
	set gg_rct_Les_2_1 = Rect(-3616., -8160., -512., 320.)
	set gg_rct_Les_1_1 = Rect(-320., -10656., 2432., -7904.)
	set gg_rct_Pogoda_v_bolote_1 = Rect(3936., -6944., 5280., -3296.)
	set we_0 = AddWeatherEffect(gg_rct_Pogoda_v_bolote_1, 'FDgh')
	call EnableWeatherEffect(we_0, true)
	set gg_rct_cast_magi_1 = Rect(832., -6112., 1664., -5312.)
	set gg_rct_Event_Bonus_Etei_arena_1_1 = Rect(3488., -256., 5088., 1824.)
	set gg_rct_Portal_3_up_Start_1 = Rect(1024., -1120., 1408., -736.)
	set gg_rct_Portal_2_down_right_Start_1 = Rect(3392., -9376., 3744., -8992.)
	set gg_rct_Oblstb_Tavern_1 = Rect(4352., 3360., 5504., 4448.)
	set gg_rct_Hero_Arena_1 = Rect(1152., 2048., 2944., 3968.)
	set gg_rct_les_3_1 = Rect(2592., -7040., 3872., -1280.)
	set gg_rct_Respawn_Heroes_1 = Rect(1056., -6624., 1408., -6112.)
	set gg_rct_Oblast_Teleporta_Arena_Bot_1 = Rect(4224., -32., 4416., 160.)
	set gg_rct_Oblast_Teleporta_Arena_Top_1 = Rect(4224., 1408., 4416., 1600.)
	set gg_rct_6_1 = Rect(-1792., 1888., 544., 3840.)
	set gg_rct_BaseDopVision_1 = Rect(672., -4160., 1664., -3680.)
	set gg_rct_Center_Vision_1 = Rect(960., -5760., 1088., -5632.)
	set gg_rct_Portal_Attack_Dummy_Left_1 = Rect(-2112., -9696., -1952., -9536.)
	set gg_rct_Portal_Attack_Dummy_Right_1 = Rect(3584., -9600., 3744., -9440.)
	set gg_rct_Portal_Attack_Dummy_Top_1 = Rect(1120., -576., 1280., -416.)
	set gg_rct_Duel_right_1 = Rect(2592., 2784., 2848., 3040.)
	set gg_rct_PlayableAreaVisionDeBag_1 = Rect(-3680., -10400., 5504., 4544.)
	set gg_rct_MinusVision1_1 = Rect(-3712., 800., -2048., 4640.)
	set gg_rct_Les1_Dop1_1 = Rect(2400., -9184., 2912., -8096.)
	set gg_rct_Les1_Dop2_1 = Rect(160., -7936., 2208., -7648.)
	set gg_rct_Beorn_Boss_Area_1 = Rect(800., -10368., 1952., -9248.)
	set gg_rct_Beorn_Boss_Area2_1 = Rect(992., -10272., 1856., -9376.)
endfunction

function CreateCameras takes nothing returns nothing
	set gg_cam_Kamera_na_taverni_1 = CreateCameraSetup()
	call CameraSetupSetField(gg_cam_Kamera_na_taverni_1, CAMERA_FIELD_ZOFFSET_1, .0, .0)
	call CameraSetupSetField(gg_cam_Kamera_na_taverni_1, CAMERA_FIELD_ROTATION_1, 90., .0)
	call CameraSetupSetField(gg_cam_Kamera_na_taverni_1, CAMERA_FIELD_ANGLE_OF_ATTACK_1, 304., .0)
	call CameraSetupSetField(gg_cam_Kamera_na_taverni_1, CAMERA_FIELD_TARGET_DISTANCE_1, 1650., .0)
	call CameraSetupSetField(gg_cam_Kamera_na_taverni_1, CAMERA_FIELD_ROLL_1, .0, .0)
	call CameraSetupSetField(gg_cam_Kamera_na_taverni_1, CAMERA_FIELD_FIELD_OF_VIEW_1, 70., .0)
	call CameraSetupSetField(gg_cam_Kamera_na_taverni_1, CAMERA_FIELD_FARZ_1, 5000., .0)
	call CameraSetupSetDestPosition(gg_cam_Kamera_na_taverni_1, 4928.7, 3881.5, .0)
	set gg_cam_Kamera_glavnoi_bazi_1 = CreateCameraSetup()
	call CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi_1, CAMERA_FIELD_ZOFFSET_1, .0, .0)
	call CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi_1, CAMERA_FIELD_ROTATION_1, 90., .0)
	call CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi_1, CAMERA_FIELD_ANGLE_OF_ATTACK_1, 304., .0)
	call CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi_1, CAMERA_FIELD_TARGET_DISTANCE_1, 1650., .0)
	call CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi_1, CAMERA_FIELD_ROLL_1, .0, .0)
	call CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi_1, CAMERA_FIELD_FIELD_OF_VIEW_1, 70., .0)
	call CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi_1, CAMERA_FIELD_FARZ_1, 5000., .0)
	call CameraSetupSetDestPosition(gg_cam_Kamera_glavnoi_bazi_1, 1240., -6378.1, .0)
	set gg_cam_Camera_Eiti_Arena_1 = CreateCameraSetup()
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_1, CAMERA_FIELD_ZOFFSET_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_1, CAMERA_FIELD_ROTATION_1, 90., .0)
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_1, CAMERA_FIELD_ANGLE_OF_ATTACK_1, 304., .0)
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_1, CAMERA_FIELD_TARGET_DISTANCE_1, 1650., .0)
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_1, CAMERA_FIELD_ROLL_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_1, CAMERA_FIELD_FIELD_OF_VIEW_1, 70., .0)
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_1, CAMERA_FIELD_FARZ_1, 5000., .0)
	call CameraSetupSetDestPosition(gg_cam_Camera_Eiti_Arena_1, 4255.9, 866.9, .0)
	set gg_cam_Camera_Eiti_Arena_Top_Portal_1 = CreateCameraSetup()
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal_1, CAMERA_FIELD_ZOFFSET_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal_1, CAMERA_FIELD_ROTATION_1, 90., .0)
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal_1, CAMERA_FIELD_ANGLE_OF_ATTACK_1, 304., .0)
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal_1, CAMERA_FIELD_TARGET_DISTANCE_1, 1650., .0)
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal_1, CAMERA_FIELD_ROLL_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal_1, CAMERA_FIELD_FIELD_OF_VIEW_1, 70., .0)
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal_1, CAMERA_FIELD_FARZ_1, 5000., .0)
	call CameraSetupSetDestPosition(gg_cam_Camera_Eiti_Arena_Top_Portal_1, 4394.2, 1237.5, .0)
	set gg_cam_Camera_Eiti_Arena_Bot_Portal_1 = CreateCameraSetup()
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal_1, CAMERA_FIELD_ZOFFSET_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal_1, CAMERA_FIELD_ROTATION_1, 90., .0)
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal_1, CAMERA_FIELD_ANGLE_OF_ATTACK_1, 304., .0)
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal_1, CAMERA_FIELD_TARGET_DISTANCE_1, 1650., .0)
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal_1, CAMERA_FIELD_ROLL_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal_1, CAMERA_FIELD_FIELD_OF_VIEW_1, 70., .0)
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal_1, CAMERA_FIELD_FARZ_1, 5000., .0)
	call CameraSetupSetDestPosition(gg_cam_Camera_Eiti_Arena_Bot_Portal_1, 4465.7, 342.3, .0)
	set gg_cam_Camera_miners_arena_1 = CreateCameraSetup()
	call CameraSetupSetField(gg_cam_Camera_miners_arena_1, CAMERA_FIELD_ZOFFSET_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_miners_arena_1, CAMERA_FIELD_ROTATION_1, 90., .0)
	call CameraSetupSetField(gg_cam_Camera_miners_arena_1, CAMERA_FIELD_ANGLE_OF_ATTACK_1, 304., .0)
	call CameraSetupSetField(gg_cam_Camera_miners_arena_1, CAMERA_FIELD_TARGET_DISTANCE_1, 1650., .0)
	call CameraSetupSetField(gg_cam_Camera_miners_arena_1, CAMERA_FIELD_ROLL_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_miners_arena_1, CAMERA_FIELD_FIELD_OF_VIEW_1, 70., .0)
	call CameraSetupSetField(gg_cam_Camera_miners_arena_1, CAMERA_FIELD_FARZ_1, 5000., .0)
	call CameraSetupSetDestPosition(gg_cam_Camera_miners_arena_1, -3311.2, 2967.9, .0)
	set gg_cam_Camera_BossFightStart_1 = CreateCameraSetup()
	call CameraSetupSetField(gg_cam_Camera_BossFightStart_1, CAMERA_FIELD_ZOFFSET_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_BossFightStart_1, CAMERA_FIELD_ROTATION_1, 180.9, .0)
	call CameraSetupSetField(gg_cam_Camera_BossFightStart_1, CAMERA_FIELD_ANGLE_OF_ATTACK_1, 336.5, .0)
	call CameraSetupSetField(gg_cam_Camera_BossFightStart_1, CAMERA_FIELD_TARGET_DISTANCE_1, 1650., .0)
	call CameraSetupSetField(gg_cam_Camera_BossFightStart_1, CAMERA_FIELD_ROLL_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_BossFightStart_1, CAMERA_FIELD_FIELD_OF_VIEW_1, 70., .0)
	call CameraSetupSetField(gg_cam_Camera_BossFightStart_1, CAMERA_FIELD_FARZ_1, 5000., .0)
	call CameraSetupSetDestPosition(gg_cam_Camera_BossFightStart_1, -608.2, 2881., .0)
	set gg_cam_Camera_Duel_Arena_1 = CreateCameraSetup()
	call CameraSetupSetField(gg_cam_Camera_Duel_Arena_1, CAMERA_FIELD_ZOFFSET_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Duel_Arena_1, CAMERA_FIELD_ROTATION_1, 90., .0)
	call CameraSetupSetField(gg_cam_Camera_Duel_Arena_1, CAMERA_FIELD_ANGLE_OF_ATTACK_1, 304., .0)
	call CameraSetupSetField(gg_cam_Camera_Duel_Arena_1, CAMERA_FIELD_TARGET_DISTANCE_1, 1650., .0)
	call CameraSetupSetField(gg_cam_Camera_Duel_Arena_1, CAMERA_FIELD_ROLL_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Duel_Arena_1, CAMERA_FIELD_FIELD_OF_VIEW_1, 70., .0)
	call CameraSetupSetField(gg_cam_Camera_Duel_Arena_1, CAMERA_FIELD_FARZ_1, 5000., .0)
	call CameraSetupSetDestPosition(gg_cam_Camera_Duel_Arena_1, 2139.4, 2853.8, .0)
	set gg_cam_Kamera_cast_magi_1 = CreateCameraSetup()
	call CameraSetupSetField(gg_cam_Kamera_cast_magi_1, CAMERA_FIELD_ZOFFSET_1, .0, .0)
	call CameraSetupSetField(gg_cam_Kamera_cast_magi_1, CAMERA_FIELD_ROTATION_1, 90., .0)
	call CameraSetupSetField(gg_cam_Kamera_cast_magi_1, CAMERA_FIELD_ANGLE_OF_ATTACK_1, 304., .0)
	call CameraSetupSetField(gg_cam_Kamera_cast_magi_1, CAMERA_FIELD_TARGET_DISTANCE_1, 1650., .0)
	call CameraSetupSetField(gg_cam_Kamera_cast_magi_1, CAMERA_FIELD_ROLL_1, .0, .0)
	call CameraSetupSetField(gg_cam_Kamera_cast_magi_1, CAMERA_FIELD_FIELD_OF_VIEW_1, 70., .0)
	call CameraSetupSetField(gg_cam_Kamera_cast_magi_1, CAMERA_FIELD_FARZ_1, 5000., .0)
	call CameraSetupSetDestPosition(gg_cam_Kamera_cast_magi_1, 1268., -5714.3, .0)
	set gg_cam_Camera_Beorn_Den1_1 = CreateCameraSetup()
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den1_1, CAMERA_FIELD_ZOFFSET_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den1_1, CAMERA_FIELD_ROTATION_1, 233.6, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den1_1, CAMERA_FIELD_ANGLE_OF_ATTACK_1, 299.3, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den1_1, CAMERA_FIELD_TARGET_DISTANCE_1, 1363.6, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den1_1, CAMERA_FIELD_ROLL_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den1_1, CAMERA_FIELD_FIELD_OF_VIEW_1, 70., .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den1_1, CAMERA_FIELD_FARZ_1, 5000., .0)
	call CameraSetupSetDestPosition(gg_cam_Camera_Beorn_Den1_1, 1384., -9577.2, .0)
	set gg_cam_Camera_Beorn_Den2_1 = CreateCameraSetup()
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den2_1, CAMERA_FIELD_ZOFFSET_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den2_1, CAMERA_FIELD_ROTATION_1, 297.9, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den2_1, CAMERA_FIELD_ANGLE_OF_ATTACK_1, 300.3, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den2_1, CAMERA_FIELD_TARGET_DISTANCE_1, 1363.6, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den2_1, CAMERA_FIELD_ROLL_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den2_1, CAMERA_FIELD_FIELD_OF_VIEW_1, 70., .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den2_1, CAMERA_FIELD_FARZ_1, 5000., .0)
	call CameraSetupSetDestPosition(gg_cam_Camera_Beorn_Den2_1, 1240.7, -9620.8, .0)
	set gg_cam_Camera_Beorn_Den3_1 = CreateCameraSetup()
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den3_1, CAMERA_FIELD_ZOFFSET_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den3_1, CAMERA_FIELD_ROTATION_1, 110.6, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den3_1, CAMERA_FIELD_ANGLE_OF_ATTACK_1, 300.4, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den3_1, CAMERA_FIELD_TARGET_DISTANCE_1, 1127., .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den3_1, CAMERA_FIELD_ROLL_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den3_1, CAMERA_FIELD_FIELD_OF_VIEW_1, 70., .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den3_1, CAMERA_FIELD_FARZ_1, 5000., .0)
	call CameraSetupSetDestPosition(gg_cam_Camera_Beorn_Den3_1, 562.8, -8241.1, .0)
	set gg_cam_Camera_Beorn_Den4_1 = CreateCameraSetup()
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den4_1, CAMERA_FIELD_ZOFFSET_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den4_1, CAMERA_FIELD_ROTATION_1, 110.6, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den4_1, CAMERA_FIELD_ANGLE_OF_ATTACK_1, 300.4, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den4_1, CAMERA_FIELD_TARGET_DISTANCE_1, 1127., .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den4_1, CAMERA_FIELD_ROLL_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den4_1, CAMERA_FIELD_FIELD_OF_VIEW_1, 70., .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den4_1, CAMERA_FIELD_FARZ_1, 5000., .0)
	call CameraSetupSetDestPosition(gg_cam_Camera_Beorn_Den4_1, -15.3, -9035.4, .0)
	set gg_cam_Camera_Beorn_Den5_1 = CreateCameraSetup()
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den5_1, CAMERA_FIELD_ZOFFSET_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den5_1, CAMERA_FIELD_ROTATION_1, 90., .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den5_1, CAMERA_FIELD_ANGLE_OF_ATTACK_1, 304., .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den5_1, CAMERA_FIELD_TARGET_DISTANCE_1, 1650., .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den5_1, CAMERA_FIELD_ROLL_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den5_1, CAMERA_FIELD_FIELD_OF_VIEW_1, 70., .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den5_1, CAMERA_FIELD_FARZ_1, 5000., .0)
	call CameraSetupSetDestPosition(gg_cam_Camera_Beorn_Den5_1, 2191., -8224.1, .0)
	set gg_cam_Camera_Beorn_Den6_1 = CreateCameraSetup()
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den6_1, CAMERA_FIELD_ZOFFSET_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den6_1, CAMERA_FIELD_ROTATION_1, 90., .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den6_1, CAMERA_FIELD_ANGLE_OF_ATTACK_1, 304., .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den6_1, CAMERA_FIELD_TARGET_DISTANCE_1, 1650., .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den6_1, CAMERA_FIELD_ROLL_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den6_1, CAMERA_FIELD_FIELD_OF_VIEW_1, 70., .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den6_1, CAMERA_FIELD_FARZ_1, 5000., .0)
	call CameraSetupSetDestPosition(gg_cam_Camera_Beorn_Den6_1, 1474.8, -9613.2, .0)
endfunction

function CopyGroup takes group g returns group
	set bj_groupAddGroupDest_1 = CreateGroup()
	call ForGroup(g_0, function GroupAddGroupEnum)
	return bj_groupAddGroupDest_1
endfunction

function DamageGroupOfUnit takes unit u, real x, real y, real radius, real damage, boolean dbuilds, boolean dmagicimmune, boolean dally returns nothing
	local group g = CreateGroup()
	local unit target
	call GroupEnumUnitsInRange(g_0, x_0, y_0, radius_0, null)
	loop
		set target_0 = FirstOfGroup(g_0)
		exitwhen target_0 == null
		if (dally_0 and dbuilds_0) or (dally_0 and not dbuilds_0 and not IsUnitType(u_0, UNIT_TYPE_STRUCTURE_1)) or (IsUnitEnemy(target_0, GetOwningPlayer(u_0)) and dbuilds_0) or (IsUnitEnemy(target_0, GetOwningPlayer(u_0)) and not dbuilds_0 and not IsUnitType(u_0, UNIT_TYPE_STRUCTURE_1)) then
			call UnitDamageTarget(u_0, target_0, damage_0, true, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_NORMAL_1, WEAPON_TYPE_WHOKNOWS_1)
		endif
		call GroupRemoveUnit(g_0, target_0)
	endloop
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set target_0 = null
	set g_0 = null
endfunction

function KillSummonsAndIllusions takes group g returns nothing
	local unit Picked
	local integer id
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		set id_0 = GetUnitTypeId(Picked_0)
		if ((IsUnitIllusion(Picked_0) or IsUnitType(Picked_0, UNIT_TYPE_SUMMONED_1)) or ((id_0 == 'h017') or (id_0 == 'h01D') or (id_0 == 'h01E') or (id_0 == 'h01F') or (id_0 == 'h01G') or (id_0 == 'h01G'))) and id_0 != 'h00C' then
			call KillUnit(Picked_0)
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
endfunction

function FilterMostNearUnit takes group g, unit Unit returns nothing
	local unit ufil
	local real xu
	local real yu
	local real duU
	local real x1U
	local real y1U
	local real d1UUF
	local real X = GetUnitX(Unit_0)
	local real Y = GetUnitY(Unit_0)
	loop
		set ufil_0 = FirstOfGroup(g_0)
		exitwhen ufil_0 == null
		if GetUnitState(ufil_0, UNIT_STATE_LIFE_1) > .405 and ufil_0 != Unit_0 and (IsUnitType(ufil_0, UNIT_TYPE_STRUCTURE_1) == false) and GetOwningPlayer(ufil_0) != GetOwningPlayer(Unit_0) then
			set xu_0 = GetUnitX(ufil_0)
			set yu_0 = GetUnitY(ufil_0)
			set x1U_0 = GetUnitX(udg_Unit_FilterMostNearUnit_1)
			set y1U_0 = GetUnitY(udg_Unit_FilterMostNearUnit_1)
			set duU_0 = SquareRoot((X_0 - xu_0) * (X_0 - xu_0) + (Y_0 - yu_0) * (Y_0 - yu_0))
			set d1UUF_0 = SquareRoot((X_0 - x1U_0) * (X_0 - x1U_0) + (Y_0 - y1U_0) * (Y_0 - y1U_0))
			if udg_Unit_FilterMostNearUnit_1 == null then
				set udg_Unit_FilterMostNearUnit_1 = ufil_0
			else
				if duU_0 < d1UUF_0 then
					set udg_Unit_FilterMostNearUnit_1 = ufil_0
				endif
			endif
		endif
		call GroupRemoveUnit(g_0, ufil_0)
	endloop
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
endfunction

function AbilityPreload takes integer id, integer level returns nothing
	call UnitAddAbility(udg_preloader_1, id_0)
	call SetUnitAbilityLevel(udg_preloader_1, id_0, level_0)
	call UnitRemoveAbility(udg_preloader_1, id_0)
endfunction

function EffectPreload takes string s returns nothing
	call Preload(s_0)
endfunction

function UnitPreload takes integer id returns nothing
	call KillUnit(CreateUnit(Player($F), id_0, -3000., -3000., .0))
endfunction

function ItemPreload takes integer id returns nothing
	call RemoveItem(CreateItem(id_0, .0, .0))
endfunction

function DestroyEffectWithWaitActions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local effect ef = LoadEffectHandle(udg_hash_1, h_0, 1)
	call DestroyEffect(ef_0)
	set ef_0 = null
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
endfunction

function DestroyEffectWithWait takes effect ef, real time returns nothing
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	call SaveEffectHandle(udg_hash_1, h_0, 1, ef_0)
	call TimerStart(t_0, time_0, false, function DestroyEffectWithWaitActions)
	set t_0 = null
endfunction

function SetAttackAbilityLevel takes unit target, integer damage returns nothing
	local integer a100
	local integer a10
	local integer a1
	local integer una100
	local integer una10
	local integer una1
	local integer a
	local integer una
	local integer itog100 = 0
	local integer itog10 = 0
	local integer itog1 = 0
	local integer itog
	if GetUnitAbilityLevel(target_0, 'A07F') <= 0 then
		call UnitAddAbility(target_0, 'A07F')
		call UnitAddAbility(target_0, 'A07G')
		call UnitAddAbility(target_0, 'A07I')
		call UnitAddAbility(target_0, 'A09D')
		call UnitAddAbility(target_0, 'A0E6')
		call UnitAddAbility(target_0, 'A0E7')
		call UnitMakeAbilityPermanent(target_0, true, 'A07F')
		call UnitMakeAbilityPermanent(target_0, true, 'A07G')
		call UnitMakeAbilityPermanent(target_0, true, 'A07I')
		call UnitMakeAbilityPermanent(target_0, true, 'A09D')
		call UnitMakeAbilityPermanent(target_0, true, 'A0E6')
		call UnitMakeAbilityPermanent(target_0, true, 'A0E7')
	endif
	set a100_0 = GetUnitAbilityLevel(target_0, 'A07I')
	set a10_0 = GetUnitAbilityLevel(target_0, 'A07G')
	set a1_0 = GetUnitAbilityLevel(target_0, 'A07F')
	set una100_0 = GetUnitAbilityLevel(target_0, 'A0E7')
	set una10_0 = GetUnitAbilityLevel(target_0, 'A0E6')
	set una1_0 = GetUnitAbilityLevel(target_0, 'A09D')
	set a_0 = ((a100_0 - 1) * 'd') + ((a10_0 - 1) * $A) + a1_0 - 1
	set una_0 = ((una100_0 - 1) * 'd') + ((una10_0 - 1) * $A) + una1_0 - 1
	set itog_0 = a_0 - una_0
	if itog_0 + damage_0 < $3E8 and itog_0 + damage_0 > -$3E8 then
		set itog_0 = itog_0 + damage_0
		set itog100_0 = (itog_0 / 'd')
		set itog10_0 = (itog_0 - (itog100_0 * 'd')) / $A
		set itog1_0 = itog_0 - (itog100_0 * 'd') - (itog10_0 * $A)
		if itog100_0 >= 0 then
			call SetUnitAbilityLevel(target_0, 'A07I', itog100_0 + 1)
			call SetUnitAbilityLevel(target_0, 'A0E7', 1)
		else
			call SetUnitAbilityLevel(target_0, 'A0E7', -itog100_0 + 1)
			call SetUnitAbilityLevel(target_0, 'A07I', 1)
		endif
		if itog10_0 >= 0 then
			call SetUnitAbilityLevel(target_0, 'A07G', itog10_0 + 1)
			call SetUnitAbilityLevel(target_0, 'A0E6', 1)
		else
			call SetUnitAbilityLevel(target_0, 'A0E6', -itog10_0 + 1)
			call SetUnitAbilityLevel(target_0, 'A07G', 1)
		endif
		if itog1_0 >= 0 then
			call SetUnitAbilityLevel(target_0, 'A07F', itog1_0 + 1)
			call SetUnitAbilityLevel(target_0, 'A09D', 1)
		else
			call SetUnitAbilityLevel(target_0, 'A09D', -itog1_0 + 1)
			call SetUnitAbilityLevel(target_0, 'A07F', 1)
		endif
	else
		if itog_0 + damage_0 >= $3E8 then
			call SetUnitAbilityLevel(target_0, 'A07I', $A)
			call SetUnitAbilityLevel(target_0, 'A07G', $A)
			call SetUnitAbilityLevel(target_0, 'A07F', $A)
			call SetUnitAbilityLevel(target_0, 'A0E7', 1)
			call SetUnitAbilityLevel(target_0, 'A0E6', 1)
			call SetUnitAbilityLevel(target_0, 'A09D', 1)
		endif
		if itog_0 + damage_0 <= -$3E8 then
			call SetUnitAbilityLevel(target_0, 'A07I', 1)
			call SetUnitAbilityLevel(target_0, 'A07G', 1)
			call SetUnitAbilityLevel(target_0, 'A07F', 1)
			call SetUnitAbilityLevel(target_0, 'A0E7', $A)
			call SetUnitAbilityLevel(target_0, 'A0E6', $A)
			call SetUnitAbilityLevel(target_0, 'A09D', $A)
		endif
	endif
endfunction

function SetArmorAbilityLevel takes unit target, integer armor returns nothing
	local integer d100
	local integer d10
	local integer d1
	local integer und100
	local integer und10
	local integer und1
	local integer def
	local integer undef
	local integer itog100 = 0
	local integer itog10 = 0
	local integer itog1 = 0
	local integer itog
	if GetUnitAbilityLevel(target_0, 'A0AG') <= 0 then
		call UnitAddAbility(target_0, 'A0AG')
		call UnitAddAbility(target_0, 'A0AH')
		call UnitAddAbility(target_0, 'A087')
		call UnitAddAbility(target_0, 'A0AS')
		call UnitAddAbility(target_0, 'A0AT')
		call UnitAddAbility(target_0, 'A0D8')
		call UnitMakeAbilityPermanent(target_0, true, 'A0AG')
		call UnitMakeAbilityPermanent(target_0, true, 'A0AH')
		call UnitMakeAbilityPermanent(target_0, true, 'A087')
		call UnitMakeAbilityPermanent(target_0, true, 'A0AS')
		call UnitMakeAbilityPermanent(target_0, true, 'A0AT')
		call UnitMakeAbilityPermanent(target_0, true, 'A0D8')
	endif
	set d100_0 = GetUnitAbilityLevel(target_0, 'A087')
	set d10_0 = GetUnitAbilityLevel(target_0, 'A0AH')
	set d1_0 = GetUnitAbilityLevel(target_0, 'A0AG')
	set und100_0 = GetUnitAbilityLevel(target_0, 'A0D8')
	set und10_0 = GetUnitAbilityLevel(target_0, 'A0AT')
	set und1_0 = GetUnitAbilityLevel(target_0, 'A0AS')
	set def_0 = ((d100_0 - 1) * 'd') + ((d10_0 - 1) * $A) + d1_0 - 1
	set undef_0 = ((und100_0 - 1) * 'd') + ((und10_0 - 1) * $A) + und1_0 - 1
	set itog_0 = def_0 - undef_0
	if itog_0 + armor_0 < $3E8 and itog_0 + armor_0 > -$3E8 then
		set itog_0 = itog_0 + armor_0
		set itog100_0 = (itog_0 / 'd')
		set itog10_0 = (itog_0 - (itog100_0 * 'd')) / $A
		set itog1_0 = itog_0 - (itog100_0 * 'd') - (itog10_0 * $A)
		if itog100_0 >= 0 then
			call SetUnitAbilityLevel(target_0, 'A087', itog100_0 + 1)
			call SetUnitAbilityLevel(target_0, 'A0D8', 1)
		else
			call SetUnitAbilityLevel(target_0, 'A0D8', -itog100_0 + 1)
			call SetUnitAbilityLevel(target_0, 'A087', 1)
		endif
		if itog10_0 >= 0 then
			call SetUnitAbilityLevel(target_0, 'A0AH', itog10_0 + 1)
			call SetUnitAbilityLevel(target_0, 'A0AT', 1)
		else
			call SetUnitAbilityLevel(target_0, 'A0AT', -itog10_0 + 1)
			call SetUnitAbilityLevel(target_0, 'A0AH', 1)
		endif
		if itog1_0 >= 0 then
			call SetUnitAbilityLevel(target_0, 'A0AG', itog1_0 + 1)
			call SetUnitAbilityLevel(target_0, 'A0AS', 1)
		else
			call SetUnitAbilityLevel(target_0, 'A0AS', -itog1_0 + 1)
			call SetUnitAbilityLevel(target_0, 'A0AG', 1)
		endif
	else
		if itog_0 + armor_0 >= $3E8 then
			call SetUnitAbilityLevel(target_0, 'A087', $A)
			call SetUnitAbilityLevel(target_0, 'A0AH', $A)
			call SetUnitAbilityLevel(target_0, 'A0AG', $A)
			call SetUnitAbilityLevel(target_0, 'A0D8', 1)
			call SetUnitAbilityLevel(target_0, 'A0AT', 1)
			call SetUnitAbilityLevel(target_0, 'A0AS', 1)
		endif
		if itog_0 + armor_0 <= -$3E8 then
			call SetUnitAbilityLevel(target_0, 'A087', 1)
			call SetUnitAbilityLevel(target_0, 'A0AH', 1)
			call SetUnitAbilityLevel(target_0, 'A0AG', 1)
			call SetUnitAbilityLevel(target_0, 'A0D8', $A)
			call SetUnitAbilityLevel(target_0, 'A0AT', $A)
			call SetUnitAbilityLevel(target_0, 'A0AS', $A)
		endif
	endif
endfunction

function SetAttackSpeedAbilityLevel takes unit target, integer attackspeed returns nothing
	local integer as100
	local integer as10
	local integer as1
	local integer unas100
	local integer unas10
	local integer unas1
	local integer as
	local integer unas
	local integer itog100 = 0
	local integer itog10 = 0
	local integer itog1 = 0
	local integer itog
	if GetUnitAbilityLevel(target_0, 'A0B3') <= 0 then
		call UnitAddAbility(target_0, 'A0B3')
		call UnitAddAbility(target_0, 'A0B4')
		call UnitAddAbility(target_0, 'A0B5')
		call UnitAddAbility(target_0, 'A0E9')
		call UnitAddAbility(target_0, 'A0EA')
		call UnitAddAbility(target_0, 'A0EB')
		call UnitMakeAbilityPermanent(target_0, true, 'A0B3')
		call UnitMakeAbilityPermanent(target_0, true, 'A0B4')
		call UnitMakeAbilityPermanent(target_0, true, 'A0B5')
		call UnitMakeAbilityPermanent(target_0, true, 'A0E9')
		call UnitMakeAbilityPermanent(target_0, true, 'A0EA')
		call UnitMakeAbilityPermanent(target_0, true, 'A0EB')
	endif
	set as100_0 = GetUnitAbilityLevel(target_0, 'A0B5')
	set as10_0 = GetUnitAbilityLevel(target_0, 'A0B4')
	set as1_0 = GetUnitAbilityLevel(target_0, 'A0B3')
	set unas100_0 = GetUnitAbilityLevel(target_0, 'A0EB')
	set unas10_0 = GetUnitAbilityLevel(target_0, 'A0EA')
	set unas1_0 = GetUnitAbilityLevel(target_0, 'A0E9')
	set as_0 = ((as100_0 - 1) * 'd') + ((as10_0 - 1) * $A) + as1_0 - 1
	set unas_0 = ((unas100_0 - 1) * 'd') + ((unas10_0 - 1) * $A) + unas1_0 - 1
	set itog_0 = as_0 - unas_0
	if itog_0 + attackspeed_0 < $3E8 and itog_0 + attackspeed_0 > -$3E8 then
		set itog_0 = itog_0 + attackspeed_0
		set itog100_0 = (itog_0 / 'd')
		set itog10_0 = (itog_0 - (itog100_0 * 'd')) / $A
		set itog1_0 = itog_0 - (itog100_0 * 'd') - (itog10_0 * $A)
		if itog100_0 >= 0 then
			call SetUnitAbilityLevel(target_0, 'A0B5', itog100_0 + 1)
			call SetUnitAbilityLevel(target_0, 'A0EB', 1)
		else
			call SetUnitAbilityLevel(target_0, 'A0EB', -itog100_0 + 1)
			call SetUnitAbilityLevel(target_0, 'A0B5', 1)
		endif
		if itog10_0 >= 0 then
			call SetUnitAbilityLevel(target_0, 'A0B4', itog10_0 + 1)
			call SetUnitAbilityLevel(target_0, 'A0EA', 1)
		else
			call SetUnitAbilityLevel(target_0, 'A0EA', -itog10_0 + 1)
			call SetUnitAbilityLevel(target_0, 'A0B4', 1)
		endif
		if itog1_0 >= 0 then
			call SetUnitAbilityLevel(target_0, 'A0B3', itog1_0 + 1)
			call SetUnitAbilityLevel(target_0, 'A0E9', 1)
		else
			call SetUnitAbilityLevel(target_0, 'A0E9', -itog1_0 + 1)
			call SetUnitAbilityLevel(target_0, 'A0B3', 1)
		endif
	else
		if itog_0 + attackspeed_0 >= $3E8 then
			call SetUnitAbilityLevel(target_0, 'A0B5', $A)
			call SetUnitAbilityLevel(target_0, 'A0B4', $A)
			call SetUnitAbilityLevel(target_0, 'A0B3', $A)
			call SetUnitAbilityLevel(target_0, 'A0EB', 1)
			call SetUnitAbilityLevel(target_0, 'A0EA', 1)
			call SetUnitAbilityLevel(target_0, 'A0E9', 1)
		endif
		if itog_0 + attackspeed_0 <= -$3E8 then
			call SetUnitAbilityLevel(target_0, 'A0B5', 1)
			call SetUnitAbilityLevel(target_0, 'A0B4', 1)
			call SetUnitAbilityLevel(target_0, 'A0B3', 1)
			call SetUnitAbilityLevel(target_0, 'A0EB', $A)
			call SetUnitAbilityLevel(target_0, 'A0EA', $A)
			call SetUnitAbilityLevel(target_0, 'A0E9', $A)
		endif
	endif
endfunction

function MaxStateModifierID takes unitstate u returns integer
	if u_0 == UNIT_STATE_MAX_LIFE_1 then
		return 'A07A'
	elseif u_0 == UNIT_STATE_MAX_LIFE_1 then
		return 'A07E'
	endif
	return 0
endfunction

function SetUnitMaxState takes unit u, unitstate us, integer val returns nothing
	local integer i = MaxStateModifierID(us_0)
	local integer c = val_0
	if i_0 == 0 then
		return
	endif
	if c_0 > 0 then
		loop
			exitwhen c_0 == 0
			call UnitAddAbility(u_0, i_0)
			if c_0 >= 'd' then
				set c_0 = c_0 - 'd'
				call SetUnitAbilityLevel(u_0, i_0, 4)
			elseif c_0 >= 'd' then
				set c_0 = c_0 - $A
				call SetUnitAbilityLevel(u_0, i_0, 3)
			else
				set c_0 = c_0 - 1
				call SetUnitAbilityLevel(u_0, i_0, 2)
			endif
			call UnitRemoveAbility(u_0, i_0)
		endloop
	elseif c_0 > 0 then
		set c_0 = -c_0
		loop
			exitwhen c_0 == 0
			call UnitAddAbility(u_0, i_0)
			if c_0 >= 'd' then
				set c_0 = c_0 - 'd'
				call SetUnitAbilityLevel(u_0, i_0, 7)
			elseif c_0 >= 'd' then
				set c_0 = c_0 - $A
				call SetUnitAbilityLevel(u_0, i_0, 6)
			else
				set c_0 = c_0 - 1
				call SetUnitAbilityLevel(u_0, i_0, 5)
			endif
			call UnitRemoveAbility(u_0, i_0)
		endloop
	endif
endfunction

function SetUnitLifeAndManaRegenerationActions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer ht = GetHandleId(t_0)
	local unit target = LoadUnitHandle(udg_hash_1, ht_0, 1)
	local integer life = LoadInteger(udg_hash_1, ht_0, 2)
	local integer mana = LoadInteger(udg_hash_1, ht_0, 3)
	local real uslife = GetUnitState(target_0, UNIT_STATE_LIFE_1)
	if uslife_0 > .405 and (life_0 != 0 or mana_0 != 0) then
		call SetUnitState(target_0, UNIT_STATE_LIFE_1, uslife_0 + (I2R(life_0) / $A))
		call SetUnitState(target_0, UNIT_STATE_MANA_1, GetUnitState(target_0, UNIT_STATE_MANA_1) + (I2R(mana_0) / $A))
	elseif uslife_0 > .405 and (life_0 != 0 or mana_0 != 0) then
		call FlushChildHashtable(udg_hash_1, ht_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set target_0 = null
endfunction

function SetUnitLifeAndManaRegeneration takes unit target, string s, integer regen returns nothing
	local integer hunit = GetHandleId(target_0)
	local timer t = LoadTimerHandle(udg_hash_1, hunit_0, 50)
	local integer ht
	local integer life = 0
	local integer mana = 0
	if t_0 == null then
		set t_0 = CreateTimer()
		set ht_0 = GetHandleId(t_0)
		set life_0 = 0
		set mana_0 = 0
		call SaveTimerHandle(udg_hash_1, hunit_0, 50, t_0)
		call SaveUnitHandle(udg_hash_1, ht_0, 1, target_0)
	endif
	set ht_0 = GetHandleId(t_0)
	set life_0 = LoadInteger(udg_hash_1, ht_0, 2)
	set mana_0 = LoadInteger(udg_hash_1, ht_0, 3)
	if s_0 == "life" then
		set life_0 = life_0 + regen_0
		call SaveInteger(udg_hash_1, ht_0, 2, life_0)
	endif
	if s_0 == "mana" then
		set mana_0 = mana_0 + regen_0
		call SaveInteger(udg_hash_1, ht_0, 3, mana_0)
	endif
	call TimerStart(t_0, .1, true, function SetUnitLifeAndManaRegenerationActions)
	set t_0 = null
endfunction

function RandomUnitFromGroup takes integer count, group g returns nothing
	local unit u
	local integer irand
	local unit first = null
	local unit random = null
	local integer howunits = 0
	local integer howunits2
	local integer intran
	local integer schetchik = 0
	call GroupClear(udg_GroupRandomUnitFromGroup_1)
	loop
		set first_0 = FirstOfGroup(g_0)
		exitwhen first_0 == null
		if first_0 != null and GetUnitState(first_0, UNIT_STATE_LIFE_1) > .405 then
			set howunits_0 = howunits_0 + 1
			set u_0[howunits_0] = first_0
		endif
		call GroupRemoveUnit(g_0, first_0)
	endloop
	set howunits2_0 = howunits_0
	loop
		exitwhen howunits_0 <= 0 or count_0 <= schetchik_0
		set intran_0 = GetRandomInt(1, howunits_0)
		set random_0 = u_0[intran_0]
		call GroupAddUnit(udg_GroupRandomUnitFromGroup_1, random_0)
		set u_0[intran_0] = u_0[howunits_0]
		set howunits_0 = howunits_0 - 1
		set schetchik_0 = schetchik_0 + 1
		set random_0 = null
	endloop
	loop
		exitwhen howunits2_0 <= 0
		set u_0[howunits2_0] = null
		set howunits2_0 = howunits2_0 - 1
	endloop
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set first_0 = null
endfunction

function MoveUnit_Timer takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit u = LoadUnitHandle(udg_hash_1, h_0, 1)
	local real speed = LoadReal(udg_hash_1, h_0, 2)
	local real speedreduction = LoadReal(udg_hash_1, h_0, 3)
	local real angle = LoadReal(udg_hash_1, h_0, 4)
	local integer wait = LoadInteger(udg_hash_1, h_0, 7)
	local integer wait2 = LoadInteger(udg_hash_1, h_0, 8)
	local boolean pause = LoadBoolean(udg_hash_1, h_0, 9)
	local real dist = speed_0 - (speedreduction_0 * (wait2_0 * 2 - wait_0))
	local real x = GetUnitX(u_0) + dist_0 * Cos(angle_0 * bj_DEGTORAD_1)
	local real y = GetUnitY(u_0) + dist_0 * Sin(angle_0 * bj_DEGTORAD_1)
	if IsTerrainPathable(x_0, y_0, PATHING_TYPE_FLYABILITY_1) == false and (GetUnitState(u_0, UNIT_STATE_LIFE_1) > .405 or LoadReal(udg_hash_1, h_0, 5) != .0) then
		if pause_0 then
			call SetUnitPosition(u_0, x_0, y_0)
		else
			call SetUnitX(u_0, x_0)
			call SetUnitY(u_0, y_0)
		endif
	endif
	if wait_0 == wait2_0 and LoadReal(udg_hash_1, h_0, 5) > .0 then
		call SetUnitFlyHeight(u_0, -(LoadReal(udg_hash_1, h_0, 5)), LoadReal(udg_hash_1, h_0, 6))
	endif
	set wait_0 = wait_0 - 1
	if wait_0 <= 0 then
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	else
		call SaveInteger(udg_hash_1, h_0, 7, wait_0)
	endif
	set u_0 = null
endfunction

function MoveUnit takes unit u, real time, real speed, real speedreduction, real angle, real height, boolean pause returns nothing
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local integer wait = R2I(time_0 / .03)
	call SaveUnitHandle(udg_hash_1, h_0, 1, u_0)
	call SaveReal(udg_hash_1, h_0, 2, speed_0 / 33.33)
	if speedreduction_0 != .0 then
		call SaveReal(udg_hash_1, h_0, 3, (speedreduction_0 / 33.33) / 33.33)
	endif
	call SaveReal(udg_hash_1, h_0, 4, angle_0)
	if height_0 != .0 then
		call UnitAddAbility(u_0, 'Amrf')
		call UnitRemoveAbility(u_0, 'Amrf')
		call SetUnitFlyHeight(u_0, height_0, height_0 / (time_0 / 2))
		call SaveReal(udg_hash_1, h_0, 5, height_0)
		call SaveReal(udg_hash_1, h_0, 6, height_0 / (time_0 / 2))
	endif
	call SaveInteger(udg_hash_1, h_0, 7, wait_0)
	call SaveInteger(udg_hash_1, h_0, 8, wait_0 / 2)
	call SaveBoolean(udg_hash_1, h_0, 9, pause_0)
	call TimerStart(t_0, .03, true, function MoveUnit_Timer)
	set t_0 = null
endfunction

function SimError takes player ForPlayer, string msg returns nothing
	if udg_SimError_1 == null then
		set udg_SimError_1 = CreateSoundFromLabel("InterfaceError", false, false, false, $A, $A)
	endif
	if (GetLocalPlayer() == ForPlayer_0) then
		call ClearTextMessages()
		call DisplayTimedTextToPlayer(ForPlayer_0, .52, -1., 3., "|cffffcc00" + msg_0 + "|r")
		call StartSound(udg_SimError_1)
	endif
endfunction

function CreateTexttag takes string s, real size, integer alpha, real x, real y, real offset, real velx, real vely, real lifespain returns nothing
	local texttag txt = CreateTextTag()
	call SetTextTagText(txt_0, s_0, size_0)
	call SetTextTagColor(txt_0, $FF, $FF, $FF, alpha_0)
	call SetTextTagPos(txt_0, x_0, y_0, offset_0)
	call SetTextTagVelocity(txt_0, velx_0, vely_0)
	call SetTextTagPermanent(txt_0, false)
	if lifespain_0 > .0 then
		call SetTextTagLifespan(txt_0, lifespain_0)
		call SetTextTagFadepoint(txt_0, lifespain_0 / 2)
	endif
	set txt_0 = null
endfunction

function CountItemOfTypeOnUnit takes unit u, integer itemId returns integer
	local integer index = 0
	local integer count = 0
	local item indexItem
	loop
		set indexItem_0 = UnitItemInSlot(u_0, index_0)
		if (indexItem_0 != null) and (GetItemTypeId(indexItem_0) == itemId_0) then
			set count_0 = count_0 + 1
		endif
		set index_0 = index_0 + 1
		exitwhen index_0 >= 6
	endloop
	return count_0
endfunction

function SoundForPlayer takes player ForPlayer, integer number returns nothing
	if (GetLocalPlayer() == ForPlayer_0) then
		call StartSound(udg_Game_Sound_1[number_0])
	endif
endfunction

function LinkItems takes integer count1, integer id1, integer count2, integer id2, integer count3, integer id3, integer count4, integer id4, integer count5, integer id5, integer id, string sef, boolean remove returns nothing
	local integer count
	local integer itemid
	local item iteminslot
	local unit hero = GetTriggerUnit()
	local player p = GetOwningPlayer(hero_0)
	local item manipulateditem = GetManipulatedItem()
	local integer i = 0
	local integer lopa = 1
	local integer index
	local item indexItem
	local integer counter = 0
	local integer numerator = 0
	local boolean bol = true
	local item finalitem
	local integer charges = 0
	local integer buysumm = 0
	local integer finalcost
	local integer costdifference
	local item fastpurchaseitem
	local boolean fullinv = true
	local boolean stoppurchase = false
	set count_0[1] = count1_0
	set count_0[2] = count2_0
	set count_0[3] = count3_0
	set count_0[4] = count4_0
	set count_0[5] = count5_0
	set itemid_0[1] = id1_0
	set itemid_0[2] = id2_0
	set itemid_0[3] = id3_0
	set itemid_0[4] = id4_0
	set itemid_0[5] = id5_0
	loop
		exitwhen lopa_0 > 5
		if count_0[lopa_0] > 0 then
			set index_0 = 0
			set numerator_0 = 0
			loop
				exitwhen index_0 > 5
				set indexItem_0 = UnitItemInSlot(hero_0, index_0)
				if (indexItem_0 != null) and (GetItemTypeId(indexItem_0) == itemid_0[lopa_0]) and count_0[lopa_0] > numerator_0 then
					if GetItemCharges(indexItem_0) > 0 and GetItemCharges(indexItem_0) > charges_0 then
						set charges_0 = GetItemCharges(indexItem_0)
					endif
					set buysumm_0 = buysumm_0 + LoadInteger(udg_hash_1, itemid_0[lopa_0], 'x')
					set counter_0 = counter_0 + 1
					set numerator_0 = numerator_0 + 1
					set iteminslot_0[counter_0] = indexItem_0
					if udg_Boolean_Player_Fast_Purchase_1[GetPlayerId(p_0) + 1] then
						set fastpurchaseitem_0[counter_0] = indexItem_0
					endif
				endif
				set index_0 = index_0 + 1
			endloop
			if numerator_0 < count_0[lopa_0] then
				set bol_0 = false
			endif
		endif
		set lopa_0 = lopa_0 + 1
	endloop
	if LoadStr(udg_hash_1, GetUnitTypeId(hero_0), 91) != "ranged" and GetItemTypeId(manipulateditem_0) == 'I041' then
		set bol_0 = false
		set stoppurchase_0 = true
		set udg_Show_Item_Link_Text_1 = false
		call SimError(p_0, "Этот предмет предназначен только для героев дальнего боя!!!")
		call SetPlayerState(p_0, PLAYER_STATE_RESOURCE_GOLD_1, GetPlayerState(p_0, PLAYER_STATE_RESOURCE_GOLD_1) + R2I(GetWidgetLife(manipulateditem_0)))
	endif
	if LoadStr(udg_hash_1, GetUnitTypeId(hero_0), 91) != "melee" and (GetItemTypeId(manipulateditem_0) == 'I01R' or GetItemTypeId(manipulateditem_0) == 'I02M') then
		set bol_0 = false
		set stoppurchase_0 = true
		set udg_Show_Item_Link_Text_1 = false
		call SimError(p_0, "Этот предмет предназначен только для героев ближнего боя!!!")
		call SetPlayerState(p_0, PLAYER_STATE_RESOURCE_GOLD_1, GetPlayerState(p_0, PLAYER_STATE_RESOURCE_GOLD_1) + R2I(GetWidgetLife(manipulateditem_0)))
	else
		if (GetItemTypeId(manipulateditem_0) == 'I01R' or GetItemTypeId(manipulateditem_0) == 'I02M') then
			if (GetItemTypeId(manipulateditem_0) == 'I01R' and (CountItemOfTypeOnUnit(hero_0, 'I02E') + CountItemOfTypeOnUnit(hero_0, 'I02N')) >= 1) or (GetItemTypeId(manipulateditem_0) == 'I02M' and CountItemOfTypeOnUnit(hero_0, 'I02N') >= 1) then
				set bol_0 = false
				set stoppurchase_0 = true
				set udg_Show_Item_Link_Text_1 = false
				call SimError(p_0, "У вашего героя уже есть Топор Вождя Орков или Крушитель!!!")
				call SetPlayerState(p_0, PLAYER_STATE_RESOURCE_GOLD_1, GetPlayerState(p_0, PLAYER_STATE_RESOURCE_GOLD_1) + R2I(GetWidgetLife(manipulateditem_0)))
			endif
		endif
	endif
	if bol_0 then
		loop
			exitwhen counter_0 <= 0
			call RemoveItem(iteminslot_0[counter_0])
			set iteminslot_0[counter_0] = null
			set counter_0 = counter_0 - 1
		endloop
		set finalitem_0 = CreateItem(id_0, GetUnitX(hero_0), GetUnitY(hero_0))
		call UnitAddItem(hero_0, finalitem_0)
		call SetItemUserData(finalitem_0, GetPlayerId(GetOwningPlayer(hero_0)) + 1)
		if IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS_1) and udg_System_ShowAbil_And_Items_Hint_1[GetPlayerId(GetLocalPlayer()) + 1] then
			call DisplayTextToPlayer(GetLocalPlayer(), .0, .0, udg_ColorString_1[GetPlayerId(p_0) + 1] + GetPlayerName(p_0) + "|r приобрел предмет |cff99ccff" + GetItemName(finalitem_0) + "|r")
		endif
		if (id_0 == 'I055' or id_0 == 'I056' or id_0 == 'I057' or id_0 == 'I058') then
			call SetItemCharges(finalitem_0, 1)
		endif
		if charges_0 != 0 then
			call SetItemCharges(finalitem_0, charges_0)
		endif
		set udg_Integer_Item_Recipe_Level_1 = -1
		set udg_Show_Item_Link_Text_1 = false
		if sef_0 == "" then
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIam\\AIamTarget.mdl", hero_0, "origin"))
		else
			call DestroyEffect(AddSpecialEffectTarget(sef_0, hero_0, "origin"))
		endif
	else
		if udg_Boolean_Player_Fast_Purchase_1[GetPlayerId(p_0) + 1] and GetItemType(manipulateditem_0) == ITEM_TYPE_POWERUP_1 and stoppurchase_0 == false and LoadInteger(udg_hash_1, id_0, 'y') <= 0 then
			set finalcost_0 = LoadInteger(udg_hash_1, id_0, 'x')
			set costdifference_0 = GetPlayerState(p_0, PLAYER_STATE_RESOURCE_GOLD_1) + R2I(GetWidgetLife(manipulateditem_0)) - finalcost_0 + buysumm_0
			if costdifference_0 >= 0 then
				set lopa_0 = 0
				loop
					exitwhen lopa_0 > 5
					if fastpurchaseitem_0[lopa_0] != null then
						call RemoveItem(fastpurchaseitem_0[lopa_0])
					endif
					set fastpurchaseitem_0[lopa_0] = null
					set iteminslot_0[lopa_0] = null
					set lopa_0 = lopa_0 + 1
				endloop
				set lopa_0 = 0
				loop
					exitwhen lopa_0 > 5
					if UnitItemInSlot(hero_0, lopa_0) == null then
						set fullinv_0 = false
					endif
					set lopa_0 = lopa_0 + 1
				endloop
				if fullinv_0 == false then
					set finalitem_0 = CreateItem(id_0, GetUnitX(hero_0), GetUnitY(hero_0))
					call UnitAddItem(hero_0, finalitem_0)
					call SetItemUserData(finalitem_0, GetPlayerId(GetOwningPlayer(hero_0)) + 1)
					call SetPlayerState(p_0, PLAYER_STATE_RESOURCE_GOLD_1, GetPlayerState(p_0, PLAYER_STATE_RESOURCE_GOLD_1) + R2I(GetWidgetLife(manipulateditem_0)) - finalcost_0 + buysumm_0)
					if IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS_1) and udg_System_ShowAbil_And_Items_Hint_1[GetPlayerId(GetLocalPlayer()) + 1] then
						call DisplayTextToPlayer(GetLocalPlayer(), .0, .0, udg_ColorString_1[GetPlayerId(p_0) + 1] + GetPlayerName(p_0) + "|r приобрел предмет |cff99ccff" + GetItemName(finalitem_0) + "|r")
					endif
					if (id_0 == 'I055' or id_0 == 'I056' or id_0 == 'I057' or id_0 == 'I058') then
						call SetItemCharges(finalitem_0, 1)
					endif
					if charges_0 != 0 then
						call SetItemCharges(finalitem_0, charges_0)
					endif
					set udg_Integer_Item_Recipe_Level_1 = -1
					set udg_Show_Item_Link_Text_1 = false
					if sef_0 == "" then
						call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIam\\AIamTarget.mdl", hero_0, "origin"))
					else
						call DestroyEffect(AddSpecialEffectTarget(sef_0, hero_0, "origin"))
					endif
				else
					call SoundForPlayer(p_0, $C)
					call SimError(p_0, "Недостаточно места в инвентаре.")
				endif
			else
				call SoundForPlayer(p_0, $D)
				call SimError(p_0, "Недостаточно золота для быстрой покупки!!!")
			endif
		endif
	endif
	if GetItemType(manipulateditem_0) == ITEM_TYPE_POWERUP_1 then
		if bol_0 == false then
			set udg_Integer_Item_Recipe_Level_1 = udg_Integer_Item_Recipe_Level_1 - 1
		endif
		if udg_Integer_Item_Recipe_Level_1 < 0 and udg_Show_Item_Link_Text_1 then
			if udg_Boolean_Player_Fast_Purchase_1[GetPlayerId(p_0) + 1] and LoadInteger(udg_hash_1, id_0, 0) <= 0 then
				if fullinv_0 == false then
					call SoundForPlayer(p_0, $D)
					call SimError(p_0, "Недостаточно золота для быстрой покупки!!!")
				endif
			else
				call SimError(p_0, "Для того, чтобы собрать предмет, требуются все компоненты!!!")
			endif
			call SetPlayerState(p_0, PLAYER_STATE_RESOURCE_GOLD_1, GetPlayerState(p_0, PLAYER_STATE_RESOURCE_GOLD_1) + R2I(GetWidgetLife(manipulateditem_0)))
		endif
		if udg_Integer_Item_Recipe_Level_1 < 0 then
			call RemoveItem(manipulateditem_0)
		endif
	endif
	set indexItem_0 = null
	set finalitem_0 = null
	set hero_0 = null
	set manipulateditem_0 = null
	set p_0 = null
endfunction

function ProgressBarMove takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local texttag txt = LoadTextTagHandle(udg_hash_1, h_0, 1)
	local unit u = LoadUnitHandle(udg_hash_1, h_0, 4)
	local integer counter = LoadInteger(udg_hash_1, h_0, 5)
	local string color = LoadStr(udg_hash_1, h_0, 6)
	local integer orderId = LoadInteger(udg_hash_1, h_0, 7)
	local integer length = LoadInteger(udg_hash_1, h_0, 8)
	local integer orderunit
	local boolean orderbool = false
	local boolean display = true
	local string scolor
	local string swhite
	local string s
	if counter_0 > 0 then
		set counter_0 = counter_0 - 1
		call SaveInteger(udg_hash_1, h_0, 5, counter_0)
		if orderId_0 != 0 then
			set orderbool_0 = true
		endif
		if orderbool_0 then
			set orderunit_0 = GetUnitCurrentOrder(u_0)
			if orderunit_0 == orderId_0 then
			else
				set display_0 = false
			endif
		endif
		if display_0 then
			set scolor_0 = color_0 + SubString("llllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllll", counter_0, length_0) + "|r"
			set swhite_0 = SubString("llllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllll", 0, counter_0)
			set s_0 = scolor_0 + swhite_0
			call SetTextTagText(txt_0, s_0, .0115)
		else
			set counter_0 = 0
			call SaveInteger(udg_hash_1, h_0, 5, counter_0)
		endif
	else
		call DestroyTextTag(txt_0)
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set txt_0 = null
	set u_0 = null
endfunction

function AddProgressBarfake takes unit u, real size, string color, string order, real time returns nothing
	local texttag txt = CreateTextTag()
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local real x = GetUnitX(u_0) + (125. * size_0) * Cos(180. * bj_DEGTORAD_1)
	local real y = GetUnitY(u_0) + (125. * size_0) * Sin(180. * bj_DEGTORAD_1)
	local integer counter = R2I('d' * size_0)
	local real periodic = time_0 / counter_0
	local integer orderId
	call SetTextTagText(txt_0, SubString("llllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllll", 0, R2I('d' * size_0)), .0115)
	call SetTextTagPos(txt_0, x_0, y_0, 200.)
	call SetTextTagPermanent(txt_0, false)
	call SaveTextTagHandle(udg_hash_1, h_0, 1, txt_0)
	call SaveUnitHandle(udg_hash_1, h_0, 4, u_0)
	call SaveInteger(udg_hash_1, h_0, 5, counter_0)
	call SaveStr(udg_hash_1, h_0, 6, color_0)
	if order_0 != "" then
		set orderId_0 = OrderId(order_0)
		if (orderId_0 != 0) then
		else
			set orderId_0 = UnitId(order_0)
			if (orderId_0 != 0) then
			endif
		endif
		call SaveInteger(udg_hash_1, h_0, 7, orderId_0)
	else
		call SaveInteger(udg_hash_1, h_0, 7, 0)
	endif
	call SaveInteger(udg_hash_1, h_0, 8, counter_0)
	call TimerStart(t_0, periodic_0, true, function ProgressBarMove)
	set txt_0 = null
	set t_0 = null
endfunction

function IsPointInRect takes real px, real py, real cx, real cy, real ax, real ay, real bx, real by returns boolean
	local real dot1 = (px_0 - cx_0) * (ax_0 - cx_0) + (py_0 - cy_0) * (ay_0 - cy_0)
	local real dot2 = (ax_0 - cx_0) * (ax_0 - cx_0) + (ay_0 - cy_0) * (ay_0 - cy_0)
	local real dot3 = (px_0 - cx_0) * (bx_0 - cx_0) + (py_0 - cy_0) * (by_0 - cy_0)
	local real dot4 = (bx_0 - cx_0) * (bx_0 - cx_0) + (by_0 - cy_0) * (by_0 - cy_0)
	return dot1_0 >= 0 and dot1_0 <= dot2_0 and dot3_0 >= 0 and dot3_0 <= dot4_0
endfunction

function UnitPeriodicPostionMovePeriodic takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit target = LoadUnitHandle(udg_hash_1, h_0, 1)
	local integer wait = LoadInteger(udg_hash_1, h_0, 2)
	call SetUnitX(target_0, GetUnitX(target_0))
	call SetUnitY(target_0, GetUnitY(target_0))
	call IssueImmediateOrderById(target_0, $D0004)
	if wait_0 <= 0 then
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	else
		call SaveInteger(udg_hash_1, h_0, 2, wait_0 - 1)
	endif
	set t_0 = null
	set target_0 = null
endfunction

function UnitPeriodicPostionMove takes unit target, real periodic, real time returns nothing
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	call SaveUnitHandle(udg_hash_1, h_0, 1, target_0)
	call SaveInteger(udg_hash_1, h_0, 2, R2I(time_0 / periodic_0))
	call TimerStart(t_0, periodic_0, true, function UnitPeriodicPostionMovePeriodic)
	set t_0 = null
endfunction

function StunUnitTimed_Periodic takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit dammi = LoadUnitHandle(udg_hash_1, h_0, 1)
	local unit target = LoadUnitHandle(udg_hash_1, h_0, 2)
	local integer stun100 = LoadInteger(udg_hash_1, h_0, 3)
	local integer stun10 = LoadInteger(udg_hash_1, h_0, 4)
	local integer stun1 = LoadInteger(udg_hash_1, h_0, 5)
	local integer stunstage = LoadInteger(udg_hash_1, h_0, 6)
	set stunstage_0 = stunstage_0 + 1
	call SaveInteger(udg_hash_1, h_0, 6, stunstage_0)
	if stunstage_0 == 1 then
		if GetUnitAbilityLevel(dammi_0, 'A0H4') > 0 then
			call IssueTargetOrderById(dammi_0, $D007F, target_0)
		endif
		call TimerStart(t_0, stun100_0 * 1., false, function StunUnitTimed_Periodic)
	endif
	if stunstage_0 == 2 then
		if GetUnitAbilityLevel(dammi_0, 'A0H5') > 0 then
			call IssueTargetOrderById(dammi_0, $D0107, target_0)
		endif
		call TimerStart(t_0, stun10_0 * .1, false, function StunUnitTimed_Periodic)
	endif
	if stunstage_0 == 3 then
		if GetUnitAbilityLevel(dammi_0, 'A0H6') > 0 then
			call IssueTargetOrderById(dammi_0, $D011C, target_0)
		endif
		call TimerStart(t_0, stun1_0 * .01, false, function StunUnitTimed_Periodic)
	endif
	if stunstage_0 >= 4 then
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set dammi_0 = null
	set target_0 = null
endfunction

function StunUnitTimed takes unit target, real time returns nothing
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local unit dammi = CreateUnit(Player($F), 'h00U', GetUnitX(target_0), GetUnitY(target_0), .0)
	local integer stun100
	local integer stun10
	local integer stun1
	local integer stunstage = 0
	if time_0 >= 10. then
		set time_0 = 9.99
	endif
	set stun100_0 = R2I(time_0)
	set stun10_0 = R2I((time_0 - stun100_0) * $A)
	set stun1_0 = R2I(time_0 * 'd') - stun100_0 * 'd' - stun10_0 * $A
	if stun100_0 > 0 then
		call UnitAddAbility(dammi_0, 'A0H4')
		call SetUnitAbilityLevel(dammi_0, 'A0H4', stun100_0)
	endif
	if stun10_0 > 0 then
		call UnitAddAbility(dammi_0, 'A0H5')
		call SetUnitAbilityLevel(dammi_0, 'A0H5', stun10_0)
	endif
	if stun1_0 > 0 then
		call UnitAddAbility(dammi_0, 'A0H6')
		call SetUnitAbilityLevel(dammi_0, 'A0H6', stun1_0)
	endif
	call UnitApplyTimedLife(dammi_0, 'BTLF', I2R(stun100_0) + 2.)
	call SaveUnitHandle(udg_hash_1, h_0, 1, dammi_0)
	call SaveUnitHandle(udg_hash_1, h_0, 2, target_0)
	call SaveInteger(udg_hash_1, h_0, 3, stun100_0)
	call SaveInteger(udg_hash_1, h_0, 4, stun10_0)
	call SaveInteger(udg_hash_1, h_0, 5, stun1_0)
	call SaveInteger(udg_hash_1, h_0, 6, stunstage_0)
	call TimerStart(t_0, .0, false, function StunUnitTimed_Periodic)
	set t_0 = null
	set dammi_0 = null
endfunction

function RemovePotionAfterMinute takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit dammi = LoadUnitHandle(udg_hash_1, h_0, 1)
	local effect ef = LoadEffectHandle(udg_hash_1, h_0, 2)
	local region reg = LoadRegionHandle(udg_hash_1, h_0, 3)
	local rect rct = LoadRectHandle(udg_hash_1, h_0, 4)
	call KillUnit(dammi_0)
	call DestroyEffect(ef_0)
	call FlushChildHashtable(udg_hash_1, GetHandleId(reg_0))
	call FlushChildHashtable(udg_hash_1, GetHandleId(dammi_0))
	call RemoveRect(rct_0)
	call RemoveRegion(reg_0)
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
	set dammi_0 = null
	set ef_0 = null
	set reg_0 = null
	set rct_0 = null
endfunction

function CreatePotion takes real x, real y, integer potionmin, integer potionmax returns nothing
	local integer potionindex = GetRandomInt(potionmin_0, potionmax_0)
	local unit dammi = CreateUnit(Player($F), 'h00U', x_0, y_0, GetRandomReal(.0, 360.))
	local effect ef = AddSpecialEffectTarget(udg_Potion_Effect_1[potionindex_0], dammi_0, "origin")
	local string healtype = udg_Potion_Type_1[potionindex_0]
	local integer heal = udg_Potion_Heal_Amount_1[potionindex_0]
	local real size = udg_Potion_Size_1[potionindex_0]
	local group g = CreateGroup()
	local unit Picked
	local boolean destroy = false
	local texttag txt
	local real vel = .0221875
	local real angle = 45. + GetRandomReal(.0, 90.)
	local real xvel = vel_0 * Cos(angle_0 * bj_DEGTORAD_1)
	local real yvel = vel_0 * Sin(angle_0 * bj_DEGTORAD_1)
	local real state
	local rect rct
	local region reg
	local timer t
	local integer h
	call SetUnitScale(dammi_0, size_0, size_0, size_0)
	call GroupEnumUnitsInRange(g_0, x_0, y_0, 150., null)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null or destroy_0
		if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 and GetPlayerId(GetOwningPlayer(Picked_0)) <= 8 and IsUnitType(Picked_0, UNIT_TYPE_HERO_1) and GetUnitTypeId(Picked_0) != 'h00U' then
			set state_0 = GetUnitState(Picked_0, UNIT_STATE_LIFE_1)
			if healtype_0 == "life" and (state_0 < GetUnitState(Picked_0, UNIT_STATE_MAX_LIFE_1)) then
				call SetUnitState(Picked_0, UNIT_STATE_LIFE_1, state_0 + heal_0)
				call DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", Picked_0, "origin"), 2.)
				set txt_0 = CreateTextTag()
				call SetTextTagText(txt_0, "|cFF00DC00+" + I2S(heal_0) + "|r", .03)
				call SetTextTagPos(txt_0, x_0, y_0, .0)
				call SetTextTagColor(txt_0, 0, 0, 0, $C8)
				call SetTextTagVelocity(txt_0, xvel_0, yvel_0)
				call SetTextTagLifespan(txt_0, 3.)
				call SetTextTagFadepoint(txt_0, .0)
				call SetTextTagPermanent(txt_0, false)
				set destroy_0 = true
			endif
			set state_0 = GetUnitState(Picked_0, UNIT_STATE_MANA_1)
			if healtype_0 == "mana" and (state_0 < GetUnitState(Picked_0, UNIT_STATE_MAX_MANA_1)) then
				call SetUnitState(Picked_0, UNIT_STATE_MANA_1, state_0 + heal_0)
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIma\\AImaTarget.mdl", Picked_0, "origin"))
				set txt_0 = CreateTextTag()
				call SetTextTagText(txt_0, "|c000347FC+" + I2S(heal_0) + "|r", .03)
				call SetTextTagPos(txt_0, x_0, y_0, .0)
				call SetTextTagColor(txt_0, 0, 0, 0, $C8)
				call SetTextTagVelocity(txt_0, xvel_0, yvel_0)
				call SetTextTagLifespan(txt_0, 3.)
				call SetTextTagFadepoint(txt_0, .0)
				call SetTextTagPermanent(txt_0, false)
				set destroy_0 = true
			endif
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	if destroy_0 then
		call KillUnit(dammi_0)
		call DestroyEffect(ef_0)
	else
		set reg_0 = CreateRegion()
		set rct_0 = Rect(x_0 - 100., y_0 - 100., x_0 + 100., y_0 + 100.)
		call RegionAddRect(reg_0, rct_0)
		call SaveUnitHandle(udg_hash_1, GetHandleId(reg_0), 1, dammi_0)
		call SaveRectHandle(udg_hash_1, GetHandleId(reg_0), 2, rct_0)
		call SaveInteger(udg_hash_1, GetHandleId(dammi_0), 1, potionindex_0)
		call SaveEffectHandle(udg_hash_1, GetHandleId(dammi_0), 2, ef_0)
		call TriggerRegisterEnterRegion(gg_trg_Check_Potion_Picked_Up_1, reg_0, null)
		set rct_0 = null
		set reg_0 = null
		set t_0 = CreateTimer()
		set h_0 = GetHandleId(t_0)
		call SaveUnitHandle(udg_hash_1, h_0, 1, dammi_0)
		call SaveEffectHandle(udg_hash_1, h_0, 2, ef_0)
		call SaveRegionHandle(udg_hash_1, h_0, 3, reg_0)
		call SaveRectHandle(udg_hash_1, h_0, 4, rct_0)
		call TimerStart(t_0, 60., false, function RemovePotionAfterMinute)
	endif
	set dammi_0 = null
	set ef_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set Picked_0 = null
	set txt_0 = null
	set t_0 = null
endfunction

function TimerToFunctionDestroy takes nothing returns nothing
	local timer t2 = GetExpiredTimer()
	local integer h2 = GetHandleId(t2_0)
	local timer t = LoadTimerHandle(udg_hash_1, h2_0, 1)
	local timerdialog td = LoadTimerDialogHandle(udg_hash_1, h2_0, 2)
	call DestroyTimer(t_0)
	call DestroyTimer(t2_0)
	call DestroyTimerDialog(td_0)
	call FlushChildHashtable(udg_hash_1, h2_0)
	set t_0 = null
	set t2_0 = null
	set td_0 = null
endfunction

function TimerToFunction takes real time, string s, code funcname returns nothing
	local timer t = CreateTimer()
	local timerdialog td
	local timer t2 = CreateTimer()
	local integer h2 = GetHandleId(t2_0)
	if s_0 != "" then
		set td_0 = CreateTimerDialog(t_0)
		call TimerDialogSetTitle(td_0, s_0)
		call TimerDialogDisplay(td_0, true)
		call TimerDialogSetTimeColor(td_0, $FF, 45, 45, 20)
		call SaveTimerDialogHandle(udg_hash_1, h2_0, 2, td_0)
		set td_0 = null
	endif
	call TimerStart(t_0, time_0, false, funcname_0)
	call TimerStart(t2_0, time_0 + 1., false, function TimerToFunctionDestroy)
	call SaveTimerHandle(udg_hash_1, h2_0, 1, t_0)
	set t_0 = null
	set t2_0 = null
endfunction

function HintsToPlayerWithDelay_ShowHint takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local integer count = LoadInteger(udg_hash_1, h_0, $A)
	local player p = LoadPlayerHandle(udg_hash_1, h_0, $B)
	local string s
	if count_0 > 0 then
		set s_0 = LoadStr(udg_hash_1, h_0, count_0)
		call DisplayTimedTextToPlayer(p_0, .0, .0, 10., "|cff32cd32ПОДСКАЗКА:|r")
		call DisplayTimedTextToPlayer(p_0, .0, .0, 10., s_0)
		call SoundForPlayer(p_0, 1)
		set count_0 = count_0 - 1
		call SaveInteger(udg_hash_1, h_0, $A, count_0)
	else
		call DestroyTimer(t_0)
		call FlushChildHashtable(udg_hash_1, h_0)
	endif
	set t_0 = null
	set p_0 = null
endfunction

function HintsToPlayerWithDelay takes player p returns nothing
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local integer count = 5
	local string s
	set s_0[5] = "Ваша задача: защищать стражей-заклинателей, находящихся около портала на вашей базе. Если все они погибнут - вы проиграете"
	set s_0[4] = "В правой части базы находятся магазины с предметами, они разделены по типу, поэтому вы можете быстро найти нужные для себя артефакты"
	set s_0[3] = "Просмотреть игровые команды, а также краткую информацию о карте вы можете в меню Инфо (|Cfffed312F9|r) а также на верхней панели интерфейса"
	set s_0[2] = "Для более легкого прохождения первых волн, купите в магазинах несколько зелий лечения здоровья и маны, они помогут вам не умирать в бою."
	set s_0[1] = "Приношу свои извинения, но в альфа версии карты, в лесy вокруг базы пока что никого и ничего нет. В следующих версиях там уже кое-что появится..."
	call TimerStart(t_0, 15., true, function HintsToPlayerWithDelay_ShowHint)
	call SaveStr(udg_hash_1, h_0, 1, s_0[1])
	call SaveStr(udg_hash_1, h_0, 2, s_0[2])
	call SaveStr(udg_hash_1, h_0, 3, s_0[3])
	call SaveStr(udg_hash_1, h_0, 4, s_0[4])
	call SaveStr(udg_hash_1, h_0, 5, s_0[5])
	call SaveInteger(udg_hash_1, h_0, $A, count_0)
	call SavePlayerHandle(udg_hash_1, h_0, $B, p_0)
	set t_0 = null
endfunction

function ProgressBarAddPercentComplete_Stop_Animation takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit dammi = LoadUnitHandle(udg_hash_1, h_0, 1)
	local real sum = LoadReal(udg_hash_1, GetHandleId(dammi_0), 1)
	local integer count = LoadInteger(udg_hash_1, GetHandleId(dammi_0), 2)
	local real tsum = LoadReal(udg_hash_1, h_0, 2)
	local integer tcount = LoadInteger(udg_hash_1, h_0, 3)
	set count_0 = count_0 - tcount_0
	call SaveInteger(udg_hash_1, GetHandleId(dammi_0), 2, count_0)
	set tcount_0 = 0
	call SaveInteger(udg_hash_1, h_0, 3, tcount_0)
	set sum_0 = sum_0 - tsum_0
	call SaveReal(udg_hash_1, GetHandleId(dammi_0), 1, sum_0)
	set tsum_0 = .0
	call SaveReal(udg_hash_1, h_0, 2, tsum_0)
	if count_0 <= 0 then
		call SetUnitTimeScale(dammi_0, .0)
		call DestroyTimer(t_0)
		call FlushChildHashtable(udg_hash_1, h_0)
	else
		set tsum_0 = sum_0
		set tcount_0 = count_0
		call SaveReal(udg_hash_1, h_0, 2, tsum_0)
		call SaveInteger(udg_hash_1, h_0, 3, tcount_0)
		call SaveUnitHandle(udg_hash_1, h_0, 1, dammi_0)
		call SetUnitTimeScale(dammi_0, (.1 * tsum_0))
		call TimerStart(t_0, .1, false, function ProgressBarAddPercentComplete_Stop_Animation)
	endif
	set t_0 = null
	set dammi_0 = null
endfunction

function ProgressBarAddPercentComplete takes unit dammi, real percent returns nothing
	local timer t
	local integer h
	local real sum = LoadReal(udg_hash_1, GetHandleId(dammi_0), 1)
	local integer count = LoadInteger(udg_hash_1, GetHandleId(dammi_0), 2)
	set sum_0 = sum_0 + percent_0
	set count_0 = count_0 + 1
	call SaveReal(udg_hash_1, GetHandleId(dammi_0), 1, sum_0)
	call SaveInteger(udg_hash_1, GetHandleId(dammi_0), 2, count_0)
	if count_0 <= 1 then
		set t_0 = CreateTimer()
		set h_0 = GetHandleId(t_0)
		call SaveUnitHandle(udg_hash_1, h_0, 1, dammi_0)
		call SaveReal(udg_hash_1, h_0, 2, percent_0)
		call SaveInteger(udg_hash_1, h_0, 3, 1)
		call SetUnitTimeScale(dammi_0, (.1 * percent_0))
		call TimerStart(t_0, .1, false, function ProgressBarAddPercentComplete_Stop_Animation)
		set t_0 = null
	endif
endfunction

function AddProgressBarMovingPeriodic takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit target = LoadUnitHandle(udg_hash_1, h_0, 1)
	local unit dammi = LoadUnitHandle(udg_hash_1, h_0, 2)
	local boolean dead
	if GetUnitState(dammi_0, UNIT_STATE_LIFE_1) > .405 and dammi_0 != null then
		if GetUnitState(target_0, UNIT_STATE_LIFE_1) > .405 then
			call SetUnitPosition(dammi_0, GetUnitX(target_0), GetUnitY(target_0))
			set dead_0 = LoadBoolean(udg_hash_1, h_0, 3)
			if dead_0 then
				call SetUnitVertexColor(dammi_0, LoadInteger(udg_hash_1, h_0, 4), LoadInteger(udg_hash_1, h_0, 5), LoadInteger(udg_hash_1, h_0, 6), $FF)
				call SaveBoolean(udg_hash_1, h_0, 3, false)
			endif
		else
			set dead_0 = LoadBoolean(udg_hash_1, h_0, 3)
			if dead_0 == false then
				call SetUnitVertexColor(dammi_0, LoadInteger(udg_hash_1, h_0, 4), LoadInteger(udg_hash_1, h_0, 5), LoadInteger(udg_hash_1, h_0, 6), 0)
				call SaveBoolean(udg_hash_1, h_0, 3, true)
			endif
		endif
	else
		call DestroyTimer(t_0)
		call FlushChildHashtable(udg_hash_1, h_0)
	endif
	set t_0 = null
	set target_0 = null
	set dammi_0 = null
endfunction

function AddProgressBar takes unit target, real height, real size, real time, boolean move, boolean auto, integer hand, integer red, integer green, integer blue returns nothing
	local unit dammi = CreateUnit(GetOwningPlayer(target_0), 'h00B', GetUnitX(target_0), GetUnitY(target_0), 270.)
	local timer t
	local integer h
	call SetUnitX(dammi_0, GetUnitX(target_0))
	call SetUnitY(dammi_0, GetUnitY(target_0))
	call UnitAddAbility(dammi_0, 'Amrf')
	call UnitRemoveAbility(dammi_0, 'Amrf')
	call SetUnitFlyHeight(dammi_0, height_0, .0)
	call SetUnitScale(dammi_0, size_0, size_0, size_0)
	call SetUnitVertexColor(dammi_0, red_0, green_0, blue_0, $FF)
	call SetUnitAnimation(dammi_0, "birth")
	call SaveUnitHandle(udg_hash_1, GetHandleId(target_0), hand_0, dammi_0)
	if auto_0 then
		call SetUnitTimeScale(dammi_0, (1. / time_0))
		call UnitApplyTimedLife(dammi_0, 'BTLF', time_0)
	else
		call SetUnitTimeScale(dammi_0, .0)
	endif
	if move_0 then
		set t_0 = CreateTimer()
		set h_0 = GetHandleId(t_0)
		call SaveUnitHandle(udg_hash_1, h_0, 1, target_0)
		call SaveUnitHandle(udg_hash_1, h_0, 2, dammi_0)
		call SaveBoolean(udg_hash_1, h_0, 3, false)
		call SaveInteger(udg_hash_1, h_0, 4, red_0)
		call SaveInteger(udg_hash_1, h_0, 5, green_0)
		call SaveInteger(udg_hash_1, h_0, 6, blue_0)
		call TimerStart(t_0, .03, true, function AddProgressBarMovingPeriodic)
		set t_0 = null
	endif
	set dammi_0 = null
endfunction

function HeroStepsPeriodicSound takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit target = LoadUnitHandle(udg_hash_1, h_0, 1)
	local real x = LoadReal(udg_hash_1, h_0, 2)
	local real y = LoadReal(udg_hash_1, h_0, 3)
	local real xnew = GetUnitX(target_0)
	local real ynew = GetUnitY(target_0)
	local integer random = GetRandomInt(1, 4)
	local player p
	if GetUnitState(target_0, UNIT_STATE_LIFE_1) > .405 and (x_0 != xnew_0 and y_0 != ynew_0) then
		set p_0 = GetOwningPlayer(target_0)
		if random_0 == 1 then
			call SoundForPlayer(p_0, 8)
			call BJDebugMsg("1")
		endif
		if random_0 == 2 then
			call SoundForPlayer(p_0, 9)
			call BJDebugMsg("2")
		endif
		if random_0 == 3 then
			call SoundForPlayer(p_0, $A)
			call BJDebugMsg("3")
		endif
		if random_0 == 4 then
			call SoundForPlayer(p_0, $B)
			call BJDebugMsg("4")
		endif
		call SaveReal(udg_hash_1, h_0, 2, xnew_0)
		call SaveReal(udg_hash_1, h_0, 3, ynew_0)
	endif
	set t_0 = null
	set target_0 = null
endfunction

function HeroStepsSound takes unit target returns nothing
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local real x = GetUnitX(target_0)
	local real y = GetUnitY(target_0)
	call SaveUnitHandle(udg_hash_1, h_0, 1, target_0)
	call SaveReal(udg_hash_1, h_0, 2, x_0)
	call SaveReal(udg_hash_1, h_0, 3, y_0)
	call TimerStart(t_0, 1., true, function HeroStepsPeriodicSound)
	set t_0 = null
endfunction

function ShowAndFlushAllPlayerDamage takes boolean flushonly returns nothing
	local string s
	local real maxtakendamage = .0
	local real maxreciveddamage = .0
	local real ptakendamage = .0
	local real preceiveddamage = .0
	local player pmaxtakedamage = Player(0)
	local player pmaxreceiveddamage = Player(0)
	local integer lopa = 0
	local real alltakendamage = .0
	local real allreceiveddamage = .0
	local player p
	local integer id
	local real percent = .0
	local string spercent
	local real time = .0
	if flushonly_0 == false then
		loop
			exitwhen lopa_0 > 8
			set alltakendamage_0 = alltakendamage_0 + udg_Player_Taken_Damage_Current_1[lopa_0]
			set allreceiveddamage_0 = allreceiveddamage_0 + udg_Player_Received_Damage_Current_1[lopa_0]
			if udg_Player_Taken_Damage_Current_1[lopa_0] > maxtakendamage_0 then
				set maxtakendamage_0 = udg_Player_Taken_Damage_Current_1[lopa_0]
				set pmaxtakedamage_0 = Player(lopa_0)
			endif
			if udg_Player_Received_Damage_Current_1[lopa_0] > maxreciveddamage_0 then
				set maxreciveddamage_0 = udg_Player_Received_Damage_Current_1[lopa_0]
				set pmaxreceiveddamage_0 = Player(lopa_0)
			endif
			set time_0 = (10000. - TimerGetRemaining(udg_TimerShowAndFlushAllPlayerDmg_1))
			call PauseTimer(udg_TimerShowAndFlushAllPlayerDmg_1)
			set lopa_0 = lopa_0 + 1
		endloop
		if (IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS_1)) then
			set p_0 = GetLocalPlayer()
			call DisplayTimedTextToPlayer(p_0, .0, .0, 20., " ")
			call DisplayTimedTextToPlayer(p_0, .0, .0, 20., "Затраченное Время: |cff00CD00" + (SubString(R2S(time_0), 0, StringLength(R2S(time_0)) - 2)) + "|r секунд")
			call DisplayTimedTextToPlayer(p_0, .0, .0, 20., "Всего урона нанесено: |cff99ccff" + I2S(R2I(alltakendamage_0)) + "|r урона")
			call DisplayTimedTextToPlayer(p_0, .0, .0, 20., "Всего урона получено: |cff99ccff" + I2S(R2I(allreceiveddamage_0)) + "|r урона")
			set percent_0 = ((maxtakendamage_0 / alltakendamage_0) * 'd')
			call DisplayTimedTextToPlayer(p_0, .0, .0, 20., "Больше всего нанесено урона: " + udg_ColorString_1[GetPlayerId(pmaxtakedamage_0) + 1] + GetPlayerName(pmaxtakedamage_0) + "|r (|cff99ccff" + I2S(R2I(maxtakendamage_0)) + "|r урона - |cff99ccff" + (SubString(R2S(percent_0), 0, StringLength(R2S(percent_0)) - 2)) + "%|r )")
			set percent_0 = ((maxreciveddamage_0 / allreceiveddamage_0) * 'd')
			call DisplayTimedTextToPlayer(p_0, .0, .0, 20., "Больше всего урона получено: " + udg_ColorString_1[GetPlayerId(pmaxreceiveddamage_0) + 1] + GetPlayerName(pmaxreceiveddamage_0) + "|r (|cff99ccff" + I2S(R2I(maxreciveddamage_0)) + "|r урона - |cff99ccff" + (SubString(R2S(percent_0), 0, StringLength(R2S(percent_0)) - 2)) + "%|r )")
			if p_0 != pmaxtakedamage_0 then
				set percent_0 = ((udg_Player_Taken_Damage_Current_1[GetPlayerId(p_0)] / alltakendamage_0) * 'd')
				call DisplayTimedTextToPlayer(p_0, .0, .0, 20., "Ваш нанесенный урон: ( |cff99ccff" + I2S(R2I(udg_Player_Taken_Damage_Current_1[GetPlayerId(p_0)])) + "|r урона - |cff99ccff" + (SubString(R2S(percent_0), 0, StringLength(R2S(percent_0)) - 2)) + "%|r )")
			endif
			if p_0 != pmaxreceiveddamage_0 then
				set percent_0 = ((udg_Player_Received_Damage_Current_1[GetPlayerId(p_0)] / allreceiveddamage_0) * 'd')
				call DisplayTimedTextToPlayer(p_0, .0, .0, 20., "Ваш полученный урон: ( |cff99ccff" + I2S(R2I(udg_Player_Received_Damage_Current_1[GetPlayerId(p_0)])) + "|r урона - |cff99ccff" + (SubString(R2S(percent_0), 0, StringLength(R2S(percent_0)) - 2)) + "%|r )")
			endif
			set p_0 = null
		endif
		set lopa_0 = 0
	endif
	loop
		exitwhen lopa_0 > 8
		set udg_Player_Taken_Damage_Current_1[lopa_0] = .0
		set udg_Player_Received_Damage_Current_1[lopa_0] = .0
		set lopa_0 = lopa_0 + 1
	endloop
endfunction

function MoveDammiReferencePanel_Timer takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit hero = LoadUnitHandle(udg_hash_1, h_0, 1)
	local unit dammi = LoadUnitHandle(udg_hash_1, h_0, 2)
	local real x = GetUnitX(hero_0)
	local real y = GetUnitY(hero_0)
	local boolean alife = LoadBoolean(udg_hash_1, h_0, 3)
	if (GetUnitState(hero_0, UNIT_STATE_LIFE_1) < .405 and alife_0) then
		call ShowUnit(dammi_0, false)
		set alife_0 = false
		call SaveBoolean(udg_hash_1, h_0, 3, alife_0)
	else
		if (GetUnitState(hero_0, UNIT_STATE_LIFE_1) > .405 and alife_0 == false) then
			call ShowUnit(dammi_0, true)
			set alife_0 = true
			call SaveBoolean(udg_hash_1, h_0, 3, alife_0)
		endif
		call SetUnitX(dammi_0, x_0)
		call SetUnitY(dammi_0, y_0)
	endif
	set t_0 = null
	set hero_0 = null
	set dammi_0 = null
endfunction

function MoveDammiReferencePanel takes unit hero returns nothing
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local unit dammi = CreateUnit(GetOwningPlayer(hero_0), 'h00C', GetUnitX(hero_0), GetUnitY(hero_0), .0)
	call SaveUnitHandle(udg_hash_1, h_0, 1, hero_0)
	call SaveUnitHandle(udg_hash_1, h_0, 2, dammi_0)
	call SaveBoolean(udg_hash_1, h_0, 3, true)
	call IssueImmediateOrderById(dammi_0, $D0057)
	call TimerStart(t_0, 1., true, function MoveDammiReferencePanel_Timer)
	set t_0 = null
	set dammi_0 = null
endfunction

function IsUnitInvulnerable takes unit Unit returns boolean
	local real Health_Current = GetWidgetLife(Unit_0)
	local real Mana_Current = GetUnitState(Unit_0, UNIT_STATE_MANA_1)
	local boolean Check_Health
	call SetWidgetLife(Unit_0, Health_Current_0 + .001)
	if Health_Current_0 != GetWidgetLife(Unit_0) then
		call UnitDamageTarget(Unit_0, Unit_0, .001, false, true, null, null, null)
		set Check_Health_0 = (GetWidgetLife(Unit_0) == Health_Current_0 + .001)
	else
		call UnitDamageTarget(Unit_0, Unit_0, .001, false, true, null, null, null)
		set Check_Health_0 = (GetWidgetLife(Unit_0) == Health_Current_0)
		call SetWidgetLife(Unit_0, Health_Current_0)
	endif
	if Check_Health_0 then
		return not (GetUnitState(Unit_0, UNIT_STATE_MANA_1) != Mana_Current_0)
	endif
	return Check_Health_0
endfunction

function GroupToGroupUnitMoving takes nothing returns nothing
	call GroupAddUnit(udg_Temp_Group_1[1], GetEnumUnit())
endfunction

function GroupToGroup takes group gold, group gnew returns nothing
	set udg_Temp_Group_1[1] = gnew_0
	call ForGroup(gold_0, function GroupToGroupUnitMoving)
	set udg_Temp_Group_1[1] = null
endfunction

function CreateEnergyWall takes integer start, integer end returns nothing
	local integer lopa = start_0
	local integer lopb
	loop
		exitwhen lopa_0 > end_0
		set udg_EnergyWallUnit_1[lopa_0] = CreateUnit(Player($F), 'h00I', udg_EnergyWallX_1[lopa_0], udg_EnergyWallY_1[lopa_0], udg_EnergyWallAngle_1[lopa_0])
		set lopb_0 = 1
		loop
			exitwhen lopb_0 > 7
			set udg_EnergyWallBlock_1[(lopa_0 - 1) * 7 + lopb_0] = CreateDestructable('YTpc', udg_EnergyWallX_1[lopa_0] - ((4 - lopb_0) * 128. - 64.) * Cos((udg_EnergyWallAngle_1[lopa_0] - 90.) * bj_DEGTORAD_1), udg_EnergyWallY_1[lopa_0] - ((4 - lopb_0) * 128. - 64.) * Sin((udg_EnergyWallAngle_1[lopa_0] - 90.) * bj_DEGTORAD_1), udg_EnergyWallAngle_1[lopa_0], 1., 0)
			set lopb_0 = lopb_0 + 1
		endloop
		set lopa_0 = lopa_0 + 1
	endloop
endfunction

function ConvertMagicAndChaosDamageInClear takes unit target, real magicdamage, real chaosdamage returns real
	local real itog = magicdamage_0
	if IsUnitType(target_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false then
		if IsUnitType(target_0, UNIT_TYPE_HERO_1) then
			set magicdamage_0 = magicdamage_0 * .75
		endif
		if GetUnitAbilityLevel(target_0, 'A0HD') > 0 then
			set magicdamage_0 = magicdamage_0 * 1.5
		endif
		if GetUnitAbilityLevel(target_0, 'A0CZ') > 0 then
			set magicdamage_0 = magicdamage_0 * .75
		endif
		if GetUnitAbilityLevel(target_0, 'A017') > 0 then
			set magicdamage_0 = magicdamage_0 * .85
		endif
		if GetUnitAbilityLevel(target_0, 'A01C') > 0 then
			set magicdamage_0 = magicdamage_0 * .7
		endif
		if GetUnitAbilityLevel(target_0, 'A09T') > 0 then
			set magicdamage_0 = magicdamage_0 * .7
		endif
	else
		set magicdamage_0 = .0
	endif
	set itog_0 = magicdamage_0 + chaosdamage_0
	return itog_0
endfunction

function RemoveUnitAttack_End takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit target = LoadUnitHandle(udg_hash_1, h_0, 1)
	local effect ef = LoadEffectHandle(udg_hash_1, h_0, 2)
	call UnitRemoveAbility(target_0, 'A0PL')
	call DestroyEffect(ef_0)
	call DestroyTimer(t_0)
	call FlushChildHashtable(udg_hash_1, h_0)
	set t_0 = null
	set ef_0 = null
	set target_0 = null
endfunction

function RemoveUnitAttack takes unit target, real time returns nothing
	local timer t
	local integer h
	local effect ef
	local real newtime
	if LoadTimerHandle(udg_hash_1, GetHandleId(target_0), $A4) == null then
		set t_0 = CreateTimer()
		set h_0 = GetHandleId(t_0)
		set ef_0 = AddSpecialEffectTarget("Effects\\NoAttack.mdx", target_0, "overhead")
		call UnitAddAbility(target_0, 'A0PL')
		call SaveUnitHandle(udg_hash_1, h_0, 1, target_0)
		call SaveEffectHandle(udg_hash_1, h_0, 2, ef_0)
		call SaveTimerHandle(udg_hash_1, GetHandleId(target_0), $A4, t_0)
		set ef_0 = null
		set newtime_0 = time_0
	else
		set t_0 = LoadTimerHandle(udg_hash_1, GetHandleId(target_0), $A4)
		if time_0 > TimerGetRemaining(t_0) then
			set newtime_0 = time_0
		else
			set newtime_0 = TimerGetRemaining(t_0)
		endif
	endif
	call TimerStart(t_0, newtime_0, false, function RemoveUnitAttack_End)
	set t_0 = null
endfunction

function HaveAnyTimeTalisman takes nothing returns real
	local real respawn = .0
	local group grp = CreateGroup()
	local unit Picked
	call GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev_1, grp_0)
	loop
		set Picked_0 = FirstOfGroup(grp_0)
		exitwhen Picked_0 == null
		if IsUnitType(Picked_0, UNIT_TYPE_HERO_1) and GetPlayerId(GetOwningPlayer(Picked_0)) <= 8 then
			if CountItemOfTypeOnUnit(Picked_0, 'I02R') > 0 and (.1 > respawn_0) then
				set respawn_0 = .1
			endif
			if CountItemOfTypeOnUnit(Picked_0, 'I02S') > 0 and (.15 > respawn_0) then
				set respawn_0 = .15
			endif
			if CountItemOfTypeOnUnit(Picked_0, 'I02W') > 0 and (.2 > respawn_0) then
				set respawn_0 = .2
			endif
			if CountItemOfTypeOnUnit(Picked_0, 'I02X') > 0 and (.25 > respawn_0) then
				set respawn_0 = .25
			endif
			if CountItemOfTypeOnUnit(Picked_0, 'I02Y') > 0 and (.3 > respawn_0) then
				set respawn_0 = .3
			endif
		endif
		call GroupRemoveUnit(grp_0, Picked_0)
	endloop
	set Picked_0 = null
	call GroupClear(grp_0)
	call DestroyGroup(grp_0)
	set grp_0 = null
	return respawn_0
endfunction

function Trig_Players_Start_Script_Func034A takes nothing returns nothing
	call SetPlayerFlagBJ(PLAYER_STATE_GIVES_BOUNTY_1, true, GetEnumPlayer())
	call SetPlayerColorBJ(GetEnumPlayer(), PLAYER_COLOR_BROWN_1, true)
endfunction

function Trig_Players_Start_Script_Actions takes nothing returns nothing
	call AbilityPreload('A0J2', 30)
	call AbilityPreload('A0J4', 25)
	set udg_CountGuardsExorcist_1 = 8
	set udg_ColorString_1[1] = "|cffff0000"
	set udg_ColorString_1[2] = "|cff0000ff"
	set udg_ColorString_1[3] = "|cff00f5ff"
	set udg_ColorString_1[4] = "|cff551A8B"
	set udg_ColorString_1[5] = "|cffffff00"
	set udg_ColorString_1[6] = "|cffEE9A00"
	set udg_ColorString_1[7] = "|cff00CD00"
	set udg_ColorString_1[8] = "|cffFF69B4"
	set udg_ColorString_1[9] = "|cffC0C0C0"
	set udg_ColorString_1[$A] = "|cffB0E2FF"
	set udg_ColorString_1[$B] = "|cff006400"
	set udg_ColorString_1[$C] = "|cff8B4513"
	set udg_ColorString_1[20] = "|cffff0000"
	set udg_ColorString_1[21] = "|cff0000ff"
	set udg_ColorString_1[22] = "|c00959697"
	set udg_ColorString_1[23] = "|cFFFFDC00"
	set udg_ColorString_1[24] = "|cFFDCDCDC"
	call SetPlayerName(Player(9), "TRIGSTR_858")
	call SetPlayerName(Player($A), "Армия Тьмы")
	call SetPlayerName(Player($B), "Армия Тьмы")
	call SetPlayerColorBJ(Player($F), PLAYER_COLOR_LIGHT_BLUE_1, false)
	call ForceAddPlayer(udg_Players_Enemy_Group_1, Player(9))
	call ForceAddPlayer(udg_Players_Enemy_Group_1, Player($A))
	call ForceAddPlayer(udg_Players_Enemy_Group_1, Player($B))
	call SetForceAllianceStateBJ(udg_Players_Enemy_Group_1, udg_Players_Enemy_Group_1, 3)
	call SetForceAllianceStateBJ(udg_Players_Enemy_Group_1, bj_FORCE_PLAYER_1[$C], 3)
	call SetForceAllianceStateBJ(bj_FORCE_PLAYER_1[$C], udg_Players_Enemy_Group_1, 3)
	call SetForceAllianceStateBJ(udg_Players_Enemy_Group_1, bj_FORCE_PLAYER_1[$F], 0)
	call SetForceAllianceStateBJ(bj_FORCE_PLAYER_1[$F], udg_Players_Enemy_Group_1, 0)
	call ForForce(udg_Players_Enemy_Group_1, function Trig_Players_Start_Script_Func034A)
endfunction

function InitTrig_Players_Start_Script takes nothing returns nothing
	set gg_trg_Players_Start_Script_1 = CreateTrigger()
	call TriggerRegisterTimerEventSingle(gg_trg_Players_Start_Script_1, 2.)
	call TriggerAddAction(gg_trg_Players_Start_Script_1, function Trig_Players_Start_Script_Actions)
endfunction

function Trig_InitMap_Func009A takes nothing returns nothing
	call CreateFogModifierRectBJ(true, GetEnumPlayer(), FOG_OF_WAR_VISIBLE_1, gg_rct_PlayableAreaVisionDeBag_1)
	call FogModifierStart(bj_lastCreatedFogModifier_1)
	call DestroyFogModifier(bj_lastCreatedFogModifier_1)
	call CreateFogModifierRectBJ(true, GetEnumPlayer(), FOG_OF_WAR_MASKED_1, gg_rct_MinusVision1_1)
	call FogModifierStart(bj_lastCreatedFogModifier_1)
	call CameraSetupApplyForPlayer(true, gg_cam_Kamera_na_taverni_1, GetEnumPlayer(), 0)
	call CinematicFadeBJ(1, .0, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0)
endfunction

function Trig_InitMap_Actions takes nothing returns nothing
	call SetTimeOfDay(5.45)
	call SetMapFlag(MAP_RESOURCE_TRADING_ALLIES_ONLY_1, true)
	call ShowInterfaceForceOff(bj_FORCE_ALL_PLAYERS_1, .0)
	call StartTimerBJ(udg_InitMapTimer_1, false, 10.)
	call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS_1, 12., "|cff99ccffДобро пожаловать на альфа версию карты|r |Cfffed312Последние Стражи|r (|Cfffed312Last Guards|r)|cff99ccff!|r")
	call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS_1, 12., "|cff99ccffЦель игры: выстоять против 10 разнообразнейших волн врагов, защищая стражей-заклинателей. По ходу прохождения вы также поучавствуете во множестве различных игровых событий, сражений, битв с боссами и многое другое...|r")
	call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS_1, 12., "|cff99ccffА теперь - выберете своего героя, и отправляйтесь в бой!|r")
	call ForForce(bj_FORCE_ALL_PLAYERS_1, function Trig_InitMap_Func009A)
endfunction

function InitTrig_InitMap takes nothing returns nothing
	set gg_trg_InitMap_1 = CreateTrigger()
	call TriggerRegisterTimerEventSingle(gg_trg_InitMap_1, .0)
	call TriggerAddAction(gg_trg_InitMap_1, function Trig_InitMap_Actions)
endfunction

function Trig_InitMapStage2_Func002A takes nothing returns nothing
	call CameraSetupApplyForPlayer(true, gg_cam_Kamera_na_taverni_1, GetEnumPlayer(), 0)
	call CinematicFadeBJ(0, 5., "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0)
endfunction

function Trig_InitMapStage2_Actions takes nothing returns nothing
	call ShowInterfaceForceOn(bj_FORCE_ALL_PLAYERS_1, 5.)
	call ForForce(bj_FORCE_ALL_PLAYERS_1, function Trig_InitMapStage2_Func002A)
endfunction

function InitTrig_InitMapStage2 takes nothing returns nothing
	set gg_trg_InitMapStage2_1 = CreateTrigger()
	call TriggerRegisterTimerExpireEvent(gg_trg_InitMapStage2_1, udg_InitMapTimer_1)
	call TriggerAddAction(gg_trg_InitMapStage2_1, function Trig_InitMapStage2_Actions)
endfunction

function Trig_System_Spells_Load_Periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local integer i = LoadInteger(udg_hash_1, h_0, 0)
	if LoadInteger(udg_hash_1, h_0, i_0) != 0 then
		call AbilityPreload(LoadInteger(udg_hash_1, h_0, i_0), LoadInteger(udg_hash_1, h_0, i_0 + 1))
		set i_0 = i_0 + 2
		call SaveInteger(udg_hash_1, h_0, 0, i_0)
	else
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
endfunction

function Trig_System_Spells_Load_Actions takes nothing returns nothing
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local integer i = 1
	call SaveInteger(udg_hash_1, h_0, 0, i_0)
	call SaveInteger(udg_hash_1, h_0, 1, 'A07F')
	call SaveInteger(udg_hash_1, h_0, 2, $A)
	call SaveInteger(udg_hash_1, h_0, 3, 'A07G')
	call SaveInteger(udg_hash_1, h_0, 4, $A)
	call SaveInteger(udg_hash_1, h_0, 5, 'A07I')
	call SaveInteger(udg_hash_1, h_0, 6, $A)
	call SaveInteger(udg_hash_1, h_0, 7, 'A09D')
	call SaveInteger(udg_hash_1, h_0, 8, $A)
	call SaveInteger(udg_hash_1, h_0, 9, 'A0E6')
	call SaveInteger(udg_hash_1, h_0, $A, $A)
	call SaveInteger(udg_hash_1, h_0, $B, 'A0E7')
	call SaveInteger(udg_hash_1, h_0, $C, $A)
	call SaveInteger(udg_hash_1, h_0, $D, 'A0B3')
	call SaveInteger(udg_hash_1, h_0, $E, $A)
	call SaveInteger(udg_hash_1, h_0, $F, 'A0B4')
	call SaveInteger(udg_hash_1, h_0, 16, $A)
	call SaveInteger(udg_hash_1, h_0, 17, 'A0B5')
	call SaveInteger(udg_hash_1, h_0, 18, $A)
	call SaveInteger(udg_hash_1, h_0, 19, 'A0E9')
	call SaveInteger(udg_hash_1, h_0, 20, $A)
	call SaveInteger(udg_hash_1, h_0, 21, 'A0EA')
	call SaveInteger(udg_hash_1, h_0, 22, $A)
	call SaveInteger(udg_hash_1, h_0, 23, 'A0EB')
	call SaveInteger(udg_hash_1, h_0, 24, $A)
	call SaveInteger(udg_hash_1, h_0, 25, 'A0AG')
	call SaveInteger(udg_hash_1, h_0, 26, $A)
	call SaveInteger(udg_hash_1, h_0, 27, 'A0AH')
	call SaveInteger(udg_hash_1, h_0, 28, $A)
	call SaveInteger(udg_hash_1, h_0, 29, 'A087')
	call SaveInteger(udg_hash_1, h_0, 30, $A)
	call SaveInteger(udg_hash_1, h_0, 31, 'A0AS')
	call SaveInteger(udg_hash_1, h_0, 32, $A)
	call SaveInteger(udg_hash_1, h_0, 33, 'A0AT')
	call SaveInteger(udg_hash_1, h_0, 34, $A)
	call SaveInteger(udg_hash_1, h_0, 35, 'A0D8')
	call SaveInteger(udg_hash_1, h_0, 36, $A)
	call SaveInteger(udg_hash_1, h_0, 37, 'A07A')
	call SaveInteger(udg_hash_1, h_0, 38, 7)
	call SaveInteger(udg_hash_1, h_0, 39, 'A07E')
	call SaveInteger(udg_hash_1, h_0, 40, 7)
	call SaveInteger(udg_hash_1, h_0, 41, 'A0H6')
	call SaveInteger(udg_hash_1, h_0, 42, $A)
	call SaveInteger(udg_hash_1, h_0, 43, 'A0H5')
	call SaveInteger(udg_hash_1, h_0, 44, $A)
	call SaveInteger(udg_hash_1, h_0, 45, 'A0H4')
	call SaveInteger(udg_hash_1, h_0, 46, $A)
	call TimerStart(t_0, .2, true, function Trig_System_Spells_Load_Periodic_Actions)
endfunction

function InitTrig_System_Spells_Load takes nothing returns nothing
	set gg_trg_System_Spells_Load_1 = CreateTrigger()
	call TriggerRegisterTimerEvent(gg_trg_System_Spells_Load_1, 2., false)
	call TriggerAddAction(gg_trg_System_Spells_Load_1, function Trig_System_Spells_Load_Actions)
endfunction

function Trig_Items_Preload_Periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local integer i = LoadInteger(udg_hash_1, h_0, 0)
	if LoadInteger(udg_hash_1, h_0, i_0) != 0 then
		call ItemPreload(LoadInteger(udg_hash_1, h_0, i_0))
		set i_0 = i_0 + 1
		call SaveInteger(udg_hash_1, h_0, 0, i_0)
	else
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
endfunction

function Trig_Items_Preload_Actions takes nothing returns nothing
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local integer i = 1
	call SaveInteger(udg_hash_1, h_0, 0, i_0)
	call SaveInteger(udg_hash_1, h_0, 1, 'I00I')
	call SaveInteger(udg_hash_1, h_0, 2, 'I01G')
	call SaveInteger(udg_hash_1, h_0, 3, 'I03W')
	call SaveInteger(udg_hash_1, h_0, 4, 'I036')
	call SaveInteger(udg_hash_1, h_0, 5, 'I05A')
	call SaveInteger(udg_hash_1, h_0, 6, 'I04Z')
	call SaveInteger(udg_hash_1, h_0, 7, 'I01U')
	call SaveInteger(udg_hash_1, h_0, 8, 'I03U')
	call SaveInteger(udg_hash_1, h_0, 9, 'I02J')
	call SaveInteger(udg_hash_1, h_0, $A, 'I01B')
	call SaveInteger(udg_hash_1, h_0, $B, 'I01X')
	call SaveInteger(udg_hash_1, h_0, $C, 'I052')
	call SaveInteger(udg_hash_1, h_0, $D, 'I053')
	call SaveInteger(udg_hash_1, h_0, $E, 'I051')
	call SaveInteger(udg_hash_1, h_0, $F, 'I03Q')
	call SaveInteger(udg_hash_1, h_0, 16, 'I048')
	call SaveInteger(udg_hash_1, h_0, 17, 'I01P')
	call SaveInteger(udg_hash_1, h_0, 18, 'I00G')
	call SaveInteger(udg_hash_1, h_0, 19, 'I01Q')
	call SaveInteger(udg_hash_1, h_0, 20, 'I01V')
	call SaveInteger(udg_hash_1, h_0, 21, 'I02N')
	call SaveInteger(udg_hash_1, h_0, 22, 'I03N')
	call SaveInteger(udg_hash_1, h_0, 23, 'I042')
	call SaveInteger(udg_hash_1, h_0, 24, 'I03S')
	call SaveInteger(udg_hash_1, h_0, 25, 'I02U')
	call SaveInteger(udg_hash_1, h_0, 26, 'I00C')
	call SaveInteger(udg_hash_1, h_0, 27, 'I00A')
	call SaveInteger(udg_hash_1, h_0, 28, 'I04V')
	call SaveInteger(udg_hash_1, h_0, 29, 'I044')
	call SaveInteger(udg_hash_1, h_0, 30, 'I00J')
	call SaveInteger(udg_hash_1, h_0, 31, 'I03G')
	call SaveInteger(udg_hash_1, h_0, 32, 'I04L')
	call SaveInteger(udg_hash_1, h_0, 33, 'I02I')
	call SaveInteger(udg_hash_1, h_0, 34, 'I02T')
	call SaveInteger(udg_hash_1, h_0, 35, 'I04U')
	call SaveInteger(udg_hash_1, h_0, 36, 'I03K')
	call SaveInteger(udg_hash_1, h_0, 37, 'I03L')
	call SaveInteger(udg_hash_1, h_0, 38, 'I03M')
	call SaveInteger(udg_hash_1, h_0, 39, 'I04X')
	call SaveInteger(udg_hash_1, h_0, 40, 'I055')
	call SaveInteger(udg_hash_1, h_0, 41, 'I056')
	call SaveInteger(udg_hash_1, h_0, 42, 'I057')
	call SaveInteger(udg_hash_1, h_0, 43, 'I058')
	call SaveInteger(udg_hash_1, h_0, 44, 'I02E')
	call SaveInteger(udg_hash_1, h_0, 45, 'I02F')
	call SaveInteger(udg_hash_1, h_0, 46, 'I01S')
	call SaveInteger(udg_hash_1, h_0, 47, 'I03Y')
	call SaveInteger(udg_hash_1, h_0, 48, 'I02G')
	call SaveInteger(udg_hash_1, h_0, 49, 'I00S')
	call SaveInteger(udg_hash_1, h_0, 50, 'I00T')
	call SaveInteger(udg_hash_1, h_0, 51, 'I00V')
	call SaveInteger(udg_hash_1, h_0, 52, 'I00X')
	call SaveInteger(udg_hash_1, h_0, 53, 'I012')
	call SaveInteger(udg_hash_1, h_0, 54, 'I01W')
	call TimerStart(t_0, .05, true, function Trig_Items_Preload_Periodic_Actions)
endfunction

function InitTrig_Items_Preload takes nothing returns nothing
	set gg_trg_Items_Preload_1 = CreateTrigger()
	call TriggerRegisterTimerEvent(gg_trg_Items_Preload_1, 17., false)
	call TriggerAddAction(gg_trg_Items_Preload_1, function Trig_Items_Preload_Actions)
endfunction

function Trig_Igrok_Massiv_Save_Func005Func001C takes nothing returns boolean
	return (GetPlayerSlotState(Player(-1 + (bj_forLoopAIndex_1))) == PLAYER_SLOT_STATE_PLAYING_1) and (GetPlayerController(Player(-1 + (bj_forLoopAIndex_1))) != MAP_CONTROL_COMPUTER_1)
endfunction

function Trig_Igrok_Massiv_Save_Func006002 takes nothing returns nothing
	call SetPlayerStateBJ(GetEnumPlayer(), PLAYER_STATE_RESOURCE_FOOD_CAP_1, 1)
endfunction

function Trig_Igrok_Massiv_Save_Func007C takes nothing returns boolean
	return (CountPlayersInForceBJ(udg_IGRAET_1) <= 0)
endfunction

function Trig_Igrok_Massiv_Save_Actions takes nothing returns nothing
	call RemoveAllGuardPositions(Player(9))
	call RemoveAllGuardPositions(Player($A))
	call RemoveAllGuardPositions(Player($B))
	set bj_forLoopAIndex_1 = 1
	set bj_forLoopAIndexEnd_1 = 9
	loop
		exitwhen bj_forLoopAIndex_1 > bj_forLoopAIndexEnd_1
		if (Trig_Igrok_Massiv_Save_Func005Func001C()) then
			set udg_Igraet_Igrok_1[bj_forLoopAIndex_1] = true
			call ForceAddPlayer(udg_IGRAET_1, Player(-1 + (bj_forLoopAIndex_1)))
		else
			set udg_Igraet_Igrok_1[bj_forLoopAIndex_1] = false
		endif
		set bj_forLoopAIndex_1 = bj_forLoopAIndex_1 + 1
	endloop
	call ForForce(udg_IGRAET_1, function Trig_Igrok_Massiv_Save_Func006002)
	if (Trig_Igrok_Massiv_Save_Func007C()) then
		call DisplayTextToForce(bj_FORCE_ALL_PLAYERS_1, "Игра одному пока что запрещена!!!")
		call CustomVictoryBJ(ForcePickRandomPlayer(udg_IGRAET_1), true, false)
	endif
endfunction

function InitTrig_Igrok_Massiv_Save takes nothing returns nothing
	set gg_trg_Igrok_Massiv_Save_1 = CreateTrigger()
	call TriggerRegisterTimerEventSingle(gg_trg_Igrok_Massiv_Save_1, .0)
	call TriggerAddAction(gg_trg_Igrok_Massiv_Save_1, function Trig_Igrok_Massiv_Save_Actions)
endfunction

function Trig_Load_Vsiakoe_Func004Func001Func003C takes nothing returns boolean
	return (GetUnitTypeId(GetEnumUnit()) == 'e002') or (GetUnitTypeId(GetEnumUnit()) == 'h01K') or (GetUnitTypeId(GetEnumUnit()) == 'n00Y') or (GetUnitTypeId(GetEnumUnit()) == 'o003')
endfunction

function Trig_Load_Vsiakoe_Func004Func001C takes nothing returns boolean
	return (Trig_Load_Vsiakoe_Func004Func001Func003C())
endfunction

function Trig_Load_Vsiakoe_Func004A takes nothing returns nothing
	if (Trig_Load_Vsiakoe_Func004Func001C()) then
		call UnitAddType(GetEnumUnit(), UNIT_TYPE_PEON_1)
		call GroupAddUnit(udg_PortalCastersMagi_1, GetEnumUnit())
	endif
endfunction

function Trig_Load_Vsiakoe_Func007A takes nothing returns nothing
	call SetPlayerStateBJ(GetEnumPlayer(), PLAYER_STATE_RESOURCE_GOLD_1, 500)
	call SetPlayerStateBJ(GetEnumPlayer(), PLAYER_STATE_RESOURCE_LUMBER_1, 8)
	call SetPlayerAbilityAvailableBJ(false, 'A04F', GetEnumPlayer())
	call SetPlayerAbilityAvailableBJ(false, 'A0EF', GetEnumPlayer())
endfunction

function Trig_Load_Vsiakoe_Actions takes nothing returns nothing
	call CreateNUnitsAtLoc(1, 'h00U', Player($F), GetRectCenter(bj_mapInitialPlayableArea_1), bj_UNIT_FACING_1)
	set udg_preloader_1 = bj_lastCreatedUnit_1
	call ForGroupBJ(GetUnitsInRectAll(gg_rct_cast_magi_1), function Trig_Load_Vsiakoe_Func004A)
	call CreateQuestBJ(0, "Авторы", "Создатели Карты (|Cfffed312Последние Стражи|r/|Cfffed312Last Guards|r)|n|cff99ccfflluo_OHEP (Derarius/Sladkoegka)|nCosonic5|r", "CommandButton\\Map_Autor's.blp")
	call CreateQuestBJ(2, "Игровые Команды", "TRIGSTR_5336", "CommandButton\\Game_Commands.blp")
	call ForForce(bj_FORCE_ALL_PLAYERS_1, function Trig_Load_Vsiakoe_Func007A)
endfunction

function InitTrig_Load_Vsiakoe takes nothing returns nothing
	set gg_trg_Load_Vsiakoe_1 = CreateTrigger()
	call TriggerRegisterTimerEventSingle(gg_trg_Load_Vsiakoe_1, 2.)
	call TriggerAddAction(gg_trg_Load_Vsiakoe_1, function Trig_Load_Vsiakoe_Actions)
endfunction

function Trig_Igrok_Massiv_Liver_Func004Func001C takes nothing returns boolean
	return (IsUnitType(GetEnumUnit(), UNIT_TYPE_HERO_1)) != null
endfunction

function Trig_Igrok_Massiv_Liver_Func004A takes nothing returns nothing
	if (Trig_Igrok_Massiv_Liver_Func004Func001C()) then
		set bj_forLoopAIndex_1 = 1
		set bj_forLoopAIndexEnd_1 = 6
		loop
			exitwhen bj_forLoopAIndex_1 > bj_forLoopAIndexEnd_1
			call RemoveItem(UnitItemInSlotBJ(GetEnumUnit(), bj_forLoopAIndex_1))
			set bj_forLoopAIndex_1 = bj_forLoopAIndex_1 + 1
		endloop
	endif
	call KillUnit(GetEnumUnit())
	call RemoveUnit(GetEnumUnit())
endfunction

function Trig_Igrok_Massiv_Liver_Func012Func001C takes nothing returns boolean
	return (udg_Is_Player_Fast_Wave_Start_1[(1 + GetPlayerId(GetTriggerPlayer()))])
endfunction

function Trig_Igrok_Massiv_Liver_Func012Func002C takes nothing returns boolean
	return (udg_Count_Players_Fast_Wave_Start_1 >= CountPlayersInForceBJ(udg_IGRAET_1))
endfunction

function Trig_Igrok_Massiv_Liver_Func012C takes nothing returns boolean
	return (udg_Is_Fast_Wave_Start_On_Off_1)
endfunction

function Trig_Igrok_Massiv_Liver_Func013Func001C takes nothing returns boolean
	return (GetRandomInt(1, 2) == 1)
endfunction

function Trig_Igrok_Massiv_Liver_Func013Func002C takes nothing returns boolean
	return (GetRandomInt(1, 2) == 1)
endfunction

function Trig_Igrok_Massiv_Liver_Func013C takes nothing returns boolean
	return (GetRandomInt(1, 2) == 1)
endfunction

function Trig_Igrok_Massiv_Liver_Actions takes nothing returns nothing
	set udg_Igraet_Igrok_1[(1 + GetPlayerId(GetTriggerPlayer()))] = false
	call ForceRemovePlayer(udg_IGRAET_1, GetTriggerPlayer())
	call ForGroupBJ(GetUnitsOfPlayerAll(GetTriggerPlayer()), function Trig_Igrok_Massiv_Liver_Func004A)
	set udg_herounit_1[(1 + GetPlayerId(GetTriggerPlayer()))] = null
	call DestroyEffect(udg_Rune_On_Base_Effect_1[(CountPlayersInForceBJ(udg_IGRAET_1) + 1)])
	call RemoveUnit(udg_Rune_On_Base_Dummy_1[(CountPlayersInForceBJ(udg_IGRAET_1) + 1)])
	set udg_Rune_On_Base_Dummy_1[(CountPlayersInForceBJ(udg_IGRAET_1) + 1)] = null
	set udg_ColorString_1[(1 + GetPlayerId(GetTriggerPlayer()))] = "|cFF969696"
	call MultiboardSetItemValueBJ(udg_MultiBoard_1, 2, udg_PlayerNumberInMB_1[(1 + GetPlayerId(GetTriggerPlayer()))], ("|cFF969696" + (GetPlayerName(GetTriggerPlayer()) + "|r")))
	if (Trig_Igrok_Massiv_Liver_Func012C()) then
		if (Trig_Igrok_Massiv_Liver_Func012Func001C()) then
			set udg_Count_Players_Fast_Wave_Start_1 = (udg_Count_Players_Fast_Wave_Start_1 - 1)
			set udg_Is_Player_Fast_Wave_Start_1[(1 + GetPlayerId(GetTriggerPlayer()))] = false
		endif
		if (Trig_Igrok_Massiv_Liver_Func012Func002C()) then
			call StartTimerBJ(udg_Timer_Nomera_Volni_1, false, 1.)
		endif
	endif
	if (Trig_Igrok_Massiv_Liver_Func013C()) then
		if (Trig_Igrok_Massiv_Liver_Func013Func002C()) then
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS_1, (udg_ColorString_1[(1 + GetPlayerId(GetTriggerPlayer()))] + (GetPlayerName(GetTriggerPlayer()) + "|r по непонятным причинам решил ливнуть!")))
		else
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS_1, (udg_ColorString_1[(1 + GetPlayerId(GetTriggerPlayer()))] + (GetPlayerName(GetTriggerPlayer()) + "|r вышел из игры! Ну почему всегда найдется тот, кто запорет всю игру?!")))
		endif
	else
		if (Trig_Igrok_Massiv_Liver_Func013Func001C()) then
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS_1, (udg_ColorString_1[(1 + GetPlayerId(GetTriggerPlayer()))] + (GetPlayerName(GetTriggerPlayer()) + "|r сбежал с поля боя...Чтож‚ придется подолжать без него!")))
		else
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS_1, (udg_ColorString_1[(1 + GetPlayerId(GetTriggerPlayer()))] + (GetPlayerName(GetTriggerPlayer()) + "|r специально (а может случайно?) покинул игру!")))
		endif
	endif
endfunction

function InitTrig_Igrok_Massiv_Liver takes nothing returns nothing
	set gg_trg_Igrok_Massiv_Liver_1 = CreateTrigger()
	call TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver_1, Player(0))
	call TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver_1, Player(1))
	call TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver_1, Player(2))
	call TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver_1, Player(3))
	call TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver_1, Player(4))
	call TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver_1, Player(5))
	call TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver_1, Player(6))
	call TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver_1, Player(7))
	call TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver_1, Player(8))
	call TriggerAddAction(gg_trg_Igrok_Massiv_Liver_1, function Trig_Igrok_Massiv_Liver_Actions)
endfunction

function Trig_Messager_Actions takes nothing returns nothing
	call ConditionalTriggerExecute(gg_trg_Start_game_1)
	call CreateNUnitsAtLoc(1, 'h009', Player($B), GetRectCenter(gg_rct_Portal_Attack_Dummy_Left_1), bj_UNIT_FACING_1)
	set udg_Dammy_Portal_1[1] = bj_lastCreatedUnit_1
	call SetUnitFlyHeight(udg_Dammy_Portal_1[1], 150., 1200.)
	call CreateNUnitsAtLoc(1, 'h009', Player($B), GetRectCenter(gg_rct_Portal_Attack_Dummy_Right_1), bj_UNIT_FACING_1)
	set udg_Dammy_Portal_1[2] = bj_lastCreatedUnit_1
	call SetUnitFlyHeight(udg_Dammy_Portal_1[2], 150., 1200.)
	call CreateNUnitsAtLoc(1, 'h009', Player($B), GetRectCenter(gg_rct_Portal_Attack_Dummy_Top_1), bj_UNIT_FACING_1)
	set udg_Dammy_Portal_1[3] = bj_lastCreatedUnit_1
	call SetUnitFlyHeight(udg_Dammy_Portal_1[3], 150., 1200.)
	set udg_Rune_On_Base_Dummy_X_1[1] = 1220.
	set udg_Rune_On_Base_Dummy_Y_1[1] = -4740.
	set udg_Rune_On_Base_Effect_String_1[1] = "Doodads\\Cinematic\\GlowingRunes\\GlowingRunes0.mdl"
	set udg_Rune_On_Base_Dummy_X_1[2] = 1745.
	set udg_Rune_On_Base_Dummy_Y_1[2] = -6380.
	set udg_Rune_On_Base_Effect_String_1[2] = "Doodads\\Cinematic\\GlowingRunes\\GlowingRunes1.mdl"
	set udg_Rune_On_Base_Dummy_X_1[3] = 1100.
	set udg_Rune_On_Base_Dummy_Y_1[3] = -5000.
	set udg_Rune_On_Base_Effect_String_1[3] = "Doodads\\Cinematic\\GlowingRunes\\GlowingRunes2.mdl"
	set udg_Rune_On_Base_Dummy_X_1[4] = 1735.
	set udg_Rune_On_Base_Dummy_Y_1[4] = -6160.
	set udg_Rune_On_Base_Effect_String_1[4] = "Doodads\\Cinematic\\GlowingRunes\\GlowingRunes3.mdl"
	set udg_Rune_On_Base_Dummy_X_1[5] = 1400.
	set udg_Rune_On_Base_Dummy_Y_1[5] = -4990.
	set udg_Rune_On_Base_Effect_String_1[5] = "Doodads\\Cinematic\\GlowingRunes\\GlowingRunes4.mdl"
	set udg_Rune_On_Base_Dummy_X_1[6] = 1600.
	set udg_Rune_On_Base_Dummy_Y_1[6] = -6310.
	set udg_Rune_On_Base_Effect_String_1[6] = "Doodads\\Cinematic\\GlowingRunes\\GlowingRunes5.mdl"
	set udg_Rune_On_Base_Dummy_X_1[7] = 800.
	set udg_Rune_On_Base_Dummy_Y_1[7] = -6420.
	set udg_Rune_On_Base_Effect_String_1[7] = "Doodads\\Cinematic\\GlowingRunes\\GlowingRunes6.mdl"
	set udg_Rune_On_Base_Dummy_X_1[8] = 800.
	set udg_Rune_On_Base_Dummy_Y_1[8] = -6200.
	set udg_Rune_On_Base_Effect_String_1[8] = "Doodads\\Cinematic\\GlowingRunes\\GlowingRunes7.mdl"
	set udg_Rune_On_Base_Dummy_X_1[9] = 1000.
	set udg_Rune_On_Base_Dummy_Y_1[9] = -6400.
	set udg_Rune_On_Base_Effect_String_1[9] = "Doodads\\Cinematic\\GlowingRunes\\GlowingRunes8.mdl"
	set udg_Rune_Position_X_1[1] = $58C
	set udg_Rune_Position_Y_1[1] = -$AF0
	set udg_Rune_Position_X_1[2] = $BE5
	set udg_Rune_Position_Y_1[2] = -7523
	set udg_Rune_Position_X_1[3] = -390
	set udg_Rune_Position_Y_1[3] = -8275
	set udg_Arrow_Pointer_Guide_X_1[1] = $4CE
	set udg_Arrow_Pointer_Guide_Y_1[1] = -5065
	set udg_Arrow_Pointer_Guide_Angle_1[1] = $B4
	set udg_Arrow_Pointer_Guide_X_1[2] = $62C
	set udg_Arrow_Pointer_Guide_Y_1[2] = -6220
	set udg_Arrow_Pointer_Guide_Angle_1[2] = 45
	set udg_Arrow_Pointer_Guide_X_1[3] = $53A
	set udg_Arrow_Pointer_Guide_Y_1[3] = -5220
	set udg_Arrow_Pointer_Guide_Angle_1[3] = $B4
	set udg_Arrow_Pointer_Guide_X_1[4] = $65C
	set udg_Arrow_Pointer_Guide_Y_1[4] = -6130
	set udg_Arrow_Pointer_Guide_Angle_1[4] = 45
	set udg_Arrow_Pointer_Guide_X_1[5] = $461
	set udg_Arrow_Pointer_Guide_Y_1[5] = -5223
	set udg_Arrow_Pointer_Guide_Angle_1[5] = $B4
	set udg_Arrow_Pointer_Guide_X_1[6] = $591
	set udg_Arrow_Pointer_Guide_Y_1[6] = -6215
	set udg_Arrow_Pointer_Guide_Angle_1[6] = 45
	set udg_Arrow_Pointer_Guide_X_1[7] = 822
	set udg_Arrow_Pointer_Guide_Y_1[7] = -6227
	set udg_Arrow_Pointer_Guide_Angle_1[7] = 315
	set udg_Arrow_Pointer_Guide_X_1[8] = $40C
	set udg_Arrow_Pointer_Guide_Y_1[8] = -6216
	set udg_Arrow_Pointer_Guide_Angle_1[8] = 315
	set udg_Arrow_Pointer_Guide_X_1[9] = 790
	set udg_Arrow_Pointer_Guide_Y_1[9] = -6050
	set udg_Arrow_Pointer_Guide_Angle_1[9] = 315
	set udg_Arrow_Pointer_Guide_Count_1 = CountPlayersInForceBJ(udg_IGRAET_1)
	set bj_forLoopAIndex_1 = 1
	set bj_forLoopAIndexEnd_1 = CountPlayersInForceBJ(udg_IGRAET_1)
	loop
		exitwhen bj_forLoopAIndex_1 > bj_forLoopAIndexEnd_1
		call CreateNUnitsAtLoc(1, 'h00U', Player($F), Location(I2R(udg_Arrow_Pointer_Guide_X_1[bj_forLoopAIndex_1]), I2R(udg_Arrow_Pointer_Guide_Y_1[bj_forLoopAIndex_1])), I2R(udg_Arrow_Pointer_Guide_Angle_1[bj_forLoopAIndex_1]))
		set udg_Arrow_Pointer_Guide_Unit_1[bj_forLoopAIndex_1] = bj_lastCreatedUnit_1
		call AddSpecialEffectTargetUnitBJ("origin", bj_lastCreatedUnit_1, "Effects\\Arrow - Chapter Browse - Rotated.mdx")
		set udg_Arrow_Pointer_Guide_Effect_1[bj_forLoopAIndex_1] = bj_lastCreatedEffect_1
		set bj_forLoopAIndex_1 = bj_forLoopAIndex_1 + 1
	endloop
	call AddSpecialEffectLocBJ(Location(I2R(udg_Rune_Position_X_1[1]), I2R(udg_Rune_Position_Y_1[1])), "Effects\\MistAura.mdx")
	call AddSpecialEffectLocBJ(Location(I2R(udg_Rune_Position_X_1[2]), I2R(udg_Rune_Position_Y_1[2])), "Effects\\MistAura.mdx")
	call AddSpecialEffectLocBJ(Location(I2R(udg_Rune_Position_X_1[3]), I2R(udg_Rune_Position_Y_1[3])), "Effects\\MistAura.mdx")
	call AddSpecialEffectLocBJ(Location(I2R(udg_Rune_Position_X_1[1]), I2R(udg_Rune_Position_Y_1[1])), "Effects\\GreenRing.mdx")
	set bj_forLoopAIndex_1 = 1
	set bj_forLoopAIndexEnd_1 = CountPlayersInForceBJ(udg_IGRAET_1)
	loop
		exitwhen bj_forLoopAIndex_1 > bj_forLoopAIndexEnd_1
		call CreateNUnitsAtLoc(1, 'h00E', Player($F), Location(udg_Rune_On_Base_Dummy_X_1[bj_forLoopAIndex_1], udg_Rune_On_Base_Dummy_Y_1[bj_forLoopAIndex_1]), bj_UNIT_FACING_1)
		call AddSpecialEffectTargetUnitBJ("origin", bj_lastCreatedUnit_1, udg_Rune_On_Base_Effect_String_1[bj_forLoopAIndex_1])
		call SetUnitFlyHeight(bj_lastCreatedUnit_1, -50., .0)
		set udg_Rune_On_Base_Effect_1[bj_forLoopAIndex_1] = bj_lastCreatedEffect_1
		set udg_Rune_On_Base_Dummy_1[bj_forLoopAIndex_1] = bj_lastCreatedUnit_1
		set bj_forLoopAIndex_1 = bj_forLoopAIndex_1 + 1
	endloop
endfunction

function InitTrig_Messager takes nothing returns nothing
	set gg_trg_Messager_1 = CreateTrigger()
	call TriggerRegisterTimerEventSingle(gg_trg_Messager_1, 8.)
	call TriggerAddAction(gg_trg_Messager_1, function Trig_Messager_Actions)
endfunction

function Trig_Create_TExttags_about_Shops_Actions takes nothing returns nothing
	call CreateTexttag("|cFF00C850Барахолка|r", .03, $FF, 2050., -5100., .0, .0, .0, 9999999.)
	call CreateTexttag("|cFF00C850Экипировка|r", .03, $FF, 2050., -5250., .0, .0, .0, 99999999.)
	call CreateTexttag("|cFFFF8C00Броня и Доспехи|r", .03, $FF, 2050., -5400., .0, .0, .0, 99999999.)
	call CreateTexttag("|cFF9600FFВооружение|r", .03, $FF, 2050., -5660., .0, .0, .0, 99999999.)
	call CreateTexttag("|cFF6464FAТайник Странника|r", .03, $FF, 2050., -5900., .0, .0, .0, 9999999.)
	call CreateTexttag("|cFF6464FAМагические Артефакты|r", .03, $FF, 2050., -6130., .0, .0, .0, 999999.)
endfunction

function InitTrig_Create_TExttags_about_Shops takes nothing returns nothing
	set gg_trg_Create_TExttags_about_Shops_1 = CreateTrigger()
	call TriggerRegisterTimerEventSingle(gg_trg_Create_TExttags_about_Shops_1, 9.)
	call TriggerAddAction(gg_trg_Create_TExttags_about_Shops_1, function Trig_Create_TExttags_about_Shops_Actions)
endfunction

function Trig_InitHashtable_Actions takes nothing returns nothing
	set udg_hash_1 = InitHashtable()
endfunction

function InitTrig_InitHashtable takes nothing returns nothing
	set gg_trg_InitHashtable_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_InitHashtable_1, function Trig_InitHashtable_Actions)
endfunction

function Trig_Save_Sounds_Actions takes nothing returns nothing
	set udg_Game_Sound_1[1] = CreateSoundFromLabel("Hint", false, false, false, $A, $A)
	set udg_Game_Sound_1[2] = CreateSoundFromLabel("GoodJob", false, false, false, $A, $A)
	set udg_Game_Sound_1[3] = CreateSoundFromLabel("Warning", false, false, false, $A, $A)
	set udg_Game_Sound_1[4] = CreateSoundFromLabel("ClanInvitation", false, false, false, $A, $A)
	set udg_Game_Sound_1[5] = CreateSoundFromLabel("NewTournament", false, false, false, $A, $A)
	set udg_Game_Sound_1[6] = CreateSoundFromLabel("ArrangedTeamInvitation", false, false, false, $A, $A)
	set udg_Game_Sound_1[7] = CreateSoundFromLabel("GameFound", false, false, false, $A, $A)
	set udg_Game_Sound_1[8] = gg_snd_HeroStep1_1
	set udg_Game_Sound_1[$B] = gg_snd_HeroStep2_1
	set udg_Game_Sound_1[$A] = gg_snd_HeroStep3_1
	set udg_Game_Sound_1[$B] = gg_snd_HeroStep4_1
	set udg_Game_Sound_1[$C] = gg_snd_KnightInventoryFull1_1
	set udg_Game_Sound_1[$D] = gg_snd_KnightNoGold1_1
	set udg_Game_Sound_1[$E] = CreateSoundFromLabel("ShimmeringPortalBirth", false, false, false, $A, $A)
	set udg_Game_Sound_1[$F] = CreateSoundFromLabel("ShimmeringPortalDeath", false, false, false, $A, $A)
	set udg_Game_Sound_1[16] = CreateSoundFromLabel("ShimmeringPortalEntrance", false, false, false, $A, $A)
	set udg_Game_Sound_1[18] = CreateSoundFromLabel("Tranquility", false, false, false, $A, $A)
	set udg_Game_Sound_1[19] = CreateSoundFromLabel("AlchemistChemicalBurst1", false, false, false, $A, $A)
	set udg_Game_Sound_1[20] = CreateSoundFromLabel("AlchemistMorph1", false, false, false, $A, $A)
endfunction

function InitTrig_Save_Sounds takes nothing returns nothing
	set gg_trg_Save_Sounds_1 = CreateTrigger()
	call TriggerRegisterTimerEvent(gg_trg_Save_Sounds_1, 5., false)
	call TriggerAddAction(gg_trg_Save_Sounds_1, function Trig_Save_Sounds_Actions)
endfunction

function HandleCounter_Update takes nothing returns nothing
	local integer i = 0
	local integer id
	local location P
	local real result = 0
	loop
		exitwhen i_0 >= 50
		set i_0 = i_0 + 1
		set P_0[i_0] = Location(0, 0)
		set id_0 = GetHandleId(P_0[i_0])
		set result_0 = result_0 + (id_0 - $100000)
	endloop
	set result_0 = result_0 / i_0 - i_0 / 2
	loop
		call RemoveLocation(P_0[i_0])
		set P_0[i_0] = null
		exitwhen i_0 <= 1
		set i_0 = i_0 - 1
	endloop
	call LeaderboardSetItemValue(udg_HandleBoard_1, 0, R2I(result_0))
endfunction

function HandleCounter_Actions takes nothing returns nothing
	set udg_HandleBoard_1 = CreateLeaderboard()
	call LeaderboardSetLabel(udg_HandleBoard_1, "Handle Counter")
	call PlayerSetLeaderboard(GetLocalPlayer(), udg_HandleBoard_1)
	call LeaderboardDisplay(udg_HandleBoard_1, false)
	if GetPlayerName(GetLocalPlayer()) == "Derarius" or GetPlayerName(GetLocalPlayer()) == "WorldEdit" then
		call LeaderboardDisplay(udg_HandleBoard_1, true)
	endif
	call LeaderboardAddItem(udg_HandleBoard_1, "Handles", 0, Player(0))
	call LeaderboardSetSizeByItemCount(udg_HandleBoard_1, 1)
	call HandleCounter_Update()
	call TimerStart(GetExpiredTimer(), .05, true, function HandleCounter_Update)
endfunction

function InitTrig_HandleCounter takes nothing returns nothing
	call TimerStart(CreateTimer(), 0, false, function HandleCounter_Actions)
endfunction

function Trig_Set_Chlenix_Actions takes nothing returns nothing
	set udg_Integer_Creep_On_Line_Spawn_1[1] = S2I(SubStringBJ(GetEventPlayerChatString(), $A, $A))
	set udg_Integer_Creep_On_Line_Spawn_1[2] = S2I(SubStringBJ(GetEventPlayerChatString(), $B, $B))
	set udg_Integer_Creep_On_Line_Spawn_1[3] = S2I(SubStringBJ(GetEventPlayerChatString(), $C, $C))
	call DisplayTextToForce(bj_FORCE_ALL_PLAYERS_1, "|cFFFF0000CHLENIX|r АКТИВИРОВАН")
endfunction

function InitTrig_Set_Chlenix takes nothing returns nothing
	set gg_trg_Set_Chlenix_1 = CreateTrigger()
	call TriggerRegisterPlayerChatEvent(gg_trg_Set_Chlenix_1, Player(0), "-chlenix", false)
	call TriggerAddAction(gg_trg_Set_Chlenix_1, function Trig_Set_Chlenix_Actions)
endfunction

function Trig_Set_Energy_Walls_Func003A takes nothing returns nothing
	set udg_EnergyWallX_1[udg_Temp_Integer_1[1]] = R2I(GetUnitX(GetEnumUnit()))
	set udg_EnergyWallY_1[udg_Temp_Integer_1[1]] = R2I(GetUnitY(GetEnumUnit()))
	set udg_EnergyWallAngle_1[udg_Temp_Integer_1[1]] = R2I(GetUnitFacing(GetEnumUnit()))
	call RemoveUnit(GetEnumUnit())
	set udg_Temp_Integer_1[1] = (udg_Temp_Integer_1[1] + 1)
endfunction

function Trig_Set_Energy_Walls_Actions takes nothing returns nothing
	set udg_Temp_Integer_1[1] = 1
	set udg_EnergyWallCount_1[1] = $B
	call ForGroupBJ(GetUnitsOfPlayerAndTypeId(Player($F), 'h00I'), function Trig_Set_Energy_Walls_Func003A)
endfunction

function InitTrig_Set_Energy_Walls takes nothing returns nothing
	set gg_trg_Set_Energy_Walls_1 = CreateTrigger()
	call TriggerRegisterTimerEventSingle(gg_trg_Set_Energy_Walls_1, 5.)
	call TriggerAddAction(gg_trg_Set_Energy_Walls_1, function Trig_Set_Energy_Walls_Actions)
endfunction

function Trig_EitiArenaRemovesAllItems_Actions takes nothing returns nothing
	call RemoveItem(GetEnumItem())
endfunction

function Trig_TimerEitiAreniTheEnd3_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local timerdialog td = LoadTimerDialogHandle(udg_hash_1, GetHandleId(gg_rct_Event_Bonus_Etei_arena_1_1), $B)
	local group gruppa = CreateGroup()
	local unit Picked
	local real xc = GetRectCenterX(gg_rct_Respawn_Heroes_1)
	local real yc = GetRectCenterY(gg_rct_Respawn_Heroes_1)
	local real perekluchatel = .0
	call GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev_1, gruppa_0)
	loop
		set Picked_0 = FirstOfGroup(gruppa_0)
		exitwhen Picked_0 == null
		call DestroyFogModifier(LoadFogModifierHandle(udg_hash_1, GetHandleId(Picked_0), $AB))
		if perekluchatel_0 >= 0 then
			set perekluchatel_0 = -perekluchatel_0
			set perekluchatel_0 = perekluchatel_0 - 50.
		else
			set perekluchatel_0 = -perekluchatel_0
			set perekluchatel_0 = perekluchatel_0 + 50.
		endif
		set xc_0 = GetRectCenterX(gg_rct_Respawn_Heroes_1) + perekluchatel_0
		set yc_0 = GetRectCenterY(gg_rct_Respawn_Heroes_1)
		call SetUnitPosition(Picked_0, xc_0, yc_0)
		call SetUnitFacing(Picked_0, 270.)
		call SetUnitState(Picked_0, UNIT_STATE_LIFE_1, $540BE3FF)
		call SetUnitState(Picked_0, UNIT_STATE_MANA_1, $540BE3FF)
		call ShowUnit(Picked_0, true)
		call PauseUnit(Picked_0, false)
		if (GetLocalPlayer() == GetOwningPlayer(Picked_0)) then
			call ResetToGameCamera(.0)
			call PanCameraToTimed(xc_0, yc_0, .0)
			call ClearSelection()
			call SelectUnit(Picked_0, true)
		endif
		call GroupRemoveUnit(gruppa_0, Picked_0)
	endloop
	call EnumItemsInRect(gg_rct_Event_Bonus_Etei_arena_1_1, null, function Trig_EitiArenaRemovesAllItems_Actions)
	call StartTimerBJ(udg_Timer_Nomera_Volni_1, false, 75.)
	call CreateTimerDialogBJ(udg_Timer_Nomera_Volni_1, ("Волна № |cFFFF0000" + (I2S(udg_Nomer_samoi_volni_1) + "|r")))
	set udg_TimerDialog_Nomera_Volni_1 = bj_lastCreatedTimerDialog_1
	call TimerDialogSetTimeColorBJ(udg_TimerDialog_Nomera_Volni_1, 'd', 90., 30., 20.)
	set udg_Is_Fast_Wave_Start_On_Off_1 = true
	set udg_Is_Eiti_Arena_Already_Go_1 = false
	call KillUnit(LoadUnitHandle(udg_hash_1, GetHandleId(gg_rct_Event_Bonus_Etei_arena_1_1), $C))
	call KillUnit(LoadUnitHandle(udg_hash_1, GetHandleId(gg_rct_Event_Bonus_Etei_arena_1_1), $D))
	call EnableTrigger(gg_trg_Hero_Dead_1)
	call DestroyTimerDialog(td_0)
	call DestroyTimer(t_0)
	call FlushChildHashtable(udg_hash_1, h_0)
	set t_0 = null
	set td_0 = null
	set gruppa_0 = null
	set Picked_0 = null
endfunction

function Trig_TimerEitiAreniTheEnd2_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local timer t2 = CreateTimer()
	local integer h2 = GetHandleId(t2_0)
	call TimerStart(t2_0, 1.25, false, function Trig_TimerEitiAreniTheEnd3_Actions)
	set t_0 = null
	set t2_0 = null
endfunction

function Trig_TimerEitiAreniTheEnd_ForForce takes nothing returns nothing
	set bj_forLoopAIndex_1 = 1
	loop
		exitwhen bj_forLoopAIndex_1 > 9
		call SetPlayerAllianceStateBJ(GetEnumPlayer(), Player(bj_forLoopAIndex_1 - 1), 3)
		set bj_forLoopAIndex_1 = bj_forLoopAIndex_1 + 1
	endloop
endfunction

function Trig_TimerEitiAreniTheEnd_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit Picked
	local group gruppa = CreateGroup()
	local real angle = 0
	local real x = GetRectCenterX(gg_rct_Event_Bonus_Etei_arena_1_1)
	local real y = GetRectCenterY(gg_rct_Event_Bonus_Etei_arena_1_1)
	local real xc = GetRectCenterX(gg_rct_Respawn_Heroes_1)
	local real yc = GetRectCenterY(gg_rct_Respawn_Heroes_1)
	local real xu
	local real yu
	local integer play = 0
	local integer hhero = 0
	local texttag txt = CreateTextTag()
	local real vel = .0221875
	local real angletxt = 45. + GetRandomReal(.0, 90.)
	local real xvel = vel_0 * Cos(angle_0 * bj_DEGTORAD_1)
	local real yvel = vel_0 * Sin(angle_0 * bj_DEGTORAD_1)
	local timer t2 = CreateTimer()
	local integer h2 = GetHandleId(t2_0)
	local real timeRemaining = 0
	local real anglestep = (360. / CountPlayersInForceBJ(udg_IGRAET_1))
	call ForForce(udg_IGRAET_1, function Trig_TimerEitiAreniTheEnd_ForForce)
	call GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev_1, gruppa_0)
	call TimerStart(t2_0, 4., false, function Trig_TimerEitiAreniTheEnd2_Actions)
	loop
		set Picked_0 = FirstOfGroup(gruppa_0)
		exitwhen Picked_0 == null
		set angle_0 = angle_0 + anglestep_0
		call SetUnitPosition(Picked_0, (x_0 + 400 * Cos(angle_0 * bj_DEGTORAD_1)), (y_0 + 400 * Sin(angle_0 * bj_DEGTORAD_1)))
		call ReviveHero(Picked_0, (x_0 + 400 * Cos(angle_0 * bj_DEGTORAD_1)), (y_0 + 400 * Sin(angle_0 * bj_DEGTORAD_1)), true)
		call SetUnitFacing(Picked_0, bj_RADTODEG_1 * Atan2(y_0 - GetUnitY(Picked_0), x_0 - GetUnitX(Picked_0)))
		call SetUnitState(Picked_0, UNIT_STATE_LIFE_1, $540BE3FF)
		call SetUnitState(Picked_0, UNIT_STATE_MANA_1, $540BE3FF)
		if (GetLocalPlayer() == GetOwningPlayer(Picked_0)) then
			call PanCameraToTimed(x_0, y_0, .0)
		endif
		call GroupRemoveUnit(gruppa_0, Picked_0)
	endloop
	call GroupEnumUnitsInRect(gruppa_0, gg_rct_Event_Bonus_Etei_arena_1_1, null)
	call KillSummonsAndIllusions(gruppa_0)
	set gruppa_0 = CreateGroup()
	call GroupEnumUnitsInRect(gruppa_0, gg_rct_Event_Bonus_Etei_arena_1_1, null)
	loop
		set Picked_0 = FirstOfGroup(gruppa_0)
		exitwhen Picked_0 == null
		if GetUnitTypeId(Picked_0) != 'h00C' and GetUnitTypeId(Picked_0) != 'h00B' then
			call PauseUnit(Picked_0, true)
		endif
		call GroupRemoveUnit(gruppa_0, Picked_0)
	endloop
	call GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev_1, gruppa_0)
	loop
		set Picked_0 = FirstOfGroup(gruppa_0)
		exitwhen Picked_0 == null
		set hhero_0 = GetHandleId(Picked_0)
		set play_0 = LoadInteger(udg_hash_1, hhero_0, 1)
		if play_0 == 2 or play_0 == 1 or play_0 == 0 then
			set xu_0 = GetUnitX(Picked_0)
			set yu_0 = GetUnitY(Picked_0)
			call SetTextTagText(txt_0, "|cFFFFFF00+650|r", .045)
			call SetTextTagPos(txt_0, xu_0, yu_0, .0)
			call SetTextTagColor(txt_0, 0, 0, 0, 50)
			call SetTextTagVelocity(txt_0, xvel_0, yvel_0)
			call SetTextTagPermanent(txt_0, false)
			call SetTextTagLifespan(txt_0, 4.)
			call SetTextTagFadepoint(txt_0, .0)
			set txt_0 = CreateTextTag()
			call SetPlayerState(GetOwningPlayer(Picked_0), PLAYER_STATE_RESOURCE_GOLD_1, GetPlayerState(GetOwningPlayer(Picked_0), PLAYER_STATE_RESOURCE_GOLD_1) + 650)
			if GetLocalPlayer() == GetOwningPlayer(Picked_0) then
				call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Вы получили " + udg_ColorString_1[23] + I2S(650) + " золота|r!!!")
			endif
		endif
		call GroupRemoveUnit(gruppa_0, Picked_0)
	endloop
	set t_0 = null
	call GroupClear(gruppa_0)
	call DestroyGroup(gruppa_0)
	set gruppa_0 = null
	set txt_0 = null
	set t2_0 = null
	set Picked_0 = null
	set gruppa_0 = null
	set txt_0 = null
	set t2_0 = null
endfunction

function Trig_Nachalo_Eiti_aren_Actions_Periodic takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local integer timeout = LoadInteger(udg_hash_1, h_0, 3)
	local integer lvl = LoadInteger(udg_hash_1, h_0, 4)
	local integer I = LoadInteger(udg_hash_1, h_0, 5)
	local rect rct = gg_rct_Event_Bonus_Etei_arena_1_1
	local real minx = GetRectMinX(rct_0)
	local real maxx = GetRectMaxX(rct_0)
	local real miny = GetRectMinY(rct_0)
	local real maxy = GetRectMaxY(rct_0)
	local real x = GetRandomReal(minx_0, maxx_0)
	local real y = GetRandomReal(miny_0, maxy_0)
	local player p = Player($C)
	local integer random = R2I($F + 5 * CountPlayersInForceBJ(udg_IGRAET_1))
	local integer randomgold = GetRandomInt(1, R2I(30 - 3 * CountPlayersInForceBJ(udg_IGRAET_1)))
	local integer o = GetHandleId(udg_Gruppa_HeroUnitov_Geroev_1)
	local integer ff = 0
	local timer t2 = LoadTimerHandle(udg_hash_1, h_0, 8)
	local group gruppa = CreateGroup()
	local unit Picked
	local real xt
	local real yt
	call GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev_1, gruppa_0)
	loop
		set Picked_0 = FirstOfGroup(gruppa_0)
		exitwhen Picked_0 == null
		set xt_0 = GetUnitX(Picked_0)
		set yt_0 = GetUnitY(Picked_0)
		if not ((GetRectMinX(gg_rct_Event_Bonus_Etei_arena_1_1) <= xt_0) and (xt_0 <= GetRectMaxX(gg_rct_Event_Bonus_Etei_arena_1_1)) and (GetRectMinY(gg_rct_Event_Bonus_Etei_arena_1_1) <= yt_0) and (yt_0 <= GetRectMaxY(gg_rct_Event_Bonus_Etei_arena_1_1))) then
			call SetUnitPosition(Picked_0, 4250., 800.)
			if (GetLocalPlayer() == GetOwningPlayer(Picked_0)) then
				call PanCameraToTimed(4250., 800., .0)
			endif
			call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl", 4250., 800.))
		endif
		call GroupRemoveUnit(gruppa_0, Picked_0)
	endloop
	set ff_0 = LoadInteger(udg_hash_1, o_0, 2)
	set I_0 = I_0 + 1
	if randomgold_0 <= 3 then
		call CreateItem('I03B', x_0, y_0)
	endif
	if randomgold_0 == 4 then
		call CreateItem('I03A', x_0, y_0)
	endif
	call SaveInteger(udg_hash_1, h_0, 3, timeout_0 - 1)
	set x_0 = GetRandomReal(minx_0 + 200., maxx_0 - 200.)
	set y_0 = GetRandomReal(miny_0 + 200., maxy_0 - 200.)
	if GetRandomInt(1, 'd') <= random_0 then
		call CreatePotion(x_0, y_0, 1, 6)
	endif
	if timeout_0 <= 0 then
		call DestroyTimer(t_0)
		call FlushChildHashtable(udg_hash_1, h_0)
	endif
	if ff_0 == 1 then
		call TimerStart(t2_0, .05, false, function Trig_TimerEitiAreniTheEnd_Actions)
	endif
	call GroupClear(gruppa_0)
	call DestroyGroup(gruppa_0)
	set gruppa_0 = null
	set Picked_0 = null
	set t_0 = null
	set t2_0 = null
	set p_0 = null
	set rct_0 = null
endfunction

function Trig_Nachalo_Eiti_aren2_Actions takes nothing returns nothing
	local timer t3 = GetExpiredTimer()
	local integer h = GetHandleId(t3_0)
	local unit Picked
	local group gruppa = CreateGroup()
	local real xtop = GetRectCenterX(gg_rct_Oblast_Teleporta_Arena_Top_1)
	local real ytop = GetRectCenterY(gg_rct_Oblast_Teleporta_Arena_Top_1)
	local real xbot = GetRectCenterX(gg_rct_Oblast_Teleporta_Arena_Bot_1)
	local real ybot = GetRectCenterY(gg_rct_Oblast_Teleporta_Arena_Bot_1)
	local timer t = LoadTimerHandle(udg_hash_1, h_0, 1)
	local timer t2 = LoadTimerHandle(udg_hash_1, h_0, 2)
	local timerdialog td = LoadTimerDialogHandle(udg_hash_1, h_0, 3)
	local unit portal
	call GroupEnumUnitsInRect(gruppa_0, gg_rct_Event_Bonus_Etei_arena_1_1, null)
	loop
		set Picked_0 = FirstOfGroup(gruppa_0)
		exitwhen Picked_0 == null
		call PauseUnit(Picked_0, false)
		call GroupRemoveUnit(gruppa_0, Picked_0)
	endloop
	set portal_0 = CreateUnit(Player($F), 'h012', xtop_0, ytop_0, .0)
	call SaveUnitHandle(udg_hash_1, GetHandleId(gg_rct_Event_Bonus_Etei_arena_1_1), $C, portal_0)
	set portal_0 = CreateUnit(Player($F), 'h012', xbot_0, ybot_0, .0)
	call SaveUnitHandle(udg_hash_1, GetHandleId(gg_rct_Event_Bonus_Etei_arena_1_1), $D, portal_0)
	call TimerStart(t2_0, 90., false, function Trig_TimerEitiAreniTheEnd_Actions)
	call TimerDialogSetTitle(td_0, "Time Remaining:")
	call TimerDialogDisplay(td_0, true)
	call TimerDialogSetTimeColor(td_0, $FF, 30, 30, $A)
	call SaveTimerDialogHandle(udg_hash_1, GetHandleId(gg_rct_Event_Bonus_Etei_arena_1_1), $B, td_0)
	call TimerStart(t_0, .5, true, function Trig_Nachalo_Eiti_aren_Actions_Periodic)
	set Picked_0 = null
	set t_0 = null
	set t2_0 = null
	set td_0 = null
	call GroupClear(gruppa_0)
	call DestroyGroup(gruppa_0)
	set gruppa_0 = null
endfunction

function Trig_Nachalo_Eiti_aren_FuncForGroup takes nothing returns nothing
	set bj_forLoopAIndex_1 = 1
	loop
		exitwhen bj_forLoopAIndex_1 > 9
		if GetEnumPlayer() != Player(bj_forLoopAIndex_1 - 1) then
			call SetPlayerAllianceStateBJ(GetEnumPlayer(), Player(bj_forLoopAIndex_1 - 1), 0)
		endif
		set bj_forLoopAIndex_1 = bj_forLoopAIndex_1 + 1
	endloop
endfunction

function Trig_Nachalo_Eiti_aren_Actions takes nothing returns nothing
	local real angle = 0
	local real x = GetRectCenterX(gg_rct_Event_Bonus_Etei_arena_1_1)
	local real y = GetRectCenterY(gg_rct_Event_Bonus_Etei_arena_1_1)
	local real xtop = GetRectCenterX(gg_rct_Oblast_Teleporta_Arena_Top_1)
	local real ytop = GetRectCenterY(gg_rct_Oblast_Teleporta_Arena_Top_1)
	local real xbot = GetRectCenterX(gg_rct_Oblast_Teleporta_Arena_Bot_1)
	local real ybot = GetRectCenterY(gg_rct_Oblast_Teleporta_Arena_Bot_1)
	local unit Picked
	local timer t2 = CreateTimer()
	local timerdialog td = CreateTimerDialog(t2_0)
	local integer h2 = GetHandleId(t2_0)
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local timer t3 = CreateTimer()
	local integer h3 = GetHandleId(t3_0)
	local group gruppa = CreateGroup()
	local group grupa = CreateGroup()
	local integer I = 0
	local integer lvl = 0
	local integer hhero
	local real anglestep = (360. / CountPlayersInForceBJ(udg_IGRAET_1))
	local integer o = GetHandleId(udg_Gruppa_HeroUnitov_Geroev_1)
	call GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev_1, gruppa_0)
	call GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev_1, grupa_0)
	call SaveInteger(udg_hash_1, h_0, 3, $B4)
	call SaveInteger(udg_hash_1, h_0, 4, lvl_0)
	call SaveInteger(udg_hash_1, h_0, 5, I_0)
	call SaveReal(udg_hash_1, h_0, 6, x_0)
	call SaveReal(udg_hash_1, h_0, 7, y_0)
	call SaveTimerHandle(udg_hash_1, h_0, 8, t_0)
	call SaveGroupHandle(udg_hash_1, o_0, 1, grupa_0)
	call DisableTrigger(gg_trg_Hero_Dead_1)
	call ForForce(udg_IGRAET_1, function Trig_Nachalo_Eiti_aren_FuncForGroup)
	if (IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS_1)) then
		call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Добро Пожаловать на |cFFFFDC00Золотую Поляну|r!!!")
		call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Здесь каждый играет сам за себя. Постарайтесь выжить указанное время и собрать как можно больше золотых монеток. Удачи!")
	endif
	loop
		set Picked_0 = FirstOfGroup(gruppa_0)
		exitwhen Picked_0 == null
		set hhero_0 = GetHandleId(Picked_0)
		call SaveInteger(udg_hash_1, hhero_0, 1, 0)
		set angle_0 = angle_0 + anglestep_0
		call SetUnitPosition(Picked_0, (x_0 + 400 * Cos(angle_0 * bj_DEGTORAD_1)), (y_0 + 400 * Sin(angle_0 * bj_DEGTORAD_1)))
		call SetUnitFacing(Picked_0, bj_RADTODEG_1 * Atan2(y_0 - GetUnitY(Picked_0), x_0 - GetUnitX(Picked_0)))
		set bj_lastCreatedFogModifier_1 = CreateFogModifierRect(GetOwningPlayer(Picked_0), FOG_OF_WAR_VISIBLE_1, gg_rct_Event_Bonus_Etei_arena_1_1, true, false)
		call FogModifierStart(bj_lastCreatedFogModifier_1)
		call SaveFogModifierHandle(udg_hash_1, GetHandleId(Picked_0), $AB, bj_lastCreatedFogModifier_1)
		if (GetLocalPlayer() == GetOwningPlayer(Picked_0)) then
			call SoundForPlayer(GetOwningPlayer(Picked_0), 7)
			call ClearSelection()
			call SelectUnit(Picked_0, true)
			call PanCameraToTimed(x_0, y_0, .0)
		endif
		call GroupRemoveUnit(gruppa_0, Picked_0)
	endloop
	call GroupEnumUnitsInRange(gruppa_0, 0, 0, 99999, null)
	call KillSummonsAndIllusions(gruppa_0)
	set gruppa_0 = CreateGroup()
	call GroupEnumUnitsInRect(gruppa_0, gg_rct_Event_Bonus_Etei_arena_1_1, null)
	loop
		set Picked_0 = FirstOfGroup(gruppa_0)
		exitwhen Picked_0 == null
		call PauseUnit(Picked_0, true)
		call GroupRemoveUnit(gruppa_0, Picked_0)
	endloop
	call SaveTimerHandle(udg_hash_1, h3_0, 1, t_0)
	call SaveTimerHandle(udg_hash_1, h3_0, 2, t2_0)
	call SaveTimerDialogHandle(udg_hash_1, h3_0, 3, td_0)
	set udg_Is_Eiti_Arena_Already_Go_1 = true
	call TimerStart(t3_0, 5., false, function Trig_Nachalo_Eiti_aren2_Actions)
	set Picked_0 = null
	set t_0 = null
	set t2_0 = null
	set t3_0 = null
	set td_0 = null
	call GroupClear(gruppa_0)
	call DestroyGroup(gruppa_0)
	set gruppa_0 = null
	set grupa_0 = null
endfunction

function InitTrig_Nachalo_Eiti_aren takes nothing returns nothing
	set gg_trg_Nachalo_Eiti_aren_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Nachalo_Eiti_aren_1, function Trig_Nachalo_Eiti_aren_Actions)
endfunction

function Trig_Hero_Deadd_Timer2_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit u = LoadUnitHandle(udg_hash_1, h_0, 1)
	local effect ef = LoadEffectHandle(udg_hash_1, h_0, 4)
	call DestroyEffect(ef_0)
	call UnitRemoveAbility(u_0, 'Avul')
	call DestroyTimer(t_0)
	call FlushChildHashtable(udg_hash_1, h_0)
	set t_0 = null
	set u_0 = null
endfunction

function Trig_Hero_Deadd_Timer_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit u = LoadUnitHandle(udg_hash_1, h_0, 1)
	local real x = LoadReal(udg_hash_1, h_0, 2)
	local real y = LoadReal(udg_hash_1, h_0, 3)
	local effect ef = AddSpecialEffectTarget("Abilities\\Spells\\Human\\DivineShield\\DivineShieldTarget.mdl", u_0, "origin")
	call SaveEffectHandle(udg_hash_1, h_0, 4, ef_0)
	call TimerStart(t_0, 3., false, function Trig_Hero_Deadd_Timer2_Actions)
	call ReviveHero(u_0, x_0, y_0, true)
	call SetUnitState(u_0, UNIT_STATE_MANA_1, GetUnitState(u_0, UNIT_STATE_MAX_MANA_1))
	call SetUnitState(u_0, UNIT_STATE_LIFE_1, GetUnitState(u_0, UNIT_STATE_MAX_LIFE_1))
	call UnitAddAbility(u_0, 'Avul')
	if (GetLocalPlayer() == GetOwningPlayer(u_0)) then
		call DisplayTextToPlayer(GetOwningPlayer(u_0), 0, 0, "|cFFFFFF00Ваш Герой Получил Второй Шанс!!!|r")
		call PanCameraToTimed(x_0, y_0, .0)
		call ClearSelection()
		call SelectUnit(u_0, true)
	endif
	set t_0 = null
	set u_0 = null
endfunction

function Trig_HeroDeadonEitiArena_Actions takes nothing returns nothing
	local unit u = GetDyingUnit()
	local integer hhero = GetHandleId(u_0)
	local player p = GetOwningPlayer(u_0)
	local integer play = GetPlayerId(p_0) + 1
	local integer heroint
	local unit killer = GetKillingUnit()
	local player pk = GetOwningPlayer(killer_0)
	local integer random = GetRandomInt(1, 3)
	local integer o = GetHandleId(udg_Gruppa_HeroUnitov_Geroev_1)
	local group g = LoadGroupHandle(udg_hash_1, o_0, 1)
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local real xu = GetUnitX(u_0)
	local real yu = GetUnitY(u_0)
	local string stext = ""
	local integer ff = 0
	local integer gold = 0
	local integer xp = 0
	set heroint_0[play_0] = 0
	set heroint_0[play_0] = LoadInteger(udg_hash_1, hhero_0, 1)
	call SaveUnitHandle(udg_hash_1, h_0, 1, u_0)
	call SaveReal(udg_hash_1, h_0, 2, xu_0)
	call SaveReal(udg_hash_1, h_0, 3, yu_0)
	set heroint_0[play_0] = heroint_0[play_0] + 1
	call SaveInteger(udg_hash_1, hhero_0, 1, heroint_0[play_0])
	if heroint_0[play_0] == 1 then
		call TimerStart(t_0, 4., false, function Trig_Hero_Deadd_Timer_Actions)
		set gold_0 = 350
		set xp_0 = 500
	endif
	if heroint_0[play_0] == 2 then
		call TimerStart(t_0, 4., false, function Trig_Hero_Deadd_Timer_Actions)
		set gold_0 = $FA
		set xp_0 = 300
	endif
	if heroint_0[play_0] == 3 then
		set gold_0 = $96
		set xp_0 = 'd'
	endif
	if GetPlayerId(pk_0) <= 8 and heroint_0[play_0] <= 3 then
		if random_0 == 1 then
			set stext_0 = udg_ColorString_1[GetPlayerId(pk_0) + 1] + GetPlayerName(pk_0) + "|r убил " + udg_ColorString_1[GetPlayerId(p_0) + 1] + GetPlayerName(p_0) + "|r и получает за это " + udg_ColorString_1[23] + I2S(gold_0) + " золота|r и " + udg_ColorString_1[23] + I2S(xp_0) + " опыта|r!!!"
		endif
		if random_0 == 2 then
			set stext_0 = udg_ColorString_1[GetPlayerId(pk_0) + 1] + GetPlayerName(pk_0) + "|r скукожил " + udg_ColorString_1[GetPlayerId(p_0) + 1] + GetPlayerName(p_0) + "|r и получает за это " + udg_ColorString_1[23] + I2S(gold_0) + " золота|r и " + udg_ColorString_1[23] + I2S(xp_0) + " опыта|r!!!"
		endif
		if random_0 == 3 then
			set stext_0 = udg_ColorString_1[GetPlayerId(pk_0) + 1] + GetPlayerName(pk_0) + "|r распотрошил " + udg_ColorString_1[GetPlayerId(p_0) + 1] + GetPlayerName(p_0) + "|r и получает за это " + udg_ColorString_1[23] + I2S(gold_0) + " золота|r и " + udg_ColorString_1[23] + I2S(xp_0) + " опыта|r!!!"
		endif
		call SetPlayerState(pk_0, PLAYER_STATE_RESOURCE_GOLD_1, GetPlayerState(pk_0, PLAYER_STATE_RESOURCE_GOLD_1) + gold_0)
		call AddHeroXP(killer_0, xp_0, true)
	endif
	if stext_0 != null and stext_0 != "" then
		if IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS_1) then
			call DisplayTimedTextToPlayer(GetLocalPlayer(), 0, 0, 7., stext_0)
		endif
	endif
	if heroint_0[play_0] == 3 then
		call GroupRemoveUnit(g_0, u_0)
	endif
	if CountUnitsInGroup(g_0) <= 0 then
		set ff_0 = 1
		call SaveInteger(udg_hash_1, o_0, 2, ff_0)
	endif
	call SaveGroupHandle(udg_hash_1, o_0, 1, g_0)
	set u_0 = null
	set p_0 = null
	set killer_0 = null
	set pk_0 = null
	set g_0 = null
	set t_0 = null
endfunction

function Trig_HeroDeadonEitiArena_Conditions takes nothing returns boolean
	return (IsUnitType(GetDyingUnit(), UNIT_TYPE_HERO_1) and IsUnitIllusion(GetDyingUnit()) == false and GetPlayerId(GetOwningPlayer(GetDyingUnit())) <= 8 and (udg_Is_Eiti_Arena_Already_Go_1)) != null
endfunction

function InitTrig_HeroDeadonEitiArena takes nothing returns nothing
	local integer index = 0
	set gg_trg_HeroDeadonEitiArena_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_HeroDeadonEitiArena_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_HeroDeadonEitiArena_1, Condition(function Trig_HeroDeadonEitiArena_Conditions))
	call TriggerAddAction(gg_trg_HeroDeadonEitiArena_1, function Trig_HeroDeadonEitiArena_Actions)
endfunction

function Trig__PortalCheckTop_Conditions takes nothing returns boolean
	return (IsUnitType(GetEnteringUnit(), UNIT_TYPE_HERO_1) and IsUnitIllusion(GetTriggerUnit()) == false) != null
endfunction

function Trig__PortalCheckTop_Actions takes nothing returns nothing
	local unit u = GetEnteringUnit()
	local real x = GetRectCenterX(gg_rct_Oblast_Teleporta_Arena_Bot_1)
	local real y = GetRectCenterY(gg_rct_Oblast_Teleporta_Arena_Bot_1)
	if IsUnitInGroup(u_0, udg_OtriadPortalUnitsEitiArena_1) then
		call GroupRemoveUnit(udg_OtriadPortalUnitsEitiArena_1, u_0)
	else
		call GroupAddUnit(udg_OtriadPortalUnitsEitiArena_1, u_0)
		call SetUnitPosition(u_0, x_0, y_0)
		call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl", x_0, y_0))
		if GetLocalPlayer() == GetOwningPlayer(u_0) then
			call CameraSetupApplyForceDuration(gg_cam_Camera_Eiti_Arena_Bot_Portal_1, true, .0)
		endif
	endif
	set u_0 = null
endfunction

function InitTrig__PortalCheckTop takes nothing returns nothing
	local region rectRegion = CreateRegion()
	set gg_trg__PortalCheckTop_1 = CreateTrigger()
	call RegionAddRect(rectRegion_0, gg_rct_Oblast_Teleporta_Arena_Top_1)
	call TriggerRegisterEnterRegion(gg_trg__PortalCheckTop_1, rectRegion_0, null)
	call TriggerAddCondition(gg_trg__PortalCheckTop_1, Condition(function Trig__PortalCheckTop_Conditions))
	call TriggerAddAction(gg_trg__PortalCheckTop_1, function Trig__PortalCheckTop_Actions)
endfunction

function Trig__PortalCheckBot_Conditions takes nothing returns boolean
	return (IsUnitType(GetEnteringUnit(), UNIT_TYPE_HERO_1) and IsUnitIllusion(GetTriggerUnit()) == false) != null
endfunction

function Trig__PortalCheckBot_Actions takes nothing returns nothing
	local unit u = GetEnteringUnit()
	local real x = GetRectCenterX(gg_rct_Oblast_Teleporta_Arena_Top_1)
	local real y = GetRectCenterY(gg_rct_Oblast_Teleporta_Arena_Top_1)
	if IsUnitInGroup(u_0, udg_OtriadPortalUnitsEitiArena_1) then
		call GroupRemoveUnit(udg_OtriadPortalUnitsEitiArena_1, u_0)
	else
		call GroupAddUnit(udg_OtriadPortalUnitsEitiArena_1, u_0)
		call SetUnitPosition(u_0, x_0, y_0)
		call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl", x_0, y_0))
		if GetLocalPlayer() == GetOwningPlayer(u_0) then
			call CameraSetupApplyForceDuration(gg_cam_Camera_Eiti_Arena_Top_Portal_1, true, .0)
		endif
	endif
	set u_0 = null
endfunction

function InitTrig__PortalCheckBot takes nothing returns nothing
	local region rectRegion = CreateRegion()
	set gg_trg__PortalCheckBot_1 = CreateTrigger()
	call RegionAddRect(rectRegion_0, gg_rct_Oblast_Teleporta_Arena_Bot_1)
	call TriggerRegisterEnterRegion(gg_trg__PortalCheckBot_1, rectRegion_0, null)
	call TriggerAddCondition(gg_trg__PortalCheckBot_1, Condition(function Trig__PortalCheckBot_Conditions))
	call TriggerAddAction(gg_trg__PortalCheckBot_1, function Trig__PortalCheckBot_Actions)
endfunction

function Trig_LinkItemsInitAddItemToSystem_Actions takes integer count1, integer id1, integer count2, integer id2, integer count3, integer id3, integer count4, integer id4, integer count5, integer id5, integer itemlevel, integer idfinal, integer idrecipe, string sef returns nothing
	local integer h = ($C * itemlevel_0)
	call SaveInteger(udg_hash_1, idrecipe_0, h_0 + 1, count1_0)
	call SaveInteger(udg_hash_1, idrecipe_0, h_0 + 2, id1_0)
	call SaveInteger(udg_hash_1, idrecipe_0, h_0 + 3, count2_0)
	call SaveInteger(udg_hash_1, idrecipe_0, h_0 + 4, id2_0)
	call SaveInteger(udg_hash_1, idrecipe_0, h_0 + 5, count3_0)
	call SaveInteger(udg_hash_1, idrecipe_0, h_0 + 6, id3_0)
	call SaveInteger(udg_hash_1, idrecipe_0, h_0 + 7, count4_0)
	call SaveInteger(udg_hash_1, idrecipe_0, h_0 + 8, id4_0)
	call SaveInteger(udg_hash_1, idrecipe_0, h_0 + 9, count5_0)
	call SaveInteger(udg_hash_1, idrecipe_0, h_0 + $A, id5_0)
	call SaveInteger(udg_hash_1, idrecipe_0, h_0 + $B, idfinal_0)
	call SaveStr(udg_hash_1, idrecipe_0, h_0 + $C, sef_0)
	call SaveInteger(udg_hash_1, idfinal_0, 'y', itemlevel_0)
endfunction

function Trig_LinkItemsInit_Actions takes nothing returns nothing
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I004', 1, 'I00D', 0, 0, 0, 0, 0, 0, 0, 'I027', 'I02T', "Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00M', 0, 0, 0, 0, 0, 0, 0, 0, 0, 'I02Y', 'I030', "Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I02Y', 0, 0, 0, 0, 0, 0, 0, 0, 1, 'I02Z', 'I030', "Abilities\\Spells\\Human\\Resurrect\\ResurrectCaster.mdl")
	call SaveInteger(udg_hash_1, 'I030', 0, 1)
	call Trig_LinkItemsInitAddItemToSystem_Actions(2, 'I01T', 1, 'I021', 0, 0, 0, 0, 0, 0, 0, 'I036', 'I037', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I003', 1, 'I004', 1, 'I01T', 0, 0, 0, 0, 0, 'I02J', 'I01D', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I02J', 0, 0, 0, 0, 0, 0, 0, 0, 1, 'I01B', 'I01D', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I01B', 0, 0, 0, 0, 0, 0, 0, 0, 2, 'I01X', 'I01D', "")
	call SaveInteger(udg_hash_1, 'I01D', 0, 2)
	call Trig_LinkItemsInitAddItemToSystem_Actions(2, 'I01T', 1, 'I001', 0, 0, 0, 0, 0, 0, 0, 'I01U', 'I01M', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(2, 'I003', 1, 'I01U', 0, 0, 0, 0, 0, 0, 0, 'I01G', 'I018', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00Z', 1, 'I00D', 0, 0, 0, 0, 0, 0, 0, 'I00A', 'I000', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00D', 1, 'I00E', 0, 0, 0, 0, 0, 0, 0, 'I00I', 'I01N', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00A', 1, 'I00I', 0, 0, 0, 0, 0, 0, 0, 'I00C', 'I00O', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00J', 1, 'I00E', 1, 'I00N', 0, 0, 0, 0, 0, 'I00G', 'I00K', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00G', 0, 0, 0, 0, 0, 0, 0, 0, 1, 'I01Q', 'I00K', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I01Q', 0, 0, 0, 0, 0, 0, 0, 0, 2, 'I01V', 'I00K', "")
	call SaveInteger(udg_hash_1, 'I00K', 0, 2)
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00Z', 2, 'I027', 0, 0, 0, 0, 0, 0, 0, 'I03G', 'I02K', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I027', 1, 'I022', 1, 'I021', 1, 'I026', 0, 0, 0, 'I03K', 'I03J', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I03K', 0, 0, 0, 0, 0, 0, 0, 0, 1, 'I03L', 'I03J', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I03L', 0, 0, 0, 0, 0, 0, 0, 0, 2, 'I03M', 'I03J', "")
	call SaveInteger(udg_hash_1, 'I03J', 0, 2)
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00Z', 2, 'I026', 0, 0, 0, 0, 0, 0, 0, 'I02U', 'I03I', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(2, 'I00N', 1, 'I00Y', 0, 0, 0, 0, 0, 0, 0, 'I03Q', 'I02V', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(2, 'I015', 1, 'I00D', 0, 0, 0, 0, 0, 0, 0, 'I03S', 'I03R', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00F', 1, 'I001', 2, 'I00E', 0, 0, 0, 0, 0, 'I03U', 'I03T', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00J', 1, 'I021', 1, 'I026', 1, 'I00F', 0, 0, 0, 'I03W', 'I03V', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I02C', 1, 'I001', 1, 'I004', 0, 0, 0, 0, 0, 'I03Y', 'I03X', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I01X', 1, 'I01S', 0, 0, 0, 0, 0, 0, 0, 'I02G', 'I03Z', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I023', 1, 'I001', 0, 0, 0, 0, 0, 0, 0, 'I02I', 'I02O', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I036', 1, 'I00B', 1, 'I02A', 0, 0, 0, 0, 0, 'I02F', 'I040', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I022', 1, 'I00Z', 1, 'I026', 1, 'I00F', 0, 0, 0, 'I042', 'I041', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00J', 1, 'I01A', 1, 'I015', 0, 0, 0, 0, 0, 'I044', 'I043', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I02G', 1, 'I01X', 1, 'I01U', 0, 0, 0, 0, 0, 'I048', 'I047', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I023', 1, 'I00Z', 0, 0, 0, 0, 0, 0, 0, 'I04L', 'I04K', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I03U', 1, 'I00I', 1, 'I00J', 0, 0, 0, 0, 0, 'I04U', 'I04M', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00J', 1, 'I00I', 1, 'I006', 0, 0, 0, 0, 0, 'I04V', 'I00Q', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(2, 'I01K', 0, 0, 0, 0, 0, 0, 0, 0, 0, 'I04X', 'I04W', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I01G', 1, 'I01S', 1, 'I04X', 0, 0, 0, 0, 0, 'I04Z', 'I04Y', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00B', 1, 'I02A', 2, 'I001', 0, 0, 0, 0, 0, 'I02E', 'I01R', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I02E', 1, 'I03N', 1, 'I02A', 0, 0, 0, 0, 0, 'I02N', 'I02M', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I03M', 1, 'I02U', 1, 'I03G', 0, 0, 0, 0, 0, 'I051', 'I050', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I02F', 1, 'I03Q', 1, 'I00B', 0, 0, 0, 0, 0, 'I02T', 'I02D', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I01T', 2, 'I00N', 1, 'I015', 0, 0, 0, 0, 0, 'I052', 'I03H', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I052', 0, 0, 0, 0, 0, 0, 0, 0, 1, 'I053', 'I03H', "")
	call SaveInteger(udg_hash_1, 'I03H', 0, 1)
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I015', 1, 'I001', 1, 'I00E', 0, 0, 0, 0, 0, 'I055', 'I054', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I055', 0, 0, 0, 0, 0, 0, 0, 0, 1, 'I056', 'I054', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I056', 0, 0, 0, 0, 0, 0, 0, 0, 2, 'I057', 'I054', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I057', 0, 0, 0, 0, 0, 0, 0, 0, 3, 'I058', 'I054', "")
	call SaveInteger(udg_hash_1, 'I054', 0, 3)
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I04X', 1, 'I03S', 1, 'I00I', 0, 0, 0, 0, 0, 'I05A', 'I059', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(2, 'I00D', 1, 'I00F', 0, 0, 0, 0, 0, 0, 0, 'I006', 'I005', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I036', 1, 'I006', 1, 'I026', 0, 0, 0, 0, 0, 'I008', 'I007', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I008', 0, 0, 0, 0, 0, 0, 0, 0, 1, 'I009', 'I007', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I009', 0, 0, 0, 0, 0, 0, 0, 0, 2, 'I00L', 'I007', "")
	call SaveInteger(udg_hash_1, 'I007', 0, 2)
	call Trig_LinkItemsInitAddItemToSystem_Actions(2, 'I022', 1, 'I00F', 0, 0, 0, 0, 0, 0, 0, 'I00S', 'I00R', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I044', 1, 'I00S', 1, 'I01A', 0, 0, 0, 0, 0, 'I00T', 'I00M', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I004', 0, 0, 0, 0, 0, 0, 0, 0, 0, 'I00V', 'I00U', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I01T', 1, 'I00D', 1, 'I001', 1, 'I00E', 0, 0, 0, 'I00X', 'I00W', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I042', 1, 'I03Q', 1, 'I022', 0, 0, 0, 0, 0, 'I012', 'I011', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I003', 1, 'I001', 0, 0, 0, 0, 0, 0, 0, 'I01C', 'I019', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I00S', 1, 'I03G', 1, 'I006', 0, 0, 0, 0, 0, 'I01W', 'I01P', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I02U', 1, 'I03Y', 0, 0, 0, 0, 0, 0, 0, 'I02H', 'I029', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I01G', 1, 'I03U', 0, 0, 0, 0, 0, 0, 0, 'I02P', 'I02L', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(2, 'I00E', 1, 'I01T', 0, 0, 0, 0, 0, 0, 0, 'I02R', 'I02Q', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I02R', 0, 0, 0, 0, 0, 0, 0, 0, 1, 'I02S', 'I02Q', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I02S', 0, 0, 0, 0, 0, 0, 0, 0, 2, 'I02W', 'I02Q', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I02W', 0, 0, 0, 0, 0, 0, 0, 0, 3, 'I02X', 'I02Q', "")
	call Trig_LinkItemsInitAddItemToSystem_Actions(1, 'I02X', 0, 0, 0, 0, 0, 0, 0, 0, 4, 'I02Y', 'I02Q', "")
	call SaveInteger(udg_hash_1, 'I02Q', 0, 4)
endfunction

function InitTrig_LinkItemsInit takes nothing returns nothing
	set gg_trg_LinkItemsInit_1 = CreateTrigger()
	call TriggerRegisterTimerEvent(gg_trg_LinkItemsInit_1, 6., false)
	call TriggerAddAction(gg_trg_LinkItemsInit_1, function Trig_LinkItemsInit_Actions)
endfunction

function Trig_ItemPickedUp_Actions takes nothing returns nothing
	local item it = GetManipulatedItem()
	local integer id = GetItemTypeId(it_0)
	local integer itemlevel
	local integer h
	local integer lopa
	if GetItemType(it_0) == ITEM_TYPE_POWERUP_1 and id_0 != 'I03A' and id_0 != 'I03B' and id_0 != 'I013' and id_0 != 'I014' and id_0 != 'I016' and id_0 != 'I017' then
		if (id_0 == 'I035') or (id_0 == 'I00P') or (id_0 == 'I03O') then
			call RemoveItem(it_0)
			call SimError(GetOwningPlayer(GetTriggerUnit()), "Для покупки это предмета не нужен рецепт!")
		else
			set itemlevel_0 = LoadInteger(udg_hash_1, id_0, 0)
			set lopa_0 = 0
			set udg_Show_Item_Link_Text_1 = true
			set udg_Integer_Item_Recipe_Level_1 = itemlevel_0
			loop
				exitwhen (itemlevel_0 < lopa_0) or (udg_Integer_Item_Recipe_Level_1 < 0)
				set h_0 = itemlevel_0 * $C
				call LinkItems(LoadInteger(udg_hash_1, id_0, h_0 + 1), LoadInteger(udg_hash_1, id_0, h_0 + 2), LoadInteger(udg_hash_1, id_0, h_0 + 3), LoadInteger(udg_hash_1, id_0, h_0 + 4), LoadInteger(udg_hash_1, id_0, h_0 + 5), LoadInteger(udg_hash_1, id_0, h_0 + 6), LoadInteger(udg_hash_1, id_0, h_0 + 7), LoadInteger(udg_hash_1, id_0, h_0 + 8), LoadInteger(udg_hash_1, id_0, h_0 + 9), LoadInteger(udg_hash_1, id_0, h_0 + $A), LoadInteger(udg_hash_1, id_0, h_0 + $B), LoadStr(udg_hash_1, id_0, h_0 + $C), true)
				set itemlevel_0 = itemlevel_0 - 1
			endloop
			set itemlevel_0 = 0
			set h_0 = 0
		endif
	else
		if id_0 != 'I03A' and id_0 != 'I03B' and id_0 != 'I013' and id_0 != 'I014' and id_0 != 'I016' and id_0 != 'I017' and id_0 != 'I01Y' then
			call LinkItems(1, 'I01U', 1, 'I01K', 1, 'I004', 0, 0, 0, 0, 'I01S', "", false)
			call LinkItems(2, 'I00F', 1, 'I00E', 0, 0, 0, 0, 0, 0, 'I00J', "", false)
			call LinkItems(1, 'I02A', 1, 'I00H', 1, 'I021', 0, 0, 0, 0, 'I03N', "", false)
		endif
	endif
	set it_0 = null
endfunction

function InitTrig_ItemPickedUp takes nothing returns nothing
	local integer index = 0
	set gg_trg_ItemPickedUp_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_ItemPickedUp_1, Player(index_0), EVENT_PLAYER_UNIT_PICKUP_ITEM_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddAction(gg_trg_ItemPickedUp_1, function Trig_ItemPickedUp_Actions)
endfunction

function Trig_ChargesConnecting_Func002C takes nothing returns boolean
	return (GetItemTypeId(GetManipulatedItem()) != 'I055') and (GetItemTypeId(GetManipulatedItem()) != 'I056') and (GetItemTypeId(GetManipulatedItem()) != 'I057') and (GetItemTypeId(GetManipulatedItem()) != 'I058')
endfunction

function Trig_ChargesConnecting_Conditions takes nothing returns boolean
	return (GetItemCharges(GetManipulatedItem()) > 0) and (Trig_ChargesConnecting_Func002C())
endfunction

function Trig_ChargesConnecting_Func005C takes nothing returns boolean
	return (UnitHasItemOfTypeBJ(GetManipulatingUnit(), GetItemTypeId(GetManipulatedItem())) == false)
endfunction

function Trig_ChargesConnecting_Actions takes nothing returns nothing
	call UnitRemoveItemSwapped(GetManipulatedItem(), GetManipulatingUnit())
	if (Trig_ChargesConnecting_Func005C()) then
		call CreateItemLoc(GetItemTypeId(GetManipulatedItem()), GetUnitLoc(GetManipulatingUnit()))
		call DisableTrigger(GetTriggeringTrigger())
		call UnitAddItem(GetManipulatingUnit(), bj_lastCreatedItem_1)
		call EnableTrigger(GetTriggeringTrigger())
		call SetItemCharges(bj_lastCreatedItem_1, GetItemCharges(GetManipulatedItem()))
	else
		call SetItemCharges(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(), GetItemTypeId(GetManipulatedItem())), (GetItemCharges(GetItemOfTypeFromUnitBJ(GetManipulatingUnit(), GetItemTypeId(GetManipulatedItem()))) + GetItemCharges(GetManipulatedItem())))
	endif
	call RemoveItem(GetManipulatedItem())
endfunction

function InitTrig_ChargesConnecting takes nothing returns nothing
	set gg_trg_ChargesConnecting_1 = CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(gg_trg_ChargesConnecting_1, EVENT_PLAYER_UNIT_PICKUP_ITEM_1)
	call TriggerAddCondition(gg_trg_ChargesConnecting_1, Condition(function Trig_ChargesConnecting_Conditions))
	call TriggerAddAction(gg_trg_ChargesConnecting_1, function Trig_ChargesConnecting_Actions)
endfunction

function Trig_Remove_Dammi_Items_Func003C takes nothing returns boolean
	return (GetItemTypeId(GetManipulatedItem()) == 'I035')
endfunction

function Trig_Remove_Dammi_Items_Conditions takes nothing returns boolean
	return (Trig_Remove_Dammi_Items_Func003C())
endfunction

function Trig_Remove_Dammi_Items_Actions takes nothing returns nothing
	call RemoveItem(GetManipulatedItem())
	call SimError(GetOwningPlayer(GetTriggerUnit()), "Для покупки это предмета не нужен рецепт!")
endfunction

function InitTrig_Remove_Dammi_Items takes nothing returns nothing
	set gg_trg_Remove_Dammi_Items_1 = CreateTrigger()
	call DisableTrigger(gg_trg_Remove_Dammi_Items_1)
	call TriggerRegisterAnyUnitEventBJ(gg_trg_Remove_Dammi_Items_1, EVENT_PLAYER_UNIT_PICKUP_ITEM_1)
	call TriggerAddCondition(gg_trg_Remove_Dammi_Items_1, Condition(function Trig_Remove_Dammi_Items_Conditions))
	call TriggerAddAction(gg_trg_Remove_Dammi_Items_1, function Trig_Remove_Dammi_Items_Actions)
endfunction

function Trig_Save_Items_Cost_Actions takes nothing returns nothing
	call SaveInteger(udg_hash_1, 'I00I', 'x', $3ED)
	call SaveInteger(udg_hash_1, 'I01G', 'x', $D0C)
	call SaveInteger(udg_hash_1, 'I03W', 'x', $D70)
	call SaveInteger(udg_hash_1, 'I036', 'x', $546)
	call SaveInteger(udg_hash_1, 'I05A', 'x', 5150)
	call SaveInteger(udg_hash_1, 'I04Z', 'x', 8100)
	call SaveInteger(udg_hash_1, 'I01U', 'x', $67C)
	call SaveInteger(udg_hash_1, 'I03U', 'x', $7DF)
	call SaveInteger(udg_hash_1, 'I02J', 'x', $4E2)
	call SaveInteger(udg_hash_1, 'I01B', 'x', $60E)
	call SaveInteger(udg_hash_1, 'I01X', 'x', $73A)
	call SaveInteger(udg_hash_1, 'I052', 'x', $596)
	call SaveInteger(udg_hash_1, 'I053', 'x', $6C2)
	call SaveInteger(udg_hash_1, 'I051', 'x', 8710)
	call SaveInteger(udg_hash_1, 'I03Q', 'x', $654)
	call SaveInteger(udg_hash_1, 'I048', 'x', 9815)
	call SaveInteger(udg_hash_1, 'I00G', 'x', $7A8)
	call SaveInteger(udg_hash_1, 'I01Q', 'x', $9CE)
	call SaveInteger(udg_hash_1, 'I01V', 'x', $BF4)
	call SaveInteger(udg_hash_1, 'I02N', 'x', 4900)
	call SaveInteger(udg_hash_1, 'I03N', 'x', $465)
	call SaveInteger(udg_hash_1, 'I042', 'x', $979)
	call SaveInteger(udg_hash_1, 'I03S', 'x', $712)
	call SaveInteger(udg_hash_1, 'I02U', 'x', $6AE)
	call SaveInteger(udg_hash_1, 'I00C', 'x', $D5C)
	call SaveInteger(udg_hash_1, 'I00A', 'x', $5C3)
	call SaveInteger(udg_hash_1, 'I04V', 'x', 4100)
	call SaveInteger(udg_hash_1, 'I044', 'x', $AB4)
	call SaveInteger(udg_hash_1, 'I00J', 'x', 980)
	call SaveInteger(udg_hash_1, 'I03G', 'x', $5AA)
	call SaveInteger(udg_hash_1, 'I04L', 'x', 925)
	call SaveInteger(udg_hash_1, 'I02I', 'x', 765)
	call SaveInteger(udg_hash_1, 'I02T', 'x', 7000)
	call SaveInteger(udg_hash_1, 'I04U', 'x', 5250)
	call SaveInteger(udg_hash_1, 'I03K', 'x', $A2D)
	call SaveInteger(udg_hash_1, 'I03L', 'x', $E01)
	call SaveInteger(udg_hash_1, 'I03M', 'x', $4FB)
	call SaveInteger(udg_hash_1, 'I04X', 'x', $4FB)
	call SaveInteger(udg_hash_1, 'I055', 'x', $4F6)
	call SaveInteger(udg_hash_1, 'I056', 'x', $686)
	call SaveInteger(udg_hash_1, 'I057', 'x', $816)
	call SaveInteger(udg_hash_1, 'I058', 'x', $9A6)
	call SaveInteger(udg_hash_1, 'I02E', 'x', $834)
	call SaveInteger(udg_hash_1, 'I02F', 'x', $AB9)
	call SaveInteger(udg_hash_1, 'I01S', 'x', $875)
	call SaveInteger(udg_hash_1, 'I03Y', 'x', 955)
	call SaveInteger(udg_hash_1, 'I02G', 'x', 4805)
	call SaveInteger(udg_hash_1, 'I00D', 'x', 275)
	call SaveInteger(udg_hash_1, 'I022', 'x', 350)
	call SaveInteger(udg_hash_1, 'I00N', 'x', $C8)
	call SaveInteger(udg_hash_1, 'I027', 'x', 450)
	call SaveInteger(udg_hash_1, 'I003', 'x', 475)
	call SaveInteger(udg_hash_1, 'I026', 'x', 425)
	call SaveInteger(udg_hash_1, 'I004', 'x', '}')
	call SaveInteger(udg_hash_1, 'I001', 'x', 260)
	call SaveInteger(udg_hash_1, 'I01K', 'x', 380)
	call SaveInteger(udg_hash_1, 'I00H', 'x', 375)
	call SaveInteger(udg_hash_1, 'I00Y', 'x', 650)
	call SaveInteger(udg_hash_1, 'I00E', 'x', $E6)
	call SaveInteger(udg_hash_1, 'I02C', 'x', 360)
	call SaveInteger(udg_hash_1, 'I01A', 'x', 500)
	call SaveInteger(udg_hash_1, 'I02A', 'x', 350)
	call SaveInteger(udg_hash_1, 'I015', 'x', 380)
	call SaveInteger(udg_hash_1, 'I00Z', 'x', 300)
	call SaveInteger(udg_hash_1, 'I00F', 'x', 375)
	call SaveInteger(udg_hash_1, 'I021', 'x', 400)
	call SaveInteger(udg_hash_1, 'I023', 'x', $E1)
	call SaveInteger(udg_hash_1, 'I00B', 'x', 600)
	call SaveInteger(udg_hash_1, 'I01T', 'x', 350)
	call SaveInteger(udg_hash_1, 'I006', 'x', $465)
	call SaveInteger(udg_hash_1, 'I008', 'x', $ED8)
	call SaveInteger(udg_hash_1, 'I009', 'x', 4700)
	call SaveInteger(udg_hash_1, 'I00L', 'x', 5600)
	call SaveInteger(udg_hash_1, 'I00S', 'x', $555)
	call SaveInteger(udg_hash_1, 'I00T', 'x', 5655)
	call SaveInteger(udg_hash_1, 'I00V', 'x', 475)
	call SaveInteger(udg_hash_1, 'I00X', 'x', $514)
	call SaveInteger(udg_hash_1, 'I012', 'x', 5595)
	call SaveInteger(udg_hash_1, 'I01C', 'x', 860)
	call SaveInteger(udg_hash_1, 'I01W', 'x', 4500)
	call SaveInteger(udg_hash_1, 'I02H', 'x', $C1C)
	call SaveInteger(udg_hash_1, 'I02P', 'x', 6300)
	call SaveInteger(udg_hash_1, 'I02R', 'x', $51E)
	call SaveInteger(udg_hash_1, 'I02S', 'x', $712)
	call SaveInteger(udg_hash_1, 'I02W', 'x', $906)
	call SaveInteger(udg_hash_1, 'I02X', 'x', $AFA)
	call SaveInteger(udg_hash_1, 'I02Y', 'x', $CEE)
	call SaveInteger(udg_hash_1, 'I030', 'x', $708)
endfunction

function InitTrig_Save_Items_Cost takes nothing returns nothing
	set gg_trg_Save_Items_Cost_1 = CreateTrigger()
	call TriggerRegisterTimerEvent(gg_trg_Save_Items_Cost_1, 10., false)
	call TriggerAddAction(gg_trg_Save_Items_Cost_1, function Trig_Save_Items_Cost_Actions)
endfunction

function Trig_IceBoss_onbase_Actions takes nothing returns nothing
	local timer tonbase = GetExpiredTimer()
	local integer honbase = GetHandleId(tonbase_0)
	local integer ishod = LoadInteger(udg_hash_1, honbase_0, 3)
	local unit boss = LoadUnitHandle(udg_hash_1, honbase_0, 1)
	local group gruppa = CreateGroup()
	local unit Picked
	local real xc = GetRectCenterX(gg_rct_Respawn_Heroes_1)
	local real yc = GetRectCenterY(gg_rct_Respawn_Heroes_1)
	local fogmodifier fm = LoadFogModifierHandle(udg_hash_1, honbase_0, 2)
	local texttag txt
	local real vel = .0221875
	local real angle = 45. + GetRandomReal(.0, 90.)
	local real xvel = vel_0 * Cos(angle_0 * bj_DEGTORAD_1)
	local real yvel = vel_0 * Sin(angle_0 * bj_DEGTORAD_1)
	local integer dead = 0
	local real perekluchatel = .1
	call ShowAndFlushAllPlayerDamage(false)
	call GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev_1, gruppa_0)
	call CinematicModeExBJ(false, bj_FORCE_ALL_PLAYERS_1, bj_CINEMODE_INTERFACEFADE_1)
	call CinematicFadeBJ(0, 5., "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0)
	loop
		set Picked_0 = FirstOfGroup(gruppa_0)
		exitwhen Picked_0 == null
		if perekluchatel_0 >= 0 then
			set perekluchatel_0 = -perekluchatel_0
			set perekluchatel_0 = perekluchatel_0 - 50.
		else
			set perekluchatel_0 = -perekluchatel_0
			set perekluchatel_0 = perekluchatel_0 + 50.
		endif
		set xc_0 = GetRectCenterX(gg_rct_Respawn_Heroes_1) + perekluchatel_0
		set yc_0 = GetRectCenterY(gg_rct_Respawn_Heroes_1)
		call ReviveHero(Picked_0, xc_0, yc_0, true)
		call SetUnitPosition(Picked_0, xc_0, yc_0)
		call SetUnitFacing(Picked_0, 270.)
		call SetUnitState(Picked_0, UNIT_STATE_LIFE_1, $540BE3FF)
		call SetUnitState(Picked_0, UNIT_STATE_MANA_1, $540BE3FF)
		if ishod_0 == 0 then
			set txt_0 = CreateTextTag()
			set dead_0 = LoadInteger(udg_hash_1, GetHandleId(Picked_0), 1)
			if dead_0 == 1 then
				call SetTextTagText(txt_0, "|cFFFFFF00+850|r", .035)
				call AddHeroXP(Picked_0, $6A4, true)
				call SetPlayerState(GetOwningPlayer(Picked_0), PLAYER_STATE_RESOURCE_GOLD_1, (GetPlayerState(GetOwningPlayer(Picked_0), PLAYER_STATE_RESOURCE_GOLD_1) + 750))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl", Picked_0, "overhead"))
				if GetLocalPlayer() == GetOwningPlayer(Picked_0) then
					call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Вы получили " + udg_ColorString_1[23] + I2S(850) + " золота|r!!!")
				endif
			else
				call SetTextTagText(txt_0, "|cFFFFFF00+2600|r", .045)
				call AddHeroXP(Picked_0, 5500, true)
				call SetPlayerState(GetOwningPlayer(Picked_0), PLAYER_STATE_RESOURCE_GOLD_1, (GetPlayerState(GetOwningPlayer(Picked_0), PLAYER_STATE_RESOURCE_GOLD_1) + $708))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl", Picked_0, "overhead"))
				if GetLocalPlayer() == GetOwningPlayer(Picked_0) then
					call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Вы получили " + udg_ColorString_1[23] + I2S($A28) + " золота|r!!!")
				endif
			endif
			call SetTextTagPos(txt_0, GetUnitX(Picked_0), GetUnitY(Picked_0), .0)
			call SetTextTagColor(txt_0, 0, 0, 0, 50)
			call SetTextTagVelocity(txt_0, xvel_0, yvel_0)
			call SetTextTagPermanent(txt_0, false)
			call SetTextTagLifespan(txt_0, 4.)
			call SetTextTagFadepoint(txt_0, .0)
			set txt_0 = null
		endif
		if (GetLocalPlayer() == GetOwningPlayer(Picked_0)) then
			call ResetToGameCamera(.0)
			if ishod_0 == 1 then
				call DisplayTextToPlayer(GetOwningPlayer(Picked_0), 0, 0, "|cFFFF0000ВЫ ПРОИГРАЛИ БИТВУ С БОССОМ!!!|r")
			else
				call DisplayTextToPlayer(GetOwningPlayer(Picked_0), 0, 0, "|cFFFFFF00ВЫ ПОБЕДИЛИ В БИТВЕ С БОССОМ!!!|r")
			endif
			call ResetToGameCamera(.0)
			call PanCameraToTimed(xc_0, yc_0, .0)
			call SelectUnit(Picked_0, true)
		endif
		call GroupRemoveUnit(gruppa_0, Picked_0)
	endloop
	call EnableTrigger(gg_trg_Hero_Dead_1)
	set Picked_0 = null
	call GroupEnumUnitsInRect(gruppa_0, gg_rct_6_1, null)
	loop
		set Picked_0 = FirstOfGroup(gruppa_0)
		exitwhen Picked_0 == null
		if GetUnitTypeId(Picked_0) != 'h00C' and GetUnitTypeId(Picked_0) != 'h00B' and GetUnitTypeId(Picked_0) != 'h00U' then
			call RemoveUnit(Picked_0)
		endif
		call GroupRemoveUnit(gruppa_0, Picked_0)
	endloop
	if TriggerEvaluate(gg_trg_GameEndWin_1) then
		call TriggerExecute(gg_trg_GameEndWin_1)
	endif
	set Picked_0 = null
	call RemoveWeatherEffect(udg_BossFightWeather_1)
	set udg_BossFightWeather_1 = null
	call FlushChildHashtable(udg_hash_1, GetHandleId(boss_0))
	call RemoveUnit(boss_0)
	set boss_0 = null
	call DestroyFogModifier(fm_0)
	set fm_0 = null
	call DestroyGroup(gruppa_0)
	set gruppa_0 = null
	call FlushChildHashtable(udg_hash_1, honbase_0)
	call DestroyTimer(tonbase_0)
	set tonbase_0 = null
endfunction

function Trig_IceBoss_end_Actions takes nothing returns nothing
	local timer tend = GetExpiredTimer()
	local integer hend = GetHandleId(tend_0)
	local unit boss = LoadUnitHandle(udg_hash_1, hend_0, 1)
	local fogmodifier fm = CreateFogModifierRect(Player(0), FOG_OF_WAR_VISIBLE_1, gg_rct_6_1, true, true)
	local integer lop = 0
	local integer ishod = LoadInteger(udg_hash_1, hend_0, 2)
	local timer tonbase = CreateTimer()
	local integer honbase = GetHandleId(tonbase_0)
	local group g = CreateGroup()
	local unit Picked
	call SaveUnitHandle(udg_hash_1, honbase_0, 1, boss_0)
	call SaveFogModifierHandle(udg_hash_1, honbase_0, 2, fm_0)
	call SaveInteger(udg_hash_1, honbase_0, 3, ishod_0)
	call GroupEnumUnitsInRect(g_0, gg_rct_6_1, null)
	loop
		exitwhen lop_0 > 9
		if (GetLocalPlayer() == Player(lop_0)) then
			call CameraSetupApplyForceDuration(gg_cam_Camera_BossFightStart_1, true, .0)
			call SetCameraRotateMode(GetRectCenterX(gg_rct_6_1), GetRectCenterY(gg_rct_6_1), bj_DEGTORAD_1 * 360., 6.)
		endif
		set lop_0 = lop_0 + 1
	endloop
	call TimerStart(tonbase_0, 6., false, function Trig_IceBoss_onbase_Actions)
	if ishod_0 == 1 then
		call IssuePointOrderById(boss_0, $D0012, GetRectCenterX(gg_rct_6_1), GetRectCenterY(gg_rct_6_1))
	else
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if GetOwningPlayer(Picked_0) == Player($B) then
				call KillUnit(Picked_0)
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		set Picked_0 = null
	endif
	call CinematicModeExBJ(true, bj_FORCE_ALL_PLAYERS_1, bj_CINEMODE_INTERFACEFADE_1)
	call CinematicFadeBJ(1, 6., "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1)
	call FlushChildHashtable(udg_hash_1, hend_0)
	call DestroyTimer(tend_0)
	set tend_0 = null
	set boss_0 = null
	set fm_0 = null
	set tonbase_0 = null
	call DestroyGroup(g_0)
	set g_0 = null
endfunction

function Trig_IceBoss_ActionWithWait_Actions takes nothing returns nothing
	local timer twact = GetExpiredTimer()
	local integer hwact = GetHandleId(twact_0)
	local unit boss = LoadUnitHandle(udg_hash_1, hwact_0, 1)
	call IssueImmediateOrderById(boss_0, $D00FC)
	call DestroyTimer(twact_0)
	set twact_0 = null
	call FlushChildHashtable(udg_hash_1, hwact_0)
	set boss_0 = null
endfunction

function Trig_IceBoss_No_zaniat_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local unit boss = LoadUnitHandle(udg_hash_1, GetHandleId(t_0), 1)
	local boolean zaniat = LoadBoolean(udg_hash_1, GetHandleId(boss_0), $A)
	set zaniat_0 = false
	call SaveBoolean(udg_hash_1, GetHandleId(boss_0), $A, zaniat_0)
	call FlushChildHashtable(udg_hash_1, GetHandleId(t_0))
endfunction

function Trig_IceBoss_hpcheck_Actions takes nothing returns nothing
	local real xc = GetRectCenterX(gg_rct_6_1)
	local real yc = GetRectCenterY(gg_rct_6_1)
	local timer thpcheck = GetExpiredTimer()
	local integer hhpcheck = GetHandleId(thpcheck_0)
	local unit boss = LoadUnitHandle(udg_hash_1, hhpcheck_0, 1)
	local integer stage = LoadInteger(udg_hash_1, hhpcheck_0, 2)
	local integer dammicheck = LoadInteger(udg_hash_1, hhpcheck_0, 4)
	local real dx = GetUnitX(boss_0) - xc_0
	local real dy = GetUnitY(boss_0) - yc_0
	local timer twact = CreateTimer()
	local integer hwact = GetHandleId(twact_0)
	local timer taltars
	local boolean zaniat = LoadBoolean(udg_hash_1, GetHandleId(boss_0), $A)
	local integer cdwall = LoadInteger(udg_hash_1, GetHandleId(boss_0), 41)
	local integer cdstorm = LoadInteger(udg_hash_1, GetHandleId(boss_0), 42)
	local integer cdrain = LoadInteger(udg_hash_1, GetHandleId(boss_0), 43)
	local integer cdpunishment = LoadInteger(udg_hash_1, GetHandleId(boss_0), 44)
	local integer cdblink = LoadInteger(udg_hash_1, GetHandleId(boss_0), 45)
	local group grp = CreateGroup()
	local timer tcd
	local timer tgol
	local group heroes = CreateGroup()
	local unit Picked
	local integer kolvo = 0
	local integer random = GetRandomInt(1, 4)
	local real dist
	local timer tend
	local integer hend
	local integer ishod = 0
	local effect ef
	local player p = Player($C)
	local integer itemrand = R2I($F + 5 * CountPlayersInForceBJ(udg_IGRAET_1))
	local real itemx = (GetRandomReal(-1350., 100.))
	local real itemy = (GetRandomReal(1900., 3450.))
	local unit dammi
	local group geroi = CreateGroup()
	if GetRandomInt(1, 'd') <= itemrand_0 then
		call CreatePotion(itemx_0, itemy_0, 3, 6)
	endif
	if (zaniat_0 == false and stage_0 == 0 and GetUnitState(boss_0, UNIT_STATE_LIFE_1) > 140000. and GetUnitState(boss_0, UNIT_STATE_LIFE_1) < 120000.) or (stage_0 == 1 and GetUnitState(boss_0, UNIT_STATE_LIFE_1) > 100000. and GetUnitState(boss_0, UNIT_STATE_LIFE_1) < 75000.) or (stage_0 == 2 and GetUnitState(boss_0, UNIT_STATE_LIFE_1) > 30000. and GetUnitState(boss_0, UNIT_STATE_LIFE_1) < 5000.) then
		set stage_0 = stage_0 + 1
		set zaniat_0 = true
		call SaveBoolean(udg_hash_1, GetHandleId(boss_0), $A, zaniat_0)
		call SaveInteger(udg_hash_1, hhpcheck_0, 2, stage_0)
		call SaveUnitHandle(udg_hash_1, hwact_0, 1, boss_0)
		if SquareRoot(dx_0 * dx_0 + dy_0 * dy_0) > 500 then
			call IssuePointOrderById(boss_0, $D0012, xc_0 + GetRandomReal(-250., 250.), yc_0 + GetRandomReal(-250., 250.))
			call SetUnitPathing(boss_0, false)
			call TimerStart(twact_0, 4., false, function Trig_IceBoss_ActionWithWait_Actions)
		else
			call TimerStart(twact_0, .25, false, function Trig_IceBoss_ActionWithWait_Actions)
		endif
	endif
	if cdwall_0 > 0 then
		call SaveInteger(udg_hash_1, GetHandleId(boss_0), 41, cdwall_0 - 1)
	endif
	if cdstorm_0 > 0 then
		call SaveInteger(udg_hash_1, GetHandleId(boss_0), 42, cdstorm_0 - 1)
	endif
	if cdrain_0 > 0 then
		call SaveInteger(udg_hash_1, GetHandleId(boss_0), 43, cdrain_0 - 1)
	endif
	if cdpunishment_0 > 0 then
		call SaveInteger(udg_hash_1, GetHandleId(boss_0), 44, cdpunishment_0 - 1)
	endif
	if cdblink_0 > 0 then
		call SaveInteger(udg_hash_1, GetHandleId(boss_0), 45, cdblink_0 - 1)
	endif
	call GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev_1, geroi_0)
	call GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev_1, grp_0)
	loop
		set Picked_0 = FirstOfGroup(grp_0)
		exitwhen Picked_0 == null
		if IsUnitType(Picked_0, UNIT_TYPE_HERO_1) and Picked_0 != boss_0 and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 then
			call GroupAddUnit(heroes_0, Picked_0)
		endif
		call GroupRemoveUnit(grp_0, Picked_0)
	endloop
	call FilterMostNearUnit(heroes_0, boss_0)
	set Picked_0 = null
	call AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodSorceress.mdl", udg_Unit_FilterMostNearUnit_1, "chest")
	set dammicheck_0 = dammicheck_0 + 1
	if dammicheck_0 == 8 or dammicheck_0 == 16 then
		set dammi_0 = CreateUnit(Player($B), 'h00U', GetUnitX(boss_0), GetUnitY(boss_0), .0)
		call UnitApplyTimedLife(dammi_0, 'BTLF', 7.)
		call UnitAddAbility(dammi_0, 'A04H')
		call IssuePointOrderById(dammi_0, $D0079, GetUnitX(udg_Unit_FilterMostNearUnit_1), GetUnitY(udg_Unit_FilterMostNearUnit_1))
	endif
	if dammicheck_0 == 18 then
		set dammicheck_0 = 0
	endif
	call SaveInteger(udg_hash_1, hhpcheck_0, 4, dammicheck_0)
	if zaniat_0 == false then
		if random_0 == 1 and cdwall_0 <= 0 and udg_Unit_FilterMostNearUnit_1 != null then
			call IssuePointOrderById(boss_0, $D027A, GetUnitX(udg_Unit_FilterMostNearUnit_1), GetUnitY(udg_Unit_FilterMostNearUnit_1))
			call SaveInteger(udg_hash_1, GetHandleId(boss_0), 41, 16)
		endif
		if random_0 == 2 and SquareRoot(dx_0 * dx_0 + dy_0 * dy_0) < 700 and cdstorm_0 <= 0 then
			call IssueImmediateOrderById(boss_0, $D0278)
			call SaveInteger(udg_hash_1, GetHandleId(boss_0), 42, 19)
			set zaniat_0 = true
			set tcd_0 = CreateTimer()
			call SaveBoolean(udg_hash_1, GetHandleId(boss_0), $A, zaniat_0)
			call SaveInteger(udg_hash_1, GetHandleId(boss_0), $C, 20)
			call SaveUnitHandle(udg_hash_1, GetHandleId(tcd_0), 1, boss_0)
			call TimerStart(tcd_0, 3.5, false, function Trig_IceBoss_No_zaniat_Actions)
			set tcd_0 = null
		endif
		if random_0 == 3 and SquareRoot(dx_0 * dx_0 + dy_0 * dy_0) < 700 and cdrain_0 <= 0 then
			call IssuePointOrderById(boss_0, $D010D, GetUnitX(boss_0) + $A * Cos(GetUnitFacing(boss_0) * bj_DEGTORAD_1), GetUnitY(boss_0) + $A * Sin(GetUnitFacing(boss_0) * bj_DEGTORAD_1))
			set zaniat_0 = true
			call SaveInteger(udg_hash_1, GetHandleId(boss_0), 43, 22)
			set tcd_0 = CreateTimer()
			call SaveBoolean(udg_hash_1, GetHandleId(boss_0), $A, zaniat_0)
			call SaveInteger(udg_hash_1, GetHandleId(boss_0), $C, 20)
			call SaveUnitHandle(udg_hash_1, GetHandleId(tcd_0), 1, boss_0)
			call TimerStart(tcd_0, 6., false, function Trig_IceBoss_No_zaniat_Actions)
			set tcd_0 = null
		endif
		if random_0 == 4 and cdpunishment_0 <= 0 and udg_Unit_FilterMostNearUnit_1 != null then
			call TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS_1, boss_0, "FrostLich the Freezing in Ice", gg_snd_HeroLichYesAttack1_1, udg_ColorString_1[GetPlayerId(GetOwningPlayer(udg_Unit_FilterMostNearUnit_1)) + 1] + GetPlayerName(GetOwningPlayer(udg_Unit_FilterMostNearUnit_1)) + "|r, |cFFAFE6FFПочувствуй Зов Могилы!!!...|r", 0, 2.2, false)
			call SaveInteger(udg_hash_1, GetHandleId(boss_0), 44, $C)
			call IssueTargetOrderById(boss_0, $D00DD, udg_Unit_FilterMostNearUnit_1)
		endif
	endif
	if cdblink_0 <= 0 and zaniat_0 == false then
		set dist_0 = GetRandomReal(-800., -400.)
		call SaveInteger(udg_hash_1, GetHandleId(boss_0), 45, 25)
		call IssuePointOrderById(boss_0, $D022D, GetUnitX(boss_0) + dist_0 * Cos(bj_RADTODEG_1 * Atan2(dx_0, dy_0) * bj_DEGTORAD_1), GetUnitY(boss_0) + dist_0 * Sin(bj_RADTODEG_1 * Atan2(dx_0, dy_0) * bj_DEGTORAD_1))
		call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Shiva'sWrath.mdl", boss_0, "origin"))
	endif
	if SquareRoot(dx_0 * dx_0 + dy_0 * dy_0) > $4B0 and zaniat_0 == false then
		call SetUnitPosition(boss_0, xc_0, yc_0)
	endif
	call GroupClear(heroes_0)
	if GetUnitState(boss_0, UNIT_STATE_LIFE_1) < .405 then
		set tend_0 = CreateTimer()
		set hend_0 = GetHandleId(tend_0)
		call SaveInteger(udg_hash_1, hend_0, 2, ishod_0)
		call SaveUnitHandle(udg_hash_1, hend_0, 1, boss_0)
		call TimerStart(tend_0, 3., false, function Trig_IceBoss_end_Actions)
		set taltars_0 = LoadTimerHandle(udg_hash_1, hhpcheck_0, 3)
		call FlushChildHashtable(udg_hash_1, GetHandleId(taltars_0))
		call DestroyTimer(taltars_0)
		call GroupEnumUnitsInRect(heroes_0, gg_rct_6_1, null)
		call DestroyTimer(thpcheck_0)
		set tend_0 = null
		call FlushChildHashtable(udg_hash_1, hhpcheck_0)
	endif
	call GroupClear(heroes_0)
	loop
		set Picked_0 = FirstOfGroup(geroi_0)
		exitwhen Picked_0 == null
		if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) < .405 then
			set kolvo_0 = kolvo_0 + 1
			call SaveInteger(udg_hash_1, GetHandleId(Picked_0), 1, 1)
		endif
		call GroupRemoveUnit(geroi_0, Picked_0)
	endloop
	set Picked_0 = null
	if kolvo_0 >= CountUnitsInGroup(udg_Gruppa_HeroUnitov_Geroev_1) then
		set tend_0 = CreateTimer()
		set hend_0 = GetHandleId(tend_0)
		call SaveInteger(udg_hash_1, hend_0, 2, ishod_0 + 1)
		call SaveUnitHandle(udg_hash_1, hend_0, 1, boss_0)
		set taltars_0 = LoadTimerHandle(udg_hash_1, hhpcheck_0, 3)
		call FlushChildHashtable(udg_hash_1, GetHandleId(taltars_0))
		call DestroyTimer(taltars_0)
		call TimerStart(tend_0, 3., false, function Trig_IceBoss_end_Actions)
		call DestroyTimer(thpcheck_0)
		set tend_0 = null
		call FlushChildHashtable(udg_hash_1, hhpcheck_0)
	endif
	set thpcheck_0 = null
	set boss_0 = null
	set twact_0 = null
	call GroupClear(grp_0)
	call DestroyGroup(grp_0)
	set grp_0 = null
	call GroupClear(heroes_0)
	call DestroyGroup(heroes_0)
	call GroupClear(geroi_0)
	call DestroyGroup(geroi_0)
	set geroi_0 = null
	set heroes_0 = null
	set p_0 = null
	set dammi_0 = null
endfunction

function Trig_IceBoss_frasa_Actions takes nothing returns nothing
	local timer tfrasa = GetExpiredTimer()
	local integer hfrasa = GetHandleId(tfrasa_0)
	local unit boss = LoadUnitHandle(udg_hash_1, hfrasa_0, 1)
	local integer random = GetRandomInt(1, 3)
	if GetUnitState(boss_0, UNIT_STATE_LIFE_1) > .405 then
		if random_0 == 1 then
			call TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS_1, boss_0, "FrostLich the Freezing in Ice", gg_snd_HeroLichReady1_1, "|cFFAFE6FFДревнее Зло... Непобедимо!!!|r", 0, 4.37, false)
		endif
		if random_0 == 2 then
			call TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS_1, boss_0, "FrostLich the Freezing in Ice", gg_snd_HeroLichYesAttack2_1, "|cFFAFE6FFВо Славу Тьмы!!!..|r", 0, 2.7, false)
		endif
		if random_0 == 3 then
			call TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS_1, boss_0, "FrostLich the Freezing in Ice", gg_snd_HeroLichYesAttack3_1, "|cFFAFE6FFИх Ждет Смерть!!!...|r", 0, 2.4, false)
		endif
	else
		call FlushChildHashtable(udg_hash_1, hfrasa_0)
		call DestroyTimer(tfrasa_0)
	endif
	set tfrasa_0 = null
	set boss_0 = null
endfunction

function Trig_IceBoss_5sec_Actions takes nothing returns nothing
	local timer t5sec = GetExpiredTimer()
	local integer h5sec = GetHandleId(t5sec_0)
	local unit boss = LoadUnitHandle(udg_hash_1, h5sec_0, 1)
	local group gruppa = CreateGroup()
	local unit Picked
	local timer tfrasa = CreateTimer()
	local integer hfrasa = GetHandleId(tfrasa_0)
	local timer thpcheck = CreateTimer()
	local integer hhpcheck = GetHandleId(thpcheck_0)
	local integer stage = 0
	local timer taltars = CreateTimer()
	local boolean zaniat = false
	call GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev_1, gruppa_0)
	call CinematicModeExBJ(false, bj_FORCE_ALL_PLAYERS_1, bj_CINEMODE_INTERFACEFADE_1)
	loop
		set Picked_0 = FirstOfGroup(gruppa_0)
		exitwhen Picked_0 == null
		call PauseUnit(Picked_0, false)
		call IssueTargetOrderById(Picked_0, $D000F, boss_0)
		if (GetLocalPlayer() == GetOwningPlayer(Picked_0)) then
			call ClearSelection()
			call SelectUnit(Picked_0, true)
			call ResetToGameCamera(.0)
			call PanCameraToTimed(GetRectCenterX(gg_rct_6_1), GetRectCenterY(gg_rct_6_1), .0)
		endif
		call GroupRemoveUnit(gruppa_0, Picked_0)
	endloop
	call PauseUnit(boss_0, false)
	call IssuePointOrderById(boss_0, $D0012, GetRectCenterX(gg_rct_6_1), GetRectCenterY(gg_rct_6_1))
	call SaveUnitHandle(udg_hash_1, hfrasa_0, 1, boss_0)
	call TimerStart(tfrasa_0, 13., true, function Trig_IceBoss_frasa_Actions)
	call SaveUnitHandle(udg_hash_1, hhpcheck_0, 1, boss_0)
	call SaveInteger(udg_hash_1, hhpcheck_0, 2, stage_0)
	call SaveTimerHandle(udg_hash_1, hhpcheck_0, 3, taltars_0)
	call SaveBoolean(udg_hash_1, GetHandleId(boss_0), $A, zaniat_0)
	call SaveInteger(udg_hash_1, GetHandleId(boss_0), 41, 0)
	call SaveInteger(udg_hash_1, GetHandleId(boss_0), 42, 0)
	call SaveInteger(udg_hash_1, GetHandleId(boss_0), 43, 0)
	call SaveInteger(udg_hash_1, GetHandleId(boss_0), 44, 0)
	call SaveInteger(udg_hash_1, GetHandleId(boss_0), 45, 20)
	call SaveInteger(udg_hash_1, hhpcheck_0, 4, 0)
	call TimerStart(thpcheck_0, 1., true, function Trig_IceBoss_hpcheck_Actions)
	call DestroyTimer(t5sec_0)
	call FlushChildHashtable(udg_hash_1, h5sec_0)
	set t5sec_0 = null
	set boss_0 = null
	set Picked_0 = null
	set tfrasa_0 = null
	set thpcheck_0 = null
	set taltars_0 = null
	call GroupClear(gruppa_0)
	call DestroyGroup(gruppa_0)
	set gruppa_0 = null
endfunction

function Trig_IceBoss_3sec_Actions takes nothing returns nothing
	local timer t3sec = GetExpiredTimer()
	local integer h3sec = GetHandleId(t3sec_0)
	local timer t5sec = CreateTimer()
	local integer h5sec = GetHandleId(t5sec_0)
	local unit boss = LoadUnitHandle(udg_hash_1, h3sec_0, 1)
	call SaveUnitHandle(udg_hash_1, h5sec_0, 1, boss_0)
	call TimerStart(t5sec_0, 5., false, function Trig_IceBoss_5sec_Actions)
	call ForceCinematicSubtitles(true)
	call TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS_1, boss_0, "FrostLich the Freezing in Ice", gg_snd_HeroLichReady1_1, "|cFFAFE6FFДревнее Зло... Непобедимо!!!|r", 0, 4.75, false)
	call DestroyTimer(t3sec_0)
	call FlushChildHashtable(udg_hash_1, h3sec_0)
	set t3sec_0 = null
	set t5sec_0 = null
	set boss_0 = null
endfunction

function Trig_IceBoss_Actions takes nothing returns nothing
	local real xc = GetRectCenterX(gg_rct_6_1)
	local real yc = GetRectCenterY(gg_rct_6_1)
	local real xp = xc_0 - 1216.
	local real yp = yc_0 + 1088.
	local integer random
	local integer end = 1
	local group gruppa = CreateGroup()
	local unit Picked
	local real dist = -350
	local unit boss = CreateUnit(Player($B), 'N000', (xc_0 - 500), yc_0, .0)
	local timer t3sec = CreateTimer()
	local integer h3sec = GetHandleId(t3sec_0)
	set udg_BossFightWeather_1 = AddWeatherEffect(gg_rct_6_1, 'SNhs')
	set udg_BossFightWeather2_1 = AddWeatherEffect(gg_rct_6_1, 'FDbh')
	call EnableWeatherEffect(udg_BossFightWeather_1, true)
	call EnableWeatherEffect(udg_BossFightWeather2_1, true)
	call DisableTrigger(gg_trg_Hero_Dead_1)
	call EnableTrigger(gg_trg_Ice_Wall_1)
	call EnableTrigger(gg_trg_Ice_Storm_1)
	call EnableTrigger(gg_trg_Ice_Rain_1)
	call EnableTrigger(gg_trg_Ice_Restoration_1)
	call EnableTrigger(gg_trg_Cold_Punishment_1)
	call GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev_1, gruppa_0)
	call SetAttackSpeedAbilityLevel(boss_0, 20 * CountPlayersInForceBJ(udg_IGRAET_1))
	call SetAttackAbilityLevel(boss_0, 'd' * CountPlayersInForceBJ(udg_IGRAET_1))
	call SetArmorAbilityLevel(boss_0, $A * CountPlayersInForceBJ(udg_IGRAET_1))
	call CinematicModeExBJ(true, bj_FORCE_ALL_PLAYERS_1, bj_CINEMODE_INTERFACEFADE_1)
	call CinematicFadeBJ(1, .0, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1)
	call CinematicFadeBJ(0, 8.25, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1)
	loop
		set Picked_0 = FirstOfGroup(gruppa_0)
		exitwhen Picked_0 == null
		call SetUnitPosition(Picked_0, (xc_0 + 500), (yc_0 + dist_0))
		call SetUnitFacing(Picked_0, bj_RADTODEG_1 * Atan2(yc_0 - GetUnitY(Picked_0), xc_0 - GetUnitX(Picked_0)))
		call PauseUnit(Picked_0, true)
		call ClearSelection()
		set dist_0 = dist_0 + 'd'
		if (GetLocalPlayer() == GetOwningPlayer(Picked_0)) then
			call CameraSetupApplyForceDuration(gg_cam_Camera_BossFightStart_1, true, .0)
		endif
		call GroupRemoveUnit(gruppa_0, Picked_0)
	endloop
	call SetHeroLevel(boss_0, 50, false)
	call UnitAddAbility(boss_0, 'A00K')
	call UnitAddAbility(boss_0, 'A03K')
	call UnitAddAbility(boss_0, 'A03P')
	call UnitAddAbility(boss_0, 'A043')
	call UnitAddAbility(boss_0, 'A04B')
	call UnitAddAbility(boss_0, 'A04D')
	call PauseUnit(boss_0, true)
	call SaveUnitHandle(udg_hash_1, h3sec_0, 1, boss_0)
	call TimerStart(t3sec_0, 3., false, function Trig_IceBoss_3sec_Actions)
	call ShowAndFlushAllPlayerDamage(true)
	call TimerStart(udg_TimerShowAndFlushAllPlayerDmg_1, 10000., false, null)
	loop
		exitwhen end_0 > 16
		set yp_0 = yp_0 - $80
		set bj_forLoopAIndex_1 = 1
		loop
			exitwhen bj_forLoopAIndex_1 > 20
			set random_0 = GetRandomInt(1, $A)
			if random_0 >= 1 and random_0 <= 3 then
				call SetTerrainType(xp_0, yp_0, 'Idki', -1, 2, 1)
			else
				if random_0 >= 4 and random_0 <= 7 then
					call SetTerrainType(xp_0, yp_0, 'Iice', -1, 2, 1)
				else
					call SetTerrainType(xp_0, yp_0, 'Nice', -1, 2, 1)
				endif
			endif
			set xp_0 = xp_0 + $80
			set bj_forLoopAIndex_1 = bj_forLoopAIndex_1 + 1
		endloop
		set end_0 = end_0 + 1
		set xp_0 = xc_0 - 1216.
	endloop
	set Picked_0 = null
	set boss_0 = null
	call GroupClear(gruppa_0)
	call DestroyGroup(gruppa_0)
	set gruppa_0 = null
	set t3sec_0 = null
endfunction

function InitTrig_Ice_Boss takes nothing returns nothing
	set gg_trg_Ice_Boss_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Ice_Boss_1, function Trig_IceBoss_Actions)
endfunction

function Trig_Ice_Wall_Periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local integer wait = LoadInteger(udg_hash_1, h_0, 2)
	local real damage = LoadReal(udg_hash_1, h_0, 3)
	local group gdamage = CreateGroup()
	local group gdamage2 = CreateGroup()
	local unit Picked
	local player p = GetOwningPlayer(caster_0)
	local effect ef
	local integer lopa = 1
	local unit dammi
	if wait_0 > 0 then
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 2, wait_0)
		loop
			exitwhen lopa_0 > 20
			set dammi_0 = LoadUnitHandle(udg_hash_1, h_0, $A + lopa_0)
			call GroupEnumUnitsInRange(gdamage_0, GetUnitX(dammi_0), GetUnitY(dammi_0), 140., null)
			call GroupAddGroup(gdamage_0, gdamage2_0)
			set dammi_0 = null
			set lopa_0 = lopa_0 + 1
		endloop
		loop
			set Picked_0 = FirstOfGroup(gdamage2_0)
			exitwhen Picked_0 == null
			if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 and IsUnitEnemy(Picked_0, p_0) and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call UnitDamageTarget(caster_0, Picked_0, (damage_0 / 10.), false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
				if (wait_0 - (wait_0 / $A) * $A) == 0 then
					call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIob\\AIobSpecialArt.mdl", Picked_0, "origin"))
					call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratFrostMissile\\ZigguratFrostMissile.mdl", Picked_0, "chest"))
				endif
				if GetUnitAbilityLevel(Picked_0, 'B008') <= 0 then
					set dammi_0 = CreateUnit(p_0, 'h00U', GetUnitX(Picked_0), GetUnitY(Picked_0), .0)
					call UnitApplyTimedLife(dammi_0, 'BTLF', 2.)
					call UnitAddAbility(dammi_0, 'A03M')
					call IssueTargetOrderById(dammi_0, $D006B, Picked_0)
					set dammi_0 = null
				endif
			endif
			if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 and IsUnitType(Picked_0, UNIT_TYPE_HERO_1) == false and IsUnitAlly(Picked_0, p_0) and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				if GetUnitAbilityLevel(Picked_0, 'B009') <= 0 then
					set dammi_0 = CreateUnit(p_0, 'h00U', GetUnitX(Picked_0), GetUnitY(Picked_0), .0)
					call UnitApplyTimedLife(dammi_0, 'BTLF', 2.)
					call UnitAddAbility(dammi_0, 'A03I')
					call SetUnitAbilityLevel(dammi_0, 'A03I', 1)
					call IssueTargetOrderById(dammi_0, $D0101, Picked_0)
					set dammi_0 = null
				endif
			endif
			call GroupRemoveUnit(gdamage2_0, Picked_0)
		endloop
	else
		set lopa_0 = 1
		loop
			exitwhen lopa_0 > 20
			set dammi_0 = LoadUnitHandle(udg_hash_1, h_0, $A + lopa_0)
			call KillUnit(dammi_0)
			set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 40 + lopa_0)
			call DestroyEffect(ef_0)
			set dammi_0 = null
			set ef_0 = null
			set lopa_0 = lopa_0 + 1
		endloop
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set caster_0 = null
	set ef_0 = null
	set Picked_0 = null
	set p_0 = null
	call GroupClear(gdamage_0)
	call DestroyGroup(gdamage_0)
	set gdamage_0 = null
	call GroupClear(gdamage2_0)
	call DestroyGroup(gdamage2_0)
	set gdamage2_0 = null
	set dammi_0 = null
	set ef_0 = null
endfunction

function Trig_Ice_Wall_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local location loc
	local real xt
	local real yt
	local unit target = GetSpellTargetUnit()
	local real angle
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local integer wait = 'x'
	local real damage = 150.
	local integer lopa = 1
	local integer lopb = 1
	local unit dammi
	local effect ef
	local player p = GetOwningPlayer(caster_0)
	local real random
	if target_0 != null then
		set xt_0 = GetUnitX(target_0)
		set yt_0 = GetUnitY(target_0)
	else
		set loc_0 = GetSpellTargetLoc()
		set xt_0 = GetLocationX(loc_0)
		set yt_0 = GetLocationY(loc_0)
	endif
	set angle_0 = bj_RADTODEG_1 * Atan2(yt_0 - GetUnitY(caster_0), xt_0 - GetUnitX(caster_0))
	set xt_0 = xt_0 + 75. * Cos(angle_0 * bj_DEGTORAD_1)
	set yt_0 = yt_0 + 75. * Sin(angle_0 * bj_DEGTORAD_1)
	set angle_0 = angle_0 - 90.
	set xt_0 = xt_0 + 500. * Cos(angle_0 * bj_DEGTORAD_1)
	set yt_0 = yt_0 + 500. * Sin(angle_0 * bj_DEGTORAD_1)
	loop
		exitwhen lopb_0 > 2
		loop
			exitwhen lopa_0 > $A
			set random_0 = GetRandomReal(.8, 1.25)
			set dammi_0 = CreateUnit(p_0, 'h00U', xt_0 - ((lopa_0 - 1) * 100.) * Cos(angle_0 * bj_DEGTORAD_1), yt_0 - ((lopa_0 - 1) * 100.) * Sin(angle_0 * bj_DEGTORAD_1), GetRandomReal(.0, 360.))
			call SetUnitScale(dammi_0, random_0, random_0, random_0)
			set ef_0 = AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathTargetArt.mdl", dammi_0, "origin")
			call SaveUnitHandle(udg_hash_1, h_0, $A + lopa_0 + ($A * (lopb_0 - 1)), dammi_0)
			call SaveEffectHandle(udg_hash_1, h_0, 40 + lopa_0 + ($A * (lopb_0 - 1)), ef_0)
			set dammi_0 = null
			set ef_0 = null
			set lopa_0 = lopa_0 + 1
		endloop
		set xt_0 = xt_0 - 150. * Cos((angle_0 + 90.) * bj_DEGTORAD_1)
		set yt_0 = yt_0 - 150. * Sin((angle_0 + 90.) * bj_DEGTORAD_1)
		set lopb_0 = lopb_0 + 1
		set lopa_0 = 1
	endloop
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveInteger(udg_hash_1, h_0, 2, wait_0)
	call SaveReal(udg_hash_1, h_0, 3, damage_0)
	call TimerStart(t_0, .1, true, function Trig_Ice_Wall_Periodic_Actions)
	set caster_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set target_0 = null
	set t_0 = null
	set p_0 = null
endfunction

function Trig_Ice_Wall_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A03K'
endfunction

function InitTrig_Ice_Wall takes nothing returns nothing
	local integer index = 0
	set gg_trg_Ice_Wall_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Ice_Wall_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Ice_Wall_1, Condition(function Trig_Ice_Wall_Conditions))
	call TriggerAddAction(gg_trg_Ice_Wall_1, function Trig_Ice_Wall_Actions)
endfunction

function Trig_Ice_Storm_Periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local real x = LoadReal(udg_hash_1, h_0, 2)
	local real y = LoadReal(udg_hash_1, h_0, 3)
	local integer wait = LoadInteger(udg_hash_1, h_0, 4)
	local real damage = LoadReal(udg_hash_1, h_0, 5)
	local real angle = LoadReal(udg_hash_1, h_0, 6)
	local group gdamage = CreateGroup()
	local unit Picked
	local player p = GetOwningPlayer(caster_0)
	local unit dammi
	local integer order = GetUnitCurrentOrder(caster_0)
	local integer orderId
	local real dist
	local real xt
	local real yt
	set orderId_0 = $D0278
	if (orderId_0 != 0) then
	else
		set orderId_0 = UnitId("channel")
		if (orderId_0 != 0) then
		endif
	endif
	if order_0 == orderId_0 and wait_0 > 0 then
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 4, wait_0)
		set dist_0 = GetRandomReal(250., 600.)
		set angle_0 = angle_0 + GetRandomReal(-60., 60.)
		set xt_0 = x_0 + dist_0 * Cos(angle_0 * bj_DEGTORAD_1)
		set yt_0 = y_0 + dist_0 * Sin(angle_0 * bj_DEGTORAD_1)
		set angle_0 = angle_0 + 120.
		call SaveReal(udg_hash_1, h_0, 6, angle_0)
		call GroupEnumUnitsInRange(gdamage_0, xt_0, yt_0, 200., null)
		call DestroyEffect(AddSpecialEffect("war3mapImported\\Shiva'sWrath.mdl", xt_0, yt_0))
		set dammi_0 = CreateUnit(p_0, 'n00A', xt_0, yt_0, GetRandomReal(.0, 360.))
		call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl", dammi_0, "origin"))
		set dammi_0 = null
		loop
			set Picked_0 = FirstOfGroup(gdamage_0)
			exitwhen Picked_0 == null
			if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 and IsUnitEnemy(Picked_0, p_0) and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
				set dammi_0 = CreateUnit(p_0, 'h00U', GetUnitX(Picked_0), GetUnitY(Picked_0), .0)
				call UnitApplyTimedLife(dammi_0, 'BTLF', 2.)
				call UnitAddAbility(dammi_0, 'A039')
				call SetUnitAbilityLevel(dammi_0, 'A039', 1)
				call IssueTargetOrderById(dammi_0, $D00CB, Picked_0)
				set dammi_0 = null
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl", Picked_0, "origin"))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIob\\AIobSpecialArt.mdl", Picked_0, "origin"))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratFrostMissile\\ZigguratFrostMissile.mdl", Picked_0, "chest"))
			endif
			call GroupRemoveUnit(gdamage_0, Picked_0)
		endloop
	else
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set caster_0 = null
	set Picked_0 = null
	set p_0 = null
	call GroupClear(gdamage_0)
	call DestroyGroup(gdamage_0)
	set gdamage_0 = null
	set dammi_0 = null
endfunction

function Trig_Ice_Storm_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local integer wait = 6
	local real damage = 350
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveReal(udg_hash_1, h_0, 2, x_0)
	call SaveReal(udg_hash_1, h_0, 3, y_0)
	call SaveInteger(udg_hash_1, h_0, 4, wait_0)
	call SaveReal(udg_hash_1, h_0, 5, damage_0)
	call SaveReal(udg_hash_1, h_0, 6, GetUnitFacing(caster_0))
	call TimerStart(t_0, .5, true, function Trig_Ice_Storm_Periodic_Actions)
	set caster_0 = null
	set t_0 = null
endfunction

function Trig_Ice_Storm_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A03P'
endfunction

function InitTrig_Ice_Storm takes nothing returns nothing
	local integer index = 0
	set gg_trg_Ice_Storm_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Ice_Storm_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Ice_Storm_1, Condition(function Trig_Ice_Storm_Conditions))
	call TriggerAddAction(gg_trg_Ice_Storm_1, function Trig_Ice_Storm_Actions)
endfunction

function Trig_Ice_Rain_Filter_Actions takes nothing returns boolean
	return (GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE_1) > .405 and IsUnitEnemy(GetFilterUnit(), udg_Temp_Player_1[1]) and IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(GetFilterUnit()) != 'h00U') != null
endfunction

function Trig_Ice_Rain_Periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local integer wait = LoadInteger(udg_hash_1, h_0, 2)
	local real damage = LoadReal(udg_hash_1, h_0, 3)
	local real xt = LoadReal(udg_hash_1, h_0, 4)
	local real yt = LoadReal(udg_hash_1, h_0, 5)
	local real angle = LoadReal(udg_hash_1, h_0, 6)
	local group gmissile = LoadGroupHandle(udg_hash_1, h_0, 7)
	local integer waitcreate = LoadInteger(udg_hash_1, h_0, 8)
	local group gmissile2 = CreateGroup()
	local group gdamage
	local group gdamage2 = CreateGroup()
	local unit Picked
	local unit Picked2
	local unit missile
	local real xmissile
	local real ymissile
	local integer hmissile
	local integer missileflywait
	local real anglemissile
	local player p = GetOwningPlayer(caster_0)
	local effect ef
	local boolean stop
	local integer order = GetUnitCurrentOrder(caster_0)
	local integer orderId
	set orderId_0 = $D010D
	if (orderId_0 != 0) then
	else
		set orderId_0 = UnitId("rainofchaos")
		if (orderId_0 != 0) then
		endif
	endif
	if order_0 == orderId_0 and wait_0 > 0 then
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 2, wait_0)
		set udg_Temp_Player_1[1] = p_0
		if waitcreate_0 > 0 then
			set waitcreate_0 = waitcreate_0 - 1
			call SaveInteger(udg_hash_1, h_0, 8, waitcreate_0)
			set xmissile_0 = xt_0 + GetRandomReal(-300., 300.) * Cos((angle_0 - 90.) * bj_DEGTORAD_1)
			set ymissile_0 = yt_0 + GetRandomReal(-300., 300.) * Sin((angle_0 - 90.) * bj_DEGTORAD_1)
			set anglemissile_0 = angle_0 + GetRandomReal(-30., 30.)
			set missile_0 = CreateUnit(p_0, 'h00U', xmissile_0, ymissile_0, anglemissile_0)
			set ef_0 = AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl", missile_0, "chest")
			call UnitAddAbility(missile_0, 'Amrf')
			call UnitRemoveAbility(missile_0, 'Amrf')
			call SetUnitFlyHeight(missile_0, 50., .0)
			set hmissile_0 = GetHandleId(missile_0)
			call SaveInteger(udg_hash_1, hmissile_0, 1, 0)
			call SaveEffectHandle(udg_hash_1, hmissile_0, 2, ef_0)
			call SaveStr(udg_hash_1, hmissile_0, 3, "Im missile")
			call GroupAddUnit(gmissile_0, missile_0)
			call SaveGroupHandle(udg_hash_1, h_0, 7, gmissile_0)
			set missile_0 = null
			set ef_0 = null
		endif
		call GroupAddGroup(gmissile_0, gmissile2_0)
		loop
			set missile_0 = FirstOfGroup(gmissile2_0)
			exitwhen missile_0 == null
			set anglemissile_0 = GetUnitFacing(missile_0)
			set xmissile_0 = GetUnitX(missile_0) + 36. * Cos(anglemissile_0 * bj_DEGTORAD_1)
			set ymissile_0 = GetUnitY(missile_0) + 36. * Sin(anglemissile_0 * bj_DEGTORAD_1)
			set gdamage_0 = CreateGroup()
			call GroupEnumUnitsInRange(gdamage_0, xmissile_0, ymissile_0, 100., Filter(function Trig_Ice_Rain_Filter_Actions))
			call GroupAddGroup(gdamage_0, gdamage2_0)
			call GroupClear(gdamage_0)
			call DestroyGroup(gdamage_0)
			set gdamage_0 = null
			if IsTerrainPathable(xmissile_0, ymissile_0, PATHING_TYPE_FLYABILITY_1) == false then
				call SetUnitPosition(missile_0, xmissile_0, ymissile_0)
			endif
			set hmissile_0 = GetHandleId(missile_0)
			set missileflywait_0 = LoadInteger(udg_hash_1, hmissile_0, 1)
			if missileflywait_0 >= 30 then
				call KillUnit(missile_0)
				call GroupRemoveUnit(gmissile_0, missile_0)
				call SaveGroupHandle(udg_hash_1, h_0, 7, gmissile_0)
				set ef_0 = LoadEffectHandle(udg_hash_1, hmissile_0, 2)
				call DestroyEffect(ef_0)
				call FlushChildHashtable(udg_hash_1, hmissile_0)
				set ef_0 = null
				set missile_0 = null
			else
				call SaveInteger(udg_hash_1, hmissile_0, 1, missileflywait_0 + 1)
			endif
			call GroupRemoveUnit(gmissile2_0, missile_0)
		endloop
		loop
			set Picked_0 = FirstOfGroup(gdamage2_0)
			exitwhen Picked_0 == null
			set gdamage_0 = CreateGroup()
			call GroupEnumUnitsInRange(gdamage_0, GetUnitX(Picked_0), GetUnitY(Picked_0), 100., null)
			set stop_0 = false
			loop
				set Picked2_0 = FirstOfGroup(gdamage_0)
				exitwhen Picked2_0 == null or stop_0
				if GetUnitState(Picked2_0, UNIT_STATE_LIFE_1) > .405 and GetOwningPlayer(Picked2_0) == p_0 and GetUnitTypeId(Picked2_0) == 'h00U' and LoadStr(udg_hash_1, GetHandleId(Picked2_0), 3) == "Im missile" then
					set hmissile_0 = GetHandleId(Picked2_0)
					call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIob\\AIobSpecialArt.mdl", Picked_0, "origin"))
					call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratFrostMissile\\ZigguratFrostMissile.mdl", Picked_0, "chest"))
					call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
					call StunUnitTimed(Picked_0, .66)
					set missile_0 = Picked2_0
					call KillUnit(missile_0)
					call GroupRemoveUnit(gmissile_0, missile_0)
					call SaveGroupHandle(udg_hash_1, h_0, 7, gmissile_0)
					set ef_0 = LoadEffectHandle(udg_hash_1, hmissile_0, 2)
					call DestroyEffect(ef_0)
					call FlushChildHashtable(udg_hash_1, hmissile_0)
					set ef_0 = null
					set missile_0 = null
					set stop_0 = true
				endif
				call GroupRemoveUnit(gdamage_0, Picked2_0)
			endloop
			call GroupClear(gdamage_0)
			call DestroyGroup(gdamage_0)
			set gdamage_0 = null
			call GroupRemoveUnit(gdamage2_0, Picked_0)
		endloop
	else
		if wait_0 > 0 then
			loop
				set missile_0 = FirstOfGroup(gmissile_0)
				exitwhen missile_0 == null
				call KillUnit(missile_0)
				set hmissile_0 = GetHandleId(missile_0)
				set ef_0 = LoadEffectHandle(udg_hash_1, hmissile_0, 2)
				call DestroyEffect(ef_0)
				call FlushChildHashtable(udg_hash_1, hmissile_0)
				set ef_0 = null
				call GroupRemoveUnit(gmissile_0, missile_0)
				set missile_0 = null
			endloop
		endif
		call GroupClear(gmissile_0)
		call DestroyGroup(gmissile_0)
		set gmissile_0 = null
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set caster_0 = null
	set ef_0 = null
	set Picked_0 = null
	set Picked2_0 = null
	set missile_0 = null
	set p_0 = null
	call GroupClear(gmissile2_0)
	call DestroyGroup(gmissile2_0)
	set gmissile2_0 = null
	call GroupClear(gdamage2_0)
	call DestroyGroup(gdamage2_0)
	set gdamage2_0 = null
endfunction

function Trig_Ice_Rain_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local location loc
	local real xt
	local real yt
	local real xpoint
	local real ypoint
	local unit target = GetSpellTargetUnit()
	local real angle
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local integer wait = $AF
	local integer waitcreate = $91
	local real damage = 150.
	local group gmissile = CreateGroup()
	if target_0 != null then
		set xt_0 = GetUnitX(target_0)
		set yt_0 = GetUnitY(target_0)
	else
		set loc_0 = GetSpellTargetLoc()
		set xt_0 = GetLocationX(loc_0)
		set yt_0 = GetLocationY(loc_0)
	endif
	set angle_0 = bj_RADTODEG_1 * Atan2(yt_0 - GetUnitY(caster_0), xt_0 - GetUnitX(caster_0))
	set xpoint_0 = x_0 - 300. * Cos(angle_0 * bj_DEGTORAD_1)
	set ypoint_0 = y_0 - 300. * Sin(angle_0 * bj_DEGTORAD_1)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveInteger(udg_hash_1, h_0, 2, wait_0)
	call SaveReal(udg_hash_1, h_0, 3, damage_0)
	call SaveReal(udg_hash_1, h_0, 4, xpoint_0)
	call SaveReal(udg_hash_1, h_0, 5, ypoint_0)
	call SaveReal(udg_hash_1, h_0, 6, angle_0)
	call SaveGroupHandle(udg_hash_1, h_0, 7, gmissile_0)
	call SaveInteger(udg_hash_1, h_0, 8, waitcreate_0)
	call TimerStart(t_0, .04, true, function Trig_Ice_Rain_Periodic_Actions)
	set caster_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set target_0 = null
	set t_0 = null
	set gmissile_0 = null
endfunction

function Trig_Ice_Rain_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A043'
endfunction

function InitTrig_Ice_Rain takes nothing returns nothing
	local integer index = 0
	set gg_trg_Ice_Rain_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Ice_Rain_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Ice_Rain_1, Condition(function Trig_Ice_Rain_Conditions))
	call TriggerAddAction(gg_trg_Ice_Rain_1, function Trig_Ice_Rain_Actions)
endfunction

function Trig_Cold_Punishment_RefreshGroup_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit Picked = LoadUnitHandle(udg_hash_1, h_0, 1)
	local group gdamage = LoadGroupHandle(udg_hash_1, h_0, 2)
	call GroupRemoveUnit(gdamage_0, Picked_0)
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
	set Picked_0 = null
	set gdamage_0 = null
endfunction

function Trig_Cold_Punishment_Periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local unit target = LoadUnitHandle(udg_hash_1, h_0, 2)
	local integer wait = LoadInteger(udg_hash_1, h_0, 3)
	local real damage = LoadReal(udg_hash_1, h_0, 4)
	local real x = LoadReal(udg_hash_1, h_0, 5)
	local real y = LoadReal(udg_hash_1, h_0, 6)
	local group gdamage = LoadGroupHandle(udg_hash_1, h_0, 7)
	local real xt
	local real yt
	local real angle
	local group g
	local unit Picked
	local player p
	local integer lopa = 1
	local unit dammi
	local effect ef
	local boolean destroy = false
	local integer abilitylevel
	local timer tPicked
	local integer htPicked
	local real time
	if GetUnitState(target_0, UNIT_STATE_LIFE_1) > .405 and wait_0 > 0 then
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 3, wait_0)
		set g_0 = CreateGroup()
		set p_0 = GetOwningPlayer(caster_0)
		set xt_0 = GetUnitX(target_0)
		set yt_0 = GetUnitY(target_0)
		set angle_0 = bj_RADTODEG_1 * Atan2(yt_0 - y_0, xt_0 - x_0)
		set x_0 = x_0 + 6. * Cos(angle_0 * bj_DEGTORAD_1)
		set y_0 = y_0 + 6. * Sin(angle_0 * bj_DEGTORAD_1)
		call SaveReal(udg_hash_1, h_0, 5, x_0)
		call SaveReal(udg_hash_1, h_0, 6, y_0)
		loop
			exitwhen lopa_0 > 5
			set dammi_0 = LoadUnitHandle(udg_hash_1, h_0, 9 + lopa_0)
			call SetUnitPosition(dammi_0, x_0 + 75. * Cos((lopa_0 * 72) * bj_DEGTORAD_1), y_0 + 75. * Sin((lopa_0 * 72) * bj_DEGTORAD_1))
			set dammi_0 = null
			set lopa_0 = lopa_0 + 1
		endloop
		call GroupEnumUnitsInRange(g_0, x_0, y_0, 150., null)
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 and IsUnitEnemy(Picked_0, p_0) and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' and IsUnitInGroup(Picked_0, gdamage_0) == false then
				set abilitylevel_0 = 2
				if Picked_0 == target_0 then
					set abilitylevel_0 = 4
					call UnitDamageTarget(caster_0, Picked_0, GetUnitState(target_0, UNIT_STATE_MAX_LIFE_1) / 2.5 + damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
					set destroy_0 = true
				endif
				if GetUnitAbilityLevel(Picked_0, 'B005') <= 0 or Picked_0 == target_0 then
					call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
					set dammi_0 = CreateUnit(p_0, 'h00U', GetUnitX(Picked_0), GetUnitY(Picked_0), .0)
					call UnitApplyTimedLife(dammi_0, 'BTLF', 2.)
					call UnitAddAbility(dammi_0, 'A039')
					call SetUnitAbilityLevel(dammi_0, 'A039', abilitylevel_0)
					call IssueTargetOrderById(dammi_0, $D00CB, Picked_0)
					set dammi_0 = null
					call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl", Picked_0, "origin"))
					call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIob\\AIobSpecialArt.mdl", Picked_0, "origin"))
					call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratFrostMissile\\ZigguratFrostMissile.mdl", Picked_0, "chest"))
					call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl", Picked_0, "chest"))
					call GroupAddUnit(gdamage_0, Picked_0)
					set tPicked_0 = CreateTimer()
					set htPicked_0 = GetHandleId(tPicked_0)
					call SaveUnitHandle(udg_hash_1, htPicked_0, 1, Picked_0)
					call SaveGroupHandle(udg_hash_1, htPicked_0, 2, gdamage_0)
					set time_0 = 2.5
					if IsUnitType(Picked_0, UNIT_TYPE_HERO_1) == false then
						set time_0 = time_0 * 2
					endif
					call TimerStart(tPicked_0, time_0, false, function Trig_Cold_Punishment_RefreshGroup_Actions)
					set tPicked_0 = null
				endif
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		call SaveGroupHandle(udg_hash_1, h_0, 7, gdamage_0)
	else
		set destroy_0 = true
	endif
	if destroy_0 then
		set lopa_0 = 1
		loop
			exitwhen lopa_0 > 5
			set dammi_0 = LoadUnitHandle(udg_hash_1, h_0, 9 + lopa_0)
			set ef_0 = LoadEffectHandle(udg_hash_1, h_0, $E + lopa_0)
			call KillUnit(dammi_0)
			call DestroyEffect(ef_0)
			set dammi_0 = null
			set ef_0 = null
			set lopa_0 = lopa_0 + 1
		endloop
		call GroupClear(gdamage_0)
		call DestroyGroup(gdamage_0)
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set caster_0 = null
	set Picked_0 = null
	set target_0 = null
	set p_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set gdamage_0 = null
	set dammi_0 = null
endfunction

function Trig_Cold_Punishment_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local unit target = GetSpellTargetUnit()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local real xt = GetUnitX(target_0)
	local real yt = GetUnitY(target_0)
	local real angle = bj_RADTODEG_1 * Atan2(yt_0 - GetUnitY(caster_0), xt_0 - GetUnitX(caster_0))
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local integer wait = 500
	local real damage = 300.
	local integer lopa = 1
	local unit dammi
	local effect ef
	local player p = GetOwningPlayer(caster_0)
	local real xnew = x_0 + 200. * Cos(angle_0 * bj_DEGTORAD_1)
	local real ynew = y_0 + 200. * Sin(angle_0 * bj_DEGTORAD_1)
	local group gdamage = CreateGroup()
	loop
		exitwhen lopa_0 > 5
		set dammi_0 = CreateUnit(p_0, 'h00U', xnew_0 + 75. * Cos((lopa_0 * 72) * bj_DEGTORAD_1), ynew_0 + 75. * Sin((lopa_0 * 72) * bj_DEGTORAD_1), angle_0)
		call UnitAddAbility(dammi_0, 'Amrf')
		call UnitRemoveAbility(dammi_0, 'Amrf')
		call SetUnitFlyHeight(dammi_0, 100., .0)
		set ef_0 = AddSpecialEffectTarget("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl", dammi_0, "origin")
		call SaveUnitHandle(udg_hash_1, h_0, 9 + lopa_0, dammi_0)
		call SaveEffectHandle(udg_hash_1, h_0, $E + lopa_0, ef_0)
		set dammi_0 = null
		set ef_0 = null
		set lopa_0 = lopa_0 + 1
	endloop
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveUnitHandle(udg_hash_1, h_0, 2, target_0)
	call SaveInteger(udg_hash_1, h_0, 3, wait_0)
	call SaveReal(udg_hash_1, h_0, 4, damage_0)
	call SaveReal(udg_hash_1, h_0, 5, xnew_0)
	call SaveReal(udg_hash_1, h_0, 6, ynew_0)
	call SaveGroupHandle(udg_hash_1, h_0, 7, gdamage_0)
	call TimerStart(t_0, .03, true, function Trig_Cold_Punishment_Periodic_Actions)
	set caster_0 = null
	set target_0 = null
	set t_0 = null
	set p_0 = null
	set gdamage_0 = null
endfunction

function Trig_Cold_Punishment_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A04B'
endfunction

function InitTrig_Cold_Punishment takes nothing returns nothing
	local integer index = 0
	set gg_trg_Cold_Punishment_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Cold_Punishment_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Cold_Punishment_1, Condition(function Trig_Cold_Punishment_Conditions))
	call TriggerAddAction(gg_trg_Cold_Punishment_1, function Trig_Cold_Punishment_Actions)
endfunction

function Trig_Ice_Restoration_Periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, $D)
	local integer wait = LoadInteger(udg_hash_1, h_0, $E)
	local real xprestore = LoadReal(udg_hash_1, h_0, $F)
	local texttag txtxp = LoadTextTagHandle(udg_hash_1, h_0, 16)
	local texttag txt
	local texttag txttime = LoadTextTagHandle(udg_hash_1, h_0, 17)
	local integer lop = 0
	local unit dammi
	local lightning l
	local integer schetchik = 0
	local effect ef
	local real angle
	local unit Picked
	local unit dammi2
	local group gdamage
	local real xt
	local real yt
	local player p = GetOwningPlayer(caster_0)
	set wait_0 = wait_0 - 1
	call SaveInteger(udg_hash_1, h_0, $E, wait_0)
	call SetTextTagText(txttime_0, "|cFFAFE6FF " + I2S(R2I(wait_0 / 5)) + "|r", .065)
	loop
		exitwhen lop_0 > 3
		set lop_0 = lop_0 + 1
		set dammi_0 = LoadUnitHandle(udg_hash_1, h_0, lop_0)
		if GetUnitState(dammi_0, UNIT_STATE_LIFE_1) > .405 and wait_0 > 0 then
			set schetchik_0 = schetchik_0 + 1
		else
			if dammi_0 != null then
				set xt_0 = GetUnitX(dammi_0)
				set yt_0 = GetUnitY(dammi_0)
				set dammi2_0 = CreateUnit(p_0, 'h00U', xt_0, yt_0, .0)
				call UnitApplyTimedLife(dammi2_0, 'BTLF', 2.)
				call SetUnitScale(dammi2_0, 2., 2., 2.)
				call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Shiva'sWrath.mdl", dammi2_0, "origin"))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl", dammi2_0, "origin"))
				set dammi2_0 = null
				set gdamage_0 = CreateGroup()
				call GroupEnumUnitsInRange(gdamage_0, GetUnitX(dammi_0), GetUnitY(dammi_0), 250., null)
				loop
					set Picked_0 = FirstOfGroup(gdamage_0)
					exitwhen Picked_0 == null
					if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 and IsUnitEnemy(Picked_0, p_0) and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
						call UnitDamageTarget(caster_0, Picked_0, 100., false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
						set dammi2_0 = CreateUnit(p_0, 'h00U', GetUnitX(Picked_0), GetUnitY(Picked_0), .0)
						call UnitApplyTimedLife(dammi2_0, 'BTLF', 2.)
						call UnitAddAbility(dammi2_0, 'A039')
						call SetUnitAbilityLevel(dammi2_0, 'A039', 2)
						call IssueTargetOrderById(dammi2_0, $D00CB, Picked_0)
						set dammi2_0 = null
						call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl", Picked_0, "origin"))
						call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIob\\AIobSpecialArt.mdl", Picked_0, "origin"))
						call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratFrostMissile\\ZigguratFrostMissile.mdl", Picked_0, "chest"))
					endif
					call GroupRemoveUnit(gdamage_0, Picked_0)
				endloop
				set Picked_0 = null
				call GroupClear(gdamage_0)
				call DestroyGroup(gdamage_0)
				set gdamage_0 = null
				call RemoveUnit(dammi_0)
				set l_0 = LoadLightningHandle(udg_hash_1, GetHandleId(dammi_0), 1)
				call DestroyLightning(l_0)
				call FlushChildHashtable(udg_hash_1, GetHandleId(dammi_0))
				set l_0 = null
			endif
		endif
		set dammi_0 = null
	endloop
	if schetchik_0 <= 0 or wait_0 <= 0 then
		if wait_0 <= 0 then
			call SetUnitState(caster_0, UNIT_STATE_LIFE_1, GetUnitState(caster_0, UNIT_STATE_LIFE_1) + $3A98)
		endif
		set xprestore_0 = xprestore_0 + $3A98
		set txt_0 = CreateTextTag()
		call SetTextTagText(txt_0, "|cFFAFE6FF +" + I2S(R2I(xprestore_0)) + "!|r", .045)
		set xt_0 = GetUnitX(caster_0) + 'd' * Cos(180. * bj_DEGTORAD_1)
		set yt_0 = GetUnitY(caster_0) + 'd' * Sin(180. * bj_DEGTORAD_1)
		call SetTextTagPos(txt_0, xt_0 + $96 * Cos(90. * bj_DEGTORAD_1), yt_0 + $96 * Sin(90. * bj_DEGTORAD_1), .0)
		set angle_0 = GetRandomReal(45., 135.)
		call SetTextTagVelocity(txt_0, .0101875 * Cos(angle_0 * bj_DEGTORAD_1), .0301875 * Sin(angle_0 * bj_DEGTORAD_1))
		call SetTextTagPermanent(txt_0, false)
		call SetTextTagColor(txt_0, $FF, $FF, $FF, $C8)
		call SetTextTagLifespan(txt_0, 4.)
		call SetTextTagFadepoint(txt_0, 2.)
		set txt_0 = null
		call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Shiva'sWrath.mdl", caster_0, "origin"))
		call DestroyTextTag(txtxp_0)
		call DestroyTextTag(txttime_0)
		call UnitRemoveAbility(caster_0, 'Avul')
		call PauseUnit(caster_0, false)
		call SetUnitAnimation(caster_0, "stand")
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 18)
		call DestroyEffect(ef_0)
		set ef_0 = null
		call DestroyTimer(t_0)
		call FlushChildHashtable(udg_hash_1, h_0)
		call SaveBoolean(udg_hash_1, GetHandleId(caster_0), $A, false)
	else
		set xprestore_0 = xprestore_0 + schetchik_0 * 50
		call SetTextTagText(txtxp_0, "|cFFAFE6FF +" + I2S(R2I(xprestore_0)) + "|r", .045)
		call SaveReal(udg_hash_1, h_0, $F, xprestore_0)
		call SetUnitState(caster_0, UNIT_STATE_LIFE_1, GetUnitState(caster_0, UNIT_STATE_LIFE_1) + schetchik_0 * 50)
	endif
	set t_0 = null
	set caster_0 = null
	set txtxp_0 = null
	set txttime_0 = null
	set p_0 = null
endfunction

function Trig_Ice_Restoration_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local real angle = 45.
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local integer wait = '}'
	local integer lop = 0
	local unit dammi
	local effect ef
	local player p = GetOwningPlayer(caster_0)
	local real xc = GetRectCenterX(gg_rct_6_1)
	local real yc = GetRectCenterY(gg_rct_6_1)
	local lightning l
	local real xprestore = .0
	local texttag txtxp = CreateTextTag()
	local texttag txttime = CreateTextTag()
	local real xnew
	local real ynew
	local unit dammi2
	call SetTextTagText(txtxp_0, "|cFFAFE6FF +" + I2S(R2I(.0)) + "|r", .045)
	set xnew_0 = x_0 + 'd' * Cos(180. * bj_DEGTORAD_1)
	set ynew_0 = y_0 + 'd' * Sin(180. * bj_DEGTORAD_1)
	call SetTextTagPos(txtxp_0, xnew_0, ynew_0, .0)
	call SetTextTagPos(txtxp_0, xnew_0 + $96 * Cos(90. * bj_DEGTORAD_1), ynew_0 + $96 * Sin(90. * bj_DEGTORAD_1), .0)
	call SetTextTagPermanent(txtxp_0, false)
	call SetTextTagColor(txtxp_0, $FF, $FF, $FF, $C8)
	call SetTextTagText(txttime_0, "|cFFAFE6FF " + I2S(R2I(wait_0 / 25)) + "|r", .065)
	set xnew_0 = x_0 + 75 * Cos(180. * bj_DEGTORAD_1)
	set ynew_0 = y_0 + 75 * Sin(180. * bj_DEGTORAD_1)
	call SetTextTagPos(txttime_0, xnew_0, ynew_0, .0)
	call SetTextTagPos(txttime_0, xnew_0 + 50 * Cos(90. * bj_DEGTORAD_1), ynew_0 + 50 * Sin(90. * bj_DEGTORAD_1), .0)
	call SetTextTagPermanent(txttime_0, false)
	call SetTextTagColor(txttime_0, $FF, $FF, $FF, $C8)
	call UnitAddAbility(caster_0, 'Avul')
	set ef_0 = AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostArmor\\FrostArmorTarget.mdl", caster_0, "chest")
	call SaveEffectHandle(udg_hash_1, h_0, 18, ef_0)
	set ef_0 = null
	call PauseUnit(caster_0, true)
	call SetUnitAnimation(caster_0, "Stand Channel")
	call SetUnitFacing(caster_0, 270.)
	loop
		exitwhen lop_0 > 3
		set lop_0 = lop_0 + 1
		set dammi_0 = CreateUnit(p_0, 'n007', xc_0 + $41A * Cos(angle_0 * bj_DEGTORAD_1), yc_0 + $41A * Sin(angle_0 * bj_DEGTORAD_1), angle_0 + $87)
		set dammi2_0 = CreateUnit(p_0, 'h00U', GetUnitX(dammi_0), GetUnitY(dammi_0), .0)
		call UnitApplyTimedLife(dammi2_0, 'BTLF', 2.)
		call SetUnitScale(dammi2_0, 2., 2., 2.)
		call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Shiva'sWrath.mdl", dammi2_0, "origin"))
		call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl", dammi2_0, "origin"))
		set dammi2_0 = null
		call SetUnitAnimation(dammi_0, "Stand Work")
		call SaveUnitHandle(udg_hash_1, h_0, lop_0, dammi_0)
		set ef_0 = AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratFrostMissile\\ZigguratFrostMissile.mdl", dammi_0, "overhead")
		set l_0 = AddLightningEx("DRAM", true, x_0, y_0, 100., GetUnitX(dammi_0), GetUnitY(dammi_0), 260.)
		call SaveEffectHandle(udg_hash_1, h_0, lop_0 + 4, ef_0)
		call SaveLightningHandle(udg_hash_1, GetHandleId(dammi_0), 1, l_0)
		set angle_0 = angle_0 + 90.
		set dammi_0 = null
		set ef_0 = null
		set l_0 = null
	endloop
	call SaveUnitHandle(udg_hash_1, h_0, $D, caster_0)
	call SaveInteger(udg_hash_1, h_0, $E, wait_0)
	call SaveReal(udg_hash_1, h_0, $F, xprestore_0)
	call SaveTextTagHandle(udg_hash_1, h_0, 16, txtxp_0)
	call SaveTextTagHandle(udg_hash_1, h_0, 17, txttime_0)
	call TimerStart(t_0, .2, true, function Trig_Ice_Restoration_Periodic_Actions)
	set t_0 = null
	set caster_0 = null
	set p_0 = null
	set txtxp_0 = null
	set txttime_0 = null
endfunction

function Trig_Ice_Restoration_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A04D'
endfunction

function InitTrig_Ice_Restoration takes nothing returns nothing
	local integer index = 0
	set gg_trg_Ice_Restoration_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Ice_Restoration_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Ice_Restoration_1, Condition(function Trig_Ice_Restoration_Conditions))
	call TriggerAddAction(gg_trg_Ice_Restoration_1, function Trig_Ice_Restoration_Actions)
endfunction

function Trig_BossStart_onbase_Actions takes nothing returns nothing
	local timer tonbase = GetExpiredTimer()
	local integer honbase = GetHandleId(tonbase_0)
	local integer ishod = LoadInteger(udg_hash_1, honbase_0, 3)
	local unit boss = LoadUnitHandle(udg_hash_1, honbase_0, 1)
	local group gruppa = CreateGroup()
	local unit Picked
	local real xc = GetRectCenterX(gg_rct_Respawn_Heroes_1)
	local real yc = GetRectCenterY(gg_rct_Respawn_Heroes_1)
	local fogmodifier fm = LoadFogModifierHandle(udg_hash_1, honbase_0, 2)
	local texttag txt
	local real vel = .0221875
	local real angle = 45. + GetRandomReal(.0, 90.)
	local real xvel = vel_0 * Cos(angle_0 * bj_DEGTORAD_1)
	local real yvel = vel_0 * Sin(angle_0 * bj_DEGTORAD_1)
	local integer dead = 0
	local real perekluchatel = .1
	call ShowAndFlushAllPlayerDamage(false)
	call GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev_1, gruppa_0)
	call CinematicModeExBJ(false, bj_FORCE_ALL_PLAYERS_1, bj_CINEMODE_INTERFACEFADE_1)
	call CinematicFadeBJ(0, 5., "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0)
	loop
		set Picked_0 = FirstOfGroup(gruppa_0)
		exitwhen Picked_0 == null
		if perekluchatel_0 >= 0 then
			set perekluchatel_0 = -perekluchatel_0
			set perekluchatel_0 = perekluchatel_0 - 50.
		else
			set perekluchatel_0 = -perekluchatel_0
			set perekluchatel_0 = perekluchatel_0 + 50.
		endif
		set xc_0 = GetRectCenterX(gg_rct_Respawn_Heroes_1) + perekluchatel_0
		set yc_0 = GetRectCenterY(gg_rct_Respawn_Heroes_1)
		call ReviveHero(Picked_0, xc_0, yc_0, true)
		call SetUnitPosition(Picked_0, xc_0, yc_0)
		call SetUnitFacing(Picked_0, 270.)
		call SetUnitState(Picked_0, UNIT_STATE_LIFE_1, $540BE3FF)
		call SetUnitState(Picked_0, UNIT_STATE_MANA_1, $540BE3FF)
		if ishod_0 == 0 then
			set txt_0 = CreateTextTag()
			set dead_0 = LoadInteger(udg_hash_1, GetHandleId(Picked_0), 1)
			if dead_0 == 1 then
				call SetTextTagText(txt_0, "|cFFFFFF00+500|r", .035)
				call AddHeroXP(Picked_0, $3E8, true)
				call SetPlayerState(GetOwningPlayer(Picked_0), PLAYER_STATE_RESOURCE_GOLD_1, (GetPlayerState(GetOwningPlayer(Picked_0), PLAYER_STATE_RESOURCE_GOLD_1) + 500))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl", Picked_0, "overhead"))
				if GetLocalPlayer() == GetOwningPlayer(Picked_0) then
					call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Вы получили " + udg_ColorString_1[23] + I2S(500) + " золота|r!!!")
				endif
			else
				call SetTextTagText(txt_0, "|cFFFFFF00+1200|r", .045)
				call AddHeroXP(Picked_0, $BB8, true)
				call SetPlayerState(GetOwningPlayer(Picked_0), PLAYER_STATE_RESOURCE_GOLD_1, (GetPlayerState(GetOwningPlayer(Picked_0), PLAYER_STATE_RESOURCE_GOLD_1) + $4B0))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl", Picked_0, "overhead"))
				if GetLocalPlayer() == GetOwningPlayer(Picked_0) then
					call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Вы получили " + udg_ColorString_1[23] + I2S($4B0) + " золота|r!!!")
				endif
			endif
			call SetTextTagPos(txt_0, GetUnitX(Picked_0), GetUnitY(Picked_0), .0)
			call SetTextTagColor(txt_0, 0, 0, 0, 50)
			call SetTextTagVelocity(txt_0, xvel_0, yvel_0)
			call SetTextTagPermanent(txt_0, false)
			call SetTextTagLifespan(txt_0, 4.)
			call SetTextTagFadepoint(txt_0, .0)
			set txt_0 = null
		endif
		if (GetLocalPlayer() == GetOwningPlayer(Picked_0)) then
			call ResetToGameCamera(.0)
			if ishod_0 == 1 then
				call DisplayTextToPlayer(GetOwningPlayer(Picked_0), 0, 0, "|cFFFF0000ВЫ ПРОИГРАЛИ БИТВУ С БОССОМ!!!|r")
			else
				call DisplayTextToPlayer(GetOwningPlayer(Picked_0), 0, 0, "|cFFFFFF00ВЫ ПОБЕДИЛИ В БИТВЕ С БОССОМ!!!|r")
			endif
			call ResetToGameCamera(.0)
			call PanCameraToTimed(xc_0, yc_0, .0)
			call SelectUnit(Picked_0, true)
		endif
		call GroupRemoveUnit(gruppa_0, Picked_0)
	endloop
	call EnableTrigger(gg_trg_Hero_Dead_1)
	call DisableTrigger(gg_trg_FlameSpells_1)
	call DisableTrigger(gg_trg_Upgrade_Summons_1)
	set Picked_0 = null
	call GroupEnumUnitsInRect(gruppa_0, gg_rct_6_1, null)
	loop
		set Picked_0 = FirstOfGroup(gruppa_0)
		exitwhen Picked_0 == null
		if GetUnitTypeId(Picked_0) != 'h00C' and GetUnitTypeId(Picked_0) != 'h00B' and GetUnitTypeId(Picked_0) != 'h00U' then
			call RemoveUnit(Picked_0)
		endif
		call GroupRemoveUnit(gruppa_0, Picked_0)
	endloop
	call StartTimerBJ(udg_Timer_Nomera_Volni_1, false, 75.)
	call CreateTimerDialogBJ(udg_Timer_Nomera_Volni_1, ("Волна № |cFFFF0000" + (I2S(udg_Nomer_samoi_volni_1) + "|r")))
	set udg_TimerDialog_Nomera_Volni_1 = bj_lastCreatedTimerDialog_1
	call TimerDialogSetTimeColorBJ(udg_TimerDialog_Nomera_Volni_1, 'd', 90., 30., 20.)
	set udg_Is_Fast_Wave_Start_On_Off_1 = true
	set Picked_0 = null
	call RemoveWeatherEffect(udg_BossFightWeather_1)
	set udg_BossFightWeather_1 = null
	call FlushChildHashtable(udg_hash_1, GetHandleId(boss_0))
	call RemoveUnit(boss_0)
	set boss_0 = null
	call DestroyFogModifier(fm_0)
	set fm_0 = null
	call DestroyGroup(gruppa_0)
	set gruppa_0 = null
	call FlushChildHashtable(udg_hash_1, honbase_0)
	call DestroyTimer(tonbase_0)
	set tonbase_0 = null
endfunction

function Trig_BossStart_end_Actions takes nothing returns nothing
	local timer tend = GetExpiredTimer()
	local integer hend = GetHandleId(tend_0)
	local unit boss = LoadUnitHandle(udg_hash_1, hend_0, 1)
	local fogmodifier fm = CreateFogModifierRect(Player(0), FOG_OF_WAR_VISIBLE_1, gg_rct_6_1, true, true)
	local integer lop = 0
	local integer ishod = LoadInteger(udg_hash_1, hend_0, 2)
	local timer tonbase = CreateTimer()
	local integer honbase = GetHandleId(tonbase_0)
	local group g = CreateGroup()
	local unit Picked
	call SaveUnitHandle(udg_hash_1, honbase_0, 1, boss_0)
	call SaveFogModifierHandle(udg_hash_1, honbase_0, 2, fm_0)
	call SaveInteger(udg_hash_1, honbase_0, 3, ishod_0)
	call GroupEnumUnitsInRect(g_0, gg_rct_6_1, null)
	loop
		exitwhen lop_0 > 9
		if (GetLocalPlayer() == Player(lop_0)) then
			call CameraSetupApplyForceDuration(gg_cam_Camera_BossFightStart_1, true, .0)
			call SetCameraRotateMode(GetRectCenterX(gg_rct_6_1), GetRectCenterY(gg_rct_6_1), bj_DEGTORAD_1 * 360., 6.)
		endif
		set lop_0 = lop_0 + 1
	endloop
	call TimerStart(tonbase_0, 6., false, function Trig_BossStart_onbase_Actions)
	if ishod_0 == 1 then
		call IssuePointOrderById(boss_0, $D0012, GetRectCenterX(gg_rct_6_1), GetRectCenterY(gg_rct_6_1))
	else
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if GetOwningPlayer(Picked_0) == Player($B) then
				call KillUnit(Picked_0)
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		set Picked_0 = null
	endif
	call CinematicModeExBJ(true, bj_FORCE_ALL_PLAYERS_1, bj_CINEMODE_INTERFACEFADE_1)
	call CinematicFadeBJ(1, 6., "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1)
	call FlushChildHashtable(udg_hash_1, hend_0)
	call DestroyTimer(tend_0)
	set tend_0 = null
	set boss_0 = null
	set fm_0 = null
	set tonbase_0 = null
	call DestroyGroup(g_0)
	set g_0 = null
endfunction

function Trig_BossStart_altars_periodic_Actions takes nothing returns nothing
	local timer taltarsper = GetExpiredTimer()
	local integer haltarsper = GetHandleId(taltarsper_0)
	local real x = GetRectCenterX(gg_rct_6_1) + GetRandomReal(-1000., 1000.)
	local real y = GetRectCenterY(gg_rct_6_1) + GetRandomReal(-800., 800.)
	local integer number = LoadInteger(udg_hash_1, haltarsper_0, 5)
	local integer end = LoadInteger(udg_hash_1, haltarsper_0, 6)
	local unit altar = LoadUnitHandle(udg_hash_1, haltarsper_0, number_0)
	local integer lop = 0
	local effect ef
	set number_0 = number_0 + 1
	if number_0 >= 5 then
		set number_0 = 1
	endif
	call SaveInteger(udg_hash_1, haltarsper_0, 5, number_0)
	if GetUnitState(altar_0, UNIT_STATE_LIFE_1) > .405 then
		call IssuePointOrderById(altar_0, $D0208, x_0, y_0)
		call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl", GetUnitX(altar_0), GetUnitY(altar_0)))
		call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl", GetUnitX(altar_0), GetUnitY(altar_0)))
	else
		set ef_0 = LoadEffectHandle(udg_hash_1, GetHandleId(altar_0), 1)
		call DestroyEffect(ef_0)
		call FlushChildHashtable(udg_hash_1, GetHandleId(altar_0))
		set ef_0 = null
	endif
	set altar_0 = null
	set end_0 = end_0 - 1
	call SaveInteger(udg_hash_1, haltarsper_0, 6, end_0)
	if end_0 <= 0 then
		loop
			set lop_0 = lop_0 + 1
			exitwhen lop_0 > 4
			set altar_0 = LoadUnitHandle(udg_hash_1, haltarsper_0, lop_0)
			call KillUnit(altar_0)
			set altar_0 = null
			call FlushChildHashtable(udg_hash_1, GetHandleId(altar_0))
		endloop
		call DestroyTimer(taltarsper_0)
		call FlushChildHashtable(udg_hash_1, haltarsper_0)
	endif
	set taltarsper_0 = null
endfunction

function Trig_BossStart_altars_Actions takes nothing returns nothing
	local timer taltars = GetExpiredTimer()
	local real xc = GetRectCenterX(gg_rct_6_1)
	local real yc = GetRectCenterY(gg_rct_6_1)
	local unit Picked
	local integer number = 0
	local integer end = 40
	local integer lop = 0
	local real angle = 45.
	local timer taltarsper = CreateTimer()
	local integer haltarsper = GetHandleId(taltarsper_0)
	local effect ef
	loop
		exitwhen lop_0 > 3
		set lop_0 = lop_0 + 1
		set Picked_0 = CreateUnit(Player($B), 'n00Q', xc_0 + $41A * Cos(angle_0 * bj_DEGTORAD_1), yc_0 + $41A * Sin(angle_0 * bj_DEGTORAD_1), angle_0 + $87)
		call UnitApplyTimedLife(Picked_0, 'BTLF', 60.01)
		call SaveUnitHandle(udg_hash_1, haltarsper_0, lop_0, Picked_0)
		set ef_0 = AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl", Picked_0, "origin")
		call SaveEffectHandle(udg_hash_1, GetHandleId(Picked_0), 1, ef_0)
		set angle_0 = angle_0 + 90.
		set Picked_0 = null
		set ef_0 = null
	endloop
	call SaveInteger(udg_hash_1, haltarsper_0, 5, number_0)
	call SaveInteger(udg_hash_1, haltarsper_0, 6, end_0)
	call TimerStart(taltarsper_0, 1.5, true, function Trig_BossStart_altars_periodic_Actions)
	set taltarsper_0 = null
	set taltars_0 = null
endfunction

function Trig_BossStart_hprestore_Actions takes nothing returns nothing
	local timer thprestore = GetExpiredTimer()
	local integer hhprestore = GetHandleId(thprestore_0)
	local unit boss = LoadUnitHandle(udg_hash_1, hhprestore_0, 1)
	local integer lop = 0
	local unit u
	local lightning l
	local integer schetchik = 0
	local integer end = LoadInteger(udg_hash_1, hhprestore_0, $A)
	local texttag txt
	local integer endtxt = end_0 - (end_0 / 5) * 5
	local boolean zaniat = LoadBoolean(udg_hash_1, GetHandleId(boss_0), $A)
	local effect ef
	local real angle
	local real hpforsolo = (GetUnitState(boss_0, UNIT_STATE_MAX_LIFE_1) / $BB8)
	local integer hpforall = R2I((GetUnitState(boss_0, UNIT_STATE_MAX_LIFE_1) / $A))
	if (endtxt_0 < 0) then
		set endtxt_0 = endtxt_0 + 5
	endif
	set end_0 = end_0 + 1
	call SaveInteger(udg_hash_1, hhprestore_0, $A, end_0)
	if endtxt_0 == 0 then
		set txt_0 = CreateTextTag()
		set angle_0 = GetRandomReal(.0, 360.)
		call SetTextTagText(txt_0, "|cFFFF0000" + I2S(20 - (end_0 / 5)) + "|r", .055)
		call SetTextTagPos(txt_0, GetUnitX(boss_0), GetUnitY(boss_0), .0)
		call SetTextTagPermanent(txt_0, false)
		call SetTextTagColor(txt_0, 0, 0, 0, $C8)
		call SetTextTagVelocity(txt_0, .0501875 * Cos(angle_0 * bj_DEGTORAD_1), .0501875 * Cos(angle_0 * bj_DEGTORAD_1))
		call SetTextTagLifespan(txt_0, 3.5)
		call SetTextTagFadepoint(txt_0, .0)
		set txt_0 = null
	endif
	loop
		exitwhen lop_0 > 4
		set lop_0 = lop_0 + 1
		set u_0[lop_0] = LoadUnitHandle(udg_hash_1, hhprestore_0, 1 + lop_0)
		set l_0 = LoadLightningHandle(udg_hash_1, GetHandleId(u_0[lop_0]), 1 + lop_0)
		if GetUnitState(u_0[lop_0], UNIT_STATE_LIFE_1) > .405 and end_0 < 'd' then
			set schetchik_0 = schetchik_0 + 1
			call MoveLightningEx(l_0, true, GetUnitX(boss_0), GetUnitY(boss_0), 100., GetUnitX(u_0[lop_0]), GetUnitY(u_0[lop_0]), 5.)
			call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomTarget.mdl", GetUnitX(u_0[lop_0]), GetUnitY(u_0[lop_0])))
		else
			if end_0 >= 'd' then
				call KillUnit(u_0[lop_0])
			endif
			if GetUnitState(u_0[lop_0], UNIT_STATE_LIFE_1) < .405 then
			endif
			call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl", GetUnitX(u_0[lop_0]), GetUnitY(u_0[lop_0])))
			call DestroyLightning(l_0)
			call FlushChildHashtable(udg_hash_1, GetHandleId(u_0[lop_0]))
			set u_0[lop_0] = null
			set l_0 = null
		endif
	endloop
	if schetchik_0 <= 0 or end_0 >= 'd' then
		if end_0 >= 'd' then
			call SetUnitState(boss_0, UNIT_STATE_LIFE_1, GetUnitState(boss_0, UNIT_STATE_LIFE_1) + hpforall_0)
			set txt_0 = CreateTextTag()
			call SetTextTagText(txt_0, "|cFFFF0000 +" + I2S(hpforall_0) + "!|r", .055)
			call SetTextTagPos(txt_0, GetUnitX(boss_0), GetUnitY(boss_0), .0)
			call SetTextTagPermanent(txt_0, false)
			call SetTextTagColor(txt_0, 0, 0, 0, $C8)
			call SetTextTagVelocity(txt_0, .0101875 * Cos(GetRandomReal(.0, 360.) * bj_DEGTORAD_1), .0301875 * Sin(GetRandomReal(.0, 360.) * bj_DEGTORAD_1))
			call SetTextTagLifespan(txt_0, 3.5)
			call SetTextTagFadepoint(txt_0, .0)
			set txt_0 = null
		endif
		call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl", GetUnitX(boss_0), GetUnitY(boss_0)))
		call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl", GetUnitX(boss_0), GetUnitY(boss_0)))
		call UnitRemoveAbility(boss_0, 'Avul')
		set ef_0 = LoadEffectHandle(udg_hash_1, GetHandleId(boss_0), $F)
		call DestroyEffect(ef_0)
		set ef_0 = null
		call DestroyTimer(thprestore_0)
		call FlushChildHashtable(udg_hash_1, hhprestore_0)
		call PauseUnit(boss_0, false)
		call SetUnitAnimation(boss_0, "stand")
		set zaniat_0 = false
		call SaveBoolean(udg_hash_1, GetHandleId(boss_0), $A, zaniat_0)
	else
		call SetUnitState(boss_0, UNIT_STATE_LIFE_1, GetUnitState(boss_0, UNIT_STATE_LIFE_1) + (schetchik_0 * hpforsolo_0))
	endif
	set thprestore_0 = null
	set boss_0 = null
endfunction

function Trig_BossStart_ActionWithWait_Actions takes nothing returns nothing
	local timer twact = GetExpiredTimer()
	local integer hwact = GetHandleId(twact_0)
	local unit boss = LoadUnitHandle(udg_hash_1, hwact_0, 1)
	local effect ef = LoadEffectHandle(udg_hash_1, hwact_0, 2)
	local integer lop = 0
	local real xboss = GetUnitX(boss_0)
	local real yboss = GetUnitY(boss_0)
	local real angle = 0
	local unit u
	local timer thprestore = CreateTimer()
	local integer hhprestore = GetHandleId(thprestore_0)
	local integer end = 0
	call TimerStart(thprestore_0, .2, true, function Trig_BossStart_hprestore_Actions)
	call PauseUnit(boss_0, true)
	call SetUnitPathing(boss_0, true)
	call SetUnitAnimationByIndex(boss_0, 7)
	call SaveUnitHandle(udg_hash_1, hhprestore_0, 1, boss_0)
	call SaveInteger(udg_hash_1, hhprestore_0, $A, end_0)
	loop
		exitwhen lop_0 > 4
		set lop_0 = lop_0 + 1
		set u_0[lop_0] = CreateUnit(Player($B), 'n00L', xboss_0 + 500 * Cos(angle_0 * bj_DEGTORAD_1), yboss_0 + 500 * Sin(angle_0 * bj_DEGTORAD_1), angle_0 + $B4)
		call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl", xboss_0 + 500 * Cos(angle_0 * bj_DEGTORAD_1), yboss_0 + 500 * Sin(angle_0 * bj_DEGTORAD_1)))
		call UnitApplyTimedLife(u_0[lop_0], 'BTLF', 20.)
		call UnitAddAbility(u_0[lop_0], 'Abun')
		call UnitAddType(u_0[lop_0], UNIT_TYPE_PEON_1)
		call PauseUnit(u_0[lop_0], true)
		call SetUnitAnimationByIndex(u_0[lop_0], 2)
		call SetUnitMoveSpeed(u_0[lop_0], 0)
		set bj_lastCreatedLightning_1 = AddLightningEx("AFOD", true, xboss_0, yboss_0, 100., GetUnitX(u_0[lop_0]), GetUnitY(u_0[lop_0]), 5.)
		call SaveUnitHandle(udg_hash_1, hhprestore_0, 1 + lop_0, u_0[lop_0])
		call SaveLightningHandle(udg_hash_1, GetHandleId(u_0[lop_0]), 1 + lop_0, bj_lastCreatedLightning_1)
		set angle_0 = angle_0 + 72
		set u_0[lop_0] = null
	endloop
	call DestroyTimer(twact_0)
	set twact_0 = null
	call FlushChildHashtable(udg_hash_1, hwact_0)
	set boss_0 = null
	call DestroyEffect(ef_0)
	set ef_0 = null
	set thprestore_0 = null
endfunction

function Trig_BossStart_vulcano_Actions takes nothing returns nothing
	local timer tvul = GetExpiredTimer()
	local unit boss = LoadUnitHandle(udg_hash_1, GetHandleId(tvul_0), 1)
	local boolean zaniat = LoadBoolean(udg_hash_1, GetHandleId(boss_0), $A)
	local effect ef = LoadEffectHandle(udg_hash_1, GetHandleId(boss_0), $F)
	set zaniat_0 = false
	call SaveBoolean(udg_hash_1, GetHandleId(boss_0), $A, zaniat_0)
	call DestroyEffect(ef_0)
	set ef_0 = null
	call UnitRemoveAbility(boss_0, 'Avul')
	call FlushChildHashtable(udg_hash_1, GetHandleId(tvul_0))
endfunction

function Trig_BossStart_golems_Actions takes nothing returns nothing
	local timer tgol = GetExpiredTimer()
	local unit boss = LoadUnitHandle(udg_hash_1, GetHandleId(tgol_0), 1)
	local boolean zaniat = LoadBoolean(udg_hash_1, GetHandleId(boss_0), $A)
	set zaniat_0 = false
	call SaveBoolean(udg_hash_1, GetHandleId(boss_0), $A, zaniat_0)
	call FlushChildHashtable(udg_hash_1, GetHandleId(tgol_0))
endfunction

function Trig_BossStart_hpcheck_Actions takes nothing returns nothing
	local real xc = GetRectCenterX(gg_rct_6_1)
	local real yc = GetRectCenterY(gg_rct_6_1)
	local timer thpcheck = GetExpiredTimer()
	local integer hhpcheck = GetHandleId(thpcheck_0)
	local unit boss = LoadUnitHandle(udg_hash_1, hhpcheck_0, 1)
	local integer stage = LoadInteger(udg_hash_1, hhpcheck_0, 2)
	local integer dammicheck = LoadInteger(udg_hash_1, hhpcheck_0, 4)
	local real dx = GetUnitX(boss_0) - xc_0
	local real dy = GetUnitY(boss_0) - yc_0
	local timer twact = CreateTimer()
	local integer hwact = GetHandleId(twact_0)
	local timer taltars
	local boolean zaniat = LoadBoolean(udg_hash_1, GetHandleId(boss_0), $A)
	local integer cdvul = LoadInteger(udg_hash_1, GetHandleId(boss_0), $B)
	local integer cdgol = LoadInteger(udg_hash_1, GetHandleId(boss_0), $C)
	local group grp = CreateGroup()
	local timer tvul
	local timer tgol
	local group heroes = CreateGroup()
	local group heroes2
	local unit targethero
	local group heroes2dummi
	local unit Picked
	local integer kolvo = 0
	local integer random = GetRandomInt(1, 4)
	local timer tend
	local integer hend
	local integer ishod = 0
	local effect ef
	local player p = Player($C)
	local integer itemrand = R2I($F + 5 * CountPlayersInForceBJ(udg_IGRAET_1))
	local real itemx = (GetRandomReal(-1350., 100.))
	local real itemy = (GetRandomReal(1900., 3450.))
	local unit dammi
	local group geroi = CreateGroup()
	local real maxhp = GetUnitState(boss_0, UNIT_STATE_MAX_LIFE_1)
	if GetRandomInt(1, 'd') <= itemrand_0 then
		call CreatePotion(itemx_0, itemy_0, 3, 6)
	endif
	if (zaniat_0 == false and stage_0 == 0 and GetUnitState(boss_0, UNIT_STATE_LIFE_1) > (maxhp_0 * .566) and GetUnitState(boss_0, UNIT_STATE_LIFE_1) < (maxhp_0 * .733)) or (stage_0 == 1 and GetUnitState(boss_0, UNIT_STATE_LIFE_1) > (maxhp_0 * .3) and GetUnitState(boss_0, UNIT_STATE_LIFE_1) < (maxhp_0 * .466)) or (stage_0 == 2 and GetUnitState(boss_0, UNIT_STATE_LIFE_1) > (maxhp_0 * .03) and GetUnitState(boss_0, UNIT_STATE_LIFE_1) < (maxhp_0 * .2)) then
		set stage_0 = stage_0 + 1
		set zaniat_0 = true
		call SaveBoolean(udg_hash_1, GetHandleId(boss_0), $A, zaniat_0)
		call SaveInteger(udg_hash_1, hhpcheck_0, 2, stage_0)
		call SaveUnitHandle(udg_hash_1, hwact_0, 1, boss_0)
		if SquareRoot(dx_0 * dx_0 + dy_0 * dy_0) > 500 then
			call IssuePointOrderById(boss_0, $D0012, xc_0 + GetRandomReal(-250., 250.), yc_0 + GetRandomReal(-250., 250.))
			call SetUnitPathing(boss_0, false)
			call TimerStart(twact_0, 4., false, function Trig_BossStart_ActionWithWait_Actions)
		else
			call TimerStart(twact_0, .25, false, function Trig_BossStart_ActionWithWait_Actions)
		endif
		call UnitAddAbility(boss_0, 'Avul')
		set ef_0 = AddSpecialEffectTarget("Abilities\\Spells\\Other\\ImmolationRed\\ImmolationRedTarget.mdl", boss_0, "chest")
		call SaveEffectHandle(udg_hash_1, GetHandleId(boss_0), $F, ef_0)
	endif
	if cdgol_0 > 0 then
		call SaveInteger(udg_hash_1, GetHandleId(boss_0), $C, cdgol_0 - 1)
	endif
	call GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev_1, geroi_0)
	call GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev_1, grp_0)
	loop
		set Picked_0 = FirstOfGroup(grp_0)
		exitwhen Picked_0 == null
		if IsUnitType(Picked_0, UNIT_TYPE_HERO_1) and GetPlayerId(GetOwningPlayer(Picked_0)) <= 8 and Picked_0 != boss_0 then
			call GroupAddUnit(heroes_0, Picked_0)
		endif
		call GroupRemoveUnit(grp_0, Picked_0)
	endloop
	call FilterMostNearUnit(heroes_0, boss_0)
	set Picked_0 = null
	call AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodSorceress.mdl", udg_Unit_FilterMostNearUnit_1, "chest")
	set dammicheck_0 = dammicheck_0 + 1
	if dammicheck_0 == 7 or dammicheck_0 == $E or dammicheck_0 == 21 then
		set heroes2dummi_0 = CreateGroup()
		set heroes2_0 = CreateGroup()
		call GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev_1, heroes2dummi_0)
		call RandomUnitFromGroup(1, heroes2dummi_0)
		call GroupAddGroup(udg_GroupRandomUnitFromGroup_1, heroes2_0)
		set targethero_0 = FirstOfGroup(heroes2_0)
		set dammi_0 = CreateUnit(Player($B), 'h00U', GetUnitX(boss_0), GetUnitY(boss_0), .0)
		call UnitApplyTimedLife(dammi_0, 'BTLF', 2.)
		call UnitAddAbility(dammi_0, 'A0O4')
		call IssuePointOrderById(dammi_0, $D0201, GetUnitX(targethero_0), GetUnitY(targethero_0))
		call GroupClear(heroes2dummi_0)
		call DestroyGroup(heroes2dummi_0)
		set heroes2dummi_0 = null
		call GroupClear(heroes2_0)
		call DestroyGroup(heroes2_0)
		set heroes2_0 = null
		set targethero_0 = null
		set dammi_0 = null
	endif
	if dammicheck_0 == $A or dammicheck_0 == 20 then
		set dammi_0 = CreateUnit(Player($B), 'h00U', GetUnitX(boss_0), GetUnitY(boss_0), .0)
		call UnitApplyTimedLife(dammi_0, 'BTLF', 2.)
		call UnitAddAbility(dammi_0, 'A06J')
		call IssueTargetOrderById(dammi_0, $D02BC, udg_Unit_FilterMostNearUnit_1)
	endif
	if dammicheck_0 == 21 then
		set dammicheck_0 = 0
	endif
	call SaveInteger(udg_hash_1, hhpcheck_0, 4, dammicheck_0)
	if zaniat_0 == false and GetRandomInt(2, 4) <= 2 then
		if random_0 == 1 then
			if udg_Unit_FilterMostNearUnit_1 != null then
				call IssuePointOrderById(boss_0, $D009D, GetUnitX(udg_Unit_FilterMostNearUnit_1), GetUnitY(udg_Unit_FilterMostNearUnit_1))
			endif
		endif
		if random_0 == 2 and SquareRoot(dx_0 * dx_0 + dy_0 * dy_0) < 700 and cdgol_0 <= 0 then
			call IssueImmediateOrderById(boss_0, $D0080)
			set zaniat_0 = true
			set tgol_0 = CreateTimer()
			call SaveBoolean(udg_hash_1, GetHandleId(boss_0), $A, zaniat_0)
			call SaveInteger(udg_hash_1, GetHandleId(boss_0), $C, 20)
			call SaveUnitHandle(udg_hash_1, GetHandleId(tgol_0), 1, boss_0)
			call TimerStart(tgol_0, 4., false, function Trig_BossStart_golems_Actions)
			set tgol_0 = null
		endif
		if random_0 == 4 and SquareRoot(dx_0 * dx_0 + dy_0 * dy_0) < 700 then
			call IssueImmediateOrderById(boss_0, $D00B1)
		endif
	endif
	if SquareRoot(dx_0 * dx_0 + dy_0 * dy_0) > $4B0 and zaniat_0 == false then
		call SetUnitPosition(boss_0, xc_0, yc_0)
	endif
	call GroupClear(heroes_0)
	if GetUnitState(boss_0, UNIT_STATE_LIFE_1) < .405 then
		set tend_0 = CreateTimer()
		set hend_0 = GetHandleId(tend_0)
		call SaveInteger(udg_hash_1, hend_0, 2, ishod_0)
		call SaveUnitHandle(udg_hash_1, hend_0, 1, boss_0)
		call TimerStart(tend_0, 3., false, function Trig_BossStart_end_Actions)
		set taltars_0 = LoadTimerHandle(udg_hash_1, hhpcheck_0, 3)
		call FlushChildHashtable(udg_hash_1, GetHandleId(taltars_0))
		call DestroyTimer(taltars_0)
		call GroupEnumUnitsInRect(heroes_0, gg_rct_6_1, null)
		call DestroyTimer(thpcheck_0)
		set tend_0 = null
		call FlushChildHashtable(udg_hash_1, hhpcheck_0)
	endif
	call GroupClear(heroes_0)
	loop
		set Picked_0 = FirstOfGroup(geroi_0)
		exitwhen Picked_0 == null
		if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) < .405 then
			set kolvo_0 = kolvo_0 + 1
			call SaveInteger(udg_hash_1, GetHandleId(Picked_0), 1, 1)
		endif
		call GroupRemoveUnit(geroi_0, Picked_0)
	endloop
	set Picked_0 = null
	if kolvo_0 >= CountUnitsInGroup(udg_Gruppa_HeroUnitov_Geroev_1) then
		set tend_0 = CreateTimer()
		set hend_0 = GetHandleId(tend_0)
		call SaveInteger(udg_hash_1, hend_0, 2, ishod_0 + 1)
		call SaveUnitHandle(udg_hash_1, hend_0, 1, boss_0)
		set taltars_0 = LoadTimerHandle(udg_hash_1, hhpcheck_0, 3)
		call FlushChildHashtable(udg_hash_1, GetHandleId(taltars_0))
		call DestroyTimer(taltars_0)
		call TimerStart(tend_0, 3., false, function Trig_BossStart_end_Actions)
		call DestroyTimer(thpcheck_0)
		set tend_0 = null
		call FlushChildHashtable(udg_hash_1, hhpcheck_0)
	endif
	set thpcheck_0 = null
	set boss_0 = null
	set twact_0 = null
	call GroupClear(grp_0)
	call DestroyGroup(grp_0)
	set grp_0 = null
	call GroupClear(heroes_0)
	call DestroyGroup(heroes_0)
	call GroupClear(geroi_0)
	call DestroyGroup(geroi_0)
	set geroi_0 = null
	set heroes_0 = null
	set p_0 = null
	set dammi_0 = null
endfunction

function Trig_BossStart_frasa_Actions takes nothing returns nothing
	local timer tfrasa = GetExpiredTimer()
	local integer hfrasa = GetHandleId(tfrasa_0)
	local unit boss = LoadUnitHandle(udg_hash_1, hfrasa_0, 1)
	local integer random = GetRandomInt(1, 4)
	if GetUnitState(boss_0, UNIT_STATE_LIFE_1) > .405 then
		if random_0 == 1 then
			call TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS_1, boss_0, "Pyrovulcanous the Sunderer", gg_snd_HeroFirelordWarcry1_1, "|cFFFF0000Всех сожгу!!!......Один останусь!!!|r", 0, 4.77, false)
		endif
		if random_0 == 2 then
			call TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS_1, boss_0, "Pyrovulcanous the Sunderer", gg_snd_HeroFirelordYesAttack1_1, "|cFFFF0000Сожгу!!!......|r", 0, 2.13, false)
		endif
		if random_0 == 3 then
			call TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS_1, boss_0, "Pyrovulcanous the Sunderer", gg_snd_HeroFirelordYesAttack2_1, "|cFFFF0000Всё поглотит огонь!!!...|r", 0, 3.2, false)
		endif
		if random_0 == 4 then
			call TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS_1, boss_0, "Pyrovulcanous the Sunderer", gg_snd_HeroFirelordYesAttack3_1, "|cFFFF0000Испепелю!!!...|r", 0, 2.49, false)
		endif
	else
		call FlushChildHashtable(udg_hash_1, hfrasa_0)
		call DestroyTimer(tfrasa_0)
	endif
	set tfrasa_0 = null
	set boss_0 = null
endfunction

function Trig_BossStart_5sec_Actions takes nothing returns nothing
	local timer t5sec = GetExpiredTimer()
	local integer h5sec = GetHandleId(t5sec_0)
	local unit boss = LoadUnitHandle(udg_hash_1, h5sec_0, 1)
	local group gruppa = CreateGroup()
	local unit Picked
	local timer tfrasa = CreateTimer()
	local integer hfrasa = GetHandleId(tfrasa_0)
	local timer thpcheck = CreateTimer()
	local integer hhpcheck = GetHandleId(thpcheck_0)
	local integer stage = 0
	local timer taltars = CreateTimer()
	local boolean zaniat = false
	call GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev_1, gruppa_0)
	call CinematicModeExBJ(false, bj_FORCE_ALL_PLAYERS_1, bj_CINEMODE_INTERFACEFADE_1)
	loop
		set Picked_0 = FirstOfGroup(gruppa_0)
		exitwhen Picked_0 == null
		call PauseUnit(Picked_0, false)
		call IssueTargetOrderById(Picked_0, $D000F, boss_0)
		if (GetLocalPlayer() == GetOwningPlayer(Picked_0)) then
			call ClearSelection()
			call SelectUnit(Picked_0, true)
			call ResetToGameCamera(.0)
			call PanCameraToTimed(GetRectCenterX(gg_rct_6_1), GetRectCenterY(gg_rct_6_1), .0)
		endif
		call GroupRemoveUnit(gruppa_0, Picked_0)
	endloop
	call PauseUnit(boss_0, false)
	call IssuePointOrderById(boss_0, $D0012, GetRectCenterX(gg_rct_6_1), GetRectCenterY(gg_rct_6_1))
	call SaveUnitHandle(udg_hash_1, hfrasa_0, 1, boss_0)
	call TimerStart(tfrasa_0, 14., true, function Trig_BossStart_frasa_Actions)
	call SaveUnitHandle(udg_hash_1, hhpcheck_0, 1, boss_0)
	call SaveInteger(udg_hash_1, hhpcheck_0, 2, stage_0)
	call SaveTimerHandle(udg_hash_1, hhpcheck_0, 3, taltars_0)
	call SaveBoolean(udg_hash_1, GetHandleId(boss_0), $A, zaniat_0)
	call SaveInteger(udg_hash_1, GetHandleId(boss_0), $B, 0)
	call SaveInteger(udg_hash_1, GetHandleId(boss_0), $C, 0)
	call SaveInteger(udg_hash_1, hhpcheck_0, 4, 0)
	call TimerStart(thpcheck_0, 1., true, function Trig_BossStart_hpcheck_Actions)
	call TimerStart(taltars_0, 61., true, function Trig_BossStart_altars_Actions)
	call DestroyTimer(t5sec_0)
	call FlushChildHashtable(udg_hash_1, h5sec_0)
	set t5sec_0 = null
	set boss_0 = null
	set Picked_0 = null
	set tfrasa_0 = null
	set thpcheck_0 = null
	set taltars_0 = null
	call GroupClear(gruppa_0)
	call DestroyGroup(gruppa_0)
	set gruppa_0 = null
endfunction

function Trig_BossStart_3sec_Actions takes nothing returns nothing
	local timer t3sec = GetExpiredTimer()
	local integer h3sec = GetHandleId(t3sec_0)
	local timer t5sec = CreateTimer()
	local integer h5sec = GetHandleId(t5sec_0)
	local unit boss = LoadUnitHandle(udg_hash_1, h3sec_0, 1)
	call SaveUnitHandle(udg_hash_1, h5sec_0, 1, boss_0)
	call TimerStart(t5sec_0, 5.25, false, function Trig_BossStart_5sec_Actions)
	call ForceCinematicSubtitles(true)
	call TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS_1, boss_0, "Pyrovulcanous the Sunderer", gg_snd_HeroFirelordWarcry1_1, "|cFFFF0000Всех сожгу!!!......Один останусь!!!|r", 0, 5.07, false)
	call DestroyTimer(t3sec_0)
	call FlushChildHashtable(udg_hash_1, h3sec_0)
	set t3sec_0 = null
	set t5sec_0 = null
	set boss_0 = null
endfunction

function Trig_BossStart_Actions takes nothing returns nothing
	local real xc = GetRectCenterX(gg_rct_6_1)
	local real yc = GetRectCenterY(gg_rct_6_1)
	local real xp = xc_0 - 1216.
	local real yp = yc_0 + 1088.
	local integer random
	local integer end = 1
	local group gruppa = CreateGroup()
	local unit Picked
	local real dist = -350
	local unit boss = CreateUnit(Player($B), 'N00J', (xc_0 - 500), yc_0, .0)
	local timer t3sec = CreateTimer()
	local integer h3sec = GetHandleId(t3sec_0)
	set udg_BossFightWeather_1 = AddWeatherEffect(gg_rct_6_1, 'FDrh')
	call EnableWeatherEffect(udg_BossFightWeather_1, true)
	call DisableTrigger(gg_trg_Hero_Dead_1)
	call EnableTrigger(gg_trg_FlameSpells_1)
	call EnableTrigger(gg_trg_Upgrade_Summons_1)
	call GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev_1, gruppa_0)
	call CinematicModeExBJ(true, bj_FORCE_ALL_PLAYERS_1, bj_CINEMODE_INTERFACEFADE_1)
	call CinematicFadeBJ(1, .0, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1)
	call CinematicFadeBJ(0, 8.25, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1)
	call SetAttackSpeedAbilityLevel(boss_0, $F * CountPlayersInForceBJ(udg_IGRAET_1))
	call SetAttackAbilityLevel(boss_0, 30 * CountPlayersInForceBJ(udg_IGRAET_1))
	call SetArmorAbilityLevel(boss_0, 5 * CountPlayersInForceBJ(udg_IGRAET_1))
	call SetUnitMaxState(boss_0, UNIT_STATE_MAX_LIFE_1, R2I(3000. * CountPlayersInForceBJ(udg_IGRAET_1)))
	loop
		set Picked_0 = FirstOfGroup(gruppa_0)
		exitwhen Picked_0 == null
		call SetUnitPosition(Picked_0, (xc_0 + 500), (yc_0 + dist_0))
		call SetUnitFacing(Picked_0, bj_RADTODEG_1 * Atan2(yc_0 - GetUnitY(Picked_0), xc_0 - GetUnitX(Picked_0)))
		call PauseUnit(Picked_0, true)
		call ClearSelection()
		set dist_0 = dist_0 + 'd'
		if (GetLocalPlayer() == GetOwningPlayer(Picked_0)) then
			call CameraSetupApplyForceDuration(gg_cam_Camera_BossFightStart_1, true, .0)
		endif
		call GroupRemoveUnit(gruppa_0, Picked_0)
	endloop
	call SetHeroLevel(boss_0, 30, false)
	call AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl", boss_0, "chest")
	call AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl", boss_0, "hand,right")
	call AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl", boss_0, "hand,left")
	call AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire2.mdl", boss_0, "head")
	call UnitAddAbility(boss_0, 'A05T')
	call UnitAddAbility(boss_0, 'A051')
	call UnitAddAbility(boss_0, 'A05U')
	call UnitAddAbility(boss_0, 'A004')
	call PauseUnit(boss_0, true)
	call SaveUnitHandle(udg_hash_1, h3sec_0, 1, boss_0)
	call TimerStart(t3sec_0, 3., false, function Trig_BossStart_3sec_Actions)
	call ShowAndFlushAllPlayerDamage(true)
	call TimerStart(udg_TimerShowAndFlushAllPlayerDmg_1, 10000., false, null)
	loop
		exitwhen end_0 > 16
		set yp_0 = yp_0 - $80
		set bj_forLoopAIndex_1 = 1
		loop
			exitwhen bj_forLoopAIndex_1 > 20
			set random_0 = GetRandomInt(1, $A)
			if random_0 >= 1 and random_0 <= 3 then
				call SetTerrainType(xp_0, yp_0, 'Ddrt', -1, 2, 1)
			else
				if random_0 >= 4 and random_0 <= 7 then
					call SetTerrainType(xp_0, yp_0, 'Dlvc', -1, 2, 1)
				else
					call SetTerrainType(xp_0, yp_0, 'Dlav', -1, 2, 1)
				endif
			endif
			set xp_0 = xp_0 + $80
			set bj_forLoopAIndex_1 = bj_forLoopAIndex_1 + 1
		endloop
		set end_0 = end_0 + 1
		set xp_0 = xc_0 - 1216.
	endloop
	set Picked_0 = null
	set boss_0 = null
	call GroupClear(gruppa_0)
	call DestroyGroup(gruppa_0)
	set gruppa_0 = null
	set t3sec_0 = null
endfunction

function InitTrig_BossStart takes nothing returns nothing
	set gg_trg_BossStart_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_BossStart_1, function Trig_BossStart_Actions)
endfunction

function Trig_FlameSpells_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A05T' or GetSpellAbilityId() == 'A05U'
endfunction

function Trig_FlameSpells_Periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local real xu = LoadReal(udg_hash_1, h_0, 1)
	local real yu = LoadReal(udg_hash_1, h_0, 2)
	local real angle = LoadReal(udg_hash_1, h_0, 3)
	local integer i = LoadInteger(udg_hash_1, h_0, 4)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 5)
	local real x = xu_0 + 400 * Cos((angle_0 + i_0 * 'x') * bj_DEGTORAD_1)
	local real y = yu_0 + 400 * Sin((angle_0 + i_0 * 'x') * bj_DEGTORAD_1)
	local unit u
	local unit un
	local boolean zaniat = LoadBoolean(udg_hash_1, GetHandleId(caster_0), $A)
	local effect ef = LoadEffectHandle(udg_hash_1, GetHandleId(caster_0), $F)
	set i_0 = i_0 + 1
	call SaveInteger(udg_hash_1, h_0, 4, i_0)
	if i_0 < 4 then
		set u_0 = CreateUnit(GetOwningPlayer(caster_0), 'h00U', xu_0, yu_0, .0)
		set un_0 = CreateUnit(GetOwningPlayer(caster_0), 'h00U', xu_0, yu_0, .0)
		call UnitApplyTimedLife(u_0, 'BTLF', 2.)
		call UnitAddAbility(u_0, 'A055')
		call UnitAddAbility(un_0, 'A05A')
		call SetUnitAbilityLevel(u_0, 'A055', 1)
		call IssuePointOrderById(u_0, $D0100, x_0, y_0)
		call IssuePointOrderById(un_0, $D0208, x_0, y_0)
	else
		set zaniat_0 = false
		call SaveBoolean(udg_hash_1, GetHandleId(caster_0), $A, zaniat_0)
		call DestroyTimer(t_0)
		call FlushChildHashtable(udg_hash_1, h_0)
		call PauseUnit(caster_0, false)
		call UnitRemoveAbility(caster_0, 'Avul')
		call SetUnitAnimation(caster_0, "stand")
		call DestroyEffect(ef_0)
	endif
	set t_0 = null
	set u_0 = null
	set un_0 = null
	set caster_0 = null
	set ef_0 = null
endfunction

function Trig_FlameSpells_Actions takes nothing returns nothing
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local real x
	local real y
	local real angle = 0
	local integer lop = 0
	local location loc
	local unit u = GetSpellAbilityUnit()
	local effect ef
	if GetSpellAbilityId() == 'A05T' then
		call PauseUnit(u_0, true)
		call UnitAddAbility(u_0, 'Avul')
		set ef_0 = AddSpecialEffectTarget("Abilities\\Spells\\Other\\ImmolationRed\\ImmolationRedTarget.mdl", u_0, "chest")
		call SaveEffectHandle(udg_hash_1, GetHandleId(u_0), $F, ef_0)
		call SetUnitAnimationByIndex(u_0, 7)
		call SaveReal(udg_hash_1, h_0, 1, GetUnitX(u_0))
		call SaveReal(udg_hash_1, h_0, 2, GetUnitY(u_0))
		call SaveReal(udg_hash_1, h_0, 3, GetUnitFacing(u_0))
		call SaveInteger(udg_hash_1, h_0, 4, 0)
		call SaveUnitHandle(udg_hash_1, h_0, 5, u_0)
		call TimerStart(t_0, 1., true, function Trig_FlameSpells_Periodic_Actions)
		set ef_0 = null
	endif
	if GetSpellAbilityId() == 'A05U' then
		set loc_0 = GetSpellTargetLoc()
		set x_0 = GetLocationX(loc_0)
		set y_0 = GetLocationY(loc_0)
		loop
			exitwhen lop_0 > 4
			set lop_0 = lop_0 + 1
			call CreateUnit(GetOwningPlayer(u_0), 'n00L', x_0 + $96 * Cos(angle_0 * bj_DEGTORAD_1), y_0 + $96 * Sin(angle_0 * bj_DEGTORAD_1), GetUnitFacing(u_0))
			call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl", x_0 + $96 * Cos(angle_0 * bj_DEGTORAD_1), y_0 + $96 * Sin(angle_0 * bj_DEGTORAD_1)))
			call UnitApplyTimedLife(bj_lastCreatedUnit_1, 'BTLF', GetRandomReal(40., 60.))
			set angle_0 = angle_0 + 72
		endloop
		call RemoveLocation(loc_0)
		set loc_0 = null
	endif
	set t_0 = null
	set u_0 = null
endfunction

function InitTrig_FlameSpells takes nothing returns nothing
	local integer index = 0
	set gg_trg_FlameSpells_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_FlameSpells_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_FlameSpells_1, Condition(function Trig_FlameSpells_Conditions))
	call TriggerAddAction(gg_trg_FlameSpells_1, function Trig_FlameSpells_Actions)
endfunction

function Trig_Fire_Circle_Periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local real x = LoadReal(udg_hash_1, h_0, 2)
	local real y = LoadReal(udg_hash_1, h_0, 3)
	local real angle = LoadReal(udg_hash_1, h_0, 4)
	local integer waitcreate = LoadInteger(udg_hash_1, h_0, 6)
	local integer wait = LoadInteger(udg_hash_1, h_0, 7)
	local real damage = LoadReal(udg_hash_1, h_0, 8)
	local integer counter = LoadInteger(udg_hash_1, h_0, 9)
	local group gdamage = CreateGroup()
	local group gdamage2 = CreateGroup()
	local unit Picked
	local player p = GetOwningPlayer(caster_0)
	local effect ef
	local integer lopa
	local real xnew
	local real ynew
	local real xcheck
	local real ycheck
	if waitcreate_0 > 0 then
		set waitcreate_0 = waitcreate_0 - 1
		call SaveInteger(udg_hash_1, h_0, 6, waitcreate_0)
		set xcheck_0 = x_0 + 500. * Cos(angle_0 + ((40 - waitcreate_0) * 9.) * bj_DEGTORAD_1)
		set ycheck_0 = y_0 + 500. * Sin(angle_0 + ((40 - waitcreate_0) * 9.) * bj_DEGTORAD_1)
		if (waitcreate_0 - (waitcreate_0 / 2) * 2) == 0 and IsTerrainPathable(xcheck_0, ycheck_0, PATHING_TYPE_FLYABILITY_1) == false then
			set counter_0 = counter_0 + 1
			set ef_0 = AddSpecialEffect("Doodads\\Cinematic\\TownBurningFireEmitter\\TownBurningFireEmitter.mdl", xcheck_0, ycheck_0)
			call SaveEffectHandle(udg_hash_1, h_0, counter_0, ef_0)
			set ef_0 = null
			call SaveInteger(udg_hash_1, h_0, 9, counter_0)
		endif
	endif
	if wait_0 > 0 then
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 7, wait_0)
		set lopa_0 = $A
		loop
			exitwhen lopa_0 > counter_0
			set xnew_0 = x_0 + 500. * Cos(angle_0 + (lopa_0 * 18.) * bj_DEGTORAD_1)
			set ynew_0 = y_0 + 500. * Sin(angle_0 + (lopa_0 * 18.) * bj_DEGTORAD_1)
			call GroupEnumUnitsInRange(gdamage_0, xnew_0, ynew_0, 150., null)
			call GroupAddGroup(gdamage_0, gdamage2_0)
			set lopa_0 = lopa_0 + 1
		endloop
		loop
			set Picked_0 = FirstOfGroup(gdamage2_0)
			exitwhen Picked_0 == null
			if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 and IsUnitEnemy(Picked_0, p_0) and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call UnitDamageTarget(caster_0, Picked_0, (damage_0 / 25.), false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
				if (wait_0 - (wait_0 / $F) * $F) == 0 then
					call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\FlameStrike\\FlameStrikeEmbers.mdl", Picked_0, "origin"))
					call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\FlameStrike\\FlameStrikeEmbers.mdl", Picked_0, "chest"))
				endif
			endif
			call GroupRemoveUnit(gdamage2_0, Picked_0)
		endloop
	else
		set lopa_0 = $A
		loop
			exitwhen lopa_0 > counter_0
			set ef_0 = LoadEffectHandle(udg_hash_1, h_0, lopa_0)
			call DestroyEffect(ef_0)
			set ef_0 = null
			set lopa_0 = lopa_0 + 1
		endloop
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set caster_0 = null
	set ef_0 = null
	set Picked_0 = null
	set p_0 = null
	call GroupClear(gdamage_0)
	call DestroyGroup(gdamage_0)
	set gdamage_0 = null
	call GroupClear(gdamage2_0)
	call DestroyGroup(gdamage2_0)
	set gdamage2_0 = null
endfunction

function Trig_Fire_Circle_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local real angle = GetUnitFacing(caster_0)
	local real xt = x_0 + 500. * Cos(angle_0 * bj_DEGTORAD_1)
	local real yt = y_0 + 500. * Sin(angle_0 * bj_DEGTORAD_1)
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local integer waitcreate = 20 * 2
	local integer wait = 390
	local integer counter = 9
	local real damage = 40. + 20. * CountPlayersInForceBJ(udg_IGRAET_1)
	call TimerStart(t_0, .04, true, function Trig_Fire_Circle_Periodic_Actions)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveReal(udg_hash_1, h_0, 2, x_0)
	call SaveReal(udg_hash_1, h_0, 3, y_0)
	call SaveReal(udg_hash_1, h_0, 4, angle_0)
	call SaveInteger(udg_hash_1, h_0, 6, waitcreate_0)
	call SaveInteger(udg_hash_1, h_0, 7, wait_0)
	call SaveReal(udg_hash_1, h_0, 8, damage_0)
	call SaveInteger(udg_hash_1, h_0, 9, counter_0)
	set caster_0 = null
	set t_0 = null
endfunction

function Trig_Fire_Circle_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A004'
endfunction

function InitTrig_Fire_Circle takes nothing returns nothing
	local integer index = 0
	set gg_trg_Fire_Circle_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Fire_Circle_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Fire_Circle_1, Condition(function Trig_Fire_Circle_Conditions))
	call TriggerAddAction(gg_trg_Fire_Circle_1, function Trig_Fire_Circle_Actions)
endfunction

function Trig_Fire_Meteor_Move_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster
	local real damage
	local real stuntime
	local integer wait = LoadInteger(udg_hash_1, h_0, 4)
	local unit circle
	local effect ef
	local real xt
	local real yt
	local player p
	local group g
	local unit Picked
	local unit dammi
	if wait_0 > 0 then
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 4, wait_0)
		if wait_0 == 24 then
			set xt_0 = LoadReal(udg_hash_1, h_0, $B)
			set yt_0 = LoadReal(udg_hash_1, h_0, $C)
			call DestroyEffect(AddSpecialEffect("Effects\\MeteorStrike.mdl", xt_0, yt_0))
		endif
	else
		set caster_0 = LoadUnitHandle(udg_hash_1, h_0, 1)
		set circle_0 = LoadUnitHandle(udg_hash_1, h_0, 6)
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 7)
		call DestroyEffect(ef_0)
		set ef_0 = null
		call RemoveUnit(circle_0)
		set damage_0 = LoadReal(udg_hash_1, h_0, 2)
		set stuntime_0 = LoadReal(udg_hash_1, h_0, 3)
		set xt_0 = LoadReal(udg_hash_1, h_0, $B)
		set yt_0 = LoadReal(udg_hash_1, h_0, $C)
		set p_0 = GetOwningPlayer(caster_0)
		set g_0 = CreateGroup()
		call GroupEnumUnitsInRange(g_0, xt_0, yt_0, 200., null)
		set dammi_0 = CreateUnit(p_0, 'h00U', xt_0, yt_0, .0)
		call UnitApplyTimedLife(dammi_0, 'BTLF', 2.)
		call UnitAddAbility(dammi_0, 'A0O5')
		call IssuePointOrderById(dammi_0, $D0208, xt_0, yt_0)
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if IsUnitEnemy(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
				call StunUnitTimed(Picked_0, stuntime_0)
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl", Picked_0, "chest"))
				call DestroyEffect(AddSpecialEffectTarget("Effects\\FireBall.mdl", Picked_0, "chest"))
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, $E)
		call DestroyEffect(ef_0)
		set ef_0 = null
		set p_0 = null
		call GroupClear(g_0)
		call DestroyGroup(g_0)
		set g_0 = null
		call DestroyTimer(t_0)
		set Picked_0 = null
		set caster_0 = null
		set circle_0 = null
		set dammi_0 = null
		call FlushChildHashtable(udg_hash_1, h_0)
	endif
	set t_0 = null
endfunction

function Trig_Fire_Meteor_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local location loc = GetSpellTargetLoc()
	local real xt = GetLocationX(loc_0)
	local real yt = GetLocationY(loc_0)
	local real damage = 200. + 40. * CountPlayersInForceBJ(udg_IGRAET_1)
	local real stuntime = 4.
	local real time = 3.
	local unit circle = CreateUnit(GetOwningPlayer(caster_0), 'h00U', xt_0, yt_0, 270.)
	local effect ef = AddSpecialEffectTarget("Abilities\\Spells\\Orc\\CommandAura\\CommandAuraTarget.mdl", circle_0, "origin")
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	call SetUnitScale(circle_0, 4., 4., 4.)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveReal(udg_hash_1, h_0, 2, damage_0)
	call SaveReal(udg_hash_1, h_0, 3, stuntime_0)
	call SaveInteger(udg_hash_1, h_0, 4, R2I(time_0 / .03))
	call SaveUnitHandle(udg_hash_1, h_0, 6, circle_0)
	call SaveEffectHandle(udg_hash_1, h_0, 7, ef_0)
	call SaveReal(udg_hash_1, h_0, $B, xt_0)
	call SaveReal(udg_hash_1, h_0, $C, yt_0)
	call TimerStart(t_0, .03, true, function Trig_Fire_Meteor_Move_Actions)
	set caster_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set t_0 = null
	set circle_0 = null
	set ef_0 = null
endfunction

function Trig_Fire_Meteor_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0O4'
endfunction

function InitTrig_Fire_Meteor takes nothing returns nothing
	local integer index = 0
	set gg_trg_Fire_Meteor_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Fire_Meteor_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Fire_Meteor_1, Condition(function Trig_Fire_Meteor_Conditions))
	call TriggerAddAction(gg_trg_Fire_Meteor_1, function Trig_Fire_Meteor_Actions)
endfunction

function Trig_Upgrade_Summons_Actions takes nothing returns nothing
	local unit summon = GetEnteringUnit()
	local integer h = GetUnitTypeId(summon_0)
	if h_0 == 'n00L' then
		call SetAttackAbilityLevel(summon_0, 5 * CountPlayersInForceBJ(udg_IGRAET_1))
		call SetUnitMaxState(summon_0, UNIT_STATE_MAX_LIFE_1, R2I(75. * CountPlayersInForceBJ(udg_IGRAET_1)))
	endif
	if h_0 == 'n00M' then
		call SetAttackAbilityLevel(summon_0, 3 * CountPlayersInForceBJ(udg_IGRAET_1))
		call SetUnitMaxState(summon_0, UNIT_STATE_MAX_LIFE_1, R2I(30. * CountPlayersInForceBJ(udg_IGRAET_1)))
	endif
	if h_0 == 'n00N' then
		call SetAttackAbilityLevel(summon_0, $C * CountPlayersInForceBJ(udg_IGRAET_1))
		call SetUnitMaxState(summon_0, UNIT_STATE_MAX_LIFE_1, R2I(100. * CountPlayersInForceBJ(udg_IGRAET_1)))
	endif
endfunction

function Trig_Upgrade_Summons_Conditions takes nothing returns boolean
	return GetOwningPlayer(GetEnteringUnit()) == Player($B)
endfunction

function InitTrig_Upgrade_Summons takes nothing returns nothing
	local region rectRegion = CreateRegion()
	set gg_trg_Upgrade_Summons_1 = CreateTrigger()
	call RegionAddRect(rectRegion_0, gg_rct_6_1)
	call TriggerRegisterEnterRegion(gg_trg_Upgrade_Summons_1, rectRegion_0, null)
	call TriggerAddCondition(gg_trg_Upgrade_Summons_1, Condition(function Trig_Upgrade_Summons_Conditions))
	call TriggerAddAction(gg_trg_Upgrade_Summons_1, function Trig_Upgrade_Summons_Actions)
endfunction

function Trig_UseBeornSpells_Is_Enemy_Condition takes nothing returns boolean
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE_1) > .405) and (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE_1) == false) and (IsPlayerEnemy(udg_Temp_Player_1[1], GetOwningPlayer(GetFilterUnit())))) != null
endfunction

function Trig_UseBeornSpells_Is_Ally_Condition takes nothing returns boolean
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE_1) > .405) and (GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE_1) < GetUnitState(GetFilterUnit(), UNIT_STATE_MAX_LIFE_1) * .6) and (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE_1) == false) and (IsPlayerAlly(udg_Temp_Player_1[1], GetOwningPlayer(GetFilterUnit())))) != null
endfunction

function Trig_UseBeornSpells_Condition takes nothing returns boolean
	return (IsPlayerInForce(GetOwningPlayer(GetFilterUnit()), udg_Players_Enemy_Group_1))
endfunction

function Trig_UseBeornSpells_Actions takes nothing returns nothing
	local group gall = CreateGroup()
	local group g
	local group g2
	local unit Picked
	local unit target
	local real x
	local real y
	local real dist
	local real angle
	call GroupEnumUnitsInRect(gall_0, bj_mapInitialPlayableArea_1, Condition(function Trig_UseBeornSpells_Condition))
	set g_0 = CreateGroup()
	call GroupToGroup(gall_0, g_0)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if (GetUnitAbilityLevel(Picked_0, 'A0OD') > 0) and GetRandomInt(1, 2) == 1 then
			set g2_0 = CreateGroup()
			set x_0 = GetUnitX(Picked_0)
			set y_0 = GetUnitY(Picked_0)
			set udg_Temp_Player_1[1] = GetOwningPlayer(Picked_0)
			call GroupEnumUnitsInRange(g2_0, x_0, y_0, 600., Condition(function Trig_UseBeornSpells_Is_Enemy_Condition))
			call RandomUnitFromGroup(1, g2_0)
			set g2_0 = CreateGroup()
			call GroupToGroup(udg_GroupRandomUnitFromGroup_1, g2_0)
			set target_0 = FirstOfGroup(g2_0)
			if (target_0 != null) then
				call IssueTargetOrderById(Picked_0, $D00CB, target_0)
			endif
			set udg_Temp_Player_1[1] = null
			call GroupClear(g2_0)
			call DestroyGroup(g2_0)
			set g2_0 = null
			set target_0 = null
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set g_0 = CreateGroup()
	call GroupToGroup(gall_0, g_0)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if (GetUnitAbilityLevel(Picked_0, 'A0OC') > 0) and GetRandomInt(1, 2) == 1 then
			set g2_0 = CreateGroup()
			set x_0 = GetUnitX(Picked_0)
			set y_0 = GetUnitY(Picked_0)
			set udg_Temp_Player_1[1] = GetOwningPlayer(Picked_0)
			call GroupEnumUnitsInRange(g2_0, x_0, y_0, 575., Condition(function Trig_UseBeornSpells_Is_Ally_Condition))
			call RandomUnitFromGroup(1, g2_0)
			set g2_0 = CreateGroup()
			call GroupToGroup(udg_GroupRandomUnitFromGroup_1, g2_0)
			set target_0 = FirstOfGroup(g2_0)
			if (target_0 != null) then
				call IssueTargetOrderById(Picked_0, $D00C0, target_0)
			endif
			set udg_Temp_Player_1[1] = null
			call GroupClear(g2_0)
			call DestroyGroup(g2_0)
			set g2_0 = null
			set target_0 = null
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set g_0 = CreateGroup()
	call GroupToGroup(gall_0, g_0)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if (GetUnitAbilityLevel(Picked_0, 'A0OF') > 0) and GetRandomInt(1, 3) <= 2 then
			set g2_0 = CreateGroup()
			set x_0 = GetUnitX(Picked_0)
			set y_0 = GetUnitY(Picked_0)
			set udg_Temp_Player_1[1] = GetOwningPlayer(Picked_0)
			call GroupEnumUnitsInRange(g2_0, x_0, y_0, 300., Condition(function Trig_UseBeornSpells_Is_Enemy_Condition))
			call RandomUnitFromGroup(1, g2_0)
			set g2_0 = CreateGroup()
			call GroupToGroup(udg_GroupRandomUnitFromGroup_1, g2_0)
			set target_0 = FirstOfGroup(g2_0)
			if (target_0 != null) then
				call IssueTargetOrderById(Picked_0, $D00BD, target_0)
			endif
			set udg_Temp_Player_1[1] = null
			call GroupClear(g2_0)
			call DestroyGroup(g2_0)
			set g2_0 = null
			set target_0 = null
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	call GroupClear(gall_0)
	call DestroyGroup(gall_0)
	set gall_0 = null
endfunction

function InitTrig_UseBeornSpells takes nothing returns nothing
	set gg_trg_UseBeornSpells_1 = CreateTrigger()
	call TriggerRegisterTimerEvent(gg_trg_UseBeornSpells_1, 1., true)
	call TriggerAddAction(gg_trg_UseBeornSpells_1, function Trig_UseBeornSpells_Actions)
endfunction

function Trig_Beorn_Den_onbase_Actions takes nothing returns nothing
	local timer tonbase = GetExpiredTimer()
	local integer honbase = GetHandleId(tonbase_0)
	local integer ishod = LoadInteger(udg_hash_1, honbase_0, 3)
	local unit boss = udg_BeornBoss_1
	local group gruppa = CreateGroup()
	local unit Picked
	local real xc = GetRectCenterX(gg_rct_Respawn_Heroes_1)
	local real yc = GetRectCenterY(gg_rct_Respawn_Heroes_1)
	local texttag txt
	local real vel = .0221875
	local real angle = 45. + GetRandomReal(.0, 90.)
	local real xvel = vel_0 * Cos(angle_0 * bj_DEGTORAD_1)
	local real yvel = vel_0 * Sin(angle_0 * bj_DEGTORAD_1)
	local integer dead = 0
	local real perekluchatel = .1
	local group g1 = CreateGroup()
	local group g2 = CreateGroup()
	local group g3 = CreateGroup()
	local group g4 = CreateGroup()
	local group g = CreateGroup()
	local group grp = CreateGroup()
	local integer lopb = 0
	local integer lopa = 0
	call RemoveUnit(udg_EnergyWallUnit_1[$A])
	call RemoveUnit(udg_EnergyWallUnit_1[$B])
	set lopb_0 = 1
	loop
		exitwhen lopb_0 > $B
		call RemoveUnit(udg_EnergyWallUnit_1[lopb_0])
		set lopb_0 = lopb_0 + 1
	endloop
	set lopb_0 = 1
	set lopa_0 = 0
	loop
		exitwhen lopa_0 > $B
		set lopa_0 = lopa_0 + 1
		loop
			exitwhen lopb_0 > 7
			call RemoveDestructable(udg_EnergyWallBlock_1[lopa_0 * 7 + lopb_0])
			set lopb_0 = lopb_0 + 1
		endloop
		set lopb_0 = 1
	endloop
	call GroupEnumUnitsInRange(grp_0, 0, 0, 99999, null)
	call KillSummonsAndIllusions(grp_0)
	call DisableTrigger(gg_trg_UseBeornSpells_1)
	call ShowAndFlushAllPlayerDamage(false)
	call GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev_1, gruppa_0)
	call CinematicModeExBJ(false, bj_FORCE_ALL_PLAYERS_1, bj_CINEMODE_INTERFACEFADE_1)
	call CinematicFadeBJ(0, 5., "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0)
	loop
		set Picked_0 = FirstOfGroup(gruppa_0)
		exitwhen Picked_0 == null
		if perekluchatel_0 >= 0 then
			set perekluchatel_0 = -perekluchatel_0
			set perekluchatel_0 = perekluchatel_0 - 50.
		else
			set perekluchatel_0 = -perekluchatel_0
			set perekluchatel_0 = perekluchatel_0 + 50.
		endif
		set xc_0 = GetRectCenterX(gg_rct_Respawn_Heroes_1) + perekluchatel_0
		set yc_0 = GetRectCenterY(gg_rct_Respawn_Heroes_1)
		call ReviveHero(Picked_0, xc_0, yc_0, true)
		call SetUnitPosition(Picked_0, xc_0, yc_0)
		call SetUnitFacing(Picked_0, 270.)
		call SetUnitState(Picked_0, UNIT_STATE_LIFE_1, $540BE3FF)
		call SetUnitState(Picked_0, UNIT_STATE_MANA_1, $540BE3FF)
		if ishod_0 == 2 then
			set txt_0 = CreateTextTag()
			call SetTextTagText(txt_0, "|cFFFFFF00+800|r", .045)
			call SetTextTagPos(txt_0, GetUnitX(Picked_0), GetUnitY(Picked_0), .0)
			call SetTextTagColor(txt_0, 0, 0, 0, 50)
			call SetTextTagVelocity(txt_0, xvel_0, yvel_0)
			call SetTextTagPermanent(txt_0, false)
			call SetTextTagLifespan(txt_0, 4.)
			call SetTextTagFadepoint(txt_0, .0)
			set txt_0 = null
			call SetHeroStr(Picked_0, GetHeroStr(Picked_0, false) + 8, true)
			call SetHeroAgi(Picked_0, GetHeroAgi(Picked_0, false) + 8, true)
			call SetHeroInt(Picked_0, GetHeroInt(Picked_0, false) + 8, true)
			call SetPlayerState(GetOwningPlayer(Picked_0), PLAYER_STATE_RESOURCE_GOLD_1, (GetPlayerState(GetOwningPlayer(Picked_0), PLAYER_STATE_RESOURCE_GOLD_1) + 800))
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl", Picked_0, "overhead"))
			if GetLocalPlayer() == GetOwningPlayer(Picked_0) then
				call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Вы получили " + udg_ColorString_1[23] + I2S(800) + " золота|r!!!")
				call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Все характеристики вашего героя повышены на |cff99ccff8!|r")
			endif
		endif
		if (GetLocalPlayer() == GetOwningPlayer(Picked_0)) then
			call ResetToGameCamera(.0)
		endif
		if ishod_0 == 1 then
			call DisplayTextToPlayer(GetOwningPlayer(Picked_0), 0, 0, "|cFFFF0000ВЫ ПРОИГРАЛИ БИТВУ С БЕОРНАМИ!!!|r")
		else
			call DisplayTextToPlayer(GetOwningPlayer(Picked_0), 0, 0, "|cFFFFFF00ВЫ ПОБЕДИЛИ В БИТВЕ С БЕОРНАМИ!!!|r")
		endif
		if (GetLocalPlayer() == GetOwningPlayer(Picked_0)) then
			call ResetToGameCamera(.0)
			call PanCameraToTimed(xc_0, yc_0, .0)
			call SelectUnit(Picked_0, true)
		endif
		call GroupRemoveUnit(gruppa_0, Picked_0)
	endloop
	call EnableTrigger(gg_trg_Hero_Dead_1)
	set Picked_0 = null
	call GroupEnumUnitsInRect(g1_0, gg_rct_Les_1_1, null)
	call GroupEnumUnitsInRect(g2_0, gg_rct_Les1_Dop1_1, null)
	call GroupEnumUnitsInRect(g3_0, gg_rct_Les1_Dop2_1, null)
	call GroupAddGroup(g1_0, g_0)
	call GroupAddGroup(g2_0, g_0)
	call GroupAddGroup(g3_0, g_0)
	call GroupEnumUnitsInRange(g4_0, .0, .0, 999999., null)
	loop
		set Picked_0 = FirstOfGroup(g4_0)
		exitwhen Picked_0 == null
		if GetUnitTypeId(Picked_0) == 'n01N' or GetUnitTypeId(Picked_0) == 'n01R' or GetUnitTypeId(Picked_0) == 'n01P' then
			call GroupAddUnit(g_0, Picked_0)
		endif
		call GroupRemoveUnit(g4_0, Picked_0)
	endloop
	call DestroyGroup(g4_0)
	set g4_0 = null
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if GetUnitTypeId(Picked_0) != 'h00C' and GetUnitTypeId(Picked_0) != 'h00B' and GetUnitTypeId(Picked_0) != 'h00U' then
			call RemoveUnit(Picked_0)
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	call StartTimerBJ(udg_Timer_Nomera_Volni_1, false, 50.)
	call CreateTimerDialogBJ(udg_Timer_Nomera_Volni_1, ("Волна № |cFFFF0000" + (I2S(udg_Nomer_samoi_volni_1) + "|r")))
	set udg_TimerDialog_Nomera_Volni_1 = bj_lastCreatedTimerDialog_1
	call TimerDialogSetTimeColorBJ(udg_TimerDialog_Nomera_Volni_1, 'd', 90., 30., 20.)
	set udg_Is_Fast_Wave_Start_On_Off_1 = true
	set Picked_0 = null
	call RemoveUnit(boss_0)
	set boss_0 = null
	call DestroyGroup(gruppa_0)
	set gruppa_0 = null
	call FlushChildHashtable(udg_hash_1, honbase_0)
	call DestroyTimer(tonbase_0)
	set tonbase_0 = null
	call DisableTrigger(gg_trg_Start_Beorn_Den_1)
endfunction

function Trig_Beorn_Den_end_Actions takes nothing returns nothing
	local timer tend = GetExpiredTimer()
	local integer hend = GetHandleId(tend_0)
	local unit boss = udg_BeornBoss_1
	local integer lop = 0
	local integer ishod = udg_Ishod_S_Beornami_1
	local timer tonbase = CreateTimer()
	local integer honbase = GetHandleId(tonbase_0)
	local group g1 = CreateGroup()
	local group g2 = CreateGroup()
	local group g22 = CreateGroup()
	local group g3 = CreateGroup()
	local group g = CreateGroup()
	local group gg
	local unit Picked
	call DestroyEffect(LoadEffectHandle(udg_hash_1, GetHandleId(boss_0), $87))
	call SaveUnitHandle(udg_hash_1, honbase_0, 1, boss_0)
	call SaveInteger(udg_hash_1, honbase_0, 3, ishod_0)
	call GroupEnumUnitsInRect(g1_0, gg_rct_Les_1_1, null)
	call GroupEnumUnitsInRect(g2_0, gg_rct_Les1_Dop1_1, null)
	call GroupEnumUnitsInRect(g3_0, gg_rct_Les1_Dop2_1, null)
	call GroupAddGroup(g1_0, g_0)
	call GroupAddGroup(g2_0, g_0)
	call GroupAddGroup(g3_0, g_0)
	loop
		exitwhen lop_0 > 9
		if (GetLocalPlayer() == Player(lop_0)) then
			call CameraSetupApplyForceDuration(gg_cam_Camera_Beorn_Den1_1, true, .0)
			call SetCameraRotateMode(GetRectCenterX(gg_rct_Beorn_Boss_Area_1), GetRectCenterY(gg_rct_Beorn_Boss_Area_1), bj_DEGTORAD_1 * 360., 5.)
		endif
		set lop_0 = lop_0 + 1
	endloop
	call TimerStart(tonbase_0, 5., false, function Trig_Beorn_Den_onbase_Actions)
	if ishod_0 == 1 then
		call IssuePointOrderById(boss_0, $D0012, GetRectCenterX(gg_rct_Beorn_Boss_Area_1), GetRectCenterY(gg_rct_Beorn_Boss_Area_1))
	else
		set udg_IsBeronsFightWin_1 = false
		set gg_0 = CreateGroup()
		call GroupAddGroup(udg_PortalCastersMagi_1, gg_0)
		loop
			set Picked_0 = FirstOfGroup(gg_0)
			exitwhen Picked_0 == null
			call UnitAddAbility(Picked_0, 'A0OL')
			call GroupRemoveUnit(gg_0, Picked_0)
		endloop
		call DestroyGroup(gg_0)
		set gg_0 = null
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if GetOwningPlayer(Picked_0) == Player($B) then
				call KillUnit(Picked_0)
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		set Picked_0 = null
	endif
	set g22_0 = CreateGroup()
	call GroupEnumUnitsInRange(g22_0, 0, 0, 99999, null)
	call KillSummonsAndIllusions(g22_0)
	call CinematicModeExBJ(true, bj_FORCE_ALL_PLAYERS_1, bj_CINEMODE_INTERFACEFADE_1)
	call CinematicFadeBJ(1, 5., "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1)
	call FlushChildHashtable(udg_hash_1, hend_0)
	call DestroyTimer(tend_0)
	set tend_0 = null
	set boss_0 = null
	set tonbase_0 = null
	call DestroyGroup(g_0)
	set g_0 = null
endfunction

function Trig_Beorn_Den_Boss_hpcheck_Actions takes nothing returns nothing
	local unit boss = udg_BeornBoss_1
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local integer maxwait = LoadInteger(udg_hash_1, h_0, 1)
	local integer wait = LoadInteger(udg_hash_1, h_0, 2)
	local integer cdskill = LoadInteger(udg_hash_1, h_0, 3)
	local integer itemrand = R2I($A + 5 * CountPlayersInForceBJ(udg_IGRAET_1))
	local real itemx = (GetRandomReal(1000., 1650.))
	local real itemy = (GetRandomReal(-9800., -10200.))
	local unit beorn
	if GetUnitState(boss_0, UNIT_STATE_LIFE_1) > .405 and udg_BeornBossFightEnd_1 == false then
		if GetRandomInt(1, 'd') <= itemrand_0 then
			call CreatePotion(itemx_0, itemy_0, 1, 4)
		endif
		if cdskill_0 < 8 then
			call SaveInteger(udg_hash_1, h_0, 3, cdskill_0 + 1)
		endif
		if cdskill_0 >= 8 then
			call IssueImmediateOrderById(boss_0, $D0105)
			call SaveInteger(udg_hash_1, h_0, 3, 0)
		endif
		if wait_0 < maxwait_0 then
			call SaveInteger(udg_hash_1, h_0, 2, wait_0 + 1)
		endif
		if wait_0 >= maxwait_0 then
			call SaveInteger(udg_hash_1, h_0, 2, 0)
			set beorn_0 = CreateUnit(Player($B), 'n01R', itemx_0, itemy_0, GetRandomReal(.0, 360.))
			call UnitApplyTimedLife(beorn_0, 'BTLF', 60.)
			set beorn_0 = null
			call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl", itemx_0, itemy_0))
		endif
	else
		call DestroyTimer(t_0)
	endif
	set boss_0 = null
endfunction

function Trig_Beorn_Den_HeroInHeroArea_Check_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local integer lopb
	local group gruppa = CreateGroup()
	local group g2
	local unit Picked
	local real x
	local real y
	local integer countrct = 0
	local real dist = 1.
	call GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev_1, gruppa_0)
	loop
		set Picked_0 = FirstOfGroup(gruppa_0)
		exitwhen Picked_0 == null
		set x_0 = GetUnitX(Picked_0)
		set y_0 = GetUnitY(Picked_0)
		if (GetRectMinX(gg_rct_Beorn_Boss_Area_1) <= x_0) and (x_0 <= GetRectMaxX(gg_rct_Beorn_Boss_Area_1)) and (GetRectMinY(gg_rct_Beorn_Boss_Area_1) <= y_0) and (y_0 <= GetRectMaxY(gg_rct_Beorn_Boss_Area_1)) then
			set countrct_0 = 1
		endif
		call GroupRemoveUnit(gruppa_0, Picked_0)
	endloop
	if countrct_0 == 1 then
		call CreateEnergyWall($A, $B)
		call GroupClear(gruppa_0)
		call DestroyGroup(gruppa_0)
		set gruppa_0 = null
		set g2_0 = CreateGroup()
		call GroupEnumUnitsInRange(g2_0, 0, 0, 99999, null)
		call KillSummonsAndIllusions(g2_0)
		set gruppa_0 = CreateGroup()
		call GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev_1, gruppa_0)
		loop
			set Picked_0 = FirstOfGroup(gruppa_0)
			exitwhen Picked_0 == null
			call SetUnitPosition(Picked_0, 1320. + dist_0, -9540.)
			call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl", 1320. + dist_0, -9540.))
			if dist_0 > .0 then
				set dist_0 = -dist_0 - 50.
			else
				set dist_0 = -dist_0 + 50.
			endif
			call SetUnitFacing(Picked_0, 270.)
			if (GetLocalPlayer() == GetOwningPlayer(Picked_0)) then
				call CameraSetupApplyForceDuration(gg_cam_Camera_Beorn_Den6_1, true, 1.)
				call ClearSelection()
				call SelectUnit(Picked_0, true)
			endif
			call GroupRemoveUnit(gruppa_0, Picked_0)
		endloop
		call SetAttackAbilityLevel(udg_BeornBoss_1, $F * CountPlayersInForceBJ(udg_IGRAET_1))
		call SetArmorAbilityLevel(udg_BeornBoss_1, 3 * CountPlayersInForceBJ(udg_IGRAET_1))
		call SetUnitMaxState(udg_BeornBoss_1, UNIT_STATE_MAX_LIFE_1, R2I(800. * CountPlayersInForceBJ(udg_IGRAET_1)))
		call SetUnitInvulnerable(udg_BeornBoss_1, false)
		call IssueImmediateOrderById(udg_BeornBoss_1, $D0004)
		call DestroyTimer(t_0)
		set t_0 = CreateTimer()
		set h_0 = GetHandleId(t_0)
		call SaveInteger(udg_hash_1, h_0, 1, R2I(22. - CountPlayersInForceBJ(udg_IGRAET_1) * 2.))
		call SaveInteger(udg_hash_1, h_0, 2, 0)
		call SaveInteger(udg_hash_1, h_0, 3, 0)
		call TimerStart(t_0, 1., true, function Trig_Beorn_Den_Boss_hpcheck_Actions)
		set t_0 = null
	endif
	set t_0 = null
	call GroupClear(gruppa_0)
	call DestroyGroup(gruppa_0)
	set gruppa_0 = null
endfunction

function Trig_Beorn_Den_Shamans_HP_Check_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit sh1 = LoadUnitHandle(udg_hash_1, h_0, 1)
	local unit sh2 = LoadUnitHandle(udg_hash_1, h_0, 2)
	local unit sh3 = LoadUnitHandle(udg_hash_1, h_0, 3)
	local integer lopb
	if (GetUnitState(sh1_0, UNIT_STATE_LIFE_1) < .0 or sh1_0 == null) and (GetUnitState(sh2_0, UNIT_STATE_LIFE_1) < .0 or sh2_0 == null) and (GetUnitState(sh3_0, UNIT_STATE_LIFE_1) < .0 or sh3_0 == null) then
		call DestroyTimer(t_0)
		call RemoveUnit(udg_EnergyWallUnit_1[$A])
		call RemoveUnit(udg_EnergyWallUnit_1[$B])
		set lopb_0 = 1
		loop
			exitwhen lopb_0 > 7
			call RemoveDestructable(udg_EnergyWallBlock_1[63 + lopb_0])
			call RemoveDestructable(udg_EnergyWallBlock_1[70 + lopb_0])
			set lopb_0 = lopb_0 + 1
		endloop
		set t_0 = CreateTimer()
		call TimerStart(t_0, 1., true, function Trig_Beorn_Den_HeroInHeroArea_Check_Actions)
		set t_0 = null
	endif
	set t_0 = null
	set sh1_0 = null
	set sh2_0 = null
	set sh3_0 = null
endfunction

function Trig_Beorn_Shamans_Animation_Check_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit sh1 = LoadUnitHandle(udg_hash_1, h_0, 1)
	if GetUnitState(sh1_0, UNIT_STATE_LIFE_1) > .405 then
		call SetUnitAnimationByIndex(sh1_0, 3)
	else
		call DestroyTimer(t_0)
		call FlushChildHashtable(udg_hash_1, h_0)
	endif
	set t_0 = null
	set sh1_0 = null
endfunction

function Trig_Beorn_Den_HP_Check_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer players = CountPlayersInForceBJ(udg_IGRAET_1)
	local integer lopa = 1
	local integer countmelee = 1 + R2I(players_0 / 4)
	local real dist = 1.
	local integer h
	local unit u
	local timer t1
	local integer h1
	if GetUnitState(udg_BeornDenHouse_1[1], UNIT_STATE_LIFE_1) < .405 and GetUnitState(udg_BeornDenHouse_1[2], UNIT_STATE_LIFE_1) < .405 then
		call DestroyTimer(t_0)
		set t_0 = CreateTimer()
		set h_0 = GetHandleId(t_0)
		set u_0 = CreateUnit(Player($B), 'n01Q', 1900., -8000., 270.)
		call UnitAddAbility(u_0, 'Abun')
		call UnitAddType(u_0, UNIT_TYPE_PEON_1)
		call PauseUnit(u_0, true)
		call SetUnitAnimationByIndex(u_0, 3)
		call SetUnitMoveSpeed(u_0, 0)
		set t1_0 = CreateTimer()
		set h1_0 = GetHandleId(t1_0)
		call SaveUnitHandle(udg_hash_1, h1_0, 1, u_0)
		call TimerStart(t1_0, 1., true, function Trig_Beorn_Shamans_Animation_Check_Actions)
		set t1_0 = null
		call SaveUnitHandle(udg_hash_1, h_0, 1, u_0)
		loop
			exitwhen lopa_0 > countmelee_0
			call CreateUnit(Player($B), 'n01R', 1900. + dist_0, -8000., 270.)
			if dist_0 > .0 then
				set dist_0 = -dist_0 - 50.
			else
				set dist_0 = -dist_0 + 50.
			endif
			set lopa_0 = lopa_0 + 1
		endloop
		set lopa_0 = 1
		set dist_0 = 1.
		set u_0 = CreateUnit(Player($B), 'n01Q', 2400., -8850., 90.)
		call UnitAddAbility(u_0, 'Abun')
		call UnitAddType(u_0, UNIT_TYPE_PEON_1)
		call PauseUnit(u_0, true)
		call SetUnitAnimationByIndex(u_0, 3)
		call SetUnitMoveSpeed(u_0, 0)
		set t1_0 = CreateTimer()
		set h1_0 = GetHandleId(t1_0)
		call SaveUnitHandle(udg_hash_1, h1_0, 1, u_0)
		call TimerStart(t1_0, 1., true, function Trig_Beorn_Shamans_Animation_Check_Actions)
		set t1_0 = null
		call SaveUnitHandle(udg_hash_1, h_0, 2, u_0)
		loop
			exitwhen lopa_0 > countmelee_0
			call CreateUnit(Player($B), 'n01R', 2400. + dist_0, -8600., 90.)
			if dist_0 > .0 then
				set dist_0 = -dist_0 - 50.
			else
				set dist_0 = -dist_0 + 50.
			endif
			set lopa_0 = lopa_0 + 1
		endloop
		set lopa_0 = 1
		set dist_0 = 1.
		set u_0 = CreateUnit(Player($B), 'n01Q', 850., -8900., .0)
		call UnitAddAbility(u_0, 'Abun')
		call UnitAddType(u_0, UNIT_TYPE_PEON_1)
		call PauseUnit(u_0, true)
		call SetUnitAnimationByIndex(u_0, 3)
		call SetUnitMoveSpeed(u_0, 0)
		call SaveUnitHandle(udg_hash_1, h_0, 3, u_0)
		set t1_0 = CreateTimer()
		set h1_0 = GetHandleId(t1_0)
		call SaveUnitHandle(udg_hash_1, h1_0, 1, u_0)
		call TimerStart(t1_0, 1., true, function Trig_Beorn_Shamans_Animation_Check_Actions)
		set t1_0 = null
		loop
			exitwhen lopa_0 > countmelee_0
			call CreateUnit(Player($B), 'n01R', 850. + dist_0, -8700., .0)
			if dist_0 > .0 then
				set dist_0 = -dist_0 - 50.
			else
				set dist_0 = -dist_0 + 50.
			endif
			set lopa_0 = lopa_0 + 1
		endloop
		set lopa_0 = 1
		set dist_0 = 1.
		call TimerStart(t_0, 1., true, function Trig_Beorn_Den_Shamans_HP_Check_Actions)
		set t_0 = null
	endif
	set t_0 = null
endfunction

function Trig_Beorn_Den_Create_Beorns2_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer players = CountPlayersInForceBJ(udg_IGRAET_1)
	local integer countmelee = 1 + R2I(players_0 / 3)
	local integer countrange = 1 + R2I(players_0 / 3)
	local integer lopa = 1
	local real dist = 1.
	local unit u
	local unit hero
	local group g = CreateGroup()
	if GetUnitState(udg_BeornDenHouse_1[2], UNIT_STATE_LIFE_1) > .0 then
		call GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev_1, g_0)
		loop
			exitwhen lopa_0 > countmelee_0
			set u_0 = CreateUnit(Player($B), 'n01N', 70. + dist_0, -8870., 90.)
			call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl", GetUnitX(u_0), GetUnitY(u_0)))
			call RandomUnitFromGroup(1, g_0)
			set hero_0 = FirstOfGroup(udg_GroupRandomUnitFromGroup_1)
			call IssuePointOrderById(u_0, $D000F, GetUnitX(hero_0), GetUnitY(hero_0))
			set u_0 = null
			set u_0 = CreateUnit(Player($B), 'n01P', 70. + dist_0, -9000., 90.)
			call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl", GetUnitX(u_0), GetUnitY(u_0)))
			call IssuePointOrderById(u_0, $D000F, GetUnitX(hero_0), GetUnitY(hero_0))
			set u_0 = null
			call GroupClear(g_0)
			call DestroyGroup(g_0)
			set g_0 = null
			if dist_0 > .0 then
				set dist_0 = -dist_0 - 50.
			else
				set dist_0 = -dist_0 + 50.
			endif
			set lopa_0 = lopa_0 + 1
		endloop
		call TimerStart(t_0, 30., false, function Trig_Beorn_Den_Create_Beorns2_Actions)
	else
		call DestroyTimer(t_0)
	endif
	set t_0 = null
endfunction

function Trig_Beorn_Den_Create_Beorns_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer players = CountPlayersInForceBJ(udg_IGRAET_1)
	local integer countmelee = 1 + R2I(players_0 / 3)
	local integer countrange = 1 + R2I(players_0 / 3)
	local integer lopa = 1
	local real dist = 1.
	local unit u
	local unit hero
	local group g = CreateGroup()
	if GetUnitState(udg_BeornDenHouse_1[1], UNIT_STATE_LIFE_1) > .0 then
		call GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev_1, g_0)
		loop
			exitwhen lopa_0 > countmelee_0
			set u_0 = CreateUnit(Player($B), 'n01N', 500., -8400. + dist_0, .0)
			call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl", GetUnitX(u_0), GetUnitY(u_0)))
			call RandomUnitFromGroup(1, g_0)
			set hero_0 = FirstOfGroup(udg_GroupRandomUnitFromGroup_1)
			call IssuePointOrderById(u_0, $D000F, GetUnitX(hero_0), GetUnitY(hero_0))
			set u_0 = null
			set u_0 = CreateUnit(Player($B), 'n01P', 300., -8400. + dist_0, .0)
			call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl", GetUnitX(u_0), GetUnitY(u_0)))
			call IssuePointOrderById(u_0, $D000F, GetUnitX(hero_0), GetUnitY(hero_0))
			set u_0 = null
			call GroupClear(g_0)
			call DestroyGroup(g_0)
			set g_0 = null
			if dist_0 > .0 then
				set dist_0 = -dist_0 - 50.
			else
				set dist_0 = -dist_0 + 50.
			endif
			set lopa_0 = lopa_0 + 1
		endloop
		call TimerStart(t_0, 35., false, function Trig_Beorn_Den_Create_Beorns_Actions)
	else
		call DestroyTimer(t_0)
	endif
	set t_0 = null
endfunction

function Trig_Start_Beorn_Den_5sec_Actions takes nothing returns nothing
	local timer t5sec = GetExpiredTimer()
	local integer h5sec = GetHandleId(t5sec_0)
	local unit boss = LoadUnitHandle(udg_hash_1, h5sec_0, 1)
	local group gruppa = CreateGroup()
	local unit Picked
	local timer tfrasa = CreateTimer()
	local integer hfrasa = GetHandleId(tfrasa_0)
	local timer thpcheck = CreateTimer()
	local integer stage = 0
	local boolean zaniat = false
	local timer tbeorn = CreateTimer()
	local timer tbeorn2 = CreateTimer()
	call GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev_1, gruppa_0)
	call CinematicModeExBJ(false, bj_FORCE_ALL_PLAYERS_1, bj_CINEMODE_INTERFACEFADE_1)
	loop
		set Picked_0 = FirstOfGroup(gruppa_0)
		exitwhen Picked_0 == null
		call PauseUnit(Picked_0, false)
		if (GetLocalPlayer() == GetOwningPlayer(Picked_0)) then
			call ClearSelection()
			call SelectUnit(Picked_0, true)
			call ResetToGameCamera(.0)
			call PanCameraToTimed(2090., -8300., .0)
		endif
		call GroupRemoveUnit(gruppa_0, Picked_0)
	endloop
	call TimerStart(thpcheck_0, 1., true, function Trig_Beorn_Den_HP_Check_Actions)
	call TimerStart(tbeorn_0, 2., false, function Trig_Beorn_Den_Create_Beorns_Actions)
	call TimerStart(tbeorn2_0, 17., false, function Trig_Beorn_Den_Create_Beorns2_Actions)
	call DestroyTimer(t5sec_0)
	call FlushChildHashtable(udg_hash_1, h5sec_0)
	set t5sec_0 = null
	set boss_0 = null
	set Picked_0 = null
	call GroupClear(gruppa_0)
	call DestroyGroup(gruppa_0)
	set gruppa_0 = null
endfunction

function Trig_Start_Beorn_Den_6sec_Actions takes nothing returns nothing
	local timer t3sec = GetExpiredTimer()
	local integer h3sec = GetHandleId(t3sec_0)
	local timer t5sec = CreateTimer()
	local integer h5sec = GetHandleId(t5sec_0)
	local unit boss = LoadUnitHandle(udg_hash_1, h3sec_0, 1)
	local group gruppa = CreateGroup()
	local unit Picked
	local unit support = CreateUnit(Player($F), 'h00J', .0, .0, .0)
	call UnitApplyTimedLife(support_0, 'BTLF', 20.)
	call SaveUnitHandle(udg_hash_1, h5sec_0, 1, boss_0)
	call TimerStart(t5sec_0, 7., false, function Trig_Start_Beorn_Den_5sec_Actions)
	call GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev_1, gruppa_0)
	loop
		set Picked_0 = FirstOfGroup(gruppa_0)
		exitwhen Picked_0 == null
		if (GetLocalPlayer() == GetOwningPlayer(Picked_0)) then
			call CameraSetupApplyForceDuration(gg_cam_Camera_Beorn_Den3_1, true, .0)
			call CameraSetupApplyForceDuration(gg_cam_Camera_Beorn_Den4_1, true, 7.)
		endif
		call GroupRemoveUnit(gruppa_0, Picked_0)
	endloop
	call TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS_1, support_0, "Помощник", null, "|cff99ccffДля этого уничтожьте две Хижины Беорнов, а затем... Ну, как-нибудь уберите магическую защиту и войдите в логово Старейшины Беорнов. Удачи...|r", 0, 7., false)
	call DestroyTimer(t3sec_0)
	call FlushChildHashtable(udg_hash_1, h3sec_0)
	set t3sec_0 = null
	set t5sec_0 = null
	set boss_0 = null
endfunction

function Trig_Start_Beorn_Den_4sec_Actions takes nothing returns nothing
	local timer t3sec = GetExpiredTimer()
	local integer h3sec = GetHandleId(t3sec_0)
	local timer t6sec = CreateTimer()
	local integer h6sec = GetHandleId(t6sec_0)
	local unit boss = LoadUnitHandle(udg_hash_1, h3sec_0, 1)
	local unit support = CreateUnit(Player($F), 'h00J', .0, .0, .0)
	call UnitApplyTimedLife(support_0, 'BTLF', 20.)
	call SaveUnitHandle(udg_hash_1, h6sec_0, 1, boss_0)
	call TimerStart(t6sec_0, 8., false, function Trig_Start_Beorn_Den_6sec_Actions)
	call TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS_1, support_0, "Помощник", null, "|cff99ccffУничтожьте Старейшину Беорнов, для того чтобы получить награду золотом, бонусы для своего героя и усилить стражей-заклинателей на базе|r", 0, 8., false)
	call DestroyTimer(t3sec_0)
	call FlushChildHashtable(udg_hash_1, h3sec_0)
	set t3sec_0 = null
	set t6sec_0 = null
	set boss_0 = null
endfunction

function Trig_Start_Beorn_Den_Check_Rects_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit boss = LoadUnitHandle(udg_hash_1, h_0, 1)
	local group gruppa = CreateGroup()
	local unit Picked
	local real x
	local real y
	local integer countrct
	if GetUnitState(boss_0, UNIT_STATE_LIFE_1) > .0 then
		set x_0 = GetUnitX(boss_0)
		set y_0 = GetUnitY(boss_0)
		if (GetRectMinX(gg_rct_Beorn_Boss_Area2_1) <= x_0) and (x_0 <= GetRectMaxX(gg_rct_Beorn_Boss_Area2_1)) and (GetRectMinY(gg_rct_Beorn_Boss_Area2_1) <= y_0) and (y_0 <= GetRectMaxY(gg_rct_Beorn_Boss_Area2_1)) then
		else
			call SetUnitPosition(boss_0, 1400., -9900.)
			call SetUnitFacing(boss_0, 90.)
			call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl", 1400., -9900.))
		endif
		call GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev_1, gruppa_0)
		loop
			set Picked_0 = FirstOfGroup(gruppa_0)
			exitwhen Picked_0 == null
			set x_0 = GetUnitX(Picked_0)
			set y_0 = GetUnitY(Picked_0)
			set countrct_0 = 0
			if (GetRectMinX(gg_rct_Les_1_1) <= x_0) and (x_0 <= GetRectMaxX(gg_rct_Les_1_1)) and (GetRectMinY(gg_rct_Les_1_1) <= y_0) and (y_0 <= GetRectMaxY(gg_rct_Les_1_1)) then
				set countrct_0 = 1
			endif
			if (GetRectMinX(gg_rct_Les1_Dop1_1) <= x_0) and (x_0 <= GetRectMaxX(gg_rct_Les1_Dop1_1)) and (GetRectMinY(gg_rct_Les1_Dop1_1) <= y_0) and (y_0 <= GetRectMaxY(gg_rct_Les1_Dop1_1)) then
				set countrct_0 = 1
			endif
			if (GetRectMinX(gg_rct_Les1_Dop2_1) <= x_0) and (x_0 <= GetRectMaxX(gg_rct_Les1_Dop2_1)) and (GetRectMinY(gg_rct_Les1_Dop2_1) <= y_0) and (y_0 <= GetRectMaxY(gg_rct_Les1_Dop2_1)) then
				set countrct_0 = 1
			endif
			if countrct_0 == 0 then
				if (GetLocalPlayer() == GetOwningPlayer(Picked_0)) then
					call ClearSelection()
					call SelectUnit(Picked_0, true)
					call CameraSetupApplyForceDuration(gg_cam_Camera_Beorn_Den5_1, true, .0)
				endif
				call SetUnitPosition(Picked_0, 2090., -8300.)
				call SetUnitFacing(Picked_0, 180.)
			endif
			call GroupRemoveUnit(gruppa_0, Picked_0)
		endloop
	else
		call DestroyTimer(t_0)
		call FlushChildHashtable(udg_hash_1, h_0)
	endif
	set t_0 = null
	set Picked_0 = null
	call GroupClear(gruppa_0)
	call DestroyGroup(gruppa_0)
	set gruppa_0 = null
	set boss_0 = null
endfunction

function Trig_Start_Beorn_Den_Check_Alive_Units_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local group gruppa = CreateGroup()
	local unit Picked
	local integer ishod = 0
	local boolean alive = false
	local boolean start = false
	if GetUnitState(udg_BeornBoss_1, UNIT_STATE_LIFE_1) < .405 then
		set udg_Ishod_S_Beornami_1 = 2
		set start_0 = true
	endif
	call GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev_1, gruppa_0)
	loop
		set Picked_0 = FirstOfGroup(gruppa_0)
		exitwhen Picked_0 == null
		if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 then
			set alive_0 = true
		endif
		call GroupRemoveUnit(gruppa_0, Picked_0)
	endloop
	if alive_0 == false then
		set udg_Ishod_S_Beornami_1 = 1
		set start_0 = true
	endif
	if start_0 then
		call DestroyTimer(t_0)
		set udg_BeornBossFightEnd_1 = true
		set t_0 = CreateTimer()
		call TimerStart(t_0, 1., false, function Trig_Beorn_Den_end_Actions)
	endif
	set t_0 = null
	set Picked_0 = null
	call GroupClear(gruppa_0)
	call DestroyGroup(gruppa_0)
	set gruppa_0 = null
endfunction

function Trig_Start_Beorn_Den_Actions takes nothing returns nothing
	local integer random
	local integer end = 1
	local group gruppa = CreateGroup()
	local unit Picked
	local real dist = 1.
	local unit boss = CreateUnit(Player($B), 'n01S', 1400., -9950., 90.)
	local timer t3sec = CreateTimer()
	local integer h3sec = GetHandleId(t3sec_0)
	local timer tobl = CreateTimer()
	local integer hobl = GetHandleId(tobl_0)
	local timer talive = CreateTimer()
	local group grp = CreateGroup()
	call GroupEnumUnitsInRange(grp_0, 0, 0, 99999, null)
	call KillSummonsAndIllusions(grp_0)
	call CreateEnergyWall(1, $B)
	set udg_BeornBoss_1 = boss_0
	call SetUnitInvulnerable(boss_0, true)
	call CreateUnit(Player($B), 'n01R', 1200., -9900., 90.)
	call IssueImmediateOrderById(bj_lastCreatedUnit_1, $D0019)
	call CreateUnit(Player($B), 'n01R', 1600., -9900., 90.)
	call IssueImmediateOrderById(bj_lastCreatedUnit_1, $D0019)
	set udg_BeornDenHouse_1[1] = CreateUnit(Player($B), 'n01O', 440., -8060., 270.)
	set udg_BeornDenHouse_1[2] = CreateUnit(Player($B), 'n01O', -140., -9150., 270.)
	call DisableTrigger(gg_trg_Hero_Dead_1)
	call IssueImmediateOrderById(udg_BeornBoss_1, $D0019)
	call EnableTrigger(gg_trg_UseBeornSpells_1)
	call GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev_1, gruppa_0)
	call CinematicModeExBJ(true, bj_FORCE_ALL_PLAYERS_1, bj_CINEMODE_INTERFACEFADE_1)
	call CinematicFadeBJ(1, .0, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1)
	call CinematicFadeBJ(0, 4., "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1)
	loop
		set Picked_0 = FirstOfGroup(gruppa_0)
		exitwhen Picked_0 == null
		call SetUnitPosition(Picked_0, 2090., (-8300. + dist_0))
		if dist_0 > .0 then
			set dist_0 = -dist_0 - 50.
		else
			set dist_0 = -dist_0 + 50.
		endif
		call SetUnitFacing(Picked_0, 180.)
		call PauseUnit(Picked_0, true)
		call ClearSelection()
		if (GetLocalPlayer() == GetOwningPlayer(Picked_0)) then
			call CameraSetupApplyForceDuration(gg_cam_Camera_Beorn_Den1_1, true, .0)
			call CameraSetupApplyForceDuration(gg_cam_Camera_Beorn_Den2_1, true, 12.)
		endif
		call GroupRemoveUnit(gruppa_0, Picked_0)
	endloop
	call SaveUnitHandle(udg_hash_1, h3sec_0, 1, boss_0)
	call TimerStart(t3sec_0, 4., false, function Trig_Start_Beorn_Den_4sec_Actions)
	call ShowAndFlushAllPlayerDamage(true)
	call TimerStart(udg_TimerShowAndFlushAllPlayerDmg_1, 10000., false, null)
	call SaveUnitHandle(udg_hash_1, hobl_0, 1, boss_0)
	call TimerStart(tobl_0, 1., true, function Trig_Start_Beorn_Den_Check_Rects_Actions)
	call TimerStart(talive_0, 1., true, function Trig_Start_Beorn_Den_Check_Alive_Units_Actions)
	set Picked_0 = null
	set boss_0 = null
	call GroupClear(gruppa_0)
	call DestroyGroup(gruppa_0)
	set gruppa_0 = null
	set t3sec_0 = null
endfunction

function InitTrig_Start_Beorn_Den takes nothing returns nothing
	set gg_trg_Start_Beorn_Den_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Start_Beorn_Den_1, function Trig_Start_Beorn_Den_Actions)
endfunction

function Trig_Beorn_Push_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local unit target = GetSpellTargetUnit()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local real xt = GetUnitX(target_0)
	local real yt = GetUnitY(target_0)
	local real angle = bj_RADTODEG_1 * Atan2((yt_0 - y_0), (xt_0 - x_0))
	local unit dammi
	call UnitDamageTarget(caster_0, target_0, 65. + 15. * CountPlayersInForceBJ(udg_IGRAET_1), false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
	call MoveUnit(target_0, .5, 800., 1200., angle_0, .0, true)
	set dammi_0 = CreateUnit(GetOwningPlayer(caster_0), 'h00U', x_0, y_0, .0)
	call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
	call UnitAddAbility(dammi_0, 'A0OG')
	call IssueTargetOrderById(dammi_0, $D006B, target_0)
	set dammi_0 = null
	set caster_0 = null
	set target_0 = null
endfunction

function Trig_Beorn_Push_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0OF'
endfunction

function InitTrig_Beorn_Push takes nothing returns nothing
	local integer index = 0
	set gg_trg_Beorn_Push_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Beorn_Push_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Beorn_Push_1, Condition(function Trig_Beorn_Push_Conditions))
	call TriggerAddAction(gg_trg_Beorn_Push_1, function Trig_Beorn_Push_Actions)
endfunction

function Trig_Beorn_Stomp_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local real radius = 300.
	local real damage = 75. + 25. * CountPlayersInForceBJ(udg_IGRAET_1)
	local player p = GetOwningPlayer(caster_0)
	local group g = CreateGroup()
	local unit Picked
	local real dist
	local real angle
	call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", x_0, y_0))
	call GroupEnumUnitsInRange(g_0, x_0, y_0, radius_0, null)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 and IsUnitEnemy(Picked_0, p_0) and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
			call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
			call StunUnitTimed(Picked_0, 1.5)
			set dist_0 = SquareRoot((GetUnitX(Picked_0) - x_0) * (GetUnitX(Picked_0) - x_0) + (GetUnitY(Picked_0) - y_0) * (GetUnitY(Picked_0) - y_0))
			set angle_0 = bj_RADTODEG_1 * Atan2(GetUnitY(Picked_0) - y_0, GetUnitX(Picked_0) - x_0)
			call MoveUnit(Picked_0, (300. - dist_0) / 300. + .25, (600. - dist_0), .0, angle_0, .0, true)
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", Picked_0, "origin"))
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set caster_0 = null
	set p_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set Picked_0 = null
endfunction

function Trig_Beorn_Stomp_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0OH'
endfunction

function InitTrig_Beorn_Stomp takes nothing returns nothing
	local integer index = 0
	set gg_trg_Beorn_Stomp_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Beorn_Stomp_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Beorn_Stomp_1, Condition(function Trig_Beorn_Stomp_Conditions))
	call TriggerAddAction(gg_trg_Beorn_Stomp_1, function Trig_Beorn_Stomp_Actions)
endfunction

function Trig_HeroUnitGameSave_Func001C takes nothing returns boolean
	return (IsUnitType(GetEnteringUnit(), UNIT_TYPE_HERO_1)) != null
endfunction

function Trig_HeroUnitGameSave_Actions takes nothing returns nothing
	if (Trig_HeroUnitGameSave_Func001C()) then
		set udg_herounit_1[(1 + GetPlayerId(GetOwningPlayer(GetEnteringUnit())))] = GetEnteringUnit()
		call GroupAddUnit(udg_Gruppa_HeroUnitov_Geroev_1, GetEnteringUnit())
	endif
endfunction

function InitTrig_HeroUnitGameSave takes nothing returns nothing
	set gg_trg_HeroUnitGameSave_1 = CreateTrigger()
	call TriggerRegisterEnterRectSimple(gg_trg_HeroUnitGameSave_1, gg_rct_Oblstb_Tavern_1)
	call TriggerAddAction(gg_trg_HeroUnitGameSave_1, function Trig_HeroUnitGameSave_Actions)
endfunction

function Trig_INIT_Func001Func001C takes nothing returns boolean
	return ((IsUnitType(GetEnumUnit(), UNIT_TYPE_STRUCTURE_1) == false) and (GetUnitTypeId(GetEnumUnit()) != 'h00A')) != null
endfunction

function Trig_INIT_Func001A takes nothing returns nothing
	if (Trig_INIT_Func001Func001C()) then
		set udg_herounit_1[(1 + GetPlayerId(GetOwningPlayer(GetEnumUnit())))] = GetEnumUnit()
		call GroupAddUnit(udg_Gruppa_HeroUnitov_Geroev_1, GetEnumUnit())
		call ForceAddPlayer(udg_IGRAET_1, GetOwningPlayer(GetEnumUnit()))
	endif
endfunction

function Trig_INIT_Func002A takes nothing returns nothing
	call ForceAddPlayer(udg_Gruppa_Igrokov_Vibor_Heroev_1, GetEnumPlayer())
	call CameraSetupApplyForPlayer(true, gg_cam_Kamera_na_taverni_1, GetEnumPlayer(), 0)
	call CreateNUnitsAtLoc(1, 'h00A', GetEnumPlayer(), PolarProjectionBJ(GetRectCenter(gg_rct_Oblstb_Tavern_1), 50., (I2R((1 + GetPlayerId(GetEnumPlayer()))) * 40.)), bj_UNIT_FACING_1)
	set udg_DummyHeroPick_1[(1 + GetPlayerId(GetEnumPlayer()))] = bj_lastCreatedUnit_1
	set udg_System_ShowAbil_And_Items_Hint_1[(1 + GetPlayerId(GetEnumPlayer()))] = true
endfunction

function Trig_INIT_Actions takes nothing returns nothing
	call ForGroupBJ(GetUnitsInRectAll(gg_rct_Oblstb_Tavern_1), function Trig_INIT_Func001A)
	call ForForce(udg_IGRAET_1, function Trig_INIT_Func002A)
	set udg_Heroes_Types_1[1] = 'H01M'
	set udg_MutliBoardHeroIcon_1[1] = "ReplaceableTextures\\CommandButtons\\BTNGuardsman.blp"
	call SaveInteger(udg_hash_1, 'H01M', 84, 1)
	set udg_Heroes_Types_1[2] = 'O005'
	set udg_MutliBoardHeroIcon_1[2] = "ReplaceableTextures\\CommandButtons\\BTNChaosGrunt.blp"
	call SaveInteger(udg_hash_1, 'O005', 84, 2)
	set udg_Heroes_Types_1[3] = 'N012'
	set udg_MutliBoardHeroIcon_1[3] = "ReplaceableTextures\\CommandButtons\\BTNChaosBlademaster.blp"
	call SaveInteger(udg_hash_1, 'N012', 84, 3)
	set udg_Heroes_Types_1[4] = 'E004'
	set udg_MutliBoardHeroIcon_1[4] = "ReplaceableTextures\\CommandButtons\\BTNEvilIllidan.blp"
	call SaveInteger(udg_hash_1, 'E004', 84, 4)
	set udg_Heroes_Types_1[5] = 'H01L'
	set udg_MutliBoardHeroIcon_1[5] = "ReplaceableTextures\\CommandButtons\\BTNSylvanusWindrunner.blp"
	call SaveInteger(udg_hash_1, 'H01L', 84, 5)
	set udg_Heroes_Types_1[6] = 'E001'
	set udg_MutliBoardHeroIcon_1[6] = "ReplaceableTextures\\CommandButtons\\BTNPriest.blp"
	call SaveInteger(udg_hash_1, 'E001', 84, 6)
	set udg_Heroes_Types_1[7] = 'H01I'
	set udg_MutliBoardHeroIcon_1[7] = "ReplaceableTextures\\CommandButtons\\BTNSeaElemental.blp"
	call SaveInteger(udg_hash_1, 'H01I', 84, 7)
	set udg_Heroes_Types_1[8] = 'N00W'
	set udg_MutliBoardHeroIcon_1[8] = "ReplaceableTextures\\CommandButtons\\BTNRevenant.blp"
	call SaveInteger(udg_hash_1, 'N00W', 84, 8)
	set udg_Heroes_Types_1[9] = 'O000'
	set udg_MutliBoardHeroIcon_1[9] = "ReplaceableTextures\\CommandButtons\\BTNArthas.blp"
	call SaveInteger(udg_hash_1, 'O000', 84, 9)
	set udg_Heroes_Types_1[$A] = 'E005'
	set udg_MutliBoardHeroIcon_1[$A] = "ReplaceableTextures\\CommandButtons\\BTNAncientOfWonders.blp"
	call SaveInteger(udg_hash_1, 'E005', 84, $A)
	set udg_Heroes_Types_1[$B] = 'E003'
	set udg_MutliBoardHeroIcon_1[$B] = "ReplaceableTextures\\CommandButtons\\BTNFurion.blp"
	call SaveInteger(udg_hash_1, 'E003', 84, $B)
	set udg_Heroes_Types_1[$C] = 'E007'
	set udg_MutliBoardHeroIcon_1[$C] = "ReplaceableTextures\\CommandButtons\\BTNHuntress.blp"
	call SaveInteger(udg_hash_1, 'E007', 84, $C)
	set udg_Heroes_Types_1[$D] = 'O001'
	set udg_MutliBoardHeroIcon_1[$D] = "ReplaceableTextures\\CommandButtons\\BTNSpiritWalker.blp"
	call SaveInteger(udg_hash_1, 'O001', 84, $D)
	set udg_Heroes_Types_1[$E] = 'E008'
	set udg_MutliBoardHeroIcon_1[$E] = "ReplaceableTextures\\CommandButtons\\BTNHeroWarden.blp"
	call SaveInteger(udg_hash_1, 'E008', 84, $E)
	set udg_Heroes_Types_1[$F] = 'H00O'
	set udg_MutliBoardHeroIcon_1[$F] = "ReplaceableTextures\\CommandButtons\\BTNGarithos.blp"
	call SaveInteger(udg_hash_1, 'H00O', 84, $F)
	set udg_Heroes_Types_1[16] = 'H00Q'
	set udg_MutliBoardHeroIcon_1[16] = "ReplaceableTextures\\CommandButtons\\BTNHeroArchMage.blp"
	call SaveInteger(udg_hash_1, 'H00Q', 84, 16)
	set udg_Heroes_Types_1[17] = 'N01T'
	set udg_MutliBoardHeroIcon_1[17] = "ReplaceableTextures\\CommandButtons\\BTNHeroAlchemist.blp"
	call SaveInteger(udg_hash_1, 'N01T', 84, 17)
	set udg_Heroes_Types_1[18] = 'H00R'
	set udg_MutliBoardHeroIcon_1[18] = "ReplaceableTextures\\CommandButtons\\BTNRifleman.blp"
	call SaveInteger(udg_hash_1, 'H00R', 84, 18)
	set udg_Total_Heroes_Count_1 = 18
	set udg_Random_Hero_Count_1 = 18
	set bj_forLoopAIndex_1 = 1
	set bj_forLoopAIndexEnd_1 = udg_Total_Heroes_Count_1
	loop
		exitwhen bj_forLoopAIndex_1 > bj_forLoopAIndexEnd_1
		set udg_Heroes_Random_Data_1[bj_forLoopAIndex_1] = bj_forLoopAIndex_1
		set udg_Is_Player_Got_Randomed_1[bj_forLoopAIndex_1] = false
		set bj_forLoopAIndex_1 = bj_forLoopAIndex_1 + 1
	endloop
endfunction

function InitTrig_INIT takes nothing returns nothing
	set gg_trg_INIT_1 = CreateTrigger()
	call TriggerRegisterTimerEventSingle(gg_trg_INIT_1, 1.)
	call TriggerAddAction(gg_trg_INIT_1, function Trig_INIT_Actions)
endfunction

function Trig_Pick_Hero_Upgrade_Func006A takes nothing returns nothing
	call SetPlayerTechMaxAllowed(GetEnumPlayer(), GetUnitTypeId(udg_Temp_Unit_1), 0)
endfunction

function Trig_Pick_Hero_Upgrade_Actions takes nothing returns nothing
	local unit hero
	local player p
	local integer heroid
	local integer pid
	local boolean randomed = false
	local integer i
	if udg_Hero_Randomed_1 != null then
		set hero_0 = udg_Hero_Randomed_1
		set randomed_0 = true
		set udg_Hero_Randomed_1 = null
	else
		set hero_0 = GetSoldUnit()
	endif
	set p_0 = GetOwningPlayer(hero_0)
	set pid_0 = GetPlayerId(p_0) + 1
	set heroid_0 = GetUnitTypeId(hero_0)
	set udg_Temp_Unit_1 = hero_0
	set udg_Temp_Integer_1[1] = LoadInteger(udg_hash_1, heroid_0, 84)
	call MultiboardSetItemIconBJ(udg_MultiBoard_1, 1, udg_PlayerNumberInMB_1[pid_0], udg_MutliBoardHeroIcon_1[udg_Temp_Integer_1[1]])
	call MultiboardSetItemValueBJ(udg_MultiBoard_1, 6, udg_PlayerNumberInMB_1[pid_0], (udg_ColorString_1[22] + ("1|r")))
	call SetPlayerTechMaxAllowed(p_0, 'HERO', 0)
	call ForForce(bj_FORCE_ALL_PLAYERS_1, function Trig_Pick_Hero_Upgrade_Func006A)
	call ForceRemovePlayer(udg_Gruppa_Igrokov_Vibor_Heroev_1, p_0)
	if (GetLocalPlayer() == p_0) then
		call ClearSelection()
		call SelectUnit(hero_0, true)
		call CameraSetupApplyForceDuration(gg_cam_Kamera_glavnoi_bazi_1, true, .0)
	endif
	set bj_lastCreatedItem_1 = CreateItem('I01E', .0, .0)
	call UnitAddItem(hero_0, bj_lastCreatedItem_1)
	call SetUnitPosition(hero_0, 1232., -6368.)
	call RemoveUnit(udg_DummyHeroPick_1[pid_0])
	set bj_lastCreatedFogModifier_1 = CreateFogModifierRadius(p_0, FOG_OF_WAR_VISIBLE_1, 1024., -5696., 1700., true, false)
	call FogModifierStart(bj_lastCreatedFogModifier_1)
	set udg_BaseVisionFogModifier_1[pid_0] = bj_lastCreatedFogModifier_1
	call MoveDammiReferencePanel(hero_0)
	if heroid_0 == 'H01M' then
		call SetUnitColor(hero_0, PLAYER_COLOR_RED_1)
		call SaveStr(udg_hash_1, heroid_0, 91, "melee")
		call SaveStr(udg_hash_1, heroid_0, 70, "str")
		set udg_Hero_Player_Color_String_1[pid_0] = "|cFFC80000"
		if TriggerEvaluate(gg_trg_Guardsman_Load_1) then
			call TriggerExecute(gg_trg_Guardsman_Load_1)
		endif
	endif
	if heroid_0 == 'O005' then
		call SetUnitColor(hero_0, ConvertPlayerColor($C))
		call SaveStr(udg_hash_1, heroid_0, 91, "melee")
		call SaveStr(udg_hash_1, heroid_0, 70, "str")
		call ForceAddPlayer(udg_Drenor_Bull_Hint_Player_Group_1, p_0)
		set udg_Hero_Player_Color_String_1[pid_0] = "|cFFF0692D"
		if TriggerEvaluate(gg_trg_Drenor_Bull_Load_1) then
			call TriggerExecute(gg_trg_Drenor_Bull_Load_1)
		endif
	endif
	if heroid_0 == 'O000' then
		call SetUnitColor(hero_0, PLAYER_COLOR_ORANGE_1)
		call SaveStr(udg_hash_1, heroid_0, 91, "melee")
		call SaveStr(udg_hash_1, heroid_0, 70, "str")
		set udg_Hero_Player_Color_String_1[pid_0] = "|cFFF89A00"
		if TriggerEvaluate(gg_trg_Paladin_Load_1) then
			call TriggerExecute(gg_trg_Paladin_Load_1)
		endif
	endif
	if heroid_0 == 'E005' then
		call SetUnitColor(hero_0, PLAYER_COLOR_LIGHT_GRAY_1)
		call SaveStr(udg_hash_1, heroid_0, 91, "melee")
		call SaveStr(udg_hash_1, heroid_0, 70, "str")
		set udg_Hero_Player_Color_String_1[pid_0] = "|cFFAFAFAF"
		call SetUnitAnimation(hero_0, "stand")
		if TriggerEvaluate(gg_trg_Stone_Guard_Load_1) then
			call TriggerExecute(gg_trg_Stone_Guard_Load_1)
		endif
	endif
	if heroid_0 == 'N012' then
		call SetUnitColor(hero_0, PLAYER_COLOR_RED_1)
		call SaveStr(udg_hash_1, heroid_0, 91, "melee")
		call SaveStr(udg_hash_1, heroid_0, 70, "agi")
		set udg_Hero_Player_Color_String_1[pid_0] = "|cFFFF3200"
		if TriggerEvaluate(gg_trg_BladeMaster_Load_1) then
			call TriggerExecute(gg_trg_BladeMaster_Load_1)
		endif
	endif
	if heroid_0 == 'E004' then
		call SetUnitColor(hero_0, PLAYER_COLOR_PINK_1)
		call SaveStr(udg_hash_1, heroid_0, 91, "melee")
		call SaveStr(udg_hash_1, heroid_0, 70, "agi")
		set udg_Hero_Player_Color_String_1[pid_0] = "|cFFB496AF"
		if TriggerEvaluate(gg_trg_Illusionist_Load_1) then
			call TriggerExecute(gg_trg_Illusionist_Load_1)
		endif
	endif
	if heroid_0 == 'H01L' then
		call SetUnitColor(hero_0, PLAYER_COLOR_BLUE_1)
		call SaveStr(udg_hash_1, heroid_0, 91, "ranged")
		call SaveStr(udg_hash_1, heroid_0, 70, "agi")
		set udg_Hero_Player_Color_String_1[pid_0] = "|cFF146EE6"
		if TriggerEvaluate(gg_trg_Ranger_Load_1) then
			call TriggerExecute(gg_trg_Ranger_Load_1)
		endif
	endif
	if heroid_0 == 'E007' then
		call SetUnitColor(hero_0, PLAYER_COLOR_PURPLE_1)
		call SaveStr(udg_hash_1, heroid_0, 91, "ranged")
		call SaveStr(udg_hash_1, heroid_0, 70, "agi")
		set udg_Hero_Player_Color_String_1[pid_0] = "|cFF9664FF"
		if TriggerEvaluate(gg_trg_MoonWarrior_Load_1) then
			call TriggerExecute(gg_trg_MoonWarrior_Load_1)
		endif
	endif
	if heroid_0 == 'E001' then
		call SetUnitColor(hero_0, PLAYER_COLOR_YELLOW_1)
		call SaveStr(udg_hash_1, heroid_0, 91, "ranged")
		call SaveStr(udg_hash_1, heroid_0, 70, "int")
		set udg_Hero_Player_Color_String_1[pid_0] = "|cFFFFFF64"
		if TriggerEvaluate(gg_trg_Healer_Load_1) then
			call TriggerExecute(gg_trg_Healer_Load_1)
		endif
	endif
	if heroid_0 == 'H01I' then
		call SetUnitColor(hero_0, PLAYER_COLOR_CYAN_1)
		call SaveStr(udg_hash_1, heroid_0, 91, "ranged")
		call SaveStr(udg_hash_1, heroid_0, 70, "int")
		set udg_Hero_Player_Color_String_1[pid_0] = "|cFF64DCFA"
		if TriggerEvaluate(gg_trg_Water_Elemental_Load_1) then
			call TriggerExecute(gg_trg_Water_Elemental_Load_1)
		endif
	endif
	if heroid_0 == 'N00W' then
		call SetUnitColor(hero_0, PLAYER_COLOR_LIGHT_GRAY_1)
		call SaveStr(udg_hash_1, heroid_0, 91, "ranged")
		call SaveStr(udg_hash_1, heroid_0, 70, "int")
		set udg_Hero_Player_Color_String_1[pid_0] = "|cFF9696AF"
		if TriggerEvaluate(gg_trg_Master_of_Lightnings_Load_1) then
			call TriggerExecute(gg_trg_Master_of_Lightnings_Load_1)
		endif
	endif
	if heroid_0 == 'E003' then
		call SetUnitColor(hero_0, PLAYER_COLOR_GREEN_1)
		call SaveStr(udg_hash_1, heroid_0, 91, "ranged")
		call SaveStr(udg_hash_1, heroid_0, 70, "int")
		set udg_Hero_Player_Color_String_1[pid_0] = "|cff00CD00"
		if TriggerEvaluate(gg_trg_Archdruid_Load_1) then
			call TriggerExecute(gg_trg_Archdruid_Load_1)
		endif
	endif
	if heroid_0 == 'O001' then
		call SetUnitColor(hero_0, PLAYER_COLOR_ORANGE_1)
		call SaveStr(udg_hash_1, heroid_0, 91, "ranged")
		call SaveStr(udg_hash_1, heroid_0, 70, "int")
		set udg_Hero_Player_Color_String_1[pid_0] = "|cffEE9A00"
		if TriggerEvaluate(gg_trg_SpiritBreaker_Load_1) then
			call TriggerExecute(gg_trg_SpiritBreaker_Load_1)
		endif
	endif
	if heroid_0 == 'E008' then
		call SetUnitColor(hero_0, PLAYER_COLOR_LIGHT_BLUE_1)
		call SaveStr(udg_hash_1, heroid_0, 91, "melee")
		call SaveStr(udg_hash_1, heroid_0, 70, "agi")
		set udg_Hero_Player_Color_String_1[pid_0] = "|cffB0E2FF"
		if TriggerEvaluate(gg_trg_Warden_Load_1) then
			call TriggerExecute(gg_trg_Warden_Load_1)
		endif
	endif
	if heroid_0 == 'H00O' then
		call SetUnitColor(hero_0, PLAYER_COLOR_YELLOW_1)
		call SaveStr(udg_hash_1, heroid_0, 91, "melee")
		call SaveStr(udg_hash_1, heroid_0, 70, "str")
		set udg_Hero_Player_Color_String_1[pid_0] = "|cFFFFE150"
		if TriggerEvaluate(gg_trg_Marshal_Load_1) then
			call TriggerExecute(gg_trg_Marshal_Load_1)
		endif
	endif
	if heroid_0 == 'H00Q' then
		call SetUnitColor(hero_0, PLAYER_COLOR_BLUE_1)
		set udg_Hero_Player_Color_String_1[pid_0] = "|cFF6496FF"
		call SaveStr(udg_hash_1, heroid_0, 70, "int")
		call SaveStr(udg_hash_1, heroid_0, 91, "ranged")
		if TriggerEvaluate(gg_trg_Load_ArchMage_1) then
			call TriggerExecute(gg_trg_Load_ArchMage_1)
		endif
	endif
	if heroid_0 == 'N01T' then
		call SetUnitColor(hero_0, PLAYER_COLOR_AQUA_1)
		set udg_Hero_Player_Color_String_1[pid_0] = "|cFF00C800"
		call SaveStr(udg_hash_1, heroid_0, 70, "str")
		call SaveStr(udg_hash_1, heroid_0, 91, "melee")
		if TriggerEvaluate(gg_trg_Load_Alchemist_1) then
			call TriggerExecute(gg_trg_Load_Alchemist_1)
		endif
	endif
	if heroid_0 == 'H00R' then
		call SetUnitColor(hero_0, PLAYER_COLOR_LIGHT_BLUE_1)
		call SaveStr(udg_hash_1, heroid_0, 91, "ranged")
		call SaveStr(udg_hash_1, heroid_0, 70, "agi")
		set udg_Hero_Player_Color_String_1[pid_0] = "|cffC0C0C0"
		if TriggerEvaluate(gg_trg_Load_Sniper_1) then
			call TriggerExecute(gg_trg_Load_Sniper_1)
		endif
	endif
	set udg_Is_Player_Got_Randomed_1[pid_0] = true
	set udg_Heroes_Random_Data_1[LoadInteger(udg_hash_1, heroid_0, 84)] = udg_Heroes_Random_Data_1[udg_Total_Heroes_Count_1]
	set udg_Total_Heroes_Count_1 = udg_Total_Heroes_Count_1 - 1
	if randomed_0 == false and IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS_1) then
		call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, udg_ColorString_1[pid_0] + GetPlayerName(p_0) + "|r выбрал героя: " + udg_Hero_Player_Color_String_1[pid_0] + GetUnitName(hero_0) + "|r")
	endif
	if randomed_0 and IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS_1) then
		call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, udg_ColorString_1[pid_0] + GetPlayerName(p_0) + "|r наугад выбрал героя: " + udg_Hero_Player_Color_String_1[pid_0] + GetUnitName(hero_0) + "|r")
	endif
	if randomed_0 then
		call SetPlayerState(p_0, PLAYER_STATE_RESOURCE_GOLD_1, GetPlayerState(p_0, PLAYER_STATE_RESOURCE_GOLD_1) + $FA)
		if (GetLocalPlayer() == p_0) then
			call DisplayTimedTextToPlayer(GetLocalPlayer(), 0, 0, 10., "За случайный выбор героя вы получили |cFFFFFF00+250|r золота!")
		endif
	endif
endfunction

function Trig_Pick_Hero_Upgrade_Conditions takes nothing returns boolean
	return (IsUnitType(GetSoldUnit(), UNIT_TYPE_HERO_1) and IsPlayerInForce(GetOwningPlayer(GetSoldUnit()), udg_Gruppa_Igrokov_Vibor_Heroev_1)) != null
endfunction

function InitTrig_Pick_Hero_Upgrade takes nothing returns nothing
	local integer index = 0
	set gg_trg_Pick_Hero_Upgrade_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Pick_Hero_Upgrade_1, Player(index_0), EVENT_PLAYER_UNIT_SELL_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Pick_Hero_Upgrade_1, Condition(function Trig_Pick_Hero_Upgrade_Conditions))
	call TriggerAddAction(gg_trg_Pick_Hero_Upgrade_1, function Trig_Pick_Hero_Upgrade_Actions)
endfunction

function Trig_Hero_Dead_MultiBoard_Check_Actions takes nothing returns nothing
	local timer tmb = GetExpiredTimer()
	local integer htmb = GetHandleId(tmb_0)
	local real time = LoadReal(udg_hash_1, htmb_0, 1)
	local integer pnumber = LoadInteger(udg_hash_1, htmb_0, 2)
	if time_0 > 0 then
		set time_0 = time_0 - 1
		call SaveReal(udg_hash_1, htmb_0, 1, time_0)
		call MultiboardSetItemValueBJ(udg_MultiBoard_1, 2, udg_PlayerNumberInMB_1[pnumber_0], (udg_ColorString_1[pnumber_0] + GetPlayerName(Player(pnumber_0 - 1)) + "|r (" + udg_ColorString_1[pnumber_0] + I2S((R2I(time_0))) + "|r)"))
	else
		set time_0 = 0
		call MultiboardSetItemValueBJ(udg_MultiBoard_1, 2, udg_PlayerNumberInMB_1[pnumber_0], (udg_ColorString_1[pnumber_0] + GetPlayerName(Player(pnumber_0 - 1)) + "|r"))
		call FlushChildHashtable(udg_hash_1, htmb_0)
		call DestroyTimer(tmb_0)
	endif
	set udg_Hero_Respawn_Time_1[pnumber_0] = R2I(time_0)
	set tmb_0 = null
endfunction

function Trig_Hero_Dead_Timer2_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit u = LoadUnitHandle(udg_hash_1, h_0, 1)
	call UnitRemoveAbility(u_0, 'Avul')
	call DestroyTimer(t_0)
	call FlushChildHashtable(udg_hash_1, h_0)
	set t_0 = null
	set u_0 = null
endfunction

function Trig_Hero_Dead_Timer_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit u = LoadUnitHandle(udg_hash_1, h_0, 1)
	local real x = GetRectCenterX(gg_rct_Respawn_Heroes_1)
	local real y = GetRectCenterY(gg_rct_Respawn_Heroes_1)
	local timerdialog td = LoadTimerDialogHandle(udg_hash_1, h_0, 2)
	local camerasetup theCam = CreateCameraSetup()
	call TimerStart(t_0, 4., false, function Trig_Hero_Dead_Timer2_Actions)
	call ReviveHero(u_0, x_0, y_0, true)
	call SetUnitState(u_0, UNIT_STATE_MANA_1, GetUnitState(u_0, UNIT_STATE_MAX_MANA_1))
	call SetUnitState(u_0, UNIT_STATE_LIFE_1, GetUnitState(u_0, UNIT_STATE_MAX_LIFE_1))
	call UnitAddAbility(u_0, 'Avul')
	call DisplayTextToPlayer(GetOwningPlayer(u_0), 500., 500, "|cFFFFFF00Ваш Герой Воскрешен!!!|r")
	if (GetLocalPlayer() == GetOwningPlayer(u_0)) and udg_IsGameEnd_1 == false then
		call CameraSetupSetField(theCam_0, CAMERA_FIELD_TARGET_DISTANCE_1, GetCameraField(CAMERA_FIELD_TARGET_DISTANCE_1), 0)
		call CameraSetupSetField(theCam_0, CAMERA_FIELD_FARZ_1, GetCameraField(CAMERA_FIELD_FARZ_1), 0)
		call CameraSetupSetField(theCam_0, CAMERA_FIELD_ZOFFSET_1, GetCameraField(CAMERA_FIELD_ZOFFSET_1), 0)
		call CameraSetupSetField(theCam_0, CAMERA_FIELD_ANGLE_OF_ATTACK_1, bj_RADTODEG_1 * GetCameraField(CAMERA_FIELD_ANGLE_OF_ATTACK_1), 0)
		call CameraSetupSetField(theCam_0, CAMERA_FIELD_FIELD_OF_VIEW_1, bj_RADTODEG_1 * GetCameraField(CAMERA_FIELD_FIELD_OF_VIEW_1), 0)
		call CameraSetupSetField(theCam_0, CAMERA_FIELD_ROLL_1, bj_RADTODEG_1 * GetCameraField(CAMERA_FIELD_ROLL_1), 0)
		call CameraSetupSetField(theCam_0, CAMERA_FIELD_ROTATION_1, bj_RADTODEG_1 * GetCameraField(CAMERA_FIELD_ROTATION_1), 0)
		call CameraSetupSetDestPosition(theCam_0, GetUnitX(u_0), GetUnitY(u_0), 0)
		call CameraSetupApplyForceDuration(theCam_0, true, 0)
		call ClearSelection()
		call SelectUnit(u_0, true)
	endif
	call DestroyTimerDialog(td_0)
	set t_0 = null
	set u_0 = null
	set td_0 = null
endfunction

function Trig_Hero_Dead_Conditions takes nothing returns boolean
	return (IsUnitType(GetDyingUnit(), UNIT_TYPE_HERO_1) and IsUnitIllusion(GetDyingUnit()) == false and GetPlayerId(GetOwningPlayer(GetDyingUnit())) <= 8 and GetOwningPlayer(GetDyingUnit()) != Player($F) and GetOwningPlayer(GetDyingUnit()) != Player($B)) != null
endfunction

function Trig_Hero_Dead_Actions takes nothing returns nothing
	local timer t = CreateTimer()
	local timerdialog td = CreateTimerDialog(t_0)
	local integer h = GetHandleId(t_0)
	local unit u = GetDyingUnit()
	local player p = GetOwningPlayer(u_0)
	local integer pnumber = GetPlayerId(p_0) + 1
	local timer tmb = CreateTimer()
	local integer htmb = GetHandleId(tmb_0)
	local real time = 5. + (2. * GetHeroLevel(u_0))
	if LoadReal(udg_hash_1, GetHandleId(u_0), 't') > .0 then
		set time_0 = R2I(time_0 * (1. - LoadReal(udg_hash_1, GetHandleId(u_0), 't')))
		call SaveReal(udg_hash_1, GetHandleId(u_0), 't', .0)
	endif
	set time_0 = time_0 * (1. - HaveAnyTimeTalisman())
	call SaveUnitHandle(udg_hash_1, h_0, 1, u_0)
	call SaveTimerDialogHandle(udg_hash_1, h_0, 2, td_0)
	if pnumber_0 <= 9 then
		set udg_MultiBoard_Player_Deaths_Count_1[pnumber_0] = udg_MultiBoard_Player_Deaths_Count_1[pnumber_0] + 1
		call MultiboardSetItemValueBJ(udg_MultiBoard_1, 4, udg_PlayerNumberInMB_1[pnumber_0], udg_ColorString_1[21] + I2S(udg_MultiBoard_Player_Deaths_Count_1[pnumber_0]) + "|r")
	endif
	call TimerStart(t_0, time_0, false, function Trig_Hero_Dead_Timer_Actions)
	call TimerDialogDisplay(td_0, false)
	call TimerDialogSetTitle(td_0, "Respawn in:")
	if (GetLocalPlayer() == p_0) then
		call TimerDialogDisplay(td_0, true)
		call TimerDialogSetTitleColor(td_0, $FF, $E6, 80, 65)
		call TimerDialogSetTimeColor(td_0, $FF, 45, 45, 20)
	endif
	if (IsPlayerInForce(GetLocalPlayer(), udg_IGRAET_1)) then
		call DisplayTimedTextToPlayer(GetLocalPlayer(), .0, .0, 10., "Герой " + udg_Hero_Player_Color_String_1[pnumber_0] + GetUnitName(u_0) + "|r (" + udg_ColorString_1[pnumber_0] + GetPlayerName(p_0) + "|r) погибает!!!")
	endif
	set udg_Hero_Respawn_Time_1[pnumber_0] = R2I(time_0)
	call SaveReal(udg_hash_1, htmb_0, 1, time_0)
	call SaveInteger(udg_hash_1, htmb_0, 2, pnumber_0)
	call TimerStart(tmb_0, 1., true, function Trig_Hero_Dead_MultiBoard_Check_Actions)
	set u_0 = null
	set t_0 = null
	set tmb_0 = null
	set td_0 = null
endfunction

function InitTrig_Hero_Dead takes nothing returns nothing
	local integer index = 0
	set gg_trg_Hero_Dead_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Hero_Dead_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Hero_Dead_1, Condition(function Trig_Hero_Dead_Conditions))
	call TriggerAddAction(gg_trg_Hero_Dead_1, function Trig_Hero_Dead_Actions)
endfunction

function Trig_Duel_Checking_On_HighGround_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit hero1 = LoadUnitHandle(udg_hash_1, h_0, 1)
	local unit hero2 = LoadUnitHandle(udg_hash_1, h_0, 2)
	local real x1 = GetUnitX(hero1_0)
	local real y1 = GetUnitY(hero1_0)
	local real x2 = GetUnitX(hero2_0)
	local real y2 = GetUnitY(hero2_0)
	local integer h2 = LoadInteger(udg_hash_1, h_0, 3)
	if LoadBoolean(udg_hash_1, h2_0, $D) == false then
		if not ((GetRectMinX(gg_rct_Hero_Arena_1) <= x1_0) and (x1_0 <= GetRectMaxX(gg_rct_Hero_Arena_1)) and (GetRectMinY(gg_rct_Hero_Arena_1) <= y1_0) and (y1_0 <= GetRectMaxY(gg_rct_Hero_Arena_1))) then
			call SetUnitPosition(hero1_0, 2000., 2950.)
			if (GetLocalPlayer() == GetOwningPlayer(hero1_0)) then
				call PanCameraToTimed(2000., 2950., .0)
			endif
			call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl", 2000., 2950.))
		endif
		if not ((GetRectMinX(gg_rct_Hero_Arena_1) <= x2_0) and (x2_0 <= GetRectMaxX(gg_rct_Hero_Arena_1)) and (GetRectMinY(gg_rct_Hero_Arena_1) <= y2_0) and (y2_0 <= GetRectMaxY(gg_rct_Hero_Arena_1))) then
			call SetUnitPosition(hero2_0, 2000., 2950.)
			if (GetLocalPlayer() == GetOwningPlayer(hero2_0)) then
				call PanCameraToTimed(2000., 2950., .0)
			endif
			call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl", 2000., 2950.))
		endif
	else
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set hero1_0 = null
	set hero2_0 = null
endfunction

function Trig_Duel_Timer_Dialog_Destroy_2sec_wait_Actions takes nothing returns nothing
	local timer t2secwait = GetExpiredTimer()
	call ExecuteFunc("Trig_Hero_Death_On_Duel_2secwait_Actions")
	call DestroyTimer(t2secwait_0)
	set t2secwait_0 = null
endfunction

function Trig_Duel_Timer_Dialog_Destroy_Actions takes nothing returns nothing
	local rect rct = gg_rct_Hero_Arena_1
	local integer h = GetHandleId(rct_0)
	local timer t = GetExpiredTimer()
	local integer ht = GetHandleId(t_0)
	local timerdialog td = LoadTimerDialogHandle(udg_hash_1, ht_0, 1)
	local timer t2secwait = CreateTimer()
	local integer counterduel = LoadInteger(udg_hash_1, h_0, $A)
	local unit hero1 = udg_herounit_1[LoadInteger(udg_hash_1, h_0, counterduel_0)]
	local unit hero2 = udg_herounit_1[LoadInteger(udg_hash_1, h_0, counterduel_0 + 1)]
	local player pw = GetOwningPlayer(hero1_0)
	local player pd = GetOwningPlayer(hero2_0)
	local integer gold = $96 + (udg_Nomer_samoi_volni_1 * 60)
	local integer xp = 300 + (udg_Nomer_samoi_volni_1 * 'd')
	if LoadBoolean(udg_hash_1, h_0, $D) == false then
		call SaveBoolean(udg_hash_1, h_0, $D, true)
		call DestroyTimerDialog(td_0)
		call CinematicFadeBJ(1, 2.5, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1)
		call TimerStart(t2secwait_0, 2.5, false, function Trig_Duel_Timer_Dialog_Destroy_2sec_wait_Actions)
		call SetUnitInvulnerable(hero1_0, true)
		call SetUnitInvulnerable(hero2_0, true)
		if IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS_1) then
			call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Дуэль закончилась вничью")
		endif
		if (GetLocalPlayer() == pw_0) then
			call DisplayTextToPlayer(pw_0, .0, .0, "Дуэль закончилась вничью, ваш герой получaeт |cFFFFFF00" + I2S(xp_0) + " опыта|r и |cFFFFFF00" + I2S(gold_0) + " золота|r")
		endif
		call AddHeroXP(hero1_0, xp_0, false)
		call SetPlayerState(pw_0, PLAYER_STATE_RESOURCE_GOLD_1, GetPlayerState(pw_0, PLAYER_STATE_RESOURCE_GOLD_1) + gold_0)
		if (GetLocalPlayer() == pd_0) then
			call DisplayTextToPlayer(pw_0, .0, .0, "Дуэль закончилась вничью, ваш герой получaeт |cFFFFFF00" + I2S(xp_0) + " опыта|r и |cFFFFFF00" + I2S(gold_0) + " золота|r")
		endif
		call AddHeroXP(hero2_0, xp_0, false)
		call SetPlayerState(pd_0, PLAYER_STATE_RESOURCE_GOLD_1, GetPlayerState(pd_0, PLAYER_STATE_RESOURCE_GOLD_1) + gold_0)
	endif
	set rct_0 = null
	call DestroyTimer(t_0)
	set t_0 = null
	call FlushChildHashtable(udg_hash_1, ht_0)
	set td_0 = null
	set t2secwait_0 = null
	set hero1_0 = null
	set hero2_0 = null
	set pw_0 = null
	set pd_0 = null
endfunction

function Trig_Duel_Start_Fight_Actions takes nothing returns nothing
	local rect rct = gg_rct_Hero_Arena_1
	local integer h = GetHandleId(rct_0)
	local integer counterduel = LoadInteger(udg_hash_1, h_0, $A)
	local unit hero1 = udg_herounit_1[LoadInteger(udg_hash_1, h_0, counterduel_0)]
	local unit hero2 = udg_herounit_1[LoadInteger(udg_hash_1, h_0, counterduel_0 + 1)]
	local timer t = CreateTimer()
	local timerdialog td = CreateTimerDialog(t_0)
	local integer ht = GetHandleId(t_0)
	local timer t2
	local integer h2
	call SoundForPlayer(GetOwningPlayer(hero1_0), 4)
	call SoundForPlayer(GetOwningPlayer(hero2_0), 4)
	call TimerDialogSetTitle(td_0, "Дуэль:")
	call TimerDialogDisplay(td_0, true)
	call TimerDialogSetTitleColor(td_0, $FF, $E6, 80, 65)
	call TimerDialogSetTimeColor(td_0, $FF, 0, 0, 20)
	call SaveTimerDialogHandle(udg_hash_1, ht_0, 1, td_0)
	call SaveTimerHandle(udg_hash_1, h_0, $D, t_0)
	call SaveTimerDialogHandle(udg_hash_1, h_0, $E, td_0)
	if hero1_0 != null and hero2_0 != null then
		set hero1_0 = udg_herounit_1[LoadInteger(udg_hash_1, h_0, counterduel_0)]
		set hero2_0 = udg_herounit_1[LoadInteger(udg_hash_1, h_0, counterduel_0 + 1)]
		call PauseUnit(hero1_0, false)
		call PauseUnit(hero2_0, false)
		call IssueTargetOrderById(hero1_0, $D000F, hero2_0)
		call IssueTargetOrderById(hero2_0, $D000F, hero1_0)
		set t2_0 = CreateTimer()
		set h2_0 = GetHandleId(t2_0)
		call SaveUnitHandle(udg_hash_1, h2_0, 1, hero1_0)
		call SaveUnitHandle(udg_hash_1, h2_0, 2, hero2_0)
		call SaveInteger(udg_hash_1, h2_0, 3, h_0)
		call TimerStart(t2_0, .5, true, function Trig_Duel_Checking_On_HighGround_Actions)
		call TimerStart(t_0, 120., false, function Trig_Duel_Timer_Dialog_Destroy_Actions)
	endif
	call DestroyTimer(GetExpiredTimer())
	set rct_0 = null
	set hero1_0 = null
	set hero2_0 = null
	set t_0 = null
	set td_0 = null
endfunction

function Trig_Duel_TextTag_Size_Increase_Actions takes nothing returns nothing
	local timer ttxt = GetExpiredTimer()
	local integer httxt = GetHandleId(ttxt_0)
	local rect rct = gg_rct_Hero_Arena_1
	local texttag txt = LoadTextTagHandle(udg_hash_1, httxt_0, 1)
	local integer count = LoadInteger(udg_hash_1, httxt_0, 2)
	if count_0 <= 2 then
		if count_0 == 0 then
			call SetTextTagText(txt_0, "2", .05)
		endif
		if count_0 == 1 then
			call SetTextTagText(txt_0, "1", .05)
		endif
		if count_0 == 2 then
			call SetTextTagText(txt_0, "FIGHT!", .05)
			call SetTextTagPos(txt_0, GetRectCenterX(rct_0) - 80., GetRectCenterY(rct_0), .0)
		endif
		set count_0 = count_0 + 1
		call SaveInteger(udg_hash_1, httxt_0, 2, count_0)
	else
		call DestroyTextTag(txt_0)
		call DestroyTimer(ttxt_0)
		call FlushChildHashtable(udg_hash_1, httxt_0)
	endif
	set ttxt_0 = null
	set rct_0 = null
	set txt_0 = null
endfunction

function Trig_Duel_Round_Actions takes nothing returns nothing
	local rect rct = gg_rct_Hero_Arena_1
	local real x = GetRectCenterX(rct_0)
	local real y = GetRectCenterY(rct_0)
	local integer h = GetHandleId(rct_0)
	local integer counterduel = LoadInteger(udg_hash_1, h_0, $A)
	local integer maxplayers = LoadInteger(udg_hash_1, h_0, $B)
	local boolean endduels = LoadBoolean(udg_hash_1, h_0, $C)
	local timer t = CreateTimer()
	local integer ht = GetHandleId(t_0)
	local integer number1
	local integer number2
	local unit hero1
	local unit hero2
	local integer i = 1
	local real xc
	local real yc
	local texttag txt
	local timer ttxt
	local real perekluchatel = 0
	local player p1
	local player p2
	local group gruppa
	if maxplayers_0 >= counterduel_0 + 1 then
		set number1_0 = LoadInteger(udg_hash_1, h_0, counterduel_0)
		set number2_0 = LoadInteger(udg_hash_1, h_0, counterduel_0 + 1)
		set hero1_0 = udg_herounit_1[number1_0]
		set hero2_0 = udg_herounit_1[number2_0]
		call SaveBoolean(udg_hash_1, h_0, $D, false)
		set txt_0 = CreateTextTag()
		set ttxt_0 = CreateTimer()
		call SetTextTagText(txt_0, "3", .05)
		call SetTextTagColor(txt_0, $FF, 0, 0, 0)
		call SetTextTagPos(txt_0, x_0, y_0, .0)
		call SetTextTagPermanent(txt_0, false)
		call SetTextTagLifespan(txt_0, 1215752191.)
		call SetTextTagFadepoint(txt_0, .0)
		call SaveTextTagHandle(udg_hash_1, GetHandleId(ttxt_0), 1, txt_0)
		call SaveInteger(udg_hash_1, GetHandleId(ttxt_0), 2, 0)
		call TimerStart(ttxt_0, 1., true, function Trig_Duel_TextTag_Size_Increase_Actions)
		set p1_0 = GetOwningPlayer(hero1_0)
		set p2_0 = GetOwningPlayer(hero2_0)
		if (IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS_1)) then
			call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Дуэль №" + udg_ColorString_1[20] + I2S(R2I((counterduel_0 / 2) + 1)) + "|r: " + udg_ColorString_1[GetPlayerId(p1_0) + 1] + GetPlayerName(p1_0) + "|r против " + udg_ColorString_1[GetPlayerId(p2_0) + 1] + GetPlayerName(p2_0) + "|r")
		endif
		call ShowUnit(hero1_0, true)
		call ShowUnit(hero2_0, true)
		call SetUnitPosition(hero1_0, x_0 + 500. * Cos(180. * bj_DEGTORAD_1), y_0)
		call SetUnitPosition(hero2_0, x_0 + 500. * Cos(.0 * bj_DEGTORAD_1), y_0)
		call PauseUnit(hero1_0, true)
		call PauseUnit(hero2_0, true)
		call SetUnitFacing(hero1_0, .0)
		call SetUnitFacing(hero2_0, 180.)
		call SetUnitState(hero1_0, UNIT_STATE_LIFE_1, $540BE3FF)
		call SetUnitState(hero1_0, UNIT_STATE_MANA_1, $540BE3FF)
		call SetUnitState(hero2_0, UNIT_STATE_LIFE_1, $540BE3FF)
		call SetUnitState(hero2_0, UNIT_STATE_MANA_1, $540BE3FF)
		if (GetLocalPlayer() == GetOwningPlayer(hero1_0)) then
			call ClearSelection()
			call SelectUnit(hero1_0, true)
			call PanCameraToTimed(x_0, y_0, .0)
		endif
		if (GetLocalPlayer() == GetOwningPlayer(hero2_0)) then
			call ClearSelection()
			call SelectUnit(hero2_0, true)
			call PanCameraToTimed(x_0, y_0, .0)
		endif
		set gruppa_0 = CreateGroup()
		call GroupEnumUnitsInRect(gruppa_0, gg_rct_Hero_Arena_1, null)
		call KillSummonsAndIllusions(gruppa_0)
		call SetPlayerAllianceStateBJ(Player(number1_0 - 1), Player(number2_0 - 1), 0)
		call SetPlayerAllianceStateBJ(Player(number2_0 - 1), Player(number1_0 - 1), 0)
		call TimerStart(t_0, 4., false, function Trig_Duel_Start_Fight_Actions)
	else
		call DisableTrigger(gg_trg_Hero_Death_On_Duel_1)
		if IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS_1) then
			call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Все дуэли завершены, спасибо героям за участие!!!")
		endif
		loop
			exitwhen i_0 > 9
			set hero1_0 = udg_herounit_1[i_0]
			if perekluchatel_0 >= 0 then
				set perekluchatel_0 = -perekluchatel_0
				set perekluchatel_0 = perekluchatel_0 - 50.
			else
				set perekluchatel_0 = -perekluchatel_0
				set perekluchatel_0 = perekluchatel_0 + 50.
			endif
			set xc_0 = GetRectCenterX(gg_rct_Respawn_Heroes_1) + perekluchatel_0
			set yc_0 = GetRectCenterY(gg_rct_Respawn_Heroes_1)
			call SetUnitPosition(hero1_0, xc_0, yc_0)
			call SetUnitFacing(hero1_0, 270.)
			call SetUnitState(hero1_0, UNIT_STATE_LIFE_1, $540BE3FF)
			call SetUnitState(hero1_0, UNIT_STATE_MANA_1, $540BE3FF)
			call ShowUnit(hero1_0, true)
			call DestroyFogModifier(LoadFogModifierHandle(udg_hash_1, h_0, 20 + i_0))
			if (GetLocalPlayer() == GetOwningPlayer(hero1_0)) then
				call ResetToGameCamera(.0)
				call PanCameraToTimed(xc_0, yc_0, .0)
				call ClearSelection()
				call SelectUnit(hero1_0, true)
			endif
			set i_0 = i_0 + 1
		endloop
		call StartTimerBJ(udg_Timer_Nomera_Volni_1, false, 75.)
		call CreateTimerDialogBJ(udg_Timer_Nomera_Volni_1, ("Волна № |cFFFF0000" + (I2S(udg_Nomer_samoi_volni_1) + "|r")))
		set udg_TimerDialog_Nomera_Volni_1 = bj_lastCreatedTimerDialog_1
		call TimerDialogSetTimeColorBJ(udg_TimerDialog_Nomera_Volni_1, 'd', 90., 30., 20.)
		set udg_Is_Fast_Wave_Start_On_Off_1 = true
		call FlushChildHashtable(udg_hash_1, h_0)
		call EnableTrigger(gg_trg_Hero_Dead_1)
	endif
	set rct_0 = null
	set t_0 = null
	set hero1_0 = null
	set hero2_0 = null
	set txt_0 = null
	set ttxt_0 = null
endfunction

function Trig_Duel_WaitBeforeActions_Actions takes nothing returns nothing
	local rect rct = gg_rct_Hero_Arena_1
	local real x = GetRectCenterX(rct_0)
	local real y = GetRectCenterY(rct_0)
	local integer i = 0
	loop
		exitwhen i_0 > 8
		if (GetLocalPlayer() == Player(i_0)) then
			call ResetToGameCamera(.0)
			call PanCameraToTimed(x_0, y_0, .0)
		endif
		set i_0 = i_0 + 1
	endloop
	call ExecuteFunc("Trig_Duel_Round_Actions")
	call DestroyTimer(GetExpiredTimer())
	set rct_0 = null
endfunction

function Trig_Start_Duel_Actions takes nothing returns nothing
	local integer i = 1
	local integer schetchik = 0
	local integer number
	local integer random = 0
	local integer maksint
	local integer playernumber
	local group g = CreateGroup()
	local timer t = CreateTimer()
	local player p1
	local player p2
	local integer emptyplayernumber
	local rect rct = gg_rct_Hero_Arena_1
	local real x = GetRectCenterX(rct_0)
	local real y = GetRectCenterY(rct_0)
	local integer h = GetHandleId(rct_0)
	call GroupEnumUnitsInRange(g_0, .0, .0, 9999999., null)
	call KillSummonsAndIllusions(g_0)
	loop
		exitwhen i_0 > 9
		if udg_herounit_1[i_0] != null then
			call ReviveHero(udg_herounit_1[i_0], .0, .0, false)
			call ShowUnit(udg_herounit_1[i_0], false)
			set schetchik_0 = schetchik_0 + 1
			set number_0[schetchik_0] = schetchik_0
			set playernumber_0[schetchik_0] = i_0
		endif
		set i_0 = i_0 + 1
	endloop
	set maksint_0 = schetchik_0
	set schetchik_0 = schetchik_0
	set emptyplayernumber_0 = schetchik_0
	loop
		exitwhen schetchik_0 <= 0
		set random_0 = GetRandomInt(1, maksint_0)
		if number_0[random_0] == random_0 then
			call SaveInteger(udg_hash_1, h_0, random_0, playernumber_0[schetchik_0])
			set bj_lastCreatedFogModifier_1 = CreateFogModifierRect(Player(playernumber_0[schetchik_0] - 1), FOG_OF_WAR_VISIBLE_1, rct_0, true, false)
			call FogModifierStart(bj_lastCreatedFogModifier_1)
			call SaveFogModifierHandle(udg_hash_1, h_0, 20 + random_0, bj_lastCreatedFogModifier_1)
			if (GetLocalPlayer() == Player(playernumber_0[schetchik_0] - 1)) then
				call PanCameraToTimed(x_0, y_0, .0)
			endif
			if random_0 == maksint_0 and (emptyplayernumber_0 != 2 and emptyplayernumber_0 != 4 and emptyplayernumber_0 != 6 and emptyplayernumber_0 != 8) then
				if (GetLocalPlayer() == Player(playernumber_0[schetchik_0] - 1)) then
					call DisplayTextToPlayer(Player(playernumber_0[schetchik_0] - 1), .0, .0, "К сожалению, вы не поучавствуете в дуэли, так как вам не хватило противника, но вы все равно получаете |cFFFFFF00" + I2S($C8 + (udg_Nomer_samoi_volni_1 * 'x')) + " опыта|r и |cFFFFFF00" + I2S('d' + (udg_Nomer_samoi_volni_1 * 60)) + " золота|r")
				endif
				call AddHeroXP(udg_herounit_1[playernumber_0[schetchik_0]], $C8 + (udg_Nomer_samoi_volni_1 * 'x'), false)
				call SetPlayerState(Player(playernumber_0[schetchik_0] - 1), PLAYER_STATE_RESOURCE_GOLD_1, GetPlayerState(Player(playernumber_0[schetchik_0] - 1), PLAYER_STATE_RESOURCE_GOLD_1) + 'd' + (udg_Nomer_samoi_volni_1 * 60))
			endif
			set schetchik_0 = schetchik_0 - 1
			set number_0[random_0] = 0
		endif
	endloop
	if (IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS_1)) then
		call DisplayTimedTextToPlayer(GetLocalPlayer(), 0, 0, 10., "Список Дуэлей:")
		call SoundForPlayer(GetLocalPlayer(), 5)
	endif
	set schetchik_0 = 1
	loop
		exitwhen LoadInteger(udg_hash_1, h_0, schetchik_0) == 0 or LoadInteger(udg_hash_1, h_0, schetchik_0 + 1) == 0
		set p1_0 = Player(LoadInteger(udg_hash_1, h_0, schetchik_0) - 1)
		set p2_0 = Player(LoadInteger(udg_hash_1, h_0, schetchik_0 + 1) - 1)
		if (IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS_1)) then
			call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "Дуэль №" + udg_ColorString_1[20] + I2S(R2I((schetchik_0 / 2) + 1)) + "|r: " + udg_ColorString_1[GetPlayerId(p1_0) + 1] + GetPlayerName(p1_0) + "|r против " + udg_ColorString_1[GetPlayerId(p2_0) + 1] + GetPlayerName(p2_0) + "|r")
		endif
		set schetchik_0 = schetchik_0 + 2
		set p1_0 = null
		set p2_0 = null
	endloop
	call CinematicFadeBJ(1, .0, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1)
	call CinematicFadeBJ(0, 3., "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1)
	call DisableTrigger(gg_trg_Hero_Dead_1)
	call SaveInteger(udg_hash_1, h_0, $A, 1)
	call SaveInteger(udg_hash_1, h_0, $B, maksint_0)
	call SaveBoolean(udg_hash_1, h_0, $C, false)
	call SaveBoolean(udg_hash_1, h_0, $D, false)
	call EnableTrigger(gg_trg_Hero_Death_On_Duel_1)
	call TimerStart(t_0, 3., false, function Trig_Duel_WaitBeforeActions_Actions)
	set t_0 = null
	set rct_0 = null
endfunction

function InitTrig_Start_Duel takes nothing returns nothing
	set gg_trg_Start_Duel_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Start_Duel_1, function Trig_Start_Duel_Actions)
endfunction

function Trig_Hero_Death_On_Duel_2secwait_Actions takes nothing returns nothing
	local rect rct = gg_rct_Hero_Arena_1
	local integer h = GetHandleId(rct_0)
	local timer t = GetExpiredTimer()
	local integer ht = GetHandleId(t_0)
	local integer counterduel = LoadInteger(udg_hash_1, h_0, $A)
	local unit winner = LoadUnitHandle(udg_hash_1, ht_0, 1)
	local unit defeater = LoadUnitHandle(udg_hash_1, ht_0, 2)
	local unit hero1 = udg_herounit_1[LoadInteger(udg_hash_1, h_0, counterduel_0)]
	local unit hero2 = udg_herounit_1[LoadInteger(udg_hash_1, h_0, counterduel_0 + 1)]
	local real x = GetRectCenterX(gg_rct_Respawn_Heroes_1)
	local real y = GetRectCenterY(gg_rct_Respawn_Heroes_1)
	local timer tdialog = LoadTimerHandle(udg_hash_1, h_0, $D)
	local integer htdialog = GetHandleId(tdialog_0)
	local timerdialog td = LoadTimerDialogHandle(udg_hash_1, h_0, $E)
	local group g = CreateGroup()
	call SetUnitInvulnerable(hero1_0, false)
	call SetUnitInvulnerable(hero2_0, false)
	call ReviveHero(defeater_0, x_0, y_0, false)
	call SetUnitPosition(winner_0, x_0, y_0)
	call ShowUnit(hero1_0, false)
	call ShowUnit(hero2_0, false)
	call SetPlayerAllianceStateBJ(GetOwningPlayer(hero1_0), GetOwningPlayer(hero2_0), 3)
	call SetPlayerAllianceStateBJ(GetOwningPlayer(hero2_0), GetOwningPlayer(hero1_0), 3)
	call CinematicFadeBJ(0, 1.5, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1)
	call GroupEnumUnitsInRange(g_0, GetRectCenterX(gg_rct_Hero_Arena_1), GetRectCenterY(gg_rct_Hero_Arena_1), 1500., null)
	call KillSummonsAndIllusions(g_0)
	set counterduel_0 = counterduel_0 + 2
	call SaveInteger(udg_hash_1, h_0, $A, counterduel_0)
	call ExecuteFunc("Trig_Duel_Round_Actions")
	call DestroyTimerDialog(td_0)
	call DestroyTimer(tdialog_0)
	set rct_0 = null
	call DestroyTimer(t_0)
	set t_0 = null
	call FlushChildHashtable(udg_hash_1, ht_0)
	set winner_0 = null
	set defeater_0 = null
	set hero1_0 = null
	set hero2_0 = null
	set tdialog_0 = null
	set td_0 = null
endfunction

function Trig_Hero_Death_On_Duel_Actions takes nothing returns nothing
	local rect rct = gg_rct_Hero_Arena_1
	local integer h = GetHandleId(rct_0)
	local integer counterduel = LoadInteger(udg_hash_1, h_0, $A)
	local timer t = CreateTimer()
	local integer ht = GetHandleId(t_0)
	local player pw = GetOwningPlayer(GetKillingUnit())
	local unit winner = udg_herounit_1[GetPlayerId(pw_0) + 1]
	local player pd = GetOwningPlayer(GetDyingUnit())
	local unit defeater = udg_herounit_1[GetPlayerId(pd_0) + 1]
	local integer gold
	local integer xp
	if pw_0 != null then
		if LoadBoolean(udg_hash_1, h_0, $D) == false then
			call SaveBoolean(udg_hash_1, h_0, $D, true)
			call SetUnitInvulnerable(GetKillingUnit(), true)
			call SaveUnitHandle(udg_hash_1, ht_0, 1, winner_0)
			call SaveUnitHandle(udg_hash_1, ht_0, 2, defeater_0)
			call CinematicFadeBJ(1, 2.5, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 1)
			call TimerStart(t_0, 2.5, false, function Trig_Hero_Death_On_Duel_2secwait_Actions)
			if IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS_1) then
				call DisplayTextToPlayer(GetLocalPlayer(), .0, .0, udg_ColorString_1[GetPlayerId(pw_0) + 1] + GetPlayerName(pw_0) + "|r Победил в дуэле " + udg_ColorString_1[GetPlayerId(pd_0) + 1] + GetPlayerName(pd_0) + "|r")
			endif
			set gold_0 = 300 + (udg_Nomer_samoi_volni_1 * 'd')
			set xp_0 = 600 + (udg_Nomer_samoi_volni_1 * $AF)
			if (GetLocalPlayer() == pw_0) then
				call DisplayTextToPlayer(pw_0, .0, .0, "За победу в дуэле ваш герой получает |cFFFFFF00" + I2S(xp_0) + " опыта|r и |cFFFFFF00" + I2S(gold_0) + " золота|r")
			endif
			call AddHeroXP(winner_0, xp_0, true)
			call SetPlayerState(pw_0, PLAYER_STATE_RESOURCE_GOLD_1, GetPlayerState(pw_0, PLAYER_STATE_RESOURCE_GOLD_1) + gold_0)
			set gold_0 = 'd' + (udg_Nomer_samoi_volni_1 * 60)
			set xp_0 = $C8 + (udg_Nomer_samoi_volni_1 * 'x')
			if (GetLocalPlayer() == pd_0) then
				call DisplayTextToPlayer(pw_0, .0, .0, "За участие в дуэле ваш герой получает |cFFFFFF00" + I2S(xp_0) + " опыта|r и |cFFFFFF00" + I2S(gold_0) + " золота|r")
			endif
			call AddHeroXP(defeater_0, xp_0, false)
			call SetPlayerState(pd_0, PLAYER_STATE_RESOURCE_GOLD_1, GetPlayerState(pd_0, PLAYER_STATE_RESOURCE_GOLD_1) + gold_0)
		endif
	endif
	set rct_0 = null
	set t_0 = null
	set winner_0 = null
	set pw_0 = null
	set defeater_0 = null
	set pd_0 = null
endfunction

function Trig_Hero_Death_On_Duel_Conditions takes nothing returns boolean
	return (IsUnitType(GetDyingUnit(), UNIT_TYPE_HERO_1) and IsUnitIllusion(GetTriggerUnit()) == false and GetPlayerId(GetOwningPlayer(GetKillingUnit())) <= 8 and GetPlayerId(GetOwningPlayer(GetDyingUnit())) <= 8 and LoadInteger(udg_hash_1, GetHandleId(gg_rct_Hero_Arena_1), $A) > 0) != null
endfunction

function InitTrig_Hero_Death_On_Duel takes nothing returns nothing
	local integer index = 0
	set gg_trg_Hero_Death_On_Duel_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Hero_Death_On_Duel_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Hero_Death_On_Duel_1, Condition(function Trig_Hero_Death_On_Duel_Conditions))
	call TriggerAddAction(gg_trg_Hero_Death_On_Duel_1, function Trig_Hero_Death_On_Duel_Actions)
endfunction

function Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func002001001001002 takes nothing returns boolean
	return (GetUnitTypeId(GetFilterUnit()) != 'h00U')
endfunction

function Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func002001 takes nothing returns boolean
	return (IsUnitGroupDeadBJ(GetUnitsOfPlayerMatching(Player(9), Condition(function Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func002001001001002))))
endfunction

function Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func003001001001002 takes nothing returns boolean
	return (GetUnitTypeId(GetFilterUnit()) != 'h00U')
endfunction

function Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func003001 takes nothing returns boolean
	return (IsUnitGroupDeadBJ(GetUnitsOfPlayerMatching(Player($A), Condition(function Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func003001001001002))))
endfunction

function Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func004001001001002001 takes nothing returns boolean
	return (GetUnitTypeId(GetFilterUnit()) != 'h00U')
endfunction

function Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func004001001001002002 takes nothing returns boolean
	return (GetUnitTypeId(GetFilterUnit()) != 'h009')
endfunction

function Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func004001001001002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func004001001001002001(), Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func004001001001002002())
endfunction

function Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func004001 takes nothing returns boolean
	return (IsUnitGroupDeadBJ(GetUnitsOfPlayerMatching(Player($B), Condition(function Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func004001001001002))))
endfunction

function Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func034Func005Func002C takes nothing returns boolean
	return (udg_Bonus_Gold_ChestGold_1[(1 + GetPlayerId(GetEnumPlayer()))] == 0)
endfunction

function Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func034Func005C takes nothing returns boolean
	return (1 == 0) and (UnitHasItemOfTypeBJ(udg_herounit_1[(1 + GetPlayerId(GetEnumPlayer()))], 'I00V'))
endfunction

function Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func034A takes nothing returns nothing
	call AddHeroXPSwapped((80 + ('x' * udg_Nomer_samoi_volni_1)), udg_herounit_1[(1 + GetPlayerId(GetEnumPlayer()))], true)
	call SetPlayerStateBJ(GetEnumPlayer(), PLAYER_STATE_RESOURCE_GOLD_1, (GetPlayerState(GetEnumPlayer(), PLAYER_STATE_RESOURCE_GOLD_1) + ('x' + (80 * udg_Nomer_samoi_volni_1))))
	call SoundForPlayer(GetEnumPlayer(), 2)
	if (Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func034Func005C()) then
		if (Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func034Func005Func002C()) then
			set udg_Bonus_Gold_ChestGold_1[(1 + GetPlayerId(GetEnumPlayer()))] = 60
			call SetPlayerStateBJ(GetEnumPlayer(), PLAYER_STATE_RESOURCE_GOLD_1, (GetPlayerState(GetEnumPlayer(), PLAYER_STATE_RESOURCE_GOLD_1) + udg_Bonus_Gold_ChestGold_1[(1 + GetPlayerId(GetEnumPlayer()))]))
		else
			set udg_Bonus_Gold_ChestGold_1[(1 + GetPlayerId(GetEnumPlayer()))] = (udg_Bonus_Gold_ChestGold_1[(1 + GetPlayerId(GetEnumPlayer()))] + 40)
			call SetPlayerStateBJ(GetEnumPlayer(), PLAYER_STATE_RESOURCE_GOLD_1, (GetPlayerState(GetEnumPlayer(), PLAYER_STATE_RESOURCE_GOLD_1) + udg_Bonus_Gold_ChestGold_1[(1 + GetPlayerId(GetEnumPlayer()))]))
		endif
		call CreateTexttag(udg_ColorString_1[23] + "+" + I2S(udg_Bonus_Gold_ChestGold_1[GetPlayerId(GetEnumPlayer()) + 1]) + "|r", .031, $FF, GetUnitX(udg_herounit_1[GetPlayerId(GetEnumPlayer()) + 1]) - 15., GetUnitY(udg_herounit_1[GetPlayerId(GetEnumPlayer()) + 1]), .0, .0, .04, 4.5)
	endif
endfunction

function Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func036A takes nothing returns nothing
	set udg_Temp_Real_1[1] = GetUnitStateSwap(UNIT_STATE_LIFE_1, GetEnumUnit())
	call SetUnitMaxState(GetEnumUnit(), UNIT_STATE_MAX_LIFE_1, $AF)
	call SetWidgetLife(GetEnumUnit(), udg_Temp_Real_1[1])
	call SetWidgetLife(GetEnumUnit(), (GetUnitStateSwap(UNIT_STATE_LIFE_1, GetEnumUnit()) + (130. + (25. * I2R(udg_Nomer_samoi_volni_1)))))
	call SetArmorAbilityLevel(GetEnumUnit(), 4)
endfunction

function Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001Func001Func001Func001Func003Func001Func003C takes nothing returns boolean
	return (udg_Nomer_samoi_volni_1 == 6) and (udg_Fire_Boss_Turn_On_1 == false)
endfunction

function Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001Func001Func001Func001Func003Func001C takes nothing returns boolean
	return (udg_Nomer_samoi_volni_1 == 2) or (udg_Nomer_samoi_volni_1 == 7) or (Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001Func001Func001Func001Func003Func001Func003C())
endfunction

function Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001Func001Func001Func001Func003C takes nothing returns boolean
	return (Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001Func001Func001Func001Func003Func001C())
endfunction

function Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001Func001Func001Func001C takes nothing returns boolean
	return (udg_Nomer_samoi_volni_1 == 3)
endfunction

function Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001Func001Func001C takes nothing returns boolean
	return (udg_Nomer_samoi_volni_1 == $B)
endfunction

function Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001Func001C takes nothing returns boolean
	return (udg_Nomer_samoi_volni_1 == 6)
endfunction

function Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001C takes nothing returns boolean
	return (udg_Nomer_samoi_volni_1 == 5)
endfunction

function Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func002C takes nothing returns boolean
	return (udg_Nomer_samoi_volni_1 == 4) or (udg_Nomer_samoi_volni_1 == 8) or (udg_Nomer_samoi_volni_1 == $A)
endfunction

function Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045C takes nothing returns boolean
	return (Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func002C())
endfunction

function Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001C takes nothing returns boolean
	return (udg_Integer_kreeps_system_check_1 == 7)
endfunction

function Trig_Timer_Check_Func002Func001Func001Func001Func001Func001C takes nothing returns boolean
	return (udg_Integer_kreeps_system_check_1 == 6)
endfunction

function Trig_Timer_Check_Func002Func001Func001Func001Func001C takes nothing returns boolean
	return (udg_Integer_kreeps_system_check_1 == 5)
endfunction

function Trig_Timer_Check_Func002Func001Func001Func001C takes nothing returns boolean
	return (udg_Integer_kreeps_system_check_1 == 4)
endfunction

function Trig_Timer_Check_Func002Func001Func001C takes nothing returns boolean
	return (udg_Integer_kreeps_system_check_1 == 3)
endfunction

function Trig_Timer_Check_Func002Func001C takes nothing returns boolean
	return (udg_Integer_kreeps_system_check_1 == 2)
endfunction

function Trig_Timer_Check_Func002C takes nothing returns boolean
	return (udg_Integer_kreeps_system_check_1 == 1)
endfunction

function Trig_Timer_Check_Actions takes nothing returns nothing
	set udg_Integer_kreeps_system_check_1 = (udg_Integer_kreeps_system_check_1 + 1)
	if (Trig_Timer_Check_Func002C()) then
		set udg_number_of_otriad_mobs_1 = (udg_number_of_otriad_mobs_1 + 1)
		call StartTimerBJ(udg_Timer_Check_Forkreep_system_1, false, (udg_Time_Before_Creeps_Spawn_1 * 2.))
	else
		if (Trig_Timer_Check_Func002Func001C()) then
			set udg_number_of_otriad_mobs_1 = (udg_number_of_otriad_mobs_1 + 1)
			call StartTimerBJ(udg_Timer_Check_Forkreep_system_1, false, (udg_Time_Before_Creeps_Spawn_1 * 1.))
		else
			if (Trig_Timer_Check_Func002Func001Func001C()) then
				set udg_number_of_otriad_mobs_1 = (udg_number_of_otriad_mobs_1 - 1)
				call StartTimerBJ(udg_Timer_Check_Forkreep_system_1, false, (udg_Time_Before_Creeps_Spawn_1 * 2.))
			else
				if (Trig_Timer_Check_Func002Func001Func001Func001C()) then
					set udg_number_of_otriad_mobs_1 = (udg_number_of_otriad_mobs_1 + 1)
					call StartTimerBJ(udg_Timer_Check_Forkreep_system_1, false, (udg_Time_Before_Creeps_Spawn_1 * 1.))
				else
					if (Trig_Timer_Check_Func002Func001Func001Func001Func001C()) then
						set udg_number_of_otriad_mobs_1 = (udg_number_of_otriad_mobs_1 - 1)
						call StartTimerBJ(udg_Timer_Check_Forkreep_system_1, false, (udg_Time_Before_Creeps_Spawn_1 * 2.))
					else
						if (Trig_Timer_Check_Func002Func001Func001Func001Func001Func001C()) then
							set udg_number_of_otriad_mobs_1 = (udg_number_of_otriad_mobs_1 + 2)
							call StartTimerBJ(udg_Timer_Check_Forkreep_system_1, false, (udg_Time_Before_Creeps_Spawn_1 * 1.))
						else
							if (Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001C()) then
								call PauseTimerBJ(true, udg_TimerMobsAttackBase_1)
								loop
									exitwhen (Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func002001())
									call TriggerSleepAction(RMaxBJ(bj_WAIT_FOR_COND_MIN_INTERVAL_1, 1))
								endloop
								loop
									exitwhen (Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func003001())
									call TriggerSleepAction(RMaxBJ(bj_WAIT_FOR_COND_MIN_INTERVAL_1, 1))
								endloop
								loop
									exitwhen (Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func004001())
									call TriggerSleepAction(RMaxBJ(bj_WAIT_FOR_COND_MIN_INTERVAL_1, 1))
								endloop
								set udg_Temp_Location_1[1] = GetRectCenter(gg_rct_Portal_3_up_Start_1)
								call PlaySoundAtPointBJ(udg_Game_Sound_1[$F], 100., udg_Temp_Location_1[1], .0)
								call RemoveLocation(udg_Temp_Location_1[1])
								set udg_Temp_Location_1[1] = null
								set udg_Temp_Location_1[1] = GetRectCenter(gg_rct_Portal_2_down_right_Start_1)
								call PlaySoundAtPointBJ(udg_Game_Sound_1[$F], 100., udg_Temp_Location_1[1], .0)
								call RemoveLocation(udg_Temp_Location_1[1])
								set udg_Temp_Location_1[1] = null
								set udg_Temp_Location_1[1] = GetRectCenter(gg_rct_Portal_1_down_left_Start_1)
								call PlaySoundAtPointBJ(udg_Game_Sound_1[$F], 100., udg_Temp_Location_1[1], .0)
								call RemoveLocation(udg_Temp_Location_1[1])
								set udg_Temp_Location_1[1] = null
								call SetAttackAbilityLevel(udg_Dammy_Portal_1[1], 50)
								call SetAttackAbilityLevel(udg_Dammy_Portal_1[2], 50)
								call SetAttackAbilityLevel(udg_Dammy_Portal_1[3], 50)
								call DisableTrigger(gg_trg_TeleportStuckedCreeps_1)
								call DisableTrigger(gg_trg_go_mochiytb_portal_1)
								call DisableTrigger(gg_trg_Periodic_Rune_Creation_1)
								set udg_Arrow_Pointer_Guide_Count_1 = CountPlayersInForceBJ(udg_IGRAET_1)
								set bj_forLoopAIndex_1 = 1
								set bj_forLoopAIndexEnd_1 = CountPlayersInForceBJ(udg_IGRAET_1)
								loop
									exitwhen bj_forLoopAIndex_1 > bj_forLoopAIndexEnd_1
									call CreateNUnitsAtLoc(1, 'h00U', Player($F), Location(I2R(udg_Arrow_Pointer_Guide_X_1[bj_forLoopAIndex_1]), I2R(udg_Arrow_Pointer_Guide_Y_1[bj_forLoopAIndex_1])), I2R(udg_Arrow_Pointer_Guide_Angle_1[bj_forLoopAIndex_1]))
									set udg_Arrow_Pointer_Guide_Unit_1[bj_forLoopAIndex_1] = bj_lastCreatedUnit_1
									call AddSpecialEffectTargetUnitBJ("origin", bj_lastCreatedUnit_1, "Effects\\Arrow - Chapter Browse - Rotated.mdx")
									set udg_Arrow_Pointer_Guide_Effect_1[bj_forLoopAIndex_1] = bj_lastCreatedEffect_1
									set bj_forLoopAIndex_1 = bj_forLoopAIndex_1 + 1
								endloop
								set bj_forLoopAIndex_1 = 1
								set bj_forLoopAIndexEnd_1 = 9
								loop
									exitwhen bj_forLoopAIndex_1 > bj_forLoopAIndexEnd_1
									call SetWidgetLife(udg_herounit_1[bj_forLoopAIndex_1], GetUnitStateSwap(UNIT_STATE_MAX_LIFE_1, udg_herounit_1[bj_forLoopAIndex_1]))
									call SetUnitManaBJ(udg_herounit_1[bj_forLoopAIndex_1], GetUnitStateSwap(UNIT_STATE_MAX_MANA_1, udg_herounit_1[bj_forLoopAIndex_1]))
									set bj_forLoopAIndex_1 = bj_forLoopAIndex_1 + 1
								endloop
								call DisplayTextToForce(bj_FORCE_ALL_PLAYERS_1, "|cff99ccffВНИМАНИЕ!|r")
								call DisplayTextToForce(bj_FORCE_ALL_PLAYERS_1, ("За успешное прохождение волны герои получают |cFFFFDC00" + (I2S(('x' + (80 * udg_Nomer_samoi_volni_1))) + (" золота|r и |cFFFFDC00" + (I2S((80 + ('x' * udg_Nomer_samoi_volni_1))) + " опыта|r!!!")))))
								call ForForce(udg_IGRAET_1, function Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func034A)
								call DisplayTextToForce(bj_FORCE_ALL_PLAYERS_1, ("Стражам-заклинателям восстановлено|cff99ccff " + (I2S(($82 + (25 * udg_Nomer_samoi_volni_1))) + " |rздоровья. А их защита и максимальный запас здоровье повышены на |cff99ccff4|r и |cff99ccff175|r соответсвенно.")))
								call ForGroupBJ(udg_PortalCastersMagi_1, function Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func036A)
								call ShowAndFlushAllPlayerDamage(false)
								set udg_Time_Before_Creeps_Spawn_1 = (udg_Time_Before_Creeps_Spawn_1 - 1.)
								set udg_number_of_otriad_mobs_1 = 0
								set udg_Integer_kreeps_system_check_1 = 0
								set udg_Nomer_samoi_volni_1 = (udg_Nomer_samoi_volni_1 + 1)
								call SetDoodadAnimationRect(bj_mapInitialPlayableArea_1, 'D01A', "Stand", false)
								if (Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045C()) then
									call TimerToFunction(50., "Дуэли Героев", function Trig_Start_Duel_Actions)
								else
									if (Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001C()) then
										call TimerToFunction(70., "Золотая Поляна", function Trig_Nachalo_Eiti_aren_Actions)
									else
										if (Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001Func001C()) then
											call TimerToFunction(50., "Битва с Боссом", function Trig_BossStart_Actions)
										else
											if (Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001Func001Func001C()) then
												call TimerToFunction(90., "Битва с Боссом", function Trig_IceBoss_Actions)
											else
												if (Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001Func001Func001Func001C()) then
													call TimerToFunction(40., "Битва с Беорнами", function Trig_Start_Beorn_Den_Actions)
												else
													call StartTimerBJ(udg_Timer_Nomera_Volni_1, false, 60.)
													if (Trig_Timer_Check_Func002Func001Func001Func001Func001Func001Func001Func045Func001Func001Func001Func001Func003C()) then
														call StartTimerBJ(udg_Timer_Hint_About_Fast_Start_1, false, 15.)
													endif
													call CreateTimerDialogBJ(udg_Timer_Nomera_Volni_1, ("Волна № |cFFFF0000" + (I2S(udg_Nomer_samoi_volni_1) + "|r")))
													set udg_TimerDialog_Nomera_Volni_1 = bj_lastCreatedTimerDialog_1
													call TimerDialogSetTimeColorBJ(udg_TimerDialog_Nomera_Volni_1, 'd', 90., 30., 20.)
													set udg_Is_Fast_Wave_Start_On_Off_1 = true
												endif
											endif
										endif
									endif
								endif
							endif
						endif
					endif
				endif
			endif
		endif
	endif
endfunction

function InitTrig_Timer_Check takes nothing returns nothing
	set gg_trg_Timer_Check_1 = CreateTrigger()
	call TriggerRegisterTimerExpireEvent(gg_trg_Timer_Check_1, udg_Timer_Check_Forkreep_system_1)
	call TriggerAddAction(gg_trg_Timer_Check_1, function Trig_Timer_Check_Actions)
endfunction

function Trig_go_mochiytb_portal_Filter takes nothing returns boolean
	return ((GetOwningPlayer(GetFilterUnit()) == Player(9)) or (GetOwningPlayer(GetFilterUnit()) == Player($A)) or (GetOwningPlayer(GetFilterUnit()) == Player($B)))
endfunction

function Trig_go_mochiytb_portal_Actions takes nothing returns nothing
	local group g = CreateGroup()
	local group g2
	local unit Picked
	local rect rct = gg_rct_Portal_baza_1
	local real x = GetRectCenterX(rct_0)
	local real y = GetRectCenterY(rct_0)
	local integer order
	local integer orderId
	set orderId_0 = $D0004
	if (orderId_0 != 0) then
	else
		set orderId_0 = UnitId("stop")
		if (orderId_0 != 0) then
		endif
	endif
	set g2_0 = CreateGroup()
	call GroupEnumUnitsInRect(g2_0, rct_0, null)
	call GroupEnumUnitsInRect(g_0, bj_mapInitialPlayableArea_1, Condition(function Trig_go_mochiytb_portal_Filter))
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		set order_0 = GetUnitCurrentOrder(Picked_0)
		if (IsUnitInGroup(Picked_0, g2_0) == false) then
			if (order_0 == orderId_0) or order_0 == 0 then
				call IssuePointOrderById(Picked_0, $D000F, x_0, y_0)
			endif
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	call GroupClear(g2_0)
	call DestroyGroup(g2_0)
	set g2_0 = null
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set rct_0 = null
endfunction

function InitTrig_go_mochiytb_portal takes nothing returns nothing
	set gg_trg_go_mochiytb_portal_1 = CreateTrigger()
	call DisableTrigger(gg_trg_go_mochiytb_portal_1)
	call TriggerRegisterTimerEvent(gg_trg_go_mochiytb_portal_1, 2., true)
	call TriggerAddAction(gg_trg_go_mochiytb_portal_1, function Trig_go_mochiytb_portal_Actions)
endfunction

function Trig_Start_game_Actions takes nothing returns nothing
	call RemoveAllGuardPositions(Player($B))
	set udg_Nomer_samoi_volni_1 = 1
	set udg_Time_Before_Creeps_Spawn_1 = 21.
	call StartTimerBJ(udg_Timer_Nomera_Volni_1, false, 180.)
	call CreateTimerDialogBJ(bj_lastStartedTimer_1, ("Волна № |cFFFF0000" + (I2S(udg_Nomer_samoi_volni_1) + "|r")))
	set udg_TimerDialog_Nomera_Volni_1 = bj_lastCreatedTimerDialog_1
	call TimerDialogSetTimeColorBJ(udg_TimerDialog_Nomera_Volni_1, 'd', 90., 30., 20.)
	set udg_Is_Fast_Wave_Start_On_Off_1 = true
	set udg_Wave_Unit_tape_1[1] = 'u001'
	set udg_Wave_Unit_tape_1[2] = 'u002'
	set udg_Wave_Unit_tape_1[3] = 'u003'
	set udg_Wave_Unit_tape_1[4] = 'n00K'
	set udg_Wave_Unit_tape_1[5] = 'n00H'
	set udg_Wave_Unit_tape_1[6] = 'n00P'
	set udg_Wave_Unit_tape_1[7] = 'u005'
	set udg_Wave_Unit_tape_1[8] = 'n00O'
	set udg_Wave_Unit_tape_1[9] = 'u006'
	set udg_Wave_Unit_tape_1[$A] = 'u004'
	set udg_Wave_Unit_tape_1[$B] = 'u007'
	set udg_Wave_Unit_tape_1[$C] = 'u008'
	set udg_Wave_Unit_tape_1[$D] = 'u00D'
	set udg_Wave_Unit_tape_1[$E] = 'n00R'
	set udg_Wave_Unit_tape_1[$F] = 'n00U'
	set udg_Wave_Unit_tape_1[16] = 'n00V'
	set udg_Wave_Unit_tape_1[17] = 'u009'
	set udg_Wave_Unit_tape_1[18] = 'u00B'
	set udg_Wave_Unit_tape_1[19] = 'u00A'
	set udg_Wave_Unit_tape_1[20] = 'u00C'
	set udg_Wave_Unit_tape_1[21] = 'u00E'
	set udg_Wave_Unit_tape_1[22] = 'n013'
	set udg_Wave_Unit_tape_1[23] = 'n014'
	set udg_Wave_Unit_tape_1[24] = 'n015'
	set udg_Wave_Unit_tape_1[25] = 'n016'
	set udg_Wave_Unit_tape_1[26] = 'n017'
	set udg_Wave_Unit_tape_1[27] = 'n018'
	set udg_Wave_Unit_tape_1[28] = 'n019'
	set udg_Wave_Unit_tape_1[29] = 'n01A'
	set udg_Wave_Unit_tape_1[30] = 'n01B'
	set udg_Wave_Unit_tape_1[31] = 'n01E'
	set udg_Wave_Unit_tape_1[32] = 'n01C'
	set udg_Wave_Unit_tape_1[33] = 'n003'
	set udg_Wave_Unit_tape_1[34] = 'n00D'
	set udg_Wave_Unit_tape_1[35] = 'n008'
	set udg_Wave_Unit_tape_1[36] = 'n009'
	set udg_Wave_Unit_tape_1[37] = 'n00F'
	set udg_Wave_Unit_tape_1[38] = 'n00I'
	set udg_Wave_Unit_tape_1[39] = 'n00G'
	set udg_Wave_Unit_tape_1[40] = 'n00E'
	call TriggerExecute(gg_trg_Init_System_Receiving_Experience_for_Creeps_1)
	call TriggerExecute(gg_trg_Init_System_Receiving_Gold_for_Creeps_1)
endfunction

function InitTrig_Start_game takes nothing returns nothing
	set gg_trg_Start_game_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Start_game_1, function Trig_Start_game_Actions)
endfunction

function Trig_StartWave_Func007A takes nothing returns nothing
	call SoundForPlayer(GetEnumPlayer(), 3)
endfunction

function Trig_StartWave_Actions takes nothing returns nothing
	call DestroyTimerDialog(udg_TimerDialog_Nomera_Volni_1)
	set udg_Is_Fast_Wave_Start_On_Off_1 = false
	set udg_Count_Players_Fast_Wave_Start_1 = 0
	set bj_forLoopAIndex_1 = 1
	set bj_forLoopAIndexEnd_1 = 16
	loop
		exitwhen bj_forLoopAIndex_1 > bj_forLoopAIndexEnd_1
		set udg_Is_Player_Fast_Wave_Start_1[bj_forLoopAIndex_1] = false
		set bj_forLoopAIndex_1 = bj_forLoopAIndex_1 + 1
	endloop
	call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS_1, 5., ("Волна №|cFFFF0000" + (I2S(udg_Nomer_samoi_volni_1) + " |rначалась!!!")))
	call ForForce(udg_IGRAET_1, function Trig_StartWave_Func007A)
	call EnableTrigger(gg_trg_go_mochiytb_portal_1)
	call EnableTrigger(gg_trg_Periodic_Rune_Creation_1)
	call StartTimerBJ(udg_Timer_Check_Forkreep_system_1, false, .0)
	call StartTimerBJ(udg_TimerMobsAttackBase_1, false, .1)
	call EnableTrigger(gg_trg_TeleportStuckedCreeps_1)
	set udg_Wave_Progress_for_MultiBoard_1 = 0
	call MultiboardSetItemValueBJ(udg_MultiBoard_1, 3, (udg_CountPlayers_1 + 3), "|Cfffed3120|r|cFF969696/|r|Cfffed3129|r")
	call MultiboardSetTitleText(udg_MultiBoard_1, ("Последние Стражи" + (" (Волна " + (udg_ColorString_1[20] + (I2S(udg_Nomer_samoi_volni_1) + ("|r из " + (udg_ColorString_1[20] + "10|r)")))))))
	call SetDoodadAnimationRect(bj_mapInitialPlayableArea_1, 'D01A', "Stand Work", false)
	call ShowAndFlushAllPlayerDamage(true)
	set udg_Temp_Location_1[1] = GetRectCenter(gg_rct_Portal_3_up_Start_1)
	call PlaySoundAtPointBJ(udg_Game_Sound_1[$E], 100., udg_Temp_Location_1[1], .0)
	call RemoveLocation(udg_Temp_Location_1[1])
	set udg_Temp_Location_1[1] = null
	set udg_Temp_Location_1[1] = GetRectCenter(gg_rct_Portal_2_down_right_Start_1)
	call PlaySoundAtPointBJ(udg_Game_Sound_1[$E], 100., udg_Temp_Location_1[1], .0)
	call RemoveLocation(udg_Temp_Location_1[1])
	set udg_Temp_Location_1[1] = null
	set udg_Temp_Location_1[1] = GetRectCenter(gg_rct_Portal_1_down_left_Start_1)
	call PlaySoundAtPointBJ(udg_Game_Sound_1[$E], 100., udg_Temp_Location_1[1], .0)
	call RemoveLocation(udg_Temp_Location_1[1])
	set udg_Temp_Location_1[1] = null
	set bj_forLoopAIndex_1 = 1
	set bj_forLoopAIndexEnd_1 = CountPlayersInForceBJ(udg_IGRAET_1)
	loop
		exitwhen bj_forLoopAIndex_1 > bj_forLoopAIndexEnd_1
		call SetUnitAnimation(udg_Rune_On_Base_Dummy_1[bj_forLoopAIndex_1], "Stand Alternate")
		set bj_forLoopAIndex_1 = bj_forLoopAIndex_1 + 1
	endloop
	set bj_forLoopAIndex_1 = 1
	set bj_forLoopAIndexEnd_1 = udg_Arrow_Pointer_Guide_Count_1
	loop
		exitwhen bj_forLoopAIndex_1 > bj_forLoopAIndexEnd_1
		call DestroyEffect(udg_Arrow_Pointer_Guide_Effect_1[bj_forLoopAIndex_1])
		call KillUnit(udg_Arrow_Pointer_Guide_Unit_1[bj_forLoopAIndex_1])
		set bj_forLoopAIndex_1 = bj_forLoopAIndex_1 + 1
	endloop
	call StartTimerBJ(udg_TimerShowAndFlushAllPlayerDmg_1, false, 10000.)
endfunction

function InitTrig_StartWave takes nothing returns nothing
	set gg_trg_StartWave_1 = CreateTrigger()
	call TriggerRegisterTimerExpireEvent(gg_trg_StartWave_1, udg_Timer_Nomera_Volni_1)
	call TriggerAddAction(gg_trg_StartWave_1, function Trig_StartWave_Actions)
endfunction

function Trig_MobsAttackBase_Actions takes nothing returns nothing
	local integer wavenumber = udg_Nomer_samoi_volni_1
	local integer players = CountPlayersInForceBJ(udg_IGRAET_1)
	local integer count = 2
	local integer count2 = 1
	local integer count3 = 3
	local integer mobscount
	local integer mobscount2
	local integer mobscount3
	local integer numbergroup = udg_number_of_otriad_mobs_1
	local integer difficultlevel
	local real xc = GetRectCenterX(gg_rct_cast_magi_1)
	local real yc = GetRectCenterY(gg_rct_cast_magi_1)
	local rect rct
	local real x
	local real y
	local real x1type
	local real y1type
	local real x2type
	local real y2type
	local real x3type
	local real y3type
	local real angle
	local unit mob
	local integer lopa = 1
	local integer lopb = 1
	local integer id1 = udg_Wave_Unit_tape_1[(4 * wavenumber_0) - 3]
	local integer id2 = udg_Wave_Unit_tape_1[(4 * wavenumber_0) - 2]
	local integer id3 = udg_Wave_Unit_tape_1[(4 * wavenumber_0) - 1]
	local integer mobsrandom
	local integer multiplayers
	local real dist = .0
	local integer perekluchatel = 1
	local player p
	local unit dammi
	if numbergroup_0 == 3 then
		set count_0 = count_0 * 2
		set count2_0 = count2_0 * 2
	endif
	if players_0 >= 1 and players_0 <= 2 then
		set multiplayers_0[1] = 1
	endif
	if players_0 >= 3 and players_0 <= 4 then
		set multiplayers_0[1] = 2
	endif
	if players_0 >= 5 and players_0 <= 9 then
		set multiplayers_0[1] = 3
	endif
	if players_0 >= 2 and players_0 <= 3 then
		set multiplayers_0[2] = 1
	endif
	if players_0 >= 4 and players_0 <= 5 then
		set multiplayers_0[2] = 2
	endif
	if players_0 >= 6 and players_0 <= 9 then
		set multiplayers_0[2] = 3
	endif
	if players_0 >= 7 and players_0 <= 9 then
		set multiplayers_0[3] = (players_0 - 6)
	endif
	if (udg_Integer_Creep_On_Line_Spawn_1[1] != 0) or (udg_Integer_Creep_On_Line_Spawn_1[2] != 0) or (udg_Integer_Creep_On_Line_Spawn_1[3] != 0) then
		set multiplayers_0[1] = udg_Integer_Creep_On_Line_Spawn_1[1]
		set multiplayers_0[2] = udg_Integer_Creep_On_Line_Spawn_1[2]
		set multiplayers_0[3] = udg_Integer_Creep_On_Line_Spawn_1[3]
	endif
	set mobsrandom_0 = 0
	if count_0 * multiplayers_0[1] > 0 then
		set mobscount_0[1] = (count_0 * multiplayers_0[1]) + mobsrandom_0
		set mobscount2_0[1] = (count2_0 * multiplayers_0[1]) + mobsrandom_0
		set mobscount3_0[1] = (count3_0 * multiplayers_0[1]) + mobsrandom_0
		set udg_Temp_Location_1[1] = GetRectCenter(gg_rct_Portal_3_up_Start_1)
		call PlaySoundAtPointBJ(udg_Game_Sound_1[16], 100., udg_Temp_Location_1[1], .0)
		call RemoveLocation(udg_Temp_Location_1[1])
		set udg_Temp_Location_1[1] = null
	endif
	if count_0 * multiplayers_0[2] > 0 then
		set mobscount_0[2] = (count_0 * multiplayers_0[2]) + mobsrandom_0
		set mobscount2_0[2] = (count2_0 * multiplayers_0[2]) + mobsrandom_0
		set mobscount3_0[2] = (count3_0 * multiplayers_0[2]) + mobsrandom_0
		set udg_Temp_Location_1[1] = GetRectCenter(gg_rct_Portal_2_down_right_Start_1)
		call PlaySoundAtPointBJ(udg_Game_Sound_1[16], 100., udg_Temp_Location_1[1], .0)
		call RemoveLocation(udg_Temp_Location_1[1])
		set udg_Temp_Location_1[1] = null
	endif
	if count_0 * multiplayers_0[3] > 0 then
		set mobscount_0[3] = (count_0 * multiplayers_0[3]) + mobsrandom_0
		set mobscount2_0[3] = (count2_0 * multiplayers_0[3]) + mobsrandom_0
		set mobscount3_0[3] = (count3_0 * multiplayers_0[3]) + mobsrandom_0
		set udg_Temp_Location_1[1] = GetRectCenter(gg_rct_Portal_1_down_left_Start_1)
		call PlaySoundAtPointBJ(udg_Game_Sound_1[16], 100., udg_Temp_Location_1[1], .0)
		call RemoveLocation(udg_Temp_Location_1[1])
		set udg_Temp_Location_1[1] = null
	endif
	set rct_0[1] = gg_rct_Portal_3_up_Start_1
	set rct_0[2] = gg_rct_Portal_2_down_right_Start_1
	set rct_0[3] = gg_rct_Portal_1_down_left_Start_1
	set x_0[1] = GetRectCenterX(rct_0[1])
	set x_0[2] = GetRectCenterX(rct_0[2])
	set x_0[3] = GetRectCenterX(rct_0[3])
	set y_0[1] = GetRectCenterY(rct_0[1])
	set y_0[2] = GetRectCenterY(rct_0[2])
	set y_0[3] = GetRectCenterY(rct_0[3])
	set angle_0[1] = -90.
	set angle_0[2] = 123.
	set angle_0[3] = 50.
	set x1type_0[1] = x_0[1] + 150. * Cos(angle_0[1] * bj_DEGTORAD_1)
	set x1type_0[2] = x_0[2] + 150. * Cos(angle_0[2] * bj_DEGTORAD_1)
	set x1type_0[3] = x_0[3] + 150. * Cos(angle_0[3] * bj_DEGTORAD_1)
	set y1type_0[1] = y_0[1] + 150. * Sin(angle_0[1] * bj_DEGTORAD_1)
	set y1type_0[2] = y_0[2] + 150. * Sin(angle_0[2] * bj_DEGTORAD_1)
	set y1type_0[3] = y_0[3] + 150. * Sin(angle_0[3] * bj_DEGTORAD_1)
	if wavenumber_0 == 'd' then
		set mobscount_0[1] = R2I((mobscount_0[1] * 1.5) + .5)
		set mobscount_0[2] = R2I((mobscount_0[2] * 1.5) + .5)
		set mobscount_0[3] = R2I((mobscount_0[3] * 1.5) + .5)
		set mobscount2_0[1] = R2I((mobscount2_0[1] * 1.5) + .5)
		set mobscount2_0[2] = R2I((mobscount2_0[2] * 1.5) + .5)
		set mobscount2_0[3] = R2I((mobscount2_0[3] * 1.5) + .5)
		set mobscount3_0[1] = R2I((mobscount3_0[1] * 1.5) + .5)
		set mobscount3_0[2] = R2I((mobscount3_0[2] * 1.5) + .5)
		set mobscount3_0[3] = R2I((mobscount3_0[3] * 1.5) + .5)
	endif
	if wavenumber_0 == 'd' then
		set mobscount_0[1] = R2I((mobscount_0[1] / 2.) + .5)
		set mobscount_0[2] = R2I((mobscount_0[2] / 2.) + .5)
		set mobscount_0[3] = R2I((mobscount_0[3] / 2.) + .5)
		set mobscount2_0[1] = R2I((mobscount2_0[1] / 2.) + .5)
		set mobscount2_0[2] = R2I((mobscount2_0[2] / 2.) + .5)
		set mobscount2_0[3] = R2I((mobscount2_0[3] / 2.) + .5)
		set mobscount3_0[1] = R2I((mobscount3_0[1] / 2.) + .5)
		set mobscount3_0[2] = R2I((mobscount3_0[2] / 2.) + .5)
		set mobscount3_0[3] = R2I((mobscount3_0[3] / 2.) + .5)
	endif
	set p_0[1] = Player(9)
	set p_0[2] = Player($A)
	set p_0[3] = Player($B)
	loop
		exitwhen lopa_0 > 3
		if mobscount_0[lopa_0] > 0 then
			set dammi_0 = CreateUnit(Player($B), 'h00U', x1type_0[lopa_0], y1type_0[lopa_0], .0)
			call UnitApplyTimedLife(dammi_0, 'BTLF', 2.)
			call SetUnitScale(dammi_0, 2., 2., 2.)
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl", dammi_0, "origin"))
			set dammi_0 = null
			loop
				exitwhen lopb_0 > mobscount_0[lopa_0]
				if perekluchatel_0 == 1 then
					set perekluchatel_0 = -1
				else
					if perekluchatel_0 == -1 then
						set perekluchatel_0 = 1
					endif
				endif
				set dist_0 = dist_0 + 32.
				set mob_0 = CreateUnit(p_0[lopa_0], id1_0, x1type_0[lopa_0] + dist_0 * Cos((angle_0[lopa_0] + perekluchatel_0 * 90.) * bj_DEGTORAD_1), y1type_0[lopa_0] + dist_0 * Sin((angle_0[lopa_0] + perekluchatel_0 * 90.) * bj_DEGTORAD_1), angle_0[lopa_0])
				set udg_count_1 = udg_count_1 + 1
				call IssuePointOrderById(mob_0, $D000F, xc_0, yc_0)
				call SaveBoolean(udg_hash_1, GetHandleId(mob_0), 83, true)
				set mob_0 = null
				set lopb_0 = lopb_0 + 1
			endloop
		endif
		set dist_0 = .0
		set lopb_0 = 1
		set lopa_0 = lopa_0 + 1
	endloop
	set lopa_0 = 1
	set lopb_0 = 1
	if numbergroup_0 >= 1 then
		set x2type_0[1] = x_0[1] + 60. * Cos(angle_0[1] * bj_DEGTORAD_1)
		set x2type_0[2] = x_0[2] + 60. * Cos(angle_0[2] * bj_DEGTORAD_1)
		set x2type_0[3] = x_0[3] + 60. * Cos(angle_0[3] * bj_DEGTORAD_1)
		set y2type_0[1] = y_0[1] + 60. * Sin(angle_0[1] * bj_DEGTORAD_1)
		set y2type_0[2] = y_0[2] + 60. * Sin(angle_0[2] * bj_DEGTORAD_1)
		set y2type_0[3] = y_0[3] + 60. * Sin(angle_0[3] * bj_DEGTORAD_1)
		loop
			exitwhen lopa_0 > 3
			loop
				exitwhen lopb_0 > mobscount2_0[lopa_0]
				if perekluchatel_0 == 1 then
					set perekluchatel_0 = -1
				else
					if perekluchatel_0 == -1 then
						set perekluchatel_0 = 1
					endif
				endif
				set dist_0 = dist_0 + 30.
				set mob_0 = CreateUnit(p_0[lopa_0], id2_0, x2type_0[lopa_0] + dist_0 * Cos((angle_0[lopa_0] + perekluchatel_0 * 90.) * bj_DEGTORAD_1), y2type_0[lopa_0] + dist_0 * Sin((angle_0[lopa_0] + perekluchatel_0 * 90.) * bj_DEGTORAD_1), angle_0[lopa_0])
				set udg_count_1 = udg_count_1 + 1
				call SaveBoolean(udg_hash_1, GetHandleId(mob_0), 83, true)
				call IssuePointOrderById(mob_0, $D000F, xc_0, yc_0)
				set mob_0 = null
				set lopb_0 = lopb_0 + 1
			endloop
			set dist_0 = .0
			set lopb_0 = 1
			set lopa_0 = lopa_0 + 1
		endloop
		set lopa_0 = 1
		set lopb_0 = 1
	endif
	if numbergroup_0 == 2 then
		loop
			exitwhen lopa_0 > 3
			loop
				exitwhen lopb_0 > mobscount3_0[lopa_0]
				set udg_count_1 = udg_count_1 + 1
				set mob_0 = CreateUnit(p_0[lopa_0], id3_0, x_0[lopa_0] - 25. * Cos(angle_0[lopa_0] * bj_DEGTORAD_1), y_0[lopa_0] - 25. * Sin(angle_0[lopa_0] * bj_DEGTORAD_1), angle_0[lopa_0])
				call IssuePointOrderById(mob_0, $D000F, xc_0, yc_0)
				call SaveBoolean(udg_hash_1, GetHandleId(mob_0), 83, true)
				set mob_0 = null
				set lopb_0 = lopb_0 + 1
			endloop
			set lopb_0 = 1
			set lopa_0 = lopa_0 + 1
		endloop
		set lopa_0 = 1
		set lopb_0 = 1
	endif
	if numbergroup_0 == 3 then
		if (IsPlayerInForce(GetLocalPlayer(), udg_IGRAET_1)) then
			call DisplayTextToPlayer(GetLocalPlayer(), 0, 0, "|cFFFF0000БОСС!!!|r")
			call SoundForPlayer(GetLocalPlayer(), 6)
		endif
		loop
			exitwhen lopa_0 > 3
			if mobscount_0[lopa_0] > 0 then
				set udg_count_1 = udg_count_1 + 1
				set mob_0 = CreateUnit(p_0[lopa_0], udg_Wave_Unit_tape_1[4 * wavenumber_0], x_0[lopa_0] - 25. * Cos(angle_0[lopa_0] * bj_DEGTORAD_1), y_0[lopa_0] - 25. * Sin(angle_0[lopa_0] * bj_DEGTORAD_1), angle_0[lopa_0])
				call IssuePointOrderById(mob_0, $D000F, xc_0, yc_0)
				call SaveBoolean(udg_hash_1, GetHandleId(mob_0), 83, true)
				set mob_0 = null
			endif
			set lopa_0 = lopa_0 + 1
		endloop
		set lopa_0 = 1
	endif
	set p_0[1] = null
	set p_0[2] = null
	set p_0[3] = null
	set mob_0 = null
	set dammi_0 = null
	set udg_Wave_Progress_for_MultiBoard_1 = udg_Wave_Progress_for_MultiBoard_1 + 1
	call MultiboardSetItemValueBJ(udg_MultiBoard_1, 3, (udg_CountPlayers_1 + 3), (("|Cfffed312" + I2S(udg_Wave_Progress_for_MultiBoard_1)) + "|r|cFF969696/|r|Cfffed3129|r"))
	call StartTimerBJ(udg_TimerMobsAttackBase_1, false, udg_Time_Before_Creeps_Spawn_1)
endfunction

function InitTrig_MobsAttackBase takes nothing returns nothing
	set gg_trg_MobsAttackBase_1 = CreateTrigger()
	call TriggerRegisterTimerExpireEvent(gg_trg_MobsAttackBase_1, udg_TimerMobsAttackBase_1)
	call TriggerAddAction(gg_trg_MobsAttackBase_1, function Trig_MobsAttackBase_Actions)
endfunction

function Trig_Filter_TeleportStuckedCreeps_Actions takes nothing returns boolean
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE_1) > .405 and IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE_1) == false and GetUnitTypeId(GetFilterUnit()) != 'h00U' and GetUnitTypeId(GetFilterUnit()) != 'n01M' and GetUnitTypeId(GetFilterUnit()) != 'h00C') and (GetOwningPlayer(GetFilterUnit()) == Player(9) or GetOwningPlayer(GetFilterUnit()) == Player($A) or GetOwningPlayer(GetFilterUnit()) == Player($B))) != null
endfunction

function Trig_TeleportStuckedCreeps_Actions takes nothing returns nothing
	local group g = CreateGroup()
	local unit Picked
	local integer h
	local real x
	local real y
	local real dist1 = .0
	local real dist2 = .0
	local real dist3 = .0
	local real x1 = GetRectCenterX(gg_rct_Portal_3_up_Start_1)
	local real y1 = GetRectCenterY(gg_rct_Portal_3_up_Start_1)
	local real x2 = GetRectCenterX(gg_rct_Portal_2_down_right_Start_1)
	local real y2 = GetRectCenterY(gg_rct_Portal_2_down_right_Start_1)
	local real x3 = GetRectCenterX(gg_rct_Portal_1_down_left_Start_1)
	local real y3 = GetRectCenterY(gg_rct_Portal_1_down_left_Start_1)
	local real xt
	local real yt
	local real xload = .0
	local real yload = .0
	local integer i = 0
	call GroupEnumUnitsInRect(g_0, bj_mapInitialPlayableArea_1, Filter(function Trig_Filter_TeleportStuckedCreeps_Actions))
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		set h_0 = GetHandleId(Picked_0)
		set x_0 = GetUnitX(Picked_0)
		set y_0 = GetUnitY(Picked_0)
		set i_0 = LoadInteger(udg_hash_1, h_0, 'k')
		set i_0 = i_0 + 2
		call SaveInteger(udg_hash_1, h_0, 'k', i_0)
		if i_0 >= 20 and udg_IsGameEnd_1 == false then
			set dist1_0 = SquareRoot(((x_0 - x1_0) * (x_0 - x1_0)) + ((y_0 - y1_0) * (y_0 - y1_0)))
			set dist2_0 = SquareRoot(((x_0 - x2_0) * (x_0 - x2_0)) + ((y_0 - y2_0) * (y_0 - y2_0)))
			set dist3_0 = SquareRoot(((x_0 - x3_0) * (x_0 - x3_0)) + ((y_0 - y3_0) * (y_0 - y3_0)))
			if (dist1_0 < dist2_0) and (dist1_0 < dist3_0) then
				set xt_0 = x1_0
				set yt_0 = y1_0
			else
				if (dist2_0 < dist3_0) then
					set xt_0 = x2_0
					set yt_0 = y2_0
				else
					set xt_0 = x3_0
					set yt_0 = y3_0
				endif
			endif
			call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl", x_0, y_0))
			call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl", xt_0, yt_0))
			call SetUnitPosition(Picked_0, xt_0, yt_0)
			call SaveInteger(udg_hash_1, h_0, 'k', 0)
		endif
		set xload_0 = LoadReal(udg_hash_1, h_0, 'l')
		set yload_0 = LoadReal(udg_hash_1, h_0, 'm')
		set dist1_0 = SquareRoot((x_0 - xload_0) * (x_0 - xload_0)) + ((y_0 - yload_0) * (y_0 - yload_0))
		if dist1_0 > 500. then
			call SaveReal(udg_hash_1, h_0, 'l', x_0)
			call SaveReal(udg_hash_1, h_0, 'm', y_0)
			call SaveInteger(udg_hash_1, h_0, 'k', 0)
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set Picked_0 = null
endfunction

function InitTrig_TeleportStuckedCreeps takes nothing returns nothing
	set gg_trg_TeleportStuckedCreeps_1 = CreateTrigger()
	call DisableTrigger(gg_trg_TeleportStuckedCreeps_1)
	call TriggerRegisterTimerEvent(gg_trg_TeleportStuckedCreeps_1, 2., true)
	call TriggerAddAction(gg_trg_TeleportStuckedCreeps_1, function Trig_TeleportStuckedCreeps_Actions)
endfunction

function Trig_vhodit_v_zony_Actions takes nothing returns nothing
	call IssueImmediateOrderById(GetEnteringUnit(), $D0004)
endfunction

function Trig_vhodit_v_zony_Conditions takes nothing returns boolean
	return GetOwningPlayer(GetEnteringUnit()) == Player($B)
endfunction

function InitTrig_vhodit_v_zony takes nothing returns nothing
	local region rectRegion = CreateRegion()
	set gg_trg_vhodit_v_zony_1 = CreateTrigger()
	call RegionAddRect(rectRegion_0, gg_rct_cast_magi_1)
	call TriggerRegisterEnterRegion(gg_trg_vhodit_v_zony_1, rectRegion_0, null)
	call TriggerAddCondition(gg_trg_vhodit_v_zony_1, Condition(function Trig_vhodit_v_zony_Conditions))
	call TriggerAddAction(gg_trg_vhodit_v_zony_1, function Trig_vhodit_v_zony_Actions)
endfunction

function Trig_Add_Gold_System_Receiving_Gold_for_Creeps_AddGoldAssists_Actions takes nothing returns nothing
	local player p = GetEnumPlayer()
	local integer pnumber = GetPlayerId(p_0) + 1
	local integer goldassist = udg_Temp_Integer_1[1]
	local real angle = udg_Temp_Real_1[3]
	local real x = udg_Temp_Real_1[1]
	local real y = udg_Temp_Real_1[2]
	local texttag txt = CreateTextTag()
	if CountItemOfTypeOnUnit(udg_herounit_1[pnumber_0], 'I00V') > 0 then
		set goldassist_0 = goldassist_0 * 2
	endif
	call SetTextTagText(txt_0, udg_ColorString_1[23] + "+" + I2S(goldassist_0) + "|r", .023)
	call SetTextTagColor(txt_0, $FF, $FF, $FF, $FF)
	call SetTextTagPos(txt_0, x_0 - 15., y_0, .0)
	call SetTextTagVelocity(txt_0, .0, .035)
	call SetTextTagPermanent(txt_0, false)
	call SetTextTagLifespan(txt_0, 2.75)
	call SetTextTagFadepoint(txt_0, 2.75)
	if GetLocalPlayer() == p_0 then
		call SetTextTagVisibility(txt_0, true)
	else
		call SetTextTagVisibility(txt_0, false)
	endif
	call SetPlayerState(p_0, PLAYER_STATE_RESOURCE_GOLD_1, GetPlayerState(p_0, PLAYER_STATE_RESOURCE_GOLD_1) + goldassist_0)
	if pnumber_0 <= 9 then
		set udg_MultiBoard_Player_Assist_Count_1[pnumber_0] = udg_MultiBoard_Player_Assist_Count_1[pnumber_0] + 1
		call MultiboardSetItemValueBJ(udg_MultiBoard_1, 5, udg_PlayerNumberInMB_1[pnumber_0], udg_ColorString_1[24] + I2S(udg_MultiBoard_Player_Assist_Count_1[pnumber_0]) + "|r")
	endif
	set txt_0 = null
	set p_0 = null
endfunction

function Trig_Add_Gold_System_Receiving_Gold_for_Creeps_Actions takes nothing returns nothing
	local unit creep = GetDyingUnit()
	local unit killer = GetKillingUnit()
	local player p = GetOwningPlayer(killer_0)
	local integer pnumber = GetPlayerId(p_0) + 1
	local integer mingold = LoadInteger(udg_hash_1, GetUnitTypeId(creep_0), 70)
	local integer maxgold = LoadInteger(udg_hash_1, GetUnitTypeId(creep_0), 71)
	local integer gold = GetRandomInt(mingold_0, maxgold_0)
	local force players = LoadForceHandle(udg_hash_1, GetHandleId(creep_0), 72)
	local real angle = .0
	local integer countplayers = 0
	local integer assistgold = 0
	local real x = GetUnitX(creep_0)
	local real y = GetUnitY(creep_0)
	local boolean normalmob = LoadBoolean(udg_hash_1, GetHandleId(creep_0), 83)
	local texttag txt = CreateTextTag()
	if gold_0 > 0 and LoadBoolean(udg_hash_1, GetHandleId(creep_0), 85) == false then
		if normalmob_0 == false then
			set gold_0 = R2I((gold_0 / 2) + .5)
		endif
		call ForceRemovePlayer(players_0, p_0)
		set countplayers_0 = CountPlayersInForceBJ(players_0)
		if countplayers_0 != 0 then
			set assistgold_0 = R2I((.2 + .05 * countplayers_0) * gold_0 + .5)
			set angle_0 = (360. / countplayers_0)
		endif
		set gold_0 = gold_0 - assistgold_0
		if countplayers_0 != 0 then
			set assistgold_0 = R2I(assistgold_0 / countplayers_0)
		endif
		if assistgold_0 <= 0 then
			set assistgold_0 = 1
		endif
		call SetPlayerState(p_0, PLAYER_STATE_RESOURCE_GOLD_1, GetPlayerState(p_0, PLAYER_STATE_RESOURCE_GOLD_1) + gold_0)
		call SetTextTagText(txt_0, udg_ColorString_1[23] + "+" + I2S(gold_0) + "|r", .025)
		call SetTextTagColor(txt_0, $FF, $FF, $FF, $FF)
		call SetTextTagPos(txt_0, x_0 - 15., y_0, .0)
		call SetTextTagVelocity(txt_0, .0, .035)
		call SetTextTagPermanent(txt_0, false)
		call SetTextTagLifespan(txt_0, 3.5)
		call SetTextTagFadepoint(txt_0, 3.5 / 2)
		if (GetLocalPlayer() == p_0) then
			call SetTextTagVisibility(txt_0, true)
		else
			call SetTextTagVisibility(txt_0, false)
		endif
		set txt_0 = null
		if pnumber_0 <= 9 then
			set udg_MultiBoard_Player_Kills_Count_1[pnumber_0] = udg_MultiBoard_Player_Kills_Count_1[pnumber_0] + 1
			call MultiboardSetItemValueBJ(udg_MultiBoard_1, 3, udg_PlayerNumberInMB_1[pnumber_0], udg_ColorString_1[20] + I2S(udg_MultiBoard_Player_Kills_Count_1[pnumber_0]) + "|r")
		endif
		set udg_Temp_Integer_1[1] = assistgold_0
		set udg_Temp_Real_1[1] = x_0
		set udg_Temp_Real_1[2] = y_0
		set udg_Temp_Real_1[3] = angle_0
		set udg_Temp_Real_1[4] = angle_0
		call ForForce(players_0, function Trig_Add_Gold_System_Receiving_Gold_for_Creeps_AddGoldAssists_Actions)
	endif
	call ForceClear(players_0)
	call DestroyForce(players_0)
	set creep_0 = null
	set killer_0 = null
	set p_0 = null
	set players_0 = null
endfunction

function Trig_Add_Gold_System_Receiving_Gold_for_Creeps_Conditions takes nothing returns boolean
	return IsUnitIllusion(GetDyingUnit()) == false and GetUnitAbilityLevel(GetDyingUnit(), 'Aloc') <= 0 and GetUnitTypeId(GetDyingUnit()) != 'h00U' and (GetOwningPlayer(GetDyingUnit()) == Player(9) or GetOwningPlayer(GetDyingUnit()) == Player($A) or GetOwningPlayer(GetDyingUnit()) == Player($B))
endfunction

function InitTrig_Add_Gold_System_Receiving_Gold_for_Creeps takes nothing returns nothing
	local integer index = 0
	set gg_trg_Add_Gold_System_Receiving_Gold_for_Creeps_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Add_Gold_System_Receiving_Gold_for_Creeps_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Add_Gold_System_Receiving_Gold_for_Creeps_1, Condition(function Trig_Add_Gold_System_Receiving_Gold_for_Creeps_Conditions))
	call TriggerAddAction(gg_trg_Add_Gold_System_Receiving_Gold_for_Creeps_1, function Trig_Add_Gold_System_Receiving_Gold_for_Creeps_Actions)
endfunction

function Trig_Init_System_Receiving_Gold_for_Creeps_Actions takes nothing returns nothing
	local real factor = .25
	local real factorwave
	local integer wavenumber
	local integer goldconstmin
	local integer goldconstmax
	local integer goldmin
	local integer goldmax
	set goldconstmin_0[1] = $A
	set goldconstmax_0[1] = $D
	set goldconstmin_0[2] = 8
	set goldconstmax_0[2] = $C
	set goldconstmin_0[3] = $D
	set goldconstmax_0[3] = 20
	set goldconstmin_0[4] = 'x'
	set goldconstmax_0[4] = $D2
	call SaveInteger(udg_hash_1, 'n01D', 70, 20)
	call SaveInteger(udg_hash_1, 'n01D', 71, 24)
	call SaveInteger(udg_hash_1, 'u00F', 70, 19)
	call SaveInteger(udg_hash_1, 'u00F', 71, 26)
	call SaveInteger(udg_hash_1, 'u00H', 70, 54)
	call SaveInteger(udg_hash_1, 'u00H', 71, 70)
	call SaveInteger(udg_hash_1, 'n011', 70, 20)
	call SaveInteger(udg_hash_1, 'n011', 71, 24)
	call SaveInteger(udg_hash_1, 'n00T', 70, $D)
	call SaveInteger(udg_hash_1, 'n00T', 71, $F)
	call SaveInteger(udg_hash_1, 'n00X', 70, 6)
	call SaveInteger(udg_hash_1, 'n00X', 71, 7)
	call SaveInteger(udg_hash_1, 'n00Z', 70, $D)
	call SaveInteger(udg_hash_1, 'n00Z', 71, 19)
	call SaveInteger(udg_hash_1, 'u00G', 70, 30)
	call SaveInteger(udg_hash_1, 'u00G', 71, 35)
	call SaveInteger(udg_hash_1, 'n00L', 70, 30)
	call SaveInteger(udg_hash_1, 'n00L', 71, 35)
	call SaveInteger(udg_hash_1, 'n00M', 70, $C)
	call SaveInteger(udg_hash_1, 'n00M', 71, 16)
	call SaveInteger(udg_hash_1, 'n00N', 70, 50)
	call SaveInteger(udg_hash_1, 'n00N', 71, 60)
	call SaveInteger(udg_hash_1, 'n00A', 70, 40)
	call SaveInteger(udg_hash_1, 'n00A', 71, 50)
	set wavenumber_0 = 1
	set factorwave_0 = 1. + (factor_0 * (wavenumber_0 - 1))
	set goldmin_0[1] = R2I((goldconstmin_0[1] * factorwave_0) + .5)
	set goldmax_0[1] = R2I((goldconstmax_0[1] * factorwave_0) + .5)
	set goldmin_0[2] = R2I((goldconstmin_0[2] * factorwave_0) + .5)
	set goldmax_0[2] = R2I((goldconstmax_0[2] * factorwave_0) + .5)
	set goldmin_0[3] = R2I((goldconstmin_0[3] * factorwave_0) + .5)
	set goldmax_0[3] = R2I((goldconstmax_0[3] * factorwave_0) + .5)
	set goldmin_0[4] = R2I((goldconstmin_0[4] * factorwave_0) + .5)
	set goldmax_0[4] = R2I((goldconstmax_0[4] * factorwave_0) + .5)
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[1], 70, goldmin_0[1])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[1], 71, goldmax_0[1])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[2], 70, goldmin_0[2])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[2], 71, goldmax_0[2])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[3], 70, goldmin_0[3])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[3], 71, goldmax_0[3])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[4], 70, goldmin_0[4])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[4], 71, goldmax_0[4])
	set wavenumber_0 = 2
	set factorwave_0 = 1. + (factor_0 * (wavenumber_0 - 1))
	set goldmin_0[1] = R2I((goldconstmin_0[1] * factorwave_0) + .5)
	set goldmax_0[1] = R2I((goldconstmax_0[1] * factorwave_0) + .5)
	set goldmin_0[2] = R2I((goldconstmin_0[2] * factorwave_0) + .5)
	set goldmax_0[2] = R2I((goldconstmax_0[2] * factorwave_0) + .5)
	set goldmin_0[3] = R2I((goldconstmin_0[3] * factorwave_0) + .5)
	set goldmax_0[3] = R2I((goldconstmax_0[3] * factorwave_0) + .5)
	set goldmin_0[4] = R2I((goldconstmin_0[4] * factorwave_0) + .5)
	set goldmax_0[4] = R2I((goldconstmax_0[4] * factorwave_0) + .5)
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[5], 70, goldmin_0[1])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[5], 71, goldmax_0[1])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[6], 70, goldmin_0[2])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[6], 71, goldmax_0[2])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[7], 70, goldmin_0[3])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[7], 71, goldmax_0[3])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[8], 70, goldmin_0[4])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[8], 71, goldmax_0[4])
	set wavenumber_0 = 3
	set factorwave_0 = 1. + (factor_0 * (wavenumber_0 - 1))
	set goldmin_0[1] = R2I((goldconstmin_0[1] * factorwave_0) + .5)
	set goldmax_0[1] = R2I((goldconstmax_0[1] * factorwave_0) + .5)
	set goldmin_0[2] = R2I((goldconstmin_0[2] * factorwave_0) + .5)
	set goldmax_0[2] = R2I((goldconstmax_0[2] * factorwave_0) + .5)
	set goldmin_0[3] = R2I((goldconstmin_0[3] * factorwave_0) + .5)
	set goldmax_0[3] = R2I((goldconstmax_0[3] * factorwave_0) + .5)
	set goldmin_0[4] = R2I((goldconstmin_0[4] * factorwave_0) + .5)
	set goldmax_0[4] = R2I((goldconstmax_0[4] * factorwave_0) + .5)
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[9], 70, goldmin_0[1])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[9], 71, goldmax_0[1])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[$A], 70, goldmin_0[2])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[$A], 71, goldmax_0[2])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[$B], 70, goldmin_0[3])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[$B], 71, goldmax_0[3])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[$C], 70, goldmin_0[4])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[$C], 71, goldmax_0[4])
	set wavenumber_0 = 4
	set factorwave_0 = 1. + (factor_0 * (wavenumber_0 - 1))
	set goldmin_0[1] = R2I((goldconstmin_0[1] * factorwave_0) + .5)
	set goldmax_0[1] = R2I((goldconstmax_0[1] * factorwave_0) + .5)
	set goldmin_0[2] = R2I((goldconstmin_0[2] * factorwave_0) + .5)
	set goldmax_0[2] = R2I((goldconstmax_0[2] * factorwave_0) + .5)
	set goldmin_0[3] = R2I((goldconstmin_0[3] * factorwave_0) + .5)
	set goldmax_0[3] = R2I((goldconstmax_0[3] * factorwave_0) + .5)
	set goldmin_0[4] = R2I((goldconstmin_0[4] * factorwave_0) + .5)
	set goldmax_0[4] = R2I((goldconstmax_0[4] * factorwave_0) + .5)
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[$D], 70, goldmin_0[1])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[$D], 71, goldmax_0[1])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[$E], 70, goldmin_0[2])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[$E], 71, goldmax_0[2])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[$F], 70, goldmin_0[3])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[$F], 71, goldmax_0[3])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[16], 70, goldmin_0[4])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[16], 71, goldmax_0[4])
	set wavenumber_0 = 5
	set factorwave_0 = 1. + (factor_0 * (wavenumber_0 - 1))
	set goldmin_0[1] = R2I((goldconstmin_0[1] * factorwave_0) + .5)
	set goldmax_0[1] = R2I((goldconstmax_0[1] * factorwave_0) + .5)
	set goldmin_0[2] = R2I((goldconstmin_0[2] * factorwave_0) + .5)
	set goldmax_0[2] = R2I((goldconstmax_0[2] * factorwave_0) + .5)
	set goldmin_0[3] = R2I((goldconstmin_0[3] * factorwave_0) + .5)
	set goldmax_0[3] = R2I((goldconstmax_0[3] * factorwave_0) + .5)
	set goldmin_0[4] = R2I((goldconstmin_0[4] * factorwave_0) + .5)
	set goldmax_0[4] = R2I((goldconstmax_0[4] * factorwave_0) + .5)
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[17], 70, goldmin_0[1])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[17], 71, goldmax_0[1])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[18], 70, goldmin_0[2])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[18], 71, goldmax_0[2])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[19], 70, goldmin_0[3])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[19], 71, goldmax_0[3])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[20], 70, goldmin_0[4])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[20], 71, goldmax_0[4])
	set wavenumber_0 = 6
	set factorwave_0 = 1. + (factor_0 * (wavenumber_0 - 1))
	set goldmin_0[1] = R2I((goldconstmin_0[1] * factorwave_0) + .5)
	set goldmax_0[1] = R2I((goldconstmax_0[1] * factorwave_0) + .5)
	set goldmin_0[2] = R2I((goldconstmin_0[2] * factorwave_0) + .5)
	set goldmax_0[2] = R2I((goldconstmax_0[2] * factorwave_0) + .5)
	set goldmin_0[3] = R2I((goldconstmin_0[3] * factorwave_0) + .5)
	set goldmax_0[3] = R2I((goldconstmax_0[3] * factorwave_0) + .5)
	set goldmin_0[4] = R2I((goldconstmin_0[4] * factorwave_0) + .5)
	set goldmax_0[4] = R2I((goldconstmax_0[4] * factorwave_0) + .5)
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[21], 70, goldmin_0[1])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[21], 71, goldmax_0[1])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[22], 70, goldmin_0[2])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[22], 71, goldmax_0[2])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[23], 70, goldmin_0[3])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[23], 71, goldmax_0[3])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[24], 70, goldmin_0[4])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[24], 71, goldmax_0[4])
	set wavenumber_0 = 7
	set factorwave_0 = 1. + (factor_0 * (wavenumber_0 - 1))
	set goldmin_0[1] = R2I((goldconstmin_0[1] * factorwave_0) + .5)
	set goldmax_0[1] = R2I((goldconstmax_0[1] * factorwave_0) + .5)
	set goldmin_0[2] = R2I((goldconstmin_0[2] * factorwave_0) + .5)
	set goldmax_0[2] = R2I((goldconstmax_0[2] * factorwave_0) + .5)
	set goldmin_0[3] = R2I((goldconstmin_0[3] * factorwave_0) + .5)
	set goldmax_0[3] = R2I((goldconstmax_0[3] * factorwave_0) + .5)
	set goldmin_0[4] = R2I((goldconstmin_0[4] * factorwave_0) + .5)
	set goldmax_0[4] = R2I((goldconstmax_0[4] * factorwave_0) + .5)
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[25], 70, goldmin_0[1])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[25], 71, goldmax_0[1])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[26], 70, goldmin_0[2])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[26], 71, goldmax_0[2])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[27], 70, goldmin_0[3])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[27], 71, goldmax_0[3])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[28], 70, goldmin_0[4])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[28], 71, goldmax_0[4])
	set wavenumber_0 = 8
	set factorwave_0 = 1. + (factor_0 * (wavenumber_0 - 1))
	set goldmin_0[1] = R2I((goldconstmin_0[1] * factorwave_0) + .5)
	set goldmax_0[1] = R2I((goldconstmax_0[1] * factorwave_0) + .5)
	set goldmin_0[2] = R2I((goldconstmin_0[2] * factorwave_0) + .5)
	set goldmax_0[2] = R2I((goldconstmax_0[2] * factorwave_0) + .5)
	set goldmin_0[3] = R2I((goldconstmin_0[3] * factorwave_0) + .5)
	set goldmax_0[3] = R2I((goldconstmax_0[3] * factorwave_0) + .5)
	set goldmin_0[4] = R2I((goldconstmin_0[4] * factorwave_0) + .5)
	set goldmax_0[4] = R2I((goldconstmax_0[4] * factorwave_0) + .5)
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[29], 70, goldmin_0[1])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[29], 71, goldmax_0[1])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[30], 70, goldmin_0[2])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[30], 71, goldmax_0[2])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[31], 70, goldmin_0[3])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[31], 71, goldmax_0[3])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[32], 70, goldmin_0[4])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[32], 71, goldmax_0[4])
	set wavenumber_0 = 9
	set factorwave_0 = 1. + (factor_0 * (wavenumber_0 - 1))
	set goldmin_0[1] = R2I((goldconstmin_0[1] * factorwave_0) + .5)
	set goldmax_0[1] = R2I((goldconstmax_0[1] * factorwave_0) + .5)
	set goldmin_0[2] = R2I((goldconstmin_0[2] * factorwave_0) + .5)
	set goldmax_0[2] = R2I((goldconstmax_0[2] * factorwave_0) + .5)
	set goldmin_0[3] = R2I((goldconstmin_0[3] * factorwave_0) + .5)
	set goldmax_0[3] = R2I((goldconstmax_0[3] * factorwave_0) + .5)
	set goldmin_0[4] = R2I((goldconstmin_0[4] * factorwave_0) + .5)
	set goldmax_0[4] = R2I((goldconstmax_0[4] * factorwave_0) + .5)
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[33], 70, goldmin_0[1])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[33], 71, goldmax_0[1])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[34], 70, goldmin_0[2])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[34], 71, goldmax_0[2])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[35], 70, goldmin_0[3])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[35], 71, goldmax_0[3])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[36], 70, goldmin_0[4])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[36], 71, goldmax_0[4])
	set wavenumber_0 = $A
	set factorwave_0 = 1. + (factor_0 * (wavenumber_0 - 1))
	set goldmin_0[1] = R2I((goldconstmin_0[1] * factorwave_0) + .5)
	set goldmax_0[1] = R2I((goldconstmax_0[1] * factorwave_0) + .5)
	set goldmin_0[2] = R2I((goldconstmin_0[2] * factorwave_0) + .5)
	set goldmax_0[2] = R2I((goldconstmax_0[2] * factorwave_0) + .5)
	set goldmin_0[3] = R2I((goldconstmin_0[3] * factorwave_0) + .5)
	set goldmax_0[3] = R2I((goldconstmax_0[3] * factorwave_0) + .5)
	set goldmin_0[4] = R2I((goldconstmin_0[4] * factorwave_0) + .5)
	set goldmax_0[4] = R2I((goldconstmax_0[4] * factorwave_0) + .5)
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[37], 70, goldmin_0[1])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[37], 71, goldmax_0[1])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[38], 70, goldmin_0[2])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[38], 71, goldmax_0[2])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[39], 70, goldmin_0[3])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[39], 71, goldmax_0[3])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[40], 70, goldmin_0[4])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[40], 71, goldmax_0[4])
endfunction

function InitTrig_Init_System_Receiving_Gold_for_Creeps takes nothing returns nothing
	set gg_trg_Init_System_Receiving_Gold_for_Creeps_1 = CreateTrigger()
	call TriggerRegisterTimerEvent(gg_trg_Init_System_Receiving_Gold_for_Creeps_1, 3., false)
	call TriggerAddAction(gg_trg_Init_System_Receiving_Gold_for_Creeps_1, function Trig_Init_System_Receiving_Gold_for_Creeps_Actions)
endfunction

function Trig_Init_System_Receiving_Experience_for_Creeps_Actions takes nothing returns nothing
	local real factor = .75
	local real factorwave
	local integer wavenumber
	local integer xpconst
	local integer xp
	set xpconst_0[1] = 8
	set xpconst_0[2] = 7
	set xpconst_0[3] = $D
	set xpconst_0[4] = $87
	call SaveInteger(udg_hash_1, 'n01D', 82, 50)
	call SaveInteger(udg_hash_1, 'u00F', 82, 35)
	call SaveInteger(udg_hash_1, 'u00H', 82, 'h')
	call SaveInteger(udg_hash_1, 'n011', 82, 30)
	call SaveInteger(udg_hash_1, 'n00T', 82, 24)
	call SaveInteger(udg_hash_1, 'n00X', 82, 8)
	call SaveInteger(udg_hash_1, 'n00Z', 82, 40)
	call SaveInteger(udg_hash_1, 'u00G', 82, 52)
	call SaveInteger(udg_hash_1, 'n00A', 82, 70)
	set wavenumber_0 = 1
	set factorwave_0 = 1. + (factor_0 * (wavenumber_0 - 1))
	set xp_0[1] = R2I((xpconst_0[1] * factorwave_0) + .5)
	set xp_0[2] = R2I((xpconst_0[2] * factorwave_0) + .5)
	set xp_0[3] = R2I((xpconst_0[3] * factorwave_0) + .5)
	set xp_0[4] = R2I((xpconst_0[4] * factorwave_0) + .5)
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[1], 82, xp_0[1])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[2], 82, xp_0[2])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[3], 82, xp_0[3])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[4], 82, xp_0[4])
	set wavenumber_0 = 2
	set factorwave_0 = 1. + (factor_0 * (wavenumber_0 - 1))
	set xp_0[1] = R2I((xpconst_0[1] * factorwave_0) + .5)
	set xp_0[2] = R2I((xpconst_0[2] * factorwave_0) + .5)
	set xp_0[3] = R2I((xpconst_0[3] * factorwave_0) + .5)
	set xp_0[4] = R2I((xpconst_0[4] * factorwave_0) + .5)
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[5], 82, xp_0[1])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[6], 82, xp_0[2])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[7], 82, xp_0[3])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[8], 82, xp_0[4])
	set wavenumber_0 = 3
	set factorwave_0 = 1. + (factor_0 * (wavenumber_0 - 1))
	set xp_0[1] = R2I((xpconst_0[1] * factorwave_0) + .5)
	set xp_0[2] = R2I((xpconst_0[2] * factorwave_0) + .5)
	set xp_0[3] = R2I((xpconst_0[3] * factorwave_0) + .5)
	set xp_0[4] = R2I((xpconst_0[4] * factorwave_0) + .5)
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[9], 82, xp_0[1])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[$A], 82, xp_0[2])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[$B], 82, xp_0[3])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[$C], 82, xp_0[4])
	set wavenumber_0 = 4
	set factorwave_0 = 1. + (factor_0 * (wavenumber_0 - 1))
	set xp_0[1] = R2I((xpconst_0[1] * factorwave_0) + .5)
	set xp_0[2] = R2I((xpconst_0[2] * factorwave_0) + .5)
	set xp_0[3] = R2I((xpconst_0[3] * factorwave_0) + .5)
	set xp_0[4] = R2I((xpconst_0[4] * factorwave_0) + .5)
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[$D], 82, xp_0[1])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[$E], 82, xp_0[2])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[$F], 82, xp_0[3])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[16], 82, xp_0[4])
	set wavenumber_0 = 5
	set factorwave_0 = 1. + (factor_0 * (wavenumber_0 - 1))
	set xp_0[1] = R2I((xpconst_0[1] * factorwave_0) + .5)
	set xp_0[2] = R2I((xpconst_0[2] * factorwave_0) + .5)
	set xp_0[3] = R2I((xpconst_0[3] * factorwave_0) + .5)
	set xp_0[4] = R2I((xpconst_0[4] * factorwave_0) + .5)
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[17], 82, xp_0[1])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[18], 82, xp_0[2])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[19], 82, xp_0[3])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[20], 82, xp_0[4])
	set wavenumber_0 = 6
	set factorwave_0 = 1. + (factor_0 * (wavenumber_0 - 1))
	set xp_0[1] = R2I((xpconst_0[1] * factorwave_0) + .5)
	set xp_0[2] = R2I((xpconst_0[2] * factorwave_0) + .5)
	set xp_0[3] = R2I((xpconst_0[3] * factorwave_0) + .5)
	set xp_0[4] = R2I((xpconst_0[4] * factorwave_0) + .5)
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[21], 82, xp_0[1])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[22], 82, xp_0[2])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[23], 82, xp_0[3])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[24], 82, xp_0[4])
	set wavenumber_0 = 7
	set factorwave_0 = 1. + (factor_0 * (wavenumber_0 - 1))
	set xp_0[1] = R2I((xpconst_0[1] * factorwave_0) + .5)
	set xp_0[2] = R2I((xpconst_0[2] * factorwave_0) + .5)
	set xp_0[3] = R2I((xpconst_0[3] * factorwave_0) + .5)
	set xp_0[4] = R2I((xpconst_0[4] * factorwave_0) + .5)
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[25], 82, xp_0[1])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[26], 82, xp_0[2])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[27], 82, xp_0[3])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[28], 82, xp_0[4])
	set wavenumber_0 = 8
	set factorwave_0 = 1. + (factor_0 * (wavenumber_0 - 1))
	set xp_0[1] = R2I((xpconst_0[1] * factorwave_0) + .5)
	set xp_0[2] = R2I((xpconst_0[2] * factorwave_0) + .5)
	set xp_0[3] = R2I((xpconst_0[3] * factorwave_0) + .5)
	set xp_0[4] = R2I((xpconst_0[4] * factorwave_0) + .5)
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[29], 82, xp_0[1])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[30], 82, xp_0[2])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[31], 82, xp_0[3])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[32], 82, xp_0[4])
	set wavenumber_0 = 9
	set factorwave_0 = 1. + (factor_0 * (wavenumber_0 - 1))
	set xp_0[1] = R2I((xpconst_0[1] * factorwave_0) + .5)
	set xp_0[2] = R2I((xpconst_0[2] * factorwave_0) + .5)
	set xp_0[3] = R2I((xpconst_0[3] * factorwave_0) + .5)
	set xp_0[4] = R2I((xpconst_0[4] * factorwave_0) + .5)
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[33], 82, xp_0[1])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[34], 82, xp_0[2])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[35], 82, xp_0[3])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[36], 82, xp_0[4])
	set wavenumber_0 = $A
	set factorwave_0 = 1. + (factor_0 * (wavenumber_0 - 1))
	set xp_0[1] = R2I((xpconst_0[1] * factorwave_0) + .5)
	set xp_0[2] = R2I((xpconst_0[2] * factorwave_0) + .5)
	set xp_0[3] = R2I((xpconst_0[3] * factorwave_0) + .5)
	set xp_0[4] = R2I((xpconst_0[4] * factorwave_0) + .5)
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[37], 82, xp_0[1])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[38], 82, xp_0[2])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[39], 82, xp_0[3])
	call SaveInteger(udg_hash_1, udg_Wave_Unit_tape_1[40], 82, xp_0[4])
endfunction

function InitTrig_Init_System_Receiving_Experience_for_Creeps takes nothing returns nothing
	set gg_trg_Init_System_Receiving_Experience_for_Creeps_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Init_System_Receiving_Experience_for_Creeps_1, function Trig_Init_System_Receiving_Experience_for_Creeps_Actions)
endfunction

function Trig_Add_Experience_System_Receiving_Experience_for_Creeps_Condition_Actions takes nothing returns boolean
	return (GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE_1) > .405 and IsUnitIllusion(GetFilterUnit()) == false and IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO_1) and IsUnitEnemy(GetFilterUnit(), udg_Temp_Player_1[1])) != null
endfunction

function Trig_Add_Experience_System_Receiving_Experience_for_Creeps_Actions takes nothing returns nothing
	local unit creep = GetDyingUnit()
	local integer xp = LoadInteger(udg_hash_1, GetUnitTypeId(creep_0), 82)
	local group g = CreateGroup()
	local integer count
	local unit Picked
	local boolean normalmob = LoadBoolean(udg_hash_1, GetHandleId(creep_0), 83)
	if xp_0 > 0 then
		set udg_Temp_Player_1[1] = GetOwningPlayer(creep_0)
		call GroupEnumUnitsInRange(g_0, GetUnitX(creep_0), GetUnitY(creep_0), 1200., Filter(function Trig_Add_Experience_System_Receiving_Experience_for_Creeps_Condition_Actions))
		set count_0 = CountUnitsInGroup(g_0)
		if normalmob_0 == false then
			set xp_0 = R2I((xp_0 / 2) + .5)
		endif
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			call AddHeroXP(Picked_0, R2I((xp_0 / count_0) + .5), true)
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
	endif
	set creep_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set Picked_0 = null
endfunction

function Trig_Add_Experience_System_Receiving_Experience_for_Creeps_Conditions takes nothing returns boolean
	return IsUnitIllusion(GetDyingUnit()) == false and GetUnitAbilityLevel(GetDyingUnit(), 'Aloc') <= 0 and GetUnitTypeId(GetDyingUnit()) != 'h00U' and (GetOwningPlayer(GetDyingUnit()) == Player(9) or GetOwningPlayer(GetDyingUnit()) == Player($A) or GetOwningPlayer(GetDyingUnit()) == Player($B))
endfunction

function InitTrig_Add_Experience_System_Receiving_Experience_for_Creeps takes nothing returns nothing
	local integer index = 0
	set gg_trg_Add_Experience_System_Receiving_Experience_for_Creeps_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Add_Experience_System_Receiving_Experience_for_Creeps_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Add_Experience_System_Receiving_Experience_for_Creeps_1, Condition(function Trig_Add_Experience_System_Receiving_Experience_for_Creeps_Conditions))
	call TriggerAddAction(gg_trg_Add_Experience_System_Receiving_Experience_for_Creeps_1, function Trig_Add_Experience_System_Receiving_Experience_for_Creeps_Actions)
endfunction

function Trig_Init_Potion_System_Actions takes nothing returns nothing
	set udg_Potion_Effect_1[1] = "war3mapImported\\Item_Potion_TinyGreen.mdl"
	set udg_Potion_Type_1[1] = "life"
	set udg_Potion_Heal_Amount_1[1] = 80
	set udg_Potion_Size_1[1] = 1.2
	set udg_Potion_Effect_1[2] = "war3mapImported\\Item_Potion_TinyBlue.mdl"
	set udg_Potion_Type_1[2] = "mana"
	set udg_Potion_Heal_Amount_1[2] = 55
	set udg_Potion_Size_1[2] = 1.2
	set udg_Potion_Effect_1[3] = "war3mapImported\\Item_Potion_SmallGreen.mdl"
	set udg_Potion_Type_1[3] = "life"
	set udg_Potion_Heal_Amount_1[3] = $A0
	set udg_Potion_Size_1[3] = 1.35
	set udg_Potion_Effect_1[4] = "war3mapImported\\Item_Potion_SmallBlue.mdl"
	set udg_Potion_Type_1[4] = "mana"
	set udg_Potion_Heal_Amount_1[4] = 'x'
	set udg_Potion_Size_1[4] = 1.35
	set udg_Potion_Effect_1[5] = "war3mapImported\\Item_Potion_BigGreen.mdl"
	set udg_Potion_Type_1[5] = "life"
	set udg_Potion_Heal_Amount_1[5] = 305
	set udg_Potion_Size_1[5] = 1.4
	set udg_Potion_Effect_1[6] = "war3mapImported\\Item_Potion_BigBlue.mdl"
	set udg_Potion_Type_1[6] = "mana"
	set udg_Potion_Heal_Amount_1[6] = $DC
	set udg_Potion_Size_1[6] = 1.4
	set udg_Potion_Effect_1[7] = "war3mapImported\\Item_Potion_LargeGreen.mdl"
	set udg_Potion_Type_1[7] = "life"
	set udg_Potion_Heal_Amount_1[7] = 555
	set udg_Potion_Size_1[7] = 1.55
	set udg_Potion_Effect_1[8] = "war3mapImported\\Item_Potion_LargeBlue.mdl"
	set udg_Potion_Type_1[8] = "mana"
	set udg_Potion_Heal_Amount_1[8] = 405
	set udg_Potion_Size_1[8] = 1.55
endfunction

function InitTrig_Init_Potion_System takes nothing returns nothing
	set gg_trg_Init_Potion_System_1 = CreateTrigger()
	call TriggerRegisterTimerEvent(gg_trg_Init_Potion_System_1, 1., false)
	call TriggerAddAction(gg_trg_Init_Potion_System_1, function Trig_Init_Potion_System_Actions)
endfunction

function Trig_Mob_Dead_Create_Potion_Conditions takes nothing returns boolean
	return ((GetOwningPlayer(GetDyingUnit()) == Player($B) or GetOwningPlayer(GetDyingUnit()) == Player($A) or GetOwningPlayer(GetDyingUnit()) == Player(9)) and GetRandomInt(1, 'd') <= 8 and IsUnitType(GetDyingUnit(), UNIT_TYPE_STRUCTURE_1) == false and GetUnitTypeId(GetDyingUnit()) != 'h00U' and IsUnitIllusion(GetDyingUnit()) == false and IsUnitType(GetDyingUnit(), UNIT_TYPE_SUMMONED_1) == false) != null
endfunction

function Trig_Mob_Dead_Create_Potion_Actions takes nothing returns nothing
	local integer minint
	local integer maxint
	local integer numberwave = udg_Nomer_samoi_volni_1
	if numberwave_0 >= 1 and numberwave_0 <= 3 then
		set minint_0 = 1
	endif
	if numberwave_0 >= 4 and numberwave_0 <= 6 then
		set minint_0 = 3
	endif
	if numberwave_0 >= 7 and numberwave_0 <= 9 then
		set minint_0 = 5
	endif
	if numberwave_0 >= $A then
		set minint_0 = 7
	endif
	if numberwave_0 == 1 then
		set maxint_0 = 2
	endif
	if numberwave_0 >= 2 and numberwave_0 <= 4 then
		set maxint_0 = 4
	endif
	if numberwave_0 >= 5 and numberwave_0 <= 7 then
		set maxint_0 = 6
	endif
	if numberwave_0 >= 8 then
		set maxint_0 = 8
	endif
	call CreatePotion(GetUnitX(GetDyingUnit()), GetUnitY(GetDyingUnit()), minint_0, maxint_0)
endfunction

function InitTrig_Mob_Dead_Create_Potion takes nothing returns nothing
	local integer index = 0
	set gg_trg_Mob_Dead_Create_Potion_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Mob_Dead_Create_Potion_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Mob_Dead_Create_Potion_1, Condition(function Trig_Mob_Dead_Create_Potion_Conditions))
	call TriggerAddAction(gg_trg_Mob_Dead_Create_Potion_1, function Trig_Mob_Dead_Create_Potion_Actions)
endfunction

function Trig_Check_Potion_Picked_Up_Conditions takes nothing returns boolean
	return (GetUnitState(GetEnteringUnit(), UNIT_STATE_LIFE_1) > .405 and IsUnitType(GetEnteringUnit(), UNIT_TYPE_HERO_1) and GetPlayerId(GetOwningPlayer(GetEnteringUnit())) <= 8) != null
endfunction

function Trig_Check_Potion_Picked_Up_Actions takes nothing returns nothing
	local region reg = GetTriggeringRegion()
	local unit hero = GetEnteringUnit()
	local unit dammi = LoadUnitHandle(udg_hash_1, GetHandleId(reg_0), 1)
	local rect rct = LoadRectHandle(udg_hash_1, GetHandleId(reg_0), 2)
	local integer potionindex = LoadInteger(udg_hash_1, GetHandleId(dammi_0), 1)
	local effect ef = LoadEffectHandle(udg_hash_1, GetHandleId(dammi_0), 2)
	local string healtype = udg_Potion_Type_1[potionindex_0]
	local integer heal = udg_Potion_Heal_Amount_1[potionindex_0]
	local real x = GetUnitX(hero_0)
	local real y = GetUnitY(hero_0)
	local real xp = GetUnitState(hero_0, UNIT_STATE_LIFE_1)
	local real xpmax = GetUnitState(hero_0, UNIT_STATE_MAX_LIFE_1)
	local real mp = GetUnitState(hero_0, UNIT_STATE_MANA_1)
	local real mpmax = GetUnitState(hero_0, UNIT_STATE_MAX_MANA_1)
	local texttag txt
	local real vel = .0221875
	local real angle = 45. + GetRandomReal(.0, 90.)
	local real xvel = vel_0 * Cos(angle_0 * bj_DEGTORAD_1)
	local real yvel = vel_0 * Sin(angle_0 * bj_DEGTORAD_1)
	local boolean hil = false
	if healtype_0 == "life" and (xp_0 < xpmax_0) then
		call SetUnitState(hero_0, UNIT_STATE_LIFE_1, xp_0 + heal_0)
		call DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", hero_0, "origin"), 2.)
		set txt_0 = CreateTextTag()
		call SetTextTagText(txt_0, "|cFF00DC00+" + I2S(heal_0) + "|r", .03)
		set hil_0 = true
	endif
	if healtype_0 == "mana" and (mp_0 < mpmax_0) then
		call SetUnitState(hero_0, UNIT_STATE_MANA_1, mp_0 + heal_0)
		call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIma\\AImaTarget.mdl", hero_0, "origin"))
		set txt_0 = CreateTextTag()
		call SetTextTagText(txt_0, "|c000347FC+" + I2S(heal_0) + "|r", .03)
		set hil_0 = true
	endif
	if hil_0 then
		call KillUnit(dammi_0)
		call DestroyEffect(ef_0)
		call SetTextTagPos(txt_0, x_0, y_0, .0)
		call SetTextTagColor(txt_0, 0, 0, 0, $C8)
		call SetTextTagVelocity(txt_0, xvel_0, yvel_0)
		call SetTextTagLifespan(txt_0, 3.)
		call SetTextTagFadepoint(txt_0, .0)
		call SetTextTagPermanent(txt_0, false)
		call FlushChildHashtable(udg_hash_1, GetHandleId(reg_0))
		call FlushChildHashtable(udg_hash_1, GetHandleId(dammi_0))
		call RemoveRect(rct_0)
		call RemoveRegion(reg_0)
	endif
	set reg_0 = null
	set hero_0 = null
	set dammi_0 = null
	set rct_0 = null
	set ef_0 = null
	set txt_0 = null
endfunction

function InitTrig_Check_Potion_Picked_Up takes nothing returns nothing
	set gg_trg_Check_Potion_Picked_Up_1 = CreateTrigger()
	call TriggerAddCondition(gg_trg_Check_Potion_Picked_Up_1, Condition(function Trig_Check_Potion_Picked_Up_Conditions))
	call TriggerAddAction(gg_trg_Check_Potion_Picked_Up_1, function Trig_Check_Potion_Picked_Up_Actions)
endfunction

function Trig_InitSystem_ForGroup takes nothing returns nothing
	call SetPlayerAbilityAvailable(GetEnumPlayer(), 'A66B', false)
endfunction

function Trig_InitSystem_Actions takes nothing returns nothing
	local group g = CreateGroup()
	local unit Picked
	call ForForce(bj_FORCE_ALL_PLAYERS_1, function Trig_InitSystem_ForGroup)
	call GroupEnumUnitsInRect(g_0, bj_mapInitialPlayableArea_1, null)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) != true then
			call GroupAddUnit(udg_DamageGroup_1, Picked_0)
			call UnitAddAbility(Picked_0, 'A66B')
			call UnitMakeAbilityPermanent(Picked_0, true, 'A66B')
			call UnitMakeAbilityPermanent(Picked_0, true, 'A666')
			call TriggerRegisterUnitEvent(gg_trg_AddDamage_1, Picked_0, EVENT_UNIT_DAMAGED_1)
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set Picked_0 = null
	call DestroyGroup(g_0)
	set g_0 = null
endfunction

function InitTrig_InitSystem takes nothing returns nothing
	set gg_trg_InitSystem_1 = CreateTrigger()
	call TriggerRegisterTimerEvent(gg_trg_InitSystem_1, .01, false)
	call TriggerAddAction(gg_trg_InitSystem_1, function Trig_InitSystem_Actions)
endfunction

function Trig_EnterUnit_Conditions takes nothing returns boolean
	return IsUnitInGroup(GetEnteringUnit(), udg_DamageGroup_1) == false
endfunction

function Trig_EnterUnit_Actions takes nothing returns nothing
	local unit u = GetEnteringUnit()
	if GetUnitTypeId(u_0) != 'h00U' and IsUnitType(u_0, UNIT_TYPE_STRUCTURE_1) != true and GetUnitTypeId(u_0) != 'h00C' then
		call GroupAddUnit(udg_DamageGroup_1, u_0)
		call UnitAddAbility(u_0, 'A66B')
		call UnitMakeAbilityPermanent(u_0, true, 'A66B')
		call UnitMakeAbilityPermanent(u_0, true, 'A666')
		call TriggerRegisterUnitEvent(gg_trg_AddDamage_1, u_0, EVENT_UNIT_DAMAGED_1)
	endif
	set u_0 = null
endfunction

function InitTrig_EnterUnit takes nothing returns nothing
	local region rectRegion = CreateRegion()
	set gg_trg_EnterUnit_1 = CreateTrigger()
	call RegionAddRect(rectRegion_0, GetWorldBounds())
	call TriggerRegisterEnterRegion(gg_trg_EnterUnit_1, rectRegion_0, null)
	call TriggerAddCondition(gg_trg_EnterUnit_1, Condition(function Trig_EnterUnit_Conditions))
	call TriggerAddAction(gg_trg_EnterUnit_1, function Trig_EnterUnit_Actions)
endfunction

function Trig_Remove_Bonus_Marshal_Armor_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit damaged = LoadUnitHandle(udg_hash_1, h_0, 1)
	call SetUnitLifeAndManaRegeneration(damaged_0, "life", -1)
	call SetArmorAbilityLevel(damaged_0, -1)
	call SaveInteger(udg_hash_1, GetHandleId(damaged_0), $99, LoadInteger(udg_hash_1, GetHandleId(damaged_0), $99) - 1)
	set t_0 = CreateTimer()
	set h_0 = GetHandleId(t_0)
	call SaveUnitHandle(udg_hash_1, h_0, 1, damaged_0)
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
	set damaged_0 = null
endfunction

function Trig_Remove_ASBonus_Double_Attack_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit damager = LoadUnitHandle(udg_hash_1, h_0, 1)
	call DestroyEffect(LoadEffectHandle(udg_hash_1, h_0, 2))
	call DestroyEffect(LoadEffectHandle(udg_hash_1, h_0, 3))
	call UnitRemoveAbility(damager_0, 'A0P4')
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
	set damager_0 = null
endfunction

function Trig_Remove_Lightning_From_Staff_Of_Lightning_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit Picked = LoadUnitHandle(udg_hash_1, h_0, 1)
	local integer wait = LoadInteger(udg_hash_1, h_0, 2)
	local unit damaged = LoadUnitHandle(udg_hash_1, h_0, 3)
	local lightning l = LoadLightningHandle(udg_hash_1, h_0, 4)
	local location locr = GetUnitLoc(damaged_0)
	local location locd = GetUnitLoc(Picked_0)
	set wait_0 = wait_0 - 1
	call SaveInteger(udg_hash_1, h_0, 2, wait_0)
	call MoveLightningEx(l_0, true, GetUnitX(damaged_0), GetUnitY(damaged_0), GetUnitFlyHeight(damaged_0) + 25. + GetLocationZ(locr_0), GetUnitX(Picked_0), GetUnitY(Picked_0), GetUnitFlyHeight(Picked_0) + 25. + GetLocationZ(locd_0))
	if wait_0 <= 0 then
		call DestroyLightning(l_0)
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set Picked_0 = null
	set damaged_0 = null
	set l_0 = null
	call RemoveLocation(locr_0)
	call RemoveLocation(locd_0)
	set locr_0 = null
	set locd_0 = null
endfunction

function Trig_Beorn_Rage_Remove_Effects_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit damaged = LoadUnitHandle(udg_hash_1, h_0, 1)
	local effect ef
	set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 2)
	call DestroyEffect(ef_0)
	set ef_0 = null
	set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 3)
	call DestroyEffect(ef_0)
	set ef_0 = null
	call SaveBoolean(udg_hash_1, GetHandleId(damaged_0), $84, false)
	call SetAttackSpeedAbilityLevel(damaged_0, -50)
	call SetAttackAbilityLevel(damaged_0, -$A)
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set damaged_0 = null
	set t_0 = null
endfunction

function Trig_Blood_Bow_Remove_Effects_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local integer attackspeed = LoadInteger(udg_hash_1, h_0, 1)
	local unit damager = LoadUnitHandle(udg_hash_1, h_0, 2)
	local effect ef = LoadEffectHandle(udg_hash_1, h_0, 3)
	call DestroyEffect(ef_0)
	set ef_0 = null
	set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 4)
	call DestroyEffect(ef_0)
	set ef_0 = null
	call SetAttackSpeedAbilityLevel(damager_0, -attackspeed_0)
	call SetAttackAbilityLevel(damager_0, -R2I(attackspeed_0 / 2))
	call SaveInteger(udg_hash_1, GetHandleId(damager_0), $82, 0)
	call SaveTimerHandle(udg_hash_1, GetHandleId(damager_0), $81, null)
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set damager_0 = null
	set t_0 = null
endfunction

function Trig_Moon_Chackrum_Periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit damager = LoadUnitHandle(udg_hash_1, h_0, 1)
	local unit target = LoadUnitHandle(udg_hash_1, h_0, $C)
	local integer count = LoadInteger(udg_hash_1, h_0, 3)
	local unit glaive = LoadUnitHandle(udg_hash_1, h_0, $A)
	local unit target2
	local real damage
	local real damagemagic
	local group gdamage
	local real height
	local effect ef
	local real x = GetUnitX(glaive_0)
	local real y = GetUnitY(glaive_0)
	local real xt = GetUnitX(target_0)
	local real yt = GetUnitY(target_0)
	local real xorb
	local real yorb
	local real angle = bj_RADTODEG_1 * Atan2((yt_0 - y_0), (xt_0 - x_0))
	local real dist = SquareRoot(((xt_0 - x_0) * (xt_0 - x_0)) + ((yt_0 - y_0) * (yt_0 - y_0)))
	local player p
	local group g
	local group grup
	local unit Picked
	local boolean remove = false
	local boolean reselect = false
	local unit orb2
	local effect ef2
	local boolean night
	local string str
	local real resist
	if GetUnitState(target_0, UNIT_STATE_LIFE_1) > .405 then
		set xorb_0 = x_0 + 27. * Cos(angle_0 * bj_DEGTORAD_1)
		set yorb_0 = y_0 + 27. * Sin(angle_0 * bj_DEGTORAD_1)
		call SetUnitPosition(glaive_0, xorb_0, yorb_0)
		set dist_0 = SquareRoot((xt_0 - xorb_0) * (xt_0 - xorb_0) + (yt_0 - yorb_0) * (yt_0 - yorb_0))
		call SetUnitFacing(glaive_0, angle_0)
		if dist_0 < 21. then
			call SetUnitPosition(glaive_0, xt_0, yt_0)
			set p_0 = GetOwningPlayer(damager_0)
			set gdamage_0 = LoadGroupHandle(udg_hash_1, h_0, 9)
			set night_0 = LoadBoolean(udg_hash_1, h_0, 4)
			call SetUnitPosition(glaive_0, xt_0, yt_0)
			if GetUnitState(target_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(target_0, UNIT_TYPE_STRUCTURE_1) == false and GetUnitTypeId(target_0) != 'h00U' and GetUnitTypeId(target_0) != 'uplg' then
				set damage_0 = LoadReal(udg_hash_1, h_0, 2)
				set damagemagic_0 = LoadReal(udg_hash_1, h_0, 20)
				set resist_0 = LoadReal(udg_hash_1, h_0, 21)
				set damage_0 = damage_0 * resist_0
				set damagemagic_0 = damagemagic_0 * resist_0
				call SaveReal(udg_hash_1, h_0, 2, damage_0)
				call SaveReal(udg_hash_1, h_0, 20, damagemagic_0)
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl", target_0, "chest"))
				call UnitDamageTarget(damager_0, target_0, ConvertMagicAndChaosDamageInClear(target_0, damagemagic_0, damage_0), false, false, ATTACK_TYPE_CHAOS_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
				if night_0 then
					call DestroyEffect(AddSpecialEffectTarget("Effects\\SoundTrauma.mdl", target_0, "chest"))
				endif
				call GroupAddUnit(gdamage_0, target_0)
			endif
			set count_0 = count_0 - 1
			call SaveInteger(udg_hash_1, h_0, 3, count_0)
			call SaveGroupHandle(udg_hash_1, h_0, 9, gdamage_0)
			set reselect_0 = true
			set p_0 = null
			set gdamage_0 = null
		endif
	endif
	if count_0 > 0 and reselect_0 then
		set grup_0 = CreateGroup()
		set p_0 = GetOwningPlayer(damager_0)
		set g_0 = CreateGroup()
		call GroupEnumUnitsInRange(g_0, xt_0, yt_0, 350., null)
		set gdamage_0 = LoadGroupHandle(udg_hash_1, h_0, 9)
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if IsUnitInGroup(Picked_0, gdamage_0) == false and IsUnitEnemy(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' and GetUnitTypeId(Picked_0) != 'uplg' then
				call GroupAddUnit(grup_0, Picked_0)
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		set Picked_0 = null
		call RandomUnitFromGroup(1, grup_0)
		set target2_0 = FirstOfGroup(udg_GroupRandomUnitFromGroup_1)
		set p_0 = null
		call GroupClear(g_0)
		call DestroyGroup(g_0)
		set g_0 = null
		if target2_0 != null then
			set x_0 = GetUnitX(glaive_0)
			set y_0 = GetUnitY(glaive_0)
			set xt_0 = GetUnitX(target2_0)
			set yt_0 = GetUnitY(target2_0)
			set dist_0 = SquareRoot(((xt_0 - x_0) * (xt_0 - x_0)) + ((yt_0 - y_0) * (yt_0 - y_0)))
			set angle_0 = bj_RADTODEG_1 * Atan2((yt_0 - y_0), (xt_0 - x_0))
			set p_0 = GetOwningPlayer(damager_0)
			set ef_0 = LoadEffectHandle(udg_hash_1, h_0, $B)
			call DestroyEffect(ef_0)
			set ef_0 = null
			set orb2_0 = CreateUnit(p_0, 'h00U', x_0, y_0, angle_0)
			call RemoveUnit(glaive_0)
			set glaive_0 = null
			if night_0 then
				set str_0 = "Effects\\BlueGlaivie.mdl"
				call SetUnitScale(orb2_0, .6, .6, .6)
			else
				set str_0 = "Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl"
			endif
			set ef2_0 = AddSpecialEffectTarget(str_0, orb2_0, "origin")
			call DestroyEffect(AddSpecialEffectTarget(str_0, target2_0, "chest"))
			call UnitAddAbility(orb2_0, 'Amrf')
			call UnitRemoveAbility(orb2_0, 'Amrf')
			call SetUnitFlyHeight(orb2_0, 45., .0)
			call SaveUnitHandle(udg_hash_1, h_0, $A, orb2_0)
			call SaveEffectHandle(udg_hash_1, h_0, $B, ef2_0)
			call SaveUnitHandle(udg_hash_1, h_0, $C, target2_0)
			set p_0 = null
			set orb2_0 = null
			set ef2_0 = null
			set target2_0 = null
		else
			set remove_0 = true
		endif
		set target2_0 = null
		set p_0 = null
		set gdamage_0 = null
	endif
	if count_0 <= 0 or (GetUnitState(target_0, UNIT_STATE_LIFE_1) < .405) then
		set remove_0 = true
	endif
	if remove_0 then
		call RemoveUnit(glaive_0)
		set glaive_0 = null
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, $B)
		call DestroyEffect(ef_0)
		set ef_0 = null
		set gdamage_0 = LoadGroupHandle(udg_hash_1, h_0, 9)
		call GroupClear(gdamage_0)
		call DestroyGroup(gdamage_0)
		set gdamage_0 = null
		call DestroyTimer(t_0)
		set Picked_0 = null
		call FlushChildHashtable(udg_hash_1, h_0)
	endif
	set t_0 = null
	set damager_0 = null
	set glaive_0 = null
	set target_0 = null
endfunction

function Trig_Stone_Armor_Periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster
	local unit dammi = LoadUnitHandle(udg_hash_1, h_0, 2)
	local integer wait2 = LoadInteger(udg_hash_1, h_0, 3)
	local unit target = LoadUnitHandle(udg_hash_1, h_0, 4)
	local real damage
	local real height
	local effect ef
	local real x = GetUnitX(dammi_0)
	local real y = GetUnitY(dammi_0)
	local real xt = GetUnitX(target_0)
	local real yt = GetUnitY(target_0)
	local real angle = bj_RADTODEG_1 * Atan2(yt_0 - y_0, xt_0 - x_0)
	local real dist
	local boolean destroy = false
	if GetUnitState(target_0, UNIT_STATE_LIFE_1) > .405 then
		set wait2_0 = wait2_0 - 1
		call SaveInteger(udg_hash_1, h_0, 3, wait2_0)
		if wait2_0 == 0 then
			set height_0 = LoadReal(udg_hash_1, h_0, 6)
			call SetUnitFlyHeight(dammi_0, .0, height_0 * 3.33)
		endif
		set x_0 = x_0 + 24. * Cos(angle_0 * bj_DEGTORAD_1)
		set y_0 = y_0 + 24. * Sin(angle_0 * bj_DEGTORAD_1)
		call SetUnitFacing(dammi_0, GetUnitFacing(dammi_0) + 30.)
		if IsTerrainPathable(x_0, y_0, PATHING_TYPE_FLYABILITY_1) == false then
			call SetUnitPosition(dammi_0, x_0, y_0)
		endif
		set dist_0 = SquareRoot((xt_0 - x_0) * (xt_0 - x_0) + (yt_0 - y_0) * (yt_0 - y_0))
		if dist_0 < 25. then
			set caster_0 = LoadUnitHandle(udg_hash_1, h_0, 1)
			set damage_0 = LoadReal(udg_hash_1, h_0, 5)
			set destroy_0 = true
			call SetUnitFlyHeight(dammi_0, GetUnitFlyHeight(target_0) + 50., .0)
			call SetUnitPosition(dammi_0, xt_0, yt_0)
			call UnitDamageTarget(caster_0, target_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", target_0, "chest"))
			call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", GetUnitX(target_0), GetUnitY(target_0)))
			call MoveUnit(target_0, .3, 600., 900., angle_0, .0, true)
			set caster_0 = null
		endif
	else
		set destroy_0 = true
	endif
	if destroy_0 then
		call RemoveUnit(dammi_0)
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 7)
		call DestroyEffect(ef_0)
		set ef_0 = null
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set target_0 = null
	set dammi_0 = null
endfunction

function Trig_IsMinimapPingGuardsAttacked_Refresh_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	set udg_IsMinimapPingGuardsAttacked_1 = false
	call DestroyTimer(t_0)
	set t_0 = null
endfunction

function Trig_Archimagus_Armor_Timer_Death_Denial_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit damaged = LoadUnitHandle(udg_hash_1, h_0, 1)
	local integer hd = GetHandleId(damaged_0)
	local effect ef
	if LoadBoolean(udg_hash_1, hd_0, 'f') then
		set ef_0 = AddSpecialEffectTarget("Effects\\MagicShieldBlue.mdx", damaged_0, "origin")
		call SaveEffectHandle(udg_hash_1, hd_0, 'g', ef_0)
		call SaveReal(udg_hash_1, hd_0, 'i', (500. + (GetHeroInt(damaged_0, true) * 3.)))
	endif
	call SaveReal(udg_hash_1, hd_0, 'h', .0)
	call SaveBoolean(udg_hash_1, hd_0, 'j', false)
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set damaged_0 = null
	set t_0 = null
	set ef_0 = null
endfunction

function Trig_Cuirass_of_Invulnerable_Timer_Death_Denial_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit damaged = LoadUnitHandle(udg_hash_1, h_0, 1)
	local integer hd = GetHandleId(damaged_0)
	local effect ef
	if LoadBoolean(udg_hash_1, hd_0, 94) then
		set ef_0 = AddSpecialEffectTarget("Effects\\PurpleSphere.mdx", damaged_0, "chest")
		call SaveEffectHandle(udg_hash_1, hd_0, 95, ef_0)
	endif
	call SaveBoolean(udg_hash_1, hd_0, $A2, false)
	call SaveReal(udg_hash_1, hd_0, 96, .0)
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set damaged_0 = null
	set t_0 = null
	set ef_0 = null
endfunction

function Trig_Wind_Bow_Remove_Attack_Speed_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local integer attackspeed = LoadInteger(udg_hash_1, h_0, 1)
	local unit damager = LoadUnitHandle(udg_hash_1, h_0, 2)
	local effect ef = LoadEffectHandle(udg_hash_1, h_0, 3)
	call DestroyEffect(ef_0)
	set ef_0 = null
	set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 4)
	call DestroyEffect(ef_0)
	set ef_0 = null
	call SetAttackSpeedAbilityLevel(damager_0, -attackspeed_0)
	call SaveTimerHandle(udg_hash_1, GetHandleId(damager_0), 92, null)
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set damager_0 = null
	set t_0 = null
endfunction

function Trig_Pancir_Iachera_Periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit damaged = LoadUnitHandle(udg_hash_1, h_0, 1)
	local unit dammi = LoadUnitHandle(udg_hash_1, h_0, 2)
	local integer wait = LoadInteger(udg_hash_1, h_0, 3)
	local real angle = LoadReal(udg_hash_1, h_0, 4)
	local real damage
	local real stuntime
	local effect ef
	local real x = GetUnitX(dammi_0)
	local real y = GetUnitY(dammi_0)
	local real xnew = x_0 + 24. * Cos(angle_0 * bj_DEGTORAD_1)
	local real ynew = y_0 + 24. * Sin(angle_0 * bj_DEGTORAD_1)
	local player p = GetOwningPlayer(damaged_0)
	local unit Picked
	local group g = CreateGroup()
	local boolean destroy = false
	set wait_0 = wait_0 - 1
	call SaveInteger(udg_hash_1, h_0, 3, wait_0)
	if wait_0 > 0 then
		if IsTerrainPathable(xnew_0, ynew_0, PATHING_TYPE_FLYABILITY_1) == false then
			call SetUnitPosition(dammi_0, xnew_0, ynew_0)
		endif
		call GroupEnumUnitsInRange(g_0, xnew_0, ynew_0, 100., null)
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if IsUnitEnemy(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				set damage_0 = LoadReal(udg_hash_1, h_0, 5)
				set stuntime_0 = LoadReal(udg_hash_1, h_0, 6)
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl", Picked_0, "chest"))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl", Picked_0, "chest"))
				call UnitDamageTarget(damaged_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
				call StunUnitTimed(Picked_0, stuntime_0)
				set destroy_0 = true
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
	else
		set destroy_0 = true
	endif
	if destroy_0 then
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 7)
		call DestroyEffect(ef_0)
		set ef_0 = null
		call KillUnit(dammi_0)
		set dammi_0 = null
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set damaged_0 = null
	set t_0 = null
	set dammi_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set p_0 = null
	set Picked_0 = null
endfunction

function Trig_Pancir_Iachera_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit damager = LoadUnitHandle(udg_hash_1, h_0, 1)
	call SetAttackAbilityLevel(damager_0, $E)
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
	set damager_0 = null
endfunction

function Trig_Spirit_of_Absorption_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit damager = LoadUnitHandle(udg_hash_1, h_0, 1)
	local real damage = LoadReal(udg_hash_1, h_0, 2)
	local real manaburn = LoadReal(udg_hash_1, h_0, 3)
	local integer wait = LoadInteger(udg_hash_1, h_0, 4)
	local unit dammi = LoadUnitHandle(udg_hash_1, h_0, 5)
	local group gdamage = LoadGroupHandle(udg_hash_1, h_0, 6)
	local effect ef
	local real x = GetUnitX(dammi_0)
	local real y = GetUnitY(dammi_0)
	local player p = GetOwningPlayer(damager_0)
	local unit Picked
	local group g = CreateGroup()
	set wait_0 = wait_0 - 1
	call SaveInteger(udg_hash_1, h_0, 4, wait_0)
	if wait_0 > 0 then
		call GroupEnumUnitsInRange(g_0, x_0, y_0, 100., null)
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if IsUnitEnemy(Picked_0, p_0) and (IsUnitInGroup(Picked_0, udg_PortalCastersMagi_1) == false) and IsUnitInGroup(Picked_0, gdamage_0) == false and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Feedback\\ArcaneTowerAttack.mdl", Picked_0, "origin"))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\OrbOfDeath\\OrbOfDeathMissile.mdl", Picked_0, "chest"))
				call UnitDamageTarget(damager_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
				call SetUnitState(Picked_0, UNIT_STATE_MANA_1, GetUnitState(Picked_0, UNIT_STATE_MANA_1) - manaburn_0)
				call GroupAddUnit(gdamage_0, Picked_0)
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		call SaveGroupHandle(udg_hash_1, h_0, 6, gdamage_0)
	else
		call SetUnitTimeScale(dammi_0, 1.)
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 7)
		call DestroyEffect(ef_0)
		set ef_0 = null
		call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\OrbOfDeath\\OrbOfDeathMissile.mdl", x_0, y_0))
		call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\OrbOfDeath\\AnnihilationMissile.mdl", x_0, y_0))
		call RemoveUnit(dammi_0)
		set dammi_0 = null
		call GroupClear(gdamage_0)
		call DestroyGroup(gdamage_0)
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set damager_0 = null
	set t_0 = null
	set dammi_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set gdamage_0 = null
	set p_0 = null
	set Picked_0 = null
endfunction

function Trig_Triple_Strike_Move_And_Attack_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit damager = LoadUnitHandle(udg_hash_1, h_0, 1)
	local unit damaged = LoadUnitHandle(udg_hash_1, h_0, 2)
	local real damage = LoadReal(udg_hash_1, h_0, 3)
	local integer wait = LoadInteger(udg_hash_1, h_0, 4)
	local integer lvl = LoadInteger(udg_hash_1, h_0, $A)
	local real xdr = GetUnitX(damager_0)
	local real ydr = GetUnitY(damager_0)
	local real xdd = GetUnitX(damaged_0)
	local real ydd = GetUnitY(damaged_0)
	local real angle = (LoadReal(udg_hash_1, h_0, 5)) + 120.
	local real x = xdd_0 + 100. * Cos(angle_0 * bj_DEGTORAD_1)
	local real y = ydd_0 + 100. * Sin(angle_0 * bj_DEGTORAD_1)
	local group g
	local unit Picked
	local player p
	call SaveReal(udg_hash_1, h_0, 5, angle_0)
	set wait_0 = wait_0 + 1
	call SaveInteger(udg_hash_1, h_0, 4, wait_0)
	if wait_0 <= 4 then
		set damage_0 = (damage_0 * (.3 + .1 * lvl_0))
		if wait_0 == 3 then
			call SetUnitX(damager_0, x_0)
			call SetUnitY(damager_0, y_0)
			call SetUnitFacing(damager_0, angle_0 + 180.)
			call SaveReal(udg_hash_1, h_0, 8, xdd_0)
			call SaveReal(udg_hash_1, h_0, 9, ydd_0)
			call SetUnitTimeScale(damager_0, 1.4)
			call SetUnitAnimationByIndex(damager_0, 3)
			call TimerStart(t_0, .6, false, function Trig_Triple_Strike_Move_And_Attack_Actions)
		endif
		if wait_0 == 4 then
			set g_0 = CreateGroup()
			call GroupEnumUnitsInRange(g_0, LoadReal(udg_hash_1, h_0, 8), LoadReal(udg_hash_1, h_0, 9), 200., null)
			set p_0 = GetOwningPlayer(damager_0)
			loop
				set Picked_0 = FirstOfGroup(g_0)
				exitwhen Picked_0 == null
				if IsUnitEnemy(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
					call UnitDamageTarget(damager_0, Picked_0, damage_0 + (30 * lvl_0), false, false, ATTACK_TYPE_MELEE_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
					call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", Picked_0, "chest"))
				endif
				call GroupRemoveUnit(g_0, Picked_0)
			endloop
			call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile.mdl", LoadReal(udg_hash_1, h_0, 8), LoadReal(udg_hash_1, h_0, 9)))
			call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl", LoadReal(udg_hash_1, h_0, 8), LoadReal(udg_hash_1, h_0, 9)))
			call TimerStart(t_0, .0, false, function Trig_Triple_Strike_Move_And_Attack_Actions)
		endif
		if wait_0 < 3 then
			if GetRandomInt(1, 2) == 1 then
				call SetUnitAnimationByIndex(damager_0, 8)
			else
				call SetUnitAnimationByIndex(damager_0, 2)
			endif
			call SetUnitX(damager_0, x_0)
			call SetUnitY(damager_0, y_0)
			call SetUnitFacing(damager_0, angle_0 + 180.)
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Blink\\BlinkCaster.mdl", damager_0, "chest"))
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", damaged_0, "chest"))
			call UnitDamageTarget(damager_0, damaged_0, damage_0, true, false, ATTACK_TYPE_MELEE_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
		endif
	else
		call SaveBoolean(udg_hash_1, GetHandleId(damager_0), 61, false)
		call DestroyEffect(LoadEffectHandle(udg_hash_1, h_0, 6))
		call DestroyEffect(LoadEffectHandle(udg_hash_1, h_0, 7))
		call SetUnitInvulnerable(damager_0, false)
		call SetUnitPathing(damager_0, true)
		call SetUnitAnimation(damager_0, "Stand")
		call SetUnitTimeScale(damager_0, 1.)
		call SetUnitTurnSpeed(damager_0, GetUnitDefaultTurnSpeed(damager_0))
		call IssueImmediateOrderById(damager_0, $D0004)
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set damager_0 = null
	set damaged_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set Picked_0 = null
	set p_0 = null
endfunction

function Trig_Damage_Unit_With_Wait_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit damaged = LoadUnitHandle(udg_hash_1, h_0, 1)
	local unit damager = LoadUnitHandle(udg_hash_1, h_0, 2)
	local real damage = LoadReal(udg_hash_1, h_0, 3)
	local string str = LoadStr(udg_hash_1, h_0, 4)
	if str_0 == "phys" then
		call UnitDamageTarget(damager_0, damaged_0, damage_0, false, false, ATTACK_TYPE_MELEE_1, DAMAGE_TYPE_NORMAL_1, WEAPON_TYPE_WHOKNOWS_1)
	endif
	if str_0 == "magic" then
		call UnitDamageTarget(damager_0, damaged_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
	endif
	if str_0 == "clear" then
		call UnitDamageTarget(damager_0, damaged_0, damage_0, false, false, ATTACK_TYPE_CHAOS_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
	endif
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
	set damaged_0 = null
	set damager_0 = null
endfunction

function Trig_Make_Unit_UnInvulnerable_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit damaged = LoadUnitHandle(udg_hash_1, h_0, 1)
	call SetUnitInvulnerable(damaged_0, false)
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
	set damaged_0 = null
endfunction

function Trig_Hil_Unit_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit damaged = LoadUnitHandle(udg_hash_1, h_0, 1)
	local real hil = LoadReal(udg_hash_1, h_0, 2)
	call SetUnitState(damaged_0, UNIT_STATE_LIFE_1, GetUnitState(damaged_0, UNIT_STATE_LIFE_1) + hil_0)
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
	set damaged_0 = null
endfunction

function Trig_Trolls_Evasion_Salto_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit damaged = LoadUnitHandle(udg_hash_1, h_0, 1)
	local integer i = LoadInteger(udg_hash_1, h_0, 2)
	if i_0 == 0 then
		call SaveInteger(udg_hash_1, h_0, 2, 1)
		call TimerStart(t_0, .5, false, function Trig_Trolls_Evasion_Salto_Actions)
		call SetUnitTimeScale(damaged_0, 1.75)
	else
		call PauseUnit(damaged_0, false)
		call SetUnitTimeScale(damaged_0, 1.)
		if GetUnitState(damaged_0, UNIT_STATE_LIFE_1) > .405 then
			call SetUnitAnimation(damaged_0, "Stand")
		endif
		call SetUnitInvulnerable(damaged_0, false)
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set damaged_0 = null
endfunction

function Trig_Dark_Crypt_Fiend_Attack_Unbuff_Dispel_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit damaged = LoadUnitHandle(udg_hash_1, h_0, 1)
	call SetArmorAbilityLevel(damaged_0, 2)
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
	set damaged_0 = null
endfunction

function Trig_Varmosar_Lightning_Destroy_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local lightning l = LoadLightningHandle(udg_hash_1, h_0, 1)
	call DestroyLightning(l_0)
	set l_0 = null
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
endfunction

function Trig_AddDamage_Refresh_Creep_Assists_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local player pr = LoadPlayerHandle(udg_hash_1, h_0, 1)
	local force players = LoadForceHandle(udg_hash_1, h_0, 2)
	local integer hdd = LoadInteger(udg_hash_1, h_0, 3)
	call ForceRemovePlayer(players_0, pr_0)
	call SaveForceHandle(udg_hash_1, hdd_0, 72, players_0)
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
	set pr_0 = null
	set players_0 = null
endfunction

function Trig_AddDamage_Refresh_Magic_Damage_Handle_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local integer hdd = LoadInteger(udg_hash_1, h_0, 1)
	call SaveBoolean(udg_hash_1, hdd_0, $9D, false)
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
endfunction

function Trig_AddDamage_Refresh_Handle_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local integer hdd = LoadInteger(udg_hash_1, h_0, 2)
	call SaveInteger(udg_hash_1, hdd_0, $AA, 0)
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
endfunction

function Trig_AddDamage_Actions takes nothing returns nothing
	local unit damager = GetEventDamageSource()
	local unit damaged = GetTriggerUnit()
	local real damage = GetEventDamage()
	local integer hdr = GetHandleId(damager_0)
	local integer hdd = GetHandleId(damaged_0)
	local real xr = GetUnitX(damager_0)
	local real yr = GetUnitY(damager_0)
	local real xd = GetUnitX(damaged_0)
	local real yd = GetUnitY(damaged_0)
	local player pr = GetOwningPlayer(damager_0)
	local player pd = GetOwningPlayer(damaged_0)
	local location locr
	local location locd
	local unit dammi
	local unit Picked
	local unit u
	local lightning l
	local timer t
	local integer h
	local timer t2
	local integer h2
	local timer t3
	local integer h3
	local texttag txt
	local integer i
	local integer lvl
	local integer count
	local effect ef
	local real angle
	local real r1
	local real r2
	local real r3
	local real r4
	local string str
	local group g
	local group g2
	local force players
	local boolean bool
	local real dist
	local boolean b
	local player p
	local group gdamagefromdamager
	local group gdamagefromdamaged
	local integer random
	local boolean melee
	local boolean physical = false
	local boolean loadphysical = false
	if 1 == 2 then
		set t_0 = CreateTimer()
		set h_0 = GetHandleId(t_0)
		call SaveInteger(udg_hash_1, h_0, 2, hdd_0)
		call TimerStart(t_0, .0, false, function Trig_AddDamage_Refresh_Handle_Actions)
		set t_0 = null
	endif
	if (GetUnitAbilityLevel(damaged_0, 'B00M') > 0 or GetUnitAbilityLevel(damaged_0, 'B00L') > 0) then
		if GetUnitAbilityLevel(GetTriggerUnit(), 'B00M') > 0 then
			set melee_0 = true
		else
			set melee_0 = false
		endif
		set physical_0 = true
		call UnitRemoveAbility(GetTriggerUnit(), 'B00M')
		call UnitRemoveAbility(GetTriggerUnit(), 'B00L')
	endif
	set gdamagefromdamager_0 = CreateGroup()
	set gdamagefromdamaged_0 = CreateGroup()
	if damage_0 >= .01 and physical_0 then
		if GetUnitTypeId(damager_0) == 'N00W' then
			set t_0 = CreateTimer()
			set h_0 = GetHandleId(t_0)
			set locr_0 = GetUnitLoc(damager_0)
			set locd_0 = GetUnitLoc(damaged_0)
			set l_0 = AddLightningEx("CLPB", true, xr_0, yr_0, GetUnitFlyHeight(damager_0) + 125. + GetLocationZ(locr_0), xd_0, yd_0, GetUnitFlyHeight(damaged_0) + 30. + GetLocationZ(locd_0))
			call SaveLightningHandle(udg_hash_1, h_0, 1, l_0)
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", damaged_0, "origin"))
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\ChimaeraLightningMissile\\ChimaeraLightningMissile.mdl", damaged_0, "chest"))
			call DestroyEffect(AddSpecialEffectTarget("Effects\\OrbOfLightning.mdx", damaged_0, "origin"))
			call TimerStart(t_0, .3, false, function Trig_Varmosar_Lightning_Destroy_Actions)
			set l_0 = null
			call RemoveLocation(locr_0)
			call RemoveLocation(locd_0)
			set locr_0 = null
			set locd_0 = null
			set t_0 = null
		endif
		if GetUnitAbilityLevel(damager_0, 'A051') > 0 and GetRandomInt(1, 4) == 1 then
			set g_0 = CreateGroup()
			call GroupEnumUnitsInRange(g_0, xd_0, yd_0, 250., null)
			call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl", xd_0, yd_0))
			loop
				set Picked_0 = FirstOfGroup(g_0)
				exitwhen Picked_0 == null
				if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 and IsUnitEnemy(Picked_0, pr_0) and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
					call UnitDamageTarget(damager_0, Picked_0, 100. + 25 * CountPlayersInForceBJ(udg_IGRAET_1), false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
					call StunUnitTimed(Picked_0, 1.)
				endif
				call GroupRemoveUnit(g_0, Picked_0)
			endloop
			call GroupClear(g_0)
			call DestroyGroup(g_0)
			set g_0 = null
			set Picked_0 = null
		endif
		if GetUnitAbilityLevel(damager_0, 'A06Z') > 0 and GetRandomInt(1, 'd') <= 8 and LoadInteger(udg_hash_1, GetHandleId(damager_0), 64) < (GetUnitAbilityLevel(damager_0, 'A06Z') + 2) then
			set dammi_0 = CreateUnit(pr_0, udg_spirits_of_water_1[GetUnitAbilityLevel(damager_0, 'A06Z')], xd_0, yd_0, GetRandomReal(0, 360))
			call SaveUnitHandle(udg_hash_1, GetHandleId(dammi_0), 63, damager_0)
			call SaveInteger(udg_hash_1, GetHandleId(damager_0), 64, LoadInteger(udg_hash_1, GetHandleId(damager_0), 64) + 1)
		endif
		if GetUnitAbilityLevel(damager_0, 'A07J') > 0 and GetRandomInt(1, 'd') <= $A and LoadInteger(udg_hash_1, hdr_0, 'z') <= $E then
			call SetAttackAbilityLevel(damager_0, 2)
			call SetUnitMaxState(damager_0, UNIT_STATE_MAX_LIFE_1, 20)
			call SaveInteger(udg_hash_1, hdr_0, 'z', LoadInteger(udg_hash_1, hdr_0, 'z') + 1)
			if LoadInteger(udg_hash_1, hdr_0, 'z') == $F then
				set ef_0 = AddSpecialEffectTarget("war3mapImported\\s_WateryAura.mdx", damager_0, "origin")
				call SaveEffectHandle(udg_hash_1, hdr_0, '{', ef_0)
				set ef_0 = null
			endif
		endif
		if GetUnitTypeId(damager_0) == 'u00D' and IsUnitType(damaged_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and IsUnitIllusion(damager_0) == false and GetRandomInt(1, $A) == 1 then
			set dammi_0 = CreateUnit(pr_0, 'h00U', xr_0, yr_0, .0)
			call UnitApplyTimedLife(dammi_0, 'BTLF', 2.)
			call UnitAddAbility(dammi_0, 'A08R')
			call IssuePointOrderById(dammi_0, $D00FA, xd_0, yd_0)
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AvengerMissile\\AvengerMissile.mdl", damaged_0, "chest"))
			if GetUnitAbilityLevel(damaged_0, 'A087') <= 0 then
				call UnitAddAbility(damaged_0, 'A087')
				call UnitAddAbility(damaged_0, 'A0AH')
				call UnitAddAbility(damaged_0, 'A0AG')
				call UnitAddAbility(damaged_0, 'A0D8')
				call UnitAddAbility(damaged_0, 'A0AT')
				call UnitAddAbility(damaged_0, 'A0AS')
			endif
			call SetArmorAbilityLevel(damaged_0, -2)
			set t_0 = CreateTimer()
			set h_0 = GetHandleId(t_0)
			call SaveUnitHandle(udg_hash_1, h_0, 1, damaged_0)
			call TimerStart(t_0, 10., false, function Trig_Dark_Crypt_Fiend_Attack_Unbuff_Dispel_Actions)
			set t_0 = null
			set dammi_0 = null
		endif
		if GetUnitAbilityLevel(damager_0, 'A0EO') > 0 then
			set h_0 = GetHandleId(damager_0)
			set lvl_0 = LoadInteger(udg_hash_1, h_0, 52)
			set i_0 = LoadInteger(udg_hash_1, h_0, 53)
			if lvl_0 + i_0 <= 30 * GetUnitAbilityLevel(damager_0, 'A0EN') - 5 then
				set lvl_0 = lvl_0 + i_0
				call SetHeroAgi(damager_0, GetHeroAgi(damager_0, false) + i_0, true)
				call ProgressBarAddPercentComplete(LoadUnitHandle(udg_hash_1, GetHandleId(damager_0), 'u'), (i_0 * 100. / (30 * GetUnitAbilityLevel(damager_0, 'A0EN') - 5)))
				call SaveInteger(udg_hash_1, h_0, 52, lvl_0)
			else
				call SetHeroAgi(damager_0, GetHeroAgi(damager_0, false) - lvl_0 + (30 * GetUnitAbilityLevel(damager_0, 'A0EN')) - 5, true)
				set lvl_0 = 30 * GetUnitAbilityLevel(damager_0, 'A0EN') - 5
				call SaveInteger(udg_hash_1, h_0, 52, lvl_0)
			endif
		endif
		if GetUnitTypeId(damaged_0) == 'n00U' and IsUnitType(damager_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetRandomInt(1, 4) == 1 then
			set dammi_0 = CreateUnit(pd_0, 'h00U', xd_0, yd_0, .0)
			call UnitApplyTimedLife(dammi_0, 'BTLF', 2.)
			call UnitAddAbility(dammi_0, 'A0E0')
			call IssueTargetOrderById(dammi_0, $D007F, damager_0)
		endif
		if GetUnitAbilityLevel(damager_0, 'A08V') > 0 and IsUnitType(damaged_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetRandomInt(1, 'd') <= 6 then
			set dammi_0 = CreateUnit(pr_0, 'h00U', xr_0, yr_0, .0)
			call UnitApplyTimedLife(dammi_0, 'BTLF', 2.)
			call UnitAddAbility(dammi_0, 'A08Z')
			call IssueTargetOrderById(dammi_0, $D00CB, damaged_0)
			set dammi_0 = null
		endif
		if GetUnitAbilityLevel(damager_0, 'A0E4') > 0 and IsUnitType(damaged_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetRandomInt(1, 'd') <= $F then
			set dammi_0 = CreateUnit(pr_0, 'h00U', xr_0, yr_0, .0)
			call UnitApplyTimedLife(dammi_0, 'BTLF', 2.)
			call UnitAddAbility(dammi_0, 'A092')
			call IssueTargetOrderById(dammi_0, $D006B, damaged_0)
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathCoil\\DeathCoilSpecialArt.mdl", damaged_0, "chest"))
		endif
		if GetUnitAbilityLevel(damaged_0, 'A0E5') > 0 and GetRandomInt(1, 5) == 1 and 1 == 2 then
			set t_0 = CreateTimer()
			set h_0 = GetHandleId(t_0)
			call SaveUnitHandle(udg_hash_1, h_0, 1, damaged_0)
			call SaveInteger(udg_hash_1, h_0, 2, 0)
			if IsTerrainPathable(xd_0 + 50. * Cos((180. + bj_RADTODEG_1 * Atan2(yr_0 - yd_0, xr_0 - xd_0)) * bj_DEGTORAD_1), yd_0 + 50. * Sin((180. + bj_RADTODEG_1 * Atan2(yr_0 - yd_0, xr_0 - xd_0)) * bj_DEGTORAD_1), PATHING_TYPE_WALKABILITY_1) == false then
				call SetUnitX(damaged_0, xd_0 + 50. * Cos((180. + bj_RADTODEG_1 * Atan2(yr_0 - yd_0, xr_0 - xd_0)) * bj_DEGTORAD_1))
				call SetUnitY(damaged_0, yd_0 + 50. * Sin((180. + bj_RADTODEG_1 * Atan2(yr_0 - yd_0, xr_0 - xd_0)) * bj_DEGTORAD_1))
			endif
			call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl", xd_0 + 50. * Cos((180. + bj_RADTODEG_1 * Atan2(yr_0 - yd_0, xr_0 - xd_0)) * bj_DEGTORAD_1), yd_0 + 50. * Sin((180. + bj_RADTODEG_1 * Atan2(yr_0 - yd_0, xr_0 - xd_0)) * bj_DEGTORAD_1)))
			call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\CarrionSwarm\\CarrionSwarmDamage.mdl", xd_0 + 50. * Cos((180. + bj_RADTODEG_1 * Atan2(yr_0 - yd_0, xr_0 - xd_0)) * bj_DEGTORAD_1), yd_0 + 50. * Sin((180. + bj_RADTODEG_1 * Atan2(yr_0 - yd_0, xr_0 - xd_0)) * bj_DEGTORAD_1)))
			call SetUnitFacing(damaged_0, bj_RADTODEG_1 * Atan2(yr_0 - yd_0, xr_0 - xd_0))
			call PauseUnit(damaged_0, true)
			call SetUnitTimeScale(damaged_0, 10.)
			call SetUnitAnimationByIndex(damaged_0, 2)
			set txt_0 = CreateTextTag()
			call SetTextTagText(txt_0, "|cFFFF0000miss!|r", .0275)
			call SetTextTagPos(txt_0, xd_0, yd_0, .0)
			call SetTextTagColor(txt_0, 0, 0, 0, $C8)
			call SetTextTagVelocity(txt_0, .0221875 * Cos(45. + GetRandomReal(.0, 90.) * bj_DEGTORAD_1), .0221875 * Sin(45. + GetRandomReal(.0, 90.) * bj_DEGTORAD_1))
			call SetTextTagLifespan(txt_0, 3.)
			call SetTextTagFadepoint(txt_0, .0)
			call SetTextTagPermanent(txt_0, false)
			call TimerStart(t_0, .04, false, function Trig_Trolls_Evasion_Salto_Actions)
			set t_0 = null
			set t_0 = CreateTimer()
			set h_0 = GetHandleId(t_0)
			call SaveUnitHandle(udg_hash_1, h_0, 1, damaged_0)
			call SaveReal(udg_hash_1, h_0, 2, damage_0)
			if GetUnitState(damaged_0, UNIT_STATE_LIFE_1) < damage_0 then
				call SetUnitInvulnerable(damaged_0, true)
			else
				call TimerStart(t_0, .0, false, function Trig_Hil_Unit_Actions)
			endif
			set t_0 = null
		endif
		if GetUnitAbilityLevel(damager_0, 'A09E') > 0 and GetRandomInt(1, 2) == 1 then
			set h_0 = GetHandleId(damager_0)
			set i_0 = 0
			set i_0 = LoadInteger(udg_hash_1, h_0, 54)
			if i_0 <= 0 then
				set i_0 = 1
				set ef_0 = AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Bloodlust\\BloodlustTarget.mdl", damager_0, "hand, left")
				call SaveEffectHandle(udg_hash_1, h_0, 55, ef_0)
				set ef_0 = null
				set ef_0 = AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Bloodlust\\BloodlustTarget.mdl", damager_0, "hand, right")
				call SaveEffectHandle(udg_hash_1, h_0, 56, ef_0)
				set ef_0 = null
			endif
			if i_0 <= 8 and i_0 > 0 then
				set i_0 = i_0 + 1
				call SaveInteger(udg_hash_1, h_0, 54, i_0)
				call SetAttackAbilityLevel(damager_0, 6)
			endif
			if i_0 == 8 then
				set i_0 = i_0 + $A
				call SaveInteger(udg_hash_1, h_0, 54, i_0)
				set ef_0 = AddSpecialEffectTarget("Abilities\\Spells\\Orc\\TrollBerserk\\HeadhunterWEAPONSLeft.mdl", damager_0, "overhead")
				call SaveEffectHandle(udg_hash_1, h_0, 57, ef_0)
				call IssueImmediateOrderById(damager_0, $D0084)
				set ef_0 = null
			endif
		endif
		if GetUnitAbilityLevel(damaged_0, 'A0ET') > 0 and LoadBoolean(udg_hash_1, GetHandleId(damaged_0), 1) then
			set lvl_0 = GetUnitAbilityLevel(damaged_0, 'A0EU')
			set r1_0 = .03 * GetUnitAbilityLevel(damaged_0, 'A0ET') + .05
			set r2_0 = GetUnitFacing(damaged_0)
			set angle_0 = (Atan2(GetUnitY(damaged_0) - GetUnitY(damager_0), GetUnitX(damaged_0) - GetUnitX(damager_0)) * bj_RADTODEG_1) + 360.
			if (angle_0 <= (r2_0 + 240.) and angle_0 >= (r2_0 + 120.)) then
				set r1_0 = r1_0 * 2
				if lvl_0 > 0 and GetRandomReal(0, 'd') <= ($B + lvl_0 * 4) then
					set r1_0 = 1.
					set r3_0 = damage_0 + ((.05 + (.05 * lvl_0)) * GetHeroStr(damaged_0, true))
					call CreateTexttag("" + SubString(R2S(r3_0), 0, StringLength(R2S(r3_0)) - 2), .023, 'x', xd_0, yd_0, .0, .0, .035, 3.5)
					call GroupAddUnit(gdamagefromdamaged_0, damager_0)
					call SaveReal(udg_hash_1, hdr_0, $A0, LoadReal(udg_hash_1, hdr_0, $A0) + r3_0)
					set dammi_0 = CreateUnit(pd_0, 'h00U', xd_0, yd_0, .0)
					call UnitApplyTimedLife(dammi_0, 'BTLF', 2.)
					call UnitAddAbility(dammi_0, 'A0EV')
					call IssueTargetOrderById(dammi_0, $D007F, damager_0)
					call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Defend\\DefendCaster.mdl", damaged_0, "origin"))
				endif
			endif
			call SetUnitState(damaged_0, UNIT_STATE_LIFE_1, GetUnitState(damaged_0, UNIT_STATE_LIFE_1) + damage_0 * r1_0)
		endif
		if GetUnitAbilityLevel(damager_0, 'A0F3') > 0 then
			set u_0 = udg_herounit_1[GetPlayerId(pr_0) + 1]
			if LoadInteger(udg_hash_1, GetHandleId(u_0), 60) < GetUnitAbilityLevel(damager_0, 'A0F3') + 1 and GetUnitAbilityLevel(damager_0, 'Aloc') <= 0 and ((GetRandomInt(1, 'd') < 3 + (2 * GetUnitAbilityLevel(damager_0, 'A0F3')) and IsUnitIllusion(damager_0) == false) or ((GetRandomInt(1, 'd') < 2 + GetUnitAbilityLevel(damager_0, 'A0F3') and IsUnitIllusion(damager_0)))) then
				set dammi_0 = CreateUnit(pr_0, 'h00U', xr_0, yr_0, .0)
				call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
				call UnitAddAbility(dammi_0, 'A0AY')
				call SetUnitAbilityLevel(dammi_0, 'A0AY', 1 + GetUnitAbilityLevel(u_0, 'A0F2'))
				call IssueTargetOrderById(dammi_0, $D0132, damager_0)
				call SaveBoolean(udg_hash_1, GetHandleId(dammi_0), 3, false)
			endif
		endif
		if GetUnitAbilityLevel(damager_0, 'B01P') >= 1 then
			call UnitRemoveAbility(damager_0, 'B01P')
			call UnitRemoveAbility(damager_0, 'A0GY')
		endif
		if GetUnitAbilityLevel(damaged_0, 'B01P') >= 1 and GetUnitAbilityLevel(damaged_0, 'A0GY') < 1 then
			call UnitAddAbility(damaged_0, 'A0GY')
		endif
		if GetUnitAbilityLevel(damaged_0, 'A09Y') == 1 then
			call PauseUnit(damaged_0, false)
			call UnitRemoveAbility(damaged_0, 'A09Y')
			set dammi_0 = CreateUnit(GetOwningPlayer(damaged_0), 'h013', xr_0, yr_0, 0)
			call UnitAddAbility(dammi_0, 'A0HF')
			call SetUnitAbilityLevel(dammi_0, 'A0HF', GetUnitAbilityLevel(damaged_0, 'A0GZ'))
			call IssueTargetOrderById(dammi_0, $D02B6, damager_0)
			call UnitApplyTimedLife(dammi_0, 'BTLF', .5)
		endif
		if GetUnitAbilityLevel(damager_0, 'B03I') > 0 and GetRandomInt(1, 'd') <= 20 then
			set dammi_0 = CreateUnit(GetOwningPlayer(damager_0), 'h013', xr_0, yr_0, 0)
			call UnitAddAbility(dammi_0, 'A0HK')
			call IssueTargetOrderById(dammi_0, $D0062, damaged_0)
			call UnitApplyTimedLife(dammi_0, 'BTLF', 1.5)
			call UnitRemoveAbility(damager_0, 'B03I')
		endif
		if GetUnitAbilityLevel(damager_0, 'A0FF') > 0 and GetRandomInt(1, 'd') <= (8 + 2 * GetUnitAbilityLevel(damager_0, 'A0FF')) and IsUnitIllusion(damager_0) == false and LoadBoolean(udg_hash_1, hdr_0, 61) == false and GetUnitState(damaged_0, UNIT_STATE_LIFE_1) > .405 then
			set t_0 = CreateTimer()
			set h_0 = GetHandleId(t_0)
			call SaveUnitHandle(udg_hash_1, h_0, 1, damager_0)
			call SaveUnitHandle(udg_hash_1, h_0, 2, damaged_0)
			call SaveReal(udg_hash_1, h_0, 3, damage_0)
			call SaveInteger(udg_hash_1, h_0, 4, 0)
			call SaveReal(udg_hash_1, h_0, 5, bj_RADTODEG_1 * Atan2(yr_0 - yd_0, xr_0 - xd_0))
			call SaveBoolean(udg_hash_1, hdr_0, 61, true)
			call SaveInteger(udg_hash_1, h_0, $A, GetUnitAbilityLevel(damager_0, 'A0FF'))
			call UnitPeriodicPostionMove(damager_0, .02, 1.2)
			call SetUnitInvulnerable(damager_0, true)
			call SetUnitPathing(damager_0, false)
			call SetUnitAnimationByIndex(damager_0, 2)
			call SetUnitTimeScale(damager_0, 4.)
			call SetUnitTurnSpeed(damager_0, 3.)
			if GetRandomInt(1, 2) == 1 then
				call SetUnitAnimationByIndex(damager_0, 8)
			else
				call SetUnitAnimationByIndex(damager_0, 2)
			endif
			set ef_0 = AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl", damager_0, "weapon")
			call SaveEffectHandle(udg_hash_1, h_0, 6, ef_0)
			set ef_0 = null
			set ef_0 = AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratMissile\\ZigguratMissile.mdl", damager_0, "weapon")
			call SaveEffectHandle(udg_hash_1, h_0, 7, ef_0)
			set ef_0 = null
			call TimerStart(t_0, .2, true, function Trig_Triple_Strike_Move_And_Attack_Actions)
			set t_0 = null
		endif
		if GetUnitAbilityLevel(damager_0, 'A0GH') > 0 and GetRandomInt(1, 'd') <= 40 and IsUnitIllusion(damager_0) == false then
			set angle_0 = bj_RADTODEG_1 * Atan2(yd_0 - yr_0, xd_0 - xr_0)
			set r1_0 = 200.
			set r2_0 = 100.
			set r3_0 = xr_0 + 50. * Cos(angle_0 * bj_DEGTORAD_1)
			set r4_0 = yr_0 + 50. * Sin(angle_0 * bj_DEGTORAD_1)
			set g_0 = CreateGroup()
			set dammi_0 = CreateUnit(pr_0, 'h01P', r3_0, r4_0, angle_0)
			call SetUnitVertexColor(dammi_0, $DC, $DC, $DC, 'd')
			call SetUnitAnimation(dammi_0, "stand")
			call SetUnitTimeScale(dammi_0, 1.5)
			call SetUnitAnimationByIndex(dammi_0, 1)
			set t_0 = CreateTimer()
			set h_0 = GetHandleId(t_0)
			call SaveUnitHandle(udg_hash_1, h_0, 1, damager_0)
			call SaveReal(udg_hash_1, h_0, 2, r1_0)
			call SaveReal(udg_hash_1, h_0, 3, r2_0)
			call SaveInteger(udg_hash_1, h_0, 4, 66)
			call SaveUnitHandle(udg_hash_1, h_0, 5, dammi_0)
			call SaveGroupHandle(udg_hash_1, h_0, 6, g_0)
			set ef_0 = AddSpecialEffectTarget("Abilities\\Spells\\Human\\Feedback\\ArcaneTowerAttack.mdl", dammi_0, "chest")
			call SaveEffectHandle(udg_hash_1, h_0, 7, ef_0)
			set ef_0 = null
			call MoveUnit(dammi_0, 2., 400., .0, angle_0, .0, true)
			call TimerStart(t_0, .03, true, function Trig_Spirit_of_Absorption_Actions)
			set t_0 = null
			set dammi_0 = null
		endif
		if GetUnitAbilityLevel(damager_0, 'A09O') > 0 and IsUnitType(damaged_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitState(damaged_0, UNIT_STATE_MAX_MANA_1) > .0 then
			call GroupAddUnit(gdamagefromdamager_0, damaged_0)
			call SaveReal(udg_hash_1, hdd_0, $9E, LoadReal(udg_hash_1, hdd_0, $9E) + 15.)
			call SetUnitState(damaged_0, UNIT_STATE_MANA_1, GetUnitState(damaged_0, UNIT_STATE_MANA_1) - 15.)
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Feedback\\ArcaneTowerAttack.mdl", damaged_0, "origin"))
		endif
		set r1_0 = LoadReal(udg_hash_1, hdr_0, 68)
		if GetUnitAbilityLevel(damager_0, 'A0H2') > 0 and r1_0 > 0 then
			set r2_0 = r1_0 - damage_0
			set r3_0 = GetUnitState(damaged_0, UNIT_STATE_LIFE_1)
			call SaveReal(udg_hash_1, hdr_0, 68, r2_0)
			if r2_0 < .0 then
				set r2_0 = damage_0
				call UnitRemoveAbility(damager_0, 'A0H2')
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DevourMagic\\DevourMagicBirthMissile.mdl", damager_0, "hand,right"))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DevourMagic\\DevourMagicBirthMissile.mdl", damager_0, "hand,left"))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DevourMagic\\DevourMagicBirthMissile.mdl", damager_0, "chest"))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DevourMagic\\DevourMagicBirthMissile.mdl", damager_0, "weapon"))
			endif
			set t_0 = CreateTimer()
			set h_0 = GetHandleId(t_0)
			call SaveUnitHandle(udg_hash_1, h_0, 1, damaged_0)
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayDamage.mdl", damaged_0, "chest"))
			if damage_0 >= r3_0 then
				call SetUnitInvulnerable(damaged_0, true)
				call TimerStart(t_0, .0, false, function Trig_Make_Unit_UnInvulnerable_Actions)
			else
				call SaveReal(udg_hash_1, h_0, 2, damage_0)
				call TimerStart(t_0, .0, false, function Trig_Hil_Unit_Actions)
			endif
			set t_0 = null
		endif
		if GetUnitAbilityLevel(damaged_0, 'A0HN') > 0 and GetRandomInt(1, 'd') <= 40 then
			set r1_0 = damage_0 / 2
			set r2_0 = GetUnitState(damaged_0, UNIT_STATE_LIFE_1)
			set r3_0 = SquareRoot((xr_0 - xd_0) * (xr_0 - xd_0) + (yr_0 - yd_0) * (yr_0 - yd_0))
			if damage_0 >= r2_0 and r1_0 < r2_0 then
				set t_0 = CreateTimer()
				set h_0 = GetHandleId(t_0)
				call SaveUnitHandle(udg_hash_1, h_0, 1, damaged_0)
				call SetUnitInvulnerable(damaged_0, true)
				call TimerStart(t_0, .0, false, function Trig_Make_Unit_UnInvulnerable_Actions)
				call GroupAddUnit(gdamagefromdamager_0, damaged_0)
				call SaveReal(udg_hash_1, hdd_0, $9E, LoadReal(udg_hash_1, hdd_0, $9E) + r1_0)
			endif
			if damage_0 < r2_0 then
				set t_0 = CreateTimer()
				set h_0 = GetHandleId(t_0)
				call SaveUnitHandle(udg_hash_1, h_0, 1, damaged_0)
				call SaveReal(udg_hash_1, h_0, 2, r1_0)
				call TimerStart(t_0, .0, false, function Trig_Hil_Unit_Actions)
			endif
			set t_0 = null
			set t_0 = CreateTimer()
			set h_0 = GetHandleId(t_0)
			if r3_0 <= 225. then
				call GroupAddUnit(gdamagefromdamaged_0, damager_0)
				call SaveReal(udg_hash_1, hdr_0, $A0, LoadReal(udg_hash_1, hdr_0, $A0) + 50.)
				call SaveUnitHandle(udg_hash_1, h_0, 1, damager_0)
				call SetAttackAbilityLevel(damager_0, -$E)
				call TimerStart(t_0, 10., false, function Trig_Pancir_Iachera_Actions)
				call StunUnitTimed(damager_0, 1.45)
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SearingArrow\\SearingArrowMissile.mdl", damager_0, "weapon"))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SearingArrow\\SearingArrowMissile.mdl", damager_0, "hand,right"))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SearingArrow\\SearingArrowMissile.mdl", damager_0, "hand,left"))
			else
				set angle_0 = bj_RADTODEG_1 * Atan2(yr_0 - yd_0, xr_0 - xd_0)
				set dammi_0 = CreateUnit(pd_0, 'h00U', GetUnitX(damaged_0), GetUnitY(damaged_0), angle_0)
				call SetUnitFlyHeight(dammi_0, 50., .0)
				call SetUnitFacing(dammi_0, angle_0)
				set ef_0 = AddSpecialEffectTarget("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl", dammi_0, "chest")
				call SaveUnitHandle(udg_hash_1, h_0, 1, damaged_0)
				call SaveUnitHandle(udg_hash_1, h_0, 2, dammi_0)
				call SaveInteger(udg_hash_1, h_0, 3, 50)
				call SaveReal(udg_hash_1, h_0, 4, angle_0)
				call SaveReal(udg_hash_1, h_0, 5, 250.)
				call SaveReal(udg_hash_1, h_0, 6, 1.45)
				call SaveEffectHandle(udg_hash_1, h_0, 7, ef_0)
				call TimerStart(t_0, .03, true, function Trig_Pancir_Iachera_Periodic_Actions)
				set ef_0 = null
				set dammi_0 = null
			endif
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl", damager_0, "chest"))
			set t_0 = null
		endif
		if GetUnitAbilityLevel(damager_0, 'A00K') > 0 and IsUnitType(damaged_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false then
			set dammi_0 = CreateUnit(pr_0, 'h00U', xr_0, yr_0, .0)
			call UnitApplyTimedLife(dammi_0, 'BTLF', 2.)
			call UnitAddAbility(dammi_0, 'A01T')
			call IssueTargetOrderById(dammi_0, $D0102, damaged_0)
			set dammi_0 = null
		endif
		if GetUnitAbilityLevel(damager_0, 'A0AW') > 0 and IsUnitType(damaged_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and ($B + (3 * GetUnitAbilityLevel(damager_0, 'A0AW'))) >= GetRandomInt(1, 'd') then
			call GroupAddUnit(gdamagefromdamager_0, damaged_0)
			call SaveReal(udg_hash_1, hdd_0, $9E, LoadReal(udg_hash_1, hdd_0, $9E) + (15. + ($A * GetUnitAbilityLevel(damager_0, 'A0AW'))))
			call StunUnitTimed(damaged_0, .4 + (.2 * GetUnitAbilityLevel(damager_0, 'A0AW')))
		endif
		if GetUnitAbilityLevel(damager_0, 'A0HV') > 0 and GetRandomInt(1, 'd') <= 18 then
			set r1_0 = (damage_0 * .7) + 20.
			call GroupAddUnit(gdamagefromdamager_0, damaged_0)
			call SaveReal(udg_hash_1, hdd_0, $9E, LoadReal(udg_hash_1, hdd_0, $9E) + r1_0)
			call CreateTexttag(udg_ColorString_1[1] + I2S(R2I(r1_0 + damage_0)) + "!|r", .025, $FF, xd_0 - 18., yd_0 + 15., .0, .0, .035, 3.5)
		endif
		if GetUnitAbilityLevel(damager_0, 'A0K0') > 0 and GetRandomInt(1, 'd') <= $F then
			set r1_0 = (damage_0 * .7) + 10.
			call UnitDamageTarget(damager_0, damaged_0, r1_0, false, false, ATTACK_TYPE_MELEE_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
			call CreateTexttag(udg_ColorString_1[1] + I2S(R2I(r1_0 + damage_0)) + "!|r", .025, $FF, xd_0 - 18., yd_0 + 15., .0, .0, .035, 3.5)
		endif
		set r1_0 = GetUnitState(damaged_0, UNIT_STATE_LIFE_1)
		set r2_0 = GetUnitState(damaged_0, UNIT_STATE_MAX_LIFE_1)
		if (GetUnitAbilityLevel(damager_0, 'A0I1') > 0 and (r2_0 * .3) > r1_0) or (GetUnitAbilityLevel(damager_0, 'A0I3') > 0 and (r2_0 * .4) > r1_0) or (GetUnitAbilityLevel(damager_0, 'A0I2') > 0 and (r2_0 * .5) > r1_0) then
			if (GetUnitAbilityLevel(damager_0, 'A0I1')) > 0 then
				set r3_0 = 18.
			endif
			if (GetUnitAbilityLevel(damager_0, 'A0I3')) > 0 then
				set r3_0 = 27.
			endif
			if (GetUnitAbilityLevel(damager_0, 'A0I2')) > 0 then
				set r3_0 = 36.
			endif
			call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl", damaged_0, "chest"))
			call GroupAddUnit(gdamagefromdamager_0, damaged_0)
			call SaveReal(udg_hash_1, hdd_0, $9E, LoadReal(udg_hash_1, hdd_0, $9E) + r3_0)
		endif
		if (GetUnitAbilityLevel(damager_0, 'A0I5') > 0 and GetRandomInt(1, 'd') <= 20) or (GetUnitAbilityLevel(damager_0, 'A0I4') > 0 and GetRandomInt(1, 'd') <= 25) or (GetUnitAbilityLevel(damager_0, 'A0I6') > 0 and GetRandomInt(1, 'd') <= 30) then
			if (GetUnitAbilityLevel(damager_0, 'A0I6')) > 0 then
				set lvl_0 = 3
			endif
			if (GetUnitAbilityLevel(damager_0, 'A0I4')) > 0 then
				set lvl_0 = 2
			endif
			if (GetUnitAbilityLevel(damager_0, 'A0I5')) > 0 then
				set lvl_0 = 1
			endif
			set dammi_0 = CreateUnit(pr_0, 'h00U', xd_0, yd_0, .0)
			call UnitApplyTimedLife(dammi_0, 'BTLF', 2.)
			call UnitAddAbility(dammi_0, 'A0HX')
			call SetUnitAbilityLevel(dammi_0, 'A0HX', lvl_0)
			call IssueTargetOrderById(dammi_0, $D006B, damaged_0)
			set dammi_0 = null
			call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl", damaged_0, "origin"))
			call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPriest.mdl", damaged_0, "origin"))
		endif
		if (GetUnitAbilityLevel(damager_0, 'A0IA') > 0 and GetRandomInt(1, 'd') <= 22) then
			call GroupAddUnit(gdamagefromdamager_0, damaged_0)
			call SaveReal(udg_hash_1, hdd_0, $9E, LoadReal(udg_hash_1, hdd_0, $9E) + (25. + (.3 * GetHeroStr(damager_0, true))))
			call StunUnitTimed(damaged_0, 1.25)
		endif
		if GetUnitAbilityLevel(damager_0, 'A0J2') >= 1 then
			call GroupAddUnit(gdamagefromdamager_0, damaged_0)
			call SaveReal(udg_hash_1, hdd_0, $9E, LoadReal(udg_hash_1, hdd_0, $9E) + (.5 * GetHeroStr(damager_0, true)))
			call DestroyEffect(AddSpecialEffectTarget("Effects\\AxeEffect.mdl", damaged_0, "chest"))
			call DestroyEffect(AddSpecialEffectTarget("Effects\\AxeEffect.mdl", damaged_0, "origin"))
			call DestroyEffect(AddSpecialEffect("Effects\\AxeEffect.mdl", xd_0, yd_0))
		endif
		if GetUnitAbilityLevel(damager_0, 'A0JH') >= 1 then
			set dammi_0 = CreateUnit(pr_0, 'h00U', xr_0, yr_0, .0)
			call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
			call UnitAddAbility(dammi_0, 'A0J3')
			call IssueTargetOrderById(dammi_0, $D006B, damaged_0)
			set dammi_0 = null
		endif
		if GetUnitAbilityLevel(damager_0, 'A0JI') >= 1 then
			set t_0 = LoadTimerHandle(udg_hash_1, hdr_0, 92)
			if t_0 != null then
				set i_0 = LoadInteger(udg_hash_1, GetHandleId(t_0), 1)
				if i_0 <= 58 then
					set i_0 = i_0 + 2
					call SetAttackSpeedAbilityLevel(damager_0, 2)
					call SaveInteger(udg_hash_1, GetHandleId(t_0), 1, i_0)
				else
					set ef_0 = LoadEffectHandle(udg_hash_1, GetHandleId(t_0), 3)
					if ef_0 == null then
						set ef_0 = AddSpecialEffectTarget("Abilities\\Spells\\Other\\Tornado\\Tornado_Target.mdl", damager_0, "weapon")
						call SaveEffectHandle(udg_hash_1, GetHandleId(t_0), 3, ef_0)
						set ef_0 = null
						set ef_0 = AddSpecialEffectTarget("Abilities\\Spells\\Other\\Tornado\\Tornado_Target.mdl", damager_0, "chest")
						call SaveEffectHandle(udg_hash_1, GetHandleId(t_0), 4, ef_0)
					endif
					set ef_0 = null
				endif
			else
				set t_0 = CreateTimer()
				call SaveTimerHandle(udg_hash_1, hdr_0, 92, t_0)
				call SetAttackSpeedAbilityLevel(damager_0, 2)
				call SaveInteger(udg_hash_1, GetHandleId(t_0), 1, 2)
				call SaveUnitHandle(udg_hash_1, GetHandleId(t_0), 2, damager_0)
			endif
			call TimerStart(t_0, 15., false, function Trig_Wind_Bow_Remove_Attack_Speed_Actions)
			set t_0 = null
		endif
		if GetUnitAbilityLevel(damager_0, 'A0LE') >= 1 then
			set r1_0 = .15 * damage_0
			set str_0 = LoadStr(udg_hash_1, GetUnitTypeId(damager_0), 70)
			if str_0 == "str" then
				set r2_0 = GetHeroStr(damager_0, true) / 2
			endif
			if str_0 == "agi" then
				set r2_0 = GetHeroAgi(damager_0, true) / 2
			endif
			if str_0 == "int" then
				set r2_0 = GetHeroInt(damager_0, true) / 2
			endif
			set r3_0 = 150. + r2_0
			set g_0 = CreateGroup()
			call GroupEnumUnitsInRange(g_0, xd_0, yd_0, r3_0, null)
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Cleave\\CleaveDamageTarget.mdl", damaged_0, "chest"))
			loop
				set Picked_0 = FirstOfGroup(g_0)
				exitwhen Picked_0 == null
				if IsUnitEnemy(Picked_0, pr_0) and Picked_0 != damaged_0 and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
					call GroupAddUnit(gdamagefromdamager_0, Picked_0)
					call SaveReal(udg_hash_1, GetHandleId(Picked_0), $9F, LoadReal(udg_hash_1, GetHandleId(Picked_0), $9F) + r1_0)
					call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Cleave\\CleaveDamageTarget.mdl", Picked_0, "chest"))
				endif
				call GroupRemoveUnit(g_0, Picked_0)
			endloop
			call GroupClear(g_0)
			call DestroyGroup(g_0)
			set g_0 = null
		endif
		if GetUnitAbilityLevel(damager_0, 'A0LI') >= 1 then
			set r1_0 = .25 * damage_0
			set str_0 = LoadStr(udg_hash_1, GetUnitTypeId(damager_0), 70)
			if str_0 == "str" then
				set r2_0 = GetHeroStr(damager_0, true) / 1.75
			endif
			if str_0 == "agi" then
				set r2_0 = GetHeroAgi(damager_0, true) / 1.75
			endif
			if str_0 == "int" then
				set r2_0 = GetHeroInt(damager_0, true) / 1.75
			endif
			set r3_0 = 150. + r2_0
			set g_0 = CreateGroup()
			call GroupEnumUnitsInRange(g_0, xd_0, yd_0, r3_0, null)
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Cleave\\CleaveDamageTarget.mdl", damaged_0, "chest"))
			loop
				set Picked_0 = FirstOfGroup(g_0)
				exitwhen Picked_0 == null
				if IsUnitEnemy(Picked_0, pr_0) and Picked_0 != damaged_0 and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
					call GroupAddUnit(gdamagefromdamager_0, Picked_0)
					call SaveReal(udg_hash_1, GetHandleId(Picked_0), $9F, LoadReal(udg_hash_1, GetHandleId(Picked_0), $9F) + r1_0)
					call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Cleave\\CleaveDamageTarget.mdl", Picked_0, "chest"))
				endif
				call GroupRemoveUnit(g_0, Picked_0)
			endloop
			call GroupClear(g_0)
			call DestroyGroup(g_0)
			set g_0 = null
		endif
		if GetUnitAbilityLevel(damager_0, 'A0LJ') >= 1 and GetRandomInt(1, 'd') <= 30 then
			set r1_0 = .5 * GetHeroStr(damager_0, true)
			set g_0 = CreateGroup()
			call GroupEnumUnitsInRange(g_0, xd_0, yd_0, 150., null)
			loop
				set Picked_0 = FirstOfGroup(g_0)
				if IsUnitEnemy(Picked_0, pr_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
					call GroupAddUnit(gdamagefromdamager_0, Picked_0)
					call SaveReal(udg_hash_1, GetHandleId(Picked_0), $9E, LoadReal(udg_hash_1, GetHandleId(Picked_0), $9E) + r1_0)
					call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodGhoul.mdl", Picked_0, "origin"))
					call StunUnitTimed(Picked_0, .75)
				endif
				call GroupRemoveUnit(g_0, Picked_0)
			endloop
			call GroupClear(g_0)
			call DestroyGroup(g_0)
			set g_0 = null
		endif
		if (GetUnitAbilityLevel(damager_0, 'A0LP') > 0 and GetRandomInt(1, 'd') <= 25) then
			if GetUnitState(damaged_0, UNIT_STATE_LIFE_1) < GetUnitState(damaged_0, UNIT_STATE_MAX_LIFE_1) * .5 then
				set r1_0 = (damage_0 * 3.4) + 80.
				call CreateTexttag(udg_ColorString_1[1] + I2S(R2I(r1_0 + damage_0)) + "!|r", .03, $FF, xd_0 - 18., yd_0 + 15., .0, .0, .035, 3.5)
			else
				set r1_0 = (damage_0 * 1.2) + 40.
				call CreateTexttag(udg_ColorString_1[1] + I2S(R2I(r1_0 + damage_0)) + "!|r", .025, $FF, xd_0 - 18., yd_0 + 15., .0, .0, .035, 3.5)
			endif
			call GroupAddUnit(gdamagefromdamager_0, damaged_0)
			call SaveReal(udg_hash_1, hdd_0, $9F, LoadReal(udg_hash_1, hdd_0, $9F) + r1_0)
			set dammi_0 = CreateUnit(pr_0, 'h00U', xd_0, yd_0, .0)
			call UnitApplyTimedLife(dammi_0, 'BTLF', 2.)
			call UnitAddAbility(dammi_0, 'A0LQ')
			call IssueTargetOrderById(dammi_0, $D006B, damaged_0)
			set dammi_0 = null
			call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodSorceress.mdl", damaged_0, "origin"))
			call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Other\\HumanBloodCinematicEffect\\HumanBloodCinematicEffect.mdl", damaged_0, "origin"))
			call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl", damaged_0, "origin"))
			call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPeasant.mdl", damaged_0, "origin"))
		endif
		if LoadBoolean(udg_hash_1, hdr_0, 99) then
			set r1_0 = (GetUnitState(damager_0, UNIT_STATE_LIFE_1) - GetUnitState(damaged_0, UNIT_STATE_LIFE_1)) / 10.
			if r1_0 < 0 then
				set r1_0 = -r1_0
			endif
			set r1_0 = r1_0 + R2I(GetHeroStr(damager_0, true) * .75)
			if r1_0 > 150. then
				set r1_0 = 150.
			endif
			call GroupAddUnit(gdamagefromdamager_0, damaged_0)
			call SaveReal(udg_hash_1, hdd_0, $9E, LoadReal(udg_hash_1, hdd_0, $9E) + r1_0)
			call DestroyEffectWithWait(AddSpecialEffectTarget("Effects\\BloodBreathDamage.mdx", damaged_0, "origin"), .35)
			call DestroyEffectWithWait(AddSpecialEffectTarget("Effects\\BloodElementalMisile.mdx", damaged_0, "origin"), .35)
		endif
		if GetUnitAbilityLevel(damager_0, 'A0M8') > 0 then
			if LoadBoolean(udg_hash_1, hdr_0, 'q') == false then
				set r1_0 = LoadReal(udg_hash_1, hdr_0, 'p')
				set r2_0 = 360. + (GetUnitAbilityLevel(damager_0, 'A0M8') * 40.)
				set r1_0 = r1_0 + damage_0
				call ProgressBarAddPercentComplete(LoadUnitHandle(udg_hash_1, GetHandleId(damager_0), 'v'), (damage_0 * 100. / r2_0))
				if r1_0 >= r2_0 then
					call SaveBoolean(udg_hash_1, hdr_0, 'q', true)
					call SaveReal(udg_hash_1, hdr_0, 'p', .0)
					set ef_0 = AddSpecialEffectTarget("Abilities\\Spells\\Human\\slow\\slowtarget.mdl", damager_0, "weapon")
					call SaveEffectHandle(udg_hash_1, hdr_0, 'r', ef_0)
					set ef_0 = null
					set ef_0 = AddSpecialEffectTarget("Effects\\LifeHigh.mdx", damager_0, "weapon")
					call SaveEffectHandle(udg_hash_1, hdr_0, 's', ef_0)
					set ef_0 = null
				else
					call SaveReal(udg_hash_1, hdr_0, 'p', r1_0)
				endif
			else
				call RemoveUnit(LoadUnitHandle(udg_hash_1, GetHandleId(damager_0), 'v'))
				call AddProgressBar(damager_0, 235. + (3. * GetUnitAbilityLevel(damager_0, 'A0M8')), (.9 + .05 * GetUnitAbilityLevel(damager_0, 'A0M8')), 1., true, false, 'v', $F8, $9A, 0)
				set g_0 = CreateGroup()
				call GroupEnumUnitsInRange(g_0, xd_0, yd_0, 250., null)
				set lvl_0 = GetUnitAbilityLevel(damager_0, 'A0M8')
				set r3_0 = damage_0 * (.25 + (.25 * lvl_0))
				set r1_0 = (25 + (lvl_0 * $A)) + (GetHeroStr(damager_0, true) * (.3 + (.2 * lvl_0)))
				set r2_0 = (25 + (lvl_0 * $A)) + (GetHeroInt(damager_0, true) * (.3 + (.2 * lvl_0)))
				call GroupAddUnit(gdamagefromdamager_0, damaged_0)
				call SaveReal(udg_hash_1, hdd_0, $9E, LoadReal(udg_hash_1, hdd_0, $9E) + r3_0)
				set dammi_0 = CreateUnit(pr_0, 'h00U', xd_0, yd_0, .0)
				call UnitApplyTimedLife(dammi_0, 'BTLF', 3.)
				call SetUnitScale(dammi_0, .5, .5, .5)
				call SetUnitPathing(dammi_0, false)
				call SetUnitX(dammi_0, xd_0)
				call SetUnitY(dammi_0, yd_0)
				call DestroyEffect(AddSpecialEffectTarget("Effects\\LightNova.mdl", dammi_0, "origin"))
				set dammi_0 = null
				call DestroyEffect(AddSpecialEffectTarget("Effects\\DivineRage.mdx", damager_0, "weapon"))
				set ef_0 = LoadEffectHandle(udg_hash_1, hdr_0, 'r')
				call DestroyEffect(ef_0)
				set ef_0 = null
				set ef_0 = LoadEffectHandle(udg_hash_1, hdr_0, 's')
				call DestroyEffect(ef_0)
				set ef_0 = null
				call SaveBoolean(udg_hash_1, hdr_0, 'q', false)
				loop
					set Picked_0 = FirstOfGroup(g_0)
					exitwhen Picked_0 == null
					if IsUnitEnemy(Picked_0, pr_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
						call GroupAddUnit(gdamagefromdamager_0, Picked_0)
						call SaveReal(udg_hash_1, GetHandleId(Picked_0), $9E, LoadReal(udg_hash_1, GetHandleId(Picked_0), $9E) + r1_0)
						call DestroyEffect(AddSpecialEffectTarget("Effects\\DivineRage.mdx", Picked_0, "origin"))
						set dammi_0 = CreateUnit(pr_0, 'h00U', xd_0, yd_0, .0)
						call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
						call UnitAddAbility(dammi_0, 'A0M9')
						call IssueTargetOrderById(dammi_0, $D006B, Picked_0)
						set dammi_0 = null
					endif
					if IsUnitAlly(Picked_0, pr_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
						call SetUnitState(Picked_0, UNIT_STATE_LIFE_1, GetUnitState(Picked_0, UNIT_STATE_LIFE_1) + r2_0)
						call DestroyEffect(AddSpecialEffectTarget("Effects\\MegaHeal.mdx", Picked_0, "origin"))
						call DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", Picked_0, "origin"), 2.)
					endif
					call GroupRemoveUnit(g_0, Picked_0)
				endloop
				set Picked_0 = null
			endif
			call GroupClear(g_0)
			call DestroyGroup(g_0)
			set g_0 = null
		endif
		if GetUnitAbilityLevel(damager_0, 'A0JA') >= 1 and GetRandomInt(1, 'd') <= 20 and GetUnitAbilityLevel(damaged_0, 'A0JC') < 1 then
			set dammi_0 = CreateUnit(pr_0, 'h013', xr_0, yr_0, .0)
			call UnitApplyTimedLife(dammi_0, 'BTLF', 1.5)
			call UnitAddAbility(dammi_0, 'A0JD')
			call IssueTargetOrderById(dammi_0, $D006B, damaged_0)
			set dammi_0 = null
		endif
		if GetUnitAbilityLevel(damager_0, 'A0K3') > 0 and GetRandomInt(1, 'd') <= $F and IsUnitIllusion(damager_0) == false then
			set r1_0 = (.3 * GetHeroStr(damager_0, true))
			set g_0 = CreateGroup()
			call GroupEnumUnitsInRange(g_0, xr_0, yr_0, 250., null)
			loop
				set Picked_0 = FirstOfGroup(g_0)
				exitwhen Picked_0 == null
				if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 and IsUnitEnemy(Picked_0, pr_0) and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false then
					call GroupAddUnit(gdamagefromdamager_0, Picked_0)
					call SaveReal(udg_hash_1, GetHandleId(Picked_0), $9E, LoadReal(udg_hash_1, GetHandleId(Picked_0), $9E) + r1_0)
				endif
				call GroupRemoveUnit(g_0, Picked_0)
			endloop
			call GroupClear(g_0)
			call DestroyGroup(g_0)
			set g_0 = null
		endif
		if GetUnitAbilityLevel(damager_0, 'A0K4') > 0 and GetRandomInt(1, 'd') <= 30 and IsUnitIllusion(damager_0) == false then
			set r1_0 = (.6 * GetHeroStr(damager_0, true))
			set g_0 = CreateGroup()
			call GroupEnumUnitsInRange(g_0, xr_0, yr_0, 300., null)
			loop
				set Picked_0 = FirstOfGroup(g_0)
				exitwhen Picked_0 == null
				if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 and IsUnitEnemy(Picked_0, pr_0) and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false then
					call GroupAddUnit(gdamagefromdamager_0, Picked_0)
					call SaveReal(udg_hash_1, GetHandleId(Picked_0), $9E, LoadReal(udg_hash_1, GetHandleId(Picked_0), $9E) + r1_0)
				endif
				call GroupRemoveUnit(g_0, Picked_0)
			endloop
			call GroupClear(g_0)
			call DestroyGroup(g_0)
			set g_0 = null
			set Picked_0 = null
		endif
		if GetUnitAbilityLevel(damager_0, 'A0K4') > 0 and GetRandomInt(1, 'd') <= $F and IsUnitIllusion(damager_0) == false then
			set g_0 = CreateGroup()
			call GroupEnumUnitsInRange(g_0, xr_0, yr_0, 270., null)
			loop
				set Picked_0 = FirstOfGroup(g_0)
				exitwhen Picked_0 == null
				if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 and IsUnitEnemy(Picked_0, pr_0) and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false then
					call StunUnitTimed(Picked_0, 1.)
				endif
				call GroupRemoveUnit(g_0, Picked_0)
			endloop
			call GroupClear(g_0)
			call DestroyGroup(g_0)
			set g_0 = null
			set Picked_0 = null
		endif
		if GetUnitAbilityLevel(damaged_0, 'A0MK') > 0 and IsUnitType(damager_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitState(damaged_0, UNIT_STATE_LIFE_1) > .405 and damage_0 > .0 and GetRandomInt(1, 'd') <= ($C + (3 * GetUnitAbilityLevel(damaged_0, 'A0MK'))) then
			set lvl_0 = GetUnitAbilityLevel(damaged_0, 'A0MK')
			set r1_0 = SquareRoot((xr_0 - xd_0) * (xr_0 - xd_0) + (yr_0 - yd_0) * (yr_0 - yd_0))
			set r2_0 = (5. + 5. * lvl_0) + (r1_0 / (34. - 4. * lvl_0))
			set r3_0 = .1 + .15 * lvl_0
			set t_0 = CreateTimer()
			set h_0 = GetHandleId(t_0)
			call SaveUnitHandle(udg_hash_1, h_0, 1, damaged_0)
			call SaveReal(udg_hash_1, h_0, 2, (r3_0 * damage_0))
			call TimerStart(t_0, .0, false, function Trig_Hil_Unit_Actions)
			set t_0 = null
			set t_0 = CreateTimer()
			set h_0 = GetHandleId(t_0)
			set angle_0 = bj_RADTODEG_1 * Atan2(yr_0 - yd_0, xr_0 - xd_0)
			set dammi_0 = CreateUnit(pd_0, 'h00E', GetUnitX(damaged_0), GetUnitY(damaged_0), angle_0)
			call SetUnitFlyHeight(dammi_0, 50., .0)
			call SetUnitFlyHeight(dammi_0, 200., r1_0)
			call SetUnitFacing(dammi_0, angle_0)
			call SetUnitScale(dammi_0, 1.5, 1.5, 1.5)
			set ef_0 = AddSpecialEffectTarget("Effects\\StoneSmall.mdl", dammi_0, "chest")
			call SaveUnitHandle(udg_hash_1, h_0, 1, damaged_0)
			call SaveUnitHandle(udg_hash_1, h_0, 2, dammi_0)
			call SaveInteger(udg_hash_1, h_0, 3, R2I(r1_0 / 40))
			call SaveUnitHandle(udg_hash_1, h_0, 4, damager_0)
			call SaveReal(udg_hash_1, h_0, 5, r2_0)
			call SaveReal(udg_hash_1, h_0, 6, (r1_0 / 3))
			call SaveEffectHandle(udg_hash_1, h_0, 7, ef_0)
			call TimerStart(t_0, .03, true, function Trig_Stone_Armor_Periodic_Actions)
			set ef_0 = null
			set dammi_0 = null
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", damaged_0, "chest"))
			set t_0 = null
		endif
		if GetUnitAbilityLevel(damager_0, 'A0N7') > 0 and IsUnitIllusion(damager_0) == false and IsUnitType(damaged_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false then
			set r1_0 = (GetUnitState(damager_0, UNIT_STATE_MAX_MANA_1) / 25.)
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SpiritOfVengeanceMissile\\SpiritOfVengeanceMissile.mdl", damaged_0, "chest"))
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareMissile.mdl", damaged_0, "chest"))
			call GroupAddUnit(gdamagefromdamager_0, damaged_0)
			call SaveReal(udg_hash_1, hdd_0, $9E, LoadReal(udg_hash_1, hdd_0, $9E) + r1_0)
		endif
		if GetUnitAbilityLevel(damager_0, 'A0ND') > 0 and IsUnitIllusion(damager_0) == false then
			set g_0 = CreateGroup()
			set g2_0 = CreateGroup()
			call GroupEnumUnitsInRange(g_0, xd_0, yd_0, 150., null)
			call GroupRemoveUnit(g_0, damaged_0)
			loop
				set Picked_0 = FirstOfGroup(g_0)
				exitwhen Picked_0 == null
				if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 and IsUnitEnemy(Picked_0, pr_0) and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false then
					call GroupAddUnit(g2_0, Picked_0)
				endif
				call GroupRemoveUnit(g_0, Picked_0)
			endloop
			set Picked_0 = null
			call GroupClear(g_0)
			call DestroyGroup(g_0)
			set g_0 = null
			call RandomUnitFromGroup(2, g2_0)
			set g_0 = CreateGroup()
			call GroupAddGroup(udg_GroupRandomUnitFromGroup_1, g_0)
			set r1_0 = (GetUnitState(damager_0, UNIT_STATE_MAX_MANA_1) / 20.)
			loop
				set Picked_0 = FirstOfGroup(g_0)
				exitwhen Picked_0 == null
				call GroupAddUnit(gdamagefromdamager_0, Picked_0)
				call SaveReal(udg_hash_1, GetHandleId(Picked_0), $9E, LoadReal(udg_hash_1, GetHandleId(Picked_0), $9E) + r1_0)
				call DestroyEffect(AddSpecialEffectTarget("Effects\\FlameBomb.mdx", Picked_0, "chest"))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl", Picked_0, "chest"))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIfb\\AIfbSpecialArt.mdl", Picked_0, "chest"))
				call GroupRemoveUnit(g_0, Picked_0)
			endloop
			call GroupClear(g_0)
			call DestroyGroup(g_0)
			set g_0 = null
			call GroupClear(g2_0)
			call DestroyGroup(g2_0)
			set g2_0 = null
			set Picked_0 = null
		endif
		if (GetUnitAbilityLevel(damaged_0, 'A0NJ') > 0 or GetUnitAbilityLevel(damaged_0, 'A0NK') > 0 or GetUnitAbilityLevel(damaged_0, 'A0NL') > 0) and (GetUnitAbilityLevel(damaged_0, 'A0IT') <= 0 and GetUnitAbilityLevel(damaged_0, 'A0J8') <= 0) and IsUnitType(damager_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false then
			if GetUnitAbilityLevel(damaged_0, 'A0NJ') > 0 then
				set r1_0 = damage_0 * .1 + 10.
			endif
			if GetUnitAbilityLevel(damaged_0, 'A0NK') > 0 then
				set r1_0 = damage_0 * .15 + 12.
			endif
			if GetUnitAbilityLevel(damaged_0, 'A0NL') > 0 then
				set r1_0 = damage_0 * .2 + 14.
			endif
			call GroupAddUnit(gdamagefromdamaged_0, damager_0)
			call SaveReal(udg_hash_1, hdr_0, $A1, LoadReal(udg_hash_1, hdr_0, $A1) + r1_0)
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\ThornsAura\\ThornsAuraDamage.mdl", damager_0, "overhead"))
		endif
		if GetUnitAbilityLevel(damager_0, 'A08G') > 0 and GetRandomInt(1, 'd') <= 20 then
			set r1_0 = (damage_0 * .5)
			call GroupAddUnit(gdamagefromdamager_0, damaged_0)
			call SaveReal(udg_hash_1, hdd_0, $9F, LoadReal(udg_hash_1, hdd_0, $9F) + r1_0 + 10.)
			call CreateTexttag(udg_ColorString_1[1] + I2S(R2I(r1_0 + damage_0)) + "!|r", .022, $FF, xd_0 - 18., yd_0 + 15., .0, .0, .035, 3.5)
		endif
		if GetUnitAbilityLevel(damager_0, 'A0NI') > 0 and IsUnitIllusion(damager_0) == false and IsUnitType(damaged_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false then
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIfb\\AIfbSpecialArt.mdl", damaged_0, "chest"))
		endif
		if GetUnitAbilityLevel(damager_0, 'A0NS') > 0 then
			set lvl_0 = GetUnitAbilityLevel(damager_0, 'A0NS')
			set r1_0 = damage_0
			set r2_0 = .0
			if lvl_0 == 1 or lvl_0 == 2 then
				set i_0 = 1
			endif
			if lvl_0 == 3 or lvl_0 == 4 then
				set i_0 = 2
			endif
			if lvl_0 == 5 or lvl_0 == 6 then
				set i_0 = 3
			endif
			if GetFloatGameState(GAME_STATE_TIME_OF_DAY_1) < 6. or GetFloatGameState(GAME_STATE_TIME_OF_DAY_1) > 18. then
				set r2_0 = (GetHeroAgi(damager_0, true) + GetHeroInt(damager_0, true)) / 3
				set str_0 = "Effects\\BlueGlaivie.mdl"
				set r4_0 = .6
				set b_0 = true
			else
				set str_0 = "Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl"
				set r4_0 = 1.
				set b_0 = false
			endif
			set t_0 = CreateTimer()
			set h_0 = GetHandleId(t_0)
			call SaveReal(udg_hash_1, h_0, 21, .6)
			if LoadBoolean(udg_hash_1, hdr_0, $7F) then
				set i_0 = i_0 * 2
			endif
			if LoadBoolean(udg_hash_1, hdr_0, $80) then
				call SaveReal(udg_hash_1, h_0, 21, .8)
			endif
			call SaveUnitHandle(udg_hash_1, h_0, 1, damager_0)
			call SaveReal(udg_hash_1, h_0, 2, r1_0)
			call SaveReal(udg_hash_1, h_0, 20, r2_0)
			call SaveInteger(udg_hash_1, h_0, 3, i_0)
			call SaveBoolean(udg_hash_1, h_0, 4, b_0)
			if b_0 then
				call DestroyEffect(AddSpecialEffectTarget("Effects\\SoundTrauma.mdl", damaged_0, "chest"))
				call GroupAddUnit(gdamagefromdamager_0, damaged_0)
				call SaveReal(udg_hash_1, hdd_0, $9E, LoadReal(udg_hash_1, hdd_0, $9E) + r2_0)
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl", damaged_0, "chest"))
				call DestroyEffect(AddSpecialEffectTarget("Effects\\BlueGlaivie.mdl", damaged_0, "chest"))
			endif
			set g_0 = null
			set g2_0 = null
			set g_0 = CreateGroup()
			set g2_0 = CreateGroup()
			call GroupEnumUnitsInRange(g_0, xd_0, yd_0, 350., null)
			loop
				set Picked_0 = FirstOfGroup(g_0)
				exitwhen Picked_0 == null
				if damaged_0 != Picked_0 and IsUnitEnemy(Picked_0, pr_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' and GetUnitTypeId(Picked_0) != 'uplg' then
					call GroupAddUnit(g2_0, Picked_0)
				endif
				call GroupRemoveUnit(g_0, Picked_0)
			endloop
			set Picked_0 = null
			call RandomUnitFromGroup(1, g2_0)
			set u_0 = FirstOfGroup(udg_GroupRandomUnitFromGroup_1)
			call GroupClear(g_0)
			call DestroyGroup(g_0)
			set g_0 = null
			if u_0 != null then
				set r1_0 = GetUnitX(u_0)
				set r2_0 = GetUnitY(u_0)
				set dist_0 = SquareRoot(((r1_0 - xd_0) * (r1_0 - xd_0)) + ((r2_0 - yd_0) * (r2_0 - yd_0)))
				set angle_0 = bj_RADTODEG_1 * Atan2((r2_0 - yd_0), (r1_0 - xd_0))
				set dammi_0 = CreateUnit(pr_0, 'h00U', xd_0, yd_0, angle_0)
				call SetUnitScale(dammi_0, r4_0, r4_0, r4_0)
				set ef_0 = AddSpecialEffectTarget(str_0, dammi_0, "origin")
				call UnitAddAbility(dammi_0, 'Amrf')
				call UnitRemoveAbility(dammi_0, 'Amrf')
				call SetUnitFlyHeight(dammi_0, 45., .0)
				set g_0 = CreateGroup()
				call GroupAddUnit(g_0, damaged_0)
				call SaveGroupHandle(udg_hash_1, h_0, 9, g_0)
				call SaveUnitHandle(udg_hash_1, h_0, $A, dammi_0)
				call SaveEffectHandle(udg_hash_1, h_0, $B, ef_0)
				call SaveUnitHandle(udg_hash_1, h_0, $C, u_0)
				call TimerStart(t_0, .03, true, function Trig_Moon_Chackrum_Periodic_Actions)
				set ef_0 = null
				set dammi_0 = null
				set t_0 = null
				set u_0 = null
				set g_0 = null
			else
				call DestroyTimer(t_0)
				call FlushChildHashtable(udg_hash_1, h_0)
				set t_0 = null
			endif
		endif
		if GetUnitAbilityLevel(damager_0, 'A0O0') >= 1 then
			set dammi_0 = CreateUnit(pr_0, 'h00U', xr_0, yr_0, .0)
			call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
			call UnitAddAbility(dammi_0, 'A0O2')
			call IssueTargetOrderById(dammi_0, $D006B, damaged_0)
			set dammi_0 = null
		endif
		if GetUnitAbilityLevel(damager_0, 'A0OE') >= 1 and GetRandomInt(1, 'd') <= 20 then
			call StunUnitTimed(damaged_0, 1.)
			call GroupAddUnit(gdamagefromdamager_0, damaged_0)
			call SaveReal(udg_hash_1, hdd_0, $9E, LoadReal(udg_hash_1, hdd_0, $9E) + 15.)
		endif
		if GetUnitAbilityLevel(damager_0, 'A0O1') >= 1 then
			set t_0 = LoadTimerHandle(udg_hash_1, hdr_0, $81)
			if t_0 != null then
				set i_0 = LoadInteger(udg_hash_1, GetHandleId(t_0), 1)
				if i_0 <= 58 then
					set i_0 = i_0 + 2
					call SetAttackSpeedAbilityLevel(damager_0, 2)
					call SetAttackAbilityLevel(damager_0, 1)
					call SaveInteger(udg_hash_1, GetHandleId(t_0), 1, i_0)
					call SaveInteger(udg_hash_1, hdr_0, $82, i_0)
				else
					set ef_0 = LoadEffectHandle(udg_hash_1, GetHandleId(t_0), 3)
					if ef_0 == null then
						set ef_0 = AddSpecialEffectTarget("Abilities\\Spells\\Other\\Tornado\\Tornado_Target.mdl", damager_0, "weapon")
						call SaveEffectHandle(udg_hash_1, GetHandleId(t_0), 3, ef_0)
						set ef_0 = null
						set ef_0 = AddSpecialEffectTarget("Effects\\Spellorb.mdl", damager_0, "origin")
						call SaveEffectHandle(udg_hash_1, GetHandleId(t_0), 4, ef_0)
					endif
					set ef_0 = null
				endif
			else
				set t_0 = CreateTimer()
				call SaveTimerHandle(udg_hash_1, hdr_0, $81, t_0)
				call SetAttackSpeedAbilityLevel(damager_0, 2)
				call SetAttackAbilityLevel(damager_0, 1)
				call SaveInteger(udg_hash_1, hdr_0, $82, 2)
				call SaveInteger(udg_hash_1, GetHandleId(t_0), 1, 2)
				call SaveUnitHandle(udg_hash_1, GetHandleId(t_0), 2, damager_0)
			endif
			call TimerStart(t_0, 15., false, function Trig_Blood_Bow_Remove_Effects_Actions)
			set t_0 = null
		endif
		if LoadBoolean(udg_hash_1, hdd_0, $84) == false and GetUnitAbilityLevel(damaged_0, 'A0OB') >= 1 and (GetUnitState(damaged_0, UNIT_STATE_LIFE_1) <= GetUnitState(damaged_0, UNIT_STATE_MAX_LIFE_1) * .5) then
			call SaveBoolean(udg_hash_1, hdd_0, $84, true)
			call SetAttackSpeedAbilityLevel(damaged_0, 50)
			call SetAttackAbilityLevel(damaged_0, $A)
			set t_0 = CreateTimer()
			set ef_0 = AddSpecialEffectTarget("Abilities\\Spells\\Orc\\TrollBerserk\\HeadhunterWEAPONSLeft.mdl", damaged_0, "overhead")
			call SaveEffectHandle(udg_hash_1, GetHandleId(t_0), 2, ef_0)
			set ef_0 = null
			set ef_0 = AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Bloodlust\\BloodlustTarget.mdl", damaged_0, "hand,left")
			call SaveEffectHandle(udg_hash_1, GetHandleId(t_0), 3, ef_0)
			set ef_0 = null
			call SaveUnitHandle(udg_hash_1, GetHandleId(t_0), 1, damaged_0)
			call TimerStart(t_0, 7., false, function Trig_Beorn_Rage_Remove_Effects_Actions)
			set t_0 = null
		endif
		if GetUnitAbilityLevel(damager_0, 'A0OJ') >= 1 then
			set u_0 = LoadUnitHandle(udg_hash_1, hdr_0, $85)
			if u_0 == null then
				set u_0 = damaged_0
				set ef_0 = AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Bloodlust\\BloodlustTarget.mdl", damaged_0, "overhead")
				call SaveEffectHandle(udg_hash_1, hdr_0, $87, ef_0)
				set ef_0 = null
			endif
			set i_0 = 0
			set i_0 = LoadInteger(udg_hash_1, hdr_0, $86)
			if damaged_0 == u_0 then
				if i_0 < $A then
					set i_0 = i_0 + 1
				endif
			else
				if i_0 >= 4 then
					if i_0 == $A then
						set i_0 = 9
					endif
					call SetAttackSpeedAbilityLevel(damager_0, -20 * (i_0 - 3))
				endif
				set i_0 = 0
				set ef_0 = LoadEffectHandle(udg_hash_1, hdr_0, $87)
				call DestroyEffect(ef_0)
				set ef_0 = AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Bloodlust\\BloodlustTarget.mdl", damaged_0, "overhead")
				call SaveEffectHandle(udg_hash_1, hdr_0, $87, ef_0)
				set ef_0 = null
			endif
			if i_0 > 3 and i_0 < $A then
				call SetAttackSpeedAbilityLevel(damager_0, 20)
			endif
			call SaveUnitHandle(udg_hash_1, hdr_0, $85, damaged_0)
			call SaveInteger(udg_hash_1, hdr_0, $86, i_0)
		endif
		if GetUnitAbilityLevel(damager_0, 'A0O1') >= 1 then
			set r1_0 = LoadInteger(udg_hash_1, hdr_0, $82) * damage_0 * .15 * .01
			call SetUnitState(damager_0, UNIT_STATE_LIFE_1, GetUnitState(damager_0, UNIT_STATE_LIFE_1) + r1_0)
		endif
		if GetUnitAbilityLevel(damager_0, 'A0OZ') > 0 and IsUnitIllusion(damager_0) == false then
			set i_0 = LoadInteger(udg_hash_1, hdr_0, $8F)
			set b_0 = false
			set i_0 = i_0 + 1
			if i_0 == 3 then
				set ef_0 = AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", damager_0, "weapon")
				call SaveEffectHandle(udg_hash_1, hdr_0, $90, ef_0)
				set ef_0 = null
			endif
			if i_0 == 4 then
				set i_0 = 0
				set b_0 = true
			endif
			call SaveInteger(udg_hash_1, hdr_0, $8F, i_0)
			if b_0 then
				call DestroyEffect(LoadEffectHandle(udg_hash_1, hdr_0, $90))
				set r1_0 = (damage_0 * 1.) + GetHeroInt(damager_0, true)
				call GroupAddUnit(gdamagefromdamager_0, damaged_0)
				call SaveReal(udg_hash_1, hdd_0, $9E, LoadReal(udg_hash_1, hdd_0, $9E) + GetHeroInt(damager_0, true))
				call SaveReal(udg_hash_1, hdd_0, $9F, LoadReal(udg_hash_1, hdd_0, $9F) + (damage_0 * 1.))
				call CreateTexttag(udg_ColorString_1[2] + I2S(R2I(r1_0 + damage_0)) + "!|r", .025, $FF, xd_0 - 18., yd_0 + 15., .0, .0, .035, 3.5)
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", damaged_0, "chest"))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningBolt\\LightningBoltMissile.mdl", damaged_0, "chest"))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", damaged_0, "origin"))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningShield\\LightningShieldBuff.mdl", damaged_0, "chest"))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Purge\\PurgeBuffTarget.mdl", damaged_0, "chest"))
				set g_0 = CreateGroup()
				set g2_0 = CreateGroup()
				call GroupEnumUnitsInRange(g_0, xd_0, yd_0, 300., null)
				call GroupRemoveUnit(g_0, damaged_0)
				loop
					set Picked_0 = FirstOfGroup(g_0)
					exitwhen Picked_0 == null
					if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 and IsUnitEnemy(Picked_0, pr_0) and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false then
						call GroupAddUnit(g2_0, Picked_0)
					endif
					call GroupRemoveUnit(g_0, Picked_0)
				endloop
				set Picked_0 = null
				call GroupClear(g_0)
				call DestroyGroup(g_0)
				set g_0 = null
				call RandomUnitFromGroup(3, g2_0)
				set g_0 = CreateGroup()
				call GroupAddGroup(udg_GroupRandomUnitFromGroup_1, g_0)
				set r1_0 = 100. + (GetUnitState(damager_0, UNIT_STATE_MAX_MANA_1) / 15.)
				loop
					set Picked_0 = FirstOfGroup(g_0)
					exitwhen Picked_0 == null
					set t_0 = CreateTimer()
					set h_0 = GetHandleId(t_0)
					call SaveUnitHandle(udg_hash_1, h_0, 1, Picked_0)
					call SaveInteger(udg_hash_1, h_0, 2, $F)
					call SaveUnitHandle(udg_hash_1, h_0, 3, damaged_0)
					set locr_0 = GetUnitLoc(damaged_0)
					set locd_0 = GetUnitLoc(Picked_0)
					set l_0 = AddLightningEx("CLPB", true, xd_0, yd_0, GetUnitFlyHeight(damaged_0) + 25. + GetLocationZ(locr_0), GetUnitX(Picked_0), GetUnitY(Picked_0), GetUnitFlyHeight(Picked_0) + 25. + GetLocationZ(locd_0))
					call SaveLightningHandle(udg_hash_1, h_0, 4, l_0)
					set l_0 = null
					call RemoveLocation(locr_0)
					set locr_0 = null
					call RemoveLocation(locd_0)
					set locd_0 = null
					call TimerStart(t_0, .04, true, function Trig_Remove_Lightning_From_Staff_Of_Lightning_Actions)
					call GroupAddUnit(gdamagefromdamager_0, Picked_0)
					call SaveReal(udg_hash_1, GetHandleId(Picked_0), $9E, LoadReal(udg_hash_1, GetHandleId(Picked_0), $9E) + r1_0)
					call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", Picked_0, "chest"))
					call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningBolt\\LightningBoltMissile.mdl", Picked_0, "chest"))
					call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", Picked_0, "origin"))
					call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningShield\\LightningShieldBuff.mdl", Picked_0, "chest"))
					call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Purge\\PurgeBuffTarget.mdl", Picked_0, "chest"))
					call GroupRemoveUnit(g_0, Picked_0)
					set t_0 = null
				endloop
				call GroupClear(g_0)
				call DestroyGroup(g_0)
				set g_0 = null
				call GroupClear(g2_0)
				call DestroyGroup(g2_0)
				set g2_0 = null
				set Picked_0 = null
			endif
		endif
		if GetUnitAbilityLevel(damager_0, 'A0P3') > 0 and LoadTimerHandle(udg_hash_1, hdr_0, $92) != null and IsUnitIllusion(damager_0) == false then
			call DestroyEffect(LoadEffectHandle(udg_hash_1, GetHandleId(LoadTimerHandle(udg_hash_1, hdr_0, $92)), 2))
			call DestroyEffect(LoadEffectHandle(udg_hash_1, GetHandleId(LoadTimerHandle(udg_hash_1, hdr_0, $92)), 3))
			call UnitRemoveAbility(damager_0, 'A0P4')
			set r1_0 = damage_0 * .5
			set g_0 = CreateGroup()
			call GroupEnumUnitsInRange(g_0, xd_0, yd_0, 150., null)
			call GroupRemoveUnit(g_0, damaged_0)
			loop
				set Picked_0 = FirstOfGroup(g_0)
				exitwhen Picked_0 == null
				if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 and IsUnitEnemy(Picked_0, pr_0) and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false then
					call GroupAddUnit(gdamagefromdamager_0, Picked_0)
					call SaveReal(udg_hash_1, GetHandleId(Picked_0), $9F, LoadReal(udg_hash_1, GetHandleId(Picked_0), $9F) + r1_0)
					call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl", Picked_0, "chest"))
					call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPeasant.mdl", Picked_0, "origin"))
					call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl", Picked_0, "origin"))
				endif
				call GroupRemoveUnit(g_0, Picked_0)
			endloop
			call GroupClear(g_0)
			call DestroyGroup(g_0)
			set g_0 = null
			set Picked_0 = null
			call FlushChildHashtable(udg_hash_1, GetHandleId(LoadTimerHandle(udg_hash_1, hdr_0, $92)))
			call DestroyTimer(LoadTimerHandle(udg_hash_1, hdr_0, $92))
		endif
		if GetUnitAbilityLevel(damager_0, 'A0P3') > 0 and GetRandomInt(1, 'd') <= ($A + 5 * GetUnitAbilityLevel(damager_0, 'A0P3')) and IsUnitIllusion(damager_0) == false then
			call SaveInteger(udg_hash_1, hdr_0, $91, 1)
			set t_0 = LoadTimerHandle(udg_hash_1, hdr_0, $92)
			if t_0 == null then
				set t_0 = CreateTimer()
				set h_0 = GetHandleId(t_0)
				call SaveTimerHandle(udg_hash_1, hdr_0, $92, t_0)
				call UnitAddAbility(damager_0, 'A0P4')
				call SaveUnitHandle(udg_hash_1, h_0, 1, damager_0)
				call SaveEffectHandle(udg_hash_1, h_0, 2, AddSpecialEffectTarget("Effects\\CosmicTouch.MDX", damager_0, "weapon"))
				call SaveEffectHandle(udg_hash_1, h_0, 3, AddSpecialEffectTarget("Effects\\CosmicTouch.MDX", damager_0, "overhead"))
			endif
			call TimerStart(t_0, 1., false, function Trig_Remove_ASBonus_Double_Attack_Actions)
			set t_0 = null
		endif
		if GetUnitAbilityLevel(damaged_0, 'A0P9') > 0 and IsUnitIllusion(damaged_0) == false then
			set i_0 = LoadInteger(udg_hash_1, hdd_0, $98)
			set lvl_0 = LoadInteger(udg_hash_1, hdd_0, $99)
			if lvl_0 > 0 and (IsUnitType(damager_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false) then
				call GroupAddUnit(gdamagefromdamaged_0, damager_0)
				call SaveReal(udg_hash_1, hdr_0, $A0, LoadReal(udg_hash_1, hdr_0, $A0) + I2R(lvl_0))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl", damager_0, "chest"))
			endif
			set i_0 = i_0 + 1
			if i_0 == 5 then
				set i_0 = 0
				if lvl_0 < GetUnitAbilityLevel(damaged_0, 'A0P9') * 5 then
					set lvl_0 = lvl_0 + 1
					call SaveInteger(udg_hash_1, hdd_0, $99, lvl_0)
					set t_0 = CreateTimer()
					set h_0 = GetHandleId(t_0)
					call SaveUnitHandle(udg_hash_1, h_0, 1, damaged_0)
					call SetUnitLifeAndManaRegeneration(damaged_0, "life", 1)
					call SetArmorAbilityLevel(damaged_0, 1)
					call TimerStart(t_0, 5. * GetUnitAbilityLevel(damaged_0, 'A0P9'), false, function Trig_Remove_Bonus_Marshal_Armor_Actions)
					set t_0 = null
				endif
			endif
			call SaveInteger(udg_hash_1, hdd_0, $98, i_0)
			set t_0 = null
		endif
		if GetUnitAbilityLevel(damager_0, 'A09L') > 0 then
			set i_0 = LoadInteger(udg_hash_1, hdr_0, $A7)
			set b_0 = false
			set i_0 = i_0 + 1
			if i_0 == 2 then
				set ef_0 = AddSpecialEffectTarget("Abilities\\Spells\\Orc\\TrollBerserk\\HeadhunterWEAPONSLeft.mdl", damager_0, "hand,left")
				call SaveEffectHandle(udg_hash_1, hdr_0, $A8, ef_0)
				set ef_0 = null
				set ef_0 = AddSpecialEffectTarget("Abilities\\Spells\\Orc\\TrollBerserk\\HeadhunterWEAPONSRight.mdl", damager_0, "weapon,right")
				call SaveEffectHandle(udg_hash_1, hdr_0, $A9, ef_0)
				set ef_0 = null
			endif
			if i_0 == 3 then
				set i_0 = 0
				set b_0 = true
			endif
			call SaveInteger(udg_hash_1, hdr_0, $A7, i_0)
			if b_0 then
				call DestroyEffect(LoadEffectHandle(udg_hash_1, hdr_0, $A8))
				call DestroyEffect(LoadEffectHandle(udg_hash_1, hdr_0, $A9))
				call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HeroBloodElfBlood.mdl", damaged_0, "origin"))
				call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl", damaged_0, "origin"))
				set r1_0 = damage_0 * 2.
				call GroupAddUnit(gdamagefromdamager_0, damaged_0)
				call SaveReal(udg_hash_1, hdd_0, $9F, LoadReal(udg_hash_1, hdd_0, $9F) + r1_0)
				call CreateTexttag(udg_ColorString_1[1] + I2S(R2I(r1_0 + damage_0)) + "!|r", .031, $FF, xd_0 - 18., yd_0 + 15., .0, .0, .035, 3.5)
				set dammi_0 = CreateUnit(pr_0, 'h00U', xd_0, yd_0, .0)
				call UnitApplyTimedLife(dammi_0, 'BTLF', 2.)
				call UnitAddAbility(dammi_0, 'A0F8')
				call IssueTargetOrderById(dammi_0, $D006B, damaged_0)
				set dammi_0 = null
			endif
		endif
		if GetUnitAbilityLevel(damager_0, 'A0GS') > 0 then
			set r1_0 = GetUnitFacing(damaged_0)
			set r2_0 = (Atan2(yr_0 - yd_0, xr_0 - xd_0) * bj_RADTODEG_1)
			set r3_0 = r2_0 + 360.
			set dist_0 = SquareRoot((xd_0 - xr_0) * (xd_0 - xr_0) + (yd_0 - yr_0) * (yd_0 - yr_0))
			if ((r1_0 < r2_0 + 60.) and (r1_0 > r2_0 - 60.)) or ((r1_0 < r3_0 + 60.) and (r1_0 > r3_0 - 60.)) and dist_0 <= 175. then
				call UnitDamageTarget(damager_0, damaged_0, GetHeroAgi(damager_0, true) * .6, false, false, ATTACK_TYPE_MELEE_1, DAMAGE_TYPE_NORMAL_1, WEAPON_TYPE_WHOKNOWS_1)
				call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl", damaged_0, "chest"))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GargoyleMissile\\GargoyleMissile.mdl", damaged_0, "chest"))
			endif
		endif
		if GetUnitAbilityLevel(damager_0, 'A0QT') >= 1 and GetRandomInt(0, 'd') <= (7 + GetUnitAbilityLevel(damager_0, 'A0QT') * 3) then
			set r1_0 = (GetUnitAbilityLevel(damager_0, 'A0QT') * .05 + .15) * damage_0
			call StunUnitTimed(damaged_0, 1.5)
			set g_0 = CreateGroup()
			if LoadBoolean(udg_hash_1, hdr_0, $B3) == false then
				call GroupEnumUnitsInRange(g_0, xd_0, yd_0, 150., null)
			else
				call GroupEnumUnitsInRange(g_0, xd_0, yd_0, 225., null)
				set r1_0 = ((GetUnitAbilityLevel(damager_0, 'A0QT') * .05 + .15) * damage_0) + GetHeroAgi(damager_0, true) * .75
			endif
			call GroupRemoveUnit(g_0, damaged_0)
			call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\SteamTank\\SteamTankImpact.mdl", xd_0, yd_0))
			loop
				set Picked_0 = FirstOfGroup(g_0)
				exitwhen Picked_0 == null
				if IsUnitEnemy(Picked_0, pr_0) and Picked_0 != damaged_0 and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
					call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GyroCopter\\GyroCopterMissile.mdl", Picked_0, "origin"))
					call StunUnitTimed(Picked_0, .25)
					call GroupAddUnit(gdamagefromdamager_0, Picked_0)
					call SaveReal(udg_hash_1, GetHandleId(Picked_0), $9F, LoadReal(udg_hash_1, GetHandleId(Picked_0), $9F) + r1_0)
					call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GyroCopter\\GyroCopterImpact.mdl", Picked_0, "chest"))
				endif
				call GroupRemoveUnit(g_0, Picked_0)
			endloop
			call GroupClear(g_0)
			call DestroyGroup(g_0)
			set g_0 = null
		endif
		if GetUnitAbilityLevel(damaged_0, 'A0OW') > 0 then
			if damage_0 > 7 then
				set r1_0 = 7
			endif
			if damage_0 <= 7 then
				set r1_0 = damage_0
			endif
			set t_0 = CreateTimer()
			set h_0 = GetHandleId(t_0)
			call SaveUnitHandle(udg_hash_1, h_0, 1, damaged_0)
			call SaveReal(udg_hash_1, h_0, 2, r1_0)
			call TimerStart(t_0, .0, false, function Trig_Hil_Unit_Actions)
			set t_0 = null
		endif
		if GetUnitAbilityLevel(damaged_0, 'A0K7') > 0 and GetRandomInt(1, 'd') <= 20 and GetUnitAbilityLevel(damaged_0, 'A0K9') < 1 then
			set dammi_0 = CreateUnit(pd_0, 'h013', xr_0, yr_0, .0)
			call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
			call UnitAddAbility(dammi_0, 'A0K8')
			call IssueTargetOrderById(dammi_0, $D006B, damaged_0)
			set dammi_0 = null
		endif
		if GetUnitAbilityLevel(damaged_0, 'B03P') > 0 then
			call UnitDamageTarget(damaged_0, damager_0, (GetRandomReal(20., 50.)), false, false, ATTACK_TYPE_MELEE_1, DAMAGE_TYPE_NORMAL_1, WEAPON_TYPE_WHOKNOWS_1)
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Immolation\\ImmolationDamage.mdl", damager_0, "chest"))
		endif
	endif
	if damage_0 >= .01 then
		if LoadReal(udg_hash_1, hdd_0, 65) > .0 and LoadEffectHandle(udg_hash_1, hdd_0, 66) != null then
			set r1_0 = LoadReal(udg_hash_1, hdd_0, 65)
			if (r1_0 - damage_0) > .0 then
				set r2_0 = damage_0
			else
				set r2_0 = r1_0
				set ef_0 = LoadEffectHandle(udg_hash_1, hdd_0, 66)
				call DestroyEffect(ef_0)
				set ef_0 = null
			endif
			set t_0 = CreateTimer()
			set h_0 = GetHandleId(t_0)
			call SaveUnitHandle(udg_hash_1, h_0, 1, damaged_0)
			call SaveReal(udg_hash_1, h_0, 2, r2_0)
			call TimerStart(t_0, .0, false, function Trig_Hil_Unit_Actions)
			call SaveReal(udg_hash_1, hdd_0, 65, r1_0 - damage_0)
			set t_0 = null
		endif
		if GetUnitAbilityLevel(damaged_0, 'A07U') > 0 and GetRandomInt(1, 'd') <= 30 then
			set t_0 = CreateTimer()
			set h_0 = GetHandleId(t_0)
			call SaveUnitHandle(udg_hash_1, h_0, 1, damaged_0)
			set r2_0 = damage_0 * .2
			if GetUnitState(damaged_0, UNIT_STATE_LIFE_1) <= damage_0 then
				call SetUnitInvulnerable(damaged_0, true)
				call TimerStart(t_0, .0, false, function Trig_Make_Unit_UnInvulnerable_Actions)
			else
				call SaveReal(udg_hash_1, h_0, 2, damage_0)
				call TimerStart(t_0, .0, false, function Trig_Hil_Unit_Actions)
			endif
			set dammi_0 = CreateUnit(Player($F), 'h00U', xd_0, yd_0, bj_RADTODEG_1 * Atan2(yr_0 - yd_0, xr_0 - xd_0))
			call UnitApplyTimedLife(dammi_0, 'BTLF', 2.)
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SpiritOfVengeanceMissile\\SpiritOfVengeanceMissile.mdl", damager_0, "chest"))
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\SpellShieldAmulet\\SpellShieldCaster.mdl", dammi_0, "origin"))
			set dammi_0 = null
			if IsUnitType(damager_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false then
				call GroupAddUnit(gdamagefromdamaged_0, damager_0)
				call SaveReal(udg_hash_1, hdr_0, $A0, LoadReal(udg_hash_1, hdr_0, $A0) + r2_0)
			endif
			set t_0 = null
		endif
		if damage_0 > .0 and (pd_0 == Player(9) or pd_0 == Player($A) or pd_0 == Player($B)) then
			set players_0 = LoadForceHandle(udg_hash_1, hdd_0, 72)
			if players_0 == null then
				set players_0 = CreateForce()
			endif
			if IsPlayerInForce(pr_0, players_0) == false then
				call ForceAddPlayer(players_0, pr_0)
			endif
			set t_0 = null
			set t_0 = LoadTimerHandle(udg_hash_1, hdd_0, 73 + GetPlayerId(pr_0))
			if t_0 == null then
				set t_0 = CreateTimer()
			endif
			call SaveTimerHandle(udg_hash_1, hdd_0, 73 + GetPlayerId(pr_0), t_0)
			set h_0 = GetHandleId(t_0)
			call SavePlayerHandle(udg_hash_1, h_0, 1, pr_0)
			call SaveForceHandle(udg_hash_1, h_0, 2, players_0)
			call SaveInteger(udg_hash_1, h_0, 3, hdd_0)
			call TimerStart(t_0, 7., false, function Trig_AddDamage_Refresh_Creep_Assists_Actions)
			call SaveForceHandle(udg_hash_1, hdd_0, 72, players_0)
			set players_0 = null
			set t_0 = null
		endif
		if damage_0 > 5. and GetUnitAbilityLevel(damaged_0, 'A09G') > 0 and GetRandomInt(1, 'd') <= 25 then
			call SetUnitState(damaged_0, UNIT_STATE_LIFE_1, GetUnitState(damaged_0, UNIT_STATE_LIFE_1) + 25.)
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayDamage.mdl", damaged_0, "chest"))
		endif
		if damage_0 > 10. and GetUnitAbilityLevel(damaged_0, 'A09K') > 0 and GetRandomInt(1, 'd') <= 40 then
			call SetUnitState(damaged_0, UNIT_STATE_LIFE_1, GetUnitState(damaged_0, UNIT_STATE_LIFE_1) + 25. + (damage_0 / 3))
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\SpellSteal\\SpellStealMissile.mdl", damaged_0, "chest"))
		endif
		if LoadReal(udg_hash_1, hdd_0, 86) > .0 and LoadEffectHandle(udg_hash_1, hdd_0, 87) != null then
			set r1_0 = LoadReal(udg_hash_1, hdd_0, 86)
			set r3_0 = GetUnitState(damaged_0, UNIT_STATE_LIFE_1)
			set t_0 = CreateTimer()
			set h_0 = GetHandleId(t_0)
			call SaveUnitHandle(udg_hash_1, h_0, 1, damaged_0)
			if (r1_0 - damage_0) > .0 then
				set r2_0 = damage_0
			else
				set r2_0 = r1_0
				set ef_0 = LoadEffectHandle(udg_hash_1, hdd_0, 87)
				call DestroyEffect(ef_0)
				set ef_0 = null
				call SaveEffectHandle(udg_hash_1, hdd_0, 87, null)
			endif
			if r3_0 <= damage_0 and (r1_0 + r3_0 - damage_0) > .0 then
				call SetUnitInvulnerable(damaged_0, true)
				call TimerStart(t_0, .0, false, function Trig_Make_Unit_UnInvulnerable_Actions)
				if r1_0 <= damage_0 then
					set t2_0 = CreateTimer()
					set h2_0 = GetHandleId(t2_0)
					call SaveUnitHandle(udg_hash_1, h2_0, 1, damaged_0)
					call SaveUnitHandle(udg_hash_1, h2_0, 2, damager_0)
					call SaveReal(udg_hash_1, h2_0, 3, (damage_0 - r1_0))
					call SaveStr(udg_hash_1, h2_0, 4, "clear")
					call TimerStart(t2_0, .0, false, function Trig_Damage_Unit_With_Wait_Actions)
					set t2_0 = null
				endif
			endif
			if r3_0 > damage_0 then
				call SaveReal(udg_hash_1, h_0, 2, r2_0)
				call TimerStart(t_0, .0, false, function Trig_Hil_Unit_Actions)
			endif
			call SaveReal(udg_hash_1, hdd_0, 86, r1_0 - damage_0)
			set t_0 = null
		endif
		if (GetUnitAbilityLevel(damaged_0, 'A0IT') > 0 or GetUnitAbilityLevel(damaged_0, 'A0J8') > 0) and IsUnitType(damager_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false then
			if GetUnitAbilityLevel(damaged_0, 'A0IT') > 0 then
				set r1_0 = damage_0 * .2 + 20.
			endif
			if GetUnitAbilityLevel(damaged_0, 'A0J8') > 0 then
				set r1_0 = damage_0 * .3 + 30.
			endif
			call GroupAddUnit(gdamagefromdamaged_0, damager_0)
			call SaveReal(udg_hash_1, hdr_0, $A1, LoadReal(udg_hash_1, hdr_0, $A1) + r1_0)
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\ThornsAura\\ThornsAuraDamage.mdl", damager_0, "overhead"))
		endif
		if LoadBoolean(udg_hash_1, hdd_0, 94) and LoadBoolean(udg_hash_1, hdd_0, $A2) == false and LoadEffectHandle(udg_hash_1, hdd_0, 95) != null and (GetUnitState(damaged_0, UNIT_STATE_LIFE_1) <= damage_0 or GetUnitState(damaged_0, UNIT_STATE_LIFE_1) <= GetUnitState(damaged_0, UNIT_STATE_MAX_LIFE_1) * .02) then
			set ef_0 = LoadEffectHandle(udg_hash_1, hdd_0, 95)
			call DestroyEffect(ef_0)
			set t_0 = CreateTimer()
			set h_0 = GetHandleId(t_0)
			call SaveUnitHandle(udg_hash_1, h_0, 1, damaged_0)
			call SetUnitInvulnerable(damaged_0, true)
			call TimerStart(t_0, .0, false, function Trig_Make_Unit_UnInvulnerable_Actions)
			call SetUnitState(damaged_0, UNIT_STATE_LIFE_1, GetUnitState(damaged_0, UNIT_STATE_MAX_LIFE_1) * .5)
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl", damaged_0, "origin"))
			call SaveEffectHandle(udg_hash_1, hdd_0, 95, null)
			call SaveReal(udg_hash_1, hdd_0, 96, 60.)
			call SaveBoolean(udg_hash_1, hdd_0, $A2, true)
			set t2_0 = CreateTimer()
			set h2_0 = GetHandleId(t2_0)
			call SaveUnitHandle(udg_hash_1, h2_0, 1, damaged_0)
			call TimerStart(t2_0, 60., false, function Trig_Cuirass_of_Invulnerable_Timer_Death_Denial_Actions)
			set ef_0 = null
			set t_0 = null
			set t2_0 = null
		endif
		if LoadReal(udg_hash_1, hdd_0, 'i') > .0 and LoadBoolean(udg_hash_1, hdd_0, 'f') then
			set r1_0 = LoadReal(udg_hash_1, hdd_0, 'i')
			set r3_0 = GetUnitState(damaged_0, UNIT_STATE_LIFE_1)
			set t_0 = CreateTimer()
			set h_0 = GetHandleId(t_0)
			call SaveUnitHandle(udg_hash_1, h_0, 1, damaged_0)
			call SaveBoolean(udg_hash_1, hdd_0, 'j', true)
			if (r1_0 - damage_0) > .0 then
				set r2_0 = damage_0
			else
				set r2_0 = r1_0
				set ef_0 = LoadEffectHandle(udg_hash_1, hdd_0, 'g')
				call DestroyEffect(ef_0)
				set ef_0 = null
				call SaveEffectHandle(udg_hash_1, hdd_0, 'g', null)
				set t3_0 = CreateTimer()
				set h3_0 = GetHandleId(t3_0)
				call SaveUnitHandle(udg_hash_1, h3_0, 1, damaged_0)
				call SaveReal(udg_hash_1, hdd_0, 'h', 45.)
				call TimerStart(t3_0, 45., false, function Trig_Archimagus_Armor_Timer_Death_Denial_Actions)
				set g_0 = CreateGroup()
				call GroupEnumUnitsInRange(g_0, xd_0, yd_0, 500., null)
				call SetUnitState(damaged_0, UNIT_STATE_MANA_1, GetUnitState(damaged_0, UNIT_STATE_MANA_1) + ((50 + GetHeroInt(damaged_0, true) * .5)))
				loop
					set Picked_0 = FirstOfGroup(g_0)
					exitwhen Picked_0 == null
					if IsUnitAlly(Picked_0, pd_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
						call SetUnitState(Picked_0, UNIT_STATE_MANA_1, GetUnitState(Picked_0, UNIT_STATE_MANA_1) + ((50 + GetHeroInt(damaged_0, true) * .5)))
						call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIma\\AImaTarget.mdl", Picked_0, "origin"))
					endif
					call GroupRemoveUnit(g_0, Picked_0)
				endloop
				call GroupClear(g_0)
				call DestroyGroup(g_0)
				set g_0 = null
				set Picked_0 = null
			endif
			if r3_0 <= damage_0 and (r1_0 + r3_0 - damage_0) > .0 then
				call SetUnitInvulnerable(damaged_0, true)
				call TimerStart(t_0, .0, false, function Trig_Make_Unit_UnInvulnerable_Actions)
				if r1_0 <= damage_0 then
					set t2_0 = CreateTimer()
					set h2_0 = GetHandleId(t2_0)
					call SaveUnitHandle(udg_hash_1, h2_0, 1, damaged_0)
					call SaveUnitHandle(udg_hash_1, h2_0, 2, damager_0)
					call SaveReal(udg_hash_1, h2_0, 3, (damage_0 - r1_0))
					call SaveStr(udg_hash_1, h2_0, 4, "clear")
					call TimerStart(t2_0, .0, false, function Trig_Damage_Unit_With_Wait_Actions)
					set t2_0 = null
				endif
			endif
			if r3_0 > damage_0 then
				call SaveReal(udg_hash_1, h_0, 2, r2_0)
				call TimerStart(t_0, .0, false, function Trig_Hil_Unit_Actions)
			endif
			call SaveReal(udg_hash_1, hdd_0, 'i', r1_0 - damage_0)
			set t_0 = null
		endif
		if LoadReal(udg_hash_1, hdd_0, 'n') > .0 and LoadUnitHandle(udg_hash_1, hdd_0, 'o') != null then
			set r2_0 = damage_0 * LoadReal(udg_hash_1, hdd_0, 'n')
			set r3_0 = GetUnitState(damaged_0, UNIT_STATE_LIFE_1)
			set t_0 = CreateTimer()
			set h_0 = GetHandleId(t_0)
			call SaveUnitHandle(udg_hash_1, h_0, 1, damaged_0)
			call GroupAddUnit(gdamagefromdamager_0, LoadUnitHandle(udg_hash_1, hdd_0, 'o'))
			call SaveReal(udg_hash_1, GetHandleId(LoadUnitHandle(udg_hash_1, hdd_0, 'o')), $9E, LoadReal(udg_hash_1, GetHandleId(LoadUnitHandle(udg_hash_1, hdd_0, 'o')), $9E) + (r2_0) / 2)
			if (r3_0 <= damage_0) and (r2_0 + r3_0 - damage_0) > .0 then
				call SetUnitInvulnerable(damaged_0, true)
				call TimerStart(t_0, .0, false, function Trig_Make_Unit_UnInvulnerable_Actions)
			endif
			if r3_0 > damage_0 then
				call SaveReal(udg_hash_1, h_0, 2, r2_0)
				call TimerStart(t_0, .0, false, function Trig_Hil_Unit_Actions)
			endif
			set t_0 = null
		endif
		if LoadReal(udg_hash_1, hdd_0, $93) > .0 and LoadTimerHandle(udg_hash_1, hdd_0, $95) != null then
			set r1_0 = LoadReal(udg_hash_1, hdd_0, $93)
			if (r1_0 - damage_0) > .0 then
				set r2_0 = damage_0
			else
				set r2_0 = r1_0
				set g_0 = CreateGroup()
				set u_0 = LoadUnitHandle(udg_hash_1, hdd_0, $97)
				set p_0 = GetOwningPlayer(u_0)
				set r3_0 = LoadReal(udg_hash_1, hdd_0, $96)
				call DestroyEffect(AddSpecialEffect("Effects\\LightNova.mdl", GetUnitX(damaged_0), GetUnitY(damaged_0)))
				set udg_Temp_Integer_1[$A] = 0
				set udg_Temp_Integer_1[$B] = 0
				call DestroyEffect(AddSpecialEffectTarget("Effects\\DivineRage.mdx", damaged_0, "origin"))
				call GroupEnumUnitsInRange(g_0, GetUnitX(damaged_0), GetUnitY(damaged_0), 500., null)
				loop
					set Picked_0 = FirstOfGroup(g_0)
					exitwhen Picked_0 == null
					if IsUnitEnemy(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
						call DestroyEffect(AddSpecialEffectTarget("Effects\\DivineRage.mdx", Picked_0, "origin"))
						call UnitDamageTarget(u_0, Picked_0, r3_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
					endif
					call GroupRemoveUnit(g_0, Picked_0)
				endloop
				set t2_0 = LoadTimerHandle(udg_hash_1, hdd_0, $95)
				set h2_0 = GetHandleId(t2_0)
				set ef_0 = LoadEffectHandle(udg_hash_1, h2_0, 4)
				call DestroyEffect(ef_0)
				set ef_0 = null
				set ef_0 = LoadEffectHandle(udg_hash_1, h2_0, 5)
				call DestroyEffect(ef_0)
				set ef_0 = null
				set ef_0 = LoadEffectHandle(udg_hash_1, h2_0, 6)
				call DestroyEffect(ef_0)
				set ef_0 = null
				call SetAttackSpeedAbilityLevel(damaged_0, -LoadInteger(udg_hash_1, GetHandleId(damaged_0), $94))
				call FlushChildHashtable(udg_hash_1, h2_0)
				call DestroyTimer(t2_0)
				set t2_0 = null
				set u_0 = null
				set p_0 = null
				call DestroyGroup(g_0)
				set g_0 = null
			endif
			set t_0 = CreateTimer()
			set h_0 = GetHandleId(t_0)
			call SaveUnitHandle(udg_hash_1, h_0, 1, damaged_0)
			call SaveReal(udg_hash_1, h_0, 2, r2_0)
			call TimerStart(t_0, .0, false, function Trig_Hil_Unit_Actions)
			call SaveReal(udg_hash_1, hdd_0, $93, r1_0 - damage_0)
			set t_0 = null
		endif
		if LoadBoolean(udg_hash_1, hdd_0, $A5) and LoadTimerHandle(udg_hash_1, hdd_0, $A6) != null then
			set t_0 = CreateTimer()
			set h_0 = GetHandleId(t_0)
			call SaveUnitHandle(udg_hash_1, h_0, 1, damaged_0)
			if GetUnitState(damaged_0, UNIT_STATE_LIFE_1) > damage_0 then
				call SaveReal(udg_hash_1, h_0, 2, damage_0)
				call TimerStart(t_0, .0, false, function Trig_Hil_Unit_Actions)
			endif
			if GetUnitState(damaged_0, UNIT_STATE_LIFE_1) <= damage_0 then
				call SetUnitInvulnerable(damaged_0, true)
				call TimerStart(t_0, .0, false, function Trig_Make_Unit_UnInvulnerable_Actions)
			endif
			set t_0 = null
		endif
		if udg_IsBeronsFightWin_1 and (GetUnitTypeId(damaged_0) == 'h01K' or GetUnitTypeId(damaged_0) == 'e002' or GetUnitTypeId(damaged_0) == 'n00Y' or GetUnitTypeId(damaged_0) == 'o003') then
			set r2_0 = damage_0
			set r3_0 = GetUnitState(damaged_0, UNIT_STATE_LIFE_1)
			set t_0 = CreateTimer()
			set h_0 = GetHandleId(t_0)
			call SaveUnitHandle(udg_hash_1, h_0, 1, damaged_0)
			if (r3_0 <= damage_0) then
				call SetUnitInvulnerable(damaged_0, true)
				call TimerStart(t_0, .0, false, function Trig_Make_Unit_UnInvulnerable_Actions)
			endif
			if r3_0 > damage_0 then
				call SaveReal(udg_hash_1, h_0, 2, r2_0 * .3)
				call TimerStart(t_0, .0, false, function Trig_Hil_Unit_Actions)
			endif
			set t_0 = null
		endif
		if IsUnitAlly(damaged_0, Player($B)) or IsUnitAlly(damager_0, Player($B)) then
			if IsUnitAlly(damaged_0, Player($B)) then
				set dammi_0 = damaged_0
			else
				set dammi_0 = damager_0
			endif
			if IsUnitIllusion(dammi_0) == false and GetUnitState(dammi_0, UNIT_STATE_LIFE_1) > .405 and GetUnitTypeId(dammi_0) != 'h00U' then
				call SaveInteger(udg_hash_1, GetHandleId(dammi_0), 'k', 0)
			endif
		endif
		if pd_0 == Player($F) and damage_0 > .0 and IsUnitIllusion(damaged_0) == false and udg_IsMinimapPingGuardsAttacked_1 == false and (GetUnitTypeId(damaged_0) == 'h01K' or GetUnitTypeId(damaged_0) == 'e002' or GetUnitTypeId(damaged_0) == 'n00Y' or GetUnitTypeId(damaged_0) == 'o003') then
			if (IsPlayerInForce(GetLocalPlayer(), udg_IGRAET_1)) then
				call DisplayTextToPlayer(GetLocalPlayer(), .0, .0, "|cff99ccffВНИМАНИЕ!!!|r")
				call DisplayTextToPlayer(GetLocalPlayer(), .0, .0, "|cffff0000Стражи-Чародеи атакованы!!!|r")
				call PingMinimapEx(xd_0, yd_0, 3., $FE, 0, 0, true)
			endif
			set udg_IsMinimapPingGuardsAttacked_1 = true
			set t_0 = CreateTimer()
			call TimerStart(t_0, 6., false, function Trig_IsMinimapPingGuardsAttacked_Refresh_Actions)
			set t_0 = null
		endif
		if damage_0 > .0 then
			set i_0 = GetPlayerId(pr_0)
			if GetPlayerId(pr_0) <= 8 then
				set udg_Player_Taken_Damage_Current_1[i_0] = udg_Player_Taken_Damage_Current_1[i_0] + damage_0
				set udg_Player_Taken_Damage_All_1[i_0] = udg_Player_Taken_Damage_All_1[i_0] + damage_0
			endif
			set i_0 = GetPlayerId(pd_0)
			if GetPlayerId(pd_0) <= 8 then
				set udg_Player_Received_Damage_Current_1[i_0] = udg_Player_Received_Damage_Current_1[i_0] + damage_0
			endif
		endif
	endif
	loop
		set Picked_0 = FirstOfGroup(gdamagefromdamaged_0)
		exitwhen Picked_0 == null
		if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
			call UnitDamageTarget(damaged_0, Picked_0, ConvertMagicAndChaosDamageInClear(Picked_0, LoadReal(udg_hash_1, GetHandleId(Picked_0), $A0), LoadReal(udg_hash_1, GetHandleId(Picked_0), $A1)), false, false, ATTACK_TYPE_CHAOS_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
			call SaveReal(udg_hash_1, GetHandleId(Picked_0), $A0, .0)
			call SaveReal(udg_hash_1, GetHandleId(Picked_0), $A1, .0)
		endif
		call GroupRemoveUnit(gdamagefromdamaged_0, Picked_0)
	endloop
	set Picked_0 = null
	call GroupClear(gdamagefromdamaged_0)
	call DestroyGroup(gdamagefromdamaged_0)
	set gdamagefromdamaged_0 = null
	loop
		set Picked_0 = FirstOfGroup(gdamagefromdamager_0)
		exitwhen Picked_0 == null
		if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
			call UnitDamageTarget(damager_0, Picked_0, ConvertMagicAndChaosDamageInClear(Picked_0, LoadReal(udg_hash_1, GetHandleId(Picked_0), $9E), LoadReal(udg_hash_1, GetHandleId(Picked_0), $9F)), false, false, ATTACK_TYPE_CHAOS_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
			call SaveReal(udg_hash_1, GetHandleId(Picked_0), $9E, .0)
			call SaveReal(udg_hash_1, GetHandleId(Picked_0), $9F, .0)
		endif
		call GroupRemoveUnit(gdamagefromdamager_0, Picked_0)
	endloop
	set Picked_0 = null
	call GroupClear(gdamagefromdamager_0)
	call DestroyGroup(gdamagefromdamager_0)
	set gdamagefromdamager_0 = null
	set damager_0 = null
	set damaged_0 = null
	set pr_0 = null
	set pd_0 = null
	set dammi_0 = null
	set u_0 = null
	set l_0 = null
	set t_0 = null
	set txt_0 = null
	set ef_0 = null
	set g_0 = null
endfunction

function Trig_Del_Conditions takes nothing returns boolean
	return GetEventDamage() > .0
endfunction

function InitTrig_AddDamage takes nothing returns nothing
	set gg_trg_AddDamage_1 = CreateTrigger()
	call TriggerAddCondition(gg_trg_AddDamage_1, Condition(function Trig_Del_Conditions))
	call TriggerAddAction(gg_trg_AddDamage_1, function Trig_AddDamage_Actions)
endfunction

function Trig_TimeTalisman_Remove_Bonuses_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit target = LoadUnitHandle(udg_hash_1, h_0, 1)
	local integer as = LoadInteger(udg_hash_1, h_0, 2)
	local effect ef = LoadEffectHandle(udg_hash_1, h_0, 5)
	call SetAttackSpeedAbilityLevel(target_0, -as_0)
	call SaveBoolean(udg_hash_1, GetHandleId(target_0), $B1, false)
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	call DestroyEffect(ef_0)
	set target_0 = null
	set ef_0 = null
	set t_0 = null
endfunction

function Trig_TimeTalisman_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local unit target = GetSpellTargetUnit()
	local integer id = GetSpellAbilityId()
	local effect ef
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local integer as
	local unit dammi
	set dammi_0 = CreateUnit(GetOwningPlayer(caster_0), 'h00U', GetUnitX(caster_0), GetUnitY(caster_0), .0)
	call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
	call UnitAddAbility(dammi_0, 'A0QQ')
	call IssueTargetOrderById(dammi_0, $D0085, target_0)
	set dammi_0 = null
	if id_0 == 'A0QI' then
		set as_0 = 30
	endif
	if id_0 == 'A0QM' then
		set as_0 = 45
	endif
	if id_0 == 'A0QN' then
		set as_0 = 60
	endif
	if id_0 == 'A0QO' then
		set as_0 = 75
	endif
	if id_0 == 'A0QP' then
		set as_0 = 90
	endif
	if LoadBoolean(udg_hash_1, GetHandleId(target_0), $B1) == false then
		set ef_0 = AddSpecialEffectTarget("Punishment_Missle.mdx", target_0, "chest")
		call SaveBoolean(udg_hash_1, GetHandleId(target_0), $B1, true)
		call SetAttackSpeedAbilityLevel(target_0, as_0)
		call SaveUnitHandle(udg_hash_1, h_0, 1, target_0)
		call SaveInteger(udg_hash_1, h_0, 2, as_0)
		call SaveEffectHandle(udg_hash_1, h_0, 5, ef_0)
		call TimerStart(t_0, 10., false, function Trig_TimeTalisman_Remove_Bonuses_Actions)
		set ef_0 = null
	else
		call SimError(GetOwningPlayer(caster_0), "На этого воина уже наложено заклинание: 'Обгоняя Время'.")
	endif
	set caster_0 = null
	set target_0 = null
	set t_0 = null
endfunction

function Trig_TimeTalisman_Conditions takes nothing returns boolean
	return (GetSpellAbilityId() == 'A0QI' or GetSpellAbilityId() == 'A0QM' or GetSpellAbilityId() == 'A0QN' or GetSpellAbilityId() == 'A0QO' or GetSpellAbilityId() == 'A0QP')
endfunction

function InitTrig_TimeTalisman takes nothing returns nothing
	local integer index = 0
	set gg_trg_TimeTalisman_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_TimeTalisman_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_TimeTalisman_1, Condition(function Trig_TimeTalisman_Conditions))
	call TriggerAddAction(gg_trg_TimeTalisman_1, function Trig_TimeTalisman_Actions)
endfunction

function Trig_Take_Paladin_Armor_Periodic_Wave_Move_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit target = LoadUnitHandle(udg_hash_1, h_0, 1)
	local unit dammi = LoadUnitHandle(udg_hash_1, h_0, 4)
	local real x
	local real y
	local real xt
	local real yt
	local real angle
	local real dist
	local real heal
	local effect ef
	set x_0 = GetUnitX(dammi_0)
	set y_0 = GetUnitY(dammi_0)
	set xt_0 = GetUnitX(target_0)
	set yt_0 = GetUnitY(target_0)
	set angle_0 = bj_RADTODEG_1 * Atan2(yt_0 - y_0, xt_0 - x_0)
	set x_0 = x_0 + 17. * Cos(angle_0 * bj_DEGTORAD_1)
	set y_0 = y_0 + 17. * Sin(angle_0 * bj_DEGTORAD_1)
	call SetUnitPosition(dammi_0, x_0, y_0)
	set dist_0 = SquareRoot((xt_0 - x_0) * (xt_0 - x_0) + (yt_0 - y_0) * (yt_0 - y_0))
	if dist_0 < 23. or GetUnitState(target_0, UNIT_STATE_LIFE_1) < .405 then
		call SetUnitScale(dammi_0, .6, .6, .6)
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 3)
		call DestroyEffect(ef_0)
		set ef_0 = null
		if GetUnitState(target_0, UNIT_STATE_LIFE_1) > .405 then
			set heal_0 = LoadReal(udg_hash_1, h_0, 2)
			call SetUnitState(target_0, UNIT_STATE_LIFE_1, GetUnitState(target_0, UNIT_STATE_LIFE_1) + heal_0)
			call DestroyEffect(AddSpecialEffectTarget("Effects\\MegaHeal.mdx", target_0, "origin"))
			call DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", target_0, "origin"), 2.)
		else
			call DestroyEffect(AddSpecialEffect("Effects\\HolyPhoenixMissle.mdx", x_0, y_0))
		endif
		call RemoveUnit(dammi_0)
		call DestroyTimer(t_0)
		call FlushChildHashtable(udg_hash_1, h_0)
	endif
	set t_0 = null
	set target_0 = null
	set dammi_0 = null
endfunction

function Trig_Take_Paladin_Armor_Periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit hero = LoadUnitHandle(udg_hash_1, h_0, 1)
	local integer regen = LoadInteger(udg_hash_1, h_0, 2)
	local item armor = LoadItemHandle(udg_hash_1, h_0, 3)
	local integer newregen = R2I(GetUnitState(hero_0, UNIT_STATE_MAX_LIFE_1) * .01)
	local real heal
	local timer t2
	local integer h2
	local unit target
	local group g
	local group grup
	local unit Picked
	local unit dammi
	local effect ef
	if armor_0 != LoadItemHandle(udg_hash_1, GetHandleId(hero_0), $AD) or UnitHasItem(hero_0, armor_0) == false then
		call SetUnitLifeAndManaRegeneration(hero_0, "life", -LoadInteger(udg_hash_1, h_0, 2))
		call SaveInteger(udg_hash_1, h_0, 2, 0)
	endif
	if UnitHasItem(hero_0, armor_0) == false then
		call SaveItemHandle(udg_hash_1, GetHandleId(hero_0), $AD, GetItemOfTypeFromUnitBJ(hero_0, 'I02P'))
	endif
	if GetUnitState(hero_0, UNIT_STATE_LIFE_1) > .405 and CountItemOfTypeOnUnit(hero_0, 'I02P') > 0 and armor_0 == LoadItemHandle(udg_hash_1, GetHandleId(hero_0), $AD) then
		if regen_0 != newregen_0 then
			call SetUnitLifeAndManaRegeneration(hero_0, "life", -regen_0)
			call SetUnitLifeAndManaRegeneration(hero_0, "life", newregen_0)
			call SaveInteger(udg_hash_1, h_0, 2, newregen_0)
		endif
		set g_0 = CreateGroup()
		set grup_0 = CreateGroup()
		call GroupEnumUnitsInRange(g_0, GetUnitX(hero_0), GetUnitY(hero_0), 750., null)
		call GroupRemoveUnit(g_0, hero_0)
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if IsUnitAlly(Picked_0, GetOwningPlayer(hero_0)) and (GetUnitState(Picked_0, UNIT_STATE_LIFE_1) < .99 * GetUnitState(Picked_0, UNIT_STATE_MAX_LIFE_1)) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call GroupAddUnit(grup_0, Picked_0)
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		set Picked_0 = null
		call RandomUnitFromGroup(1, grup_0)
		call GroupAddGroup(udg_GroupRandomUnitFromGroup_1, g_0)
		set target_0 = FirstOfGroup(udg_GroupRandomUnitFromGroup_1)
		if target_0 == null then
			set target_0 = hero_0
		endif
		if target_0 != null then
			set t2_0 = CreateTimer()
			set h2_0 = GetHandleId(t2_0)
			set heal_0 = 200. + GetHeroStr(hero_0, true)
			set dammi_0 = CreateUnit(GetOwningPlayer(hero_0), 'h00U', GetUnitX(hero_0), GetUnitY(hero_0), (bj_RADTODEG_1 * Atan2(GetUnitY(target_0) - GetUnitY(hero_0), GetUnitX(target_0) - GetUnitX(hero_0))))
			call UnitAddAbility(dammi_0, 'Amrf')
			call UnitRemoveAbility(dammi_0, 'Amrf')
			call SetUnitFlyHeight(dammi_0, 50., .0)
			set ef_0 = AddSpecialEffectTarget("Effects\\HolyPhoenixMissle.mdx", dammi_0, "chest")
			call SaveUnitHandle(udg_hash_1, h2_0, 1, target_0)
			call SaveReal(udg_hash_1, h2_0, 2, heal_0)
			call SaveEffectHandle(udg_hash_1, h2_0, 3, ef_0)
			call SaveUnitHandle(udg_hash_1, h2_0, 4, dammi_0)
			call TimerStart(t2_0, .03, true, function Trig_Take_Paladin_Armor_Periodic_Wave_Move_Actions)
			set ef_0 = null
			set dammi_0 = null
			set t2_0 = null
		endif
		call GroupClear(g_0)
		call DestroyGroup(g_0)
		set g_0 = null
	endif
	if CountItemOfTypeOnUnit(hero_0, 'I02P') <= 0 then
		call DestroyTimer(t_0)
		call FlushChildHashtable(udg_hash_1, h_0)
	endif
	set armor_0 = null
	set t_0 = null
	set hero_0 = null
endfunction

function Trig_Take_Paladin_Armor_Actions takes nothing returns nothing
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local integer regen = 0
	local unit hero = GetTriggerUnit()
	call SaveUnitHandle(udg_hash_1, h_0, 1, hero_0)
	call SaveInteger(udg_hash_1, h_0, 2, regen_0)
	call SaveItemHandle(udg_hash_1, h_0, 3, GetManipulatedItem())
	call SaveItemHandle(udg_hash_1, GetHandleId(hero_0), $AD, GetManipulatedItem())
	call TimerStart(t_0, 5., true, function Trig_Take_Paladin_Armor_Periodic_Actions)
	set t_0 = null
	set hero_0 = null
endfunction

function Trig_Take_Paladin_Armor_Conditions takes nothing returns boolean
	return (GetItemTypeId(GetManipulatedItem()) == 'I02P')
endfunction

function InitTrig_Take_Paladin_Armor takes nothing returns nothing
	local integer index = 0
	set gg_trg_Take_Paladin_Armor_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Take_Paladin_Armor_1, Player(index_0), EVENT_PLAYER_UNIT_PICKUP_ITEM_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Take_Paladin_Armor_1, Condition(function Trig_Take_Paladin_Armor_Conditions))
	call TriggerAddAction(gg_trg_Take_Paladin_Armor_1, function Trig_Take_Paladin_Armor_Actions)
endfunction

function Trig_Take_Archimagus_Staff_Conditions takes nothing returns boolean
	return GetItemTypeId(GetManipulatedItem()) == 'I04V'
endfunction

function Trig_Take_Archimagus_Staff_Remove_Recipe_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local item it = LoadItemHandle(udg_hash_1, h_0, 1)
	local item staff = LoadItemHandle(udg_hash_1, h_0, 2)
	if staff_0 != null then
		call UnitAddItem(LoadUnitHandle(udg_hash_1, h_0, 3), staff_0)
	endif
	call RemoveItem(it_0)
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set it_0 = null
	set t_0 = null
endfunction

function Trig_Take_Archimagus_Staff_Actions takes nothing returns nothing
	local item it = GetManipulatedItem()
	local integer id = GetItemTypeId(it_0)
	local unit hero = GetManipulatingUnit()
	local integer heroid = GetUnitTypeId(hero_0)
	local item staff
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	if heroid_0 == 'H00Q' then
		set staff_0 = CreateItem('I01Y', GetUnitX(hero_0), GetUnitY(hero_0))
		call UnitAddItem(hero_0, staff_0)
		call SetItemUserData(staff_0, GetPlayerId(GetOwningPlayer(hero_0)) + 1)
	endif
	if heroid_0 == 'O001' then
		set staff_0 = CreateItem('I01Z', GetUnitX(hero_0), GetUnitY(hero_0))
		call UnitAddItem(hero_0, staff_0)
		call SetItemUserData(staff_0, GetPlayerId(GetOwningPlayer(hero_0)) + 1)
	endif
	if heroid_0 == 'E003' then
		set staff_0 = CreateItem('I020', GetUnitX(hero_0), GetUnitY(hero_0))
		call UnitAddItem(hero_0, staff_0)
		call SetItemUserData(staff_0, GetPlayerId(GetOwningPlayer(hero_0)) + 1)
	endif
	if heroid_0 == 'E001' then
		set staff_0 = CreateItem('I024', GetUnitX(hero_0), GetUnitY(hero_0))
		call UnitAddItem(hero_0, staff_0)
		call SetItemUserData(staff_0, GetPlayerId(GetOwningPlayer(hero_0)) + 1)
	endif
	if heroid_0 == 'N00W' then
		set staff_0 = CreateItem('I025', GetUnitX(hero_0), GetUnitY(hero_0))
		call UnitAddItem(hero_0, staff_0)
		call SetItemUserData(staff_0, GetPlayerId(GetOwningPlayer(hero_0)) + 1)
	endif
	if heroid_0 == 'H01I' then
		set staff_0 = CreateItem('I028', GetUnitX(hero_0), GetUnitY(hero_0))
		call UnitAddItem(hero_0, staff_0)
		call SetItemUserData(staff_0, GetPlayerId(GetOwningPlayer(hero_0)) + 1)
	endif
	call SaveItemHandle(udg_hash_1, h_0, 1, it_0)
	if staff_0 != null then
		call SaveItemHandle(udg_hash_1, h_0, 2, staff_0)
		call SaveUnitHandle(udg_hash_1, h_0, 3, hero_0)
	endif
	call TimerStart(t_0, .01, false, function Trig_Take_Archimagus_Staff_Remove_Recipe_Actions)
	set it_0 = null
	set hero_0 = null
endfunction

function InitTrig_Take_Archimagus_Staff takes nothing returns nothing
	local integer index = 0
	set gg_trg_Take_Archimagus_Staff_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Take_Archimagus_Staff_1, Player(index_0), EVENT_PLAYER_UNIT_PICKUP_ITEM_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Take_Archimagus_Staff_1, Condition(function Trig_Take_Archimagus_Staff_Conditions))
	call TriggerAddAction(gg_trg_Take_Archimagus_Staff_1, function Trig_Take_Archimagus_Staff_Actions)
endfunction

function Trig_Lost_Charged_Staff_of_Lightning_Actions takes nothing returns nothing
	local unit hero = GetTriggerUnit()
	local integer h = GetHandleId(hero_0)
	local integer i = LoadInteger(udg_hash_1, h_0, $8F)
	if i_0 == 3 then
		call DestroyEffect(LoadEffectHandle(udg_hash_1, h_0, $90))
	endif
	call SaveInteger(udg_hash_1, h_0, $8F, 0)
endfunction

function Trig_Lost_Charged_Staff_of_Lightning_Conditions takes nothing returns boolean
	return (GetItemTypeId(GetManipulatedItem()) == 'I01W' and IsUnitType(GetManipulatingUnit(), UNIT_TYPE_HERO_1)) != null
endfunction

function InitTrig_Lost_Charged_Staff_of_Lightning takes nothing returns nothing
	local integer index = 0
	set gg_trg_Lost_Charged_Staff_of_Lightning_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Lost_Charged_Staff_of_Lightning_1, Player(index_0), EVENT_PLAYER_UNIT_DROP_ITEM_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Lost_Charged_Staff_of_Lightning_1, Condition(function Trig_Lost_Charged_Staff_of_Lightning_Conditions))
	call TriggerAddAction(gg_trg_Lost_Charged_Staff_of_Lightning_1, function Trig_Lost_Charged_Staff_of_Lightning_Actions)
endfunction

function Trig_Blood_Bow_Actions takes nothing returns nothing
	local unit killer = GetKillingUnit()
	call SetUnitState(killer_0, UNIT_STATE_LIFE_1, GetUnitState(killer_0, UNIT_STATE_LIFE_1) + (GetUnitState(GetDyingUnit(), UNIT_STATE_MAX_LIFE_1) * .1))
	call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPriest.mdl", killer_0, "chest"))
	set killer_0 = null
endfunction

function Trig_Blood_Bow_Conditions takes nothing returns boolean
	return GetUnitAbilityLevel(GetKillingUnit(), 'A0O0') >= 1
endfunction

function InitTrig_Blood_Bow takes nothing returns nothing
	local integer index = 0
	set gg_trg_Blood_Bow_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Blood_Bow_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Blood_Bow_1, Condition(function Trig_Blood_Bow_Conditions))
	call TriggerAddAction(gg_trg_Blood_Bow_1, function Trig_Blood_Bow_Actions)
endfunction

function Trig_Balance_Ring_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real hp = GetUnitState(caster_0, UNIT_STATE_LIFE_1)
	local real hp2
	local real removehp = 200.
	local real healmp = 150.
	if (GetUnitState(caster_0, UNIT_STATE_MANA_1) < (GetUnitState(caster_0, UNIT_STATE_MAX_MANA_1) * .5)) then
		if hp_0 > removehp_0 then
			set hp2_0 = removehp_0
		else
			set hp2_0 = hp_0 - 1.
		endif
		call SetUnitState(caster_0, UNIT_STATE_LIFE_1, hp_0 - hp2_0)
		call SetUnitState(caster_0, UNIT_STATE_MANA_1, GetUnitState(caster_0, UNIT_STATE_MANA_1) + 250.)
	else
		if hp_0 > removehp_0 then
			set hp2_0 = removehp_0
		else
			set hp2_0 = hp_0 - 1.
		endif
		call SetUnitState(caster_0, UNIT_STATE_LIFE_1, hp_0 - hp2_0)
		call SetUnitState(caster_0, UNIT_STATE_MANA_1, GetUnitState(caster_0, UNIT_STATE_MANA_1) + 150.)
	endif
	call DestroyEffect(AddSpecialEffectTarget("Effects\\RefreshingSurge.mdl", caster_0, "origin"))
	set caster_0 = null
endfunction

function Trig_Balance_Ring_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0NQ'
endfunction

function InitTrig_Balance_Ring takes nothing returns nothing
	local integer index = 0
	set gg_trg_Balance_Ring_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Balance_Ring_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Balance_Ring_1, Condition(function Trig_Balance_Ring_Conditions))
	call TriggerAddAction(gg_trg_Balance_Ring_1, function Trig_Balance_Ring_Actions)
endfunction

function Trig_Armageddon_Staff_Periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 37)
	local real damage = LoadReal(udg_hash_1, h_0, 38)
	local integer wait = LoadInteger(udg_hash_1, h_0, 39)
	local real angle = LoadReal(udg_hash_1, h_0, 40)
	local group gdamage = LoadGroupHandle(udg_hash_1, h_0, 41)
	local player p = GetOwningPlayer(caster_0)
	local group gdammi = CreateGroup()
	local group g = CreateGroup()
	local real dammiangle
	local real xdammi
	local real ydammi
	local unit Picked
	local unit dammi
	local integer lopa = 1
	local effect ef
	local real anglestep
	if wait_0 > 0 then
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 39, wait_0)
		loop
			exitwhen lopa_0 > $A
			set dammi_0 = LoadUnitHandle(udg_hash_1, h_0, lopa_0)
			set dammiangle_0 = LoadReal(udg_hash_1, h_0, lopa_0 + 20)
			set anglestep_0 = LoadReal(udg_hash_1, h_0, lopa_0 + 50)
			if dammiangle_0 < -45. then
				set anglestep_0 = -anglestep_0
				call SaveReal(udg_hash_1, h_0, lopa_0 + 50, anglestep_0)
			endif
			if dammiangle_0 > 45. then
				set anglestep_0 = -anglestep_0
				call SaveReal(udg_hash_1, h_0, lopa_0 + 50, anglestep_0)
			endif
			set dammiangle_0 = dammiangle_0 + anglestep_0
			set xdammi_0 = GetUnitX(dammi_0) + 16. * Cos((angle_0 + dammiangle_0) * bj_DEGTORAD_1)
			set ydammi_0 = GetUnitY(dammi_0) + 16. * Sin((angle_0 + dammiangle_0) * bj_DEGTORAD_1)
			call SetUnitPosition(dammi_0, xdammi_0, ydammi_0)
			call SetUnitFacing(dammi_0, angle_0 + dammiangle_0)
			call GroupEnumUnitsInRange(gdammi_0, xdammi_0, ydammi_0, 125., null)
			call GroupAddGroup(gdammi_0, g_0)
			call SaveReal(udg_hash_1, h_0, lopa_0 + 20, dammiangle_0)
			set dammi_0 = null
			set lopa_0 = lopa_0 + 1
		endloop
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if IsUnitEnemy(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitInGroup(Picked_0, gdamage_0) == false and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
				set dammi_0 = CreateUnit(p_0, 'h00U', GetUnitX(Picked_0), GetUnitY(Picked_0), .0)
				call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
				call UnitAddAbility(dammi_0, 'A0NE')
				call IssueTargetOrderById(dammi_0, $D02B6, Picked_0)
				set dammi_0 = null
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl", Picked_0, "chest"))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIfb\\AIfbSpecialArt.mdl", Picked_0, "chest"))
				call GroupAddUnit(gdamage_0, Picked_0)
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		set Picked_0 = null
		call SaveGroupHandle(udg_hash_1, h_0, 41, gdamage_0)
	else
		loop
			exitwhen lopa_0 > $A
			set dammi_0 = LoadUnitHandle(udg_hash_1, h_0, lopa_0)
			set ef_0 = LoadEffectHandle(udg_hash_1, h_0, lopa_0 + $A)
			call KillUnit(dammi_0)
			call DestroyEffect(ef_0)
			set lopa_0 = lopa_0 + 1
			set dammi_0 = null
			set ef_0 = null
		endloop
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
		call GroupClear(gdamage_0)
		call DestroyGroup(gdamage_0)
	endif
	set t_0 = null
	set caster_0 = null
	set gdamage_0 = null
	set p_0 = null
	call GroupClear(gdammi_0)
	call DestroyGroup(gdammi_0)
	set gdammi_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set Picked_0 = null
endfunction

function Trig_Armageddon_Staff_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local player p = GetOwningPlayer(caster_0)
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local location loc
	local real xt
	local real yt
	local unit dammi
	local effect ef
	local real xdammi
	local real ydammi
	local integer lopa = 1
	local group gdamage = CreateGroup()
	local real angle
	local integer count = $A
	local real damage = 335. + GetHeroInt(caster_0, true)
	local integer wait = 50
	local real dammidist = -300.
	local real dammiangle
	if GetSpellTargetUnit() == null then
		set loc_0 = GetSpellTargetLoc()
		set xt_0 = GetLocationX(loc_0)
		set yt_0 = GetLocationY(loc_0)
		call RemoveLocation(loc_0)
		set loc_0 = null
	else
		set xt_0 = GetUnitX(GetSpellTargetUnit())
		set yt_0 = GetUnitY(GetSpellTargetUnit())
	endif
	set angle_0 = bj_RADTODEG_1 * Atan2(yt_0 - y_0, xt_0 - x_0)
	loop
		exitwhen lopa_0 > count_0
		set dammiangle_0 = GetRandomReal(-45., 45.)
		set xdammi_0 = x_0 + dammidist_0 * Cos((angle_0 - 90.) * bj_DEGTORAD_1)
		set ydammi_0 = y_0 + dammidist_0 * Sin((angle_0 - 90.) * bj_DEGTORAD_1)
		set dammi_0 = CreateUnit(p_0, 'h00U', xdammi_0, ydammi_0, dammiangle_0)
		call UnitAddAbility(dammi_0, 'Amrf')
		call UnitRemoveAbility(dammi_0, 'Amrf')
		call SetUnitFlyHeight(dammi_0, 50., .0)
		set ef_0 = AddSpecialEffectTarget("Effects\\SunfireMissile.mdl", dammi_0, "chest")
		call SaveUnitHandle(udg_hash_1, h_0, lopa_0, dammi_0)
		call SaveEffectHandle(udg_hash_1, h_0, lopa_0 + $A, ef_0)
		call SaveReal(udg_hash_1, h_0, lopa_0 + 20, dammiangle_0)
		call SaveReal(udg_hash_1, h_0, lopa_0 + 50, 3.6)
		set dammidist_0 = dammidist_0 + 70.
		set lopa_0 = lopa_0 + 1
		set dammi_0 = null
		set ef_0 = null
	endloop
	call SaveUnitHandle(udg_hash_1, h_0, 37, caster_0)
	call SaveReal(udg_hash_1, h_0, 38, damage_0)
	call SaveInteger(udg_hash_1, h_0, 39, wait_0)
	call SaveReal(udg_hash_1, h_0, 40, angle_0)
	call SaveGroupHandle(udg_hash_1, h_0, 41, gdamage_0)
	call TimerStart(t_0, .03, true, function Trig_Armageddon_Staff_Periodic_Actions)
	set caster_0 = null
	set p_0 = null
	set t_0 = null
	set gdamage_0 = null
endfunction

function Trig_Armageddon_Staff_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0NC'
endfunction

function InitTrig_Armageddon_Staff takes nothing returns nothing
	local integer index = 0
	set gg_trg_Armageddon_Staff_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Armageddon_Staff_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Armageddon_Staff_1, Condition(function Trig_Armageddon_Staff_Conditions))
	call TriggerAddAction(gg_trg_Armageddon_Staff_1, function Trig_Armageddon_Staff_Actions)
endfunction

function Trig_Sargeras_Crown_Remove_Bonuses_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit target = LoadUnitHandle(udg_hash_1, h_0, 1)
	local integer bonusstr = LoadInteger(udg_hash_1, h_0, 2)
	local integer bonusagi = LoadInteger(udg_hash_1, h_0, 3)
	local integer bonusint = LoadInteger(udg_hash_1, h_0, 4)
	local effect ef = LoadEffectHandle(udg_hash_1, h_0, 5)
	call SetHeroStr(target_0, GetHeroStr(target_0, false) - bonusstr_0, true)
	call SetHeroAgi(target_0, GetHeroAgi(target_0, false) - bonusagi_0, true)
	call SetHeroInt(target_0, GetHeroInt(target_0, false) - bonusint_0, true)
	call SaveBoolean(udg_hash_1, GetHandleId(target_0), '}', false)
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	call DestroyEffect(ef_0)
	set target_0 = null
	set ef_0 = null
	set t_0 = null
endfunction

function Trig_Sargeras_Crown_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local unit target = GetSpellTargetUnit()
	local integer agi = GetHeroAgi(target_0, true)
	local integer id = GetSpellAbilityId()
	local real bonus = .0
	local real time = .0
	local effect ef
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local integer bonusstr
	local integer bonusagi
	local integer bonusint
	if id_0 == 'A0N2' then
		set bonus_0 = .3
		set time_0 = 7.
	endif
	if id_0 == 'A0N3' then
		set bonus_0 = .5
		set time_0 = 9.
	endif
	if id_0 == 'A0N4' then
		set bonus_0 = .7
		set time_0 = 11.
	endif
	if LoadBoolean(udg_hash_1, GetHandleId(target_0), '}') == false then
		set ef_0 = AddSpecialEffectTarget("Effects\\HolyBlessing.mdl", target_0, "origin")
		call SaveBoolean(udg_hash_1, GetHandleId(target_0), '}', true)
		set bonusstr_0 = R2I(GetHeroStr(target_0, true) * bonus_0)
		set bonusagi_0 = R2I(GetHeroAgi(target_0, true) * bonus_0)
		set bonusint_0 = R2I(GetHeroInt(target_0, true) * bonus_0)
		call SetHeroStr(target_0, GetHeroStr(target_0, false) + bonusstr_0, true)
		call SetHeroAgi(target_0, GetHeroAgi(target_0, false) + bonusagi_0, true)
		call SetHeroInt(target_0, GetHeroInt(target_0, false) + bonusint_0, true)
		call SaveUnitHandle(udg_hash_1, h_0, 1, target_0)
		call SaveInteger(udg_hash_1, h_0, 2, bonusstr_0)
		call SaveInteger(udg_hash_1, h_0, 3, bonusagi_0)
		call SaveInteger(udg_hash_1, h_0, 4, bonusint_0)
		call SaveEffectHandle(udg_hash_1, h_0, 5, ef_0)
		call TimerStart(t_0, time_0, false, function Trig_Sargeras_Crown_Remove_Bonuses_Actions)
		set ef_0 = null
	else
		call SimError(GetOwningPlayer(caster_0), "На этого героя уже наложено Благославление Саргераса.")
	endif
	set caster_0 = null
	set target_0 = null
	set t_0 = null
endfunction

function Trig_Sargeras_Crown_Conditions takes nothing returns boolean
	return (GetSpellAbilityId() == 'A0N2' or GetSpellAbilityId() == 'A0N3' or GetSpellAbilityId() == 'A0N4')
endfunction

function InitTrig_Sargeras_Crown takes nothing returns nothing
	local integer index = 0
	set gg_trg_Sargeras_Crown_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Sargeras_Crown_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Sargeras_Crown_1, Condition(function Trig_Sargeras_Crown_Conditions))
	call TriggerAddAction(gg_trg_Sargeras_Crown_1, function Trig_Sargeras_Crown_Actions)
endfunction

function Trig_Lost_Sargeras_Crown_Actions takes nothing returns nothing
	local unit hero = GetTriggerUnit()
	local integer h = GetHandleId(hero_0)
	local integer id = GetItemTypeId(GetManipulatedItem())
	local integer bonus = 0
	local string smainstat = LoadStr(udg_hash_1, GetUnitTypeId(hero_0), 70)
	if id_0 == 'I008' then
		set bonus_0 = $F
	endif
	if id_0 == 'I009' then
		set bonus_0 = 30
	endif
	if id_0 == 'I00L' then
		set bonus_0 = 45
	endif
	if smainstat_0 == "str" then
		call SetHeroStr(hero_0, GetHeroStr(hero_0, false) - bonus_0, true)
	endif
	if smainstat_0 == "agi" then
		call SetHeroAgi(hero_0, GetHeroAgi(hero_0, false) - bonus_0, true)
	endif
	if smainstat_0 == "int" then
		call SetHeroInt(hero_0, GetHeroInt(hero_0, false) - bonus_0, true)
	endif
	set hero_0 = null
endfunction

function Trig_Lost_Sargeras_Crown_Conditions takes nothing returns boolean
	return ((GetItemTypeId(GetManipulatedItem()) == 'I008' or GetItemTypeId(GetManipulatedItem()) == 'I009' or GetItemTypeId(GetManipulatedItem()) == 'I00L') and IsUnitType(GetManipulatingUnit(), UNIT_TYPE_HERO_1)) != null
endfunction

function InitTrig_Lost_Sargeras_Crown takes nothing returns nothing
	local integer index = 0
	set gg_trg_Lost_Sargeras_Crown_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Lost_Sargeras_Crown_1, Player(index_0), EVENT_PLAYER_UNIT_DROP_ITEM_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Lost_Sargeras_Crown_1, Condition(function Trig_Lost_Sargeras_Crown_Conditions))
	call TriggerAddAction(gg_trg_Lost_Sargeras_Crown_1, function Trig_Lost_Sargeras_Crown_Actions)
endfunction

function Trig_Take_Sargeras_Crown_Actions takes nothing returns nothing
	local unit hero = GetTriggerUnit()
	local integer h = GetHandleId(hero_0)
	local integer id = GetItemTypeId(GetManipulatedItem())
	local integer bonus = 0
	local string smainstat = LoadStr(udg_hash_1, GetUnitTypeId(hero_0), 70)
	if id_0 == 'I008' then
		set bonus_0 = $F
	endif
	if id_0 == 'I009' then
		set bonus_0 = 30
	endif
	if id_0 == 'I00L' then
		set bonus_0 = 45
	endif
	if smainstat_0 == "str" then
		call SetHeroStr(hero_0, GetHeroStr(hero_0, false) + bonus_0, true)
	endif
	if smainstat_0 == "agi" then
		call SetHeroAgi(hero_0, GetHeroAgi(hero_0, false) + bonus_0, true)
	endif
	if smainstat_0 == "int" then
		call SetHeroInt(hero_0, GetHeroInt(hero_0, false) + bonus_0, true)
	endif
	set hero_0 = null
endfunction

function Trig_Take_Sargeras_Crown_Conditions takes nothing returns boolean
	return ((GetItemTypeId(GetManipulatedItem()) == 'I008' or GetItemTypeId(GetManipulatedItem()) == 'I009' or GetItemTypeId(GetManipulatedItem()) == 'I00L') and IsUnitType(GetManipulatingUnit(), UNIT_TYPE_HERO_1)) != null
endfunction

function InitTrig_Take_Sargeras_Crown takes nothing returns nothing
	local integer index = 0
	set gg_trg_Take_Sargeras_Crown_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Take_Sargeras_Crown_1, Player(index_0), EVENT_PLAYER_UNIT_PICKUP_ITEM_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Take_Sargeras_Crown_1, Condition(function Trig_Take_Sargeras_Crown_Conditions))
	call TriggerAddAction(gg_trg_Take_Sargeras_Crown_1, function Trig_Take_Sargeras_Crown_Actions)
endfunction

function Trig_Lost_Archimagus_Armor_Actions takes nothing returns nothing
	local unit hero = GetTriggerUnit()
	local integer h = GetHandleId(hero_0)
	local effect ef = LoadEffectHandle(udg_hash_1, h_0, 'g')
	call DestroyEffect(ef_0)
	call SaveBoolean(udg_hash_1, h_0, 'f', false)
	call SaveEffectHandle(udg_hash_1, h_0, 'g', null)
	set hero_0 = null
	set ef_0 = null
endfunction

function Trig_Lost_Archimagus_Armor_Conditions takes nothing returns boolean
	return GetItemTypeId(GetManipulatedItem()) == 'I05A' and CountItemOfTypeOnUnit(GetTriggerUnit(), 'I05A') == 1
endfunction

function InitTrig_Lost_Archimagus_Armor takes nothing returns nothing
	local integer index = 0
	set gg_trg_Lost_Archimagus_Armor_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Lost_Archimagus_Armor_1, Player(index_0), EVENT_PLAYER_UNIT_DROP_ITEM_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Lost_Archimagus_Armor_1, Condition(function Trig_Lost_Archimagus_Armor_Conditions))
	call TriggerAddAction(gg_trg_Lost_Archimagus_Armor_1, function Trig_Lost_Archimagus_Armor_Actions)
endfunction

function Trig_Take_Archimagus_Armor_Actions takes nothing returns nothing
	local unit hero = GetTriggerUnit()
	local integer h = GetHandleId(hero_0)
	local effect ef
	if LoadReal(udg_hash_1, h_0, 'h') < 1. then
		set ef_0 = AddSpecialEffectTarget("Effects\\MagicShieldBlue.mdx", hero_0, "origin")
		call SaveBoolean(udg_hash_1, h_0, 'f', true)
		call SaveEffectHandle(udg_hash_1, h_0, 'g', ef_0)
		if LoadBoolean(udg_hash_1, h_0, 'j') == false then
			call SaveReal(udg_hash_1, GetHandleId(hero_0), 'i', (500. + (GetHeroInt(hero_0, true) * 3.)))
		endif
	endif
	set hero_0 = null
	set ef_0 = null
endfunction

function Trig_Take_Archimagus_Armor_Conditions takes nothing returns boolean
	return GetItemTypeId(GetManipulatedItem()) == 'I05A' and CountItemOfTypeOnUnit(GetTriggerUnit(), 'I05A') == 1
endfunction

function InitTrig_Take_Archimagus_Armor takes nothing returns nothing
	local integer index = 0
	set gg_trg_Take_Archimagus_Armor_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Take_Archimagus_Armor_1, Player(index_0), EVENT_PLAYER_UNIT_PICKUP_ITEM_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Take_Archimagus_Armor_1, Condition(function Trig_Take_Archimagus_Armor_Conditions))
	call TriggerAddAction(gg_trg_Take_Archimagus_Armor_1, function Trig_Take_Archimagus_Armor_Actions)
endfunction

function Trig_Sorcerers_Talisman_Cast_Actions takes nothing returns nothing
	set udg_Temp_Unit_1 = GetSpellTargetUnit()
endfunction

function Trig_Sorcerers_Talisman_Cast_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0LW' or GetSpellAbilityId() == 'A0LZ' or GetSpellAbilityId() == 'A0M0' or GetSpellAbilityId() == 'A0M1'
endfunction

function InitTrig_Sorcerers_Talisman_Cast takes nothing returns nothing
	local integer index = 0
	set gg_trg_Sorcerers_Talisman_Cast_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Sorcerers_Talisman_Cast_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Sorcerers_Talisman_Cast_1, Condition(function Trig_Sorcerers_Talisman_Cast_Conditions))
	call TriggerAddAction(gg_trg_Sorcerers_Talisman_Cast_1, function Trig_Sorcerers_Talisman_Cast_Actions)
endfunction

function Trig_Sorcerers_Talisman_Periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local unit target = LoadUnitHandle(udg_hash_1, h_0, 2)
	local effect ef
	local boolean ally = LoadBoolean(udg_hash_1, h_0, 4)
	local real heal = LoadReal(udg_hash_1, h_0, 5)
	local real damage = LoadReal(udg_hash_1, h_0, 6)
	local integer wait = LoadInteger(udg_hash_1, h_0, 7)
	if wait_0 > 0 then
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 7, wait_0)
		if ally_0 and GetUnitState(target_0, UNIT_STATE_LIFE_1) > .405 then
			call SetUnitState(target_0, UNIT_STATE_LIFE_1, GetUnitState(target_0, UNIT_STATE_LIFE_1) + heal_0)
		else
			if IsUnitType(target_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false then
				call UnitDamageTarget(caster_0, target_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
			endif
		endif
	else
		call DestroyTimer(t_0)
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 3)
		call DestroyEffect(ef_0)
		call FlushChildHashtable(udg_hash_1, h_0)
	endif
	set t_0 = null
	set caster_0 = null
	set target_0 = null
endfunction

function Trig_Sorcerers_Talisman_Actions takes nothing returns nothing
	local unit caster = GetManipulatingUnit()
	local unit target = udg_Temp_Unit_1
	local player p = GetOwningPlayer(caster_0)
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local integer lvl
	local item it = GetManipulatedItem()
	local integer charges = GetItemCharges(it_0)
	local integer id = GetItemTypeId(it_0)
	local effect ef
	local boolean ally
	local real heal
	local real damage
	local integer wait
	if charges_0 != 0 then
		call SetItemCharges(it_0, charges_0 + 1)
	endif
	if charges_0 == 0 then
		call SetItemCharges(it_0, 1)
	endif
	if GetItemCharges(it_0) <= 7 then
		call SimError(p_0, "Для Применения необходимо минимум 8 душ.")
	else
		if id_0 == 'I055' then
			set lvl_0 = 1
		endif
		if id_0 == 'I056' then
			set lvl_0 = 2
		endif
		if id_0 == 'I057' then
			set lvl_0 = 3
		endif
		if id_0 == 'I058' then
			set lvl_0 = 4
		endif
		set wait_0 = 8 - lvl_0
		set heal_0 = (125. + (75. * lvl_0)) / wait_0
		set damage_0 = (200. + (100. * lvl_0)) / wait_0
		call SetItemCharges(it_0, GetItemCharges(it_0) - 8)
		if IsUnitEnemy(target_0, p_0) and IsUnitType(target_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(target_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false then
			set ef_0 = AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Voodoo\\VoodooAuraTarget.mdl", target_0, "overhead")
			set ally_0 = false
		endif
		if IsUnitAlly(target_0, p_0) and IsUnitType(target_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(target_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false then
			set ef_0 = AddSpecialEffectTarget("Abilities\\Spells\\Items\\StaffOfSanctuary\\Staff_Sanctuary_Target.mdl", target_0, "chest")
			set ally_0 = true
		endif
		call DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\EtherealForm\\SpiritWalkerChange.mdl", caster_0, "origin"), 2.5)
		call DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\EtherealForm\\SpiritWalkerChange.mdl", target_0, "origin"), 3.)
		call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
		call SaveUnitHandle(udg_hash_1, h_0, 2, target_0)
		call SaveEffectHandle(udg_hash_1, h_0, 3, ef_0)
		call SaveBoolean(udg_hash_1, h_0, 4, ally_0)
		call SaveReal(udg_hash_1, h_0, 5, heal_0)
		call SaveReal(udg_hash_1, h_0, 6, damage_0)
		call SaveInteger(udg_hash_1, h_0, 7, wait_0)
		call TimerStart(t_0, 1., true, function Trig_Sorcerers_Talisman_Periodic_Actions)
	endif
	set caster_0 = null
	set target_0 = null
	set p_0 = null
	set t_0 = null
	set it_0 = null
	set ef_0 = null
endfunction

function Trig_Sorcerers_Talisman_Conditions takes nothing returns boolean
	return GetItemTypeId(GetManipulatedItem()) == 'I055' or GetItemTypeId(GetManipulatedItem()) == 'I056' or GetItemTypeId(GetManipulatedItem()) == 'I057' or GetItemTypeId(GetManipulatedItem()) == 'I058'
endfunction

function InitTrig_Sorcerers_Talisman takes nothing returns nothing
	local integer index = 0
	set gg_trg_Sorcerers_Talisman_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Sorcerers_Talisman_1, Player(index_0), EVENT_PLAYER_UNIT_USE_ITEM_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Sorcerers_Talisman_1, Condition(function Trig_Sorcerers_Talisman_Conditions))
	call TriggerAddAction(gg_trg_Sorcerers_Talisman_1, function Trig_Sorcerers_Talisman_Actions)
endfunction

function Trig_Sorcerers_Talisman_Dead_Unit_Condition_Actions takes nothing returns boolean
	return GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE_1) > .405 and GetUnitTypeId(GetFilterUnit()) != 'h00U' and IsUnitEnemy(udg_Temp_Unit_1, GetOwningPlayer(GetFilterUnit())) and (CountItemOfTypeOnUnit(GetFilterUnit(), 'I055') >= 1 or CountItemOfTypeOnUnit(GetFilterUnit(), 'I056') >= 1 or CountItemOfTypeOnUnit(GetFilterUnit(), 'I057') >= 1 or CountItemOfTypeOnUnit(GetFilterUnit(), 'I058') >= 1)
endfunction

function Trig_Sorcerers_Talisman_Dead_Unit_Actions takes nothing returns nothing
	local unit enemy = GetDyingUnit()
	local real x = GetUnitX(enemy_0)
	local real y = GetUnitY(enemy_0)
	local group g = CreateGroup()
	local unit dammi = CreateUnit(GetOwningPlayer(enemy_0), 'h00U', x_0, y_0, .0)
	local item talisman
	local integer lop = 1
	call UnitApplyTimedLife(dammi_0, 'BTLF', 2.)
	set udg_Temp_Unit_1 = enemy_0
	call GroupEnumUnitsInRange(g_0, x_0, y_0, 1200., Filter(function Trig_Sorcerers_Talisman_Dead_Unit_Condition_Actions))
	call FilterMostNearUnit(g_0, dammi_0)
	if udg_Unit_FilterMostNearUnit_1 != null and SquareRoot(((GetUnitX(udg_Unit_FilterMostNearUnit_1) - x_0) * (GetUnitX(udg_Unit_FilterMostNearUnit_1) - x_0)) + ((GetUnitY(udg_Unit_FilterMostNearUnit_1) - y_0) * (GetUnitY(udg_Unit_FilterMostNearUnit_1) - y_0))) <= 1200. then
		set talisman_0 = UnitItemInSlot(udg_Unit_FilterMostNearUnit_1, 0)
		loop
			exitwhen lop_0 > 5
			if ((GetItemTypeId(talisman_0) == 'I055' and GetItemCharges(talisman_0) < 24) or (GetItemTypeId(talisman_0) == 'I056' and GetItemCharges(talisman_0) < 32) or (GetItemTypeId(talisman_0) == 'I057' and GetItemCharges(talisman_0) < 40) or (GetItemTypeId(talisman_0) == 'I058' and GetItemCharges(talisman_0) < 48)) then
				call SetItemCharges(talisman_0, GetItemCharges(talisman_0) + 1)
				set lop_0 = 6
			else
				set talisman_0 = UnitItemInSlot(udg_Unit_FilterMostNearUnit_1, lop_0)
			endif
			set lop_0 = lop_0 + 1
		endloop
	endif
	set enemy_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set talisman_0 = null
endfunction

function Trig_Sorcerers_Talisman_Dead_Unit_Condition takes nothing returns boolean
	return GetUnitTypeId(GetDyingUnit()) != 'h00U'
endfunction

function InitTrig_Sorcerers_Talisman_Dead_Unit takes nothing returns nothing
	local integer index = 0
	set gg_trg_Sorcerers_Talisman_Dead_Unit_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Sorcerers_Talisman_Dead_Unit_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Sorcerers_Talisman_Dead_Unit_1, Condition(function Trig_Sorcerers_Talisman_Dead_Unit_Condition))
	call TriggerAddAction(gg_trg_Sorcerers_Talisman_Dead_Unit_1, function Trig_Sorcerers_Talisman_Dead_Unit_Actions)
endfunction

function Trig_Orc_Banner_Periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit hero = LoadUnitHandle(udg_hash_1, h_0, 1)
	local group gmain = LoadGroupHandle(udg_hash_1, h_0, 2)
	local integer bonushp = LoadInteger(udg_hash_1, h_0, 3)
	local integer bonusa = LoadInteger(udg_hash_1, h_0, 4)
	local integer bonusstat = LoadInteger(udg_hash_1, h_0, 5)
	local integer lvl = LoadInteger(udg_hash_1, h_0, 6)
	local item it = LoadItemHandle(udg_hash_1, h_0, 7)
	local group g = CreateGroup()
	local group g2 = CreateGroup()
	local player p = GetOwningPlayer(hero_0)
	local unit Picked
	local string s
	local real x = GetUnitX(hero_0)
	local real y = GetUnitY(hero_0)
	local boolean dest = false
	local boolean tdest = false
	if UnitHasItem(hero_0, it_0) then
		if GetItemTypeId(it_0) == 'I052' and LoadInteger(udg_hash_1, GetHandleId(hero_0), 'e') == 2 then
			set dest_0 = true
		endif
		if dest_0 == false then
			call GroupEnumUnitsInRange(g_0, GetUnitX(hero_0), GetUnitY(hero_0), 800., null)
			loop
				set Picked_0 = FirstOfGroup(g_0)
				exitwhen Picked_0 == null
				if IsUnitAlly(Picked_0, p_0) and IsUnitInGroup(Picked_0, gmain_0) == false and (LoadInteger(udg_hash_1, GetHandleId(Picked_0), 'e') == 0 or (LoadInteger(udg_hash_1, GetHandleId(Picked_0), 'e') == 1 and lvl_0 == 2)) and IsUnitType(Picked_0, UNIT_TYPE_HERO_1) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
					call SetAttackAbilityLevel(Picked_0, bonusa_0)
					call SetUnitMaxState(Picked_0, UNIT_STATE_MAX_LIFE_1, bonushp_0)
					set s_0 = LoadStr(udg_hash_1, GetUnitTypeId(Picked_0), 70)
					if s_0 == "str" then
						call SetHeroStr(Picked_0, GetHeroStr(Picked_0, false) + bonusstat_0, true)
					endif
					if s_0 == "agi" then
						call SetHeroAgi(Picked_0, GetHeroAgi(Picked_0, false) + bonusstat_0, true)
					endif
					if s_0 == "int" then
						call SetHeroInt(Picked_0, GetHeroInt(Picked_0, false) + bonusstat_0, true)
					endif
					call SaveInteger(udg_hash_1, GetHandleId(Picked_0), 'e', lvl_0)
					call GroupAddUnit(gmain_0, Picked_0)
				endif
				call GroupRemoveUnit(g_0, Picked_0)
			endloop
			set Picked_0 = null
			call GroupAddGroup(gmain_0, g2_0)
			loop
				set Picked_0 = FirstOfGroup(g2_0)
				exitwhen Picked_0 == null
				if SquareRoot((x_0 - GetUnitX(Picked_0)) * (x_0 - GetUnitX(Picked_0)) + (y_0 - GetUnitY(Picked_0)) * (y_0 - GetUnitY(Picked_0))) > 800. then
					call SetAttackAbilityLevel(Picked_0, -bonusa_0)
					call SetUnitMaxState(Picked_0, UNIT_STATE_MAX_LIFE_1, -bonushp_0)
					set s_0 = LoadStr(udg_hash_1, GetUnitTypeId(Picked_0), 70)
					if s_0 == "str" then
						call SetHeroStr(Picked_0, GetHeroStr(Picked_0, false) - bonusstat_0, true)
					endif
					if s_0 == "agi" then
						call SetHeroAgi(Picked_0, GetHeroAgi(Picked_0, false) - bonusstat_0, true)
					endif
					if s_0 == "int" then
						call SetHeroInt(Picked_0, GetHeroInt(Picked_0, false) - bonusstat_0, true)
					endif
					if LoadInteger(udg_hash_1, GetHandleId(Picked_0), 'e') == lvl_0 then
						call SaveInteger(udg_hash_1, GetHandleId(Picked_0), 'e', 0)
					endif
					call GroupRemoveUnit(gmain_0, Picked_0)
				endif
				call GroupRemoveUnit(g2_0, Picked_0)
			endloop
			set Picked_0 = null
		endif
		call SaveGroupHandle(udg_hash_1, h_0, 2, gmain_0)
	else
		set dest_0 = true
	endif
	if dest_0 then
		loop
			set Picked_0 = FirstOfGroup(gmain_0)
			exitwhen Picked_0 == null
			call SetAttackAbilityLevel(Picked_0, -bonusa_0)
			call SetUnitMaxState(Picked_0, UNIT_STATE_MAX_LIFE_1, -bonushp_0)
			set s_0 = LoadStr(udg_hash_1, GetUnitTypeId(Picked_0), 70)
			if s_0 == "str" then
				call SetHeroStr(Picked_0, GetHeroStr(Picked_0, false) - bonusstat_0, true)
			endif
			if s_0 == "agi" then
				call SetHeroAgi(Picked_0, GetHeroAgi(Picked_0, false) - bonusstat_0, true)
			endif
			if s_0 == "int" then
				call SetHeroInt(Picked_0, GetHeroInt(Picked_0, false) - bonusstat_0, true)
			endif
			if LoadInteger(udg_hash_1, GetHandleId(Picked_0), 'e') == lvl_0 then
				call SaveInteger(udg_hash_1, GetHandleId(Picked_0), 'e', 0)
			endif
			call GroupRemoveUnit(gmain_0, Picked_0)
		endloop
	endif
	if UnitHasItem(hero_0, it_0) == false then
		call GroupClear(gmain_0)
		call DestroyGroup(gmain_0)
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	else
		call SaveGroupHandle(udg_hash_1, h_0, 2, gmain_0)
	endif
	set t_0 = null
	set hero_0 = null
	set gmain_0 = null
	set it_0 = null
	set p_0 = null
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	call GroupClear(g2_0)
	call DestroyGroup(g2_0)
	set g2_0 = null
endfunction

function Trig_Orc_Banner_Actions takes nothing returns nothing
	local unit hero = GetTriggerUnit()
	local group g = CreateGroup()
	local group gmain = CreateGroup()
	local player p = GetOwningPlayer(hero_0)
	local unit Picked
	local integer bonushp
	local integer bonusa
	local integer bonusstat
	local integer lvl
	local item it = GetManipulatedItem()
	local string s
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	if GetItemTypeId(it_0) == 'I052' then
		set bonushp_0 = $AF
		set bonusa_0 = 20
		set bonusstat_0 = 7
		set lvl_0 = 1
	else
		set bonushp_0 = $FA
		set bonusa_0 = 30
		set bonusstat_0 = $A
		set lvl_0 = 2
	endif
	call GroupEnumUnitsInRange(g_0, GetUnitX(hero_0), GetUnitY(hero_0), 800., null)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if IsUnitAlly(Picked_0, p_0) and (LoadInteger(udg_hash_1, GetHandleId(Picked_0), 'e') == 0 or (LoadInteger(udg_hash_1, GetHandleId(Picked_0), 'e') == 1 and lvl_0 == 2)) and IsUnitType(Picked_0, UNIT_TYPE_HERO_1) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
			call SetAttackAbilityLevel(Picked_0, bonusa_0)
			call SetUnitMaxState(Picked_0, UNIT_STATE_MAX_LIFE_1, bonushp_0)
			set s_0 = LoadStr(udg_hash_1, GetUnitTypeId(Picked_0), 70)
			if s_0 == "str" then
				call SetHeroStr(Picked_0, GetHeroStr(Picked_0, false) + bonusstat_0, true)
			endif
			if s_0 == "agi" then
				call SetHeroAgi(Picked_0, GetHeroAgi(Picked_0, false) + bonusstat_0, true)
			endif
			if s_0 == "int" then
				call SetHeroInt(Picked_0, GetHeroInt(Picked_0, false) + bonusstat_0, true)
			endif
			call SaveInteger(udg_hash_1, GetHandleId(Picked_0), 'e', lvl_0)
			call GroupAddUnit(gmain_0, Picked_0)
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	call SaveUnitHandle(udg_hash_1, h_0, 1, hero_0)
	call SaveGroupHandle(udg_hash_1, h_0, 2, gmain_0)
	call SaveInteger(udg_hash_1, h_0, 3, bonushp_0)
	call SaveInteger(udg_hash_1, h_0, 4, bonusa_0)
	call SaveInteger(udg_hash_1, h_0, 5, bonusstat_0)
	call SaveInteger(udg_hash_1, h_0, 6, lvl_0)
	call SaveItemHandle(udg_hash_1, h_0, 7, it_0)
	call TimerStart(t_0, .3, true, function Trig_Orc_Banner_Periodic_Actions)
	set hero_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set gmain_0 = null
	set p_0 = null
	set Picked_0 = null
	set it_0 = null
	set t_0 = null
endfunction

function Trig_Orc_Banner_Conditions takes nothing returns boolean
	return (GetItemTypeId(GetManipulatedItem()) == 'I052' or (GetItemTypeId(GetManipulatedItem()) == 'I053'))
endfunction

function InitTrig_Orc_Banner takes nothing returns nothing
	local integer index = 0
	set gg_trg_Orc_Banner_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Orc_Banner_1, Player(index_0), EVENT_PLAYER_UNIT_PICKUP_ITEM_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Orc_Banner_1, Condition(function Trig_Orc_Banner_Conditions))
	call TriggerAddAction(gg_trg_Orc_Banner_1, function Trig_Orc_Banner_Actions)
endfunction

function Trig_Devil_Axe_Remove_Stregnth_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local integer strenght = LoadInteger(udg_hash_1, GetHandleId(caster_0), 'd')
	local effect ef
	call SetHeroStr(caster_0, GetHeroStr(caster_0, false) - strenght_0, true)
	set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 2)
	call DestroyEffect(ef_0)
	set ef_0 = null
	set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 3)
	call DestroyEffect(ef_0)
	set ef_0 = null
	call SaveBoolean(udg_hash_1, GetHandleId(caster_0), 99, false)
	call SaveInteger(udg_hash_1, GetHandleId(caster_0), 'd', 0)
	call DestroyTimer(t_0)
	call FlushChildHashtable(udg_hash_1, h_0)
	set t_0 = null
	set caster_0 = null
endfunction

function Trig_Devil_Axe_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local unit dammi = CreateUnit(GetOwningPlayer(caster_0), 'h00U', GetUnitX(caster_0), GetUnitY(caster_0), .0)
	local effect ef
	call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
	call UnitAddAbility(dammi_0, 'A0LT')
	call IssueTargetOrderById(dammi_0, $D00F1, caster_0)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	set ef_0 = AddSpecialEffectTarget("Effects\\EvilMissileofShadowyDOOMV2.mdx", caster_0, "weapon")
	call SaveEffectHandle(udg_hash_1, h_0, 2, ef_0)
	set ef_0 = null
	set ef_0 = AddSpecialEffectTarget("Effects\\BloodCloudTarget.mdx", caster_0, "overhead")
	call SaveEffectHandle(udg_hash_1, h_0, 3, ef_0)
	set ef_0 = null
	call SaveBoolean(udg_hash_1, GetHandleId(caster_0), 99, true)
	call TimerStart(t_0, 30., false, function Trig_Devil_Axe_Remove_Stregnth_Actions)
	set caster_0 = null
	set t_0 = null
	set dammi_0 = null
endfunction

function Trig_Devil_Axe_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0LS'
endfunction

function InitTrig_Devil_Axe takes nothing returns nothing
	local integer index = 0
	set gg_trg_Devil_Axe_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Devil_Axe_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Devil_Axe_1, Condition(function Trig_Devil_Axe_Conditions))
	call TriggerAddAction(gg_trg_Devil_Axe_1, function Trig_Devil_Axe_Actions)
endfunction

function Trig_Devil_Axe_Kill_Unit_Actions takes nothing returns nothing
	call SetHeroStr(GetKillingUnit(), GetHeroStr(GetKillingUnit(), false) + 3, true)
	call SetUnitState(GetKillingUnit(), UNIT_STATE_LIFE_1, GetUnitState(GetKillingUnit(), UNIT_STATE_LIFE_1) + (GetUnitState(GetDyingUnit(), UNIT_STATE_MAX_LIFE_1) * .15))
	call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPeasant.mdl", GetUnitX(GetDyingUnit()), GetUnitY(GetDyingUnit())))
	call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodSorceress.mdl", GetUnitX(GetDyingUnit()), GetUnitY(GetDyingUnit())))
	call DestroyEffectWithWait(AddSpecialEffectTarget("Effects\\BloodBreathDamage.mdx", GetKillingUnit(), "origin"), 2.)
	call SaveInteger(udg_hash_1, GetHandleId(GetKillingUnit()), 'd', LoadInteger(udg_hash_1, GetHandleId(GetKillingUnit()), 'd') + 3)
endfunction

function Trig_Devil_Axe_Kill_Unit_Conditions takes nothing returns boolean
	return LoadBoolean(udg_hash_1, GetHandleId(GetKillingUnit()), 99)
endfunction

function InitTrig_Devil_Axe_Kill_Unit takes nothing returns nothing
	local integer index = 0
	set gg_trg_Devil_Axe_Kill_Unit_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Devil_Axe_Kill_Unit_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Devil_Axe_Kill_Unit_1, Condition(function Trig_Devil_Axe_Kill_Unit_Conditions))
	call TriggerAddAction(gg_trg_Devil_Axe_Kill_Unit_1, function Trig_Devil_Axe_Kill_Unit_Actions)
endfunction

function Trig_Tokugawas_Katan_Kill_Unit_Actions takes nothing returns nothing
	call SetHeroAgi(GetKillingUnit(), GetHeroAgi(GetKillingUnit(), false) + 1, true)
endfunction

function Trig_Tokugawas_Katan_Kill_Unit_Conditions takes nothing returns boolean
	return LoadBoolean(udg_hash_1, GetHandleId(GetKillingUnit()), 98) and GetRandomInt(1, 'd') <= 20
endfunction

function InitTrig_Tokugawas_Katan_Kill_Unit takes nothing returns nothing
	local integer index = 0
	set gg_trg_Tokugawas_Katan_Kill_Unit_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Tokugawas_Katan_Kill_Unit_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Tokugawas_Katan_Kill_Unit_1, Condition(function Trig_Tokugawas_Katan_Kill_Unit_Conditions))
	call TriggerAddAction(gg_trg_Tokugawas_Katan_Kill_Unit_1, function Trig_Tokugawas_Katan_Kill_Unit_Actions)
endfunction

function Trig_Tokugawas_Katan_Remove_Agi_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local integer bonus = LoadInteger(udg_hash_1, h_0, 2)
	local effect ef = LoadEffectHandle(udg_hash_1, h_0, 3)
	local effect ef2 = LoadEffectHandle(udg_hash_1, h_0, 4)
	local integer clearagi = GetHeroAgi(caster_0, false)
	call SetHeroAgi(caster_0, clearagi_0 - bonus_0, true)
	call SaveBoolean(udg_hash_1, GetHandleId(caster_0), 98, false)
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	call DestroyEffect(ef_0)
	call DestroyEffect(ef2_0)
	set caster_0 = null
	set ef_0 = null
	set ef2_0 = null
	set t_0 = null
endfunction

function Trig_Tokugawas_Katan_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local integer agi = GetHeroAgi(caster_0, true)
	local integer clearagi = GetHeroAgi(caster_0, false)
	local integer bonus = R2I(agi_0 * .7)
	local effect ef = AddSpecialEffectTarget("Abilities\\Spells\\Other\\AcidBomb\\BottleImpact.mdl", caster_0, "weapon")
	local effect ef2 = AddSpecialEffectTarget("Abilities\\Spells\\Other\\Drain\\DrainCaster.mdl", caster_0, "head")
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	call SetHeroAgi(caster_0, clearagi_0 + bonus_0, true)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveInteger(udg_hash_1, h_0, 2, bonus_0)
	call SaveEffectHandle(udg_hash_1, h_0, 3, ef_0)
	call SaveEffectHandle(udg_hash_1, h_0, 4, ef2_0)
	call SaveBoolean(udg_hash_1, GetHandleId(caster_0), 98, true)
	call TimerStart(t_0, 8., false, function Trig_Tokugawas_Katan_Remove_Agi_Actions)
	set caster_0 = null
	set ef_0 = null
	set ef2_0 = null
	set t_0 = null
endfunction

function Trig_Tokugawas_Katan_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0LO'
endfunction

function InitTrig_Tokugawas_Katan takes nothing returns nothing
	local integer index = 0
	set gg_trg_Tokugawas_Katan_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Tokugawas_Katan_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Tokugawas_Katan_1, Condition(function Trig_Tokugawas_Katan_Conditions))
	call TriggerAddAction(gg_trg_Tokugawas_Katan_1, function Trig_Tokugawas_Katan_Actions)
endfunction

function Trig_Kings_Armor_Remove_Buffs_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local group g = LoadGroupHandle(udg_hash_1, h_0, 2)
	local integer count = LoadInteger(udg_hash_1, h_0, 3)
	local effect ef
	local unit Picked
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		call SetArmorAbilityLevel(Picked_0, -$F)
		call SetAttackSpeedAbilityLevel(Picked_0, -(20 + LoadInteger(udg_hash_1, GetHandleId(Picked_0), 97)))
		call SetUnitLifeAndManaRegeneration(Picked_0, "life", -25)
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, count_0)
		call DestroyEffect(ef_0)
		set ef_0 = null
		set count_0 = count_0 - 1
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set t_0 = null
	set caster_0 = null
endfunction

function Trig_Kings_Armor_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local player p = GetOwningPlayer(caster_0)
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local integer armor = $F
	local integer hpregen = 25
	local integer as = 20
	local integer asbonus
	local group g = CreateGroup()
	local group g2 = CreateGroup()
	local unit Picked
	local effect ef
	local unit dammi
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local integer count = $A
	call DestroyEffect(AddSpecialEffectTarget("Effects\\BattleCryCaster.mdl", caster_0, "origin"))
	call GroupEnumUnitsInRange(g_0, x_0, y_0, 750., null)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if IsUnitAlly(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
			set dammi_0 = CreateUnit(p_0, 'h00U', x_0, y_0, .0)
			call UnitApplyTimedLife(dammi_0, 'BTLF', 2.)
			call UnitAddAbility(dammi_0, 'A0LD')
			call IssueTargetOrderById(dammi_0, $D0062, Picked_0)
			set dammi_0 = null
			call SetArmorAbilityLevel(Picked_0, armor_0)
			set asbonus_0 = R2I((R2I((1. - GetUnitState(Picked_0, UNIT_STATE_LIFE_1) / GetUnitState(Picked_0, UNIT_STATE_MAX_LIFE_1)) / .1) * 8))
			call SetAttackSpeedAbilityLevel(Picked_0, as_0 + asbonus_0)
			call SetUnitLifeAndManaRegeneration(Picked_0, "life", hpregen_0)
			set count_0 = count_0 + 1
			set ef_0 = AddSpecialEffectTarget("Abilities\\Spells\\Human\\InnerFire\\InnerFireTarget.mdl", Picked_0, "overhead")
			call SaveEffectHandle(udg_hash_1, h_0, count_0, ef_0)
			set ef_0 = null
			call SaveInteger(udg_hash_1, GetHandleId(Picked_0), 97, asbonus_0)
			call GroupAddUnit(g2_0, Picked_0)
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveGroupHandle(udg_hash_1, h_0, 2, g2_0)
	call SaveInteger(udg_hash_1, h_0, 3, count_0)
	call TimerStart(t_0, 10., false, function Trig_Kings_Armor_Remove_Buffs_Actions)
	set caster_0 = null
	set p_0 = null
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set g2_0 = null
	set t_0 = null
endfunction

function Trig_Kings_Armor_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0LC'
endfunction

function InitTrig_Kings_Armor takes nothing returns nothing
	local integer index = 0
	set gg_trg_Kings_Armor_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Kings_Armor_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Kings_Armor_1, Condition(function Trig_Kings_Armor_Conditions))
	call TriggerAddAction(gg_trg_Kings_Armor_1, function Trig_Kings_Armor_Actions)
endfunction

function Trig_Steel_Bib_Remove_Buffs_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Defend\\DefendCaster.mdl", caster_0, "origin"))
	call SetArmorAbilityLevel(caster_0, -20)
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
	set caster_0 = null
endfunction

function Trig_Steel_Bib_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local unit dammi = CreateUnit(GetOwningPlayer(caster_0), 'h00U', x_0, y_0, .0)
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
	call UnitAddAbility(dammi_0, 'A0L5')
	call IssueTargetOrderById(dammi_0, $D006B, caster_0)
	call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Defend\\DefendCaster.mdl", caster_0, "origin"))
	call SetArmorAbilityLevel(caster_0, 20)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call TimerStart(t_0, 7., false, function Trig_Steel_Bib_Remove_Buffs_Actions)
	set caster_0 = null
	set dammi_0 = null
	set t_0 = null
endfunction

function Trig_Steel_Bib_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0L4'
endfunction

function InitTrig_Steel_Bib takes nothing returns nothing
	local integer index = 0
	set gg_trg_Steel_Bib_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Steel_Bib_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Steel_Bib_1, Condition(function Trig_Steel_Bib_Conditions))
	call TriggerAddAction(gg_trg_Steel_Bib_1, function Trig_Steel_Bib_Actions)
endfunction

function Trig_Archimagus_Staff_Periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 20)
	local real damage = LoadReal(udg_hash_1, h_0, 21)
	local integer wait = LoadInteger(udg_hash_1, h_0, 22)
	local real angle = LoadReal(udg_hash_1, h_0, 23)
	local group gdamage = LoadGroupHandle(udg_hash_1, h_0, 24)
	local real dammiangle = LoadReal(udg_hash_1, h_0, 25)
	local real dist = LoadReal(udg_hash_1, h_0, 27)
	local real xt = LoadReal(udg_hash_1, h_0, 28)
	local real yt = LoadReal(udg_hash_1, h_0, 29)
	local player p = GetOwningPlayer(caster_0)
	local group gdammi = CreateGroup()
	local group g = CreateGroup()
	local real xdammi
	local real ydammi
	local unit Picked
	local unit dammi
	local integer lopa = 1
	local effect ef
	if wait_0 > 0 then
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 22, wait_0)
		set dammiangle_0 = dammiangle_0 + 7.2
		set dist_0 = dist_0 - 5.5
		call SaveReal(udg_hash_1, h_0, 25, dammiangle_0)
		call SaveReal(udg_hash_1, h_0, 27, dist_0)
		loop
			exitwhen lopa_0 > 5
			set dammi_0 = LoadUnitHandle(udg_hash_1, h_0, lopa_0)
			set xdammi_0 = xt_0 + dist_0 * Cos((dammiangle_0 + (72. * (lopa_0 - 1))) * bj_DEGTORAD_1)
			set ydammi_0 = yt_0 + dist_0 * Sin((dammiangle_0 + (72. * (lopa_0 - 1))) * bj_DEGTORAD_1)
			call SetUnitPosition(dammi_0, xdammi_0, ydammi_0)
			call SetUnitFacing(dammi_0, dammiangle_0 + (72. * (lopa_0 - 1)))
			call GroupEnumUnitsInRange(gdammi_0, xdammi_0, ydammi_0, 100., null)
			call GroupAddGroup(gdammi_0, g_0)
			set lopa_0 = lopa_0 + 1
			set dammi_0 = null
			set ef_0 = null
		endloop
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if IsUnitAlly(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitInGroup(Picked_0, gdamage_0) == false and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call SetUnitState(Picked_0, UNIT_STATE_MANA_1, GetUnitState(Picked_0, UNIT_STATE_MANA_1) + 125.)
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\ReplenishManaCaster.mdl", Picked_0, "origin"))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIma\\AImaTarget.mdl", Picked_0, "origin"))
				call GroupAddUnit(gdamage_0, Picked_0)
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		set Picked_0 = null
		call SaveGroupHandle(udg_hash_1, h_0, 24, gdamage_0)
	else
		loop
			exitwhen lopa_0 > 5
			set dammi_0 = LoadUnitHandle(udg_hash_1, h_0, lopa_0)
			set ef_0 = LoadEffectHandle(udg_hash_1, h_0, lopa_0 + 5)
			call KillUnit(dammi_0)
			call DestroyEffect(ef_0)
			set lopa_0 = lopa_0 + 1
			set dammi_0 = null
			set ef_0 = null
		endloop
		call GroupEnumUnitsInRange(g_0, xt_0, yt_0, 275., null)
		set dammi_0 = CreateUnit(p_0, 'h00U', xt_0, yt_0, .0)
		call SetUnitScale(dammi_0, 4., 4., 1.)
		call DestroyEffect(AddSpecialEffectTarget("Effects\\Fireworksblue.mdl", dammi_0, "chest"))
		call DestroyEffect(AddSpecialEffectTarget("Effects\\Fireworksblue.mdl", dammi_0, "chest"))
		set dammi_0 = null
		call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NEDeathMedium\\NEDeath.mdl", xt_0, yt_0))
		call DestroyEffect(AddSpecialEffect("Effects\\MagicStomp.mdl", xt_0, yt_0))
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if IsUnitEnemy(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
				call DestroyEffect(AddSpecialEffectTarget("Effects\\Fireworksblue.mdl", Picked_0, "chest"))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl", Picked_0, "origin"))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl", Picked_0, "chest"))
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		set Picked_0 = null
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
		call GroupClear(gdamage_0)
		call DestroyGroup(gdamage_0)
	endif
	set t_0 = null
	set caster_0 = null
	set gdamage_0 = null
	set p_0 = null
	call GroupClear(gdammi_0)
	call DestroyGroup(gdammi_0)
	set gdammi_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set Picked_0 = null
endfunction

function Trig_Archimagus_Staff_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local player p = GetOwningPlayer(caster_0)
	local location loc = GetSpellTargetLoc()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local real xt = GetLocationX(loc_0)
	local real yt = GetLocationY(loc_0)
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local unit dammi
	local effect ef
	local real xdammi
	local real ydammi
	local integer lopa = 1
	local group gdamage = CreateGroup()
	local real angle
	local real dammiangle = -72.
	local real damage = 100. + GetHeroInt(caster_0, true) * 1.75
	local integer wait = 50
	set angle_0 = bj_RADTODEG_1 * Atan2(yt_0 - y_0, xt_0 - x_0)
	loop
		exitwhen lopa_0 > 5
		set xdammi_0 = xt_0 + 275. * Cos((angle_0 + dammiangle_0) * bj_DEGTORAD_1)
		set ydammi_0 = yt_0 + 275. * Sin((angle_0 + dammiangle_0) * bj_DEGTORAD_1)
		set dammiangle_0 = dammiangle_0 + 72.
		set dammi_0 = CreateUnit(p_0, 'h00U', xdammi_0, ydammi_0, dammiangle_0)
		call UnitAddAbility(dammi_0, 'Amrf')
		call UnitRemoveAbility(dammi_0, 'Amrf')
		call SetUnitFlyHeight(dammi_0, 50., .0)
		set ef_0 = AddSpecialEffectTarget("Effects\\Magic Missile.mdl", dammi_0, "chest")
		call SaveUnitHandle(udg_hash_1, h_0, lopa_0, dammi_0)
		call SaveEffectHandle(udg_hash_1, h_0, lopa_0 + 5, ef_0)
		set lopa_0 = lopa_0 + 1
		set dammi_0 = null
		set ef_0 = null
	endloop
	call SaveUnitHandle(udg_hash_1, h_0, 20, caster_0)
	call SaveReal(udg_hash_1, h_0, 21, damage_0)
	call SaveInteger(udg_hash_1, h_0, 22, wait_0)
	call SaveReal(udg_hash_1, h_0, 23, angle_0)
	call SaveGroupHandle(udg_hash_1, h_0, 24, gdamage_0)
	call SaveReal(udg_hash_1, h_0, 25, .0)
	call SaveReal(udg_hash_1, h_0, 27, 275.)
	call SaveReal(udg_hash_1, h_0, 28, xt_0)
	call SaveReal(udg_hash_1, h_0, 29, yt_0)
	call TimerStart(t_0, .03, true, function Trig_Archimagus_Staff_Periodic_Actions)
	set caster_0 = null
	set p_0 = null
	set t_0 = null
	set gdamage_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
endfunction

function Trig_Archimagus_Staff_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0L1'
endfunction

function InitTrig_Archimagus_Staff takes nothing returns nothing
	local integer index = 0
	set gg_trg_Archimagus_Staff_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Archimagus_Staff_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Archimagus_Staff_1, Condition(function Trig_Archimagus_Staff_Conditions))
	call TriggerAddAction(gg_trg_Archimagus_Staff_1, function Trig_Archimagus_Staff_Actions)
endfunction

function Trig_Isidors_Scepter_Add_Mana_Caster_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	call SetUnitState(caster_0, UNIT_STATE_MANA_1, GetUnitState(caster_0, UNIT_STATE_MANA_1) + 175.)
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
	set caster_0 = null
endfunction

function Trig_Isidors_Scepter_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local player p = GetOwningPlayer(caster_0)
	local location loc = GetSpellTargetLoc()
	local real x = GetLocationX(loc_0)
	local real y = GetLocationY(loc_0)
	local real heal = 200. + (GetHeroInt(caster_0, true) * 3.)
	local real mana = 175.
	local group g = CreateGroup()
	local unit Picked
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl", x_0, y_0))
	call GroupEnumUnitsInRange(g_0, x_0, y_0, 350., null)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if IsUnitAlly(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
			call SetUnitState(Picked_0, UNIT_STATE_LIFE_1, GetUnitState(Picked_0, UNIT_STATE_LIFE_1) + heal_0)
			if Picked_0 != caster_0 then
				call SetUnitState(Picked_0, UNIT_STATE_MANA_1, GetUnitState(Picked_0, UNIT_STATE_MANA_1) + mana_0)
			endif
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl", Picked_0, "origin"))
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIma\\AImaTarget.mdl", Picked_0, "origin"))
			call DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", Picked_0, "origin"), 2.)
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call TimerStart(t_0, .0, false, function Trig_Isidors_Scepter_Add_Mana_Caster_Actions)
	set caster_0 = null
	set p_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set t_0 = null
endfunction

function Trig_Isidors_Scepter_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0L0'
endfunction

function InitTrig_Isidors_Scepter takes nothing returns nothing
	local integer index = 0
	set gg_trg_Isidors_Scepter_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Isidors_Scepter_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Isidors_Scepter_1, Condition(function Trig_Isidors_Scepter_Conditions))
	call TriggerAddAction(gg_trg_Isidors_Scepter_1, function Trig_Isidors_Scepter_Actions)
endfunction

function Trig_Detached_Shield_Use_Remove_Agr_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local group g = LoadGroupHandle(udg_hash_1, h_0, 2)
	local integer damage = LoadInteger(udg_hash_1, h_0, 4)
	local integer armor = LoadInteger(udg_hash_1, h_0, 5)
	local effect ef
	local unit Picked
	call SetUnitLifeAndManaRegeneration(caster_0, "life", -35)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		call SetAttackAbilityLevel(Picked_0, damage_0)
		call SetArmorAbilityLevel(Picked_0, armor_0)
		set ef_0 = LoadEffectHandle(udg_hash_1, GetHandleId(Picked_0), 89)
		call DestroyEffect(ef_0)
		set ef_0 = null
		call SaveEffectHandle(udg_hash_1, GetHandleId(Picked_0), 89, null)
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 3)
	call DestroyEffect(ef_0)
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
	set caster_0 = null
	call DestroyGroup(g_0)
	call GroupClear(g_0)
	set g_0 = null
	set ef_0 = null
	set Picked_0 = null
endfunction

function Trig_Detached_Shield_Use_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local player p = GetOwningPlayer(caster_0)
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local group g = CreateGroup()
	local group g2 = CreateGroup()
	local unit Picked
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local effect ef
	local integer damage = 20
	local integer armor = 8
	call SetUnitLifeAndManaRegeneration(caster_0, "life", 35)
	call GroupEnumUnitsInRange(g_0, x_0, y_0, 450., null)
	call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\NightElf\\BattleRoar\\RoarCaster.mdl", x_0, y_0))
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		set ef_0 = LoadEffectHandle(udg_hash_1, GetHandleId(Picked_0), 89)
		if ef_0 == null and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and IsUnitEnemy(Picked_0, p_0) and GetUnitTypeId(Picked_0) != 'h00U' then
			call GroupAddUnit(g2_0, Picked_0)
			call IssueTargetOrderById(Picked_0, $D000F, caster_0)
			call SetAttackAbilityLevel(Picked_0, -damage_0)
			call SetArmorAbilityLevel(Picked_0, -armor_0)
			set ef_0 = AddSpecialEffectTarget("Abilities\\Spells\\Orc\\TrollBerserk\\HeadhunterWEAPONSLeft.mdl", Picked_0, "overhead")
			call SaveEffectHandle(udg_hash_1, GetHandleId(Picked_0), 89, ef_0)
			set ef_0 = null
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set ef_0 = AddSpecialEffectTarget("Abilities\\Spells\\Other\\HowlOfTerror\\HowlTarget.mdl", caster_0, "chest")
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveGroupHandle(udg_hash_1, h_0, 2, g2_0)
	call SaveEffectHandle(udg_hash_1, h_0, 3, ef_0)
	call SaveInteger(udg_hash_1, h_0, 4, damage_0)
	call SaveInteger(udg_hash_1, h_0, 5, armor_0)
	call TimerStart(t_0, 7., false, function Trig_Detached_Shield_Use_Remove_Agr_Actions)
	set caster_0 = null
	set p_0 = null
	call DestroyGroup(g_0)
	call GroupClear(g_0)
	set g_0 = null
	set g2_0 = null
	set Picked_0 = null
	set t_0 = null
	set ef_0 = null
endfunction

function Trig_Detached_Shield_Use_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0IV'
endfunction

function InitTrig_Detached_Shield_Use takes nothing returns nothing
	local integer index = 0
	set gg_trg_Detached_Shield_Use_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Detached_Shield_Use_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Detached_Shield_Use_1, Condition(function Trig_Detached_Shield_Use_Conditions))
	call TriggerAddAction(gg_trg_Detached_Shield_Use_1, function Trig_Detached_Shield_Use_Actions)
endfunction

function Trig_Cuirass_of_Invulnerable_Use2_Remove_Agr_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local group g = LoadGroupHandle(udg_hash_1, h_0, 2)
	local integer damage = LoadInteger(udg_hash_1, h_0, 4)
	local integer armor = LoadInteger(udg_hash_1, h_0, 5)
	local effect ef
	local unit Picked
	call SetUnitLifeAndManaRegeneration(caster_0, "life", -75)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		call SetAttackAbilityLevel(Picked_0, damage_0)
		call SetArmorAbilityLevel(Picked_0, armor_0)
		set ef_0 = LoadEffectHandle(udg_hash_1, GetHandleId(Picked_0), 89)
		call DestroyEffect(ef_0)
		set ef_0 = null
		call SaveEffectHandle(udg_hash_1, GetHandleId(Picked_0), 89, null)
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 3)
	call DestroyEffect(ef_0)
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
	set caster_0 = null
	call DestroyGroup(g_0)
	call GroupClear(g_0)
	set g_0 = null
	set ef_0 = null
	set Picked_0 = null
endfunction

function Trig_Cuirass_of_Invulnerable_Use2_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local player p = GetOwningPlayer(caster_0)
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local group g = CreateGroup()
	local group g2 = CreateGroup()
	local unit Picked
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local effect ef
	local integer damage = 30
	local integer armor = $D
	call SetUnitLifeAndManaRegeneration(caster_0, "life", 75)
	call GroupEnumUnitsInRange(g_0, x_0, y_0, 500., null)
	call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\NightElf\\BattleRoar\\RoarCaster.mdl", x_0, y_0))
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		set ef_0 = LoadEffectHandle(udg_hash_1, GetHandleId(Picked_0), 89)
		if ef_0 == null and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and IsUnitEnemy(Picked_0, p_0) and GetUnitTypeId(Picked_0) != 'h00U' then
			call GroupAddUnit(g2_0, Picked_0)
			call IssueTargetOrderById(Picked_0, $D000F, caster_0)
			call SetAttackAbilityLevel(Picked_0, -damage_0)
			call SetArmorAbilityLevel(Picked_0, -armor_0)
			set ef_0 = AddSpecialEffectTarget("Effects\\RedZapMissle.mdl", Picked_0, "overhead")
			call SaveEffectHandle(udg_hash_1, GetHandleId(Picked_0), 89, ef_0)
			set ef_0 = null
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set ef_0 = AddSpecialEffectTarget("Effects\\Duel.mdx", caster_0, "overhead")
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveGroupHandle(udg_hash_1, h_0, 2, g2_0)
	call SaveEffectHandle(udg_hash_1, h_0, 3, ef_0)
	call SaveInteger(udg_hash_1, h_0, 4, damage_0)
	call SaveInteger(udg_hash_1, h_0, 5, armor_0)
	call TimerStart(t_0, 8., false, function Trig_Cuirass_of_Invulnerable_Use2_Remove_Agr_Actions)
	set caster_0 = null
	set p_0 = null
	call DestroyGroup(g_0)
	call GroupClear(g_0)
	set g_0 = null
	set g2_0 = null
	set Picked_0 = null
	set t_0 = null
	set ef_0 = null
endfunction

function Trig_Cuirass_of_Invulnerable_Use2_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0JT'
endfunction

function InitTrig_Cuirass_of_Invulnerable_Use2 takes nothing returns nothing
	local integer index = 0
	set gg_trg_Cuirass_of_Invulnerable_Use2_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Cuirass_of_Invulnerable_Use2_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Cuirass_of_Invulnerable_Use2_1, Condition(function Trig_Cuirass_of_Invulnerable_Use2_Conditions))
	call TriggerAddAction(gg_trg_Cuirass_of_Invulnerable_Use2_1, function Trig_Cuirass_of_Invulnerable_Use2_Actions)
endfunction

function Trig_Lost_Cuirass_of_Invulnerable_Actions takes nothing returns nothing
	local unit hero = GetTriggerUnit()
	local integer h = GetHandleId(hero_0)
	local effect ef = LoadEffectHandle(udg_hash_1, h_0, 95)
	call DestroyEffect(ef_0)
	call SaveBoolean(udg_hash_1, h_0, 94, true)
	call SaveEffectHandle(udg_hash_1, h_0, 95, null)
	set hero_0 = null
	set ef_0 = null
endfunction

function Trig_Lost_Cuirass_of_Invulnerable_Conditions takes nothing returns boolean
	return GetItemTypeId(GetManipulatedItem()) == 'I048' and CountItemOfTypeOnUnit(GetTriggerUnit(), 'I048') == 1
endfunction

function InitTrig_Lost_Cuirass_of_Invulnerable takes nothing returns nothing
	local integer index = 0
	set gg_trg_Lost_Cuirass_of_Invulnerable_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Lost_Cuirass_of_Invulnerable_1, Player(index_0), EVENT_PLAYER_UNIT_DROP_ITEM_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Lost_Cuirass_of_Invulnerable_1, Condition(function Trig_Lost_Cuirass_of_Invulnerable_Conditions))
	call TriggerAddAction(gg_trg_Lost_Cuirass_of_Invulnerable_1, function Trig_Lost_Cuirass_of_Invulnerable_Actions)
endfunction

function Trig_Take_Cuirass_of_Invulnerable_Actions takes nothing returns nothing
	local unit hero = GetTriggerUnit()
	local integer h = GetHandleId(hero_0)
	local effect ef
	if LoadReal(udg_hash_1, h_0, 96) < 1. then
		set ef_0 = AddSpecialEffectTarget("Effects\\PurpleSphere.mdx", hero_0, "chest")
		call SaveBoolean(udg_hash_1, h_0, 94, true)
		call SaveEffectHandle(udg_hash_1, h_0, 95, ef_0)
	endif
	set hero_0 = null
	set ef_0 = null
endfunction

function Trig_Take_Cuirass_of_Invulnerable_Conditions takes nothing returns boolean
	return GetItemTypeId(GetManipulatedItem()) == 'I048' and CountItemOfTypeOnUnit(GetTriggerUnit(), 'I048') == 1
endfunction

function InitTrig_Take_Cuirass_of_Invulnerable takes nothing returns nothing
	local integer index = 0
	set gg_trg_Take_Cuirass_of_Invulnerable_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Take_Cuirass_of_Invulnerable_1, Player(index_0), EVENT_PLAYER_UNIT_PICKUP_ITEM_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Take_Cuirass_of_Invulnerable_1, Condition(function Trig_Take_Cuirass_of_Invulnerable_Conditions))
	call TriggerAddAction(gg_trg_Take_Cuirass_of_Invulnerable_1, function Trig_Take_Cuirass_of_Invulnerable_Actions)
endfunction

function Trig_Fire_Staff_Periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 7)
	local real damage = LoadReal(udg_hash_1, h_0, 8)
	local integer wait = LoadInteger(udg_hash_1, h_0, 9)
	local real angle = LoadReal(udg_hash_1, h_0, $A)
	local group gdamage = LoadGroupHandle(udg_hash_1, h_0, $B)
	local real dammiangle = LoadReal(udg_hash_1, h_0, $C)
	local real anglestep = LoadReal(udg_hash_1, h_0, $D)
	local player p = GetOwningPlayer(caster_0)
	local group gdammi = CreateGroup()
	local group g = CreateGroup()
	local real xdammi
	local real ydammi
	local unit Picked
	local unit dammi
	local integer lopa = 1
	local effect ef
	if wait_0 > 0 then
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 9, wait_0)
		set dammiangle_0 = dammiangle_0 - anglestep_0
		if dammiangle_0 < -45. then
			set anglestep_0 = -anglestep_0
			call SaveReal(udg_hash_1, h_0, $D, anglestep_0)
		endif
		if dammiangle_0 > 45. then
			set anglestep_0 = -anglestep_0
			call SaveReal(udg_hash_1, h_0, $D, anglestep_0)
		endif
		call SaveReal(udg_hash_1, h_0, $C, dammiangle_0)
		set dammi_0 = LoadUnitHandle(udg_hash_1, h_0, 1)
		set xdammi_0 = GetUnitX(dammi_0) + 15. * Cos((angle_0 + dammiangle_0) * bj_DEGTORAD_1)
		set ydammi_0 = GetUnitY(dammi_0) + 15. * Sin((angle_0 + dammiangle_0) * bj_DEGTORAD_1)
		call SetUnitPosition(dammi_0, xdammi_0, ydammi_0)
		call GroupEnumUnitsInRange(gdammi_0, xdammi_0, ydammi_0, 125., null)
		call GroupAddGroup(gdammi_0, g_0)
		set dammi_0 = null
		set dammiangle_0 = -dammiangle_0
		set dammi_0 = LoadUnitHandle(udg_hash_1, h_0, 3)
		set xdammi_0 = GetUnitX(dammi_0) + 15. * Cos((angle_0 + dammiangle_0) * bj_DEGTORAD_1)
		set ydammi_0 = GetUnitY(dammi_0) + 15. * Sin((angle_0 + dammiangle_0) * bj_DEGTORAD_1)
		call SetUnitPosition(dammi_0, xdammi_0, ydammi_0)
		call GroupEnumUnitsInRange(gdammi_0, xdammi_0, ydammi_0, 125., null)
		call GroupAddGroup(gdammi_0, g_0)
		set dammi_0 = null
		set dammi_0 = LoadUnitHandle(udg_hash_1, h_0, 2)
		set xdammi_0 = GetUnitX(dammi_0) + 13.2 * Cos(angle_0 * bj_DEGTORAD_1)
		set ydammi_0 = GetUnitY(dammi_0) + 13.2 * Sin(angle_0 * bj_DEGTORAD_1)
		call SetUnitPosition(dammi_0, xdammi_0, ydammi_0)
		call GroupEnumUnitsInRange(gdammi_0, xdammi_0, ydammi_0, 125., null)
		call GroupAddGroup(gdammi_0, g_0)
		set dammi_0 = null
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if IsUnitEnemy(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitInGroup(Picked_0, gdamage_0) == false and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
				set dammi_0 = CreateUnit(p_0, 'h00U', GetUnitX(Picked_0), GetUnitY(Picked_0), .0)
				call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
				call UnitAddAbility(dammi_0, 'A0JK')
				call IssueTargetOrderById(dammi_0, $D02B6, Picked_0)
				set dammi_0 = null
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl", Picked_0, "chest"))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIfb\\AIfbSpecialArt.mdl", Picked_0, "chest"))
				call GroupAddUnit(gdamage_0, Picked_0)
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		call SaveGroupHandle(udg_hash_1, h_0, $B, gdamage_0)
	else
		loop
			exitwhen lopa_0 > 3
			set dammi_0 = LoadUnitHandle(udg_hash_1, h_0, lopa_0)
			set ef_0 = LoadEffectHandle(udg_hash_1, h_0, lopa_0 + 3)
			call KillUnit(dammi_0)
			call DestroyEffect(ef_0)
			set lopa_0 = lopa_0 + 1
			set dammi_0 = null
			set ef_0 = null
		endloop
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
		call GroupClear(gdamage_0)
		call DestroyGroup(gdamage_0)
	endif
	set t_0 = null
	set caster_0 = null
	set gdamage_0 = null
	set p_0 = null
	call GroupClear(gdammi_0)
	call DestroyGroup(gdammi_0)
	set gdammi_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set Picked_0 = null
endfunction

function Trig_Fire_Staff_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local player p = GetOwningPlayer(caster_0)
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local location loc
	local real xt
	local real yt
	local unit dammi
	local effect ef
	local real xdammi
	local real ydammi
	local integer lopa = 1
	local group gdamage = CreateGroup()
	local real angle
	local real dammiangle = -90.
	local real damage = 170.
	local integer wait = 50
	if GetSpellTargetUnit() == null then
		set loc_0 = GetSpellTargetLoc()
		set xt_0 = GetLocationX(loc_0)
		set yt_0 = GetLocationY(loc_0)
		call RemoveLocation(loc_0)
		set loc_0 = null
	else
		set xt_0 = GetUnitX(GetSpellTargetUnit())
		set yt_0 = GetUnitY(GetSpellTargetUnit())
	endif
	set angle_0 = bj_RADTODEG_1 * Atan2(yt_0 - y_0, xt_0 - x_0)
	loop
		exitwhen lopa_0 > 3
		set xdammi_0 = x_0 + 100. * Cos((angle_0 + dammiangle_0) * bj_DEGTORAD_1)
		set ydammi_0 = y_0 + 100. * Sin((angle_0 + dammiangle_0) * bj_DEGTORAD_1)
		set dammiangle_0 = dammiangle_0 + 90.
		set dammi_0 = CreateUnit(p_0, 'h00U', xdammi_0, ydammi_0, angle_0)
		call UnitAddAbility(dammi_0, 'Amrf')
		call UnitRemoveAbility(dammi_0, 'Amrf')
		call SetUnitFlyHeight(dammi_0, 50., .0)
		set ef_0 = AddSpecialEffectTarget("Effects\\SunfireMissile.mdl", dammi_0, "chest")
		call SaveUnitHandle(udg_hash_1, h_0, lopa_0, dammi_0)
		call SaveEffectHandle(udg_hash_1, h_0, lopa_0 + 3, ef_0)
		set lopa_0 = lopa_0 + 1
		set dammi_0 = null
		set ef_0 = null
	endloop
	call SaveUnitHandle(udg_hash_1, h_0, 7, caster_0)
	call SaveReal(udg_hash_1, h_0, 8, damage_0)
	call SaveInteger(udg_hash_1, h_0, 9, wait_0)
	call SaveReal(udg_hash_1, h_0, $A, angle_0)
	call SaveGroupHandle(udg_hash_1, h_0, $B, gdamage_0)
	call SaveReal(udg_hash_1, h_0, $C, 45.)
	call SaveReal(udg_hash_1, h_0, $D, 3.6)
	call TimerStart(t_0, .03, true, function Trig_Fire_Staff_Periodic_Actions)
	set caster_0 = null
	set p_0 = null
	set t_0 = null
	set gdamage_0 = null
endfunction

function Trig_Fire_Staff_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0JJ'
endfunction

function InitTrig_Fire_Staff takes nothing returns nothing
	local integer index = 0
	set gg_trg_Fire_Staff_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Fire_Staff_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Fire_Staff_1, Condition(function Trig_Fire_Staff_Conditions))
	call TriggerAddAction(gg_trg_Fire_Staff_1, function Trig_Fire_Staff_Actions)
endfunction

function Trig_Demon_Axe_Remove_Stregnth_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	call UnitRemoveAbility(caster_0, 'A0J2')
	call DestroyTimer(t_0)
	call FlushChildHashtable(udg_hash_1, h_0)
	set t_0 = null
	set caster_0 = null
endfunction

function Trig_Demon_Axe_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local unit dammi = CreateUnit(GetOwningPlayer(caster_0), 'h00U', GetUnitX(caster_0), GetUnitY(caster_0), .0)
	call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
	call UnitAddAbility(dammi_0, 'A0IW')
	call IssueTargetOrderById(dammi_0, $D00F1, caster_0)
	call UnitAddAbility(caster_0, 'A0J2')
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call TimerStart(t_0, 35., false, function Trig_Demon_Axe_Remove_Stregnth_Actions)
	set caster_0 = null
	set t_0 = null
	set dammi_0 = null
endfunction

function Trig_Demon_Axe_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0J1'
endfunction

function InitTrig_Demon_Axe takes nothing returns nothing
	local integer index = 0
	set gg_trg_Demon_Axe_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Demon_Axe_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Demon_Axe_1, Condition(function Trig_Demon_Axe_Conditions))
	call TriggerAddAction(gg_trg_Demon_Axe_1, function Trig_Demon_Axe_Actions)
endfunction

function Trig_Demon_Axe_Kill_Unit_Actions takes nothing returns nothing
	local unit killer = GetKillingUnit()
	call SetUnitAbilityLevel(killer_0, 'A0J2', (GetUnitAbilityLevel(killer_0, 'A0J2') + 1))
	set killer_0 = null
endfunction

function Trig_Demon_Axe_Kill_Unit_Conditions takes nothing returns boolean
	return GetUnitAbilityLevel(GetKillingUnit(), 'A0J2') > 0
endfunction

function InitTrig_Demon_Axe_Kill_Unit takes nothing returns nothing
	local integer index = 0
	set gg_trg_Demon_Axe_Kill_Unit_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Demon_Axe_Kill_Unit_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Demon_Axe_Kill_Unit_1, Condition(function Trig_Demon_Axe_Kill_Unit_Conditions))
	call TriggerAddAction(gg_trg_Demon_Axe_Kill_Unit_1, function Trig_Demon_Axe_Kill_Unit_Actions)
endfunction

function Trig_Boots_Rescue_Remove_Effects_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local unit target = LoadUnitHandle(udg_hash_1, h_0, 2)
	call SetUnitLifeAndManaRegeneration(caster_0, "life", -25)
	call SetUnitLifeAndManaRegeneration(target_0, "life", -25)
	call DestroyTimer(t_0)
	call FlushChildHashtable(udg_hash_1, h_0)
	set t_0 = null
	set caster_0 = null
	set target_0 = null
endfunction

function Trig_Boots_Rescue_Destroy_Lightning_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local lightning l = LoadLightningHandle(udg_hash_1, h_0, 1)
	call DestroyLightning(l_0)
	call DestroyTimer(t_0)
	call FlushChildHashtable(udg_hash_1, h_0)
	set t_0 = null
	set l_0 = null
endfunction

function Trig_Boots_Rescue_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local unit target = GetSpellTargetUnit()
	local real xc = GetUnitX(caster_0)
	local real yc = GetUnitY(caster_0)
	local real xt = GetUnitX(target_0)
	local real yt = GetUnitY(target_0)
	local player p = GetOwningPlayer(caster_0)
	local unit dammi = CreateUnit(p_0, 'h00U', xc_0, yc_0, .0)
	local unit dammi2 = CreateUnit(p_0, 'h00U', xc_0, yc_0, .0)
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local lightning l = AddLightningEx("MBUR", true, xc_0, yc_0, 50., xt_0, yt_0, 50.)
	local timer t2 = CreateTimer()
	local integer h2 = GetHandleId(t2_0)
	call SetUnitX(caster_0, xt_0)
	call SetUnitY(caster_0, yt_0)
	call SetUnitX(target_0, xc_0)
	call SetUnitY(target_0, yc_0)
	call SetUnitLifeAndManaRegeneration(caster_0, "life", 25)
	call SetUnitLifeAndManaRegeneration(target_0, "life", 25)
	call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
	call UnitApplyTimedLife(dammi2_0, 'BTLF', 1.)
	call UnitAddAbility(dammi_0, 'A0IY')
	call UnitAddAbility(dammi2_0, 'A0IY')
	call IssueTargetOrderById(dammi_0, $D008E, caster_0)
	call IssueTargetOrderById(dammi2_0, $D008E, target_0)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveUnitHandle(udg_hash_1, h_0, 2, target_0)
	call SaveLightningHandle(udg_hash_1, h2_0, 1, l_0)
	call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\ManaBurn\\ManaBurnTarget.mdl", caster_0, "origin"))
	call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\ManaBurn\\ManaBurnTarget.mdl", target_0, "origin"))
	call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageCaster.mdl", caster_0, "origin"))
	call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageCaster.mdl", target_0, "origin"))
	call TimerStart(t_0, 6., false, function Trig_Boots_Rescue_Remove_Effects_Actions)
	call TimerStart(t2_0, .5, false, function Trig_Boots_Rescue_Destroy_Lightning_Actions)
	set caster_0 = null
	set target_0 = null
	set dammi_0 = null
	set dammi2_0 = null
	set p_0 = null
	set t_0 = null
	set l_0 = null
	set t2_0 = null
endfunction

function Trig_Boots_Rescue_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0JE'
endfunction

function InitTrig_Boots_Rescue takes nothing returns nothing
	local integer index = 0
	set gg_trg_Boots_Rescue_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Boots_Rescue_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Boots_Rescue_1, Condition(function Trig_Boots_Rescue_Conditions))
	call TriggerAddAction(gg_trg_Boots_Rescue_1, function Trig_Boots_Rescue_Actions)
endfunction

function Trig_Astral_Staff_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local player p = GetOwningPlayer(caster_0)
	local location loc = GetSpellTargetLoc()
	local real x = GetLocationX(loc_0)
	local real y = GetLocationY(loc_0)
	local real radius = 300.
	local group g = CreateGroup()
	local unit Picked
	local unit dammi
	call GroupEnumUnitsInRange(g_0, x_0, y_0, radius_0, null)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 and IsUnitEnemy(Picked_0, p_0) and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
			set dammi_0 = CreateUnit(p_0, 'h00U', x_0, y_0, .0)
			call UnitApplyTimedLife(dammi_0, 'BTLF', 2.)
			call UnitAddAbility(dammi_0, 'A0IQ')
			call IssueTargetOrderById(dammi_0, $D0206, Picked_0)
			set dammi_0 = null
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set caster_0 = null
	set p_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	call DestroyGroup(g_0)
	call GroupClear(g_0)
	set g_0 = null
	set Picked_0 = null
endfunction

function Trig_Astral_Staff_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0IP'
endfunction

function InitTrig_Astral_Staff takes nothing returns nothing
	local integer index = 0
	set gg_trg_Astral_Staff_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Astral_Staff_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Astral_Staff_1, Condition(function Trig_Astral_Staff_Conditions))
	call TriggerAddAction(gg_trg_Astral_Staff_1, function Trig_Astral_Staff_Actions)
endfunction

function Trig_Healer_Staff_Actions takes nothing returns nothing
	local unit target = GetSpellTargetUnit()
	call SetUnitState(target_0, UNIT_STATE_LIFE_1, GetUnitState(target_0, UNIT_STATE_LIFE_1) + 150. + (2. * GetHeroInt(GetSpellAbilityUnit(), true)))
	call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl", target_0, "origin"))
	call DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", target_0, "origin"), 2.)
	set target_0 = null
endfunction

function Trig_Healer_Staff_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0IM'
endfunction

function InitTrig_Healer_Staff takes nothing returns nothing
	local integer index = 0
	set gg_trg_Healer_Staff_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Healer_Staff_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Healer_Staff_1, Condition(function Trig_Healer_Staff_Conditions))
	call TriggerAddAction(gg_trg_Healer_Staff_1, function Trig_Healer_Staff_Actions)
endfunction

function Trig_Magic_Amulet_Remove_Shield_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local effect ef = LoadEffectHandle(udg_hash_1, h_0, 2)
	call SaveReal(udg_hash_1, GetHandleId(caster_0), 86, .0)
	call SaveEffectHandle(udg_hash_1, GetHandleId(caster_0), 87, null)
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	call DestroyEffect(ef_0)
	set t_0 = null
	set caster_0 = null
	set ef_0 = null
endfunction

function Trig_Magic_Amulet_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real shield = 200.
	local effect ef = AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaShield\\ManaShieldCaster.mdl", caster_0, "origin")
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	call SaveReal(udg_hash_1, GetHandleId(caster_0), 86, shield_0)
	call SaveEffectHandle(udg_hash_1, GetHandleId(caster_0), 87, ef_0)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveEffectHandle(udg_hash_1, h_0, 2, ef_0)
	call TimerStart(t_0, 20., false, function Trig_Magic_Amulet_Remove_Shield_Actions)
	set caster_0 = null
	set ef_0 = null
	set t_0 = null
endfunction

function Trig_Magic_Amulet_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0IH'
endfunction

function InitTrig_Magic_Amulet takes nothing returns nothing
	local integer index = 0
	set gg_trg_Magic_Amulet_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Magic_Amulet_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Magic_Amulet_1, Condition(function Trig_Magic_Amulet_Conditions))
	call TriggerAddAction(gg_trg_Magic_Amulet_1, function Trig_Magic_Amulet_Actions)
endfunction

function Trig_Blood_Dagger_Actions takes nothing returns nothing
	local unit killer = GetKillingUnit()
	call SetUnitState(killer_0, UNIT_STATE_LIFE_1, GetUnitState(killer_0, UNIT_STATE_LIFE_1) + (GetUnitState(GetDyingUnit(), UNIT_STATE_MAX_LIFE_1) * .1))
	call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPriest.mdl", killer_0, "chest"))
	set killer_0 = null
endfunction

function Trig_Blood_Dagger_Conditions takes nothing returns boolean
	return GetUnitAbilityLevel(GetKillingUnit(), 'A0IG') >= 1
endfunction

function InitTrig_Blood_Dagger takes nothing returns nothing
	local integer index = 0
	set gg_trg_Blood_Dagger_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Blood_Dagger_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Blood_Dagger_1, Condition(function Trig_Blood_Dagger_Conditions))
	call TriggerAddAction(gg_trg_Blood_Dagger_1, function Trig_Blood_Dagger_Actions)
endfunction

function Trig_Agility_Blade_Remove_Agi_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local integer bonus = LoadInteger(udg_hash_1, h_0, 2)
	local effect ef = LoadEffectHandle(udg_hash_1, h_0, 3)
	local effect ef2 = LoadEffectHandle(udg_hash_1, h_0, 4)
	local integer clearagi = GetHeroAgi(caster_0, false)
	call SetHeroAgi(caster_0, clearagi_0 - bonus_0, true)
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	call DestroyEffect(ef_0)
	call DestroyEffect(ef2_0)
	set caster_0 = null
	set ef_0 = null
	set ef2_0 = null
	set t_0 = null
endfunction

function Trig_Agility_Blade_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local integer agi = GetHeroAgi(caster_0, true)
	local integer clearagi = GetHeroAgi(caster_0, false)
	local integer bonus = R2I(agi_0 / 2)
	local effect ef = AddSpecialEffectTarget("Abilities\\Spells\\Other\\AcidBomb\\BottleImpact.mdl", caster_0, "weapon")
	local effect ef2 = AddSpecialEffectTarget("Abilities\\Spells\\Other\\Drain\\DrainCaster.mdl", caster_0, "head")
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	call SetHeroAgi(caster_0, clearagi_0 + bonus_0, true)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveInteger(udg_hash_1, h_0, 2, bonus_0)
	call SaveEffectHandle(udg_hash_1, h_0, 3, ef_0)
	call SaveEffectHandle(udg_hash_1, h_0, 4, ef2_0)
	call TimerStart(t_0, 7., false, function Trig_Agility_Blade_Remove_Agi_Actions)
	set caster_0 = null
	set ef_0 = null
	set ef2_0 = null
	set t_0 = null
endfunction

function Trig_Agility_Blade_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0IE'
endfunction

function InitTrig_Agility_Blade takes nothing returns nothing
	local integer index = 0
	set gg_trg_Agility_Blade_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Agility_Blade_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Agility_Blade_1, Condition(function Trig_Agility_Blade_Conditions))
	call TriggerAddAction(gg_trg_Agility_Blade_1, function Trig_Agility_Blade_Actions)
endfunction

function Trig_Bone_Staff_Set_Summon_Ability_Level_Func003C takes nothing returns boolean
	return (GetUnitTypeId(GetSummonedUnit()) == 'n01K') or (GetUnitTypeId(GetSummonedUnit()) == 'n01L')
endfunction

function Trig_Bone_Staff_Set_Summon_Ability_Level_Conditions takes nothing returns boolean
	return (Trig_Bone_Staff_Set_Summon_Ability_Level_Func003C())
endfunction

function Trig_Bone_Staff_Set_Summon_Ability_Level_Func001C takes nothing returns boolean
	return (GetUnitTypeId(GetSummonedUnit()) == 'n01K')
endfunction

function Trig_Bone_Staff_Set_Summon_Ability_Level_Func002C takes nothing returns boolean
	return (GetUnitTypeId(GetSummonedUnit()) == 'n01L')
endfunction

function Trig_Bone_Staff_Set_Summon_Ability_Level_Actions takes nothing returns nothing
	if (Trig_Bone_Staff_Set_Summon_Ability_Level_Func001C()) then
		call SetUnitAbilityLevelSwapped('A0B6', GetSummonedUnit(), 2)
		call SetUnitAbilityLevelSwapped('A0AW', GetSummonedUnit(), 2)
		call SetUnitAbilityLevelSwapped('A0AX', GetSummonedUnit(), 2)
	endif
	if (Trig_Bone_Staff_Set_Summon_Ability_Level_Func002C()) then
		call SetUnitAbilityLevelSwapped('A0B6', GetSummonedUnit(), 3)
		call SetUnitAbilityLevelSwapped('A0AW', GetSummonedUnit(), 3)
		call SetUnitAbilityLevelSwapped('A0AX', GetSummonedUnit(), 3)
	endif
endfunction

function InitTrig_Bone_Staff_Set_Summon_Ability_Level takes nothing returns nothing
	set gg_trg_Bone_Staff_Set_Summon_Ability_Level_1 = CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(gg_trg_Bone_Staff_Set_Summon_Ability_Level_1, EVENT_PLAYER_UNIT_SUMMON_1)
	call TriggerAddCondition(gg_trg_Bone_Staff_Set_Summon_Ability_Level_1, Condition(function Trig_Bone_Staff_Set_Summon_Ability_Level_Conditions))
	call TriggerAddAction(gg_trg_Bone_Staff_Set_Summon_Ability_Level_1, function Trig_Bone_Staff_Set_Summon_Ability_Level_Actions)
endfunction

function Trig_Novice_Amulet_Conditions takes nothing returns boolean
	return (GetSpellAbilityId() == 'A0AI')
endfunction

function Trig_Novice_Amulet_Actions takes nothing returns nothing
	call SetUnitManaBJ(GetSpellAbilityUnit(), (GetUnitStateSwap(UNIT_STATE_MANA_1, GetSpellAbilityUnit()) + 75.))
endfunction

function InitTrig_Novice_Amulet takes nothing returns nothing
	set gg_trg_Novice_Amulet_1 = CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(gg_trg_Novice_Amulet_1, EVENT_PLAYER_UNIT_SPELL_EFFECT_1)
	call TriggerAddCondition(gg_trg_Novice_Amulet_1, Condition(function Trig_Novice_Amulet_Conditions))
	call TriggerAddAction(gg_trg_Novice_Amulet_1, function Trig_Novice_Amulet_Actions)
endfunction

function Trig_Glove_of_Andromat_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local unit target = GetSpellTargetUnit()
	local real xt = GetUnitX(target_0)
	local real yt = GetUnitY(target_0)
	local player p = GetOwningPlayer(caster_0)
	local integer pnumber = GetPlayerId(p_0) + 1
	local integer id = GetUnitTypeId(target_0)
	local integer gold = R2I(GetRandomInt(LoadInteger(udg_hash_1, id_0, 70), LoadInteger(udg_hash_1, id_0, 71)) * 10.) + 60
	local integer xp = R2I(LoadInteger(udg_hash_1, id_0, 82) * 7.)
	local real mana = 75. + (GetUnitState(target_0, UNIT_STATE_MAX_LIFE_1) / 2)
	call SetUnitState(caster_0, UNIT_STATE_MANA_1, GetUnitState(caster_0, UNIT_STATE_MANA_1) + mana_0)
	call AddHeroXP(caster_0, R2I(xp_0 + .5), true)
	call SetPlayerState(p_0, PLAYER_STATE_RESOURCE_GOLD_1, GetPlayerState(p_0, PLAYER_STATE_RESOURCE_GOLD_1) + gold_0)
	call CreateTexttag(udg_ColorString_1[23] + "+" + I2S(gold_0) + "|r", .025, $FF, xt_0 - 15., yt_0, .0, .0, .035, 3.5)
	call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Transmute\\PileofGold.mdl", xt_0, yt_0))
	call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Items\\AIlm\\AIlmTarget.mdl", xt_0, yt_0))
	call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\DarkRitual\\DarkRitualTarget.mdl", xt_0, yt_0))
	call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIma\\AImaTarget.mdl", caster_0, "origin"))
	if pnumber_0 <= 9 then
		set udg_MultiBoard_Player_Kills_Count_1[pnumber_0] = udg_MultiBoard_Player_Kills_Count_1[pnumber_0] + 1
		call MultiboardSetItemValueBJ(udg_MultiBoard_1, 3, udg_PlayerNumberInMB_1[pnumber_0], udg_ColorString_1[20] + I2S(udg_MultiBoard_Player_Kills_Count_1[pnumber_0]) + "|r")
	endif
	call SaveBoolean(udg_hash_1, GetHandleId(target_0), 85, true)
	call SetUnitExploded(target_0, true)
	call KillUnit(target_0)
	call SetUnitVertexColor(target_0, 0, 0, 0, 0)
	call PauseUnit(target_0, true)
	set caster_0 = null
	set target_0 = null
	set p_0 = null
endfunction

function Trig_Glove_of_Andromat_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0AN'
endfunction

function InitTrig_Glove_of_Andromat takes nothing returns nothing
	local integer index = 0
	set gg_trg_Glove_of_Andromat_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Glove_of_Andromat_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Glove_of_Andromat_1, Condition(function Trig_Glove_of_Andromat_Conditions))
	call TriggerAddAction(gg_trg_Glove_of_Andromat_1, function Trig_Glove_of_Andromat_Actions)
endfunction

function Trig_Glove_of_Midas_Periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local unit target = LoadUnitHandle(udg_hash_1, h_0, 2)
	local unit dammi = LoadUnitHandle(udg_hash_1, h_0, 3)
	local integer wait2 = LoadInteger(udg_hash_1, h_0, 5)
	local real height = LoadReal(udg_hash_1, h_0, 6)
	local effect ef
	local integer gold
	local integer xp
	local player p
	local integer pnumber
	local integer id
	local real x = GetUnitX(dammi_0)
	local real y = GetUnitY(dammi_0)
	local real xt = GetUnitX(target_0)
	local real yt = GetUnitY(target_0)
	local real angle = bj_RADTODEG_1 * Atan2(yt_0 - y_0, xt_0 - x_0)
	local real dist
	local boolean destroy = false
	if GetUnitState(target_0, UNIT_STATE_LIFE_1) > .405 then
		set wait2_0 = wait2_0 - 1
		call SaveInteger(udg_hash_1, h_0, 5, wait2_0)
		if wait2_0 == 0 then
			call SetUnitFlyHeight(dammi_0, .0, height_0 * 2.25)
		endif
		set x_0 = x_0 + 20. * Cos(angle_0 * bj_DEGTORAD_1)
		set y_0 = y_0 + 20. * Sin(angle_0 * bj_DEGTORAD_1)
		call SetUnitPosition(dammi_0, x_0, y_0)
		set dist_0 = SquareRoot((xt_0 - x_0) * (xt_0 - x_0) + (yt_0 - y_0) * (yt_0 - y_0))
		if dist_0 < 21. then
			set destroy_0 = true
			set id_0 = GetUnitTypeId(target_0)
			set p_0 = GetOwningPlayer(caster_0)
			set pnumber_0 = GetPlayerId(p_0) + 1
			set gold_0 = R2I(GetRandomInt(LoadInteger(udg_hash_1, id_0, 70), LoadInteger(udg_hash_1, id_0, 71)) * 6.) + 40
			set xp_0 = R2I(LoadInteger(udg_hash_1, id_0, 82) * 5.)
			call SetUnitPosition(dammi_0, xt_0, yt_0)
			call AddHeroXP(caster_0, R2I(xp_0 + .5), true)
			call SetPlayerState(p_0, PLAYER_STATE_RESOURCE_GOLD_1, GetPlayerState(p_0, PLAYER_STATE_RESOURCE_GOLD_1) + gold_0)
			call CreateTexttag(udg_ColorString_1[23] + "+" + I2S(gold_0) + "|r", .025, $FF, xt_0 - 15., y_0, .0, .0, .035, 3.5)
			call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Transmute\\PileofGold.mdl", xt_0, yt_0))
			call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Items\\AIlm\\AIlmTarget.mdl", xt_0, yt_0))
			if pnumber_0 <= 9 then
				set udg_MultiBoard_Player_Kills_Count_1[pnumber_0] = udg_MultiBoard_Player_Kills_Count_1[pnumber_0] + 1
				call MultiboardSetItemValueBJ(udg_MultiBoard_1, 3, udg_PlayerNumberInMB_1[pnumber_0], udg_ColorString_1[20] + I2S(udg_MultiBoard_Player_Kills_Count_1[pnumber_0]) + "|r")
			endif
			call SaveBoolean(udg_hash_1, GetHandleId(target_0), 85, true)
			call SetUnitExploded(target_0, true)
			call KillUnit(target_0)
			call SetUnitVertexColor(target_0, 0, 0, 0, 0)
			call PauseUnit(target_0, true)
			set p_0 = null
		endif
	else
		set destroy_0 = true
	endif
	if destroy_0 then
		call KillUnit(dammi_0)
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 4)
		call DestroyEffect(ef_0)
		set ef_0 = null
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set caster_0 = null
	set target_0 = null
	set dammi_0 = null
endfunction

function Trig_Glove_of_Midas_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local unit target = GetSpellTargetUnit()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local real xt = GetUnitX(target_0)
	local real yt = GetUnitY(target_0)
	local real angle = bj_RADTODEG_1 * Atan2(yt_0 - y_0, xt_0 - x_0)
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local unit dammi
	local effect ef
	local real dist = SquareRoot((xt_0 - x_0) * (xt_0 - x_0) + (yt_0 - y_0) * (yt_0 - y_0))
	local real height = dist_0 / 3
	local integer wait2 = R2I(dist_0 / 40)
	set dammi_0 = CreateUnit(GetOwningPlayer(caster_0), 'h00U', x_0, y_0, angle_0)
	call UnitAddAbility(dammi_0, 'Amrf')
	call UnitRemoveAbility(dammi_0, 'Amrf')
	call SetUnitFlyHeight(dammi_0, .0, .0)
	call SetUnitFlyHeight(dammi_0, height_0, height_0 * 2.25)
	set ef_0 = AddSpecialEffectTarget("Abilities\\Spells\\Other\\Transmute\\GoldBottleMissile.mdl", dammi_0, "chest")
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveUnitHandle(udg_hash_1, h_0, 2, target_0)
	call SaveUnitHandle(udg_hash_1, h_0, 3, dammi_0)
	call SaveEffectHandle(udg_hash_1, h_0, 4, ef_0)
	call SaveInteger(udg_hash_1, h_0, 5, wait2_0)
	call SaveReal(udg_hash_1, h_0, 6, height_0)
	call TimerStart(t_0, .03, true, function Trig_Glove_of_Midas_Periodic_Actions)
	set target_0 = null
	set t_0 = null
	set dammi_0 = null
	set ef_0 = null
endfunction

function Trig_Glove_of_Midas_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0A2'
endfunction

function InitTrig_Glove_of_Midas takes nothing returns nothing
	local integer index = 0
	set gg_trg_Glove_of_Midas_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Glove_of_Midas_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Glove_of_Midas_1, Condition(function Trig_Glove_of_Midas_Conditions))
	call TriggerAddAction(gg_trg_Glove_of_Midas_1, function Trig_Glove_of_Midas_Actions)
endfunction

function Trig_Heroes_more_attacked_priority_when_guards_Group_Filter takes nothing returns boolean
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE_1) >= .45) and IsUnitInvulnerable(GetFilterUnit()) == false and (GetPlayerId(GetOwningPlayer(GetFilterUnit())) <= 8 and (IsPlayerEnemy(GetOwningPlayer(GetAttacker()), GetOwningPlayer(GetFilterUnit())))))
endfunction

function Trig_Heroes_more_attacked_priority_when_guards_Actions takes nothing returns nothing
	local group g = CreateGroup()
	local unit attacked = GetTriggerUnit()
	local unit attacker = GetAttacker()
	local unit ally
	call GroupEnumUnitsInRange(g_0, GetUnitX(attacked_0), GetUnitY(attacked_0), 500., Filter(function Trig_Heroes_more_attacked_priority_when_guards_Group_Filter))
	if CountUnitsInGroup(g_0) > 1 then
		call FilterMostNearUnit(g_0, attacked_0)
		set ally_0 = udg_Unit_FilterMostNearUnit_1
	endif
	if ally_0 != null then
		call IssueTargetOrderById(attacker_0, $D000F, ally_0)
	endif
	set attacked_0 = null
	set attacker_0 = null
	set ally_0 = null
endfunction

function Trig_Heroes_more_attacked_priority_when_guards_Conditions takes nothing returns boolean
	return ((GetUnitState(GetTriggerUnit(), UNIT_STATE_LIFE_1) >= .405) and (IsUnitIllusion(GetTriggerUnit()) == false) and (GetPlayerId(GetOwningPlayer(GetAttacker())) >= 9)) and (GetUnitTypeId(GetTriggerUnit()) == 'e002' or GetUnitTypeId(GetTriggerUnit()) == 'h01K' or GetUnitTypeId(GetTriggerUnit()) == 'n00Y' or GetUnitTypeId(GetTriggerUnit()) == 'o003')
endfunction

function InitTrig_Heroes_more_attacked_priority_when_guards takes nothing returns nothing
	local integer index = 0
	set gg_trg_Heroes_more_attacked_priority_when_guards_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Heroes_more_attacked_priority_when_guards_1, Player(index_0), EVENT_PLAYER_UNIT_ATTACKED_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Heroes_more_attacked_priority_when_guards_1, Condition(function Trig_Heroes_more_attacked_priority_when_guards_Conditions))
	call TriggerAddAction(gg_trg_Heroes_more_attacked_priority_when_guards_1, function Trig_Heroes_more_attacked_priority_when_guards_Actions)
endfunction

function Trig_Player_Fast_Purchase_System_Actions takes nothing returns nothing
	local unit caster = GetTriggerUnit()
	local integer pid = GetPlayerId(GetOwningPlayer(caster_0)) + 1
	if (GetIssuedOrderId() == $D0057) then
		set udg_Boolean_Player_Fast_Purchase_1[pid_0] = true
	endif
	if (GetIssuedOrderId() == $D0058) then
		set udg_Boolean_Player_Fast_Purchase_1[pid_0] = false
	endif
	set caster_0 = null
endfunction

function Trig_Player_Fast_Purchase_System_Conditions takes nothing returns boolean
	return GetUnitAbilityLevel(GetTriggerUnit(), 'A0MG') > 0
endfunction

function InitTrig_Player_Fast_Purchase_System takes nothing returns nothing
	local integer index = 0
	set gg_trg_Player_Fast_Purchase_System_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Player_Fast_Purchase_System_1, Player(index_0), EVENT_PLAYER_UNIT_ISSUED_ORDER_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Player_Fast_Purchase_System_1, Condition(function Trig_Player_Fast_Purchase_System_Conditions))
	call TriggerAddAction(gg_trg_Player_Fast_Purchase_System_1, function Trig_Player_Fast_Purchase_System_Actions)
endfunction

function Trig_Show_hint_abount_hints_Actions takes nothing returns nothing
	call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS_1, 15., "Советуем просмотреть все игровые команды в меню Инфо (|Cfffed312F9|r)")
endfunction

function InitTrig_Show_hint_abount_hints takes nothing returns nothing
	set gg_trg_Show_hint_abount_hints_1 = CreateTrigger()
	call TriggerRegisterTimerEventSingle(gg_trg_Show_hint_abount_hints_1, 120.)
	call TriggerRegisterTimerEventSingle(gg_trg_Show_hint_abount_hints_1, 600.)
	call TriggerAddAction(gg_trg_Show_hint_abount_hints_1, function Trig_Show_hint_abount_hints_Actions)
endfunction

function Trig_Show_Hint_Abount_Items_Actions takes nothing returns nothing
	call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS_1, 15., "|cff32cd32Подсказка:|r")
	call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS_1, 15., "По умолчанию, если вы покупаете рецепт на предмет, то при достаточном количестве золота, вы получите его сразу. В сумму требуемого золота входят ваши предметы, необходимые для сборки!!!")
endfunction

function InitTrig_Show_Hint_Abount_Items takes nothing returns nothing
	set gg_trg_Show_Hint_Abount_Items_1 = CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(gg_trg_Show_Hint_Abount_Items_1, 600.)
	call TriggerAddAction(gg_trg_Show_Hint_Abount_Items_1, function Trig_Show_Hint_Abount_Items_Actions)
endfunction

function Trig_Hint_About_Random_Actions takes nothing returns nothing
	call DisplayTextToForce(bj_FORCE_ALL_PLAYERS_1, "Вы можете выбрать случайного героя, написав в чат |cff99ccff-r/-random/-р/-рандом|r, и получить дополнительно |cFFFFFF00+250|r золота.")
endfunction

function InitTrig_Hint_About_Random takes nothing returns nothing
	set gg_trg_Hint_About_Random_1 = CreateTrigger()
	call TriggerRegisterTimerEventSingle(gg_trg_Hint_About_Random_1, 13.)
	call TriggerAddAction(gg_trg_Hint_About_Random_1, function Trig_Hint_About_Random_Actions)
endfunction

function Trig_Show_hint_abount_reference_panel_Actions takes nothing returns nothing
	call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS_1, 15., "Вы можете воспользоваться дополнительной информацией в Панели Справки (|Cfffed312F8|r)")
endfunction

function InitTrig_Show_hint_abount_reference_panel takes nothing returns nothing
	set gg_trg_Show_hint_abount_reference_panel_1 = CreateTrigger()
	call TriggerRegisterTimerEventSingle(gg_trg_Show_hint_abount_reference_panel_1, 200.)
	call TriggerRegisterTimerEventSingle(gg_trg_Show_hint_abount_reference_panel_1, 1200.)
	call TriggerAddAction(gg_trg_Show_hint_abount_reference_panel_1, function Trig_Show_hint_abount_reference_panel_Actions)
endfunction

function Trig_Show_Ability_Learn_Actions takes nothing returns nothing
	local unit hero = GetLearningUnit()
	local player p = GetOwningPlayer(hero_0)
	local integer id = GetLearnedSkill()
	if IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS_1) and udg_System_ShowAbil_And_Items_Hint_1[GetPlayerId(GetLocalPlayer()) + 1] then
		call DisplayTextToPlayer(GetLocalPlayer(), .0, .0, udg_ColorString_1[GetPlayerId(p_0) + 1] + GetPlayerName(p_0) + "|r изучил способность |cff99ccff" + GetObjectName(id_0) + "|r ( |cFF969696" + I2S(GetUnitAbilityLevel(hero_0, id_0) - 1) + "|r»»|cff99ccff" + I2S(GetUnitAbilityLevel(hero_0, id_0)) + "|r )")
	endif
	set p_0 = null
	set hero_0 = null
endfunction

function Trig_Show_Ability_Learn_Conditions takes nothing returns boolean
	return ((IsUnitType(GetLearningUnit(), UNIT_TYPE_HERO_1)) and (GetPlayerId(GetOwningPlayer(GetLearningUnit())) <= 8)) != null
endfunction

function InitTrig_Show_Ability_Learn takes nothing returns nothing
	local integer index = 0
	set gg_trg_Show_Ability_Learn_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Show_Ability_Learn_1, Player(index_0), EVENT_PLAYER_HERO_SKILL_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Show_Ability_Learn_1, Condition(function Trig_Show_Ability_Learn_Conditions))
	call TriggerAddAction(gg_trg_Show_Ability_Learn_1, function Trig_Show_Ability_Learn_Actions)
endfunction

function Trig_System_Personal_Items_Buy_Item_Actions takes nothing returns nothing
	local item it = GetSoldItem()
	local string name = GetItemName(it_0)
	local player p
	if GetItemType(GetSoldItem()) == ITEM_TYPE_UNKNOWN_1 then
		set p_0 = GetOwningPlayer(GetBuyingUnit())
		call SetItemUserData(it_0, GetPlayerId(GetOwningPlayer(GetBuyingUnit())) + 1)
		if IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS_1) and udg_System_ShowAbil_And_Items_Hint_1[GetPlayerId(GetLocalPlayer()) + 1] and GetItemType(GetSoldItem()) == ITEM_TYPE_PERMANENT_1 then
			call DisplayTextToPlayer(GetLocalPlayer(), .0, .0, udg_ColorString_1[GetPlayerId(p_0) + 1] + GetPlayerName(p_0) + "|r приобрел предмет |cff99ccff" + name_0 + "|r")
		endif
		if IsPlayerInForce(GetLocalPlayer(), bj_FORCE_ALL_PLAYERS_1) and GetLocalPlayer() == p_0 and udg_Count_Item_Tips_Message_1[GetPlayerId(p_0) + 1] <= 2 then
			call DisplayTextToPlayer(GetLocalPlayer(), .0, .0, "|cff99ccffВНИМАНИЕ|r: ЛЮБОЙ предмет (даже сборный) вы можете купить |cFFFF0000Одним Нажатием|r (при достаточном количестве золота и места).")
			set udg_Count_Item_Tips_Message_1[GetPlayerId(p_0) + 1] = udg_Count_Item_Tips_Message_1[GetPlayerId(p_0) + 1] + 1
		endif
		set it_0 = null
	endif
	set p_0 = null
endfunction

function InitTrig_System_Personal_Items_Buy_Item takes nothing returns nothing
	local integer index = 0
	set gg_trg_System_Personal_Items_Buy_Item_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_System_Personal_Items_Buy_Item_1, Player(index_0), EVENT_PLAYER_UNIT_SELL_ITEM_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddAction(gg_trg_System_Personal_Items_Buy_Item_1, function Trig_System_Personal_Items_Buy_Item_Actions)
endfunction

function Trig_System_Personal_Items_Pick_Up_Item_Actions takes nothing returns nothing
	local item it = GetManipulatedItem()
	local integer id = GetItemTypeId(it_0)
	local integer cv = GetItemUserData(it_0)
	local real x = GetUnitX(GetManipulatingUnit())
	local real y = GetUnitY(GetManipulatingUnit())
	if GetItemType(it_0) != ITEM_TYPE_CHARGED_1 and GetItemType(it_0) != ITEM_TYPE_POWERUP_1 then
		if (cv_0 == 0) or (cv_0 == (GetPlayerId(GetOwningPlayer(GetManipulatingUnit())) + 1)) then
		else
			call SetItemPosition(it_0, x_0, y_0)
			call SimError(GetOwningPlayer(GetManipulatingUnit()), "Вы не можете подбирать чужие предметы")
		endif
	endif
	set it_0 = null
endfunction

function InitTrig_System_Personal_Items_Pick_Up_Item takes nothing returns nothing
	local integer index = 0
	set gg_trg_System_Personal_Items_Pick_Up_Item_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_System_Personal_Items_Pick_Up_Item_1, Player(index_0), EVENT_PLAYER_UNIT_PICKUP_ITEM_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddAction(gg_trg_System_Personal_Items_Pick_Up_Item_1, function Trig_System_Personal_Items_Pick_Up_Item_Actions)
endfunction

function Trig_no_attack_Conditions takes nothing returns boolean
	return (IsUnitAlly(GetTriggerUnit(), GetOwningPlayer(GetAttacker())))
endfunction

function Trig_no_attack_Actions takes nothing returns nothing
	call IssueImmediateOrderById(GetAttacker(), $D0004)
endfunction

function InitTrig_no_attack takes nothing returns nothing
	set gg_trg_no_attack_1 = CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(gg_trg_no_attack_1, EVENT_PLAYER_UNIT_ATTACKED_1)
	call TriggerAddCondition(gg_trg_no_attack_1, Condition(function Trig_no_attack_Conditions))
	call TriggerAddAction(gg_trg_no_attack_1, function Trig_no_attack_Actions)
endfunction

function Trig_Select_Refrence_Panel_Actions takes nothing returns nothing
	if (GetLocalPlayer() == GetTriggerPlayer()) then
		call ClearSelection()
	endif
endfunction

function Trig_Select_Refrence_Panel_Conditions takes nothing returns boolean
	return GetUnitTypeId(GetTriggerUnit()) == 'h00C' and GetTriggerPlayer() != GetOwningPlayer(GetTriggerUnit())
endfunction

function InitTrig_Select_Refrence_Panel takes nothing returns nothing
	local integer index = 0
	set gg_trg_Select_Refrence_Panel_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Select_Refrence_Panel_1, Player(index_0), EVENT_PLAYER_UNIT_SELECTED_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Select_Refrence_Panel_1, Condition(function Trig_Select_Refrence_Panel_Conditions))
	call TriggerAddAction(gg_trg_Select_Refrence_Panel_1, function Trig_Select_Refrence_Panel_Actions)
endfunction

function Trig_ShopAnimation_Actions takes nothing returns nothing
	local unit shop = GetTriggerUnit()
	local integer id = GetUnitTypeId(shop_0)
	local player p = GetTriggerPlayer()
	local string s
	local boolean select = false
	if ((id_0 == 'h00D') or (id_0 == 'h000') or (id_0 == 'h002')) and GetLocalPlayer() == p_0 then
		call SetUnitAnimation(shop_0, "Stand Work")
		set select_0 = true
	endif
	if (id_0 == 'h001') and GetLocalPlayer() == p_0 then
		call SetUnitAnimation(shop_0, "Stand Victory")
		set select_0 = true
	endif
	if (id_0 == 'h00S') and GetLocalPlayer() == p_0 then
		call SetUnitAnimation(shop_0, "Stand Work")
		set select_0 = true
	endif
	set s_0 = ""
	if (id_0 == 'h003') then
		if GetLocalPlayer() == p_0 then
			set s_0 = "Abilities\\Spells\\Human\\MagicSentry\\MagicSentryCaster.mdl"
		endif
		set udg_ShopEffectSelectedForPlayer_1[GetPlayerId(p_0)] = AddSpecialEffectTarget(s_0, shop_0, "overhead")
		set select_0 = true
	endif
	set s_0 = ""
	if (id_0 == 'h00Y') then
		if GetLocalPlayer() == p_0 then
			set s_0 = "Abilities\\Spells\\Orc\\SpiritLink\\SpiritLinkZapTarget.mdl"
		endif
		set udg_ShopEffectSelectedForPlayer_1[GetPlayerId(p_0)] = AddSpecialEffectTarget(s_0, shop_0, "head")
		set select_0 = true
	endif
	set udg_ShopSelectedForPlayer_1[GetPlayerId(p_0)] = shop_0
	set shop_0 = null
	set p_0 = null
endfunction

function Trig_ShopAnimation_Conditions takes nothing returns boolean
	return ((IsUnitType(GetTriggerUnit(), UNIT_TYPE_STRUCTURE_1)) and (udg_ShopSelectedForPlayer_1[GetPlayerId(GetTriggerPlayer())] != GetTriggerUnit())) != null
endfunction

function InitTrig_ShopAnimation takes nothing returns nothing
	local integer index = 0
	set gg_trg_ShopAnimation_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_ShopAnimation_1, Player(index_0), EVENT_PLAYER_UNIT_SELECTED_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_ShopAnimation_1, Condition(function Trig_ShopAnimation_Conditions))
	call TriggerAddAction(gg_trg_ShopAnimation_1, function Trig_ShopAnimation_Actions)
endfunction

function Trig_ShopStopAnimation_Actions takes nothing returns nothing
	local unit shop = GetTriggerUnit()
	local integer id = GetUnitTypeId(shop_0)
	local player p = GetTriggerPlayer()
	if ((id_0 == 'h00D') or (id_0 == 'h000') or (id_0 == 'h002') or (id_0 == 'h00S') or (id_0 == 'h001')) and GetLocalPlayer() == p_0 then
		call SetUnitAnimation(shop_0, "Stand")
	endif
	if (id_0 == 'h003') or (id_0 == 'h00Y') then
		call DestroyEffect(udg_ShopEffectSelectedForPlayer_1[GetPlayerId(p_0)])
	endif
	set shop_0 = null
	set p_0 = null
endfunction

function Trig_ShopStopAnimation_Conditions takes nothing returns boolean
	return (IsUnitType(GetTriggerUnit(), UNIT_TYPE_STRUCTURE_1)) != null
endfunction

function InitTrig_ShopStopAnimation takes nothing returns nothing
	local integer index = 0
	set gg_trg_ShopStopAnimation_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_ShopStopAnimation_1, Player(index_0), EVENT_PLAYER_UNIT_DESELECTED_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_ShopStopAnimation_1, Condition(function Trig_ShopStopAnimation_Conditions))
	call TriggerAddAction(gg_trg_ShopStopAnimation_1, function Trig_ShopStopAnimation_Actions)
endfunction

function Trig_RedMarkToUnit_Periodic_Move_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit u = LoadUnitHandle(udg_hash_1, h_0, 1)
	local unit mark = LoadUnitHandle(udg_hash_1, h_0, 2)
	if GetUnitState(u_0, UNIT_STATE_LIFE_1) > .405 then
		call SetUnitX(mark_0, GetUnitX(u_0))
		call SetUnitY(mark_0, GetUnitY(u_0))
	else
		call RemoveUnit(mark_0)
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set u_0 = null
	set mark_0 = null
endfunction

function Trig_RedMarkToUnit_Actions takes nothing returns nothing
	local unit u = GetEnteringUnit()
	local integer id = GetUnitTypeId(u_0)
	local unit mark
	local timer t
	local integer h
	if IsUnitIllusion(u_0) == false and ((id_0 == 'n00K') or (id_0 == 'n00O') or (id_0 == 'u008') or (id_0 == 'n00V') or (id_0 == 'u00C') or (id_0 == 'n015') or (id_0 == 'n019') or (id_0 == 'n01C') or (id_0 == 'n009') or (id_0 == 'n00E') or (id_0 == 'N000') or (id_0 == 'N00J')) then
		set mark_0 = CreateUnit(Player($B), 'n01M', GetUnitX(u_0), GetUnitY(u_0), .0)
		call SetUnitPathing(mark_0, false)
		set t_0 = CreateTimer()
		set h_0 = GetHandleId(t_0)
		call SaveUnitHandle(udg_hash_1, h_0, 1, u_0)
		call SaveUnitHandle(udg_hash_1, h_0, 2, mark_0)
		call TimerStart(t_0, .1, true, function Trig_RedMarkToUnit_Periodic_Move_Actions)
		set mark_0 = null
		set t_0 = null
	endif
	set u_0 = null
endfunction

function InitTrig_RedMarkToUnit takes nothing returns nothing
	local region rectRegion = CreateRegion()
	set gg_trg_RedMarkToUnit_1 = CreateTrigger()
	call RegionAddRect(rectRegion_0, bj_mapInitialPlayableArea_1)
	call TriggerRegisterEnterRegion(gg_trg_RedMarkToUnit_1, rectRegion_0, null)
	call TriggerAddAction(gg_trg_RedMarkToUnit_1, function Trig_RedMarkToUnit_Actions)
endfunction

function Trig_UnSelectedDummyRedMark_Actions takes nothing returns nothing
	if (GetLocalPlayer() == GetTriggerPlayer()) then
		call ClearSelection()
	endif
endfunction

function Trig_UnSelectedDummyRedMark_Conditions takes nothing returns boolean
	return GetUnitTypeId(GetTriggerUnit()) == 'n01M'
endfunction

function InitTrig_UnSelectedDummyRedMark takes nothing returns nothing
	local integer index = 0
	set gg_trg_UnSelectedDummyRedMark_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_UnSelectedDummyRedMark_1, Player(index_0), EVENT_PLAYER_UNIT_SELECTED_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_UnSelectedDummyRedMark_1, Condition(function Trig_UnSelectedDummyRedMark_Conditions))
	call TriggerAddAction(gg_trg_UnSelectedDummyRedMark_1, function Trig_UnSelectedDummyRedMark_Actions)
endfunction

function Trig_SpecEffect_on_Casters_Animation_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster1 = LoadUnitHandle(udg_hash_1, h_0, 1)
	local unit caster2 = LoadUnitHandle(udg_hash_1, h_0, 2)
	if GetUnitState(caster1_0, UNIT_STATE_LIFE_1) > .405 or GetUnitState(caster2_0, UNIT_STATE_LIFE_1) > .405 then
		if GetUnitState(caster1_0, UNIT_STATE_LIFE_1) > .405 then
			call SetUnitAnimation(caster1_0, "spell")
		else
			call RemoveSavedHandle(udg_hash_1, h_0, 1)
		endif
		if GetUnitState(caster2_0, UNIT_STATE_LIFE_1) > .405 then
			call SetUnitAnimation(caster2_0, "spell")
		else
			call RemoveSavedHandle(udg_hash_1, h_0, 2)
		endif
	else
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set caster1_0 = null
	set caster2_0 = null
endfunction

function Trig_SpecEffect_on_Casters_Actions takes nothing returns nothing
	local unit u
	local timer t
	local integer h
	local real time
	set u_0[1] = gg_unit_o003_0028_1
	set u_0[2] = gg_unit_h01K_0109_1
	set u_0[3] = gg_unit_e002_0108_1
	set u_0[4] = gg_unit_n00Y_0101_1
	set u_0[5] = gg_unit_o003_0027_1
	set u_0[6] = gg_unit_h01K_0100_1
	set u_0[7] = gg_unit_e002_0106_1
	set u_0[8] = gg_unit_n00Y_0102_1
	set t_0[1] = CreateTimer()
	set h_0[1] = GetHandleId(t_0[1])
	set t_0[2] = CreateTimer()
	set h_0[2] = GetHandleId(t_0[2])
	set t_0[3] = CreateTimer()
	set h_0[3] = GetHandleId(t_0[3])
	set t_0[4] = CreateTimer()
	set h_0[4] = GetHandleId(t_0[4])
	set time_0[1] = .867
	set time_0[2] = 1.33
	set time_0[3] = 2.666
	set time_0[4] = 1.167
	call SaveUnitHandle(udg_hash_1, h_0[1], 1, u_0[1])
	call SaveUnitHandle(udg_hash_1, h_0[1], 2, u_0[5])
	call SaveReal(udg_hash_1, h_0[1], 3, time_0[1])
	call SaveUnitHandle(udg_hash_1, h_0[2], 1, u_0[2])
	call SaveUnitHandle(udg_hash_1, h_0[2], 2, u_0[6])
	call SaveReal(udg_hash_1, h_0[2], 3, time_0[2])
	call SaveUnitHandle(udg_hash_1, h_0[3], 1, u_0[3])
	call SaveUnitHandle(udg_hash_1, h_0[3], 2, u_0[7])
	call SaveReal(udg_hash_1, h_0[3], 3, time_0[3])
	call SaveUnitHandle(udg_hash_1, h_0[4], 1, u_0[4])
	call SaveUnitHandle(udg_hash_1, h_0[4], 2, u_0[8])
	call SaveReal(udg_hash_1, h_0[4], 3, time_0[4])
	call TimerStart(t_0[1], time_0[1], true, function Trig_SpecEffect_on_Casters_Animation_Actions)
	call TimerStart(t_0[2], time_0[2], true, function Trig_SpecEffect_on_Casters_Animation_Actions)
	call TimerStart(t_0[3], time_0[3], true, function Trig_SpecEffect_on_Casters_Animation_Actions)
	call TimerStart(t_0[4], time_0[4], true, function Trig_SpecEffect_on_Casters_Animation_Actions)
	set u_0[1] = null
	set u_0[2] = null
	set u_0[3] = null
	set u_0[4] = null
	set u_0[5] = null
	set u_0[6] = null
	set u_0[7] = null
	set u_0[8] = null
	set t_0[1] = null
	set t_0[2] = null
	set t_0[3] = null
	set t_0[4] = null
endfunction

function InitTrig_SpecEffect_on_Casters takes nothing returns nothing
	set gg_trg_SpecEffect_on_Casters_1 = CreateTrigger()
	call TriggerRegisterTimerEvent(gg_trg_SpecEffect_on_Casters_1, .0, false)
	call TriggerAddAction(gg_trg_SpecEffect_on_Casters_1, function Trig_SpecEffect_on_Casters_Actions)
endfunction

function Trig_PortalSpecEffects_Peridoic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit dummi = LoadUnitHandle(udg_hash_1, h_0, 1)
	local unit missile = LoadUnitHandle(udg_hash_1, h_0, 2)
	local real angle = LoadReal(udg_hash_1, h_0, 3)
	local integer wait = LoadInteger(udg_hash_1, h_0, 4)
	local real x = GetRectCenterX(gg_rct_cast_magi_1) + 310. * Cos(angle_0 * bj_DEGTORAD_1)
	local real y = GetRectCenterY(gg_rct_cast_magi_1) + 310. * Sin(angle_0 * bj_DEGTORAD_1)
	if wait_0 < 50 then
		set wait_0 = wait_0 + 1
		call SaveInteger(udg_hash_1, h_0, 4, wait_0)
	else
		set wait_0 = 0
		call SaveInteger(udg_hash_1, h_0, 4, wait_0)
		call DestroyEffect(AddSpecialEffectTarget("s_ShadowEruption_Rain.mdl", dummi_0, "origin"))
	endif
	call SetUnitPosition(missile_0, x_0, y_0)
	call SetUnitFacing(missile_0, angle_0 + 90.)
	set angle_0 = angle_0 + 7.2
	call SaveReal(udg_hash_1, h_0, 3, angle_0)
	set dummi_0 = null
	set missile_0 = null
	set t_0 = null
endfunction

function Trig_PortalSpecEffects_Actions takes nothing returns nothing
	local unit dummi = CreateUnit(Player($F), 'h00U', GetRectCenterX(gg_rct_cast_magi_1) + 20., GetRectCenterY(gg_rct_cast_magi_1) + 30., .0)
	local unit missile = CreateUnit(Player($F), 'h00U', GetRectCenterX(gg_rct_cast_magi_1), GetRectCenterY(gg_rct_cast_magi_1), .0)
	local effect ef = AddSpecialEffectTarget("Abilities\\Spells\\Undead\\OrbOfDeath\\OrbOfDeathMissile.mdl", missile_0, "origin")
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	call SetUnitScale(dummi_0, 2., 2., 2.)
	call UnitAddAbility(missile_0, 'Amrf')
	call UnitRemoveAbility(missile_0, 'Amrf')
	call SetUnitFlyHeight(missile_0, 150., .0)
	call SaveUnitHandle(udg_hash_1, h_0, 1, dummi_0)
	call SaveUnitHandle(udg_hash_1, h_0, 2, missile_0)
	call SaveReal(udg_hash_1, h_0, 3, .0)
	call SaveInteger(udg_hash_1, h_0, 4, 0)
	call TimerStart(t_0, .04, true, function Trig_PortalSpecEffects_Peridoic_Actions)
	set dummi_0 = null
	set missile_0 = null
	set ef_0 = null
	set t_0 = null
endfunction

function InitTrig_PortalSpecEffects takes nothing returns nothing
	set gg_trg_PortalSpecEffects_1 = CreateTrigger()
	call TriggerRegisterTimerEvent(gg_trg_PortalSpecEffects_1, 2., false)
	call TriggerAddAction(gg_trg_PortalSpecEffects_1, function Trig_PortalSpecEffects_Actions)
endfunction

function Trig_Gates_Start_Animation_Actions takes nothing returns nothing
	call SetDoodadAnimationRect(bj_mapInitialPlayableArea_1, 'D01A', "stand alternate", false)
endfunction

function InitTrig_Gates_Start_Animation takes nothing returns nothing
	set gg_trg_Gates_Start_Animation_1 = CreateTrigger()
	call TriggerRegisterTimerEventSingle(gg_trg_Gates_Start_Animation_1, 2.)
	call TriggerAddAction(gg_trg_Gates_Start_Animation_1, function Trig_Gates_Start_Animation_Actions)
endfunction

function Trig_Unstuck_15sec_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit hero = LoadUnitHandle(udg_hash_1, h_0, 1)
	local real x = GetRectCenterX(gg_rct_Respawn_Heroes_1)
	local real y = GetRectCenterY(gg_rct_Respawn_Heroes_1)
	local camerasetup theCam = CreateCameraSetup()
	call PauseUnit(hero_0, false)
	call SetUnitPosition(hero_0, x_0, y_0)
	if GetLocalPlayer() == GetOwningPlayer(hero_0) then
		call DisplayTextToPlayer(GetOwningPlayer(hero_0), 0, 0, "|cff99ccffВНИМАНИЕ!!!|r|nВаш герой отморозился и был перемещен в центр базы.")
		call CameraSetupSetField(theCam_0, CAMERA_FIELD_TARGET_DISTANCE_1, GetCameraField(CAMERA_FIELD_TARGET_DISTANCE_1), 0)
		call CameraSetupSetField(theCam_0, CAMERA_FIELD_FARZ_1, GetCameraField(CAMERA_FIELD_FARZ_1), 0)
		call CameraSetupSetField(theCam_0, CAMERA_FIELD_ZOFFSET_1, GetCameraField(CAMERA_FIELD_ZOFFSET_1), 0)
		call CameraSetupSetField(theCam_0, CAMERA_FIELD_ANGLE_OF_ATTACK_1, bj_RADTODEG_1 * GetCameraField(CAMERA_FIELD_ANGLE_OF_ATTACK_1), 0)
		call CameraSetupSetField(theCam_0, CAMERA_FIELD_FIELD_OF_VIEW_1, bj_RADTODEG_1 * GetCameraField(CAMERA_FIELD_FIELD_OF_VIEW_1), 0)
		call CameraSetupSetField(theCam_0, CAMERA_FIELD_ROLL_1, bj_RADTODEG_1 * GetCameraField(CAMERA_FIELD_ROLL_1), 0)
		call CameraSetupSetField(theCam_0, CAMERA_FIELD_ROTATION_1, bj_RADTODEG_1 * GetCameraField(CAMERA_FIELD_ROTATION_1), 0)
		call CameraSetupSetDestPosition(theCam_0, x_0, y_0, 0)
		call CameraSetupApplyForceDuration(theCam_0, true, 0)
		call ClearSelection()
		call SelectUnit(hero_0, true)
	endif
	call DestroyTimer(t_0)
	call FlushChildHashtable(udg_hash_1, h_0)
	set t_0 = null
	set hero_0 = null
endfunction

function Trig_PlayerEnterGameCommand_Actions takes nothing returns nothing
	local player p = GetTriggerPlayer()
	local string s = GetEventPlayerChatString()
	local unit hero
	local timer t
	local boolean end
	local integer random
	if ((s_0 == "-r") or (s_0 == "-random") or (s_0 == "-р") or (s_0 == "-рандом")) and udg_Is_Player_Got_Randomed_1[GetPlayerId(p_0) + 1] == false then
		set udg_Is_Player_Got_Randomed_1[GetPlayerId(p_0) + 1] = true
		set random_0 = GetRandomInt(1, udg_Total_Heroes_Count_1)
		set udg_Hero_Randomed_1 = CreateUnit(p_0, udg_Heroes_Types_1[udg_Heroes_Random_Data_1[random_0]], 4925., 3900., .0)
		set udg_Heroes_Random_Data_1[random_0] = udg_Heroes_Random_Data_1[udg_Total_Heroes_Count_1]
		set udg_Total_Heroes_Count_1 = udg_Total_Heroes_Count_1 - 1
		call TriggerExecute(gg_trg_Pick_Hero_Upgrade_1)
	endif
	if ((s_0 == "-ms") or (s_0 == "-ск") or (s_0 == "-movespeed") or (s_0 == "-скорость")) and udg_herounit_1[GetPlayerId(p_0) + 1] != null then
		call DisplayTimedTextToPlayer(p_0, .0, .0, 5., GetUnitName(udg_herounit_1[GetPlayerId(p_0) + 1]) + " перемещается со скоростью = |cff99ccff" + I2S(R2I(GetUnitMoveSpeed(udg_herounit_1[GetPlayerId(p_0) + 1]))) + "|r")
	endif
	if (s_0 == "-c") or (s_0 == "-о") or (s_0 == "-clear") or (s_0 == "-очистить") then
		if (GetLocalPlayer() == p_0) then
			call ClearTextMessages()
		endif
	endif
	if (s_0 == "-us") or (s_0 == "-unstuck") then
		if (GetLocalPlayer() == p_0) then
			call DisplayTextToPlayer(p_0, .0, .0, "|cff99ccffВНИМАНИЕ!!!|r")
			call DisplayTextToPlayer(p_0, .0, .0, "Ваш герой заморожен, через 15 секунд он будет перемещен в центр базы.")
		endif
		set hero_0 = udg_herounit_1[GetPlayerId(p_0) + 1]
		set t_0 = CreateTimer()
		call PauseUnit(hero_0, true)
		call SaveUnitHandle(udg_hash_1, GetHandleId(t_0), 1, hero_0)
		call TimerStart(t_0, 15., false, function Trig_Unstuck_15sec_Actions)
		set hero_0 = null
		set t_0 = null
	endif
	if (s_0 == "-shh") or (s_0 == "-show hero hints") then
		set end_0 = false
		if udg_System_ShowAbil_And_Items_Hint_1[GetPlayerId(p_0) + 1] then
			if GetLocalPlayer() == p_0 then
				call DisplayTextToPlayer(GetLocalPlayer(), .0, .0, "Подсказки о покупке предметов и изучении способностей отключены.")
			endif
			set end_0 = true
			set udg_System_ShowAbil_And_Items_Hint_1[GetPlayerId(p_0) + 1] = false
		endif
		if udg_System_ShowAbil_And_Items_Hint_1[GetPlayerId(p_0) + 1] == false and end_0 == false then
			if GetLocalPlayer() == p_0 then
				call DisplayTextToPlayer(GetLocalPlayer(), .0, .0, "Подсказки о покупке предметов и изучении способностей включены.")
			endif
			set udg_System_ShowAbil_And_Items_Hint_1[GetPlayerId(p_0) + 1] = true
		endif
	endif
	if (s_0 == "-fast start") or (s_0 == "-fs") or (s_0 == "+") then
		if (udg_Is_Player_Fast_Wave_Start_1[GetPlayerId(p_0) + 1] == false) and (udg_Is_Fast_Wave_Start_On_Off_1) then
			set udg_Count_Players_Fast_Wave_Start_1 = (udg_Count_Players_Fast_Wave_Start_1 + 1)
			set udg_Is_Player_Fast_Wave_Start_1[GetPlayerId(p_0) + 1] = true
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS_1, (udg_ColorString_1[GetPlayerId(p_0) + 1] + (GetPlayerName(p_0) + ("|r |cFF969696хочет немедленно начать волну!|r (|Cfffed312" + (I2S(udg_Count_Players_Fast_Wave_Start_1) + ("|r|cFF969696/|r|Cfffed312" + (I2S(CountPlayersInForceBJ(udg_IGRAET_1)) + "|r )")))))))
			if udg_Count_Players_Fast_Wave_Start_1 >= CountPlayersInForceBJ(udg_IGRAET_1) then
				call StartTimerBJ(udg_Timer_Nomera_Volni_1, false, 1.)
			endif
		endif
	endif
	set p_0 = null
endfunction

function InitTrig_PlayerEnterGameCommand takes nothing returns nothing
	local integer index = 0
	set gg_trg_PlayerEnterGameCommand_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerChatEvent(gg_trg_PlayerEnterGameCommand_1, Player(index_0), "-", false)
		call TriggerRegisterPlayerChatEvent(gg_trg_PlayerEnterGameCommand_1, Player(index_0), "+", true)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddAction(gg_trg_PlayerEnterGameCommand_1, function Trig_PlayerEnterGameCommand_Actions)
endfunction

function Trig_Unstuck_Ability_15sec_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit hero = LoadUnitHandle(udg_hash_1, h_0, 1)
	local real x = GetRectCenterX(gg_rct_Respawn_Heroes_1)
	local real y = GetRectCenterY(gg_rct_Respawn_Heroes_1)
	local camerasetup theCam = CreateCameraSetup()
	call PauseUnit(hero_0, false)
	call SetUnitPosition(hero_0, x_0, y_0)
	if GetLocalPlayer() == GetOwningPlayer(hero_0) then
		call DisplayTextToPlayer(GetOwningPlayer(hero_0), 0, 0, "|cff99ccffВНИМАНИЕ!!!|r|nВаш герой отморозился и был перемещен в центр базы.")
		call CameraSetupSetField(theCam_0, CAMERA_FIELD_TARGET_DISTANCE_1, GetCameraField(CAMERA_FIELD_TARGET_DISTANCE_1), 0)
		call CameraSetupSetField(theCam_0, CAMERA_FIELD_FARZ_1, GetCameraField(CAMERA_FIELD_FARZ_1), 0)
		call CameraSetupSetField(theCam_0, CAMERA_FIELD_ZOFFSET_1, GetCameraField(CAMERA_FIELD_ZOFFSET_1), 0)
		call CameraSetupSetField(theCam_0, CAMERA_FIELD_ANGLE_OF_ATTACK_1, bj_RADTODEG_1 * GetCameraField(CAMERA_FIELD_ANGLE_OF_ATTACK_1), 0)
		call CameraSetupSetField(theCam_0, CAMERA_FIELD_FIELD_OF_VIEW_1, bj_RADTODEG_1 * GetCameraField(CAMERA_FIELD_FIELD_OF_VIEW_1), 0)
		call CameraSetupSetField(theCam_0, CAMERA_FIELD_ROLL_1, bj_RADTODEG_1 * GetCameraField(CAMERA_FIELD_ROLL_1), 0)
		call CameraSetupSetField(theCam_0, CAMERA_FIELD_ROTATION_1, bj_RADTODEG_1 * GetCameraField(CAMERA_FIELD_ROTATION_1), 0)
		call CameraSetupSetDestPosition(theCam_0, x_0, y_0, 0)
		call CameraSetupApplyForceDuration(theCam_0, true, 0)
		call ClearSelection()
		call SelectUnit(hero_0, true)
	endif
	call DestroyTimer(t_0)
	call FlushChildHashtable(udg_hash_1, h_0)
	set t_0 = null
	set hero_0 = null
endfunction

function Trig_PlayerUseSpellGameCommand_Actions takes nothing returns nothing
	local player p = GetOwningPlayer(GetSpellAbilityUnit())
	local integer id = GetSpellAbilityId()
	local unit hero
	local timer t
	local boolean end
	if (id_0 == 'A0MD') and udg_herounit_1[GetPlayerId(p_0) + 1] != null then
		call DisplayTimedTextToPlayer(p_0, .0, .0, 5., GetUnitName(udg_herounit_1[GetPlayerId(p_0) + 1]) + " перемещается со скоростью = |cff99ccff" + I2S(R2I(GetUnitMoveSpeed(udg_herounit_1[GetPlayerId(p_0) + 1]))) + "|r")
	endif
	if (id_0 == 'A0MB') then
		if (GetLocalPlayer() == p_0) then
			call ClearTextMessages()
		endif
	endif
	if (id_0 == 'A0ME') then
		if (GetLocalPlayer() == p_0) then
			call DisplayTextToPlayer(p_0, .0, .0, "|cff99ccffВНИМАНИЕ!!!|r")
			call DisplayTextToPlayer(p_0, .0, .0, "Ваш герой заморожен, через 15 секунд он будет перемещен в центр базы.")
		endif
		set hero_0 = udg_herounit_1[GetPlayerId(p_0) + 1]
		set t_0 = CreateTimer()
		call PauseUnit(hero_0, true)
		call SaveUnitHandle(udg_hash_1, GetHandleId(t_0), 1, hero_0)
		call TimerStart(t_0, 15., false, function Trig_Unstuck_Ability_15sec_Actions)
		set hero_0 = null
		set t_0 = null
	endif
	if (id_0 == 'A0MF') then
		set end_0 = false
		if udg_System_ShowAbil_And_Items_Hint_1[GetPlayerId(p_0) + 1] then
			if GetLocalPlayer() == p_0 then
				call DisplayTextToPlayer(GetLocalPlayer(), .0, .0, "Подсказки о покупке предметов и изучении способностей отключены.")
			endif
			set end_0 = true
			set udg_System_ShowAbil_And_Items_Hint_1[GetPlayerId(p_0) + 1] = false
		endif
		if udg_System_ShowAbil_And_Items_Hint_1[GetPlayerId(p_0) + 1] == false and end_0 == false then
			if GetLocalPlayer() == p_0 then
				call DisplayTextToPlayer(GetLocalPlayer(), .0, .0, "Подсказки о покупке предметов и изучении способностей включены.")
			endif
			set udg_System_ShowAbil_And_Items_Hint_1[GetPlayerId(p_0) + 1] = true
		endif
	endif
	if (id_0 == 'A0MH') then
		if (udg_Is_Player_Fast_Wave_Start_1[GetPlayerId(p_0) + 1] == false) and (udg_Is_Fast_Wave_Start_On_Off_1) then
			set udg_Count_Players_Fast_Wave_Start_1 = (udg_Count_Players_Fast_Wave_Start_1 + 1)
			set udg_Is_Player_Fast_Wave_Start_1[GetPlayerId(p_0) + 1] = true
			call DisplayTextToForce(bj_FORCE_ALL_PLAYERS_1, (udg_ColorString_1[GetPlayerId(p_0) + 1] + (GetPlayerName(p_0) + ("|r |cFF969696хочет немедленно начать волну!|r (|Cfffed312" + (I2S(udg_Count_Players_Fast_Wave_Start_1) + ("|r|cFF969696/|r|Cfffed312" + (I2S(CountPlayersInForceBJ(udg_IGRAET_1)) + "|r )")))))))
			if udg_Count_Players_Fast_Wave_Start_1 >= CountPlayersInForceBJ(udg_IGRAET_1) then
				call StartTimerBJ(udg_Timer_Nomera_Volni_1, false, 1.)
			endif
		endif
	endif
	set p_0 = null
endfunction

function Trig_PlayerUseSpellGameCommand_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0MD' or GetSpellAbilityId() == 'A0MB' or GetSpellAbilityId() == 'A0ME' or GetSpellAbilityId() == 'A0MF' or GetSpellAbilityId() == 'A0MH'
endfunction

function InitTrig_PlayerUseSpellGameCommand takes nothing returns nothing
	local integer index = 0
	set gg_trg_PlayerUseSpellGameCommand_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_PlayerUseSpellGameCommand_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_PlayerUseSpellGameCommand_1, Condition(function Trig_PlayerUseSpellGameCommand_Conditions))
	call TriggerAddAction(gg_trg_PlayerUseSpellGameCommand_1, function Trig_PlayerUseSpellGameCommand_Actions)
endfunction

function Trig_GuardsExorcistDead_Removes_Buffs_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local group g = LoadGroupHandle(udg_hash_1, h_0, 1)
	local unit Picked
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		call DestroyEffect(LoadEffectHandle(udg_hash_1, GetHandleId(Picked_0), $83))
		call SetUnitLifeAndManaRegeneration(Picked_0, "life", -70)
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set Picked_0 = null
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
endfunction

function Trig_GuardsExorcistDead_2and5sec_wait_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer lopa = 0
	loop
		exitwhen lopa_0 > 8
		if (GetLocalPlayer() == Player(lopa_0)) then
			call DisplayTimedTextToPlayer(GetLocalPlayer(), .0, .0, 99999., "|cff99ccffИгрa завершена. Всем игрокам огромное спасибо за участие!!!!|r")
			call CreateFogModifierRadiusLocBJ(true, GetLocalPlayer(), FOG_OF_WAR_VISIBLE_1, GetRectCenter(gg_rct_Center_Vision_1), 650.)
		endif
		call DestroyFogModifier(udg_BaseVisionFogModifier_1[GetPlayerId(Player(lopa_0)) + 1])
		set lopa_0 = lopa_0 + 1
	endloop
endfunction

function Trig_GuardsExorcistDead_3sec_wait_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer lopa = 0
	local unit dammi = CreateUnit(Player($F), 'h00U', GetRectCenterX(gg_rct_cast_magi_1), GetRectCenterY(gg_rct_cast_magi_1), .0)
	local group g = CreateGroup()
	local unit Picked
	call GroupEnumUnitsInRect(g_0, bj_mapInitialPlayableArea_1, null)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 and GetPlayerId(GetOwningPlayer(Picked_0)) <= 8 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
			call KillUnit(Picked_0)
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	loop
		exitwhen lopa_0 > 8
		if (GetLocalPlayer() == Player(lopa_0)) then
			call ClearTextMessages()
			call DisplayTimedTextToPlayer(GetLocalPlayer(), .0, .0, 99999., "|cffff0000Все стражи-чародеи погибли, вы проиграли!!!|r")
			call SetCameraTargetController(dammi_0, .0, .0, false)
		endif
		set lopa_0 = lopa_0 + 1
	endloop
	set t_0 = CreateTimer()
	call TimerStart(t_0, 2.5, false, function Trig_GuardsExorcistDead_2and5sec_wait_Actions)
endfunction

function Trig_GuardsExorcistDead_Actions takes nothing returns nothing
	local timer t
	local integer lopa = 0
	local group g
	local group g2
	local unit Picked
	local unit dammi
	local timer t1
	local integer h1
	if (IsPlayerInForce(GetLocalPlayer(), udg_IGRAET_1)) then
		set udg_CountGuardsExorcist_1 = udg_CountGuardsExorcist_1 - 1
		call DisplayTextToPlayer(GetLocalPlayer(), .0, .0, "|cff99ccffВНИМАНИЕ!!!|r")
		call DisplayTextToPlayer(GetLocalPlayer(), .0, .0, "|cffff0000Один Из Стражей-Чародеев погиб!!!|r В живых осталось: |cff99ccff" + I2S(udg_CountGuardsExorcist_1) + "|r")
		call PingMinimapEx(GetUnitX(GetDyingUnit()), GetUnitY(GetDyingUnit()), 5., $FE, 0, 0, true)
	endif
	loop
		exitwhen lopa_0 > 8
		call SetPlayerState(Player(lopa_0), PLAYER_STATE_RESOURCE_LUMBER_1, GetPlayerState(Player(lopa_0), PLAYER_STATE_RESOURCE_LUMBER_1) - 1)
		set lopa_0 = lopa_0 + 1
	endloop
	if udg_CountGuardsExorcist_1 == 4 or udg_CountGuardsExorcist_1 == 1 then
		set dammi_0 = CreateUnit(Player(0), 'h00U', 1255., -5700., .0)
		call UnitApplyTimedLife(dammi_0, 'BTLF', 5.)
		call SetUnitScale(dammi_0, 3., 3., 3.)
		call DestroyEffect(AddSpecialEffect("Effects\\TheHolyBomb.mdl", 1255., -5700.))
		call DestroyEffect(AddSpecialEffect("Effects\\LightNova.mdl", 1255., -5700.))
		set g_0 = CreateGroup()
		call GroupEnumUnitsInRange(g_0, 1255., -5700., 3000., null)
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 and Picked_0 != null and GetPlayerId(GetOwningPlayer(Picked_0)) >= 9 and GetPlayerId(GetOwningPlayer(Picked_0)) != $F and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call StunUnitTimed(Picked_0, 10.)
				call DestroyEffect(AddSpecialEffectTarget("Effects\\TheHolyBomb.mdl", Picked_0, "origin"))
				call DestroyEffect(AddSpecialEffectTarget("Effects\\DivineRage.mdl", Picked_0, "origin"))
				call SetUnitState(Picked_0, UNIT_STATE_LIFE_1, GetUnitState(Picked_0, UNIT_STATE_LIFE_1) * .5)
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		call GroupClear(g_0)
		call DestroyGroup(g_0)
		set g_0 = null
		set Picked_0 = null
		set g_0 = CreateGroup()
		set g2_0 = CreateGroup()
		call GroupAddGroup(udg_PortalCastersMagi_1, g2_0)
		loop
			set Picked_0 = FirstOfGroup(g2_0)
			exitwhen Picked_0 == null
			if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 and Picked_0 != null then
				call SetUnitLifeAndManaRegeneration(Picked_0, "life", 70)
				call SaveEffectHandle(udg_hash_1, GetHandleId(Picked_0), $83, AddSpecialEffectTarget("Effects\\DivineBarrier.mdl", Picked_0, "origin"))
				call GroupAddUnit(g_0, Picked_0)
			endif
			call GroupRemoveUnit(g2_0, Picked_0)
		endloop
		set t1_0 = CreateTimer()
		set h1_0 = GetHandleId(t1_0)
		call SaveGroupHandle(udg_hash_1, h1_0, 1, g_0)
		call TimerStart(t1_0, 10., false, function Trig_GuardsExorcistDead_Removes_Buffs_Actions)
		set t1_0 = null
		call GroupClear(g2_0)
		call DestroyGroup(g2_0)
		set g2_0 = null
		set Picked_0 = null
	endif
	if udg_CountGuardsExorcist_1 <= 0 then
		set lopa_0 = 0
		call DisableTrigger(gg_trg_Hero_Dead_1)
		call EnableTrigger(gg_trg_PauseUnitWhenDefeat_1)
		set udg_IsGameEnd_1 = true
		loop
			exitwhen lopa_0 > 8
			if (GetLocalPlayer() == Player(lopa_0)) then
				call PanCameraToTimed(GetRectCenterX(gg_rct_cast_magi_1), GetRectCenterY(gg_rct_cast_magi_1), 3.)
			endif
			set lopa_0 = lopa_0 + 1
		endloop
		set g_0 = CreateGroup()
		call GroupEnumUnitsInRect(g_0, bj_mapInitialPlayableArea_1, null)
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 and GetPlayerId(GetOwningPlayer(Picked_0)) <= 8 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call SetUnitPosition(Picked_0, GetRandomReal((GetRectCenterX(gg_rct_cast_magi_1) - 500.), (GetRectCenterX(gg_rct_cast_magi_1) + 500.)), GetRandomReal((GetRectCenterY(gg_rct_cast_magi_1) - 500.), (GetRectCenterY(gg_rct_cast_magi_1) + 500.)))
				call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl", GetUnitX(Picked_0), GetUnitY(Picked_0)))
				call PauseUnit(Picked_0, true)
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		set t_0 = CreateTimer()
		call TimerStart(t_0, 3., false, function Trig_GuardsExorcistDead_3sec_wait_Actions)
	endif
endfunction

function Trig_GuardsExorcistDead_Conditions takes nothing returns boolean
	return (GetUnitTypeId(GetDyingUnit()) == 'h01K') or (GetUnitTypeId(GetDyingUnit()) == 'e002') or (GetUnitTypeId(GetDyingUnit()) == 'n00Y') or (GetUnitTypeId(GetDyingUnit()) == 'o003')
endfunction

function InitTrig_GuardsExorcistDead takes nothing returns nothing
	local integer index = 0
	set gg_trg_GuardsExorcistDead_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_GuardsExorcistDead_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_GuardsExorcistDead_1, Condition(function Trig_GuardsExorcistDead_Conditions))
	call TriggerAddAction(gg_trg_GuardsExorcistDead_1, function Trig_GuardsExorcistDead_Actions)
endfunction

function Trig_PauseUnitWhenDefeat_Func001Func001C takes nothing returns boolean
	return ((1 + GetPlayerId(GetOwningPlayer(GetEnumUnit()))) <= 9)
endfunction

function Trig_PauseUnitWhenDefeat_Func001A takes nothing returns nothing
	if (Trig_PauseUnitWhenDefeat_Func001Func001C()) then
		call KillUnit(GetEnumUnit())
	endif
endfunction

function Trig_PauseUnitWhenDefeat_Actions takes nothing returns nothing
	call ForGroupBJ(GetUnitsInRectAll(bj_mapInitialPlayableArea_1), function Trig_PauseUnitWhenDefeat_Func001A)
endfunction

function InitTrig_PauseUnitWhenDefeat takes nothing returns nothing
	set gg_trg_PauseUnitWhenDefeat_1 = CreateTrigger()
	call DisableTrigger(gg_trg_PauseUnitWhenDefeat_1)
	call TriggerRegisterTimerEventPeriodic(gg_trg_PauseUnitWhenDefeat_1, .05)
	call TriggerAddAction(gg_trg_PauseUnitWhenDefeat_1, function Trig_PauseUnitWhenDefeat_Actions)
endfunction

function Trig_PauseUnitWhenWin_Func001C takes nothing returns boolean
	return ((1 + GetPlayerId(GetOwningPlayer(GetEnteringUnit()))) >= $A) and ((1 + GetPlayerId(GetOwningPlayer(GetEnteringUnit()))) <= $F)
endfunction

function Trig_PauseUnitWhenWin_Func002C takes nothing returns boolean
	return ((1 + GetPlayerId(GetOwningPlayer(GetEnteringUnit()))) <= 9)
endfunction

function Trig_PauseUnitWhenWin_Actions takes nothing returns nothing
	if (Trig_PauseUnitWhenWin_Func001C()) then
		call KillUnit(GetEnteringUnit())
	endif
	if (Trig_PauseUnitWhenWin_Func002C()) then
		call PauseUnit(GetEnteringUnit(), true)
	endif
endfunction

function InitTrig_PauseUnitWhenWin takes nothing returns nothing
	set gg_trg_PauseUnitWhenWin_1 = CreateTrigger()
	call DisableTrigger(gg_trg_PauseUnitWhenWin_1)
	call TriggerRegisterEnterRectSimple(gg_trg_PauseUnitWhenWin_1, bj_mapInitialPlayableArea_1)
	call TriggerAddAction(gg_trg_PauseUnitWhenWin_1, function Trig_PauseUnitWhenWin_Actions)
endfunction

function Trig_GameEndWin_Effects_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local real x = GetRandomReal((GetRectCenterX(gg_rct_cast_magi_1) - 500.), (GetRectCenterX(gg_rct_cast_magi_1) + 500.))
	local real y = GetRandomReal((GetRectCenterY(gg_rct_cast_magi_1) - 500.), (GetRectCenterY(gg_rct_cast_magi_1) + 500.))
	local unit dammi = CreateUnit(Player($F), 'h00U', x_0, y_0, .0)
	local unit dammi2 = CreateUnit(Player($F), 'h00U', x_0, y_0, .0)
	call UnitApplyTimedLife(dammi_0, 'BTLF', 11.2)
	call AddSpecialEffectTarget("Effects\\Win_Fireworks.mdx", dammi_0, "origin")
	call SetUnitScale(dammi2_0, 3., 3., 3.)
	call DestroyEffect(AddSpecialEffectTarget("Effects\\Fireworksblue.mdl", dammi2_0, "origin"))
endfunction

function Trig_GameEndWin_1and5sec_wait_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer lopa = 0
	loop
		exitwhen lopa_0 > 8
		if (GetLocalPlayer() == Player(lopa_0)) then
			call DisplayTimedTextToPlayer(GetLocalPlayer(), .0, .0, 99999., "|cff99ccffНа этом моменте альфа версия карты заканчивается!!! Игрa завершена. Всем игрокам огромное спасибо за участие!!!!|r")
		endif
		set lopa_0 = lopa_0 + 1
	endloop
	call DestroyTimer(t_0)
	set t_0 = CreateTimer()
	call TimerStart(t_0, .25, true, function Trig_GameEndWin_Effects_Actions)
endfunction

function Trig_GameEndWin_2sec_wait_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer lopa = 0
	local unit dammi = CreateUnit(Player($F), 'h00U', GetRectCenterX(gg_rct_cast_magi_1), GetRectCenterY(gg_rct_cast_magi_1), .0)
	local group g = CreateGroup()
	local unit Picked
	call GroupEnumUnitsInRect(g_0, bj_mapInitialPlayableArea_1, null)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 and GetPlayerId(GetOwningPlayer(Picked_0)) <= 8 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
			call SetUnitInvulnerable(Picked_0, true)
			if GetUnitTypeId(Picked_0) == 'E004' or GetUnitTypeId(Picked_0) == 'H01I' or GetUnitTypeId(Picked_0) == 'N00W' or GetUnitTypeId(Picked_0) == 'E001' then
				call SetUnitAnimation(Picked_0, "Stand")
			else
				call SetUnitAnimation(Picked_0, "Stand Victory")
			endif
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	loop
		exitwhen lopa_0 > 8
		if (GetLocalPlayer() == Player(lopa_0)) then
			call ClearTextMessages()
			call DisplayTimedTextToPlayer(GetLocalPlayer(), .0, .0, 99999., "|cff00CD00Армия Тьмы уничтожена, чародеи живы и портал открыт...Вы победили!!!!!!|r")
			call SetCameraTargetController(dammi_0, .0, .0, false)
		endif
		set lopa_0 = lopa_0 + 1
	endloop
	set t_0 = CreateTimer()
	call TimerStart(t_0, 1.5, false, function Trig_GameEndWin_1and5sec_wait_Actions)
endfunction

function Trig_GameEndWin_6and0sec_wait_Actions takes nothing returns nothing
	local timer t
	local integer lopa
	local group g
	local unit Picked
	set lopa_0 = 0
	call EnableTrigger(gg_trg_PauseUnitWhenWin_1)
	set udg_IsGameEnd_1 = true
	loop
		exitwhen lopa_0 > 8
		if (GetLocalPlayer() == Player(lopa_0)) then
			call PanCameraToTimed(GetRectCenterX(gg_rct_cast_magi_1), GetRectCenterY(gg_rct_cast_magi_1), 2.)
		endif
		set lopa_0 = lopa_0 + 1
	endloop
	set g_0 = CreateGroup()
	call GroupEnumUnitsInRect(g_0, bj_mapInitialPlayableArea_1, null)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 and GetPlayerId(GetOwningPlayer(Picked_0)) <= 8 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
			call SetUnitPosition(Picked_0, GetRandomReal((GetRectCenterX(gg_rct_cast_magi_1) - 500.), (GetRectCenterX(gg_rct_cast_magi_1) + 500.)), GetRandomReal((GetRectCenterY(gg_rct_cast_magi_1) - 500.), (GetRectCenterY(gg_rct_cast_magi_1) + 500.)))
			call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl", GetUnitX(Picked_0), GetUnitY(Picked_0)))
			call PauseUnit(Picked_0, true)
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = CreateGroup()
	call GroupEnumUnitsInRect(g_0, bj_mapInitialPlayableArea_1, null)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 and GetPlayerId(GetOwningPlayer(Picked_0)) >= 9 and GetPlayerId(GetOwningPlayer(Picked_0)) < $F and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
			call KillUnit(Picked_0)
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	call GroupClear(g_0)
	set t_0 = CreateTimer()
	call TimerStart(t_0, 2., false, function Trig_GameEndWin_2sec_wait_Actions)
endfunction

function Trig_GameEndWin_Actions takes nothing returns nothing
	local timer t
	set t_0 = CreateTimer()
	call TimerStart(t_0, 6., false, function Trig_GameEndWin_6and0sec_wait_Actions)
endfunction

function InitTrig_GameEndWin takes nothing returns nothing
	set gg_trg_GameEndWin_1 = CreateTrigger()
	call DisableTrigger(gg_trg_GameEndWin_1)
	call TriggerAddAction(gg_trg_GameEndWin_1, function Trig_GameEndWin_Actions)
endfunction

function Trig_Respawn_trees_Init_AddTree takes nothing returns nothing
	if GetDestructableTypeId(GetEnumDestructable()) == 'ATtr' or GetDestructableTypeId(GetEnumDestructable()) == 'ATtc' or GetDestructableTypeId(GetEnumDestructable()) == 'ZTtw' or GetDestructableTypeId(GetEnumDestructable()) == 'NTtw' or GetDestructableTypeId(GetEnumDestructable()) == 'WTst' or GetDestructableTypeId(GetEnumDestructable()) == 'CTtr' then
		call TriggerRegisterDeathEvent(gg_trg_Respawn_trees_1, GetEnumDestructable())
	endif
endfunction

function Trig_Respawn_trees_Init_Actions takes nothing returns nothing
	call EnumDestructablesInRect(GetWorldBounds(), null, function Trig_Respawn_trees_Init_AddTree)
endfunction

function InitTrig_Respawn_trees_Init takes nothing returns nothing
	set gg_trg_Respawn_trees_Init_1 = CreateTrigger()
	call TriggerRegisterTimerEvent(gg_trg_Respawn_trees_Init_1, 5., false)
	call TriggerAddAction(gg_trg_Respawn_trees_Init_1, function Trig_Respawn_trees_Init_Actions)
endfunction

function Trig_Respawn_trees_With_Wait_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local destructable tree = LoadDestructableHandle(udg_hash_1, h_0, 1)
	call DestructableRestoreLife(tree_0, GetDestructableMaxLife(tree_0), true)
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
	set tree_0 = null
endfunction

function Trig_Respawn_trees_Actions takes nothing returns nothing
	local destructable tree = GetTriggerDestructable()
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	call SaveDestructableHandle(udg_hash_1, h_0, 1, tree_0)
	call TimerStart(t_0, 120., false, function Trig_Respawn_trees_With_Wait_Actions)
	set tree_0 = null
	set t_0 = null
endfunction

function InitTrig_Respawn_trees takes nothing returns nothing
	set gg_trg_Respawn_trees_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Respawn_trees_1, function Trig_Respawn_trees_Actions)
endfunction

function Trig_Day_Weather_Func003Func005C takes nothing returns boolean
	return (true == false)
endfunction

function Trig_Day_Weather_Func003C takes nothing returns boolean
	return (udg_Temp_Integer_1[1] == 1)
endfunction

function Trig_Day_Weather_Func004Func004C takes nothing returns boolean
	return (true == false)
endfunction

function Trig_Day_Weather_Func004C takes nothing returns boolean
	return (udg_Temp_Integer_1[1] == 2)
endfunction

function Trig_Day_Weather_Func005Func001C takes nothing returns boolean
	return (udg_Temp_Integer_1[1] == 3) or (udg_Temp_Integer_1[1] == 4) or (udg_Temp_Integer_1[1] == 5)
endfunction

function Trig_Day_Weather_Func005C takes nothing returns boolean
	return (Trig_Day_Weather_Func005Func001C())
endfunction

function Trig_Day_Weather_Actions takes nothing returns nothing
	call RemoveWeatherEffect(udg_Weather_1[1])
	set udg_Temp_Integer_1[1] = GetRandomInt(1, 5)
	if (Trig_Day_Weather_Func003C()) then
		call AddWeatherEffectSaveLast(bj_mapInitialPlayableArea_1, 'RAhr')
		set udg_Weather_1[1] = bj_lastCreatedWeatherEffect_1
		set udg_Boolean_Is_Rain_1 = true
		if (Trig_Day_Weather_Func003Func005C()) then
			call StartTimerBJ(udg_Timer_Lightning_Strike_Weather_1, false, (17. + GetRandomReal(0, 25.)))
		endif
	endif
	if (Trig_Day_Weather_Func004C()) then
		call AddWeatherEffectSaveLast(bj_mapInitialPlayableArea_1, 'RAlr')
		set udg_Weather_1[1] = bj_lastCreatedWeatherEffect_1
		set udg_Boolean_Is_Rain_1 = true
		if (Trig_Day_Weather_Func004Func004C()) then
			call StartTimerBJ(udg_Timer_Lightning_Strike_Weather_1, false, (17. + GetRandomReal(0, 25.)))
		endif
	endif
	if (Trig_Day_Weather_Func005C()) then
		call AddWeatherEffectSaveLast(bj_mapInitialPlayableArea_1, 'LRaa')
		set udg_Weather_1[1] = bj_lastCreatedWeatherEffect_1
		set udg_Boolean_Is_Rain_1 = false
	endif
	call EnableWeatherEffect(udg_Weather_1[1], true)
endfunction

function InitTrig_Day_Weather takes nothing returns nothing
	set gg_trg_Day_Weather_1 = CreateTrigger()
	call TriggerRegisterGameStateEventTimeOfDay(gg_trg_Day_Weather_1, EQUAL_1, 6.)
	call TriggerRegisterGameStateEventTimeOfDay(gg_trg_Day_Weather_1, EQUAL_1, 12.)
	call TriggerAddAction(gg_trg_Day_Weather_1, function Trig_Day_Weather_Actions)
endfunction

function Trig_Sky_Morning_Actions takes nothing returns nothing
	call SetSkyModel("Environment\\Sky\\LordaeronWinterSkyPink\\LordaeronWinterSkyPink.mdl")
endfunction

function InitTrig_Sky_Morning takes nothing returns nothing
	set gg_trg_Sky_Morning_1 = CreateTrigger()
	call TriggerRegisterGameStateEventTimeOfDay(gg_trg_Sky_Morning_1, EQUAL_1, 6.)
	call TriggerAddAction(gg_trg_Sky_Morning_1, function Trig_Sky_Morning_Actions)
endfunction

function Trig_Sky_Day_Actions takes nothing returns nothing
	call SetSkyModel("Environment\\Sky\\LordaeronSummerSky\\LordaeronSummerSky.mdl")
endfunction

function InitTrig_Sky_Day takes nothing returns nothing
	set gg_trg_Sky_Day_1 = CreateTrigger()
	call TriggerRegisterGameStateEventTimeOfDay(gg_trg_Sky_Day_1, EQUAL_1, 12.)
	call TriggerAddAction(gg_trg_Sky_Day_1, function Trig_Sky_Day_Actions)
endfunction

function Trig_Night_Weather_Func003Func004C takes nothing returns boolean
	return (true == false)
endfunction

function Trig_Night_Weather_Func003C takes nothing returns boolean
	return (udg_Temp_Integer_1[1] == 1)
endfunction

function Trig_Night_Weather_Func004Func004C takes nothing returns boolean
	return (true == false)
endfunction

function Trig_Night_Weather_Func004C takes nothing returns boolean
	return (udg_Temp_Integer_1[1] == 2)
endfunction

function Trig_Night_Weather_Func005Func001C takes nothing returns boolean
	return (udg_Temp_Integer_1[1] == 3) or (udg_Temp_Integer_1[1] == 4) or (udg_Temp_Integer_1[1] == 5)
endfunction

function Trig_Night_Weather_Func005C takes nothing returns boolean
	return (Trig_Night_Weather_Func005Func001C())
endfunction

function Trig_Night_Weather_Actions takes nothing returns nothing
	call RemoveWeatherEffect(udg_Weather_1[1])
	set udg_Temp_Integer_1[1] = GetRandomInt(1, 5)
	if (Trig_Night_Weather_Func003C()) then
		call AddWeatherEffectSaveLast(bj_mapInitialPlayableArea_1, 'RAhr')
		set udg_Weather_1[1] = bj_lastCreatedWeatherEffect_1
		set udg_Boolean_Is_Rain_1 = true
		if (Trig_Night_Weather_Func003Func004C()) then
			call StartTimerBJ(udg_Timer_Lightning_Strike_Weather_1, false, (17. + GetRandomReal(0, 25.)))
		endif
	endif
	if (Trig_Night_Weather_Func004C()) then
		call AddWeatherEffectSaveLast(bj_mapInitialPlayableArea_1, 'RAlr')
		set udg_Weather_1[1] = bj_lastCreatedWeatherEffect_1
		set udg_Boolean_Is_Rain_1 = true
		if (Trig_Night_Weather_Func004Func004C()) then
			call StartTimerBJ(udg_Timer_Lightning_Strike_Weather_1, false, (17. + GetRandomReal(0, 25.)))
		endif
	endif
	if (Trig_Night_Weather_Func005C()) then
		call AddWeatherEffectSaveLast(bj_mapInitialPlayableArea_1, 'LRma')
		set udg_Weather_1[1] = bj_lastCreatedWeatherEffect_1
		set udg_Boolean_Is_Rain_1 = false
	endif
	call EnableWeatherEffect(udg_Weather_1[1], true)
endfunction

function InitTrig_Night_Weather takes nothing returns nothing
	set gg_trg_Night_Weather_1 = CreateTrigger()
	call TriggerRegisterGameStateEventTimeOfDay(gg_trg_Night_Weather_1, EQUAL_1, 18.)
	call TriggerRegisterGameStateEventTimeOfDay(gg_trg_Night_Weather_1, EQUAL_1, .0)
	call TriggerAddAction(gg_trg_Night_Weather_1, function Trig_Night_Weather_Actions)
endfunction

function Trig_Sky_Evening_Actions takes nothing returns nothing
	call SetSkyModel("Environment\\Sky\\LordaeronFallSky\\LordaeronFallSky.mdl")
endfunction

function InitTrig_Sky_Evening takes nothing returns nothing
	set gg_trg_Sky_Evening_1 = CreateTrigger()
	call TriggerRegisterGameStateEventTimeOfDay(gg_trg_Sky_Evening_1, EQUAL_1, 18.)
	call TriggerAddAction(gg_trg_Sky_Evening_1, function Trig_Sky_Evening_Actions)
endfunction

function Trig_Sky_Night_Actions takes nothing returns nothing
	call SetSkyModel("Environment\\Sky\\FelwoodSky\\FelwoodSky.mdl")
endfunction

function InitTrig_Sky_Night takes nothing returns nothing
	set gg_trg_Sky_Night_1 = CreateTrigger()
	call TriggerRegisterGameStateEventTimeOfDay(gg_trg_Sky_Night_1, EQUAL_1, .0)
	call TriggerAddAction(gg_trg_Sky_Night_1, function Trig_Sky_Night_Actions)
endfunction

function Trig_Lightnings_Weather_Effect_Rainy_Conditions takes nothing returns boolean
	return (udg_Boolean_Is_Rain_1)
endfunction

function Trig_Lightnings_Weather_Effect_Rainy_Func003A takes nothing returns nothing
	call SoundForPlayer(GetEnumPlayer(), 17)
endfunction

function Trig_Lightnings_Weather_Effect_Rainy_Actions takes nothing returns nothing
	call CinematicFadeBJ(1, 1., "ReplaceableTextures\\CameraMasks\\Black_mask.blp", 60., 60., 65., 15.)
	call CinematicFadeBJ(0, 2., "ReplaceableTextures\\CameraMasks\\White_mask.blp", 60., 60., 65., 15.)
	call ForForce(bj_FORCE_ALL_PLAYERS_1, function Trig_Lightnings_Weather_Effect_Rainy_Func003A)
	call StartTimerBJ(udg_Timer_Lightning_Strike_Weather_1, false, (10. + GetRandomReal(20., 40.)))
endfunction

function InitTrig_Lightnings_Weather_Effect_Rainy takes nothing returns nothing
	set gg_trg_Lightnings_Weather_Effect_Rainy_1 = CreateTrigger()
	call TriggerRegisterTimerExpireEvent(gg_trg_Lightnings_Weather_Effect_Rainy_1, udg_Timer_Lightning_Strike_Weather_1)
	call TriggerAddCondition(gg_trg_Lightnings_Weather_Effect_Rainy_1, Condition(function Trig_Lightnings_Weather_Effect_Rainy_Conditions))
	call TriggerAddAction(gg_trg_Lightnings_Weather_Effect_Rainy_1, function Trig_Lightnings_Weather_Effect_Rainy_Actions)
endfunction

function Trig_Periodic_Rune_Creation_Func001Func002Func002C takes nothing returns boolean
	return (CountPlayersInForceBJ(udg_IGRAET_1) >= 1)
endfunction

function Trig_Periodic_Rune_Creation_Func001Func002C takes nothing returns boolean
	return (CountPlayersInForceBJ(udg_IGRAET_1) >= 2)
endfunction

function Trig_Periodic_Rune_Creation_Func001C takes nothing returns boolean
	return (CountPlayersInForceBJ(udg_IGRAET_1) >= 3)
endfunction

function Trig_Periodic_Rune_Creation_Func002Func002Func001Func002C takes nothing returns boolean
	return (udg_Temp_Integer_1[2] == 1)
endfunction

function Trig_Periodic_Rune_Creation_Func002Func002Func001Func003C takes nothing returns boolean
	return (udg_Temp_Integer_1[2] == 2)
endfunction

function Trig_Periodic_Rune_Creation_Func002Func002Func001Func004C takes nothing returns boolean
	return (udg_Temp_Integer_1[2] == 3)
endfunction

function Trig_Periodic_Rune_Creation_Func002Func002Func001Func005C takes nothing returns boolean
	return (udg_Temp_Integer_1[2] == 4)
endfunction

function Trig_Periodic_Rune_Creation_Func002Func002Func001C takes nothing returns boolean
	return (udg_Is_Rune_On_Position_1[bj_forLoopAIndex_1] == false)
endfunction

function Trig_Periodic_Rune_Creation_Func002Func003C takes nothing returns boolean
	return (udg_Is_Rune_On_Position_1[bj_forLoopAIndex_1] == false)
endfunction

function Trig_Periodic_Rune_Creation_Func002C takes nothing returns boolean
	return (Trig_Periodic_Rune_Creation_Func002Func003C())
endfunction

function Trig_Periodic_Rune_Creation_Actions takes nothing returns nothing
	if (Trig_Periodic_Rune_Creation_Func001C()) then
		set udg_Temp_Integer_1[4] = 3
	else
		if (Trig_Periodic_Rune_Creation_Func001Func002C()) then
			set udg_Temp_Integer_1[4] = 2
		else
			if (Trig_Periodic_Rune_Creation_Func001Func002Func002C()) then
				set udg_Temp_Integer_1[4] = 1
			endif
		endif
	endif
	if (Trig_Periodic_Rune_Creation_Func002C()) then
		set udg_Temp_Integer_1[3] = 4
		set bj_forLoopAIndex_1 = 1
		set bj_forLoopAIndexEnd_1 = udg_Temp_Integer_1[4]
		loop
			exitwhen bj_forLoopAIndex_1 > bj_forLoopAIndexEnd_1
			if (Trig_Periodic_Rune_Creation_Func002Func002Func001C()) then
				set udg_Temp_Integer_1[2] = GetRandomInt(1, udg_Temp_Integer_1[3])
				if (Trig_Periodic_Rune_Creation_Func002Func002Func001Func002C()) then
					call CreateItemLoc('I013', Location(I2R(udg_Rune_Position_X_1[bj_forLoopAIndex_1]), I2R(udg_Rune_Position_Y_1[bj_forLoopAIndex_1])))
				endif
				if (Trig_Periodic_Rune_Creation_Func002Func002Func001Func003C()) then
					call CreateItemLoc('I014', Location(I2R(udg_Rune_Position_X_1[bj_forLoopAIndex_1]), I2R(udg_Rune_Position_Y_1[bj_forLoopAIndex_1])))
				endif
				if (Trig_Periodic_Rune_Creation_Func002Func002Func001Func004C()) then
					call CreateItemLoc('I016', Location(I2R(udg_Rune_Position_X_1[bj_forLoopAIndex_1]), I2R(udg_Rune_Position_Y_1[bj_forLoopAIndex_1])))
				endif
				if (Trig_Periodic_Rune_Creation_Func002Func002Func001Func005C()) then
					call CreateItemLoc('I017', Location(I2R(udg_Rune_Position_X_1[bj_forLoopAIndex_1]), I2R(udg_Rune_Position_Y_1[bj_forLoopAIndex_1])))
				endif
				call AddSpecialEffectLocBJ(Location(I2R(udg_Rune_Position_X_1[bj_forLoopAIndex_1]), I2R(udg_Rune_Position_Y_1[bj_forLoopAIndex_1])), "Effects\\ShadowAssault.mdx")
				call DestroyEffectWithWait(bj_lastCreatedEffect_1, 3.)
				set udg_Is_Rune_On_Position_1[bj_forLoopAIndex_1] = true
			endif
			set bj_forLoopAIndex_1 = bj_forLoopAIndex_1 + 1
		endloop
	endif
endfunction

function InitTrig_Periodic_Rune_Creation takes nothing returns nothing
	set gg_trg_Periodic_Rune_Creation_1 = CreateTrigger()
	call DisableTrigger(gg_trg_Periodic_Rune_Creation_1)
	call TriggerRegisterTimerEventPeriodic(gg_trg_Periodic_Rune_Creation_1, 60.1)
	call TriggerAddAction(gg_trg_Periodic_Rune_Creation_1, function Trig_Periodic_Rune_Creation_Actions)
endfunction

function Trig_Rune_PickedUp_End_Immunity_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit hero = LoadUnitHandle(udg_hash_1, h_0, 1)
	call SetArmorAbilityLevel(hero_0, -50)
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
	set hero_0 = null
endfunction

function Trig_Rune_PickedUp_End_Damage_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit hero = LoadUnitHandle(udg_hash_1, h_0, 1)
	local integer damage = LoadInteger(udg_hash_1, h_0, 6)
	local effect ef
	set damage_0 = 20 + 5 * GetHeroLevel(hero_0)
	call SetAttackAbilityLevel(hero_0, -damage_0)
	set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 2)
	call DestroyEffect(ef_0)
	set ef_0 = null
	set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 3)
	call DestroyEffect(ef_0)
	set ef_0 = null
	set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 4)
	call DestroyEffect(ef_0)
	set ef_0 = null
	set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 5)
	call DestroyEffect(ef_0)
	set ef_0 = null
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
	set hero_0 = null
endfunction

function Trig_Rune_PickedUp_End_Regeneration_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit hero = LoadUnitHandle(udg_hash_1, h_0, 1)
	local real hp = LoadReal(udg_hash_1, h_0, 2)
	local real mp = LoadReal(udg_hash_1, h_0, 3)
	call SetUnitLifeAndManaRegeneration(hero_0, "life", R2I(-hp_0 / 20))
	call SetUnitLifeAndManaRegeneration(hero_0, "mana", R2I(-mp_0 / 20))
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
	set hero_0 = null
endfunction

function Trig_Rune_PickedUp_Actions takes nothing returns nothing
	local item rune = GetManipulatedItem()
	local unit hero = GetManipulatingUnit()
	local integer id = GetItemTypeId(rune_0)
	local unit dammi
	local real hp
	local real mp
	local timer t
	local integer h
	local effect ef
	local integer damage
	local real x = GetUnitX(hero_0)
	local real y = GetUnitY(hero_0)
	local real dist1 = SquareRoot((x_0 - udg_Rune_Position_X_1[1]) * (x_0 - udg_Rune_Position_X_1[1]) + (y_0 - udg_Rune_Position_Y_1[1]) * (y_0 - udg_Rune_Position_Y_1[1]))
	local real dist2 = SquareRoot((x_0 - udg_Rune_Position_X_1[2]) * (x_0 - udg_Rune_Position_X_1[2]) + (y_0 - udg_Rune_Position_Y_1[2]) * (y_0 - udg_Rune_Position_Y_1[2]))
	local real dist3 = SquareRoot((x_0 - udg_Rune_Position_X_1[3]) * (x_0 - udg_Rune_Position_X_1[3]) + (y_0 - udg_Rune_Position_Y_1[3]) * (y_0 - udg_Rune_Position_Y_1[3]))
	local integer runepos = 0
	if dist1_0 < 500. then
		set runepos_0 = 1
	endif
	if dist2_0 < 500. then
		set runepos_0 = 2
	endif
	if dist3_0 < 500. then
		set runepos_0 = 3
	endif
	if id_0 == 'I013' then
		set t_0 = CreateTimer()
		set h_0 = GetHandleId(t_0)
		set dammi_0 = CreateUnit(GetOwningPlayer(hero_0), 'h00U', GetUnitX(hero_0), GetUnitY(hero_0), .0)
		call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
		call UnitAddAbility(dammi_0, 'A0O6')
		call IssueTargetOrderById(dammi_0, $D00C0, hero_0)
		set hp_0 = GetUnitState(hero_0, UNIT_STATE_MAX_LIFE_1)
		set mp_0 = GetUnitState(hero_0, UNIT_STATE_MAX_MANA_1)
		call SetUnitLifeAndManaRegeneration(hero_0, "life", R2I(hp_0 / 20))
		call SetUnitLifeAndManaRegeneration(hero_0, "mana", R2I(mp_0 / 20))
		call SaveUnitHandle(udg_hash_1, h_0, 1, hero_0)
		call SaveReal(udg_hash_1, h_0, 2, hp_0)
		call SaveReal(udg_hash_1, h_0, 3, mp_0)
		call TimerStart(t_0, 10., false, function Trig_Rune_PickedUp_End_Regeneration_Actions)
		set t_0 = null
		set dammi_0 = null
	endif
	if id_0 == 'I014' then
		set t_0 = CreateTimer()
		set h_0 = GetHandleId(t_0)
		set damage_0 = 20 + 5 * GetHeroLevel(hero_0)
		call SetAttackAbilityLevel(hero_0, damage_0)
		call SaveUnitHandle(udg_hash_1, h_0, 1, hero_0)
		set ef_0 = AddSpecialEffectTarget("Effects\\Prismatic Missile Fixed.mdl", hero_0, "hand,left")
		call SaveEffectHandle(udg_hash_1, h_0, 2, ef_0)
		set ef_0 = null
		set ef_0 = AddSpecialEffectTarget("Effects\\Prismatic Missile Fixed.mdl", hero_0, "hand,right")
		call SaveEffectHandle(udg_hash_1, h_0, 3, ef_0)
		set ef_0 = null
		set ef_0 = AddSpecialEffectTarget("Effects\\Prismatic Missile Fixed.mdl", hero_0, "weapon")
		call SaveEffectHandle(udg_hash_1, h_0, 4, ef_0)
		set ef_0 = null
		set ef_0 = AddSpecialEffectTarget("Effects\\Prismatic Missile Fixed.mdl", hero_0, "overhead")
		call SaveEffectHandle(udg_hash_1, h_0, 5, ef_0)
		set ef_0 = null
		call SaveInteger(udg_hash_1, h_0, 6, damage_0)
		call TimerStart(t_0, 20., false, function Trig_Rune_PickedUp_End_Damage_Actions)
		set t_0 = null
	endif
	if id_0 == 'I016' then
		set dammi_0 = CreateUnit(GetOwningPlayer(hero_0), 'h00U', GetUnitX(hero_0), GetUnitY(hero_0), .0)
		call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
		call UnitAddAbility(dammi_0, 'A0O7')
		call IssueTargetOrderById(dammi_0, $D0132, hero_0)
		set dammi_0 = null
	endif
	if id_0 == 'I017' then
		set t_0 = CreateTimer()
		set h_0 = GetHandleId(t_0)
		set dammi_0 = CreateUnit(GetOwningPlayer(hero_0), 'h00U', GetUnitX(hero_0), GetUnitY(hero_0), .0)
		call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
		call UnitAddAbility(dammi_0, 'A0O8')
		call IssueTargetOrderById(dammi_0, $D00DA, hero_0)
		call SetArmorAbilityLevel(hero_0, 50)
		call SaveUnitHandle(udg_hash_1, h_0, 1, hero_0)
		call TimerStart(t_0, 12., false, function Trig_Rune_PickedUp_End_Immunity_Actions)
		set t_0 = null
		set dammi_0 = null
	endif
	set udg_Is_Rune_On_Position_1[runepos_0] = false
	call RemoveItem(rune_0)
	set hero_0 = null
	set rune_0 = null
endfunction

function Trig_Rune_PickedUp_Conditions takes nothing returns boolean
	return GetItemTypeId(GetManipulatedItem()) == 'I013' or GetItemTypeId(GetManipulatedItem()) == 'I014' or GetItemTypeId(GetManipulatedItem()) == 'I016' or GetItemTypeId(GetManipulatedItem()) == 'I017'
endfunction

function InitTrig_Rune_PickedUp takes nothing returns nothing
	local integer index = 0
	set gg_trg_Rune_PickedUp_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Rune_PickedUp_1, Player(index_0), EVENT_PLAYER_UNIT_PICKUP_ITEM_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Rune_PickedUp_1, Condition(function Trig_Rune_PickedUp_Conditions))
	call TriggerAddAction(gg_trg_Rune_PickedUp_1, function Trig_Rune_PickedUp_Actions)
endfunction

function Trig_Initialization_MultiBoard_Func002Func001C takes nothing returns boolean
	return (GetPlayerSlotState(Player(-1 + (bj_forLoopAIndex_1))) == PLAYER_SLOT_STATE_PLAYING_1)
endfunction

function Trig_Initialization_MultiBoard_Func029A takes nothing returns nothing
	call MultiboardSetItemValueBJ(udg_MultiBoard_1, 2, udg_PlayerNumberInMB_1[(1 + GetPlayerId(GetEnumPlayer()))], (udg_ColorString_1[(1 + GetPlayerId(GetEnumPlayer()))] + (GetPlayerName(GetEnumPlayer()) + "|r")))
	call MultiboardSetItemValueBJ(udg_MultiBoard_1, 3, udg_PlayerNumberInMB_1[(1 + GetPlayerId(GetEnumPlayer()))], (udg_ColorString_1[20] + ("0|r")))
	call MultiboardSetItemValueBJ(udg_MultiBoard_1, 4, udg_PlayerNumberInMB_1[(1 + GetPlayerId(GetEnumPlayer()))], (udg_ColorString_1[21] + ("0|r")))
	call MultiboardSetItemValueBJ(udg_MultiBoard_1, 5, udg_PlayerNumberInMB_1[(1 + GetPlayerId(GetEnumPlayer()))], (udg_ColorString_1[24] + ("0|r")))
	call MultiboardSetItemValueBJ(udg_MultiBoard_1, 6, udg_PlayerNumberInMB_1[(1 + GetPlayerId(GetEnumPlayer()))], (udg_ColorString_1[22] + ("0|r")))
	call MultiboardSetItemValueBJ(udg_MultiBoard_1, 7, udg_PlayerNumberInMB_1[(1 + GetPlayerId(GetEnumPlayer()))], (udg_ColorString_1[23] + ("0|r")))
endfunction

function Trig_Initialization_MultiBoard_Actions takes nothing returns nothing
	set bj_forLoopAIndex_1 = 1
	set bj_forLoopAIndexEnd_1 = 9
	loop
		exitwhen bj_forLoopAIndex_1 > bj_forLoopAIndexEnd_1
		if (Trig_Initialization_MultiBoard_Func002Func001C()) then
			call ForceAddPlayer(udg_Players_Ally_Group_1, Player(-1 + (bj_forLoopAIndex_1)))
			set udg_CountPlayers_1 = (udg_CountPlayers_1 + 1)
			set udg_PlayerNumberInMB_1[(1 + GetPlayerId(Player(-1 + (bj_forLoopAIndex_1))))] = (udg_CountPlayers_1 + 1)
		endif
		set bj_forLoopAIndex_1 = bj_forLoopAIndex_1 + 1
	endloop
	call CreateMultiboardBJ(7, (udg_CountPlayers_1 + 3), "Последние Стражи")
	set udg_MultiBoard_1 = bj_lastCreatedMultiboard_1
	call MultiboardSetItemValueBJ(udg_MultiBoard_1, 1, 1, "")
	call MultiboardSetItemStyleBJ(udg_MultiBoard_1, 1, 1, false, false)
	call MultiboardSetItemValueBJ(udg_MultiBoard_1, 2, 1, "Игрок")
	call MultiboardSetItemValueBJ(udg_MultiBoard_1, 3, 1, (udg_ColorString_1[20] + ("Убийств|r")))
	call MultiboardSetItemValueBJ(udg_MultiBoard_1, 4, 1, (udg_ColorString_1[21] + ("Cмертей|r")))
	call MultiboardSetItemValueBJ(udg_MultiBoard_1, 5, 1, (udg_ColorString_1[24] + ("Помощи|r")))
	call MultiboardSetItemValueBJ(udg_MultiBoard_1, 6, 1, (udg_ColorString_1[22] + ("Уровень|r")))
	call MultiboardSetItemIconBJ(udg_MultiBoard_1, 7, 1, "UI\\Feedback\\Resources\\ResourceGold.blp")
	set bj_forLoopAIndex_1 = 1
	set bj_forLoopAIndexEnd_1 = (udg_CountPlayers_1 + 3)
	loop
		exitwhen bj_forLoopAIndex_1 > bj_forLoopAIndexEnd_1
		call MultiboardSetItemWidthBJ(udg_MultiBoard_1, 1, bj_forLoopAIndex_1, 2.)
		call MultiboardSetItemWidthBJ(udg_MultiBoard_1, 2, bj_forLoopAIndex_1, 10.)
		call MultiboardSetItemWidthBJ(udg_MultiBoard_1, 3, bj_forLoopAIndex_1, 6.)
		call MultiboardSetItemWidthBJ(udg_MultiBoard_1, 4, bj_forLoopAIndex_1, 6.)
		call MultiboardSetItemWidthBJ(udg_MultiBoard_1, 5, bj_forLoopAIndex_1, 6.)
		call MultiboardSetItemWidthBJ(udg_MultiBoard_1, 6, bj_forLoopAIndex_1, 6.)
		call MultiboardSetItemWidthBJ(udg_MultiBoard_1, 7, bj_forLoopAIndex_1, 4.)
		call MultiboardSetItemStyleBJ(udg_MultiBoard_1, 1, bj_forLoopAIndex_1, false, true)
		call MultiboardSetItemStyleBJ(udg_MultiBoard_1, 2, bj_forLoopAIndex_1, true, false)
		call MultiboardSetItemStyleBJ(udg_MultiBoard_1, 3, bj_forLoopAIndex_1, true, false)
		call MultiboardSetItemStyleBJ(udg_MultiBoard_1, 4, bj_forLoopAIndex_1, true, false)
		call MultiboardSetItemStyleBJ(udg_MultiBoard_1, 5, bj_forLoopAIndex_1, true, false)
		call MultiboardSetItemStyleBJ(udg_MultiBoard_1, 6, bj_forLoopAIndex_1, true, false)
		call MultiboardSetItemStyleBJ(udg_MultiBoard_1, 7, bj_forLoopAIndex_1, true, false)
		call MultiboardSetItemIconBJ(udg_MultiBoard_1, 1, bj_forLoopAIndex_1, "ReplaceableTextures\\CommandButtons\\BTNSelectHeroOn.blp")
		set bj_forLoopAIndex_1 = bj_forLoopAIndex_1 + 1
	endloop
	call MultiboardSetItemStyleBJ(udg_MultiBoard_1, 7, 1, false, true)
	call MultiboardSetItemStyleBJ(udg_MultiBoard_1, 1, 1, false, false)
	call MultiboardSetItemStyleBJ(udg_MultiBoard_1, 1, (udg_CountPlayers_1 + 2), false, true)
	call MultiboardSetItemStyleBJ(udg_MultiBoard_1, 2, (udg_CountPlayers_1 + 2), true, false)
	call MultiboardSetItemIconBJ(udg_MultiBoard_1, 1, (udg_CountPlayers_1 + 2), "ReplaceableTextures\\CommandButtons\\ClockTime.blp")
	call MultiboardSetItemValueBJ(udg_MultiBoard_1, 2, (udg_CountPlayers_1 + 2), "|cff00CD00Время Игры|r")
	call MultiboardSetItemStyleBJ(udg_MultiBoard_1, 1, (udg_CountPlayers_1 + 3), false, false)
	call MultiboardSetItemStyleBJ(udg_MultiBoard_1, 2, (udg_CountPlayers_1 + 3), true, false)
	call MultiboardSetItemIconBJ(udg_MultiBoard_1, 1, (udg_CountPlayers_1 + 2), "ReplaceableTextures\\CommandButtons\\ClockTime.blp")
	call MultiboardSetItemValueBJ(udg_MultiBoard_1, 2, (udg_CountPlayers_1 + 3), "|cff99ccffПрогресс волны:|r")
	call MultiboardSetItemValueBJ(udg_MultiBoard_1, 3, (udg_CountPlayers_1 + 3), "|Cfffed3120|r|cFF969696/|r|Cfffed3129|r")
	call ForForce(udg_Players_Ally_Group_1, function Trig_Initialization_MultiBoard_Func029A)
	call MultiboardDisplay(udg_MultiBoard_1, false)
	call MultiboardDisplay(udg_MultiBoard_1, true)
	call MultiboardMinimize(udg_MultiBoard_1, true)
endfunction

function InitTrig_Initialization_MultiBoard takes nothing returns nothing
	set gg_trg_Initialization_MultiBoard_1 = CreateTrigger()
	call TriggerRegisterTimerEventSingle(gg_trg_Initialization_MultiBoard_1, 3.)
	call TriggerAddAction(gg_trg_Initialization_MultiBoard_1, function Trig_Initialization_MultiBoard_Actions)
endfunction

function Trig_Hero_MultiBoard_LvlUp_Conditions takes nothing returns boolean
	return ((IsUnitType(GetLevelingUnit(), UNIT_TYPE_HERO_1)) and (IsUnitIllusion(GetLevelingUnit()) == false) and ((1 + GetPlayerId(GetOwningPlayer(GetLevelingUnit()))) <= 9)) != null
endfunction

function Trig_Hero_MultiBoard_LvlUp_Actions takes nothing returns nothing
	call MultiboardSetItemValueBJ(udg_MultiBoard_1, 6, udg_PlayerNumberInMB_1[(1 + GetPlayerId(GetOwningPlayer(GetLevelingUnit())))], (udg_ColorString_1[22] + (I2S(GetUnitLevel(GetLevelingUnit())) + "|r")))
endfunction

function InitTrig_Hero_MultiBoard_LvlUp takes nothing returns nothing
	set gg_trg_Hero_MultiBoard_LvlUp_1 = CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(gg_trg_Hero_MultiBoard_LvlUp_1, EVENT_PLAYER_HERO_LEVEL_1)
	call TriggerAddCondition(gg_trg_Hero_MultiBoard_LvlUp_1, Condition(function Trig_Hero_MultiBoard_LvlUp_Conditions))
	call TriggerAddAction(gg_trg_Hero_MultiBoard_LvlUp_1, function Trig_Hero_MultiBoard_LvlUp_Actions)
endfunction

function Trig_Time_Check_and_Player_Gold_for_MultiBoard_Func002C takes nothing returns boolean
	return (udg_Time_second_1 >= 60)
endfunction

function Trig_Time_Check_and_Player_Gold_for_MultiBoard_Func003C takes nothing returns boolean
	return (udg_Time_minuts_1 >= 60)
endfunction

function Trig_Time_Check_and_Player_Gold_for_MultiBoard_Func004C takes nothing returns boolean
	return (udg_Time_hours_1 > 0)
endfunction

function Trig_Time_Check_and_Player_Gold_for_MultiBoard_Func005A takes nothing returns nothing
	call MultiboardSetItemValueBJ(udg_MultiBoard_1, 7, udg_PlayerNumberInMB_1[(1 + GetPlayerId(GetEnumPlayer()))], (udg_ColorString_1[23] + (I2S(GetPlayerState(GetEnumPlayer(), PLAYER_STATE_RESOURCE_GOLD_1)) + "|r")))
endfunction

function Trig_Time_Check_and_Player_Gold_for_MultiBoard_Actions takes nothing returns nothing
	set udg_Time_second_1 = (udg_Time_second_1 + 1)
	if (Trig_Time_Check_and_Player_Gold_for_MultiBoard_Func002C()) then
		set udg_Time_minuts_1 = (udg_Time_minuts_1 + 1)
		set udg_Time_second_1 = 0
	endif
	if (Trig_Time_Check_and_Player_Gold_for_MultiBoard_Func003C()) then
		set udg_Time_hours_1 = (udg_Time_hours_1 + 1)
		set udg_Time_minuts_1 = 0
	endif
	if (Trig_Time_Check_and_Player_Gold_for_MultiBoard_Func004C()) then
		call MultiboardSetItemValueBJ(udg_MultiBoard_1, 3, (udg_CountPlayers_1 + 2), (("|cff00CD00" + (I2S(udg_Time_hours_1) + ":")) + (I2S(udg_Time_minuts_1) + (":" + (I2S(udg_Time_second_1) + "|r")))))
	else
		call MultiboardSetItemValueBJ(udg_MultiBoard_1, 3, (udg_CountPlayers_1 + 2), ("|cff00CD00" + (I2S(udg_Time_minuts_1) + (":" + (I2S(udg_Time_second_1) + "|r")))))
	endif
	call ForForce(udg_Players_Ally_Group_1, function Trig_Time_Check_and_Player_Gold_for_MultiBoard_Func005A)
endfunction

function InitTrig_Time_Check_and_Player_Gold_for_MultiBoard takes nothing returns nothing
	set gg_trg_Time_Check_and_Player_Gold_for_MultiBoard_1 = CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(gg_trg_Time_Check_and_Player_Gold_for_MultiBoard_1, 1.)
	call TriggerAddAction(gg_trg_Time_Check_and_Player_Gold_for_MultiBoard_1, function Trig_Time_Check_and_Player_Gold_for_MultiBoard_Actions)
endfunction

function Trig_Reincarnation_Skeletons_Conditions takes nothing returns boolean
	local integer id = GetUnitTypeId(GetDyingUnit())
	return IsUnitIllusion(GetDyingUnit()) == false and GetRandomInt(1, 7) == 1 and (id_0 == 'u001' or id_0 == 'u002' or id_0 == 'u003')
endfunction

function Trig_Reincarnation_Skeletons_2sec_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit u = LoadUnitHandle(udg_hash_1, h_0, 6)
	call PauseUnit(u_0, false)
	if GetUnitState(u_0, UNIT_STATE_LIFE_1) >= .405 then
		call SetUnitAnimation(u_0, "stand")
		call IssuePointOrderById(u_0, $D000F, GetRectCenterX(gg_rct_cast_magi_1), GetRectCenterY(gg_rct_cast_magi_1))
	endif
	set u_0 = null
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
endfunction

function Trig_Reincarnation_Skeletons_3sec_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local integer id = LoadInteger(udg_hash_1, h_0, 1)
	local real x = LoadReal(udg_hash_1, h_0, 2)
	local real y = LoadReal(udg_hash_1, h_0, 3)
	local player p = LoadPlayerHandle(udg_hash_1, h_0, 4)
	local real face = LoadReal(udg_hash_1, h_0, 5)
	local unit u = CreateUnit(p_0, id_0, x_0, y_0, face_0)
	call SaveUnitHandle(udg_hash_1, h_0, 6, u_0)
	call PauseUnit(u_0, true)
	call SetUnitAnimation(u_0, "Birth")
	call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl", GetUnitX(u_0), GetUnitY(u_0)))
	call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl", GetUnitX(u_0), GetUnitY(u_0)))
	call TimerStart(t_0, 2.33, false, function Trig_Reincarnation_Skeletons_2sec_Actions)
	set t_0 = null
	set p_0 = null
	set u_0 = null
endfunction

function Trig_Reincarnation_Skeletons_Actions takes nothing returns nothing
	local unit u = GetDyingUnit()
	local integer id = GetUnitTypeId(u_0)
	local real x = GetUnitX(u_0)
	local real y = GetUnitY(u_0)
	local player p = GetOwningPlayer(u_0)
	local real face = GetUnitFacing(u_0)
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	call SaveInteger(udg_hash_1, h_0, 1, id_0)
	call SaveReal(udg_hash_1, h_0, 2, x_0)
	call SaveReal(udg_hash_1, h_0, 3, y_0)
	call SavePlayerHandle(udg_hash_1, h_0, 4, p_0)
	call SaveReal(udg_hash_1, h_0, 5, face_0)
	call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl", x_0, y_0))
	call TimerStart(t_0, 3., false, function Trig_Reincarnation_Skeletons_3sec_Actions)
	set u_0 = null
	set p_0 = null
	set t_0 = null
endfunction

function InitTrig_Reincarnation_Skeletons takes nothing returns nothing
	local integer index = 0
	set gg_trg_Reincarnation_Skeletons_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Reincarnation_Skeletons_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Reincarnation_Skeletons_1, Condition(function Trig_Reincarnation_Skeletons_Conditions))
	call TriggerAddAction(gg_trg_Reincarnation_Skeletons_1, function Trig_Reincarnation_Skeletons_Actions)
endfunction

function Trig_BossSkeletRaise2sec_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 20)
	local unit skelet
	local integer lop = 0
	local real xr = GetRectCenterX(gg_rct_cast_magi_1)
	local real yr = GetRectCenterY(gg_rct_cast_magi_1)
	call PauseUnit(caster_0, false)
	call SetUnitTimeScale(caster_0, 1.)
	if GetUnitState(caster_0, UNIT_STATE_LIFE_1) >= .405 then
		call SetUnitAnimation(caster_0, "stand")
		call IssuePointOrderById(caster_0, $D000F, xr_0, yr_0)
	endif
	loop
		exitwhen lop_0 > $F
		set skelet_0 = LoadUnitHandle(udg_hash_1, h_0, lop_0)
		call PauseUnit(skelet_0, false)
		if GetUnitState(skelet_0, UNIT_STATE_LIFE_1) >= .405 then
			call SetUnitAnimation(skelet_0, "stand")
			call IssuePointOrderById(skelet_0, $D000F, xr_0, yr_0)
		endif
		set skelet_0 = null
		set lop_0 = lop_0 + 1
	endloop
	set caster_0 = null
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
endfunction

function Trig_BossSkeletRaiseMiniWait_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 20)
	local player p = GetOwningPlayer(caster_0)
	local unit target = LoadUnitHandle(udg_hash_1, h_0, 21)
	local real x = GetUnitX(target_0)
	local real y = GetUnitY(target_0)
	local integer lop = 0
	local unit skelet
	call SetUnitAnimationByIndex(caster_0, 3)
	call SetUnitTimeScale(caster_0, 3.25)
	call PauseUnit(caster_0, true)
	loop
		exitwhen lop_0 > $F
		set skelet_0 = CreateUnit(p_0, 'u001', x_0 + 250. * Cos((lop_0 * 22.5) * bj_DEGTORAD_1), y_0 + 250. * Sin((lop_0 * 22.5) * bj_DEGTORAD_1), $B4 + lop_0 * 22.5)
		call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl", x_0 + 250. * Cos((lop_0 * 22.5) * bj_DEGTORAD_1), y_0 + 250. * Sin((lop_0 * 22.5) * bj_DEGTORAD_1)))
		call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl", x_0 + 250. * Cos((lop_0 * 22.5) * bj_DEGTORAD_1), y_0 + 250. * Sin((lop_0 * 22.5) * bj_DEGTORAD_1)))
		call SetUnitAnimation(skelet_0, "Birth")
		call PauseUnit(skelet_0, true)
		call SaveUnitHandle(udg_hash_1, h_0, lop_0, skelet_0)
		set skelet_0 = null
		set lop_0 = lop_0 + 1
	endloop
	call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl", x_0, y_0))
	call TimerStart(t_0, 2.33, false, function Trig_BossSkeletRaise2sec_Actions)
	set caster_0 = null
	set p_0 = null
	set target_0 = null
	set t_0 = null
endfunction

function Trig_BossSkeletRaise_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local unit target = GetSpellTargetUnit()
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	call SaveUnitHandle(udg_hash_1, h_0, 20, caster_0)
	call SaveUnitHandle(udg_hash_1, h_0, 21, target_0)
	call TimerStart(t_0, .3, false, function Trig_BossSkeletRaiseMiniWait_Actions)
	set caster_0 = null
	set target_0 = null
	set t_0 = null
endfunction

function Trig_BossSkeletRaise_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A07M'
endfunction

function InitTrig_BossSkeletRaise takes nothing returns nothing
	local integer index = 0
	set gg_trg_BossSkeletRaise_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_BossSkeletRaise_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_BossSkeletRaise_1, Condition(function Trig_BossSkeletRaise_Conditions))
	call TriggerAddAction(gg_trg_BossSkeletRaise_1, function Trig_BossSkeletRaise_Actions)
endfunction

function Trig_BossSkeletSkillActiv_Conditions takes nothing returns boolean
	return GetUnitTypeId(GetTriggerUnit()) == 'n00K'
endfunction

function Trig_BossSkeletSkillActiv_Actions takes nothing returns nothing
	call IssueTargetOrderById(GetTriggerUnit(), $D007F, GetAttacker())
endfunction

function InitTrig_BossSkeletSkillActiv takes nothing returns nothing
	local integer index = 0
	set gg_trg_BossSkeletSkillActiv_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_BossSkeletSkillActiv_1, Player(index_0), EVENT_PLAYER_UNIT_ATTACKED_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_BossSkeletSkillActiv_1, Condition(function Trig_BossSkeletSkillActiv_Conditions))
	call TriggerAddAction(gg_trg_BossSkeletSkillActiv_1, function Trig_BossSkeletSkillActiv_Actions)
endfunction

function Trig_Fire_Arrow_Move_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local unit target = LoadUnitHandle(udg_hash_1, h_0, 5)
	local unit orb = LoadUnitHandle(udg_hash_1, h_0, 3)
	local effect ef
	local real x = GetUnitX(orb_0)
	local real y = GetUnitY(orb_0)
	local real xt = GetUnitX(target_0)
	local real yt = GetUnitY(target_0)
	local real xorb
	local real yorb
	local real angle = bj_RADTODEG_1 * Atan2((yt_0 - y_0), (xt_0 - x_0))
	local real dist = SquareRoot(((xt_0 - x_0) * (xt_0 - x_0)) + ((yt_0 - y_0) * (yt_0 - y_0)))
	local player p
	local real damage
	local unit dammi
	local boolean destroy = false
	set xorb_0 = x_0 + 24. * Cos(angle_0 * bj_DEGTORAD_1)
	set yorb_0 = y_0 + 24. * Sin(angle_0 * bj_DEGTORAD_1)
	call SetUnitPosition(orb_0, xorb_0, yorb_0)
	set dist_0 = SquareRoot((xt_0 - xorb_0) * (xt_0 - xorb_0) + (yt_0 - yorb_0) * (yt_0 - yorb_0))
	call SetUnitFacing(orb_0, angle_0)
	if GetUnitState(target_0, UNIT_STATE_LIFE_1) < .405 then
		set destroy_0 = true
	endif
	if dist_0 < 20. and GetUnitState(target_0, UNIT_STATE_LIFE_1) > .405 then
		call SetUnitPosition(orb_0, xt_0, yt_0)
		set p_0 = GetOwningPlayer(caster_0)
		set damage_0 = LoadReal(udg_hash_1, h_0, 2)
		if GetUnitState(target_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(target_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(target_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(target_0) != 'h00U' then
			call UnitDamageTarget(caster_0, target_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl", target_0, "chest"))
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIfb\\AIfbSpecialArt.mdl", target_0, "chest"))
			set dammi_0 = CreateUnit(p_0, 'h00U', xt_0, yt_0, .0)
			call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
			call UnitAddAbility(dammi_0, 'A0NG')
			call IssueTargetOrderById(dammi_0, $D02B6, target_0)
			set dammi_0 = null
		endif
		set p_0 = null
		set destroy_0 = true
	endif
	if destroy_0 then
		call KillUnit(orb_0)
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 4)
		call DestroyEffect(ef_0)
		set ef_0 = null
		call DestroyTimer(t_0)
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set caster_0 = null
	set orb_0 = null
	set target_0 = null
endfunction

function Trig_Fire_Arrow_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local player p = GetOwningPlayer(caster_0)
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local unit target = GetSpellTargetUnit()
	local real xt = GetUnitX(target_0)
	local real yt = GetUnitY(target_0)
	local real angle = bj_RADTODEG_1 * Atan2((yt_0 - y_0), (xt_0 - x_0))
	local real damage = 25.
	local unit orb = CreateUnit(p_0, 'h00U', x_0, y_0, angle_0)
	local effect ef = AddSpecialEffectTarget("Abilities\\Weapons\\SearingArrow\\SearingArrowMissile.mdl", orb_0, "origin")
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	call SetUnitX(orb_0, x_0 + 30. * Cos((angle_0) * bj_DEGTORAD_1))
	call SetUnitY(orb_0, y_0 + 30. * Sin((angle_0) * bj_DEGTORAD_1))
	call SetUnitFlyHeight(orb_0, 60., .0)
	call SetUnitScale(orb_0, 1.2, 1.2, 1.2)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveReal(udg_hash_1, h_0, 2, damage_0)
	call SaveUnitHandle(udg_hash_1, h_0, 3, orb_0)
	call SaveEffectHandle(udg_hash_1, h_0, 4, ef_0)
	call SaveUnitHandle(udg_hash_1, h_0, 5, target_0)
	call TimerStart(t_0, .03, true, function Trig_Fire_Arrow_Move_Actions)
	set caster_0 = null
	set t_0 = null
	set orb_0 = null
	set ef_0 = null
	set p_0 = null
	set target_0 = null
endfunction

function Trig_Fire_Arrow_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0NF'
endfunction

function InitTrig_Fire_Arrow takes nothing returns nothing
	local integer index = 0
	set gg_trg_Fire_Arrow_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Fire_Arrow_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Fire_Arrow_1, Condition(function Trig_Fire_Arrow_Conditions))
	call TriggerAddAction(gg_trg_Fire_Arrow_1, function Trig_Fire_Arrow_Actions)
endfunction

function Trig_Use_UnholyFrenzy_and_Fire_Arrow_Loop_Is_Enemy_Condition takes nothing returns boolean
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE_1) > .405) and (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE_1) == false) and (IsPlayerEnemy(udg_Temp_Player_1[1], GetOwningPlayer(GetFilterUnit())))) != null
endfunction

function Trig_Use_UnholyFrenzy_and_Fire_Arrow_Loop_Is_Ally_Condition takes nothing returns boolean
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE_1) > .405) and (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE_1) == false) and (IsPlayerAlly(udg_Temp_Player_1[1], GetOwningPlayer(GetFilterUnit())))) != null
endfunction

function Trig_Use_UnholyFrenzy_and_Fire_Arrow_All_Condition takes nothing returns boolean
	return (IsPlayerInForce(GetOwningPlayer(GetFilterUnit()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_UnholyFrenzy_and_Fire_Arrow_Actions takes nothing returns nothing
	local group gall = CreateGroup()
	local group g
	local group g2
	local unit Picked
	local unit target
	local real x
	local real y
	call GroupEnumUnitsInRect(gall_0, bj_mapInitialPlayableArea_1, Condition(function Trig_Use_UnholyFrenzy_and_Fire_Arrow_All_Condition))
	set g_0 = CreateGroup()
	call GroupToGroup(gall_0, g_0)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if (GetUnitAbilityLevel(Picked_0, 'A08S') > 0) and GetRandomInt(1, 2) == 1 then
			set g2_0 = CreateGroup()
			set x_0 = GetUnitX(Picked_0)
			set y_0 = GetUnitY(Picked_0)
			set udg_Temp_Player_1[1] = GetOwningPlayer(Picked_0)
			call GroupEnumUnitsInRange(g2_0, x_0, y_0, 600., Condition(function Trig_Use_UnholyFrenzy_and_Fire_Arrow_Loop_Is_Ally_Condition))
			call RandomUnitFromGroup(1, g2_0)
			set g2_0 = CreateGroup()
			call GroupToGroup(udg_GroupRandomUnitFromGroup_1, g2_0)
			set target_0 = FirstOfGroup(g2_0)
			if (target_0 != null) then
				call IssueTargetOrderById(Picked_0, $D0085, target_0)
			endif
			set udg_Temp_Player_1[1] = null
			call GroupClear(g2_0)
			call DestroyGroup(g2_0)
			set g2_0 = null
			set target_0 = null
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set g_0 = CreateGroup()
	call GroupToGroup(gall_0, g_0)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if (GetUnitAbilityLevel(Picked_0, 'A0NF') > 0) and GetRandomInt(1, 2) == 1 then
			set g2_0 = CreateGroup()
			set x_0 = GetUnitX(Picked_0)
			set y_0 = GetUnitY(Picked_0)
			set udg_Temp_Player_1[1] = GetOwningPlayer(Picked_0)
			call GroupEnumUnitsInRange(g2_0, x_0, y_0, 575., Condition(function Trig_Use_UnholyFrenzy_and_Fire_Arrow_Loop_Is_Enemy_Condition))
			call RandomUnitFromGroup(1, g2_0)
			set g2_0 = CreateGroup()
			call GroupToGroup(udg_GroupRandomUnitFromGroup_1, g2_0)
			set target_0 = FirstOfGroup(g2_0)
			if (target_0 != null) then
				call IssueTargetOrderById(Picked_0, $D00C1, target_0)
			endif
			set udg_Temp_Player_1[1] = null
			call GroupClear(g2_0)
			call DestroyGroup(g2_0)
			set g2_0 = null
			set target_0 = null
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	call GroupClear(gall_0)
	call DestroyGroup(gall_0)
	set gall_0 = null
endfunction

function Trig_Use_UnholyFrenzy_and_Fire_Arrow_Conditions takes nothing returns boolean
	return (udg_Nomer_samoi_volni_1 == 1)
endfunction

function InitTrig_Use_UnholyFrenzy_and_Fire_Arrow takes nothing returns nothing
	set gg_trg_Use_UnholyFrenzy_and_Fire_Arrow_1 = CreateTrigger()
	call TriggerRegisterTimerEvent(gg_trg_Use_UnholyFrenzy_and_Fire_Arrow_1, 1., true)
	call TriggerAddCondition(gg_trg_Use_UnholyFrenzy_and_Fire_Arrow_1, Condition(function Trig_Use_UnholyFrenzy_and_Fire_Arrow_Conditions))
	call TriggerAddAction(gg_trg_Use_UnholyFrenzy_and_Fire_Arrow_1, function Trig_Use_UnholyFrenzy_and_Fire_Arrow_Actions)
endfunction

function Trig_Create_Tombstone_Wait_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit tomb = LoadUnitHandle(udg_hash_1, h_0, 1)
	local effect ef = LoadEffectHandle(udg_hash_1, h_0, 2)
	local real angle = LoadReal(udg_hash_1, h_0, 3)
	local real x = GetUnitX(tomb_0)
	local real y = GetUnitY(tomb_0)
	local unit zombie = CreateUnit(GetOwningPlayer(tomb_0), 'n00H', x_0, y_0, angle_0)
	call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl", x_0, y_0))
	call IssuePointOrderById(zombie_0, $D000F, GetRectCenterX(gg_rct_cast_magi_1), GetRectCenterY(gg_rct_cast_magi_1))
	call KillUnit(tomb_0)
	call DestroyEffect(ef_0)
	set ef_0 = null
	call DestroyTimer(t_0)
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set tomb_0 = null
	set zombie_0 = null
	set t_0 = null
endfunction

function Trig_Create_Tombstone_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local player p = GetOwningPlayer(caster_0)
	local location loc = GetSpellTargetLoc()
	local real xt = GetLocationX(loc_0)
	local real yt = GetLocationY(loc_0)
	local real angle = GetRandomReal(-45., 45.) + 270.
	local unit tomb = CreateUnit(p_0, 'h00E', xt_0, yt_0, angle_0)
	local effect ef = AddSpecialEffectTarget("Abilities\\Spells\\Undead\\Graveyard\\GraveMarker.mdl", tomb_0, "origin")
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	call SaveUnitHandle(udg_hash_1, h_0, 1, tomb_0)
	call SaveEffectHandle(udg_hash_1, h_0, 2, ef_0)
	call SaveReal(udg_hash_1, h_0, 3, angle_0)
	call TimerStart(t_0, 4., false, function Trig_Create_Tombstone_Wait_Actions)
	set caster_0 = null
	set t_0 = null
	set tomb_0 = null
	set ef_0 = null
	set p_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
endfunction

function Trig_Create_Tombstone_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0O3'
endfunction

function InitTrig_Create_Tombstone takes nothing returns nothing
	local integer index = 0
	set gg_trg_Create_Tombstone_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Create_Tombstone_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Create_Tombstone_1, Condition(function Trig_Create_Tombstone_Conditions))
	call TriggerAddAction(gg_trg_Create_Tombstone_1, function Trig_Create_Tombstone_Actions)
endfunction

function Trig_ZombieExploadDeathMove_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit meat = LoadUnitHandle(udg_hash_1, h_0, 1)
	local unit target = LoadUnitHandle(udg_hash_1, h_0, 2)
	local effect ef
	local real xm = GetUnitX(meat_0)
	local real ym = GetUnitY(meat_0)
	local real xt = GetUnitX(target_0)
	local real yt = GetUnitY(target_0)
	local real angle = bj_RADTODEG_1 * Atan2(yt_0 - ym_0, xt_0 - xm_0)
	local real dist = SquareRoot((xt_0 - xm_0) * (xt_0 - xm_0) + (yt_0 - ym_0) * (yt_0 - ym_0))
	if dist_0 < 20. or GetUnitState(target_0, UNIT_STATE_LIFE_1) < .405 then
		if GetOwningPlayer(meat_0) == GetOwningPlayer(target_0) then
			call SetUnitState(target_0, UNIT_STATE_LIFE_1, GetUnitState(target_0, UNIT_STATE_LIFE_1) + 60.)
		else
			call SetUnitState(target_0, UNIT_STATE_LIFE_1, GetUnitState(target_0, UNIT_STATE_LIFE_1) - 25.)
		endif
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 3)
		call DestroyEffect(ef_0)
		call KillUnit(meat_0)
		set ef_0 = null
		set meat_0 = null
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
		set t_0 = null
	else
		if IsTerrainPathable(xm_0 + 20. * Cos(angle_0 * bj_DEGTORAD_1), ym_0 + 20. * Sin(angle_0 * bj_DEGTORAD_1), PATHING_TYPE_FLYABILITY_1) == false then
			call SetUnitPosition(meat_0, xm_0 + 20. * Cos(angle_0 * bj_DEGTORAD_1), ym_0 + 20. * Sin(angle_0 * bj_DEGTORAD_1))
		endif
	endif
	set meat_0 = null
	set target_0 = null
	set t_0 = null
endfunction

function Trig_ZombieExploadDeath_Actions takes nothing returns nothing
	local unit zomb = GetDyingUnit()
	local real x = GetUnitX(zomb_0)
	local real y = GetUnitY(zomb_0)
	local player p = GetOwningPlayer(zomb_0)
	local timer t
	local integer h
	local group g = CreateGroup()
	local group grup = CreateGroup()
	local unit Picked
	local integer count = 0
	local unit meat
	local effect ef
	call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Demon\\DemonLargeDeathExplode\\DemonLargeDeathExplode.mdl", x_0, y_0))
	call GroupEnumUnitsInRange(g_0, x_0, y_0, 325., null)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null or count_0 > 3
		if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
			call GroupAddUnit(grup_0, Picked_0)
			set count_0 = count_0 + 1
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	call RandomUnitFromGroup(3, grup_0)
	call GroupClear(g_0)
	call GroupAddGroup(udg_GroupRandomUnitFromGroup_1, g_0)
	set Picked_0 = null
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		set meat_0 = CreateUnit(p_0, 'h00U', x_0, y_0, .0)
		call SetUnitTimeScale(meat_0, 2.)
		set ef_0 = AddSpecialEffectTarget("Abilities\\Weapons\\MeatwagonMissile\\MeatwagonMissile.mdl", meat_0, "chest")
		set t_0 = CreateTimer()
		set h_0 = GetHandleId(t_0)
		call SaveUnitHandle(udg_hash_1, h_0, 1, meat_0)
		call SaveUnitHandle(udg_hash_1, h_0, 2, Picked_0)
		call SaveEffectHandle(udg_hash_1, h_0, 3, ef_0)
		call TimerStart(t_0, .04, true, function Trig_ZombieExploadDeathMove_Actions)
		set ef_0 = null
		set t_0 = null
		set meat_0 = null
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	call GroupClear(grup_0)
	call DestroyGroup(grup_0)
	set grup_0 = null
	set meat_0 = null
	set ef_0 = null
	set t_0 = null
	set p_0 = null
	set zomb_0 = null
	set Picked_0 = null
endfunction

function Trig_ZombieExploadDeath_Conditions takes nothing returns boolean
	return GetUnitTypeId(GetDyingUnit()) == 'n00H' and GetRandomInt(1, $A) <= 5
endfunction

function InitTrig_ZombieExploadDeath takes nothing returns nothing
	local integer index = 0
	set gg_trg_ZombieExploadDeath_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_ZombieExploadDeath_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_ZombieExploadDeath_1, Condition(function Trig_ZombieExploadDeath_Conditions))
	call TriggerAddAction(gg_trg_ZombieExploadDeath_1, function Trig_ZombieExploadDeath_Actions)
endfunction

function Trig_Damned_Soul_move_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit soul = LoadUnitHandle(udg_hash_1, h_0, 1)
	local group g = LoadGroupHandle(udg_hash_1, h_0, 2)
	local real damage = LoadReal(udg_hash_1, h_0, 3)
	local real angle = LoadReal(udg_hash_1, h_0, 4)
	local integer wait = LoadInteger(udg_hash_1, h_0, 5)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 6)
	local player p = GetOwningPlayer(caster_0)
	local real x = GetUnitX(soul_0) + 14. * Cos(angle_0 * bj_DEGTORAD_1)
	local real y = GetUnitY(soul_0) + 14. * Sin(angle_0 * bj_DEGTORAD_1)
	local effect ef
	local group grup = CreateGroup()
	local unit Picked
	local unit dammi
	if wait_0 > 0 then
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 5, wait_0)
		if IsTerrainPathable(x_0, y_0, PATHING_TYPE_FLYABILITY_1) == false then
			call SetUnitPosition(soul_0, x_0, y_0)
		endif
		call GroupEnumUnitsInRange(grup_0, x_0, y_0, 125., null)
		loop
			set Picked_0 = FirstOfGroup(grup_0)
			exitwhen Picked_0 == null
			if (IsUnitInGroup(Picked_0, udg_PortalCastersMagi_1) == false) and IsUnitEnemy(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitInGroup(Picked_0, g_0) == false and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
				set dammi_0 = CreateUnit(p_0, 'h00U', x_0, y_0, .0)
				call UnitApplyTimedLife(dammi_0, 'BTLF', .5)
				call UnitAddAbility(dammi_0, 'A0OA')
				call IssueTargetOrderById(dammi_0, $D02BC, Picked_0)
				set dammi_0 = null
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GargoyleMissile\\GargoyleMissile.mdl", Picked_0, "chest"))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathCoil\\DeathCoilSpecialArt.mdl", Picked_0, "origin"))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\CarrionSwarm\\CarrionSwarmDamage.mdl", Picked_0, "chest"))
				call GroupAddUnit(g_0, Picked_0)
			endif
			call GroupRemoveUnit(grup_0, Picked_0)
		endloop
		call SaveGroupHandle(udg_hash_1, h_0, 2, g_0)
	else
		set dammi_0 = CreateUnit(p_0, 'h00U', x_0, y_0, .0)
		call UnitApplyTimedLife(dammi_0, 'BTLF', 2.5)
		call UnitAddAbility(dammi_0, 'Amrf')
		call UnitRemoveAbility(dammi_0, 'Amrf')
		call SetUnitScale(dammi_0, 1.2, 1.2, 1.2)
		call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\Possession\\PossessionMissile.mdl", dammi_0, "origin"))
		call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\DeathCoil\\DeathCoilSpecialArt.mdl", x_0, y_0))
		set dammi_0 = null
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 7)
		call DestroyEffect(ef_0)
		set ef_0 = null
		call KillUnit(soul_0)
		call RemoveUnit(soul_0)
		call GroupClear(g_0)
		call DestroyGroup(g_0)
		set g_0 = null
	endif
	set Picked_0 = null
	call GroupClear(grup_0)
	call DestroyGroup(grup_0)
	set grup_0 = null
	set t_0 = null
	set soul_0 = null
	set g_0 = null
	set dammi_0 = null
	set caster_0 = null
	set p_0 = null
endfunction

function Trig_Damned_Soul_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local location loc
	local real xt
	local real yt
	local unit soul
	local group g = CreateGroup()
	local real damage = 50.
	local integer wait = 50
	local effect ef
	local real angle
	if GetSpellTargetUnit() == null then
		set loc_0 = GetSpellTargetLoc()
		set xt_0 = GetLocationX(loc_0)
		set yt_0 = GetLocationY(loc_0)
		call RemoveLocation(loc_0)
		set loc_0 = null
	else
		set xt_0 = GetUnitX(GetSpellTargetUnit())
		set yt_0 = GetUnitY(GetSpellTargetUnit())
	endif
	set angle_0 = bj_RADTODEG_1 * Atan2(yt_0 - y_0, xt_0 - x_0)
	set soul_0 = CreateUnit(GetOwningPlayer(caster_0), 'h00U', x_0, y_0, angle_0)
	set ef_0 = AddSpecialEffectTarget("Abilities\\Spells\\Undead\\Possession\\PossessionMissile.mdl", soul_0, "origin")
	call UnitAddAbility(soul_0, 'Amrf')
	call UnitRemoveAbility(soul_0, 'Amrf')
	call SetUnitScale(soul_0, 1.2, 1.2, 1.2)
	call SetUnitFlyHeight(soul_0, 80, .0)
	call SaveUnitHandle(udg_hash_1, h_0, 1, soul_0)
	call SaveGroupHandle(udg_hash_1, h_0, 2, g_0)
	call SaveReal(udg_hash_1, h_0, 3, damage_0)
	call SaveReal(udg_hash_1, h_0, 4, angle_0)
	call SaveInteger(udg_hash_1, h_0, 5, wait_0)
	call SaveUnitHandle(udg_hash_1, h_0, 6, caster_0)
	call SaveEffectHandle(udg_hash_1, h_0, 7, ef_0)
	call TimerStart(t_0, .03, true, function Trig_Damned_Soul_move_Actions)
	set caster_0 = null
	set t_0 = null
	set soul_0 = null
	set g_0 = null
	set ef_0 = null
endfunction

function Trig_Damned_Soul_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0O9'
endfunction

function InitTrig_Damned_Soul takes nothing returns nothing
	local integer index = 0
	set gg_trg_Damned_Soul_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Damned_Soul_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Damned_Soul_1, Condition(function Trig_Damned_Soul_Conditions))
	call TriggerAddAction(gg_trg_Damned_Soul_1, function Trig_Damned_Soul_Actions)
endfunction

function Trig_Use_PowerofHorror_and_Curse_and_Slam_Loop_Is_Enemy_Condition takes nothing returns boolean
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE_1) > .405) and (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE_1) == false) and (IsPlayerEnemy(udg_Temp_Player_1[1], GetOwningPlayer(GetFilterUnit())))) != null
endfunction

function Trig_Use_PowerofHorror_and_Curse_and_Slam_Loop_Is_Ally_Condition takes nothing returns boolean
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE_1) > .405) and (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE_1) == false) and (IsPlayerAlly(udg_Temp_Player_1[1], GetOwningPlayer(GetFilterUnit())))) != null
endfunction

function Trig_Use_PowerofHorror_and_Curse_and_Slam_All_Condition takes nothing returns boolean
	return (IsPlayerInForce(GetOwningPlayer(GetFilterUnit()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_PowerofHorror_and_Curse_and_Slam_Actions takes nothing returns nothing
	local group gall = CreateGroup()
	local group g
	local group g2
	local unit Picked
	local unit target
	local real x
	local real y
	local real dist
	local real angle
	call GroupEnumUnitsInRect(gall_0, bj_mapInitialPlayableArea_1, Condition(function Trig_Use_PowerofHorror_and_Curse_and_Slam_All_Condition))
	set g_0 = CreateGroup()
	call GroupToGroup(gall_0, g_0)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if (GetUnitAbilityLevel(Picked_0, 'A07X') > 0) and GetRandomInt(1, 2) == 1 then
			set g2_0 = CreateGroup()
			set x_0 = GetUnitX(Picked_0)
			set y_0 = GetUnitY(Picked_0)
			set udg_Temp_Player_1[1] = GetOwningPlayer(Picked_0)
			call GroupEnumUnitsInRange(g2_0, x_0, y_0, 600., Condition(function Trig_Use_PowerofHorror_and_Curse_and_Slam_Loop_Is_Enemy_Condition))
			call RandomUnitFromGroup(1, g2_0)
			set g2_0 = CreateGroup()
			call GroupToGroup(udg_GroupRandomUnitFromGroup_1, g2_0)
			set target_0 = FirstOfGroup(g2_0)
			if (target_0 != null) then
				call IssueTargetOrderById(Picked_0, $D00DE, target_0)
			endif
			set udg_Temp_Player_1[1] = null
			call GroupClear(g2_0)
			call DestroyGroup(g2_0)
			set g2_0 = null
			set target_0 = null
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set g_0 = CreateGroup()
	call GroupToGroup(gall_0, g_0)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if (GetUnitAbilityLevel(Picked_0, 'A08B') > 0) and GetRandomInt(1, 2) == 1 then
			set g2_0 = CreateGroup()
			set x_0 = GetUnitX(Picked_0)
			set y_0 = GetUnitY(Picked_0)
			set udg_Temp_Player_1[1] = GetOwningPlayer(Picked_0)
			call GroupEnumUnitsInRange(g2_0, x_0, y_0, 575., Condition(function Trig_Use_PowerofHorror_and_Curse_and_Slam_Loop_Is_Ally_Condition))
			call RandomUnitFromGroup(1, g2_0)
			set g2_0 = CreateGroup()
			call GroupToGroup(udg_GroupRandomUnitFromGroup_1, g2_0)
			set target_0 = FirstOfGroup(g2_0)
			if (target_0 != null) then
				call IssueTargetOrderById(Picked_0, $D0062, target_0)
			endif
			set udg_Temp_Player_1[1] = null
			call GroupClear(g2_0)
			call DestroyGroup(g2_0)
			set g2_0 = null
			set target_0 = null
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set g_0 = CreateGroup()
	call GroupToGroup(gall_0, g_0)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if (GetUnitAbilityLevel(Picked_0, 'A08C') > 0) and GetRandomInt(1, 2) == 1 then
			set g2_0 = CreateGroup()
			set x_0 = GetUnitX(Picked_0)
			set y_0 = GetUnitY(Picked_0)
			set udg_Temp_Player_1[1] = GetOwningPlayer(Picked_0)
			call GroupEnumUnitsInRange(g2_0, x_0, y_0, 600., Condition(function Trig_Use_PowerofHorror_and_Curse_and_Slam_Loop_Is_Enemy_Condition))
			call RandomUnitFromGroup(1, g2_0)
			set g2_0 = CreateGroup()
			call GroupToGroup(udg_GroupRandomUnitFromGroup_1, g2_0)
			set target_0 = FirstOfGroup(g2_0)
			if (target_0 != null) then
				call IssueTargetOrderById(Picked_0, $D0062, target_0)
			endif
			set udg_Temp_Player_1[1] = null
			call GroupClear(g2_0)
			call DestroyGroup(g2_0)
			set g2_0 = null
			set target_0 = null
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set g_0 = CreateGroup()
	call GroupToGroup(gall_0, g_0)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if (GetUnitAbilityLevel(Picked_0, 'A08F') > 0) and GetRandomInt(1, 2) == 1 then
			set g2_0 = CreateGroup()
			set x_0 = GetUnitX(Picked_0)
			set y_0 = GetUnitY(Picked_0)
			set udg_Temp_Player_1[1] = GetOwningPlayer(Picked_0)
			call GroupEnumUnitsInRange(g2_0, x_0, y_0, 300., Condition(function Trig_Use_PowerofHorror_and_Curse_and_Slam_Loop_Is_Enemy_Condition))
			call RandomUnitFromGroup(1, g2_0)
			set g2_0 = CreateGroup()
			call GroupToGroup(udg_GroupRandomUnitFromGroup_1, g2_0)
			set target_0 = FirstOfGroup(g2_0)
			if (target_0 != null) then
				call IssueImmediateOrderById(Picked_0, $D011D)
			endif
			set udg_Temp_Player_1[1] = null
			call GroupClear(g2_0)
			call DestroyGroup(g2_0)
			set g2_0 = null
			set target_0 = null
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set g_0 = CreateGroup()
	call GroupToGroup(gall_0, g_0)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if (GetUnitAbilityLevel(Picked_0, 'A08S') > 0) and GetRandomInt(1, 2) == 1 then
			set g2_0 = CreateGroup()
			set x_0 = GetUnitX(Picked_0)
			set y_0 = GetUnitY(Picked_0)
			set udg_Temp_Player_1[1] = GetOwningPlayer(Picked_0)
			call GroupEnumUnitsInRange(g2_0, x_0, y_0, 600., Condition(function Trig_Use_PowerofHorror_and_Curse_and_Slam_Loop_Is_Ally_Condition))
			call RandomUnitFromGroup(1, g2_0)
			set g2_0 = CreateGroup()
			call GroupToGroup(udg_GroupRandomUnitFromGroup_1, g2_0)
			set target_0 = FirstOfGroup(g2_0)
			if (target_0 != null) then
				call IssueTargetOrderById(Picked_0, $D00F1, target_0)
			endif
			set udg_Temp_Player_1[1] = null
			call GroupClear(g2_0)
			call DestroyGroup(g2_0)
			set g2_0 = null
			set target_0 = null
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	if GetRandomInt(1, 40) == 1 and (udg_Is_Fast_Wave_Start_On_Off_1 == false) then
		set g2_0 = CreateGroup()
		call GroupAddGroup(udg_Gruppa_HeroUnitov_Geroev_1, g2_0)
		loop
			set Picked_0 = FirstOfGroup(g2_0)
			exitwhen Picked_0 == null
			set target_0 = CreateUnit(Player(9), 'h00E', GetUnitX(Picked_0), GetUnitY(Picked_0), 270.)
			set dist_0 = GetRandomReal(100., 125.)
			set angle_0 = GetRandomReal(.0, 360.)
			call UnitAddAbility(target_0, 'A0O3')
			call UnitApplyTimedLife(target_0, 'BTLF', 2.)
			call IssuePointOrderById(target_0, $D00FA, GetUnitX(Picked_0) + dist_0 * Cos(angle_0 * bj_DEGTORAD_1), GetUnitY(Picked_0) + dist_0 * Sin(angle_0 * bj_DEGTORAD_1))
			set target_0 = null
			call GroupRemoveUnit(g2_0, Picked_0)
		endloop
		call GroupClear(g2_0)
		call DestroyGroup(g2_0)
		set g2_0 = null
		set Picked_0 = null
	endif
	set g_0 = CreateGroup()
	call GroupToGroup(gall_0, g_0)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if (GetUnitAbilityLevel(Picked_0, 'A0O9') > 0) and GetRandomInt(1, 2) == 1 then
			set g2_0 = CreateGroup()
			set x_0 = GetUnitX(Picked_0)
			set y_0 = GetUnitY(Picked_0)
			set udg_Temp_Player_1[1] = GetOwningPlayer(Picked_0)
			call GroupEnumUnitsInRange(g2_0, x_0, y_0, 600., Condition(function Trig_Use_PowerofHorror_and_Curse_and_Slam_Loop_Is_Enemy_Condition))
			call RandomUnitFromGroup(1, g2_0)
			set g2_0 = CreateGroup()
			call GroupToGroup(udg_GroupRandomUnitFromGroup_1, g2_0)
			set target_0 = FirstOfGroup(g2_0)
			if (target_0 != null) then
				call IssueTargetOrderById(Picked_0, $D00FA, target_0)
			endif
			set udg_Temp_Player_1[1] = null
			call GroupClear(g2_0)
			call DestroyGroup(g2_0)
			set g2_0 = null
			set target_0 = null
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set g_0 = CreateGroup()
	call GroupToGroup(gall_0, g_0)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if (GetUnitAbilityLevel(Picked_0, 'A0PI') > 0) and GetRandomInt(1, 2) == 1 then
			set g2_0 = CreateGroup()
			set x_0 = GetUnitX(Picked_0)
			set y_0 = GetUnitY(Picked_0)
			set udg_Temp_Player_1[1] = GetOwningPlayer(Picked_0)
			call GroupEnumUnitsInRange(g2_0, x_0, y_0, 700., Condition(function Trig_Use_PowerofHorror_and_Curse_and_Slam_Loop_Is_Enemy_Condition))
			call RandomUnitFromGroup(1, g2_0)
			set g2_0 = CreateGroup()
			call GroupToGroup(udg_GroupRandomUnitFromGroup_1, g2_0)
			set target_0 = FirstOfGroup(g2_0)
			if (target_0 != null) then
				call IssueTargetOrderById(Picked_0, $D021B, target_0)
			endif
			set udg_Temp_Player_1[1] = null
			call GroupClear(g2_0)
			call DestroyGroup(g2_0)
			set g2_0 = null
			set target_0 = null
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set g_0 = CreateGroup()
	call GroupToGroup(gall_0, g_0)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if (GetUnitAbilityLevel(Picked_0, 'A08F') > 0) and GetRandomInt(1, 2) == 1 then
			set g2_0 = CreateGroup()
			set x_0 = GetUnitX(Picked_0)
			set y_0 = GetUnitY(Picked_0)
			set udg_Temp_Player_1[1] = GetOwningPlayer(Picked_0)
			call GroupEnumUnitsInRange(g2_0, x_0, y_0, 200., Condition(function Trig_Use_PowerofHorror_and_Curse_and_Slam_Loop_Is_Enemy_Condition))
			call RandomUnitFromGroup(1, g2_0)
			set g2_0 = CreateGroup()
			call GroupToGroup(udg_GroupRandomUnitFromGroup_1, g2_0)
			set target_0 = FirstOfGroup(g2_0)
			if (target_0 != null) then
				call IssueImmediateOrderById(Picked_0, $D00FB)
			endif
			set udg_Temp_Player_1[1] = null
			call GroupClear(g2_0)
			call DestroyGroup(g2_0)
			set g2_0 = null
			set target_0 = null
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	call GroupClear(gall_0)
	call DestroyGroup(gall_0)
	set gall_0 = null
endfunction

function Trig_Use_PowerofHorror_and_Curse_and_Slam_Conditions takes nothing returns boolean
	return (udg_Nomer_samoi_volni_1 == 2)
endfunction

function InitTrig_Use_PowerofHorror_and_Curse_and_Slam_and_Dumned_Soul takes nothing returns nothing
	set gg_trg_Use_PowerofHorror_and_Curse_and_Slam_and_Dumned_Soul_1 = CreateTrigger()
	call TriggerRegisterTimerEvent(gg_trg_Use_PowerofHorror_and_Curse_and_Slam_and_Dumned_Soul_1, 1., true)
	call TriggerAddCondition(gg_trg_Use_PowerofHorror_and_Curse_and_Slam_and_Dumned_Soul_1, Condition(function Trig_Use_PowerofHorror_and_Curse_and_Slam_Conditions))
	call TriggerAddAction(gg_trg_Use_PowerofHorror_and_Curse_and_Slam_and_Dumned_Soul_1, function Trig_Use_PowerofHorror_and_Curse_and_Slam_Actions)
endfunction

function Trig_Throw_Meat_Move2_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit u = LoadUnitHandle(udg_hash_1, h_0, 1)
	call PauseUnit(u_0, false)
	if GetUnitState(u_0, UNIT_STATE_LIFE_1) >= .405 then
		call SetUnitAnimation(u_0, "stand")
		call IssuePointOrderById(u_0, $D000F, GetRectCenterX(gg_rct_cast_magi_1), GetRectCenterY(gg_rct_cast_magi_1))
	endif
	set u_0 = null
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
endfunction

function Trig_Throw_Meat_Move_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster
	local unit target = LoadUnitHandle(udg_hash_1, h_0, 4)
	local real damage
	local real stuntime
	local real angle
	local unit dagger = LoadUnitHandle(udg_hash_1, h_0, 7)
	local real x = GetUnitX(dagger_0)
	local real y = GetUnitY(dagger_0)
	local real xt = GetUnitX(target_0)
	local real yt = GetUnitY(target_0)
	local real dist
	local unit zombie
	local integer h2
	local timer t2
	set angle_0 = bj_RADTODEG_1 * Atan2(yt_0 - y_0, xt_0 - x_0)
	set dist_0 = SquareRoot((xt_0 - x_0) * (xt_0 - x_0) + (yt_0 - y_0) * (yt_0 - y_0))
	call SetUnitPosition(dagger_0, x_0 + 21. * Cos((angle_0) * bj_DEGTORAD_1), y_0 + 21. * Sin((angle_0) * bj_DEGTORAD_1))
	if dist_0 < 50. or GetUnitState(target_0, UNIT_STATE_LIFE_1) < .405 then
		set caster_0 = LoadUnitHandle(udg_hash_1, h_0, 1)
		set damage_0 = LoadReal(udg_hash_1, h_0, 2)
		set stuntime_0 = LoadReal(udg_hash_1, h_0, 3)
		call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\MeatwagonMissile\\MeatwagonMissile.mdl", target_0, "chest"))
		call UnitDamageTarget(caster_0, target_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
		call StunUnitTimed(target_0, stuntime_0)
		call DestroyEffect(LoadEffectHandle(udg_hash_1, h_0, 8))
		set zombie_0 = CreateUnit(GetOwningPlayer(caster_0), 'n00H', xt_0 + GetRandomReal(30., 100.), yt_0 + GetRandomReal(30., 100.), GetRandomReal(.0, 360.))
		set t2_0 = CreateTimer()
		set h2_0 = GetHandleId(t2_0)
		call PauseUnit(zombie_0, true)
		call SetUnitAnimation(zombie_0, "Birth")
		call SaveUnitHandle(udg_hash_1, h2_0, 1, zombie_0)
		call TimerStart(t2_0, 2.33, false, function Trig_Throw_Meat_Move2_Actions)
		set t2_0 = null
		set zombie_0 = null
		call RemoveUnit(dagger_0)
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
		set caster_0 = null
	endif
	set t_0 = null
	set target_0 = null
	set dagger_0 = null
endfunction

function Trig_Throw_Meat_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local unit target = GetSpellTargetUnit()
	local real tx = GetUnitX(target_0)
	local real ty = GetUnitY(target_0)
	local real damage = 100.
	local real stuntime = 2.
	local real angle
	local real dist
	local unit dagger
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local effect ef
	set angle_0 = bj_RADTODEG_1 * Atan2(ty_0 - y_0, tx_0 - x_0)
	set dist_0 = SquareRoot((tx_0 - x_0) * (tx_0 - x_0) + (ty_0 - y_0) * (ty_0 - y_0))
	set dagger_0 = CreateUnit(GetOwningPlayer(caster_0), 'h00U', x_0, y_0, angle_0)
	call SetUnitX(dagger_0, x_0 + 150. * Cos((angle_0 + 90.) * bj_DEGTORAD_1))
	call SetUnitY(dagger_0, y_0 + 150. * Sin((angle_0 + 90.) * bj_DEGTORAD_1))
	call UnitAddAbility(dagger_0, 'Amrf')
	call UnitRemoveAbility(dagger_0, 'Amrf')
	call SetUnitScale(dagger_0, 1.5, 1.5, 1.5)
	call SetUnitPathing(dagger_0, false)
	call SetUnitFlyHeight(dagger_0, 200., .0)
	call SetUnitFlyHeight(dagger_0, 25., (($AF * 700) / dist_0))
	set ef_0 = AddSpecialEffectTarget("Abilities\\Weapons\\MeatwagonMissile\\MeatwagonMissile.mdl", dagger_0, "origin")
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveReal(udg_hash_1, h_0, 2, damage_0)
	call SaveReal(udg_hash_1, h_0, 3, stuntime_0)
	call SaveUnitHandle(udg_hash_1, h_0, 4, target_0)
	call SaveUnitHandle(udg_hash_1, h_0, 7, dagger_0)
	call SaveEffectHandle(udg_hash_1, h_0, 8, ef_0)
	call TimerStart(t_0, .03, true, function Trig_Throw_Meat_Move_Actions)
	set caster_0 = null
	set target_0 = null
	set t_0 = null
	set dagger_0 = null
	set ef_0 = null
endfunction

function Trig_Throw_Meat_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0PI'
endfunction

function InitTrig_Throw_Meat takes nothing returns nothing
	local integer index = 0
	set gg_trg_Throw_Meat_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Throw_Meat_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Throw_Meat_1, Condition(function Trig_Throw_Meat_Conditions))
	call TriggerAddAction(gg_trg_Throw_Meat_1, function Trig_Throw_Meat_Actions)
endfunction

function Trig_Earth_Clap_WAIT_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local unit dammi
	local real xc = GetUnitX(caster_0)
	local real yc = GetUnitY(caster_0)
	local player p = GetOwningPlayer(caster_0)
	local real damage = 100.
	local group g = CreateGroup()
	local unit Picked
	call GroupEnumUnitsInRange(g_0, xc_0, yc_0, 200., null)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if (IsUnitInGroup(Picked_0, udg_PortalCastersMagi_1) == false) and IsUnitEnemy(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
			set dammi_0 = CreateUnit(p_0, 'h00U', GetUnitX(Picked_0), GetUnitY(Picked_0), .0)
			call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
			call UnitAddAbility(dammi_0, 'A0FE')
			call IssueTargetOrderById(dammi_0, $D006B, Picked_0)
			call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
			set dammi_0 = null
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", xc_0, yc_0))
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set caster_0 = null
	set t_0 = null
	set dammi_0 = null
	set p_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
endfunction

function Trig_Earth_Clap_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call TimerStart(t_0, .5, false, function Trig_Earth_Clap_WAIT_Actions)
	set caster_0 = null
	set t_0 = null
endfunction

function Trig_Earth_Clap_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A08F'
endfunction

function InitTrig_Earth_Clap takes nothing returns nothing
	local integer index = 0
	set gg_trg_Earth_Clap_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Earth_Clap_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Earth_Clap_1, Condition(function Trig_Earth_Clap_Conditions))
	call TriggerAddAction(gg_trg_Earth_Clap_1, function Trig_Earth_Clap_Actions)
endfunction

function Trig_Ghoul_Jump_Move_Dest_Actions takes nothing returns nothing
	call KillDestructable(GetEnumDestructable())
endfunction

function Trig_Ghoul_Jump_Move_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local integer wait = LoadInteger(udg_hash_1, h_0, 5)
	local real face = LoadReal(udg_hash_1, h_0, 6)
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local rect r
	if wait_0 > 0 and GetUnitState(caster_0, UNIT_STATE_LIFE_1) > .405 then
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 5, wait_0)
		call SetUnitFacing(caster_0, face_0)
	else
		call SetUnitAnimation(caster_0, "stand")
		set r_0 = Rect(x_0 - 100., y_0 - 100., x_0 + 100., y_0 + 100.)
		call EnumDestructablesInRect(r_0, null, function Trig_Ghoul_Jump_Move_Dest_Actions)
		call SetUnitPathing(caster_0, true)
		call SetUnitTimeScale(caster_0, 1.)
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
		call RemoveRect(r_0)
		set r_0 = null
	endif
	set t_0 = null
	set caster_0 = null
endfunction

function Trig_Ghoul_Jump_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local unit target = GetSpellTargetUnit()
	local real angle
	local location loc
	local real tx
	local real ty
	local real dist
	local real time
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	call SetUnitAnimation(caster_0, "stand")
	call SetUnitPathing(caster_0, false)
	call SetUnitAnimationByIndex(caster_0, $A)
	if target_0 == null then
		set loc_0 = GetSpellTargetLoc()
		set tx_0 = GetLocationX(loc_0)
		set ty_0 = GetLocationY(loc_0)
	else
		set tx_0 = GetUnitX(target_0)
		set ty_0 = GetUnitY(target_0)
	endif
	set angle_0 = bj_RADTODEG_1 * Atan2(ty_0 - y_0, tx_0 - x_0)
	set dist_0 = SquareRoot((tx_0 - x_0) * (tx_0 - x_0) + (ty_0 - y_0) * (ty_0 - y_0))
	set time_0 = dist_0 / 500.
	call SetUnitTimeScale(caster_0, (1 / time_0))
	call MoveUnit(caster_0, time_0, 500., .0, angle_0, (dist_0 / 3), true)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveInteger(udg_hash_1, h_0, 5, R2I(dist_0 / 15.))
	call SaveReal(udg_hash_1, h_0, 6, angle_0)
	call TimerStart(t_0, .03, true, function Trig_Ghoul_Jump_Move_Actions)
	set caster_0 = null
	set target_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set t_0 = null
endfunction

function Trig_Ghoul_Jump_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0NH'
endfunction

function InitTrig_Ghoul_Jump takes nothing returns nothing
	local integer index = 0
	set gg_trg_Ghoul_Jump_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Ghoul_Jump_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Ghoul_Jump_1, Condition(function Trig_Ghoul_Jump_Conditions))
	call TriggerAddAction(gg_trg_Ghoul_Jump_1, function Trig_Ghoul_Jump_Actions)
endfunction

function Trig_BurrowStrike_Move_Dest_Actions takes nothing returns nothing
	call KillDestructable(GetEnumDestructable())
endfunction

function Trig_BurrowStrike_Move_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local group gdamage = LoadGroupHandle(udg_hash_1, h_0, 2)
	local integer wait3 = LoadInteger(udg_hash_1, h_0, 3)
	local integer wait2 = LoadInteger(udg_hash_1, h_0, 4)
	local integer wait = LoadInteger(udg_hash_1, h_0, 5)
	local real face = LoadReal(udg_hash_1, h_0, 6)
	local real time = LoadReal(udg_hash_1, h_0, 7)
	local integer rewait = LoadInteger(udg_hash_1, h_0, 8)
	local integer impale = LoadInteger(udg_hash_1, h_0, 9)
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local player p = GetOwningPlayer(caster_0)
	local group g
	local unit Picked
	local real angle
	local real angle2
	local unit dammi
	local boolean alife = true
	local rect r
	local unit dammief
	if GetUnitState(caster_0, UNIT_STATE_LIFE_1) < .405 then
		set alife_0 = false
	endif
	if wait3_0 > 0 then
		set wait3_0 = wait3_0 - 1
		call SaveInteger(udg_hash_1, h_0, 3, wait3_0)
	endif
	if wait3_0 <= 0 and wait_0 > 0 then
		if wait_0 == rewait_0 then
			call MoveUnit(caster_0, time_0, 400., .0, face_0, .0, true)
			call PauseUnit(caster_0, true)
		endif
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 5, wait_0)
		if impale_0 < 5 then
			set impale_0 = impale_0 + 1
		else
			set impale_0 = 0
			set dammief_0 = CreateUnit(p_0, 'h00U', x_0 + 100. * Cos(face_0 * bj_DEGTORAD_1), y_0 + 100. * Sin(face_0 * bj_DEGTORAD_1), GetRandomReal(.0, 360.))
			call UnitApplyTimedLife(dammief_0, 'BTLF', 1.)
			call SetUnitScale(dammief_0, 2., 2., 2.5)
			call DestroyEffect(AddSpecialEffectTarget("Effects\\ImpaleMissTarget.mdl", dammief_0, "origin"))
			set dammief_0 = null
		endif
		call SaveInteger(udg_hash_1, h_0, 9, impale_0)
		set r_0 = Rect(x_0 - 100., y_0 - 100., x_0 + 100., y_0 + 100.)
		set g_0 = CreateGroup()
		call EnumDestructablesInRect(r_0, null, function Trig_BurrowStrike_Move_Dest_Actions)
		call GroupEnumUnitsInRange(g_0, x_0, y_0, 125., null)
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if IsUnitEnemy(Picked_0, p_0) and IsUnitInGroup(Picked_0, gdamage_0) == false and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call GroupAddUnit(gdamage_0, Picked_0)
				call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", Picked_0, "chest"))
				set dammi_0 = CreateUnit(p_0, 'h00U', x_0, y_0, .0)
				call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
				call UnitAddAbility(dammi_0, 'A01U')
				call IssueTargetOrderById(dammi_0, $D007F, Picked_0)
				set dammi_0 = null
				if GetOwningPlayer(Picked_0) != Player($F) then
					set angle_0 = bj_RADTODEG_1 * Atan2(GetUnitY(Picked_0) - y_0, GetUnitX(Picked_0) - x_0)
					set angle2_0 = (Atan2(y_0 - GetUnitY(Picked_0), x_0 - GetUnitX(Picked_0)) * bj_RADTODEG_1) + 360.
					if (angle2_0 <= (GetUnitFacing(caster_0) + 210.) and angle2_0 >= (GetUnitFacing(caster_0) + 180.)) then
						set angle_0 = angle_0 + 30.
					endif
					if (angle2_0 <= (GetUnitFacing(caster_0) + 180.) and angle2_0 >= (GetUnitFacing(caster_0) + 150.)) then
						set angle_0 = angle_0 - 30.
					endif
					call MoveUnit(Picked_0, 1., 400., 400., angle_0, 200., false)
				endif
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		call GroupClear(g_0)
		call DestroyGroup(g_0)
		set g_0 = null
		call RemoveRect(r_0)
		set r_0 = null
		set Picked_0 = null
		call SaveGroupHandle(udg_hash_1, h_0, 2, gdamage_0)
	endif
	if wait_0 <= 0 and wait2_0 > 0 then
		if wait2_0 == $F then
			call SetUnitAnimationByIndex(caster_0, $A)
		endif
		set wait2_0 = wait2_0 - 1
		call SaveInteger(udg_hash_1, h_0, 4, wait2_0)
	endif
	if wait2_0 <= 0 or alife_0 == false then
		if alife_0 then
			call SetUnitAnimation(caster_0, "stand")
		endif
		call PauseUnit(caster_0, false)
		call SetUnitPathing(caster_0, true)
		call GroupClear(gdamage_0)
		call DestroyGroup(gdamage_0)
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set caster_0 = null
	set gdamage_0 = null
	set p_0 = null
	set Picked_0 = null
	set dammi_0 = null
endfunction

function Trig_BurrowStrike_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local unit target = GetSpellTargetUnit()
	local real angle
	local group gdamage = CreateGroup()
	local location loc
	local real tx
	local real ty
	local real dist
	local real time
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local integer wait
	local integer wait2 = 27
	local integer wait3 = 30
	local integer impale = 0
	call SetUnitAnimation(caster_0, "stand")
	call SetUnitPathing(caster_0, false)
	call SetUnitAnimationByIndex(caster_0, 8)
	call SetUnitTimeScale(caster_0, 1.)
	call UnitPeriodicPostionMove(caster_0, .03, .5)
	if target_0 == null then
		set loc_0 = GetSpellTargetLoc()
		set tx_0 = GetLocationX(loc_0)
		set ty_0 = GetLocationY(loc_0)
	else
		set tx_0 = GetUnitX(target_0)
		set ty_0 = GetUnitY(target_0)
	endif
	set angle_0 = bj_RADTODEG_1 * Atan2(ty_0 - y_0, tx_0 - x_0)
	set dist_0 = SquareRoot((tx_0 - x_0) * (tx_0 - x_0) + (ty_0 - y_0) * (ty_0 - y_0))
	if target_0 == caster_0 then
		set angle_0 = GetUnitFacing(caster_0)
		set dist_0 = 800.
	endif
	set time_0 = dist_0 / 400.
	set wait_0 = R2I(dist_0 / 12.)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveGroupHandle(udg_hash_1, h_0, 2, gdamage_0)
	call SaveInteger(udg_hash_1, h_0, 3, wait3_0)
	call SaveInteger(udg_hash_1, h_0, 4, wait2_0)
	call SaveInteger(udg_hash_1, h_0, 5, wait_0)
	call SaveReal(udg_hash_1, h_0, 6, angle_0)
	call SaveReal(udg_hash_1, h_0, 7, time_0)
	call SaveInteger(udg_hash_1, h_0, 8, wait_0)
	call SaveInteger(udg_hash_1, h_0, 9, impale_0)
	call TimerStart(t_0, .03, true, function Trig_BurrowStrike_Move_Actions)
	call SetUnitAnimationByIndex(caster_0, 8)
	call PauseUnit(caster_0, true)
	call SetUnitAnimationByIndex(caster_0, 8)
	set caster_0 = null
	set target_0 = null
	set gdamage_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set t_0 = null
endfunction

function Trig_BurrowStrike_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0NO'
endfunction

function InitTrig_BurrowStrike takes nothing returns nothing
	local integer index = 0
	set gg_trg_BurrowStrike_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_BurrowStrike_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_BurrowStrike_1, Condition(function Trig_BurrowStrike_Conditions))
	call TriggerAddAction(gg_trg_BurrowStrike_1, function Trig_BurrowStrike_Actions)
endfunction

function Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Loop_Raise_Dead_Condition takes nothing returns boolean
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE_1) < .405) and (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE_1) == false) and (GetUnitTypeId(GetFilterUnit()) != 'h00U')) != null
endfunction

function Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Loop_Is_Enemy_Condition takes nothing returns boolean
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE_1) > .405) and (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE_1) == false) and (IsPlayerEnemy(udg_Temp_Player_1[1], GetOwningPlayer(GetFilterUnit())))) != null
endfunction

function Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Loop_Is_Ally_Condition takes nothing returns boolean
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE_1) > .405) and (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE_1) == false) and (IsPlayerAlly(udg_Temp_Player_1[1], GetOwningPlayer(GetFilterUnit())))) != null
endfunction

function Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_All_Condition takes nothing returns boolean
	return (IsPlayerInForce(GetOwningPlayer(GetFilterUnit()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Actions takes nothing returns nothing
	local group gall = CreateGroup()
	local group g
	local group g2
	local unit Picked
	local unit target
	local real x
	local real y
	local real angle
	call GroupEnumUnitsInRect(gall_0, bj_mapInitialPlayableArea_1, Condition(function Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_All_Condition))
	set g_0 = CreateGroup()
	call GroupToGroup(gall_0, g_0)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if (GetUnitAbilityLevel(Picked_0, 'A086') > 0) and GetRandomInt(1, 2) == 1 then
			set g2_0 = CreateGroup()
			set x_0 = GetUnitX(Picked_0)
			set y_0 = GetUnitY(Picked_0)
			set udg_Temp_Player_1[1] = GetOwningPlayer(Picked_0)
			call GroupEnumUnitsInRange(g2_0, x_0, y_0, 600., Condition(function Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Loop_Raise_Dead_Condition))
			call RandomUnitFromGroup(1, g2_0)
			set g2_0 = CreateGroup()
			call GroupToGroup(udg_GroupRandomUnitFromGroup_1, g2_0)
			set target_0 = FirstOfGroup(g2_0)
			if (target_0 != null) then
				call IssueImmediateOrderById(Picked_0, $D00E5)
			endif
			set udg_Temp_Player_1[1] = null
			call GroupClear(g2_0)
			call DestroyGroup(g2_0)
			set g2_0 = null
			set target_0 = null
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set g_0 = CreateGroup()
	call GroupToGroup(gall_0, g_0)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if (GetUnitAbilityLevel(Picked_0, 'A08K') > 0) and GetRandomInt(1, 2) == 1 then
			set g2_0 = CreateGroup()
			set x_0 = GetUnitX(Picked_0)
			set y_0 = GetUnitY(Picked_0)
			set udg_Temp_Player_1[1] = GetOwningPlayer(Picked_0)
			call GroupEnumUnitsInRange(g2_0, x_0, y_0, 800., Condition(function Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Loop_Is_Enemy_Condition))
			call RandomUnitFromGroup(1, g2_0)
			set g2_0 = CreateGroup()
			call GroupToGroup(udg_GroupRandomUnitFromGroup_1, g2_0)
			set target_0 = FirstOfGroup(g2_0)
			if (target_0 != null) then
				call IssueTargetOrderById(Picked_0, $D00FE, target_0)
			endif
			set udg_Temp_Player_1[1] = null
			call GroupClear(g2_0)
			call DestroyGroup(g2_0)
			set g2_0 = null
			set target_0 = null
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set g_0 = CreateGroup()
	call GroupToGroup(gall_0, g_0)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if (GetUnitAbilityLevel(Picked_0, 'A08K') > 0) and GetRandomInt(1, 2) == 1 then
			set g2_0 = CreateGroup()
			set x_0 = GetUnitX(Picked_0)
			set y_0 = GetUnitY(Picked_0)
			set udg_Temp_Player_1[1] = GetOwningPlayer(Picked_0)
			call GroupEnumUnitsInRange(g2_0, x_0, y_0, 800., Condition(function Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Loop_Is_Ally_Condition))
			call RandomUnitFromGroup(1, g2_0)
			set g2_0 = CreateGroup()
			call GroupToGroup(udg_GroupRandomUnitFromGroup_1, g2_0)
			set target_0 = FirstOfGroup(g2_0)
			if (target_0 != null) then
				call IssueTargetOrderById(Picked_0, $D00FE, target_0)
			endif
			set udg_Temp_Player_1[1] = null
			call GroupClear(g2_0)
			call DestroyGroup(g2_0)
			set g2_0 = null
			set target_0 = null
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set g_0 = CreateGroup()
	call GroupToGroup(gall_0, g_0)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if (GetUnitAbilityLevel(Picked_0, 'A08M') > 0) and GetRandomInt(1, 2) == 1 then
			set g2_0 = CreateGroup()
			set x_0 = GetUnitX(Picked_0)
			set y_0 = GetUnitY(Picked_0)
			set udg_Temp_Player_1[1] = GetOwningPlayer(Picked_0)
			call GroupEnumUnitsInRange(g2_0, x_0, y_0, 600., Condition(function Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Loop_Is_Enemy_Condition))
			call RandomUnitFromGroup(1, g2_0)
			set g2_0 = CreateGroup()
			call GroupToGroup(udg_GroupRandomUnitFromGroup_1, g2_0)
			set target_0 = FirstOfGroup(g2_0)
			if (target_0 != null) then
				call IssueImmediateOrderById(Picked_0, $D009E)
			endif
			set udg_Temp_Player_1[1] = null
			call GroupClear(g2_0)
			call DestroyGroup(g2_0)
			set g2_0 = null
			set target_0 = null
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set g_0 = CreateGroup()
	call GroupToGroup(gall_0, g_0)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if (GetUnitAbilityLevel(Picked_0, 'A0NO') > 0) and GetRandomInt(1, 2) == 1 then
			set g2_0 = CreateGroup()
			set x_0 = GetUnitX(Picked_0)
			set y_0 = GetUnitY(Picked_0)
			set udg_Temp_Player_1[1] = GetOwningPlayer(Picked_0)
			call GroupEnumUnitsInRange(g2_0, x_0, y_0, 900., Condition(function Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Loop_Is_Enemy_Condition))
			call RandomUnitFromGroup(1, g2_0)
			set g2_0 = CreateGroup()
			call GroupToGroup(udg_GroupRandomUnitFromGroup_1, g2_0)
			set target_0 = FirstOfGroup(g2_0)
			if (target_0 != null) then
				set angle_0 = bj_RADTODEG_1 * Atan2(GetUnitY(target_0) - GetUnitY(Picked_0), GetUnitX(target_0) - GetUnitX(Picked_0))
				call IssuePointOrderById(Picked_0, $D00FA, GetUnitX(target_0) + 175. * Cos(angle_0 * bj_DEGTORAD_1), GetUnitY(target_0) + 175. * Sin(angle_0 * bj_DEGTORAD_1))
			endif
			set udg_Temp_Player_1[1] = null
			call GroupClear(g2_0)
			call DestroyGroup(g2_0)
			set g2_0 = null
			set target_0 = null
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set g_0 = CreateGroup()
	call GroupToGroup(gall_0, g_0)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if (GetUnitAbilityLevel(Picked_0, 'A0NH') > 0) and GetRandomInt(1, 2) == 1 then
			set g2_0 = CreateGroup()
			set x_0 = GetUnitX(Picked_0)
			set y_0 = GetUnitY(Picked_0)
			set udg_Temp_Player_1[1] = GetOwningPlayer(Picked_0)
			call GroupEnumUnitsInRange(g2_0, x_0, y_0, 800., Condition(function Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Loop_Is_Enemy_Condition))
			call RandomUnitFromGroup(1, g2_0)
			set g2_0 = CreateGroup()
			call GroupToGroup(udg_GroupRandomUnitFromGroup_1, g2_0)
			set target_0 = FirstOfGroup(g2_0)
			if (target_0 != null) then
				call IssueTargetOrderById(Picked_0, $D00FA, target_0)
			endif
			set udg_Temp_Player_1[1] = null
			call GroupClear(g2_0)
			call DestroyGroup(g2_0)
			set g2_0 = null
			set target_0 = null
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	call GroupClear(gall_0)
	call DestroyGroup(gall_0)
	set gall_0 = null
endfunction

function Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Conditions takes nothing returns boolean
	return (udg_Nomer_samoi_volni_1 == 3)
endfunction

function InitTrig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump takes nothing returns nothing
	set gg_trg_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_1 = CreateTrigger()
	call TriggerRegisterTimerEvent(gg_trg_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_1, 1., true)
	call TriggerAddCondition(gg_trg_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_1, Condition(function Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Conditions))
	call TriggerAddAction(gg_trg_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_1, function Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Actions)
endfunction

function Trig_BeetleCorpseBurrowCast_Actions takes nothing returns nothing
	call IssueImmediateOrderById(GetTriggerUnit(), $D0235)
endfunction

function Trig_BeetleCorpseBurrowCast_Conditions takes nothing returns boolean
	return (GetUnitTypeId(GetTriggerUnit()) == 'u004' or GetUnitTypeId(GetTriggerUnit()) == 'u00D') and 50. > (GetUnitState(GetTriggerUnit(), UNIT_STATE_LIFE_1) / GetUnitState(GetTriggerUnit(), UNIT_STATE_MAX_LIFE_1) * 'd')
endfunction

function InitTrig_BeetleCorpseBurrowCast takes nothing returns nothing
	local integer index = 0
	set gg_trg_BeetleCorpseBurrowCast_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_BeetleCorpseBurrowCast_1, Player(index_0), EVENT_PLAYER_UNIT_ATTACKED_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_BeetleCorpseBurrowCast_1, Condition(function Trig_BeetleCorpseBurrowCast_Conditions))
	call TriggerAddAction(gg_trg_BeetleCorpseBurrowCast_1, function Trig_BeetleCorpseBurrowCast_Actions)
endfunction

function Trig_BeetleCorpseBurrowAttackBase_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit beetle = LoadUnitHandle(udg_hash_1, h_0, 1)
	call IssuePointOrderById(beetle_0, $D000F, GetRectCenterX(gg_rct_cast_magi_1), GetRectCenterY(gg_rct_cast_magi_1))
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
	set beetle_0 = null
endfunction

function Trig_BeetleCorpseBurrowPeriodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit beetle = LoadUnitHandle(udg_hash_1, h_0, 1)
	call SetUnitState(beetle_0, UNIT_STATE_MANA_1, GetUnitState(beetle_0, UNIT_STATE_MANA_1) + 60.)
	call IssueImmediateOrderById(beetle_0, $D0236)
	call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl", GetUnitX(beetle_0), GetUnitY(beetle_0)))
	call TimerStart(t_0, 1.75, false, function Trig_BeetleCorpseBurrowAttackBase_Actions)
	set t_0 = null
	set beetle_0 = null
endfunction

function Trig_BeetleCorpseBurrow_Actions takes nothing returns nothing
	local unit beetle = GetSpellAbilityUnit()
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	call SaveUnitHandle(udg_hash_1, h_0, 1, beetle_0)
	call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl", GetUnitX(beetle_0), GetUnitY(beetle_0)))
	call TimerStart(t_0, GetRandomReal(3.5, 7.5), false, function Trig_BeetleCorpseBurrowPeriodic_Actions)
	set beetle_0 = null
	set t_0 = null
endfunction

function Trig_BeetleCorpseBurrow_Conditions takes nothing returns boolean
	return (GetSpellAbilityId() == 'A07Z' and GetUnitTypeId(GetSpellAbilityUnit()) == 'u004') or (GetSpellAbilityId() == 'A081' and GetUnitTypeId(GetSpellAbilityUnit()) == 'u00D')
endfunction

function InitTrig_BeetleCorpseBurrow takes nothing returns nothing
	local integer index = 0
	set gg_trg_BeetleCorpseBurrow_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_BeetleCorpseBurrow_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_BeetleCorpseBurrow_1, Condition(function Trig_BeetleCorpseBurrow_Conditions))
	call TriggerAddAction(gg_trg_BeetleCorpseBurrow_1, function Trig_BeetleCorpseBurrow_Actions)
endfunction

function Trig_Cocoon_periodic_Creation_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit cocoon = LoadUnitHandle(udg_hash_1, h_0, 1)
	local integer check = LoadInteger(udg_hash_1, h_0, 2)
	local real scale = .75 + (check_0 * .0375)
	local unit spider
	if check_0 < 20 and GetUnitState(cocoon_0, UNIT_STATE_LIFE_1) > .405 then
		set check_0 = check_0 + 1
		call SaveInteger(udg_hash_1, h_0, 2, check_0)
		call SetUnitScale(cocoon_0, scale_0, scale_0, scale_0)
	else
		if check_0 >= 20 then
			set spider_0 = CreateUnit(GetOwningPlayer(cocoon_0), 'n00R', GetUnitX(cocoon_0), GetUnitY(cocoon_0), GetUnitFacing(cocoon_0))
			call IssuePointOrderById(spider_0, $D000F, GetRectCenterX(gg_rct_cast_magi_1), GetRectCenterY(gg_rct_cast_magi_1))
			call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Demon\\DemonLargeDeathExplode\\DemonLargeDeathExplode.mdl", GetUnitX(cocoon_0), GetUnitY(cocoon_0)))
			set spider_0 = null
		endif
		call KillUnit(cocoon_0)
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
		set cocoon_0 = null
		set t_0 = null
	endif
	set t_0 = null
	set cocoon_0 = null
endfunction

function Trig_Cocoon_Creation_Actions takes nothing returns nothing
	local unit spider = GetDyingUnit()
	local real x = GetUnitX(spider_0)
	local real y = GetUnitY(spider_0)
	local unit cocoon = CreateUnit(GetOwningPlayer(spider_0), 'n011', x_0, y_0, GetRandomReal(.0, 360.))
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local integer check = 0
	call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Demon\\DemonLargeDeathExplode\\DemonLargeDeathExplode.mdl", x_0, y_0))
	call SaveUnitHandle(udg_hash_1, h_0, 1, cocoon_0)
	call SaveInteger(udg_hash_1, h_0, 2, check_0)
	call TimerStart(t_0, .5, true, function Trig_Cocoon_periodic_Creation_Actions)
	set spider_0 = null
	set cocoon_0 = null
	set t_0 = null
endfunction

function Trig_Cocoon_Creation_Conditions takes nothing returns boolean
	return GetUnitTypeId(GetDyingUnit()) == 'n00R' and GetRandomInt(1, 3) == 1
endfunction

function InitTrig_Cocoon_Creation takes nothing returns nothing
	local integer index = 0
	set gg_trg_Cocoon_Creation_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Cocoon_Creation_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Cocoon_Creation_1, Condition(function Trig_Cocoon_Creation_Conditions))
	call TriggerAddAction(gg_trg_Cocoon_Creation_1, function Trig_Cocoon_Creation_Actions)
endfunction

function Trig_Poisonous_Spittle_Cast_Conditions takes nothing returns boolean
	return GetUnitTypeId(GetAttacker()) == 'n00R' and GetRandomInt(1, 6) == 1
endfunction

function Trig_Poisonous_Spittle_Cast_Actions takes nothing returns nothing
	call IssueTargetOrderById(GetAttacker(), $D02B6, GetTriggerUnit())
endfunction

function InitTrig_Poisonous_Spittle_Cast takes nothing returns nothing
	local integer index = 0
	set gg_trg_Poisonous_Spittle_Cast_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Poisonous_Spittle_Cast_1, Player(index_0), EVENT_PLAYER_UNIT_ATTACKED_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Poisonous_Spittle_Cast_1, Condition(function Trig_Poisonous_Spittle_Cast_Conditions))
	call TriggerAddAction(gg_trg_Poisonous_Spittle_Cast_1, function Trig_Poisonous_Spittle_Cast_Actions)
endfunction

function Trig_Holes_Of_Grave_Diggers_Debug_Kill_Actions takes nothing returns nothing
	call RemoveUnit(GetDyingUnit())
	call FlushChildHashtable(udg_hash_1, GetHandleId(GetDyingUnit()))
endfunction

function Trig_Holes_Of_Grave_Diggers_Debug_Kill_Conditions takes nothing returns boolean
	return GetUnitTypeId(GetDyingUnit()) == 'u00H'
endfunction

function InitTrig_Holes_Of_Grave_Diggers_Debug_Kill takes nothing returns nothing
	local integer index = 0
	set gg_trg_Holes_Of_Grave_Diggers_Debug_Kill_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Holes_Of_Grave_Diggers_Debug_Kill_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Holes_Of_Grave_Diggers_Debug_Kill_1, Condition(function Trig_Holes_Of_Grave_Diggers_Debug_Kill_Conditions))
	call TriggerAddAction(gg_trg_Holes_Of_Grave_Diggers_Debug_Kill_1, function Trig_Holes_Of_Grave_Diggers_Debug_Kill_Actions)
endfunction

function Trig_Holes_Of_Grave_Diggers_AttackBase_Actions takes nothing returns nothing
	local timer tsp = GetExpiredTimer()
	local integer hsp = GetHandleId(tsp_0)
	local unit spider = LoadUnitHandle(udg_hash_1, hsp_0, 1)
	call SetUnitAnimation(spider_0, "stand")
	call SetUnitMoveSpeed(spider_0, GetUnitDefaultMoveSpeed(spider_0))
	call IssuePointOrderById(spider_0, $D000F, GetRectCenterX(gg_rct_cast_magi_1), GetRectCenterY(gg_rct_cast_magi_1))
	set spider_0 = null
	call FlushChildHashtable(udg_hash_1, hsp_0)
	call DestroyTimer(tsp_0)
	set tsp_0 = null
endfunction

function Trig_Holes_Of_Grave_Diggers_periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local real x = LoadReal(udg_hash_1, h_0, 1)
	local real y = LoadReal(udg_hash_1, h_0, 2)
	local unit hole = LoadUnitHandle(udg_hash_1, h_0, 3)
	local unit dammi
	local effect ef
	local integer check = LoadInteger(udg_hash_1, h_0, 6)
	local player p = LoadPlayerHandle(udg_hash_1, h_0, 7)
	local unit spider
	local timer tsp
	local integer hsp
	if GetUnitState(hole_0, UNIT_STATE_LIFE_1) > .405 and check_0 > 0 then
		set check_0 = check_0 - 1
		call SaveInteger(udg_hash_1, h_0, 6, check_0)
		set tsp_0 = CreateTimer()
		set hsp_0 = GetHandleId(tsp_0)
		set spider_0 = CreateUnit(p_0, 'u00D', x_0, y_0, GetRandomReal(.0, 360.))
		call SetUnitAnimationByIndex(spider_0, 9)
		call SetUnitMoveSpeed(spider_0, .0)
		call SaveUnitHandle(udg_hash_1, hsp_0, 1, spider_0)
		call TimerStart(tsp_0, 1., false, function Trig_Holes_Of_Grave_Diggers_AttackBase_Actions)
		set spider_0 = null
		set tsp_0 = null
	else
		set dammi_0 = LoadUnitHandle(udg_hash_1, h_0, 4)
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 5)
		call DestroyEffect(ef_0)
		set ef_0 = null
		call KillUnit(dammi_0)
		set dammi_0 = null
		call KillUnit(hole_0)
		set hole_0 = null
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
		set t_0 = null
	endif
	set t_0 = null
	set hole_0 = null
	set p_0 = null
endfunction

function Trig_Holes_Of_Grave_Diggers_Cast_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local location loc = GetSpellTargetLoc()
	local real x = GetLocationX(loc_0)
	local real y = GetLocationY(loc_0)
	local unit hole = CreateUnit(GetOwningPlayer(caster_0), 'u00H', x_0, y_0, GetRandomReal(.0, 360.))
	local unit dammi = CreateUnit(GetOwningPlayer(caster_0), 'h00U', x_0, y_0, .0)
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local effect ef
	local integer check = $A
	call SetUnitAnimationByIndex(hole_0, 8)
	call SetUnitScale(dammi_0, 2., 2., 2.)
	call SetUnitVertexColor(dammi_0, $C8, $C8, $C8, $AF)
	set ef_0 = AddSpecialEffectTarget("Abilities\\Spells\\Undead\\Web\\WebTarget.mdl", dammi_0, "chest")
	call SaveReal(udg_hash_1, h_0, 1, x_0)
	call SaveReal(udg_hash_1, h_0, 2, y_0)
	call SaveUnitHandle(udg_hash_1, h_0, 3, hole_0)
	call SaveUnitHandle(udg_hash_1, h_0, 4, dammi_0)
	call SaveEffectHandle(udg_hash_1, h_0, 5, ef_0)
	call SaveInteger(udg_hash_1, h_0, 6, check_0)
	call SavePlayerHandle(udg_hash_1, h_0, 7, GetOwningPlayer(caster_0))
	call TimerStart(t_0, 1.5, true, function Trig_Holes_Of_Grave_Diggers_periodic_Actions)
	set caster_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set hole_0 = null
	set dammi_0 = null
	set t_0 = null
	set ef_0 = null
endfunction

function Trig_Holes_Of_Grave_Diggers_Cast_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0E2'
endfunction

function InitTrig_Holes_Of_Grave_Diggers_Cast takes nothing returns nothing
	local integer index = 0
	set gg_trg_Holes_Of_Grave_Diggers_Cast_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Holes_Of_Grave_Diggers_Cast_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Holes_Of_Grave_Diggers_Cast_1, Condition(function Trig_Holes_Of_Grave_Diggers_Cast_Conditions))
	call TriggerAddAction(gg_trg_Holes_Of_Grave_Diggers_Cast_1, function Trig_Holes_Of_Grave_Diggers_Cast_Actions)
endfunction

function Trig_Nerub_Spider_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real xt
	local player p = GetOwningPlayer(caster_0)
	local real yt
	local location loc
	local unit target = GetSpellTargetUnit()
	local unit dammi
	if target_0 != null then
		set xt_0 = GetUnitX(target_0)
		set yt_0 = GetUnitY(target_0)
	else
		set loc_0 = GetSpellTargetLoc()
		set xt_0 = GetLocationX(loc_0)
		set yt_0 = GetLocationY(loc_0)
	endif
	set dammi_0 = CreateUnit(p_0, 'n00Z', xt_0, yt_0, GetRandomReal(.0, 360.))
	call IssuePointOrderById(dammi_0, $D000F, GetRectCenterX(gg_rct_cast_magi_1), GetRectCenterY(gg_rct_cast_magi_1))
	set dammi_0 = null
	set dammi_0 = CreateUnit(p_0, 'n00Z', xt_0, yt_0, GetRandomReal(.0, 360.))
	call IssuePointOrderById(dammi_0, $D000F, GetRectCenterX(gg_rct_cast_magi_1), GetRectCenterY(gg_rct_cast_magi_1))
	set dammi_0 = null
	set caster_0 = null
	set p_0 = null
	set target_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
endfunction

function Trig_Nerub_Spider_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A08U'
endfunction

function InitTrig_Nerub_Spider takes nothing returns nothing
	local integer index = 0
	set gg_trg_Nerub_Spider_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Nerub_Spider_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Nerub_Spider_1, Condition(function Trig_Nerub_Spider_Conditions))
	call TriggerAddAction(gg_trg_Nerub_Spider_1, function Trig_Nerub_Spider_Actions)
endfunction

function Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Dead_Condition takes nothing returns boolean
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE_1) < .405) and (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE_1) == false) and (GetUnitTypeId(GetFilterUnit()) != 'h00U')) != null
endfunction

function Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Loop_Is_Enemy_Condition takes nothing returns boolean
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE_1) > .405) and (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE_1) == false) and (IsPlayerEnemy(udg_Temp_Player_1[1], GetOwningPlayer(GetFilterUnit())))) != null
endfunction

function Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Loop_Is_Ally_Condition takes nothing returns boolean
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE_1) > .405) and (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE_1) == false) and (IsPlayerAlly(udg_Temp_Player_1[1], GetOwningPlayer(GetFilterUnit())))) != null
endfunction

function Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_All_Condition takes nothing returns boolean
	return (IsPlayerInForce(GetOwningPlayer(GetFilterUnit()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Actions takes nothing returns nothing
	local group gall = CreateGroup()
	local group g
	local group g2
	local unit Picked
	local unit target
	local real x
	local real y
	local real angle
	call GroupEnumUnitsInRect(gall_0, bj_mapInitialPlayableArea_1, Condition(function Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_All_Condition))
	set g_0 = CreateGroup()
	call GroupToGroup(gall_0, g_0)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if (GetUnitAbilityLevel(Picked_0, 'A0DY') > 0) and GetRandomInt(1, 2) == 1 then
			set g2_0 = CreateGroup()
			set x_0 = GetUnitX(Picked_0)
			set y_0 = GetUnitY(Picked_0)
			set udg_Temp_Player_1[1] = GetOwningPlayer(Picked_0)
			call GroupEnumUnitsInRange(g2_0, x_0, y_0, 600., Condition(function Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Loop_Is_Ally_Condition))
			call RandomUnitFromGroup(1, g2_0)
			set g2_0 = CreateGroup()
			call GroupToGroup(udg_GroupRandomUnitFromGroup_1, g2_0)
			set target_0 = FirstOfGroup(g2_0)
			if (target_0 != null) then
				call IssueTargetOrderById(Picked_0, $D0062, target_0)
			endif
			set udg_Temp_Player_1[1] = null
			call GroupClear(g2_0)
			call DestroyGroup(g2_0)
			set g2_0 = null
			set target_0 = null
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set g_0 = CreateGroup()
	call GroupToGroup(gall_0, g_0)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if (GetUnitAbilityLevel(Picked_0, 'A0E2') > 0) and GetRandomInt(1, 2) == 1 then
			set g2_0 = CreateGroup()
			set x_0 = GetUnitX(Picked_0)
			set y_0 = GetUnitY(Picked_0)
			set udg_Temp_Player_1[1] = GetOwningPlayer(Picked_0)
			call GroupEnumUnitsInRange(g2_0, x_0, y_0, 700., Condition(function Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Loop_Is_Enemy_Condition))
			call RandomUnitFromGroup(1, g2_0)
			set g2_0 = CreateGroup()
			call GroupToGroup(udg_GroupRandomUnitFromGroup_1, g2_0)
			set target_0 = FirstOfGroup(g2_0)
			if (target_0 != null) then
				call IssuePointOrderById(Picked_0, $D009D, GetUnitX(target_0), GetUnitY(target_0))
			endif
			set udg_Temp_Player_1[1] = null
			call GroupClear(g2_0)
			call DestroyGroup(g2_0)
			set g2_0 = null
			set target_0 = null
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set g_0 = CreateGroup()
	call GroupToGroup(gall_0, g_0)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if (GetUnitAbilityLevel(Picked_0, 'A08U') > 0) and GetRandomInt(1, 2) == 1 then
			set g2_0 = CreateGroup()
			set x_0 = GetUnitX(Picked_0)
			set y_0 = GetUnitY(Picked_0)
			set udg_Temp_Player_1[1] = GetOwningPlayer(Picked_0)
			call GroupEnumUnitsInRange(g2_0, x_0, y_0, 900., Condition(function Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Loop_Is_Enemy_Condition))
			call RandomUnitFromGroup(1, g2_0)
			set g2_0 = CreateGroup()
			call GroupToGroup(udg_GroupRandomUnitFromGroup_1, g2_0)
			set target_0 = FirstOfGroup(g2_0)
			if (target_0 != null) then
				call IssuePointOrderById(Picked_0, $D0278, GetUnitX(target_0), GetUnitY(target_0))
			endif
			set udg_Temp_Player_1[1] = null
			call GroupClear(g2_0)
			call DestroyGroup(g2_0)
			set g2_0 = null
			set target_0 = null
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set g_0 = CreateGroup()
	call GroupToGroup(gall_0, g_0)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if (GetUnitAbilityLevel(Picked_0, 'A082') > 0) and GetRandomInt(1, 2) == 1 then
			set g2_0 = CreateGroup()
			set x_0 = GetUnitX(Picked_0)
			set y_0 = GetUnitY(Picked_0)
			set udg_Temp_Player_1[1] = GetOwningPlayer(Picked_0)
			call GroupEnumUnitsInRange(g2_0, x_0, y_0, 250., Condition(function Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Loop_Is_Enemy_Condition))
			call RandomUnitFromGroup(1, g2_0)
			set g2_0 = CreateGroup()
			call GroupToGroup(udg_GroupRandomUnitFromGroup_1, g2_0)
			set target_0 = FirstOfGroup(g2_0)
			if (target_0 != null) then
				call IssueTargetOrderById(Picked_0, $D022F, target_0)
			endif
			set udg_Temp_Player_1[1] = null
			call GroupClear(g2_0)
			call DestroyGroup(g2_0)
			set g2_0 = null
			set target_0 = null
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set g_0 = CreateGroup()
	call GroupToGroup(gall_0, g_0)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if (GetUnitAbilityLevel(Picked_0, 'A08Q') > 0) and GetRandomInt(1, 2) == 1 then
			set g2_0 = CreateGroup()
			set x_0 = GetUnitX(Picked_0)
			set y_0 = GetUnitY(Picked_0)
			set udg_Temp_Player_1[1] = GetOwningPlayer(Picked_0)
			call GroupEnumUnitsInRange(g2_0, x_0, y_0, 500., Condition(function Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Loop_Is_Enemy_Condition))
			call RandomUnitFromGroup(1, g2_0)
			set g2_0 = CreateGroup()
			call GroupToGroup(udg_GroupRandomUnitFromGroup_1, g2_0)
			set target_0 = FirstOfGroup(g2_0)
			if (target_0 != null) then
				call IssueTargetOrderById(Picked_0, $D00F3, target_0)
			endif
			set udg_Temp_Player_1[1] = null
			call GroupClear(g2_0)
			call DestroyGroup(g2_0)
			set g2_0 = null
			set target_0 = null
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set g_0 = CreateGroup()
	call GroupToGroup(gall_0, g_0)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if (GetUnitAbilityLevel(Picked_0, 'A08T') > 0) and GetRandomInt(1, 2) == 1 then
			set g2_0 = CreateGroup()
			set x_0 = GetUnitX(Picked_0)
			set y_0 = GetUnitY(Picked_0)
			set udg_Temp_Player_1[1] = GetOwningPlayer(Picked_0)
			call GroupEnumUnitsInRange(g2_0, x_0, y_0, 650., Condition(function Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Loop_Is_Enemy_Condition))
			call RandomUnitFromGroup(1, g2_0)
			set g2_0 = CreateGroup()
			call GroupToGroup(udg_GroupRandomUnitFromGroup_1, g2_0)
			set target_0 = FirstOfGroup(g2_0)
			if (target_0 != null) then
				call IssueTargetOrderById(Picked_0, $D02B6, target_0)
			endif
			set udg_Temp_Player_1[1] = null
			call GroupClear(g2_0)
			call DestroyGroup(g2_0)
			set g2_0 = null
			set target_0 = null
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	call GroupClear(gall_0)
	call DestroyGroup(gall_0)
	set gall_0 = null
endfunction

function Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Conditions takes nothing returns boolean
	return (udg_Nomer_samoi_volni_1 == 4)
endfunction

function InitTrig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger takes nothing returns nothing
	set gg_trg_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_1 = CreateTrigger()
	call TriggerRegisterTimerEvent(gg_trg_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_1, 1., true)
	call TriggerAddCondition(gg_trg_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_1, Condition(function Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Conditions))
	call TriggerAddAction(gg_trg_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_1, function Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Actions)
endfunction

function Trig_Damned_Ents_Reincarnation_End_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit damnedent = LoadUnitHandle(udg_hash_1, h_0, 4)
	call SetUnitTimeScale(damnedent_0, 1.)
	call PauseUnit(damnedent_0, false)
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
	set damnedent_0 = null
endfunction

function Trig_Damned_Ents_Reincarnation_Recovery_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit ent = LoadUnitHandle(udg_hash_1, h_0, 1)
	local unit damnedent = LoadUnitHandle(udg_hash_1, h_0, 4)
	local real x = LoadReal(udg_hash_1, h_0, 2)
	local real y = LoadReal(udg_hash_1, h_0, 3)
	local group g = CreateGroup()
	local unit Picked
	call SetUnitVertexColor(damnedent_0, $FF, $FF, $FF, $FF)
	call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl", x_0, y_0))
	call SetUnitTimeScale(damnedent_0, -.1)
	call SetUnitAnimation(damnedent_0, "Death")
	call GroupEnumUnitsInRange(g_0, x_0, y_0, 250., null)
	call UnitRemoveAbility(damnedent_0, 'Avul')
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if IsUnitAlly(Picked_0, GetOwningPlayer(damnedent_0)) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
			call SetUnitState(Picked_0, UNIT_STATE_LIFE_1, GetUnitState(Picked_0, UNIT_STATE_LIFE_1) + 125.)
		endif
		if IsUnitEnemy(Picked_0, GetOwningPlayer(damnedent_0)) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
			call UnitDamageTarget(damnedent_0, Picked_0, 80., false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	call TimerStart(t_0, 1.5, false, function Trig_Damned_Ents_Reincarnation_End_Actions)
	call RemoveUnit(ent_0)
	set t_0 = null
	set ent_0 = null
	set damnedent_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set Picked_0 = null
endfunction

function Trig_Damned_Ents_Reincarnation_Actions takes nothing returns nothing
	local unit ent = GetDyingUnit()
	local real x = GetUnitX(ent_0)
	local real y = GetUnitY(ent_0)
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local unit damnedent = CreateUnit(GetOwningPlayer(ent_0), GetUnitTypeId(ent_0), x_0, y_0, GetUnitFacing(ent_0))
	call PauseUnit(damnedent_0, true)
	call SetUnitAnimation(damnedent_0, "Death")
	call UnitAddAbility(damnedent_0, 'Avul')
	call SaveUnitHandle(udg_hash_1, h_0, 1, ent_0)
	call SaveUnitHandle(udg_hash_1, h_0, 4, damnedent_0)
	call SaveReal(udg_hash_1, h_0, 2, x_0)
	call SaveReal(udg_hash_1, h_0, 3, y_0)
	call SetUnitVertexColor(damnedent_0, $FF, $FF, $FF, 0)
	call TimerStart(t_0, 1.75, false, function Trig_Damned_Ents_Reincarnation_Recovery_Actions)
	set ent_0 = null
	set t_0 = null
endfunction

function Trig_Damned_Ents_Reincarnation_Conditions takes nothing returns boolean
	return GetUnitAbilityLevel(GetDyingUnit(), 'A0E1') > 0 and GetRandomInt(1, 4) == 1
endfunction

function InitTrig_Damned_Ents_Reincarnation takes nothing returns nothing
	local integer index = 0
	set gg_trg_Damned_Ents_Reincarnation_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Damned_Ents_Reincarnation_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Damned_Ents_Reincarnation_1, Condition(function Trig_Damned_Ents_Reincarnation_Conditions))
	call TriggerAddAction(gg_trg_Damned_Ents_Reincarnation_1, function Trig_Damned_Ents_Reincarnation_Actions)
endfunction

function Trig_Rage_of_Decay_ent_attack_base_Actions takes nothing returns nothing
	local timer tsp = GetExpiredTimer()
	local integer hsp = GetHandleId(tsp_0)
	local unit ent = LoadUnitHandle(udg_hash_1, hsp_0, 1)
	if ent_0 != null then
		call SetUnitAnimation(ent_0, "Stand")
		call PauseUnit(ent_0, false)
		call IssuePointOrderById(ent_0, $D000F, GetRectCenterX(gg_rct_cast_magi_1), GetRectCenterY(gg_rct_cast_magi_1))
	endif
	call FlushChildHashtable(udg_hash_1, hsp_0)
	call DestroyTimer(tsp_0)
	set tsp_0 = null
	set ent_0 = null
endfunction

function Trig_Rage_of_Decay_periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local player p = GetOwningPlayer(caster_0)
	local real x = LoadReal(udg_hash_1, h_0, 2)
	local real y = LoadReal(udg_hash_1, h_0, 3)
	local integer order = GetUnitCurrentOrder(caster_0)
	local unit dammi
	local group g
	local unit Picked
	local real rx = 0
	local real ry = 0
	local unit ent
	local integer entid = 0
	local integer random = GetRandomInt(1, $F)
	local integer efrandom = GetRandomInt(2, 4)
	local integer orderId
	local timer tsp
	local integer hsp
	set orderId_0 = $D0278
	if (orderId_0 != 0) then
	else
		set orderId_0 = UnitId("channel")
		if (orderId_0 != 0) then
		endif
	endif
	if order_0 == orderId_0 then
		set rx_0 = GetRandomReal((x_0 - 425.), (x_0 + 425.))
		set ry_0 = GetRandomReal((y_0 - 425.), (y_0 + 425.))
		set g_0 = CreateGroup()
		call GroupEnumUnitsInRange(g_0, rx_0, ry_0, 125., null)
		if random_0 <= 8 then
			set entid_0 = 'u009'
		endif
		if random_0 >= 9 and random_0 <= $D then
			set entid_0 = 'u00B'
		endif
		if random_0 >= $E then
			set entid_0 = 'u00A'
		endif
		set ent_0 = CreateUnit(p_0, entid_0, rx_0, ry_0, GetRandomReal(.0, 360.))
		call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\NightElf\\EntBirthTarget\\EntBirthTarget.mdl", ent_0, "chest"))
		call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl", ent_0, "chest"))
		call PauseUnit(ent_0, true)
		call SetUnitAnimation(ent_0, "Attack Spell")
		set tsp_0 = CreateTimer()
		set hsp_0 = GetHandleId(tsp_0)
		call SaveUnitHandle(udg_hash_1, hsp_0, 1, ent_0)
		call TimerStart(tsp_0, 1.6, false, function Trig_Rage_of_Decay_ent_attack_base_Actions)
		loop
			exitwhen efrandom_0 < 0
			call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\NightElf\\EntanglingRoots\\EntanglingRootsTarget.mdl", GetRandomReal(rx_0 - GetRandomReal(20., 125.), rx_0 + GetRandomReal(20., 125.)), GetRandomReal(ry_0 - GetRandomReal(20., 125.), ry_0 + GetRandomReal(20., 125.))))
			set efrandom_0 = efrandom_0 - 1
		endloop
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if IsUnitEnemy(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call UnitDamageTarget(caster_0, Picked_0, 150., false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GreenDragonMissile\\GreenDragonMissile.mdl", Picked_0, "chest"))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl", Picked_0, "chest"))
				set dammi_0 = CreateUnit(p_0, 'h00U', GetUnitX(Picked_0), GetUnitY(Picked_0), .0)
				call UnitApplyTimedLife(dammi_0, 'BTLF', 2.)
				call UnitAddAbility(dammi_0, 'A08Z')
				call IssueTargetOrderById(dammi_0, $D00CB, Picked_0)
				set dammi_0 = null
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
	else
		call SetUnitTimeScale(caster_0, 1.)
		call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl", x_0, y_0))
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
		set t_0 = null
	endif
	set t_0 = null
	set caster_0 = null
	set p_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set ent_0 = null
	set tsp_0 = null
	set Picked_0 = null
	set dammi_0 = null
endfunction

function Trig_Rage_of_Decay_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	call SetUnitTimeScale(caster_0, 3.)
	call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl", GetUnitX(caster_0), GetUnitY(caster_0)))
	call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Tranquility\\Tranquility.mdl", caster_0, "chest"))
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveReal(udg_hash_1, h_0, 2, x_0)
	call SaveReal(udg_hash_1, h_0, 3, y_0)
	call TimerStart(t_0, .3, true, function Trig_Rage_of_Decay_periodic_Actions)
	set caster_0 = null
	set t_0 = null
endfunction

function Trig_Rage_of_Decay_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A091'
endfunction

function InitTrig_Rage_of_Decay takes nothing returns nothing
	local integer index = 0
	set gg_trg_Rage_of_Decay_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Rage_of_Decay_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Rage_of_Decay_1, Condition(function Trig_Rage_of_Decay_Conditions))
	call TriggerAddAction(gg_trg_Rage_of_Decay_1, function Trig_Rage_of_Decay_Actions)
endfunction

function Trig_Use_ThrowStone_and_TurnIntoEnt_Conditions takes nothing returns boolean
	return (udg_Nomer_samoi_volni_1 == 5)
endfunction

function Trig_Use_ThrowStone_and_TurnIntoEnt_Func002C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A094', GetTriggerUnit()) > 0) and (GetRandomInt(1, 2) == 1) and (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_ThrowStone_and_TurnIntoEnt_Func003C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A094', GetAttacker()) > 0) and (GetRandomInt(1, 2) == 1) and (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_ThrowStone_and_TurnIntoEnt_Actions takes nothing returns nothing
	if (Trig_Use_ThrowStone_and_TurnIntoEnt_Func002C()) then
		call IssueTargetOrderById(GetTriggerUnit(), $D011C, GetAttacker())
	endif
	if (Trig_Use_ThrowStone_and_TurnIntoEnt_Func003C()) then
		call IssueTargetOrderById(GetAttacker(), $D011C, GetTriggerUnit())
	endif
endfunction

function InitTrig_Use_ThrowStone_and_TurnIntoEnt takes nothing returns nothing
	set gg_trg_Use_ThrowStone_and_TurnIntoEnt_1 = CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(gg_trg_Use_ThrowStone_and_TurnIntoEnt_1, EVENT_PLAYER_UNIT_ATTACKED_1)
	call TriggerAddCondition(gg_trg_Use_ThrowStone_and_TurnIntoEnt_1, Condition(function Trig_Use_ThrowStone_and_TurnIntoEnt_Conditions))
	call TriggerAddAction(gg_trg_Use_ThrowStone_and_TurnIntoEnt_1, function Trig_Use_ThrowStone_and_TurnIntoEnt_Actions)
endfunction

function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Conditions takes nothing returns boolean
	return (udg_Nomer_samoi_volni_1 == 5)
endfunction

function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003001002 takes nothing returns boolean
	return (IsPlayerInForce(GetOwningPlayer(GetFilterUnit()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001Func001002001003001 takes nothing returns boolean
	return (IsUnitAliveBJ(GetFilterUnit()))
endfunction

function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001Func001002001003002001 takes nothing returns boolean
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE_1) == false) != null
endfunction

function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001Func001002001003002002 takes nothing returns boolean
	return (IsPlayerAlly(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())))
endfunction

function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001Func001002001003002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001Func001002001003002001(), Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001Func001002001003002002())
endfunction

function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001Func001002001003 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001Func001002001003001(), Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001Func001002001003002())
endfunction

function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001Func002C takes nothing returns boolean
	return (udg_Temp_Unit_1 != null)
endfunction

function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A090', GetEnumUnit()) > 0) and (GetRandomInt(1, 2) == 3)
endfunction

function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003001 takes nothing returns boolean
	return (IsUnitAliveBJ(GetFilterUnit()))
endfunction

function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003002001001 takes nothing returns boolean
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE_1) == false) != null
endfunction

function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003002001002 takes nothing returns boolean
	return (GetUnitStateSwap(UNIT_STATE_LIFE_1, GetFilterUnit()) < (GetUnitStateSwap(UNIT_STATE_MAX_LIFE_1, GetFilterUnit()) * .6))
endfunction

function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003002001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003002001001(), Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003002001002())
endfunction

function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003002002 takes nothing returns boolean
	return (IsPlayerAlly(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())))
endfunction

function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003002001(), Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003002002())
endfunction

function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003001(), Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003002())
endfunction

function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func002C takes nothing returns boolean
	return (udg_Temp_Unit_1 != null)
endfunction

function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A08Y', GetEnumUnit()) > 0) and (GetRandomInt(1, 2) == 1)
endfunction

function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003Func001002001003001 takes nothing returns boolean
	return (IsUnitAliveBJ(GetFilterUnit()))
endfunction

function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003Func001002001003002001 takes nothing returns boolean
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE_1) == false) != null
endfunction

function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003Func001002001003002002 takes nothing returns boolean
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())))
endfunction

function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003Func001002001003002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003Func001002001003002001(), Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003Func001002001003002002())
endfunction

function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003Func001002001003 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003Func001002001003001(), Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003Func001002001003002())
endfunction

function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003Func002C takes nothing returns boolean
	return (udg_Temp_Unit_1 != null)
endfunction

function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('S000', GetEnumUnit()) > 0) and (GetRandomInt(1, 2) == 1)
endfunction

function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004Func001002001003001 takes nothing returns boolean
	return (IsUnitAliveBJ(GetFilterUnit()))
endfunction

function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004Func001002001003002001 takes nothing returns boolean
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE_1) == false) != null
endfunction

function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004Func001002001003002002 takes nothing returns boolean
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())))
endfunction

function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004Func001002001003002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004Func001002001003002001(), Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004Func001002001003002002())
endfunction

function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004Func001002001003 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004Func001002001003001(), Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004Func001002001003002())
endfunction

function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004Func002C takes nothing returns boolean
	return (udg_Temp_Unit_1 != null)
endfunction

function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A091', GetEnumUnit()) > 0) and (GetRandomInt(1, 2) == 1)
endfunction

function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003A takes nothing returns nothing
	if (Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001C()) then
		set udg_Temp_Unit_1 = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(700., GetUnitLoc(GetEnumUnit()), Condition(function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001Func001002001003)))
		if (Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func001Func002C()) then
			call IssueTargetOrderById(GetEnumUnit(), $D0213, udg_Temp_Unit_1)
		endif
	endif
	if (Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002C()) then
		set udg_Temp_Unit_1 = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(800., GetUnitLoc(GetEnumUnit()), Condition(function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func001002001003)))
		if (Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func002Func002C()) then
			call IssueTargetOrderById(GetEnumUnit(), $D00C0, udg_Temp_Unit_1)
		endif
	endif
	if (Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003C()) then
		set udg_Temp_Unit_1 = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(225., GetUnitLoc(GetEnumUnit()), Condition(function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003Func001002001003)))
		if (Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func003Func002C()) then
			call IssueTargetOrderById(GetEnumUnit(), $D00DD, udg_Temp_Unit_1)
		endif
	endif
	if (Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004C()) then
		set udg_Temp_Unit_1 = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(600., GetUnitLoc(GetEnumUnit()), Condition(function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004Func001002001003)))
		if (Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003Func004Func002C()) then
			call IssueImmediateOrderById(GetEnumUnit(), $D0278)
		endif
	endif
endfunction

function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Actions takes nothing returns nothing
	call ForGroupBJ(GetUnitsInRectMatching(bj_mapInitialPlayableArea_1, Condition(function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003001002)), function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Func003A)
endfunction

function InitTrig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay takes nothing returns nothing
	set gg_trg_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_1 = CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(gg_trg_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_1, 1.)
	call TriggerAddCondition(gg_trg_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_1, Condition(function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Conditions))
	call TriggerAddAction(gg_trg_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_1, function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Actions)
endfunction

function Trig_Troll_Dead_Remove_Bugs_Actions takes nothing returns nothing
	local integer h = GetHandleId(GetDyingUnit())
	local effect ef = LoadEffectHandle(udg_hash_1, h_0, 55)
	call DestroyEffect(ef_0)
	set ef_0 = null
	set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 56)
	call DestroyEffect(ef_0)
	set ef_0 = null
	set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 57)
	call DestroyEffect(ef_0)
	set ef_0 = null
endfunction

function Trig_Troll_Dead_Remove_Bugs_Conditions takes nothing returns boolean
	return GetUnitAbilityLevel(GetDyingUnit(), 'A09E') > 0
endfunction

function InitTrig_Troll_Dead_Remove_Bugs takes nothing returns nothing
	local integer index = 0
	set gg_trg_Troll_Dead_Remove_Bugs_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Troll_Dead_Remove_Bugs_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Troll_Dead_Remove_Bugs_1, Condition(function Trig_Troll_Dead_Remove_Bugs_Conditions))
	call TriggerAddAction(gg_trg_Troll_Dead_Remove_Bugs_1, function Trig_Troll_Dead_Remove_Bugs_Actions)
endfunction

function Trig_Boss_Troll_Entangle_Throw_periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local real angle = LoadReal(udg_hash_1, h_0, 1)
	local integer stage = LoadInteger(udg_hash_1, h_0, 2)
	local unit entangle = LoadUnitHandle(udg_hash_1, h_0, 3)
	local player p
	local real x = GetUnitX(entangle_0) + 40. * Cos(angle_0 * bj_DEGTORAD_1)
	local real y = GetUnitY(entangle_0) + 40. * Sin(angle_0 * bj_DEGTORAD_1)
	local effect ef
	local group g
	local unit Picked
	local unit dammi
	if stage_0 > 0 then
		set stage_0 = stage_0 - 1
		call SaveInteger(udg_hash_1, h_0, 2, stage_0)
		if IsTerrainPathable(x_0, y_0, PATHING_TYPE_FLYABILITY_1) == false then
			call SetUnitPosition(entangle_0, x_0, y_0)
		endif
	else
		set p_0 = GetOwningPlayer(entangle_0)
		set g_0 = CreateGroup()
		call GroupEnumUnitsInRange(g_0, x_0, y_0, 250., null)
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if IsUnitEnemy(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				set dammi_0 = CreateUnit(p_0, 'h00U', x_0, y_0, .0)
				call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
				call UnitAddAbility(dammi_0, 'A096')
				call IssueTargetOrderById(dammi_0, $D008A, Picked_0)
				set dammi_0 = null
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		call GroupClear(g_0)
		call DestroyGroup(g_0)
		set g_0 = null
		set Picked_0 = null
		set p_0 = null
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 4)
		call DestroyEffect(ef_0)
		set ef_0 = null
		call KillUnit(entangle_0)
		set entangle_0 = null
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set entangle_0 = null
endfunction

function Trig_Boss_Troll_Entangle_Throw_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local location loc = GetSpellTargetLoc()
	local real ux = GetUnitX(caster_0)
	local real uy = GetUnitY(caster_0)
	local real x = GetLocationX(loc_0)
	local real y = GetLocationY(loc_0)
	local real angle = bj_RADTODEG_1 * Atan2(y_0 - uy_0, x_0 - ux_0)
	local integer stage = R2I(SquareRoot((x_0 - ux_0) * (x_0 - ux_0) + (y_0 - uy_0) * (y_0 - uy_0)) / 40.)
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local unit entangle = CreateUnit(GetOwningPlayer(caster_0), 'h00U', ux_0 + 25. * Cos(angle_0 * bj_DEGTORAD_1), uy_0 + 25. * Sin(angle_0 * bj_DEGTORAD_1), angle_0)
	local effect ef = AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Ensnare\\EnsnareMissile.mdl", entangle_0, "chest")
	call SetUnitScale(entangle_0, 2., 2., 2.)
	call UnitAddAbility(entangle_0, 'Amrf')
	call UnitRemoveAbility(entangle_0, 'Amrf')
	call SetUnitFlyHeight(entangle_0, 50., .0)
	call SetUnitFlyHeight(entangle_0, .0, .04 * stage_0)
	call SaveReal(udg_hash_1, h_0, 1, angle_0)
	call SaveInteger(udg_hash_1, h_0, 2, stage_0)
	call SaveUnitHandle(udg_hash_1, h_0, 3, entangle_0)
	call SaveEffectHandle(udg_hash_1, h_0, 4, ef_0)
	call TimerStart(t_0, .04, true, function Trig_Boss_Troll_Entangle_Throw_periodic_Actions)
	set caster_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set t_0 = null
	set entangle_0 = null
	set ef_0 = null
endfunction

function Trig_Boss_Troll_Entangle_Throw_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0E8'
endfunction

function InitTrig_Boss_Troll_Entangle_Throw takes nothing returns nothing
	local integer index = 0
	set gg_trg_Boss_Troll_Entangle_Throw_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Boss_Troll_Entangle_Throw_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Boss_Troll_Entangle_Throw_1, Condition(function Trig_Boss_Troll_Entangle_Throw_Conditions))
	call TriggerAddAction(gg_trg_Boss_Troll_Entangle_Throw_1, function Trig_Boss_Troll_Entangle_Throw_Actions)
endfunction

function Trig_Use_Berserk_and_BerserkBoss_Conditions takes nothing returns boolean
	return (udg_Nomer_samoi_volni_1 == 6)
endfunction

function Trig_Use_Berserk_and_BerserkBoss_Func002C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A098', GetTriggerUnit()) > 0) and (GetRandomInt(1, 2) == 1) and (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_Berserk_and_BerserkBoss_Func003C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A098', GetAttacker()) > 0) and (GetRandomInt(1, 2) == 1) and (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_Berserk_and_BerserkBoss_Func004C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0EC', GetTriggerUnit()) > 0) and (GetRandomInt(1, 2) == 1) and (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_Berserk_and_BerserkBoss_Func005C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0EC', GetAttacker()) > 0) and (GetRandomInt(1, 2) == 1) and (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_Berserk_and_BerserkBoss_Actions takes nothing returns nothing
	if (Trig_Use_Berserk_and_BerserkBoss_Func002C()) then
		call IssueImmediateOrderById(GetTriggerUnit(), $D0084)
	endif
	if (Trig_Use_Berserk_and_BerserkBoss_Func003C()) then
		call IssueImmediateOrderById(GetAttacker(), $D0084)
	endif
	if (Trig_Use_Berserk_and_BerserkBoss_Func004C()) then
		call IssueImmediateOrderById(GetTriggerUnit(), $D0084)
	endif
	if (Trig_Use_Berserk_and_BerserkBoss_Func005C()) then
		call IssueImmediateOrderById(GetAttacker(), $D0084)
	endif
endfunction

function InitTrig_Use_Berserk_and_BerserkBoss takes nothing returns nothing
	set gg_trg_Use_Berserk_and_BerserkBoss_1 = CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(gg_trg_Use_Berserk_and_BerserkBoss_1, EVENT_PLAYER_UNIT_ATTACKED_1)
	call TriggerAddCondition(gg_trg_Use_Berserk_and_BerserkBoss_1, Condition(function Trig_Use_Berserk_and_BerserkBoss_Conditions))
	call TriggerAddAction(gg_trg_Use_Berserk_and_BerserkBoss_1, function Trig_Use_Berserk_and_BerserkBoss_Actions)
endfunction

function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Conditions takes nothing returns boolean
	return (udg_Nomer_samoi_volni_1 == 6)
endfunction

function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002001002 takes nothing returns boolean
	return (IsPlayerInForce(GetOwningPlayer(GetFilterUnit()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003001 takes nothing returns boolean
	return (IsUnitAliveBJ(GetFilterUnit()))
endfunction

function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003002001001 takes nothing returns boolean
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE_1) == false) != null
endfunction

function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003002001002 takes nothing returns boolean
	return (GetUnitStateSwap(UNIT_STATE_LIFE_1, GetFilterUnit()) < (GetUnitStateSwap(UNIT_STATE_MAX_LIFE_1, GetFilterUnit()) * .9))
endfunction

function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003002001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003002001001(), Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003002001002())
endfunction

function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003002002 takes nothing returns boolean
	return (IsPlayerAlly(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())))
endfunction

function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003002001(), Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003002002())
endfunction

function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003001(), Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003002())
endfunction

function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func002C takes nothing returns boolean
	return (udg_Temp_Unit_1 != null)
endfunction

function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A097', GetEnumUnit()) > 0)
endfunction

function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003001 takes nothing returns boolean
	return (IsUnitAliveBJ(GetFilterUnit()))
endfunction

function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003002001001 takes nothing returns boolean
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE_1) == false) != null
endfunction

function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003002001002 takes nothing returns boolean
	return (GetUnitStateSwap(UNIT_STATE_LIFE_1, GetFilterUnit()) < (GetUnitStateSwap(UNIT_STATE_MAX_LIFE_1, GetFilterUnit()) * .6))
endfunction

function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003002001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003002001001(), Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003002001002())
endfunction

function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003002002 takes nothing returns boolean
	return (IsPlayerAlly(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())))
endfunction

function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003002001(), Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003002002())
endfunction

function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003001(), Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003002())
endfunction

function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func002C takes nothing returns boolean
	return (udg_Temp_Unit_1 != null)
endfunction

function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A099', GetEnumUnit()) > 0) and (GetRandomInt(1, 2) == 1)
endfunction

function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003Func001002001003001 takes nothing returns boolean
	return (IsUnitAliveBJ(GetFilterUnit()))
endfunction

function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003Func001002001003002001 takes nothing returns boolean
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE_1) == false) != null
endfunction

function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003Func001002001003002002 takes nothing returns boolean
	return (IsPlayerAlly(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())))
endfunction

function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003Func001002001003002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003Func001002001003002001(), Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003Func001002001003002002())
endfunction

function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003Func001002001003 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003Func001002001003001(), Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003Func001002001003002())
endfunction

function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003Func002C takes nothing returns boolean
	return (udg_Temp_Unit_1 != null)
endfunction

function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A09C', GetEnumUnit()) > 0) and (GetRandomInt(1, 2) == 1)
endfunction

function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004Func001002001003001 takes nothing returns boolean
	return (IsUnitAliveBJ(GetFilterUnit()))
endfunction

function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004Func001002001003002001 takes nothing returns boolean
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE_1) == false) != null
endfunction

function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004Func001002001003002002 takes nothing returns boolean
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())))
endfunction

function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004Func001002001003002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004Func001002001003002001(), Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004Func001002001003002002())
endfunction

function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004Func001002001003 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004Func001002001003001(), Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004Func001002001003002())
endfunction

function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004Func002C takes nothing returns boolean
	return (udg_Temp_Unit_1 != null)
endfunction

function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0E8', GetEnumUnit()) > 0) and (GetRandomInt(1, 2) == 1)
endfunction

function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002A takes nothing returns nothing
	if (Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001C()) then
		set udg_Temp_Unit_1 = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(500., GetUnitLoc(GetEnumUnit()), Condition(function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func001002001003)))
		if (Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func001Func002C()) then
			call IssueTargetOrderById(GetEnumUnit(), $D005F, udg_Temp_Unit_1)
		endif
	endif
	if (Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002C()) then
		set udg_Temp_Unit_1 = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(700., GetUnitLoc(GetEnumUnit()), Condition(function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func001002001003)))
		if (Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func002Func002C()) then
			call IssueTargetOrderById(GetEnumUnit(), $D0215, udg_Temp_Unit_1)
		endif
	endif
	if (Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003C()) then
		set udg_Temp_Unit_1 = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(700., GetUnitLoc(GetEnumUnit()), Condition(function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003Func001002001003)))
		if (Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func003Func002C()) then
			call IssueTargetOrderById(GetEnumUnit(), $D0062, udg_Temp_Unit_1)
		endif
	endif
	if (Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004C()) then
		set udg_Temp_Unit_1 = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(800., GetUnitLoc(GetEnumUnit()), Condition(function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004Func001002001003)))
		if (Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002Func004Func002C()) then
			call IssuePointOrderById(GetEnumUnit(), $D0079, GetUnitX(udg_Temp_Unit_1), GetUnitY(udg_Temp_Unit_1))
		endif
	endif
endfunction

function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Actions takes nothing returns nothing
	call ForGroupBJ(GetUnitsInRectMatching(bj_mapInitialPlayableArea_1, Condition(function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002001002)), function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Func002A)
endfunction

function InitTrig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle takes nothing returns nothing
	set gg_trg_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_1 = CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(gg_trg_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_1, 1.)
	call TriggerAddCondition(gg_trg_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_1, Condition(function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Conditions))
	call TriggerAddAction(gg_trg_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_1, function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Actions)
endfunction

function Trig_Aspect_of_Magic_Protection_Move_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit target = LoadUnitHandle(udg_hash_1, GetHandleId(t_0), 1)
	call SaveTimerHandle(udg_hash_1, GetHandleId(target_0), $A6, null)
	call SaveBoolean(udg_hash_1, GetHandleId(target_0), $A5, false)
	call DestroyEffect(LoadEffectHandle(udg_hash_1, h_0, 2))
	call DestroyTimer(t_0)
	call FlushChildHashtable(udg_hash_1, h_0)
	set t_0 = null
	set target_0 = null
endfunction

function Trig_Aspect_of_Magic_Protection_Actions takes nothing returns nothing
	local unit target = GetSpellTargetUnit()
	local timer t = LoadTimerHandle(udg_hash_1, GetHandleId(target_0), $A6)
	local integer h = GetHandleId(t_0)
	if t_0 == null then
		set t_0 = CreateTimer()
		set h_0 = GetHandleId(t_0)
		call SaveTimerHandle(udg_hash_1, GetHandleId(target_0), $A6, t_0)
		call SaveBoolean(udg_hash_1, GetHandleId(target_0), $A5, true)
	else
		call DestroyEffect(LoadEffectHandle(udg_hash_1, GetHandleId(t_0), 2))
	endif
	call SaveUnitHandle(udg_hash_1, h_0, 1, target_0)
	call SaveEffectHandle(udg_hash_1, h_0, 2, AddSpecialEffectTarget("Effects\\MagicShieldBlue.mdx", target_0, "origin"))
	call TimerStart(t_0, 6., false, function Trig_Aspect_of_Magic_Protection_Move_Actions)
	set t_0 = null
	set target_0 = null
endfunction

function Trig_Aspect_of_Magic_Protection_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A09J'
endfunction

function InitTrig_Aspect_of_Magic_Protection takes nothing returns nothing
	local integer index = 0
	set gg_trg_Aspect_of_Magic_Protection_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Aspect_of_Magic_Protection_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Aspect_of_Magic_Protection_1, Condition(function Trig_Aspect_of_Magic_Protection_Conditions))
	call TriggerAddAction(gg_trg_Aspect_of_Magic_Protection_1, function Trig_Aspect_of_Magic_Protection_Actions)
endfunction

function Trig_Remove_Effects_From_Bosses_Actions takes nothing returns nothing
	local integer h = GetHandleId(GetDyingUnit())
	if LoadEffectHandle(udg_hash_1, h_0, $A8) != null then
		call DestroyEffect(LoadEffectHandle(udg_hash_1, h_0, $A8))
	endif
	if LoadEffectHandle(udg_hash_1, h_0, $A9) != null then
		call DestroyEffect(LoadEffectHandle(udg_hash_1, h_0, $A9))
	endif
endfunction

function Trig_Remove_Effects_From_Bosses_Conditions takes nothing returns boolean
	return GetUnitAbilityLevel(GetDyingUnit(), 'A09L') > 0
endfunction

function InitTrig_Remove_Effects_From_Bosses takes nothing returns nothing
	local integer index = 0
	set gg_trg_Remove_Effects_From_Bosses_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Remove_Effects_From_Bosses_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Remove_Effects_From_Bosses_1, Condition(function Trig_Remove_Effects_From_Bosses_Conditions))
	call TriggerAddAction(gg_trg_Remove_Effects_From_Bosses_1, function Trig_Remove_Effects_From_Bosses_Actions)
endfunction

function Trig_Metka_Dreneev_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local unit target = GetSpellTargetUnit()
	local unit Picked
	local player p = GetOwningPlayer(caster_0)
	local group g = CreateGroup()
	call GroupEnumUnitsInRange(g_0, GetUnitX(target_0), GetUnitY(target_0), 1000., null)
	call GroupRemoveUnit(g_0, caster_0)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 and IsUnitAlly(Picked_0, p_0) and GetUnitTypeId(Picked_0) != 'h00U' then
			call IssueTargetOrderById(Picked_0, $D000F, target_0)
			if GetUnitAbilityLevel(Picked_0, 'A0FC') > 0 then
				call IssueTargetOrderById(Picked_0, $D02B2, target_0)
			endif
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set caster_0 = null
	set target_0 = null
	set p_0 = null
	call DestroyGroup(g_0)
	set g_0 = null
	set Picked_0 = null
endfunction

function Trig_Metka_Dreneev_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0FA'
endfunction

function InitTrig_Metka_Dreneev takes nothing returns nothing
	local integer index = 0
	set gg_trg_Metka_Dreneev_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Metka_Dreneev_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Metka_Dreneev_1, Condition(function Trig_Metka_Dreneev_Conditions))
	call TriggerAddAction(gg_trg_Metka_Dreneev_1, function Trig_Metka_Dreneev_Actions)
endfunction

function Trig_Fast_Attack_Move_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local unit target = LoadUnitHandle(udg_hash_1, h_0, 4)
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local real xt = GetUnitX(target_0)
	local real yt = GetUnitY(target_0)
	local real angle = bj_RADTODEG_1 * Atan2(yt_0 - y_0, xt_0 - x_0)
	local real dist = SquareRoot((xt_0 - x_0) * (xt_0 - x_0) + (yt_0 - y_0) * (yt_0 - y_0))
	local integer wait = LoadInteger(udg_hash_1, h_0, 2)
	if dist_0 > 100. and GetUnitState(target_0, UNIT_STATE_LIFE_1) > .405 and GetUnitState(caster_0, UNIT_STATE_LIFE_1) > .405 then
		call SetUnitPosition(caster_0, x_0 + 20. * Cos((angle_0) * bj_DEGTORAD_1), y_0 + 20. * Sin((angle_0) * bj_DEGTORAD_1))
		set wait_0 = wait_0 + 1
		call SaveInteger(udg_hash_1, h_0, 2, wait_0)
		if wait_0 == 1 then
			call SetUnitAnimationByIndex(caster_0, 2)
		endif
	else
		if GetUnitState(caster_0, UNIT_STATE_LIFE_1) > .405 then
			if GetUnitState(target_0, UNIT_STATE_LIFE_1) > .405 then
				call IssueTargetOrderById(caster_0, $D000F, target_0)
			endif
			call SetUnitAnimation(caster_0, "stand")
		endif
		call SetUnitPathing(caster_0, true)
		call SetUnitTimeScale(caster_0, 1.)
		call DestroyEffect(LoadEffectHandle(udg_hash_1, h_0, 8))
		call DestroyEffect(LoadEffectHandle(udg_hash_1, h_0, 9))
		call DestroyEffect(LoadEffectHandle(udg_hash_1, h_0, $A))
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set target_0 = null
	set caster_0 = null
endfunction

function Trig_Fast_Attack_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local unit target = GetSpellTargetUnit()
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local effect ef
	call SetUnitAnimation(caster_0, "stand")
	call SetUnitPathing(caster_0, false)
	call SetUnitAnimationByIndex(caster_0, 2)
	call SetUnitTimeScale(caster_0, 2.)
	set ef_0 = AddSpecialEffectTarget("Abilities\\Spells\\Other\\Tornado\\Tornado_Target.mdl", caster_0, "origin")
	call SaveEffectHandle(udg_hash_1, h_0, 8, ef_0)
	set ef_0 = null
	set ef_0 = AddSpecialEffectTarget("Abilities\\Spells\\Other\\Tornado\\Tornado_Target.mdl", caster_0, "chest")
	call SaveEffectHandle(udg_hash_1, h_0, 9, ef_0)
	set ef_0 = null
	set ef_0 = AddSpecialEffectTarget("Abilities\\Spells\\Other\\Tornado\\Tornado_Target.mdl", caster_0, "head")
	call SaveEffectHandle(udg_hash_1, h_0, $A, ef_0)
	set ef_0 = null
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveUnitHandle(udg_hash_1, h_0, 4, target_0)
	call SaveInteger(udg_hash_1, h_0, 2, 0)
	call TimerStart(t_0, .03, true, function Trig_Fast_Attack_Move_Actions)
	set caster_0 = null
	set target_0 = null
	set t_0 = null
endfunction

function Trig_Fast_Attack_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0FC'
endfunction

function InitTrig_Fast_Attack takes nothing returns nothing
	local integer index = 0
	set gg_trg_Fast_Attack_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Fast_Attack_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Fast_Attack_1, Condition(function Trig_Fast_Attack_Conditions))
	call TriggerAddAction(gg_trg_Fast_Attack_1, function Trig_Fast_Attack_Actions)
endfunction

function Trig_Bash_Attack_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local unit target = GetSpellTargetUnit()
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local effect ef
	if GetUnitTypeId(caster_0) == 'n016' then
		call StunUnitTimed(target_0, 1.)
		call UnitDamageTarget(caster_0, target_0, 75., false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
	endif
	if GetUnitTypeId(caster_0) == 'n018' then
		call StunUnitTimed(target_0, 1.5)
		call UnitDamageTarget(caster_0, target_0, 125., false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
	endif
	call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\StormBolt\\StormBoltMissile.mdl", target_0, "chest"))
	set caster_0 = null
	set target_0 = null
	set t_0 = null
endfunction

function Trig_Bash_Attack_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0FD'
endfunction

function InitTrig_Bash_Attack takes nothing returns nothing
	local integer index = 0
	set gg_trg_Bash_Attack_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Bash_Attack_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Bash_Attack_1, Condition(function Trig_Bash_Attack_Conditions))
	call TriggerAddAction(gg_trg_Bash_Attack_1, function Trig_Bash_Attack_Actions)
endfunction

function Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Dead_Condition takes nothing returns boolean
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE_1) < .405) and (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE_1) == false) and (GetUnitTypeId(GetFilterUnit()) != 'h00U')) != null
endfunction

function Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Loop_Is_Enemy_Condition takes nothing returns boolean
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE_1) > .405) and (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE_1) == false) and (IsPlayerEnemy(udg_Temp_Player_1[1], GetOwningPlayer(GetFilterUnit())))) != null
endfunction

function Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Loop_Is_Ally_Condition takes nothing returns boolean
	return ((GetUnitState(GetFilterUnit(), UNIT_STATE_LIFE_1) > .405) and (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE_1) == false) and (IsPlayerAlly(udg_Temp_Player_1[1], GetOwningPlayer(GetFilterUnit())))) != null
endfunction

function Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_All_Condition takes nothing returns boolean
	return (IsPlayerInForce(GetOwningPlayer(GetFilterUnit()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Actions takes nothing returns nothing
	local group gall = CreateGroup()
	local group g
	local group g2
	local unit Picked
	local unit target
	local real x
	local real y
	local real angle
	call GroupEnumUnitsInRect(gall_0, bj_mapInitialPlayableArea_1, Condition(function Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_All_Condition))
	set g_0 = CreateGroup()
	call GroupToGroup(gall_0, g_0)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if (GetUnitAbilityLevel(Picked_0, 'A09J') > 0) and GetRandomInt(1, 2) == 1 then
			set g2_0 = CreateGroup()
			set x_0 = GetUnitX(Picked_0)
			set y_0 = GetUnitY(Picked_0)
			set udg_Temp_Player_1[1] = GetOwningPlayer(Picked_0)
			call GroupEnumUnitsInRange(g2_0, x_0, y_0, 700., Condition(function Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Loop_Is_Ally_Condition))
			call RandomUnitFromGroup(1, g2_0)
			set g2_0 = CreateGroup()
			call GroupToGroup(udg_GroupRandomUnitFromGroup_1, g2_0)
			set target_0 = FirstOfGroup(g2_0)
			if (target_0 != null) then
				call IssueTargetOrderById(Picked_0, $D0113, target_0)
			endif
			set udg_Temp_Player_1[1] = null
			call GroupClear(g2_0)
			call DestroyGroup(g2_0)
			set g2_0 = null
			set target_0 = null
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set g_0 = CreateGroup()
	call GroupToGroup(gall_0, g_0)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if (GetUnitAbilityLevel(Picked_0, 'A09H') > 0) and GetRandomInt(1, 2) == 1 then
			set g2_0 = CreateGroup()
			set x_0 = GetUnitX(Picked_0)
			set y_0 = GetUnitY(Picked_0)
			set udg_Temp_Player_1[1] = GetOwningPlayer(Picked_0)
			call GroupEnumUnitsInRange(g2_0, x_0, y_0, 600., Condition(function Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Loop_Is_Ally_Condition))
			call RandomUnitFromGroup(1, g2_0)
			set g2_0 = CreateGroup()
			call GroupToGroup(udg_GroupRandomUnitFromGroup_1, g2_0)
			set target_0 = FirstOfGroup(g2_0)
			if (target_0 != null) then
				call IssueTargetOrderById(Picked_0, $D0085, target_0)
			endif
			set udg_Temp_Player_1[1] = null
			call GroupClear(g2_0)
			call DestroyGroup(g2_0)
			set g2_0 = null
			set target_0 = null
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set g_0 = CreateGroup()
	call GroupToGroup(gall_0, g_0)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if (GetUnitAbilityLevel(Picked_0, 'A0FA') > 0) and GetRandomInt(1, 2) == 1 then
			set g2_0 = CreateGroup()
			set x_0 = GetUnitX(Picked_0)
			set y_0 = GetUnitY(Picked_0)
			set udg_Temp_Player_1[1] = GetOwningPlayer(Picked_0)
			call GroupEnumUnitsInRange(g2_0, x_0, y_0, 1000., Condition(function Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Loop_Is_Enemy_Condition))
			call RandomUnitFromGroup(1, g2_0)
			set g2_0 = CreateGroup()
			call GroupToGroup(udg_GroupRandomUnitFromGroup_1, g2_0)
			set target_0 = FirstOfGroup(g2_0)
			if (target_0 != null) then
				call IssueTargetOrderById(Picked_0, $D00B5, target_0)
			endif
			set udg_Temp_Player_1[1] = null
			call GroupClear(g2_0)
			call DestroyGroup(g2_0)
			set g2_0 = null
			set target_0 = null
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set g_0 = CreateGroup()
	call GroupToGroup(gall_0, g_0)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if (GetUnitAbilityLevel(Picked_0, 'A0FD') > 0) and GetRandomInt(1, 2) == 1 then
			set g2_0 = CreateGroup()
			set x_0 = GetUnitX(Picked_0)
			set y_0 = GetUnitY(Picked_0)
			set udg_Temp_Player_1[1] = GetOwningPlayer(Picked_0)
			call GroupEnumUnitsInRange(g2_0, x_0, y_0, 250., Condition(function Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Loop_Is_Enemy_Condition))
			call RandomUnitFromGroup(1, g2_0)
			set g2_0 = CreateGroup()
			call GroupToGroup(udg_GroupRandomUnitFromGroup_1, g2_0)
			set target_0 = FirstOfGroup(g2_0)
			if (target_0 != null) then
				call IssueTargetOrderById(Picked_0, $D0077, target_0)
			endif
			set udg_Temp_Player_1[1] = null
			call GroupClear(g2_0)
			call DestroyGroup(g2_0)
			set g2_0 = null
			set target_0 = null
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set g_0 = CreateGroup()
	call GroupToGroup(gall_0, g_0)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if (GetUnitAbilityLevel(Picked_0, 'A0FC') > 0) and GetRandomInt(1, 2) == 1 then
			set g2_0 = CreateGroup()
			set x_0 = GetUnitX(Picked_0)
			set y_0 = GetUnitY(Picked_0)
			set udg_Temp_Player_1[1] = GetOwningPlayer(Picked_0)
			call GroupEnumUnitsInRange(g2_0, x_0, y_0, 1200., Condition(function Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Loop_Is_Enemy_Condition))
			call RandomUnitFromGroup(1, g2_0)
			set g2_0 = CreateGroup()
			call GroupToGroup(udg_GroupRandomUnitFromGroup_1, g2_0)
			set target_0 = FirstOfGroup(g2_0)
			if (target_0 != null) then
				call IssueTargetOrderById(Picked_0, $D02B2, target_0)
			endif
			set udg_Temp_Player_1[1] = null
			call GroupClear(g2_0)
			call DestroyGroup(g2_0)
			set g2_0 = null
			set target_0 = null
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	call GroupClear(gall_0)
	call DestroyGroup(gall_0)
	set gall_0 = null
endfunction

function Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Conditions takes nothing returns boolean
	return (udg_Nomer_samoi_volni_1 == 7)
endfunction

function InitTrig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack takes nothing returns nothing
	set gg_trg_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_1 = CreateTrigger()
	call TriggerRegisterTimerEvent(gg_trg_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_1, 1., true)
	call TriggerAddCondition(gg_trg_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_1, Condition(function Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Conditions))
	call TriggerAddAction(gg_trg_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_1, function Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Actions)
endfunction

function Trig_Blink_Strike_Remove_Buff_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local effect ef
	set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 2)
	call DestroyEffect(ef_0)
	set ef_0 = null
	set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 3)
	call DestroyEffect(ef_0)
	set ef_0 = null
	call SetAttackSpeedAbilityLevel(caster_0, -$C8)
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
endfunction

function Trig_Blink_Strike_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local unit target = GetSpellTargetUnit()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local real xt = GetUnitX(target_0)
	local real yt = GetUnitY(target_0)
	local real angle = bj_RADTODEG_1 * Atan2((yt_0 - y_0), (xt_0 - x_0))
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local unit dammi = CreateUnit(GetOwningPlayer(caster_0), 'h00U', x_0, y_0, .0)
	local effect ef
	call SetAttackSpeedAbilityLevel(caster_0, $C8)
	call SetUnitPosition(caster_0, xt_0 - 75. * Cos(angle_0 * bj_DEGTORAD_1), yt_0 - 75. * Sin(angle_0 * bj_DEGTORAD_1))
	call IssueTargetOrderById(caster_0, $D000F, target_0)
	call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayDamage.mdl", target_0, "origin"))
	set ef_0 = AddSpecialEffectTarget("Abilities\\Weapons\\DruidoftheTalonMissile\\DruidoftheTalonMissile.mdl", caster_0, "hand,left")
	call SaveEffectHandle(udg_hash_1, h_0, 2, ef_0)
	set ef_0 = null
	set ef_0 = AddSpecialEffectTarget("Abilities\\Weapons\\DruidoftheTalonMissile\\DruidoftheTalonMissile.mdl", caster_0, "weapon")
	call SaveEffectHandle(udg_hash_1, h_0, 3, ef_0)
	set ef_0 = null
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call TimerStart(t_0, 2., false, function Trig_Blink_Strike_Remove_Buff_Actions)
	set caster_0 = null
	set caster_0 = null
	set t_0 = null
endfunction

function Trig_Blink_Strike_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A09P'
endfunction

function InitTrig_Blink_Strike takes nothing returns nothing
	local integer index = 0
	set gg_trg_Blink_Strike_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Blink_Strike_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Blink_Strike_1, Condition(function Trig_Blink_Strike_Conditions))
	call TriggerAddAction(gg_trg_Blink_Strike_1, function Trig_Blink_Strike_Actions)
endfunction

function Trig_Victim_Search_Stand2_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local integer addas = LoadInteger(udg_hash_1, h_0, 2)
	if GetUnitState(caster_0, UNIT_STATE_LIFE_1) > .405 and caster_0 != null then
		call SetAttackSpeedAbilityLevel(caster_0, -addas_0)
	endif
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
	set caster_0 = null
endfunction

function Trig_Victim_Search_Stand_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local integer addas = LoadInteger(udg_hash_1, h_0, 2)
	local unit dammi = CreateUnit(GetOwningPlayer(caster_0), 'h00U', GetUnitX(caster_0), GetUnitY(caster_0), 270.)
	local real wait = 10.
	if GetUnitState(caster_0, UNIT_STATE_LIFE_1) > .405 and caster_0 != null then
		call PauseUnit(caster_0, false)
	endif
	if GetUnitState(caster_0, UNIT_STATE_LIFE_1) > .405 then
		call SetUnitAnimation(caster_0, "stand")
	else
		call SetUnitAnimation(caster_0, "death")
	endif
	call UnitRemoveAbility(caster_0, 'A0HD')
	call SetArmorAbilityLevel(caster_0, 30)
	call SetAttackSpeedAbilityLevel(caster_0, addas_0)
	call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
	call UnitAddAbility(dammi_0, 'A0HE')
	call IssueTargetOrderById(dammi_0, $D0085, caster_0)
	if IsPlayerInForce(GetOwningPlayer(caster_0), udg_Players_Enemy_Group_1) then
		call IssuePointOrderById(caster_0, $D000F, GetRectCenterX(gg_rct_cast_magi_1), GetRectCenterY(gg_rct_cast_magi_1))
	endif
	call TimerStart(t_0, wait_0, false, function Trig_Victim_Search_Stand2_Actions)
	set t_0 = null
	set caster_0 = null
	set dammi_0 = null
endfunction

function Trig_Victim_Search_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local integer addas = 80
	local real wait = 2.4
	call PauseUnit(caster_0, true)
	call SetUnitAnimation(caster_0, "stand")
	call SetUnitAnimationByIndex(caster_0, 1)
	call UnitAddAbility(caster_0, 'A0HD')
	call SetArmorAbilityLevel(caster_0, -30)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveInteger(udg_hash_1, h_0, 2, addas_0)
	call TimerStart(t_0, wait_0, false, function Trig_Victim_Search_Stand_Actions)
	set caster_0 = null
	set t_0 = null
endfunction

function Trig_Victim_Search_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0HC'
endfunction

function InitTrig_Victim_Search takes nothing returns nothing
	local integer index = 0
	set gg_trg_Victim_Search_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Victim_Search_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Victim_Search_1, Condition(function Trig_Victim_Search_Conditions))
	call TriggerAddAction(gg_trg_Victim_Search_1, function Trig_Victim_Search_Actions)
endfunction

function Trig_Black_Hole_Periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local real damage = LoadReal(udg_hash_1, h_0, 2)
	local unit dammi = LoadUnitHandle(udg_hash_1, h_0, 3)
	local integer wait = LoadInteger(udg_hash_1, h_0, 5)
	local group gdamage = LoadGroupHandle(udg_hash_1, h_0, 6)
	local real angledammi = LoadReal(udg_hash_1, h_0, 7)
	local real xstart = LoadReal(udg_hash_1, h_0, 8)
	local real ystart = LoadReal(udg_hash_1, h_0, 9)
	local real periodicdamage = LoadReal(udg_hash_1, h_0, 35)
	local effect ef
	local group g = CreateGroup()
	local real x = GetUnitX(dammi_0)
	local real y = GetUnitY(dammi_0)
	local real xt
	local real yt
	local real xt2
	local real yt2
	local real xdammi
	local real ydammi
	local real dist
	local real angle
	local player p = GetOwningPlayer(dammi_0)
	local unit Picked
	local integer lopa = 0
	local unit dammief
	if wait_0 >= 0 then
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 5, wait_0)
		set angledammi_0 = angledammi_0 + 5.5
		call SaveReal(udg_hash_1, h_0, 7, angledammi_0)
		loop
			exitwhen lopa_0 > $A
			set dammief_0 = LoadUnitHandle(udg_hash_1, h_0, lopa_0 + $A)
			if IsTerrainPathable(xstart_0 + 500. * Cos((angledammi_0 + 36. * lopa_0) * bj_DEGTORAD_1), ystart_0 + 500. * Sin((angledammi_0 + 36. * lopa_0) * bj_DEGTORAD_1), PATHING_TYPE_FLYABILITY_1) == false then
				call SetUnitPosition(dammief_0, xstart_0 + 500. * Cos((angledammi_0 + 36. * lopa_0) * bj_DEGTORAD_1), ystart_0 + 500. * Sin((angledammi_0 + 36. * lopa_0) * bj_DEGTORAD_1))
			endif
			call SetUnitFacing(dammief_0, angledammi_0 + 90.)
			set dammief_0 = null
			set lopa_0 = lopa_0 + 1
		endloop
		set xdammi_0 = xstart_0 + 50. * Cos(angledammi_0 * bj_DEGTORAD_1)
		set ydammi_0 = ystart_0 + 50. * Sin(angledammi_0 * bj_DEGTORAD_1)
		if IsTerrainPathable(xdammi_0, ydammi_0, PATHING_TYPE_FLYABILITY_1) == false then
			call SetUnitPosition(dammi_0, xdammi_0, ydammi_0)
		endif
		call GroupEnumUnitsInRange(g_0, x_0, y_0, 500., null)
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if (IsUnitInGroup(Picked_0, udg_PortalCastersMagi_1) == false) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 and IsUnitEnemy(Picked_0, p_0) and IsUnitInGroup(Picked_0, udg_PortalCastersMagi_1) == false and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				set xt_0 = GetUnitX(Picked_0)
				set yt_0 = GetUnitY(Picked_0)
				set dist_0 = SquareRoot((xt_0 - xstart_0) * (xt_0 - xstart_0) + (yt_0 - ystart_0) * (yt_0 - ystart_0))
				set angle_0 = bj_RADTODEG_1 * Atan2(ystart_0 - yt_0, xstart_0 - xt_0)
				set xt2_0 = xt_0 + (1.5 + ((500 - dist_0) / $96)) * Cos(angle_0 * bj_DEGTORAD_1)
				set yt2_0 = yt_0 + (1.5 + ((500 - dist_0) / $96)) * Sin(angle_0 * bj_DEGTORAD_1)
				if IsTerrainPathable(xt2_0, yt2_0, PATHING_TYPE_FLYABILITY_1) == false and dist_0 > 50 then
					call SetUnitX(Picked_0, xt2_0)
					call SetUnitY(Picked_0, yt2_0)
				endif
				if dist_0 < 'd' and IsUnitInGroup(Picked_0, gdamage_0) == false then
					call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
					call StunUnitTimed(Picked_0, 3.25)
					call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathCoil\\DeathCoilSpecialArt.mdl", Picked_0, "chest"))
					call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\CarrionSwarm\\CarrionSwarmDamage.mdl", Picked_0, "chest"))
					call GroupAddUnit(gdamage_0, Picked_0)
				endif
				if dist_0 < 'd' then
					call UnitDamageTarget(caster_0, Picked_0, periodicdamage_0 * .03, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
				endif
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		call SaveGroupHandle(udg_hash_1, h_0, 6, gdamage_0)
	else
		if wait_0 == -1 then
			set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 4)
			call DestroyEffect(ef_0)
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathCoil\\DeathCoilSpecialArt.mdl", dammi_0, "origin"))
			set lopa_0 = 0
			loop
				exitwhen lopa_0 > $A
				set dammief_0 = LoadUnitHandle(udg_hash_1, h_0, lopa_0 + $A)
				set ef_0 = LoadEffectHandle(udg_hash_1, h_0, lopa_0 + 20)
				call DestroyEffect(ef_0)
				call RemoveUnit(dammief_0)
				set dammief_0 = null
				set ef_0 = null
				set lopa_0 = lopa_0 + 1
			endloop
		endif
		if wait_0 >= -66 then
			set wait_0 = wait_0 - 1
			call SaveInteger(udg_hash_1, h_0, 5, wait_0)
		else
			call FlushChildHashtable(udg_hash_1, h_0)
			call DestroyTimer(t_0)
			call GroupClear(gdamage_0)
			call DestroyGroup(gdamage_0)
			call RemoveUnit(dammi_0)
		endif
	endif
	set t_0 = null
	set caster_0 = null
	set dammi_0 = null
	set ef_0 = null
	set gdamage_0 = null
	set Picked_0 = null
	set p_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
endfunction

function Trig_Black_Hole_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local location loc = GetSpellTargetLoc()
	local real x = GetLocationX(loc_0)
	local real y = GetLocationY(loc_0)
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local real damage = 500.
	local real periodicdamage = 150.
	local integer wait = R2I($A / .03)
	local unit dammi = CreateUnit(GetOwningPlayer(caster_0), 'h00U', x_0 + 50., y_0 + 50., 270.)
	local real angledammi = 270.
	local effect ef = AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DarkSummoning\\DarkSummonMissile.mdl", dammi_0, "chest")
	local group gdamage = CreateGroup()
	local unit dammief
	local effect dammieffect
	local integer lopa = 0
	loop
		exitwhen lopa_0 > $A
		set dammief_0 = CreateUnit(GetOwningPlayer(caster_0), 'h00U', x_0 + 500. * Cos(36. * lopa_0 * bj_DEGTORAD_1), y_0 + 500. * Sin(36. * lopa_0 * bj_DEGTORAD_1), (36. * lopa_0) + 90.)
		set dammieffect_0 = AddSpecialEffectTarget("Effects\\DarkVortex2.mdl", dammief_0, "chest")
		call SetUnitScale(dammief_0, 1.5, 1.5, 1.5)
		call SaveUnitHandle(udg_hash_1, h_0, $A + lopa_0, dammief_0)
		call SaveEffectHandle(udg_hash_1, h_0, 20 + lopa_0, dammieffect_0)
		set dammief_0 = null
		set dammieffect_0 = null
		set lopa_0 = lopa_0 + 1
	endloop
	call UnitAddAbility(dammi_0, 'Amrf')
	call UnitRemoveAbility(dammi_0, 'Amrf')
	call SetUnitFlyHeight(dammi_0, 200., .0)
	call SetUnitScale(dammi_0, 2., 2., 2.)
	call SetUnitTimeScale(dammi_0, 2.)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveReal(udg_hash_1, h_0, 2, damage_0)
	call SaveUnitHandle(udg_hash_1, h_0, 3, dammi_0)
	call SaveEffectHandle(udg_hash_1, h_0, 4, ef_0)
	call SaveInteger(udg_hash_1, h_0, 5, wait_0)
	call SaveGroupHandle(udg_hash_1, h_0, 6, gdamage_0)
	call SaveReal(udg_hash_1, h_0, 7, angledammi_0)
	call SaveReal(udg_hash_1, h_0, 8, x_0)
	call SaveReal(udg_hash_1, h_0, 9, y_0)
	call SaveReal(udg_hash_1, h_0, 35, periodicdamage_0)
	call TimerStart(t_0, .03, true, function Trig_Black_Hole_Periodic_Actions)
	set caster_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set t_0 = null
	set dammi_0 = null
	set ef_0 = null
	set gdamage_0 = null
endfunction

function Trig_Black_Hole_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0HA'
endfunction

function InitTrig_Black_Hole takes nothing returns nothing
	local integer index = 0
	set gg_trg_Black_Hole_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Black_Hole_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Black_Hole_1, Condition(function Trig_Black_Hole_Conditions))
	call TriggerAddAction(gg_trg_Black_Hole_1, function Trig_Black_Hole_Actions)
endfunction

function Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Conditions takes nothing returns boolean
	return (udg_Nomer_samoi_volni_1 == 8)
endfunction

function Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func002C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A09N', GetTriggerUnit()) > 0) and (GetRandomInt(1, 2) == 3) and (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group_1)) and (false)
endfunction

function Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func003C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A09N', GetAttacker()) > 0) and (GetRandomInt(1, 2) == 3) and (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group_1)) and (false)
endfunction

function Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func004C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0H0', GetTriggerUnit()) > 0) and (GetRandomInt(1, 3) == 4) and (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func005C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0H0', GetAttacker()) > 0) and (GetRandomInt(1, 3) == 4) and (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func006C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0H7', GetTriggerUnit()) > 0) and (GetRandomInt(1, 2) == 3) and (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func007C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0H7', GetAttacker()) > 0) and (GetRandomInt(1, 2) == 3) and (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func008C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0HB', GetTriggerUnit()) > 0) and (GetRandomInt(1, 2) == 1) and (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func009C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0HB', GetAttacker()) > 0) and (GetRandomInt(1, 3) == 1) and (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func010C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A09R', GetTriggerUnit()) > 0) and (GetRandomInt(1, 2) == 1) and (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func011C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A09R', GetAttacker()) > 0) and (GetRandomInt(1, 2) == 1) and (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Actions takes nothing returns nothing
	if (Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func002C()) then
		call IssueTargetOrderById(GetTriggerUnit(), $D0201, GetAttacker())
	endif
	if (Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func003C()) then
		call IssueTargetOrderById(GetAttacker(), $D0201, GetTriggerUnit())
	endif
	if (Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func004C()) then
		call IssueTargetOrderById(GetTriggerUnit(), $D027C, GetAttacker())
	endif
	if (Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func005C()) then
		call IssueTargetOrderById(GetAttacker(), $D027C, GetTriggerUnit())
	endif
	if (Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func006C()) then
		call IssueTargetOrderById(GetTriggerUnit(), $D0244, GetAttacker())
	endif
	if (Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func007C()) then
		call IssueTargetOrderById(GetAttacker(), $D0244, GetTriggerUnit())
	endif
	if (Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func008C()) then
		call IssuePointOrderById(GetTriggerUnit(), $D00FD, GetUnitX(GetAttacker()), GetUnitY(GetAttacker()))
	endif
	if (Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func009C()) then
		call IssuePointOrderById(GetAttacker(), $D00FD, GetUnitX(GetTriggerUnit()), GetUnitY(GetTriggerUnit()))
	endif
	if (Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func010C()) then
		call IssueImmediateOrderById(GetTriggerUnit(), $D00C4)
	endif
	if (Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Func011C()) then
		call IssueImmediateOrderById(GetAttacker(), $D00C4)
	endif
endfunction

function InitTrig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar takes nothing returns nothing
	set gg_trg_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_1 = CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(gg_trg_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_1, EVENT_PLAYER_UNIT_ATTACKED_1)
	call TriggerAddCondition(gg_trg_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_1, Condition(function Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Conditions))
	call TriggerAddAction(gg_trg_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_1, function Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Actions)
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Conditions takes nothing returns boolean
	return (udg_Nomer_samoi_volni_1 == 8)
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002001002 takes nothing returns boolean
	return (IsPlayerInForce(GetOwningPlayer(GetFilterUnit()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001Func001002001003001 takes nothing returns boolean
	return (IsUnitAliveBJ(GetFilterUnit()))
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001Func001002001003002001 takes nothing returns boolean
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE_1) == false) != null
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001Func001002001003002002 takes nothing returns boolean
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())))
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001Func001002001003002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001Func001002001003002001(), Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001Func001002001003002002())
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001Func001002001003 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001Func001002001003001(), Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001Func001002001003002())
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001Func002C takes nothing returns boolean
	return (udg_Temp_Unit_1 != null)
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A09P', GetEnumUnit()) > 0)
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func002Func001002001003001 takes nothing returns boolean
	return (IsUnitAliveBJ(GetFilterUnit()))
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func002Func001002001003002001 takes nothing returns boolean
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE_1) == false) != null
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func002Func001002001003002002 takes nothing returns boolean
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())))
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func002Func001002001003002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func002Func001002001003002001(), Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func002Func001002001003002002())
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func002Func001002001003 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func002Func001002001003001(), Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func002Func001002001003002())
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func002C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0H0', GetEnumUnit()) > 0) and (GetRandomInt(1, 3) == 4)
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func003Func001002001003001 takes nothing returns boolean
	return (IsUnitAliveBJ(GetFilterUnit()))
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func003Func001002001003002001 takes nothing returns boolean
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE_1) == false) != null
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func003Func001002001003002002 takes nothing returns boolean
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())))
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func003Func001002001003002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func003Func001002001003002001(), Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func003Func001002001003002002())
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func003Func001002001003 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func003Func001002001003001(), Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func003Func001002001003002())
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func003C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0H1', GetEnumUnit()) > 0) and (GetRandomInt(1, 3) == 4)
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004Func002002001003001 takes nothing returns boolean
	return (IsUnitAliveBJ(GetFilterUnit()))
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004Func002002001003002001 takes nothing returns boolean
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE_1) == false) != null
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004Func002002001003002002 takes nothing returns boolean
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())))
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004Func002002001003002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004Func002002001003002001(), Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004Func002002001003002002())
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004Func002002001003 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004Func002002001003001(), Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004Func002002001003002())
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004Func003C takes nothing returns boolean
	return (udg_Temp_Unit_1 != null)
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0HC', GetEnumUnit()) > 0) and (GetRandomInt(1, 2) == 1)
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003001001 takes nothing returns boolean
	return (IsUnitAliveBJ(GetFilterUnit()))
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003001002 takes nothing returns boolean
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO_1)) != null
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003001001(), Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003001002())
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003002001 takes nothing returns boolean
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE_1) == false) != null
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003002002 takes nothing returns boolean
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())))
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003002001(), Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003002002())
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003001(), Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003002())
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func002C takes nothing returns boolean
	return (udg_Temp_Unit_1 != null)
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0HA', GetEnumUnit()) > 0)
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002A takes nothing returns nothing
	if (Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001C()) then
		set udg_Temp_Unit_1 = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(700., GetUnitLoc(GetEnumUnit()), Condition(function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001Func001002001003)))
		if (Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func001Func002C()) then
			call IssueTargetOrderById(GetEnumUnit(), $D0258, udg_Temp_Unit_1)
		endif
	endif
	if (Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func002C()) then
		set udg_Temp_Unit_1 = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(800., GetUnitLoc(GetEnumUnit()), Condition(function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func002Func001002001003)))
		call IssueTargetOrderById(GetEnumUnit(), $D027C, udg_Temp_Unit_1)
	endif
	if (Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func003C()) then
		set udg_Temp_Unit_1 = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(1000., GetUnitLoc(GetEnumUnit()), Condition(function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func003Func001002001003)))
		call IssueTargetOrderById(GetEnumUnit(), $D000C, udg_Temp_Unit_1)
	endif
	if (Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004C()) then
		set udg_Temp_Unit_1 = null
		set udg_Temp_Unit_1 = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(650., GetUnitLoc(GetEnumUnit()), Condition(function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004Func002002001003)))
		if (Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func004Func003C()) then
			call IssueImmediateOrderById(GetEnumUnit(), $D00F3)
		endif
	endif
	if (Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005C()) then
		set udg_Temp_Unit_1 = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(1000., GetUnitLoc(GetEnumUnit()), Condition(function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func001002001003)))
		if (Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002Func005Func002C()) then
			call IssueTargetOrderById(GetEnumUnit(), $D00E4, udg_Temp_Unit_1)
		endif
	endif
endfunction

function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Actions takes nothing returns nothing
	call ForGroupBJ(GetUnitsInRectMatching(bj_mapInitialPlayableArea_1, Condition(function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002001002)), function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Func002A)
endfunction

function InitTrig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH takes nothing returns nothing
	set gg_trg_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_1 = CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(gg_trg_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_1, 1.)
	call TriggerAddCondition(gg_trg_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_1, Condition(function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Conditions))
	call TriggerAddAction(gg_trg_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_1, function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Actions)
endfunction

function Trig_Weakness_10second_last_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit target = LoadUnitHandle(udg_hash_1, h_0, 1)
	local string s = LoadStr(udg_hash_1, h_0, 2)
	if s_0 == "str" then
		call SetUnitMaxState(target_0, UNIT_STATE_MAX_LIFE_1, 'd')
		call SetUnitLifeAndManaRegeneration(target_0, "life", $A)
	endif
	if s_0 == "agi" then
		call SetAttackAbilityLevel(target_0, $F)
		call SetAttackSpeedAbilityLevel(target_0, $A)
	endif
	if s_0 == "int" then
		call SetUnitMaxState(target_0, UNIT_STATE_MAX_MANA_1, 50)
		call SetUnitLifeAndManaRegeneration(target_0, "mana", 5)
	endif
	if s_0 == "mob" then
		call SetArmorAbilityLevel(target_0, 7)
	endif
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
	set target_0 = null
endfunction

function Trig_Weakness_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local unit target = GetSpellTargetUnit()
	local string smainstat
	local string s
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	if IsUnitType(target_0, UNIT_TYPE_HERO_1) then
		set smainstat_0 = LoadStr(udg_hash_1, GetUnitTypeId(target_0), 70)
		if smainstat_0 == "str" then
			call SetUnitMaxState(target_0, UNIT_STATE_MAX_LIFE_1, -'d')
			call SetUnitLifeAndManaRegeneration(target_0, "life", -$A)
			set s_0 = "str"
		endif
		if smainstat_0 == "agi" then
			call SetAttackAbilityLevel(target_0, -$F)
			call SetAttackSpeedAbilityLevel(target_0, -$A)
			set s_0 = "agi"
		endif
		if smainstat_0 == "int" then
			call SetUnitMaxState(target_0, UNIT_STATE_MAX_MANA_1, -50)
			call SetUnitLifeAndManaRegeneration(target_0, "mana", -5)
			set s_0 = "int"
		endif
	else
		call SetArmorAbilityLevel(target_0, -7)
		set s_0 = "mob"
	endif
	call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\WingedSerpentMissile\\WingedSerpentMissile.mdl", target_0, "chest"))
	call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\WingedSerpentMissile\\WingedSerpentMissile.mdl", target_0, "hand,left"))
	call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\WingedSerpentMissile\\WingedSerpentMissile.mdl", target_0, "hand,right"))
	call SaveUnitHandle(udg_hash_1, h_0, 1, target_0)
	call SaveStr(udg_hash_1, h_0, 2, s_0)
	call TimerStart(t_0, 12., false, function Trig_Weakness_10second_last_Actions)
	set caster_0 = null
	set target_0 = null
	set t_0 = null
endfunction

function Trig_Weakness_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0ES'
endfunction

function InitTrig_Weakness takes nothing returns nothing
	local integer index = 0
	set gg_trg_Weakness_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Weakness_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Weakness_1, Condition(function Trig_Weakness_Conditions))
	call TriggerAddAction(gg_trg_Weakness_1, function Trig_Weakness_Actions)
endfunction

function Trig_Astral_Dispersal_Periodic_Dest_Actions takes nothing returns nothing
	call KillDestructable(GetEnumDestructable())
endfunction

function Trig_Astral_Dispersal_Periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local real damage = LoadReal(udg_hash_1, h_0, 3)
	local integer waitstand = LoadInteger(udg_hash_1, h_0, 4)
	local integer wait = LoadInteger(udg_hash_1, h_0, 5)
	local real face = LoadReal(udg_hash_1, h_0, 6)
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local player p = GetOwningPlayer(caster_0)
	local group g = CreateGroup()
	local unit Picked
	local real angle
	local unit dammi
	local boolean alife = true
	local boolean endgroupcheck = false
	local effect ef
	local rect r
	if waitstand_0 > 0 and GetUnitState(caster_0, UNIT_STATE_LIFE_1) > .405 then
		set waitstand_0 = waitstand_0 - 1
		call SaveInteger(udg_hash_1, h_0, 4, waitstand_0)
	endif
	if waitstand_0 <= 0 and wait_0 > 0 and GetUnitState(caster_0, UNIT_STATE_LIFE_1) > .405 then
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 5, wait_0)
		set r_0 = Rect(x_0 - 100., y_0 - 100., x_0 + 100., y_0 + 100.)
		call EnumDestructablesInRect(r_0, null, function Trig_Astral_Dispersal_Periodic_Dest_Actions)
		if IsTerrainPathable(x_0 + 25. * Cos(face_0 * bj_DEGTORAD_1), y_0 + 25. * Sin(face_0 * bj_DEGTORAD_1), PATHING_TYPE_FLYABILITY_1) == false then
			call SetUnitPosition(caster_0, x_0 + 25. * Cos(face_0 * bj_DEGTORAD_1), y_0 + 25. * Sin(face_0 * bj_DEGTORAD_1))
		endif
		call SetUnitFacing(caster_0, face_0)
		call GroupEnumUnitsInRange(g_0, x_0 + 50. * Cos(face_0 * bj_DEGTORAD_1), y_0 + 50. * Sin(face_0 * bj_DEGTORAD_1), 125., null)
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null or endgroupcheck_0
			if IsUnitEnemy(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				set endgroupcheck_0 = true
				set wait_0 = -1
				call SaveInteger(udg_hash_1, h_0, 5, wait_0)
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\OrbOfDeath\\AnnihilationMissile.mdl", Picked_0, "chest"))
				call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl", Picked_0, "chest"))
				set dammi_0 = CreateUnit(p_0, 'h00U', x_0, y_0, .0)
				call UnitApplyTimedLife(dammi_0, 'BTLF', .5)
				call UnitAddAbility(dammi_0, 'A0GG')
				call IssueTargetOrderById(dammi_0, $D007F, Picked_0)
				call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
				set dammi_0 = null
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
	endif
	if wait_0 <= 0 or GetUnitState(caster_0, UNIT_STATE_LIFE_1) < .405 then
		call SetUnitAnimation(caster_0, "stand")
		call SetUnitPathing(caster_0, true)
		call SetUnitTimeScale(caster_0, 1.)
		call PauseUnit(caster_0, false)
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 7)
		call DestroyEffect(ef_0)
		set ef_0 = null
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set caster_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set p_0 = null
	set Picked_0 = null
	set dammi_0 = null
	call RemoveRect(r_0)
	set r_0 = null
endfunction

function Trig_Astral_Dispersal_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local unit target = GetSpellTargetUnit()
	local real angle
	local real damage = 400.
	local location loc
	local real tx
	local real ty
	local real dist
	local real time
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local effect ef = AddSpecialEffectTarget("Abilities\\Weapons\\AvengerMissile\\AvengerMissile.mdl", caster_0, "chest")
	if target_0 == null then
		set loc_0 = GetSpellTargetLoc()
		set tx_0 = GetLocationX(loc_0)
		set ty_0 = GetLocationY(loc_0)
	else
		set tx_0 = GetUnitX(target_0)
		set ty_0 = GetUnitY(target_0)
	endif
	call SetUnitAnimation(caster_0, "stand")
	call SetUnitPathing(caster_0, false)
	call SetUnitTimeScale(caster_0, 4.)
	call PauseUnit(caster_0, true)
	call SetUnitAnimationByIndex(caster_0, 1)
	call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\OrbOfDeath\\AnnihilationMissile.mdl", tx_0, ty_0))
	set angle_0 = bj_RADTODEG_1 * Atan2(ty_0 - y_0, tx_0 - x_0)
	set dist_0 = SquareRoot((tx_0 - x_0) * (tx_0 - x_0) + (ty_0 - y_0) * (ty_0 - y_0)) + 100.
	call SetUnitFacing(caster_0, angle_0)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveReal(udg_hash_1, h_0, 3, damage_0)
	call SaveInteger(udg_hash_1, h_0, 4, 66)
	call SaveInteger(udg_hash_1, h_0, 5, R2I(dist_0 / 25.))
	call SaveReal(udg_hash_1, h_0, 6, angle_0)
	call SaveEffectHandle(udg_hash_1, h_0, 7, ef_0)
	call TimerStart(t_0, .03, true, function Trig_Astral_Dispersal_Periodic_Actions)
	set caster_0 = null
	set target_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set t_0 = null
	set ef_0 = null
endfunction

function Trig_Astral_Dispersal_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0GF'
endfunction

function InitTrig_Astral_Dispersal takes nothing returns nothing
	local integer index = 0
	set gg_trg_Astral_Dispersal_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Astral_Dispersal_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Astral_Dispersal_1, Condition(function Trig_Astral_Dispersal_Conditions))
	call TriggerAddAction(gg_trg_Astral_Dispersal_1, function Trig_Astral_Dispersal_Actions)
endfunction

function Trig_Infernal_Ram_Periodic_Dest_Actions takes nothing returns nothing
	call KillDestructable(GetEnumDestructable())
endfunction

function Trig_Infernal_Ram_Periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local real damage = LoadReal(udg_hash_1, h_0, 3)
	local group gdamage = LoadGroupHandle(udg_hash_1, h_0, 4)
	local integer wait = LoadInteger(udg_hash_1, h_0, 5)
	local real face = LoadReal(udg_hash_1, h_0, 6)
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local real xzahvat = x_0 + 50. * Cos(face_0 * bj_DEGTORAD_1)
	local real yzahvat = y_0 + 50. * Sin(face_0 * bj_DEGTORAD_1)
	local player p = GetOwningPlayer(caster_0)
	local group g = CreateGroup()
	local unit Picked
	local real angle
	local unit dammi
	local boolean alife = true
	local effect ef
	local rect r
	if wait_0 > 0 and GetUnitState(caster_0, UNIT_STATE_LIFE_1) > .405 then
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 5, wait_0)
		set r_0 = Rect(xzahvat_0 - 125., yzahvat_0 - 125., xzahvat_0 + 125., yzahvat_0 + 125.)
		call EnumDestructablesInRect(r_0, null, function Trig_Infernal_Ram_Periodic_Dest_Actions)
		if IsTerrainPathable(x_0 + 25. * Cos(face_0 * bj_DEGTORAD_1), y_0 + 25. * Sin(face_0 * bj_DEGTORAD_1), PATHING_TYPE_FLYABILITY_1) == false then
			call SetUnitPosition(caster_0, x_0 + 25. * Cos(face_0 * bj_DEGTORAD_1), y_0 + 25. * Sin(face_0 * bj_DEGTORAD_1))
		endif
		call SetUnitFacing(caster_0, face_0)
		call GroupEnumUnitsInRange(g_0, x_0 + 75. * Cos(face_0 * bj_DEGTORAD_1), y_0 + 75. * Sin(face_0 * bj_DEGTORAD_1), 110., null)
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if (IsUnitInGroup(Picked_0, udg_PortalCastersMagi_1) == false) and IsUnitEnemy(Picked_0, p_0) and IsUnitInGroup(Picked_0, gdamage_0) == false and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call UnitPeriodicPostionMove(Picked_0, .03, wait_0 * .03)
				call GroupAddUnit(gdamage_0, Picked_0)
				call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Undead\\UndeadBlood\\UndeadBloodNecromancer.mdl", Picked_0, "chest"))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl", Picked_0, "chest"))
				call SetUnitPathing(Picked_0, false)
				call MoveUnit(Picked_0, wait_0 * .03, 833.3, .0, face_0, .0, true)
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
	endif
	set Picked_0 = null
	if wait_0 <= 0 or GetUnitState(caster_0, UNIT_STATE_LIFE_1) < .405 then
		loop
			set Picked_0 = FirstOfGroup(gdamage_0)
			exitwhen Picked_0 == null
			call SetUnitPosition(Picked_0, GetUnitX(Picked_0), GetUnitY(Picked_0))
			set dammi_0 = CreateUnit(p_0, 'h00U', x_0, y_0, .0)
			call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
			call UnitAddAbility(dammi_0, 'A0GJ')
			call IssueTargetOrderById(dammi_0, $D006B, Picked_0)
			call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
			call SetUnitPathing(Picked_0, true)
			set dammi_0 = null
			call GroupRemoveUnit(gdamage_0, Picked_0)
		endloop
		call SetUnitAnimation(caster_0, "stand")
		call SetUnitPathing(caster_0, true)
		call SetUnitTimeScale(caster_0, 1.)
		call PauseUnit(caster_0, false)
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 7)
		call DestroyEffect(ef_0)
		set ef_0 = null
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 8)
		call DestroyEffect(ef_0)
		set ef_0 = null
		call GroupClear(gdamage_0)
		call DestroyGroup(gdamage_0)
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
		call IssuePointOrderById(caster_0, $D0079, x_0 + 50. * Cos(face_0 * bj_DEGTORAD_1), y_0 + 50. * Sin(face_0 * bj_DEGTORAD_1))
	endif
	set t_0 = null
	set caster_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set gdamage_0 = null
	set p_0 = null
	set Picked_0 = null
	set dammi_0 = null
	call RemoveRect(r_0)
	set r_0 = null
endfunction

function Trig_Infernal_Ram_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local unit target = GetSpellTargetUnit()
	local real angle
	local real damage = 800.
	local location loc
	local real tx
	local real ty
	local real dist
	local real time
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local effect ef
	local group gdamage = CreateGroup()
	if target_0 == null then
		set loc_0 = GetSpellTargetLoc()
		set tx_0 = GetLocationX(loc_0)
		set ty_0 = GetLocationY(loc_0)
	else
		set tx_0 = GetUnitX(target_0)
		set ty_0 = GetUnitY(target_0)
	endif
	call SetUnitAnimation(caster_0, "stand")
	call SetUnitPathing(caster_0, false)
	call SetUnitTimeScale(caster_0, 3.25)
	call PauseUnit(caster_0, true)
	call SetUnitAnimationByIndex(caster_0, 1)
	set angle_0 = bj_RADTODEG_1 * Atan2(ty_0 - y_0, tx_0 - x_0)
	set dist_0 = SquareRoot((tx_0 - x_0) * (tx_0 - x_0) + (ty_0 - y_0) * (ty_0 - y_0)) + 100.
	call SetUnitFacing(caster_0, angle_0)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveReal(udg_hash_1, h_0, 3, damage_0)
	call SaveGroupHandle(udg_hash_1, h_0, 4, gdamage_0)
	call SaveInteger(udg_hash_1, h_0, 5, R2I(dist_0 / 25.))
	call SaveReal(udg_hash_1, h_0, 6, angle_0)
	set ef_0 = AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl", caster_0, "chest")
	call SaveEffectHandle(udg_hash_1, h_0, 7, ef_0)
	set ef_0 = null
	set ef_0 = AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl", caster_0, "head")
	call SaveEffectHandle(udg_hash_1, h_0, 8, ef_0)
	call TimerStart(t_0, .03, true, function Trig_Infernal_Ram_Periodic_Actions)
	set caster_0 = null
	set target_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set t_0 = null
	set ef_0 = null
	set gdamage_0 = null
endfunction

function Trig_Infernal_Ram_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0GI'
endfunction

function InitTrig_Infernal_Ram takes nothing returns nothing
	local integer index = 0
	set gg_trg_Infernal_Ram_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Infernal_Ram_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Infernal_Ram_1, Condition(function Trig_Infernal_Ram_Conditions))
	call TriggerAddAction(gg_trg_Infernal_Ram_1, function Trig_Infernal_Ram_Actions)
endfunction

function Trig_Fiery_Blow_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local location loc = GetSpellTargetLoc()
	local real x = GetLocationX(loc_0)
	local real y = GetLocationY(loc_0)
	local real radius = 250.
	local real damage = 350.
	local unit dammi
	local unit Picked
	local group g = CreateGroup()
	local player p = GetOwningPlayer(caster_0)
	call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", x_0, y_0))
	call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl", x_0, y_0))
	call GroupEnumUnitsInRange(g_0, x_0, y_0, radius_0, null)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if IsUnitEnemy(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Incinerate\\FireLordDeathExplode.mdl", Picked_0, "origin"))
			set dammi_0 = CreateUnit(p_0, 'h00U', x_0, y_0, .0)
			call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
			call UnitAddAbility(dammi_0, 'A0GL')
			call IssueTargetOrderById(dammi_0, $D007F, Picked_0)
			call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
			set dammi_0 = null
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set caster_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set dammi_0 = null
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set p_0 = null
endfunction

function Trig_Fiery_Blow_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0GK'
endfunction

function InitTrig_Fiery_Blow takes nothing returns nothing
	local integer index = 0
	set gg_trg_Fiery_Blow_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Fiery_Blow_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Fiery_Blow_1, Condition(function Trig_Fiery_Blow_Conditions))
	call TriggerAddAction(gg_trg_Fiery_Blow_1, function Trig_Fiery_Blow_Actions)
endfunction

function Trig_Bloody_Jump_Delete_Dammi_Actions takes nothing returns nothing
	local timer tvoid = GetExpiredTimer()
	local integer hvoid = GetHandleId(tvoid_0)
	local unit dammivoid = LoadUnitHandle(udg_hash_1, hvoid_0, 1)
	call RemoveUnit(dammivoid_0)
	call FlushChildHashtable(udg_hash_1, hvoid_0)
	call DestroyTimer(tvoid_0)
	set tvoid_0 = null
	set dammivoid_0 = null
endfunction

function Trig_Bloody_Jump_Periodic_Dest_Actions takes nothing returns nothing
	call KillDestructable(GetEnumDestructable())
endfunction

function Trig_Bloody_Jump_Periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local integer waitef = LoadInteger(udg_hash_1, h_0, 2)
	local integer wait = LoadInteger(udg_hash_1, h_0, 3)
	local real face = LoadReal(udg_hash_1, h_0, 4)
	local group gdamage = LoadGroupHandle(udg_hash_1, h_0, 5)
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local real xnew = x_0 + 30. * Cos(face_0 * bj_DEGTORAD_1)
	local real ynew = y_0 + 30. * Sin(face_0 * bj_DEGTORAD_1)
	local player p = GetOwningPlayer(caster_0)
	local group g = CreateGroup()
	local unit Picked
	local real angle
	local unit dammi
	local unit dammivoid
	local rect r
	local timer tvoid
	local integer hvoid
	if wait_0 > 0 and GetUnitState(caster_0, UNIT_STATE_LIFE_1) > .405 then
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 3, wait_0)
		set r_0 = Rect(x_0 - 75., y_0 - 75., x_0 + 75., y_0 + 75.)
		call EnumDestructablesInRect(r_0, null, function Trig_Bloody_Jump_Periodic_Dest_Actions)
		if IsTerrainPathable(x_0 + 30. * Cos(face_0 * bj_DEGTORAD_1), y_0 + 30. * Sin(face_0 * bj_DEGTORAD_1), PATHING_TYPE_FLYABILITY_1) == false then
			call SetUnitPosition(caster_0, x_0 + 30. * Cos(face_0 * bj_DEGTORAD_1), y_0 + 30. * Sin(face_0 * bj_DEGTORAD_1))
		endif
		if waitef_0 == 7 then
			set waitef_0 = 0
			set tvoid_0 = CreateTimer()
			set hvoid_0 = GetHandleId(tvoid_0)
			set dammivoid_0 = CreateUnit(Player(0), 'n008', x_0 - 50. * Cos(face_0 * bj_DEGTORAD_1), y_0 - 50. * Sin(face_0 * bj_DEGTORAD_1), face_0)
			call SetUnitAnimation(dammivoid_0, "stand")
			call SetUnitPathing(dammivoid_0, false)
			call SetUnitTimeScale(dammivoid_0, 2.)
			call PauseUnit(dammivoid_0, true)
			call SetUnitMoveSpeed(dammivoid_0, .0)
			call UnitAddAbility(dammivoid_0, 'Aloc')
			call SetUnitVertexColor(dammivoid_0, $9B, $FF, $FF, 75)
			call SetUnitAnimationByIndex(dammivoid_0, 6)
			call SaveUnitHandle(udg_hash_1, hvoid_0, 1, dammivoid_0)
			call TimerStart(tvoid_0, .7, false, function Trig_Bloody_Jump_Delete_Dammi_Actions)
			set tvoid_0 = null
			set dammivoid_0 = null
			call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", dammivoid_0, "chest"))
			call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPeasant.mdl", GetUnitX(caster_0), GetUnitY(caster_0)))
		else
			set waitef_0 = waitef_0 + 1
		endif
		call SaveInteger(udg_hash_1, h_0, 2, waitef_0)
		call SetUnitFacing(caster_0, face_0)
		call GroupEnumUnitsInRange(g_0, x_0 + 50. * Cos(face_0 * bj_DEGTORAD_1), y_0 + 50. * Sin(face_0 * bj_DEGTORAD_1), 200., null)
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if IsUnitEnemy(Picked_0, p_0) and IsUnitInGroup(Picked_0, gdamage_0) == false and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call GroupAddUnit(gdamage_0, Picked_0)
				call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodRifleman.mdl", Picked_0, "chest"))
				call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodSorceress.mdl", Picked_0, "chest"))
				set dammi_0 = CreateUnit(p_0, 'h00U', xnew_0, ynew_0, .0)
				call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
				call UnitAddAbility(dammi_0, 'A0GN')
				call IssueTargetOrderById(dammi_0, $D006B, Picked_0)
				set dammi_0 = null
				set dammi_0 = CreateUnit(p_0, 'h00U', xnew_0, ynew_0, .0)
				call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
				call UnitAddAbility(dammi_0, 'A0GO')
				call IssueTargetOrderById(dammi_0, $D007F, Picked_0)
				set dammi_0 = null
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		call SaveGroupHandle(udg_hash_1, h_0, 5, gdamage_0)
	endif
	if wait_0 <= 0 or GetUnitState(caster_0, UNIT_STATE_LIFE_1) < .405 then
		call SetUnitAnimation(caster_0, "stand")
		call SetUnitPathing(caster_0, true)
		call SetUnitTimeScale(caster_0, 1.)
		call PauseUnit(caster_0, false)
		call SetUnitVertexColor(caster_0, $9B, $FF, $FF, $FF)
		call GroupClear(gdamage_0)
		call DestroyGroup(gdamage_0)
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
		call IssueImmediateOrderById(caster_0, $D0080)
	endif
	set t_0 = null
	set caster_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set gdamage_0 = null
	set p_0 = null
	set Picked_0 = null
	set dammi_0 = null
	call RemoveRect(r_0)
	set r_0 = null
endfunction

function Trig_Bloody_Jump_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local unit target = GetSpellTargetUnit()
	local real angle
	local location loc
	local real tx
	local real ty
	local real dist
	local real time
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local group gdamage = CreateGroup()
	if target_0 == null then
		set loc_0 = GetSpellTargetLoc()
		set tx_0 = GetLocationX(loc_0)
		set ty_0 = GetLocationY(loc_0)
	else
		set tx_0 = GetUnitX(target_0)
		set ty_0 = GetUnitY(target_0)
	endif
	call SetUnitAnimation(caster_0, "stand")
	call SetUnitPathing(caster_0, false)
	call SetUnitTimeScale(caster_0, 3.)
	call PauseUnit(caster_0, true)
	call SetUnitVertexColor(caster_0, $9B, $FF, $FF, $96)
	call SetUnitAnimationByIndex(caster_0, 0)
	set angle_0 = bj_RADTODEG_1 * Atan2(ty_0 - y_0, tx_0 - x_0)
	set dist_0 = SquareRoot((tx_0 - x_0) * (tx_0 - x_0) + (ty_0 - y_0) * (ty_0 - y_0)) + 200.
	call SetUnitFacing(caster_0, angle_0)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveInteger(udg_hash_1, h_0, 2, 6)
	call SaveInteger(udg_hash_1, h_0, 3, R2I(dist_0 / 30.))
	call SaveReal(udg_hash_1, h_0, 4, angle_0)
	call SaveGroupHandle(udg_hash_1, h_0, 5, gdamage_0)
	call TimerStart(t_0, .03, true, function Trig_Bloody_Jump_Periodic_Actions)
	set caster_0 = null
	set target_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set t_0 = null
	set gdamage_0 = null
endfunction

function Trig_Bloody_Jump_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0GM'
endfunction

function InitTrig_Bloody_Jump takes nothing returns nothing
	local integer index = 0
	set gg_trg_Bloody_Jump_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Bloody_Jump_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Bloody_Jump_1, Condition(function Trig_Bloody_Jump_Conditions))
	call TriggerAddAction(gg_trg_Bloody_Jump_1, function Trig_Bloody_Jump_Actions)
endfunction

function Trig_Blood_Absorption_Destroy_Effects_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local effect ef
	set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 1)
	call DestroyEffect(ef_0)
	set ef_0 = null
	set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 2)
	call DestroyEffect(ef_0)
	set ef_0 = null
	set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 3)
	call DestroyEffect(ef_0)
	set ef_0 = null
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
endfunction

function Trig_Blood_Absorption_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local real radius = 200.
	local real damage = 200.
	local real heal = 300.
	local unit Picked
	local group g = CreateGroup()
	local player p = GetOwningPlayer(caster_0)
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local effect ef
	call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HeroBloodElfBlood.mdl", caster_0, "chest"))
	call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", caster_0, "chest"))
	set ef_0 = AddSpecialEffect("Abilities\\Spells\\Items\\VampiricPotion\\VampPotionCaster.mdl", x_0 + radius_0 * Cos(120. * bj_DEGTORAD_1), y_0 + radius_0 * Sin(120. * bj_DEGTORAD_1))
	call SaveEffectHandle(udg_hash_1, h_0, 1, ef_0)
	set ef_0 = null
	set ef_0 = AddSpecialEffect("Abilities\\Spells\\Items\\VampiricPotion\\VampPotionCaster.mdl", x_0 + radius_0 * Cos(240. * bj_DEGTORAD_1), y_0 + radius_0 * Sin(240. * bj_DEGTORAD_1))
	call SaveEffectHandle(udg_hash_1, h_0, 2, ef_0)
	set ef_0 = null
	set ef_0 = AddSpecialEffect("Abilities\\Spells\\Items\\VampiricPotion\\VampPotionCaster.mdl", x_0 + radius_0 * Cos(360. * bj_DEGTORAD_1), y_0 + radius_0 * Sin(360. * bj_DEGTORAD_1))
	call SaveEffectHandle(udg_hash_1, h_0, 3, ef_0)
	set ef_0 = null
	call TimerStart(t_0, 1.2, false, function Trig_Blood_Absorption_Destroy_Effects_Actions)
	call SetUnitState(caster_0, UNIT_STATE_LIFE_1, GetUnitState(caster_0, UNIT_STATE_LIFE_1) + heal_0)
	call GroupEnumUnitsInRange(g_0, x_0, y_0, radius_0, null)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if IsUnitEnemy(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
			call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl", Picked_0, "chest"))
			call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodSorceress.mdl", Picked_0, "chest"))
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\VampiricPotion\\VampPotionCaster.mdl", Picked_0, "origin"))
			call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_MELEE_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
			call SetUnitState(caster_0, UNIT_STATE_LIFE_1, GetUnitState(caster_0, UNIT_STATE_LIFE_1) + damage_0 / 2)
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set caster_0 = null
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set p_0 = null
endfunction

function Trig_Blood_Absorption_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0GQ'
endfunction

function InitTrig_Blood_Absorption takes nothing returns nothing
	local integer index = 0
	set gg_trg_Blood_Absorption_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Blood_Absorption_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Blood_Absorption_1, Condition(function Trig_Blood_Absorption_Conditions))
	call TriggerAddAction(gg_trg_Blood_Absorption_1, function Trig_Blood_Absorption_Actions)
endfunction

function Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Conditions takes nothing returns boolean
	return (udg_Nomer_samoi_volni_1 == 9)
endfunction

function Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func002C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0ES', GetTriggerUnit()) > 0) and (GetRandomInt(1, 3) == 1) and (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func003C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0ES', GetAttacker()) > 0) and (GetRandomInt(1, 3) == 1) and (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func004C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0FJ', GetTriggerUnit()) > 0) and (GetRandomInt(1, 3) == 4) and (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func005C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0FJ', GetAttacker()) > 0) and (GetRandomInt(1, 3) == 4) and (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func006C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0GK', GetTriggerUnit()) > 0) and (GetRandomInt(1, 5) == 1) and (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func007C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0GK', GetAttacker()) > 0) and (GetRandomInt(1, 2) == 1) and (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func008C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0GQ', GetTriggerUnit()) > 0) and (GetRandomInt(1, 3) == 1) and (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func009C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0GQ', GetAttacker()) > 0) and (GetRandomInt(1, 3) == 1) and (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Actions takes nothing returns nothing
	if (Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func002C()) then
		call IssueTargetOrderById(GetTriggerUnit(), $D00DE, GetAttacker())
	endif
	if (Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func003C()) then
		call IssueTargetOrderById(GetAttacker(), $D00DE, GetTriggerUnit())
	endif
	if (Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func004C()) then
		call IssueTargetOrderById(GetTriggerUnit(), $D0079, GetAttacker())
	endif
	if (Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func005C()) then
		call IssueTargetOrderById(GetAttacker(), $D0079, GetTriggerUnit())
	endif
	if (Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func006C()) then
		call IssueTargetOrderById(GetTriggerUnit(), $D0079, GetAttacker())
	endif
	if (Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func007C()) then
		call IssueTargetOrderById(GetAttacker(), $D0079, GetTriggerUnit())
	endif
	if (Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func008C()) then
		call IssueImmediateOrderById(GetTriggerUnit(), $D0080)
	endif
	if (Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Func009C()) then
		call IssueImmediateOrderById(GetAttacker(), $D0080)
	endif
endfunction

function InitTrig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u takes nothing returns nothing
	set gg_trg_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_1 = CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(gg_trg_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_1, EVENT_PLAYER_UNIT_ATTACKED_1)
	call TriggerAddCondition(gg_trg_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_1, Condition(function Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Conditions))
	call TriggerAddAction(gg_trg_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_1, function Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Actions)
endfunction

function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Conditions takes nothing returns boolean
	return (udg_Nomer_samoi_volni_1 == 9)
endfunction

function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002001002 takes nothing returns boolean
	return (IsPlayerInForce(GetOwningPlayer(GetFilterUnit()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001Func001002001003001 takes nothing returns boolean
	return (IsUnitAliveBJ(GetFilterUnit()))
endfunction

function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001Func001002001003002001 takes nothing returns boolean
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE_1) == false) != null
endfunction

function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001Func001002001003002002 takes nothing returns boolean
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())))
endfunction

function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001Func001002001003002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001Func001002001003002001(), Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001Func001002001003002002())
endfunction

function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001Func001002001003 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001Func001002001003001(), Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001Func001002001003002())
endfunction

function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001Func002C takes nothing returns boolean
	return (udg_Temp_Unit_1 != null)
endfunction

function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0GF', GetEnumUnit()) > 0) and (GetRandomInt(1, 1) == 1)
endfunction

function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003001001 takes nothing returns boolean
	return (IsUnitAliveBJ(GetFilterUnit()))
endfunction

function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003001002 takes nothing returns boolean
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE_1) == false) != null
endfunction

function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003001001(), Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003001002())
endfunction

function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003002001 takes nothing returns boolean
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE_1) == false) != null
endfunction

function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003002002 takes nothing returns boolean
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())))
endfunction

function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003002001(), Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003002002())
endfunction

function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003001(), Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003002())
endfunction

function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func002C takes nothing returns boolean
	return (udg_Temp_Unit_1 != null)
endfunction

function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0GM', GetEnumUnit()) > 0) and (GetRandomInt(1, 1) == 1)
endfunction

function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003001001 takes nothing returns boolean
	return (IsUnitAliveBJ(GetFilterUnit()))
endfunction

function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003001002 takes nothing returns boolean
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE_1) == false) != null
endfunction

function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003001 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003001001(), Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003001002())
endfunction

function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003002001 takes nothing returns boolean
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE_1) == false) != null
endfunction

function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003002002 takes nothing returns boolean
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())))
endfunction

function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003002001(), Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003002002())
endfunction

function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003001(), Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003002())
endfunction

function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func002C takes nothing returns boolean
	return (udg_Temp_Unit_1 != null)
endfunction

function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0GI', GetEnumUnit()) > 0) and (GetRandomInt(1, 1) == 1)
endfunction

function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002A takes nothing returns nothing
	if (Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001C()) then
		set udg_Temp_Unit_1 = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(1200., GetUnitLoc(GetEnumUnit()), Condition(function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001Func001002001003)))
		if (Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func001Func002C()) then
			call IssueTargetOrderById(GetEnumUnit(), $D0296, udg_Temp_Unit_1)
		endif
	endif
	if (Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002C()) then
		set udg_Temp_Unit_1 = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(1000., GetUnitLoc(GetEnumUnit()), Condition(function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func001002001003)))
		if (Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func002Func002C()) then
			call IssueTargetOrderById(GetEnumUnit(), $D010E, udg_Temp_Unit_1)
		endif
	endif
	if (Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003C()) then
		set udg_Temp_Unit_1 = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(1200., GetUnitLoc(GetEnumUnit()), Condition(function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func001002001003)))
		if (Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002Func003Func002C()) then
			call IssueTargetOrderById(GetEnumUnit(), $D007D, udg_Temp_Unit_1)
		endif
	endif
endfunction

function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Actions takes nothing returns nothing
	call ForGroupBJ(GetUnitsInRectMatching(bj_mapInitialPlayableArea_1, Condition(function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002001002)), function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Func002A)
endfunction

function InitTrig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4 takes nothing returns nothing
	set gg_trg_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_1 = CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(gg_trg_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_1, 1.)
	call TriggerAddCondition(gg_trg_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_1, Condition(function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Conditions))
	call TriggerAddAction(gg_trg_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_1, function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Actions)
endfunction

function Trig_Hatred_of_fire_Conditions takes nothing returns boolean
	return (GetSpellAbilityId() == 'A0A0')
endfunction

function timeout11 takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit u = LoadUnitHandle(udg_hash_1, h_0, 40)
	call UnitRemoveAbility(u_0, 'A0GY')
	call DestroyTimer(t_0)
	call FlushChildHashtable(udg_hash_1, h_0)
	set t_0 = null
	set u_0 = null
endfunction

function Trig_Hatred_of_fire_Actions takes nothing returns nothing
	local unit u = GetSpellAbilityUnit()
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	call TimerStart(t_0, 12., false, function timeout11)
	call SaveUnitHandle(udg_hash_1, h_0, 40, u_0)
	set t_0 = null
	set u_0 = null
endfunction

function InitTrig_Hatred_of_fire takes nothing returns nothing
	set gg_trg_Hatred_of_fire_1 = CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(gg_trg_Hatred_of_fire_1, EVENT_PLAYER_UNIT_SPELL_EFFECT_1)
	call TriggerAddCondition(gg_trg_Hatred_of_fire_1, Condition(function Trig_Hatred_of_fire_Conditions))
	call TriggerAddAction(gg_trg_Hatred_of_fire_1, function Trig_Hatred_of_fire_Actions)
endfunction

function firess takes nothing returns boolean
	return (GetSpellAbilityId() == 'A0GZ') and GetUnitAbilityLevel(GetSpellAbilityUnit(), 'A0GZ') == 1
endfunction

function timeout15 takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local integer wait = LoadInteger(udg_hash_1, h_0, 42)
	local unit u = LoadUnitHandle(udg_hash_1, h_0, 41)
	local unit z = LoadUnitHandle(udg_hash_1, h_0, 43)
	local texttag txt
	if wait_0 > 0 and GetUnitAbilityLevel(u_0, 'A09Y') == 1 then
		set wait_0 = wait_0 - 1
		set txt_0 = CreateTextTagUnitBJ(I2S((1 * GetUnitAbilityLevel(u_0, 'A0GZ'))), u_0, 0, 16, 'd', $A, $A, 0)
		call SetTextTagPermanent(txt_0, false)
		call SetTextTagVelocityBJ(txt_0, 64, 90)
		call SetTextTagLifespan(txt_0, .6)
		call SaveInteger(udg_hash_1, h_0, 42, wait_0)
		call SetUnitAnimation(u_0, "Spell")
		call SetUnitAbilityLevel(u_0, 'A0GZ', GetUnitAbilityLevel(u_0, 'A0GZ') + 1)
	else
		call IssueTargetOrderById(u_0, $D02B6, z_0)
		call UnitRemoveAbility(u_0, 'A09Y')
		call PauseUnit(u_0, false)
		call SetUnitAnimation(u_0, "stand")
		call DestroyTimer(t_0)
		call FlushChildHashtable(udg_hash_1, h_0)
	endif
	set txt_0 = null
	set t_0 = null
	set u_0 = null
	set z_0 = null
endfunction

function fires takes nothing returns nothing
	local unit u = GetSpellAbilityUnit()
	local unit z = GetSpellTargetUnit()
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local integer wait = 4
	call PauseUnit(u_0, true)
	call TimerStart(t_0, .9, true, function timeout15)
	call SaveInteger(udg_hash_1, h_0, 42, wait_0)
	call SaveUnitHandle(udg_hash_1, h_0, 41, u_0)
	call SaveUnitHandle(udg_hash_1, h_0, 43, z_0)
	call UnitAddAbility(u_0, 'A09Y')
	set t_0 = null
	set u_0 = null
	set z_0 = null
endfunction

function InitTrig_set_fire takes nothing returns nothing
	set gg_trg_set_fire_1 = CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(gg_trg_set_fire_1, EVENT_PLAYER_UNIT_SPELL_EFFECT_1)
	call TriggerAddCondition(gg_trg_set_fire_1, Condition(function firess))
	call TriggerAddAction(gg_trg_set_fire_1, function fires)
endfunction

function firess2 takes nothing returns boolean
	return (GetSpellAbilityId() == 'A0GZ') and GetUnitAbilityLevel(GetSpellAbilityUnit(), 'A0GZ') > 1
endfunction

function timeout16 takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit u = LoadUnitHandle(udg_hash_1, h_0, 43)
	call SetUnitAbilityLevel(u_0, 'A0GZ', 1)
	call DestroyTimer(t_0)
	call FlushChildHashtable(udg_hash_1, h_0)
	set u_0 = null
	set t_0 = null
endfunction

function fires2 takes nothing returns nothing
	local unit u = GetSpellAbilityUnit()
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	call UnitRemoveAbility(u_0, 'A09Y')
	call SaveUnitHandle(udg_hash_1, h_0, 43, u_0)
	call TimerStart(t_0, .5, false, function timeout16)
	set u_0 = null
	set t_0 = null
endfunction

function InitTrig_set_fire_2 takes nothing returns nothing
	set gg_trg_set_fire_2_1 = CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(gg_trg_set_fire_2_1, EVENT_PLAYER_UNIT_SPELL_EFFECT_1)
	call TriggerAddCondition(gg_trg_set_fire_2_1, Condition(function firess2))
	call TriggerAddAction(gg_trg_set_fire_2_1, function fires2)
endfunction

function Trig_the_creation_of_the_image_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0HG'
endfunction

function timeout17 takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit u = LoadUnitHandle(udg_hash_1, h_0, 46)
	local unit dammi = LoadUnitHandle(udg_hash_1, h_0, 47)
	local unit dammi2
	local real x = LoadReal(udg_hash_1, h_0, 44)
	local real y = LoadReal(udg_hash_1, h_0, 45)
	local group g = CreateGroup()
	local unit Picked
	call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl", dammi_0, "origin"))
	call GroupEnumUnitsInRange(g_0, x_0, y_0, 380, null)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if IsUnitEnemy(Picked_0, GetOwningPlayer(u_0)) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false then
			call UnitDamageTargetBJ(u_0, Picked_0, ($C8), ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_NORMAL_1)
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl", Picked_0, "origin"))
		else
			if IsUnitAlly(Picked_0, GetOwningPlayer(u_0)) and GetUnitTypeId(Picked_0) == 'n01D' and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 then
				set dammi2_0 = CreateUnit(GetOwningPlayer(u_0), 'h013', x_0, y_0, 0)
				call UnitAddAbility(dammi2_0, 'A0HI')
				call UnitApplyTimedLife(dammi2_0, 'BTLF', 1.)
				call IssueTargetOrderById(dammi2_0, $D0062, Picked_0)
			endif
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	call SetUnitTimeScalePercent(dammi_0, 'd')
	call KillUnit(dammi_0)
	call DestroyGroup(g_0)
	call DestroyTimer(t_0)
	call FlushChildHashtable(udg_hash_1, h_0)
	set g_0 = null
	set dammi_0 = null
	set dammi2_0 = null
	set Picked_0 = null
	set u_0 = null
	set t_0 = null
endfunction

function Trig_the_creation_of_the_image_Actions takes nothing returns nothing
	local unit u = GetSpellAbilityUnit()
	local location locs = GetSpellTargetLoc()
	local real x = GetLocationX(locs_0)
	local real y = GetLocationY(locs_0)
	local unit dammi = CreateUnit(GetOwningPlayer(u_0), 'n00I', x_0, y_0, GetUnitFacing(u_0))
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	call UnitAddAbility(dammi_0, 'Aloc')
	call TimerStart(t_0, 2.07, false, function timeout17)
	call SaveReal(udg_hash_1, h_0, 44, x_0)
	call SaveReal(udg_hash_1, h_0, 45, y_0)
	call SaveUnitHandle(udg_hash_1, h_0, 46, u_0)
	call SaveUnitHandle(udg_hash_1, h_0, 47, dammi_0)
	call SetUnitVertexColor(dammi_0, $FF, $FF, $FF, 90)
	call SetUnitTimeScalePercent(dammi_0, 80)
	call PauseUnit(dammi_0, true)
	call UnitApplyTimedLife(dammi_0, 'BTLF', 1.85)
	call SetUnitAnimation(dammi_0, "Spell Slam")
	set dammi_0 = null
	set u_0 = null
	call RemoveLocation(locs_0)
	set locs_0 = null
	set t_0 = null
endfunction

function InitTrig_the_creation_of_the_image takes nothing returns nothing
	set gg_trg_the_creation_of_the_image_1 = CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(gg_trg_the_creation_of_the_image_1, EVENT_PLAYER_UNIT_SPELL_EFFECT_1)
	call TriggerAddCondition(gg_trg_the_creation_of_the_image_1, Condition(function Trig_the_creation_of_the_image_Conditions))
	call TriggerAddAction(gg_trg_the_creation_of_the_image_1, function Trig_the_creation_of_the_image_Actions)
endfunction

function Trig_fiery_explosions_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0HK'
endfunction

function timeout18 takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local integer wait = LoadInteger(udg_hash_1, h_0, 50)
	local unit u = LoadUnitHandle(udg_hash_1, h_0, 48)
	local unit j = LoadUnitHandle(udg_hash_1, h_0, 49)
	local real x = GetUnitX(j_0)
	local real y = GetUnitY(j_0)
	local group g = CreateGroup()
	local unit Picked
	if GetUnitState(j_0, UNIT_STATE_LIFE_1) > .0 then
		call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Incinerate\\FireLordDeathExplode.mdl", x_0, y_0))
	endif
	call GroupEnumUnitsInRange(g_0, x_0, y_0, 300, null)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if IsUnitEnemy(Picked_0, GetOwningPlayer(u_0)) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false then
			call UnitDamageTargetBJ(u_0, Picked_0, (80), ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_NORMAL_1)
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	call DestroyGroup(g_0)
	if wait_0 < 0 then
		call DestroyTimer(t_0)
		call UnitRemoveAbility(j_0, 'B03J')
		call FlushChildHashtable(udg_hash_1, h_0)
	else
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 50, wait_0)
	endif
	set t_0 = null
	set g_0 = null
	set Picked_0 = null
	set u_0 = null
	set j_0 = null
endfunction

function Trig_fiery_explosions_Actions takes nothing returns nothing
	local unit u = GetSpellAbilityUnit()
	local unit j = GetSpellTargetUnit()
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local integer wait = GetRandomInt(3, 8)
	call TimerStart(t_0, 1., true, function timeout18)
	call SaveUnitHandle(udg_hash_1, h_0, 48, u_0)
	call SaveUnitHandle(udg_hash_1, h_0, 49, j_0)
	call SaveInteger(udg_hash_1, h_0, 50, wait_0)
	set u_0 = null
	set j_0 = null
	set t_0 = null
endfunction

function InitTrig_fiery_explosions takes nothing returns nothing
	set gg_trg_fiery_explosions_1 = CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(gg_trg_fiery_explosions_1, EVENT_PLAYER_UNIT_SPELL_EFFECT_1)
	call TriggerAddCondition(gg_trg_fiery_explosions_1, Condition(function Trig_fiery_explosions_Conditions))
	call TriggerAddAction(gg_trg_fiery_explosions_1, function Trig_fiery_explosions_Actions)
endfunction

function Trig_Breathoffire_Periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local unit dammi = LoadUnitHandle(udg_hash_1, h_0, 2)
	local real xt = LoadReal(udg_hash_1, h_0, 3)
	local real yt = LoadReal(udg_hash_1, h_0, 4)
	local boolean first = LoadBoolean(udg_hash_1, h_0, 5)
	local integer order = GetUnitCurrentOrder(caster_0)
	local integer orderId
	set orderId_0 = $D0278
	if (orderId_0 != 0) then
	else
		set orderId_0 = UnitId("channel")
		if (orderId_0 != 0) then
		endif
	endif
	if order_0 == orderId_0 then
		call IssuePointOrderById(dammi_0, $D0264, xt_0, yt_0)
		if first_0 then
			set first_0 = false
			call SaveBoolean(udg_hash_1, h_0, 5, first_0)
			call TimerStart(t_0, 1., true, function Trig_Breathoffire_Periodic_Actions)
		endif
	else
		call RemoveUnit(dammi_0)
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set caster_0 = null
	set dammi_0 = null
endfunction

function Trig_Breathoffire_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local location loc
	local real xt
	local real yt
	local unit target = GetSpellTargetUnit()
	local real angle
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local unit dammi
	local boolean first = true
	if target_0 != null then
		set xt_0 = GetUnitX(target_0)
		set yt_0 = GetUnitY(target_0)
	else
		set loc_0 = GetSpellTargetLoc()
		set xt_0 = GetLocationX(loc_0)
		set yt_0 = GetLocationY(loc_0)
	endif
	set angle_0 = bj_RADTODEG_1 * Atan2(yt_0 - y_0, xt_0 - x_0)
	call SetUnitFacing(caster_0, angle_0)
	set dammi_0 = CreateUnit(GetOwningPlayer(caster_0), 'h00U', x_0 + 50. * Cos(angle_0 * bj_DEGTORAD_1), y_0 + 50. * Sin(angle_0 * bj_DEGTORAD_1), angle_0)
	call UnitAddAbility(dammi_0, 'A0HM')
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveUnitHandle(udg_hash_1, h_0, 2, dammi_0)
	call SaveReal(udg_hash_1, h_0, 3, xt_0)
	call SaveReal(udg_hash_1, h_0, 4, yt_0)
	call SaveBoolean(udg_hash_1, h_0, 5, first_0)
	call TimerStart(t_0, .04, true, function Trig_Breathoffire_Periodic_Actions)
	set caster_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set target_0 = null
	set t_0 = null
	set dammi_0 = null
endfunction

function Trig_Breathoffire_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0HL'
endfunction

function InitTrig_Breathoffire takes nothing returns nothing
	local integer index = 0
	set gg_trg_Breathoffire_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Breathoffire_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Breathoffire_1, Condition(function Trig_Breathoffire_Conditions))
	call TriggerAddAction(gg_trg_Breathoffire_1, function Trig_Breathoffire_Actions)
endfunction

function Trig_Fire_Explosions_Periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local real xt = LoadReal(udg_hash_1, h_0, 2)
	local real yt = LoadReal(udg_hash_1, h_0, 3)
	local real damage = LoadReal(udg_hash_1, h_0, 4)
	local integer order = GetUnitCurrentOrder(caster_0)
	local player p = GetOwningPlayer(caster_0)
	local real xnew
	local real ynew
	local unit dammi
	local integer orderId
	local group g
	local unit Picked
	set orderId_0 = $D0278
	if (orderId_0 != 0) then
	else
		set orderId_0 = UnitId("channel")
		if (orderId_0 != 0) then
		endif
	endif
	if order_0 == orderId_0 then
		set xnew_0 = xt_0 + GetRandomReal(-400., 400.)
		set ynew_0 = yt_0 + GetRandomReal(-400., 400.)
		call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl", xnew_0, ynew_0))
		set g_0 = CreateGroup()
		call GroupEnumUnitsInRange(g_0, xnew_0, ynew_0, 200., null)
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 and IsUnitEnemy(Picked_0, p_0) and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
				call StunUnitTimed(Picked_0, 1.5)
				set dammi_0 = CreateUnit(GetOwningPlayer(caster_0), 'h00U', xnew_0, ynew_0, 270.)
				call UnitAddAbility(dammi_0, 'A0HR')
				call UnitApplyTimedLife(dammi_0, 'BTLF', 1.5)
				call IssueTargetOrderById(dammi_0, $D02B6, Picked_0)
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosDone.mdl ", Picked_0, "chest"))
				set dammi_0 = null
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
	else
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set p_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set Picked_0 = null
	set t_0 = null
	set caster_0 = null
	set dammi_0 = null
endfunction

function Trig_Fire_Explosions_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local location loc = GetSpellTargetLoc()
	local real xt = GetLocationX(loc_0)
	local real yt = GetLocationY(loc_0)
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local real damage = 225.
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveReal(udg_hash_1, h_0, 2, xt_0)
	call SaveReal(udg_hash_1, h_0, 3, yt_0)
	call SaveReal(udg_hash_1, h_0, 4, damage_0)
	call TimerStart(t_0, .2, true, function Trig_Fire_Explosions_Periodic_Actions)
	set caster_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set t_0 = null
endfunction

function Trig_Fire_Explosions_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0HQ'
endfunction

function InitTrig_Fire_Explosions takes nothing returns nothing
	local integer index = 0
	set gg_trg_Fire_Explosions_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Fire_Explosions_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Fire_Explosions_1, Condition(function Trig_Fire_Explosions_Conditions))
	call TriggerAddAction(gg_trg_Fire_Explosions_1, function Trig_Fire_Explosions_Actions)
endfunction

function Trig_BossStomp_Remove_DisArmor_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local group gdamage = LoadGroupHandle(udg_hash_1, h_0, 1)
	local unit Picked
	loop
		set Picked_0 = FirstOfGroup(gdamage_0)
		exitwhen Picked_0 == null
		call SetArmorAbilityLevel(Picked_0, 16)
		call GroupRemoveUnit(gdamage_0, Picked_0)
	endloop
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
	call GroupClear(gdamage_0)
	call DestroyGroup(gdamage_0)
	set gdamage_0 = null
	set Picked_0 = null
endfunction

function Trig_BossStomp_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local real radius = 400.
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local real damage = 250.
	local player p = GetOwningPlayer(caster_0)
	local group g = CreateGroup()
	local group gdamage = CreateGroup()
	local unit Picked
	local real dist
	local real angle
	call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", x_0, y_0))
	call GroupEnumUnitsInRange(g_0, x_0, y_0, radius_0, null)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 and IsUnitEnemy(Picked_0, p_0) and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
			call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
			call StunUnitTimed(Picked_0, 1.75)
			set dist_0 = SquareRoot((GetUnitX(Picked_0) - x_0) * (GetUnitX(Picked_0) - x_0) + (GetUnitY(Picked_0) - y_0) * (GetUnitY(Picked_0) - y_0))
			set angle_0 = bj_RADTODEG_1 * Atan2(GetUnitY(Picked_0) - y_0, GetUnitX(Picked_0) - x_0)
			call MoveUnit(Picked_0, (400. - dist_0) / 400. + .25, (600. - dist_0), .0, angle_0, .0, false)
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl", Picked_0, "head"))
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl", Picked_0, "origin"))
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl", Picked_0, "hand,left"))
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl", Picked_0, "hand,right"))
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Incinerate\\FireLordDeathExplode.mdl", Picked_0, "chest"))
			call SetArmorAbilityLevel(Picked_0, -16)
			call GroupAddUnit(gdamage_0, Picked_0)
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	call SaveGroupHandle(udg_hash_1, h_0, 1, gdamage_0)
	call TimerStart(t_0, 12., false, function Trig_BossStomp_Remove_DisArmor_Actions)
	set caster_0 = null
	set t_0 = null
	set p_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set gdamage_0 = null
	set Picked_0 = null
endfunction

function Trig_BossStomp_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0HS'
endfunction

function InitTrig_BossStomp takes nothing returns nothing
	local integer index = 0
	set gg_trg_BossStomp_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_BossStomp_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_BossStomp_1, Condition(function Trig_BossStomp_Conditions))
	call TriggerAddAction(gg_trg_BossStomp_1, function Trig_BossStomp_Actions)
endfunction

function Trig_Mark_of_Fire_Periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local unit dammi = LoadUnitHandle(udg_hash_1, h_0, 2)
	local effect ef
	local integer wait = LoadInteger(udg_hash_1, h_0, 4)
	local group g
	local unit Picked
	local player p
	local real scale
	local real x
	local real y
	if wait_0 > 0 then
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 4, wait_0)
		set scale_0 = 1. + ('d' - wait_0) * .015
		call SetUnitScale(dammi_0, scale_0, scale_0, 1.)
	else
		set g_0 = CreateGroup()
		set p_0 = GetOwningPlayer(caster_0)
		set x_0 = GetUnitX(dammi_0)
		set y_0 = GetUnitY(dammi_0)
		call GroupEnumUnitsInRange(g_0, x_0, y_0, 250., null)
		call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl", x_0 + 100. * Cos(120. * bj_DEGTORAD_1), y_0 + 100. * Sin(120. * bj_DEGTORAD_1)))
		call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl", x_0 + 100. * Cos(240. * bj_DEGTORAD_1), y_0 + 100. * Sin(240. * bj_DEGTORAD_1)))
		call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl", x_0 + 100. * Cos(360. * bj_DEGTORAD_1), y_0 + 100. * Sin(360. * bj_DEGTORAD_1)))
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 and IsUnitEnemy(Picked_0, p_0) and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call UnitDamageTarget(caster_0, Picked_0, GetUnitState(Picked_0, UNIT_STATE_MAX_LIFE_1) / 2, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosDone.mdl ", Picked_0, "chest"))
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		call GroupClear(g_0)
		call DestroyGroup(g_0)
		set g_0 = null
		set p_0 = null
		set Picked_0 = null
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 3)
		call DestroyEffect(ef_0)
		set ef_0 = null
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 5)
		call DestroyEffect(ef_0)
		set ef_0 = null
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 6)
		call DestroyEffect(ef_0)
		set ef_0 = null
		call RemoveUnit(dammi_0)
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set caster_0 = null
	set dammi_0 = null
endfunction

function Trig_Mark_of_Fire_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local location loc = GetSpellTargetLoc()
	local real xt = GetLocationX(loc_0)
	local real yt = GetLocationY(loc_0)
	local unit dammi = CreateUnit(GetOwningPlayer(caster_0), 'h00U', xt_0, yt_0, 270.)
	local effect ef
	local integer wait = $85
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveUnitHandle(udg_hash_1, h_0, 2, dammi_0)
	call SaveInteger(udg_hash_1, h_0, 4, wait_0)
	set ef_0 = AddSpecialEffectTarget("Abilities\\Spells\\Other\\Doom\\DoomTarget.mdl", dammi_0, "origin")
	call SaveEffectHandle(udg_hash_1, h_0, 3, ef_0)
	set ef_0 = null
	set ef_0 = AddSpecialEffectTarget("Abilities\\Spells\\Other\\Doom\\DoomTarget.mdl", dammi_0, "origin")
	call SaveEffectHandle(udg_hash_1, h_0, 5, ef_0)
	set ef_0 = null
	set ef_0 = AddSpecialEffectTarget("Abilities\\Spells\\Other\\Doom\\DoomTarget.mdl", dammi_0, "origin")
	call SaveEffectHandle(udg_hash_1, h_0, 6, ef_0)
	set ef_0 = null
	call TimerStart(t_0, .03, true, function Trig_Mark_of_Fire_Periodic_Actions)
	set caster_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set dammi_0 = null
	set ef_0 = null
	set t_0 = null
endfunction

function Trig_Mark_of_Fire_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0HT'
endfunction

function InitTrig_Mark_of_Fire takes nothing returns nothing
	local integer index = 0
	set gg_trg_Mark_of_Fire_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Mark_of_Fire_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Mark_of_Fire_1, Condition(function Trig_Mark_of_Fire_Conditions))
	call TriggerAddAction(gg_trg_Mark_of_Fire_1, function Trig_Mark_of_Fire_Actions)
endfunction

function Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Conditions takes nothing returns boolean
	return (udg_Nomer_samoi_volni_1 == $A)
endfunction

function Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func002C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0A0', GetTriggerUnit()) > 0) and (GetRandomInt(1, 2) == 1) and (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func003C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0A0', GetAttacker()) > 0) and (GetRandomInt(1, 2) == 1) and (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func004C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0HL', GetTriggerUnit()) > 0) and (GetRandomInt(1, 3) == 1) and (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func005C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0HL', GetAttacker()) > 0) and (GetRandomInt(1, 2) == 1) and (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func006C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0HP', GetTriggerUnit()) > 0) and (GetRandomInt(1, 2) == 1) and (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func007C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0HP', GetAttacker()) > 0) and (GetRandomInt(1, 3) == 1) and (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func008C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0HT', GetTriggerUnit()) > 0) and (GetRandomInt(1, 2) == 1) and (IsPlayerInForce(GetOwningPlayer(GetTriggerUnit()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func009C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0HT', GetAttacker()) > 0) and (GetRandomInt(1, 2) == 1) and (IsPlayerInForce(GetOwningPlayer(GetAttacker()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Actions takes nothing returns nothing
	if (Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func002C()) then
		call IssueImmediateOrderById(GetTriggerUnit(), $D00C4)
	endif
	if (Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func003C()) then
		call IssueImmediateOrderById(GetAttacker(), $D00C4)
	endif
	if (Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func004C()) then
		call IssueTargetOrderById(GetTriggerUnit(), $D0278, GetAttacker())
	endif
	if (Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func005C()) then
		call IssueTargetOrderById(GetAttacker(), $D0278, GetTriggerUnit())
	endif
	if (Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func006C()) then
		call IssueTargetOrderById(GetTriggerUnit(), $D02BC, GetAttacker())
	endif
	if (Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func007C()) then
		call IssueTargetOrderById(GetAttacker(), $D02BC, GetTriggerUnit())
	endif
	if (Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func008C()) then
		call IssuePointOrderById(GetTriggerUnit(), $D00EA, GetUnitX(GetAttacker()), GetUnitY(GetAttacker()))
	endif
	if (Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Func009C()) then
		call IssuePointOrderById(GetAttacker(), $D00EA, GetUnitX(GetTriggerUnit()), GetUnitY(GetTriggerUnit()))
	endif
endfunction

function InitTrig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire takes nothing returns nothing
	set gg_trg_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_1 = CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(gg_trg_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_1, EVENT_PLAYER_UNIT_ATTACKED_1)
	call TriggerAddCondition(gg_trg_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_1, Condition(function Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Conditions))
	call TriggerAddAction(gg_trg_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_1, function Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Actions)
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Conditions takes nothing returns boolean
	return (udg_Nomer_samoi_volni_1 == $A)
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002001002 takes nothing returns boolean
	return (IsPlayerInForce(GetOwningPlayer(GetFilterUnit()), udg_Players_Enemy_Group_1))
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func001Func001002001003001 takes nothing returns boolean
	return (IsUnitAliveBJ(GetFilterUnit()))
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func001Func001002001003002001 takes nothing returns boolean
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE_1) == false) != null
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func001Func001002001003002002 takes nothing returns boolean
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())))
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func001Func001002001003002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func001Func001002001003002001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func001Func001002001003002002())
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func001Func001002001003 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func001Func001002001003001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func001Func001002001003002())
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func001C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0GZ', GetEnumUnit()) > 0) and (GetRandomInt(1, 2) == 3)
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002Func001002001003001 takes nothing returns boolean
	return (IsUnitAliveBJ(GetFilterUnit()))
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002Func001002001003002001 takes nothing returns boolean
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE_1) == false) != null
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002Func001002001003002002 takes nothing returns boolean
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())))
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002Func001002001003002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002Func001002001003002001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002Func001002001003002002())
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002Func001002001003 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002Func001002001003001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002Func001002001003002())
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002Func002C takes nothing returns boolean
	return (udg_Temp_Unit_1 != null)
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0HH', GetEnumUnit()) > 0) and (GetRandomInt(1, 2) == 1)
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003Func003002001003001 takes nothing returns boolean
	return (IsUnitAliveBJ(GetFilterUnit()))
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003Func003002001003002001 takes nothing returns boolean
	return (GetUnitTypeId(GetFilterUnit()) == 'n01D')
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003Func003002001003002002 takes nothing returns boolean
	return (IsPlayerAlly(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())))
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003Func003002001003002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003Func003002001003002001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003Func003002001003002002())
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003Func003002001003 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003Func003002001003001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003Func003002001003002())
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003Func004C takes nothing returns boolean
	return (udg_Temp_Unit_1 != null)
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0HG', GetEnumUnit()) > 0) and (GetRandomInt(1, 2) == 1)
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func004Func003002001003001 takes nothing returns boolean
	return (IsUnitAliveBJ(GetFilterUnit()))
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func004Func003002001003002 takes nothing returns boolean
	return (IsPlayerAlly(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())))
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func004Func003002001003 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func004Func003002001003001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func004Func003002001003002())
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func004Func004C takes nothing returns boolean
	return (udg_Temp_Unit_1 != null)
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func004C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0HJ', GetEnumUnit()) > 0) and (GetRandomInt(1, 2) == 1)
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func005Func001002001003001 takes nothing returns boolean
	return (IsUnitAliveBJ(GetFilterUnit()))
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func005Func001002001003002001 takes nothing returns boolean
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE_1) == false) != null
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func005Func001002001003002002 takes nothing returns boolean
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())))
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func005Func001002001003002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func005Func001002001003002001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func005Func001002001003002002())
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func005Func001002001003 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func005Func001002001003001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func005Func001002001003002())
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func005C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0HO', GetEnumUnit()) > 0) and (GetRandomInt(1, 2) == 3)
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func006Func001002001003001 takes nothing returns boolean
	return (IsUnitAliveBJ(GetFilterUnit()))
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func006Func001002001003002001 takes nothing returns boolean
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE_1) == false) != null
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func006Func001002001003002002 takes nothing returns boolean
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())))
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func006Func001002001003002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func006Func001002001003002001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func006Func001002001003002002())
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func006Func001002001003 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func006Func001002001003001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func006Func001002001003002())
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func006C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0HQ', GetEnumUnit()) > 0) and (GetRandomInt(1, 2) == 1)
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007Func001002001003001 takes nothing returns boolean
	return (IsUnitAliveBJ(GetFilterUnit()))
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007Func001002001003002001 takes nothing returns boolean
	return (IsUnitType(GetFilterUnit(), UNIT_TYPE_MAGIC_IMMUNE_1) == false) != null
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007Func001002001003002002 takes nothing returns boolean
	return (IsPlayerEnemy(GetOwningPlayer(GetFilterUnit()), GetOwningPlayer(GetEnumUnit())))
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007Func001002001003002 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007Func001002001003002001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007Func001002001003002002())
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007Func001002001003 takes nothing returns boolean
	return GetBooleanAnd(Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007Func001002001003001(), Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007Func001002001003002())
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007Func002C takes nothing returns boolean
	return (udg_Temp_Unit_1 != null)
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007C takes nothing returns boolean
	return (GetUnitAbilityLevelSwapped('A0HS', GetEnumUnit()) > 0) and (GetRandomInt(1, 2) == 1)
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002A takes nothing returns nothing
	if (Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func001C()) then
		set udg_Temp_Unit_1 = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(600., GetUnitLoc(GetEnumUnit()), Condition(function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func001Func001002001003)))
		call IssueTargetOrderById(GetEnumUnit(), $D02B6, udg_Temp_Unit_1)
	endif
	if (Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002C()) then
		set udg_Temp_Unit_1 = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(800., GetUnitLoc(GetEnumUnit()), Condition(function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002Func001002001003)))
		if (Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func002Func002C()) then
			call IssueImmediateOrderById(GetEnumUnit(), $D0081)
		endif
	endif
	if (Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003C()) then
		set udg_Temp_Unit_1 = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(700., GetUnitLoc(GetEnumUnit()), Condition(function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003Func003002001003)))
		if (Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func003Func004C()) then
			call IssuePointOrderById(GetEnumUnit(), $D00FA, GetUnitX(udg_Temp_Unit_1), GetUnitY(udg_Temp_Unit_1))
		endif
	endif
	if (Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func004C()) then
		set udg_Temp_Unit_1 = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(700., GetUnitLoc(GetEnumUnit()), Condition(function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func004Func003002001003)))
		if (Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func004Func004C()) then
			call IssueTargetOrderById(GetEnumUnit(), $D0062, udg_Temp_Unit_1)
		endif
	endif
	if (Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func005C()) then
		set udg_Temp_Unit_1 = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(900., GetUnitLoc(GetEnumUnit()), Condition(function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func005Func001002001003)))
		call IssueTargetOrderById(GetEnumUnit(), $D0255, udg_Temp_Unit_1)
	endif
	if (Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func006C()) then
		set udg_Temp_Unit_1 = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(900., GetUnitLoc(GetEnumUnit()), Condition(function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func006Func001002001003)))
		call IssueTargetOrderById(GetEnumUnit(), $D0278, udg_Temp_Unit_1)
	endif
	if (Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007C()) then
		set udg_Temp_Unit_1 = GroupPickRandomUnit(GetUnitsInRangeOfLocMatching(300., GetUnitLoc(GetEnumUnit()), Condition(function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007Func001002001003)))
		if (Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002Func007Func002C()) then
			call IssueImmediateOrderById(GetEnumUnit(), $D0105)
		endif
	endif
endfunction

function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Actions takes nothing returns nothing
	call ForGroupBJ(GetUnitsInRectMatching(bj_mapInitialPlayableArea_1, Condition(function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002001002)), function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Func002A)
endfunction

function InitTrig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp takes nothing returns nothing
	set gg_trg_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_1 = CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(gg_trg_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_1, 1.)
	call TriggerAddCondition(gg_trg_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_1, Condition(function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Conditions))
	call TriggerAddAction(gg_trg_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_1, function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Actions)
endfunction

function Trig_Power_of_Skeletons_Remove_Bonuses_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local integer damagebonus = LoadInteger(udg_hash_1, h_0, 1)
	local integer asbonus = LoadInteger(udg_hash_1, h_0, 2)
	local integer regenbonus = LoadInteger(udg_hash_1, h_0, 3)
	local unit target = LoadUnitHandle(udg_hash_1, h_0, 4)
	call SetAttackAbilityLevel(target_0, -damagebonus_0)
	call SetAttackSpeedAbilityLevel(target_0, -asbonus_0)
	call SetUnitLifeAndManaRegeneration(target_0, "life", -regenbonus_0)
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
	set target_0 = null
endfunction

function Trig_Power_of_Skeletons_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local unit target = GetSpellTargetUnit()
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0B6')
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local real time = 14.
	local integer damagebonus = $A + 5 * lvl_0
	local integer asbonus = $F + 5 * lvl_0
	local integer regenbonus = 3 + 5 * lvl_0
	if IsUnitType(target_0, UNIT_TYPE_HERO_1) then
		set damagebonus_0 = $F + $A * lvl_0
		set asbonus_0 = 20 + $A * lvl_0
	endif
	call SetAttackAbilityLevel(target_0, damagebonus_0)
	call SetAttackSpeedAbilityLevel(target_0, asbonus_0)
	call SetUnitLifeAndManaRegeneration(target_0, "life", regenbonus_0)
	call SaveInteger(udg_hash_1, h_0, 1, damagebonus_0)
	call SaveInteger(udg_hash_1, h_0, 2, asbonus_0)
	call SaveInteger(udg_hash_1, h_0, 3, regenbonus_0)
	call SaveUnitHandle(udg_hash_1, h_0, 4, target_0)
	call TimerStart(t_0, time_0, false, function Trig_Power_of_Skeletons_Remove_Bonuses_Actions)
	set caster_0 = null
	set target_0 = null
	set t_0 = null
endfunction

function Trig_Power_of_Skeletons_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0B6'
endfunction

function InitTrig_Power_of_Skeletons takes nothing returns nothing
	local integer index = 0
	set gg_trg_Power_of_Skeletons_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Power_of_Skeletons_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Power_of_Skeletons_1, Condition(function Trig_Power_of_Skeletons_Conditions))
	call TriggerAddAction(gg_trg_Power_of_Skeletons_1, function Trig_Power_of_Skeletons_Actions)
endfunction

function Trig_Water_Elemental_Load_Actions takes nothing returns nothing
	call AbilityPreload('A071', 6)
	call AbilityPreload('A072', 6)
	call AbilityPreload('A06Z', 6)
	call AbilityPreload('A078', 3)
	call AbilityPreload('A06V', 6)
	call AbilityPreload('A06X', 1)
	call AbilityPreload('A07L', 1)
	call AbilityPreload('A07K', 1)
	call AbilityPreload('A07J', 1)
	call EffectPreload("war3mapImported\\s_WateryAura.mdx")
	call EffectPreload("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl")
	call EffectPreload("war3mapImported\\AquaSpike.mdx")
	call EffectPreload("Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveDamage.mdl")
	call EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodFootman.mdl")
	call UnitPreload('h017')
	call UnitPreload('h01D')
	call UnitPreload('h01E')
	call UnitPreload('h01F')
	call UnitPreload('h01G')
	call UnitPreload('h01H')
	call EnableTrigger(gg_trg_spirits_of_water_dead_1)
	call EnableTrigger(gg_trg_Skill_Gertva_1)
	call EnableTrigger(gg_trg_Opening_Streams_1)
	call EnableTrigger(gg_trg_Tsunami_1)
	call EnableTrigger(gg_trg_Water_Explosion_1)
endfunction

function InitTrig_Water_Elemental_Load takes nothing returns nothing
	set gg_trg_Water_Elemental_Load_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Water_Elemental_Load_1, function Trig_Water_Elemental_Load_Actions)
endfunction

function Trig_Init_kreeps_Actions takes nothing returns nothing
	set udg_spirits_of_water_1[1] = 'h017'
	set udg_spirits_of_water_1[2] = 'h01D'
	set udg_spirits_of_water_1[3] = 'h01E'
	set udg_spirits_of_water_1[4] = 'h01F'
	set udg_spirits_of_water_1[5] = 'h01G'
	set udg_spirits_of_water_1[6] = 'h01H'
	set udg_Integer_spirits_of_water_1 = 0
endfunction

function InitTrig_Init_kreeps takes nothing returns nothing
	set gg_trg_Init_kreeps_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Init_kreeps_1, function Trig_Init_kreeps_Actions)
endfunction

function Trig_spirits_of_water_dead_Conditions takes nothing returns boolean
	local integer id = GetUnitTypeId(GetDyingUnit())
	return (id_0 == 'h017' or id_0 == 'h01D' or id_0 == 'h01E' or id_0 == 'h01F' or id_0 == 'h01G' or id_0 == 'h01H') and IsUnitIllusion(GetDyingUnit()) == false
endfunction

function Trig_spirits_of_water_dead_Actions takes nothing returns nothing
	local unit elemental = GetDyingUnit()
	local unit hero = LoadUnitHandle(udg_hash_1, GetHandleId(elemental_0), 63)
	call SaveInteger(udg_hash_1, GetHandleId(hero_0), 64, LoadInteger(udg_hash_1, GetHandleId(hero_0), 64) - 1)
	call DestroyEffect(LoadEffectHandle(udg_hash_1, GetHandleId(elemental_0), '{'))
	call FlushChildHashtable(udg_hash_1, GetHandleId(elemental_0))
endfunction

function InitTrig_spirits_of_water_dead takes nothing returns nothing
	local integer index = 0
	set gg_trg_spirits_of_water_dead_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_spirits_of_water_dead_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_spirits_of_water_dead_1, Condition(function Trig_spirits_of_water_dead_Conditions))
	call TriggerAddAction(gg_trg_spirits_of_water_dead_1, function Trig_spirits_of_water_dead_Actions)
endfunction

function Trig_Skill_Gertva_Conditions takes nothing returns boolean
	local integer id = GetUnitTypeId(GetSpellTargetUnit())
	return GetSpellAbilityId() == 'A06X' and IsUnitIllusion(GetSpellTargetUnit()) == false and (id_0 == 'H01I' or id_0 == 'h017' or id_0 == 'h01D' or id_0 == 'h01E' or id_0 == 'h01F' or id_0 == 'h01G' or id_0 == 'h01H')
endfunction

function Trig_Skill_Gertva_Actions takes nothing returns nothing
	call DestroyEffect(AddSpecialEffectTarget("units\\human\\WaterElemental\\WaterElemental.mdl", GetSpellTargetUnit(), "chest"))
	call SetUnitState(GetSpellTargetUnit(), UNIT_STATE_LIFE_1, GetUnitState(GetSpellTargetUnit(), UNIT_STATE_LIFE_1) + (.66 * GetUnitState(GetSpellAbilityUnit(), UNIT_STATE_LIFE_1)) + .1 * GetUnitState(GetSpellTargetUnit(), UNIT_STATE_MAX_LIFE_1))
	call KillUnit(GetSpellAbilityUnit())
endfunction

function InitTrig_Skill_Gertva takes nothing returns nothing
	local integer index = 0
	set gg_trg_Skill_Gertva_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Skill_Gertva_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Skill_Gertva_1, Condition(function Trig_Skill_Gertva_Conditions))
	call TriggerAddAction(gg_trg_Skill_Gertva_1, function Trig_Skill_Gertva_Actions)
endfunction

function Trig_Opening_Streams_Destructables takes nothing returns nothing
	call KillDestructable(GetEnumDestructable())
endfunction

function Trig_Opening_Streams_unit_Actions takes nothing returns nothing
	local timer tu = GetExpiredTimer()
	local integer ht = GetHandleId(tu_0)
	local unit pilot = LoadUnitHandle(udg_hash_1, ht_0, 1)
	local real dist = LoadReal(udg_hash_1, ht_0, 2)
	local real speed = LoadReal(udg_hash_1, ht_0, 3)
	local real angleu = LoadReal(udg_hash_1, ht_0, 4)
	local real waitu = LoadReal(udg_hash_1, ht_0, 5)
	local real waitucheck = LoadReal(udg_hash_1, ht_0, 6)
	local unit caster = LoadUnitHandle(udg_hash_1, ht_0, 7)
	local real damage = LoadReal(udg_hash_1, ht_0, 8)
	local real x = GetUnitX(pilot_0) + speed_0 * Cos(angleu_0 * bj_DEGTORAD_1)
	local real y = GetUnitY(pilot_0) + speed_0 * Sin(angleu_0 * bj_DEGTORAD_1)
	local rect r
	if waitu_0 > 0 then
		set waitu_0 = waitu_0 - 1
		call SaveReal(udg_hash_1, ht_0, 5, waitu_0)
		if IsTerrainPathable(x_0, y_0, PATHING_TYPE_FLYABILITY_1) == false and GetTerrainCliffLevel(x_0, y_0) == GetTerrainCliffLevel(GetUnitX(pilot_0), GetUnitY(pilot_0)) then
			call SetUnitX(pilot_0, x_0)
			call SetUnitY(pilot_0, y_0)
		endif
		if waitu_0 <= waitucheck_0 then
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveDamage.mdl", pilot_0, "chest"))
			call SetUnitFlyHeight(pilot_0, 0, 2 * (dist_0 + 50))
		endif
	else
		set r_0 = Rect(x_0 - 175., y_0 - 175., x_0 + 175., y_0 + 175.)
		call EnumDestructablesInRect(r_0, null, function Trig_Opening_Streams_Destructables)
		call UnitDamageTarget(caster_0, pilot_0, damage_0 / 2, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
		call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodFootman.mdl", pilot_0, "origin"))
		call SetUnitPathing(pilot_0, true)
		call RemoveRect(r_0)
		set r_0 = null
		call FlushChildHashtable(udg_hash_1, ht_0)
		call DestroyTimer(tu_0)
	endif
	set tu_0 = null
	set pilot_0 = null
	set caster_0 = null
endfunction

function Trig_Opening_Streams_periodic_Actions takes nothing returns nothing
	local timer tper = GetExpiredTimer()
	local integer hper = GetHandleId(tper_0)
	local unit caster = LoadUnitHandle(udg_hash_1, hper_0, 1)
	local real xloc = LoadReal(udg_hash_1, hper_0, 2)
	local real yloc = LoadReal(udg_hash_1, hper_0, 3)
	local integer wait = LoadInteger(udg_hash_1, hper_0, 4)
	local real damage = LoadReal(udg_hash_1, hper_0, 5)
	local real angle = 10. * wait_0
	local unit water
	local integer lop = 1
	local effect ef
	local real x
	local real y
	local timer tu
	local integer ht
	local group g
	local unit Picked
	local real dist
	local real angleu
	local real speed
	local real waitu
	if wait_0 < 50 then
		loop
			exitwhen lop_0 > 18
			set x_0 = xloc_0 + (350. - (wait_0 * 5.)) * Cos(angle_0 * bj_DEGTORAD_1)
			set y_0 = yloc_0 + (350. - (wait_0 * 5.)) * Sin(angle_0 * bj_DEGTORAD_1)
			if IsTerrainPathable(x_0, y_0, PATHING_TYPE_FLYABILITY_1) == false then
				set water_0[lop_0] = LoadUnitHandle(udg_hash_1, hper_0, 5 + lop_0)
				call SetUnitPosition(water_0[lop_0], x_0, y_0)
			endif
			set angle_0 = angle_0 + 20.
			set lop_0 = lop_0 + 1
			set water_0[lop_0] = null
		endloop
		set wait_0 = wait_0 + 1
		call SaveInteger(udg_hash_1, hper_0, 4, wait_0)
	else
		set angle_0 = 72.
		loop
			set lop_0 = lop_0 + 1
			exitwhen lop_0 > 6
			set x_0 = xloc_0 + 125. * Cos(angle_0 * bj_DEGTORAD_1)
			set y_0 = yloc_0 + 125. * Sin(angle_0 * bj_DEGTORAD_1)
			call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl", x_0, y_0))
			call DestroyEffect(AddSpecialEffect("war3mapImported\\AquaSpike.mdx", x_0, y_0))
			set angle_0 = angle_0 + 72.
		endloop
		set lop_0 = 1
		loop
			exitwhen lop_0 > 18
			set water_0[lop_0] = LoadUnitHandle(udg_hash_1, hper_0, 5 + lop_0)
			set ef_0 = LoadEffectHandle(udg_hash_1, GetHandleId(water_0[lop_0]), 1)
			call DestroyEffect(ef_0)
			call FlushChildHashtable(udg_hash_1, GetHandleId(water_0[lop_0]))
			call UnitApplyTimedLife(water_0[lop_0], 'BTLF', .5)
			call KillUnit(water_0[lop_0])
			set water_0[lop_0] = null
			set ef_0 = null
			set lop_0 = lop_0 + 1
		endloop
		set g_0 = CreateGroup()
		call GroupEnumUnitsInRange(g_0, xloc_0, yloc_0, 350., null)
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if IsUnitEnemy(Picked_0, GetOwningPlayer(caster_0)) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_GROUND_1) and GetUnitTypeId(Picked_0) != 'h00U' then
				set tu_0 = CreateTimer()
				set ht_0 = GetHandleId(tu_0)
				call UnitAddAbility(Picked_0, 'Amrf')
				call UnitRemoveAbility(Picked_0, 'Amrf')
				call SetUnitPathing(Picked_0, false)
				set dist_0 = 300. - (SquareRoot((GetUnitX(Picked_0) - xloc_0) * (GetUnitX(Picked_0) - xloc_0) + (GetUnitY(Picked_0) - yloc_0) * (GetUnitY(Picked_0) - yloc_0)))
				set speed_0 = (2 * dist_0) / 80. + 3.125
				set angleu_0 = bj_RADTODEG_1 * Atan2(GetUnitY(Picked_0) - yloc_0, GetUnitX(Picked_0) - xloc_0)
				set waitu_0 = ((2 * dist_0) + 50.) / (speed_0 * 2)
				call SetUnitFlyHeight(Picked_0, dist_0 + 50, 2 * (dist_0 + 50))
				call SaveUnitHandle(udg_hash_1, ht_0, 1, Picked_0)
				call SaveReal(udg_hash_1, ht_0, 2, dist_0)
				call SaveReal(udg_hash_1, ht_0, 3, speed_0)
				call SaveReal(udg_hash_1, ht_0, 4, angleu_0)
				call SaveReal(udg_hash_1, ht_0, 5, waitu_0)
				call SaveReal(udg_hash_1, ht_0, 6, (waitu_0 / 2))
				call SaveUnitHandle(udg_hash_1, ht_0, 7, caster_0)
				call SaveReal(udg_hash_1, ht_0, 8, damage_0)
				call UnitDamageTarget(caster_0, Picked_0, damage_0 / 2, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveDamage.mdl", Picked_0, "chest"))
				call TimerStart(tu_0, .025, true, function Trig_Opening_Streams_unit_Actions)
				set tu_0 = null
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		call FlushChildHashtable(udg_hash_1, hper_0)
		call DestroyTimer(tper_0)
	endif
	set wait_0 = wait_0 + 1
	call SaveInteger(udg_hash_1, hper_0, 4, wait_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set Picked_0 = null
	set tper_0 = null
	set caster_0 = null
endfunction

function Trig_Opening_Streams_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local player p = GetOwningPlayer(caster_0)
	local location loc = GetSpellTargetLoc()
	local real xloc = GetLocationX(loc_0)
	local real yloc = GetLocationY(loc_0)
	local real angle = .0
	local integer wait = 0
	local unit water
	local integer lop = 1
	local real x
	local real y
	local timer tper = CreateTimer()
	local integer hper = GetHandleId(tper_0)
	local effect ef
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A072')
	local real damage = ($F * lvl_0) + (5 * lvl_0 * lvl_0) + 20.
	loop
		exitwhen lop_0 > 18
		set x_0 = xloc_0 + 350. * Cos(angle_0 * bj_DEGTORAD_1)
		set y_0 = yloc_0 + 350. * Sin(angle_0 * bj_DEGTORAD_1)
		if IsTerrainPathable(x_0, y_0, PATHING_TYPE_FLYABILITY_1) == false then
			set water_0[lop_0] = CreateUnit(p_0, 'h00U', x_0, y_0, .0)
			call SaveUnitHandle(udg_hash_1, hper_0, 5 + lop_0, water_0[lop_0])
			set ef_0 = AddSpecialEffectTarget("war3mapImported\\s_WateryAura.mdx", water_0[lop_0], "chest")
			call SaveEffectHandle(udg_hash_1, GetHandleId(water_0[lop_0]), 1, ef_0)
			set ef_0 = null
		endif
		set angle_0 = angle_0 + 20.
		set lop_0 = lop_0 + 1
		set water_0[lop_0] = null
	endloop
	call SaveUnitHandle(udg_hash_1, hper_0, 1, caster_0)
	call SaveReal(udg_hash_1, hper_0, 2, xloc_0)
	call SaveReal(udg_hash_1, hper_0, 3, yloc_0)
	call SaveInteger(udg_hash_1, hper_0, 4, wait_0)
	call SaveReal(udg_hash_1, hper_0, 5, damage_0)
	call TimerStart(tper_0, .04, true, function Trig_Opening_Streams_periodic_Actions)
	set caster_0 = null
	set p_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set tper_0 = null
endfunction

function Trig_Opening_Streams_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A072'
endfunction

function InitTrig_Opening_Streams takes nothing returns nothing
	local integer index = 0
	set gg_trg_Opening_Streams_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Opening_Streams_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Opening_Streams_1, Condition(function Trig_Opening_Streams_Conditions))
	call TriggerAddAction(gg_trg_Opening_Streams_1, function Trig_Opening_Streams_Actions)
endfunction

function Trig_water_explosion_Dest_Actions takes nothing returns nothing
	call KillDestructable(GetEnumDestructable())
endfunction

function Trig_water_explosion_periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local integer amount = LoadInteger(udg_hash_1, h_0, 1)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 2)
	local real xloc = LoadReal(udg_hash_1, h_0, 3)
	local real yloc = LoadReal(udg_hash_1, h_0, 4)
	local real damage = LoadReal(udg_hash_1, h_0, 5)
	local real stuntime = LoadReal(udg_hash_1, h_0, 6)
	local unit u
	local real angle = 0
	local real angle2 = 0
	local real dist = 0
	local real x = 0
	local real y = 0
	local group g
	local group gmain = CreateGroup()
	local player p = GetOwningPlayer(caster_0)
	local unit Picked
	local rect r
	if amount_0 == 7 then
		set angle_0 = 51.43
		set angle2_0 = 51.43
		set dist_0 = $AF
	endif
	if amount_0 == 1 then
		set angle_0 = 120.
		set angle2_0 = 120.
		set dist_0 = 0
	endif
	if amount_0 == $D then
		set angle_0 = 27.69
		set angle2_0 = 27.69
		set dist_0 = 350
	endif
	set bj_forLoopAIndex_1 = 1
	loop
		exitwhen bj_forLoopAIndex_1 > amount_0
		set g_0 = CreateGroup()
		set x_0 = xloc_0 + dist_0 * Cos(angle_0 * bj_DEGTORAD_1)
		set y_0 = yloc_0 + dist_0 * Sin(angle_0 * bj_DEGTORAD_1)
		set r_0 = Rect(x_0 - 100., y_0 - 100., x_0 + 100., y_0 + 100.)
		call EnumDestructablesInRect(r_0, null, function Trig_water_explosion_Dest_Actions)
		call RemoveRect(r_0)
		set r_0 = null
		call DestroyEffect(AddSpecialEffect("war3mapImported\\s_WateryAura.mdx", x_0, y_0))
		call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl", x_0, y_0))
		call GroupEnumUnitsInRange(g_0, x_0, y_0, 100., null)
		call GroupAddGroup(g_0, gmain_0)
		call GroupClear(g_0)
		call DestroyGroup(g_0)
		set g_0 = null
		set bj_forLoopAIndex_1 = bj_forLoopAIndex_1 + 1
		set angle_0 = angle_0 + angle2_0
	endloop
	loop
		set Picked_0 = FirstOfGroup(gmain_0)
		exitwhen Picked_0 == null
		if IsUnitEnemy(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
			call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
			call StunUnitTimed(Picked_0, stuntime_0)
		endif
		call GroupRemoveUnit(gmain_0, Picked_0)
	endloop
	call SaveInteger(udg_hash_1, h_0, 1, amount_0 - 6)
	if amount_0 < -1 then
		call DestroyTimer(t_0)
		call FlushChildHashtable(udg_hash_1, h_0)
	else
		call TimerStart(t_0, .75, false, function Trig_water_explosion_periodic_Actions)
	endif
	set t_0 = null
	set caster_0 = null
	call GroupClear(gmain_0)
	call DestroyGroup(gmain_0)
	set gmain_0 = null
	set p_0 = null
	set Picked_0 = null
endfunction

function Trig_water_explosion_Actions takes nothing returns nothing
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local integer amount = $D
	local unit caster = GetSpellAbilityUnit()
	local location loc = GetSpellTargetLoc()
	local real xloc = GetLocationX(loc_0)
	local real yloc = GetLocationY(loc_0)
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A071')
	local real damage
	local real stuntime = 1.35 + (.15 * lvl_0)
	if lvl_0 == 1 then
		set damage_0 = 30.
	endif
	if lvl_0 == 2 then
		set damage_0 = 55.
	endif
	if lvl_0 == 3 then
		set damage_0 = 75.
	endif
	if lvl_0 == 4 then
		set damage_0 = 110.
	endif
	if lvl_0 == 5 then
		set damage_0 = 145.
	endif
	if lvl_0 == 6 then
		set damage_0 = 190.
	endif
	call SaveInteger(udg_hash_1, h_0, 1, amount_0)
	call SaveUnitHandle(udg_hash_1, h_0, 2, caster_0)
	call SaveReal(udg_hash_1, h_0, 3, xloc_0)
	call SaveReal(udg_hash_1, h_0, 4, yloc_0)
	call SaveReal(udg_hash_1, h_0, 5, damage_0)
	call SaveReal(udg_hash_1, h_0, 6, stuntime_0)
	call TimerStart(t_0, .06, false, function Trig_water_explosion_periodic_Actions)
	set t_0 = null
	set caster_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
endfunction

function Trig_water_explosion_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A071'
endfunction

function InitTrig_Water_Explosion takes nothing returns nothing
	local integer index = 0
	set gg_trg_Water_Explosion_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Water_Explosion_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Water_Explosion_1, Condition(function Trig_water_explosion_Conditions))
	call TriggerAddAction(gg_trg_Water_Explosion_1, function Trig_water_explosion_Actions)
endfunction

function Trig_Tsunami_periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local integer wait = LoadInteger(udg_hash_1, h_0, 2)
	local real damage = LoadReal(udg_hash_1, h_0, 3)
	local group g = LoadGroupHandle(udg_hash_1, h_0, 4)
	local unit water
	local integer lop = 1
	local group grup = CreateGroup()
	local unit Picked
	local real x
	local real y
	local boolean create
	local integer count
	local integer lopa
	local unit dammi
	if wait_0 > 0 then
		loop
			exitwhen lop_0 > 60
			set water_0[lop_0] = LoadUnitHandle(udg_hash_1, h_0, 5 + lop_0)
			set x_0 = GetUnitX(water_0[lop_0]) + 25. * Cos(GetUnitFacing(water_0[lop_0]) * bj_DEGTORAD_1)
			set y_0 = GetUnitY(water_0[lop_0]) + 25. * Sin(GetUnitFacing(water_0[lop_0]) * bj_DEGTORAD_1)
			if IsTerrainPathable(x_0, y_0, PATHING_TYPE_FLYABILITY_1) == false then
				call SetUnitPosition(water_0[lop_0], x_0, y_0)
			endif
			call GroupEnumUnitsInRange(grup_0, x_0, y_0, '}', null)
			loop
				set Picked_0 = FirstOfGroup(grup_0)
				exitwhen Picked_0 == null
				if IsUnitEnemy(Picked_0, GetOwningPlayer(caster_0)) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitInGroup(Picked_0, g_0) == false then
					call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
					call AddSpecialEffectTarget("Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveDamage.mdl", Picked_0, "chest")
					call GroupAddUnit(g_0, Picked_0)
				endif
				call GroupRemoveUnit(grup_0, Picked_0)
			endloop
			set Picked_0 = null
			set water_0[lop_0] = null
			set lop_0 = lop_0 + 1
		endloop
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 2, wait_0)
		call SaveGroupHandle(udg_hash_1, h_0, 4, g_0)
	else
		set create_0 = LoadBoolean(udg_hash_1, h_0, 5)
		if create_0 then
			set count_0 = (GetUnitAbilityLevel(caster_0, 'A06Z') + 2) - LoadInteger(udg_hash_1, GetHandleId(caster_0), 64)
			call SaveInteger(udg_hash_1, GetHandleId(caster_0), 64, GetUnitAbilityLevel(caster_0, 'A06Z') + 2)
			set lopa_0 = 1
			loop
				exitwhen lopa_0 > count_0
				set water_0[lop_0] = LoadUnitHandle(udg_hash_1, h_0, 5 + GetRandomInt(1, 60))
				set dammi_0 = CreateUnit(GetOwningPlayer(caster_0), udg_spirits_of_water_1[GetUnitAbilityLevel(caster_0, 'A06Z')], GetUnitX(water_0[lop_0]), GetUnitY(water_0[lop_0]), GetRandomReal(0, 360))
				call SaveUnitHandle(udg_hash_1, GetHandleId(dammi_0), 63, caster_0)
				set dammi_0 = null
				set water_0[lop_0] = null
				set lopa_0 = lopa_0 + 1
			endloop
		endif
		loop
			exitwhen lop_0 > 60
			set water_0[lop_0] = LoadUnitHandle(udg_hash_1, h_0, 5 + lop_0)
			set x_0 = GetUnitX(water_0[lop_0])
			set y_0 = GetUnitY(water_0[lop_0])
			if lop_0 - (lop_0 / 2) * 2 == 0 then
				call AddSpecialEffect("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl", x_0, y_0)
			endif
			if lop_0 - (lop_0 / 4) * 4 == 0 then
				call AddSpecialEffect("war3mapImported\\AquaSpike.mdx", x_0, y_0)
			endif
			call DestroyEffect(LoadEffectHandle(udg_hash_1, GetHandleId(water_0[lop_0]), 1))
			call KillUnit(water_0[lop_0])
			set water_0[lop_0] = null
			call FlushChildHashtable(udg_hash_1, GetHandleId(water_0[lop_0]))
			set lop_0 = lop_0 + 1
		endloop
		call GroupClear(g_0)
		call DestroyGroup(g_0)
		set g_0 = null
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	call DestroyGroup(grup_0)
	set grup_0 = null
	set t_0 = null
	set caster_0 = null
	set g_0 = null
endfunction

function Trig_Tsunami_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local player p = GetOwningPlayer(caster_0)
	local location loc = GetSpellTargetLoc()
	local real xloc = GetLocationX(loc_0)
	local real yloc = GetLocationY(loc_0)
	local real xc = GetUnitX(caster_0)
	local real yc = GetUnitY(caster_0)
	local unit water
	local integer lopa = 1
	local integer lopb = 1
	local real anglecaster = bj_RADTODEG_1 * Atan2(yloc_0 - GetUnitY(caster_0), xloc_0 - GetUnitX(caster_0))
	local real xsmec = xc_0 - 400. * Cos(anglecaster_0 * bj_DEGTORAD_1)
	local real ysmec = yc_0 - 400. * Sin(anglecaster_0 * bj_DEGTORAD_1)
	local real anglesmec = .0
	local real xp = xsmec_0 + 630. * Cos((anglecaster_0 - 90.) * bj_DEGTORAD_1)
	local real yp = ysmec_0 + 630. * Sin((anglecaster_0 - 90.) * bj_DEGTORAD_1)
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local integer wait = 40
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A078')
	local integer lvlup = GetUnitAbilityLevel(caster_0, 'A0Q9')
	local boolean create
	local real damage
	local group g = CreateGroup()
	local effect ef
	if lvl_0 > 0 then
		set damage_0 = lvl_0 * (2. * (62.5 + GetHeroInt(caster_0, true)))
		set create_0 = false
	endif
	if lvlup_0 > 0 then
		set damage_0 = lvlup_0 * (2. * (87.5 + GetHeroInt(caster_0, true))) + 25.
		set create_0 = true
	endif
	loop
		exitwhen lopa_0 > 3
		set xp_0 = xp_0 + 80. * Cos(anglecaster_0 * bj_DEGTORAD_1)
		set yp_0 = yp_0 + 80. * Sin(anglecaster_0 * bj_DEGTORAD_1)
		set lopb_0 = 1
		loop
			exitwhen lopb_0 > 20
			if IsTerrainPathable(xp_0 - (lopb_0 * 60.) * Cos((anglecaster_0 - 90.) * bj_DEGTORAD_1), yp_0 - (lopb_0 * 60.) * Sin((anglecaster_0 - 90.) * bj_DEGTORAD_1), PATHING_TYPE_FLYABILITY_1) == false then
				set water_0[(20 * lopa_0) + lopb_0 - 20] = CreateUnit(p_0, 'h00U', xp_0 - (lopb_0 * 60.) * Cos((anglecaster_0 - 90.) * bj_DEGTORAD_1), yp_0 - (lopb_0 * 60.) * Sin((anglecaster_0 - 90.) * bj_DEGTORAD_1), anglecaster_0)
				set ef_0 = AddSpecialEffectTarget("war3mapImported\\s_WateryAura.mdx", water_0[(20 * lopa_0) + lopb_0 - 20], "chest")
				call SaveUnitHandle(udg_hash_1, h_0, 5 + (20 * lopa_0) + lopb_0 - 20, water_0[(20 * lopa_0) + lopb_0 - 20])
				call SaveEffectHandle(udg_hash_1, GetHandleId(water_0[(20 * lopa_0) + lopb_0 - 20]), 1, ef_0)
				set ef_0 = null
				set water_0[(20 * lopa_0) + lopb_0 - 20] = null
			endif
			set lopb_0 = lopb_0 + 1
		endloop
		set lopa_0 = lopa_0 + 1
	endloop
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveInteger(udg_hash_1, h_0, 2, wait_0)
	call SaveReal(udg_hash_1, h_0, 3, damage_0)
	call SaveBoolean(udg_hash_1, h_0, 5, create_0)
	call SaveGroupHandle(udg_hash_1, h_0, 4, g_0)
	call TimerStart(t_0, .04, true, function Trig_Tsunami_periodic_Actions)
	set caster_0 = null
	set p_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set t_0 = null
	set g_0 = null
endfunction

function Trig_Tsunami_Conditions takes nothing returns boolean
	return (GetSpellAbilityId() == 'A078' or GetSpellAbilityId() == 'A0Q9')
endfunction

function InitTrig_Tsunami takes nothing returns nothing
	local integer index = 0
	set gg_trg_Tsunami_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Tsunami_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Tsunami_1, Condition(function Trig_Tsunami_Conditions))
	call TriggerAddAction(gg_trg_Tsunami_1, function Trig_Tsunami_Actions)
endfunction

function Trig_Guardsman_Load_Actions takes nothing returns nothing
	call AbilityPreload('A0EZ', 6)
	call AbilityPreload('A0ET', 6)
	call AbilityPreload('A0EU', 6)
	call AbilityPreload('A0EY', 3)
	call AbilityPreload('A0EV', 1)
	call AbilityPreload('A0EX', 2)
	call AbilityPreload('A0F0', 6)
	call AbilityPreload('B02I', 1)
	call AbilityPreload('B02J', 1)
	call EffectPreload("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl")
	call EffectPreload("Abilities\\Spells\\Human\\Defend\\DefendCaster.mdl")
	call EffectPreload("Abilities\\Spells\\NightElf\\BattleRoar\\RoarCaster.mdl")
	call EffectPreload("Abilities\\Spells\\Orc\\Bloodlust\\BloodlustTarget.mdl")
	call EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl")
	call EffectPreload("Abilities\\Spells\\Human\\StormBolt\\StormBoltMissile.mdl")
	call EnableTrigger(gg_trg_Protective_Stand_Switch_1)
	call EnableTrigger(gg_trg_Learn_Fighting_Skills_1)
	call EnableTrigger(gg_trg_Ram_Board_1)
	call EnableTrigger(gg_trg_Warcry_1)
endfunction

function InitTrig_Guardsman_Load takes nothing returns nothing
	set gg_trg_Guardsman_Load_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Guardsman_Load_1, function Trig_Guardsman_Load_Actions)
endfunction

function Trig_Protective_Stand_Switch_Actions takes nothing returns nothing
	local unit caster = GetTriggerUnit()
	local integer h = GetHandleId(caster_0)
	local integer bonus = 5 + 5 * GetUnitAbilityLevel(caster_0, 'A0EU')
	if caster_0 == GetDyingUnit() then
		call SaveBoolean(udg_hash_1, GetHandleId(caster_0), 3, true)
	else
		if LoadBoolean(udg_hash_1, GetHandleId(caster_0), 3) == false then
			if (GetIssuedOrderId() == $D0057) then
				if GetUnitAbilityLevel(caster_0, 'A0EU') > 0 then
					call SetAttackSpeedAbilityLevel(caster_0, -(bonus_0))
				endif
				call SaveBoolean(udg_hash_1, GetHandleId(caster_0), 1, true)
			endif
			if (GetIssuedOrderId() == $D0058) then
				if GetUnitAbilityLevel(caster_0, 'A0EU') > 0 then
					call SetAttackSpeedAbilityLevel(caster_0, bonus_0)
				endif
				call SaveBoolean(udg_hash_1, GetHandleId(caster_0), 1, false)
			endif
		else
			call SaveBoolean(udg_hash_1, GetHandleId(caster_0), 3, false)
		endif
	endif
	set caster_0 = null
endfunction

function Trig_Protective_Stand_Switch_Conditions takes nothing returns boolean
	return GetUnitAbilityLevel(GetTriggerUnit(), 'A0ET') > 0
endfunction

function InitTrig_Protective_Stand_Switch takes nothing returns nothing
	local integer index = 0
	set gg_trg_Protective_Stand_Switch_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Protective_Stand_Switch_1, Player(index_0), EVENT_PLAYER_UNIT_ISSUED_ORDER_1, null)
		call TriggerRegisterPlayerUnitEvent(gg_trg_Protective_Stand_Switch_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Protective_Stand_Switch_1, Condition(function Trig_Protective_Stand_Switch_Conditions))
	call TriggerAddAction(gg_trg_Protective_Stand_Switch_1, function Trig_Protective_Stand_Switch_Actions)
endfunction

function Trig_Learn_Fighting_Skills_Actions takes nothing returns nothing
	local unit u = GetLearningUnit()
	local integer h = GetHandleId(u_0)
	local integer lvl = GetUnitAbilityLevel(u_0, 'A0EU')
	if lvl_0 == 1 then
		call SaveInteger(udg_hash_1, h_0, 2, $A)
		call SetAttackAbilityLevel(u_0, $A)
		call SetArmorAbilityLevel(u_0, 2)
		if LoadBoolean(udg_hash_1, h_0, 1) == false then
			call SetAttackSpeedAbilityLevel(u_0, $A)
		endif
	else
		call SetAttackAbilityLevel(u_0, 5)
		call SetArmorAbilityLevel(u_0, 1)
		if LoadBoolean(udg_hash_1, h_0, 1) == false then
			call SetAttackSpeedAbilityLevel(u_0, 5)
		endif
	endif
	set u_0 = null
endfunction

function Trig_Learn_Fighting_Skills_Conditions takes nothing returns boolean
	return GetLearnedSkill() == 'A0EU' and GetUnitTypeId(GetLearningUnit()) != 'h00U'
endfunction

function InitTrig_Learn_Fighting_Skills takes nothing returns nothing
	local integer index = 0
	set gg_trg_Learn_Fighting_Skills_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Fighting_Skills_1, Player(index_0), EVENT_PLAYER_HERO_SKILL_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Learn_Fighting_Skills_1, Condition(function Trig_Learn_Fighting_Skills_Conditions))
	call TriggerAddAction(gg_trg_Learn_Fighting_Skills_1, function Trig_Learn_Fighting_Skills_Actions)
endfunction

function Trig_Ram_Board_Move_Dest_Actions takes nothing returns nothing
	call KillDestructable(GetEnumDestructable())
endfunction

function Trig_Ram_Board_Move_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local group gdamage = LoadGroupHandle(udg_hash_1, h_0, 2)
	local real damage = LoadReal(udg_hash_1, h_0, 3)
	local integer lvlstun = LoadInteger(udg_hash_1, h_0, 4)
	local integer wait = LoadInteger(udg_hash_1, h_0, 5)
	local real face = LoadReal(udg_hash_1, h_0, 6)
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local player p = GetOwningPlayer(caster_0)
	local group g = CreateGroup()
	local unit Picked
	local real angle
	local real angle2
	local unit dammi
	local boolean alife = true
	local rect r = Rect(x_0 - 100., y_0 - 100., x_0 + 100., y_0 + 100.)
	call EnumDestructablesInRect(r_0, null, function Trig_Ram_Board_Move_Dest_Actions)
	if GetUnitState(caster_0, UNIT_STATE_LIFE_1) < .405 then
		set alife_0 = false
	endif
	if wait_0 > 0 and alife_0 then
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 5, wait_0)
		call SetUnitFacing(caster_0, face_0)
		call SetUnitAnimationByIndex(caster_0, 8)
		call GroupEnumUnitsInRange(g_0, x_0, y_0, 125., null)
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if IsUnitEnemy(Picked_0, p_0) and IsUnitInGroup(Picked_0, gdamage_0) == false and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call GroupAddUnit(gdamage_0, Picked_0)
				call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", Picked_0, "chest"))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\StormBolt\\StormBoltMissile.mdl", Picked_0, "chest"))
				set dammi_0 = CreateUnit(p_0, 'h00U', x_0, y_0, .0)
				call UnitApplyTimedLife(dammi_0, 'BTLF', .5)
				call UnitAddAbility(dammi_0, 'A0EX')
				call SetUnitAbilityLevel(dammi_0, 'A0EX', lvlstun_0)
				call IssueTargetOrderById(dammi_0, $D007F, Picked_0)
				call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
				set dammi_0 = null
				set angle_0 = bj_RADTODEG_1 * Atan2(GetUnitY(Picked_0) - y_0, GetUnitX(Picked_0) - x_0)
				set angle2_0 = (Atan2(y_0 - GetUnitY(Picked_0), x_0 - GetUnitX(Picked_0)) * bj_RADTODEG_1) + 360.
				if (angle2_0 <= (GetUnitFacing(caster_0) + 210.) and angle2_0 >= (GetUnitFacing(caster_0) + 180.)) then
					set angle_0 = angle_0 + 30.
				endif
				if (angle2_0 <= (GetUnitFacing(caster_0) + 180.) and angle2_0 >= (GetUnitFacing(caster_0) + 150.)) then
					set angle_0 = angle_0 - 30.
				endif
				call MoveUnit(Picked_0, 1., 400., 400., angle_0, .0, false)
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		call SaveGroupHandle(udg_hash_1, h_0, 2, gdamage_0)
	else
		if alife_0 then
			if LoadBoolean(udg_hash_1, GetHandleId(caster_0), 1) then
				call SetUnitAnimation(caster_0, "Stand Defend")
			else
				call SetUnitAnimation(caster_0, "stand")
			endif
		endif
		call SetUnitPathing(caster_0, true)
		call SetUnitTimeScale(caster_0, 1.)
		call GroupClear(gdamage_0)
		call DestroyGroup(gdamage_0)
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set caster_0 = null
	set gdamage_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set p_0 = null
	set Picked_0 = null
	set dammi_0 = null
	call RemoveRect(r_0)
	set r_0 = null
endfunction

function Trig_Ram_Board_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local unit target = GetSpellTargetUnit()
	local real angle
	local group gdamage = CreateGroup()
	local integer lvlstun = 1
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0EZ')
	local integer stuck = 0
	local timer tstuck
	local real damage = (15. + (35. * lvl_0)) + (GetHeroStr(caster_0, true) * (.5 + .25 * lvl_0))
	local location loc
	local real tx
	local real ty
	local real dist
	local real time
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	call SetUnitAnimation(caster_0, "stand")
	call SetUnitPathing(caster_0, false)
	call SetUnitAnimationByIndex(caster_0, 8)
	call SetUnitTimeScale(caster_0, 2.)
	if target_0 == null then
		set loc_0 = GetSpellTargetLoc()
		set tx_0 = GetLocationX(loc_0)
		set ty_0 = GetLocationY(loc_0)
	else
		set tx_0 = GetUnitX(target_0)
		set ty_0 = GetUnitY(target_0)
	endif
	set angle_0 = bj_RADTODEG_1 * Atan2(ty_0 - y_0, tx_0 - x_0)
	set dist_0 = SquareRoot((tx_0 - x_0) * (tx_0 - x_0) + (ty_0 - y_0) * (ty_0 - y_0))
	if target_0 == caster_0 then
		set angle_0 = GetUnitFacing(caster_0)
		set dist_0 = 750.
	endif
	set time_0 = dist_0 / 500.
	call MoveUnit(caster_0, time_0, 500., .0, angle_0, .0, true)
	if GetUnitAbilityLevel(caster_0, 'A0ET') > 0 then
		if LoadBoolean(udg_hash_1, GetHandleId(caster_0), 1) == false then
			set damage_0 = damage_0 * 1.3
		else
			set lvlstun_0 = 2
		endif
	endif
	if HaveSavedHandle(udg_hash_1, GetHandleId(caster_0), 59) then
		set tstuck_0 = LoadTimerHandle(udg_hash_1, GetHandleId(caster_0), 59)
		set stuck_0 = LoadInteger(udg_hash_1, GetHandleId(tstuck_0), 1)
		if GetRandomInt(1, $A) <= stuck_0 then
			call UnitRemoveAbility(caster_0, 'A0EZ')
			call UnitAddAbility(caster_0, 'A0EZ')
			call SetUnitAbilityLevel(caster_0, 'A0EZ', lvl_0)
			call CreateTexttag("|cFFFF4B00Refresh Ability|r", .023, $FF, x_0 - 75., y_0, .0, .0, .035, 3.5)
		endif
		set tstuck_0 = null
	endif
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveGroupHandle(udg_hash_1, h_0, 2, gdamage_0)
	call SaveReal(udg_hash_1, h_0, 3, damage_0)
	call SaveInteger(udg_hash_1, h_0, 4, lvlstun_0)
	call SaveInteger(udg_hash_1, h_0, 5, R2I(dist_0 / 15.))
	call SaveReal(udg_hash_1, h_0, 6, angle_0)
	call TimerStart(t_0, .03, true, function Trig_Ram_Board_Move_Actions)
	set caster_0 = null
	set target_0 = null
	set gdamage_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set t_0 = null
endfunction

function Trig_Ram_Board_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0EZ'
endfunction

function InitTrig_Ram_Board takes nothing returns nothing
	local integer index = 0
	set gg_trg_Ram_Board_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Ram_Board_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Ram_Board_1, Condition(function Trig_Ram_Board_Conditions))
	call TriggerAddAction(gg_trg_Ram_Board_1, function Trig_Ram_Board_Actions)
endfunction

function Trig_Warcry_Buff_Removes_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit target = LoadUnitHandle(udg_hash_1, h_0, 2)
	local integer stuck = LoadInteger(udg_hash_1, h_0, 1)
	call SetAttackSpeedAbilityLevel(target_0, (-stuck_0 * $A))
	call SetArmorAbilityLevel(target_0, (-stuck_0 * 3))
	call SetAttackAbilityLevel(target_0, (-stuck_0 * 7))
	if GetUnitAbilityLevel(target_0, 'A0EY') > 0 then
		call SetUnitLifeAndManaRegeneration(target_0, "life", -(3 * stuck_0))
		call SetHeroStr(target_0, GetHeroStr(target_0, false) - ($A * stuck_0), true)
	endif
	call SaveInteger(udg_hash_1, h_0, 1, 0)
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
	set target_0 = null
endfunction

function Trig_Warcry_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local player p = GetOwningPlayer(caster_0)
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0EY') * 2
	local integer stuck = 0
	local group g = CreateGroup()
	local unit Picked
	local unit dammi
	local timer t
	local integer h
	call GroupEnumUnitsInRange(g_0, x_0, y_0, 500., null)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if IsUnitAlly(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
			set t_0 = LoadTimerHandle(udg_hash_1, GetHandleId(Picked_0), 59)
			set stuck_0 = LoadInteger(udg_hash_1, GetHandleId(t_0), 1)
			if t_0 == null then
				set t_0 = CreateTimer()
				set stuck_0 = 0
				call SaveUnitHandle(udg_hash_1, GetHandleId(t_0), 2, Picked_0)
				call SaveTimerHandle(udg_hash_1, GetHandleId(Picked_0), 59, t_0)
			endif
			set h_0 = GetHandleId(t_0)
			if stuck_0 < lvl_0 then
				if Picked_0 == caster_0 then
					call SetHeroStr(caster_0, GetHeroStr(caster_0, false) + $A, true)
					call SetUnitLifeAndManaRegeneration(caster_0, "life", 3)
				endif
				call SetAttackSpeedAbilityLevel(Picked_0, $A)
				call SetArmorAbilityLevel(Picked_0, 3)
				call SetAttackAbilityLevel(Picked_0, 7)
				set stuck_0 = stuck_0 + 1
				call SaveInteger(udg_hash_1, h_0, 1, stuck_0)
			endif
			set dammi_0 = CreateUnit(p_0, 'h00U', x_0, y_0, .0)
			call UnitApplyTimedLife(dammi_0, 'BTLF', 1.5)
			call UnitAddAbility(dammi_0, 'A0F0')
			call SetUnitAbilityLevel(dammi_0, 'A0F0', stuck_0)
			call UnitRemoveAbility(Picked_0, 'B02J')
			call IssueTargetOrderById(dammi_0, $D0085, Picked_0)
			set dammi_0 = null
			call TimerStart(t_0, 10., false, function Trig_Warcry_Buff_Removes_Actions)
			set t_0 = null
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set caster_0 = null
	set p_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set Picked_0 = null
	set dammi_0 = null
	set t_0 = null
endfunction

function Trig_Warcry_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0EY'
endfunction

function InitTrig_Warcry takes nothing returns nothing
	local integer index = 0
	set gg_trg_Warcry_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Warcry_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Warcry_1, Condition(function Trig_Warcry_Conditions))
	call TriggerAddAction(gg_trg_Warcry_1, function Trig_Warcry_Actions)
endfunction

function Trig_Drenor_Bull_Load_Actions takes nothing returns nothing
	call AbilityPreload('A0B1', 6)
	call AbilityPreload('A0B0', 6)
	call AbilityPreload('A0B2', 6)
	call AbilityPreload('A0AZ', 3)
	call AbilityPreload('A075', 1)
	call AbilityPreload('A0AY', 1)
	call EffectPreload("Abilities\\Spells\\Orc\\WarDrums\\DrumsCasterHeal.mdl")
	call EffectPreload("Abilities\\Spells\\Orc\\StasisTrap\\StasisTotemTarget.mdl")
	call EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPriest.mdl")
	call EffectPreload("Abilities\\Spells\\NightElf\\BattleRoar\\RoarCaster.mdl")
	call EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl")
	call EffectPreload("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
	call EnableTrigger(gg_trg_Axe_Throw_1)
	call EnableTrigger(gg_trg_Violent_Roar_1)
	call EnableTrigger(gg_trg_upgrade_Berserk_1)
	call EnableTrigger(gg_trg_Learn_Spell_Rage_1)
	call EnableTrigger(gg_trg_Drenor_Bull_Show_Hint_1)
	call EnableTrigger(gg_trg_Drenor_Bull_Show_Rage_1)
endfunction

function InitTrig_Drenor_Bull_Load takes nothing returns nothing
	set gg_trg_Drenor_Bull_Load_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Drenor_Bull_Load_1, function Trig_Drenor_Bull_Load_Actions)
endfunction

function Trig_Drenor_Bull_Show_Hint_Actions takes nothing returns nothing
	call DisplayTextToForce(udg_Drenor_Bull_Hint_Player_Group_1, "Чтобы узнать количество накопленной Грог'Таром ярости, введи в чат команду \"|cff99ccff-rage/-r|r\".")
endfunction

function InitTrig_Drenor_Bull_Show_Hint takes nothing returns nothing
	set gg_trg_Drenor_Bull_Show_Hint_1 = CreateTrigger()
	call DisableTrigger(gg_trg_Drenor_Bull_Show_Hint_1)
	call TriggerRegisterTimerEventPeriodic(gg_trg_Drenor_Bull_Show_Hint_1, 120.)
	call TriggerAddAction(gg_trg_Drenor_Bull_Show_Hint_1, function Trig_Drenor_Bull_Show_Hint_Actions)
endfunction

function Trig_Drenor_Bull_Show_Rage_Conditions takes nothing returns boolean
	return (IsPlayerInForce(GetTriggerPlayer(), udg_Drenor_Bull_Hint_Player_Group_1))
endfunction

function Trig_Drenor_Bull_Show_Rage_Func001C takes nothing returns boolean
	return (udg_GrorTar_1 != null) and (GetUnitAbilityLevelSwapped('A0B2', udg_GrorTar_1) > 0)
endfunction

function Trig_Drenor_Bull_Show_Rage_Actions takes nothing returns nothing
	if (Trig_Drenor_Bull_Show_Rage_Func001C()) then
		call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()), ("Ярость Грог'Тара: |cFFF0692D" + (I2S(udg_DrenorBugaiRage_1) + ("|r ( максимум: |cFFF0692D" + (I2S(((GetUnitAbilityLevelSwapped('A0B2', udg_GrorTar_1) * '}') + (GetUnitAbilityLevelSwapped('A0AZ', udg_GrorTar_1) * 75))) + "|r)")))))
	else
		call DisplayTextToForce(GetForceOfPlayer(GetTriggerPlayer()), ("Ярость Грог'Тара: |cFFF0692D" + ("0" + ("|r ( максимум: |cFFF0692D" + ("0|r)")))))
	endif
endfunction

function InitTrig_Drenor_Bull_Show_Rage takes nothing returns nothing
	local integer index = 0
	set gg_trg_Drenor_Bull_Show_Rage_1 = CreateTrigger()
	call DisableTrigger(gg_trg_Drenor_Bull_Show_Rage_1)
	loop
		call TriggerRegisterPlayerChatEvent(gg_trg_Drenor_Bull_Show_Rage_1, Player(index_0), "-rage", true)
		call TriggerRegisterPlayerChatEvent(gg_trg_Drenor_Bull_Show_Rage_1, Player(index_0), "-r", true)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Drenor_Bull_Show_Rage_1, Condition(function Trig_Drenor_Bull_Show_Rage_Conditions))
	call TriggerAddAction(gg_trg_Drenor_Bull_Show_Rage_1, function Trig_Drenor_Bull_Show_Rage_Actions)
endfunction

function Trig_Axe_Throw_move_2 takes nothing returns nothing
	call KillDestructable(GetEnumDestructable())
endfunction

function Trig_Axe_Throw_move_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit axe = LoadUnitHandle(udg_hash_1, h_0, 1)
	local group g = LoadGroupHandle(udg_hash_1, h_0, 2)
	local real damage = LoadReal(udg_hash_1, h_0, 3)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 6)
	local player p = GetOwningPlayer(caster_0)
	local integer wait = LoadInteger(udg_hash_1, h_0, 5)
	local real x = GetUnitX(axe_0) + 32. * Cos(GetUnitFacing(axe_0) * bj_DEGTORAD_1)
	local real y = GetUnitY(axe_0) + 32. * Sin(GetUnitFacing(axe_0) * bj_DEGTORAD_1)
	local rect r = Rect(x_0 - 130., y_0 - 130., x_0 + 130., y_0 + 130.)
	local group grup = CreateGroup()
	local unit Picked
	local unit dammi
	if wait_0 > 0 then
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 5, wait_0)
		call EnumDestructablesInRect(r_0, null, function Trig_Axe_Throw_move_2)
		if IsTerrainPathable(x_0, y_0, PATHING_TYPE_FLYABILITY_1) == false then
			call SetUnitPosition(axe_0, x_0, y_0)
		endif
		if wait_0 == 20 or wait_0 == 16 or wait_0 == $C or wait_0 == 8 or wait_0 == 4 then
			call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl", x_0, y_0))
		endif
		call GroupEnumUnitsInRange(grup_0, x_0, y_0, '}', null)
		loop
			set Picked_0 = FirstOfGroup(grup_0)
			exitwhen Picked_0 == null
			if IsUnitEnemy(Picked_0, GetOwningPlayer(axe_0)) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitInGroup(Picked_0, g_0) == false and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
				set dammi_0 = CreateUnit(p_0, 'h00U', x_0, y_0, .0)
				call UnitApplyTimedLife(dammi_0, 'BTLF', .5)
				call UnitAddAbility(dammi_0, 'A0F1')
				call IssueTargetOrderById(dammi_0, $D007F, Picked_0)
				set dammi_0 = null
				call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPriest.mdl", Picked_0, "chest"))
				call GroupAddUnit(g_0, Picked_0)
			endif
			call GroupRemoveUnit(grup_0, Picked_0)
		endloop
		call SaveGroupHandle(udg_hash_1, h_0, 2, g_0)
	else
		call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", x_0, y_0))
		call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl", x_0, y_0))
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
		call KillUnit(axe_0)
		call RemoveUnit(dammi_0)
		call GroupClear(g_0)
		call DestroyGroup(g_0)
		set g_0 = null
	endif
	set Picked_0 = null
	call DestroyGroup(grup_0)
	set grup_0 = null
	set t_0 = null
	set axe_0 = null
	set g_0 = null
	set dammi_0 = null
	call RemoveRect(r_0)
	set r_0 = null
	set caster_0 = null
	set p_0 = null
endfunction

function Trig_Axe_Throw_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local location loc
	local real xt
	local real yt
	local unit axe
	local group g = CreateGroup()
	local real damage3 = 10. + (50. * I2R(GetUnitAbilityLevel(caster_0, 'A0B1')))
	local real damage2 = I2R(udg_DrenorBugaiRage_1) / 3.
	local real damage = (1. + (.2 * I2R(GetUnitAbilityLevel(caster_0, 'A0AZ')))) * (damage2_0 + damage3_0)
	local integer wait = 20
	if GetSpellTargetUnit() == null then
		set loc_0 = GetSpellTargetLoc()
		set xt_0 = GetLocationX(loc_0)
		set yt_0 = GetLocationY(loc_0)
		call RemoveLocation(loc_0)
		set loc_0 = null
	else
		set xt_0 = GetUnitX(GetSpellTargetUnit())
		set yt_0 = GetUnitY(GetSpellTargetUnit())
	endif
	if (udg_DrenorBugaiRage_1 <= ((('}' * GetUnitAbilityLevel(caster_0, 'A0B2') + (75 * GetUnitAbilityLevel(caster_0, 'A0AZ'))) - 30))) then
		set udg_DrenorBugaiRage_1 = udg_DrenorBugaiRage_1 + 30
		call SetAttackSpeedAbilityLevel(udg_GrorTar_1, 6)
	endif
	call DisableTrigger(gg_trg_Sniatie_Rage_1)
	call TimerStart(udg_GrogTarRageTimer_1, 4., false, null)
	set axe_0 = CreateUnit(GetOwningPlayer(caster_0), 'h01J', x_0, y_0, bj_RADTODEG_1 * Atan2(yt_0 - y_0, xt_0 - x_0))
	call UnitAddAbility(axe_0, 'Amrf')
	call UnitRemoveAbility(axe_0, 'Amrf')
	call SetUnitTimeScale(axe_0, 2.5)
	call SetUnitFlyHeight(axe_0, 15., 80.)
	call SaveUnitHandle(udg_hash_1, h_0, 1, axe_0)
	call SaveGroupHandle(udg_hash_1, h_0, 2, g_0)
	call SaveReal(udg_hash_1, h_0, 3, damage_0)
	call SaveInteger(udg_hash_1, h_0, 5, wait_0)
	call SaveUnitHandle(udg_hash_1, h_0, 6, caster_0)
	call TimerStart(t_0, .03, true, function Trig_Axe_Throw_move_Actions)
	set caster_0 = null
	set t_0 = null
	set axe_0 = null
	set g_0 = null
endfunction

function Trig_Axe_Throw_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0B1'
endfunction

function InitTrig_Axe_Throw takes nothing returns nothing
	local integer index = 0
	set gg_trg_Axe_Throw_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Axe_Throw_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Axe_Throw_1, Condition(function Trig_Axe_Throw_Conditions))
	call TriggerAddAction(gg_trg_Axe_Throw_1, function Trig_Axe_Throw_Actions)
endfunction

function Trig_Violent_Roar_periodic takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local real xc = LoadReal(udg_hash_1, h_0, 2)
	local real yc = LoadReal(udg_hash_1, h_0, 3)
	local real damage = LoadReal(udg_hash_1, h_0, 4)
	local integer wait = LoadInteger(udg_hash_1, h_0, 5)
	local group g = CreateGroup()
	local unit Picked
	local unit dammi
	local real angle
	local real x
	local real y
	local real dist
	if wait_0 > 0 then
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 5, wait_0)
		if wait_0 == $E then
			call GroupEnumUnitsInRange(g_0, xc_0, yc_0, 400., null)
			loop
				set Picked_0 = FirstOfGroup(g_0)
				exitwhen Picked_0 == null
				if IsUnitEnemy(Picked_0, GetOwningPlayer(caster_0)) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
					set dammi_0 = CreateUnit(GetOwningPlayer(caster_0), 'h00U', GetUnitX(Picked_0), GetUnitY(Picked_0), .0)
					call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
					call UnitAddAbility(dammi_0, 'A075')
					call IssueTargetOrderById(dammi_0, $D00DD, Picked_0)
					set dammi_0 = null
				endif
				call GroupRemoveUnit(g_0, Picked_0)
			endloop
			set Picked_0 = null
		endif
		call GroupEnumUnitsInRange(g_0, xc_0, yc_0, 400., null)
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if IsUnitEnemy(Picked_0, GetOwningPlayer(caster_0)) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				set x_0 = GetUnitX(Picked_0)
				set y_0 = GetUnitY(Picked_0)
				set angle_0 = bj_RADTODEG_1 * Atan2(y_0 - yc_0, x_0 - xc_0)
				set dist_0 = SquareRoot((x_0 - xc_0) * (x_0 - xc_0) + (y_0 - yc_0) * (y_0 - yc_0))
				set x_0 = GetUnitX(Picked_0) + (21. - (dist_0 / 20.)) * Cos(angle_0 * bj_DEGTORAD_1)
				set y_0 = GetUnitY(Picked_0) + (21. - (dist_0 / 20.)) * Sin(angle_0 * bj_DEGTORAD_1)
				if IsTerrainPathable(x_0, y_0, PATHING_TYPE_WALKABILITY_1) == false and GetTerrainCliffLevel(x_0, y_0) == GetTerrainCliffLevel(GetUnitX(Picked_0) - (21. - (dist_0 / 20.)) * Cos(angle_0 * bj_DEGTORAD_1), GetUnitY(Picked_0) - (21. - (dist_0 / 20.)) * Sin(angle_0 * bj_DEGTORAD_1)) then
					call SetUnitX(Picked_0, x_0)
					call SetUnitY(Picked_0, y_0)
				endif
				if wait_0 == $E then
					call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", Picked_0, "chest"))
				endif
				call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		set Picked_0 = null
	else
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set caster_0 = null
	call DestroyGroup(g_0)
	set g_0 = null
endfunction

function Trig_Violent_Roar_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local integer wait = $F
	local real ultalvl = 1. + (.2 * I2R(GetUnitAbilityLevel(caster_0, 'A0AZ')))
	local real abilitylvl = 15. + (20. * I2R(GetUnitAbilityLevel(caster_0, 'A0B0')))
	local real udgrage = I2R(udg_DrenorBugaiRage_1) / 20.
	local real herostr = I2R(GetUnitAbilityLevel(caster_0, 'A0B0')) * (.2 * GetHeroStr(caster_0, true))
	local real damage = (ultalvl_0 * (abilitylvl_0 + udgrage_0 + herostr_0)) / wait_0
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	if (udg_DrenorBugaiRage_1 <= ((('}' * GetUnitAbilityLevel(caster_0, 'A0B2') + (75 * GetUnitAbilityLevel(caster_0, 'A0AZ'))) - 30))) then
		set udg_DrenorBugaiRage_1 = udg_DrenorBugaiRage_1 + 30
		call SetAttackSpeedAbilityLevel(udg_GrorTar_1, 6)
	endif
	call DisableTrigger(gg_trg_Sniatie_Rage_1)
	call TimerStart(udg_GrogTarRageTimer_1, 4., false, null)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveReal(udg_hash_1, h_0, 2, x_0)
	call SaveReal(udg_hash_1, h_0, 3, y_0)
	call SaveReal(udg_hash_1, h_0, 4, damage_0)
	call SaveInteger(udg_hash_1, h_0, 5, wait_0)
	call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\NightElf\\BattleRoar\\RoarCaster.mdl", x_0, y_0))
	call TimerStart(t_0, .04, true, function Trig_Violent_Roar_periodic)
endfunction

function Trig_Violent_Roar_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0B0'
endfunction

function InitTrig_Violent_Roar takes nothing returns nothing
	local integer index = 0
	set gg_trg_Violent_Roar_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Violent_Roar_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Violent_Roar_1, Condition(function Trig_Violent_Roar_Conditions))
	call TriggerAddAction(gg_trg_Violent_Roar_1, function Trig_Violent_Roar_Actions)
endfunction

function Trig_upgrade_Berserk_Conditions takes nothing returns boolean
	return GetLearnedSkill() == 'A0AZ'
endfunction

function Trig_upgrade_Berserk_Actions takes nothing returns nothing
	call SetPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()), 'R007', GetLearnedSkillLevel())
endfunction

function InitTrig_upgrade_Berserk takes nothing returns nothing
	local integer index = 0
	set gg_trg_upgrade_Berserk_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_upgrade_Berserk_1, Player(index_0), EVENT_PLAYER_HERO_SKILL_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_upgrade_Berserk_1, Condition(function Trig_upgrade_Berserk_Conditions))
	call TriggerAddAction(gg_trg_upgrade_Berserk_1, function Trig_upgrade_Berserk_Actions)
endfunction

function Trig_Learn_Spell_Rage_Actions_Timer takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit hero = LoadUnitHandle(udg_hash_1, h_0, 1)
	local texttag txt = LoadTextTagHandle(udg_hash_1, h_0, 2)
	local real x = GetUnitX(hero_0)
	local real y = GetUnitY(hero_0)
	local boolean alife = LoadBoolean(udg_hash_1, h_0, 3)
	if (GetUnitState(hero_0, UNIT_STATE_LIFE_1) < .405 and alife_0) then
		set alife_0 = false
		call SaveBoolean(udg_hash_1, h_0, 3, alife_0)
		call SetTextTagVisibility(txt_0, false)
	endif
	if (GetUnitState(hero_0, UNIT_STATE_LIFE_1) > .405 and alife_0 == false) then
		set alife_0 = true
		call SaveBoolean(udg_hash_1, h_0, 3, alife_0)
		call SetTextTagVisibility(txt_0, true)
	endif
	if (GetUnitState(hero_0, UNIT_STATE_LIFE_1) > .405 and alife_0) then
		set alife_0 = true
		call SaveBoolean(udg_hash_1, h_0, 3, alife_0)
		call SetTextTagText(txt_0, "|cFFF0692D" + I2S(udg_DrenorBugaiRage_1) + "|r|cFF969696/|r|cFFF0692D" + I2S(((('}' * GetUnitAbilityLevel(hero_0, 'A0B2') + (75 * GetUnitAbilityLevel(hero_0, 'A0AZ')))))) + "|r", .027)
		call SetTextTagPos(txt_0, GetUnitX(hero_0) - 40., GetUnitY(hero_0) + 100., .0)
	endif
	set t_0 = null
	set hero_0 = null
	set txt_0 = null
endfunction

function Trig_Learn_Spell_Rage_Actions takes nothing returns nothing
	local integer lvl = GetUnitAbilityLevel(GetLearningUnit(), 'A0B2')
	local timer t
	local integer h
	local texttag txt
	local unit hero
	if lvl_0 == 1 then
		set udg_GrorTar_1 = GetLearningUnit()
		set udg_DrenorBugaiRage_1 = 0
		call EnableTrigger(gg_trg_attack_hero_Rage_1)
		call EnableTrigger(gg_trg_kill_hero_Rage_1)
		call EnableTrigger(gg_trg_Timer_Rage_1)
		call EnableTrigger(gg_trg_GrogTarDead_1)
		set t_0 = CreateTimer()
		set h_0 = GetHandleId(t_0)
		set txt_0 = CreateTextTag()
		set hero_0 = GetLearningUnit()
		call SetTextTagText(txt_0, "|cFFF0692D" + I2S(udg_DrenorBugaiRage_1) + "|r|cFF969696/|r|cFFF0692D" + I2S(((('}' * GetUnitAbilityLevel(hero_0, 'A0B2') + (75 * GetUnitAbilityLevel(hero_0, 'A0AZ')))))) + "|r", .027)
		call SetTextTagColor(txt_0, $FF, $FF, $FF, $FF)
		call SetTextTagPos(txt_0, GetUnitX(hero_0) - 40., GetUnitY(hero_0) + 50., .0)
		call SetTextTagPermanent(txt_0, true)
		call SaveUnitHandle(udg_hash_1, h_0, 1, hero_0)
		call SaveTextTagHandle(udg_hash_1, h_0, 2, txt_0)
		call SaveBoolean(udg_hash_1, h_0, 3, true)
		call TimerStart(t_0, .03, true, function Trig_Learn_Spell_Rage_Actions_Timer)
		set t_0 = null
		set hero_0 = null
		set txt_0 = null
	endif
endfunction

function Trig_Learn_Spell_Rage_Conditions takes nothing returns boolean
	return GetUnitAbilityLevel(GetLearningUnit(), 'A0B2') >= 1 and GetUnitTypeId(GetLearningUnit()) != 'h00U' and GetLearnedSkill() == 'A0B2'
endfunction

function InitTrig_Learn_Spell_Rage takes nothing returns nothing
	local integer index = 0
	set gg_trg_Learn_Spell_Rage_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Spell_Rage_1, Player(index_0), EVENT_PLAYER_HERO_SKILL_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Learn_Spell_Rage_1, Condition(function Trig_Learn_Spell_Rage_Conditions))
	call TriggerAddAction(gg_trg_Learn_Spell_Rage_1, function Trig_Learn_Spell_Rage_Actions)
endfunction

function Trig_GrogTarDead_Actions takes nothing returns nothing
	call SetAttackSpeedAbilityLevel(udg_GrorTar_1, -udg_DrenorBugaiRage_1 / 5)
	set udg_DrenorBugaiRage_1 = 0
	call DisableTrigger(gg_trg_Sniatie_Rage_1)
endfunction

function Trig_GrogTarDead_Conditions takes nothing returns boolean
	return GetDyingUnit() == udg_GrorTar_1
endfunction

function InitTrig_GrogTarDead takes nothing returns nothing
	local integer index = 0
	set gg_trg_GrogTarDead_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_GrogTarDead_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_GrogTarDead_1, Condition(function Trig_GrogTarDead_Conditions))
	call TriggerAddAction(gg_trg_GrogTarDead_1, function Trig_GrogTarDead_Actions)
endfunction

function Trig_attack_hero_Rage_Conditions takes nothing returns boolean
	return IsUnitEnemy(GetAttacker(), GetOwningPlayer(GetTriggerUnit())) and (GetUnitAbilityLevel(GetTriggerUnit(), 'A0B2') >= 1)
endfunction

function Trig_attack_hero_Rage_Actions takes nothing returns nothing
	local integer addrage = 0
	if (GetRandomInt(1, 2) == 1) then
		if udg_DrenorBugaiRage_1 <= ((('}' * (GetUnitAbilityLevel(GetTriggerUnit(), 'A0B2'))) + (75 * (GetUnitAbilityLevel(GetTriggerUnit(), 'A0AZ')))) - 1) then
			set udg_DrenorBugaiRage_1 = udg_DrenorBugaiRage_1 + 1
			set addrage_0 = addrage_0 + 1
			if (udg_DrenorBugaiRage_1 / 5) * 5 >= udg_DrenorBugaiRage_1 then
				call SetAttackSpeedAbilityLevel(udg_GrorTar_1, 1)
			endif
		else
			set udg_DrenorBugaiRage_1 = (((('}' * (GetUnitAbilityLevel(GetTriggerUnit(), 'A0B2')))) + (75 * (GetUnitAbilityLevel(GetTriggerUnit(), 'A0AZ')))))
		endif
	endif
	call DisableTrigger(gg_trg_Sniatie_Rage_1)
	call TimerStart(udg_GrogTarRageTimer_1, 4., false, null)
endfunction

function InitTrig_attack_hero_Rage takes nothing returns nothing
	local integer index = 0
	set gg_trg_attack_hero_Rage_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_attack_hero_Rage_1, Player(index_0), EVENT_PLAYER_UNIT_ATTACKED_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call DisableTrigger(gg_trg_attack_hero_Rage_1)
	call TriggerAddCondition(gg_trg_attack_hero_Rage_1, Condition(function Trig_attack_hero_Rage_Conditions))
	call TriggerAddAction(gg_trg_attack_hero_Rage_1, function Trig_attack_hero_Rage_Actions)
endfunction

function Trig_kill_hero_Rage_Conditions takes nothing returns boolean
	return (GetUnitAbilityLevel(GetKillingUnit(), 'A0B2') >= 1)
endfunction

function Trig_kill_hero_Rage_Actions takes nothing returns nothing
	local integer addrage = 0
	if (udg_DrenorBugaiRage_1 <= ((('}' * GetUnitAbilityLevel(GetKillingUnit(), 'A0B2'))) + (75 * GetUnitAbilityLevel(GetKillingUnit(), 'A0AZ'))) - 5) then
		set udg_DrenorBugaiRage_1 = udg_DrenorBugaiRage_1 + 5
		set addrage_0 = addrage_0 + 5
		call SetAttackSpeedAbilityLevel(udg_GrorTar_1, 1)
		if (IsUnitType(GetDyingUnit(), UNIT_TYPE_ANCIENT_1) or IsUnitType(GetDyingUnit(), UNIT_TYPE_HERO_1)) and (udg_DrenorBugaiRage_1 <= ((('}' * GetUnitAbilityLevel(GetKillingUnit(), 'A0B2'))) + (75 * GetUnitAbilityLevel(GetKillingUnit(), 'A0AZ'))) - 85) then
			set udg_DrenorBugaiRage_1 = udg_DrenorBugaiRage_1 + 85
			set addrage_0 = addrage_0 + 85
			call SetAttackSpeedAbilityLevel(udg_GrorTar_1, 9)
		endif
	endif
	call DisableTrigger(gg_trg_Sniatie_Rage_1)
	call TimerStart(udg_GrogTarRageTimer_1, 4., false, null)
endfunction

function InitTrig_kill_hero_Rage takes nothing returns nothing
	local integer index = 0
	set gg_trg_kill_hero_Rage_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_kill_hero_Rage_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call DisableTrigger(gg_trg_kill_hero_Rage_1)
	call TriggerAddCondition(gg_trg_kill_hero_Rage_1, Condition(function Trig_kill_hero_Rage_Conditions))
	call TriggerAddAction(gg_trg_kill_hero_Rage_1, function Trig_kill_hero_Rage_Actions)
endfunction

function Trig_Sniatie_Rage_Action takes nothing returns nothing
	if udg_DrenorBugaiRage_1 >= 20 then
		set udg_DrenorBugaiRage_1 = udg_DrenorBugaiRage_1 - 20
		call SetAttackSpeedAbilityLevel(udg_GrorTar_1, -4)
	else
		set udg_Temp_Integer_1[0] = ('}' * (GetUnitAbilityLevel(udg_GrorTar_1, 'A0B2'))) + (75 * (GetUnitAbilityLevel(udg_GrorTar_1, 'A0AZ')))
		call SetAttackSpeedAbilityLevel(udg_GrorTar_1, -udg_DrenorBugaiRage_1 / 5)
		set udg_DrenorBugaiRage_1 = 0
	endif
endfunction

function InitTrig_Sniatie_Rage takes nothing returns nothing
	set gg_trg_Sniatie_Rage_1 = CreateTrigger()
	call TriggerRegisterTimerEvent(gg_trg_Sniatie_Rage_1, 3., true)
	call TriggerAddAction(gg_trg_Sniatie_Rage_1, function Trig_Sniatie_Rage_Action)
	call DisableTrigger(gg_trg_Sniatie_Rage_1)
endfunction

function Trig_Timer_last_Actions takes nothing returns nothing
	call EnableTrigger(gg_trg_Sniatie_Rage_1)
endfunction

function InitTrig_Timer_Rage takes nothing returns nothing
	set gg_trg_Timer_Rage_1 = CreateTrigger()
	call TriggerRegisterTimerExpireEvent(gg_trg_Timer_Rage_1, udg_GrogTarRageTimer_1)
	call TriggerAddAction(gg_trg_Timer_Rage_1, function Trig_Timer_last_Actions)
endfunction

function Trig_Illusionist_Load_Actions takes nothing returns nothing
	call AbilityPreload('A0F6', 6)
	call AbilityPreload('A0F5', 6)
	call AbilityPreload('A0F3', 6)
	call AbilityPreload('A0F2', 3)
	call AbilityPreload('A0F7', 6)
	call AbilityPreload('A0AY', 4)
	call AbilityPreload('A0F4', 6)
	call AbilityPreload('B02L', 1)
	call AbilityPreload('B02K', 1)
	call AbilityPreload('B02M', 1)
	call EffectPreload("Abilities\\Spells\\Orc\\Devour\\DevourEffectArt.mdl")
	call EffectPreload("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageDeathCaster.mdl")
	call EffectPreload("Abilities\\Spells\\Undead\\Curse\\CurseTarget.mdl")
	call EffectPreload("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageMissile.mdl")
	call EffectPreload("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageCaster.mdl")
	call EffectPreload("Abilities\\Spells\\Other\\Levelup\\LevelupCaster.mdl")
	call EffectPreload("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathMissile.mdl")
	call EffectPreload("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayDamage.mdl")
	call EffectPreload("Abilities\\Spells\\Undead\\DeathPact\\DeathPactCaster.mdl")
	call EffectPreload("Abilities\\Spells\\Undead\\DeathPact\\DeathPactTarget.mdl")
	call EnableTrigger(gg_trg_Reflection_1)
	call EnableTrigger(gg_trg_Illusory_Attack_1)
	call EnableTrigger(gg_trg_Summon_Illusions_with_Reflection_1)
	call EnableTrigger(gg_trg_Illusions_with_Phantoms_Dead_1)
endfunction

function InitTrig_Illusionist_Load takes nothing returns nothing
	set gg_trg_Illusionist_Load_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Illusionist_Load_1, function Trig_Illusionist_Load_Actions)
endfunction

function Trig_Reflection_perodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local rect r = LoadRectHandle(udg_hash_1, h_0, 2)
	local real x = GetRectCenterX(r_0)
	local real y = GetRectCenterY(r_0)
	local real tx
	local real ty
	local integer wait = LoadInteger(udg_hash_1, h_0, 3)
	local real damage = LoadReal(udg_hash_1, h_0, 4)
	local player p = GetOwningPlayer(caster_0)
	local integer order = GetUnitCurrentOrder(caster_0)
	local group g = CreateGroup()
	local group gdamage = CreateGroup()
	local unit Picked
	local unit dammi
	local unit dammi2
	local unit target
	local integer orderId
	set orderId_0 = $D0278
	if (orderId_0 != 0) then
	else
		set orderId_0 = UnitId("channel")
		if (orderId_0 != 0) then
		endif
	endif
	if order_0 == orderId_0 and wait_0 > 0 then
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 3, wait_0)
		call GroupEnumUnitsInRect(g_0, r_0, null)
		call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathPact\\DeathPactTarget.mdl", caster_0, "chest"))
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if IsUnitEnemy(Picked_0, p_0) and (GetPlayerId(GetOwningPlayer(Picked_0)) != $D) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call GroupAddUnit(gdamage_0, Picked_0)
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		set Picked_0 = null
		call GroupClear(g_0)
		call RandomUnitFromGroup(1, gdamage_0)
		call GroupAddGroup(udg_GroupRandomUnitFromGroup_1, g_0)
		set target_0 = FirstOfGroup(g_0)
		set tx_0 = GetUnitX(target_0)
		set ty_0 = GetUnitY(target_0)
		set dammi2_0 = CreateUnit(p_0, 'h00U', x_0, y_0, .0)
		call UnitApplyTimedLife(dammi2_0, 'BTLF', 1.)
		call UnitAddAbility(dammi2_0, 'A0F4')
		call SetUnitAbilityLevel(dammi2_0, 'A0F4', GetUnitAbilityLevel(caster_0, 'A0F6'))
		call IssueTargetOrderById(dammi2_0, $D006B, target_0)
		set dammi_0 = CreateUnit(p_0, 'h00U', x_0, y_0, .0)
		call SaveUnitHandle(udg_hash_1, GetHandleId(dammi_0), 2, target_0)
		call SaveBoolean(udg_hash_1, GetHandleId(dammi_0), 3, true)
		call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
		call UnitAddAbility(dammi_0, 'A0AY')
		call SetUnitAbilityLevel(dammi_0, 'A0AY', 1 + GetUnitAbilityLevel(caster_0, 'A0F2'))
		call IssueTargetOrderById(dammi_0, $D0132, caster_0)
		call GroupClear(gdamage_0)
		call GroupEnumUnitsInRange(gdamage_0, tx_0, ty_0, 150., null)
		call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathPact\\DeathPactCaster.mdl", target_0, "origin"))
		loop
			set Picked_0 = FirstOfGroup(gdamage_0)
			exitwhen Picked_0 == null
			if IsUnitEnemy(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayDamage.mdl", Picked_0, "origin"))
			endif
			call GroupRemoveUnit(gdamage_0, Picked_0)
		endloop
	else
		call SetUnitVertexColor(caster_0, $FF, $FF, $FF, $FF)
		call RemoveRect(r_0)
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
		call RemoveUnit(LoadUnitHandle(udg_hash_1, GetHandleId(caster_0), 'u'))
	endif
	set t_0 = null
	set caster_0 = null
	set r_0 = null
	set p_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	call GroupClear(gdamage_0)
	call DestroyGroup(gdamage_0)
	set gdamage_0 = null
	set Picked_0 = null
	set dammi_0 = null
	set dammi2_0 = null
	set target_0 = null
endfunction

function Trig_Reflection_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0F6')
	local integer wait = lvl_0 + 2
	local location loc = GetSpellTargetLoc()
	local real x = GetLocationX(loc_0)
	local real y = GetLocationY(loc_0)
	local rect r = Rect(x_0 - 350., y_0 - 350., x_0 + 350., y_0 + 350.)
	local real damage = $A + 5 * lvl_0 + (.1 + (.05 * lvl_0)) * GetHeroAgi(caster_0, true)
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveRectHandle(udg_hash_1, h_0, 2, r_0)
	call SaveInteger(udg_hash_1, h_0, 3, wait_0)
	call SaveReal(udg_hash_1, h_0, 4, damage_0)
	call AddProgressBar(caster_0, 215. + (1.5 * lvl_0), (.9 + .1 * lvl_0), (.3 * wait_0), false, true, 'u', $B4, $96, $AF)
	call SetUnitVertexColor(caster_0, $C8, $C8, $C8, 'd')
	call TimerStart(t_0, .3, true, function Trig_Reflection_perodic_Actions)
	set caster_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set r_0 = null
	set t_0 = null
endfunction

function Trig_Reflection_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0F6'
endfunction

function InitTrig_Reflection takes nothing returns nothing
	local integer index = 0
	set gg_trg_Reflection_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Reflection_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Reflection_1, Condition(function Trig_Reflection_Conditions))
	call TriggerAddAction(gg_trg_Reflection_1, function Trig_Reflection_Actions)
endfunction

function Trig_Illusory_Attack_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local unit target = GetSpellTargetUnit()
	local real angle = GetRandomReal(.0, 360.)
	local real x = GetUnitX(target_0) + 50. * Cos(angle_0 * bj_DEGTORAD_1)
	local real y = GetUnitY(target_0) + 50. * Sin(angle_0 * bj_DEGTORAD_1)
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0F5')
	local real damage = (GetHeroAgi(caster_0, true) * (.25 * lvl_0 + .5)) + (lvl_0 * 25 + $F)
	local unit dammi = CreateUnit(GetOwningPlayer(caster_0), 'h00U', x_0, y_0, .0)
	local unit dammi2 = CreateUnit(GetOwningPlayer(caster_0), 'h00U', x_0, y_0, .0)
	call SaveUnitHandle(udg_hash_1, GetHandleId(dammi_0), 4, target_0)
	call SaveBoolean(udg_hash_1, GetHandleId(dammi_0), 5, true)
	call SaveReal(udg_hash_1, GetHandleId(dammi_0), 6, (angle_0 + 180.))
	call SetUnitPosition(caster_0, x_0, y_0)
	call UnitApplyTimedLife(dammi2_0, 'BTLF', 1.)
	call UnitAddAbility(dammi2_0, 'A0F7')
	call SetUnitAbilityLevel(dammi2_0, 'A0F7', lvl_0)
	call IssueTargetOrderById(dammi2_0, $D007F, target_0)
	call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
	call UnitAddAbility(dammi_0, 'A0AY')
	call SetUnitAbilityLevel(dammi_0, 'A0AY', 1 + GetUnitAbilityLevel(caster_0, 'A0F2'))
	call IssueTargetOrderById(dammi_0, $D0132, caster_0)
	call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathMissile.mdl", target_0, "origin"))
	call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathMissile.mdl", target_0, "chest"))
	call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathMissile.mdl", target_0, "overhead"))
	call UnitDamageTarget(caster_0, target_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_NORMAL_1, WEAPON_TYPE_WHOKNOWS_1)
	call IssueTargetOrderById(caster_0, $D000F, target_0)
	set caster_0 = null
	set target_0 = null
	set dammi_0 = null
	set dammi2_0 = null
endfunction

function Trig_Illusory_Attack_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0F5'
endfunction

function InitTrig_Illusory_Attack takes nothing returns nothing
	local integer index = 0
	set gg_trg_Illusory_Attack_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Illusory_Attack_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Illusory_Attack_1, Condition(function Trig_Illusory_Attack_Conditions))
	call TriggerAddAction(gg_trg_Illusory_Attack_1, function Trig_Illusory_Attack_Actions)
endfunction

function Trig_Summon_Illusions_with_Reflection_Actions takes nothing returns nothing
	local unit illusion = GetSummonedUnit()
	local unit dammi = GetSummoningUnit()
	local unit target
	local integer idhero = GetHandleId(udg_herounit_1[GetPlayerId(GetOwningPlayer(illusion_0)) + 1])
	if LoadBoolean(udg_hash_1, GetHandleId(dammi_0), 3) then
		set target_0 = LoadUnitHandle(udg_hash_1, GetHandleId(dammi_0), 2)
		if target_0 != null then
			call SetUnitPosition(illusion_0, GetUnitX(target_0), GetUnitY(target_0))
			call SetUnitPosition(illusion_0, GetUnitX(target_0) + 75. * Cos(GetRandomReal(.0, 360.) * bj_DEGTORAD_1), GetUnitY(target_0) + 75. * Sin(GetRandomReal(.0, 360.) * bj_DEGTORAD_1))
			call UnitApplyTimedLife(illusion_0, 'BTLF', 5.)
			call UnitAddAbility(illusion_0, 'Aloc')
			call UnitRemoveAbility(illusion_0, 'A0F3')
			call SetUnitVertexColor(illusion_0, $96, $96, $96, 'd')
			call IssueTargetOrderById(illusion_0, $D000F, target_0)
		else
			call RemoveUnit(illusion_0)
		endif
	else
		if LoadBoolean(udg_hash_1, GetHandleId(dammi_0), 5) then
			set target_0 = LoadUnitHandle(udg_hash_1, GetHandleId(dammi_0), 4)
			call SetUnitPosition(illusion_0, GetUnitX(target_0) + 50. * Cos(LoadReal(udg_hash_1, GetHandleId(dammi_0), 6) * bj_DEGTORAD_1), GetUnitY(target_0) + 50. * Sin(LoadReal(udg_hash_1, GetHandleId(dammi_0), 6) * bj_DEGTORAD_1))
			call IssueTargetOrderById(illusion_0, $D000F, target_0)
		else
			call SaveInteger(udg_hash_1, idhero_0, 60, LoadInteger(udg_hash_1, idhero_0, 60) + 1)
			call SaveInteger(udg_hash_1, GetHandleId(illusion_0), 1, $A)
		endif
	endif
	set dammi_0 = null
	set illusion_0 = null
	set target_0 = null
endfunction

function Trig_Summon_Illusions_with_Reflection_Conditions takes nothing returns boolean
	return GetUnitTypeId(GetSummonedUnit()) == 'E004' and GetUnitAbilityLevel(GetSummoningUnit(), 'A0AY') > 0
endfunction

function InitTrig_Summon_Illusions_with_Reflection takes nothing returns nothing
	local integer index = 0
	set gg_trg_Summon_Illusions_with_Reflection_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Summon_Illusions_with_Reflection_1, Player(index_0), EVENT_PLAYER_UNIT_SUMMON_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Summon_Illusions_with_Reflection_1, Condition(function Trig_Summon_Illusions_with_Reflection_Conditions))
	call TriggerAddAction(gg_trg_Summon_Illusions_with_Reflection_1, function Trig_Summon_Illusions_with_Reflection_Actions)
endfunction

function Trig_Illusions_with_Phantoms_Dead_Actions takes nothing returns nothing
	local integer idhero = GetHandleId(udg_herounit_1[GetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1])
	local integer count = LoadInteger(udg_hash_1, idhero_0, 60)
	if count_0 > 0 then
		call SaveInteger(udg_hash_1, idhero_0, 60, count_0 - 1)
	endif
endfunction

function Trig_Illusions_with_Phantoms_Dead_Conditions takes nothing returns boolean
	return GetUnitTypeId(GetDyingUnit()) == 'E004' and IsUnitIllusion(GetDyingUnit()) and HaveSavedInteger(udg_hash_1, GetHandleId(GetDyingUnit()), 1)
endfunction

function InitTrig_Illusions_with_Phantoms_Dead takes nothing returns nothing
	local integer index = 0
	set gg_trg_Illusions_with_Phantoms_Dead_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Illusions_with_Phantoms_Dead_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Illusions_with_Phantoms_Dead_1, Condition(function Trig_Illusions_with_Phantoms_Dead_Conditions))
	call TriggerAddAction(gg_trg_Illusions_with_Phantoms_Dead_1, function Trig_Illusions_with_Phantoms_Dead_Actions)
endfunction

function Trig_BladeMaster_Load_Actions takes nothing returns nothing
	call AbilityPreload('A0FG', 6)
	call AbilityPreload('A0FH', 6)
	call AbilityPreload('A0FF', 6)
	call AbilityPreload('A0G2', 3)
	call AbilityPreload('A0G1', 4)
	call AbilityPreload('A0G3', 1)
	call AbilityPreload('A0GH', 1)
	call AbilityPreload('B02W', 1)
	call AbilityPreload('B02X', 1)
	call EffectPreload("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl")
	call EffectPreload("Abilities\\Weapons\\ZigguratMissile\\ZigguratMissile.mdl")
	call EffectPreload("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl")
	call EffectPreload("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
	call EffectPreload("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile.mdl")
	call EffectPreload("Abilities\\Spells\\NightElf\\Blink\\BlinkCaster.mdl")
	call EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl")
	call EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodMortarTeam.mdl")
	call EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodFootman.mdl")
	call EnableTrigger(gg_trg_Dissection_1)
	call EnableTrigger(gg_trg_Whirlwind_1)
	call EnableTrigger(gg_trg_Imboweling_1)
endfunction

function InitTrig_BladeMaster_Load takes nothing returns nothing
	set gg_trg_BladeMaster_Load_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_BladeMaster_Load_1, function Trig_BladeMaster_Load_Actions)
endfunction

function Trig_Dissection_Periodic_Damage_Target_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit Picked = LoadUnitHandle(udg_hash_1, h_0, 1)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 2)
	local real periodicdamage = LoadReal(udg_hash_1, h_0, 3)
	local integer wait = LoadInteger(udg_hash_1, h_0, 4)
	if wait_0 > 0 and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 and GetUnitAbilityLevel(Picked_0, 'B02W') > 0 then
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 4, wait_0)
		call UnitDamageTarget(caster_0, Picked_0, (periodicdamage_0 / 40), false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
		if wait_0 == 30 or wait_0 == 20 or wait_0 == $A then
			call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodMortarTeam.mdl", Picked_0, "origin"))
		endif
	else
		call DestroyTimer(t_0)
		call FlushChildHashtable(udg_hash_1, h_0)
	endif
	set t_0 = null
	set Picked_0 = null
	set caster_0 = null
endfunction

function Trig_Dissection_Periodic_Move_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local real xc = GetUnitX(caster_0)
	local real yc = GetUnitY(caster_0)
	local real xt = LoadReal(udg_hash_1, h_0, 2)
	local real yt = LoadReal(udg_hash_1, h_0, 3)
	local real angle = LoadReal(udg_hash_1, h_0, 4)
	local real xnext = xc_0 + 400. * Cos(angle_0 * bj_DEGTORAD_1)
	local real ynext = yc_0 + 400. * Sin(angle_0 * bj_DEGTORAD_1)
	local real damage = LoadReal(udg_hash_1, h_0, 5)
	local group gdamage = LoadGroupHandle(udg_hash_1, h_0, 6)
	local boolean pravo = LoadBoolean(udg_hash_1, h_0, 9)
	local boolean first = LoadBoolean(udg_hash_1, h_0, $A)
	local integer jumps = LoadInteger(udg_hash_1, h_0, $B)
	local real periodicdamage = LoadReal(udg_hash_1, h_0, $C)
	local real xcenter = (xnext_0 + xc_0) / 2
	local real ycenter = (ynext_0 + yc_0) / 2
	local real radius
	local group g = CreateGroup()
	local unit Picked
	local unit dammi
	local timer tPicked
	local integer hPicked
	local boolean lastslash
	local real cx
	local real cy
	local real ax
	local real ay
	local real bx
	local real by
	local player p = GetOwningPlayer(caster_0)
	set jumps_0 = jumps_0 - 1
	call SaveInteger(udg_hash_1, h_0, $B, jumps_0)
	if first_0 then
		set xnext_0 = xc_0 + 200. * Cos(angle_0 * bj_DEGTORAD_1)
		set ynext_0 = yc_0 + 200. * Sin(angle_0 * bj_DEGTORAD_1)
		set xcenter_0 = (xnext_0 + xc_0) / 2
		set ycenter_0 = (ynext_0 + yc_0) / 2
		set first_0 = false
		call SaveBoolean(udg_hash_1, h_0, $A, first_0)
	endif
	if jumps_0 <= 0 then
		set lastslash_0 = true
	endif
	if jumps_0 > 0 then
		set lastslash_0 = false
		if not ((xnext_0 > -5. and xnext_0 < 5.) and (ynext_0 > -5. and ynext_0 < 5.)) then
			call SetUnitPosition(caster_0, xnext_0, ynext_0)
		endif
		if GetRandomInt(1, 2) == 1 then
			call SetUnitAnimationByIndex(caster_0, 8)
		else
			call SetUnitAnimationByIndex(caster_0, 2)
		endif
		set radius_0 = ((SquareRoot((xnext_0 - xc_0) * (xnext_0 - xc_0) + (ynext_0 - yc_0) * (ynext_0 - yc_0))) / 2) + 200.
		set cx_0 = xc_0 + 200. * Cos((angle_0 + 90.) * bj_DEGTORAD_1)
		set cy_0 = yc_0 + 200. * Sin((angle_0 + 90.) * bj_DEGTORAD_1)
		set ax_0 = xc_0 + 200. * Cos((angle_0 - 90.) * bj_DEGTORAD_1)
		set ay_0 = yc_0 + 200. * Sin((angle_0 - 90.) * bj_DEGTORAD_1)
		set bx_0 = xnext_0 + 200. * Cos((angle_0 + 90.) * bj_DEGTORAD_1)
		set by_0 = ynext_0 + 200. * Sin((angle_0 + 90.) * bj_DEGTORAD_1)
		if pravo_0 then
			set angle_0 = angle_0 + 120.
			call SaveBoolean(udg_hash_1, h_0, 9, false)
		else
			set angle_0 = angle_0 - 120.
			call SaveBoolean(udg_hash_1, h_0, 9, true)
		endif
		call SaveReal(udg_hash_1, h_0, 4, angle_0)
		call SaveGroupHandle(udg_hash_1, h_0, 6, gdamage_0)
	endif
	if lastslash_0 then
		set cx_0 = -11000.
		set cy_0 = -11000.
		set ax_0 = -10000.
		set ay_0 = 5000.
		set bx_0 = 6000.
		set by_0 = -11000.
		call GroupEnumUnitsInRange(g_0, xt_0, yt_0, 175., null)
	else
		call GroupEnumUnitsInRange(g_0, xcenter_0, ycenter_0, radius_0, null)
	endif
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 and IsUnitEnemy(Picked_0, p_0) and IsUnitInGroup(Picked_0, gdamage_0) == false and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' and IsPointInRect(GetUnitX(Picked_0), GetUnitY(Picked_0), cx_0, cy_0, ax_0, ay_0, bx_0, by_0) then
			call GroupAddUnit(gdamage_0, Picked_0)
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", Picked_0, "chest"))
			call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", Picked_0, "chest"))
			call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
			set dammi_0 = CreateUnit(p_0, 'h00U', GetUnitX(Picked_0), GetUnitY(Picked_0), .0)
			call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
			call UnitAddAbility(dammi_0, 'A0G1')
			call SetUnitAbilityLevel(dammi_0, 'A0G1', R2I(5 - ((4 * GetUnitState(Picked_0, UNIT_STATE_LIFE_1) - .1) / GetUnitState(Picked_0, UNIT_STATE_MAX_LIFE_1))))
			call IssueTargetOrderById(dammi_0, $D006B, Picked_0)
			set dammi_0 = null
			if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 then
				set tPicked_0 = CreateTimer()
				set hPicked_0 = GetHandleId(tPicked_0)
				call SaveUnitHandle(udg_hash_1, hPicked_0, 1, Picked_0)
				call SaveUnitHandle(udg_hash_1, hPicked_0, 2, caster_0)
				call SaveReal(udg_hash_1, hPicked_0, 3, periodicdamage_0 * (.6 + .4 * GetUnitAbilityLevel(dammi_0, 'A0G1')))
				call SaveInteger(udg_hash_1, hPicked_0, 4, 40)
				call TimerStart(tPicked_0, .1, true, function Trig_Dissection_Periodic_Damage_Target_Actions)
				set tPicked_0 = null
			endif
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	if jumps_0 <= 0 then
		call PauseUnit(caster_0, false)
		call SetUnitInvulnerable(caster_0, false)
		call SetUnitPathing(caster_0, true)
		call SetUnitAnimation(caster_0, "stand")
		call SetUnitTimeScale(caster_0, 1.)
		call SetUnitTurnSpeed(caster_0, .6)
		call SetUnitPosition(caster_0, xt_0, yt_0)
		call DestroyEffect(LoadEffectHandle(udg_hash_1, h_0, 7))
		call DestroyEffect(LoadEffectHandle(udg_hash_1, h_0, 8))
		call GroupClear(gdamage_0)
		call DestroyGroup(gdamage_0)
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set caster_0 = null
	set gdamage_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set Picked_0 = null
	set dammi_0 = null
	set tPicked_0 = null
	set p_0 = null
endfunction

function Trig_Dissection_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real xc = GetUnitX(caster_0)
	local real yc = GetUnitY(caster_0)
	local real xt
	local real yt
	local real dist
	local real angle
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0FG')
	local real damage = -5. + 40. * lvl_0
	local real periodicdamage = 4. + 16. * lvl_0
	local group gdamage = CreateGroup()
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local unit target = GetSpellTargetUnit()
	local location loc
	local effect ef
	local integer jumps
	if target_0 != null then
		set xt_0 = GetUnitX(target_0)
		set yt_0 = GetUnitY(target_0)
	else
		set loc_0 = GetSpellTargetLoc()
		set xt_0 = GetLocationX(loc_0)
		set yt_0 = GetLocationY(loc_0)
	endif
	set angle_0 = (bj_RADTODEG_1 * Atan2(yt_0 - yc_0, xt_0 - xc_0)) - 60.
	set dist_0 = SquareRoot((xt_0 - xc_0) * (xt_0 - xc_0) + (yt_0 - yc_0) * (yt_0 - yc_0))
	set jumps_0 = R2I(dist_0 / 200.)
	call SetUnitInvulnerable(caster_0, true)
	call SetUnitPathing(caster_0, false)
	call SetUnitAnimationByIndex(caster_0, 2)
	call SetUnitTimeScale(caster_0, 13.33)
	call SetUnitTurnSpeed(caster_0, 3.)
	if GetRandomInt(1, 2) == 1 then
		call SetUnitAnimationByIndex(caster_0, 8)
	else
		call SetUnitAnimationByIndex(caster_0, 2)
	endif
	set ef_0 = AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl", caster_0, "weapon")
	call SaveEffectHandle(udg_hash_1, h_0, 7, ef_0)
	set ef_0 = null
	set ef_0 = AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratMissile\\ZigguratMissile.mdl", caster_0, "weapon")
	call SaveEffectHandle(udg_hash_1, h_0, 8, ef_0)
	set ef_0 = null
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveReal(udg_hash_1, h_0, 2, xt_0)
	call SaveReal(udg_hash_1, h_0, 3, yt_0)
	call SaveReal(udg_hash_1, h_0, 4, angle_0)
	call SaveReal(udg_hash_1, h_0, 5, damage_0)
	call SaveGroupHandle(udg_hash_1, h_0, 6, gdamage_0)
	call SaveBoolean(udg_hash_1, h_0, 9, true)
	call SaveBoolean(udg_hash_1, h_0, $A, true)
	call SaveInteger(udg_hash_1, h_0, $B, jumps_0 + 1)
	call SaveReal(udg_hash_1, h_0, $C, periodicdamage_0)
	call UnitPeriodicPostionMove(caster_0, .02, jumps_0 * .075)
	call TimerStart(t_0, .075, true, function Trig_Dissection_Periodic_Move_Actions)
	set caster_0 = null
	set gdamage_0 = null
	set t_0 = null
	set target_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
endfunction

function Trig_Dissection_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0FG'
endfunction

function InitTrig_Dissection takes nothing returns nothing
	local integer index = 0
	set gg_trg_Dissection_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Dissection_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Dissection_1, Condition(function Trig_Dissection_Conditions))
	call TriggerAddAction(gg_trg_Dissection_1, function Trig_Dissection_Actions)
endfunction

function Trig_Whirlwind_Periodic_Damage_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local real damage = LoadReal(udg_hash_1, h_0, 2)
	local integer wait = LoadInteger(udg_hash_1, h_0, 3)
	local real xc = GetUnitX(caster_0)
	local real yc = GetUnitY(caster_0)
	local group g = CreateGroup()
	local player p = GetOwningPlayer(caster_0)
	local unit Picked
	local effect ef
	if wait_0 > 0 and GetUnitState(caster_0, UNIT_STATE_LIFE_1) > .405 then
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 3, wait_0)
		call GroupEnumUnitsInRange(g_0, xc_0, yc_0, 200., null)
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 and IsUnitEnemy(Picked_0, p_0) and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				if wait_0 - (wait_0 / $A) * $A == 0 then
					call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", Picked_0, "chest"))
				endif
				call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
	else
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 4)
		call DestroyEffect(ef_0)
		set ef_0 = null
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set caster_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set p_0 = null
	set Picked_0 = null
endfunction

function Trig_Whirlwind_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local integer wait = 80
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0FH')
	local real damage = ((20 * lvl_0) + ((-.4 + .4 * lvl_0) * GetHeroAgi(caster_0, true))) / 20.
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local effect ef = AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl", caster_0, "weapon")
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveReal(udg_hash_1, h_0, 2, damage_0)
	call SaveInteger(udg_hash_1, h_0, 3, wait_0)
	call SaveEffectHandle(udg_hash_1, h_0, 4, ef_0)
	call TimerStart(t_0, .05, true, function Trig_Whirlwind_Periodic_Damage_Actions)
	set caster_0 = null
	set t_0 = null
	set ef_0 = null
endfunction

function Trig_Whirlwind_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0FH'
endfunction

function InitTrig_Whirlwind takes nothing returns nothing
	local integer index = 0
	set gg_trg_Whirlwind_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Whirlwind_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Whirlwind_1, Condition(function Trig_Whirlwind_Conditions))
	call TriggerAddAction(gg_trg_Whirlwind_1, function Trig_Whirlwind_Actions)
endfunction

function Trig_Imboweling_Periodic_Damage_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local real xt = LoadReal(udg_hash_1, h_0, 2)
	local real yt = LoadReal(udg_hash_1, h_0, 3)
	local real angle = LoadReal(udg_hash_1, h_0, 4) + GetRandomReal(75., 285.)
	local real damage = LoadReal(udg_hash_1, h_0, 5)
	local group gdamage = LoadGroupHandle(udg_hash_1, h_0, 6)
	local real anglejump = LoadReal(udg_hash_1, h_0, 7)
	local real damagejump = LoadReal(udg_hash_1, h_0, 8)
	local integer jumps = LoadInteger(udg_hash_1, h_0, 9)
	local real xc = GetUnitX(caster_0)
	local real yc = GetUnitY(caster_0)
	local real x = xt_0 + GetRandomReal(150., 250.) * Cos(angle_0 * bj_DEGTORAD_1)
	local real y = yt_0 + GetRandomReal(150., 250.) * Sin(angle_0 * bj_DEGTORAD_1)
	local group g = CreateGroup()
	local real dist = SquareRoot((xt_0 - xc_0) * (xt_0 - xc_0) + (yt_0 - yc_0) * (yt_0 - yc_0))
	local integer lop = R2I(dist_0 / 100.) + 1
	local unit Picked
	local unit dammi
	local player p = GetOwningPlayer(caster_0)
	call SaveReal(udg_hash_1, h_0, 4, angle_0)
	set jumps_0 = jumps_0 - 1
	call SaveInteger(udg_hash_1, h_0, 9, jumps_0)
	if jumps_0 > 0 then
		if jumps_0 != 1 and jumps_0 != $B and jumps_0 != 21 and jumps_0 != 2 and jumps_0 != $C and jumps_0 != 22 then
			call SetUnitFacing(caster_0, angle_0)
			call SetUnitTimeScale(caster_0, 7.5)
			if GetRandomInt(1, 2) == 1 then
				call SetUnitAnimationByIndex(caster_0, 8)
			else
				call SetUnitAnimationByIndex(caster_0, 2)
			endif
			if IsTerrainPathable(x_0, y_0, PATHING_TYPE_FLYABILITY_1) == false then
				call SetUnitX(caster_0, x_0)
				call SetUnitY(caster_0, y_0)
			endif
			call SetUnitFacing(caster_0, angle_0)
			loop
				exitwhen lop_0 < 0
				call GroupEnumUnitsInRange(g_0, x_0 + ((100. * lop_0) * Cos(angle_0 * bj_DEGTORAD_1)), y_0 + ((100. * lop_0) * Sin(angle_0 * bj_DEGTORAD_1)), 175., null)
				set lop_0 = lop_0 - 1
			endloop
			loop
				set Picked_0 = FirstOfGroup(g_0)
				exitwhen Picked_0 == null
				if IsUnitEnemy(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitInGroup(Picked_0, gdamage_0) == false and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
					call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_MELEE_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
					call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", Picked_0, "chest"))
					set dammi_0 = CreateUnit(p_0, 'h00U', GetUnitX(Picked_0), GetUnitY(Picked_0), .0)
					call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
					call UnitAddAbility(dammi_0, 'A0G3')
					call IssueTargetOrderById(dammi_0, $D006B, Picked_0)
					set dammi_0 = null
				endif
				call GroupRemoveUnit(g_0, Picked_0)
			endloop
			set Picked_0 = null
			call TimerStart(t_0, .1, false, function Trig_Imboweling_Periodic_Damage_Actions)
		endif
		call SaveGroupHandle(udg_hash_1, h_0, 6, gdamage_0)
		if jumps_0 == 2 or jumps_0 == $C or jumps_0 == 22 then
			set anglejump_0 = anglejump_0 + 120.
			call SaveReal(udg_hash_1, h_0, 7, anglejump_0)
			set x_0 = xt_0 + 200. * Cos(anglejump_0 * bj_DEGTORAD_1)
			set y_0 = yt_0 + 200. * Sin(anglejump_0 * bj_DEGTORAD_1)
			if IsTerrainPathable(x_0, y_0, PATHING_TYPE_FLYABILITY_1) == false then
				call SetUnitX(caster_0, x_0)
				call SetUnitY(caster_0, y_0)
			endif
			call SetUnitFacing(caster_0, anglejump_0)
			call SetUnitTimeScale(caster_0, 1.4)
			call SetUnitAnimationByIndex(caster_0, 3)
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Blink\\BlinkCaster.mdl", caster_0, "chest"))
			call TimerStart(t_0, .6, false, function Trig_Imboweling_Periodic_Damage_Actions)
		endif
		if jumps_0 == 1 or jumps_0 == $B or jumps_0 == 21 then
			call GroupEnumUnitsInRange(g_0, xc_0 + 100. * Cos(anglejump_0 * bj_DEGTORAD_1), yc_0 + 100. * Sin(anglejump_0 * bj_DEGTORAD_1), 225., null)
			set p_0 = GetOwningPlayer(caster_0)
			loop
				set Picked_0 = FirstOfGroup(g_0)
				exitwhen Picked_0 == null
				if IsUnitEnemy(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
					call UnitDamageTarget(caster_0, Picked_0, damagejump_0, false, false, ATTACK_TYPE_MELEE_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
					call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", Picked_0, "chest"))
					call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", Picked_0, "chest"))
					set dammi_0 = CreateUnit(p_0, 'h00U', GetUnitX(Picked_0), GetUnitY(Picked_0), .0)
					call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
					call UnitAddAbility(dammi_0, 'A0G4')
					call IssueTargetOrderById(dammi_0, $D007F, Picked_0)
					set dammi_0 = null
				endif
				call GroupRemoveUnit(g_0, Picked_0)
			endloop
			set Picked_0 = null
			call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile.mdl", xc_0 + 100. * Cos(anglejump_0 * bj_DEGTORAD_1), yc_0 + 100. * Sin(anglejump_0 * bj_DEGTORAD_1)))
			call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl", xc_0 + 100. * Cos(anglejump_0 * bj_DEGTORAD_1), yc_0 + 100. * Sin(anglejump_0 * bj_DEGTORAD_1)))
			call TimerStart(t_0, .1, false, function Trig_Imboweling_Periodic_Damage_Actions)
			call GroupClear(gdamage_0)
			call SaveGroupHandle(udg_hash_1, h_0, 6, gdamage_0)
		endif
	else
		call DestroyEffect(LoadEffectHandle(udg_hash_1, h_0, $A))
		call DestroyEffect(LoadEffectHandle(udg_hash_1, h_0, $B))
		call SetUnitInvulnerable(caster_0, false)
		call SetUnitPathing(caster_0, true)
		call SetUnitAnimation(caster_0, "Stand")
		call SetUnitTimeScale(caster_0, 1.)
		call SetUnitTurnSpeed(caster_0, GetUnitDefaultTurnSpeed(caster_0))
		call IssueImmediateOrderById(caster_0, $D0004)
		call GroupClear(gdamage_0)
		call DestroyGroup(gdamage_0)
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set caster_0 = null
	set gdamage_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set Picked_0 = null
	set dammi_0 = null
	set p_0 = null
endfunction

function Trig_Imboweling_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real xc = GetUnitX(caster_0)
	local real yc = GetUnitY(caster_0)
	local location loc = GetSpellTargetLoc()
	local real xt = GetLocationX(loc_0)
	local real yt = GetLocationY(loc_0)
	local real dist
	local real angle = .0
	local real anglejump = (bj_RADTODEG_1 * Atan2(yt_0 - yc_0, xt_0 - xc_0))
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0G2')
	local real damage = 5. + (25. * lvl_0) + ((.1 + .1 * lvl_0) * GetHeroAgi(caster_0, true))
	local real damagejump = (50 + GetHeroAgi(caster_0, true)) * 1.5 * lvl_0
	local group gdamage = CreateGroup()
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local effect ef
	local integer jumps = ($A * 3) + 1
	call SetUnitInvulnerable(caster_0, true)
	call SetUnitPathing(caster_0, false)
	call SetUnitAnimationByIndex(caster_0, 2)
	call SetUnitTimeScale(caster_0, 20.)
	call SetUnitTurnSpeed(caster_0, 3.)
	if GetRandomInt(1, 2) == 1 then
		call SetUnitAnimationByIndex(caster_0, 8)
	else
		call SetUnitAnimationByIndex(caster_0, 2)
	endif
	set ef_0 = AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl", caster_0, "weapon")
	call SaveEffectHandle(udg_hash_1, h_0, $A, ef_0)
	set ef_0 = null
	set ef_0 = AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratMissile\\ZigguratMissile.mdl", caster_0, "weapon")
	call SaveEffectHandle(udg_hash_1, h_0, $B, ef_0)
	set ef_0 = null
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveReal(udg_hash_1, h_0, 2, xt_0)
	call SaveReal(udg_hash_1, h_0, 3, yt_0)
	call SaveReal(udg_hash_1, h_0, 4, angle_0)
	call SaveReal(udg_hash_1, h_0, 5, damage_0)
	call SaveGroupHandle(udg_hash_1, h_0, 6, gdamage_0)
	call SaveReal(udg_hash_1, h_0, 7, anglejump_0)
	call SaveReal(udg_hash_1, h_0, 8, damagejump_0)
	call SaveInteger(udg_hash_1, h_0, 9, jumps_0)
	call UnitPeriodicPostionMove(caster_0, .02, jumps_0 * .1 + 1.5)
	call TimerStart(t_0, .1, false, function Trig_Imboweling_Periodic_Damage_Actions)
	set caster_0 = null
	set gdamage_0 = null
	set t_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
endfunction

function Trig_Imboweling_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0G2'
endfunction

function InitTrig_Imboweling takes nothing returns nothing
	local integer index = 0
	set gg_trg_Imboweling_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Imboweling_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Imboweling_1, Condition(function Trig_Imboweling_Conditions))
	call TriggerAddAction(gg_trg_Imboweling_1, function Trig_Imboweling_Actions)
endfunction

function Trig_Master_of_Lightnings_Load_Actions takes nothing returns nothing
	call AbilityPreload('A07N', 6)
	call AbilityPreload('A07O', 6)
	call AbilityPreload('A07Q', 6)
	call AbilityPreload('A07P', 3)
	call AbilityPreload('A07S', 6)
	call EffectPreload("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
	call EffectPreload("Abilities\\Spells\\Orc\\LightningBolt\\LightningBoltMissile.mdl")
	call EffectPreload("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl")
	call EffectPreload("Abilities\\Spells\\Items\\AIlb\\AIlbTarget.mdl")
	call EffectPreload("Abilities\\Weapons\\Bolt\\BoltImpact.mdl")
	call EffectPreload("Abilities\\Spells\\Items\\AIlb\\AIlbSpecialArt.mdl")
	call EffectPreload("Abilities\\Spells\\Orc\\LightningShield\\LightningShieldBuff.mdl")
	call EffectPreload("war3mapImported\\OutlandStorm.mdx")
	call EffectPreload("Abilities\\Spells\\Orc\\Purge\\PurgeBuffTarget.mdl")
	call EffectPreload("Abilities\\Spells\\Orc\\LightningShield\\LightningShieldTarget.mdl")
	call EnableTrigger(gg_trg_Thundercloud_1)
	call EnableTrigger(gg_trg_Power_of_Lightnings_1)
	call EnableTrigger(gg_trg_Electric_Field_1)
	call EnableTrigger(gg_trg_Storm_1)
endfunction

function InitTrig_Master_of_Lightnings_Load takes nothing returns nothing
	set gg_trg_Master_of_Lightnings_Load_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Master_of_Lightnings_Load_1, function Trig_Master_of_Lightnings_Load_Actions)
endfunction

function Trig_Thundercloud_lightning_Actions takes nothing returns nothing
	local timer tl = GetExpiredTimer()
	local integer hl = GetHandleId(tl_0)
	local integer lop = 0
	local lightning l
	loop
		exitwhen lop_0 > 5
		set l_0 = LoadLightningHandle(udg_hash_1, hl_0, lop_0)
		call DestroyLightning(l_0)
		set l_0 = null
		set lop_0 = lop_0 + 1
	endloop
	call FlushChildHashtable(udg_hash_1, hl_0)
	call DestroyTimer(tl_0)
	set tl_0 = null
endfunction

function Trig_Thundercloud_move_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit cloud = LoadUnitHandle(udg_hash_1, h_0, 1)
	local real x = LoadReal(udg_hash_1, h_0, 2)
	local real y = LoadReal(udg_hash_1, h_0, 3)
	local real angle = LoadReal(udg_hash_1, h_0, 4)
	local integer stage = LoadInteger(udg_hash_1, h_0, 5)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 7)
	local real xp = LoadReal(udg_hash_1, h_0, 8)
	local real yp = LoadReal(udg_hash_1, h_0, 9)
	local real damage = LoadReal(udg_hash_1, h_0, $A)
	local player p = LoadPlayerHandle(udg_hash_1, h_0, $B)
	local integer lop = 0
	local real xu = GetUnitX(cloud_0)
	local real yu = GetUnitY(cloud_0)
	local real distance = SquareRoot((xp_0 - xu_0) * (xp_0 - xu_0) + (yp_0 - yu_0) * (yp_0 - yu_0))
	local real xt
	local real yt
	local unit slower
	local timer tl
	local integer hl
	local group g
	local unit Picked
	local lightning l
	local real between
	local effect efcloud
	local location locz
	local location loccloudz = GetUnitLoc(cloud_0)
	if distance_0 < 3.75 then
		set stage_0 = stage_0 + 1
		call SaveInteger(udg_hash_1, h_0, 5, stage_0)
		set tl_0 = CreateTimer()
		set hl_0 = GetHandleId(tl_0)
		loop
			exitwhen lop_0 > 4
			set xt_0 = xp_0 + 150. * Cos((lop_0 * 72.) * bj_DEGTORAD_1)
			set yt_0 = yp_0 + 150. * Sin((lop_0 * 72.) * bj_DEGTORAD_1)
			set locz_0 = Location(xt_0, yt_0)
			set l_0 = AddLightningEx("FORK", true, xu_0, yu_0, 425. + GetLocationZ(loccloudz_0), xt_0, yt_0, -50. + GetLocationZ(locz_0))
			call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", xt_0, yt_0))
			call SaveLightningHandle(udg_hash_1, hl_0, lop_0, l_0)
			set l_0 = null
			set lop_0 = lop_0 + 1
			call RemoveLocation(locz_0)
			set locz_0 = null
		endloop
		set l_0 = null
		set locz_0 = Location(xt_0, yt_0)
		set l_0 = AddLightningEx("FORK", true, xu_0, yu_0, 425. + GetLocationZ(loccloudz_0), xp_0, yp_0, -50. + GetLocationZ(locz_0))
		call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.mdl", xp_0, yp_0))
		call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", xp_0, yp_0))
		call SaveLightningHandle(udg_hash_1, hl_0, 5, l_0)
		set l_0 = null
		call RemoveLocation(locz_0)
		set locz_0 = null
		set g_0 = CreateGroup()
		call GroupEnumUnitsInRange(g_0, xp_0, yp_0, $E1, null)
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if IsUnitEnemy(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
				set slower_0 = CreateUnit(p_0, 'h00U', xp_0, yp_0, .0)
				call UnitApplyTimedLife(slower_0, 'BTLF', .75)
				call UnitAddAbility(slower_0, 'A07S')
				call SetUnitAbilityLevel(slower_0, 'A07S', GetUnitAbilityLevel(caster_0, 'A07N'))
				call IssueTargetOrderById(slower_0, $D006B, Picked_0)
				set slower_0 = null
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", Picked_0, "origin"))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIlb\\AIlbSpecialArt.mdl", Picked_0, "chest"))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningShield\\LightningShieldBuff.mdl", Picked_0, "origin"))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", Picked_0, "chest"))
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		set Picked_0 = null
		call TimerStart(tl_0, .6, false, function Trig_Thundercloud_lightning_Actions)
		set xp_0 = x_0 + GetRandomReal(200., 250.) * Cos(((stage_0 * 120.) + angle_0) * bj_DEGTORAD_1)
		set yp_0 = y_0 + GetRandomReal(200., 250.) * Sin(((stage_0 * 120.) + angle_0) * bj_DEGTORAD_1)
		call SaveReal(udg_hash_1, h_0, 8, xp_0)
		call SaveReal(udg_hash_1, h_0, 9, yp_0)
		set tl_0 = null
		set Picked_0 = null
		call DestroyGroup(g_0)
		set g_0 = null
		if stage_0 >= 4 then
			set efcloud_0 = LoadEffectHandle(udg_hash_1, h_0, 6)
			call DestroyEffect(efcloud_0)
			set efcloud_0 = null
			call KillUnit(cloud_0)
			set cloud_0 = null
			call FlushChildHashtable(udg_hash_1, h_0)
			call DestroyTimer(t_0)
			set t_0 = null
		endif
	else
		set between_0 = bj_RADTODEG_1 * Atan2(yp_0 - yu_0, xp_0 - xu_0)
		set xu_0 = xu_0 + 5. * Cos(between_0 * bj_DEGTORAD_1)
		set yu_0 = yu_0 + 5. * Sin(between_0 * bj_DEGTORAD_1)
		if IsTerrainPathable(xu_0, yu_0, PATHING_TYPE_FLYABILITY_1) == false then
			call SetUnitPosition(cloud_0, xu_0, yu_0)
		else
			set efcloud_0 = LoadEffectHandle(udg_hash_1, h_0, 6)
			call DestroyEffect(efcloud_0)
			set efcloud_0 = null
			call KillUnit(cloud_0)
			set cloud_0 = null
			call FlushChildHashtable(udg_hash_1, h_0)
			call DestroyTimer(t_0)
			set t_0 = null
		endif
	endif
	set t_0 = null
	set cloud_0 = null
	set caster_0 = null
	set p_0 = null
	call RemoveLocation(loccloudz_0)
	set loccloudz_0 = null
endfunction

function Trig_Thundercloud_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local unit caster2
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A07N')
	local integer lvlult = GetUnitAbilityLevel(caster_0, 'A07P')
	local integer lvlultup = GetUnitAbilityLevel(caster_0, 'A0Q6')
	local location loc = GetSpellTargetLoc()
	local real x = GetLocationX(loc_0)
	local real y = GetLocationY(loc_0)
	local integer stage = 0
	local unit cloud = CreateUnit(GetOwningPlayer(caster_0), 'h00U', x_0, y_0, .0)
	local effect efcloud
	local real angle = GetRandomReal(.0, 360.)
	local real damage = (.12 * GetUnitAbilityLevel(caster_0, 'A07P') + 1.) * ((5. + (25. * lvl_0) + ((.1 + .05 * lvl_0) * GetHeroInt(caster_0, true))))
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local player p
	if lvlult_0 > 0 then
		set damage_0 = (.12 * lvlult_0 + 1.) * ((5. + (25. * lvl_0) + ((.1 + .05 * lvl_0) * GetHeroInt(caster_0, true))))
	endif
	if lvlultup_0 > 0 then
		set damage_0 = (.17 * lvlultup_0 + 1.) * ((5. + (25. * lvl_0) + ((.1 + .05 * lvl_0) * GetHeroInt(caster_0, true))))
	endif
	if GetOwningPlayer(caster_0) == Player($F) then
		set p_0 = LoadPlayerHandle(udg_hash_1, GetHandleId(caster_0), 1)
		set caster2_0 = LoadUnitHandle(udg_hash_1, GetHandleId(caster_0), 2)
		call FlushChildHashtable(udg_hash_1, GetHandleId(caster_0))
	else
		set p_0 = GetOwningPlayer(caster_0)
		set caster2_0 = caster_0
	endif
	call UnitAddAbility(cloud_0, 'Amrf')
	call UnitRemoveAbility(cloud_0, 'Amrf')
	call SetUnitFlyHeight(cloud_0, 350. + GetLocationZ(loc_0), .0)
	call SetUnitScale(cloud_0, 1.35, 1.35, 1.35)
	call SetUnitPosition(cloud_0, x_0, y_0)
	set efcloud_0 = AddSpecialEffectTarget("war3mapImported\\OutlandStorm.mdx", cloud_0, "origin")
	call SaveUnitHandle(udg_hash_1, h_0, 1, cloud_0)
	call SaveReal(udg_hash_1, h_0, 2, x_0)
	call SaveReal(udg_hash_1, h_0, 3, y_0)
	call SaveReal(udg_hash_1, h_0, 4, angle_0)
	call SaveInteger(udg_hash_1, h_0, 5, stage_0)
	call SaveEffectHandle(udg_hash_1, h_0, 6, efcloud_0)
	call SaveUnitHandle(udg_hash_1, h_0, 7, caster2_0)
	call SaveReal(udg_hash_1, h_0, 8, x_0)
	call SaveReal(udg_hash_1, h_0, 9, y_0)
	call SaveReal(udg_hash_1, h_0, $A, damage_0)
	call SavePlayerHandle(udg_hash_1, h_0, $B, p_0)
	call TimerStart(t_0, .04, true, function Trig_Thundercloud_move_Actions)
	set caster_0 = null
	set caster2_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set cloud_0 = null
	set efcloud_0 = null
	set t_0 = null
	set p_0 = null
endfunction

function Trig_Thundercloud_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A07N'
endfunction

function InitTrig_Thundercloud takes nothing returns nothing
	local integer index = 0
	set gg_trg_Thundercloud_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Thundercloud_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Thundercloud_1, Condition(function Trig_Thundercloud_Conditions))
	call TriggerAddAction(gg_trg_Thundercloud_1, function Trig_Thundercloud_Actions)
endfunction

function Trig_Power_of_Lightnings_periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit ward = LoadUnitHandle(udg_hash_1, h_0, $A)
	local real x = GetUnitX(ward_0)
	local real y = GetUnitY(ward_0)
	local integer stage = LoadInteger(udg_hash_1, h_0, $B)
	local integer adddamage = LoadInteger(udg_hash_1, h_0, 18)
	local integer addas = LoadInteger(udg_hash_1, h_0, 19)
	local unit target
	local effect ef
	local real tx
	local real ty
	local lightning l
	local integer second = LoadInteger(udg_hash_1, h_0, $D)
	local integer bonus
	local integer lop = 1
	local effect wef
	local integer count = LoadInteger(udg_hash_1, h_0, $F)
	local boolean destroy = false
	local location locwardz = GetUnitLoc(ward_0)
	local location locz
	loop
		exitwhen lop_0 > count_0
		set target_0[lop_0] = LoadUnitHandle(udg_hash_1, h_0, lop_0)
		set l_0[lop_0] = LoadLightningHandle(udg_hash_1, h_0, 3 + lop_0)
		set lop_0 = lop_0 + 1
	endloop
	set lop_0 = 1
	if stage_0 >= 25 then
		set stage_0 = 0
		set second_0 = second_0 + 1
		call SaveInteger(udg_hash_1, h_0, $D, second_0)
		set bonus_0 = LoadInteger(udg_hash_1, h_0, $C)
		loop
			exitwhen lop_0 > count_0
			call SetAttackAbilityLevel(target_0[lop_0], adddamage_0)
			call SetAttackSpeedAbilityLevel(target_0[lop_0], addas_0)
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", target_0[lop_0], "weapon"))
			set lop_0 = lop_0 + 1
		endloop
	else
		set stage_0 = stage_0 + 1
		set lop_0 = 1
		loop
			exitwhen lop_0 > count_0
			if target_0[lop_0] != null then
				set tx_0 = GetUnitX(target_0[lop_0]) - x_0
				set ty_0 = GetUnitY(target_0[lop_0]) - y_0
				if SquareRoot(tx_0 * tx_0 + ty_0 * ty_0) < 500 and GetUnitState(target_0[lop_0], UNIT_STATE_LIFE_1) > .405 and second_0 < $F then
					set locz_0 = GetUnitLoc(target_0[lop_0])
					call MoveLightningEx(l_0[lop_0], true, x_0, y_0, 150. + GetLocationZ(locwardz_0), GetUnitX(target_0[lop_0]), GetUnitY(target_0[lop_0]), GetUnitFlyHeight(target_0[lop_0]) + 60. + GetLocationZ(locz_0))
					call RemoveLocation(locz_0)
					set locz_0 = null
				else
					set destroy_0 = true
				endif
			endif
			set lop_0 = lop_0 + 1
		endloop
	endif
	if destroy_0 then
		set lop_0 = 1
		set bonus_0 = LoadInteger(udg_hash_1, h_0, $C)
		set wef_0 = LoadEffectHandle(udg_hash_1, h_0, $E)
		call DestroyEffect(wef_0)
		set wef_0 = null
		call KillUnit(ward_0)
		loop
			exitwhen lop_0 > count_0
			call SetAttackAbilityLevel(target_0[lop_0], -1 * adddamage_0 * second_0)
			call SetAttackSpeedAbilityLevel(target_0[lop_0], -second_0 * addas_0)
			set ef_0[lop_0] = LoadEffectHandle(udg_hash_1, h_0, 6 + lop_0)
			call DestroyEffect(ef_0[lop_0])
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", target_0[lop_0], "weapon"))
			call DestroyLightning(l_0[lop_0])
			set ef_0[lop_0] = null
			set lop_0 = lop_0 + 1
		endloop
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
		set t_0 = null
	endif
	call SaveInteger(udg_hash_1, h_0, $B, stage_0)
	set lop_0 = 1
	loop
		exitwhen lop_0 > count_0
		set target_0[lop_0] = null
		set l_0[lop_0] = null
		set lop_0 = lop_0 + 1
	endloop
	set t_0 = null
	set ward_0 = null
	call RemoveLocation(locwardz_0)
	set locwardz_0 = null
endfunction

function Trig_Power_of_Lightnings_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local location loc = GetSpellTargetLoc()
	local real x = GetLocationX(loc_0)
	local real y = GetLocationY(loc_0)
	local unit ward = CreateUnit(GetOwningPlayer(caster_0), 'h00U', x_0, y_0, GetRandomReal(.0, 360.))
	local unit target
	local real xw = GetUnitX(ward_0)
	local real yw = GetUnitY(ward_0)
	local lightning l
	local integer lop = 1
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local group g = CreateGroup()
	local group grup = CreateGroup()
	local unit Picked
	local integer stage = 0
	local integer second = 0
	local integer bonus = 2 + GetUnitAbilityLevel(caster_0, 'A07O')
	local effect ef
	local effect wef = AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", ward_0, "chest")
	local integer count = R2I((I2R(GetUnitAbilityLevel(caster_0, 'A07O')) / 2) + .5)
	local location locz
	local integer adddamage = 2 + GetUnitAbilityLevel(caster_0, 'A07O')
	local integer addas = R2I(adddamage_0 / 2)
	call UnitAddAbility(ward_0, 'Amrf')
	call UnitRemoveAbility(ward_0, 'Amrf')
	call SetUnitFlyHeight(ward_0, 50., .0)
	call SetUnitScale(ward_0, 2.5, 2.5, 2.5)
	call GroupEnumUnitsInRange(g_0, x_0, y_0, 450., null)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if IsUnitAlly(Picked_0, GetOwningPlayer(caster_0)) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
			call GroupAddUnit(grup_0, Picked_0)
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	call RandomUnitFromGroup(R2I((I2R(GetUnitAbilityLevel(caster_0, 'A07O')) / 2) + .5), grup_0)
	loop
		exitwhen lop_0 > count_0
		set target_0[lop_0] = FirstOfGroup(udg_GroupRandomUnitFromGroup_1)
		if target_0[lop_0] != null then
			set locz_0 = GetUnitLoc(target_0[lop_0])
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", target_0[lop_0], "chest"))
			set ef_0[lop_0] = AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", target_0[lop_0], "weapon")
			set l_0[lop_0] = AddLightningEx("CLPB", true, x_0, y_0, 150. + GetLocationZ(loc_0), GetUnitX(target_0[lop_0]), GetUnitY(target_0[lop_0]), GetUnitFlyHeight(target_0[lop_0]) + 50. + GetLocationZ(locz_0))
			call SaveUnitHandle(udg_hash_1, h_0, lop_0, target_0[lop_0])
			call SaveLightningHandle(udg_hash_1, h_0, lop_0 + 3, l_0[lop_0])
			call SaveEffectHandle(udg_hash_1, h_0, lop_0 + 6, ef_0[lop_0])
			call RemoveLocation(locz_0)
			set locz_0 = null
		endif
		call GroupRemoveUnit(udg_GroupRandomUnitFromGroup_1, target_0[lop_0])
		set lop_0 = lop_0 + 1
	endloop
	call SaveUnitHandle(udg_hash_1, h_0, $A, ward_0)
	call SaveInteger(udg_hash_1, h_0, $B, stage_0)
	call SaveInteger(udg_hash_1, h_0, $C, bonus_0)
	call SaveInteger(udg_hash_1, h_0, $D, second_0)
	call SaveEffectHandle(udg_hash_1, h_0, $E, wef_0)
	call SaveInteger(udg_hash_1, h_0, $F, count_0)
	call SaveInteger(udg_hash_1, h_0, 18, adddamage_0)
	call SaveInteger(udg_hash_1, h_0, 19, addas_0)
	call TimerStart(t_0, .04, true, function Trig_Power_of_Lightnings_periodic_Actions)
	set lop_0 = 1
	loop
		exitwhen lop_0 > count_0
		set target_0[lop_0] = null
		set l_0[lop_0] = null
		set ef_0[lop_0] = null
		set lop_0 = lop_0 + 1
	endloop
	set caster_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set ward_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	call GroupClear(grup_0)
	call DestroyGroup(grup_0)
	set grup_0 = null
	set Picked_0 = null
	set wef_0 = null
	set t_0 = null
endfunction

function Trig_Power_of_Lightnings_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A07O'
endfunction

function InitTrig_Power_of_Lightnings takes nothing returns nothing
	local integer index = 0
	set gg_trg_Power_of_Lightnings_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Power_of_Lightnings_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Power_of_Lightnings_1, Condition(function Trig_Power_of_Lightnings_Conditions))
	call TriggerAddAction(gg_trg_Power_of_Lightnings_1, function Trig_Power_of_Lightnings_Actions)
endfunction

function Trig_Electric_Field_periodic_lightning_move_Actions takes nothing returns nothing
	local timer tl = GetExpiredTimer()
	local integer hl = GetHandleId(tl_0)
	local integer check = LoadInteger(udg_hash_1, hl_0, 20)
	local unit caster = LoadUnitHandle(udg_hash_1, hl_0, 21)
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A07Q')
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local location loccasterz = GetUnitLoc(caster_0)
	local location locz
	local lightning l
	local unit target
	local integer lop = 0
	local integer count = LoadInteger(udg_hash_1, hl_0, 22)
	if check_0 < $F then
		set check_0 = check_0 + 1
		call SaveInteger(udg_hash_1, hl_0, 20, check_0)
		loop
			exitwhen lop_0 + 1 > count_0
			set l_0[lop_0] = LoadLightningHandle(udg_hash_1, hl_0, lop_0)
			set target_0[lop_0] = LoadUnitHandle(udg_hash_1, hl_0, lop_0 + $A)
			if GetUnitState(target_0[lop_0], UNIT_STATE_LIFE_1) > .405 and target_0[lop_0] != null then
				set locz_0 = GetUnitLoc(target_0[lop_0])
				call MoveLightningEx(l_0[lop_0], true, x_0, y_0, GetUnitFlyHeight(caster_0) + 215. + GetLocationZ(loccasterz_0), GetUnitX(target_0[lop_0]), GetUnitY(target_0[lop_0]), GetUnitFlyHeight(target_0[lop_0]) + 25. + GetLocationZ(locz_0))
				call RemoveLocation(locz_0)
				set locz_0 = null
			endif
			set l_0[lop_0] = null
			set target_0[lop_0] = null
			set lop_0 = lop_0 + 1
		endloop
	else
		set lop_0 = 0
		loop
			exitwhen lop_0 > count_0
			set l_0[lop_0] = LoadLightningHandle(udg_hash_1, hl_0, lop_0)
			call DestroyLightning(l_0[lop_0])
			set l_0[lop_0] = null
			set lop_0 = lop_0 + 1
		endloop
		call FlushChildHashtable(udg_hash_1, hl_0)
		call DestroyTimer(tl_0)
	endif
	set tl_0 = null
	set caster_0 = null
	call RemoveLocation(loccasterz_0)
	set loccasterz_0 = null
endfunction

function Trig_Electric_Field_periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A07Q')
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local group g
	local group grup
	local unit Picked
	local integer lop = 0
	local unit target
	local lightning l
	local location loccasterz
	local location locz
	local timer tl
	local integer hl
	local integer check = 0
	local real damage
	local integer count = 0
	if GetUnitState(caster_0, UNIT_STATE_LIFE_1) > .405 then
		set damage_0 = 10. + (lvl_0 * $F) + GetRandomReal(.0, lvl_0 * 10.)
		set tl_0 = CreateTimer()
		set hl_0 = GetHandleId(tl_0)
		set loccasterz_0 = GetUnitLoc(caster_0)
		set g_0 = CreateGroup()
		set grup_0 = CreateGroup()
		call GroupEnumUnitsInRange(g_0, x_0, y_0, 500., null)
		call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", caster_0, "overhead"))
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if IsUnitEnemy(Picked_0, GetOwningPlayer(caster_0)) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call GroupAddUnit(grup_0, Picked_0)
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		call RandomUnitFromGroup(1 + lvl_0, grup_0)
		call GroupAddGroup(udg_GroupRandomUnitFromGroup_1, g_0)
		loop
			set target_0 = FirstOfGroup(g_0)
			exitwhen lop_0 > lvl_0 + 1 or target_0 == null
			set count_0 = count_0 + 1
			set locz_0 = GetUnitLoc(target_0)
			set l_0[lop_0] = AddLightningEx("CLPB", true, x_0, y_0, GetUnitFlyHeight(caster_0) + 215. + GetLocationZ(loccasterz_0), GetUnitX(target_0), GetUnitY(target_0), GetUnitFlyHeight(target_0) + 25. + GetLocationZ(locz_0))
			call SaveLightningHandle(udg_hash_1, hl_0, lop_0, l_0[lop_0])
			call SaveUnitHandle(udg_hash_1, hl_0, lop_0 + $A, target_0)
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", target_0, "chest"))
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIlb\\AIlbSpecialArt.mdl", target_0, "chest"))
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", target_0, "origin"))
			call UnitDamageTarget(caster_0, target_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
			call GroupRemoveUnit(g_0, target_0)
			call RemoveLocation(locz_0)
			set locz_0 = null
			set l_0[lop_0] = null
			set target_0 = null
			set lop_0 = lop_0 + 1
		endloop
		call SaveInteger(udg_hash_1, hl_0, 20, check_0)
		call SaveUnitHandle(udg_hash_1, hl_0, 21, caster_0)
		call SaveInteger(udg_hash_1, hl_0, 22, count_0)
		call TimerStart(tl_0, .04, true, function Trig_Electric_Field_periodic_lightning_move_Actions)
		call RemoveLocation(loccasterz_0)
		set loccasterz_0 = null
		set tl_0 = null
		call GroupClear(g_0)
		call DestroyGroup(g_0)
		set g_0 = null
		call GroupClear(grup_0)
		call DestroyGroup(grup_0)
		set grup_0 = null
		set Picked_0 = null
		set target_0 = null
	endif
	set t_0 = null
	set caster_0 = null
endfunction

function Trig_Learn_Skill_Electric_Field_Actions takes nothing returns nothing
	local unit caster = GetLearningUnit()
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A07Q')
	local timer t
	local integer h
	if lvl_0 == 1 then
		set t_0 = CreateTimer()
		set h_0 = GetHandleId(t_0)
		call SaveTimerHandle(udg_hash_1, GetHandleId(caster_0), $B, t_0)
	endif
	set t_0 = LoadTimerHandle(udg_hash_1, GetHandleId(caster_0), $B)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call TimerStart(t_0, 4. - (.25 * lvl_0), true, function Trig_Electric_Field_periodic_Actions)
	set caster_0 = null
	set t_0 = null
endfunction

function Trig_Learn_Skill_Electric_Field_Conditions takes nothing returns boolean
	return GetLearnedSkill() == 'A07Q' and GetUnitTypeId(GetLearningUnit()) != 'h00U'
endfunction

function InitTrig_Electric_Field takes nothing returns nothing
	local integer index = 0
	set gg_trg_Electric_Field_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Electric_Field_1, Player(index_0), EVENT_PLAYER_HERO_SKILL_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Electric_Field_1, Condition(function Trig_Learn_Skill_Electric_Field_Conditions))
	call TriggerAddAction(gg_trg_Electric_Field_1, function Trig_Learn_Skill_Electric_Field_Actions)
endfunction

function Trig_Thundercloud_lightning2_Actions takes nothing returns nothing
	local timer tl = GetExpiredTimer()
	local integer hl = GetHandleId(tl_0)
	local integer lop = 0
	local lightning l
	loop
		exitwhen lop_0 > 5
		set l_0 = LoadLightningHandle(udg_hash_1, hl_0, lop_0)
		call DestroyLightning(l_0)
		set l_0 = null
		set lop_0 = lop_0 + 1
	endloop
	call FlushChildHashtable(udg_hash_1, hl_0)
	call DestroyTimer(tl_0)
	set tl_0 = null
endfunction

function Trig_Thundercloud2_move_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit cloud = LoadUnitHandle(udg_hash_1, h_0, 1)
	local real x = LoadReal(udg_hash_1, h_0, 2)
	local real y = LoadReal(udg_hash_1, h_0, 3)
	local real angle = LoadReal(udg_hash_1, h_0, 4)
	local integer stage = LoadInteger(udg_hash_1, h_0, 5)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 7)
	local real xp = LoadReal(udg_hash_1, h_0, 8)
	local real yp = LoadReal(udg_hash_1, h_0, 9)
	local real damage = LoadReal(udg_hash_1, h_0, $A)
	local player p = LoadPlayerHandle(udg_hash_1, h_0, $B)
	local integer lop = 0
	local real xu = GetUnitX(cloud_0)
	local real yu = GetUnitY(cloud_0)
	local real distance = SquareRoot((xp_0 - xu_0) * (xp_0 - xu_0) + (yp_0 - yu_0) * (yp_0 - yu_0))
	local real xt
	local real yt
	local unit slower
	local timer tl
	local integer hl
	local group g
	local unit Picked
	local lightning l
	local real between
	local effect efcloud
	local location locz
	local location loccloudz = GetUnitLoc(cloud_0)
	if distance_0 < 3.75 then
		set stage_0 = stage_0 + 1
		call SaveInteger(udg_hash_1, h_0, 5, stage_0)
		set tl_0 = CreateTimer()
		set hl_0 = GetHandleId(tl_0)
		loop
			exitwhen lop_0 > 4
			set xt_0 = xp_0 + 150. * Cos((lop_0 * 72.) * bj_DEGTORAD_1)
			set yt_0 = yp_0 + 150. * Sin((lop_0 * 72.) * bj_DEGTORAD_1)
			set locz_0 = Location(xt_0, yt_0)
			set l_0 = AddLightningEx("FORK", true, xu_0, yu_0, 425. + GetLocationZ(loccloudz_0), xt_0, yt_0, -50. + GetLocationZ(locz_0))
			call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", xt_0, yt_0))
			call SaveLightningHandle(udg_hash_1, hl_0, lop_0, l_0)
			set l_0 = null
			set lop_0 = lop_0 + 1
			call RemoveLocation(locz_0)
			set locz_0 = null
		endloop
		set l_0 = null
		set locz_0 = Location(xt_0, yt_0)
		set l_0 = AddLightningEx("FORK", true, xu_0, yu_0, 425. + GetLocationZ(loccloudz_0), xp_0, yp_0, -50. + GetLocationZ(locz_0))
		call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.mdl", xp_0, yp_0))
		call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", xp_0, yp_0))
		call SaveLightningHandle(udg_hash_1, hl_0, 5, l_0)
		set l_0 = null
		call RemoveLocation(locz_0)
		set locz_0 = null
		set g_0 = CreateGroup()
		call GroupEnumUnitsInRange(g_0, xp_0, yp_0, $E1, null)
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if IsUnitEnemy(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
				set slower_0 = CreateUnit(p_0, 'h00U', xp_0, yp_0, .0)
				call UnitApplyTimedLife(slower_0, 'BTLF', .75)
				call UnitAddAbility(slower_0, 'A07S')
				call SetUnitAbilityLevel(slower_0, 'A07S', GetUnitAbilityLevel(caster_0, 'A07N'))
				call IssueTargetOrderById(slower_0, $D006B, Picked_0)
				set slower_0 = null
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", Picked_0, "origin"))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIlb\\AIlbSpecialArt.mdl", Picked_0, "chest"))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningShield\\LightningShieldBuff.mdl", Picked_0, "origin"))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", Picked_0, "chest"))
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		set Picked_0 = null
		call TimerStart(tl_0, .6, false, function Trig_Thundercloud_lightning2_Actions)
		set xp_0 = x_0 + GetRandomReal(200., 250.) * Cos(((stage_0 * 120.) + angle_0) * bj_DEGTORAD_1)
		set yp_0 = y_0 + GetRandomReal(200., 250.) * Sin(((stage_0 * 120.) + angle_0) * bj_DEGTORAD_1)
		call SaveReal(udg_hash_1, h_0, 8, xp_0)
		call SaveReal(udg_hash_1, h_0, 9, yp_0)
		set tl_0 = null
		set Picked_0 = null
		call DestroyGroup(g_0)
		set g_0 = null
		if stage_0 >= 4 then
			set efcloud_0 = LoadEffectHandle(udg_hash_1, h_0, 6)
			call DestroyEffect(efcloud_0)
			set efcloud_0 = null
			call KillUnit(cloud_0)
			set cloud_0 = null
			call FlushChildHashtable(udg_hash_1, h_0)
			call DestroyTimer(t_0)
			set t_0 = null
		endif
	else
		set between_0 = bj_RADTODEG_1 * Atan2(yp_0 - yu_0, xp_0 - xu_0)
		set xu_0 = xu_0 + 5. * Cos(between_0 * bj_DEGTORAD_1)
		set yu_0 = yu_0 + 5. * Sin(between_0 * bj_DEGTORAD_1)
		if IsTerrainPathable(xu_0, yu_0, PATHING_TYPE_FLYABILITY_1) == false then
			call SetUnitPosition(cloud_0, xu_0, yu_0)
		else
			set efcloud_0 = LoadEffectHandle(udg_hash_1, h_0, 6)
			call DestroyEffect(efcloud_0)
			set efcloud_0 = null
			call KillUnit(cloud_0)
			set cloud_0 = null
			call FlushChildHashtable(udg_hash_1, h_0)
			call DestroyTimer(t_0)
			set t_0 = null
		endif
	endif
	set t_0 = null
	set cloud_0 = null
	set caster_0 = null
	set p_0 = null
	call RemoveLocation(loccloudz_0)
	set loccloudz_0 = null
endfunction

function Trig_Storm_periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local real x = LoadReal(udg_hash_1, h_0, 2)
	local real y = LoadReal(udg_hash_1, h_0, 3)
	local integer lvl = LoadInteger(udg_hash_1, h_0, 5)
	local integer order = GetUnitCurrentOrder(caster_0)
	local integer lvlult = GetUnitAbilityLevel(caster_0, 'A07P')
	local integer lvlultup = GetUnitAbilityLevel(caster_0, 'A0Q6')
	local unit dammi
	local real px
	local real py
	local integer orderId
	local unit cloud
	local player p
	local real damage
	local real angle
	local effect efcloud
	local location loc
	local timer t2
	local integer h2
	set orderId_0 = $D0278
	if (orderId_0 != 0) then
	else
		set orderId_0 = UnitId("channel")
		if (orderId_0 != 0) then
		endif
	endif
	if order_0 == orderId_0 and (lvl_0 > 0) then
		set t2_0 = CreateTimer()
		set h2_0 = GetHandleId(t2_0)
		set p_0 = GetOwningPlayer(caster_0)
		if lvlult_0 > 0 then
			set damage_0 = (.12 * lvlult_0 + 1.) * ((5. + (25. * lvl_0) + ((.1 + .05 * lvl_0) * GetHeroInt(caster_0, true))))
		endif
		if lvlultup_0 > 0 then
			set damage_0 = (.17 * lvlultup_0 + 1.) * ((5. + (25. * lvl_0) + ((.1 + .05 * lvl_0) * GetHeroInt(caster_0, true))))
		endif
		set angle_0 = GetRandomReal(.0, 360.)
		set px_0 = x_0 + GetRandomReal(200., 400.) * Cos(angle_0 * bj_DEGTORAD_1)
		set py_0 = y_0 + GetRandomReal(200., 400.) * Sin(angle_0 * bj_DEGTORAD_1)
		set cloud_0 = CreateUnit(GetOwningPlayer(caster_0), 'h00U', px_0, py_0, .0)
		set efcloud_0 = AddSpecialEffectTarget("war3mapImported\\OutlandStorm.mdx", cloud_0, "origin")
		call UnitAddAbility(cloud_0, 'Amrf')
		call UnitRemoveAbility(cloud_0, 'Amrf')
		set loc_0 = Location(px_0, py_0)
		call SetUnitFlyHeight(cloud_0, 350. + GetLocationZ(loc_0), .0)
		call SetUnitScale(cloud_0, 1.35, 1.35, 1.35)
		call SetUnitPosition(cloud_0, px_0, py_0)
		call SaveUnitHandle(udg_hash_1, h2_0, 1, cloud_0)
		call SaveReal(udg_hash_1, h2_0, 2, px_0)
		call SaveReal(udg_hash_1, h2_0, 3, py_0)
		call SaveReal(udg_hash_1, h2_0, 4, angle_0)
		call SaveInteger(udg_hash_1, h2_0, 5, 0)
		call SaveEffectHandle(udg_hash_1, h2_0, 6, efcloud_0)
		call SaveUnitHandle(udg_hash_1, h2_0, 7, caster_0)
		call SaveReal(udg_hash_1, h2_0, 8, px_0)
		call SaveReal(udg_hash_1, h2_0, 9, py_0)
		call SaveReal(udg_hash_1, h2_0, $A, damage_0)
		call SavePlayerHandle(udg_hash_1, h2_0, $B, p_0)
		call TimerStart(t2_0, .04, true, function Trig_Thundercloud2_move_Actions)
		set caster_0 = null
		call RemoveLocation(loc_0)
		set loc_0 = null
		set cloud_0 = null
		set efcloud_0 = null
		set t2_0 = null
		set p_0 = null
		call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Purge\\PurgeBuffTarget.mdl", caster_0, "origin"))
		call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", caster_0, "origin"))
		call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningBolt\\LightningBoltMissile.mdl", caster_0, "overhead"))
		call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningShield\\LightningShieldTarget.mdl", caster_0, "origin"))
		call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", caster_0, "chest"))
		call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", caster_0, "hand,right"))
		call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", caster_0, "weapon"))
	else
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
		call RemoveUnit(LoadUnitHandle(udg_hash_1, GetHandleId(caster_0), 'u'))
	endif
	set t_0 = null
	set caster_0 = null
endfunction

function Trig_Storm_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A07N')
	local integer lvlult = GetUnitAbilityLevel(caster_0, 'A07P')
	local integer lvlultup = GetUnitAbilityLevel(caster_0, 'A0Q6')
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveReal(udg_hash_1, h_0, 2, x_0)
	call SaveReal(udg_hash_1, h_0, 3, y_0)
	call SaveInteger(udg_hash_1, h_0, 5, lvl_0)
	if lvlult_0 > 0 then
		call AddProgressBar(caster_0, 240. + (3. * lvlult_0), (.9 + .1 * lvl_0), (.5 * 3 * lvlult_0), false, true, 'u', $96, $96, $AF)
	endif
	if lvlultup_0 > 0 then
		call AddProgressBar(caster_0, 240. + (3. * lvlultup_0), (.9 + .1 * lvl_0), (.5 * 4 * lvlultup_0), false, true, 'u', $96, $96, $AF)
	endif
	call TimerStart(t_0, .5, true, function Trig_Storm_periodic_Actions)
	set caster_0 = null
	set t_0 = null
endfunction

function Trig_Storm_Conditions takes nothing returns boolean
	return (GetSpellAbilityId() == 'A07P' or GetSpellAbilityId() == 'A0Q6')
endfunction

function InitTrig_Storm takes nothing returns nothing
	local integer index = 0
	set gg_trg_Storm_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Storm_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Storm_1, Condition(function Trig_Storm_Conditions))
	call TriggerAddAction(gg_trg_Storm_1, function Trig_Storm_Actions)
endfunction

function Trig_Respawnlol_Actions takes nothing returns nothing
	call ConditionalTriggerExecute(gg_trg_Ranger_Load_1)
endfunction

function InitTrig_Respawnlol takes nothing returns nothing
	set gg_trg_Respawnlol_1 = CreateTrigger()
	call TriggerRegisterTimerEventSingle(gg_trg_Respawnlol_1, 5)
	call TriggerAddAction(gg_trg_Respawnlol_1, function Trig_Respawnlol_Actions)
endfunction

function Trig_Ranger_Load_Actions takes nothing returns nothing
	call AbilityPreload('A0EE', 6)
	call AbilityPreload('A0ED', 4)
	call AbilityPreload('A0EF', 1)
	call AbilityPreload('A0EH', 6)
	call AbilityPreload('A0EK', 6)
	call AbilityPreload('A0EL', 6)
	call AbilityPreload('A0EG', 6)
	call AbilityPreload('A0EN', 6)
	call AbilityPreload('A0EO', 1)
	call AbilityPreload('A0EP', 3)
	call AbilityPreload('A0EM', 6)
	call AbilityPreload('A0EI', 6)
	call AbilityPreload('A0EJ', 6)
	call EffectPreload("Abilities\\Spells\\Other\\BreathOfFire\\BreathOfFireDamage.mdl")
	call EffectPreload("Abilities\\Spells\\Other\\FrostDamage\\FrostDamage.mdl")
	call EffectPreload("Abilities\\Weapons\\ZigguratFrostMissile\\ZigguratFrostMissile.mdl")
	call EffectPreload("Abilities\\Spells\\Undead\\Curse\\CurseTarget.mdl")
	call EffectPreload("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl")
	call EffectPreload("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl")
	call EffectPreload("Abilities\\Spells\\Undead\\OrbOfDeath\\AnnihilationMissile.mdl")
	call EffectPreload("Abilities\\Weapons\\SearingArrow\\SearingArrowMissile.mdl")
	call EffectPreload("Abilities\\Weapons\\ColdArrow\\ColdArrowMissile.mdl")
	call EffectPreload("Abilities\\Spells\\Other\\BlackArrow\\BlackArrowMissile.mdl")
	call EffectPreload("Abilities\\Spells\\Other\\Drain\\ManaDrainCaster.mdl")
	call EnableTrigger(gg_trg_MultiShotSwitch_1)
	call EnableTrigger(gg_trg_Learn_Release_of_Arrows_1)
	call EnableTrigger(gg_trg_Release_of_Arrows_1)
	call EnableTrigger(gg_trg_Dexterity_of_the_Ranger_1)
endfunction

function InitTrig_Ranger_Load takes nothing returns nothing
	set gg_trg_Ranger_Load_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Ranger_Load_1, function Trig_Ranger_Load_Actions)
endfunction

function Trig_MultiShotSwitch_Actions takes nothing returns nothing
	local unit caster = GetTriggerUnit()
	local unit death = GetDyingUnit()
	local integer id = 'A0EF'
	local integer orderId
	if GetUnitAbilityLevel(death_0, id_0) > 0 then
		call UnitRemoveAbility(death_0, id_0)
	endif
	set orderId_0 = $D0057
	if (GetIssuedOrderId() == orderId_0) then
		call UnitAddAbility(caster_0, id_0)
		call SetUnitAbilityLevel(caster_0, 'A0ED', 1 + GetUnitAbilityLevel(caster_0, 'A0EP'))
		call UnitMakeAbilityPermanent(caster_0, true, id_0)
		call UnitMakeAbilityPermanent(caster_0, true, 'A0ED')
	endif
	set orderId_0 = $D0058
	if (GetIssuedOrderId() == orderId_0) then
		call UnitRemoveAbility(caster_0, id_0)
	endif
	set caster_0 = null
	set death_0 = null
endfunction

function Trig_MultiShotSwitch_Conditions takes nothing returns boolean
	return GetUnitAbilityLevel(GetTriggerUnit(), 'A0EE') > 0 or GetUnitAbilityLevel(GetDyingUnit(), 'A0EE') > 0
endfunction

function InitTrig_MultiShotSwitch takes nothing returns nothing
	local integer index = 0
	set gg_trg_MultiShotSwitch_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_MultiShotSwitch_1, Player(index_0), EVENT_PLAYER_UNIT_ISSUED_ORDER_1, null)
		call TriggerRegisterPlayerUnitEvent(gg_trg_MultiShotSwitch_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_MultiShotSwitch_1, Condition(function Trig_MultiShotSwitch_Conditions))
	call TriggerAddAction(gg_trg_MultiShotSwitch_1, function Trig_MultiShotSwitch_Actions)
endfunction

function Trig_Learn_Release_of_Arrows_Actions takes nothing returns nothing
	local unit u = GetLearningUnit()
	local integer lvl = GetUnitAbilityLevel(u_0, 'A0EH')
	if lvl_0 == 1 then
		call UnitAddAbility(u_0, 'A0EK')
		call UnitAddAbility(u_0, 'A0EL')
		call UnitAddAbility(u_0, 'A0EG')
		call UnitMakeAbilityPermanent(u_0, true, 'A0EK')
		call UnitMakeAbilityPermanent(u_0, true, 'A0EL')
		call UnitMakeAbilityPermanent(u_0, true, 'A0EG')
	else
		call SetUnitAbilityLevel(u_0, 'A0EK', lvl_0)
		call SetUnitAbilityLevel(u_0, 'A0EL', lvl_0)
		call SetUnitAbilityLevel(u_0, 'A0EG', lvl_0)
	endif
	set u_0 = null
endfunction

function Trig_Learn_Release_of_Arrows_Conditions takes nothing returns boolean
	return GetLearnedSkill() == 'A0EH' and GetUnitTypeId(GetLearningUnit()) != 'h00U'
endfunction

function InitTrig_Learn_Release_of_Arrows takes nothing returns nothing
	local integer index = 0
	set gg_trg_Learn_Release_of_Arrows_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Release_of_Arrows_1, Player(index_0), EVENT_PLAYER_HERO_SKILL_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Learn_Release_of_Arrows_1, Condition(function Trig_Learn_Release_of_Arrows_Conditions))
	call TriggerAddAction(gg_trg_Learn_Release_of_Arrows_1, function Trig_Learn_Release_of_Arrows_Actions)
endfunction

function Trig_Release_of_Arrows_periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 20)
	local integer count = LoadInteger(udg_hash_1, h_0, 21)
	local real damage = LoadReal(udg_hash_1, h_0, 22)
	local integer check = LoadInteger(udg_hash_1, h_0, 23)
	local integer abiltype = LoadInteger(udg_hash_1, h_0, 24)
	local group gdamage = LoadGroupHandle(udg_hash_1, h_0, 25)
	local player p = GetOwningPlayer(caster_0)
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0EH')
	local unit arrow
	local real ax
	local real ay
	local real face
	local integer lop = 0
	local effect ef
	local unit dammi
	local string sef
	local string order
	local integer rawcode
	local group g = CreateGroup()
	local group gr = CreateGroup()
	local unit Picked
	if check_0 < 25 then
		set check_0 = check_0 + 1
		call SaveInteger(udg_hash_1, h_0, 23, check_0)
		if abiltype_0 == 1 then
			set sef_0 = "Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl"
			set rawcode_0 = 'A0EM'
			set order_0 = "acidbomb"
		endif
		if abiltype_0 == 2 then
			set sef_0 = "Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl"
			set rawcode_0 = 'A0EI'
			set order_0 = "slow"
		endif
		if abiltype_0 == 3 then
			set sef_0 = "Abilities\\Spells\\Undead\\OrbOfDeath\\AnnihilationMissile.mdl"
			set rawcode_0 = 'A0EJ'
			set order_0 = "innerfire"
		endif
		loop
			exitwhen lop_0 >= count_0
			set arrow_0 = LoadUnitHandle(udg_hash_1, h_0, lop_0)
			set face_0 = GetUnitFacing(arrow_0)
			set ax_0 = GetUnitX(arrow_0) + 36. * Cos(face_0 * bj_DEGTORAD_1)
			set ay_0 = GetUnitY(arrow_0) + 36. * Sin(face_0 * bj_DEGTORAD_1)
			if IsTerrainPathable(ax_0, ay_0, PATHING_TYPE_FLYABILITY_1) == false then
				call SetUnitPosition(arrow_0, ax_0, ay_0)
				call GroupEnumUnitsInRange(g_0, ax_0, ay_0, 100., null)
				loop
					set Picked_0 = FirstOfGroup(g_0)
					exitwhen Picked_0 == null
					if IsUnitEnemy(Picked_0, p_0) and IsUnitInGroup(Picked_0, gdamage_0) == false and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
						call GroupAddUnit(gdamage_0, Picked_0)
						call GroupAddUnit(gr_0, Picked_0)
					endif
					call GroupRemoveUnit(g_0, Picked_0)
				endloop
				set Picked_0 = null
			endif
			set arrow_0 = null
			set lop_0 = lop_0 + 1
		endloop
		loop
			set Picked_0 = FirstOfGroup(gr_0)
			exitwhen Picked_0 == null
			set dammi_0 = CreateUnit(p_0, 'h00U', ax_0, ay_0, .0)
			call UnitApplyTimedLife(dammi_0, 'BTLF', .34)
			call UnitAddAbility(dammi_0, rawcode_0)
			call SetUnitAbilityLevel(dammi_0, rawcode_0, lvl_0)
			call IssueTargetOrder(dammi_0, order_0, Picked_0)
			call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
			call DestroyEffect(AddSpecialEffectTarget(sef_0, Picked_0, "chest"))
			set dammi_0 = null
			call GroupRemoveUnit(gr_0, Picked_0)
		endloop
	else
		loop
			exitwhen lop_0 >= count_0
			set arrow_0 = LoadUnitHandle(udg_hash_1, h_0, lop_0)
			set ef_0 = LoadEffectHandle(udg_hash_1, h_0, $A + lop_0)
			call KillUnit(arrow_0)
			call DestroyEffect(ef_0)
			set arrow_0 = null
			set ef_0 = null
			set lop_0 = lop_0 + 1
		endloop
		call GroupClear(gdamage_0)
		call DestroyGroup(gdamage_0)
		set gdamage_0 = null
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
		set t_0 = null
	endif
	set t_0 = null
	set caster_0 = null
	set gdamage_0 = null
	set p_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	call GroupClear(gr_0)
	call DestroyGroup(gr_0)
	set gr_0 = null
	set Picked_0 = null
endfunction

function Trig_Release_of_Arrows_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local unit target = GetSpellTargetUnit()
	local real tx
	local real ty
	local location loc
	local real angle
	local real angle1
	local player p = GetOwningPlayer(caster_0)
	local integer abilityid = GetSpellAbilityId()
	local integer abiltype
	local integer count = GetUnitAbilityLevel(caster_0, GetSpellAbilityId()) + 2
	local integer lop = 0
	local real damage = ((count_0 * 25.) - 35.)
	local integer lvlult = GetUnitAbilityLevel(caster_0, 'A0EP')
	local unit arrow
	local integer check = 0
	local effect ef
	local string s
	local group gdamage = CreateGroup()
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local boolean perekluchatelangle = false
	local integer counterangle = 0
	local integer hcaster = GetHandleId(caster_0)
	local integer agility
	local integer bonus
	if lvlult_0 > 0 then
		set damage_0 = damage_0 * (1. + .15 * GetUnitAbilityLevel(caster_0, 'A0EP') + .05)
	endif
	if target_0 == null then
		set loc_0 = GetSpellTargetLoc()
		set tx_0 = GetLocationX(loc_0)
		set ty_0 = GetLocationY(loc_0)
	else
		set tx_0 = GetUnitX(target_0)
		set ty_0 = GetUnitY(target_0)
	endif
	set angle_0 = (bj_RADTODEG_1 * Atan2(ty_0 - y_0, tx_0 - x_0))
	if target_0 == caster_0 then
		set angle_0 = GetUnitFacing(caster_0)
	endif
	if count_0 - ((count_0 / 2) * 2) == 0 then
		set angle_0 = angle_0 + 6.
	endif
	if abilityid_0 == 'A0EK' then
		set abiltype_0 = 1
		set s_0 = "Abilities\\Weapons\\SearingArrow\\SearingArrowMissile.mdl"
	endif
	if abilityid_0 == 'A0EL' then
		set abiltype_0 = 2
		set s_0 = "Abilities\\Weapons\\ColdArrow\\ColdArrowMissile.mdl"
	endif
	if abilityid_0 == 'A0EG' then
		set abiltype_0 = 3
		set s_0 = "Abilities\\Spells\\Other\\BlackArrow\\BlackArrowMissile.mdl"
	endif
	loop
		exitwhen lop_0 >= count_0
		if perekluchatelangle_0 then
			set perekluchatelangle_0 = false
			set angle_0 = angle_0 - (counterangle_0 * 12.)
		else
			set perekluchatelangle_0 = true
			set angle_0 = angle_0 + (counterangle_0 * 12.)
		endif
		set arrow_0 = CreateUnit(p_0, 'h00U', x_0, y_0, angle_0)
		call SetUnitScale(arrow_0, 1.2, 1.2, 1.2)
		set ef_0 = AddSpecialEffectTarget(s_0, arrow_0, "chest")
		call SaveUnitHandle(udg_hash_1, h_0, lop_0, arrow_0)
		call SaveEffectHandle(udg_hash_1, h_0, $A + lop_0, ef_0)
		set arrow_0 = null
		set ef_0 = null
		set lop_0 = lop_0 + 1
		set counterangle_0 = counterangle_0 + 1
	endloop
	if GetUnitAbilityLevel(caster_0, 'A0EO') > 0 then
		set hcaster_0 = GetHandleId(caster_0)
		set agility_0 = LoadInteger(udg_hash_1, hcaster_0, 52)
		set bonus_0 = LoadInteger(udg_hash_1, hcaster_0, 53)
		if agility_0 <= 30 * GetUnitAbilityLevel(caster_0, 'A0EN') - 5 - (count_0 * bonus_0) then
			set agility_0 = agility_0 + (count_0 * bonus_0)
			call SetHeroAgi(caster_0, GetHeroAgi(caster_0, false) + (count_0 * bonus_0), true)
			call SaveInteger(udg_hash_1, hcaster_0, 52, agility_0)
			call ProgressBarAddPercentComplete(LoadUnitHandle(udg_hash_1, GetHandleId(caster_0), 'u'), (((count_0 * bonus_0) * 100.) / (30 * GetUnitAbilityLevel(caster_0, 'A0EN') - 5 - (count_0 * bonus_0))))
		else
			call SetHeroAgi(caster_0, GetHeroAgi(caster_0, false) - agility_0 + (30 * GetUnitAbilityLevel(caster_0, 'A0EN')) - 5, true)
			set agility_0 = 30 * GetUnitAbilityLevel(caster_0, 'A0EN') - 5
			call SaveInteger(udg_hash_1, hcaster_0, 52, agility_0)
		endif
	endif
	call SaveUnitHandle(udg_hash_1, h_0, 20, caster_0)
	call SaveInteger(udg_hash_1, h_0, 21, count_0)
	call SaveReal(udg_hash_1, h_0, 22, damage_0)
	call SaveInteger(udg_hash_1, h_0, 23, check_0)
	call SaveInteger(udg_hash_1, h_0, 24, abiltype_0)
	call SaveGroupHandle(udg_hash_1, h_0, 25, gdamage_0)
	call TimerStart(t_0, .04, true, function Trig_Release_of_Arrows_periodic_Actions)
	set caster_0 = null
	set target_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set p_0 = null
	set gdamage_0 = null
	set t_0 = null
endfunction

function Trig_Release_of_Arrows_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0EK' or GetSpellAbilityId() == 'A0EL' or GetSpellAbilityId() == 'A0EG'
endfunction

function InitTrig_Release_of_Arrows takes nothing returns nothing
	local integer index = 0
	set gg_trg_Release_of_Arrows_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Release_of_Arrows_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Release_of_Arrows_1, Condition(function Trig_Release_of_Arrows_Conditions))
	call TriggerAddAction(gg_trg_Release_of_Arrows_1, function Trig_Release_of_Arrows_Actions)
endfunction

function Trig_Dexterity_of_the_Ranger_Remove_Agility_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local effect ef = LoadEffectHandle(udg_hash_1, h_0, 2)
	local integer agility = LoadInteger(udg_hash_1, GetHandleId(caster_0), 52)
	call SetHeroAgi(caster_0, GetHeroAgi(caster_0, false) - agility_0, true)
	call UnitRemoveAbility(caster_0, 'A0EO')
	call DestroyEffect(ef_0)
	call RemoveUnit(LoadUnitHandle(udg_hash_1, GetHandleId(caster_0), 'u'))
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
	set ef_0 = null
	set caster_0 = null
endfunction

function Trig_Dexterity_of_the_Ranger_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real time = 10. + 2 * GetUnitAbilityLevel(caster_0, 'A0EP')
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0EN')
	local integer agility = 6 + 4 * lvl_0
	local integer chetnost = ((lvl_0 / 2) * 2) - lvl_0
	local integer bonus
	local effect ef = AddSpecialEffectTarget("Abilities\\Spells\\Other\\Drain\\ManaDrainCaster.mdl", caster_0, "overhead")
	if chetnost_0 == 0 then
		set bonus_0 = (lvl_0 / 2)
	else
		set bonus_0 = (lvl_0 / 2) + 1
	endif
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveEffectHandle(udg_hash_1, h_0, 2, ef_0)
	call SaveInteger(udg_hash_1, GetHandleId(caster_0), 52, agility_0)
	call SaveInteger(udg_hash_1, GetHandleId(caster_0), 53, bonus_0)
	call SetHeroAgi(caster_0, GetHeroAgi(caster_0, false) + agility_0, true)
	call UnitAddAbility(caster_0, 'A0EO')
	call TimerStart(t_0, 10., false, function Trig_Dexterity_of_the_Ranger_Remove_Agility_Actions)
	call AddProgressBar(caster_0, 150. + (2. * lvl_0), (.9 + .05 * lvl_0), 1., true, false, 'u', 20, 'n', $E6)
	call ProgressBarAddPercentComplete(LoadUnitHandle(udg_hash_1, GetHandleId(caster_0), 'u'), (agility_0 * 100. / (30 * GetUnitAbilityLevel(caster_0, 'A0EN') - 5)))
	set caster_0 = null
	set ef_0 = null
	set t_0 = null
endfunction

function Trig_Dexterity_of_the_Ranger_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0EN'
endfunction

function InitTrig_Dexterity_of_the_Ranger takes nothing returns nothing
	local integer index = 0
	set gg_trg_Dexterity_of_the_Ranger_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Dexterity_of_the_Ranger_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Dexterity_of_the_Ranger_1, Condition(function Trig_Dexterity_of_the_Ranger_Conditions))
	call TriggerAddAction(gg_trg_Dexterity_of_the_Ranger_1, function Trig_Dexterity_of_the_Ranger_Actions)
endfunction

function Trig_Healer_Load_Actions takes nothing returns nothing
	call AbilityPreload('A006', 6)
	call AbilityPreload('A04P', 6)
	call AbilityPreload('A0AC', 6)
	call AbilityPreload('A0AE', 3)
	call UnitPreload('h01O')
	call AbilityPreload('A0EQ', 6)
	call AbilityPreload('A0ER', 6)
	call AbilityPreload('A032', 6)
	call AbilityPreload('A0A8', 6)
	call AbilityPreload('A0AD', 1)
	call AbilityPreload('B020', 1)
	call AbilityPreload('B022', 1)
	call AbilityPreload('B023', 1)
	call AbilityPreload('B025', 1)
	call AbilityPreload('B028', 1)
	call EffectPreload("Abilities\\Spells\\Items\\StaffOfSanctuary\\Staff_Sanctuary_Target.mdl")
	call EffectPreload("Abilities\\Spells\\Items\\PotionOfOmniscience\\CrystalBallCaster.mdl")
	call EffectPreload("Abilities\\Spells\\Human\\InnerFire\\InnerFireTarget.mdl")
	call EffectPreload("Abilities\\Spells\\Other\\ANrm\\ANrmTarget.mdl")
	call EffectPreload("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl")
	call EffectPreload("Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl")
	call EffectPreload("war3mapImported\\Curing_Light_Effect.mdx")
	call EffectPreload("Abilities\\Spells\\Undead\\ReplenishHealth\\ReplenishHealthCasterOverhead.mdl")
	call EffectPreload("Abilities\\Spells\\NightElf\\Tranquility\\Tranquility.mdl")
	call EffectPreload("war3mapImported\\Retribution.mdx")
	call EnableTrigger(gg_trg_Good_Healing_1)
	call EnableTrigger(gg_trg_Spiritual_Communication_1)
	call EnableTrigger(gg_trg_Curing_Light_1)
	call EnableTrigger(gg_trg_Guardian_Angel_1)
endfunction

function InitTrig_Healer_Load takes nothing returns nothing
	set gg_trg_Healer_Load_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Healer_Load_1, function Trig_Healer_Load_Actions)
endfunction

function Trig_Good_Healing_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local player p = GetOwningPlayer(caster_0)
	local location loc = GetSpellTargetLoc()
	local real x = GetLocationX(loc_0)
	local real y = GetLocationY(loc_0)
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A006')
	local real damage = ((5 * lvl_0 * lvl_0) + 20) + (20. * lvl_0) + (GetHeroInt(caster_0, true) * .2 * lvl_0)
	local real heal = (($A * lvl_0 * lvl_0) + 40) + (40. * lvl_0) + (GetHeroInt(caster_0, true) * .4 * lvl_0)
	local group g = CreateGroup()
	local unit Picked
	local unit dammi
	call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl", x_0, y_0))
	call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl", x_0, y_0))
	set dammi_0 = CreateUnit(p_0, 'h00U', x_0, y_0, .0)
	call SetUnitX(dammi_0, x_0)
	call SetUnitY(dammi_0, y_0)
	call UnitApplyTimedLife(dammi_0, 'BTLF', 2.)
	call UnitAddAbility(dammi_0, 'A0EQ')
	call SetUnitAbilityLevel(dammi_0, 'A0EQ', lvl_0)
	call IssueImmediateOrderById(dammi_0, $D00C4)
	call GroupEnumUnitsInRange(g_0, x_0, y_0, 300. + 10., null)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if IsUnitEnemy(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
			call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl", Picked_0, "origin"))
		endif
		if IsUnitAlly(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
			call SetUnitState(Picked_0, UNIT_STATE_LIFE_1, GetUnitState(Picked_0, UNIT_STATE_LIFE_1) + heal_0)
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl", Picked_0, "origin"))
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl", Picked_0, "origin"))
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set dammi_0 = null
	set caster_0 = null
	set p_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set Picked_0 = null
	set dammi_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
endfunction

function Trig_Good_Healing_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A006'
endfunction

function InitTrig_Good_Healing takes nothing returns nothing
	local integer index = 0
	set gg_trg_Good_Healing_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Good_Healing_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Good_Healing_1, Condition(function Trig_Good_Healing_Conditions))
	call TriggerAddAction(gg_trg_Good_Healing_1, function Trig_Good_Healing_Actions)
endfunction

function Trig_Spiritual_Communication_Ligtning_Move_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local unit target = LoadUnitHandle(udg_hash_1, h_0, 2)
	local lightning l = LoadLightningHandle(udg_hash_1, h_0, 3)
	local real time = LoadReal(udg_hash_1, h_0, 4)
	local location locc = GetUnitLoc(caster_0)
	local real xc = GetUnitX(caster_0)
	local real yc = GetUnitY(caster_0)
	local location loct = GetUnitLoc(target_0)
	local real xt = GetUnitX(target_0)
	local real yt = GetUnitY(target_0)
	local real dx = xc_0 - xt_0
	local real dy = yc_0 - yt_0
	local real dist = SquareRoot(dx_0 * dx_0 + dy_0 * dy_0)
	local integer liferegen
	local integer manaregen
	if GetUnitState(caster_0, UNIT_STATE_LIFE_1) > .405 and GetUnitState(target_0, UNIT_STATE_LIFE_1) > .0 and dist_0 <= 700. and time_0 > .0 then
		set time_0 = time_0 - .04
		call SaveReal(udg_hash_1, h_0, 4, time_0)
		call MoveLightningEx(l_0, true, xc_0, yc_0, 50. + GetLocationZ(locc_0), xt_0, yt_0, 50. + GetLocationZ(loct_0))
	else
		call UnitRemoveAbility(caster_0, 'B022')
		call UnitRemoveAbility(target_0, 'B022')
		call UnitRemoveAbility(caster_0, 'B023')
		call UnitRemoveAbility(target_0, 'B023')
		set liferegen_0 = LoadInteger(udg_hash_1, h_0, 5)
		set manaregen_0 = LoadInteger(udg_hash_1, h_0, 6)
		call SetUnitLifeAndManaRegeneration(caster_0, "life", -1 * liferegen_0)
		call SetUnitLifeAndManaRegeneration(target_0, "life", -1 * liferegen_0)
		call SetUnitLifeAndManaRegeneration(caster_0, "mana", -1 * manaregen_0)
		call SetUnitLifeAndManaRegeneration(target_0, "mana", -1 * manaregen_0)
		call DestroyLightning(l_0)
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set caster_0 = null
	set target_0 = null
	set l_0 = null
	call RemoveLocation(locc_0)
	set locc_0 = null
	call RemoveLocation(loct_0)
	set loct_0 = null
endfunction

function Trig_Spiritual_Communication_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local unit target = GetSpellTargetUnit()
	local unit dammi
	local location locc = GetUnitLoc(caster_0)
	local real xc = GetUnitX(caster_0)
	local real yc = GetUnitY(caster_0)
	local location loct = GetUnitLoc(target_0)
	local real xt = GetUnitX(target_0)
	local real yt = GetUnitY(target_0)
	local lightning l = AddLightningEx("SPLK", true, xc_0, yc_0, 50. + GetLocationZ(locc_0), xt_0, yt_0, 50. + GetLocationZ(loct_0))
	local player p = GetOwningPlayer(caster_0)
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A04P')
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local real time = 10. + (.05 * GetHeroInt(caster_0, true))
	local integer liferegen = $A + ($A * lvl_0)
	local integer manaregen = (5 * lvl_0)
	call SetUnitLifeAndManaRegeneration(caster_0, "life", liferegen_0)
	call SetUnitLifeAndManaRegeneration(target_0, "life", liferegen_0)
	call SetUnitLifeAndManaRegeneration(caster_0, "mana", manaregen_0)
	call SetUnitLifeAndManaRegeneration(target_0, "mana", manaregen_0)
	set dammi_0 = CreateUnit(p_0, 'h00U', xt_0, yt_0, .0)
	call UnitApplyTimedLife(dammi_0, 'BTLF', 1.5)
	call UnitAddAbility(dammi_0, 'A0ER')
	call SetUnitAbilityLevel(dammi_0, 'A0ER', lvl_0)
	call IssueTargetOrderById(dammi_0, $D0085, caster_0)
	set dammi_0 = null
	if GetOwningPlayer(target_0) != Player($D) then
		set dammi_0 = CreateUnit(p_0, 'h00U', xt_0, yt_0, .0)
		call UnitApplyTimedLife(dammi_0, 'BTLF', 1.5)
		call UnitAddAbility(dammi_0, 'A0ER')
		call SetUnitAbilityLevel(dammi_0, 'A0ER', lvl_0)
		call IssueTargetOrderById(dammi_0, $D0085, target_0)
		set dammi_0 = null
	endif
	set dammi_0 = CreateUnit(p_0, 'h00U', xt_0, yt_0, .0)
	call UnitApplyTimedLife(dammi_0, 'BTLF', 1.5)
	call UnitAddAbility(dammi_0, 'A032')
	call SetUnitAbilityLevel(dammi_0, 'A032', lvl_0)
	call IssueTargetOrderById(dammi_0, $D0062, caster_0)
	set dammi_0 = null
	set dammi_0 = CreateUnit(p_0, 'h00U', xt_0, yt_0, .0)
	call UnitApplyTimedLife(dammi_0, 'BTLF', 1.5)
	call UnitAddAbility(dammi_0, 'A032')
	call SetUnitAbilityLevel(dammi_0, 'A032', lvl_0)
	call IssueTargetOrderById(dammi_0, $D0062, target_0)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveUnitHandle(udg_hash_1, h_0, 2, target_0)
	call SaveLightningHandle(udg_hash_1, h_0, 3, l_0)
	call SaveReal(udg_hash_1, h_0, 4, time_0)
	call SaveInteger(udg_hash_1, h_0, 5, liferegen_0)
	call SaveInteger(udg_hash_1, h_0, 6, manaregen_0)
	call TimerStart(t_0, .04, true, function Trig_Spiritual_Communication_Ligtning_Move_Actions)
	set caster_0 = null
	set target_0 = null
	set dammi_0 = null
	call RemoveLocation(locc_0)
	set locc_0 = null
	call RemoveLocation(loct_0)
	set loct_0 = null
	set l_0 = null
	set p_0 = null
	set t_0 = null
endfunction

function Trig_Spiritual_Communication_Conditions takes nothing returns boolean
	return (GetSpellAbilityId() == 'A04P' and IsUnitType(GetSpellAbilityUnit(), UNIT_TYPE_HERO_1)) != null
endfunction

function InitTrig_Spiritual_Communication takes nothing returns nothing
	local integer index = 0
	set gg_trg_Spiritual_Communication_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Spiritual_Communication_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Spiritual_Communication_1, Condition(function Trig_Spiritual_Communication_Conditions))
	call TriggerAddAction(gg_trg_Spiritual_Communication_1, function Trig_Spiritual_Communication_Actions)
endfunction

function Trig_Curing_Light_Heal_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local integer wait = LoadInteger(udg_hash_1, h_0, 1)
	local group gheal = LoadGroupHandle(udg_hash_1, h_0, 2)
	local unit sphere = LoadUnitHandle(udg_hash_1, h_0, 3)
	local integer heal = LoadInteger(udg_hash_1, h_0, 4)
	local integer lvl = LoadInteger(udg_hash_1, h_0, 5)
	local effect ef = LoadEffectHandle(udg_hash_1, h_0, 6)
	local player p = GetOwningPlayer(sphere_0)
	local real x = GetUnitX(sphere_0)
	local real y = GetUnitY(sphere_0)
	local group maingroup = CreateGroup()
	local group g = CreateGroup()
	local group gcurrent = CreateGroup()
	local group copygheal = CreateGroup()
	local unit Picked
	local unit dammi
	if wait_0 > 0 then
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 1, wait_0)
		call GroupEnumUnitsInRange(g_0, x_0, y_0, 300., null)
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if (IsUnitAlly(Picked_0, p_0) or GetOwningPlayer(Picked_0) == Player($D)) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call GroupAddUnit(gcurrent_0, Picked_0)
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		set Picked_0 = null
		call GroupAddGroup(gheal_0, maingroup_0)
		call GroupAddGroup(gcurrent_0, maingroup_0)
		loop
			set Picked_0 = FirstOfGroup(maingroup_0)
			exitwhen Picked_0 == null
			if IsUnitInGroup(Picked_0, gheal_0) and IsUnitInGroup(Picked_0, gcurrent_0) == false then
				call GroupRemoveUnit(gheal_0, Picked_0)
				call SetUnitLifeAndManaRegeneration(Picked_0, "life", -1 * heal_0)
			endif
			if IsUnitInGroup(Picked_0, gheal_0) == false and IsUnitInGroup(Picked_0, gcurrent_0) then
				call GroupAddUnit(gheal_0, Picked_0)
				call SetUnitLifeAndManaRegeneration(Picked_0, "life", heal_0)
			endif
			call GroupRemoveUnit(maingroup_0, Picked_0)
		endloop
		set Picked_0 = null
		call SaveGroupHandle(udg_hash_1, h_0, 2, gheal_0)
		call GroupAddGroup(gheal_0, copygheal_0)
		call RandomUnitFromGroup(1, copygheal_0)
		set Picked_0 = FirstOfGroup(udg_GroupRandomUnitFromGroup_1)
		call SetUnitState(Picked_0, UNIT_STATE_LIFE_1, GetUnitState(Picked_0, UNIT_STATE_LIFE_1) + (lvl_0 * .01) * GetUnitState(Picked_0, UNIT_STATE_MAX_LIFE_1))
		call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl", Picked_0, "origin"))
	else
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
		call DestroyEffect(ef_0)
		set dammi_0 = CreateUnit(Player($C), 'h00U', x_0, y_0, GetRandomReal(.0, 360.))
		call SetUnitScale(dammi_0, 3.1, 3.1, 3.1)
		call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishHealth\\ReplenishHealthCasterOverhead.mdl", dammi_0, "chest"))
		call RemoveUnit(sphere_0)
		loop
			set Picked_0 = FirstOfGroup(gheal_0)
			exitwhen Picked_0 == null
			call SetUnitLifeAndManaRegeneration(Picked_0, "life", -1 * heal_0)
			call GroupRemoveUnit(gheal_0, Picked_0)
		endloop
	endif
	set t_0 = null
	set ef_0 = null
	set sphere_0 = null
	set p_0 = null
	set gheal_0 = null
	call GroupClear(maingroup_0)
	call DestroyGroup(maingroup_0)
	set maingroup_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	call GroupClear(gcurrent_0)
	call DestroyGroup(gcurrent_0)
	set gcurrent_0 = null
	call GroupClear(copygheal_0)
	call DestroyGroup(copygheal_0)
	set copygheal_0 = null
	set dammi_0 = null
	set Picked_0 = null
endfunction

function Trig_Curing_Light_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local player p = GetOwningPlayer(caster_0)
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0AC')
	local location loc = GetSpellTargetLoc()
	local real x = GetLocationX(loc_0)
	local real y = GetLocationY(loc_0)
	local unit sphere = CreateUnit(p_0, 'h01O', x_0, y_0, GetRandomReal(.0, 360.))
	local group g = CreateGroup()
	local group gheal = CreateGroup()
	local unit Picked
	local integer constheal = 8 + (8 * lvl_0) + R2I((((.06 * lvl_0) + .06) * GetHeroInt(caster_0, true)))
	local integer wait = $C
	local effect ef = AddSpecialEffectTarget("war3mapImported\\Curing_Light_Effect.mdx", sphere_0, "origin")
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local unit dammi = CreateUnit(p_0, 'h00U', x_0, y_0, GetRandomReal(.0, 360.))
	call SetUnitScale(dammi_0, 3.1, 3.1, 3.1)
	call UnitAddAbility(sphere_0, 'A0A8')
	call SetUnitAbilityLevel(sphere_0, 'A0A8', lvl_0)
	call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishHealth\\ReplenishHealthCasterOverhead.mdl", dammi_0, "chest"))
	call GroupEnumUnitsInRange(g_0, x_0, y_0, 300., null)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if (IsUnitAlly(Picked_0, p_0) or GetOwningPlayer(Picked_0) == Player($D)) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
			call GroupAddUnit(gheal_0, Picked_0)
			call SetUnitLifeAndManaRegeneration(Picked_0, "life", constheal_0)
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	call SaveInteger(udg_hash_1, h_0, 1, wait_0)
	call SaveGroupHandle(udg_hash_1, h_0, 2, gheal_0)
	call SaveUnitHandle(udg_hash_1, h_0, 3, sphere_0)
	call SaveInteger(udg_hash_1, h_0, 4, constheal_0)
	call SaveInteger(udg_hash_1, h_0, 5, lvl_0)
	call SaveEffectHandle(udg_hash_1, h_0, 6, ef_0)
	call TimerStart(t_0, 1., true, function Trig_Curing_Light_Heal_Actions)
	set caster_0 = null
	set p_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set sphere_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set gheal_0 = null
	set Picked_0 = null
	set ef_0 = null
	set t_0 = null
	set dammi_0 = null
endfunction

function Trig_Curing_Light_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0AC'
endfunction

function InitTrig_Curing_Light takes nothing returns nothing
	local integer index = 0
	set gg_trg_Curing_Light_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Curing_Light_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Curing_Light_1, Condition(function Trig_Curing_Light_Conditions))
	call TriggerAddAction(gg_trg_Curing_Light_1, function Trig_Curing_Light_Actions)
endfunction

function Trig_Guardian_Angel_10sec_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local group gheal = LoadGroupHandle(udg_hash_1, h_0, 1)
	local integer adddamage = LoadInteger(udg_hash_1, h_0, 2)
	local integer addarmor = LoadInteger(udg_hash_1, h_0, 3)
	local effect ef = LoadEffectHandle(udg_hash_1, h_0, 4)
	local integer liferegen = LoadInteger(udg_hash_1, h_0, 5)
	local unit Picked
	call DestroyEffect(ef_0)
	set ef_0 = null
	loop
		set Picked_0 = FirstOfGroup(gheal_0)
		exitwhen Picked_0 == null
		set ef_0 = LoadEffectHandle(udg_hash_1, GetHandleId(Picked_0), 66)
		if ef_0 != null then
			call DestroyEffect(ef_0)
			set ef_0 = null
		endif
		call SetAttackAbilityLevel(Picked_0, -adddamage_0)
		call SetArmorAbilityLevel(Picked_0, -addarmor_0)
		call SetUnitLifeAndManaRegeneration(Picked_0, "life", -liferegen_0)
		call UnitRemoveAbility(Picked_0, 'A0AD')
		call GroupRemoveUnit(gheal_0, Picked_0)
		call SaveEffectHandle(udg_hash_1, GetHandleId(Picked_0), 66, null)
		call SaveReal(udg_hash_1, GetHandleId(Picked_0), 65, .0)
	endloop
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
	call GroupClear(gheal_0)
	call DestroyGroup(gheal_0)
	set gheal_0 = null
	set ef_0 = null
	set Picked_0 = null
endfunction

function Trig_Guardian_Angel_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local player p = GetOwningPlayer(caster_0)
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0AE')
	local integer lvlup = GetUnitAbilityLevel(caster_0, 'A0Q3')
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local group g = CreateGroup()
	local group gheal = CreateGroup()
	local unit Picked
	local integer adddamage
	local integer addarmor
	local real shield
	local integer liferegen
	local effect ef
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local real aoe
	if lvl_0 > 0 then
		set adddamage_0 = 40 * lvl_0 + $A
		set addarmor_0 = 7 * lvl_0 + 3
		set shield_0 = 300. * lvl_0 + 100.
		set liferegen_0 = lvl_0 * $C + 4
		set aoe_0 = 750.
	endif
	if lvlup_0 > 0 then
		set adddamage_0 = 40 * lvlup_0 + $A
		set addarmor_0 = 7 * lvlup_0 + 3
		set shield_0 = 450. * lvlup_0 + 150.
		set liferegen_0 = lvlup_0 * $C + 4
		set aoe_0 = 999999.
	endif
	set ef_0 = AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Tranquility\\Tranquility.mdl", caster_0, "origin")
	call SaveEffectHandle(udg_hash_1, h_0, 4, ef_0)
	call GroupEnumUnitsInRange(g_0, x_0, y_0, aoe_0, null)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 and IsUnitAlly(Picked_0, p_0) and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
			set ef_0 = AddSpecialEffectTarget("war3mapImported\\Retribution.mdx", Picked_0, "origin")
			call SaveEffectHandle(udg_hash_1, GetHandleId(Picked_0), 66, ef_0)
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Resurrect\\ResurrectCaster.mdl", Picked_0, "origin"))
			call GroupAddUnit(gheal_0, Picked_0)
			call UnitAddAbility(Picked_0, 'A0AD')
			call SetAttackAbilityLevel(Picked_0, adddamage_0)
			call SetArmorAbilityLevel(Picked_0, addarmor_0)
			call SetUnitLifeAndManaRegeneration(Picked_0, "life", liferegen_0)
			call SaveReal(udg_hash_1, GetHandleId(Picked_0), 65, shield_0)
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	call SaveGroupHandle(udg_hash_1, h_0, 1, gheal_0)
	call SaveInteger(udg_hash_1, h_0, 2, adddamage_0)
	call SaveInteger(udg_hash_1, h_0, 3, addarmor_0)
	call SaveInteger(udg_hash_1, h_0, 5, liferegen_0)
	call TimerStart(t_0, 12., false, function Trig_Guardian_Angel_10sec_Actions)
	set caster_0 = null
	set p_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set gheal_0 = null
	set Picked_0 = null
	set ef_0 = null
	set t_0 = null
endfunction

function Trig_Guardian_Angel_Conditions takes nothing returns boolean
	return (GetSpellAbilityId() == 'A0AE' or GetSpellAbilityId() == 'A0Q3')
endfunction

function InitTrig_Guardian_Angel takes nothing returns nothing
	local integer index = 0
	set gg_trg_Guardian_Angel_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Guardian_Angel_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Guardian_Angel_1, Condition(function Trig_Guardian_Angel_Conditions))
	call TriggerAddAction(gg_trg_Guardian_Angel_1, function Trig_Guardian_Angel_Actions)
endfunction

function Trig_Paladin_Load_Actions takes nothing returns nothing
	call AbilityPreload('A0M6', 6)
	call AbilityPreload('A0M7', 6)
	call AbilityPreload('A0M8', 6)
	call AbilityPreload('A0MA', 3)
	call AbilityPreload('A0M9', 6)
	call AbilityPreload('B04G', 1)
	call AbilityPreload('B04H', 1)
	call EffectPreload("Effects\\Consecrate.mdx")
	call EffectPreload("Effects\\Holy Nova.mdx")
	call EffectPreload("Effects\\HolyArmor.MDX")
	call EffectPreload("Effects\\HolyAurora.MDX")
	call EffectPreload("Effects\\HolyAwakening.mdx")
	call EffectPreload("Effects\\HolyPhoenixMissle.mdx")
	call EffectPreload("Effects\\DivineRage.mdx")
	call EffectPreload("Effects\\HolySpiral.MDX")
	call EffectPreload("Effects\\LifeHigh.mdx")
	call EffectPreload("Effects\\LightNova.mdx")
	call EffectPreload("Effects\\MegaHeal.mdx")
	call EffectPreload("Effects\\OrbLightX.mdx")
	call EffectPreload("Effects\\RunicShield.mdx")
	call EnableTrigger(gg_trg_Spiral_of_Light_1)
	call EnableTrigger(gg_trg_Keeper_Seal_1)
	call EnableTrigger(gg_trg_Light_Hammer_1)
	call EnableTrigger(gg_trg_God_Hand_1)
endfunction

function InitTrig_Paladin_Load takes nothing returns nothing
	set gg_trg_Paladin_Load_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Paladin_Load_1, function Trig_Paladin_Load_Actions)
endfunction

function Trig_Spiral_of_Light_Remove_Bonus_Armor_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit target = LoadUnitHandle(udg_hash_1, h_0, 1)
	local integer armor = LoadInteger(udg_hash_1, h_0, 2)
	local effect ef = LoadEffectHandle(udg_hash_1, h_0, 3)
	call SetArmorAbilityLevel(target_0, -armor_0)
	call DestroyEffect(ef_0)
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
	set target_0 = null
	set ef_0 = null
endfunction

function Trig_Spiral_of_Light_Periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local unit target
	local unit dammi
	local integer stage = LoadInteger(udg_hash_1, h_0, 5)
	local effect ef
	local player p
	local group gdammi
	local group gdammi2
	local group g
	local unit Picked
	local unit dammi2
	local real x
	local real y
	local real xt
	local real yt
	local real angle
	local real angle2
	local real dist
	local real damage
	local real heal
	local boolean destroy1 = false
	local boolean destroy2 = false
	local boolean remove
	local integer armor
	local timer tarmor
	local integer harmor
	local real time
	if stage_0 == 0 then
		set target_0 = LoadUnitHandle(udg_hash_1, h_0, 2)
		set dammi_0 = LoadUnitHandle(udg_hash_1, h_0, 3)
		set x_0 = GetUnitX(dammi_0)
		set y_0 = GetUnitY(dammi_0)
		set xt_0 = GetUnitX(target_0)
		set yt_0 = GetUnitY(target_0)
		set angle_0 = bj_RADTODEG_1 * Atan2(yt_0 - y_0, xt_0 - x_0)
		if GetUnitState(target_0, UNIT_STATE_LIFE_1) > .405 then
			set x_0 = x_0 + 22. * Cos(angle_0 * bj_DEGTORAD_1)
			set y_0 = y_0 + 22. * Sin(angle_0 * bj_DEGTORAD_1)
			call SetUnitPosition(dammi_0, x_0, y_0)
			set dist_0 = SquareRoot((xt_0 - x_0) * (xt_0 - x_0) + (yt_0 - y_0) * (yt_0 - y_0))
			if dist_0 < 23. then
				set destroy1_0 = true
				call SetUnitPosition(dammi_0, xt_0, yt_0)
				call DestroyEffect(AddSpecialEffect("Effects\\Holy Nova.mdl", xt_0, yt_0))
			endif
		else
			set destroy1_0 = true
		endif
	endif
	if destroy1_0 then
		call KillUnit(dammi_0)
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 4)
		call DestroyEffect(ef_0)
		set ef_0 = null
		set stage_0 = 1
		call SaveInteger(udg_hash_1, h_0, 5, stage_0)
		set heal_0 = LoadReal(udg_hash_1, h_0, 6)
		call SetUnitState(target_0, UNIT_STATE_LIFE_1, GetUnitState(target_0, UNIT_STATE_LIFE_1) + heal_0)
		call DestroyEffect(AddSpecialEffectTarget("Effects\\MegaHeal.mdx", target_0, "origin"))
		call DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", target_0, "origin"), 2.)
		set armor_0 = R2I(GetUnitState(target_0, UNIT_STATE_MAX_LIFE_1) * .02)
		set tarmor_0 = CreateTimer()
		set harmor_0 = GetHandleId(tarmor_0)
		call SetArmorAbilityLevel(target_0, armor_0)
		set time_0 = LoadReal(udg_hash_1, h_0, $A)
		set ef_0 = AddSpecialEffectTarget("Effects\\RunicShield.mdx", target_0, "chest")
		call SaveUnitHandle(udg_hash_1, harmor_0, 1, target_0)
		call SaveInteger(udg_hash_1, harmor_0, 2, armor_0)
		call SaveEffectHandle(udg_hash_1, harmor_0, 3, ef_0)
		call TimerStart(tarmor_0, time_0, false, function Trig_Spiral_of_Light_Remove_Bonus_Armor_Actions)
		set ef_0 = null
		set tarmor_0 = null
		set p_0 = GetOwningPlayer(caster_0)
		set g_0 = CreateGroup()
		set gdammi_0 = CreateGroup()
		call GroupEnumUnitsInRange(g_0, xt_0, yt_0, 400., null)
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				if IsUnitEnemy(Picked_0, p_0) then
					set angle2_0 = bj_RADTODEG_1 * Atan2(GetUnitY(Picked_0) - yt_0, GetUnitX(Picked_0) - xt_0)
					set dammi2_0 = CreateUnit(p_0, 'h00U', xt_0, yt_0, angle2_0)
					call UnitAddAbility(dammi2_0, 'Amrf')
					call UnitRemoveAbility(dammi2_0, 'Amrf')
					call SetUnitFlyHeight(dammi2_0, 50., .0)
					set ef_0 = AddSpecialEffectTarget("Effects\\HolyPhoenixMissle.mdx", dammi2_0, "chest")
					call GroupAddUnit(gdammi_0, dammi2_0)
					call SaveUnitHandle(udg_hash_1, GetHandleId(dammi2_0), 1, Picked_0)
					call SaveStr(udg_hash_1, GetHandleId(dammi2_0), 2, "damage")
					call SaveEffectHandle(udg_hash_1, GetHandleId(dammi2_0), 3, ef_0)
					set ef_0 = null
					set dammi2_0 = null
				endif
				if IsUnitAlly(Picked_0, p_0) and Picked_0 != target_0 then
					set angle2_0 = bj_RADTODEG_1 * Atan2(GetUnitY(Picked_0) - yt_0, GetUnitX(Picked_0) - xt_0)
					set dammi2_0 = CreateUnit(p_0, 'h00U', xt_0, yt_0, angle2_0)
					call UnitAddAbility(dammi2_0, 'Amrf')
					call UnitRemoveAbility(dammi2_0, 'Amrf')
					call SetUnitFlyHeight(dammi2_0, 50., .0)
					set ef_0 = AddSpecialEffectTarget("Effects\\HolyPhoenixMissle.mdx", dammi2_0, "chest")
					call GroupAddUnit(gdammi_0, dammi2_0)
					call SaveUnitHandle(udg_hash_1, GetHandleId(dammi2_0), 1, Picked_0)
					call SaveStr(udg_hash_1, GetHandleId(dammi2_0), 2, "heal")
					call SaveEffectHandle(udg_hash_1, GetHandleId(dammi2_0), 3, ef_0)
					set ef_0 = null
					set dammi2_0 = null
				endif
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		call SaveGroupHandle(udg_hash_1, h_0, 9, gdammi_0)
		call GroupClear(g_0)
		call DestroyGroup(g_0)
		set g_0 = null
		set gdammi_0 = null
		set p_0 = null
	endif
	if stage_0 == 1 then
		set p_0 = GetOwningPlayer(caster_0)
		set gdammi_0 = LoadGroupHandle(udg_hash_1, h_0, 9)
		set gdammi2_0 = CreateGroup()
		call GroupAddGroup(gdammi_0, gdammi2_0)
		loop
			set dammi2_0 = FirstOfGroup(gdammi2_0)
			exitwhen dammi2_0 == null
			set remove_0 = false
			set target_0 = LoadUnitHandle(udg_hash_1, GetHandleId(dammi2_0), 1)
			set x_0 = GetUnitX(dammi2_0)
			set y_0 = GetUnitY(dammi2_0)
			set xt_0 = GetUnitX(target_0)
			set yt_0 = GetUnitY(target_0)
			set angle_0 = bj_RADTODEG_1 * Atan2(yt_0 - y_0, xt_0 - x_0)
			set x_0 = x_0 + 22. * Cos(angle_0 * bj_DEGTORAD_1)
			set y_0 = y_0 + 22. * Sin(angle_0 * bj_DEGTORAD_1)
			call SetUnitPosition(dammi2_0, x_0, y_0)
			set dist_0 = SquareRoot((xt_0 - x_0) * (xt_0 - x_0) + (yt_0 - y_0) * (yt_0 - y_0))
			if dist_0 < 23. or GetUnitState(target_0, UNIT_STATE_LIFE_1) < .405 then
				call SetUnitScale(dammi2_0, .6, .6, .6)
				set ef_0 = LoadEffectHandle(udg_hash_1, GetHandleId(dammi2_0), 3)
				call DestroyEffect(ef_0)
				set ef_0 = null
				if GetUnitState(target_0, UNIT_STATE_LIFE_1) > .405 then
					if LoadStr(udg_hash_1, GetHandleId(dammi2_0), 2) == "damage" then
						set damage_0 = LoadReal(udg_hash_1, h_0, 8)
						set remove_0 = true
						call DestroyEffect(AddSpecialEffectTarget("Effects\\HolyPhoenixMissle.mdx", target_0, "origin"))
						call UnitDamageTarget(caster_0, target_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
					else
						set heal_0 = LoadReal(udg_hash_1, h_0, 7)
						call SetUnitState(target_0, UNIT_STATE_LIFE_1, GetUnitState(target_0, UNIT_STATE_LIFE_1) + heal_0)
						call DestroyEffect(AddSpecialEffectTarget("Effects\\MegaHeal.mdx", target_0, "origin"))
						call DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", target_0, "origin"), 2.)
						set remove_0 = true
					endif
				else
					set remove_0 = true
					call DestroyEffect(AddSpecialEffect("Effects\\HolyPhoenixMissle.mdx", x_0, y_0))
				endif
				call GroupRemoveUnit(gdammi_0, dammi2_0)
				call FlushChildHashtable(udg_hash_1, GetHandleId(dammi2_0))
				if remove_0 then
					call RemoveUnit(dammi2_0)
				endif
			endif
			call GroupRemoveUnit(gdammi2_0, dammi2_0)
			set target_0 = null
		endloop
		set dammi2_0 = null
		call SaveGroupHandle(udg_hash_1, h_0, 9, gdammi_0)
		if CountUnitsInGroup(gdammi_0) == 0 then
			set stage_0 = 2
			call SaveInteger(udg_hash_1, h_0, 5, stage_0)
		endif
		set p_0 = null
		set gdammi_0 = null
		call GroupClear(gdammi2_0)
		call DestroyGroup(gdammi2_0)
		set gdammi2_0 = null
	endif
	if stage_0 == 2 then
		set gdammi_0 = LoadGroupHandle(udg_hash_1, h_0, 9)
		call GroupClear(gdammi_0)
		call DestroyGroup(gdammi_0)
		set gdammi_0 = null
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set caster_0 = null
endfunction

function Trig_Spiral_of_Light_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local unit target = GetSpellTargetUnit()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local real xt = GetUnitX(target_0)
	local real yt = GetUnitY(target_0)
	local real angle = bj_RADTODEG_1 * Atan2(yt_0 - y_0, xt_0 - x_0)
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local unit dammi
	local effect ef
	local real dist = SquareRoot((xt_0 - x_0) * (xt_0 - x_0) + (yt_0 - y_0) * (yt_0 - y_0))
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0M6')
	local real healmain = 50 + (70 * lvl_0) + ((GetHeroStr(caster_0, true) + GetHeroInt(caster_0, true)) / 2)
	local real heal = 30 + (50 * lvl_0)
	local real damage = $A + (30 * lvl_0)
	local real time = 2. + (1. * lvl_0)
	local integer stage = 0
	local integer hcaster = GetHandleId(caster_0)
	local effect hammeref
	set dammi_0 = CreateUnit(GetOwningPlayer(caster_0), 'h00U', x_0, y_0, angle_0)
	call UnitAddAbility(dammi_0, 'Amrf')
	call UnitRemoveAbility(dammi_0, 'Amrf')
	call SetUnitScale(dammi_0, 1.25, 1.25, 1.25)
	set ef_0 = AddSpecialEffectTarget("Effects\\HolySpiral.mdl", dammi_0, "chest")
	if GetRandomInt(1, 'd') <= (6 + (GetUnitAbilityLevel(caster_0, 'A0M8') * 4)) and GetUnitAbilityLevel(caster_0, 'A0M8') > 0 and LoadBoolean(udg_hash_1, hcaster_0, 'q') == false then
		call SaveReal(udg_hash_1, hcaster_0, 'p', .0)
		call SaveBoolean(udg_hash_1, hcaster_0, 'q', true)
		set hammeref_0 = AddSpecialEffectTarget("Abilities\\Spells\\Human\\slow\\slowtarget.mdl", caster_0, "weapon")
		call SaveEffectHandle(udg_hash_1, hcaster_0, 'r', hammeref_0)
		set hammeref_0 = null
		set hammeref_0 = AddSpecialEffectTarget("Effects\\LifeHigh.mdx", caster_0, "weapon")
		call SaveEffectHandle(udg_hash_1, hcaster_0, 's', hammeref_0)
		set hammeref_0 = null
	endif
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveUnitHandle(udg_hash_1, h_0, 2, target_0)
	call SaveUnitHandle(udg_hash_1, h_0, 3, dammi_0)
	call SaveEffectHandle(udg_hash_1, h_0, 4, ef_0)
	call SaveInteger(udg_hash_1, h_0, 5, stage_0)
	call SaveReal(udg_hash_1, h_0, 6, healmain_0)
	call SaveReal(udg_hash_1, h_0, 7, heal_0)
	call SaveReal(udg_hash_1, h_0, 8, damage_0)
	call SaveReal(udg_hash_1, h_0, $A, time_0)
	call TimerStart(t_0, .03, true, function Trig_Spiral_of_Light_Periodic_Actions)
	set caster_0 = null
	set target_0 = null
	set t_0 = null
	set dammi_0 = null
	set ef_0 = null
endfunction

function Trig_Spiral_of_Light_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0M6'
endfunction

function InitTrig_Spiral_of_Light takes nothing returns nothing
	local integer index = 0
	set gg_trg_Spiral_of_Light_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Spiral_of_Light_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Spiral_of_Light_1, Condition(function Trig_Spiral_of_Light_Conditions))
	call TriggerAddAction(gg_trg_Spiral_of_Light_1, function Trig_Spiral_of_Light_Actions)
endfunction

function Trig_Keeper_Seal_Periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local unit target = LoadUnitHandle(udg_hash_1, h_0, 2)
	local unit dammi = LoadUnitHandle(udg_hash_1, h_0, 3)
	local effect ef
	local integer wait = LoadInteger(udg_hash_1, h_0, 7)
	local real angle = LoadReal(udg_hash_1, h_0, 8)
	local integer bonushp
	local integer bonusregen
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local real xt = x_0 + 125. * Cos(angle_0 * bj_DEGTORAD_1)
	local real yt = y_0 + 125. * Sin(angle_0 * bj_DEGTORAD_1)
	if wait_0 > 0 and GetUnitState(target_0, UNIT_STATE_LIFE_1) > .405 and GetUnitState(caster_0, UNIT_STATE_LIFE_1) > .405 then
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 7, wait_0)
		set angle_0 = angle_0 + 5.
		call SaveReal(udg_hash_1, h_0, 8, angle_0)
		call SetUnitPosition(dammi_0, xt_0, yt_0)
	else
		set bonushp_0 = LoadInteger(udg_hash_1, h_0, 5)
		set bonusregen_0 = LoadInteger(udg_hash_1, h_0, 6)
		call SetUnitMaxState(caster_0, UNIT_STATE_MAX_LIFE_1, -bonushp_0)
		call SetUnitLifeAndManaRegeneration(caster_0, "life", -bonusregen_0)
		call SaveReal(udg_hash_1, GetHandleId(target_0), 'n', .0)
		call SaveUnitHandle(udg_hash_1, GetHandleId(target_0), 'o', null)
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 4)
		call DestroyEffect(ef_0)
		set ef_0 = null
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, $B)
		call DestroyEffect(ef_0)
		set ef_0 = null
		call KillUnit(dammi_0)
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set caster_0 = null
	set target_0 = null
	set dammi_0 = null
endfunction

function Trig_Keeper_Seal_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local unit target = GetSpellTargetUnit()
	local real x
	local real y
	local timer t
	local integer h
	local player p = GetOwningPlayer(caster_0)
	local unit dammi
	local effect ef
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0M7')
	local integer bonushp
	local integer bonusregen
	local real resist
	local integer wait
	local real angle
	local integer hcaster = GetHandleId(caster_0)
	local effect hammeref
	if LoadReal(udg_hash_1, GetHandleId(target_0), 'n') > .0 then
		call UnitRemoveAbility(caster_0, 'A0M7')
		call UnitAddAbility(caster_0, 'A0M7')
		call SetUnitAbilityLevel(caster_0, 'A0M7', lvl_0)
		call SetUnitState(caster_0, UNIT_STATE_MANA_1, GetUnitState(caster_0, UNIT_STATE_MANA_1) + 120. + (5. * lvl_0))
		call SimError(p_0, "На этого воина уже наложена печать хранителя.")
	else
		set t_0 = CreateTimer()
		set h_0 = GetHandleId(t_0)
		set x_0 = GetUnitX(caster_0)
		set y_0 = GetUnitY(caster_0)
		set bonushp_0 = 'd' + (50 * lvl_0)
		set resist_0 = (.1 * lvl_0) + .3
		set wait_0 = 500
		set angle_0 = 270.
		call SetUnitMaxState(caster_0, UNIT_STATE_MAX_LIFE_1, bonushp_0)
		set bonusregen_0 = R2I(GetUnitState(caster_0, UNIT_STATE_MAX_LIFE_1) * (.005 + (.005 * lvl_0)))
		call SetUnitLifeAndManaRegeneration(caster_0, "life", bonusregen_0)
		call SaveReal(udg_hash_1, GetHandleId(target_0), 'n', resist_0)
		call SaveUnitHandle(udg_hash_1, GetHandleId(target_0), 'o', caster_0)
		set dammi_0 = CreateUnit(p_0, 'h00U', x_0, y_0, .0)
		call UnitAddAbility(dammi_0, 'Amrf')
		call UnitRemoveAbility(dammi_0, 'Amrf')
		set ef_0 = AddSpecialEffectTarget("Effects\\OrbLightX.mdx", dammi_0, "chest")
		call SaveEffectHandle(udg_hash_1, h_0, 4, ef_0)
		set ef_0 = null
		set ef_0 = AddSpecialEffectTarget("Effects\\HolyArmor.MDX", target_0, "chest")
		call SaveEffectHandle(udg_hash_1, h_0, $B, ef_0)
		set ef_0 = null
		if GetRandomInt(1, 'd') <= (6 + (GetUnitAbilityLevel(caster_0, 'A0M8') * 4)) and GetUnitAbilityLevel(caster_0, 'A0M8') > 0 and LoadBoolean(udg_hash_1, hcaster_0, 'q') == false then
			call SaveReal(udg_hash_1, hcaster_0, 'p', .0)
			call SaveBoolean(udg_hash_1, hcaster_0, 'q', true)
			set hammeref_0 = AddSpecialEffectTarget("Abilities\\Spells\\Human\\slow\\slowtarget.mdl", caster_0, "weapon")
			call SaveEffectHandle(udg_hash_1, hcaster_0, 'r', hammeref_0)
			set hammeref_0 = null
			set hammeref_0 = AddSpecialEffectTarget("Effects\\LifeHigh.mdx", caster_0, "weapon")
			call SaveEffectHandle(udg_hash_1, hcaster_0, 's', hammeref_0)
			set hammeref_0 = null
		endif
		call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
		call SaveUnitHandle(udg_hash_1, h_0, 2, target_0)
		call SaveUnitHandle(udg_hash_1, h_0, 3, dammi_0)
		call SaveInteger(udg_hash_1, h_0, 5, bonushp_0)
		call SaveInteger(udg_hash_1, h_0, 6, bonusregen_0)
		call SaveInteger(udg_hash_1, h_0, 7, wait_0)
		call SaveReal(udg_hash_1, h_0, 8, angle_0)
		call TimerStart(t_0, .03, true, function Trig_Keeper_Seal_Periodic_Actions)
	endif
	set caster_0 = null
	set target_0 = null
	set t_0 = null
	set dammi_0 = null
	set p_0 = null
endfunction

function Trig_Keeper_Seal_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0M7'
endfunction

function InitTrig_Keeper_Seal takes nothing returns nothing
	local integer index = 0
	set gg_trg_Keeper_Seal_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Keeper_Seal_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Keeper_Seal_1, Condition(function Trig_Keeper_Seal_Conditions))
	call TriggerAddAction(gg_trg_Keeper_Seal_1, function Trig_Keeper_Seal_Actions)
endfunction

function Trig_Light_Hammer_Periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit hero = LoadUnitHandle(udg_hash_1, h_0, 1)
	local integer damage = LoadInteger(udg_hash_1, h_0, 2)
	local boolean first = LoadBoolean(udg_hash_1, h_0, 3)
	local integer lvl = GetUnitAbilityLevel(hero_0, 'A0M8')
	local integer newdamage = R2I(GetUnitState(hero_0, UNIT_STATE_MAX_LIFE_1) * .01 * lvl_0)
	if first_0 then
		set first_0 = false
		call SaveBoolean(udg_hash_1, h_0, 3, first_0)
		call TimerStart(t_0, 1., true, function Trig_Light_Hammer_Periodic_Actions)
	endif
	if damage_0 != newdamage_0 then
		call SetAttackAbilityLevel(hero_0, -damage_0)
		call SetAttackAbilityLevel(hero_0, newdamage_0)
		call SaveInteger(udg_hash_1, h_0, 2, newdamage_0)
	endif
	set hero_0 = null
	set t_0 = null
endfunction

function Trig_Light_Hammer_Actions takes nothing returns nothing
	local unit hero = GetLearningUnit()
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local integer damage = 0
	local boolean first = true
	call SaveUnitHandle(udg_hash_1, h_0, 1, hero_0)
	call SaveInteger(udg_hash_1, h_0, 2, damage_0)
	call SaveBoolean(udg_hash_1, h_0, 3, first_0)
	call TimerStart(t_0, .0, false, function Trig_Light_Hammer_Periodic_Actions)
	call AddProgressBar(hero_0, 235. + (3.), (.9 + .05), 1., true, false, 'v', $F8, $9A, 0)
	set hero_0 = null
	set t_0 = null
endfunction

function Trig_Light_Hammer_Conditions takes nothing returns boolean
	return GetLearnedSkill() == 'A0M8' and GetUnitAbilityLevel(GetLearningUnit(), 'A0M8') == 1 and GetUnitTypeId(GetLearningUnit()) != 'h00U'
endfunction

function InitTrig_Light_Hammer takes nothing returns nothing
	local integer index = 0
	set gg_trg_Light_Hammer_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Light_Hammer_1, Player(index_0), EVENT_PLAYER_HERO_SKILL_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Light_Hammer_1, Condition(function Trig_Light_Hammer_Conditions))
	call TriggerAddAction(gg_trg_Light_Hammer_1, function Trig_Light_Hammer_Actions)
endfunction

function Trig_God_Hand_Remove_Bonus_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit target = LoadUnitHandle(udg_hash_1, h_0, 1)
	local integer regen = LoadInteger(udg_hash_1, h_0, 2)
	local effect ef = LoadEffectHandle(udg_hash_1, h_0, 3)
	local integer stage = LoadInteger(udg_hash_1, h_0, 4)
	if stage_0 == 0 then
		call SaveReal(udg_hash_1, GetHandleId(target_0), 't', .0)
		call SetUnitLifeAndManaRegeneration(target_0, "life", -regen_0)
		call DestroyEffect(AddSpecialEffectTarget("Effects\\DivineRage.mdl", target_0, "origin"))
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	else
		call DestroyEffect(ef_0)
		set ef_0 = null
		call SaveInteger(udg_hash_1, h_0, 4, 0)
		call TimerStart(t_0, 4.5, false, function Trig_God_Hand_Remove_Bonus_Actions)
	endif
	set t_0 = null
	set target_0 = null
	set ef_0 = null
endfunction

function Trig_God_Hand_periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local unit target = LoadUnitHandle(udg_hash_1, h_0, 2)
	local real heal
	local real mana
	local integer wait = LoadInteger(udg_hash_1, h_0, 5)
	local integer delay = LoadInteger(udg_hash_1, h_0, 6)
	local real hpc = GetUnitState(caster_0, UNIT_STATE_LIFE_1)
	local real hpt = GetUnitState(target_0, UNIT_STATE_LIFE_1)
	local boolean alife
	local integer regen
	local integer order = GetUnitCurrentOrder(caster_0)
	local integer orderId
	local timer tbonus
	local integer hbonus
	local effect ef
	set orderId_0 = $D0079
	if (orderId_0 != 0) then
	else
		set orderId_0 = UnitId("blizzard")
		if (orderId_0 != 0) then
		endif
	endif
	if hpc_0 > .405 and hpt_0 > .405 then
		set alife_0 = true
	else
		set alife_0 = false
	endif
	if order_0 == orderId_0 and wait_0 > 0 and alife_0 then
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 5, wait_0)
	else
		if wait_0 == 0 and delay_0 == $A and alife_0 then
			call DestroyEffect(AddSpecialEffectTarget("Effects\\HolyAwakening.mdl", target_0, "origin"))
		endif
		if wait_0 <= 0 and delay_0 > 0 and alife_0 then
			set delay_0 = delay_0 - 1
			call SaveInteger(udg_hash_1, h_0, 6, delay_0)
		endif
		if wait_0 == 0 and delay_0 == 0 and (hpt_0 > .405) then
			set heal_0 = LoadReal(udg_hash_1, h_0, 3)
			set mana_0 = LoadReal(udg_hash_1, h_0, 4)
			set regen_0 = LoadInteger(udg_hash_1, h_0, 7)
			call SetUnitState(target_0, UNIT_STATE_LIFE_1, GetUnitState(target_0, UNIT_STATE_LIFE_1) + heal_0)
			call SetUnitState(target_0, UNIT_STATE_MANA_1, GetUnitState(target_0, UNIT_STATE_MANA_1) + mana_0)
			call DestroyEffect(AddSpecialEffectTarget("Effects\\MegaHeal.mdx", target_0, "origin"))
			call DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", target_0, "origin"), 2.)
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIma\\AImaTarget.mdl", target_0, "origin"))
			call SetUnitLifeAndManaRegeneration(target_0, "life", regen_0)
			set tbonus_0 = CreateTimer()
			set hbonus_0 = GetHandleId(tbonus_0)
			set ef_0 = AddSpecialEffectTarget("Effects\\HolyAurora.mdl", target_0, "origin")
			call SaveUnitHandle(udg_hash_1, hbonus_0, 1, target_0)
			call SaveInteger(udg_hash_1, hbonus_0, 2, regen_0)
			call SaveEffectHandle(udg_hash_1, hbonus_0, 3, ef_0)
			call SaveInteger(udg_hash_1, hbonus_0, 4, 1)
			set ef_0 = null
			call TimerStart(tbonus_0, 2.5, false, function Trig_God_Hand_Remove_Bonus_Actions)
			set tbonus_0 = null
		endif
		if (order_0 != orderId_0 and wait_0 > 0) or (wait_0 <= 0 and delay_0 <= 0) then
			call RemoveUnit(LoadUnitHandle(udg_hash_1, GetHandleId(caster_0), 'u'))
			call FlushChildHashtable(udg_hash_1, h_0)
			call DestroyTimer(t_0)
		endif
	endif
	set t_0 = null
	set caster_0 = null
	set target_0 = null
endfunction

function Trig_God_Hand_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local unit target = GetSpellTargetUnit()
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0MA')
	local real heal = (GetUnitState(target_0, UNIT_STATE_MAX_LIFE_1) * (.1 + (.1 * lvl_0))) + (100. + (125. * lvl_0))
	local real mana = (GetUnitState(target_0, UNIT_STATE_MAX_MANA_1) * (.1 + (.1 * lvl_0))) + (50. + (75. * lvl_0))
	local integer regen
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local integer wait = 70 - (lvl_0 * $A)
	local integer delay = $A
	local real fastresp = .05 + (.15 * lvl_0)
	local integer hcaster = GetHandleId(caster_0)
	local effect hammeref
	if IsUnitType(target_0, UNIT_TYPE_HERO_1) then
		set regen_0 = R2I((GetHeroStr(caster_0, true) + GetHeroStr(target_0, true)) * (.1 + (.1 * lvl_0)))
	else
		set regen_0 = R2I(GetHeroStr(caster_0, true) * (.1 + (.1 * lvl_0)))
	endif
	if GetRandomInt(1, 'd') <= (6 + (GetUnitAbilityLevel(caster_0, 'A0M8') * 4)) and GetUnitAbilityLevel(caster_0, 'A0M8') > 0 and LoadBoolean(udg_hash_1, hcaster_0, 'q') == false then
		call SaveReal(udg_hash_1, hcaster_0, 'p', .0)
		call SaveBoolean(udg_hash_1, hcaster_0, 'q', true)
		set hammeref_0 = AddSpecialEffectTarget("Abilities\\Spells\\Human\\slow\\slowtarget.mdl", caster_0, "weapon")
		call SaveEffectHandle(udg_hash_1, hcaster_0, 'r', hammeref_0)
		set hammeref_0 = null
		set hammeref_0 = AddSpecialEffectTarget("Effects\\LifeHigh.mdx", caster_0, "weapon")
		call SaveEffectHandle(udg_hash_1, hcaster_0, 's', hammeref_0)
		set hammeref_0 = null
	endif
	call SaveReal(udg_hash_1, GetHandleId(target_0), 't', fastresp_0)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveUnitHandle(udg_hash_1, h_0, 2, target_0)
	call SaveReal(udg_hash_1, h_0, 3, heal_0)
	call SaveReal(udg_hash_1, h_0, 4, mana_0)
	call SaveInteger(udg_hash_1, h_0, 5, wait_0)
	call SaveInteger(udg_hash_1, h_0, 6, delay_0)
	call SaveInteger(udg_hash_1, h_0, 7, regen_0)
	call DestroyEffect(AddSpecialEffectTarget("Effects\\Consecrate.mdl", caster_0, "origin"))
	call DestroyEffect(AddSpecialEffectTarget("Effects\\Consecrate.mdl", target_0, "origin"))
	call TimerStart(t_0, .05, true, function Trig_God_Hand_periodic_Actions)
	call AddProgressBar(caster_0, 185. + (3. * lvl_0), (.9 + .1 * lvl_0), (wait_0 * .05), false, true, 'u', $F8, $9A, 0)
	set caster_0 = null
	set target_0 = null
	set t_0 = null
endfunction

function Trig_God_Hand_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0MA'
endfunction

function InitTrig_God_Hand takes nothing returns nothing
	local integer index = 0
	set gg_trg_God_Hand_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_God_Hand_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_God_Hand_1, Condition(function Trig_God_Hand_Conditions))
	call TriggerAddAction(gg_trg_God_Hand_1, function Trig_God_Hand_Actions)
endfunction

function Trig_Stone_Guard_Load_Actions takes nothing returns nothing
	call AbilityPreload('A0MI', 6)
	call AbilityPreload('A0ML', 6)
	call AbilityPreload('A0MK', 6)
	call AbilityPreload('A0MM', 3)
	call AbilityPreload('A0MJ', 6)
	call AbilityPreload('B04I', 1)
	call AbilityPreload('B04J', 1)
	call EffectPreload("Effects\\Stone Shield.mdx")
	call EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl")
	call EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodMortarTeam.mdl")
	call EffectPreload("Effects\\RockV4.mdl")
	call EffectPreload("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl")
	call EffectPreload("Effects\\StoneSmall.mdl")
	call EffectPreload("Abilities\\Weapons\\CannonTowerMissile\\CannonTowerMissile.mdl")
	call EffectPreload("Effects\\Stonespear.mdl")
	call EffectPreload("Abilities\\Spells\\Other\\Volcano\\VolcanoDeath.mdl")
	call EffectPreload("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
	call EffectPreload("Abilities\\Spells\\Orc\\EarthQuake\\EarthQuakeTarget.mdl")
	call EnableTrigger(gg_trg_Boulder_Throw_1)
	call EnableTrigger(gg_trg_Earth_Shiver_1)
	call EnableTrigger(gg_trg_Learn_Stone_Armor_1)
	call EnableTrigger(gg_trg_Rock_Strike_1)
endfunction

function InitTrig_Stone_Guard_Load takes nothing returns nothing
	set gg_trg_Stone_Guard_Load_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Stone_Guard_Load_1, function Trig_Stone_Guard_Load_Actions)
endfunction

function Trig_Boulder_Throw_Move_Dest_Actions takes nothing returns nothing
	call KillDestructable(GetEnumDestructable())
endfunction

function Trig_Boulder_Throw_Move_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local real damage
	local real damage2
	local integer wait = LoadInteger(udg_hash_1, h_0, 4)
	local real angle
	local unit stone
	local effect ef
	local integer anim = LoadInteger(udg_hash_1, h_0, 8)
	local integer wait2 = LoadInteger(udg_hash_1, h_0, 9)
	local real xt
	local real yt
	local integer lvl
	local real bangle
	local real speed
	local player p
	local group g
	local unit Picked
	local unit dammi
	local unit boulder
	local integer i
	local real dist
	local unit dammief
	local rect r
	if wait_0 > 0 and (wait2_0 == 33) then
		set stone_0 = LoadUnitHandle(udg_hash_1, h_0, 6)
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 4, wait_0)
		set anim_0 = anim_0 + $A
		if anim_0 >= $AA then
			set anim_0 = 0
		endif
		call SaveInteger(udg_hash_1, h_0, 8, anim_0)
		call SetUnitFacing(stone_0, GetUnitFacing(stone_0) + 30.)
		call SetUnitAnimationByIndex(stone_0, anim_0)
		if wait_0 == 0 and wait2_0 == 33 then
			set damage_0 = LoadReal(udg_hash_1, h_0, 3)
			set xt_0 = LoadReal(udg_hash_1, h_0, $B)
			set yt_0 = LoadReal(udg_hash_1, h_0, $C)
			set p_0 = GetOwningPlayer(caster_0)
			set lvl_0 = GetUnitAbilityLevel(caster_0, 'A0MI')
			set g_0 = CreateGroup()
			call GroupEnumUnitsInRange(g_0, xt_0, yt_0, 250., null)
			set dammief_0 = CreateUnit(p_0, 'h00U', xt_0, yt_0, .0)
			call SetUnitFlyHeight(dammief_0, 40., .0)
			call SetUnitScale(dammief_0, 2., 2., 2.)
			call UnitApplyTimedLife(dammief_0, 'BTLF', 2.)
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", dammief_0, "chest"))
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\CannonTowerMissile\\CannonTowerMissile.mdl", dammief_0, "chest"))
			set r_0 = Rect(xt_0 - 250., yt_0 - 250., xt_0 + 250., yt_0 + 250.)
			call EnumDestructablesInRect(r_0, null, function Trig_Boulder_Throw_Move_Dest_Actions)
			loop
				set Picked_0 = FirstOfGroup(g_0)
				exitwhen Picked_0 == null
				if IsUnitEnemy(Picked_0, p_0) and Picked_0 != null and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
					call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", Picked_0, "chest"))
					set dammi_0 = CreateUnit(p_0, 'h00U', xt_0, yt_0, .0)
					call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
					call UnitAddAbility(dammi_0, 'A0MJ')
					call SetUnitAbilityLevel(dammi_0, 'A0MJ', lvl_0)
					call IssueTargetOrderById(dammi_0, $D006B, Picked_0)
					call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
					set dammi_0 = null
					set angle_0 = bj_RADTODEG_1 * Atan2(GetUnitY(Picked_0) - yt_0, GetUnitX(Picked_0) - xt_0)
					set dist_0 = SquareRoot(((GetUnitX(Picked_0) - xt_0) * (GetUnitX(Picked_0) - xt_0)) + ((GetUnitY(Picked_0) - yt_0) * (GetUnitY(Picked_0) - yt_0)))
					call MoveUnit(Picked_0, .4, 500. - dist_0, 625., angle_0, .0, false)
				endif
				call GroupRemoveUnit(g_0, Picked_0)
			endloop
			call RemoveUnit(stone_0)
			set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 7)
			call DestroyEffect(ef_0)
			set ef_0 = null
			set p_0 = null
			call GroupClear(g_0)
			call DestroyGroup(g_0)
			set g_0 = null
			call RemoveRect(r_0)
			set r_0 = null
		endif
		set stone_0 = null
	endif
	if wait2_0 > 0 and wait_0 <= 0 then
		set wait2_0 = wait2_0 - 1
		call SaveInteger(udg_hash_1, h_0, 9, wait2_0)
		set anim_0 = anim_0 + $A
		if anim_0 >= $AA then
			set anim_0 = 0
		endif
		call SaveInteger(udg_hash_1, h_0, 8, anim_0)
		if wait2_0 == 32 then
			set xt_0 = LoadReal(udg_hash_1, h_0, $B)
			set yt_0 = LoadReal(udg_hash_1, h_0, $C)
			set p_0 = GetOwningPlayer(caster_0)
			set i_0 = 1
			loop
				exitwhen i_0 >= $B
				if i_0 >= 1 and i_0 <= 7 then
					set bangle_0 = (360. / 7) * i_0
					set speed_0 = 225.
				endif
				if i_0 >= 8 and i_0 <= $A then
					set bangle_0 = (360. / 3) * (i_0 - 7)
					set speed_0 = 100.
				endif
				set boulder_0[i_0] = CreateUnit(p_0, 'h00E', xt_0, yt_0, bangle_0)
				set ef_0 = AddSpecialEffectTarget("Effects\\StoneSmall.mdl", boulder_0[i_0], "chest")
				call SetUnitScale(boulder_0[i_0], 1.5, 1.5, 1.5)
				call UnitAddAbility(boulder_0[i_0], 'Amrf')
				call UnitRemoveAbility(boulder_0[i_0], 'Amrf')
				call MoveUnit(boulder_0[i_0], 1., speed_0, .0, bangle_0, 500., true)
				call SaveUnitHandle(udg_hash_1, h_0, $F + i_0, boulder_0[i_0])
				call SaveEffectHandle(udg_hash_1, h_0, 30 + i_0, ef_0)
				set ef_0 = null
				set boulder_0[i_0] = null
				set i_0 = i_0 + 1
			endloop
		endif
		set i_0 = 1
		loop
			exitwhen i_0 >= $B
			set boulder_0[i_0] = LoadUnitHandle(udg_hash_1, h_0, $F + i_0)
			call SetUnitFacing(boulder_0[i_0], GetUnitFacing(boulder_0[i_0]) + 30.)
			set boulder_0[i_0] = null
			set i_0 = i_0 + 1
		endloop
		if wait2_0 <= 0 then
			set i_0 = 1
			loop
				exitwhen i_0 >= $B
				set boulder_0[i_0] = LoadUnitHandle(udg_hash_1, h_0, $F + i_0)
				set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 30 + i_0)
				call DestroyEffect(ef_0)
				call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", GetUnitX(boulder_0[i_0]), GetUnitY(boulder_0[i_0])))
				call RemoveUnit(boulder_0[i_0])
				set ef_0 = null
				set boulder_0[i_0] = null
				set i_0 = i_0 + 1
			endloop
			set damage2_0 = LoadReal(udg_hash_1, h_0, $A)
			set xt_0 = LoadReal(udg_hash_1, h_0, $B)
			set yt_0 = LoadReal(udg_hash_1, h_0, $C)
			set p_0 = GetOwningPlayer(caster_0)
			set g_0 = CreateGroup()
			call GroupEnumUnitsInRange(g_0, xt_0, yt_0, 250., null)
			set r_0 = Rect(xt_0 - 250., yt_0 - 250., xt_0 + 250., yt_0 + 250.)
			call EnumDestructablesInRect(r_0, null, function Trig_Boulder_Throw_Move_Dest_Actions)
			loop
				set Picked_0 = FirstOfGroup(g_0)
				exitwhen Picked_0 == null
				if IsUnitEnemy(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
					call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", Picked_0, "chest"))
					call UnitDamageTarget(caster_0, Picked_0, damage2_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
					call StunUnitTimed(Picked_0, .5)
				endif
				call GroupRemoveUnit(g_0, Picked_0)
			endloop
			set p_0 = null
			call GroupClear(g_0)
			call DestroyGroup(g_0)
			set g_0 = null
			call RemoveRect(r_0)
			set r_0 = null
			call FlushChildHashtable(udg_hash_1, h_0)
			call DestroyTimer(t_0)
		endif
	endif
	set t_0 = null
	set caster_0 = null
endfunction

function Trig_Boulder_Throw_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local location loc = GetSpellTargetLoc()
	local real xt = GetLocationX(loc_0)
	local real yt = GetLocationY(loc_0)
	local real angle = bj_RADTODEG_1 * Atan2((yt_0 - y_0), (xt_0 - x_0))
	local real dist = SquareRoot(((xt_0 - x_0) * (xt_0 - x_0)) + ((yt_0 - y_0) * (yt_0 - y_0)))
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0MI')
	local real damage = (35. * lvl_0) + (GetHeroStr(caster_0, true) * (.3 + .2 * lvl_0))
	local real damage2 = 20. * lvl_0
	local real time = dist_0 / 800.
	local integer time2 = 33
	local real height = dist_0 / 2
	local unit stone = CreateUnit(GetOwningPlayer(caster_0), 'h00E', x_0, y_0, angle_0)
	local effect ef = AddSpecialEffectTarget("Effects\\RockV4.mdl", stone_0, "chest")
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	if dist_0 < 50. then
		set time_0 = 1.
		set angle_0 = GetUnitFacing(caster_0)
		set dist_0 = 100.
		set height_0 = dist_0 / 2
		set time_0 = dist_0 / 800.
	endif
	call SetUnitX(stone_0, x_0 + 50. * Cos((angle_0 - 30.) * bj_DEGTORAD_1))
	call SetUnitY(stone_0, y_0 + 50. * Sin((angle_0 - 30.) * bj_DEGTORAD_1))
	call SetUnitScale(stone_0, 1.7, 1.7, 1.7)
	call SetUnitFlyHeight(stone_0, 40., .0)
	call MoveUnit(stone_0, time_0, 800., .0, angle_0, height_0, true)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveReal(udg_hash_1, h_0, 3, damage_0)
	call SaveInteger(udg_hash_1, h_0, 4, R2I(time_0 / .03))
	call SaveReal(udg_hash_1, h_0, 5, angle_0)
	call SaveUnitHandle(udg_hash_1, h_0, 6, stone_0)
	call SaveEffectHandle(udg_hash_1, h_0, 7, ef_0)
	call SaveInteger(udg_hash_1, h_0, 8, 1)
	call SaveInteger(udg_hash_1, h_0, 9, time2_0)
	call SaveReal(udg_hash_1, h_0, $A, damage2_0)
	call SaveReal(udg_hash_1, h_0, $B, xt_0)
	call SaveReal(udg_hash_1, h_0, $C, yt_0)
	call TimerStart(t_0, .03, true, function Trig_Boulder_Throw_Move_Actions)
	set caster_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set t_0 = null
	set stone_0 = null
	set ef_0 = null
endfunction

function Trig_Boulder_Throw_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0MI'
endfunction

function InitTrig_Boulder_Throw takes nothing returns nothing
	local integer index = 0
	set gg_trg_Boulder_Throw_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Boulder_Throw_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Boulder_Throw_1, Condition(function Trig_Boulder_Throw_Conditions))
	call TriggerAddAction(gg_trg_Boulder_Throw_1, function Trig_Boulder_Throw_Actions)
endfunction

function Trig_Boulder_Earth_Shiver_Dest_Actions takes nothing returns nothing
	call KillDestructable(GetEnumDestructable())
endfunction

function Trig_Boulder_Earth_Shiver_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local group gdamage = LoadGroupHandle(udg_hash_1, h_0, 2)
	local real damage = LoadReal(udg_hash_1, h_0, 3)
	local real xt = LoadReal(udg_hash_1, h_0, 4)
	local real yt = LoadReal(udg_hash_1, h_0, 5)
	local unit dammief = LoadUnitHandle(udg_hash_1, h_0, 6)
	local unit Picked
	local rect r = Rect(xt_0 - 325., yt_0 - 325., xt_0 + 325., yt_0 + 325.)
	call EnumDestructablesInRect(r_0, null, function Trig_Boulder_Earth_Shiver_Dest_Actions)
	loop
		set Picked_0 = FirstOfGroup(gdamage_0)
		exitwhen Picked_0 == null
		if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", Picked_0, "chest"))
			call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
		endif
		call GroupRemoveUnit(gdamage_0, Picked_0)
	endloop
	call RemoveUnit(dammief_0)
	set dammief_0 = null
	call GroupClear(gdamage_0)
	call DestroyGroup(gdamage_0)
	set gdamage_0 = null
	call RemoveRect(r_0)
	set r_0 = null
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
	set caster_0 = null
	set Picked_0 = null
endfunction

function Trig_Earth_Shiver_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local player p = GetOwningPlayer(caster_0)
	local location loc = GetSpellTargetLoc()
	local real xt = GetLocationX(loc_0)
	local real yt = GetLocationY(loc_0)
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0ML')
	local real damage = ((30. * lvl_0) + GetUnitState(caster_0, UNIT_STATE_MAX_LIFE_1) * (.01 + .01 * lvl_0)) / 2
	local real time = 1.
	local real stuntime = time_0 + .5
	local real height = 350.
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local group g = CreateGroup()
	local group gdamage = CreateGroup()
	local unit Picked
	local rect r = Rect(xt_0 - 325., yt_0 - 325., xt_0 + 325., yt_0 + 325.)
	local unit dammief = CreateUnit(p_0, 'h00U', xt_0, yt_0, .0)
	call SetUnitScale(dammief_0, 2., 2., 2.)
	call DestroyEffect(AddSpecialEffectTarget("Effects\\Stonespear.mdl", dammief_0, "origin"))
	call EnumDestructablesInRect(r_0, null, function Trig_Boulder_Earth_Shiver_Dest_Actions)
	call GroupEnumUnitsInRange(g_0, xt_0, yt_0, 325., null)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if IsUnitEnemy(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
			call DestroyEffect(AddSpecialEffect("Effects\\Stonespear.mdl", GetUnitX(Picked_0), GetUnitY(Picked_0)))
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", Picked_0, "chest"))
			call StunUnitTimed(Picked_0, stuntime_0)
			call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
			call MoveUnit(Picked_0, time_0, .0, .0, .0, height_0, false)
			call GroupAddUnit(gdamage_0, Picked_0)
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveGroupHandle(udg_hash_1, h_0, 2, gdamage_0)
	call SaveReal(udg_hash_1, h_0, 3, damage_0)
	call SaveReal(udg_hash_1, h_0, 4, xt_0)
	call SaveReal(udg_hash_1, h_0, 5, yt_0)
	call SaveUnitHandle(udg_hash_1, h_0, 6, dammief_0)
	call TimerStart(t_0, time_0, false, function Trig_Boulder_Earth_Shiver_Actions)
	set caster_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set t_0 = null
	call RemoveRect(r_0)
	set r_0 = null
	set p_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set gdamage_0 = null
	set Picked_0 = null
	set dammief_0 = null
endfunction

function Trig_Earth_Shiver_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0ML'
endfunction

function InitTrig_Earth_Shiver takes nothing returns nothing
	local integer index = 0
	set gg_trg_Earth_Shiver_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Earth_Shiver_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Earth_Shiver_1, Condition(function Trig_Earth_Shiver_Conditions))
	call TriggerAddAction(gg_trg_Earth_Shiver_1, function Trig_Earth_Shiver_Actions)
endfunction

function Trig_Learn_Stone_Armor_Actions takes nothing returns nothing
	local unit u = GetLearningUnit()
	if GetUnitAbilityLevel(u_0, 'A0MK') == 1 then
		call SetArmorAbilityLevel(u_0, 3)
	else
		call SetArmorAbilityLevel(u_0, 2)
	endif
	set u_0 = null
endfunction

function Trig_Learn_Stone_Armor_Conditions takes nothing returns boolean
	return GetLearnedSkill() == 'A0MK' and GetUnitTypeId(GetLearningUnit()) != 'h00U'
endfunction

function InitTrig_Learn_Stone_Armor takes nothing returns nothing
	local integer index = 0
	set gg_trg_Learn_Stone_Armor_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Stone_Armor_1, Player(index_0), EVENT_PLAYER_HERO_SKILL_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Learn_Stone_Armor_1, Condition(function Trig_Learn_Stone_Armor_Conditions))
	call TriggerAddAction(gg_trg_Learn_Stone_Armor_1, function Trig_Learn_Stone_Armor_Actions)
endfunction

function Trig_Rock_Strike_Move_Dest_Actions takes nothing returns nothing
	call KillDestructable(GetEnumDestructable())
endfunction

function Trig_Rock_Strike_Move_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local group gdamage = LoadGroupHandle(udg_hash_1, h_0, 2)
	local integer wait = LoadInteger(udg_hash_1, h_0, 3)
	local integer wait2 = LoadInteger(udg_hash_1, h_0, 4)
	local integer anim = LoadInteger(udg_hash_1, h_0, 6)
	local real damage
	local real damage2
	local real angle
	local real angle2
	local real angle3
	local unit stone
	local effect ef
	local real x
	local real y
	local real xt
	local real yt
	local player p
	local group g
	local unit Picked
	local real dist
	local unit dammief
	local rect r
	local real stuntime
	if wait_0 > 0 and (wait2_0 == 44) and GetUnitState(caster_0, UNIT_STATE_LIFE_1) > .405 then
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 3, wait_0)
		if wait_0 == 0 and wait2_0 == 44 then
			set damage_0 = LoadReal(udg_hash_1, h_0, 9)
			set xt_0 = LoadReal(udg_hash_1, h_0, $B)
			set yt_0 = LoadReal(udg_hash_1, h_0, $C)
			set stuntime_0 = LoadReal(udg_hash_1, h_0, $F)
			set angle_0 = LoadReal(udg_hash_1, h_0, 5)
			set p_0 = GetOwningPlayer(caster_0)
			set g_0 = CreateGroup()
			call GroupEnumUnitsInRange(g_0, xt_0, yt_0, 175., null)
			call SetUnitTimeScale(caster_0, 1.)
			set dammief_0 = CreateUnit(p_0, 'h00U', xt_0, yt_0, .0)
			call SetUnitScale(dammief_0, 1.3, 1.3, 1.3)
			call UnitApplyTimedLife(dammief_0, 'BTLF', 4.)
			call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", xt_0, yt_0))
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", dammief_0, "chest"))
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\CannonTowerMissile\\CannonTowerMissile.mdl", dammief_0, "chest"))
			call DestroyEffectWithWait(AddSpecialEffect("Abilities\\Spells\\Orc\\EarthQuake\\EarthQuakeTarget.mdl", xt_0, yt_0), 2.)
			set dammief_0 = null
			set r_0 = Rect(xt_0 - 175., yt_0 - 175., xt_0 + 175., yt_0 + 175.)
			call EnumDestructablesInRect(r_0, null, function Trig_Rock_Strike_Move_Dest_Actions)
			loop
				set Picked_0 = FirstOfGroup(g_0)
				exitwhen Picked_0 == null
				if IsUnitEnemy(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
					call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", Picked_0, "chest"))
					call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
					call StunUnitTimed(Picked_0, stuntime_0)
					set angle2_0 = bj_RADTODEG_1 * Atan2(GetUnitY(Picked_0) - yt_0, GetUnitX(Picked_0) - xt_0)
					set dist_0 = SquareRoot(((GetUnitX(Picked_0) - xt_0) * (GetUnitX(Picked_0) - xt_0)) + ((GetUnitY(Picked_0) - yt_0) * (GetUnitY(Picked_0) - yt_0)))
					call MoveUnit(Picked_0, .5, (600. - (dist_0 * 1.5)) / 2, 100., angle_0, .0, true)
				endif
				call GroupRemoveUnit(g_0, Picked_0)
			endloop
			set stone_0 = CreateUnit(p_0, 'h00E', xt_0, yt_0, angle_0)
			set ef_0 = AddSpecialEffectTarget("Effects\\RockV4.mdl", stone_0, "chest")
			call SaveUnitHandle(udg_hash_1, h_0, $D, stone_0)
			call SaveEffectHandle(udg_hash_1, h_0, $E, ef_0)
			call SetUnitScale(stone_0, 2.2, 2.2, 2.2)
			call SetUnitFlyHeight(stone_0, 50., .0)
			call MoveUnit(stone_0, 1.32, 800., .0, angle_0, .0, true)
			set p_0 = null
			call GroupClear(g_0)
			call DestroyGroup(g_0)
			set g_0 = null
			call RemoveRect(r_0)
			set r_0 = null
			set stone_0 = null
			set ef_0 = null
		endif
	endif
	if wait2_0 > 0 and wait_0 <= 0 then
		set wait2_0 = wait2_0 - 1
		call SaveInteger(udg_hash_1, h_0, 4, wait2_0)
		set anim_0 = LoadInteger(udg_hash_1, h_0, 6)
		set anim_0 = anim_0 + $F
		if anim_0 >= $AA then
			set anim_0 = 0
		endif
		set stone_0 = LoadUnitHandle(udg_hash_1, h_0, $D)
		call SetUnitAnimationByIndex(stone_0, anim_0)
		call SaveInteger(udg_hash_1, h_0, 6, anim_0)
		set damage2_0 = LoadReal(udg_hash_1, h_0, $A)
		set angle_0 = LoadReal(udg_hash_1, h_0, 5)
		set stuntime_0 = LoadReal(udg_hash_1, h_0, $F)
		set p_0 = GetOwningPlayer(caster_0)
		set g_0 = CreateGroup()
		set x_0 = GetUnitX(stone_0)
		set y_0 = GetUnitY(stone_0)
		call GroupEnumUnitsInRange(g_0, x_0, y_0, 175., null)
		call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", x_0, y_0))
		set r_0 = Rect(x_0 - 175., y_0 - 175., x_0 + 175., y_0 + 175.)
		call EnumDestructablesInRect(r_0, null, function Trig_Rock_Strike_Move_Dest_Actions)
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if IsUnitEnemy(Picked_0, p_0) and IsUnitInGroup(Picked_0, gdamage_0) == false and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", Picked_0, "chest"))
				call UnitDamageTarget(caster_0, Picked_0, damage2_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
				call StunUnitTimed(Picked_0, stuntime_0)
				set angle2_0 = bj_RADTODEG_1 * Atan2(GetUnitY(Picked_0) - y_0, GetUnitX(Picked_0) - x_0)
				set dist_0 = SquareRoot(((GetUnitX(Picked_0) - x_0) * (GetUnitX(Picked_0) - x_0)) + ((GetUnitY(Picked_0) - y_0) * (GetUnitY(Picked_0) - y_0)))
				set angle3_0 = (Atan2(y_0 - GetUnitY(Picked_0), x_0 - GetUnitX(Picked_0)) * bj_RADTODEG_1) + 360.
				if (angle3_0 <= (angle_0 + 210.) and angle3_0 >= (angle_0 + 180.)) then
					set angle2_0 = angle2_0 + 45.
				endif
				if (angle3_0 <= (angle_0 + 180.) and angle3_0 >= (angle_0 + 150.)) then
					set angle2_0 = angle2_0 - 45.
				endif
				call MoveUnit(Picked_0, .5, (700. - dist_0), 100., angle2_0, .0, true)
				call GroupAddUnit(gdamage_0, Picked_0)
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		set p_0 = null
		call GroupClear(g_0)
		call DestroyGroup(g_0)
		set g_0 = null
		call RemoveRect(r_0)
		set r_0 = null
		set stone_0 = null
		call SaveGroupHandle(udg_hash_1, h_0, 2, gdamage_0)
		if wait2_0 <= 0 then
			set stone_0 = LoadUnitHandle(udg_hash_1, h_0, $D)
			set ef_0 = LoadEffectHandle(udg_hash_1, h_0, $E)
			call DestroyEffect(ef_0)
			call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", x_0, y_0))
			call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Volcano\\VolcanoDeath.mdl", x_0, y_0))
			set ef_0 = null
			call RemoveUnit(stone_0)
			call FlushChildHashtable(udg_hash_1, h_0)
			call DestroyTimer(t_0)
			set stone_0 = null
		endif
		set p_0 = null
		call GroupClear(g_0)
		call DestroyGroup(g_0)
		set g_0 = null
		call RemoveRect(r_0)
		set r_0 = null
	endif
	set t_0 = null
	set caster_0 = null
	set gdamage_0 = null
endfunction

function Trig_Rock_Strike_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local location loc
	local real xt
	local real yt
	local unit target = GetSpellTargetUnit()
	local real angle
	local real dist
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0MM')
	local real damage = (5. + 135. * lvl_0)
	local real damage2 = (15. + 115. * lvl_0)
	local real stuntime = .75 + (.25 * lvl_0)
	local integer wait = 6
	local integer wait2 = 44
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local group gdamage = CreateGroup()
	if target_0 != null then
		set xt_0 = GetUnitX(target_0)
		set yt_0 = GetUnitY(target_0)
	else
		set loc_0 = GetSpellTargetLoc()
		set xt_0 = GetLocationX(loc_0)
		set yt_0 = GetLocationY(loc_0)
		call RemoveLocation(loc_0)
		set loc_0 = null
	endif
	set angle_0 = bj_RADTODEG_1 * Atan2((yt_0 - y_0), (xt_0 - x_0))
	set xt_0 = x_0 + 100. * Cos(angle_0 * bj_DEGTORAD_1)
	set yt_0 = y_0 + 100. * Sin(angle_0 * bj_DEGTORAD_1)
	call SetUnitTimeScale(caster_0, 2.)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveGroupHandle(udg_hash_1, h_0, 2, gdamage_0)
	call SaveInteger(udg_hash_1, h_0, 3, wait_0)
	call SaveInteger(udg_hash_1, h_0, 4, wait2_0)
	call SaveReal(udg_hash_1, h_0, 5, angle_0)
	call SaveInteger(udg_hash_1, h_0, 6, 0)
	call SaveInteger(udg_hash_1, h_0, 8, 1)
	call SaveReal(udg_hash_1, h_0, 9, damage_0)
	call SaveReal(udg_hash_1, h_0, $A, damage2_0)
	call SaveReal(udg_hash_1, h_0, $B, xt_0)
	call SaveReal(udg_hash_1, h_0, $C, yt_0)
	call SaveReal(udg_hash_1, h_0, $F, stuntime_0)
	call TimerStart(t_0, .03, true, function Trig_Rock_Strike_Move_Actions)
	set caster_0 = null
	set t_0 = null
	set target_0 = null
	set gdamage_0 = null
endfunction

function Trig_Rock_Strike_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0MM'
endfunction

function InitTrig_Rock_Strike takes nothing returns nothing
	local integer index = 0
	set gg_trg_Rock_Strike_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Rock_Strike_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Rock_Strike_1, Condition(function Trig_Rock_Strike_Conditions))
	call TriggerAddAction(gg_trg_Rock_Strike_1, function Trig_Rock_Strike_Actions)
endfunction

function Trig_Archdruid_Load_Actions takes nothing returns nothing
	call AbilityPreload('A0MN', 6)
	call AbilityPreload('A0MP', 6)
	call AbilityPreload('A0MQ', 6)
	call AbilityPreload('A0MS', 3)
	call AbilityPreload('A0MT', 3)
	call AbilityPreload('A0MO', 1)
	call AbilityPreload('A0MR', 6)
	call AbilityPreload('B04M', 1)
	call AbilityPreload('B04K', 1)
	call AbilityPreload('B04L', 1)
	call UnitPreload('e006')
	call EffectPreload("Abilities\\Spells\\NightElf\\EntanglingRoots\\EntanglingRootsTarget.mdl")
	call EffectPreload("Effects\\Earth_Attach.mdx")
	call EffectPreload("Abilities\\Spells\\Other\\Drain\\DrainTarget.mdl")
	call EffectPreload("Effects\\Power_Orb.mdl")
	call EffectPreload("Effects\\Healing Touch.mdl")
	call EffectPreload("Effects\\SoulshotC-gradeTarget.mdl")
	call EffectPreload("Effects\\naturebeam.mdl")
	call EffectPreload("Effects\\AncientExplode.mdx")
	call EffectPreload("Effects\\NatureBlessing.mdl")
	call EffectPreload("Effects\\LifeWave.mdl")
	call EffectPreload("Abilities\\Weapons\\GreenDragonMissile\\GreenDragonMissile.mdl")
	call EffectPreload("Effects\\PlasmaMissileGreen.mdl")
	call EffectPreload("Effects\\GreenHeal.mdl")
	call EffectPreload("Abilities\\Spells\\NightElf\\Tranquility\\Tranquility.mdl")
	call EffectPreload("Effects\\EarthNova.mdl")
	call EnableTrigger(gg_trg_Energy_of_Nature_1)
	call EnableTrigger(gg_trg_Life_Chain_1)
	call EnableTrigger(gg_trg_Ent_Creation_1)
	call EnableTrigger(gg_trg_Nature_Wrath_1)
endfunction

function InitTrig_Archdruid_Load takes nothing returns nothing
	set gg_trg_Archdruid_Load_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Archdruid_Load_1, function Trig_Archdruid_Load_Actions)
endfunction

function Trig_Energy_of_Nature_Move_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local real damage
	local real heal
	local integer wait = LoadInteger(udg_hash_1, h_0, 4)
	local unit orb = LoadUnitHandle(udg_hash_1, h_0, 6)
	local effect ef
	local real xt
	local real yt
	local player p
	local group g
	local unit Picked
	local unit dammi
	if wait_0 > 0 then
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 4, wait_0)
	else
		set damage_0 = LoadReal(udg_hash_1, h_0, 2)
		set heal_0 = LoadReal(udg_hash_1, h_0, 3)
		set xt_0 = LoadReal(udg_hash_1, h_0, $B)
		set yt_0 = LoadReal(udg_hash_1, h_0, $C)
		set p_0 = GetOwningPlayer(caster_0)
		set g_0 = CreateGroup()
		call GroupEnumUnitsInRange(g_0, xt_0, yt_0, 270., null)
		call DestroyEffect(AddSpecialEffect("Effects\\AncientExplode.mdx", xt_0, yt_0))
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if IsUnitEnemy(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call DestroyEffect(AddSpecialEffectTarget("Effects\\SoulshotC-gradeTarget.mdl", Picked_0, "chest"))
				call DestroyEffect(AddSpecialEffectTarget("Effects\\naturebeam.mdl", Picked_0, "chest"))
				set dammi_0 = CreateUnit(p_0, 'h00U', xt_0, yt_0, .0)
				call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
				call UnitAddAbility(dammi_0, 'A0MO')
				call IssueTargetOrderById(dammi_0, $D00CB, Picked_0)
				call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
				set dammi_0 = null
			endif
			if IsUnitAlly(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call DestroyEffect(AddSpecialEffectTarget("Effects\\Healing Touch.mdl", Picked_0, "origin"))
				call SetUnitState(Picked_0, UNIT_STATE_LIFE_1, GetUnitState(Picked_0, UNIT_STATE_LIFE_1) + heal_0)
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		call SetUnitScale(orb_0, .1, .1, .1)
		call KillUnit(orb_0)
		call ShowUnit(orb_0, false)
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 7)
		call DestroyEffect(ef_0)
		set ef_0 = null
		set p_0 = null
		call GroupClear(g_0)
		call DestroyGroup(g_0)
		set g_0 = null
		call DestroyTimer(t_0)
		set Picked_0 = null
		call FlushChildHashtable(udg_hash_1, h_0)
	endif
	set t_0 = null
	set caster_0 = null
	set orb_0 = null
endfunction

function Trig_Energy_of_Nature_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local location loc = GetSpellTargetLoc()
	local real xt = GetLocationX(loc_0)
	local real yt = GetLocationY(loc_0)
	local real angle = bj_RADTODEG_1 * Atan2((yt_0 - y_0), (xt_0 - x_0))
	local real dist = SquareRoot(((xt_0 - x_0) * (xt_0 - x_0)) + ((yt_0 - y_0) * (yt_0 - y_0)))
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0MN')
	local real damage = ($A + 25 * lvl_0) + (GetHeroInt(caster_0, true) * (.2 + .3 * lvl_0))
	local real heal = (75. + 50 * lvl_0)
	local real time = dist_0 / 600.
	local real height = dist_0 / 4 + 75.
	local unit orb = CreateUnit(GetOwningPlayer(caster_0), 'h00E', x_0, y_0, angle_0)
	local effect ef = AddSpecialEffectTarget("Effects\\Power_Orb.mdl", orb_0, "origin")
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	if dist_0 < 50. then
		set dist_0 = 50.
		set time_0 = .07
		set angle_0 = GetUnitFacing(caster_0)
		set height_0 = dist_0 / 4 + 100.
	endif
	call SetUnitX(orb_0, x_0 + 50. * Cos((angle_0) * bj_DEGTORAD_1))
	call SetUnitY(orb_0, y_0 + 50. * Sin((angle_0) * bj_DEGTORAD_1))
	call SetUnitTimeScale(orb_0, 1.5)
	call SetUnitFlyHeight(orb_0, 100., .0)
	call MoveUnit(orb_0, time_0, 600., .0, angle_0, height_0, true)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveReal(udg_hash_1, h_0, 2, damage_0)
	call SaveReal(udg_hash_1, h_0, 3, heal_0)
	call SaveInteger(udg_hash_1, h_0, 4, R2I(time_0 / .03))
	call SaveUnitHandle(udg_hash_1, h_0, 6, orb_0)
	call SaveEffectHandle(udg_hash_1, h_0, 7, ef_0)
	call SaveReal(udg_hash_1, h_0, $B, xt_0)
	call SaveReal(udg_hash_1, h_0, $C, yt_0)
	call TimerStart(t_0, .03, true, function Trig_Energy_of_Nature_Move_Actions)
	set caster_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set t_0 = null
	set orb_0 = null
	set ef_0 = null
endfunction

function Trig_Energy_of_Nature_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0MN'
endfunction

function InitTrig_Energy_of_Nature takes nothing returns nothing
	local integer index = 0
	set gg_trg_Energy_of_Nature_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Energy_of_Nature_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Energy_of_Nature_1, Condition(function Trig_Energy_of_Nature_Conditions))
	call TriggerAddAction(gg_trg_Energy_of_Nature_1, function Trig_Energy_of_Nature_Actions)
endfunction

function Trig_Life_Chain_Remove_Effect_Actions takes nothing returns nothing
	local timer tef = GetExpiredTimer()
	local integer hef = GetHandleId(tef_0)
	local effect ef = LoadEffectHandle(udg_hash_1, hef_0, 1)
	local unit target = LoadUnitHandle(udg_hash_1, hef_0, 2)
	local integer regen = LoadInteger(udg_hash_1, hef_0, 3)
	call SetUnitLifeAndManaRegeneration(target_0, "life", -regen_0)
	call FlushChildHashtable(udg_hash_1, hef_0)
	call DestroyEffect(ef_0)
	set tef_0 = null
	set ef_0 = null
	set target_0 = null
endfunction

function Trig_Life_Chain_Move_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local unit target = LoadUnitHandle(udg_hash_1, h_0, 8)
	local integer wait2 = LoadInteger(udg_hash_1, h_0, 4)
	local integer count = LoadInteger(udg_hash_1, h_0, 5)
	local unit orb = LoadUnitHandle(udg_hash_1, h_0, 6)
	local unit target2
	local real damage
	local real heal
	local group gdamage
	local real height
	local effect ef
	local real x = GetUnitX(orb_0)
	local real y = GetUnitY(orb_0)
	local real xt = GetUnitX(target_0)
	local real yt = GetUnitY(target_0)
	local real xorb
	local real yorb
	local real angle = bj_RADTODEG_1 * Atan2((yt_0 - y_0), (xt_0 - x_0))
	local real dist = SquareRoot(((xt_0 - x_0) * (xt_0 - x_0)) + ((yt_0 - y_0) * (yt_0 - y_0)))
	local player p
	local group g
	local group grup
	local unit Picked
	local timer tef
	local integer hef
	local integer regen
	local boolean remove = false
	local boolean reselect = false
	local unit orb2
	local effect ef2
	if GetUnitState(target_0, UNIT_STATE_LIFE_1) > .405 then
		set wait2_0 = wait2_0 - 1
		call SaveInteger(udg_hash_1, h_0, 4, wait2_0)
		set xorb_0 = x_0 + 30.3 * Cos(angle_0 * bj_DEGTORAD_1)
		set yorb_0 = y_0 + 30.3 * Sin(angle_0 * bj_DEGTORAD_1)
		call SetUnitPosition(orb_0, xorb_0, yorb_0)
		set dist_0 = SquareRoot((xt_0 - xorb_0) * (xt_0 - xorb_0) + (yt_0 - yorb_0) * (yt_0 - yorb_0))
		call SetUnitFacing(orb_0, angle_0)
		if dist_0 < 21. then
			call SetUnitPosition(orb_0, xt_0, yt_0)
			set p_0 = GetOwningPlayer(caster_0)
			set gdamage_0 = LoadGroupHandle(udg_hash_1, h_0, $E)
			if IsUnitEnemy(target_0, p_0) and IsUnitInGroup(target_0, gdamage_0) == false and GetUnitState(target_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(target_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(target_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(target_0) != 'h00U' then
				set damage_0 = LoadReal(udg_hash_1, h_0, 2)
				call DestroyEffect(AddSpecialEffectTarget("Effects\\SoulshotC-gradeTarget.mdl", target_0, "chest"))
				call DestroyEffect(AddSpecialEffectTarget("Effects\\naturebeam.mdl", target_0, "chest"))
				call UnitDamageTarget(caster_0, target_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
				call GroupAddUnit(gdamage_0, target_0)
				if GetUnitState(target_0, UNIT_STATE_LIFE_1) < .5 then
					set count_0 = count_0 + 1
					call SaveInteger(udg_hash_1, h_0, 5, count_0)
				endif
			endif
			if IsUnitAlly(target_0, p_0) and IsUnitInGroup(target_0, gdamage_0) == false and GetUnitState(target_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(target_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(target_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(target_0) != 'h00U' then
				set heal_0 = LoadReal(udg_hash_1, h_0, 3)
				set regen_0 = LoadInteger(udg_hash_1, h_0, $D)
				call DestroyEffect(AddSpecialEffectTarget("Effects\\Healing Touch.mdl", target_0, "origin"))
				call SetUnitState(target_0, UNIT_STATE_LIFE_1, GetUnitState(target_0, UNIT_STATE_LIFE_1) + heal_0)
				set ef_0 = AddSpecialEffectTarget("Effects\\NatureBlessing.mdl", target_0, "chest")
				set tef_0 = CreateTimer()
				set hef_0 = GetHandleId(tef_0)
				call SaveEffectHandle(udg_hash_1, hef_0, 1, ef_0)
				call SaveUnitHandle(udg_hash_1, hef_0, 2, target_0)
				call SaveInteger(udg_hash_1, hef_0, 3, regen_0)
				call SetUnitLifeAndManaRegeneration(target_0, "life", regen_0)
				call TimerStart(tef_0, 8., false, function Trig_Life_Chain_Remove_Effect_Actions)
				set tef_0 = null
				set ef_0 = null
				call GroupAddUnit(gdamage_0, target_0)
			endif
			call SaveGroupHandle(udg_hash_1, h_0, $E, gdamage_0)
			set count_0 = count_0 - 1
			call SaveInteger(udg_hash_1, h_0, 5, count_0)
			set reselect_0 = true
			set p_0 = null
			set gdamage_0 = null
		endif
	endif
	if (count_0 > 0 and GetUnitState(target_0, UNIT_STATE_LIFE_1) < .405) or reselect_0 then
		set g_0 = CreateGroup()
		set grup_0 = CreateGroup()
		call GroupEnumUnitsInRange(g_0, xt_0, yt_0, 600., null)
		set gdamage_0 = LoadGroupHandle(udg_hash_1, h_0, $E)
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if IsUnitInGroup(Picked_0, gdamage_0) == false and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call GroupAddUnit(grup_0, Picked_0)
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		call RandomUnitFromGroup(1, grup_0)
		call GroupAddGroup(udg_GroupRandomUnitFromGroup_1, g_0)
		set target2_0 = FirstOfGroup(udg_GroupRandomUnitFromGroup_1)
		if target2_0 != null then
			set x_0 = GetUnitX(orb_0)
			set y_0 = GetUnitY(orb_0)
			set xt_0 = GetUnitX(target2_0)
			set yt_0 = GetUnitY(target2_0)
			set dist_0 = SquareRoot(((xt_0 - x_0) * (xt_0 - x_0)) + ((yt_0 - y_0) * (yt_0 - y_0)))
			set angle_0 = bj_RADTODEG_1 * Atan2((yt_0 - y_0), (xt_0 - x_0))
			set p_0 = GetOwningPlayer(caster_0)
			call KillUnit(orb_0)
			set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 7)
			call DestroyEffect(ef_0)
			set ef_0 = null
			set orb2_0 = CreateUnit(p_0, 'h00E', x_0, y_0, angle_0)
			set ef2_0 = AddSpecialEffectTarget("Effects\\LifeWave.mdl", orb2_0, "origin")
			call SetUnitFlyHeight(orb2_0, 60., .0)
			call SaveUnitHandle(udg_hash_1, h_0, 6, orb2_0)
			call SaveEffectHandle(udg_hash_1, h_0, 7, ef2_0)
			call SaveInteger(udg_hash_1, h_0, 4, R2I((dist_0 / (1000. * 2))))
			call SaveUnitHandle(udg_hash_1, h_0, 8, target2_0)
			call SaveReal(udg_hash_1, h_0, 9, (dist_0 / 3))
			call SaveInteger(udg_hash_1, h_0, $A, R2I((dist_0 / 2000.)))
			set p_0 = null
			set orb2_0 = null
			set ef2_0 = null
		else
			set remove_0 = true
		endif
		set target2_0 = null
		call GroupClear(g_0)
		call DestroyGroup(g_0)
		set g_0 = null
		call GroupClear(grup_0)
		call DestroyGroup(grup_0)
		set grup_0 = null
		set gdamage_0 = null
	endif
	if count_0 <= 0 then
		set remove_0 = true
	endif
	if remove_0 then
		call KillUnit(orb_0)
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 7)
		call DestroyEffect(ef_0)
		set ef_0 = null
		call GroupClear(g_0)
		call DestroyGroup(g_0)
		set g_0 = null
		call DestroyTimer(t_0)
		set Picked_0 = null
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set caster_0 = null
	set orb_0 = null
	set target_0 = null
endfunction

function Trig_Life_Chain_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local player p = GetOwningPlayer(caster_0)
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local unit target = GetSpellTargetUnit()
	local real xt = GetUnitX(target_0)
	local real yt = GetUnitY(target_0)
	local real angle = bj_RADTODEG_1 * Atan2((yt_0 - y_0), (xt_0 - x_0))
	local real dist = SquareRoot(((xt_0 - x_0) * (xt_0 - x_0)) + ((yt_0 - y_0) * (yt_0 - y_0)))
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0MP')
	local real damage = ($F + $F * lvl_0) + (GetHeroInt(caster_0, true) * (.1 + .1 * lvl_0))
	local real heal = (30 + 30 * lvl_0) + (GetHeroInt(caster_0, true) * (.2 + .2 * lvl_0))
	local integer regen = (2 + 3 * lvl_0)
	local real speed = 1000.
	local real time = dist_0 / speed_0
	local real height = dist_0 / 3
	local integer count = 3 + (lvl_0 * 3)
	local integer wait2 = R2I((time_0 / 2))
	local unit orb = CreateUnit(p_0, 'h00E', x_0, y_0, angle_0)
	local effect ef = AddSpecialEffectTarget("Effects\\LifeWave.mdl", orb_0, "origin")
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local group gdamage = CreateGroup()
	call SetUnitX(orb_0, x_0 + 30. * Cos((angle_0) * bj_DEGTORAD_1))
	call SetUnitY(orb_0, y_0 + 30. * Sin((angle_0) * bj_DEGTORAD_1))
	call SetUnitFlyHeight(orb_0, 60., .0)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveReal(udg_hash_1, h_0, 2, damage_0)
	call SaveReal(udg_hash_1, h_0, 3, heal_0)
	call SaveInteger(udg_hash_1, h_0, 4, wait2_0)
	call SaveInteger(udg_hash_1, h_0, 5, count_0)
	call SaveUnitHandle(udg_hash_1, h_0, 6, orb_0)
	call SaveEffectHandle(udg_hash_1, h_0, 7, ef_0)
	call SaveUnitHandle(udg_hash_1, h_0, 8, target_0)
	call SaveReal(udg_hash_1, h_0, 9, height_0)
	call SaveInteger(udg_hash_1, h_0, $D, regen_0)
	call SaveGroupHandle(udg_hash_1, h_0, $E, gdamage_0)
	call TimerStart(t_0, .03, true, function Trig_Life_Chain_Move_Actions)
	set caster_0 = null
	set t_0 = null
	set orb_0 = null
	set ef_0 = null
	set p_0 = null
	set target_0 = null
	set gdamage_0 = null
endfunction

function Trig_Life_Chain_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0MP'
endfunction

function InitTrig_Life_Chain takes nothing returns nothing
	local integer index = 0
	set gg_trg_Life_Chain_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Life_Chain_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Life_Chain_1, Condition(function Trig_Life_Chain_Conditions))
	call TriggerAddAction(gg_trg_Life_Chain_1, function Trig_Life_Chain_Actions)
endfunction

function Trig_Ent_Creation_Move_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local unit target = LoadUnitHandle(udg_hash_1, h_0, 8)
	local unit orb = LoadUnitHandle(udg_hash_1, h_0, 6)
	local effect ef
	local real x = GetUnitX(orb_0)
	local real y = GetUnitY(orb_0)
	local real xt = GetUnitX(target_0)
	local real yt = GetUnitY(target_0)
	local real xorb
	local real yorb
	local real angle = bj_RADTODEG_1 * Atan2((yt_0 - y_0), (xt_0 - x_0))
	local real dist = SquareRoot(((xt_0 - x_0) * (xt_0 - x_0)) + ((yt_0 - y_0) * (yt_0 - y_0)))
	local player p
	local integer hp
	local integer damage
	local real lifetime
	local integer lvl
	local unit dammi
	set xorb_0 = x_0 + 27.2 * Cos(angle_0 * bj_DEGTORAD_1)
	set yorb_0 = y_0 + 27.2 * Sin(angle_0 * bj_DEGTORAD_1)
	call SetUnitPosition(orb_0, xorb_0, yorb_0)
	set dist_0 = SquareRoot((xt_0 - xorb_0) * (xt_0 - xorb_0) + (yt_0 - yorb_0) * (yt_0 - yorb_0))
	call SetUnitFacing(orb_0, angle_0)
	if dist_0 < 20. then
		call SetUnitPosition(orb_0, xt_0, yt_0)
		set p_0 = GetOwningPlayer(caster_0)
		set hp_0 = LoadInteger(udg_hash_1, h_0, 2)
		set damage_0 = LoadInteger(udg_hash_1, h_0, 3)
		set lifetime_0 = LoadReal(udg_hash_1, h_0, 4)
		set lvl_0 = LoadInteger(udg_hash_1, h_0, 5)
		if GetUnitState(target_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(target_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(target_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(target_0) != 'h00U' then
			call DestroyEffect(AddSpecialEffectTarget("Effects\\SoulshotC-gradeTarget.mdl", target_0, "chest"))
			call DestroyEffect(AddSpecialEffectTarget("Effects\\PlasmaMissileGreen.mdl", target_0, "chest"))
			set dammi_0 = CreateUnit(p_0, 'h00U', xt_0, yt_0, .0)
			call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
			call UnitAddAbility(dammi_0, 'A0MR')
			call SetUnitAbilityLevel(dammi_0, 'A0MR', lvl_0)
			call IssueTargetOrderById(dammi_0, $D006B, target_0)
			set dammi_0 = null
		endif
		set dammi_0 = CreateUnit(p_0, 'e006', (xt_0 - 60. * Cos((angle_0) * bj_DEGTORAD_1)), (yt_0 - 60. * Sin((angle_0) * bj_DEGTORAD_1)), angle_0)
		call UnitApplyTimedLife(dammi_0, 'BTLF', lifetime_0)
		call SetUnitColor(dammi_0, PLAYER_COLOR_GREEN_1)
		call SetUnitScale(dammi_0, (.75 + .05 * lvl_0), (.75 + .05 * lvl_0), (.75 + .05 * lvl_0))
		call SetUnitMaxState(dammi_0, UNIT_STATE_MAX_LIFE_1, hp_0)
		call SetAttackAbilityLevel(dammi_0, damage_0)
		set dammi_0 = null
		set p_0 = null
		call KillUnit(orb_0)
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 7)
		call DestroyEffect(ef_0)
		set ef_0 = null
		call DestroyTimer(t_0)
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set caster_0 = null
	set orb_0 = null
	set target_0 = null
endfunction

function Trig_Ent_Creation_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local player p = GetOwningPlayer(caster_0)
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local unit target = GetSpellTargetUnit()
	local real xt = GetUnitX(target_0)
	local real yt = GetUnitY(target_0)
	local real angle = bj_RADTODEG_1 * Atan2((yt_0 - y_0), (xt_0 - x_0))
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0MQ')
	local integer hp = (-75 + (75 * lvl_0)) + R2I(GetHeroInt(caster_0, true) * 2)
	local integer damage = (-8 + (8 * lvl_0)) + R2I(GetHeroInt(caster_0, true) * .3)
	local real lifetime = (12. + (3. * lvl_0)) + (GetUnitState(caster_0, UNIT_STATE_MAX_MANA_1) / 'd')
	local unit orb = CreateUnit(p_0, 'h00E', x_0, y_0, angle_0)
	local effect ef = AddSpecialEffectTarget("Abilities\\Weapons\\GreenDragonMissile\\GreenDragonMissile.mdl", orb_0, "origin")
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	call SetUnitX(orb_0, x_0 + 30. * Cos((angle_0) * bj_DEGTORAD_1))
	call SetUnitY(orb_0, y_0 + 30. * Sin((angle_0) * bj_DEGTORAD_1))
	call SetUnitFlyHeight(orb_0, 60., .0)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveInteger(udg_hash_1, h_0, 2, hp_0)
	call SaveInteger(udg_hash_1, h_0, 3, damage_0)
	call SaveReal(udg_hash_1, h_0, 4, lifetime_0)
	call SaveInteger(udg_hash_1, h_0, 5, lvl_0)
	call SaveUnitHandle(udg_hash_1, h_0, 6, orb_0)
	call SaveEffectHandle(udg_hash_1, h_0, 7, ef_0)
	call SaveUnitHandle(udg_hash_1, h_0, 8, target_0)
	call TimerStart(t_0, .03, true, function Trig_Ent_Creation_Move_Actions)
	set caster_0 = null
	set t_0 = null
	set orb_0 = null
	set ef_0 = null
	set p_0 = null
	set target_0 = null
endfunction

function Trig_Ent_Creation_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0MQ'
endfunction

function InitTrig_Ent_Creation takes nothing returns nothing
	local integer index = 0
	set gg_trg_Ent_Creation_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Ent_Creation_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Ent_Creation_1, Condition(function Trig_Ent_Creation_Conditions))
	call TriggerAddAction(gg_trg_Ent_Creation_1, function Trig_Ent_Creation_Actions)
endfunction

function Trig_Nature_Wrath_Periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local group gheal = LoadGroupHandle(udg_hash_1, h_0, 2)
	local real damage = LoadReal(udg_hash_1, h_0, 3)
	local integer addas = LoadInteger(udg_hash_1, h_0, 4)
	local integer addarmor = LoadInteger(udg_hash_1, h_0, 5)
	local integer addregen = LoadInteger(udg_hash_1, h_0, 6)
	local integer addms = LoadInteger(udg_hash_1, h_0, 7)
	local integer wait = LoadInteger(udg_hash_1, h_0, 9)
	local integer wait2 = LoadInteger(udg_hash_1, h_0, $A)
	local player p = GetOwningPlayer(caster_0)
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local group g = CreateGroup()
	local group g2 = CreateGroup()
	local group g3 = CreateGroup()
	local unit Picked
	local unit dammi
	local effect ef
	local unit dammief
	local effect dammieffect
	local integer lopa = 0
	local integer lopb = 0
	local integer count
	local real angleef
	local real dist
	local integer dammicounter = $F
	local integer order = GetUnitCurrentOrder(caster_0)
	local integer orderId
	set orderId_0 = $D021D
	if (orderId_0 != 0) then
	else
		set orderId_0 = UnitId("decouple")
		if (orderId_0 != 0) then
		endif
	endif
	if wait_0 > 0 and order_0 == orderId_0 then
		set wait_0 = wait_0 - 1
		set wait2_0 = wait2_0 + 1
		if wait2_0 == 26 then
			set wait2_0 = 0
			call GroupEnumUnitsInRange(g_0, x_0, y_0, 700., null)
			call DestroyEffect(AddSpecialEffect("Effects\\EarthNova.mdl", x_0, y_0))
			loop
				set Picked_0 = FirstOfGroup(g_0)
				exitwhen Picked_0 == null
				if IsUnitEnemy(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
					call DestroyEffect(AddSpecialEffectTarget("Effects\\SoulshotC-gradeTarget.mdl", Picked_0, "chest"))
					call DestroyEffect(AddSpecialEffectTarget("Effects\\naturebeam.mdl", Picked_0, "chest"))
					set dammi_0 = CreateUnit(p_0, 'h00U', x_0, y_0, .0)
					call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
					call UnitAddAbility(dammi_0, 'A0MO')
					call IssueTargetOrderById(dammi_0, $D00CB, Picked_0)
					call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
					set dammi_0 = null
				endif
				call GroupRemoveUnit(g_0, Picked_0)
			endloop
			set Picked_0 = null
			call GroupClear(g_0)
			call DestroyGroup(g_0)
			set g_0 = null
			set g_0 = CreateGroup()
		endif
		loop
			exitwhen lopa_0 >= 4
			set count_0 = 16 - (lopa_0 * 4)
			set angleef_0 = (360. / count_0)
			set dist_0 = (700. - 150. * lopa_0)
			set lopb_0 = 0
			loop
				exitwhen lopb_0 > count_0
				set dammief_0 = LoadUnitHandle(udg_hash_1, h_0, dammicounter_0)
				call SetUnitPosition(dammief_0, x_0 + dist_0 * Cos(angleef_0 * lopb_0 * bj_DEGTORAD_1), y_0 + dist_0 * Sin(angleef_0 * lopb_0 * bj_DEGTORAD_1))
				call SetUnitFacing(dammief_0, angleef_0 + 90.)
				set dammicounter_0 = dammicounter_0 + 1
				set dammief_0 = null
				set lopb_0 = lopb_0 + 1
			endloop
			set lopa_0 = lopa_0 + 1
		endloop
		call SaveInteger(udg_hash_1, h_0, 9, wait_0)
		call SaveInteger(udg_hash_1, h_0, $A, wait2_0)
		call GroupEnumUnitsInRange(g_0, x_0, y_0, 700., null)
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if (IsUnitAlly(Picked_0, p_0) or GetOwningPlayer(Picked_0) == Player($D)) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call GroupAddUnit(g2_0, Picked_0)
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		set Picked_0 = null
		call GroupClear(g_0)
		call DestroyGroup(g_0)
		set g_0 = null
		call GroupAddGroup(gheal_0, g3_0)
		loop
			set Picked_0 = FirstOfGroup(g3_0)
			exitwhen Picked_0 == null
			if IsUnitInGroup(Picked_0, g2_0) == false then
				call GroupRemoveUnit(gheal_0, Picked_0)
				call SetUnitLifeAndManaRegeneration(Picked_0, "life", -addregen_0)
				call SetArmorAbilityLevel(Picked_0, -addarmor_0)
				call SetAttackSpeedAbilityLevel(Picked_0, -addas_0)
			else
				if (wait2_0 / 5) * 5 == wait2_0 then
					set dammi_0 = CreateUnit(p_0, 'h00U', x_0, y_0, .0)
					call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
					call UnitAddAbility(dammi_0, 'A0MT')
					call SetUnitAbilityLevel(dammi_0, 'A0MT', addms_0)
					call IssueTargetOrderById(dammi_0, $D0085, Picked_0)
					set dammi_0 = null
				endif
			endif
			call GroupRemoveUnit(g3_0, Picked_0)
		endloop
		set Picked_0 = null
		call GroupClear(g3_0)
		call DestroyGroup(g3_0)
		set g3_0 = null
		loop
			set Picked_0 = FirstOfGroup(g2_0)
			exitwhen Picked_0 == null
			if IsUnitInGroup(Picked_0, gheal_0) == false then
				call DestroyEffect(AddSpecialEffectTarget("Effects\\Healing Touch.mdl", Picked_0, "origin"))
				call SetUnitLifeAndManaRegeneration(Picked_0, "life", addregen_0)
				call SetArmorAbilityLevel(Picked_0, addarmor_0)
				call SetAttackSpeedAbilityLevel(Picked_0, addas_0)
				call GroupAddUnit(gheal_0, Picked_0)
			endif
			if GetUnitAbilityLevel(Picked_0, 'B04M') <= 0 then
				set dammi_0 = CreateUnit(p_0, 'h00U', x_0, y_0, .0)
				call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
				call UnitAddAbility(dammi_0, 'A0MT')
				call SetUnitAbilityLevel(dammi_0, 'A0MT', addms_0)
				call IssueTargetOrderById(dammi_0, $D0085, Picked_0)
				set dammi_0 = null
			endif
			call GroupRemoveUnit(g2_0, Picked_0)
		endloop
		set Picked_0 = null
		call GroupClear(g2_0)
		call DestroyGroup(g2_0)
		set g2_0 = null
		call SaveGroupHandle(udg_hash_1, h_0, 2, gheal_0)
	else
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, $B)
		call DestroyEffect(ef_0)
		set ef_0 = null
		loop
			set Picked_0 = FirstOfGroup(gheal_0)
			exitwhen Picked_0 == null
			call SetUnitLifeAndManaRegeneration(Picked_0, "life", -addregen_0)
			call SetArmorAbilityLevel(Picked_0, -addarmor_0)
			call SetAttackSpeedAbilityLevel(Picked_0, -addas_0)
			call GroupRemoveUnit(gheal_0, Picked_0)
		endloop
		call GroupClear(gheal_0)
		call DestroyGroup(gheal_0)
		set gheal_0 = null
		set Picked_0 = null
		set lopa_0 = 0
		set lopb_0 = 0
		set dammicounter_0 = $F
		loop
			exitwhen lopa_0 > 4
			set count_0 = 16 - (lopa_0 * 4)
			set lopb_0 = 0
			loop
				exitwhen lopb_0 > count_0
				set dammief_0 = LoadUnitHandle(udg_hash_1, h_0, dammicounter_0)
				set dammieffect_0 = LoadEffectHandle(udg_hash_1, h_0, dammicounter_0 + 75)
				call KillUnit(dammief_0)
				call DestroyEffect(dammieffect_0)
				set dammicounter_0 = dammicounter_0 + 1
				set dammief_0 = null
				set dammieffect_0 = null
				set lopb_0 = lopb_0 + 1
			endloop
			set lopa_0 = lopa_0 + 1
		endloop
		call SetUnitTimeScale(caster_0, 1.)
		call RemoveUnit(LoadUnitHandle(udg_hash_1, GetHandleId(caster_0), 'u'))
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set caster_0 = null
	set p_0 = null
	set gheal_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	call GroupClear(g2_0)
	call DestroyGroup(g2_0)
	set g2_0 = null
	call GroupClear(g3_0)
	call DestroyGroup(g3_0)
	set g3_0 = null
	set dammi_0 = null
	set Picked_0 = null
endfunction

function Trig_Nature_Wrath_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local player p = GetOwningPlayer(caster_0)
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0MS')
	local integer lvlup = GetUnitAbilityLevel(caster_0, 'A0Q2')
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local group gheal = CreateGroup()
	local integer addas
	local integer addarmor
	local integer addregen
	local integer addms
	local real damage
	local integer wait = 80
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local unit dammief
	local effect dammieffect
	local integer lopa = 0
	local integer lopb = 0
	local integer count
	local real angleef
	local real dist
	local integer dammicounter = $F
	local effect ef = AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Tranquility\\Tranquility.mdl", caster_0, "origin")
	if lvl_0 > 0 then
		set addas_0 = $A + 35 * lvl_0
		set addarmor_0 = 5 + (5 * lvl_0)
		set addregen_0 = $F + (30 * lvl_0)
		set addms_0 = lvl_0
		set damage_0 = 20. + 50. * lvl_0
		call AddProgressBar(caster_0, 195. + (15. * lvl_0), (1. + .15 * lvl_0), (wait_0 * .1), false, true, 'u', 0, $FF, 0)
	endif
	if lvlup_0 > 0 then
		set addas_0 = $A + 35 * lvlup_0
		set addarmor_0 = 5 + (5 * lvlup_0)
		set addregen_0 = 25 + (50 * lvlup_0)
		set addms_0 = lvlup_0
		set damage_0 = 25. + 75. * lvlup_0
		call AddProgressBar(caster_0, 195. + (15. * lvlup_0), (1. + .15 * lvlup_0), (wait_0 * .1), false, true, 'u', 0, $FF, 0)
	endif
	loop
		exitwhen lopa_0 >= 4
		set count_0 = 16 - (lopa_0 * 4)
		set angleef_0 = (360. / count_0)
		set dist_0 = (700. - 150. * lopa_0)
		set lopb_0 = 0
		loop
			exitwhen lopb_0 > count_0
			set dammief_0 = CreateUnit(p_0, 'h00U', x_0 + dist_0 * Cos(angleef_0 * lopb_0 * bj_DEGTORAD_1), y_0 + dist_0 * Sin(angleef_0 * lopb_0 * bj_DEGTORAD_1), (angleef_0 * lopb_0) + 90.)
			set dammieffect_0 = AddSpecialEffectTarget("Effects\\GreenHeal.mdl", dammief_0, "chest")
			call SaveUnitHandle(udg_hash_1, h_0, dammicounter_0, dammief_0)
			call SaveEffectHandle(udg_hash_1, h_0, dammicounter_0 + 75, dammieffect_0)
			set dammicounter_0 = dammicounter_0 + 1
			set dammief_0 = null
			set dammieffect_0 = null
			set lopb_0 = lopb_0 + 1
		endloop
		set lopa_0 = lopa_0 + 1
	endloop
	call SetUnitTimeScale(caster_0, 1.05)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveGroupHandle(udg_hash_1, h_0, 2, gheal_0)
	call SaveReal(udg_hash_1, h_0, 3, damage_0)
	call SaveInteger(udg_hash_1, h_0, 4, addas_0)
	call SaveInteger(udg_hash_1, h_0, 5, addarmor_0)
	call SaveInteger(udg_hash_1, h_0, 6, addregen_0)
	call SaveInteger(udg_hash_1, h_0, 7, addms_0)
	call SaveInteger(udg_hash_1, h_0, 9, wait_0)
	call SaveInteger(udg_hash_1, h_0, $A, 0)
	call SaveEffectHandle(udg_hash_1, h_0, $B, ef_0)
	call TimerStart(t_0, .1, true, function Trig_Nature_Wrath_Periodic_Actions)
	set caster_0 = null
	set p_0 = null
	set gheal_0 = null
	set ef_0 = null
	set t_0 = null
endfunction

function Trig_Nature_Wrath_Conditions takes nothing returns boolean
	return (GetSpellAbilityId() == 'A0MS' or GetSpellAbilityId() == 'A0Q2')
endfunction

function InitTrig_Nature_Wrath takes nothing returns nothing
	local integer index = 0
	set gg_trg_Nature_Wrath_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Nature_Wrath_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Nature_Wrath_1, Condition(function Trig_Nature_Wrath_Conditions))
	call TriggerAddAction(gg_trg_Nature_Wrath_1, function Trig_Nature_Wrath_Actions)
endfunction

function Trig_Falling_Star_Move_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 7)
	local integer count = LoadInteger(udg_hash_1, h_0, 8)
	local player p = GetOwningPlayer(caster_0)
	local real damage
	local unit orb
	local real stuntime
	local effect ef
	local real xt
	local real yt
	local group g
	local unit Picked
	local real angle2
	local real dist
	local integer lopa = 1
	local integer horb
	local real knock
	local group gdamage = CreateGroup()
	loop
		exitwhen lopa_0 > count_0
		set orb_0 = LoadUnitHandle(udg_hash_1, h_0, lopa_0)
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, lopa_0 + 3)
		set horb_0 = GetHandleId(orb_0)
		set damage_0 = LoadReal(udg_hash_1, horb_0, 1)
		set stuntime_0 = LoadReal(udg_hash_1, horb_0, 2)
		set knock_0 = LoadReal(udg_hash_1, horb_0, 3)
		set xt_0 = LoadReal(udg_hash_1, horb_0, 4)
		set yt_0 = LoadReal(udg_hash_1, horb_0, 5)
		set g_0 = CreateGroup()
		call GroupEnumUnitsInRange(g_0, xt_0, yt_0, 220., null)
		call DestroyEffect(AddSpecialEffect("Effects\\Nebula.mdl", xt_0, yt_0))
		call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl", xt_0, yt_0))
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if IsUnitEnemy(Picked_0, p_0) and IsUnitInGroup(Picked_0, gdamage_0) == false and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayDamage.mdl", Picked_0, "origin"))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayTarget.mdl", Picked_0, "origin"))
				call StunUnitTimed(Picked_0, stuntime_0)
				call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
				set angle2_0 = bj_RADTODEG_1 * Atan2((GetUnitY(Picked_0) - yt_0), (GetUnitX(Picked_0) - xt_0))
				set dist_0 = SquareRoot((((GetUnitX(Picked_0) - xt_0) * (GetUnitX(Picked_0) - xt_0))) + ((GetUnitY(Picked_0) - yt_0) * (GetUnitY(Picked_0) - yt_0)))
				call MoveUnit(Picked_0, .5, ($E6 - dist_0) * 2.5 * knock_0, ($DC - dist_0) * 2. * knock_0, angle2_0, .0, true)
				call GroupAddUnit(gdamage_0, Picked_0)
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		set Picked_0 = null
		call KillUnit(orb_0)
		call DestroyEffect(ef_0)
		set ef_0 = null
		call GroupClear(g_0)
		call DestroyGroup(g_0)
		set g_0 = null
		set lopa_0 = lopa_0 + 1
	endloop
	set p_0 = null
	call GroupClear(gdamage_0)
	call DestroyGroup(gdamage_0)
	set gdamage_0 = null
	call DestroyTimer(t_0)
	call FlushChildHashtable(udg_hash_1, h_0)
	set t_0 = null
	set caster_0 = null
endfunction

function Trig_Falling_Star_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local location loc = GetSpellTargetLoc()
	local real xt = GetLocationX(loc_0)
	local real yt = GetLocationY(loc_0)
	local real angle = bj_RADTODEG_1 * Atan2((yt_0 - y_0), (xt_0 - x_0))
	local real dist = SquareRoot(((xt_0 - x_0) * (xt_0 - x_0)) + ((yt_0 - y_0) * (yt_0 - y_0)))
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0NR')
	local real damage = (40. * lvl_0) + (GetHeroAgi(caster_0, true) * (.25 + .25 * lvl_0))
	local real stuntime = .6 + (.15 * lvl_0)
	local player p = GetOwningPlayer(caster_0)
	local unit orb
	local effect ef
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local integer lopa = 1
	local real angle2 = GetRandomReal(.0, 360.)
	local boolean isultimate = LoadBoolean(udg_hash_1, GetHandleId(caster_0), $7F)
	local integer count = 1
	if isultimate_0 then
		set count_0 = 3
	endif
	if dist_0 < 50. then
		set dist_0 = 50.
		set angle_0 = GetUnitFacing(caster_0)
	endif
	if GetFloatGameState(GAME_STATE_TIME_OF_DAY_1) * 1 < 6. or GetFloatGameState(GAME_STATE_TIME_OF_DAY_1) * 1 > 18. then
		set damage_0 = damage_0 * 1.5
	endif
	loop
		exitwhen lopa_0 > count_0
		if lopa_0 == 1 then
			set orb_0 = CreateUnit(p_0, 'h00E', x_0, y_0, angle_0)
			call SetUnitScale(orb_0, 2.75, 2.75, 2.75)
			call SaveReal(udg_hash_1, GetHandleId(orb_0), 1, damage_0)
			call SaveReal(udg_hash_1, GetHandleId(orb_0), 2, stuntime_0)
			call SaveReal(udg_hash_1, GetHandleId(orb_0), 3, 1.)
			call SaveReal(udg_hash_1, GetHandleId(orb_0), 4, xt_0)
			call SaveReal(udg_hash_1, GetHandleId(orb_0), 5, yt_0)
		else
			set orb_0 = CreateUnit(p_0, 'h00E', (x_0 + 200. * Cos(angle2_0 * bj_DEGTORAD_1)), (y_0 + 200. * Sin(angle2_0 * bj_DEGTORAD_1)), angle_0)
			call SetUnitScale(orb_0, 2., 2., 2.)
			call SaveReal(udg_hash_1, GetHandleId(orb_0), 1, damage_0 / 2)
			call SaveReal(udg_hash_1, GetHandleId(orb_0), 2, stuntime_0 / 2)
			call SaveReal(udg_hash_1, GetHandleId(orb_0), 3, .5)
			call SaveReal(udg_hash_1, GetHandleId(orb_0), 4, GetUnitX(orb_0) + dist_0 * Cos(angle_0 * bj_DEGTORAD_1))
			call SaveReal(udg_hash_1, GetHandleId(orb_0), 5, GetUnitY(orb_0) + dist_0 * Sin(angle_0 * bj_DEGTORAD_1))
			set angle2_0 = angle2_0 + GetRandomReal(45., 315.)
		endif
		set ef_0 = AddSpecialEffectTarget("Effects\\StarfallTarget2.mdl", orb_0, "origin")
		call SetUnitAnimationByIndex(orb_0, 45)
		call SetUnitTimeScale(orb_0, 2.5)
		call UnitAddAbility(orb_0, 'Amrf')
		call UnitRemoveAbility(orb_0, 'Amrf')
		call SetUnitFlyHeight(orb_0, 800., .0)
		call SetUnitFlyHeight(orb_0, .0, 1600.)
		call MoveUnit(orb_0, .5, dist_0 * 2, .0, angle_0, .0, true)
		call SaveUnitHandle(udg_hash_1, h_0, lopa_0, orb_0)
		call SaveEffectHandle(udg_hash_1, h_0, lopa_0 + 3, ef_0)
		set ef_0 = null
		set orb_0 = null
		set lopa_0 = lopa_0 + 1
	endloop
	call DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Starfall\\StarfallCaster.mdl", caster_0, "origin"), 3.)
	call SaveUnitHandle(udg_hash_1, h_0, 7, caster_0)
	call SaveInteger(udg_hash_1, h_0, 8, count_0)
	call TimerStart(t_0, .5, false, function Trig_Falling_Star_Move_Actions)
	set caster_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set t_0 = null
	set p_0 = null
endfunction

function Trig_Falling_Star_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0NR'
endfunction

function InitTrig_Falling_Star takes nothing returns nothing
	local integer index = 0
	set gg_trg_Falling_Star_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Falling_Star_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Falling_Star_1, Condition(function Trig_Falling_Star_Conditions))
	call TriggerAddAction(gg_trg_Falling_Star_1, function Trig_Falling_Star_Actions)
endfunction

function Trig_Moon_Chackram_Periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster
	local effect ef
	if LoadBoolean(udg_hash_1, h_0, 3) then
		call SaveBoolean(udg_hash_1, h_0, 3, false)
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 2)
		call DestroyEffect(ef_0)
		set ef_0 = null
		call TimerStart(t_0, 5., false, function Trig_Moon_Chackram_Periodic_Actions)
	else
		set caster_0 = LoadUnitHandle(udg_hash_1, h_0, 1)
		call SaveBoolean(udg_hash_1, GetHandleId(caster_0), $80, false)
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
		set t_0 = null
		set caster_0 = null
	endif
endfunction

function Trig_Moon_Chackram_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local effect ef = AddSpecialEffectTarget("Effects\\MoonSight_Buff.mdx", caster_0, "overhead")
	call SaveBoolean(udg_hash_1, GetHandleId(caster_0), $80, true)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveEffectHandle(udg_hash_1, h_0, 2, ef_0)
	call SaveBoolean(udg_hash_1, h_0, 3, true)
	call TimerStart(t_0, 3., false, function Trig_Moon_Chackram_Periodic_Actions)
	set caster_0 = null
	set t_0 = null
	set ef_0 = null
endfunction

function Trig_Moon_Chackram_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0NS'
endfunction

function InitTrig_Moon_Chackram takes nothing returns nothing
	local integer index = 0
	set gg_trg_Moon_Chackram_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Moon_Chackram_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Moon_Chackram_1, Condition(function Trig_Moon_Chackram_Conditions))
	call TriggerAddAction(gg_trg_Moon_Chackram_1, function Trig_Moon_Chackram_Actions)
endfunction

function Trig_Moon_Wind_Periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local group gheal = LoadGroupHandle(udg_hash_1, h_0, 2)
	local integer adddamage
	local integer addas = LoadInteger(udg_hash_1, h_0, 4)
	local integer addint = LoadInteger(udg_hash_1, h_0, 5)
	local integer addagi = LoadInteger(udg_hash_1, h_0, 6)
	local integer addregen = LoadInteger(udg_hash_1, h_0, 7)
	local integer wait = LoadInteger(udg_hash_1, h_0, 9)
	local real x = LoadReal(udg_hash_1, h_0, $C)
	local real y = LoadReal(udg_hash_1, h_0, $D)
	local player p = GetOwningPlayer(caster_0)
	local group g = CreateGroup()
	local group g2 = CreateGroup()
	local group g3 = CreateGroup()
	local unit Picked
	local unit dammi
	local unit dammief
	local effect dammieffect
	local integer lopa = 0
	local integer lopb = 0
	local integer count
	local real angleef
	local real dist
	if wait_0 > 0 then
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 9, wait_0)
		call GroupEnumUnitsInRange(g_0, x_0, y_0, 450., null)
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if (IsUnitAlly(Picked_0, p_0) or GetOwningPlayer(Picked_0) == Player($D)) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call GroupAddUnit(g2_0, Picked_0)
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		set Picked_0 = null
		call GroupClear(g_0)
		call DestroyGroup(g_0)
		set g_0 = null
		call GroupAddGroup(gheal_0, g3_0)
		loop
			set Picked_0 = FirstOfGroup(g3_0)
			exitwhen Picked_0 == null
			if IsUnitInGroup(Picked_0, g2_0) == false then
				call GroupRemoveUnit(gheal_0, Picked_0)
				call SetUnitLifeAndManaRegeneration(Picked_0, "life", -addregen_0)
				call SetAttackSpeedAbilityLevel(Picked_0, -addas_0)
				if IsUnitType(Picked_0, UNIT_TYPE_HERO_1) then
					call SetHeroAgi(Picked_0, GetHeroAgi(Picked_0, false) - addagi_0, true)
					call SetHeroInt(Picked_0, GetHeroInt(Picked_0, false) - addint_0, true)
				endif
				if Picked_0 == caster_0 and LoadBoolean(udg_hash_1, h_0, $E) then
					call SetUnitLifeAndManaRegeneration(Picked_0, "life", -R2I((addregen_0)) / 2)
					call SetAttackSpeedAbilityLevel(Picked_0, -R2I((addas_0)) / 2)
					call SetHeroAgi(Picked_0, GetHeroAgi(Picked_0, false) - R2I((addagi_0)) / 2, true)
					call SetHeroInt(Picked_0, GetHeroInt(Picked_0, false) - R2I((addint_0)) / 2, true)
				endif
				if Picked_0 == caster_0 and LoadBoolean(udg_hash_1, h_0, $F) then
					set adddamage_0 = LoadInteger(udg_hash_1, h_0, 3)
					call SetAttackAbilityLevel(Picked_0, -adddamage_0)
				endif
			else
				set dammi_0 = CreateUnit(p_0, 'h00U', x_0, y_0, .0)
				call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
				call UnitAddAbility(dammi_0, 'A0NU')
				call IssueTargetOrderById(dammi_0, $D0085, Picked_0)
				set dammi_0 = null
			endif
			call GroupRemoveUnit(g3_0, Picked_0)
		endloop
		set Picked_0 = null
		call GroupClear(g3_0)
		call DestroyGroup(g3_0)
		set g3_0 = null
		loop
			set Picked_0 = FirstOfGroup(g2_0)
			exitwhen Picked_0 == null
			if IsUnitInGroup(Picked_0, gheal_0) == false then
				call GroupAddUnit(gheal_0, Picked_0)
				call SetUnitLifeAndManaRegeneration(Picked_0, "life", addregen_0)
				call SetAttackSpeedAbilityLevel(Picked_0, addas_0)
				if IsUnitType(Picked_0, UNIT_TYPE_HERO_1) then
					call SetHeroAgi(Picked_0, GetHeroAgi(Picked_0, false) + addagi_0, true)
					call SetHeroInt(Picked_0, GetHeroInt(Picked_0, false) + addint_0, true)
				endif
				if Picked_0 == caster_0 and LoadBoolean(udg_hash_1, h_0, $E) then
					call SetUnitLifeAndManaRegeneration(Picked_0, "life", R2I(addregen_0 / 2))
					call SetAttackSpeedAbilityLevel(Picked_0, R2I(addas_0 / 2))
					call SetHeroAgi(Picked_0, GetHeroAgi(Picked_0, false) + R2I((addagi_0) / 2), true)
					call SetHeroInt(Picked_0, GetHeroInt(Picked_0, false) + R2I((addint_0)) / 2, true)
				endif
				if Picked_0 == caster_0 and LoadBoolean(udg_hash_1, h_0, $F) then
					set adddamage_0 = LoadInteger(udg_hash_1, h_0, 3)
					call SetAttackAbilityLevel(Picked_0, adddamage_0)
				endif
			endif
			if GetUnitAbilityLevel(Picked_0, 'B04M') <= 0 then
				set dammi_0 = CreateUnit(p_0, 'h00U', x_0, y_0, .0)
				call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
				call UnitAddAbility(dammi_0, 'A0NU')
				call IssueTargetOrderById(dammi_0, $D0085, Picked_0)
				set dammi_0 = null
			endif
			call GroupRemoveUnit(g2_0, Picked_0)
		endloop
		set Picked_0 = null
		call GroupClear(g2_0)
		call DestroyGroup(g2_0)
		set g2_0 = null
		call SaveGroupHandle(udg_hash_1, h_0, 2, gheal_0)
	else
		loop
			set Picked_0 = FirstOfGroup(gheal_0)
			exitwhen Picked_0 == null
			call SetUnitLifeAndManaRegeneration(Picked_0, "life", -addregen_0)
			call SetAttackSpeedAbilityLevel(Picked_0, -addas_0)
			if IsUnitType(Picked_0, UNIT_TYPE_HERO_1) then
				call SetHeroAgi(Picked_0, GetHeroAgi(Picked_0, false) - addagi_0, true)
				call SetHeroInt(Picked_0, GetHeroInt(Picked_0, false) - addint_0, true)
			endif
			if Picked_0 == caster_0 and LoadBoolean(udg_hash_1, h_0, $E) then
				call SetUnitLifeAndManaRegeneration(Picked_0, "life", -R2I((addregen_0)) / 2)
				call SetAttackSpeedAbilityLevel(Picked_0, -R2I((addas_0)) / 2)
				call SetHeroAgi(Picked_0, GetHeroAgi(Picked_0, false) - R2I((addagi_0)) / 2, true)
				call SetHeroInt(Picked_0, GetHeroInt(Picked_0, false) - R2I((addint_0)) / 2, true)
			endif
			if Picked_0 == caster_0 and LoadBoolean(udg_hash_1, h_0, $F) then
				set adddamage_0 = LoadInteger(udg_hash_1, h_0, 3)
				call SetAttackAbilityLevel(Picked_0, -adddamage_0)
			endif
			call GroupRemoveUnit(gheal_0, Picked_0)
		endloop
		call GroupClear(gheal_0)
		call DestroyGroup(gheal_0)
		set gheal_0 = null
		set Picked_0 = null
		set lopa_0 = 1
		loop
			exitwhen lopa_0 >= 7
			set dammief_0 = LoadUnitHandle(udg_hash_1, h_0, 50 + lopa_0)
			set dammieffect_0 = LoadEffectHandle(udg_hash_1, h_0, 60 + lopa_0)
			call KillUnit(dammief_0)
			call DestroyEffect(dammieffect_0)
			set dammief_0 = null
			set dammieffect_0 = null
			set lopa_0 = lopa_0 + 1
		endloop
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set caster_0 = null
	set p_0 = null
	set gheal_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	call GroupClear(g2_0)
	call DestroyGroup(g2_0)
	set g2_0 = null
	call GroupClear(g3_0)
	call DestroyGroup(g3_0)
	set g3_0 = null
	set dammi_0 = null
	set Picked_0 = null
endfunction

function Trig_Moon_Wind_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local player p = GetOwningPlayer(caster_0)
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0NT')
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local location loc = GetSpellTargetLoc()
	local real xt = GetLocationX(loc_0)
	local real yt = GetLocationY(loc_0)
	local real angle = bj_RADTODEG_1 * Atan2((yt_0 - y_0), (xt_0 - x_0))
	local real dist = SquareRoot(((xt_0 - x_0) * (xt_0 - x_0)) + ((yt_0 - y_0) * (yt_0 - y_0)))
	local group gheal = CreateGroup()
	local integer addagi = 6 + (4 * lvl_0)
	local integer addint = 6 + (4 * lvl_0)
	local integer addas = 8 + (6 * lvl_0)
	local integer adddamage = R2I(GetHeroAgi(caster_0, true) * .4)
	local integer addregen = $A + (6 * lvl_0)
	local integer wait = 20
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local unit dammief
	local effect dammieffect
	local integer lopa = 1
	local integer lopb = 0
	local integer count
	local real angleef
	local integer dammicounter = 6
	local real smechenie = 400. + 133.
	local real angledummi = angle_0 - 90.
	local real x2 = x_0 - 400. * Cos(angle_0 * bj_DEGTORAD_1)
	local real y2 = y_0 - 400. * Sin(angle_0 * bj_DEGTORAD_1)
	local boolean halfbonus = false
	local boolean isultimate = LoadBoolean(udg_hash_1, GetHandleId(caster_0), $7F)
	if GetFloatGameState(GAME_STATE_TIME_OF_DAY_1) * 1 < 6. or GetFloatGameState(GAME_STATE_TIME_OF_DAY_1) * 1 > 18. then
		set halfbonus_0 = true
	endif
	if isultimate_0 then
		set wait_0 = 30
	endif
	loop
		exitwhen lopa_0 >= 7
		set smechenie_0 = smechenie_0 - 133.
		set dammief_0 = CreateUnit(p_0, 'h00E', x2_0 + smechenie_0 * Cos(angledummi_0 * bj_DEGTORAD_1), y2_0 + smechenie_0 * Sin(angledummi_0 * bj_DEGTORAD_1), angle_0)
		call SetUnitAnimationByIndex(dammief_0, 45)
		call SetUnitScale(dammief_0, 2., 2., 2.)
		call SetUnitFlyHeight(dammief_0, 200., .0)
		set dammieffect_0 = AddSpecialEffectTarget("Effects\\HolyBlessing.mdl", dammief_0, "chest")
		call SaveUnitHandle(udg_hash_1, h_0, lopa_0 + 50, dammief_0)
		call SaveEffectHandle(udg_hash_1, h_0, lopa_0 + 60, dammieffect_0)
		set dammief_0 = null
		set dammieffect_0 = null
		set lopa_0 = lopa_0 + 1
	endloop
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveGroupHandle(udg_hash_1, h_0, 2, gheal_0)
	call SaveInteger(udg_hash_1, h_0, 3, adddamage_0)
	call SaveInteger(udg_hash_1, h_0, 4, addas_0)
	call SaveInteger(udg_hash_1, h_0, 5, addint_0)
	call SaveInteger(udg_hash_1, h_0, 6, addagi_0)
	call SaveInteger(udg_hash_1, h_0, 7, addregen_0)
	call SaveInteger(udg_hash_1, h_0, 9, wait_0)
	call SaveReal(udg_hash_1, h_0, $C, x_0)
	call SaveReal(udg_hash_1, h_0, $D, y_0)
	call SaveBoolean(udg_hash_1, h_0, $E, halfbonus_0)
	call SaveBoolean(udg_hash_1, h_0, $F, isultimate_0)
	call TimerStart(t_0, .5, true, function Trig_Moon_Wind_Periodic_Actions)
	set caster_0 = null
	set p_0 = null
	set gheal_0 = null
	set t_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
endfunction

function Trig_Moon_Wind_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0NT'
endfunction

function InitTrig_Moon_Wind takes nothing returns nothing
	local integer index = 0
	set gg_trg_Moon_Wind_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Moon_Wind_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Moon_Wind_1, Condition(function Trig_Moon_Wind_Conditions))
	call TriggerAddAction(gg_trg_Moon_Wind_1, function Trig_Moon_Wind_Actions)
endfunction

function Trig_Night_Heart_Periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local effect ef = LoadEffectHandle(udg_hash_1, h_0, 2)
	local integer bonus = LoadInteger(udg_hash_1, h_0, 3)
	call SetHeroAgi(caster_0, GetHeroAgi(caster_0, false) - bonus_0, true)
	call SaveBoolean(udg_hash_1, GetHandleId(caster_0), $7F, false)
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
	set caster_0 = null
	call DestroyEffect(ef_0)
	set ef_0 = null
endfunction

function Trig_Night_Heart_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local effect ef = AddSpecialEffectTarget("Effects\\StarfallCaster.mdl", caster_0, "origin")
	local integer bonus = $F + ($F * GetUnitAbilityLevel(caster_0, 'A0NV'))
	local unit dammi = CreateUnit(GetOwningPlayer(caster_0), 'h00H', .0, .0, .0)
	local item it = CreateItem('I010', .0, .0)
	call UnitApplyTimedLife(dammi_0, 'BTLF', 10.)
	call UnitAddItem(dammi_0, it_0)
	call UnitUseItem(dammi_0, GetItemOfTypeFromUnitBJ(dammi_0, 'I010'))
	set dammi_0 = null
	set it_0 = null
	call PlaySoundBJ(gg_snd_HuntressYesAttack4_1)
	call SetHeroAgi(caster_0, GetHeroAgi(caster_0, false) + bonus_0, true)
	call SaveBoolean(udg_hash_1, GetHandleId(caster_0), $7F, true)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveEffectHandle(udg_hash_1, h_0, 2, ef_0)
	call SaveInteger(udg_hash_1, h_0, 3, bonus_0)
	call TimerStart(t_0, 20., false, function Trig_Night_Heart_Periodic_Actions)
	set caster_0 = null
	set t_0 = null
	set ef_0 = null
endfunction

function Trig_Night_Heart_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0NV'
endfunction

function InitTrig_Night_Heart takes nothing returns nothing
	local integer index = 0
	set gg_trg_Night_Heart_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Night_Heart_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Night_Heart_1, Condition(function Trig_Night_Heart_Conditions))
	call TriggerAddAction(gg_trg_Night_Heart_1, function Trig_Night_Heart_Actions)
endfunction

function Trig_MoonWarrior_Load_Actions takes nothing returns nothing
	call AbilityPreload('A0NR', 6)
	call AbilityPreload('A0NS', 6)
	call AbilityPreload('A0NT', 6)
	call AbilityPreload('A0NV', 3)
	call AbilityPreload('A0NU', 1)
	call AbilityPreload('B04R', 1)
	call UnitPreload('h00H')
	call UnitPreload('I010')
	call EffectPreload("Effects\\CosmicTouch.MDX")
	call EffectPreload("Effects\\BlueGlaivie.mdl")
	call EffectPreload("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl")
	call EffectPreload("Effects\\SoundTrauma.mdl")
	call EffectPreload("Effects\\StarfallCaster.mdl")
	call EffectPreload("Effects\\StarfallTarget2.mdl")
	call EffectPreload("Abilities\\Spells\\NightElf\\Starfall\\StarfallCaster.mdl")
	call EffectPreload("Effects\\Nebula.mdl")
	call EffectPreload("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl")
	call EffectPreload("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayDamage.mdl")
	call EffectPreload("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayTarget.mdl")
	call EffectPreload("Effects\\MoonSight_Buff.mdx")
	call EffectPreload("Effects\\HolyBlessing.mdl")
	call EnableTrigger(gg_trg_Falling_Star_1)
	call EnableTrigger(gg_trg_Moon_Chackram_1)
	call EnableTrigger(gg_trg_Moon_Wind_1)
	call EnableTrigger(gg_trg_Night_Heart_1)
endfunction

function InitTrig_MoonWarrior_Load takes nothing returns nothing
	set gg_trg_MoonWarrior_Load_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_MoonWarrior_Load_1, function Trig_MoonWarrior_Load_Actions)
endfunction

function Trig_Ancient_Communication_Ligtning_Move_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local unit target = LoadUnitHandle(udg_hash_1, h_0, 2)
	local lightning l = LoadLightningHandle(udg_hash_1, h_0, 3)
	local real time = LoadReal(udg_hash_1, h_0, 4)
	local location locc = GetUnitLoc(caster_0)
	local real xc = GetUnitX(caster_0)
	local real yc = GetUnitY(caster_0)
	local location loct = GetUnitLoc(target_0)
	local real xt = GetUnitX(target_0)
	local real yt = GetUnitY(target_0)
	local real dx = xc_0 - xt_0
	local real dy = yc_0 - yt_0
	local real dist = SquareRoot(dx_0 * dx_0 + dy_0 * dy_0)
	local integer damage
	local group g
	local unit Picked
	local group g2
	local group g3
	local integer attackspeed
	local effect ef
	local integer hpregen
	local integer armor
	if GetUnitState(caster_0, UNIT_STATE_LIFE_1) > .405 and GetUnitState(target_0, UNIT_STATE_LIFE_1) > .0 and dist_0 <= 725. and time_0 > .0 then
		set time_0 = time_0 - .04
		call SaveReal(udg_hash_1, h_0, 4, time_0)
		call MoveLightningEx(l_0, true, xc_0, yc_0, 50. + GetLocationZ(locc_0), xt_0, yt_0, 50. + GetLocationZ(loct_0))
	else
		if GetUnitAbilityLevel(caster_0, 'A0OO') > 0 then
			set attackspeed_0 = $A + $A * GetUnitAbilityLevel(caster_0, 'A0OO')
			set ef_0 = LoadEffectHandle(udg_hash_1, GetHandleId(target_0), $89)
			call DestroyEffect(ef_0)
			set ef_0 = null
			call SaveEffectHandle(udg_hash_1, GetHandleId(target_0), $89, null)
			call SetAttackSpeedAbilityLevel(target_0, -LoadInteger(udg_hash_1, GetHandleId(target_0), $8C))
		endif
		if GetUnitAbilityLevel(caster_0, 'A0OT') > 0 then
			set armor_0 = 3 + 3 * GetUnitAbilityLevel(caster_0, 'A0OT')
			set hpregen_0 = 5 + $A * GetUnitAbilityLevel(caster_0, 'A0OT')
			set ef_0 = LoadEffectHandle(udg_hash_1, GetHandleId(target_0), $89)
			call DestroyEffect(ef_0)
			set ef_0 = null
			call SaveEffectHandle(udg_hash_1, GetHandleId(target_0), $89, null)
			call SetUnitLifeAndManaRegeneration(target_0, "life", -LoadInteger(udg_hash_1, GetHandleId(target_0), $8D))
			call SetArmorAbilityLevel(target_0, -LoadInteger(udg_hash_1, GetHandleId(target_0), $8E))
		endif
		call UnitRemoveAbility(target_0, 'B04Z')
		set g_0 = LoadGroupHandle(udg_hash_1, GetHandleId(caster_0), $88)
		call GroupRemoveUnit(g_0, target_0)
		set Picked_0 = FirstOfGroup(g_0)
		if Picked_0 == null then
			call UnitRemoveAbility(caster_0, 'B04Z')
		endif
		call SaveGroupHandle(udg_hash_1, GetHandleId(caster_0), $88, g_0)
		set damage_0 = LoadInteger(udg_hash_1, h_0, 5)
		call SetAttackAbilityLevel(caster_0, -damage_0)
		call SetAttackAbilityLevel(target_0, -damage_0)
		call DestroyLightning(l_0)
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set caster_0 = null
	set target_0 = null
	set l_0 = null
	call RemoveLocation(locc_0)
	set locc_0 = null
	call RemoveLocation(loct_0)
	set loct_0 = null
endfunction

function Trig_Ancient_Communication_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local unit target = GetSpellTargetUnit()
	local unit dammi
	local location locc = GetUnitLoc(caster_0)
	local real xc = GetUnitX(caster_0)
	local real yc = GetUnitY(caster_0)
	local location loct = GetUnitLoc(target_0)
	local real xt = GetUnitX(target_0)
	local real yt = GetUnitY(target_0)
	local lightning l
	local player p = GetOwningPlayer(caster_0)
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0OM')
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local real time = 11. + lvl_0
	local integer damage = 7 + (8 * lvl_0)
	local group g = LoadGroupHandle(udg_hash_1, GetHandleId(caster_0), $88)
	local effect ef
	local integer attackspeed
	local integer hpregen
	local integer armor
	if g_0 == null then
		set g_0 = CreateGroup()
	endif
	if IsUnitInGroup(target_0, g_0) then
		call SimError(GetOwningPlayer(caster_0), "На этого героя уже наложена Связь Предков.")
		call UnitRemoveAbility(caster_0, 'A0OM')
		call UnitAddAbility(caster_0, 'A0OM')
		call SetUnitAbilityLevel(caster_0, 'A0OM', lvl_0)
		call SetUnitState(caster_0, UNIT_STATE_MANA_1, GetUnitState(caster_0, UNIT_STATE_MANA_1) + 120. + (5. * lvl_0))
	else
		set l_0 = AddLightningEx("SPLK", true, xc_0, yc_0, 50. + GetLocationZ(locc_0), xt_0, yt_0, 50. + GetLocationZ(loct_0))
		call GroupAddUnit(g_0, target_0)
		call SaveGroupHandle(udg_hash_1, GetHandleId(caster_0), $88, g_0)
		call SetAttackAbilityLevel(caster_0, damage_0)
		call SetAttackAbilityLevel(target_0, damage_0)
		set dammi_0 = CreateUnit(p_0, 'h00U', xc_0, yc_0, .0)
		call UnitApplyTimedLife(dammi_0, 'BTLF', 1.5)
		call UnitAddAbility(dammi_0, 'A0ON')
		call IssueTargetOrderById(dammi_0, $D0085, caster_0)
		set dammi_0 = null
		set dammi_0 = CreateUnit(p_0, 'h00U', xt_0, yt_0, .0)
		call UnitApplyTimedLife(dammi_0, 'BTLF', 1.5)
		call UnitAddAbility(dammi_0, 'A0ON')
		call IssueTargetOrderById(dammi_0, $D0085, target_0)
		set dammi_0 = null
		if GetUnitAbilityLevel(caster_0, 'A0OO') > 0 then
			set attackspeed_0 = $A + $A * GetUnitAbilityLevel(caster_0, 'A0OO')
			set ef_0 = AddSpecialEffectTarget("Effects\\PyroMissle.mdx", target_0, "chest")
			call SaveEffectHandle(udg_hash_1, GetHandleId(target_0), $89, ef_0)
			set ef_0 = null
			call SetAttackSpeedAbilityLevel(target_0, attackspeed_0)
			call SaveInteger(udg_hash_1, GetHandleId(target_0), $8C, attackspeed_0)
		endif
		if GetUnitAbilityLevel(caster_0, 'A0OT') > 0 then
			set armor_0 = 3 + 3 * GetUnitAbilityLevel(caster_0, 'A0OT')
			set hpregen_0 = 5 + $A * GetUnitAbilityLevel(caster_0, 'A0OT')
			set ef_0 = AddSpecialEffectTarget("Effects\\Nebula.mdx", target_0, "origin")
			call SaveEffectHandle(udg_hash_1, GetHandleId(target_0), $89, ef_0)
			set ef_0 = null
			call SetUnitLifeAndManaRegeneration(target_0, "life", hpregen_0)
			call SetArmorAbilityLevel(target_0, armor_0)
			call SaveInteger(udg_hash_1, GetHandleId(target_0), $8D, hpregen_0)
			call SaveInteger(udg_hash_1, GetHandleId(target_0), $8E, armor_0)
		endif
		call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
		call SaveUnitHandle(udg_hash_1, h_0, 2, target_0)
		call SaveLightningHandle(udg_hash_1, h_0, 3, l_0)
		call SaveReal(udg_hash_1, h_0, 4, time_0)
		call SaveInteger(udg_hash_1, h_0, 5, damage_0)
		call TimerStart(t_0, .04, true, function Trig_Ancient_Communication_Ligtning_Move_Actions)
		set l_0 = null
	endif
	set caster_0 = null
	set target_0 = null
	set dammi_0 = null
	call RemoveLocation(locc_0)
	set locc_0 = null
	call RemoveLocation(loct_0)
	set loct_0 = null
	set p_0 = null
	set t_0 = null
	set g_0 = null
endfunction

function Trig_Ancient_Communication_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0OM'
endfunction

function InitTrig_Ancient_Communication takes nothing returns nothing
	local integer index = 0
	set gg_trg_Ancient_Communication_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Ancient_Communication_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Ancient_Communication_1, Condition(function Trig_Ancient_Communication_Conditions))
	call TriggerAddAction(gg_trg_Ancient_Communication_1, function Trig_Ancient_Communication_Actions)
endfunction

function Trig_Learn_Power_of_Ancestors_Actions takes nothing returns nothing
	local unit u = GetLearningUnit()
	local integer lvl = GetUnitAbilityLevel(u_0, 'A0OP')
	if lvl_0 == 1 then
		call UnitAddAbility(u_0, 'A0OS')
		call UnitAddAbility(u_0, 'A0OR')
		call UnitMakeAbilityPermanent(u_0, true, 'A0OS')
		call UnitMakeAbilityPermanent(u_0, true, 'A0OR')
	else
		call SetUnitAbilityLevel(u_0, 'A0OS', lvl_0)
		call SetUnitAbilityLevel(u_0, 'A0OR', lvl_0)
		call SetUnitAbilityLevel(u_0, 'A0OT', lvl_0)
		call SetUnitAbilityLevel(u_0, 'A0OO', lvl_0)
	endif
	set u_0 = null
endfunction

function Trig_Learn_Power_of_Ancestors_Conditions takes nothing returns boolean
	return GetLearnedSkill() == 'A0OP' and GetUnitTypeId(GetLearningUnit()) != 'h00U'
endfunction

function InitTrig_Learn_Power_of_Ancestors takes nothing returns nothing
	local integer index = 0
	set gg_trg_Learn_Power_of_Ancestors_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Power_of_Ancestors_1, Player(index_0), EVENT_PLAYER_HERO_SKILL_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Learn_Power_of_Ancestors_1, Condition(function Trig_Learn_Power_of_Ancestors_Conditions))
	call TriggerAddAction(gg_trg_Learn_Power_of_Ancestors_1, function Trig_Learn_Power_of_Ancestors_Actions)
endfunction

function Trig_Switch_Power_of_Ancestors_Move_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local boolean nodestroy = LoadBoolean(udg_hash_1, h_0, 2)
	local real mana = GetUnitState(caster_0, UNIT_STATE_MANA_1)
	local group g
	local group g2
	local unit Picked
	local integer lvl
	local integer h2
	local integer mana2
	local effect ef
	if mana_0 > 5. and GetUnitState(caster_0, UNIT_STATE_LIFE_1) > .0 and nodestroy_0 then
	else
		if nodestroy_0 then
			set h2_0 = GetHandleId(caster_0)
			set mana2_0 = LoadInteger(udg_hash_1, h2_0, $8A)
			set g_0 = LoadGroupHandle(udg_hash_1, h2_0, $88)
			set g2_0 = CreateGroup()
			call GroupAddUnit(g2_0, caster_0)
			call GroupAddGroup(g_0, g2_0)
			loop
				set Picked_0 = FirstOfGroup(g2_0)
				exitwhen Picked_0 == null
				set ef_0 = LoadEffectHandle(udg_hash_1, GetHandleId(Picked_0), $89)
				call DestroyEffect(ef_0)
				set ef_0 = null
				call SaveEffectHandle(udg_hash_1, GetHandleId(Picked_0), $89, null)
				if GetUnitAbilityLevel(caster_0, 'A0OO') > 0 then
					call SetAttackSpeedAbilityLevel(Picked_0, -LoadInteger(udg_hash_1, GetHandleId(Picked_0), $8C))
				endif
				if GetUnitAbilityLevel(caster_0, 'A0OT') > 0 then
					call SetUnitLifeAndManaRegeneration(Picked_0, "life", -LoadInteger(udg_hash_1, GetHandleId(Picked_0), $8D))
					call SetArmorAbilityLevel(Picked_0, -LoadInteger(udg_hash_1, GetHandleId(Picked_0), $8E))
				endif
				call GroupRemoveUnit(g2_0, Picked_0)
			endloop
			if GetUnitAbilityLevel(caster_0, 'A0OO') > 0 then
				set lvl_0 = GetUnitAbilityLevel(caster_0, 'A0OO')
				call SetUnitLifeAndManaRegeneration(caster_0, "mana", mana2_0)
				call UnitRemoveAbility(caster_0, 'A0OO')
				call UnitAddAbility(caster_0, 'A0OS')
				call SetUnitAbilityLevel(caster_0, 'A0OS', lvl_0)
				call UnitMakeAbilityPermanent(caster_0, true, 'A0OS')
			endif
			if GetUnitAbilityLevel(caster_0, 'A0OT') > 0 then
				set lvl_0 = GetUnitAbilityLevel(caster_0, 'A0OT')
				call SetUnitLifeAndManaRegeneration(caster_0, "mana", mana2_0)
				call UnitRemoveAbility(caster_0, 'A0OT')
				call UnitAddAbility(caster_0, 'A0OR')
				call SetUnitAbilityLevel(caster_0, 'A0OR', lvl_0)
				call UnitMakeAbilityPermanent(caster_0, true, 'A0OR')
			endif
			call DestroyGroup(g2_0)
			set g2_0 = null
			set g_0 = null
		endif
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set caster_0 = null
endfunction

function Trig_Switch_Power_of_Ancestors_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local integer id = GetSpellAbilityId()
	local integer lvl = GetUnitAbilityLevel(caster_0, id_0)
	local effect ef
	local integer h = GetHandleId(caster_0)
	local group g = LoadGroupHandle(udg_hash_1, h_0, $88)
	local group g2 = CreateGroup()
	local unit Picked
	local integer mana = LoadInteger(udg_hash_1, h_0, $8A)
	local integer nowmana = 3 + lvl_0 * 2
	local timer t
	local integer attackspeed = $A + $A * lvl_0
	local integer hpregen = 5 + $A * lvl_0
	local integer armor = 3 + 3 * lvl_0
	local boolean switch = false
	local boolean switch2 = false
	call GroupAddUnit(g2_0, caster_0)
	call GroupAddGroup(g_0, g2_0)
	if id_0 == 'A0OS' then
		call UnitRemoveAbility(caster_0, 'A0OS')
		call UnitAddAbility(caster_0, 'A0OO')
		call SetUnitAbilityLevel(caster_0, 'A0OO', lvl_0)
		call UnitMakeAbilityPermanent(caster_0, true, 'A0OO')
		if GetUnitAbilityLevel(caster_0, 'A0OT') > 0 then
			set switch2_0 = true
			call SetUnitLifeAndManaRegeneration(caster_0, "mana", mana_0)
			call UnitRemoveAbility(caster_0, 'A0OT')
			call UnitAddAbility(caster_0, 'A0OR')
			call SetUnitAbilityLevel(caster_0, 'A0OR', lvl_0)
			call UnitMakeAbilityPermanent(caster_0, true, 'A0OR')
		endif
		call SetUnitLifeAndManaRegeneration(caster_0, "mana", -nowmana_0)
		call SaveInteger(udg_hash_1, h_0, $8A, nowmana_0)
		set t_0 = CreateTimer()
		call SaveUnitHandle(udg_hash_1, GetHandleId(t_0), 1, caster_0)
		call SaveBoolean(udg_hash_1, GetHandleId(t_0), 2, true)
		call TimerStart(t_0, .04, true, function Trig_Switch_Power_of_Ancestors_Move_Actions)
		if LoadTimerHandle(udg_hash_1, h_0, $8B) != null then
			call FlushChildHashtable(udg_hash_1, GetHandleId(LoadTimerHandle(udg_hash_1, h_0, $8B)))
			call DestroyTimer(LoadTimerHandle(udg_hash_1, h_0, $8B))
		endif
		call SaveTimerHandle(udg_hash_1, h_0, $8B, t_0)
		set t_0 = null
		loop
			set Picked_0 = FirstOfGroup(g2_0)
			exitwhen Picked_0 == null
			set ef_0 = LoadEffectHandle(udg_hash_1, GetHandleId(Picked_0), $89)
			call DestroyEffect(ef_0)
			set ef_0 = null
			set ef_0 = AddSpecialEffectTarget("Effects\\PyroMissle.mdx", Picked_0, "chest")
			call SaveEffectHandle(udg_hash_1, GetHandleId(Picked_0), $89, ef_0)
			set ef_0 = null
			if switch2_0 then
				call SetUnitLifeAndManaRegeneration(Picked_0, "life", -LoadInteger(udg_hash_1, GetHandleId(Picked_0), $8D))
				call SetArmorAbilityLevel(Picked_0, -LoadInteger(udg_hash_1, GetHandleId(Picked_0), $8E))
			endif
			call SetAttackSpeedAbilityLevel(Picked_0, attackspeed_0)
			call SaveInteger(udg_hash_1, GetHandleId(Picked_0), $8C, attackspeed_0)
			call GroupRemoveUnit(g2_0, Picked_0)
		endloop
	endif
	if id_0 == 'A0OO' then
		call UnitRemoveAbility(caster_0, 'A0OO')
		call UnitAddAbility(caster_0, 'A0OS')
		call SetUnitAbilityLevel(caster_0, 'A0OS', lvl_0)
		call UnitMakeAbilityPermanent(caster_0, true, 'A0OS')
		call SetUnitLifeAndManaRegeneration(caster_0, "mana", mana_0)
		loop
			set Picked_0 = FirstOfGroup(g2_0)
			exitwhen Picked_0 == null
			set ef_0 = LoadEffectHandle(udg_hash_1, GetHandleId(Picked_0), $89)
			call DestroyEffect(ef_0)
			set ef_0 = null
			call SaveEffectHandle(udg_hash_1, GetHandleId(Picked_0), $89, null)
			call SetAttackSpeedAbilityLevel(Picked_0, -LoadInteger(udg_hash_1, GetHandleId(Picked_0), $8C))
			call GroupRemoveUnit(g2_0, Picked_0)
		endloop
	endif
	if id_0 == 'A0OR' then
		call UnitRemoveAbility(caster_0, 'A0OR')
		call UnitAddAbility(caster_0, 'A0OT')
		call SetUnitAbilityLevel(caster_0, 'A0OT', lvl_0)
		call UnitMakeAbilityPermanent(caster_0, true, 'A0OT')
		call SetUnitLifeAndManaRegeneration(caster_0, "mana", -nowmana_0)
		call SaveInteger(udg_hash_1, h_0, $8A, nowmana_0)
		if GetUnitAbilityLevel(caster_0, 'A0OO') > 0 then
			set switch_0 = true
			call SetUnitLifeAndManaRegeneration(caster_0, "mana", mana_0)
			call UnitRemoveAbility(caster_0, 'A0OO')
			call UnitAddAbility(caster_0, 'A0OS')
			call SetUnitAbilityLevel(caster_0, 'A0OS', lvl_0)
			call UnitMakeAbilityPermanent(caster_0, true, 'A0OS')
		endif
		set t_0 = CreateTimer()
		call SaveUnitHandle(udg_hash_1, GetHandleId(t_0), 1, caster_0)
		call SaveBoolean(udg_hash_1, GetHandleId(t_0), 2, true)
		call TimerStart(t_0, .04, true, function Trig_Switch_Power_of_Ancestors_Move_Actions)
		if LoadTimerHandle(udg_hash_1, h_0, $8B) != null then
			call FlushChildHashtable(udg_hash_1, GetHandleId(LoadTimerHandle(udg_hash_1, h_0, $8B)))
			call DestroyTimer(LoadTimerHandle(udg_hash_1, h_0, $8B))
		endif
		call SaveTimerHandle(udg_hash_1, h_0, $8B, t_0)
		set t_0 = null
		loop
			set Picked_0 = FirstOfGroup(g2_0)
			exitwhen Picked_0 == null
			set ef_0 = LoadEffectHandle(udg_hash_1, GetHandleId(Picked_0), $89)
			call DestroyEffect(ef_0)
			set ef_0 = null
			if switch_0 then
				call SetAttackSpeedAbilityLevel(Picked_0, -LoadInteger(udg_hash_1, GetHandleId(Picked_0), $8C))
			endif
			call SetUnitLifeAndManaRegeneration(Picked_0, "life", hpregen_0)
			call SetArmorAbilityLevel(Picked_0, armor_0)
			call SaveInteger(udg_hash_1, GetHandleId(Picked_0), $8D, hpregen_0)
			call SaveInteger(udg_hash_1, GetHandleId(Picked_0), $8E, armor_0)
			set ef_0 = AddSpecialEffectTarget("Effects\\Nebula.mdx", Picked_0, "origin")
			call SaveEffectHandle(udg_hash_1, GetHandleId(Picked_0), $89, ef_0)
			set ef_0 = null
			call GroupRemoveUnit(g2_0, Picked_0)
		endloop
	endif
	if id_0 == 'A0OT' then
		call UnitRemoveAbility(caster_0, 'A0OT')
		call UnitAddAbility(caster_0, 'A0OR')
		call SetUnitAbilityLevel(caster_0, 'A0OR', lvl_0)
		call UnitMakeAbilityPermanent(caster_0, true, 'A0OR')
		call SetUnitLifeAndManaRegeneration(caster_0, "mana", mana_0)
		loop
			set Picked_0 = FirstOfGroup(g2_0)
			exitwhen Picked_0 == null
			set ef_0 = LoadEffectHandle(udg_hash_1, GetHandleId(Picked_0), $89)
			call DestroyEffect(ef_0)
			set ef_0 = null
			call SaveEffectHandle(udg_hash_1, GetHandleId(Picked_0), $89, null)
			call SetUnitLifeAndManaRegeneration(Picked_0, "life", -LoadInteger(udg_hash_1, GetHandleId(Picked_0), $8D))
			call SetArmorAbilityLevel(Picked_0, -LoadInteger(udg_hash_1, GetHandleId(Picked_0), $8E))
			call GroupRemoveUnit(g2_0, Picked_0)
		endloop
	endif
	set g_0 = null
	call DestroyGroup(g2_0)
	set g2_0 = null
	set caster_0 = null
endfunction

function Trig_Switch_Power_of_Ancestors_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0OR' or GetSpellAbilityId() == 'A0OS' or GetSpellAbilityId() == 'A0OO' or GetSpellAbilityId() == 'A0OT'
endfunction

function InitTrig_Switch_Power_of_Ancestors takes nothing returns nothing
	local integer index = 0
	set gg_trg_Switch_Power_of_Ancestors_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Switch_Power_of_Ancestors_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Switch_Power_of_Ancestors_1, Condition(function Trig_Switch_Power_of_Ancestors_Conditions))
	call TriggerAddAction(gg_trg_Switch_Power_of_Ancestors_1, function Trig_Switch_Power_of_Ancestors_Actions)
endfunction

function Trig_Earth_Split_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local unit target = GetSpellTargetUnit()
	local unit dammi
	local real xc = GetUnitX(caster_0)
	local real yc = GetUnitY(caster_0)
	local player p = GetOwningPlayer(caster_0)
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0OQ')
	local integer damage = $A + (35 * lvl_0)
	local group g = LoadGroupHandle(udg_hash_1, GetHandleId(caster_0), $88)
	local group g2 = CreateGroup()
	local group g3 = CreateGroup()
	local group g4 = CreateGroup()
	local unit Picked
	local unit Picked2
	call GroupAddUnit(g2_0, caster_0)
	call GroupAddGroup(g_0, g2_0)
	loop
		set Picked2_0 = FirstOfGroup(g2_0)
		exitwhen Picked2_0 == null
		call GroupEnumUnitsInRange(g3_0, GetUnitX(Picked2_0), GetUnitY(Picked2_0), 225., null)
		loop
			set Picked_0 = FirstOfGroup(g3_0)
			exitwhen Picked_0 == null
			if IsUnitEnemy(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				set dammi_0 = CreateUnit(p_0, 'h00U', GetUnitX(Picked_0), GetUnitY(Picked_0), .0)
				call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
				call UnitAddAbility(dammi_0, 'A0OU')
				call IssueTargetOrderById(dammi_0, $D006B, Picked_0)
				call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
				set dammi_0 = null
			endif
			call GroupRemoveUnit(g3_0, Picked_0)
		endloop
		call DestroyEffect(AddSpecialEffect("Effects\\RedAftershock.mdl", GetUnitX(Picked2_0), GetUnitY(Picked2_0)))
		call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", GetUnitX(Picked2_0), GetUnitY(Picked2_0)))
		call GroupRemoveUnit(g2_0, Picked2_0)
	endloop
	set caster_0 = null
	set target_0 = null
	set dammi_0 = null
	set p_0 = null
	set g_0 = null
	call DestroyGroup(g2_0)
	set g2_0 = null
	call DestroyGroup(g3_0)
	set g3_0 = null
	call DestroyGroup(g4_0)
	set g4_0 = null
endfunction

function Trig_Earth_Split_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0OQ'
endfunction

function InitTrig_Earth_Split takes nothing returns nothing
	local integer index = 0
	set gg_trg_Earth_Split_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Earth_Split_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Earth_Split_1, Condition(function Trig_Earth_Split_Conditions))
	call TriggerAddAction(gg_trg_Earth_Split_1, function Trig_Earth_Split_Actions)
endfunction

function Trig_Ancient_Help_Move_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local group gdamage
	local real damage
	local real heal
	local integer wait = LoadInteger(udg_hash_1, h_0, 5)
	local integer waitgo = LoadInteger(udg_hash_1, h_0, $D)
	local real face
	local unit dammi
	local unit wave
	local real x
	local real y
	local player p
	local group g
	local unit Picked
	local effect ef
	local boolean alife = true
	local real scale
	local real aoe
	set wait_0 = wait_0 - 1
	call SaveInteger(udg_hash_1, h_0, 5, wait_0)
	if wait_0 == waitgo_0 then
		call SaveBoolean(udg_hash_1, h_0, $A, false)
		set dammi_0 = LoadUnitHandle(udg_hash_1, h_0, 7)
		set face_0 = LoadReal(udg_hash_1, h_0, 6)
		set wave_0 = CreateUnit(GetOwningPlayer(caster_0), 'h00U', GetUnitX(dammi_0), GetUnitY(dammi_0), GetUnitFacing(dammi_0))
		set ef_0 = AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Shockwave\\ShockwaveMissile.mdl", wave_0, "origin")
		call SaveUnitHandle(udg_hash_1, h_0, 8, wave_0)
		set scale_0 = LoadReal(udg_hash_1, h_0, $B)
		call SetUnitScale(wave_0, scale_0, scale_0, scale_0)
		call SaveEffectHandle(udg_hash_1, h_0, 9, ef_0)
		set ef_0 = null
		set wave_0 = null
		call RemoveUnit(dammi_0)
		set dammi_0 = null
	endif
	if (wait_0 > 0) and (wait_0 < waitgo_0) then
		set wave_0 = LoadUnitHandle(udg_hash_1, h_0, 8)
		set face_0 = LoadReal(udg_hash_1, h_0, 6)
		set x_0 = GetUnitX(wave_0) + 30. * Cos(face_0 * bj_DEGTORAD_1)
		set y_0 = GetUnitY(wave_0) + 30. * Sin(face_0 * bj_DEGTORAD_1)
		call SetUnitPosition(wave_0, x_0, y_0)
		set g_0 = CreateGroup()
		set p_0 = GetOwningPlayer(caster_0)
		set damage_0 = LoadReal(udg_hash_1, h_0, 3)
		set heal_0 = LoadReal(udg_hash_1, h_0, 4)
		set gdamage_0 = LoadGroupHandle(udg_hash_1, h_0, 2)
		set aoe_0 = LoadReal(udg_hash_1, h_0, $C)
		call GroupEnumUnitsInRange(g_0, x_0, y_0, aoe_0, null)
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if IsUnitEnemy(Picked_0, p_0) and IsUnitInGroup(Picked_0, gdamage_0) == false and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call GroupAddUnit(gdamage_0, Picked_0)
				call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl", Picked_0, "chest"))
				call DestroyEffect(AddSpecialEffectTarget("Effects\\Burning Core.mdx", Picked_0, "chest"))
				call DestroyEffect(AddSpecialEffectTarget("Effects\\Burning Core.mdx", Picked_0, "origin"))
				call StunUnitTimed(Picked_0, 2.5)
				call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
			endif
			if IsUnitAlly(Picked_0, p_0) and IsUnitInGroup(Picked_0, gdamage_0) == false and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call GroupAddUnit(gdamage_0, Picked_0)
				call SetUnitState(Picked_0, UNIT_STATE_LIFE_1, GetUnitState(Picked_0, UNIT_STATE_LIFE_1) + heal_0)
				call DestroyEffectWithWait(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", Picked_0, "origin"), 1.85)
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		call SaveGroupHandle(udg_hash_1, h_0, 2, gdamage_0)
		set wave_0 = null
		call GroupClear(g_0)
		call DestroyGroup(g_0)
		set g_0 = null
		set p_0 = null
		set gdamage_0 = null
	endif
	if wait_0 <= 0 then
		set wave_0 = LoadUnitHandle(udg_hash_1, h_0, 8)
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 9)
		call KillUnit(wave_0)
		call DestroyEffect(ef_0)
		set gdamage_0 = LoadGroupHandle(udg_hash_1, h_0, 2)
		call GroupClear(gdamage_0)
		call DestroyGroup(gdamage_0)
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set caster_0 = null
	set p_0 = null
	set Picked_0 = null
	set dammi_0 = null
endfunction

function Trig_Ancient_Help_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local unit target = GetSpellTargetUnit()
	local real angle
	local group gdamage = CreateGroup()
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0OV')
	local integer lvlup = GetUnitAbilityLevel(caster_0, 'A0PX')
	local real damage
	local real heal
	local location loc
	local real tx
	local real ty
	local integer wait = 40 + 20
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local unit dammi
	local real scale
	local real aoe
	local integer waitgo
	if lvl_0 > 0 then
		set damage_0 = (-25. + 175. * lvl_0) + (GetHeroInt(caster_0, true) * ((lvl_0 * .75) + .25))
		set heal_0 = (200. * lvl_0) + (GetHeroInt(caster_0, true) * 1.25 * lvl_0)
		set scale_0 = 1.2
		set aoe_0 = 125.
		set waitgo_0 = 40
	endif
	if lvlup_0 > 0 then
		set damage_0 = (-25. + 175. * lvlup_0) + (GetHeroInt(caster_0, true) * ((lvlup_0 * .75) + .25))
		set heal_0 = (200. * lvlup_0) + (GetHeroInt(caster_0, true) * 1.25 * lvlup_0)
		set scale_0 = 1.6
		set wait_0 = 80 + 20
		set aoe_0 = 200.
		set waitgo_0 = 80
	endif
	if target_0 == null then
		set loc_0 = GetSpellTargetLoc()
		set tx_0 = GetLocationX(loc_0)
		set ty_0 = GetLocationY(loc_0)
	else
		set tx_0 = GetUnitX(target_0)
		set ty_0 = GetUnitY(target_0)
	endif
	set angle_0 = bj_RADTODEG_1 * Atan2(ty_0 - y_0, tx_0 - x_0)
	set dammi_0 = CreateUnit(Player(5), 'h00L', x_0 - 200. * Cos(angle_0 * bj_DEGTORAD_1), y_0 - 200. * Sin(angle_0 * bj_DEGTORAD_1), angle_0)
	call SetUnitVertexColor(dammi_0, $F8, $9A, 0, 'd')
	call SetUnitScale(dammi_0, 1.5, 1.5, 1.5)
	call SetUnitAnimation(dammi_0, "Attack Slam")
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveGroupHandle(udg_hash_1, h_0, 2, gdamage_0)
	call SaveReal(udg_hash_1, h_0, 3, damage_0)
	call SaveReal(udg_hash_1, h_0, 4, heal_0)
	call SaveInteger(udg_hash_1, h_0, 5, wait_0)
	call SaveReal(udg_hash_1, h_0, 6, angle_0)
	call SaveUnitHandle(udg_hash_1, h_0, 7, dammi_0)
	call SaveBoolean(udg_hash_1, h_0, $A, true)
	call SaveReal(udg_hash_1, h_0, $B, scale_0)
	call SaveReal(udg_hash_1, h_0, $C, aoe_0)
	call SaveInteger(udg_hash_1, h_0, $D, waitgo_0)
	call TimerStart(t_0, .03, true, function Trig_Ancient_Help_Move_Actions)
	set caster_0 = null
	set target_0 = null
	set gdamage_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set t_0 = null
	set dammi_0 = null
endfunction

function Trig_Ancient_Help_Conditions takes nothing returns boolean
	return (GetSpellAbilityId() == 'A0OV' or GetSpellAbilityId() == 'A0PX')
endfunction

function InitTrig_Ancient_Help takes nothing returns nothing
	local integer index = 0
	set gg_trg_Ancient_Help_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Ancient_Help_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Ancient_Help_1, Condition(function Trig_Ancient_Help_Conditions))
	call TriggerAddAction(gg_trg_Ancient_Help_1, function Trig_Ancient_Help_Actions)
endfunction

function Trig_SpiritBreaker_Load_Actions takes nothing returns nothing
	call AbilityPreload('A0OM', 6)
	call AbilityPreload('A0OQ', 6)
	call AbilityPreload('A0OP', 6)
	call AbilityPreload('A0OV', 3)
	call AbilityPreload('A0OU', 1)
	call AbilityPreload('B04Z', 1)
	call AbilityPreload('B050', 1)
	call UnitPreload('h00L')
	call EffectPreload("Abilities\\Spells\\Orc\\StasisTrap\\StasisTotemTarget.mdl")
	call EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPriest.mdl")
	call EffectPreload("Effects\\Nebula.mdx")
	call EffectPreload("Effects\\PyroMissle.mdx")
	call EffectPreload("Effects\\RedAftershock.mdl")
	call EffectPreload("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
	call EffectPreload("Abilities\\Spells\\Orc\\Shockwave\\ShockwaveMissile.mdl")
	call EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl")
	call EffectPreload("Effects\\Burning Core.mdx")
	call EnableTrigger(gg_trg_Ancient_Communication_1)
	call EnableTrigger(gg_trg_Learn_Power_of_Ancestors_1)
	call EnableTrigger(gg_trg_Switch_Power_of_Ancestors_1)
	call EnableTrigger(gg_trg_Earth_Split_1)
	call EnableTrigger(gg_trg_Ancient_Help_1)
endfunction

function InitTrig_SpiritBreaker_Load takes nothing returns nothing
	set gg_trg_SpiritBreaker_Load_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_SpiritBreaker_Load_1, function Trig_SpiritBreaker_Load_Actions)
endfunction

function Trig_Dash_Dest_Actions takes nothing returns nothing
	call KillDestructable(GetEnumDestructable())
endfunction

function Trig_Dash_Move_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local group gdamage = LoadGroupHandle(udg_hash_1, h_0, 2)
	local real damage = LoadReal(udg_hash_1, h_0, 3)
	local integer lvl = LoadInteger(udg_hash_1, h_0, 4)
	local integer wait = LoadInteger(udg_hash_1, h_0, 5)
	local real face = LoadReal(udg_hash_1, h_0, 6)
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local player p = GetOwningPlayer(caster_0)
	local group g = CreateGroup()
	local unit Picked
	local real angle
	local real angle2
	local unit dammi
	local boolean alife = true
	local rect r = Rect(x_0 - 100., y_0 - 100., x_0 + 100., y_0 + 100.)
	call EnumDestructablesInRect(r_0, null, function Trig_Dash_Dest_Actions)
	if GetUnitState(caster_0, UNIT_STATE_LIFE_1) < .405 then
		set alife_0 = false
	endif
	if wait_0 > 0 and alife_0 then
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 5, wait_0)
		call SetUnitFacing(caster_0, face_0)
		if wait_0 - (wait_0 / 5) * 5 == 0 then
			call SetUnitAnimationByIndex(caster_0, 6)
		endif
		call GroupEnumUnitsInRange(g_0, x_0, y_0, 125., null)
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if IsUnitEnemy(Picked_0, p_0) and IsUnitInGroup(Picked_0, gdamage_0) == false and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call GroupAddUnit(gdamage_0, Picked_0)
				call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", Picked_0, "chest"))
				call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPeasant.mdl", Picked_0, "origin"))
				call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl", Picked_0, "origin"))
				set dammi_0 = CreateUnit(p_0, 'h00U', x_0, y_0, .0)
				call UnitApplyTimedLife(dammi_0, 'BTLF', .5)
				call UnitAddAbility(dammi_0, 'A0P1')
				call SetUnitAbilityLevel(dammi_0, 'A0P1', lvl_0)
				call IssueTargetOrderById(dammi_0, $D006B, Picked_0)
				call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
				set dammi_0 = null
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		call SaveGroupHandle(udg_hash_1, h_0, 2, gdamage_0)
	else
		call SetUnitPathing(caster_0, true)
		call SetUnitTimeScale(caster_0, 1.)
		call SetUnitAnimation(caster_0, "stand")
		call GroupClear(gdamage_0)
		call DestroyGroup(gdamage_0)
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set caster_0 = null
	set gdamage_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set p_0 = null
	set Picked_0 = null
	set dammi_0 = null
	call RemoveRect(r_0)
	set r_0 = null
endfunction

function Trig_Dash_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local unit target = GetSpellTargetUnit()
	local real angle
	local group gdamage = CreateGroup()
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0P0')
	local real damage = (10. + (30. * lvl_0)) + (GetHeroAgi(caster_0, true) * (.3 + .5 * lvl_0))
	local location loc
	local real tx
	local real ty
	local real dist
	local real time
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	call SetUnitAnimation(caster_0, "stand")
	call SetUnitPathing(caster_0, false)
	call SetUnitAnimationByIndex(caster_0, 6)
	call SetUnitTimeScale(caster_0, 2.)
	if target_0 == null then
		set loc_0 = GetSpellTargetLoc()
		set tx_0 = GetLocationX(loc_0)
		set ty_0 = GetLocationY(loc_0)
	else
		set tx_0 = GetUnitX(target_0)
		set ty_0 = GetUnitY(target_0)
	endif
	set angle_0 = bj_RADTODEG_1 * Atan2(ty_0 - y_0, tx_0 - x_0)
	set dist_0 = SquareRoot((tx_0 - x_0) * (tx_0 - x_0) + (ty_0 - y_0) * (ty_0 - y_0))
	if target_0 == caster_0 then
		set angle_0 = GetUnitFacing(caster_0)
		set dist_0 = 900.
	endif
	set time_0 = dist_0 / 900.
	call MoveUnit(caster_0, time_0, 900., .0, angle_0, .0, true)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveGroupHandle(udg_hash_1, h_0, 2, gdamage_0)
	call SaveReal(udg_hash_1, h_0, 3, damage_0)
	call SaveInteger(udg_hash_1, h_0, 4, lvl_0)
	call SaveInteger(udg_hash_1, h_0, 5, R2I(dist_0 / 27))
	call SaveReal(udg_hash_1, h_0, 6, angle_0)
	call TimerStart(t_0, .03, true, function Trig_Dash_Move_Actions)
	set caster_0 = null
	set target_0 = null
	set gdamage_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set t_0 = null
endfunction

function Trig_Dash_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0P0'
endfunction

function InitTrig_Dash takes nothing returns nothing
	local integer index = 0
	set gg_trg_Dash_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Dash_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Dash_1, Condition(function Trig_Dash_Conditions))
	call TriggerAddAction(gg_trg_Dash_1, function Trig_Dash_Actions)
endfunction

function Trig_Dash_Remove_Damge_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local integer alldamage = LoadInteger(udg_hash_1, h_0, 2)
	local effect ef = LoadEffectHandle(udg_hash_1, h_0, 3)
	call SetAttackAbilityLevel(caster_0, -alldamage_0)
	call DestroyEffect(ef_0)
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set ef_0 = null
	set t_0 = null
	set caster_0 = null
endfunction

function Trig_Dagger_Throw_Dest_Actions takes nothing returns nothing
	call KillDestructable(GetEnumDestructable())
endfunction

function Trig_Dagger_Throw_Move_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local group gdamage = LoadGroupHandle(udg_hash_1, h_0, 2)
	local real damage = LoadReal(udg_hash_1, h_0, 3)
	local integer adddamage = LoadInteger(udg_hash_1, h_0, 4)
	local integer wait = LoadInteger(udg_hash_1, h_0, 5)
	local real angle = LoadReal(udg_hash_1, h_0, 6)
	local unit dagger = LoadUnitHandle(udg_hash_1, h_0, 7)
	local boolean tuda = LoadBoolean(udg_hash_1, h_0, 8)
	local integer alldamage = LoadInteger(udg_hash_1, h_0, 9)
	local real x = GetUnitX(dagger_0)
	local real y = GetUnitY(dagger_0)
	local player p = GetOwningPlayer(caster_0)
	local group g = CreateGroup()
	local unit Picked
	local boolean alife = true
	local real dist
	local boolean dest = false
	local rect r = Rect(x_0 - 100., y_0 - 100., x_0 + 100., y_0 + 100.)
	local timer t2
	local integer h2
	call EnumDestructablesInRect(r_0, null, function Trig_Dagger_Throw_Dest_Actions)
	if (wait_0 > 0) and tuda_0 then
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 5, wait_0)
		call SetUnitPosition(dagger_0, x_0 + 24. * Cos((angle_0) * bj_DEGTORAD_1), y_0 + 24. * Sin((angle_0) * bj_DEGTORAD_1))
	endif
	if wait_0 == 0 then
		set tuda_0 = false
		call SaveBoolean(udg_hash_1, h_0, 8, tuda_0)
	endif
	if tuda_0 == false then
		set angle_0 = bj_RADTODEG_1 * Atan2((GetUnitY(caster_0) - y_0), (GetUnitX(caster_0) - x_0))
		set dist_0 = SquareRoot((GetUnitX(caster_0) - x_0) * (GetUnitX(caster_0) - x_0) + (GetUnitY(caster_0) - y_0) * (GetUnitY(caster_0) - y_0))
		call SetUnitPosition(dagger_0, x_0 + 24. * Cos((angle_0) * bj_DEGTORAD_1), y_0 + 24. * Sin((angle_0) * bj_DEGTORAD_1))
		if dist_0 < 50. then
			set dest_0 = true
		endif
	endif
	call GroupEnumUnitsInRange(g_0, x_0, y_0, 125., null)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if IsUnitEnemy(Picked_0, p_0) and IsUnitInGroup(Picked_0, gdamage_0) == false and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
			call GroupAddUnit(gdamage_0, Picked_0)
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl", Picked_0, "chest"))
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl", Picked_0, "origin"))
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl", Picked_0, "head"))
			call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPeasant.mdl", Picked_0, "origin"))
			call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl", Picked_0, "origin"))
			call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", Picked_0, "chest"))
			set alldamage_0 = alldamage_0 + adddamage_0
			call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	call SaveInteger(udg_hash_1, h_0, 9, alldamage_0)
	call SaveGroupHandle(udg_hash_1, h_0, 2, gdamage_0)
	if dest_0 then
		call GroupClear(gdamage_0)
		call DestroyGroup(gdamage_0)
		call RemoveUnit(dagger_0)
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
		if alldamage_0 > 0 then
			call SetAttackAbilityLevel(caster_0, alldamage_0)
			set t2_0 = CreateTimer()
			set h2_0 = GetHandleId(t2_0)
			call SaveUnitHandle(udg_hash_1, h2_0, 1, caster_0)
			call SaveInteger(udg_hash_1, h2_0, 2, alldamage_0)
			call SaveEffectHandle(udg_hash_1, h2_0, 3, AddSpecialEffectTarget("Effects\\Prismatic Missile Fixed.mdx", caster_0, "weapon"))
			call TimerStart(t2_0, 6., false, function Trig_Dash_Remove_Damge_Actions)
			set t2_0 = null
		endif
	endif
	set t_0 = null
	set caster_0 = null
	set gdamage_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set p_0 = null
	set Picked_0 = null
	call RemoveRect(r_0)
	set r_0 = null
	set dagger_0 = null
endfunction

function Trig_Dagger_Throw_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local unit target = GetSpellTargetUnit()
	local real angle
	local group gdamage = CreateGroup()
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0P2')
	local real damage = (40. * lvl_0)
	local integer adddamage = 2 + lvl_0
	local integer alldamage = 0
	local location loc
	local real tx
	local real ty
	local real dist
	local unit dagger
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	if target_0 == null then
		set loc_0 = GetSpellTargetLoc()
		set tx_0 = GetLocationX(loc_0)
		set ty_0 = GetLocationY(loc_0)
	else
		set tx_0 = GetUnitX(target_0)
		set ty_0 = GetUnitY(target_0)
	endif
	set angle_0 = bj_RADTODEG_1 * Atan2(ty_0 - y_0, tx_0 - x_0)
	set dist_0 = SquareRoot((tx_0 - x_0) * (tx_0 - x_0) + (ty_0 - y_0) * (ty_0 - y_0))
	if target_0 == caster_0 then
		set angle_0 = GetUnitFacing(caster_0)
		set dist_0 = 900.
	endif
	set dagger_0 = CreateUnit(GetOwningPlayer(caster_0), 'h00N', x_0, y_0, angle_0)
	call SetUnitX(dagger_0, x_0 + 20. * Cos((angle_0) * bj_DEGTORAD_1))
	call SetUnitY(dagger_0, y_0 + 20. * Sin((angle_0) * bj_DEGTORAD_1))
	call SetUnitTimeScale(dagger_0, 4.)
	call SetUnitScale(dagger_0, 1.5, 1.5, 1.5)
	call SetUnitPathing(dagger_0, false)
	call SetUnitFlyHeight(dagger_0, 50., .0)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveGroupHandle(udg_hash_1, h_0, 2, gdamage_0)
	call SaveReal(udg_hash_1, h_0, 3, damage_0)
	call SaveInteger(udg_hash_1, h_0, 4, adddamage_0)
	call SaveInteger(udg_hash_1, h_0, 5, R2I(dist_0 / 24))
	call SaveReal(udg_hash_1, h_0, 6, angle_0)
	call SaveUnitHandle(udg_hash_1, h_0, 7, dagger_0)
	call SaveBoolean(udg_hash_1, h_0, 8, true)
	call SaveInteger(udg_hash_1, h_0, 9, alldamage_0)
	call TimerStart(t_0, .03, true, function Trig_Dagger_Throw_Move_Actions)
	set caster_0 = null
	set target_0 = null
	set gdamage_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set t_0 = null
endfunction

function Trig_Dagger_Throw_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0P2'
endfunction

function InitTrig_Dagger_Throw takes nothing returns nothing
	local integer index = 0
	set gg_trg_Dagger_Throw_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Dagger_Throw_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Dagger_Throw_1, Condition(function Trig_Dagger_Throw_Conditions))
	call TriggerAddAction(gg_trg_Dagger_Throw_1, function Trig_Dagger_Throw_Actions)
endfunction

function Trig_Kara_Justice_perodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local group gdamage = LoadGroupHandle(udg_hash_1, h_0, 2)
	local group gdamage2 = LoadGroupHandle(udg_hash_1, h_0, 3)
	local real damage = LoadReal(udg_hash_1, h_0, 4)
	local real angle = LoadReal(udg_hash_1, h_0, 5)
	local player p = GetOwningPlayer(caster_0)
	local unit Picked
	local unit target
	call RandomUnitFromGroup(1, gdamage_0)
	set Picked_0 = FirstOfGroup(udg_GroupRandomUnitFromGroup_1)
	if Picked_0 != null then
		call GroupRemoveUnit(gdamage2_0, Picked_0)
	endif
	set gdamage_0 = CreateGroup()
	call GroupToGroup(gdamage2_0, gdamage_0)
	call SaveGroupHandle(udg_hash_1, h_0, 2, gdamage_0)
	call SaveGroupHandle(udg_hash_1, h_0, 3, gdamage2_0)
	if Picked_0 != null then
		call PlaySoundBJ(gg_snd_WardenAttackEffort1_1)
		call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl", Picked_0, "chest"))
		call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl", Picked_0, "origin"))
		call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl", Picked_0, "head"))
		call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl", Picked_0, "origin"))
		call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", Picked_0, "chest"))
		call SetUnitPosition(caster_0, GetUnitX(Picked_0) - 50. * Cos(angle_0 * bj_DEGTORAD_1), GetUnitY(Picked_0) - 50. * Sin(angle_0 * bj_DEGTORAD_1))
		call SetUnitAnimation(caster_0, "stop")
		call SetUnitAnimation(caster_0, "attack")
		if GetRandomInt(1, 'd') <= ($A + 5 * GetUnitAbilityLevel(caster_0, 'A0P3')) and GetUnitAbilityLevel(caster_0, 'A0P3') > 0 then
			call UnitDamageTarget(caster_0, Picked_0, 2 * damage_0, false, false, ATTACK_TYPE_MELEE_1, DAMAGE_TYPE_NORMAL_1, WEAPON_TYPE_WHOKNOWS_1)
			call CreateTexttag(udg_ColorString_1[1] + I2S(R2I(2 * damage_0)) + "!|r", .022, $FF, GetUnitX(Picked_0) - 18., GetUnitY(Picked_0) + 15., .0, .0, .035, 3.5)
		else
			call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_MELEE_1, DAMAGE_TYPE_NORMAL_1, WEAPON_TYPE_WHOKNOWS_1)
		endif
	else
		call SetUnitVertexColor(caster_0, $FF, $FF, $FF, $FF)
		call SetUnitTimeScale(caster_0, 1.)
		call SetUnitInvulnerable(caster_0, false)
		call SetUnitPosition(caster_0, LoadReal(udg_hash_1, h_0, 6), LoadReal(udg_hash_1, h_0, 7))
		call GroupClear(gdamage_0)
		call DestroyGroup(gdamage_0)
		set gdamage_0 = null
		call GroupClear(gdamage2_0)
		call DestroyGroup(gdamage2_0)
		set gdamage2_0 = null
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set caster_0 = null
	set p_0 = null
	set gdamage_0 = null
	set gdamage2_0 = null
	set Picked_0 = null
	set target_0 = null
endfunction

function Trig_Kara_Justice_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local player p = GetOwningPlayer(caster_0)
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0P5')
	local location loc = GetSpellTargetLoc()
	local real x = GetLocationX(loc_0)
	local real y = GetLocationY(loc_0)
	local real damage = 75 * lvl_0 + (.25 + (.75 * lvl_0)) * GetHeroAgi(caster_0, true)
	local group g = CreateGroup()
	local group gdamage = CreateGroup()
	local group gdamage2 = CreateGroup()
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local unit Picked
	local real angle = bj_RADTODEG_1 * Atan2(y_0 - GetUnitY(caster_0), x_0 - GetUnitX(caster_0))
	call GroupEnumUnitsInRange(g_0, x_0, y_0, 500., null)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if IsUnitEnemy(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
			call GroupAddUnit(gdamage_0, Picked_0)
			call GroupAddUnit(gdamage2_0, Picked_0)
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveGroupHandle(udg_hash_1, h_0, 2, gdamage_0)
	call SaveGroupHandle(udg_hash_1, h_0, 3, gdamage2_0)
	call SaveReal(udg_hash_1, h_0, 4, damage_0)
	call SaveReal(udg_hash_1, h_0, 5, angle_0)
	call SaveReal(udg_hash_1, h_0, 6, GetUnitX(caster_0))
	call SaveReal(udg_hash_1, h_0, 7, GetUnitY(caster_0))
	call SetUnitVertexColor(caster_0, $FF, $FF, $FF, 'd')
	call SetUnitTimeScale(caster_0, 4.)
	call SetUnitInvulnerable(caster_0, true)
	call UnitPeriodicPostionMove(caster_0, .03, .2 * CountUnitsInGroup(gdamage_0))
	call TimerStart(t_0, .2, true, function Trig_Kara_Justice_perodic_Actions)
	set caster_0 = null
	set p_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set t_0 = null
	set g_0 = null
	set gdamage_0 = null
	set gdamage2_0 = null
endfunction

function Trig_Kara_Justice_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0P5'
endfunction

function InitTrig_Kara_Justice takes nothing returns nothing
	local integer index = 0
	set gg_trg_Kara_Justice_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Kara_Justice_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Kara_Justice_1, Condition(function Trig_Kara_Justice_Conditions))
	call TriggerAddAction(gg_trg_Kara_Justice_1, function Trig_Kara_Justice_Actions)
endfunction

function Trig_Warden_Load_Actions takes nothing returns nothing
	call AbilityPreload('A0P0', 6)
	call AbilityPreload('A0P2', 6)
	call AbilityPreload('A0P3', 6)
	call AbilityPreload('A0P5', 3)
	call AbilityPreload('A0P1', 6)
	call AbilityPreload('B051', 1)
	call EffectPreload("Effects\\CosmicTouch.MDX")
	call EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPeasant.mdl")
	call EffectPreload("Effects\\Prismatic Missile Fixed.mdx")
	call EffectPreload("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl")
	call EffectPreload("Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl")
	call EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl")
	call EnableTrigger(gg_trg_Dash_1)
	call EnableTrigger(gg_trg_Dagger_Throw_1)
	call EnableTrigger(gg_trg_Kara_Justice_1)
endfunction

function InitTrig_Warden_Load takes nothing returns nothing
	set gg_trg_Warden_Load_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Warden_Load_1, function Trig_SpiritBreaker_Load_Actions)
endfunction

function Trig_Strength_Fist_Move_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 7)
	local player p = GetOwningPlayer(caster_0)
	local real damage = LoadReal(udg_hash_1, h_0, 1)
	local integer lvl = LoadInteger(udg_hash_1, h_0, 2)
	local unit orb = LoadUnitHandle(udg_hash_1, h_0, 3)
	local real xt = LoadReal(udg_hash_1, h_0, 4)
	local real yt = LoadReal(udg_hash_1, h_0, 5)
	local group g = CreateGroup()
	local unit Picked
	local unit dammi
	call GroupEnumUnitsInRange(g_0, xt_0, yt_0, 250., null)
	call DestroyEffect(AddSpecialEffect("Effects\\RedAftershock.mdx", xt_0, yt_0))
	call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", xt_0, yt_0))
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if IsUnitEnemy(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
			set dammi_0 = CreateUnit(p_0, 'h00U', xt_0, yt_0, .0)
			call UnitApplyTimedLife(dammi_0, 'BTLF', .5)
			call UnitAddAbility(dammi_0, 'A0P8')
			call SetUnitAbilityLevel(dammi_0, 'A0P8', lvl_0)
			call IssueTargetOrderById(dammi_0, $D006B, Picked_0)
			set dammi_0 = null
			call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set Picked_0 = null
	call KillUnit(orb_0)
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	call KillUnit(orb_0)
	set p_0 = null
	call DestroyTimer(t_0)
	set caster_0 = null
	set orb_0 = null
	call FlushChildHashtable(udg_hash_1, h_0)
	set t_0 = null
endfunction

function Trig_Strength_Fist_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local location loc = GetSpellTargetLoc()
	local real xt = GetLocationX(loc_0)
	local real yt = GetLocationY(loc_0)
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0P7')
	local real damage = 5. + (35. * lvl_0) + (GetHeroStr(caster_0, true) * .5 * lvl_0)
	local player p = GetOwningPlayer(caster_0)
	local unit orb
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	set orb_0 = CreateUnit(p_0, 'h00K', xt_0, yt_0, 270.)
	call UnitAddAbility(orb_0, 'Amrf')
	call UnitRemoveAbility(orb_0, 'Amrf')
	call SetUnitFlyHeight(orb_0, 800., .0)
	call SetUnitFlyHeight(orb_0, 25., 1550.)
	call SaveReal(udg_hash_1, h_0, 1, damage_0)
	call SaveInteger(udg_hash_1, h_0, 2, lvl_0)
	call SaveUnitHandle(udg_hash_1, h_0, 3, orb_0)
	call SaveReal(udg_hash_1, h_0, 4, xt_0)
	call SaveReal(udg_hash_1, h_0, 5, yt_0)
	call SaveUnitHandle(udg_hash_1, h_0, 7, caster_0)
	call TimerStart(t_0, .5, false, function Trig_Strength_Fist_Move_Actions)
	set caster_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set t_0 = null
	set p_0 = null
	set orb_0 = null
endfunction

function Trig_Strength_Fist_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0P7'
endfunction

function InitTrig_Strength_Fist takes nothing returns nothing
	local integer index = 0
	set gg_trg_Strength_Fist_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Strength_Fist_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Strength_Fist_1, Condition(function Trig_Strength_Fist_Conditions))
	call TriggerAddAction(gg_trg_Strength_Fist_1, function Trig_Strength_Fist_Actions)
endfunction

function Trig_Fighting_Impact_14sec_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit target = LoadUnitHandle(udg_hash_1, h_0, 1)
	local integer as = LoadInteger(udg_hash_1, h_0, 2)
	local integer addarmor = LoadInteger(udg_hash_1, h_0, 3)
	local effect ef
	local group g = CreateGroup()
	local unit Picked
	local player p = GetOwningPlayer(target_0)
	local real damage = LoadReal(udg_hash_1, GetHandleId(target_0), $96)
	local unit caster = LoadUnitHandle(udg_hash_1, GetHandleId(target_0), $97)
	call DestroyEffect(AddSpecialEffect("Effects\\LightNova.mdl", GetUnitX(target_0), GetUnitY(target_0)))
	call DestroyEffect(AddSpecialEffectTarget("Effects\\DivineRage.mdx", target_0, "origin"))
	call GroupEnumUnitsInRange(g_0, GetUnitX(target_0), GetUnitY(target_0), 500., null)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if IsUnitEnemy(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
			call DestroyEffect(AddSpecialEffectTarget("Effects\\DivineRage.mdx", Picked_0, "origin"))
			call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	call SetAttackSpeedAbilityLevel(target_0, -as_0)
	set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 4)
	call DestroyEffect(ef_0)
	set ef_0 = null
	set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 5)
	call DestroyEffect(ef_0)
	set ef_0 = null
	set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 6)
	call DestroyEffect(ef_0)
	set ef_0 = null
	call SaveReal(udg_hash_1, GetHandleId(target_0), $93, .0)
	call SaveInteger(udg_hash_1, GetHandleId(target_0), $94, 0)
	call SaveTimerHandle(udg_hash_1, GetHandleId(target_0), $95, null)
	call FlushChildHashtable(udg_hash_1, h_0)
	call DestroyTimer(t_0)
	set t_0 = null
	set ef_0 = null
	call DestroyGroup(g_0)
	set g_0 = null
	set Picked_0 = null
	set p_0 = null
	set caster_0 = null
endfunction

function Trig_Fighting_Impact_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0P6')
	local unit target = GetSpellTargetUnit()
	local integer as = 20 * lvl_0 + $A
	local real shield = 75. * lvl_0
	local real damage = 40 * lvl_0
	local effect ef
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local timer t2
	local integer h2
	local string smainstat = LoadStr(udg_hash_1, GetUnitTypeId(target_0), 70)
	if LoadTimerHandle(udg_hash_1, GetHandleId(target_0), $95) != null then
		set t2_0 = LoadTimerHandle(udg_hash_1, GetHandleId(target_0), $95)
		set h2_0 = GetHandleId(t2_0)
		set ef_0 = LoadEffectHandle(udg_hash_1, h2_0, 4)
		call DestroyEffect(ef_0)
		set ef_0 = null
		set ef_0 = LoadEffectHandle(udg_hash_1, h2_0, 5)
		call DestroyEffect(ef_0)
		set ef_0 = null
		set ef_0 = LoadEffectHandle(udg_hash_1, h2_0, 6)
		call DestroyEffect(ef_0)
		set ef_0 = null
		call SetAttackSpeedAbilityLevel(target_0, -LoadInteger(udg_hash_1, GetHandleId(target_0), $94))
		call FlushChildHashtable(udg_hash_1, h2_0)
		call DestroyTimer(t2_0)
		set t2_0 = null
	endif
	if smainstat_0 == "str" then
		set shield_0 = shield_0 + (.2 + .3 * lvl_0 * GetHeroStr(target_0, true))
	endif
	if smainstat_0 == "agi" then
		set shield_0 = shield_0 + (.2 + .3 * lvl_0 * GetHeroAgi(target_0, true))
	endif
	if smainstat_0 == "int" then
		set shield_0 = shield_0 + (.2 + .3 * lvl_0 * GetHeroInt(target_0, true))
	endif
	set ef_0 = AddSpecialEffectTarget("Effects\\LifeHigh.mdx", target_0, "weapon")
	call SaveEffectHandle(udg_hash_1, h_0, 5, ef_0)
	set ef_0 = null
	set ef_0 = AddSpecialEffectTarget("Abilities\\Spells\\Human\\DivineShield\\DivineShieldTarget.mdl", target_0, "origin")
	call SaveEffectHandle(udg_hash_1, h_0, 6, ef_0)
	set ef_0 = null
	call SetAttackSpeedAbilityLevel(target_0, as_0)
	call SaveReal(udg_hash_1, GetHandleId(target_0), $93, shield_0)
	call SaveInteger(udg_hash_1, GetHandleId(target_0), $94, as_0)
	call SaveTimerHandle(udg_hash_1, GetHandleId(target_0), $95, t_0)
	call SaveReal(udg_hash_1, GetHandleId(target_0), $96, damage_0)
	call SaveUnitHandle(udg_hash_1, GetHandleId(target_0), $97, caster_0)
	call SaveUnitHandle(udg_hash_1, h_0, 1, target_0)
	call SaveInteger(udg_hash_1, h_0, 2, as_0)
	call TimerStart(t_0, 14., false, function Trig_Fighting_Impact_14sec_Actions)
	set caster_0 = null
	set ef_0 = null
	set t_0 = null
endfunction

function Trig_Fighting_Impact_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0P6'
endfunction

function InitTrig_Fighting_Impact takes nothing returns nothing
	local integer index = 0
	set gg_trg_Fighting_Impact_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Fighting_Impact_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Fighting_Impact_1, Condition(function Trig_Fighting_Impact_Conditions))
	call TriggerAddAction(gg_trg_Fighting_Impact_1, function Trig_Fighting_Impact_Actions)
endfunction

function Trig_Learn_Marshal_Armor_Actions_Timer takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit hero = LoadUnitHandle(udg_hash_1, h_0, 1)
	local texttag txt = LoadTextTagHandle(udg_hash_1, h_0, 2)
	local real x = GetUnitX(hero_0)
	local real y = GetUnitY(hero_0)
	local boolean alife = LoadBoolean(udg_hash_1, h_0, 3)
	local integer stack
	if (GetUnitState(hero_0, UNIT_STATE_LIFE_1) < .405 and alife_0) then
		set alife_0 = false
		call SaveBoolean(udg_hash_1, h_0, 3, alife_0)
		call SetTextTagVisibility(txt_0, false)
	endif
	if (GetUnitState(hero_0, UNIT_STATE_LIFE_1) > .405 and alife_0 == false) then
		set alife_0 = true
		call SaveBoolean(udg_hash_1, h_0, 3, alife_0)
		call SetTextTagVisibility(txt_0, true)
	endif
	if (GetUnitState(hero_0, UNIT_STATE_LIFE_1) > .405 and alife_0) then
		set stack_0 = LoadInteger(udg_hash_1, GetHandleId(hero_0), $99)
		call SetTextTagText(txt_0, "|cFFDCDC32" + I2S(stack_0) + "|r|cFF969696/|r|cFFDCDC32" + I2S(5 * GetUnitAbilityLevel(hero_0, 'A0P9')) + "|r", .027)
		call SetTextTagPos(txt_0, GetUnitX(hero_0) - 40., GetUnitY(hero_0) + 50., .0)
	endif
	set t_0 = null
	set hero_0 = null
	set txt_0 = null
endfunction

function Trig_Learn_Marshal_Armor_Actions takes nothing returns nothing
	local integer lvl = GetUnitAbilityLevel(GetLearningUnit(), 'A0P9')
	local timer t
	local integer h
	local texttag txt
	local unit hero = GetLearningUnit()
	local integer stack = LoadInteger(udg_hash_1, GetHandleId(hero_0), $99)
	if lvl_0 == 1 then
		set t_0 = CreateTimer()
		set h_0 = GetHandleId(t_0)
		set txt_0 = CreateTextTag()
		call SetTextTagText(txt_0, "|cFFDCDC32" + I2S(stack_0) + "|r|cFF969696/|r|cFFDCDC32" + I2S(5 * GetUnitAbilityLevel(hero_0, 'A0P9')) + "|r", .033)
		call SetTextTagColor(txt_0, $FF, $FF, $FF, $FF)
		call SetTextTagPos(txt_0, GetUnitX(hero_0) - 40., GetUnitY(hero_0) + 50., .0)
		call SetTextTagPermanent(txt_0, true)
		call SaveUnitHandle(udg_hash_1, h_0, 1, hero_0)
		call SaveTextTagHandle(udg_hash_1, h_0, 2, txt_0)
		call SaveBoolean(udg_hash_1, h_0, 3, true)
		call TimerStart(t_0, .03, true, function Trig_Learn_Marshal_Armor_Actions_Timer)
		set t_0 = null
		set hero_0 = null
		set txt_0 = null
	endif
	set hero_0 = null
endfunction

function Trig_Learn_Marshal_Armor_Conditions takes nothing returns boolean
	return GetUnitTypeId(GetLearningUnit()) != 'h00U' and GetLearnedSkill() == 'A0P9'
endfunction

function InitTrig_Learn_Marshal_Armor takes nothing returns nothing
	local integer index = 0
	set gg_trg_Learn_Marshal_Armor_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Marshal_Armor_1, Player(index_0), EVENT_PLAYER_HERO_SKILL_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Learn_Marshal_Armor_1, Condition(function Trig_Learn_Marshal_Armor_Conditions))
	call TriggerAddAction(gg_trg_Learn_Marshal_Armor_1, function Trig_Learn_Marshal_Armor_Actions)
endfunction

function Trig_Illusive_Army_Periodic_Damage_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit knight = LoadUnitHandle(udg_hash_1, h_0, 1)
	local real wait = LoadReal(udg_hash_1, h_0, 2)
	local real damage
	local real stuntime
	local unit caster
	local group gdamage
	local player p
	local group g
	local unit Picked
	set wait_0 = wait_0 - .04
	call SaveReal(udg_hash_1, h_0, 2, wait_0)
	if wait_0 > 0 then
		set damage_0 = LoadReal(udg_hash_1, h_0, 3)
		set stuntime_0 = LoadReal(udg_hash_1, h_0, 4)
		set caster_0 = LoadUnitHandle(udg_hash_1, h_0, 5)
		set g_0 = CreateGroup()
		set p_0 = GetOwningPlayer(caster_0)
		set gdamage_0 = LoadGroupHandle(udg_hash_1, h_0, 7)
		call GroupEnumUnitsInRange(g_0, GetUnitX(knight_0), GetUnitY(knight_0), 115., null)
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if IsUnitEnemy(Picked_0, p_0) and IsUnitInGroup(Picked_0, gdamage_0) == false and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call GroupAddUnit(gdamage_0, Picked_0)
				call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl", Picked_0, "chest"))
				call DestroyEffect(AddSpecialEffectTarget("Effects\\DivineRage.mdx", Picked_0, "origin"))
				call StunUnitTimed(Picked_0, stuntime_0)
				call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		call SaveGroupHandle(udg_hash_1, h_0, 7, gdamage_0)
		set caster_0 = null
		call DestroyGroup(g_0)
		set g_0 = null
		set p_0 = null
		set gdamage_0 = null
		set Picked_0 = null
	else
		call DestroyEffect(AddSpecialEffect("Effects\\DivineRage.mdx", GetUnitX(knight_0), GetUnitY(knight_0)))
		call RemoveUnit(knight_0)
		set gdamage_0 = LoadGroupHandle(udg_hash_1, h_0, 7)
		call GroupClear(gdamage_0)
		call DestroyGroup(gdamage_0)
		set gdamage_0 = null
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set knight_0 = null
	set t_0 = null
endfunction

function Trig_Illusive_Army_Periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local integer wait = LoadInteger(udg_hash_1, h_0, 2)
	local real damage
	local real x
	local real y
	local real angle
	local real stuntime
	local player p
	local unit knight
	local real xnew
	local real ynew
	local real dist
	local timer t2
	local integer h2
	local integer perekluchatel
	local integer order = GetUnitCurrentOrder(caster_0)
	local integer orderId
	set orderId_0 = $D0278
	if (orderId_0 != 0) then
	else
		set orderId_0 = UnitId("channel")
		if (orderId_0 != 0) then
		endif
	endif
	if wait_0 > 0 and order_0 == orderId_0 then
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 2, wait_0)
		set damage_0 = LoadReal(udg_hash_1, h_0, 3)
		set x_0 = LoadReal(udg_hash_1, h_0, 4)
		set y_0 = LoadReal(udg_hash_1, h_0, 5)
		set angle_0 = LoadReal(udg_hash_1, h_0, 8)
		set stuntime_0 = LoadReal(udg_hash_1, h_0, 9)
		set p_0 = GetOwningPlayer(caster_0)
		set perekluchatel_0 = LoadInteger(udg_hash_1, h_0, $A)
		if perekluchatel_0 > 0 then
			set perekluchatel_0 = -1
			call SaveInteger(udg_hash_1, h_0, $A, perekluchatel_0)
		else
			set perekluchatel_0 = 1
			call SaveInteger(udg_hash_1, h_0, $A, perekluchatel_0)
		endif
		set dist_0 = perekluchatel_0 * 150. + GetRandomReal(-200., 200.)
		set xnew_0 = x_0 - 200. * Cos(angle_0 * bj_DEGTORAD_1)
		set ynew_0 = y_0 - 200. * Sin(angle_0 * bj_DEGTORAD_1)
		set xnew_0 = xnew_0 + dist_0 * Cos((angle_0 + 90.) * bj_DEGTORAD_1)
		set ynew_0 = ynew_0 + dist_0 * Sin((angle_0 + 90.) * bj_DEGTORAD_1)
		call DestroyEffect(AddSpecialEffect("Effects\\DivineRage.mdx", xnew_0, ynew_0))
		set knight_0 = CreateUnit(p_0, 'h00P', xnew_0, ynew_0, angle_0)
		call SetUnitVertexColor(knight_0, $FF, $FF, $E1, 75)
		call SetUnitColor(knight_0, PLAYER_COLOR_YELLOW_1)
		call SetUnitAnimationByIndex(knight_0, 0)
		call MoveUnit(knight_0, 2., 450., .0, angle_0, .0, true)
		set t2_0 = CreateTimer()
		set h2_0 = GetHandleId(t2_0)
		call SaveUnitHandle(udg_hash_1, h2_0, 1, knight_0)
		call SaveReal(udg_hash_1, h2_0, 2, 2.01)
		call SaveReal(udg_hash_1, h2_0, 3, damage_0)
		call SaveReal(udg_hash_1, h2_0, 4, stuntime_0)
		call SaveUnitHandle(udg_hash_1, h2_0, 5, caster_0)
		call SaveGroupHandle(udg_hash_1, h2_0, 7, CreateGroup())
		call TimerStart(t2_0, .04, true, function Trig_Illusive_Army_Periodic_Damage_Actions)
	else
		call RemoveUnit(LoadUnitHandle(udg_hash_1, GetHandleId(caster_0), 'u'))
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set caster_0 = null
endfunction

function Trig_Illusive_Army_Actions takes nothing returns nothing
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = GetSpellAbilityUnit()
	local player p = GetOwningPlayer(caster_0)
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0PA')
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local real tx
	local real ty
	local real stuntime = 1. + .5 * lvl_0
	local real damage = 75. * lvl_0
	local integer count = 5 + 5 * lvl_0
	local unit target = GetSpellTargetUnit()
	local real angle
	local location loc
	if target_0 == null then
		set loc_0 = GetSpellTargetLoc()
		set tx_0 = GetLocationX(loc_0)
		set ty_0 = GetLocationY(loc_0)
	else
		set tx_0 = GetUnitX(target_0)
		set ty_0 = GetUnitY(target_0)
	endif
	set angle_0 = bj_RADTODEG_1 * Atan2(ty_0 - y_0, tx_0 - x_0)
	call AddProgressBar(caster_0, 195. + (20. * lvl_0), (1. + .15 * lvl_0), (count_0 * .4), false, true, 'u', $FF, $E1, 80)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveInteger(udg_hash_1, h_0, 2, count_0)
	call SaveReal(udg_hash_1, h_0, 3, damage_0)
	call SaveReal(udg_hash_1, h_0, 4, x_0)
	call SaveReal(udg_hash_1, h_0, 5, y_0)
	call SaveReal(udg_hash_1, h_0, 8, angle_0)
	call SaveReal(udg_hash_1, h_0, 9, stuntime_0)
	call SaveInteger(udg_hash_1, h_0, $A, 1)
	call TimerStart(t_0, .4, true, function Trig_Illusive_Army_Periodic_Actions)
	set caster_0 = null
	set p_0 = null
	set t_0 = null
endfunction

function Trig_Illusive_Army_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0PA'
endfunction

function InitTrig_Illusive_Army takes nothing returns nothing
	local integer index = 0
	set gg_trg_Illusive_Army_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Illusive_Army_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Illusive_Army_1, Condition(function Trig_Illusive_Army_Conditions))
	call TriggerAddAction(gg_trg_Illusive_Army_1, function Trig_Illusive_Army_Actions)
endfunction

function Trig_Marshal_Load_Actions takes nothing returns nothing
	call AbilityPreload('A0P7', 6)
	call AbilityPreload('A0P6', 6)
	call AbilityPreload('A0P9', 6)
	call AbilityPreload('A0PA', 3)
	call UnitPreload('h00K')
	call AbilityPreload('A0P8', 6)
	call AbilityPreload('B052', 1)
	call EffectPreload("Effects\\RedAftershock.mdx")
	call EffectPreload("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl")
	call EffectPreload("Effects\\LightNova.mdl")
	call EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodKnight.mdl")
	call EffectPreload("Effects\\DivineRage.mdx")
	call EffectPreload("Effects\\LifeHigh.mdx")
	call EffectPreload("Abilities\\Spells\\Human\\DivineShield\\DivineShieldTarget.mdl")
	call EffectPreload("Abilities\\Weapons\\SentinelMissile\\SentinelMissile.mdl")
	call EnableTrigger(gg_trg_Strength_Fist_1)
	call EnableTrigger(gg_trg_Fighting_Impact_1)
	call EnableTrigger(gg_trg_Learn_Marshal_Armor_1)
	call EnableTrigger(gg_trg_Illusive_Army_1)
endfunction

function InitTrig_Marshal_Load takes nothing returns nothing
	set gg_trg_Marshal_Load_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Marshal_Load_1, function Trig_Marshal_Load_Actions)
endfunction

function Trig_Remove_Lightning_From_Chain_Lightning_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit Picked = LoadUnitHandle(udg_hash_1, h_0, 1)
	local integer wait = LoadInteger(udg_hash_1, h_0, 2)
	local unit damaged = LoadUnitHandle(udg_hash_1, h_0, 3)
	local lightning l = LoadLightningHandle(udg_hash_1, h_0, 4)
	local location locr = GetUnitLoc(damaged_0)
	local location locd = GetUnitLoc(Picked_0)
	set wait_0 = wait_0 - 1
	call SaveInteger(udg_hash_1, h_0, 2, wait_0)
	if LoadInteger(udg_hash_1, h_0, 5) == $E4 then
		call MoveLightningEx(l_0, true, GetUnitX(damaged_0) + 75. * Cos(LoadReal(udg_hash_1, h_0, 6) * bj_DEGTORAD_1), GetUnitY(damaged_0) + 75. * Sin(LoadReal(udg_hash_1, h_0, 6) * bj_DEGTORAD_1), GetUnitFlyHeight(damaged_0) + 100. + GetLocationZ(locr_0), GetUnitX(Picked_0), GetUnitY(Picked_0), GetUnitFlyHeight(Picked_0) + 25. + GetLocationZ(locd_0))
	else
		call MoveLightningEx(l_0, true, GetUnitX(damaged_0), GetUnitY(damaged_0), GetUnitFlyHeight(damaged_0) + 25. + GetLocationZ(locr_0), GetUnitX(Picked_0), GetUnitY(Picked_0), GetUnitFlyHeight(Picked_0) + 25. + GetLocationZ(locd_0))
	endif
	if wait_0 <= 0 then
		call DestroyLightning(l_0)
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set Picked_0 = null
	set damaged_0 = null
	set l_0 = null
	call RemoveLocation(locr_0)
	call RemoveLocation(locd_0)
	set locr_0 = null
	set locd_0 = null
endfunction

function Trig_Chain_Lightning_Move_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local real damage = LoadReal(udg_hash_1, h_0, 2)
	local unit target = LoadUnitHandle(udg_hash_1, h_0, 8)
	local integer count = LoadInteger(udg_hash_1, h_0, 5)
	local group gdamage = LoadGroupHandle(udg_hash_1, h_0, $E)
	local unit target2
	local player p = GetOwningPlayer(caster_0)
	local group g
	local group grup
	local unit Picked
	local timer t2
	local integer h2
	local boolean first = LoadBoolean(udg_hash_1, h_0, $F)
	local boolean destroy = false
	local location locr
	local lightning l
	local location locd
	if count_0 > 0 then
		set count_0 = count_0 - 1
		call SaveInteger(udg_hash_1, h_0, 5, count_0)
		set g_0 = CreateGroup()
		set grup_0 = CreateGroup()
		call GroupEnumUnitsInRange(g_0, GetUnitX(target_0), GetUnitY(target_0), 500., null)
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if IsUnitEnemy(Picked_0, p_0) and IsUnitInGroup(Picked_0, gdamage_0) == false and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call GroupAddUnit(grup_0, Picked_0)
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		set Picked_0 = null
		call RandomUnitFromGroup(1, grup_0)
		call GroupAddGroup(udg_GroupRandomUnitFromGroup_1, g_0)
		set target2_0 = FirstOfGroup(udg_GroupRandomUnitFromGroup_1)
		if target2_0 != null then
			call DestroyEffect(AddSpecialEffectTarget("Effects\\EMPBomb.mdx", target2_0, "chest"))
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningBolt\\LightningBoltMissile.mdl", target2_0, "chest"))
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", target2_0, "origin"))
			call UnitDamageTarget(caster_0, target2_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
			call GroupAddUnit(gdamage_0, target2_0)
			set t2_0 = CreateTimer()
			set h2_0 = GetHandleId(t2_0)
			call SaveUnitHandle(udg_hash_1, h2_0, 1, target2_0)
			call SaveInteger(udg_hash_1, h2_0, 2, $F)
			call SaveUnitHandle(udg_hash_1, h2_0, 3, target_0)
			set locr_0 = GetUnitLoc(target_0)
			set locd_0 = GetUnitLoc(target2_0)
			set l_0 = AddLightningEx("CLPB", true, GetUnitX(target_0), GetUnitY(target_0), GetUnitFlyHeight(target_0) + 25. + GetLocationZ(locr_0), GetUnitX(target2_0), GetUnitY(target2_0), GetUnitFlyHeight(target2_0) + 25. + GetLocationZ(locd_0))
			call SaveLightningHandle(udg_hash_1, h2_0, 4, l_0)
			set l_0 = null
			call RemoveLocation(locr_0)
			set locr_0 = null
			call RemoveLocation(locd_0)
			set locd_0 = null
			call TimerStart(t2_0, .04, true, function Trig_Remove_Lightning_From_Chain_Lightning_Actions)
			set t2_0 = null
			call SaveUnitHandle(udg_hash_1, h_0, 8, target2_0)
		else
			set destroy_0 = true
		endif
		call SaveGroupHandle(udg_hash_1, h_0, $E, gdamage_0)
		set target2_0 = null
		call GroupClear(g_0)
		call DestroyGroup(g_0)
		set g_0 = null
		call GroupClear(grup_0)
		call DestroyGroup(grup_0)
		set grup_0 = null
	else
		set destroy_0 = true
	endif
	if destroy_0 then
		call GroupClear(gdamage_0)
		call DestroyGroup(gdamage_0)
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set gdamage_0 = null
	set t_0 = null
	set p_0 = null
	set caster_0 = null
	set target_0 = null
endfunction

function Trig_Chain_Lightning_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local unit target = GetSpellTargetUnit()
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0PP')
	local real damage = ($A + 40 * lvl_0) + (GetHeroInt(caster_0, true) * (.3 + .2 * lvl_0))
	local integer count = 8 + (lvl_0 * 2) - 1
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local group gdamage = CreateGroup()
	local location locr
	local lightning l
	local location locd
	local timer t2
	local integer h2
	local real angle = (bj_RADTODEG_1 * Atan2(GetUnitY(target_0) - GetUnitY(caster_0), GetUnitX(target_0) - GetUnitX(caster_0)))
	call DestroyEffect(AddSpecialEffectTarget("Effects\\EMPBomb.mdx", target_0, "chest"))
	call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningBolt\\LightningBoltMissile.mdl", target_0, "chest"))
	call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", target_0, "origin"))
	call UnitDamageTarget(caster_0, target_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
	call GroupAddUnit(gdamage_0, target_0)
	set t2_0 = CreateTimer()
	set h2_0 = GetHandleId(t2_0)
	call SaveUnitHandle(udg_hash_1, h2_0, 1, target_0)
	call SaveInteger(udg_hash_1, h2_0, 2, $F)
	call SaveUnitHandle(udg_hash_1, h2_0, 3, caster_0)
	call SaveInteger(udg_hash_1, h2_0, 5, $E4)
	call SaveReal(udg_hash_1, h2_0, 6, angle_0)
	set locr_0 = GetUnitLoc(caster_0)
	set locd_0 = GetUnitLoc(target_0)
	set l_0 = AddLightningEx("CLPB", true, GetUnitX(caster_0) + 75. * Cos(angle_0 * bj_DEGTORAD_1), GetUnitY(caster_0) + 75. * Sin(angle_0 * bj_DEGTORAD_1), GetUnitFlyHeight(caster_0) + 100. + GetLocationZ(locr_0), GetUnitX(target_0), GetUnitY(target_0), GetUnitFlyHeight(target_0) + 25. + GetLocationZ(locd_0))
	call SaveLightningHandle(udg_hash_1, h2_0, 4, l_0)
	set l_0 = null
	call RemoveLocation(locr_0)
	set locr_0 = null
	call RemoveLocation(locd_0)
	set locd_0 = null
	call TimerStart(t2_0, .04, true, function Trig_Remove_Lightning_From_Chain_Lightning_Actions)
	set t2_0 = null
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveReal(udg_hash_1, h_0, 2, damage_0)
	call SaveInteger(udg_hash_1, h_0, 5, count_0)
	call SaveUnitHandle(udg_hash_1, h_0, 8, target_0)
	call SaveGroupHandle(udg_hash_1, h_0, $E, gdamage_0)
	call SaveBoolean(udg_hash_1, h_0, $F, true)
	call TimerStart(t_0, .3, true, function Trig_Chain_Lightning_Move_Actions)
	set caster_0 = null
	set t_0 = null
	set target_0 = null
	set gdamage_0 = null
endfunction

function Trig_Chain_Lightning_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0PP'
endfunction

function InitTrig_Chain_Lightning takes nothing returns nothing
	local integer index = 0
	set gg_trg_Chain_Lightning_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Chain_Lightning_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Chain_Lightning_1, Condition(function Trig_Chain_Lightning_Conditions))
	call TriggerAddAction(gg_trg_Chain_Lightning_1, function Trig_Chain_Lightning_Actions)
endfunction

function Trig_Magic_Trap_periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local real x = LoadReal(udg_hash_1, h_0, 2)
	local real y = LoadReal(udg_hash_1, h_0, 3)
	local integer lvl = LoadInteger(udg_hash_1, h_0, 4)
	local group gdamage = LoadGroupHandle(udg_hash_1, h_0, 6)
	local real damage = LoadReal(udg_hash_1, h_0, 7)
	local integer wait = LoadInteger(udg_hash_1, h_0, 8)
	local integer order = GetUnitCurrentOrder(caster_0)
	local unit dammi
	local real px
	local real py
	local integer orderId
	local group g = CreateGroup()
	local player p = GetOwningPlayer(caster_0)
	local unit Picked
	local lightning l
	local location locc
	local location loc = GetUnitLoc(caster_0)
	local real dist
	local real angle
	local real speed
	local unit orb
	local effect ef
	set orderId_0 = $D0278
	if (orderId_0 != 0) then
	else
		set orderId_0 = UnitId("channel")
		if (orderId_0 != 0) then
		endif
	endif
	if order_0 == orderId_0 and lvl_0 > 0 then
		set wait_0 = wait_0 + 1
		call SaveInteger(udg_hash_1, h_0, 8, wait_0)
		call GroupAddGroup(gdamage_0, g_0)
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h000' then
				set l_0 = LoadLightningHandle(udg_hash_1, GetHandleId(Picked_0), $A3)
				set locc_0 = GetUnitLoc(Picked_0)
				call MoveLightningEx(l_0, true, x_0, y_0, 250. + GetLocationZ(loc_0), GetUnitX(Picked_0), GetUnitY(Picked_0), 50. + GetLocationZ(locc_0))
				set dist_0 = SquareRoot((x_0 - GetUnitX(Picked_0)) * (x_0 - GetUnitX(Picked_0)) + (y_0 - GetUnitY(Picked_0)) * (y_0 - GetUnitY(Picked_0)))
				set angle_0 = bj_RADTODEG_1 * Atan2(y_0 - GetUnitY(Picked_0), x_0 - GetUnitX(Picked_0))
				set speed_0 = (dist_0 - 50) / 50
				if speed_0 <= 0 then
					set speed_0 = .01
				endif
				call SetUnitPosition(Picked_0, GetUnitX(Picked_0) + speed_0 * Cos(angle_0 * bj_DEGTORAD_1), GetUnitY(Picked_0) + speed_0 * Sin(angle_0 * bj_DEGTORAD_1))
				set l_0 = null
				call RemoveLocation(locc_0)
				set locc_0 = null
			else
				set l_0 = LoadLightningHandle(udg_hash_1, GetHandleId(Picked_0), $A3)
				call DestroyLightning(l_0)
				set l_0 = null
				call GroupRemoveUnit(gdamage_0, Picked_0)
				call SaveGroupHandle(udg_hash_1, h_0, 6, gdamage_0)
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
	else
		call DestroyEffect(AddSpecialEffect("Effects\\MagicStomp.mdx", x_0, y_0))
		loop
			set Picked_0 = FirstOfGroup(gdamage_0)
			exitwhen Picked_0 == null
			if LoadLightningHandle(udg_hash_1, GetHandleId(Picked_0), $A3) != null then
				set l_0 = LoadLightningHandle(udg_hash_1, GetHandleId(Picked_0), $A3)
				call DestroyLightning(l_0)
				set l_0 = null
			endif
			call SaveLightningHandle(udg_hash_1, GetHandleId(Picked_0), $A3, null)
			call SetUnitPathing(Picked_0, true)
			if wait_0 >= 66 and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 then
				call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
				call DestroyEffect(AddSpecialEffectTarget("Effects\\SoundTrauma.mdx", Picked_0, "chest"))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl", Picked_0, "chest"))
				call DestroyEffect(AddSpecialEffectTarget("Effects\\Fireworksblue.mdx", Picked_0, "chest"))
				set dammi_0 = CreateUnit(p_0, 'h00U', x_0, y_0, .0)
				call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
				call UnitAddAbility(dammi_0, 'A0PN')
				call IssueTargetOrderById(dammi_0, $D006B, Picked_0)
				set dammi_0 = null
			endif
			call GroupRemoveUnit(gdamage_0, Picked_0)
		endloop
		set orb_0 = LoadUnitHandle(udg_hash_1, h_0, 9)
		call KillUnit(orb_0)
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, $A)
		call DestroyEffect(ef_0)
		set ef_0 = null
		set orb_0 = null
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
		call RemoveUnit(LoadUnitHandle(udg_hash_1, GetHandleId(caster_0), 'u'))
	endif
	set t_0 = null
	set caster_0 = null
	call DestroyGroup(g_0)
	set g_0 = null
	set p_0 = null
	set Picked_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
endfunction

function Trig_Magic_Trap_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0PM')
	local location loc = GetSpellTargetLoc()
	local real tx = GetLocationX(loc_0)
	local real ty = GetLocationY(loc_0)
	local location locc
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local real damage = 10. + 30. * lvl_0
	local real aoe = 175. + 75. * lvl_0
	local lightning l
	local group g = CreateGroup()
	local player p = GetOwningPlayer(caster_0)
	local unit Picked
	local group gdamage = CreateGroup()
	local integer wait = 0
	local unit orb = CreateUnit(p_0, 'h00U', tx_0, ty_0, 270.)
	local effect ef = AddSpecialEffectTarget("Effects\\Spirit Orb.mdl", orb_0, "origin")
	call UnitAddAbility(orb_0, 'Amrf')
	call UnitRemoveAbility(orb_0, 'Amrf')
	call SetUnitFlyHeight(orb_0, 250., .0)
	call SetUnitScale(orb_0, 2. + .5 * lvl_0, 2. + .5 * lvl_0, 2. + .5 * lvl_0)
	call GroupEnumUnitsInRange(g_0, tx_0, ty_0, aoe_0, null)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .405 and IsUnitEnemy(Picked_0, p_0) and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h000' then
			set locc_0 = GetUnitLoc(Picked_0)
			set l_0 = AddLightningEx("DRAM", true, tx_0, ty_0, 250. + GetLocationZ(loc_0), GetUnitX(Picked_0), GetUnitY(Picked_0), 50. + GetLocationZ(locc_0))
			call SaveLightningHandle(udg_hash_1, GetHandleId(Picked_0), $A3, l_0)
			call GroupAddUnit(gdamage_0, Picked_0)
			call SetUnitPathing(Picked_0, false)
			set l_0 = null
			call RemoveLocation(locc_0)
			set locc_0 = null
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveReal(udg_hash_1, h_0, 2, tx_0)
	call SaveReal(udg_hash_1, h_0, 3, ty_0)
	call SaveInteger(udg_hash_1, h_0, 4, lvl_0)
	call SaveGroupHandle(udg_hash_1, h_0, 6, gdamage_0)
	call SaveReal(udg_hash_1, h_0, 7, damage_0)
	call SaveInteger(udg_hash_1, h_0, 8, wait_0)
	call SaveUnitHandle(udg_hash_1, h_0, 9, orb_0)
	call SaveEffectHandle(udg_hash_1, h_0, $A, ef_0)
	call TimerStart(t_0, .03, true, function Trig_Magic_Trap_periodic_Actions)
	call AddProgressBar(caster_0, 260. + (5. * lvl_0), (.85 + .05 * lvl_0), 2., false, true, 'u', 50, 50, $FF)
	call DestroyGroup(g_0)
	set g_0 = null
	set p_0 = null
	set Picked_0 = null
	set caster_0 = null
	set t_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set gdamage_0 = null
	set orb_0 = null
	set ef_0 = null
endfunction

function Trig_Magic_Trap_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0PM'
endfunction

function InitTrig_Magic_Trap takes nothing returns nothing
	local integer index = 0
	set gg_trg_Magic_Trap_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Magic_Trap_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Magic_Trap_1, Condition(function Trig_Magic_Trap_Conditions))
	call TriggerAddAction(gg_trg_Magic_Trap_1, function Trig_Magic_Trap_Actions)
endfunction

function Trig_Remove_Lightning_Form_Dead_Units_Actions takes nothing returns nothing
	call DestroyLightning(LoadLightningHandle(udg_hash_1, GetHandleId(GetDyingUnit()), $A3))
	call SaveLightningHandle(udg_hash_1, GetHandleId(GetDyingUnit()), $A3, null)
endfunction

function Trig_Remove_Lightning_Form_Dead_Units_Conditions takes nothing returns boolean
	return LoadLightningHandle(udg_hash_1, GetHandleId(GetDyingUnit()), $A3) != null
endfunction

function InitTrig_Remove_Lightning_Form_Dead_Units takes nothing returns nothing
	local integer index = 0
	set gg_trg_Remove_Lightning_Form_Dead_Units_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Remove_Lightning_Form_Dead_Units_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Remove_Lightning_Form_Dead_Units_1, Condition(function Trig_Remove_Lightning_Form_Dead_Units_Conditions))
	call TriggerAddAction(gg_trg_Remove_Lightning_Form_Dead_Units_1, function Trig_Remove_Lightning_Form_Dead_Units_Actions)
endfunction

function Trig_EnergyWave_periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 20)
	local integer count = LoadInteger(udg_hash_1, h_0, 21)
	local real mana = LoadReal(udg_hash_1, h_0, 22)
	local integer check = LoadInteger(udg_hash_1, h_0, 23)
	local integer lvl = LoadInteger(udg_hash_1, h_0, 26)
	local group gdamage = LoadGroupHandle(udg_hash_1, h_0, 25)
	local real manamax = LoadReal(udg_hash_1, h_0, 27)
	local real time = LoadReal(udg_hash_1, h_0, 28)
	local player p = GetOwningPlayer(caster_0)
	local unit arrow
	local real ax
	local real ay
	local real face
	local integer lop = 0
	local effect ef
	local real angle
	local unit dammi
	local string sef
	local group g = CreateGroup()
	local unit Picked
	if check_0 < 47 then
		set check_0 = check_0 + 1
		call SaveInteger(udg_hash_1, h_0, 23, check_0)
		loop
			exitwhen lop_0 >= count_0
			set arrow_0 = LoadUnitHandle(udg_hash_1, h_0, lop_0)
			set face_0 = GetUnitFacing(arrow_0)
			set ax_0 = GetUnitX(arrow_0) + 17. * Cos(face_0 * bj_DEGTORAD_1)
			set ay_0 = GetUnitY(arrow_0) + 17. * Sin(face_0 * bj_DEGTORAD_1)
			if IsTerrainPathable(ax_0, ay_0, PATHING_TYPE_FLYABILITY_1) == false then
				call SetUnitPosition(arrow_0, ax_0, ay_0)
				call GroupEnumUnitsInRange(g_0, ax_0, ay_0, 100., null)
				loop
					set Picked_0 = FirstOfGroup(g_0)
					exitwhen Picked_0 == null
					if IsUnitEnemy(Picked_0, p_0) and IsUnitInGroup(Picked_0, gdamage_0) == false and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and GetUnitTypeId(Picked_0) != 'h000' then
						call GroupAddUnit(gdamage_0, Picked_0)
						set dammi_0 = CreateUnit(p_0, 'h00U', ax_0, ay_0, .0)
						call UnitApplyTimedLife(dammi_0, 'BTLF', .34)
						call UnitAddAbility(dammi_0, 'A0PK')
						call SetUnitAbilityLevel(dammi_0, 'A0PK', lvl_0)
						call IssueTargetOrderById(dammi_0, $D02BC, Picked_0)
						call RemoveUnitAttack(Picked_0, time_0)
						set angle_0 = bj_RADTODEG_1 * Atan2(GetUnitY(Picked_0) - GetUnitY(arrow_0), GetUnitX(Picked_0) - GetUnitX(arrow_0))
						call MoveUnit(Picked_0, 1.5, 200., 100., angle_0, .0, true)
					endif
					if IsUnitAlly(Picked_0, p_0) and IsUnitInGroup(Picked_0, gdamage_0) == false and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and GetUnitTypeId(Picked_0) != 'h000' then
						call GroupAddUnit(gdamage_0, Picked_0)
						call SetUnitState(Picked_0, UNIT_STATE_MANA_1, GetUnitState(Picked_0, UNIT_STATE_MANA_1) + mana_0 + GetUnitState(Picked_0, UNIT_STATE_MAX_MANA_1) * manamax_0)
						call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIma\\AImaTarget.mdl", Picked_0, "origin"))
					endif
					call GroupRemoveUnit(g_0, Picked_0)
				endloop
				set Picked_0 = null
			endif
			set arrow_0 = null
			set lop_0 = lop_0 + 1
		endloop
	else
		loop
			exitwhen lop_0 >= count_0
			set arrow_0 = LoadUnitHandle(udg_hash_1, h_0, lop_0)
			set ef_0 = LoadEffectHandle(udg_hash_1, h_0, $A + lop_0)
			call KillUnit(arrow_0)
			call DestroyEffect(ef_0)
			set arrow_0 = null
			set ef_0 = null
			set lop_0 = lop_0 + 1
		endloop
		call GroupClear(gdamage_0)
		call DestroyGroup(gdamage_0)
		set gdamage_0 = null
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
		set t_0 = null
	endif
	set t_0 = null
	set caster_0 = null
	set gdamage_0 = null
	set p_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set Picked_0 = null
endfunction

function Trig_EnergyWave_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local unit target = GetSpellTargetUnit()
	local real tx
	local real ty
	local location loc
	local real angle
	local real angle1
	local player p = GetOwningPlayer(caster_0)
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0PJ')
	local integer count = lvl_0 + 2
	local integer lop = 0
	local real mana = 50 * lvl_0
	local real manamax = .05 * lvl_0
	local real time = 1. + .75 * lvl_0
	local unit arrow
	local integer check = 0
	local effect ef
	local string s
	local group gdamage = CreateGroup()
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local boolean perekluchatelangle = false
	local integer counterangle = 0
	if target_0 == null then
		set loc_0 = GetSpellTargetLoc()
		set tx_0 = GetLocationX(loc_0)
		set ty_0 = GetLocationY(loc_0)
	else
		set tx_0 = GetUnitX(target_0)
		set ty_0 = GetUnitY(target_0)
	endif
	set angle_0 = (bj_RADTODEG_1 * Atan2(ty_0 - y_0, tx_0 - x_0))
	if target_0 == caster_0 then
		set angle_0 = GetUnitFacing(caster_0)
	endif
	if count_0 - ((count_0 / 2) * 2) == 0 then
		set angle_0 = angle_0 + 6.
	endif
	loop
		exitwhen lop_0 >= count_0
		if perekluchatelangle_0 then
			set perekluchatelangle_0 = false
			set angle_0 = angle_0 - (counterangle_0 * 12.)
		else
			set perekluchatelangle_0 = true
			set angle_0 = angle_0 + (counterangle_0 * 12.)
		endif
		set arrow_0 = CreateUnit(p_0, 'h00U', x_0, y_0, angle_0)
		call SetUnitScale(arrow_0, 1.2, 1.2, 1.2)
		call UnitAddAbility(arrow_0, 'Amrf')
		call UnitRemoveAbility(arrow_0, 'Amrf')
		call SetUnitFlyHeight(arrow_0, 10., .0)
		set ef_0 = AddSpecialEffectTarget("Abilities\\Weapons\\WingedSerpentMissile\\WingedSerpentMissile.mdl", arrow_0, "chest")
		call SaveUnitHandle(udg_hash_1, h_0, lop_0, arrow_0)
		call SaveEffectHandle(udg_hash_1, h_0, $A + lop_0, ef_0)
		set arrow_0 = null
		set ef_0 = null
		set lop_0 = lop_0 + 1
		set counterangle_0 = counterangle_0 + 1
	endloop
	call SaveUnitHandle(udg_hash_1, h_0, 20, caster_0)
	call SaveInteger(udg_hash_1, h_0, 21, count_0)
	call SaveReal(udg_hash_1, h_0, 22, mana_0)
	call SaveInteger(udg_hash_1, h_0, 23, check_0)
	call SaveGroupHandle(udg_hash_1, h_0, 25, gdamage_0)
	call SaveInteger(udg_hash_1, h_0, 26, lvl_0)
	call SaveReal(udg_hash_1, h_0, 27, manamax_0)
	call SaveReal(udg_hash_1, h_0, 28, time_0)
	call TimerStart(t_0, .04, true, function Trig_EnergyWave_periodic_Actions)
	set caster_0 = null
	set target_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set p_0 = null
	set gdamage_0 = null
	set t_0 = null
endfunction

function Trig_EnergyWave_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0PJ'
endfunction

function InitTrig_EnergyWave takes nothing returns nothing
	local integer index = 0
	set gg_trg_EnergyWave_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_EnergyWave_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_EnergyWave_1, Condition(function Trig_EnergyWave_Conditions))
	call TriggerAddAction(gg_trg_EnergyWave_1, function Trig_EnergyWave_Actions)
endfunction

function Trig_Magic_Epicenter_Move_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local real damage = LoadReal(udg_hash_1, h_0, 3)
	local real stuntime = LoadReal(udg_hash_1, h_0, 4)
	local real aoe = LoadReal(udg_hash_1, h_0, 5)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 7)
	local real x = LoadReal(udg_hash_1, h_0, 9)
	local real y = LoadReal(udg_hash_1, h_0, $A)
	local player p = GetOwningPlayer(caster_0)
	local group g = CreateGroup()
	local unit Picked
	local unit dammi = CreateUnit(p_0, 'h00U', x_0, y_0, 270.)
	call SetUnitScale(dammi_0, 1.8, 1.8, 1.8)
	call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\NightElf\\NEDeathMedium\\NEDeath.mdl", dammi_0, "origin"))
	call DestroyEffect(AddSpecialEffect("Effects\\MagicStomp.mdl", x_0, y_0))
	call KillUnit(dammi_0)
	set dammi_0 = null
	call GroupEnumUnitsInRange(g_0, x_0, y_0, aoe_0, null)
	loop
		set Picked_0 = FirstOfGroup(g_0)
		exitwhen Picked_0 == null
		if IsUnitEnemy(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
			call DestroyEffect(AddSpecialEffectTarget("Effects\\EMPBomb.mdx", Picked_0, "chest"))
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl", Picked_0, "origin"))
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl", Picked_0, "chest"))
			call StunUnitTimed(Picked_0, stuntime_0)
			call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
		endif
		call GroupRemoveUnit(g_0, Picked_0)
	endloop
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	set p_0 = null
	call DestroyTimer(t_0)
	call FlushChildHashtable(udg_hash_1, h_0)
	set t_0 = null
	set caster_0 = null
endfunction

function Trig_Magic_Epicenter_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local location loc = GetSpellTargetLoc()
	local real xt = GetLocationX(loc_0)
	local real yt = GetLocationY(loc_0)
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0PO')
	local integer lvlup = GetUnitAbilityLevel(caster_0, 'A0PW')
	local real damage
	local real stuntime
	local player p = GetOwningPlayer(caster_0)
	local real aoe = 300. + 50 * lvl_0
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	if lvlup_0 <= 0 then
		set damage_0 = (-25. + (200. * lvl_0)) + (GetHeroInt(caster_0, true) * (.5 + 1. * lvl_0))
		set stuntime_0 = 2. + (.5 * lvl_0)
	endif
	if lvlup_0 > 0 then
		set damage_0 = (-25. + (200. * lvlup_0)) + (GetHeroInt(caster_0, true) * (.5 + 1.5 * lvlup_0))
		set stuntime_0 = 3. + (.5 * lvlup_0)
	endif
	call DestroyEffectWithWait(AddSpecialEffect("Effects\\IonCannon.mdl", xt_0, yt_0), 10.)
	call SaveReal(udg_hash_1, h_0, 3, damage_0)
	call SaveReal(udg_hash_1, h_0, 4, stuntime_0)
	call SaveReal(udg_hash_1, h_0, 5, aoe_0)
	call SaveUnitHandle(udg_hash_1, h_0, 7, caster_0)
	call SaveReal(udg_hash_1, h_0, 9, xt_0)
	call SaveReal(udg_hash_1, h_0, $A, yt_0)
	call TimerStart(t_0, 6.5, false, function Trig_Magic_Epicenter_Move_Actions)
	set caster_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set t_0 = null
	set p_0 = null
endfunction

function Trig_Magic_Epicenter_Conditions takes nothing returns boolean
	return (GetSpellAbilityId() == 'A0PO' or GetSpellAbilityId() == 'A0PW')
endfunction

function InitTrig_Magic_Epicenter takes nothing returns nothing
	local integer index = 0
	set gg_trg_Magic_Epicenter_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Magic_Epicenter_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Magic_Epicenter_1, Condition(function Trig_Magic_Epicenter_Conditions))
	call TriggerAddAction(gg_trg_Magic_Epicenter_1, function Trig_Magic_Epicenter_Actions)
endfunction

function Trig_Load_ArchMage_Actions takes nothing returns nothing
	call AbilityPreload('A0PP', 6)
	call AbilityPreload('A0PM', 6)
	call AbilityPreload('A0PJ', 6)
	call AbilityPreload('A0PO', 3)
	call AbilityPreload('A0PK', 6)
	call AbilityPreload('A0PN', 1)
	call AbilityPreload('B055', 1)
	call AbilityPreload('B054', 1)
	call EffectPreload("Effects\\EMPBomb.mdx")
	call EffectPreload("Abilities\\Spells\\Orc\\LightningBolt\\LightningBoltMissile.mdl")
	call EffectPreload("Effects\\Spirit Orb.mdl")
	call EffectPreload("Effects\\SoundTrauma.mdx")
	call EffectPreload("Effects\\Fireworksblue.mdx")
	call EffectPreload("Abilities\\Weapons\\WingedSerpentMissile\\WingedSerpentMissile.mdl")
	call EffectPreload("Abilities\\Spells\\Items\\AIma\\AImaTarget.mdl")
	call EffectPreload("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl")
	call EffectPreload("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl")
	call EffectPreload("Effects\\IonCannon.mdl")
	call EffectPreload("Abilities\\Spells\\Other\\Silence\\SilenceTarget.mdl")
	call EffectPreload("Abilities\\Spells\\Other\\Drain\\ManaDrainCaster.mdl")
	call EffectPreload("Abilities\\Weapons\\Bolt\\BoltImpact.mdl")
	call EffectPreload("Objects\\Spawnmodels\\NightElf\\NEDeathMedium\\NEDeath.mdl")
	call EffectPreload("Effects\\MagicStomp.mdl")
	call EnableTrigger(gg_trg_Chain_Lightning_1)
	call EnableTrigger(gg_trg_Magic_Trap_1)
	call EnableTrigger(gg_trg_Remove_Lightning_Form_Dead_Units_1)
	call EnableTrigger(gg_trg_EnergyWave_1)
	call EnableTrigger(gg_trg_Magic_Epicenter_1)
endfunction

function InitTrig_Load_ArchMage takes nothing returns nothing
	set gg_trg_Load_ArchMage_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Load_ArchMage_1, function Trig_Load_ArchMage_Actions)
endfunction

function Trig_Toxic_Field_Move_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit orb
	local effect ef
	local real damage = LoadReal(udg_hash_1, h_0, 3)
	local integer armor = LoadInteger(udg_hash_1, h_0, 4)
	local integer wait = LoadInteger(udg_hash_1, h_0, 5)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 7)
	local group gdamage = LoadGroupHandle(udg_hash_1, h_0, 8)
	local real x = LoadReal(udg_hash_1, h_0, 9)
	local real y = LoadReal(udg_hash_1, h_0, $A)
	local player p = GetOwningPlayer(caster_0)
	local group g = CreateGroup()
	local group g2 = CreateGroup()
	local group g3 = CreateGroup()
	local unit Picked
	local unit dammi
	if wait_0 > 0 then
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 5, wait_0)
		call GroupAddGroup(gdamage_0, g3_0)
		call GroupEnumUnitsInRange(g_0, x_0, y_0, 325., null)
		if wait_0 == 4 then
			set orb_0 = LoadUnitHandle(udg_hash_1, h_0, 1)
			set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 2)
			call KillUnit(orb_0)
			call DestroyEffect(ef_0)
			set ef_0 = null
			set orb_0 = null
			set orb_0 = CreateUnit(p_0, 'h00U', x_0, y_0, GetRandomReal(.0, 360.))
			set ef_0 = AddSpecialEffectTarget("Effects\\ToxicField.mdx", orb_0, "origin")
			call SaveUnitHandle(udg_hash_1, h_0, 1, orb_0)
			call SaveEffectHandle(udg_hash_1, h_0, 2, ef_0)
			set orb_0 = null
			set ef_0 = null
		endif
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if IsUnitEnemy(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				set dammi_0 = CreateUnit(p_0, 'h00U', x_0, y_0, .0)
				call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
				call UnitAddAbility(dammi_0, 'A0QE')
				call IssueTargetOrderById(dammi_0, $D006B, Picked_0)
				set dammi_0 = null
				call GroupAddUnit(g2_0, Picked_0)
				call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		loop
			set Picked_0 = FirstOfGroup(g3_0)
			exitwhen Picked_0 == null
			if IsUnitInGroup(Picked_0, g2_0) == false then
				call SetArmorAbilityLevel(Picked_0, armor_0)
				call GroupRemoveUnit(gdamage_0, Picked_0)
			endif
			call GroupRemoveUnit(g3_0, Picked_0)
		endloop
		loop
			set Picked_0 = FirstOfGroup(g2_0)
			exitwhen Picked_0 == null
			if IsUnitInGroup(Picked_0, gdamage_0) == false then
				call SetArmorAbilityLevel(Picked_0, -armor_0)
				call GroupAddUnit(gdamage_0, Picked_0)
			endif
			call GroupRemoveUnit(g2_0, Picked_0)
		endloop
		call SaveGroupHandle(udg_hash_1, h_0, 8, gdamage_0)
		call TimerStart(t_0, 1., false, function Trig_Toxic_Field_Move_Actions)
	else
		set orb_0 = LoadUnitHandle(udg_hash_1, h_0, 1)
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 2)
		call KillUnit(orb_0)
		call DestroyEffect(ef_0)
		set ef_0 = null
		set orb_0 = null
		loop
			set Picked_0 = FirstOfGroup(gdamage_0)
			exitwhen Picked_0 == null
			call SetArmorAbilityLevel(Picked_0, armor_0)
			call GroupRemoveUnit(gdamage_0, Picked_0)
		endloop
		call GroupClear(gdamage_0)
		call DestroyGroup(gdamage_0)
		set gdamage_0 = null
		call DestroyTimer(t_0)
		call FlushChildHashtable(udg_hash_1, h_0)
	endif
	set Picked_0 = null
	call GroupClear(g_0)
	call DestroyGroup(g_0)
	set g_0 = null
	call GroupClear(g2_0)
	call DestroyGroup(g2_0)
	set g2_0 = null
	call GroupClear(g3_0)
	call DestroyGroup(g3_0)
	set g3_0 = null
	set p_0 = null
	set gdamage_0 = null
	set t_0 = null
	set caster_0 = null
endfunction

function Trig_Toxic_Field_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local location loc = GetSpellTargetLoc()
	local real xt = GetLocationX(loc_0)
	local real yt = GetLocationY(loc_0)
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0QD')
	local integer wait = 8
	local real damage = (-20. + (60. * lvl_0) + GetUnitState(caster_0, UNIT_STATE_MAX_LIFE_1) * .03 * lvl_0) / (wait_0)
	local integer armor = 2 + 3 * lvl_0
	local player p = GetOwningPlayer(caster_0)
	local unit orb = CreateUnit(p_0, 'h00U', xt_0, yt_0, GetRandomReal(.0, 360.))
	local effect ef = AddSpecialEffectTarget("Effects\\ToxicField.mdx", orb_0, "origin")
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	local group g = CreateGroup()
	call SaveUnitHandle(udg_hash_1, h_0, 1, orb_0)
	call SaveEffectHandle(udg_hash_1, h_0, 2, ef_0)
	call SaveReal(udg_hash_1, h_0, 3, damage_0)
	call SaveInteger(udg_hash_1, h_0, 4, armor_0)
	call SaveInteger(udg_hash_1, h_0, 5, wait_0)
	call SaveUnitHandle(udg_hash_1, h_0, 7, caster_0)
	call SaveGroupHandle(udg_hash_1, h_0, 8, g_0)
	call SaveReal(udg_hash_1, h_0, 9, xt_0)
	call SaveReal(udg_hash_1, h_0, $A, yt_0)
	call TimerStart(t_0, .0, false, function Trig_Toxic_Field_Move_Actions)
	set caster_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set t_0 = null
	set p_0 = null
	set orb_0 = null
	set ef_0 = null
	set g_0 = null
endfunction

function Trig_Toxic_Field_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0QD'
endfunction

function InitTrig_Toxic_Field takes nothing returns nothing
	local integer index = 0
	set gg_trg_Toxic_Field_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Toxic_Field_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Toxic_Field_1, Condition(function Trig_Toxic_Field_Conditions))
	call TriggerAddAction(gg_trg_Toxic_Field_1, function Trig_Toxic_Field_Actions)
endfunction

function Trig_Poison_Bomb_MOVE_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local unit target = LoadUnitHandle(udg_hash_1, h_0, 8)
	local real xload = LoadReal(udg_hash_1, h_0, 16)
	local real yload = LoadReal(udg_hash_1, h_0, 17)
	local integer count = LoadInteger(udg_hash_1, h_0, 5)
	local unit orb = LoadUnitHandle(udg_hash_1, h_0, 6)
	local unit target2
	local real stuntime
	local real heal
	local group gdamage
	local real height
	local effect ef
	local real x = GetUnitX(orb_0)
	local real y = GetUnitY(orb_0)
	local real xt
	local real yt
	local real xorb
	local real yorb
	local real angle
	local real dist
	local player p
	local group g
	local group grup
	local unit Picked
	local timer tef
	local integer hef
	local integer regen
	local boolean remove = false
	local boolean reselect = false
	local unit orb2
	local group gg
	local effect ef2
	if GetUnitState(target_0, UNIT_STATE_LIFE_1) > .405 then
		set xt_0 = GetUnitX(target_0)
		set yt_0 = GetUnitY(target_0)
	else
		set xt_0 = xload_0
		set yt_0 = yload_0
	endif
	set angle_0 = bj_RADTODEG_1 * Atan2((yt_0 - y_0), (xt_0 - x_0))
	set xorb_0 = x_0 + 17. * Cos(angle_0 * bj_DEGTORAD_1)
	set yorb_0 = y_0 + 17. * Sin(angle_0 * bj_DEGTORAD_1)
	call SetUnitPosition(orb_0, xorb_0, yorb_0)
	set dist_0 = SquareRoot((xt_0 - xorb_0) * (xt_0 - xorb_0) + (yt_0 - yorb_0) * (yt_0 - yorb_0))
	call SetUnitFacing(orb_0, angle_0)
	if dist_0 < 21. then
		call SetUnitPosition(orb_0, xt_0, yt_0)
		set p_0 = GetOwningPlayer(caster_0)
		set stuntime_0 = LoadReal(udg_hash_1, h_0, 2)
		set gg_0 = CreateGroup()
		call GroupEnumUnitsInRange(gg_0, xt_0, yt_0, 150., null)
		loop
			set Picked_0 = FirstOfGroup(gg_0)
			exitwhen Picked_0 == null
			if IsUnitEnemy(Picked_0, p_0) and GetUnitState(target_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(target_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(target_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(target_0) != 'h00U' then
				call StunUnitTimed(Picked_0, stuntime_0)
			endif
			call GroupRemoveUnit(gg_0, Picked_0)
		endloop
		set count_0 = count_0 - 1
		call SaveInteger(udg_hash_1, h_0, 5, count_0)
		set reselect_0 = true
		set p_0 = null
	endif
	if reselect_0 then
		set g_0 = CreateGroup()
		set grup_0 = CreateGroup()
		set p_0 = GetOwningPlayer(caster_0)
		call GroupEnumUnitsInRange(g_0, xt_0, yt_0, 500., null)
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if IsUnitEnemy(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call GroupAddUnit(grup_0, Picked_0)
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		call RandomUnitFromGroup(1, grup_0)
		call GroupAddGroup(udg_GroupRandomUnitFromGroup_1, g_0)
		set target2_0 = FirstOfGroup(udg_GroupRandomUnitFromGroup_1)
		if target2_0 != null then
			call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\AcidBomb\\BottleMissile.mdl", xt_0, yt_0))
			set x_0 = GetUnitX(orb_0)
			set y_0 = GetUnitY(orb_0)
			set xt_0 = GetUnitX(target2_0)
			set yt_0 = GetUnitY(target2_0)
			set dist_0 = SquareRoot(((xt_0 - x_0) * (xt_0 - x_0)) + ((yt_0 - y_0) * (yt_0 - y_0)))
			set angle_0 = bj_RADTODEG_1 * Atan2((yt_0 - y_0), (xt_0 - x_0))
			set p_0 = GetOwningPlayer(caster_0)
			set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 7)
			call DestroyEffect(ef_0)
			set ef_0 = null
			call RemoveUnit(orb_0)
			set orb2_0 = CreateUnit(p_0, 'h00U', x_0, y_0, angle_0)
			set ef2_0 = AddSpecialEffectTarget("Abilities\\Spells\\Other\\AcidBomb\\BottleMissile.mdl", orb2_0, "chest")
			call SetUnitScale(orb2_0, 1.5, 1.5, 1.5)
			call SaveUnitHandle(udg_hash_1, h_0, 6, orb2_0)
			call SaveEffectHandle(udg_hash_1, h_0, 7, ef2_0)
			call SaveUnitHandle(udg_hash_1, h_0, 8, target2_0)
			call SaveReal(udg_hash_1, h_0, 9, (dist_0 / 3))
			call SaveReal(udg_hash_1, h_0, 16, xt_0)
			call SaveReal(udg_hash_1, h_0, 17, yt_0)
			set p_0 = null
			set orb2_0 = null
			set ef2_0 = null
		else
			set remove_0 = true
		endif
		set target2_0 = null
		call GroupClear(g_0)
		call DestroyGroup(g_0)
		set g_0 = null
		call GroupClear(grup_0)
		call DestroyGroup(grup_0)
		set grup_0 = null
		set gdamage_0 = null
	endif
	if count_0 <= 0 then
		set remove_0 = true
	endif
	if remove_0 then
		call KillUnit(orb_0)
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 7)
		call DestroyEffect(ef_0)
		set ef_0 = null
		call GroupClear(g_0)
		call DestroyGroup(g_0)
		set g_0 = null
		call DestroyTimer(t_0)
		set Picked_0 = null
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set caster_0 = null
	set orb_0 = null
	set target_0 = null
endfunction

function Trig_Poison_Bomb_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local player p = GetOwningPlayer(caster_0)
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local unit target = GetSpellTargetUnit()
	local location loc
	local real xt
	local real yt
	local real angle
	local real dist
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0QF')
	local real stuntime = 4.
	local integer count = 2 + (lvl_0 * 2)
	local unit orb = CreateUnit(p_0, 'h00U', x_0, y_0, .0)
	local effect ef = AddSpecialEffectTarget("Abilities\\Spells\\Other\\AcidBomb\\BottleMissile.mdl", orb_0, "chest")
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	call SetUnitScale(orb_0, 1.5, 1.5, 1.5)
	if target_0 == null then
		set loc_0 = GetSpellTargetLoc()
		set xt_0 = GetLocationX(loc_0)
		set yt_0 = GetLocationY(loc_0)
	else
		set xt_0 = GetUnitX(target_0)
		set yt_0 = GetUnitY(target_0)
	endif
	set angle_0 = bj_RADTODEG_1 * Atan2((yt_0 - y_0), (xt_0 - x_0))
	set dist_0 = SquareRoot(((xt_0 - x_0) * (xt_0 - x_0)) + ((yt_0 - y_0) * (yt_0 - y_0)))
	call SetUnitX(orb_0, x_0 + 30. * Cos((angle_0) * bj_DEGTORAD_1))
	call SetUnitY(orb_0, y_0 + 30. * Sin((angle_0) * bj_DEGTORAD_1))
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveReal(udg_hash_1, h_0, 2, stuntime_0)
	call SaveInteger(udg_hash_1, h_0, 5, count_0)
	call SaveUnitHandle(udg_hash_1, h_0, 6, orb_0)
	call SaveEffectHandle(udg_hash_1, h_0, 7, ef_0)
	call SaveUnitHandle(udg_hash_1, h_0, 8, target_0)
	call SaveReal(udg_hash_1, h_0, 16, xt_0)
	call SaveReal(udg_hash_1, h_0, 17, yt_0)
	call TimerStart(t_0, .03, true, function Trig_Poison_Bomb_MOVE_Actions)
	set caster_0 = null
	set t_0 = null
	set orb_0 = null
	set ef_0 = null
	set p_0 = null
	set target_0 = null
endfunction

function Trig_Poison_Bomb_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0QF'
endfunction

function InitTrig_Poison_Bomb takes nothing returns nothing
	local integer index = 0
	set gg_trg_Poison_Bomb_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Poison_Bomb_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Poison_Bomb_1, Condition(function Trig_Poison_Bomb_Conditions))
	call TriggerAddAction(gg_trg_Poison_Bomb_1, function Trig_Poison_Bomb_Actions)
endfunction

function Trig_Learn_Ogre_Rage_Actions_Timer takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit hero = LoadUnitHandle(udg_hash_1, h_0, 1)
	local texttag txt = LoadTextTagHandle(udg_hash_1, h_0, 2)
	local real x = GetUnitX(hero_0)
	local real y = GetUnitY(hero_0)
	local boolean alife = LoadBoolean(udg_hash_1, h_0, 3)
	local integer hhero = GetHandleId(hero_0)
	local integer hpregenold = LoadInteger(udg_hash_1, hhero_0, $AE)
	local integer asold = LoadInteger(udg_hash_1, hhero_0, $AF)
	local integer lvl = GetUnitAbilityLevel(hero_0, 'A0QG')
	local integer hpstack = R2I((((GetUnitState(hero_0, UNIT_STATE_MAX_LIFE_1) - GetUnitState(hero_0, UNIT_STATE_LIFE_1)) / GetUnitState(hero_0, UNIT_STATE_MAX_LIFE_1)) + .1) * $A)
	local integer hpregennew = (1 + 1 * lvl_0) * hpstack_0
	local integer asnew = (2 + 3 * lvl_0) * hpstack_0
	if (GetUnitState(hero_0, UNIT_STATE_LIFE_1) < .405 and alife_0) then
		set alife_0 = false
		call SaveBoolean(udg_hash_1, h_0, 3, alife_0)
		call SetTextTagVisibility(txt_0, false)
	endif
	if (GetUnitState(hero_0, UNIT_STATE_LIFE_1) > .405 and alife_0 == false) then
		set alife_0 = true
		call SaveBoolean(udg_hash_1, h_0, 3, alife_0)
		call SetTextTagVisibility(txt_0, true)
	endif
	if (GetUnitState(hero_0, UNIT_STATE_LIFE_1) > .405 and alife_0) then
		if hpstack_0 >= 6 and LoadBoolean(udg_hash_1, h_0, $B0) == false then
			call SaveBoolean(udg_hash_1, h_0, $B0, true)
			call AddUnitAnimationProperties(hero_0, "Alternate", true)
			call PlaySoundBJ(gg_snd_AlchemistChemicalBurst1_1)
		endif
		if hpstack_0 < 5 and LoadBoolean(udg_hash_1, h_0, $B0) then
			call SaveBoolean(udg_hash_1, h_0, $B0, false)
			call AddUnitAnimationProperties(hero_0, "Alternate", false)
			call PlaySoundBJ(gg_snd_AlchemistMorph1_1)
		endif
		if hpregennew_0 != hpregenold_0 then
			call SetUnitLifeAndManaRegeneration(hero_0, "life", (hpregennew_0 - hpregenold_0))
			call SaveInteger(udg_hash_1, hhero_0, $AE, hpregennew_0)
		endif
		if asnew_0 != asold_0 then
			call SetAttackSpeedAbilityLevel(hero_0, (asnew_0 - asold_0))
			call SaveInteger(udg_hash_1, hhero_0, $AF, asnew_0)
		endif
		call SetTextTagText(txt_0, "|cff006400" + I2S(hpstack_0) + "|r|cFF969696/|r|cff00640010|r", .033)
		call SetTextTagPos(txt_0, GetUnitX(hero_0) - 40., GetUnitY(hero_0) + 50., .0)
	endif
	set t_0 = null
	set hero_0 = null
	set txt_0 = null
endfunction

function Trig_Learn_Ogre_Rage_Actions takes nothing returns nothing
	local integer lvl = GetUnitAbilityLevel(GetLearningUnit(), 'A0QG')
	local timer t
	local integer h
	local texttag txt
	local unit hero = GetLearningUnit()
	if lvl_0 == 1 then
		set t_0 = CreateTimer()
		set h_0 = GetHandleId(t_0)
		set txt_0 = CreateTextTag()
		call SetTextTagText(txt_0, "|cff006400" + I2S(0) + "|r|cFF969696/|r|cff00640010|r", .033)
		call SetTextTagColor(txt_0, $FF, $FF, $FF, $FF)
		call SetTextTagPos(txt_0, GetUnitX(hero_0) - 40., GetUnitY(hero_0) + 50., .0)
		call SetTextTagPermanent(txt_0, true)
		call SaveUnitHandle(udg_hash_1, h_0, 1, hero_0)
		call SaveTextTagHandle(udg_hash_1, h_0, 2, txt_0)
		call SaveBoolean(udg_hash_1, h_0, 3, true)
		call TimerStart(t_0, .03, true, function Trig_Learn_Ogre_Rage_Actions_Timer)
		set t_0 = null
		set txt_0 = null
	endif
	set hero_0 = null
endfunction

function Trig_Learn_Ogre_Rage_Conditions takes nothing returns boolean
	return GetUnitTypeId(GetLearningUnit()) != 'h00U' and GetLearnedSkill() == 'A0QG'
endfunction

function InitTrig_Learn_Ogre_Rage takes nothing returns nothing
	local integer index = 0
	set gg_trg_Learn_Ogre_Rage_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Ogre_Rage_1, Player(index_0), EVENT_PLAYER_HERO_SKILL_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Learn_Ogre_Rage_1, Condition(function Trig_Learn_Ogre_Rage_Conditions))
	call TriggerAddAction(gg_trg_Learn_Ogre_Rage_1, function Trig_Learn_Ogre_Rage_Actions)
endfunction

function Trig_Potion_of_Growth_Periodic_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local integer str = LoadInteger(udg_hash_1, h_0, 2)
	local integer wait = LoadInteger(udg_hash_1, h_0, 3)
	local integer wait2 = LoadInteger(udg_hash_1, h_0, 4)
	local real percent
	if wait_0 > 0 then
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 3, wait_0)
		if wait_0 >= $A then
			set percent_0 = (GetUnitState(caster_0, UNIT_STATE_LIFE_1) / GetUnitState(caster_0, UNIT_STATE_MAX_LIFE_1))
			call SetHeroStr(caster_0, GetHeroStr(caster_0, false) + str_0, true)
			call SetUnitState(caster_0, UNIT_STATE_LIFE_1, GetUnitState(caster_0, UNIT_STATE_MAX_LIFE_1) * percent_0)
			call SetUnitScale(caster_0, .9 + (20 - wait_0) * .05, .9 + (20 - wait_0) * .05, .9 + (20 - wait_0) * .05)
		endif
	else
		if wait2_0 == 20 then
			call TimerStart(t_0, .05, true, function Trig_Potion_of_Growth_Periodic_Actions)
		endif
		if wait2_0 > 0 then
			set wait2_0 = wait2_0 - 1
			call SaveInteger(udg_hash_1, h_0, 4, wait2_0)
			call SetUnitScale(caster_0, 1.4 - ((20 - wait2_0) * .025), 1.4 - ((20 - wait2_0) * .025), 1.4 - ((20 - wait2_0) * .025))
		endif
		if wait2_0 == 0 then
			set percent_0 = (GetUnitState(caster_0, UNIT_STATE_LIFE_1) / GetUnitState(caster_0, UNIT_STATE_MAX_LIFE_1))
			call SetHeroStr(caster_0, GetHeroStr(caster_0, false) - (str_0 * $A), true)
			call SetUnitState(caster_0, UNIT_STATE_LIFE_1, GetUnitState(caster_0, UNIT_STATE_MAX_LIFE_1) * percent_0)
			call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\ManaBurn\\ManaBurnTarget.mdl", caster_0, "origin"))
			call FlushChildHashtable(udg_hash_1, h_0)
			call DestroyTimer(t_0)
		endif
	endif
	set t_0 = null
	set caster_0 = null
endfunction

function Trig_Potion_of_Growth_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local integer wait = 20
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0QH')
	local integer str = (5 + 5 * lvl_0)
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	call PlaySoundBJ(gg_snd_HeroAlchemistYesAttack1_1)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveInteger(udg_hash_1, h_0, 2, str_0)
	call SaveInteger(udg_hash_1, h_0, 3, wait_0)
	call SaveInteger(udg_hash_1, h_0, 4, 20)
	call TimerStart(t_0, 1., true, function Trig_Potion_of_Growth_Periodic_Actions)
	set caster_0 = null
	set t_0 = null
endfunction

function Trig_Potion_of_Growth_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0QH'
endfunction

function InitTrig_Potion_of_Growth takes nothing returns nothing
	local integer index = 0
	set gg_trg_Potion_of_Growth_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Potion_of_Growth_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Potion_of_Growth_1, Condition(function Trig_Potion_of_Growth_Conditions))
	call TriggerAddAction(gg_trg_Potion_of_Growth_1, function Trig_Potion_of_Growth_Actions)
endfunction

function Trig_Load_Alchemist_Actions takes nothing returns nothing
	call AbilityPreload('A0QD', 6)
	call AbilityPreload('A0QF', 6)
	call AbilityPreload('A0QG', 6)
	call AbilityPreload('A0QH', 3)
	call AbilityPreload('A0QE', 1)
	call AbilityPreload('B058', 1)
	call EffectPreload("Effects\\ToxicField.mdx")
	call EffectPreload("Abilities\\Spells\\Other\\AcidBomb\\BottleMissile.mdl")
	call EffectPreload("Abilities\\Spells\\NightElf\\ManaBurn\\ManaBurnTarget.mdl")
	call EffectPreload("Abilities\\Weapons\\PoisonSting\\PoisonStingTarget.mdl")
	call EnableTrigger(gg_trg_Toxic_Field_1)
	call EnableTrigger(gg_trg_Poison_Bomb_1)
	call EnableTrigger(gg_trg_Learn_Ogre_Rage_1)
	call EnableTrigger(gg_trg_Potion_of_Growth_1)
endfunction

function InitTrig_Load_Alchemist takes nothing returns nothing
	set gg_trg_Load_Alchemist_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Load_Alchemist_1, function Trig_Load_Alchemist_Actions)
endfunction

function Trig_Case_Shot_Move_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local group gdamage
	local real damage
	local effect ef
	local integer wait = LoadInteger(udg_hash_1, h_0, 5)
	local real angle = LoadReal(udg_hash_1, h_0, 6)
	local unit dagger = LoadUnitHandle(udg_hash_1, h_0, 7)
	local integer lvl
	local real x = GetUnitX(dagger_0) + 40. * Cos((angle_0) * bj_DEGTORAD_1)
	local real y = GetUnitY(dagger_0) + 40. * Sin((angle_0) * bj_DEGTORAD_1)
	local player p = GetOwningPlayer(caster_0)
	local group g = CreateGroup()
	local unit Picked
	local real dist
	local boolean dest = false
	local boolean explode = false
	local unit dammi
	local real angle2
	if wait_0 > 0 then
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 5, wait_0)
		call SetUnitPosition(dagger_0, x_0, y_0)
		call GroupEnumUnitsInRange(g_0, x_0, y_0, 125., null)
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if IsUnitEnemy(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				set explode_0 = true
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		call GroupClear(g_0)
		call DestroyGroup(g_0)
		set g_0 = null
	else
		set dest_0 = true
	endif
	if explode_0 then
		set dest_0 = true
		set gdamage_0 = CreateGroup()
		set lvl_0 = LoadInteger(udg_hash_1, h_0, 9)
		set damage_0 = LoadReal(udg_hash_1, h_0, 3)
		call GroupEnumUnitsInRange(gdamage_0, x_0, y_0, 300., null)
		loop
			set Picked_0 = FirstOfGroup(gdamage_0)
			exitwhen Picked_0 == null
			if IsUnitEnemy(Picked_0, p_0) and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Rifle\\RifleImpact.mdl", Picked_0, "chest"))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GyroCopter\\GyroCopterImpact.mdl", Picked_0, "chest"))
				call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPeasant.mdl", Picked_0, "origin"))
				set dammi_0 = CreateUnit(p_0, 'h00U', x_0, y_0, .0)
				call UnitApplyTimedLife(dammi_0, 'BTLF', 1.)
				call UnitAddAbility(dammi_0, 'A0QS')
				call SetUnitAbilityLevel(dammi_0, 'A0QS', lvl_0)
				call IssueTargetOrderById(dammi_0, $D006B, Picked_0)
				set dammi_0 = null
				set angle2_0 = bj_RADTODEG_1 * Atan2(GetUnitY(Picked_0) - y_0, GetUnitX(Picked_0) - x_0)
				call MoveUnit(Picked_0, 1., 600., 600., angle2_0, .0, false)
				call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
			endif
			call GroupRemoveUnit(gdamage_0, Picked_0)
		endloop
		call GroupClear(gdamage_0)
		call DestroyGroup(gdamage_0)
		set gdamage_0 = null
	endif
	if dest_0 then
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 4)
		call DestroyEffect(ef_0)
		set ef_0 = null
		call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\CannonTowerMissile\\CannonTowerMissile.mdl", x_0, y_0))
		call KillUnit(dagger_0)
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
	endif
	set t_0 = null
	set caster_0 = null
	set gdamage_0 = null
	set p_0 = null
	set Picked_0 = null
	set dagger_0 = null
endfunction

function Trig_Case_Shot_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local unit target = GetSpellTargetUnit()
	local real angle
	local group gdamage = CreateGroup()
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0QR')
	local real damage = (20. * lvl_0) + 10.
	local location loc
	local real tx
	local real ty
	local real dist
	local unit dagger
	local effect ef
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	if target_0 == null then
		set loc_0 = GetSpellTargetLoc()
		set tx_0 = GetLocationX(loc_0)
		set ty_0 = GetLocationY(loc_0)
	else
		set tx_0 = GetUnitX(target_0)
		set ty_0 = GetUnitY(target_0)
	endif
	set angle_0 = bj_RADTODEG_1 * Atan2(ty_0 - y_0, tx_0 - x_0)
	set dist_0 = SquareRoot((tx_0 - x_0) * (tx_0 - x_0) + (ty_0 - y_0) * (ty_0 - y_0))
	if target_0 == caster_0 then
		set angle_0 = GetUnitFacing(caster_0)
		set dist_0 = 800.
	endif
	set dagger_0 = CreateUnit(GetOwningPlayer(caster_0), 'h00U', x_0, y_0, angle_0)
	set ef_0 = AddSpecialEffectTarget("Abilities\\Weapons\\CannonTowerMissile\\CannonTowerMissile.mdl", dagger_0, "origin")
	call SetUnitX(dagger_0, x_0 + 20. * Cos((angle_0) * bj_DEGTORAD_1))
	call SetUnitY(dagger_0, y_0 + 20. * Sin((angle_0) * bj_DEGTORAD_1))
	call SetUnitTimeScale(dagger_0, 2.)
	call SetUnitScale(dagger_0, 1.5, 1.5, 1.5)
	call SetUnitPathing(dagger_0, false)
	call SetUnitFlyHeight(dagger_0, 50., .0)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveGroupHandle(udg_hash_1, h_0, 2, gdamage_0)
	call SaveReal(udg_hash_1, h_0, 3, damage_0)
	call SaveEffectHandle(udg_hash_1, h_0, 4, ef_0)
	call SaveInteger(udg_hash_1, h_0, 5, R2I(900. / 40))
	call SaveReal(udg_hash_1, h_0, 6, angle_0)
	call SaveUnitHandle(udg_hash_1, h_0, 7, dagger_0)
	call SaveInteger(udg_hash_1, h_0, 9, lvl_0)
	call TimerStart(t_0, .03, true, function Trig_Case_Shot_Move_Actions)
	set caster_0 = null
	set target_0 = null
	set gdamage_0 = null
	set dagger_0 = null
	set ef_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set t_0 = null
endfunction

function Trig_Case_Shot_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0QR'
endfunction

function InitTrig_Case_Shot takes nothing returns nothing
	local integer index = 0
	set gg_trg_Case_Shot_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Case_Shot_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Case_Shot_1, Condition(function Trig_Case_Shot_Conditions))
	call TriggerAddAction(gg_trg_Case_Shot_1, function Trig_Case_Shot_Actions)
endfunction

function Trig_Learn_Fire_Position_Actions_Timer takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit hero = LoadUnitHandle(udg_hash_1, h_0, 1)
	local real time = LoadReal(udg_hash_1, h_0, 2)
	local real x = GetUnitX(hero_0)
	local real y = GetUnitY(hero_0)
	local boolean alife = LoadBoolean(udg_hash_1, h_0, 3)
	local boolean circlego = LoadBoolean(udg_hash_1, h_0, 4)
	local boolean maximum = LoadBoolean(udg_hash_1, h_0, 9)
	local real xold = LoadReal(udg_hash_1, h_0, 5)
	local real yold = LoadReal(udg_hash_1, h_0, 6)
	local real xnew
	local real ynew
	local integer hhero = GetHandleId(hero_0)
	local integer attackold = LoadInteger(udg_hash_1, hhero_0, $B2)
	local integer lvl = GetUnitAbilityLevel(hero_0, 'A0QV')
	local integer attackstack
	local integer attacknew
	local effect ef
	local unit dammi
	if (GetUnitState(hero_0, UNIT_STATE_LIFE_1) > .405 and alife_0) then
		set xnew_0 = GetUnitX(hero_0)
		set ynew_0 = GetUnitY(hero_0)
		if RAbsBJ(xnew_0 - xold_0) < 125. and RAbsBJ(ynew_0 - yold_0) < 125. then
			if time_0 < 10. then
				set time_0 = time_0 + .1
				call SaveReal(udg_hash_1, h_0, 2, time_0)
			endif
			if time_0 >= 3. then
				if circlego_0 == false then
					set circlego_0 = true
					call SaveBoolean(udg_hash_1, h_0, 4, circlego_0)
					set dammi_0 = CreateUnit(GetOwningPlayer(hero_0), 'h00U', xnew_0, ynew_0, .0)
					call SetUnitScale(dammi_0, 3., 3., 3.)
					set ef_0 = AddSpecialEffectTarget("Effects\\CircleOutBuff.mdx", dammi_0, "origin")
					call SaveEffectHandle(udg_hash_1, h_0, 7, ef_0)
					call SaveUnitHandle(udg_hash_1, h_0, $A, dammi_0)
					set ef_0 = null
					set dammi_0 = null
					call AddProgressBar(hero_0, 230., 1.1, 7., true, true, 'v', $C0, $C0, $C0)
				endif
				if maximum_0 == false and time_0 >= 10. then
					set maximum_0 = true
					call SaveBoolean(udg_hash_1, h_0, 9, maximum_0)
					call SaveBoolean(udg_hash_1, GetHandleId(hero_0), $B3, true)
					set ef_0 = AddSpecialEffectTarget("Effects\\Fire Uber.mdx", hero_0, "weapon")
					call SaveEffectHandle(udg_hash_1, h_0, 8, ef_0)
					set ef_0 = null
				endif
				set attacknew_0 = (3 + 2 * lvl_0) * R2I(time_0 - 3.)
				if attackold_0 != attacknew_0 then
					call SetAttackAbilityLevel(hero_0, attacknew_0 - attackold_0)
					call SetAttackSpeedAbilityLevel(hero_0, attacknew_0 - attackold_0)
					call SaveInteger(udg_hash_1, hhero_0, $B2, attacknew_0)
				endif
			endif
		else
			set xold_0 = xnew_0
			set yold_0 = ynew_0
			call SaveReal(udg_hash_1, h_0, 5, xold_0)
			call SaveReal(udg_hash_1, h_0, 6, yold_0)
			if time_0 >= 3. then
				call SetAttackAbilityLevel(hero_0, -attackold_0)
				call SetAttackSpeedAbilityLevel(hero_0, -attackold_0)
				call SaveInteger(udg_hash_1, hhero_0, $B2, 0)
				if circlego_0 then
					set circlego_0 = false
					call SaveBoolean(udg_hash_1, h_0, 4, circlego_0)
					set dammi_0 = LoadUnitHandle(udg_hash_1, h_0, $A)
					set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 7)
					call DestroyEffect(ef_0)
					set ef_0 = null
					call KillUnit(dammi_0)
					set dammi_0 = null
					call RemoveUnit(LoadUnitHandle(udg_hash_1, GetHandleId(hero_0), 'v'))
				endif
				if maximum_0 then
					set maximum_0 = false
					call SaveBoolean(udg_hash_1, h_0, 9, maximum_0)
					call SaveBoolean(udg_hash_1, GetHandleId(hero_0), $B3, false)
					set ef_0 = LoadEffectHandle(udg_hash_1, h_0, 8)
					call DestroyEffect(ef_0)
					set ef_0 = null
				endif
			endif
			set time_0 = .0
			call SaveReal(udg_hash_1, h_0, 2, time_0)
		endif
	endif
	set t_0 = null
	set hero_0 = null
endfunction

function Trig_Learn_Fire_Position_Actions takes nothing returns nothing
	local integer lvl = GetUnitAbilityLevel(GetLearningUnit(), 'A0QV')
	local timer t
	local integer h
	local unit hero = GetLearningUnit()
	if lvl_0 == 1 then
		set t_0 = CreateTimer()
		set h_0 = GetHandleId(t_0)
		call SaveUnitHandle(udg_hash_1, h_0, 1, hero_0)
		call SaveReal(udg_hash_1, h_0, 2, .0)
		call SaveBoolean(udg_hash_1, h_0, 3, true)
		call SaveBoolean(udg_hash_1, h_0, 4, false)
		call SaveReal(udg_hash_1, h_0, 5, GetUnitX(hero_0))
		call SaveReal(udg_hash_1, h_0, 6, GetUnitY(hero_0))
		call SaveBoolean(udg_hash_1, h_0, 9, false)
		call TimerStart(t_0, .1, true, function Trig_Learn_Fire_Position_Actions_Timer)
		set t_0 = null
	endif
	set hero_0 = null
endfunction

function Trig_Learn_Fire_Position_Conditions takes nothing returns boolean
	return GetUnitTypeId(GetLearningUnit()) != 'h00U' and GetLearnedSkill() == 'A0QV' and IsUnitIllusion(GetLearningUnit()) == false
endfunction

function InitTrig_Learn_Fire_Position takes nothing returns nothing
	local integer index = 0
	set gg_trg_Learn_Fire_Position_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Fire_Position_1, Player(index_0), EVENT_PLAYER_HERO_SKILL_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Learn_Fire_Position_1, Condition(function Trig_Learn_Fire_Position_Conditions))
	call TriggerAddAction(gg_trg_Learn_Fire_Position_1, function Trig_Learn_Fire_Position_Actions)
endfunction

function Trig_Dwarf_Cannon_Move_Actions takes nothing returns nothing
	local timer t = GetExpiredTimer()
	local integer h = GetHandleId(t_0)
	local unit caster = LoadUnitHandle(udg_hash_1, h_0, 1)
	local integer order = GetUnitCurrentOrder(caster_0)
	local integer orderId
	local integer wait1 = LoadInteger(udg_hash_1, h_0, 20)
	local unit dagger
	local group gdamage
	local real x
	local real y
	local real angle
	local effect ef
	local integer wait = LoadInteger(udg_hash_1, h_0, 19)
	local player p
	local real damage
	local real stuntime
	local group g
	local unit Picked
	local boolean dest = false
	set orderId_0 = $D0278
	if (orderId_0 != 0) then
	else
		set orderId_0 = UnitId("channel")
		if (orderId_0 != 0) then
		endif
	endif
	if order_0 == orderId_0 and wait1_0 > 0 then
		set wait1_0 = wait1_0 - 1
		call SaveInteger(udg_hash_1, h_0, 20, wait1_0)
		if wait1_0 == 0 then
			call SetUnitTimeScale(caster_0, 1.)
			set x_0 = LoadReal(udg_hash_1, h_0, 4)
			set y_0 = LoadReal(udg_hash_1, h_0, 5)
			set angle_0 = LoadReal(udg_hash_1, h_0, 7)
			set dagger_0 = CreateUnit(GetOwningPlayer(caster_0), 'h00U', x_0, y_0, angle_0)
			set ef_0 = AddSpecialEffectTarget("Abilities\\Weapons\\Mortar\\MortarMissile.mdl", dagger_0, "origin")
			call SetUnitX(dagger_0, x_0 + 20. * Cos((angle_0) * bj_DEGTORAD_1))
			call SetUnitY(dagger_0, y_0 + 20. * Sin((angle_0) * bj_DEGTORAD_1))
			call SetUnitTimeScale(dagger_0, 2.)
			call SetUnitScale(dagger_0, 2., 2., 2.)
			call SetUnitPathing(dagger_0, false)
			call SetUnitFlyHeight(dagger_0, 50., .0)
			call SaveUnitHandle(udg_hash_1, h_0, $A, dagger_0)
			call SaveEffectHandle(udg_hash_1, h_0, $B, ef_0)
			set ef_0 = null
			set dagger_0 = null
			call RemoveUnit(LoadUnitHandle(udg_hash_1, GetHandleId(caster_0), 'u'))
			call SaveBoolean(udg_hash_1, h_0, 21, true)
		endif
	endif
	if order_0 != orderId_0 and wait1_0 > 0 and LoadBoolean(udg_hash_1, h_0, 21) == false then
		call SetUnitTimeScale(caster_0, 1.)
		call RemoveUnit(LoadUnitHandle(udg_hash_1, GetHandleId(caster_0), 'u'))
		set dest_0 = true
	endif
	if LoadBoolean(udg_hash_1, h_0, 21) and wait_0 > 0 then
		set wait_0 = wait_0 - 1
		call SaveInteger(udg_hash_1, h_0, 19, wait_0)
		set angle_0 = LoadReal(udg_hash_1, h_0, 7)
		set dagger_0 = LoadUnitHandle(udg_hash_1, h_0, $A)
		set gdamage_0 = LoadGroupHandle(udg_hash_1, h_0, 2)
		set p_0 = GetOwningPlayer(caster_0)
		set damage_0 = LoadReal(udg_hash_1, h_0, 3)
		set stuntime_0 = LoadReal(udg_hash_1, h_0, 6)
		set g_0 = CreateGroup()
		call SetUnitPosition(dagger_0, GetUnitX(dagger_0) + 50. * Cos((angle_0) * bj_DEGTORAD_1), GetUnitY(dagger_0) + 50. * Sin((angle_0) * bj_DEGTORAD_1))
		call GroupEnumUnitsInRange(g_0, GetUnitX(dagger_0) + 50. * Cos((angle_0) * bj_DEGTORAD_1), GetUnitY(dagger_0) + 50. * Sin((angle_0) * bj_DEGTORAD_1), 200., null)
		loop
			set Picked_0 = FirstOfGroup(g_0)
			exitwhen Picked_0 == null
			if IsUnitEnemy(Picked_0, p_0) and IsUnitInGroup(Picked_0, gdamage_0) == false and GetUnitState(Picked_0, UNIT_STATE_LIFE_1) > .0 and IsUnitType(Picked_0, UNIT_TYPE_STRUCTURE_1) == false and IsUnitType(Picked_0, UNIT_TYPE_MAGIC_IMMUNE_1) == false and GetUnitTypeId(Picked_0) != 'h00U' then
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Rifle\\RifleImpact.mdl", Picked_0, "chest"))
				call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GyroCopter\\GyroCopterImpact.mdl", Picked_0, "chest"))
				call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPeasant.mdl", Picked_0, "origin"))
				call StunUnitTimed(Picked_0, stuntime_0)
				call GroupAddUnit(gdamage_0, Picked_0)
				call UnitDamageTarget(caster_0, Picked_0, damage_0, false, false, ATTACK_TYPE_NORMAL_1, DAMAGE_TYPE_UNKNOWN_1, WEAPON_TYPE_WHOKNOWS_1)
			endif
			call GroupRemoveUnit(g_0, Picked_0)
		endloop
		call SaveGroupHandle(udg_hash_1, h_0, 2, gdamage_0)
		call GroupClear(g_0)
		call DestroyGroup(g_0)
		set g_0 = null
		set dagger_0 = null
		set gdamage_0 = null
		set p_0 = null
	endif
	if LoadBoolean(udg_hash_1, h_0, 21) and wait_0 <= 0 then
		set dest_0 = true
	endif
	if dest_0 then
		set gdamage_0 = LoadGroupHandle(udg_hash_1, h_0, 2)
		call GroupClear(gdamage_0)
		call DestroyGroup(gdamage_0)
		set gdamage_0 = null
		set dagger_0 = LoadUnitHandle(udg_hash_1, h_0, $A)
		set ef_0 = LoadEffectHandle(udg_hash_1, h_0, $B)
		call DestroyEffect(ef_0)
		set ef_0 = null
		call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\Mortar\\MortarMissile.mdl", GetUnitX(dagger_0), GetUnitY(dagger_0)))
		call KillUnit(dagger_0)
		call FlushChildHashtable(udg_hash_1, h_0)
		call DestroyTimer(t_0)
		set dagger_0 = null
	endif
	set t_0 = null
	set caster_0 = null
endfunction

function Trig_Dwarf_Cannon_Actions takes nothing returns nothing
	local unit caster = GetSpellAbilityUnit()
	local real x = GetUnitX(caster_0)
	local real y = GetUnitY(caster_0)
	local unit target = GetSpellTargetUnit()
	local real angle
	local group gdamage = CreateGroup()
	local integer lvl = GetUnitAbilityLevel(caster_0, 'A0QU')
	local real damage = (150. * lvl_0) + 50.
	local real stuntime = 1. + 1. * lvl_0
	local location loc
	local real tx
	local real ty
	local real dist
	local unit dagger
	local timer t = CreateTimer()
	local integer h = GetHandleId(t_0)
	call SetUnitTimeScale(caster_0, .15)
	call SetUnitAnimationByIndex(caster_0, 3)
	if target_0 == null then
		set loc_0 = GetSpellTargetLoc()
		set tx_0 = GetLocationX(loc_0)
		set ty_0 = GetLocationY(loc_0)
	else
		set tx_0 = GetUnitX(target_0)
		set ty_0 = GetUnitY(target_0)
	endif
	set angle_0 = bj_RADTODEG_1 * Atan2(ty_0 - y_0, tx_0 - x_0)
	call AddProgressBar(caster_0, 200., 1., 1.5, false, true, 'u', $C0, $C0, $C0)
	call SaveUnitHandle(udg_hash_1, h_0, 1, caster_0)
	call SaveGroupHandle(udg_hash_1, h_0, 2, gdamage_0)
	call SaveReal(udg_hash_1, h_0, 3, damage_0)
	call SaveReal(udg_hash_1, h_0, 4, x_0)
	call SaveReal(udg_hash_1, h_0, 5, y_0)
	call SaveReal(udg_hash_1, h_0, 6, stuntime_0)
	call SaveReal(udg_hash_1, h_0, 7, angle_0)
	call SaveInteger(udg_hash_1, h_0, 9, lvl_0)
	call SaveInteger(udg_hash_1, h_0, 19, 30)
	call SaveInteger(udg_hash_1, h_0, 20, 50)
	call SaveBoolean(udg_hash_1, h_0, 21, false)
	call TimerStart(t_0, .03, true, function Trig_Dwarf_Cannon_Move_Actions)
	set caster_0 = null
	set target_0 = null
	set gdamage_0 = null
	call RemoveLocation(loc_0)
	set loc_0 = null
	set t_0 = null
endfunction

function Trig_Dwarf_Cannon_Conditions takes nothing returns boolean
	return GetSpellAbilityId() == 'A0QU'
endfunction

function InitTrig_Dwarf_Cannon takes nothing returns nothing
	local integer index = 0
	set gg_trg_Dwarf_Cannon_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Dwarf_Cannon_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Dwarf_Cannon_1, Condition(function Trig_Dwarf_Cannon_Conditions))
	call TriggerAddAction(gg_trg_Dwarf_Cannon_1, function Trig_Dwarf_Cannon_Actions)
endfunction

function Trig_Load_Sniper_Actions takes nothing returns nothing
	call AbilityPreload('A0QR', 6)
	call AbilityPreload('A0QV', 6)
	call AbilityPreload('A0QT', 6)
	call AbilityPreload('A0QU', 3)
	call AbilityPreload('A0QS', 6)
	call AbilityPreload('B05A', 1)
	call EffectPreload("Abilities\\Weapons\\SteamTank\\SteamTankImpact.mdl")
	call EffectPreload("Abilities\\Weapons\\GyroCopter\\GyroCopterMissile.mdl")
	call EffectPreload("Abilities\\Weapons\\GyroCopter\\GyroCopterImpact.mdl")
	call EffectPreload("Abilities\\Weapons\\CannonTowerMissile\\CannonTowerMissile.mdl")
	call EffectPreload("Abilities\\Weapons\\Rifle\\RifleImpact.mdl")
	call EffectPreload("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPeasant.mdl")
	call EffectPreload("Effects\\Fire Uber.mdx")
	call EffectPreload("Effects\\CircleOutBuff.mdx")
	call EffectPreload("Abilities\\Weapons\\Mortar\\MortarMissile.mdl")
	call EnableTrigger(gg_trg_Case_Shot_1)
	call EnableTrigger(gg_trg_Learn_Fire_Position_1)
	call EnableTrigger(gg_trg_Dwarf_Cannon_1)
endfunction

function InitTrig_Load_Sniper takes nothing returns nothing
	set gg_trg_Load_Sniper_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Load_Sniper_1, function Trig_Load_Sniper_Actions)
endfunction

function InitCustomTriggers takes nothing returns nothing
	call InitTrig_Players_Start_Script()
	call InitTrig_InitMap()
	call InitTrig_InitMapStage2()
	call InitTrig_System_Spells_Load()
	call InitTrig_Items_Preload()
	call InitTrig_Igrok_Massiv_Save()
	call InitTrig_Load_Vsiakoe()
	call InitTrig_Igrok_Massiv_Liver()
	call InitTrig_Messager()
	call InitTrig_Create_TExttags_about_Shops()
	call InitTrig_InitHashtable()
	call InitTrig_Save_Sounds()
	call InitTrig_HandleCounter()
	call InitTrig_Set_Chlenix()
	call InitTrig_Set_Energy_Walls()
	call InitTrig_Nachalo_Eiti_aren()
	call InitTrig_HeroDeadonEitiArena()
	call InitTrig__PortalCheckTop()
	call InitTrig__PortalCheckBot()
	call InitTrig_LinkItemsInit()
	call InitTrig_ItemPickedUp()
	call InitTrig_ChargesConnecting()
	call InitTrig_Remove_Dammi_Items()
	call InitTrig_Save_Items_Cost()
	call InitTrig_Ice_Boss()
	call InitTrig_Ice_Wall()
	call InitTrig_Ice_Storm()
	call InitTrig_Ice_Rain()
	call InitTrig_Cold_Punishment()
	call InitTrig_Ice_Restoration()
	call InitTrig_BossStart()
	call InitTrig_FlameSpells()
	call InitTrig_Fire_Circle()
	call InitTrig_Fire_Meteor()
	call InitTrig_Upgrade_Summons()
	call InitTrig_UseBeornSpells()
	call InitTrig_Start_Beorn_Den()
	call InitTrig_Beorn_Push()
	call InitTrig_Beorn_Stomp()
	call InitTrig_HeroUnitGameSave()
	call InitTrig_INIT()
	call InitTrig_Pick_Hero_Upgrade()
	call InitTrig_Hero_Dead()
	call InitTrig_Start_Duel()
	call InitTrig_Hero_Death_On_Duel()
	call InitTrig_Timer_Check()
	call InitTrig_go_mochiytb_portal()
	call InitTrig_Start_game()
	call InitTrig_StartWave()
	call InitTrig_MobsAttackBase()
	call InitTrig_TeleportStuckedCreeps()
	call InitTrig_vhodit_v_zony()
	call InitTrig_Add_Gold_System_Receiving_Gold_for_Creeps()
	call InitTrig_Init_System_Receiving_Gold_for_Creeps()
	call InitTrig_Init_System_Receiving_Experience_for_Creeps()
	call InitTrig_Add_Experience_System_Receiving_Experience_for_Creeps()
	call InitTrig_Init_Potion_System()
	call InitTrig_Mob_Dead_Create_Potion()
	call InitTrig_Check_Potion_Picked_Up()
	call InitTrig_InitSystem()
	call InitTrig_EnterUnit()
	call InitTrig_AddDamage()
	call InitTrig_TimeTalisman()
	call InitTrig_Take_Paladin_Armor()
	call InitTrig_Take_Archimagus_Staff()
	call InitTrig_Lost_Charged_Staff_of_Lightning()
	call InitTrig_Blood_Bow()
	call InitTrig_Balance_Ring()
	call InitTrig_Armageddon_Staff()
	call InitTrig_Sargeras_Crown()
	call InitTrig_Lost_Sargeras_Crown()
	call InitTrig_Take_Sargeras_Crown()
	call InitTrig_Lost_Archimagus_Armor()
	call InitTrig_Take_Archimagus_Armor()
	call InitTrig_Sorcerers_Talisman_Cast()
	call InitTrig_Sorcerers_Talisman()
	call InitTrig_Sorcerers_Talisman_Dead_Unit()
	call InitTrig_Orc_Banner()
	call InitTrig_Devil_Axe()
	call InitTrig_Devil_Axe_Kill_Unit()
	call InitTrig_Tokugawas_Katan_Kill_Unit()
	call InitTrig_Tokugawas_Katan()
	call InitTrig_Kings_Armor()
	call InitTrig_Steel_Bib()
	call InitTrig_Archimagus_Staff()
	call InitTrig_Isidors_Scepter()
	call InitTrig_Detached_Shield_Use()
	call InitTrig_Cuirass_of_Invulnerable_Use2()
	call InitTrig_Lost_Cuirass_of_Invulnerable()
	call InitTrig_Take_Cuirass_of_Invulnerable()
	call InitTrig_Fire_Staff()
	call InitTrig_Demon_Axe()
	call InitTrig_Demon_Axe_Kill_Unit()
	call InitTrig_Boots_Rescue()
	call InitTrig_Astral_Staff()
	call InitTrig_Healer_Staff()
	call InitTrig_Magic_Amulet()
	call InitTrig_Blood_Dagger()
	call InitTrig_Agility_Blade()
	call InitTrig_Bone_Staff_Set_Summon_Ability_Level()
	call InitTrig_Novice_Amulet()
	call InitTrig_Glove_of_Andromat()
	call InitTrig_Glove_of_Midas()
	call InitTrig_Heroes_more_attacked_priority_when_guards()
	call InitTrig_Player_Fast_Purchase_System()
	call InitTrig_Show_hint_abount_hints()
	call InitTrig_Show_Hint_Abount_Items()
	call InitTrig_Hint_About_Random()
	call InitTrig_Show_hint_abount_reference_panel()
	call InitTrig_Show_Ability_Learn()
	call InitTrig_System_Personal_Items_Buy_Item()
	call InitTrig_System_Personal_Items_Pick_Up_Item()
	call InitTrig_no_attack()
	call InitTrig_Select_Refrence_Panel()
	call InitTrig_ShopAnimation()
	call InitTrig_ShopStopAnimation()
	call InitTrig_RedMarkToUnit()
	call InitTrig_UnSelectedDummyRedMark()
	call InitTrig_SpecEffect_on_Casters()
	call InitTrig_PortalSpecEffects()
	call InitTrig_Gates_Start_Animation()
	call InitTrig_PlayerEnterGameCommand()
	call InitTrig_PlayerUseSpellGameCommand()
	call InitTrig_GuardsExorcistDead()
	call InitTrig_PauseUnitWhenDefeat()
	call InitTrig_PauseUnitWhenWin()
	call InitTrig_GameEndWin()
	call InitTrig_Respawn_trees_Init()
	call InitTrig_Respawn_trees()
	call InitTrig_Day_Weather()
	call InitTrig_Sky_Morning()
	call InitTrig_Sky_Day()
	call InitTrig_Night_Weather()
	call InitTrig_Sky_Evening()
	call InitTrig_Sky_Night()
	call InitTrig_Lightnings_Weather_Effect_Rainy()
	call InitTrig_Periodic_Rune_Creation()
	call InitTrig_Rune_PickedUp()
	call InitTrig_Initialization_MultiBoard()
	call InitTrig_Hero_MultiBoard_LvlUp()
	call InitTrig_Time_Check_and_Player_Gold_for_MultiBoard()
	call InitTrig_Reincarnation_Skeletons()
	call InitTrig_BossSkeletRaise()
	call InitTrig_BossSkeletSkillActiv()
	call InitTrig_Fire_Arrow()
	call InitTrig_Use_UnholyFrenzy_and_Fire_Arrow()
	call InitTrig_Create_Tombstone()
	call InitTrig_ZombieExploadDeath()
	call InitTrig_Damned_Soul()
	call InitTrig_Use_PowerofHorror_and_Curse_and_Slam_and_Dumned_Soul()
	call InitTrig_Throw_Meat()
	call InitTrig_Earth_Clap()
	call InitTrig_Ghoul_Jump()
	call InitTrig_BurrowStrike()
	call InitTrig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump()
	call InitTrig_BeetleCorpseBurrowCast()
	call InitTrig_BeetleCorpseBurrow()
	call InitTrig_Cocoon_Creation()
	call InitTrig_Poisonous_Spittle_Cast()
	call InitTrig_Holes_Of_Grave_Diggers_Debug_Kill()
	call InitTrig_Holes_Of_Grave_Diggers_Cast()
	call InitTrig_Nerub_Spider()
	call InitTrig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger()
	call InitTrig_Damned_Ents_Reincarnation()
	call InitTrig_Rage_of_Decay()
	call InitTrig_Use_ThrowStone_and_TurnIntoEnt()
	call InitTrig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay()
	call InitTrig_Troll_Dead_Remove_Bugs()
	call InitTrig_Boss_Troll_Entangle_Throw()
	call InitTrig_Use_Berserk_and_BerserkBoss()
	call InitTrig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle()
	call InitTrig_Aspect_of_Magic_Protection()
	call InitTrig_Remove_Effects_From_Bosses()
	call InitTrig_Metka_Dreneev()
	call InitTrig_Fast_Attack()
	call InitTrig_Bash_Attack()
	call InitTrig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack()
	call InitTrig_Blink_Strike()
	call InitTrig_Victim_Search()
	call InitTrig_Black_Hole()
	call InitTrig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar()
	call InitTrig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH()
	call InitTrig_Weakness()
	call InitTrig_Astral_Dispersal()
	call InitTrig_Infernal_Ram()
	call InitTrig_Fiery_Blow()
	call InitTrig_Bloody_Jump()
	call InitTrig_Blood_Absorption()
	call InitTrig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u()
	call InitTrig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4()
	call InitTrig_Hatred_of_fire()
	call InitTrig_set_fire()
	call InitTrig_set_fire_2()
	call InitTrig_the_creation_of_the_image()
	call InitTrig_fiery_explosions()
	call InitTrig_Breathoffire()
	call InitTrig_Fire_Explosions()
	call InitTrig_BossStomp()
	call InitTrig_Mark_of_Fire()
	call InitTrig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire()
	call InitTrig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp()
	call InitTrig_Power_of_Skeletons()
	call InitTrig_Water_Elemental_Load()
	call InitTrig_Init_kreeps()
	call InitTrig_spirits_of_water_dead()
	call InitTrig_Skill_Gertva()
	call InitTrig_Opening_Streams()
	call InitTrig_Water_Explosion()
	call InitTrig_Tsunami()
	call InitTrig_Guardsman_Load()
	call InitTrig_Protective_Stand_Switch()
	call InitTrig_Learn_Fighting_Skills()
	call InitTrig_Ram_Board()
	call InitTrig_Warcry()
	call InitTrig_Drenor_Bull_Load()
	call InitTrig_Drenor_Bull_Show_Hint()
	call InitTrig_Drenor_Bull_Show_Rage()
	call InitTrig_Axe_Throw()
	call InitTrig_Violent_Roar()
	call InitTrig_upgrade_Berserk()
	call InitTrig_Learn_Spell_Rage()
	call InitTrig_GrogTarDead()
	call InitTrig_attack_hero_Rage()
	call InitTrig_kill_hero_Rage()
	call InitTrig_Sniatie_Rage()
	call InitTrig_Timer_Rage()
	call InitTrig_Illusionist_Load()
	call InitTrig_Reflection()
	call InitTrig_Illusory_Attack()
	call InitTrig_Summon_Illusions_with_Reflection()
	call InitTrig_Illusions_with_Phantoms_Dead()
	call InitTrig_BladeMaster_Load()
	call InitTrig_Dissection()
	call InitTrig_Whirlwind()
	call InitTrig_Imboweling()
	call InitTrig_Master_of_Lightnings_Load()
	call InitTrig_Thundercloud()
	call InitTrig_Power_of_Lightnings()
	call InitTrig_Electric_Field()
	call InitTrig_Storm()
	call InitTrig_Respawnlol()
	call InitTrig_Ranger_Load()
	call InitTrig_MultiShotSwitch()
	call InitTrig_Learn_Release_of_Arrows()
	call InitTrig_Release_of_Arrows()
	call InitTrig_Dexterity_of_the_Ranger()
	call InitTrig_Healer_Load()
	call InitTrig_Good_Healing()
	call InitTrig_Spiritual_Communication()
	call InitTrig_Curing_Light()
	call InitTrig_Guardian_Angel()
	call InitTrig_Paladin_Load()
	call InitTrig_Spiral_of_Light()
	call InitTrig_Keeper_Seal()
	call InitTrig_Light_Hammer()
	call InitTrig_God_Hand()
	call InitTrig_Stone_Guard_Load()
	call InitTrig_Boulder_Throw()
	call InitTrig_Earth_Shiver()
	call InitTrig_Learn_Stone_Armor()
	call InitTrig_Rock_Strike()
	call InitTrig_Archdruid_Load()
	call InitTrig_Energy_of_Nature()
	call InitTrig_Life_Chain()
	call InitTrig_Ent_Creation()
	call InitTrig_Nature_Wrath()
	call InitTrig_Falling_Star()
	call InitTrig_Moon_Chackram()
	call InitTrig_Moon_Wind()
	call InitTrig_Night_Heart()
	call InitTrig_MoonWarrior_Load()
	call InitTrig_Ancient_Communication()
	call InitTrig_Learn_Power_of_Ancestors()
	call InitTrig_Switch_Power_of_Ancestors()
	call InitTrig_Earth_Split()
	call InitTrig_Ancient_Help()
	call InitTrig_SpiritBreaker_Load()
	call InitTrig_Dash()
	call InitTrig_Dagger_Throw()
	call InitTrig_Kara_Justice()
	call InitTrig_Warden_Load()
	call InitTrig_Strength_Fist()
	call InitTrig_Fighting_Impact()
	call InitTrig_Learn_Marshal_Armor()
	call InitTrig_Illusive_Army()
	call InitTrig_Marshal_Load()
	call InitTrig_Chain_Lightning()
	call InitTrig_Magic_Trap()
	call InitTrig_Remove_Lightning_Form_Dead_Units()
	call InitTrig_EnergyWave()
	call InitTrig_Magic_Epicenter()
	call InitTrig_Load_ArchMage()
	call InitTrig_Toxic_Field()
	call InitTrig_Poison_Bomb()
	call InitTrig_Learn_Ogre_Rage()
	call InitTrig_Potion_of_Growth()
	call InitTrig_Load_Alchemist()
	call InitTrig_Case_Shot()
	call InitTrig_Learn_Fire_Position()
	call InitTrig_Dwarf_Cannon()
	call InitTrig_Load_Sniper()
endfunction

function RunInitializationTriggers takes nothing returns nothing
	call ConditionalTriggerExecute(gg_trg_InitHashtable_1)
	call ConditionalTriggerExecute(gg_trg_InitSystem_1)
	call ConditionalTriggerExecute(gg_trg_Init_kreeps_1)
	call ConditionalTriggerExecute(gg_trg_Drenor_Bull_Load_1)
endfunction

function InitCustomPlayerSlots takes nothing returns nothing
	call SetPlayerStartLocation(Player(0), 0)
	call ForcePlayerStartLocation(Player(0), 0)
	call SetPlayerColor(Player(0), ConvertPlayerColor(0))
	call SetPlayerRacePreference(Player(0), RACE_PREF_HUMAN_1)
	call SetPlayerRaceSelectable(Player(0), false)
	call SetPlayerController(Player(0), MAP_CONTROL_USER_1)
	call SetPlayerStartLocation(Player(1), 1)
	call ForcePlayerStartLocation(Player(1), 1)
	call SetPlayerColor(Player(1), ConvertPlayerColor(1))
	call SetPlayerRacePreference(Player(1), RACE_PREF_HUMAN_1)
	call SetPlayerRaceSelectable(Player(1), false)
	call SetPlayerController(Player(1), MAP_CONTROL_USER_1)
	call SetPlayerStartLocation(Player(2), 2)
	call ForcePlayerStartLocation(Player(2), 2)
	call SetPlayerColor(Player(2), ConvertPlayerColor(2))
	call SetPlayerRacePreference(Player(2), RACE_PREF_HUMAN_1)
	call SetPlayerRaceSelectable(Player(2), false)
	call SetPlayerController(Player(2), MAP_CONTROL_USER_1)
	call SetPlayerStartLocation(Player(3), 3)
	call ForcePlayerStartLocation(Player(3), 3)
	call SetPlayerColor(Player(3), ConvertPlayerColor(3))
	call SetPlayerRacePreference(Player(3), RACE_PREF_HUMAN_1)
	call SetPlayerRaceSelectable(Player(3), false)
	call SetPlayerController(Player(3), MAP_CONTROL_USER_1)
	call SetPlayerStartLocation(Player(4), 4)
	call ForcePlayerStartLocation(Player(4), 4)
	call SetPlayerColor(Player(4), ConvertPlayerColor(4))
	call SetPlayerRacePreference(Player(4), RACE_PREF_HUMAN_1)
	call SetPlayerRaceSelectable(Player(4), false)
	call SetPlayerController(Player(4), MAP_CONTROL_USER_1)
	call SetPlayerStartLocation(Player(5), 5)
	call ForcePlayerStartLocation(Player(5), 5)
	call SetPlayerColor(Player(5), ConvertPlayerColor(5))
	call SetPlayerRacePreference(Player(5), RACE_PREF_HUMAN_1)
	call SetPlayerRaceSelectable(Player(5), false)
	call SetPlayerController(Player(5), MAP_CONTROL_USER_1)
	call SetPlayerStartLocation(Player(6), 6)
	call ForcePlayerStartLocation(Player(6), 6)
	call SetPlayerColor(Player(6), ConvertPlayerColor(6))
	call SetPlayerRacePreference(Player(6), RACE_PREF_HUMAN_1)
	call SetPlayerRaceSelectable(Player(6), false)
	call SetPlayerController(Player(6), MAP_CONTROL_USER_1)
	call SetPlayerStartLocation(Player(7), 7)
	call ForcePlayerStartLocation(Player(7), 7)
	call SetPlayerColor(Player(7), ConvertPlayerColor(7))
	call SetPlayerRacePreference(Player(7), RACE_PREF_HUMAN_1)
	call SetPlayerRaceSelectable(Player(7), false)
	call SetPlayerController(Player(7), MAP_CONTROL_USER_1)
	call SetPlayerStartLocation(Player(8), 8)
	call ForcePlayerStartLocation(Player(8), 8)
	call SetPlayerColor(Player(8), ConvertPlayerColor(8))
	call SetPlayerRacePreference(Player(8), RACE_PREF_HUMAN_1)
	call SetPlayerRaceSelectable(Player(8), false)
	call SetPlayerController(Player(8), MAP_CONTROL_USER_1)
	call SetPlayerStartLocation(Player($B), 9)
	call ForcePlayerStartLocation(Player($B), 9)
	call SetPlayerColor(Player($B), ConvertPlayerColor($B))
	call SetPlayerRacePreference(Player($B), RACE_PREF_UNDEAD_1)
	call SetPlayerRaceSelectable(Player($B), false)
	call SetPlayerController(Player($B), MAP_CONTROL_COMPUTER_1)
endfunction

function InitCustomTeams takes nothing returns nothing
	call SetPlayerTeam(Player(0), 0)
	call SetPlayerState(Player(0), PLAYER_STATE_ALLIED_VICTORY_1, 1)
	call SetPlayerTeam(Player(1), 0)
	call SetPlayerState(Player(1), PLAYER_STATE_ALLIED_VICTORY_1, 1)
	call SetPlayerTeam(Player(2), 0)
	call SetPlayerState(Player(2), PLAYER_STATE_ALLIED_VICTORY_1, 1)
	call SetPlayerTeam(Player(3), 0)
	call SetPlayerState(Player(3), PLAYER_STATE_ALLIED_VICTORY_1, 1)
	call SetPlayerTeam(Player(4), 0)
	call SetPlayerState(Player(4), PLAYER_STATE_ALLIED_VICTORY_1, 1)
	call SetPlayerTeam(Player(5), 0)
	call SetPlayerState(Player(5), PLAYER_STATE_ALLIED_VICTORY_1, 1)
	call SetPlayerTeam(Player(6), 0)
	call SetPlayerState(Player(6), PLAYER_STATE_ALLIED_VICTORY_1, 1)
	call SetPlayerTeam(Player(7), 0)
	call SetPlayerState(Player(7), PLAYER_STATE_ALLIED_VICTORY_1, 1)
	call SetPlayerTeam(Player(8), 0)
	call SetPlayerState(Player(8), PLAYER_STATE_ALLIED_VICTORY_1, 1)
	call SetPlayerAllianceStateAllyBJ(Player(0), Player(1), true)
	call SetPlayerAllianceStateAllyBJ(Player(0), Player(2), true)
	call SetPlayerAllianceStateAllyBJ(Player(0), Player(3), true)
	call SetPlayerAllianceStateAllyBJ(Player(0), Player(4), true)
	call SetPlayerAllianceStateAllyBJ(Player(0), Player(5), true)
	call SetPlayerAllianceStateAllyBJ(Player(0), Player(6), true)
	call SetPlayerAllianceStateAllyBJ(Player(0), Player(7), true)
	call SetPlayerAllianceStateAllyBJ(Player(0), Player(8), true)
	call SetPlayerAllianceStateAllyBJ(Player(1), Player(0), true)
	call SetPlayerAllianceStateAllyBJ(Player(1), Player(2), true)
	call SetPlayerAllianceStateAllyBJ(Player(1), Player(3), true)
	call SetPlayerAllianceStateAllyBJ(Player(1), Player(4), true)
	call SetPlayerAllianceStateAllyBJ(Player(1), Player(5), true)
	call SetPlayerAllianceStateAllyBJ(Player(1), Player(6), true)
	call SetPlayerAllianceStateAllyBJ(Player(1), Player(7), true)
	call SetPlayerAllianceStateAllyBJ(Player(1), Player(8), true)
	call SetPlayerAllianceStateAllyBJ(Player(2), Player(0), true)
	call SetPlayerAllianceStateAllyBJ(Player(2), Player(1), true)
	call SetPlayerAllianceStateAllyBJ(Player(2), Player(3), true)
	call SetPlayerAllianceStateAllyBJ(Player(2), Player(4), true)
	call SetPlayerAllianceStateAllyBJ(Player(2), Player(5), true)
	call SetPlayerAllianceStateAllyBJ(Player(2), Player(6), true)
	call SetPlayerAllianceStateAllyBJ(Player(2), Player(7), true)
	call SetPlayerAllianceStateAllyBJ(Player(2), Player(8), true)
	call SetPlayerAllianceStateAllyBJ(Player(3), Player(0), true)
	call SetPlayerAllianceStateAllyBJ(Player(3), Player(1), true)
	call SetPlayerAllianceStateAllyBJ(Player(3), Player(2), true)
	call SetPlayerAllianceStateAllyBJ(Player(3), Player(4), true)
	call SetPlayerAllianceStateAllyBJ(Player(3), Player(5), true)
	call SetPlayerAllianceStateAllyBJ(Player(3), Player(6), true)
	call SetPlayerAllianceStateAllyBJ(Player(3), Player(7), true)
	call SetPlayerAllianceStateAllyBJ(Player(3), Player(8), true)
	call SetPlayerAllianceStateAllyBJ(Player(4), Player(0), true)
	call SetPlayerAllianceStateAllyBJ(Player(4), Player(1), true)
	call SetPlayerAllianceStateAllyBJ(Player(4), Player(2), true)
	call SetPlayerAllianceStateAllyBJ(Player(4), Player(3), true)
	call SetPlayerAllianceStateAllyBJ(Player(4), Player(5), true)
	call SetPlayerAllianceStateAllyBJ(Player(4), Player(6), true)
	call SetPlayerAllianceStateAllyBJ(Player(4), Player(7), true)
	call SetPlayerAllianceStateAllyBJ(Player(4), Player(8), true)
	call SetPlayerAllianceStateAllyBJ(Player(5), Player(0), true)
	call SetPlayerAllianceStateAllyBJ(Player(5), Player(1), true)
	call SetPlayerAllianceStateAllyBJ(Player(5), Player(2), true)
	call SetPlayerAllianceStateAllyBJ(Player(5), Player(3), true)
	call SetPlayerAllianceStateAllyBJ(Player(5), Player(4), true)
	call SetPlayerAllianceStateAllyBJ(Player(5), Player(6), true)
	call SetPlayerAllianceStateAllyBJ(Player(5), Player(7), true)
	call SetPlayerAllianceStateAllyBJ(Player(5), Player(8), true)
	call SetPlayerAllianceStateAllyBJ(Player(6), Player(0), true)
	call SetPlayerAllianceStateAllyBJ(Player(6), Player(1), true)
	call SetPlayerAllianceStateAllyBJ(Player(6), Player(2), true)
	call SetPlayerAllianceStateAllyBJ(Player(6), Player(3), true)
	call SetPlayerAllianceStateAllyBJ(Player(6), Player(4), true)
	call SetPlayerAllianceStateAllyBJ(Player(6), Player(5), true)
	call SetPlayerAllianceStateAllyBJ(Player(6), Player(7), true)
	call SetPlayerAllianceStateAllyBJ(Player(6), Player(8), true)
	call SetPlayerAllianceStateAllyBJ(Player(7), Player(0), true)
	call SetPlayerAllianceStateAllyBJ(Player(7), Player(1), true)
	call SetPlayerAllianceStateAllyBJ(Player(7), Player(2), true)
	call SetPlayerAllianceStateAllyBJ(Player(7), Player(3), true)
	call SetPlayerAllianceStateAllyBJ(Player(7), Player(4), true)
	call SetPlayerAllianceStateAllyBJ(Player(7), Player(5), true)
	call SetPlayerAllianceStateAllyBJ(Player(7), Player(6), true)
	call SetPlayerAllianceStateAllyBJ(Player(7), Player(8), true)
	call SetPlayerAllianceStateAllyBJ(Player(8), Player(0), true)
	call SetPlayerAllianceStateAllyBJ(Player(8), Player(1), true)
	call SetPlayerAllianceStateAllyBJ(Player(8), Player(2), true)
	call SetPlayerAllianceStateAllyBJ(Player(8), Player(3), true)
	call SetPlayerAllianceStateAllyBJ(Player(8), Player(4), true)
	call SetPlayerAllianceStateAllyBJ(Player(8), Player(5), true)
	call SetPlayerAllianceStateAllyBJ(Player(8), Player(6), true)
	call SetPlayerAllianceStateAllyBJ(Player(8), Player(7), true)
	call SetPlayerAllianceStateVisionBJ(Player(0), Player(1), true)
	call SetPlayerAllianceStateVisionBJ(Player(0), Player(2), true)
	call SetPlayerAllianceStateVisionBJ(Player(0), Player(3), true)
	call SetPlayerAllianceStateVisionBJ(Player(0), Player(4), true)
	call SetPlayerAllianceStateVisionBJ(Player(0), Player(5), true)
	call SetPlayerAllianceStateVisionBJ(Player(0), Player(6), true)
	call SetPlayerAllianceStateVisionBJ(Player(0), Player(7), true)
	call SetPlayerAllianceStateVisionBJ(Player(0), Player(8), true)
	call SetPlayerAllianceStateVisionBJ(Player(1), Player(0), true)
	call SetPlayerAllianceStateVisionBJ(Player(1), Player(2), true)
	call SetPlayerAllianceStateVisionBJ(Player(1), Player(3), true)
	call SetPlayerAllianceStateVisionBJ(Player(1), Player(4), true)
	call SetPlayerAllianceStateVisionBJ(Player(1), Player(5), true)
	call SetPlayerAllianceStateVisionBJ(Player(1), Player(6), true)
	call SetPlayerAllianceStateVisionBJ(Player(1), Player(7), true)
	call SetPlayerAllianceStateVisionBJ(Player(1), Player(8), true)
	call SetPlayerAllianceStateVisionBJ(Player(2), Player(0), true)
	call SetPlayerAllianceStateVisionBJ(Player(2), Player(1), true)
	call SetPlayerAllianceStateVisionBJ(Player(2), Player(3), true)
	call SetPlayerAllianceStateVisionBJ(Player(2), Player(4), true)
	call SetPlayerAllianceStateVisionBJ(Player(2), Player(5), true)
	call SetPlayerAllianceStateVisionBJ(Player(2), Player(6), true)
	call SetPlayerAllianceStateVisionBJ(Player(2), Player(7), true)
	call SetPlayerAllianceStateVisionBJ(Player(2), Player(8), true)
	call SetPlayerAllianceStateVisionBJ(Player(3), Player(0), true)
	call SetPlayerAllianceStateVisionBJ(Player(3), Player(1), true)
	call SetPlayerAllianceStateVisionBJ(Player(3), Player(2), true)
	call SetPlayerAllianceStateVisionBJ(Player(3), Player(4), true)
	call SetPlayerAllianceStateVisionBJ(Player(3), Player(5), true)
	call SetPlayerAllianceStateVisionBJ(Player(3), Player(6), true)
	call SetPlayerAllianceStateVisionBJ(Player(3), Player(7), true)
	call SetPlayerAllianceStateVisionBJ(Player(3), Player(8), true)
	call SetPlayerAllianceStateVisionBJ(Player(4), Player(0), true)
	call SetPlayerAllianceStateVisionBJ(Player(4), Player(1), true)
	call SetPlayerAllianceStateVisionBJ(Player(4), Player(2), true)
	call SetPlayerAllianceStateVisionBJ(Player(4), Player(3), true)
	call SetPlayerAllianceStateVisionBJ(Player(4), Player(5), true)
	call SetPlayerAllianceStateVisionBJ(Player(4), Player(6), true)
	call SetPlayerAllianceStateVisionBJ(Player(4), Player(7), true)
	call SetPlayerAllianceStateVisionBJ(Player(4), Player(8), true)
	call SetPlayerAllianceStateVisionBJ(Player(5), Player(0), true)
	call SetPlayerAllianceStateVisionBJ(Player(5), Player(1), true)
	call SetPlayerAllianceStateVisionBJ(Player(5), Player(2), true)
	call SetPlayerAllianceStateVisionBJ(Player(5), Player(3), true)
	call SetPlayerAllianceStateVisionBJ(Player(5), Player(4), true)
	call SetPlayerAllianceStateVisionBJ(Player(5), Player(6), true)
	call SetPlayerAllianceStateVisionBJ(Player(5), Player(7), true)
	call SetPlayerAllianceStateVisionBJ(Player(5), Player(8), true)
	call SetPlayerAllianceStateVisionBJ(Player(6), Player(0), true)
	call SetPlayerAllianceStateVisionBJ(Player(6), Player(1), true)
	call SetPlayerAllianceStateVisionBJ(Player(6), Player(2), true)
	call SetPlayerAllianceStateVisionBJ(Player(6), Player(3), true)
	call SetPlayerAllianceStateVisionBJ(Player(6), Player(4), true)
	call SetPlayerAllianceStateVisionBJ(Player(6), Player(5), true)
	call SetPlayerAllianceStateVisionBJ(Player(6), Player(7), true)
	call SetPlayerAllianceStateVisionBJ(Player(6), Player(8), true)
	call SetPlayerAllianceStateVisionBJ(Player(7), Player(0), true)
	call SetPlayerAllianceStateVisionBJ(Player(7), Player(1), true)
	call SetPlayerAllianceStateVisionBJ(Player(7), Player(2), true)
	call SetPlayerAllianceStateVisionBJ(Player(7), Player(3), true)
	call SetPlayerAllianceStateVisionBJ(Player(7), Player(4), true)
	call SetPlayerAllianceStateVisionBJ(Player(7), Player(5), true)
	call SetPlayerAllianceStateVisionBJ(Player(7), Player(6), true)
	call SetPlayerAllianceStateVisionBJ(Player(7), Player(8), true)
	call SetPlayerAllianceStateVisionBJ(Player(8), Player(0), true)
	call SetPlayerAllianceStateVisionBJ(Player(8), Player(1), true)
	call SetPlayerAllianceStateVisionBJ(Player(8), Player(2), true)
	call SetPlayerAllianceStateVisionBJ(Player(8), Player(3), true)
	call SetPlayerAllianceStateVisionBJ(Player(8), Player(4), true)
	call SetPlayerAllianceStateVisionBJ(Player(8), Player(5), true)
	call SetPlayerAllianceStateVisionBJ(Player(8), Player(6), true)
	call SetPlayerAllianceStateVisionBJ(Player(8), Player(7), true)
	call SetPlayerTeam(Player($B), 1)
	call SetPlayerState(Player($B), PLAYER_STATE_ALLIED_VICTORY_1, 1)
endfunction

function InitAllyPriorities takes nothing returns nothing
	call SetStartLocPrioCount(0, 8)
	call SetStartLocPrio(0, 0, 1, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(0, 1, 2, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(0, 2, 3, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(0, 3, 4, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(0, 4, 5, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(0, 5, 6, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(0, 6, 7, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(0, 7, 8, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrioCount(1, 8)
	call SetStartLocPrio(1, 0, 0, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(1, 1, 2, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(1, 2, 3, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(1, 3, 4, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(1, 4, 5, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(1, 5, 6, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(1, 6, 7, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(1, 7, 8, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrioCount(2, 8)
	call SetStartLocPrio(2, 0, 0, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(2, 1, 1, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(2, 2, 3, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(2, 3, 4, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(2, 4, 5, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(2, 5, 6, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(2, 6, 7, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(2, 7, 8, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrioCount(3, 8)
	call SetStartLocPrio(3, 0, 0, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(3, 1, 1, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(3, 2, 2, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(3, 3, 4, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(3, 4, 5, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(3, 5, 6, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(3, 6, 7, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(3, 7, 8, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrioCount(4, 8)
	call SetStartLocPrio(4, 0, 0, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(4, 1, 1, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(4, 2, 2, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(4, 3, 3, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(4, 4, 5, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(4, 5, 6, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(4, 6, 7, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(4, 7, 8, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrioCount(5, 8)
	call SetStartLocPrio(5, 0, 0, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(5, 1, 1, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(5, 2, 2, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(5, 3, 3, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(5, 4, 4, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(5, 5, 6, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(5, 6, 7, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(5, 7, 8, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrioCount(6, 8)
	call SetStartLocPrio(6, 0, 0, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(6, 1, 1, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(6, 2, 2, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(6, 3, 3, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(6, 4, 4, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(6, 5, 5, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(6, 6, 7, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(6, 7, 8, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrioCount(7, 8)
	call SetStartLocPrio(7, 0, 0, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(7, 1, 1, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(7, 2, 2, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(7, 3, 3, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(7, 4, 4, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(7, 5, 5, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(7, 6, 6, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(7, 7, 8, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrioCount(8, 8)
	call SetStartLocPrio(8, 0, 0, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(8, 1, 1, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(8, 2, 2, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(8, 3, 3, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(8, 4, 4, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(8, 5, 5, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(8, 6, 6, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(8, 7, 7, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrioCount(9, 3)
	call SetStartLocPrio(9, 0, 0, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(9, 1, 1, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(9, 2, 2, MAP_LOC_PRIO_HIGH_1)
endfunction

function main takes nothing returns nothing
	local weathereffect we
	local integer i
	local player p
	local unit u
	local integer unitID
	local trigger t
	local real life
	local integer index
	local region rectRegion
	call SetCameraBounds(-5760. + GetCameraMargin(CAMERA_MARGIN_LEFT_1), -10624. + GetCameraMargin(CAMERA_MARGIN_BOTTOM_1), 5504. - GetCameraMargin(CAMERA_MARGIN_RIGHT_1), 4480. - GetCameraMargin(CAMERA_MARGIN_TOP_1), -5760. + GetCameraMargin(CAMERA_MARGIN_LEFT_1), 4480. - GetCameraMargin(CAMERA_MARGIN_TOP_1), 5504. - GetCameraMargin(CAMERA_MARGIN_RIGHT_1), -10624. + GetCameraMargin(CAMERA_MARGIN_BOTTOM_1))
	call SetDayNightModels("Environment\\DNC\\DNCDalaran\\DNCDalaranTerrain\\DNCDalaranTerrain.mdl", "Environment\\DNC\\DNCDalaran\\DNCDalaranUnit\\DNCDalaranUnit.mdl")
	call SetWaterBaseColor(0, $80, 0, $FF)
	call NewSoundEnvironment("Default")
	call SetAmbientDaySound("FelwoodDay")
	call SetAmbientNightSound("FelwoodNight")
	call SetMapMusic("Music", true, 0)
	set gg_snd_HeroFirelordYesAttack1_1 = CreateSound("Units\\Creeps\\HeroFlameLord\\HeroFirelordYesAttack1.wav", false, false, false, $A, $A, "HeroAcksEAX")
	call SetSoundParamsFromLabel(gg_snd_HeroFirelordYesAttack1_1, "HeroFireLordYesAttack")
	call SetSoundDuration(gg_snd_HeroFirelordYesAttack1_1, $984)
	set gg_snd_HeroFirelordYesAttack2_1 = CreateSound("Units\\Creeps\\HeroFlameLord\\HeroFirelordYesAttack2.wav", false, false, false, $A, $A, "HeroAcksEAX")
	call SetSoundParamsFromLabel(gg_snd_HeroFirelordYesAttack2_1, "HeroFireLordYesAttack")
	call SetSoundDuration(gg_snd_HeroFirelordYesAttack2_1, $DAF)
	set gg_snd_HeroFirelordYesAttack3_1 = CreateSound("Units\\Creeps\\HeroFlameLord\\HeroFirelordYesAttack3.wav", false, false, false, $A, $A, "HeroAcksEAX")
	call SetSoundParamsFromLabel(gg_snd_HeroFirelordYesAttack3_1, "HeroFireLordYesAttack")
	call SetSoundDuration(gg_snd_HeroFirelordYesAttack3_1, $AD1)
	set gg_snd_HeroFirelordWarcry1_1 = CreateSound("Units\\Creeps\\HeroFlameLord\\HeroFirelordWarcry1.wav", false, false, false, $A, $A, "HeroAcksEAX")
	call SetSoundParamsFromLabel(gg_snd_HeroFirelordWarcry1_1, "HeroFireLordWarcry")
	call SetSoundDuration(gg_snd_HeroFirelordWarcry1_1, 5072)
	set gg_snd_HeroLichReady1_1 = CreateSound("Units\\Undead\\HeroLich\\HeroLichReady1.wav", false, false, false, $A, $A, "HeroAcksEAX")
	call SetSoundParamsFromLabel(gg_snd_HeroLichReady1_1, "HeroLichReady")
	call SetSoundDuration(gg_snd_HeroLichReady1_1, 4337)
	set gg_snd_HeroLichYesAttack1_1 = CreateSound("Units\\Undead\\HeroLich\\HeroLichYesAttack1.wav", false, false, false, $A, $A, "HeroAcksEAX")
	call SetSoundParamsFromLabel(gg_snd_HeroLichYesAttack1_1, "HeroLichYesAttack")
	call SetSoundDuration(gg_snd_HeroLichYesAttack1_1, $A4C)
	set gg_snd_HeroLichYesAttack2_1 = CreateSound("Units\\Undead\\HeroLich\\HeroLichYesAttack2.wav", false, false, false, $A, $A, "HeroAcksEAX")
	call SetSoundParamsFromLabel(gg_snd_HeroLichYesAttack2_1, "HeroLichYesAttack")
	call SetSoundDuration(gg_snd_HeroLichYesAttack2_1, $9D4)
	set gg_snd_HeroLichYesAttack3_1 = CreateSound("Units\\Undead\\HeroLich\\HeroLichYesAttack3.wav", false, false, false, $A, $A, "HeroAcksEAX")
	call SetSoundParamsFromLabel(gg_snd_HeroLichYesAttack3_1, "HeroLichYesAttack")
	call SetSoundDuration(gg_snd_HeroLichYesAttack3_1, $872)
	set gg_snd_DeathSound1_1 = CreateSound("Units\\Creeps\\Bandit\\BanditYesAttack1.wav", false, false, false, $A, $A, "DefaultEAXON")
	call SetSoundParamsFromLabel(gg_snd_DeathSound1_1, "BanditYesAttack")
	call SetSoundDuration(gg_snd_DeathSound1_1, $4EE)
	set gg_snd_KnightNoGold1_1 = CreateSound("Sound\\Interface\\Warning\\Human\\KnightNoGold1.wav", false, false, false, $A, $A, "")
	call SetSoundParamsFromLabel(gg_snd_KnightNoGold1_1, "NoGoldHuman")
	call SetSoundDuration(gg_snd_KnightNoGold1_1, $57D)
	set gg_snd_KnightInventoryFull1_1 = CreateSound("Sound\\Interface\\Warning\\Human\\KnightInventoryFull1.wav", false, false, false, $A, $A, "")
	call SetSoundParamsFromLabel(gg_snd_KnightInventoryFull1_1, "InventoryFullHuman")
	call SetSoundDuration(gg_snd_KnightInventoryFull1_1, $3E8)
	set gg_snd_HeroStep1_1 = CreateSound("Sound\\Units\\Footsteps\\HeroStep1.wav", false, true, true, $A, $A, "SpellsEAX")
	call SetSoundParamsFromLabel(gg_snd_HeroStep1_1, "HeroCinematicStep")
	call SetSoundDuration(gg_snd_HeroStep1_1, 947)
	set gg_snd_HeroStep2_1 = CreateSound("Sound\\Units\\Footsteps\\HeroStep2.wav", false, true, true, $A, $A, "SpellsEAX")
	call SetSoundParamsFromLabel(gg_snd_HeroStep2_1, "HeroCinematicStep")
	call SetSoundDuration(gg_snd_HeroStep2_1, 697)
	set gg_snd_HeroStep3_1 = CreateSound("Sound\\Units\\Footsteps\\HeroStep3.wav", false, true, true, $A, $A, "SpellsEAX")
	call SetSoundParamsFromLabel(gg_snd_HeroStep3_1, "HeroCinematicStep")
	call SetSoundDuration(gg_snd_HeroStep3_1, 599)
	set gg_snd_HeroStep4_1 = CreateSound("Sound\\Units\\Footsteps\\HeroStep4.wav", false, true, true, $A, $A, "SpellsEAX")
	call SetSoundParamsFromLabel(gg_snd_HeroStep4_1, "HeroCinematicStep")
	call SetSoundDuration(gg_snd_HeroStep4_1, $E5)
	set gg_snd_HuntressYesAttack4_1 = CreateSound("Units\\NightElf\\Huntress\\HuntressYesAttack4.wav", false, false, false, 'd', $A, "DefaultEAXON")
	call SetSoundParamsFromLabel(gg_snd_HuntressYesAttack4_1, "HuntressYesAttack")
	call SetSoundDuration(gg_snd_HuntressYesAttack4_1, $55E)
	call SetSoundChannel(gg_snd_HuntressYesAttack4_1, 0)
	set gg_snd_WardenAttackEffort1_1 = CreateSound("Units\\NightElf\\HeroWarden\\WardenAttackEffort1.wav", false, true, true, $A, $A, "CombatSoundsEAX")
	call SetSoundParamsFromLabel(gg_snd_WardenAttackEffort1_1, "WardenAttack")
	call SetSoundDuration(gg_snd_WardenAttackEffort1_1, $54E)
	set gg_snd_AlchemistChemicalBurst1_1 = CreateSound("Units\\Creeps\\HEROGoblinALCHEMIST\\AlchemistChemicalBurst1.wav", false, false, false, $A, $A, "DefaultEAXON")
	call SetSoundParamsFromLabel(gg_snd_AlchemistChemicalBurst1_1, "GoblinAlchemistMorph")
	call SetSoundDuration(gg_snd_AlchemistChemicalBurst1_1, $801)
	call SetSoundChannel(gg_snd_AlchemistChemicalBurst1_1, 0)
	set gg_snd_AlchemistMorph1_1 = CreateSound("Units\\Creeps\\HEROGoblinALCHEMIST\\AlchemistMorph1.wav", false, false, false, $A, $A, "DefaultEAXON")
	call SetSoundParamsFromLabel(gg_snd_AlchemistMorph1_1, "GoblinAlchemistMorphAlternate")
	call SetSoundDuration(gg_snd_AlchemistMorph1_1, $67F)
	call SetSoundChannel(gg_snd_AlchemistMorph1_1, 0)
	set gg_snd_HeroAlchemistYesAttack1_1 = CreateSound("Units\\Creeps\\HEROGoblinALCHEMIST\\HeroAlchemistYesAttack1.wav", false, false, false, $A, $A, "DefaultEAXON")
	call SetSoundParamsFromLabel(gg_snd_HeroAlchemistYesAttack1_1, "HEROGoblinALCHEMISTYesAttack")
	call SetSoundDuration(gg_snd_HeroAlchemistYesAttack1_1, $942)
	call SetSoundChannel(gg_snd_HeroAlchemistYesAttack1_1, 0)
	set gg_rct_Miners_Arena_1 = Rect(-4128., 1952., -2496., 3904.)
	set gg_rct_Duel_left_1 = Rect(1216., 2784., 1472., 3040.)
	set gg_rct_Portal_1_down_left_Start_1 = Rect(-1920., -9536., -1536., -9184.)
	set gg_rct_Base_1 = Rect(-288., -7488., 2560., -4128.)
	set gg_rct_Portal_baza_1 = Rect(896., -6016., 1408., -5408.)
	set gg_rct_Les_2_1 = Rect(-3616., -8160., -512., 320.)
	set gg_rct_Les_1_1 = Rect(-320., -10656., 2432., -7904.)
	set gg_rct_Pogoda_v_bolote_1 = Rect(3936., -6944., 5280., -3296.)
	set we_0 = AddWeatherEffect(gg_rct_Pogoda_v_bolote_1, 'FDgh')
	call EnableWeatherEffect(we_0, true)
	set gg_rct_cast_magi_1 = Rect(832., -6112., 1664., -5312.)
	set gg_rct_Event_Bonus_Etei_arena_1_1 = Rect(3488., -256., 5088., 1824.)
	set gg_rct_Portal_3_up_Start_1 = Rect(1024., -1120., 1408., -736.)
	set gg_rct_Portal_2_down_right_Start_1 = Rect(3392., -9376., 3744., -8992.)
	set gg_rct_Oblstb_Tavern_1 = Rect(4352., 3360., 5504., 4448.)
	set gg_rct_Hero_Arena_1 = Rect(1152., 2048., 2944., 3968.)
	set gg_rct_les_3_1 = Rect(2592., -7040., 3872., -1280.)
	set gg_rct_Respawn_Heroes_1 = Rect(1056., -6624., 1408., -6112.)
	set gg_rct_Oblast_Teleporta_Arena_Bot_1 = Rect(4224., -32., 4416., 160.)
	set gg_rct_Oblast_Teleporta_Arena_Top_1 = Rect(4224., 1408., 4416., 1600.)
	set gg_rct_6_1 = Rect(-1792., 1888., 544., 3840.)
	set gg_rct_BaseDopVision_1 = Rect(672., -4160., 1664., -3680.)
	set gg_rct_Center_Vision_1 = Rect(960., -5760., 1088., -5632.)
	set gg_rct_Portal_Attack_Dummy_Left_1 = Rect(-2112., -9696., -1952., -9536.)
	set gg_rct_Portal_Attack_Dummy_Right_1 = Rect(3584., -9600., 3744., -9440.)
	set gg_rct_Portal_Attack_Dummy_Top_1 = Rect(1120., -576., 1280., -416.)
	set gg_rct_Duel_right_1 = Rect(2592., 2784., 2848., 3040.)
	set gg_rct_PlayableAreaVisionDeBag_1 = Rect(-3680., -10400., 5504., 4544.)
	set gg_rct_MinusVision1_1 = Rect(-3712., 800., -2048., 4640.)
	set gg_rct_Les1_Dop1_1 = Rect(2400., -9184., 2912., -8096.)
	set gg_rct_Les1_Dop2_1 = Rect(160., -7936., 2208., -7648.)
	set gg_rct_Beorn_Boss_Area_1 = Rect(800., -10368., 1952., -9248.)
	set gg_rct_Beorn_Boss_Area2_1 = Rect(992., -10272., 1856., -9376.)
	set gg_cam_Kamera_na_taverni_1 = CreateCameraSetup()
	call CameraSetupSetField(gg_cam_Kamera_na_taverni_1, CAMERA_FIELD_ZOFFSET_1, .0, .0)
	call CameraSetupSetField(gg_cam_Kamera_na_taverni_1, CAMERA_FIELD_ROTATION_1, 90., .0)
	call CameraSetupSetField(gg_cam_Kamera_na_taverni_1, CAMERA_FIELD_ANGLE_OF_ATTACK_1, 304., .0)
	call CameraSetupSetField(gg_cam_Kamera_na_taverni_1, CAMERA_FIELD_TARGET_DISTANCE_1, 1650., .0)
	call CameraSetupSetField(gg_cam_Kamera_na_taverni_1, CAMERA_FIELD_ROLL_1, .0, .0)
	call CameraSetupSetField(gg_cam_Kamera_na_taverni_1, CAMERA_FIELD_FIELD_OF_VIEW_1, 70., .0)
	call CameraSetupSetField(gg_cam_Kamera_na_taverni_1, CAMERA_FIELD_FARZ_1, 5000., .0)
	call CameraSetupSetDestPosition(gg_cam_Kamera_na_taverni_1, 4928.7, 3881.5, .0)
	set gg_cam_Kamera_glavnoi_bazi_1 = CreateCameraSetup()
	call CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi_1, CAMERA_FIELD_ZOFFSET_1, .0, .0)
	call CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi_1, CAMERA_FIELD_ROTATION_1, 90., .0)
	call CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi_1, CAMERA_FIELD_ANGLE_OF_ATTACK_1, 304., .0)
	call CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi_1, CAMERA_FIELD_TARGET_DISTANCE_1, 1650., .0)
	call CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi_1, CAMERA_FIELD_ROLL_1, .0, .0)
	call CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi_1, CAMERA_FIELD_FIELD_OF_VIEW_1, 70., .0)
	call CameraSetupSetField(gg_cam_Kamera_glavnoi_bazi_1, CAMERA_FIELD_FARZ_1, 5000., .0)
	call CameraSetupSetDestPosition(gg_cam_Kamera_glavnoi_bazi_1, 1240., -6378.1, .0)
	set gg_cam_Camera_Eiti_Arena_1 = CreateCameraSetup()
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_1, CAMERA_FIELD_ZOFFSET_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_1, CAMERA_FIELD_ROTATION_1, 90., .0)
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_1, CAMERA_FIELD_ANGLE_OF_ATTACK_1, 304., .0)
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_1, CAMERA_FIELD_TARGET_DISTANCE_1, 1650., .0)
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_1, CAMERA_FIELD_ROLL_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_1, CAMERA_FIELD_FIELD_OF_VIEW_1, 70., .0)
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_1, CAMERA_FIELD_FARZ_1, 5000., .0)
	call CameraSetupSetDestPosition(gg_cam_Camera_Eiti_Arena_1, 4255.9, 866.9, .0)
	set gg_cam_Camera_Eiti_Arena_Top_Portal_1 = CreateCameraSetup()
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal_1, CAMERA_FIELD_ZOFFSET_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal_1, CAMERA_FIELD_ROTATION_1, 90., .0)
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal_1, CAMERA_FIELD_ANGLE_OF_ATTACK_1, 304., .0)
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal_1, CAMERA_FIELD_TARGET_DISTANCE_1, 1650., .0)
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal_1, CAMERA_FIELD_ROLL_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal_1, CAMERA_FIELD_FIELD_OF_VIEW_1, 70., .0)
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Top_Portal_1, CAMERA_FIELD_FARZ_1, 5000., .0)
	call CameraSetupSetDestPosition(gg_cam_Camera_Eiti_Arena_Top_Portal_1, 4394.2, 1237.5, .0)
	set gg_cam_Camera_Eiti_Arena_Bot_Portal_1 = CreateCameraSetup()
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal_1, CAMERA_FIELD_ZOFFSET_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal_1, CAMERA_FIELD_ROTATION_1, 90., .0)
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal_1, CAMERA_FIELD_ANGLE_OF_ATTACK_1, 304., .0)
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal_1, CAMERA_FIELD_TARGET_DISTANCE_1, 1650., .0)
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal_1, CAMERA_FIELD_ROLL_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal_1, CAMERA_FIELD_FIELD_OF_VIEW_1, 70., .0)
	call CameraSetupSetField(gg_cam_Camera_Eiti_Arena_Bot_Portal_1, CAMERA_FIELD_FARZ_1, 5000., .0)
	call CameraSetupSetDestPosition(gg_cam_Camera_Eiti_Arena_Bot_Portal_1, 4465.7, 342.3, .0)
	set gg_cam_Camera_miners_arena_1 = CreateCameraSetup()
	call CameraSetupSetField(gg_cam_Camera_miners_arena_1, CAMERA_FIELD_ZOFFSET_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_miners_arena_1, CAMERA_FIELD_ROTATION_1, 90., .0)
	call CameraSetupSetField(gg_cam_Camera_miners_arena_1, CAMERA_FIELD_ANGLE_OF_ATTACK_1, 304., .0)
	call CameraSetupSetField(gg_cam_Camera_miners_arena_1, CAMERA_FIELD_TARGET_DISTANCE_1, 1650., .0)
	call CameraSetupSetField(gg_cam_Camera_miners_arena_1, CAMERA_FIELD_ROLL_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_miners_arena_1, CAMERA_FIELD_FIELD_OF_VIEW_1, 70., .0)
	call CameraSetupSetField(gg_cam_Camera_miners_arena_1, CAMERA_FIELD_FARZ_1, 5000., .0)
	call CameraSetupSetDestPosition(gg_cam_Camera_miners_arena_1, -3311.2, 2967.9, .0)
	set gg_cam_Camera_BossFightStart_1 = CreateCameraSetup()
	call CameraSetupSetField(gg_cam_Camera_BossFightStart_1, CAMERA_FIELD_ZOFFSET_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_BossFightStart_1, CAMERA_FIELD_ROTATION_1, 180.9, .0)
	call CameraSetupSetField(gg_cam_Camera_BossFightStart_1, CAMERA_FIELD_ANGLE_OF_ATTACK_1, 336.5, .0)
	call CameraSetupSetField(gg_cam_Camera_BossFightStart_1, CAMERA_FIELD_TARGET_DISTANCE_1, 1650., .0)
	call CameraSetupSetField(gg_cam_Camera_BossFightStart_1, CAMERA_FIELD_ROLL_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_BossFightStart_1, CAMERA_FIELD_FIELD_OF_VIEW_1, 70., .0)
	call CameraSetupSetField(gg_cam_Camera_BossFightStart_1, CAMERA_FIELD_FARZ_1, 5000., .0)
	call CameraSetupSetDestPosition(gg_cam_Camera_BossFightStart_1, -608.2, 2881., .0)
	set gg_cam_Camera_Duel_Arena_1 = CreateCameraSetup()
	call CameraSetupSetField(gg_cam_Camera_Duel_Arena_1, CAMERA_FIELD_ZOFFSET_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Duel_Arena_1, CAMERA_FIELD_ROTATION_1, 90., .0)
	call CameraSetupSetField(gg_cam_Camera_Duel_Arena_1, CAMERA_FIELD_ANGLE_OF_ATTACK_1, 304., .0)
	call CameraSetupSetField(gg_cam_Camera_Duel_Arena_1, CAMERA_FIELD_TARGET_DISTANCE_1, 1650., .0)
	call CameraSetupSetField(gg_cam_Camera_Duel_Arena_1, CAMERA_FIELD_ROLL_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Duel_Arena_1, CAMERA_FIELD_FIELD_OF_VIEW_1, 70., .0)
	call CameraSetupSetField(gg_cam_Camera_Duel_Arena_1, CAMERA_FIELD_FARZ_1, 5000., .0)
	call CameraSetupSetDestPosition(gg_cam_Camera_Duel_Arena_1, 2139.4, 2853.8, .0)
	set gg_cam_Kamera_cast_magi_1 = CreateCameraSetup()
	call CameraSetupSetField(gg_cam_Kamera_cast_magi_1, CAMERA_FIELD_ZOFFSET_1, .0, .0)
	call CameraSetupSetField(gg_cam_Kamera_cast_magi_1, CAMERA_FIELD_ROTATION_1, 90., .0)
	call CameraSetupSetField(gg_cam_Kamera_cast_magi_1, CAMERA_FIELD_ANGLE_OF_ATTACK_1, 304., .0)
	call CameraSetupSetField(gg_cam_Kamera_cast_magi_1, CAMERA_FIELD_TARGET_DISTANCE_1, 1650., .0)
	call CameraSetupSetField(gg_cam_Kamera_cast_magi_1, CAMERA_FIELD_ROLL_1, .0, .0)
	call CameraSetupSetField(gg_cam_Kamera_cast_magi_1, CAMERA_FIELD_FIELD_OF_VIEW_1, 70., .0)
	call CameraSetupSetField(gg_cam_Kamera_cast_magi_1, CAMERA_FIELD_FARZ_1, 5000., .0)
	call CameraSetupSetDestPosition(gg_cam_Kamera_cast_magi_1, 1268., -5714.3, .0)
	set gg_cam_Camera_Beorn_Den1_1 = CreateCameraSetup()
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den1_1, CAMERA_FIELD_ZOFFSET_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den1_1, CAMERA_FIELD_ROTATION_1, 233.6, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den1_1, CAMERA_FIELD_ANGLE_OF_ATTACK_1, 299.3, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den1_1, CAMERA_FIELD_TARGET_DISTANCE_1, 1363.6, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den1_1, CAMERA_FIELD_ROLL_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den1_1, CAMERA_FIELD_FIELD_OF_VIEW_1, 70., .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den1_1, CAMERA_FIELD_FARZ_1, 5000., .0)
	call CameraSetupSetDestPosition(gg_cam_Camera_Beorn_Den1_1, 1384., -9577.2, .0)
	set gg_cam_Camera_Beorn_Den2_1 = CreateCameraSetup()
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den2_1, CAMERA_FIELD_ZOFFSET_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den2_1, CAMERA_FIELD_ROTATION_1, 297.9, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den2_1, CAMERA_FIELD_ANGLE_OF_ATTACK_1, 300.3, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den2_1, CAMERA_FIELD_TARGET_DISTANCE_1, 1363.6, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den2_1, CAMERA_FIELD_ROLL_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den2_1, CAMERA_FIELD_FIELD_OF_VIEW_1, 70., .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den2_1, CAMERA_FIELD_FARZ_1, 5000., .0)
	call CameraSetupSetDestPosition(gg_cam_Camera_Beorn_Den2_1, 1240.7, -9620.8, .0)
	set gg_cam_Camera_Beorn_Den3_1 = CreateCameraSetup()
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den3_1, CAMERA_FIELD_ZOFFSET_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den3_1, CAMERA_FIELD_ROTATION_1, 110.6, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den3_1, CAMERA_FIELD_ANGLE_OF_ATTACK_1, 300.4, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den3_1, CAMERA_FIELD_TARGET_DISTANCE_1, 1127., .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den3_1, CAMERA_FIELD_ROLL_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den3_1, CAMERA_FIELD_FIELD_OF_VIEW_1, 70., .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den3_1, CAMERA_FIELD_FARZ_1, 5000., .0)
	call CameraSetupSetDestPosition(gg_cam_Camera_Beorn_Den3_1, 562.8, -8241.1, .0)
	set gg_cam_Camera_Beorn_Den4_1 = CreateCameraSetup()
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den4_1, CAMERA_FIELD_ZOFFSET_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den4_1, CAMERA_FIELD_ROTATION_1, 110.6, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den4_1, CAMERA_FIELD_ANGLE_OF_ATTACK_1, 300.4, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den4_1, CAMERA_FIELD_TARGET_DISTANCE_1, 1127., .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den4_1, CAMERA_FIELD_ROLL_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den4_1, CAMERA_FIELD_FIELD_OF_VIEW_1, 70., .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den4_1, CAMERA_FIELD_FARZ_1, 5000., .0)
	call CameraSetupSetDestPosition(gg_cam_Camera_Beorn_Den4_1, -15.3, -9035.4, .0)
	set gg_cam_Camera_Beorn_Den5_1 = CreateCameraSetup()
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den5_1, CAMERA_FIELD_ZOFFSET_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den5_1, CAMERA_FIELD_ROTATION_1, 90., .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den5_1, CAMERA_FIELD_ANGLE_OF_ATTACK_1, 304., .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den5_1, CAMERA_FIELD_TARGET_DISTANCE_1, 1650., .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den5_1, CAMERA_FIELD_ROLL_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den5_1, CAMERA_FIELD_FIELD_OF_VIEW_1, 70., .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den5_1, CAMERA_FIELD_FARZ_1, 5000., .0)
	call CameraSetupSetDestPosition(gg_cam_Camera_Beorn_Den5_1, 2191., -8224.1, .0)
	set gg_cam_Camera_Beorn_Den6_1 = CreateCameraSetup()
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den6_1, CAMERA_FIELD_ZOFFSET_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den6_1, CAMERA_FIELD_ROTATION_1, 90., .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den6_1, CAMERA_FIELD_ANGLE_OF_ATTACK_1, 304., .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den6_1, CAMERA_FIELD_TARGET_DISTANCE_1, 1650., .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den6_1, CAMERA_FIELD_ROLL_1, .0, .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den6_1, CAMERA_FIELD_FIELD_OF_VIEW_1, 70., .0)
	call CameraSetupSetField(gg_cam_Camera_Beorn_Den6_1, CAMERA_FIELD_FARZ_1, 5000., .0)
	call CameraSetupSetDestPosition(gg_cam_Camera_Beorn_Den6_1, 1474.8, -9613.2, .0)
	set p_0 = Player($F)
	set u_0 = CreateUnit(p_0, 'h00S', 2144., -5184., 225.)
	set u_0 = CreateUnit(p_0, 'h002', 2176., -5760., 270.)
	set u_0 = CreateUnit(p_0, 'h001', 2144., -5312., 225.)
	set u_0 = CreateUnit(p_0, 'n004', 5120., 4032., 270.)
	call SetUnitColor(u_0, ConvertPlayerColor(6))
	set u_0 = CreateUnit(p_0, 'n002', 4736., 4032., 270.)
	call SetUnitColor(u_0, ConvertPlayerColor(0))
	set u_0 = CreateUnit(p_0, 'n005', 4928., 3648., 270.)
	call SetUnitColor(u_0, ConvertPlayerColor(1))
	set u_0 = CreateUnit(p_0, 'h003', 2176., -6016., 270.)
	set u_0 = CreateUnit(p_0, 'h000', 2176., -5504., 180.)
	set u_0 = CreateUnit(p_0, 'h00D', 2176., -6272., 225.)
	set u_0 = CreateUnit(p_0, 'h00Y', 2176., -4992., 270.)
	set p_0 = Player($F)
	set u_0 = CreateUnit(p_0, 'h00I', 2651.1, -8998.3, 132.101)
	call SetUnitState(u_0, UNIT_STATE_MANA_1, $2710)
	set u_0 = CreateUnit(p_0, 'h00I', 2737.1, -8462., 222.901)
	call SetUnitState(u_0, UNIT_STATE_MANA_1, $2710)
	set u_0 = CreateUnit(p_0, 'h00I', 2208., -7950.8, 240.89)
	call SetUnitState(u_0, UNIT_STATE_MANA_1, $2710)
	set u_0 = CreateUnit(p_0, 'h00I', 1508.5, -7799.1, 271.992)
	call SetUnitState(u_0, UNIT_STATE_MANA_1, $2710)
	set u_0 = CreateUnit(p_0, 'h00I', 761.9, -7825.8, 270.894)
	call SetUnitState(u_0, UNIT_STATE_MANA_1, $2710)
	set u_0 = CreateUnit(p_0, 'h00I', 108.7, -7927.1, 297.652)
	call SetUnitState(u_0, UNIT_STATE_MANA_1, $2710)
	set u_0 = CreateUnit(p_0, 'h00I', -341.9, -8450.2, 346.764)
	call SetUnitState(u_0, UNIT_STATE_MANA_1, $2710)
	set u_0 = CreateUnit(p_0, 'h00I', -340.3, -9154.9, 16.661)
	call SetUnitState(u_0, UNIT_STATE_MANA_1, $2710)
	set u_0 = CreateUnit(p_0, 'h00I', -237.5, -9776.7, 2.615)
	call SetUnitState(u_0, UNIT_STATE_MANA_1, $2710)
	set gg_unit_o003_0027_1 = CreateUnit(p_0, 'o003', 1521.1, -5441.2, 222.91)
	set gg_unit_o003_0028_1 = CreateUnit(p_0, 'o003', 1033.8, -5956.6, 42.425)
	set u_0 = CreateUnit(p_0, 'h00I', 1358.5, -9356.4, 270.)
	call SetUnitState(u_0, UNIT_STATE_MANA_1, $2710)
	set u_0 = CreateUnit(p_0, 'h00I', 1357.3, -9244.8, 270.)
	call SetUnitState(u_0, UNIT_STATE_MANA_1, $2710)
	set gg_unit_h01K_0100_1 = CreateUnit(p_0, 'h01K', 1245.4, -5377.6, 270.73)
	set gg_unit_n00Y_0101_1 = CreateUnit(p_0, 'n00Y', 1589.7, -5683.3, 173.645)
	call SetUnitState(gg_unit_n00Y_0101_1, UNIT_STATE_MANA_1, 0)
	set gg_unit_n00Y_0102_1 = CreateUnit(p_0, 'n00Y', 939.4, -5689.8, .69)
	call SetUnitState(gg_unit_n00Y_0102_1, UNIT_STATE_MANA_1, 0)
	set gg_unit_e002_0106_1 = CreateUnit(p_0, 'e002', 1007.4, -5428.7, 316.082)
	call SetUnitState(gg_unit_e002_0106_1, UNIT_STATE_MANA_1, 0)
	set gg_unit_e002_0108_1 = CreateUnit(p_0, 'e002', 1526.5, -5954.4, 138.892)
	call SetUnitState(gg_unit_e002_0108_1, UNIT_STATE_MANA_1, 0)
	set gg_unit_h01K_0109_1 = CreateUnit(p_0, 'h01K', 1268., -6027.5, 89.41)
	call InitBlizzard()
	set i_0 = 0
	set udg_IGRAET_1 = CreateForce()
	set udg_Multiboard_1 = CreateMultiboard()
	set udg_Liver_1 = CreateForce()
	set udg_Timer_Nomera_Volni_1 = CreateTimer()
	set i_0 = 0
	loop
		exitwhen (i_0 > 1)
		set udg_Igraet_Igrok_1[i_0] = false
		set udg_Duel_Igrok_1[i_0] = CreateForce()
		set udg_Heroes_Random_Data_1[i_0] = 0
		set udg_Integer_Kolvo_Giznei_EtitArena_1[i_0] = 0
		set udg_ColorString_1[i_0] = ""
		set udg_Temp_Real_1[i_0] = 0
		set udg_Temp_Integer_1[i_0] = 0
		set udg_PlayerNumberInMB_1[i_0] = 0
		set udg_MutliBoardHeroIcon_1[i_0] = ""
		set udg_MultiBoard_Player_Kills_Count_1[i_0] = 0
		set udg_MultiBoard_Player_Deaths_Count_1[i_0] = 0
		set udg_MultiBoard_Player_Assist_Count_1[i_0] = 0
		set udg_Hero_Respawn_Time_1[i_0] = 0
		set udg_Potion_Effect_1[i_0] = ""
		set udg_Potion_Type_1[i_0] = ""
		set udg_Potion_Heal_Amount_1[i_0] = 0
		set udg_Potion_Size_1[i_0] = 0
		set udg_HintsTimerPlayer_1[i_0] = CreateTimer()
		set udg_Hero_Player_Color_String_1[i_0] = ""
		set udg_Player_Taken_Damage_Current_1[i_0] = 0
		set udg_Player_Taken_Damage_All_1[i_0] = 0
		set udg_Player_Received_Damage_Current_1[i_0] = 0
		set udg_System_ShowAbil_And_Items_Hint_1[i_0] = true
		set udg_Boolean_Player_Fast_Purchase_1[i_0] = false
		set udg_Integer_Creep_On_Line_Spawn_1[i_0] = 0
		set udg_Group_Pickeds_Refrence_Panel_1[i_0] = CreateGroup()
		set udg_Is_Player_Fast_Wave_Start_1[i_0] = false
		set udg_Count_Item_Tips_Message_1[i_0] = 0
		set udg_Rune_On_Base_Dummy_X_1[i_0] = 0
		set udg_Rune_On_Base_Dummy_Y_1[i_0] = 0
		set udg_Rune_On_Base_Effect_String_1[i_0] = ""
		set udg_Bonus_Gold_ChestGold_1[i_0] = 0
		set udg_Temp_Group_1[i_0] = CreateGroup()
		set udg_Is_Rune_On_Position_1[i_0] = false
		set udg_Rune_Position_X_1[i_0] = 0
		set udg_Rune_Position_Y_1[i_0] = 0
		set udg_Arrow_Pointer_Guide_X_1[i_0] = 0
		set udg_Arrow_Pointer_Guide_Y_1[i_0] = 0
		set udg_Arrow_Pointer_Guide_Angle_1[i_0] = 0
		set udg_EnergyWallX_1[i_0] = 0
		set udg_EnergyWallY_1[i_0] = 0
		set udg_EnergyWallAngle_1[i_0] = 0
		set udg_EnergyWallCount_1[i_0] = 0
		set udg_Is_Player_Got_Randomed_1[i_0] = false
		set i_0 = i_0 + 1
	endloop
	set udg_Weave_group_1 = CreateGroup()
	set udg_Timer_Check_Forkreep_system_1 = CreateTimer()
	set udg_Gruppa_Igrokov_Vibor_Heroev_1 = CreateForce()
	set udg_Timer_Eiti_Areni_1 = CreateTimer()
	set udg_Gruppa_HeroUnitov_Geroev_1 = CreateGroup()
	set udg_OtriadPortalUnitsEitiArena_1 = CreateGroup()
	set udg_DamageGroup_1 = CreateGroup()
	set udg_DrenorBugaiRageTimer_1 = CreateTimer()
	set udg_GrogTarRageTimer_1 = CreateTimer()
	set udg_GroupRandomUnitFromGroup_1 = CreateGroup()
	set udg_Dialog_Select_Difficult_1 = DialogCreate()
	set udg_TimerMobsAttackBase_1 = CreateTimer()
	set udg_Players_Enemy_Group_1 = CreateForce()
	set udg_Timer_Dialog_Select_1 = CreateTimer()
	set udg_Players_Ally_Group_1 = CreateForce()
	set udg_MultiBoard_1 = CreateMultiboard()
	set udg_PlayerGroup_1 = CreateForce()
	set udg_ttt_1 = CreateTimer()
	set udg_PortalCastersMagi_1 = CreateGroup()
	set udg_InitMapTimer_1 = CreateTimer()
	set udg_Drenor_Bull_Hint_Player_Group_1 = CreateForce()
	set udg_TimerShowAndFlushAllPlayerDmg_1 = CreateTimer()
	set udg_Timer_Lightning_Strike_Weather_1 = CreateTimer()
	set udg_Timer_Hint_About_Fast_Start_1 = CreateTimer()
	set udg_Timer_Arrow_Pointer_Guide_1 = CreateTimer()
	set udg_gdamageallnew_1 = CreateGroup()
	set gg_trg_Players_Start_Script_1 = CreateTrigger()
	call TriggerRegisterTimerEventSingle(gg_trg_Players_Start_Script_1, 2.)
	call TriggerAddAction(gg_trg_Players_Start_Script_1, function Trig_Players_Start_Script_Actions)
	set gg_trg_InitMap_1 = CreateTrigger()
	call TriggerRegisterTimerEventSingle(gg_trg_InitMap_1, .0)
	call TriggerAddAction(gg_trg_InitMap_1, function Trig_InitMap_Actions)
	set gg_trg_InitMapStage2_1 = CreateTrigger()
	call TriggerRegisterTimerExpireEvent(gg_trg_InitMapStage2_1, udg_InitMapTimer_1)
	call TriggerAddAction(gg_trg_InitMapStage2_1, function Trig_InitMapStage2_Actions)
	set gg_trg_System_Spells_Load_1 = CreateTrigger()
	call TriggerRegisterTimerEvent(gg_trg_System_Spells_Load_1, 2., false)
	call TriggerAddAction(gg_trg_System_Spells_Load_1, function Trig_System_Spells_Load_Actions)
	set gg_trg_Items_Preload_1 = CreateTrigger()
	call TriggerRegisterTimerEvent(gg_trg_Items_Preload_1, 17., false)
	call TriggerAddAction(gg_trg_Items_Preload_1, function Trig_Items_Preload_Actions)
	set gg_trg_Igrok_Massiv_Save_1 = CreateTrigger()
	call TriggerRegisterTimerEventSingle(gg_trg_Igrok_Massiv_Save_1, .0)
	call TriggerAddAction(gg_trg_Igrok_Massiv_Save_1, function Trig_Igrok_Massiv_Save_Actions)
	set gg_trg_Load_Vsiakoe_1 = CreateTrigger()
	call TriggerRegisterTimerEventSingle(gg_trg_Load_Vsiakoe_1, 2.)
	call TriggerAddAction(gg_trg_Load_Vsiakoe_1, function Trig_Load_Vsiakoe_Actions)
	set gg_trg_Igrok_Massiv_Liver_1 = CreateTrigger()
	call TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver_1, Player(0))
	call TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver_1, Player(1))
	call TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver_1, Player(2))
	call TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver_1, Player(3))
	call TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver_1, Player(4))
	call TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver_1, Player(5))
	call TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver_1, Player(6))
	call TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver_1, Player(7))
	call TriggerRegisterPlayerEventLeave(gg_trg_Igrok_Massiv_Liver_1, Player(8))
	call TriggerAddAction(gg_trg_Igrok_Massiv_Liver_1, function Trig_Igrok_Massiv_Liver_Actions)
	set gg_trg_Messager_1 = CreateTrigger()
	call TriggerRegisterTimerEventSingle(gg_trg_Messager_1, 8.)
	call TriggerAddAction(gg_trg_Messager_1, function Trig_Messager_Actions)
	set gg_trg_Create_TExttags_about_Shops_1 = CreateTrigger()
	call TriggerRegisterTimerEventSingle(gg_trg_Create_TExttags_about_Shops_1, 9.)
	call TriggerAddAction(gg_trg_Create_TExttags_about_Shops_1, function Trig_Create_TExttags_about_Shops_Actions)
	set gg_trg_InitHashtable_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_InitHashtable_1, function Trig_InitHashtable_Actions)
	set gg_trg_Save_Sounds_1 = CreateTrigger()
	call TriggerRegisterTimerEvent(gg_trg_Save_Sounds_1, 5., false)
	call TriggerAddAction(gg_trg_Save_Sounds_1, function Trig_Save_Sounds_Actions)
	call TimerStart(CreateTimer(), 0, false, function HandleCounter_Actions)
	set gg_trg_Set_Chlenix_1 = CreateTrigger()
	call TriggerRegisterPlayerChatEvent(gg_trg_Set_Chlenix_1, Player(0), "-chlenix", false)
	call TriggerAddAction(gg_trg_Set_Chlenix_1, function Trig_Set_Chlenix_Actions)
	set gg_trg_Set_Energy_Walls_1 = CreateTrigger()
	call TriggerRegisterTimerEventSingle(gg_trg_Set_Energy_Walls_1, 5.)
	call TriggerAddAction(gg_trg_Set_Energy_Walls_1, function Trig_Set_Energy_Walls_Actions)
	set gg_trg_Nachalo_Eiti_aren_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Nachalo_Eiti_aren_1, function Trig_Nachalo_Eiti_aren_Actions)
	set index_0 = 0
	set gg_trg_HeroDeadonEitiArena_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_HeroDeadonEitiArena_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_HeroDeadonEitiArena_1, Condition(function Trig_HeroDeadonEitiArena_Conditions))
	call TriggerAddAction(gg_trg_HeroDeadonEitiArena_1, function Trig_HeroDeadonEitiArena_Actions)
	set rectRegion_0 = CreateRegion()
	set gg_trg__PortalCheckTop_1 = CreateTrigger()
	call RegionAddRect(rectRegion_0, gg_rct_Oblast_Teleporta_Arena_Top_1)
	call TriggerRegisterEnterRegion(gg_trg__PortalCheckTop_1, rectRegion_0, null)
	call TriggerAddCondition(gg_trg__PortalCheckTop_1, Condition(function Trig__PortalCheckTop_Conditions))
	call TriggerAddAction(gg_trg__PortalCheckTop_1, function Trig__PortalCheckTop_Actions)
	set rectRegion_0 = CreateRegion()
	set gg_trg__PortalCheckBot_1 = CreateTrigger()
	call RegionAddRect(rectRegion_0, gg_rct_Oblast_Teleporta_Arena_Bot_1)
	call TriggerRegisterEnterRegion(gg_trg__PortalCheckBot_1, rectRegion_0, null)
	call TriggerAddCondition(gg_trg__PortalCheckBot_1, Condition(function Trig__PortalCheckBot_Conditions))
	call TriggerAddAction(gg_trg__PortalCheckBot_1, function Trig__PortalCheckBot_Actions)
	set gg_trg_LinkItemsInit_1 = CreateTrigger()
	call TriggerRegisterTimerEvent(gg_trg_LinkItemsInit_1, 6., false)
	call TriggerAddAction(gg_trg_LinkItemsInit_1, function Trig_LinkItemsInit_Actions)
	set index_0 = 0
	set gg_trg_ItemPickedUp_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_ItemPickedUp_1, Player(index_0), EVENT_PLAYER_UNIT_PICKUP_ITEM_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddAction(gg_trg_ItemPickedUp_1, function Trig_ItemPickedUp_Actions)
	set gg_trg_ChargesConnecting_1 = CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(gg_trg_ChargesConnecting_1, EVENT_PLAYER_UNIT_PICKUP_ITEM_1)
	call TriggerAddCondition(gg_trg_ChargesConnecting_1, Condition(function Trig_ChargesConnecting_Conditions))
	call TriggerAddAction(gg_trg_ChargesConnecting_1, function Trig_ChargesConnecting_Actions)
	set gg_trg_Remove_Dammi_Items_1 = CreateTrigger()
	call DisableTrigger(gg_trg_Remove_Dammi_Items_1)
	call TriggerRegisterAnyUnitEventBJ(gg_trg_Remove_Dammi_Items_1, EVENT_PLAYER_UNIT_PICKUP_ITEM_1)
	call TriggerAddCondition(gg_trg_Remove_Dammi_Items_1, Condition(function Trig_Remove_Dammi_Items_Conditions))
	call TriggerAddAction(gg_trg_Remove_Dammi_Items_1, function Trig_Remove_Dammi_Items_Actions)
	set gg_trg_Save_Items_Cost_1 = CreateTrigger()
	call TriggerRegisterTimerEvent(gg_trg_Save_Items_Cost_1, 10., false)
	call TriggerAddAction(gg_trg_Save_Items_Cost_1, function Trig_Save_Items_Cost_Actions)
	set gg_trg_Ice_Boss_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Ice_Boss_1, function Trig_IceBoss_Actions)
	set index_0 = 0
	set gg_trg_Ice_Wall_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Ice_Wall_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Ice_Wall_1, Condition(function Trig_Ice_Wall_Conditions))
	call TriggerAddAction(gg_trg_Ice_Wall_1, function Trig_Ice_Wall_Actions)
	set index_0 = 0
	set gg_trg_Ice_Storm_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Ice_Storm_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Ice_Storm_1, Condition(function Trig_Ice_Storm_Conditions))
	call TriggerAddAction(gg_trg_Ice_Storm_1, function Trig_Ice_Storm_Actions)
	set index_0 = 0
	set gg_trg_Ice_Rain_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Ice_Rain_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Ice_Rain_1, Condition(function Trig_Ice_Rain_Conditions))
	call TriggerAddAction(gg_trg_Ice_Rain_1, function Trig_Ice_Rain_Actions)
	set index_0 = 0
	set gg_trg_Cold_Punishment_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Cold_Punishment_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Cold_Punishment_1, Condition(function Trig_Cold_Punishment_Conditions))
	call TriggerAddAction(gg_trg_Cold_Punishment_1, function Trig_Cold_Punishment_Actions)
	set index_0 = 0
	set gg_trg_Ice_Restoration_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Ice_Restoration_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Ice_Restoration_1, Condition(function Trig_Ice_Restoration_Conditions))
	call TriggerAddAction(gg_trg_Ice_Restoration_1, function Trig_Ice_Restoration_Actions)
	set gg_trg_BossStart_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_BossStart_1, function Trig_BossStart_Actions)
	set index_0 = 0
	set gg_trg_FlameSpells_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_FlameSpells_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_FlameSpells_1, Condition(function Trig_FlameSpells_Conditions))
	call TriggerAddAction(gg_trg_FlameSpells_1, function Trig_FlameSpells_Actions)
	set index_0 = 0
	set gg_trg_Fire_Circle_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Fire_Circle_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Fire_Circle_1, Condition(function Trig_Fire_Circle_Conditions))
	call TriggerAddAction(gg_trg_Fire_Circle_1, function Trig_Fire_Circle_Actions)
	set index_0 = 0
	set gg_trg_Fire_Meteor_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Fire_Meteor_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Fire_Meteor_1, Condition(function Trig_Fire_Meteor_Conditions))
	call TriggerAddAction(gg_trg_Fire_Meteor_1, function Trig_Fire_Meteor_Actions)
	set rectRegion_0 = CreateRegion()
	set gg_trg_Upgrade_Summons_1 = CreateTrigger()
	call RegionAddRect(rectRegion_0, gg_rct_6_1)
	call TriggerRegisterEnterRegion(gg_trg_Upgrade_Summons_1, rectRegion_0, null)
	call TriggerAddCondition(gg_trg_Upgrade_Summons_1, Condition(function Trig_Upgrade_Summons_Conditions))
	call TriggerAddAction(gg_trg_Upgrade_Summons_1, function Trig_Upgrade_Summons_Actions)
	set gg_trg_UseBeornSpells_1 = CreateTrigger()
	call TriggerRegisterTimerEvent(gg_trg_UseBeornSpells_1, 1., true)
	call TriggerAddAction(gg_trg_UseBeornSpells_1, function Trig_UseBeornSpells_Actions)
	set gg_trg_Start_Beorn_Den_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Start_Beorn_Den_1, function Trig_Start_Beorn_Den_Actions)
	set index_0 = 0
	set gg_trg_Beorn_Push_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Beorn_Push_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Beorn_Push_1, Condition(function Trig_Beorn_Push_Conditions))
	call TriggerAddAction(gg_trg_Beorn_Push_1, function Trig_Beorn_Push_Actions)
	set index_0 = 0
	set gg_trg_Beorn_Stomp_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Beorn_Stomp_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Beorn_Stomp_1, Condition(function Trig_Beorn_Stomp_Conditions))
	call TriggerAddAction(gg_trg_Beorn_Stomp_1, function Trig_Beorn_Stomp_Actions)
	set gg_trg_HeroUnitGameSave_1 = CreateTrigger()
	call TriggerRegisterEnterRectSimple(gg_trg_HeroUnitGameSave_1, gg_rct_Oblstb_Tavern_1)
	call TriggerAddAction(gg_trg_HeroUnitGameSave_1, function Trig_HeroUnitGameSave_Actions)
	set gg_trg_INIT_1 = CreateTrigger()
	call TriggerRegisterTimerEventSingle(gg_trg_INIT_1, 1.)
	call TriggerAddAction(gg_trg_INIT_1, function Trig_INIT_Actions)
	set index_0 = 0
	set gg_trg_Pick_Hero_Upgrade_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Pick_Hero_Upgrade_1, Player(index_0), EVENT_PLAYER_UNIT_SELL_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Pick_Hero_Upgrade_1, Condition(function Trig_Pick_Hero_Upgrade_Conditions))
	call TriggerAddAction(gg_trg_Pick_Hero_Upgrade_1, function Trig_Pick_Hero_Upgrade_Actions)
	set index_0 = 0
	set gg_trg_Hero_Dead_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Hero_Dead_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Hero_Dead_1, Condition(function Trig_Hero_Dead_Conditions))
	call TriggerAddAction(gg_trg_Hero_Dead_1, function Trig_Hero_Dead_Actions)
	set gg_trg_Start_Duel_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Start_Duel_1, function Trig_Start_Duel_Actions)
	set index_0 = 0
	set gg_trg_Hero_Death_On_Duel_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Hero_Death_On_Duel_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Hero_Death_On_Duel_1, Condition(function Trig_Hero_Death_On_Duel_Conditions))
	call TriggerAddAction(gg_trg_Hero_Death_On_Duel_1, function Trig_Hero_Death_On_Duel_Actions)
	set gg_trg_Timer_Check_1 = CreateTrigger()
	call TriggerRegisterTimerExpireEvent(gg_trg_Timer_Check_1, udg_Timer_Check_Forkreep_system_1)
	call TriggerAddAction(gg_trg_Timer_Check_1, function Trig_Timer_Check_Actions)
	set gg_trg_go_mochiytb_portal_1 = CreateTrigger()
	call DisableTrigger(gg_trg_go_mochiytb_portal_1)
	call TriggerRegisterTimerEvent(gg_trg_go_mochiytb_portal_1, 2., true)
	call TriggerAddAction(gg_trg_go_mochiytb_portal_1, function Trig_go_mochiytb_portal_Actions)
	set gg_trg_Start_game_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Start_game_1, function Trig_Start_game_Actions)
	set gg_trg_StartWave_1 = CreateTrigger()
	call TriggerRegisterTimerExpireEvent(gg_trg_StartWave_1, udg_Timer_Nomera_Volni_1)
	call TriggerAddAction(gg_trg_StartWave_1, function Trig_StartWave_Actions)
	set gg_trg_MobsAttackBase_1 = CreateTrigger()
	call TriggerRegisterTimerExpireEvent(gg_trg_MobsAttackBase_1, udg_TimerMobsAttackBase_1)
	call TriggerAddAction(gg_trg_MobsAttackBase_1, function Trig_MobsAttackBase_Actions)
	set gg_trg_TeleportStuckedCreeps_1 = CreateTrigger()
	call DisableTrigger(gg_trg_TeleportStuckedCreeps_1)
	call TriggerRegisterTimerEvent(gg_trg_TeleportStuckedCreeps_1, 2., true)
	call TriggerAddAction(gg_trg_TeleportStuckedCreeps_1, function Trig_TeleportStuckedCreeps_Actions)
	set rectRegion_0 = CreateRegion()
	set gg_trg_vhodit_v_zony_1 = CreateTrigger()
	call RegionAddRect(rectRegion_0, gg_rct_cast_magi_1)
	call TriggerRegisterEnterRegion(gg_trg_vhodit_v_zony_1, rectRegion_0, null)
	call TriggerAddCondition(gg_trg_vhodit_v_zony_1, Condition(function Trig_vhodit_v_zony_Conditions))
	call TriggerAddAction(gg_trg_vhodit_v_zony_1, function Trig_vhodit_v_zony_Actions)
	set index_0 = 0
	set gg_trg_Add_Gold_System_Receiving_Gold_for_Creeps_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Add_Gold_System_Receiving_Gold_for_Creeps_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Add_Gold_System_Receiving_Gold_for_Creeps_1, Condition(function Trig_Add_Gold_System_Receiving_Gold_for_Creeps_Conditions))
	call TriggerAddAction(gg_trg_Add_Gold_System_Receiving_Gold_for_Creeps_1, function Trig_Add_Gold_System_Receiving_Gold_for_Creeps_Actions)
	set gg_trg_Init_System_Receiving_Gold_for_Creeps_1 = CreateTrigger()
	call TriggerRegisterTimerEvent(gg_trg_Init_System_Receiving_Gold_for_Creeps_1, 3., false)
	call TriggerAddAction(gg_trg_Init_System_Receiving_Gold_for_Creeps_1, function Trig_Init_System_Receiving_Gold_for_Creeps_Actions)
	set gg_trg_Init_System_Receiving_Experience_for_Creeps_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Init_System_Receiving_Experience_for_Creeps_1, function Trig_Init_System_Receiving_Experience_for_Creeps_Actions)
	set index_0 = 0
	set gg_trg_Add_Experience_System_Receiving_Experience_for_Creeps_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Add_Experience_System_Receiving_Experience_for_Creeps_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Add_Experience_System_Receiving_Experience_for_Creeps_1, Condition(function Trig_Add_Experience_System_Receiving_Experience_for_Creeps_Conditions))
	call TriggerAddAction(gg_trg_Add_Experience_System_Receiving_Experience_for_Creeps_1, function Trig_Add_Experience_System_Receiving_Experience_for_Creeps_Actions)
	set gg_trg_Init_Potion_System_1 = CreateTrigger()
	call TriggerRegisterTimerEvent(gg_trg_Init_Potion_System_1, 1., false)
	call TriggerAddAction(gg_trg_Init_Potion_System_1, function Trig_Init_Potion_System_Actions)
	set index_0 = 0
	set gg_trg_Mob_Dead_Create_Potion_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Mob_Dead_Create_Potion_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Mob_Dead_Create_Potion_1, Condition(function Trig_Mob_Dead_Create_Potion_Conditions))
	call TriggerAddAction(gg_trg_Mob_Dead_Create_Potion_1, function Trig_Mob_Dead_Create_Potion_Actions)
	set gg_trg_Check_Potion_Picked_Up_1 = CreateTrigger()
	call TriggerAddCondition(gg_trg_Check_Potion_Picked_Up_1, Condition(function Trig_Check_Potion_Picked_Up_Conditions))
	call TriggerAddAction(gg_trg_Check_Potion_Picked_Up_1, function Trig_Check_Potion_Picked_Up_Actions)
	set gg_trg_InitSystem_1 = CreateTrigger()
	call TriggerRegisterTimerEvent(gg_trg_InitSystem_1, .01, false)
	call TriggerAddAction(gg_trg_InitSystem_1, function Trig_InitSystem_Actions)
	set rectRegion_0 = CreateRegion()
	set gg_trg_EnterUnit_1 = CreateTrigger()
	call RegionAddRect(rectRegion_0, GetWorldBounds())
	call TriggerRegisterEnterRegion(gg_trg_EnterUnit_1, rectRegion_0, null)
	call TriggerAddCondition(gg_trg_EnterUnit_1, Condition(function Trig_EnterUnit_Conditions))
	call TriggerAddAction(gg_trg_EnterUnit_1, function Trig_EnterUnit_Actions)
	set gg_trg_AddDamage_1 = CreateTrigger()
	call TriggerAddCondition(gg_trg_AddDamage_1, Condition(function Trig_Del_Conditions))
	call TriggerAddAction(gg_trg_AddDamage_1, function Trig_AddDamage_Actions)
	set index_0 = 0
	set gg_trg_TimeTalisman_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_TimeTalisman_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_TimeTalisman_1, Condition(function Trig_TimeTalisman_Conditions))
	call TriggerAddAction(gg_trg_TimeTalisman_1, function Trig_TimeTalisman_Actions)
	set index_0 = 0
	set gg_trg_Take_Paladin_Armor_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Take_Paladin_Armor_1, Player(index_0), EVENT_PLAYER_UNIT_PICKUP_ITEM_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Take_Paladin_Armor_1, Condition(function Trig_Take_Paladin_Armor_Conditions))
	call TriggerAddAction(gg_trg_Take_Paladin_Armor_1, function Trig_Take_Paladin_Armor_Actions)
	set index_0 = 0
	set gg_trg_Take_Archimagus_Staff_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Take_Archimagus_Staff_1, Player(index_0), EVENT_PLAYER_UNIT_PICKUP_ITEM_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Take_Archimagus_Staff_1, Condition(function Trig_Take_Archimagus_Staff_Conditions))
	call TriggerAddAction(gg_trg_Take_Archimagus_Staff_1, function Trig_Take_Archimagus_Staff_Actions)
	set index_0 = 0
	set gg_trg_Lost_Charged_Staff_of_Lightning_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Lost_Charged_Staff_of_Lightning_1, Player(index_0), EVENT_PLAYER_UNIT_DROP_ITEM_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Lost_Charged_Staff_of_Lightning_1, Condition(function Trig_Lost_Charged_Staff_of_Lightning_Conditions))
	call TriggerAddAction(gg_trg_Lost_Charged_Staff_of_Lightning_1, function Trig_Lost_Charged_Staff_of_Lightning_Actions)
	set index_0 = 0
	set gg_trg_Blood_Bow_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Blood_Bow_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Blood_Bow_1, Condition(function Trig_Blood_Bow_Conditions))
	call TriggerAddAction(gg_trg_Blood_Bow_1, function Trig_Blood_Bow_Actions)
	set index_0 = 0
	set gg_trg_Balance_Ring_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Balance_Ring_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Balance_Ring_1, Condition(function Trig_Balance_Ring_Conditions))
	call TriggerAddAction(gg_trg_Balance_Ring_1, function Trig_Balance_Ring_Actions)
	set index_0 = 0
	set gg_trg_Armageddon_Staff_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Armageddon_Staff_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Armageddon_Staff_1, Condition(function Trig_Armageddon_Staff_Conditions))
	call TriggerAddAction(gg_trg_Armageddon_Staff_1, function Trig_Armageddon_Staff_Actions)
	set index_0 = 0
	set gg_trg_Sargeras_Crown_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Sargeras_Crown_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Sargeras_Crown_1, Condition(function Trig_Sargeras_Crown_Conditions))
	call TriggerAddAction(gg_trg_Sargeras_Crown_1, function Trig_Sargeras_Crown_Actions)
	set index_0 = 0
	set gg_trg_Lost_Sargeras_Crown_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Lost_Sargeras_Crown_1, Player(index_0), EVENT_PLAYER_UNIT_DROP_ITEM_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Lost_Sargeras_Crown_1, Condition(function Trig_Lost_Sargeras_Crown_Conditions))
	call TriggerAddAction(gg_trg_Lost_Sargeras_Crown_1, function Trig_Lost_Sargeras_Crown_Actions)
	set index_0 = 0
	set gg_trg_Take_Sargeras_Crown_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Take_Sargeras_Crown_1, Player(index_0), EVENT_PLAYER_UNIT_PICKUP_ITEM_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Take_Sargeras_Crown_1, Condition(function Trig_Take_Sargeras_Crown_Conditions))
	call TriggerAddAction(gg_trg_Take_Sargeras_Crown_1, function Trig_Take_Sargeras_Crown_Actions)
	set index_0 = 0
	set gg_trg_Lost_Archimagus_Armor_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Lost_Archimagus_Armor_1, Player(index_0), EVENT_PLAYER_UNIT_DROP_ITEM_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Lost_Archimagus_Armor_1, Condition(function Trig_Lost_Archimagus_Armor_Conditions))
	call TriggerAddAction(gg_trg_Lost_Archimagus_Armor_1, function Trig_Lost_Archimagus_Armor_Actions)
	set index_0 = 0
	set gg_trg_Take_Archimagus_Armor_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Take_Archimagus_Armor_1, Player(index_0), EVENT_PLAYER_UNIT_PICKUP_ITEM_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Take_Archimagus_Armor_1, Condition(function Trig_Take_Archimagus_Armor_Conditions))
	call TriggerAddAction(gg_trg_Take_Archimagus_Armor_1, function Trig_Take_Archimagus_Armor_Actions)
	set index_0 = 0
	set gg_trg_Sorcerers_Talisman_Cast_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Sorcerers_Talisman_Cast_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Sorcerers_Talisman_Cast_1, Condition(function Trig_Sorcerers_Talisman_Cast_Conditions))
	call TriggerAddAction(gg_trg_Sorcerers_Talisman_Cast_1, function Trig_Sorcerers_Talisman_Cast_Actions)
	set index_0 = 0
	set gg_trg_Sorcerers_Talisman_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Sorcerers_Talisman_1, Player(index_0), EVENT_PLAYER_UNIT_USE_ITEM_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Sorcerers_Talisman_1, Condition(function Trig_Sorcerers_Talisman_Conditions))
	call TriggerAddAction(gg_trg_Sorcerers_Talisman_1, function Trig_Sorcerers_Talisman_Actions)
	set index_0 = 0
	set gg_trg_Sorcerers_Talisman_Dead_Unit_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Sorcerers_Talisman_Dead_Unit_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Sorcerers_Talisman_Dead_Unit_1, Condition(function Trig_Sorcerers_Talisman_Dead_Unit_Condition))
	call TriggerAddAction(gg_trg_Sorcerers_Talisman_Dead_Unit_1, function Trig_Sorcerers_Talisman_Dead_Unit_Actions)
	set index_0 = 0
	set gg_trg_Orc_Banner_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Orc_Banner_1, Player(index_0), EVENT_PLAYER_UNIT_PICKUP_ITEM_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Orc_Banner_1, Condition(function Trig_Orc_Banner_Conditions))
	call TriggerAddAction(gg_trg_Orc_Banner_1, function Trig_Orc_Banner_Actions)
	set index_0 = 0
	set gg_trg_Devil_Axe_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Devil_Axe_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Devil_Axe_1, Condition(function Trig_Devil_Axe_Conditions))
	call TriggerAddAction(gg_trg_Devil_Axe_1, function Trig_Devil_Axe_Actions)
	set index_0 = 0
	set gg_trg_Devil_Axe_Kill_Unit_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Devil_Axe_Kill_Unit_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Devil_Axe_Kill_Unit_1, Condition(function Trig_Devil_Axe_Kill_Unit_Conditions))
	call TriggerAddAction(gg_trg_Devil_Axe_Kill_Unit_1, function Trig_Devil_Axe_Kill_Unit_Actions)
	set index_0 = 0
	set gg_trg_Tokugawas_Katan_Kill_Unit_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Tokugawas_Katan_Kill_Unit_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Tokugawas_Katan_Kill_Unit_1, Condition(function Trig_Tokugawas_Katan_Kill_Unit_Conditions))
	call TriggerAddAction(gg_trg_Tokugawas_Katan_Kill_Unit_1, function Trig_Tokugawas_Katan_Kill_Unit_Actions)
	set index_0 = 0
	set gg_trg_Tokugawas_Katan_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Tokugawas_Katan_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Tokugawas_Katan_1, Condition(function Trig_Tokugawas_Katan_Conditions))
	call TriggerAddAction(gg_trg_Tokugawas_Katan_1, function Trig_Tokugawas_Katan_Actions)
	set index_0 = 0
	set gg_trg_Kings_Armor_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Kings_Armor_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Kings_Armor_1, Condition(function Trig_Kings_Armor_Conditions))
	call TriggerAddAction(gg_trg_Kings_Armor_1, function Trig_Kings_Armor_Actions)
	set index_0 = 0
	set gg_trg_Steel_Bib_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Steel_Bib_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Steel_Bib_1, Condition(function Trig_Steel_Bib_Conditions))
	call TriggerAddAction(gg_trg_Steel_Bib_1, function Trig_Steel_Bib_Actions)
	set index_0 = 0
	set gg_trg_Archimagus_Staff_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Archimagus_Staff_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Archimagus_Staff_1, Condition(function Trig_Archimagus_Staff_Conditions))
	call TriggerAddAction(gg_trg_Archimagus_Staff_1, function Trig_Archimagus_Staff_Actions)
	set index_0 = 0
	set gg_trg_Isidors_Scepter_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Isidors_Scepter_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Isidors_Scepter_1, Condition(function Trig_Isidors_Scepter_Conditions))
	call TriggerAddAction(gg_trg_Isidors_Scepter_1, function Trig_Isidors_Scepter_Actions)
	set index_0 = 0
	set gg_trg_Detached_Shield_Use_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Detached_Shield_Use_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Detached_Shield_Use_1, Condition(function Trig_Detached_Shield_Use_Conditions))
	call TriggerAddAction(gg_trg_Detached_Shield_Use_1, function Trig_Detached_Shield_Use_Actions)
	set index_0 = 0
	set gg_trg_Cuirass_of_Invulnerable_Use2_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Cuirass_of_Invulnerable_Use2_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Cuirass_of_Invulnerable_Use2_1, Condition(function Trig_Cuirass_of_Invulnerable_Use2_Conditions))
	call TriggerAddAction(gg_trg_Cuirass_of_Invulnerable_Use2_1, function Trig_Cuirass_of_Invulnerable_Use2_Actions)
	set index_0 = 0
	set gg_trg_Lost_Cuirass_of_Invulnerable_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Lost_Cuirass_of_Invulnerable_1, Player(index_0), EVENT_PLAYER_UNIT_DROP_ITEM_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Lost_Cuirass_of_Invulnerable_1, Condition(function Trig_Lost_Cuirass_of_Invulnerable_Conditions))
	call TriggerAddAction(gg_trg_Lost_Cuirass_of_Invulnerable_1, function Trig_Lost_Cuirass_of_Invulnerable_Actions)
	set index_0 = 0
	set gg_trg_Take_Cuirass_of_Invulnerable_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Take_Cuirass_of_Invulnerable_1, Player(index_0), EVENT_PLAYER_UNIT_PICKUP_ITEM_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Take_Cuirass_of_Invulnerable_1, Condition(function Trig_Take_Cuirass_of_Invulnerable_Conditions))
	call TriggerAddAction(gg_trg_Take_Cuirass_of_Invulnerable_1, function Trig_Take_Cuirass_of_Invulnerable_Actions)
	set index_0 = 0
	set gg_trg_Fire_Staff_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Fire_Staff_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Fire_Staff_1, Condition(function Trig_Fire_Staff_Conditions))
	call TriggerAddAction(gg_trg_Fire_Staff_1, function Trig_Fire_Staff_Actions)
	set index_0 = 0
	set gg_trg_Demon_Axe_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Demon_Axe_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Demon_Axe_1, Condition(function Trig_Demon_Axe_Conditions))
	call TriggerAddAction(gg_trg_Demon_Axe_1, function Trig_Demon_Axe_Actions)
	set index_0 = 0
	set gg_trg_Demon_Axe_Kill_Unit_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Demon_Axe_Kill_Unit_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Demon_Axe_Kill_Unit_1, Condition(function Trig_Demon_Axe_Kill_Unit_Conditions))
	call TriggerAddAction(gg_trg_Demon_Axe_Kill_Unit_1, function Trig_Demon_Axe_Kill_Unit_Actions)
	set index_0 = 0
	set gg_trg_Boots_Rescue_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Boots_Rescue_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Boots_Rescue_1, Condition(function Trig_Boots_Rescue_Conditions))
	call TriggerAddAction(gg_trg_Boots_Rescue_1, function Trig_Boots_Rescue_Actions)
	set index_0 = 0
	set gg_trg_Astral_Staff_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Astral_Staff_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Astral_Staff_1, Condition(function Trig_Astral_Staff_Conditions))
	call TriggerAddAction(gg_trg_Astral_Staff_1, function Trig_Astral_Staff_Actions)
	set index_0 = 0
	set gg_trg_Healer_Staff_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Healer_Staff_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Healer_Staff_1, Condition(function Trig_Healer_Staff_Conditions))
	call TriggerAddAction(gg_trg_Healer_Staff_1, function Trig_Healer_Staff_Actions)
	set index_0 = 0
	set gg_trg_Magic_Amulet_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Magic_Amulet_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Magic_Amulet_1, Condition(function Trig_Magic_Amulet_Conditions))
	call TriggerAddAction(gg_trg_Magic_Amulet_1, function Trig_Magic_Amulet_Actions)
	set index_0 = 0
	set gg_trg_Blood_Dagger_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Blood_Dagger_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Blood_Dagger_1, Condition(function Trig_Blood_Dagger_Conditions))
	call TriggerAddAction(gg_trg_Blood_Dagger_1, function Trig_Blood_Dagger_Actions)
	set index_0 = 0
	set gg_trg_Agility_Blade_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Agility_Blade_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Agility_Blade_1, Condition(function Trig_Agility_Blade_Conditions))
	call TriggerAddAction(gg_trg_Agility_Blade_1, function Trig_Agility_Blade_Actions)
	set gg_trg_Bone_Staff_Set_Summon_Ability_Level_1 = CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(gg_trg_Bone_Staff_Set_Summon_Ability_Level_1, EVENT_PLAYER_UNIT_SUMMON_1)
	call TriggerAddCondition(gg_trg_Bone_Staff_Set_Summon_Ability_Level_1, Condition(function Trig_Bone_Staff_Set_Summon_Ability_Level_Conditions))
	call TriggerAddAction(gg_trg_Bone_Staff_Set_Summon_Ability_Level_1, function Trig_Bone_Staff_Set_Summon_Ability_Level_Actions)
	set gg_trg_Novice_Amulet_1 = CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(gg_trg_Novice_Amulet_1, EVENT_PLAYER_UNIT_SPELL_EFFECT_1)
	call TriggerAddCondition(gg_trg_Novice_Amulet_1, Condition(function Trig_Novice_Amulet_Conditions))
	call TriggerAddAction(gg_trg_Novice_Amulet_1, function Trig_Novice_Amulet_Actions)
	set index_0 = 0
	set gg_trg_Glove_of_Andromat_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Glove_of_Andromat_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Glove_of_Andromat_1, Condition(function Trig_Glove_of_Andromat_Conditions))
	call TriggerAddAction(gg_trg_Glove_of_Andromat_1, function Trig_Glove_of_Andromat_Actions)
	set index_0 = 0
	set gg_trg_Glove_of_Midas_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Glove_of_Midas_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Glove_of_Midas_1, Condition(function Trig_Glove_of_Midas_Conditions))
	call TriggerAddAction(gg_trg_Glove_of_Midas_1, function Trig_Glove_of_Midas_Actions)
	set index_0 = 0
	set gg_trg_Heroes_more_attacked_priority_when_guards_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Heroes_more_attacked_priority_when_guards_1, Player(index_0), EVENT_PLAYER_UNIT_ATTACKED_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Heroes_more_attacked_priority_when_guards_1, Condition(function Trig_Heroes_more_attacked_priority_when_guards_Conditions))
	call TriggerAddAction(gg_trg_Heroes_more_attacked_priority_when_guards_1, function Trig_Heroes_more_attacked_priority_when_guards_Actions)
	set index_0 = 0
	set gg_trg_Player_Fast_Purchase_System_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Player_Fast_Purchase_System_1, Player(index_0), EVENT_PLAYER_UNIT_ISSUED_ORDER_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Player_Fast_Purchase_System_1, Condition(function Trig_Player_Fast_Purchase_System_Conditions))
	call TriggerAddAction(gg_trg_Player_Fast_Purchase_System_1, function Trig_Player_Fast_Purchase_System_Actions)
	set gg_trg_Show_hint_abount_hints_1 = CreateTrigger()
	call TriggerRegisterTimerEventSingle(gg_trg_Show_hint_abount_hints_1, 120.)
	call TriggerRegisterTimerEventSingle(gg_trg_Show_hint_abount_hints_1, 600.)
	call TriggerAddAction(gg_trg_Show_hint_abount_hints_1, function Trig_Show_hint_abount_hints_Actions)
	set gg_trg_Show_Hint_Abount_Items_1 = CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(gg_trg_Show_Hint_Abount_Items_1, 600.)
	call TriggerAddAction(gg_trg_Show_Hint_Abount_Items_1, function Trig_Show_Hint_Abount_Items_Actions)
	set gg_trg_Hint_About_Random_1 = CreateTrigger()
	call TriggerRegisterTimerEventSingle(gg_trg_Hint_About_Random_1, 13.)
	call TriggerAddAction(gg_trg_Hint_About_Random_1, function Trig_Hint_About_Random_Actions)
	set gg_trg_Show_hint_abount_reference_panel_1 = CreateTrigger()
	call TriggerRegisterTimerEventSingle(gg_trg_Show_hint_abount_reference_panel_1, 200.)
	call TriggerRegisterTimerEventSingle(gg_trg_Show_hint_abount_reference_panel_1, 1200.)
	call TriggerAddAction(gg_trg_Show_hint_abount_reference_panel_1, function Trig_Show_hint_abount_reference_panel_Actions)
	set index_0 = 0
	set gg_trg_Show_Ability_Learn_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Show_Ability_Learn_1, Player(index_0), EVENT_PLAYER_HERO_SKILL_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Show_Ability_Learn_1, Condition(function Trig_Show_Ability_Learn_Conditions))
	call TriggerAddAction(gg_trg_Show_Ability_Learn_1, function Trig_Show_Ability_Learn_Actions)
	set index_0 = 0
	set gg_trg_System_Personal_Items_Buy_Item_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_System_Personal_Items_Buy_Item_1, Player(index_0), EVENT_PLAYER_UNIT_SELL_ITEM_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddAction(gg_trg_System_Personal_Items_Buy_Item_1, function Trig_System_Personal_Items_Buy_Item_Actions)
	set index_0 = 0
	set gg_trg_System_Personal_Items_Pick_Up_Item_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_System_Personal_Items_Pick_Up_Item_1, Player(index_0), EVENT_PLAYER_UNIT_PICKUP_ITEM_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddAction(gg_trg_System_Personal_Items_Pick_Up_Item_1, function Trig_System_Personal_Items_Pick_Up_Item_Actions)
	set gg_trg_no_attack_1 = CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(gg_trg_no_attack_1, EVENT_PLAYER_UNIT_ATTACKED_1)
	call TriggerAddCondition(gg_trg_no_attack_1, Condition(function Trig_no_attack_Conditions))
	call TriggerAddAction(gg_trg_no_attack_1, function Trig_no_attack_Actions)
	set index_0 = 0
	set gg_trg_Select_Refrence_Panel_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Select_Refrence_Panel_1, Player(index_0), EVENT_PLAYER_UNIT_SELECTED_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Select_Refrence_Panel_1, Condition(function Trig_Select_Refrence_Panel_Conditions))
	call TriggerAddAction(gg_trg_Select_Refrence_Panel_1, function Trig_Select_Refrence_Panel_Actions)
	set index_0 = 0
	set gg_trg_ShopAnimation_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_ShopAnimation_1, Player(index_0), EVENT_PLAYER_UNIT_SELECTED_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_ShopAnimation_1, Condition(function Trig_ShopAnimation_Conditions))
	call TriggerAddAction(gg_trg_ShopAnimation_1, function Trig_ShopAnimation_Actions)
	set index_0 = 0
	set gg_trg_ShopStopAnimation_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_ShopStopAnimation_1, Player(index_0), EVENT_PLAYER_UNIT_DESELECTED_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_ShopStopAnimation_1, Condition(function Trig_ShopStopAnimation_Conditions))
	call TriggerAddAction(gg_trg_ShopStopAnimation_1, function Trig_ShopStopAnimation_Actions)
	set rectRegion_0 = CreateRegion()
	set gg_trg_RedMarkToUnit_1 = CreateTrigger()
	call RegionAddRect(rectRegion_0, bj_mapInitialPlayableArea_1)
	call TriggerRegisterEnterRegion(gg_trg_RedMarkToUnit_1, rectRegion_0, null)
	call TriggerAddAction(gg_trg_RedMarkToUnit_1, function Trig_RedMarkToUnit_Actions)
	set index_0 = 0
	set gg_trg_UnSelectedDummyRedMark_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_UnSelectedDummyRedMark_1, Player(index_0), EVENT_PLAYER_UNIT_SELECTED_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_UnSelectedDummyRedMark_1, Condition(function Trig_UnSelectedDummyRedMark_Conditions))
	call TriggerAddAction(gg_trg_UnSelectedDummyRedMark_1, function Trig_UnSelectedDummyRedMark_Actions)
	set gg_trg_SpecEffect_on_Casters_1 = CreateTrigger()
	call TriggerRegisterTimerEvent(gg_trg_SpecEffect_on_Casters_1, .0, false)
	call TriggerAddAction(gg_trg_SpecEffect_on_Casters_1, function Trig_SpecEffect_on_Casters_Actions)
	set gg_trg_PortalSpecEffects_1 = CreateTrigger()
	call TriggerRegisterTimerEvent(gg_trg_PortalSpecEffects_1, 2., false)
	call TriggerAddAction(gg_trg_PortalSpecEffects_1, function Trig_PortalSpecEffects_Actions)
	set gg_trg_Gates_Start_Animation_1 = CreateTrigger()
	call TriggerRegisterTimerEventSingle(gg_trg_Gates_Start_Animation_1, 2.)
	call TriggerAddAction(gg_trg_Gates_Start_Animation_1, function Trig_Gates_Start_Animation_Actions)
	set index_0 = 0
	set gg_trg_PlayerEnterGameCommand_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerChatEvent(gg_trg_PlayerEnterGameCommand_1, Player(index_0), "-", false)
		call TriggerRegisterPlayerChatEvent(gg_trg_PlayerEnterGameCommand_1, Player(index_0), "+", true)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddAction(gg_trg_PlayerEnterGameCommand_1, function Trig_PlayerEnterGameCommand_Actions)
	set index_0 = 0
	set gg_trg_PlayerUseSpellGameCommand_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_PlayerUseSpellGameCommand_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_PlayerUseSpellGameCommand_1, Condition(function Trig_PlayerUseSpellGameCommand_Conditions))
	call TriggerAddAction(gg_trg_PlayerUseSpellGameCommand_1, function Trig_PlayerUseSpellGameCommand_Actions)
	set index_0 = 0
	set gg_trg_GuardsExorcistDead_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_GuardsExorcistDead_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_GuardsExorcistDead_1, Condition(function Trig_GuardsExorcistDead_Conditions))
	call TriggerAddAction(gg_trg_GuardsExorcistDead_1, function Trig_GuardsExorcistDead_Actions)
	set gg_trg_PauseUnitWhenDefeat_1 = CreateTrigger()
	call DisableTrigger(gg_trg_PauseUnitWhenDefeat_1)
	call TriggerRegisterTimerEventPeriodic(gg_trg_PauseUnitWhenDefeat_1, .05)
	call TriggerAddAction(gg_trg_PauseUnitWhenDefeat_1, function Trig_PauseUnitWhenDefeat_Actions)
	set gg_trg_PauseUnitWhenWin_1 = CreateTrigger()
	call DisableTrigger(gg_trg_PauseUnitWhenWin_1)
	call TriggerRegisterEnterRectSimple(gg_trg_PauseUnitWhenWin_1, bj_mapInitialPlayableArea_1)
	call TriggerAddAction(gg_trg_PauseUnitWhenWin_1, function Trig_PauseUnitWhenWin_Actions)
	set gg_trg_GameEndWin_1 = CreateTrigger()
	call DisableTrigger(gg_trg_GameEndWin_1)
	call TriggerAddAction(gg_trg_GameEndWin_1, function Trig_GameEndWin_Actions)
	set gg_trg_Respawn_trees_Init_1 = CreateTrigger()
	call TriggerRegisterTimerEvent(gg_trg_Respawn_trees_Init_1, 5., false)
	call TriggerAddAction(gg_trg_Respawn_trees_Init_1, function Trig_Respawn_trees_Init_Actions)
	set gg_trg_Respawn_trees_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Respawn_trees_1, function Trig_Respawn_trees_Actions)
	set gg_trg_Day_Weather_1 = CreateTrigger()
	call TriggerRegisterGameStateEventTimeOfDay(gg_trg_Day_Weather_1, EQUAL_1, 6.)
	call TriggerRegisterGameStateEventTimeOfDay(gg_trg_Day_Weather_1, EQUAL_1, 12.)
	call TriggerAddAction(gg_trg_Day_Weather_1, function Trig_Day_Weather_Actions)
	set gg_trg_Sky_Morning_1 = CreateTrigger()
	call TriggerRegisterGameStateEventTimeOfDay(gg_trg_Sky_Morning_1, EQUAL_1, 6.)
	call TriggerAddAction(gg_trg_Sky_Morning_1, function Trig_Sky_Morning_Actions)
	set gg_trg_Sky_Day_1 = CreateTrigger()
	call TriggerRegisterGameStateEventTimeOfDay(gg_trg_Sky_Day_1, EQUAL_1, 12.)
	call TriggerAddAction(gg_trg_Sky_Day_1, function Trig_Sky_Day_Actions)
	set gg_trg_Night_Weather_1 = CreateTrigger()
	call TriggerRegisterGameStateEventTimeOfDay(gg_trg_Night_Weather_1, EQUAL_1, 18.)
	call TriggerRegisterGameStateEventTimeOfDay(gg_trg_Night_Weather_1, EQUAL_1, .0)
	call TriggerAddAction(gg_trg_Night_Weather_1, function Trig_Night_Weather_Actions)
	set gg_trg_Sky_Evening_1 = CreateTrigger()
	call TriggerRegisterGameStateEventTimeOfDay(gg_trg_Sky_Evening_1, EQUAL_1, 18.)
	call TriggerAddAction(gg_trg_Sky_Evening_1, function Trig_Sky_Evening_Actions)
	set gg_trg_Sky_Night_1 = CreateTrigger()
	call TriggerRegisterGameStateEventTimeOfDay(gg_trg_Sky_Night_1, EQUAL_1, .0)
	call TriggerAddAction(gg_trg_Sky_Night_1, function Trig_Sky_Night_Actions)
	set gg_trg_Lightnings_Weather_Effect_Rainy_1 = CreateTrigger()
	call TriggerRegisterTimerExpireEvent(gg_trg_Lightnings_Weather_Effect_Rainy_1, udg_Timer_Lightning_Strike_Weather_1)
	call TriggerAddCondition(gg_trg_Lightnings_Weather_Effect_Rainy_1, Condition(function Trig_Lightnings_Weather_Effect_Rainy_Conditions))
	call TriggerAddAction(gg_trg_Lightnings_Weather_Effect_Rainy_1, function Trig_Lightnings_Weather_Effect_Rainy_Actions)
	set gg_trg_Periodic_Rune_Creation_1 = CreateTrigger()
	call DisableTrigger(gg_trg_Periodic_Rune_Creation_1)
	call TriggerRegisterTimerEventPeriodic(gg_trg_Periodic_Rune_Creation_1, 60.1)
	call TriggerAddAction(gg_trg_Periodic_Rune_Creation_1, function Trig_Periodic_Rune_Creation_Actions)
	set index_0 = 0
	set gg_trg_Rune_PickedUp_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Rune_PickedUp_1, Player(index_0), EVENT_PLAYER_UNIT_PICKUP_ITEM_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Rune_PickedUp_1, Condition(function Trig_Rune_PickedUp_Conditions))
	call TriggerAddAction(gg_trg_Rune_PickedUp_1, function Trig_Rune_PickedUp_Actions)
	set gg_trg_Initialization_MultiBoard_1 = CreateTrigger()
	call TriggerRegisterTimerEventSingle(gg_trg_Initialization_MultiBoard_1, 3.)
	call TriggerAddAction(gg_trg_Initialization_MultiBoard_1, function Trig_Initialization_MultiBoard_Actions)
	set gg_trg_Hero_MultiBoard_LvlUp_1 = CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(gg_trg_Hero_MultiBoard_LvlUp_1, EVENT_PLAYER_HERO_LEVEL_1)
	call TriggerAddCondition(gg_trg_Hero_MultiBoard_LvlUp_1, Condition(function Trig_Hero_MultiBoard_LvlUp_Conditions))
	call TriggerAddAction(gg_trg_Hero_MultiBoard_LvlUp_1, function Trig_Hero_MultiBoard_LvlUp_Actions)
	set gg_trg_Time_Check_and_Player_Gold_for_MultiBoard_1 = CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(gg_trg_Time_Check_and_Player_Gold_for_MultiBoard_1, 1.)
	call TriggerAddAction(gg_trg_Time_Check_and_Player_Gold_for_MultiBoard_1, function Trig_Time_Check_and_Player_Gold_for_MultiBoard_Actions)
	set index_0 = 0
	set gg_trg_Reincarnation_Skeletons_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Reincarnation_Skeletons_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Reincarnation_Skeletons_1, Condition(function Trig_Reincarnation_Skeletons_Conditions))
	call TriggerAddAction(gg_trg_Reincarnation_Skeletons_1, function Trig_Reincarnation_Skeletons_Actions)
	set index_0 = 0
	set gg_trg_BossSkeletRaise_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_BossSkeletRaise_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_BossSkeletRaise_1, Condition(function Trig_BossSkeletRaise_Conditions))
	call TriggerAddAction(gg_trg_BossSkeletRaise_1, function Trig_BossSkeletRaise_Actions)
	set index_0 = 0
	set gg_trg_BossSkeletSkillActiv_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_BossSkeletSkillActiv_1, Player(index_0), EVENT_PLAYER_UNIT_ATTACKED_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_BossSkeletSkillActiv_1, Condition(function Trig_BossSkeletSkillActiv_Conditions))
	call TriggerAddAction(gg_trg_BossSkeletSkillActiv_1, function Trig_BossSkeletSkillActiv_Actions)
	set index_0 = 0
	set gg_trg_Fire_Arrow_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Fire_Arrow_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Fire_Arrow_1, Condition(function Trig_Fire_Arrow_Conditions))
	call TriggerAddAction(gg_trg_Fire_Arrow_1, function Trig_Fire_Arrow_Actions)
	set gg_trg_Use_UnholyFrenzy_and_Fire_Arrow_1 = CreateTrigger()
	call TriggerRegisterTimerEvent(gg_trg_Use_UnholyFrenzy_and_Fire_Arrow_1, 1., true)
	call TriggerAddCondition(gg_trg_Use_UnholyFrenzy_and_Fire_Arrow_1, Condition(function Trig_Use_UnholyFrenzy_and_Fire_Arrow_Conditions))
	call TriggerAddAction(gg_trg_Use_UnholyFrenzy_and_Fire_Arrow_1, function Trig_Use_UnholyFrenzy_and_Fire_Arrow_Actions)
	set index_0 = 0
	set gg_trg_Create_Tombstone_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Create_Tombstone_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Create_Tombstone_1, Condition(function Trig_Create_Tombstone_Conditions))
	call TriggerAddAction(gg_trg_Create_Tombstone_1, function Trig_Create_Tombstone_Actions)
	set index_0 = 0
	set gg_trg_ZombieExploadDeath_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_ZombieExploadDeath_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_ZombieExploadDeath_1, Condition(function Trig_ZombieExploadDeath_Conditions))
	call TriggerAddAction(gg_trg_ZombieExploadDeath_1, function Trig_ZombieExploadDeath_Actions)
	set index_0 = 0
	set gg_trg_Damned_Soul_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Damned_Soul_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Damned_Soul_1, Condition(function Trig_Damned_Soul_Conditions))
	call TriggerAddAction(gg_trg_Damned_Soul_1, function Trig_Damned_Soul_Actions)
	set gg_trg_Use_PowerofHorror_and_Curse_and_Slam_and_Dumned_Soul_1 = CreateTrigger()
	call TriggerRegisterTimerEvent(gg_trg_Use_PowerofHorror_and_Curse_and_Slam_and_Dumned_Soul_1, 1., true)
	call TriggerAddCondition(gg_trg_Use_PowerofHorror_and_Curse_and_Slam_and_Dumned_Soul_1, Condition(function Trig_Use_PowerofHorror_and_Curse_and_Slam_Conditions))
	call TriggerAddAction(gg_trg_Use_PowerofHorror_and_Curse_and_Slam_and_Dumned_Soul_1, function Trig_Use_PowerofHorror_and_Curse_and_Slam_Actions)
	set index_0 = 0
	set gg_trg_Throw_Meat_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Throw_Meat_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Throw_Meat_1, Condition(function Trig_Throw_Meat_Conditions))
	call TriggerAddAction(gg_trg_Throw_Meat_1, function Trig_Throw_Meat_Actions)
	set index_0 = 0
	set gg_trg_Earth_Clap_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Earth_Clap_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Earth_Clap_1, Condition(function Trig_Earth_Clap_Conditions))
	call TriggerAddAction(gg_trg_Earth_Clap_1, function Trig_Earth_Clap_Actions)
	set index_0 = 0
	set gg_trg_Ghoul_Jump_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Ghoul_Jump_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Ghoul_Jump_1, Condition(function Trig_Ghoul_Jump_Conditions))
	call TriggerAddAction(gg_trg_Ghoul_Jump_1, function Trig_Ghoul_Jump_Actions)
	set index_0 = 0
	set gg_trg_BurrowStrike_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_BurrowStrike_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_BurrowStrike_1, Condition(function Trig_BurrowStrike_Conditions))
	call TriggerAddAction(gg_trg_BurrowStrike_1, function Trig_BurrowStrike_Actions)
	set gg_trg_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_1 = CreateTrigger()
	call TriggerRegisterTimerEvent(gg_trg_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_1, 1., true)
	call TriggerAddCondition(gg_trg_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_1, Condition(function Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Conditions))
	call TriggerAddAction(gg_trg_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_1, function Trig_Use_Raise_Skeletons_and_Death_Coil_and_Trupoedi_and_Pierce_and_Ghoul_Jump_Actions)
	set index_0 = 0
	set gg_trg_BeetleCorpseBurrowCast_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_BeetleCorpseBurrowCast_1, Player(index_0), EVENT_PLAYER_UNIT_ATTACKED_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_BeetleCorpseBurrowCast_1, Condition(function Trig_BeetleCorpseBurrowCast_Conditions))
	call TriggerAddAction(gg_trg_BeetleCorpseBurrowCast_1, function Trig_BeetleCorpseBurrowCast_Actions)
	set index_0 = 0
	set gg_trg_BeetleCorpseBurrow_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_BeetleCorpseBurrow_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_BeetleCorpseBurrow_1, Condition(function Trig_BeetleCorpseBurrow_Conditions))
	call TriggerAddAction(gg_trg_BeetleCorpseBurrow_1, function Trig_BeetleCorpseBurrow_Actions)
	set index_0 = 0
	set gg_trg_Cocoon_Creation_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Cocoon_Creation_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Cocoon_Creation_1, Condition(function Trig_Cocoon_Creation_Conditions))
	call TriggerAddAction(gg_trg_Cocoon_Creation_1, function Trig_Cocoon_Creation_Actions)
	set index_0 = 0
	set gg_trg_Poisonous_Spittle_Cast_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Poisonous_Spittle_Cast_1, Player(index_0), EVENT_PLAYER_UNIT_ATTACKED_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Poisonous_Spittle_Cast_1, Condition(function Trig_Poisonous_Spittle_Cast_Conditions))
	call TriggerAddAction(gg_trg_Poisonous_Spittle_Cast_1, function Trig_Poisonous_Spittle_Cast_Actions)
	set index_0 = 0
	set gg_trg_Holes_Of_Grave_Diggers_Debug_Kill_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Holes_Of_Grave_Diggers_Debug_Kill_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Holes_Of_Grave_Diggers_Debug_Kill_1, Condition(function Trig_Holes_Of_Grave_Diggers_Debug_Kill_Conditions))
	call TriggerAddAction(gg_trg_Holes_Of_Grave_Diggers_Debug_Kill_1, function Trig_Holes_Of_Grave_Diggers_Debug_Kill_Actions)
	set index_0 = 0
	set gg_trg_Holes_Of_Grave_Diggers_Cast_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Holes_Of_Grave_Diggers_Cast_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Holes_Of_Grave_Diggers_Cast_1, Condition(function Trig_Holes_Of_Grave_Diggers_Cast_Conditions))
	call TriggerAddAction(gg_trg_Holes_Of_Grave_Diggers_Cast_1, function Trig_Holes_Of_Grave_Diggers_Cast_Actions)
	set index_0 = 0
	set gg_trg_Nerub_Spider_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Nerub_Spider_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Nerub_Spider_1, Condition(function Trig_Nerub_Spider_Conditions))
	call TriggerAddAction(gg_trg_Nerub_Spider_1, function Trig_Nerub_Spider_Actions)
	set gg_trg_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_1 = CreateTrigger()
	call TriggerRegisterTimerEvent(gg_trg_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_1, 1., true)
	call TriggerAddCondition(gg_trg_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_1, Condition(function Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Conditions))
	call TriggerAddAction(gg_trg_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_1, function Trig_Use_Spiders_threads_and_Holes_of_Grave_And_Spider_Summon_and_PosionDagger_Actions)
	set index_0 = 0
	set gg_trg_Damned_Ents_Reincarnation_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Damned_Ents_Reincarnation_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Damned_Ents_Reincarnation_1, Condition(function Trig_Damned_Ents_Reincarnation_Conditions))
	call TriggerAddAction(gg_trg_Damned_Ents_Reincarnation_1, function Trig_Damned_Ents_Reincarnation_Actions)
	set index_0 = 0
	set gg_trg_Rage_of_Decay_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Rage_of_Decay_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Rage_of_Decay_1, Condition(function Trig_Rage_of_Decay_Conditions))
	call TriggerAddAction(gg_trg_Rage_of_Decay_1, function Trig_Rage_of_Decay_Actions)
	set gg_trg_Use_ThrowStone_and_TurnIntoEnt_1 = CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(gg_trg_Use_ThrowStone_and_TurnIntoEnt_1, EVENT_PLAYER_UNIT_ATTACKED_1)
	call TriggerAddCondition(gg_trg_Use_ThrowStone_and_TurnIntoEnt_1, Condition(function Trig_Use_ThrowStone_and_TurnIntoEnt_Conditions))
	call TriggerAddAction(gg_trg_Use_ThrowStone_and_TurnIntoEnt_1, function Trig_Use_ThrowStone_and_TurnIntoEnt_Actions)
	set gg_trg_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_1 = CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(gg_trg_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_1, 1.)
	call TriggerAddCondition(gg_trg_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_1, Condition(function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Conditions))
	call TriggerAddAction(gg_trg_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_1, function Trig_Use_RootSystem_and_Rejuvination_and_Powerlessness_and_RageOfDecay_Actions)
	set index_0 = 0
	set gg_trg_Troll_Dead_Remove_Bugs_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Troll_Dead_Remove_Bugs_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Troll_Dead_Remove_Bugs_1, Condition(function Trig_Troll_Dead_Remove_Bugs_Conditions))
	call TriggerAddAction(gg_trg_Troll_Dead_Remove_Bugs_1, function Trig_Troll_Dead_Remove_Bugs_Actions)
	set index_0 = 0
	set gg_trg_Boss_Troll_Entangle_Throw_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Boss_Troll_Entangle_Throw_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Boss_Troll_Entangle_Throw_1, Condition(function Trig_Boss_Troll_Entangle_Throw_Conditions))
	call TriggerAddAction(gg_trg_Boss_Troll_Entangle_Throw_1, function Trig_Boss_Troll_Entangle_Throw_Actions)
	set gg_trg_Use_Berserk_and_BerserkBoss_1 = CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(gg_trg_Use_Berserk_and_BerserkBoss_1, EVENT_PLAYER_UNIT_ATTACKED_1)
	call TriggerAddCondition(gg_trg_Use_Berserk_and_BerserkBoss_1, Condition(function Trig_Use_Berserk_and_BerserkBoss_Conditions))
	call TriggerAddAction(gg_trg_Use_Berserk_and_BerserkBoss_1, function Trig_Use_Berserk_and_BerserkBoss_Actions)
	set gg_trg_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_1 = CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(gg_trg_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_1, 1.)
	call TriggerAddCondition(gg_trg_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_1, Condition(function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Conditions))
	call TriggerAddAction(gg_trg_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_1, function Trig_Use_Heal_and_HealingWave_and_PowerOfCursed_and_Entangle_Actions)
	set index_0 = 0
	set gg_trg_Aspect_of_Magic_Protection_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Aspect_of_Magic_Protection_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Aspect_of_Magic_Protection_1, Condition(function Trig_Aspect_of_Magic_Protection_Conditions))
	call TriggerAddAction(gg_trg_Aspect_of_Magic_Protection_1, function Trig_Aspect_of_Magic_Protection_Actions)
	set index_0 = 0
	set gg_trg_Remove_Effects_From_Bosses_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Remove_Effects_From_Bosses_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Remove_Effects_From_Bosses_1, Condition(function Trig_Remove_Effects_From_Bosses_Conditions))
	call TriggerAddAction(gg_trg_Remove_Effects_From_Bosses_1, function Trig_Remove_Effects_From_Bosses_Actions)
	set index_0 = 0
	set gg_trg_Metka_Dreneev_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Metka_Dreneev_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Metka_Dreneev_1, Condition(function Trig_Metka_Dreneev_Conditions))
	call TriggerAddAction(gg_trg_Metka_Dreneev_1, function Trig_Metka_Dreneev_Actions)
	set index_0 = 0
	set gg_trg_Fast_Attack_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Fast_Attack_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Fast_Attack_1, Condition(function Trig_Fast_Attack_Conditions))
	call TriggerAddAction(gg_trg_Fast_Attack_1, function Trig_Fast_Attack_Actions)
	set index_0 = 0
	set gg_trg_Bash_Attack_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Bash_Attack_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Bash_Attack_1, Condition(function Trig_Bash_Attack_Conditions))
	call TriggerAddAction(gg_trg_Bash_Attack_1, function Trig_Bash_Attack_Actions)
	set gg_trg_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_1 = CreateTrigger()
	call TriggerRegisterTimerEvent(gg_trg_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_1, 1., true)
	call TriggerAddCondition(gg_trg_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_1, Condition(function Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Conditions))
	call TriggerAddAction(gg_trg_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_1, function Trig_Use_Aspect_Critical_Attacl_Fst_Attack_Bash_Attack_Actions)
	set index_0 = 0
	set gg_trg_Blink_Strike_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Blink_Strike_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Blink_Strike_1, Condition(function Trig_Blink_Strike_Conditions))
	call TriggerAddAction(gg_trg_Blink_Strike_1, function Trig_Blink_Strike_Actions)
	set index_0 = 0
	set gg_trg_Victim_Search_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Victim_Search_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Victim_Search_1, Condition(function Trig_Victim_Search_Conditions))
	call TriggerAddAction(gg_trg_Victim_Search_1, function Trig_Victim_Search_Actions)
	set index_0 = 0
	set gg_trg_Black_Hole_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Black_Hole_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Black_Hole_1, Condition(function Trig_Black_Hole_Conditions))
	call TriggerAddAction(gg_trg_Black_Hole_1, function Trig_Black_Hole_Actions)
	set gg_trg_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_1 = CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(gg_trg_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_1, EVENT_PLAYER_UNIT_ATTACKED_1)
	call TriggerAddCondition(gg_trg_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_1, Condition(function Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Conditions))
	call TriggerAddAction(gg_trg_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_1, function Trig_Use_Magic_Fire_and_Dumned_Skull_and_Piercing_Strike_and_Infernal_Roar_Actions)
	set gg_trg_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_1 = CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(gg_trg_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_1, 1.)
	call TriggerAddCondition(gg_trg_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_1, Condition(function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Conditions))
	call TriggerAddAction(gg_trg_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_1, function Trig_Use_Blink_Strike_and_Dumned_Skull_and_Weakness_of_Emptiness_and_Search_Victim_BH_Actions)
	set index_0 = 0
	set gg_trg_Weakness_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Weakness_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Weakness_1, Condition(function Trig_Weakness_Conditions))
	call TriggerAddAction(gg_trg_Weakness_1, function Trig_Weakness_Actions)
	set index_0 = 0
	set gg_trg_Astral_Dispersal_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Astral_Dispersal_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Astral_Dispersal_1, Condition(function Trig_Astral_Dispersal_Conditions))
	call TriggerAddAction(gg_trg_Astral_Dispersal_1, function Trig_Astral_Dispersal_Actions)
	set index_0 = 0
	set gg_trg_Infernal_Ram_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Infernal_Ram_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Infernal_Ram_1, Condition(function Trig_Infernal_Ram_Conditions))
	call TriggerAddAction(gg_trg_Infernal_Ram_1, function Trig_Infernal_Ram_Actions)
	set index_0 = 0
	set gg_trg_Fiery_Blow_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Fiery_Blow_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Fiery_Blow_1, Condition(function Trig_Fiery_Blow_Conditions))
	call TriggerAddAction(gg_trg_Fiery_Blow_1, function Trig_Fiery_Blow_Actions)
	set index_0 = 0
	set gg_trg_Bloody_Jump_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Bloody_Jump_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Bloody_Jump_1, Condition(function Trig_Bloody_Jump_Conditions))
	call TriggerAddAction(gg_trg_Bloody_Jump_1, function Trig_Bloody_Jump_Actions)
	set index_0 = 0
	set gg_trg_Blood_Absorption_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Blood_Absorption_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Blood_Absorption_1, Condition(function Trig_Blood_Absorption_Conditions))
	call TriggerAddAction(gg_trg_Blood_Absorption_1, function Trig_Blood_Absorption_Actions)
	set gg_trg_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_1 = CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(gg_trg_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_1, EVENT_PLAYER_UNIT_ATTACKED_1)
	call TriggerAddCondition(gg_trg_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_1, Condition(function Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Conditions))
	call TriggerAddAction(gg_trg_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_1, function Trig_Use_Weakness_and_Pain_Sphere_and_Fiery_Blow_and_Blood_Absorption_____________________u_Actions)
	set gg_trg_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_1 = CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(gg_trg_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_1, 1.)
	call TriggerAddCondition(gg_trg_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_1, Condition(function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Conditions))
	call TriggerAddAction(gg_trg_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_1, function Trig_Use_Astral_Disperasal_and_Infernal_Ram_and_Bloody_Jump______________________4_Actions)
	set gg_trg_Hatred_of_fire_1 = CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(gg_trg_Hatred_of_fire_1, EVENT_PLAYER_UNIT_SPELL_EFFECT_1)
	call TriggerAddCondition(gg_trg_Hatred_of_fire_1, Condition(function Trig_Hatred_of_fire_Conditions))
	call TriggerAddAction(gg_trg_Hatred_of_fire_1, function Trig_Hatred_of_fire_Actions)
	set gg_trg_set_fire_1 = CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(gg_trg_set_fire_1, EVENT_PLAYER_UNIT_SPELL_EFFECT_1)
	call TriggerAddCondition(gg_trg_set_fire_1, Condition(function firess))
	call TriggerAddAction(gg_trg_set_fire_1, function fires)
	set gg_trg_set_fire_2_1 = CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(gg_trg_set_fire_2_1, EVENT_PLAYER_UNIT_SPELL_EFFECT_1)
	call TriggerAddCondition(gg_trg_set_fire_2_1, Condition(function firess2))
	call TriggerAddAction(gg_trg_set_fire_2_1, function fires2)
	set gg_trg_the_creation_of_the_image_1 = CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(gg_trg_the_creation_of_the_image_1, EVENT_PLAYER_UNIT_SPELL_EFFECT_1)
	call TriggerAddCondition(gg_trg_the_creation_of_the_image_1, Condition(function Trig_the_creation_of_the_image_Conditions))
	call TriggerAddAction(gg_trg_the_creation_of_the_image_1, function Trig_the_creation_of_the_image_Actions)
	set gg_trg_fiery_explosions_1 = CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(gg_trg_fiery_explosions_1, EVENT_PLAYER_UNIT_SPELL_EFFECT_1)
	call TriggerAddCondition(gg_trg_fiery_explosions_1, Condition(function Trig_fiery_explosions_Conditions))
	call TriggerAddAction(gg_trg_fiery_explosions_1, function Trig_fiery_explosions_Actions)
	set index_0 = 0
	set gg_trg_Breathoffire_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Breathoffire_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Breathoffire_1, Condition(function Trig_Breathoffire_Conditions))
	call TriggerAddAction(gg_trg_Breathoffire_1, function Trig_Breathoffire_Actions)
	set index_0 = 0
	set gg_trg_Fire_Explosions_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Fire_Explosions_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Fire_Explosions_1, Condition(function Trig_Fire_Explosions_Conditions))
	call TriggerAddAction(gg_trg_Fire_Explosions_1, function Trig_Fire_Explosions_Actions)
	set index_0 = 0
	set gg_trg_BossStomp_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_BossStomp_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_BossStomp_1, Condition(function Trig_BossStomp_Conditions))
	call TriggerAddAction(gg_trg_BossStomp_1, function Trig_BossStomp_Actions)
	set index_0 = 0
	set gg_trg_Mark_of_Fire_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Mark_of_Fire_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Mark_of_Fire_1, Condition(function Trig_Mark_of_Fire_Conditions))
	call TriggerAddAction(gg_trg_Mark_of_Fire_1, function Trig_Mark_of_Fire_Actions)
	set gg_trg_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_1 = CreateTrigger()
	call TriggerRegisterAnyUnitEventBJ(gg_trg_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_1, EVENT_PLAYER_UNIT_ATTACKED_1)
	call TriggerAddCondition(gg_trg_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_1, Condition(function Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Conditions))
	call TriggerAddAction(gg_trg_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_1, function Trig_Use_HatredofFire_and_BreathOfFire_and_SoulBurn_and_MarkofFire_Actions)
	set gg_trg_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_1 = CreateTrigger()
	call TriggerRegisterTimerEventPeriodic(gg_trg_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_1, 1.)
	call TriggerAddCondition(gg_trg_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_1, Condition(function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Conditions))
	call TriggerAddAction(gg_trg_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_1, function Trig_Use_SetFire_a_FireSummon_a_WallofFire_a_Image_a_FireExplosions_a_FE_a_BossStomp_Actions)
	set index_0 = 0
	set gg_trg_Power_of_Skeletons_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Power_of_Skeletons_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Power_of_Skeletons_1, Condition(function Trig_Power_of_Skeletons_Conditions))
	call TriggerAddAction(gg_trg_Power_of_Skeletons_1, function Trig_Power_of_Skeletons_Actions)
	set gg_trg_Water_Elemental_Load_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Water_Elemental_Load_1, function Trig_Water_Elemental_Load_Actions)
	set gg_trg_Init_kreeps_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Init_kreeps_1, function Trig_Init_kreeps_Actions)
	set index_0 = 0
	set gg_trg_spirits_of_water_dead_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_spirits_of_water_dead_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_spirits_of_water_dead_1, Condition(function Trig_spirits_of_water_dead_Conditions))
	call TriggerAddAction(gg_trg_spirits_of_water_dead_1, function Trig_spirits_of_water_dead_Actions)
	set index_0 = 0
	set gg_trg_Skill_Gertva_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Skill_Gertva_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Skill_Gertva_1, Condition(function Trig_Skill_Gertva_Conditions))
	call TriggerAddAction(gg_trg_Skill_Gertva_1, function Trig_Skill_Gertva_Actions)
	set index_0 = 0
	set gg_trg_Opening_Streams_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Opening_Streams_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Opening_Streams_1, Condition(function Trig_Opening_Streams_Conditions))
	call TriggerAddAction(gg_trg_Opening_Streams_1, function Trig_Opening_Streams_Actions)
	set index_0 = 0
	set gg_trg_Water_Explosion_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Water_Explosion_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Water_Explosion_1, Condition(function Trig_water_explosion_Conditions))
	call TriggerAddAction(gg_trg_Water_Explosion_1, function Trig_water_explosion_Actions)
	set index_0 = 0
	set gg_trg_Tsunami_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Tsunami_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Tsunami_1, Condition(function Trig_Tsunami_Conditions))
	call TriggerAddAction(gg_trg_Tsunami_1, function Trig_Tsunami_Actions)
	set gg_trg_Guardsman_Load_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Guardsman_Load_1, function Trig_Guardsman_Load_Actions)
	set index_0 = 0
	set gg_trg_Protective_Stand_Switch_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Protective_Stand_Switch_1, Player(index_0), EVENT_PLAYER_UNIT_ISSUED_ORDER_1, null)
		call TriggerRegisterPlayerUnitEvent(gg_trg_Protective_Stand_Switch_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Protective_Stand_Switch_1, Condition(function Trig_Protective_Stand_Switch_Conditions))
	call TriggerAddAction(gg_trg_Protective_Stand_Switch_1, function Trig_Protective_Stand_Switch_Actions)
	set index_0 = 0
	set gg_trg_Learn_Fighting_Skills_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Fighting_Skills_1, Player(index_0), EVENT_PLAYER_HERO_SKILL_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Learn_Fighting_Skills_1, Condition(function Trig_Learn_Fighting_Skills_Conditions))
	call TriggerAddAction(gg_trg_Learn_Fighting_Skills_1, function Trig_Learn_Fighting_Skills_Actions)
	set index_0 = 0
	set gg_trg_Ram_Board_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Ram_Board_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Ram_Board_1, Condition(function Trig_Ram_Board_Conditions))
	call TriggerAddAction(gg_trg_Ram_Board_1, function Trig_Ram_Board_Actions)
	set index_0 = 0
	set gg_trg_Warcry_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Warcry_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Warcry_1, Condition(function Trig_Warcry_Conditions))
	call TriggerAddAction(gg_trg_Warcry_1, function Trig_Warcry_Actions)
	set gg_trg_Drenor_Bull_Load_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Drenor_Bull_Load_1, function Trig_Drenor_Bull_Load_Actions)
	set gg_trg_Drenor_Bull_Show_Hint_1 = CreateTrigger()
	call DisableTrigger(gg_trg_Drenor_Bull_Show_Hint_1)
	call TriggerRegisterTimerEventPeriodic(gg_trg_Drenor_Bull_Show_Hint_1, 120.)
	call TriggerAddAction(gg_trg_Drenor_Bull_Show_Hint_1, function Trig_Drenor_Bull_Show_Hint_Actions)
	set index_0 = 0
	set gg_trg_Drenor_Bull_Show_Rage_1 = CreateTrigger()
	call DisableTrigger(gg_trg_Drenor_Bull_Show_Rage_1)
	loop
		call TriggerRegisterPlayerChatEvent(gg_trg_Drenor_Bull_Show_Rage_1, Player(index_0), "-rage", true)
		call TriggerRegisterPlayerChatEvent(gg_trg_Drenor_Bull_Show_Rage_1, Player(index_0), "-r", true)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Drenor_Bull_Show_Rage_1, Condition(function Trig_Drenor_Bull_Show_Rage_Conditions))
	call TriggerAddAction(gg_trg_Drenor_Bull_Show_Rage_1, function Trig_Drenor_Bull_Show_Rage_Actions)
	set index_0 = 0
	set gg_trg_Axe_Throw_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Axe_Throw_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Axe_Throw_1, Condition(function Trig_Axe_Throw_Conditions))
	call TriggerAddAction(gg_trg_Axe_Throw_1, function Trig_Axe_Throw_Actions)
	set index_0 = 0
	set gg_trg_Violent_Roar_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Violent_Roar_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Violent_Roar_1, Condition(function Trig_Violent_Roar_Conditions))
	call TriggerAddAction(gg_trg_Violent_Roar_1, function Trig_Violent_Roar_Actions)
	set index_0 = 0
	set gg_trg_upgrade_Berserk_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_upgrade_Berserk_1, Player(index_0), EVENT_PLAYER_HERO_SKILL_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_upgrade_Berserk_1, Condition(function Trig_upgrade_Berserk_Conditions))
	call TriggerAddAction(gg_trg_upgrade_Berserk_1, function Trig_upgrade_Berserk_Actions)
	set index_0 = 0
	set gg_trg_Learn_Spell_Rage_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Spell_Rage_1, Player(index_0), EVENT_PLAYER_HERO_SKILL_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Learn_Spell_Rage_1, Condition(function Trig_Learn_Spell_Rage_Conditions))
	call TriggerAddAction(gg_trg_Learn_Spell_Rage_1, function Trig_Learn_Spell_Rage_Actions)
	set index_0 = 0
	set gg_trg_GrogTarDead_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_GrogTarDead_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_GrogTarDead_1, Condition(function Trig_GrogTarDead_Conditions))
	call TriggerAddAction(gg_trg_GrogTarDead_1, function Trig_GrogTarDead_Actions)
	set index_0 = 0
	set gg_trg_attack_hero_Rage_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_attack_hero_Rage_1, Player(index_0), EVENT_PLAYER_UNIT_ATTACKED_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call DisableTrigger(gg_trg_attack_hero_Rage_1)
	call TriggerAddCondition(gg_trg_attack_hero_Rage_1, Condition(function Trig_attack_hero_Rage_Conditions))
	call TriggerAddAction(gg_trg_attack_hero_Rage_1, function Trig_attack_hero_Rage_Actions)
	set index_0 = 0
	set gg_trg_kill_hero_Rage_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_kill_hero_Rage_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call DisableTrigger(gg_trg_kill_hero_Rage_1)
	call TriggerAddCondition(gg_trg_kill_hero_Rage_1, Condition(function Trig_kill_hero_Rage_Conditions))
	call TriggerAddAction(gg_trg_kill_hero_Rage_1, function Trig_kill_hero_Rage_Actions)
	set gg_trg_Sniatie_Rage_1 = CreateTrigger()
	call TriggerRegisterTimerEvent(gg_trg_Sniatie_Rage_1, 3., true)
	call TriggerAddAction(gg_trg_Sniatie_Rage_1, function Trig_Sniatie_Rage_Action)
	call DisableTrigger(gg_trg_Sniatie_Rage_1)
	set gg_trg_Timer_Rage_1 = CreateTrigger()
	call TriggerRegisterTimerExpireEvent(gg_trg_Timer_Rage_1, udg_GrogTarRageTimer_1)
	call TriggerAddAction(gg_trg_Timer_Rage_1, function Trig_Timer_last_Actions)
	set gg_trg_Illusionist_Load_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Illusionist_Load_1, function Trig_Illusionist_Load_Actions)
	set index_0 = 0
	set gg_trg_Reflection_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Reflection_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Reflection_1, Condition(function Trig_Reflection_Conditions))
	call TriggerAddAction(gg_trg_Reflection_1, function Trig_Reflection_Actions)
	set index_0 = 0
	set gg_trg_Illusory_Attack_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Illusory_Attack_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Illusory_Attack_1, Condition(function Trig_Illusory_Attack_Conditions))
	call TriggerAddAction(gg_trg_Illusory_Attack_1, function Trig_Illusory_Attack_Actions)
	set index_0 = 0
	set gg_trg_Summon_Illusions_with_Reflection_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Summon_Illusions_with_Reflection_1, Player(index_0), EVENT_PLAYER_UNIT_SUMMON_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Summon_Illusions_with_Reflection_1, Condition(function Trig_Summon_Illusions_with_Reflection_Conditions))
	call TriggerAddAction(gg_trg_Summon_Illusions_with_Reflection_1, function Trig_Summon_Illusions_with_Reflection_Actions)
	set index_0 = 0
	set gg_trg_Illusions_with_Phantoms_Dead_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Illusions_with_Phantoms_Dead_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Illusions_with_Phantoms_Dead_1, Condition(function Trig_Illusions_with_Phantoms_Dead_Conditions))
	call TriggerAddAction(gg_trg_Illusions_with_Phantoms_Dead_1, function Trig_Illusions_with_Phantoms_Dead_Actions)
	set gg_trg_BladeMaster_Load_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_BladeMaster_Load_1, function Trig_BladeMaster_Load_Actions)
	set index_0 = 0
	set gg_trg_Dissection_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Dissection_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Dissection_1, Condition(function Trig_Dissection_Conditions))
	call TriggerAddAction(gg_trg_Dissection_1, function Trig_Dissection_Actions)
	set index_0 = 0
	set gg_trg_Whirlwind_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Whirlwind_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Whirlwind_1, Condition(function Trig_Whirlwind_Conditions))
	call TriggerAddAction(gg_trg_Whirlwind_1, function Trig_Whirlwind_Actions)
	set index_0 = 0
	set gg_trg_Imboweling_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Imboweling_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Imboweling_1, Condition(function Trig_Imboweling_Conditions))
	call TriggerAddAction(gg_trg_Imboweling_1, function Trig_Imboweling_Actions)
	set gg_trg_Master_of_Lightnings_Load_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Master_of_Lightnings_Load_1, function Trig_Master_of_Lightnings_Load_Actions)
	set index_0 = 0
	set gg_trg_Thundercloud_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Thundercloud_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Thundercloud_1, Condition(function Trig_Thundercloud_Conditions))
	call TriggerAddAction(gg_trg_Thundercloud_1, function Trig_Thundercloud_Actions)
	set index_0 = 0
	set gg_trg_Power_of_Lightnings_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Power_of_Lightnings_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Power_of_Lightnings_1, Condition(function Trig_Power_of_Lightnings_Conditions))
	call TriggerAddAction(gg_trg_Power_of_Lightnings_1, function Trig_Power_of_Lightnings_Actions)
	set index_0 = 0
	set gg_trg_Electric_Field_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Electric_Field_1, Player(index_0), EVENT_PLAYER_HERO_SKILL_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Electric_Field_1, Condition(function Trig_Learn_Skill_Electric_Field_Conditions))
	call TriggerAddAction(gg_trg_Electric_Field_1, function Trig_Learn_Skill_Electric_Field_Actions)
	set index_0 = 0
	set gg_trg_Storm_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Storm_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Storm_1, Condition(function Trig_Storm_Conditions))
	call TriggerAddAction(gg_trg_Storm_1, function Trig_Storm_Actions)
	set gg_trg_Respawnlol_1 = CreateTrigger()
	call TriggerRegisterTimerEventSingle(gg_trg_Respawnlol_1, 5)
	call TriggerAddAction(gg_trg_Respawnlol_1, function Trig_Respawnlol_Actions)
	set gg_trg_Ranger_Load_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Ranger_Load_1, function Trig_Ranger_Load_Actions)
	set index_0 = 0
	set gg_trg_MultiShotSwitch_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_MultiShotSwitch_1, Player(index_0), EVENT_PLAYER_UNIT_ISSUED_ORDER_1, null)
		call TriggerRegisterPlayerUnitEvent(gg_trg_MultiShotSwitch_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_MultiShotSwitch_1, Condition(function Trig_MultiShotSwitch_Conditions))
	call TriggerAddAction(gg_trg_MultiShotSwitch_1, function Trig_MultiShotSwitch_Actions)
	set index_0 = 0
	set gg_trg_Learn_Release_of_Arrows_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Release_of_Arrows_1, Player(index_0), EVENT_PLAYER_HERO_SKILL_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Learn_Release_of_Arrows_1, Condition(function Trig_Learn_Release_of_Arrows_Conditions))
	call TriggerAddAction(gg_trg_Learn_Release_of_Arrows_1, function Trig_Learn_Release_of_Arrows_Actions)
	set index_0 = 0
	set gg_trg_Release_of_Arrows_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Release_of_Arrows_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Release_of_Arrows_1, Condition(function Trig_Release_of_Arrows_Conditions))
	call TriggerAddAction(gg_trg_Release_of_Arrows_1, function Trig_Release_of_Arrows_Actions)
	set index_0 = 0
	set gg_trg_Dexterity_of_the_Ranger_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Dexterity_of_the_Ranger_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Dexterity_of_the_Ranger_1, Condition(function Trig_Dexterity_of_the_Ranger_Conditions))
	call TriggerAddAction(gg_trg_Dexterity_of_the_Ranger_1, function Trig_Dexterity_of_the_Ranger_Actions)
	set gg_trg_Healer_Load_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Healer_Load_1, function Trig_Healer_Load_Actions)
	set index_0 = 0
	set gg_trg_Good_Healing_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Good_Healing_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Good_Healing_1, Condition(function Trig_Good_Healing_Conditions))
	call TriggerAddAction(gg_trg_Good_Healing_1, function Trig_Good_Healing_Actions)
	set index_0 = 0
	set gg_trg_Spiritual_Communication_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Spiritual_Communication_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Spiritual_Communication_1, Condition(function Trig_Spiritual_Communication_Conditions))
	call TriggerAddAction(gg_trg_Spiritual_Communication_1, function Trig_Spiritual_Communication_Actions)
	set index_0 = 0
	set gg_trg_Curing_Light_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Curing_Light_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Curing_Light_1, Condition(function Trig_Curing_Light_Conditions))
	call TriggerAddAction(gg_trg_Curing_Light_1, function Trig_Curing_Light_Actions)
	set index_0 = 0
	set gg_trg_Guardian_Angel_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Guardian_Angel_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Guardian_Angel_1, Condition(function Trig_Guardian_Angel_Conditions))
	call TriggerAddAction(gg_trg_Guardian_Angel_1, function Trig_Guardian_Angel_Actions)
	set gg_trg_Paladin_Load_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Paladin_Load_1, function Trig_Paladin_Load_Actions)
	set index_0 = 0
	set gg_trg_Spiral_of_Light_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Spiral_of_Light_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Spiral_of_Light_1, Condition(function Trig_Spiral_of_Light_Conditions))
	call TriggerAddAction(gg_trg_Spiral_of_Light_1, function Trig_Spiral_of_Light_Actions)
	set index_0 = 0
	set gg_trg_Keeper_Seal_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Keeper_Seal_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Keeper_Seal_1, Condition(function Trig_Keeper_Seal_Conditions))
	call TriggerAddAction(gg_trg_Keeper_Seal_1, function Trig_Keeper_Seal_Actions)
	set index_0 = 0
	set gg_trg_Light_Hammer_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Light_Hammer_1, Player(index_0), EVENT_PLAYER_HERO_SKILL_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Light_Hammer_1, Condition(function Trig_Light_Hammer_Conditions))
	call TriggerAddAction(gg_trg_Light_Hammer_1, function Trig_Light_Hammer_Actions)
	set index_0 = 0
	set gg_trg_God_Hand_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_God_Hand_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_God_Hand_1, Condition(function Trig_God_Hand_Conditions))
	call TriggerAddAction(gg_trg_God_Hand_1, function Trig_God_Hand_Actions)
	set gg_trg_Stone_Guard_Load_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Stone_Guard_Load_1, function Trig_Stone_Guard_Load_Actions)
	set index_0 = 0
	set gg_trg_Boulder_Throw_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Boulder_Throw_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Boulder_Throw_1, Condition(function Trig_Boulder_Throw_Conditions))
	call TriggerAddAction(gg_trg_Boulder_Throw_1, function Trig_Boulder_Throw_Actions)
	set index_0 = 0
	set gg_trg_Earth_Shiver_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Earth_Shiver_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Earth_Shiver_1, Condition(function Trig_Earth_Shiver_Conditions))
	call TriggerAddAction(gg_trg_Earth_Shiver_1, function Trig_Earth_Shiver_Actions)
	set index_0 = 0
	set gg_trg_Learn_Stone_Armor_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Stone_Armor_1, Player(index_0), EVENT_PLAYER_HERO_SKILL_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Learn_Stone_Armor_1, Condition(function Trig_Learn_Stone_Armor_Conditions))
	call TriggerAddAction(gg_trg_Learn_Stone_Armor_1, function Trig_Learn_Stone_Armor_Actions)
	set index_0 = 0
	set gg_trg_Rock_Strike_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Rock_Strike_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Rock_Strike_1, Condition(function Trig_Rock_Strike_Conditions))
	call TriggerAddAction(gg_trg_Rock_Strike_1, function Trig_Rock_Strike_Actions)
	set gg_trg_Archdruid_Load_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Archdruid_Load_1, function Trig_Archdruid_Load_Actions)
	set index_0 = 0
	set gg_trg_Energy_of_Nature_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Energy_of_Nature_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Energy_of_Nature_1, Condition(function Trig_Energy_of_Nature_Conditions))
	call TriggerAddAction(gg_trg_Energy_of_Nature_1, function Trig_Energy_of_Nature_Actions)
	set index_0 = 0
	set gg_trg_Life_Chain_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Life_Chain_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Life_Chain_1, Condition(function Trig_Life_Chain_Conditions))
	call TriggerAddAction(gg_trg_Life_Chain_1, function Trig_Life_Chain_Actions)
	set index_0 = 0
	set gg_trg_Ent_Creation_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Ent_Creation_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Ent_Creation_1, Condition(function Trig_Ent_Creation_Conditions))
	call TriggerAddAction(gg_trg_Ent_Creation_1, function Trig_Ent_Creation_Actions)
	set index_0 = 0
	set gg_trg_Nature_Wrath_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Nature_Wrath_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Nature_Wrath_1, Condition(function Trig_Nature_Wrath_Conditions))
	call TriggerAddAction(gg_trg_Nature_Wrath_1, function Trig_Nature_Wrath_Actions)
	set index_0 = 0
	set gg_trg_Falling_Star_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Falling_Star_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Falling_Star_1, Condition(function Trig_Falling_Star_Conditions))
	call TriggerAddAction(gg_trg_Falling_Star_1, function Trig_Falling_Star_Actions)
	set index_0 = 0
	set gg_trg_Moon_Chackram_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Moon_Chackram_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Moon_Chackram_1, Condition(function Trig_Moon_Chackram_Conditions))
	call TriggerAddAction(gg_trg_Moon_Chackram_1, function Trig_Moon_Chackram_Actions)
	set index_0 = 0
	set gg_trg_Moon_Wind_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Moon_Wind_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Moon_Wind_1, Condition(function Trig_Moon_Wind_Conditions))
	call TriggerAddAction(gg_trg_Moon_Wind_1, function Trig_Moon_Wind_Actions)
	set index_0 = 0
	set gg_trg_Night_Heart_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Night_Heart_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Night_Heart_1, Condition(function Trig_Night_Heart_Conditions))
	call TriggerAddAction(gg_trg_Night_Heart_1, function Trig_Night_Heart_Actions)
	set gg_trg_MoonWarrior_Load_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_MoonWarrior_Load_1, function Trig_MoonWarrior_Load_Actions)
	set index_0 = 0
	set gg_trg_Ancient_Communication_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Ancient_Communication_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Ancient_Communication_1, Condition(function Trig_Ancient_Communication_Conditions))
	call TriggerAddAction(gg_trg_Ancient_Communication_1, function Trig_Ancient_Communication_Actions)
	set index_0 = 0
	set gg_trg_Learn_Power_of_Ancestors_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Power_of_Ancestors_1, Player(index_0), EVENT_PLAYER_HERO_SKILL_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Learn_Power_of_Ancestors_1, Condition(function Trig_Learn_Power_of_Ancestors_Conditions))
	call TriggerAddAction(gg_trg_Learn_Power_of_Ancestors_1, function Trig_Learn_Power_of_Ancestors_Actions)
	set index_0 = 0
	set gg_trg_Switch_Power_of_Ancestors_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Switch_Power_of_Ancestors_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Switch_Power_of_Ancestors_1, Condition(function Trig_Switch_Power_of_Ancestors_Conditions))
	call TriggerAddAction(gg_trg_Switch_Power_of_Ancestors_1, function Trig_Switch_Power_of_Ancestors_Actions)
	set index_0 = 0
	set gg_trg_Earth_Split_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Earth_Split_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Earth_Split_1, Condition(function Trig_Earth_Split_Conditions))
	call TriggerAddAction(gg_trg_Earth_Split_1, function Trig_Earth_Split_Actions)
	set index_0 = 0
	set gg_trg_Ancient_Help_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Ancient_Help_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Ancient_Help_1, Condition(function Trig_Ancient_Help_Conditions))
	call TriggerAddAction(gg_trg_Ancient_Help_1, function Trig_Ancient_Help_Actions)
	set gg_trg_SpiritBreaker_Load_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_SpiritBreaker_Load_1, function Trig_SpiritBreaker_Load_Actions)
	set index_0 = 0
	set gg_trg_Dash_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Dash_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Dash_1, Condition(function Trig_Dash_Conditions))
	call TriggerAddAction(gg_trg_Dash_1, function Trig_Dash_Actions)
	set index_0 = 0
	set gg_trg_Dagger_Throw_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Dagger_Throw_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Dagger_Throw_1, Condition(function Trig_Dagger_Throw_Conditions))
	call TriggerAddAction(gg_trg_Dagger_Throw_1, function Trig_Dagger_Throw_Actions)
	set index_0 = 0
	set gg_trg_Kara_Justice_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Kara_Justice_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Kara_Justice_1, Condition(function Trig_Kara_Justice_Conditions))
	call TriggerAddAction(gg_trg_Kara_Justice_1, function Trig_Kara_Justice_Actions)
	set gg_trg_Warden_Load_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Warden_Load_1, function Trig_SpiritBreaker_Load_Actions)
	set index_0 = 0
	set gg_trg_Strength_Fist_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Strength_Fist_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Strength_Fist_1, Condition(function Trig_Strength_Fist_Conditions))
	call TriggerAddAction(gg_trg_Strength_Fist_1, function Trig_Strength_Fist_Actions)
	set index_0 = 0
	set gg_trg_Fighting_Impact_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Fighting_Impact_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Fighting_Impact_1, Condition(function Trig_Fighting_Impact_Conditions))
	call TriggerAddAction(gg_trg_Fighting_Impact_1, function Trig_Fighting_Impact_Actions)
	set index_0 = 0
	set gg_trg_Learn_Marshal_Armor_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Marshal_Armor_1, Player(index_0), EVENT_PLAYER_HERO_SKILL_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Learn_Marshal_Armor_1, Condition(function Trig_Learn_Marshal_Armor_Conditions))
	call TriggerAddAction(gg_trg_Learn_Marshal_Armor_1, function Trig_Learn_Marshal_Armor_Actions)
	set index_0 = 0
	set gg_trg_Illusive_Army_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Illusive_Army_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Illusive_Army_1, Condition(function Trig_Illusive_Army_Conditions))
	call TriggerAddAction(gg_trg_Illusive_Army_1, function Trig_Illusive_Army_Actions)
	set gg_trg_Marshal_Load_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Marshal_Load_1, function Trig_Marshal_Load_Actions)
	set index_0 = 0
	set gg_trg_Chain_Lightning_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Chain_Lightning_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Chain_Lightning_1, Condition(function Trig_Chain_Lightning_Conditions))
	call TriggerAddAction(gg_trg_Chain_Lightning_1, function Trig_Chain_Lightning_Actions)
	set index_0 = 0
	set gg_trg_Magic_Trap_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Magic_Trap_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Magic_Trap_1, Condition(function Trig_Magic_Trap_Conditions))
	call TriggerAddAction(gg_trg_Magic_Trap_1, function Trig_Magic_Trap_Actions)
	set index_0 = 0
	set gg_trg_Remove_Lightning_Form_Dead_Units_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Remove_Lightning_Form_Dead_Units_1, Player(index_0), EVENT_PLAYER_UNIT_DEATH_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Remove_Lightning_Form_Dead_Units_1, Condition(function Trig_Remove_Lightning_Form_Dead_Units_Conditions))
	call TriggerAddAction(gg_trg_Remove_Lightning_Form_Dead_Units_1, function Trig_Remove_Lightning_Form_Dead_Units_Actions)
	set index_0 = 0
	set gg_trg_EnergyWave_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_EnergyWave_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_EnergyWave_1, Condition(function Trig_EnergyWave_Conditions))
	call TriggerAddAction(gg_trg_EnergyWave_1, function Trig_EnergyWave_Actions)
	set index_0 = 0
	set gg_trg_Magic_Epicenter_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Magic_Epicenter_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Magic_Epicenter_1, Condition(function Trig_Magic_Epicenter_Conditions))
	call TriggerAddAction(gg_trg_Magic_Epicenter_1, function Trig_Magic_Epicenter_Actions)
	set gg_trg_Load_ArchMage_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Load_ArchMage_1, function Trig_Load_ArchMage_Actions)
	set index_0 = 0
	set gg_trg_Toxic_Field_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Toxic_Field_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Toxic_Field_1, Condition(function Trig_Toxic_Field_Conditions))
	call TriggerAddAction(gg_trg_Toxic_Field_1, function Trig_Toxic_Field_Actions)
	set index_0 = 0
	set gg_trg_Poison_Bomb_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Poison_Bomb_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Poison_Bomb_1, Condition(function Trig_Poison_Bomb_Conditions))
	call TriggerAddAction(gg_trg_Poison_Bomb_1, function Trig_Poison_Bomb_Actions)
	set index_0 = 0
	set gg_trg_Learn_Ogre_Rage_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Ogre_Rage_1, Player(index_0), EVENT_PLAYER_HERO_SKILL_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Learn_Ogre_Rage_1, Condition(function Trig_Learn_Ogre_Rage_Conditions))
	call TriggerAddAction(gg_trg_Learn_Ogre_Rage_1, function Trig_Learn_Ogre_Rage_Actions)
	set index_0 = 0
	set gg_trg_Potion_of_Growth_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Potion_of_Growth_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Potion_of_Growth_1, Condition(function Trig_Potion_of_Growth_Conditions))
	call TriggerAddAction(gg_trg_Potion_of_Growth_1, function Trig_Potion_of_Growth_Actions)
	set gg_trg_Load_Alchemist_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Load_Alchemist_1, function Trig_Load_Alchemist_Actions)
	set index_0 = 0
	set gg_trg_Case_Shot_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Case_Shot_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Case_Shot_1, Condition(function Trig_Case_Shot_Conditions))
	call TriggerAddAction(gg_trg_Case_Shot_1, function Trig_Case_Shot_Actions)
	set index_0 = 0
	set gg_trg_Learn_Fire_Position_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Learn_Fire_Position_1, Player(index_0), EVENT_PLAYER_HERO_SKILL_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Learn_Fire_Position_1, Condition(function Trig_Learn_Fire_Position_Conditions))
	call TriggerAddAction(gg_trg_Learn_Fire_Position_1, function Trig_Learn_Fire_Position_Actions)
	set index_0 = 0
	set gg_trg_Dwarf_Cannon_1 = CreateTrigger()
	loop
		call TriggerRegisterPlayerUnitEvent(gg_trg_Dwarf_Cannon_1, Player(index_0), EVENT_PLAYER_UNIT_SPELL_EFFECT_1, null)
		set index_0 = index_0 + 1
		exitwhen index_0 == 16
	endloop
	call TriggerAddCondition(gg_trg_Dwarf_Cannon_1, Condition(function Trig_Dwarf_Cannon_Conditions))
	call TriggerAddAction(gg_trg_Dwarf_Cannon_1, function Trig_Dwarf_Cannon_Actions)
	set gg_trg_Load_Sniper_1 = CreateTrigger()
	call TriggerAddAction(gg_trg_Load_Sniper_1, function Trig_Load_Sniper_Actions)
	call ConditionalTriggerExecute(gg_trg_InitHashtable_1)
	call ConditionalTriggerExecute(gg_trg_InitSystem_1)
	call ConditionalTriggerExecute(gg_trg_Init_kreeps_1)
	call ConditionalTriggerExecute(gg_trg_Drenor_Bull_Load_1)
endfunction

function config takes nothing returns nothing
	call SetMapName("TRIGSTR_001")
	call SetMapDescription("TRIGSTR_003")
	call SetPlayers($A)
	call SetTeams($A)
	call SetGamePlacement(MAP_PLACEMENT_TEAMS_TOGETHER_1)
	call DefineStartLocation(0, 4928., 3840.)
	call DefineStartLocation(1, 4928., 3840.)
	call DefineStartLocation(2, 4928., 3840.)
	call DefineStartLocation(3, 4928., 3840.)
	call DefineStartLocation(4, 4928., 3840.)
	call DefineStartLocation(5, 4928., 3840.)
	call DefineStartLocation(6, 4928., 3840.)
	call DefineStartLocation(7, 4928., 3840.)
	call DefineStartLocation(8, 4928., 3840.)
	call DefineStartLocation(9, 4928., 3840.)
	call SetPlayerStartLocation(Player(0), 0)
	call ForcePlayerStartLocation(Player(0), 0)
	call SetPlayerColor(Player(0), ConvertPlayerColor(0))
	call SetPlayerRacePreference(Player(0), RACE_PREF_HUMAN_1)
	call SetPlayerRaceSelectable(Player(0), false)
	call SetPlayerController(Player(0), MAP_CONTROL_USER_1)
	call SetPlayerStartLocation(Player(1), 1)
	call ForcePlayerStartLocation(Player(1), 1)
	call SetPlayerColor(Player(1), ConvertPlayerColor(1))
	call SetPlayerRacePreference(Player(1), RACE_PREF_HUMAN_1)
	call SetPlayerRaceSelectable(Player(1), false)
	call SetPlayerController(Player(1), MAP_CONTROL_USER_1)
	call SetPlayerStartLocation(Player(2), 2)
	call ForcePlayerStartLocation(Player(2), 2)
	call SetPlayerColor(Player(2), ConvertPlayerColor(2))
	call SetPlayerRacePreference(Player(2), RACE_PREF_HUMAN_1)
	call SetPlayerRaceSelectable(Player(2), false)
	call SetPlayerController(Player(2), MAP_CONTROL_USER_1)
	call SetPlayerStartLocation(Player(3), 3)
	call ForcePlayerStartLocation(Player(3), 3)
	call SetPlayerColor(Player(3), ConvertPlayerColor(3))
	call SetPlayerRacePreference(Player(3), RACE_PREF_HUMAN_1)
	call SetPlayerRaceSelectable(Player(3), false)
	call SetPlayerController(Player(3), MAP_CONTROL_USER_1)
	call SetPlayerStartLocation(Player(4), 4)
	call ForcePlayerStartLocation(Player(4), 4)
	call SetPlayerColor(Player(4), ConvertPlayerColor(4))
	call SetPlayerRacePreference(Player(4), RACE_PREF_HUMAN_1)
	call SetPlayerRaceSelectable(Player(4), false)
	call SetPlayerController(Player(4), MAP_CONTROL_USER_1)
	call SetPlayerStartLocation(Player(5), 5)
	call ForcePlayerStartLocation(Player(5), 5)
	call SetPlayerColor(Player(5), ConvertPlayerColor(5))
	call SetPlayerRacePreference(Player(5), RACE_PREF_HUMAN_1)
	call SetPlayerRaceSelectable(Player(5), false)
	call SetPlayerController(Player(5), MAP_CONTROL_USER_1)
	call SetPlayerStartLocation(Player(6), 6)
	call ForcePlayerStartLocation(Player(6), 6)
	call SetPlayerColor(Player(6), ConvertPlayerColor(6))
	call SetPlayerRacePreference(Player(6), RACE_PREF_HUMAN_1)
	call SetPlayerRaceSelectable(Player(6), false)
	call SetPlayerController(Player(6), MAP_CONTROL_USER_1)
	call SetPlayerStartLocation(Player(7), 7)
	call ForcePlayerStartLocation(Player(7), 7)
	call SetPlayerColor(Player(7), ConvertPlayerColor(7))
	call SetPlayerRacePreference(Player(7), RACE_PREF_HUMAN_1)
	call SetPlayerRaceSelectable(Player(7), false)
	call SetPlayerController(Player(7), MAP_CONTROL_USER_1)
	call SetPlayerStartLocation(Player(8), 8)
	call ForcePlayerStartLocation(Player(8), 8)
	call SetPlayerColor(Player(8), ConvertPlayerColor(8))
	call SetPlayerRacePreference(Player(8), RACE_PREF_HUMAN_1)
	call SetPlayerRaceSelectable(Player(8), false)
	call SetPlayerController(Player(8), MAP_CONTROL_USER_1)
	call SetPlayerStartLocation(Player($B), 9)
	call ForcePlayerStartLocation(Player($B), 9)
	call SetPlayerColor(Player($B), ConvertPlayerColor($B))
	call SetPlayerRacePreference(Player($B), RACE_PREF_UNDEAD_1)
	call SetPlayerRaceSelectable(Player($B), false)
	call SetPlayerController(Player($B), MAP_CONTROL_COMPUTER_1)
	call InitCustomTeams()
	call SetStartLocPrioCount(0, 8)
	call SetStartLocPrio(0, 0, 1, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(0, 1, 2, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(0, 2, 3, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(0, 3, 4, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(0, 4, 5, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(0, 5, 6, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(0, 6, 7, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(0, 7, 8, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrioCount(1, 8)
	call SetStartLocPrio(1, 0, 0, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(1, 1, 2, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(1, 2, 3, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(1, 3, 4, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(1, 4, 5, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(1, 5, 6, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(1, 6, 7, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(1, 7, 8, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrioCount(2, 8)
	call SetStartLocPrio(2, 0, 0, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(2, 1, 1, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(2, 2, 3, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(2, 3, 4, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(2, 4, 5, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(2, 5, 6, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(2, 6, 7, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(2, 7, 8, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrioCount(3, 8)
	call SetStartLocPrio(3, 0, 0, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(3, 1, 1, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(3, 2, 2, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(3, 3, 4, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(3, 4, 5, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(3, 5, 6, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(3, 6, 7, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(3, 7, 8, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrioCount(4, 8)
	call SetStartLocPrio(4, 0, 0, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(4, 1, 1, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(4, 2, 2, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(4, 3, 3, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(4, 4, 5, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(4, 5, 6, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(4, 6, 7, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(4, 7, 8, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrioCount(5, 8)
	call SetStartLocPrio(5, 0, 0, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(5, 1, 1, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(5, 2, 2, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(5, 3, 3, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(5, 4, 4, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(5, 5, 6, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(5, 6, 7, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(5, 7, 8, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrioCount(6, 8)
	call SetStartLocPrio(6, 0, 0, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(6, 1, 1, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(6, 2, 2, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(6, 3, 3, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(6, 4, 4, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(6, 5, 5, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(6, 6, 7, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(6, 7, 8, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrioCount(7, 8)
	call SetStartLocPrio(7, 0, 0, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(7, 1, 1, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(7, 2, 2, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(7, 3, 3, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(7, 4, 4, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(7, 5, 5, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(7, 6, 6, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(7, 7, 8, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrioCount(8, 8)
	call SetStartLocPrio(8, 0, 0, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(8, 1, 1, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(8, 2, 2, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(8, 3, 3, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(8, 4, 4, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(8, 5, 5, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(8, 6, 6, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(8, 7, 7, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrioCount(9, 3)
	call SetStartLocPrio(9, 0, 0, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(9, 1, 1, MAP_LOC_PRIO_HIGH_1)
	call SetStartLocPrio(9, 2, 2, MAP_LOC_PRIO_HIGH_1)
endfunction